<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第05篇:手写JavaRPC框架之执行层思路 | 编程牛马</title>
    <meta name="description" content="From Arco">
    <meta name="generator" content="VitePress v1.0.1">
    <link rel="preload stylesheet" href="/assets/style.CYOFn8T5.css" as="style">
    
    <script type="module" src="/assets/app.CBF8zwU6.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Bu8hRsVA.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.COatvJYj.js">
    <link rel="modulepreload" href="/assets/chunks/framework.C9DUt1S1.js">
    <link rel="modulepreload" href="/assets/project_mojito_第05篇_手写JavaRPC框架之执行层思路.md.CU9Kaw7N.lean.js">
    <link rel="icon" type="image/svg+xml" href="https://img.springlearn.cn/learn_d98f09cdad8fa38168ec59c15a508490.ico">
    <link rel="icon" type="image/png" href="https://img.springlearn.cn/learn_d98f09cdad8fa38168ec59c15a508490.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-a71c4469><!--[--><!--]--><!--[--><span tabindex="-1" data-v-46019df1></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-46019df1> Skip to content </a><!--]--><!----><header class="VPNav" data-v-a71c4469 data-v-ac265706><div class="VPNavBar has-sidebar top" data-v-ac265706 data-v-83df8441><div class="wrapper" data-v-83df8441><div class="container" data-v-83df8441><div class="title" data-v-83df8441><div class="VPNavBarTitle has-sidebar" data-v-83df8441 data-v-b61df317><a class="title" href="/" data-v-b61df317><!--[--><!--]--><!--[--><img class="VPImage logo" src="https://img.springlearn.cn/learn_d98f09cdad8fa38168ec59c15a508490.ico" alt data-v-22633e93><!--]--><span data-v-b61df317>西魏陶渊明</span><!--[--><!--]--></a></div></div><div class="content" data-v-83df8441><div class="content-body" data-v-83df8441><!--[--><!--]--><div class="VPNavBarSearch search" data-v-83df8441><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-83df8441 data-v-d512fd3b><span id="main-nav-aria-label" class="visually-hidden" data-v-d512fd3b>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-d512fd3b data-v-0d435481><!--[--><span data-v-0d435481>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d512fd3b data-v-11663cec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-11663cec><span class="text" data-v-11663cec><!----><span data-v-11663cec>编程牛马</span><span class="vpi-chevron-down text-icon" data-v-11663cec></span></span></button><div class="menu" data-v-11663cec><div class="VPMenu" data-v-11663cec data-v-164ca3c2><div class="items" data-v-164ca3c2><!--[--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link" href="/guide/" data-v-298139c0><!--[-->前端<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link" href="/java/" data-v-298139c0><!--[-->后端<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link" href="/project/" data-v-298139c0><!--[-->项目<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link" href="/test/" data-v-298139c0><!--[-->测试<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link" href="/ai/" data-v-298139c0><!--[-->AI<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/scm/" tabindex="0" data-v-d512fd3b data-v-0d435481><!--[--><span data-v-0d435481>供应链</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/components/" tabindex="0" data-v-d512fd3b data-v-0d435481><!--[--><span data-v-0d435481>VUI</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/design/" tabindex="0" data-v-d512fd3b data-v-0d435481><!--[--><span data-v-0d435481>设计与规范</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d512fd3b data-v-11663cec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-11663cec><span class="text" data-v-11663cec><!----><span data-v-11663cec>Library</span><span class="vpi-chevron-down text-icon" data-v-11663cec></span></span></button><div class="menu" data-v-11663cec><div class="VPMenu" data-v-11663cec data-v-164ca3c2><div class="items" data-v-164ca3c2><!--[--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://animate.style/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->animate<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://anseki.github.io/leader-line/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->leader-line<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://github.com/catdad/canvas-confetti" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->canvas-confetti<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://www.relation-graph.com/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->relation-graph<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://github.com/rough-stuff/rough-notation" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->rough-notation<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://github.com/TahaSh/swapy" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->swapy<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://loading.io/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->loading.io<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d512fd3b data-v-11663cec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-11663cec><span class="text" data-v-11663cec><!----><span data-v-11663cec>志同道合</span><span class="vpi-chevron-down text-icon" data-v-11663cec></span></span></button><div class="menu" data-v-11663cec><div class="VPMenu" data-v-11663cec data-v-164ca3c2><div class="items" data-v-164ca3c2><!--[--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://me.yicode.tech/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->陈随易<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-164ca3c2 data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://vue-compiler.iamouyang.cn/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->Vue3<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-d512fd3b data-v-11663cec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-11663cec><span class="text" data-v-11663cec><!----><span data-v-11663cec>知识库</span><span class="vpi-chevron-down text-icon" data-v-11663cec></span></span></button><div class="menu" data-v-11663cec><div class="VPMenu" data-v-11663cec data-v-164ca3c2><div class="items" data-v-164ca3c2><!--[--><!--[--><div class="VPMenuGroup" data-v-164ca3c2 data-v-0eb0fd3d><p class="title" data-v-0eb0fd3d>前端知识库</p><!--[--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://www.prettier.cn/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->prettier<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://www.prettier.cn/playground/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->prettier online<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://eslint.org/docs/latest/use/getting-started" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://eslint.org/play/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint online<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://eslint.vuejs.org/user-guide/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://ota-meshi.github.io/eslint-plugin-vue-demo/" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint vue demo online<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://github.com/prettier/eslint-plugin-prettier" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint-plugin-prettier<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://github.com/prettier/eslint-config-prettier" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->eslint-config-prettier<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0eb0fd3d data-v-298139c0><a class="VPLink link vp-external-link-icon" href="https://vitepress.dev/zh/reference/frontmatter-config" target="_blank" rel="noreferrer" data-v-298139c0><!--[-->VitePress<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-83df8441 data-v-3dd3d3d3><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-3dd3d3d3 data-v-37a5962e data-v-a7c5feeb><span class="check" data-v-a7c5feeb><span class="icon" data-v-a7c5feeb><!--[--><span class="vpi-sun sun" data-v-37a5962e></span><span class="vpi-moon moon" data-v-37a5962e></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-83df8441 data-v-0ed94da8 data-v-b09dcec9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-b09dcec9 data-v-34d1bf89><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-83df8441 data-v-208c3354 data-v-11663cec><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-11663cec><span class="vpi-more-horizontal icon" data-v-11663cec></span></button><div class="menu" data-v-11663cec><div class="VPMenu" data-v-11663cec data-v-164ca3c2><!----><!--[--><!--[--><!----><div class="group" data-v-208c3354><div class="item appearance" data-v-208c3354><p class="label" data-v-208c3354>Appearance</p><div class="appearance-action" data-v-208c3354><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-208c3354 data-v-37a5962e data-v-a7c5feeb><span class="check" data-v-a7c5feeb><span class="icon" data-v-a7c5feeb><!--[--><span class="vpi-sun sun" data-v-37a5962e></span><span class="vpi-moon moon" data-v-37a5962e></span><!--]--></span></span></button></div></div></div><div class="group" data-v-208c3354><div class="item social-links" data-v-208c3354><div class="VPSocialLinks social-links-list" data-v-208c3354 data-v-b09dcec9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-b09dcec9 data-v-34d1bf89><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-83df8441 data-v-6cd47e1a><span class="container" data-v-6cd47e1a><span class="top" data-v-6cd47e1a></span><span class="middle" data-v-6cd47e1a></span><span class="bottom" data-v-6cd47e1a></span></span></button></div></div></div></div><div class="divider" data-v-83df8441><div class="divider-line" data-v-83df8441></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-a71c4469 data-v-a1eaa14c><div class="container" data-v-a1eaa14c><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a1eaa14c><span class="vpi-align-left menu-icon" data-v-a1eaa14c></span><span class="menu-text" data-v-a1eaa14c>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a1eaa14c data-v-28a17c2e><button data-v-28a17c2e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-a71c4469 data-v-5c27baa2><div class="curtain" data-v-5c27baa2></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-5c27baa2><span class="visually-hidden" id="sidebar-aria-label" data-v-5c27baa2> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-5c27baa2><section class="VPSidebarItem level-0 collapsible" data-v-5c27baa2 data-v-83eacefa><div class="item" role="button" tabindex="0" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><h2 class="text" data-v-83eacefa>Alfred Plugin</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-83eacefa><span class="vpi-chevron-right caret-icon" data-v-83eacefa></span></div></div><div class="items" data-v-83eacefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/alfred/alfred-worflow-js.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>Alfred-workflow-js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/alfred/create-alfred.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>Alfred添加工作流</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/alfred/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7%E5%BF%85%E5%A4%87%E7%A5%9E%E5%99%A8Alfred%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>Mac 效率工具必备神器Alfred插件开发</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-5c27baa2><section class="VPSidebarItem level-0 collapsible" data-v-5c27baa2 data-v-83eacefa><div class="item" role="button" tabindex="0" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><h2 class="text" data-v-83eacefa>JMVN</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-83eacefa><span class="vpi-chevron-right caret-icon" data-v-83eacefa></span></div></div><div class="items" data-v-83eacefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/introduction-install.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>快速安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/introduction.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>工具介绍</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/jmvn-export.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>数据模型导出</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/jmvn-init.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>创建项目</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/jmvn-install.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>数据模型安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/jmvn-plugin.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>插件开发</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jmvn/%E5%9F%BA%E4%BA%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84Java%E8%84%9A%E6%89%8B%E6%9E%B6.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>基于命令行的Java脚手架</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-5c27baa2><section class="VPSidebarItem level-0 collapsible" data-v-5c27baa2 data-v-83eacefa><div class="item" role="button" tabindex="0" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><h2 class="text" data-v-83eacefa>JVM</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-83eacefa><span class="vpi-chevron-right caret-icon" data-v-83eacefa></span></div></div><div class="items" data-v-83eacefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jvm/JVM.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>JVM内存模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jvm/JVM%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>JVM参数配置说明</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/jvm/JVM%E8%B0%83%E4%BC%98.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>JVM调优</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-5c27baa2><section class="VPSidebarItem level-0 collapsible" data-v-5c27baa2 data-v-83eacefa><div class="item" role="button" tabindex="0" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><h2 class="text" data-v-83eacefa>知识体系</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-83eacefa><span class="vpi-chevron-right caret-icon" data-v-83eacefa></span></div></div><div class="items" data-v-83eacefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><!----><!----></div><!--]--></div></section></div><div class="group" data-v-5c27baa2><section class="VPSidebarItem level-0 collapsible has-active" data-v-5c27baa2 data-v-83eacefa><div class="item" role="button" tabindex="0" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><h2 class="text" data-v-83eacefa>Mojito</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-83eacefa><span class="vpi-chevron-right caret-icon" data-v-83eacefa></span></div></div><div class="items" data-v-83eacefa><!--[--><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E7%AC%AC01%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%80%9D%E8%B7%AF%E5%88%86%E6%9E%90.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>第01篇:手写JavaRPC框架之思路分析</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E7%AC%AC02%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>第02篇:手写JavaRPC框架之设计思路</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E7%AC%AC03%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%90%9E%E5%AE%9A%E5%BA%8F%E5%88%97%E5%8C%96.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>第03篇:手写JavaRPC框架之搞定序列化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E7%AC%AC04%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%90%9E%E5%AE%9A%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>第04篇:手写JavaRPC框架之搞定网络通信</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E7%AC%AC05%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%89%A7%E8%A1%8C%E5%B1%82%E6%80%9D%E8%B7%AF.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>第05篇:手写JavaRPC框架之执行层思路</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/HTTP%E5%8D%8F%E8%AE%AE%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>HTTP协议使用示例</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/RPC%E5%8D%8F%E8%AE%AE%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>RPC协议使用示例</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-83eacefa data-v-83eacefa><div class="item" data-v-83eacefa><div class="indicator" data-v-83eacefa></div><a class="VPLink link link" href="/project/mojito/%E5%8D%8F%E8%AE%AE.html" data-v-83eacefa><!--[--><p class="text" data-v-83eacefa>Protocol协议篇设计思路</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-a71c4469 data-v-6cf7a83a><div class="VPDoc has-sidebar has-aside" data-v-6cf7a83a data-v-4c88dc60><!--[--><!--]--><div class="container" data-v-4c88dc60><div class="aside" data-v-4c88dc60><div class="aside-curtain" data-v-4c88dc60></div><div class="aside-container" data-v-4c88dc60><div class="aside-content" data-v-4c88dc60><div class="VPDocAside" data-v-4c88dc60 data-v-a6238163><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--><div><img src="https://img.springlearn.cn/learn_c3d5074d94563b8297f81633f171d230.jpeg"></div><!--]--><!--]--><!--]--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-a6238163 data-v-59430de4><div class="content" data-v-59430de4><div class="outline-marker" data-v-59430de4></div><div class="outline-title" role="heading" aria-level="2" data-v-59430de4>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-59430de4><span class="visually-hidden" id="doc-outline-aria-label" data-v-59430de4> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-59430de4 data-v-a2177d3a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-a6238163></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4c88dc60><div class="content-container" data-v-4c88dc60><!--[--><!--]--><main class="main" data-v-4c88dc60><div style="position:relative;" class="vp-doc _project_mojito_%E7%AC%AC05%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%89%A7%E8%A1%8C%E5%B1%82%E6%80%9D%E8%B7%AF" data-v-4c88dc60><div><p><img src="https://img.springlearn.cn/blog/d0e05f0a0f96e2399aefe0e8fe00e23c.png" alt=""></p><p><strong>作者:</strong> 西魏陶渊明</p><p><strong>博客:</strong> <a href="https://blog.springlearn.cn/" target="_blank" rel="noreferrer">https://blog.springlearn.cn/</a></p><blockquote><p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p></blockquote><p><img src="https://img.springlearn.cn/blog/8f3392b9badb093f9e1a6472b4a98487.gif" alt=""></p><h2 id="一、思路分析" tabindex="-1">一、思路分析 <a class="header-anchor" href="#一、思路分析" aria-label="Permalink to &quot;一、思路分析&quot;">​</a></h2><p><img src="https://img.springlearn.cn/blog/fe6f42fd58fad7a1ca190f66c730405b.png" alt=""></p><p>通过前四篇文章的一起 Coding, 我们已经完成了 30%的工作,即完成了一个通信层的搭建。在不依赖任何 web 容器的情况下,可以实现服务之间的通信工作。就像下面这样。</p><p><strong>客户端&amp;服务端通信</strong></p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    /**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> liuxin</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 个人博客：https://java.springlearn.cn</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 公众号：西魏陶渊明  ｛关注获取学习源码｝</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     * 2022/8/11 23:12</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DisplayName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;构建服务端【阻塞方式】&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() throws Exception {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       Mojito.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RpcRequest.class, RpcResponse.class)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // 业务层,读取请求对象,返回结果</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">businessHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((channelContext, request) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RpcResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">666</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Test</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DisplayName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;构建客户端【同步方式】&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> clientSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() throws Exception{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Client&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RpcRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">RpcResponse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mojito.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(RpcRequest.class, RpcResponse.class)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6666</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(client.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">send</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RpcRequest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>这只是完成了通信, 就好比,两台服务器之间建立了沟通管道,但是究竟怎么用这个管道呢? 如何将客户端的请求参数发送到服务端的服务器上执行结果,并返回给客户端呢? 这就是本篇文章要讨论的话题。</p><p><img src="https://img.springlearn.cn/blog/70b0a4323f80010510da069e00929af9.png" alt=""></p><p>暂且我们把这一层叫做 RPC 执行层吧。按照老套路,在真正开始 Coding 之前,我们先梳理一下逻辑,画一个最基础的图。</p><p><img src="https://img.springlearn.cn/blog/e159fc7ffa56083fdbb9b81048b9c5ee.png" alt=""></p><ul><li>左边客户端一个方法, 有 4 个服务端的实现。</li><li>右边某个服务端有一个具体的实现。</li></ul><p>左边客户端的接口,通过代理的方式,将客户端的参数通过网络管道传输给某台服务端的本地进行执行。执行后获取结果,返回给客户端的调用方。而这些都是通过代理的方式实现的,所以开发者就好像调用本地方法一样。实现一次远程方法的调用。</p><p>以上是最最基础的远程调用的过程,但是如果就这的话就太基础了,下面我们会在这个基础上去做更多的事情。</p><h3 id="_1-1-客户端实现思路" tabindex="-1">1.1 客户端实现思路 <a class="header-anchor" href="#_1-1-客户端实现思路" aria-label="Permalink to &quot;1.1 客户端实现思路&quot;">​</a></h3><p>RPC 服务,服务端会给客户端提供一个 API 包,这个包里面没有具体的实现,但是客户端能直接进行调用。学习 Java 的都知道接口是不能实例化的,但是为什么服务端给我们的 API,我们能直接调用呢? 当然是代理了。所以我们要学的第一个东西,就是学会代理。</p><ol><li>使用代理实现接口的实例化。【代理是我们必须要掌握的】</li></ol><p>但是代理层里面怎么做呢?</p><ol start="2"><li>代理层将要调用的远程类和当前的客户端的参数,进行封装,然后通过通信层发送给服务端进行直接,然后拿到结果返回。这里面可能就设计到异步转同步的问题,但是没关系我们通信层直接就提供了实现。</li></ol><p>以上就是客户端最基础的功能了。但是我们不满足于此, 市面上 RPC 框架有的功能,我们也要有。比如那些呢? 负载均衡、容错策略、事件广播我们也要有。那么他们究竟怎么做的呢?</p><ol start="3"><li><p>负载均衡,我们看上面客户端的图,会发现这个服务有 4 个实现 [<code>172.168.10.1</code>,<code>172.168.10.2</code>,<code>172.168.10.3</code>,<code>172.168.10.4</code>],说明服务端可能是集群部署的。那么既然有 4 个实例,我们就不能尽管这，一个 ip 进行进行调用,那么如何尽量让每个实例都能收到请求呢? 这就是负载均衡。</p></li><li><p>容错策略,当我们调用一台实例出错了,直接报错? 还是重试一下请求？或者是换一个实例在请求呢? 这就是容错策略。甚至我们还可以实现一个熔断器。</p></li></ol><p><img src="https://img.springlearn.cn/blog/9d8ac7a0fcfb51c2951a93a86f7a3961.png" alt=""></p><p>这里不会设计也没关系,我们会抄,哦,不对是借鉴。以下是dubbo的容错策略。</p><p><img src="https://img.springlearn.cn/blog/ba911f5f18960a64e512665ffa0f09e0.png" alt=""></p><ol start="5"><li>既然客户端有这个服务的所有实例信息,那么是不是不仅可以进行点对点的请求，还是能进行广播呢。 如下右图,同一个请求,如果发现是广播模式,就不在负载均衡的选其中的一个进行执行,而是每个都进行通知。</li></ol><p><img src="https://img.springlearn.cn/blog/bf08e6ff0fd9428f810b39174b8c51ed.png" alt=""></p><p>这五点就是客户端要具备的基础能力。除此之外客户端还要有断线重连, 自动剔除无效的链接的功能。极端情况也还要考虑当注册中心也挂了,无法找到服务端地址的场景,本地是不是也要维护一个服务连接的注册表。</p><h3 id="_1-2-服务端实现思路" tabindex="-1">1.2 服务端实现思路 <a class="header-anchor" href="#_1-2-服务端实现思路" aria-label="Permalink to &quot;1.2 服务端实现思路&quot;">​</a></h3><p>服务端我们就可以参考 Web 容器的思路，比如 Servle 如何处理请求呢? http 过来就是一个 url,如何匹配到要执行的方法的呢?</p><ol><li>服务启动将 API 实现保存到 Map 接口中。</li><li>服务收到请求,Dispatch 根据请求信息从 map 中获取执行器。</li><li>通过反射获取执行结果,返回给调用方。</li></ol><p><img src="https://img.springlearn.cn/blog/cb8c0658eee15b5b8a5790fa5bb621ef.png" alt=""></p><p>同时将自己的信息注册到注册中心,让客户端能注册中心发现自己。</p><p><img src="https://img.springlearn.cn/blog/3ec7c0abdc42dd28e81a1d48a9ec41dc.png" alt=""></p><p>好了我们实现代码的大概思路就是这些,后面我们会一步一会去实现上面我们所说的功能。下面我们来看下 如果要实现上面的思路,还需要那些技术储备和软实力吧。</p><h2 id="二、技术储备" tabindex="-1">二、技术储备 <a class="header-anchor" href="#二、技术储备" aria-label="Permalink to &quot;二、技术储备&quot;">​</a></h2><p>要实现上面的想法,究竟需要哪些技术储备呢? 最基础的就是代理了。除此之外还要有架构设计能力。</p><h3 id="_2-1-代理模式" tabindex="-1">2.1 代理模式 <a class="header-anchor" href="#_2-1-代理模式" aria-label="Permalink to &quot;2.1 代理模式&quot;">​</a></h3><p>上面我们所说的负载均衡，容错策略，广播都要在代理中实现。</p><h4 id="_2-1-1-jdk-代理" tabindex="-1">2.1.1 JDK 代理 <a class="header-anchor" href="#_2-1-1-jdk-代理" aria-label="Permalink to &quot;2.1.1 JDK 代理&quot;">​</a></h4><p>JDK 代理必须要实现接口,第二个参数是接口数组,第三个参数是<code>InvocationHandler</code>。属于比较基础的内容。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProxyFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> User</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        User user </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (User) Proxy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newProxyInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">currentThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getContextClassLoader</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> Class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]{User.class}, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InvocationHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">invoke</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Method </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;queryName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Jay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-1-2-cglib-代理" tabindex="-1">2.1.2 Cglib 代理 <a class="header-anchor" href="#_2-1-2-cglib-代理" aria-label="Permalink to &quot;2.1.2 Cglib 代理&quot;">​</a></h4><p>Cglib 代理,代理类不用有接口。</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;jay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] args) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Person person </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Person) Enhancer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">create</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Person.class, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MethodInterceptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">intercept</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Object </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Method </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">objects</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, MethodProxy </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">methodProxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (method.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;queryName&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;代理:Jay&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">queryName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><h3 id="_2-2-负载均衡策略" tabindex="-1">2.2 负载均衡策略 <a class="header-anchor" href="#_2-2-负载均衡策略" aria-label="Permalink to &quot;2.2 负载均衡策略&quot;">​</a></h3><h4 id="_2-2-1-随机算法" tabindex="-1">2.2.1 随机算法 <a class="header-anchor" href="#_2-2-1-随机算法" aria-label="Permalink to &quot;2.2.1 随机算法&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">String</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> services) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Random random </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Random</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] addressArr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // random</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> addressArr[random.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nextInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">size</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre></div><h4 id="_2-2-2-轮训算法" tabindex="-1">2.2.2 轮训算法 <a class="header-anchor" href="#_2-2-2-轮训算法" aria-label="Permalink to &quot;2.2.2 轮训算法&quot;">​</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RoundBalanceTest</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; services </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Arrays.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">asList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;service1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;service2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;service3&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        XxlBalanceTest.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">manyRoute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // 请求次数,取模。serviceKey 可以更细粒度的控制轮训</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ColorConsole.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">colorPrintln</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;轮训负载({}):{}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, i, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(services));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> final</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AtomicInteger atomicInteger </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AtomicInteger</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">round</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> atomicInteger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer.MAX_VALUE) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            atomicInteger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        atomicInteger.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">incrementAndGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] toArray </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> services.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> toArray[count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">%</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> toArray.length];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-2-3-加权算法" tabindex="-1">2.2.3 加权算法 <a class="header-anchor" href="#_2-2-3-加权算法" aria-label="Permalink to &quot;2.2.3 加权算法&quot;">​</a></h4><p>加权算法的有很多的变异算法, 可以通过配置的方式，也可以通过某种策略动态的给每台服务器进行加权，从而来提高被轮训到的次数。 这里说两种网上常见的实现。</p><p><strong>简单加权算法</strong> 一个简单暴力的加权算法,如下图。按照权重，重新构建集合。然后再将集合进行取模轮训即可。即可实现一个最简单 的加权算法。</p><p><img src="https://img.springlearn.cn/blog/learn_1652884737000.png" alt=""></p><p>代码实现也是比较简单的,如下代码。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>public class WeightBalanceTest {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private static class Server {</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        private String host;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        private Integer port;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        public Server(String host, Integer port) {</span></span>
<span class="line"><span>            this.host = host;</span></span>
<span class="line"><span>            this.port = port;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        @Override</span></span>
<span class="line"><span>        public String toString() {</span></span>
<span class="line"><span>            return &quot;Server{&quot; +</span></span>
<span class="line"><span>                    &quot;host=&#39;&quot; + host + &#39;\&#39;&#39; +</span></span>
<span class="line"><span>                    &quot;, port=&quot; + port +</span></span>
<span class="line"><span>                    &#39;}&#39;;</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    private static final AtomicInteger atomicInteger = new AtomicInteger();</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static Server round(List&lt;Server&gt; services) {</span></span>
<span class="line"><span>        int count = atomicInteger.get();</span></span>
<span class="line"><span>        if (count &gt;= Integer.MAX_VALUE) {</span></span>
<span class="line"><span>            atomicInteger.set(0);</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        atomicInteger.incrementAndGet();</span></span>
<span class="line"><span>        Server[] toArray = services.toArray(new Server[0]);</span></span>
<span class="line"><span>        return toArray[count % toArray.length];</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    public static void main(String[] args) {</span></span>
<span class="line"><span>        Map&lt;Server, Integer&gt; confWeight = new HashMap&lt;&gt;();</span></span>
<span class="line"><span>        confWeight.put(new Server(&quot;127.0.0.1&quot;, 80), 2);</span></span>
<span class="line"><span>        confWeight.put(new Server(&quot;127.0.0.1&quot;, 81), 3);</span></span>
<span class="line"><span>        confWeight.put(new Server(&quot;127.0.0.1&quot;, 82), 5);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        List&lt;Server&gt; servers = new ArrayList&lt;&gt;();</span></span>
<span class="line"><span>        for (Map.Entry&lt;Server, Integer&gt; entity : confWeight.entrySet()) {</span></span>
<span class="line"><span>            Server server = entity.getKey();</span></span>
<span class="line"><span>            Integer weight = entity.getValue();</span></span>
<span class="line"><span>            for (int i = 0; i &lt; weight; i++) {</span></span>
<span class="line"><span>                servers.add(server);</span></span>
<span class="line"><span>            }</span></span>
<span class="line"><span>        }</span></span>
<span class="line"><span>        Loops.loop(10, i -&gt; {</span></span>
<span class="line"><span>            ColorConsole.colorPrintln(&quot;第{}次,权重轮训{}&quot;, i, round(servers));</span></span>
<span class="line"><span>        });</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>第0次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=80}</span></span>
<span class="line"><span>第1次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=80}</span></span>
<span class="line"><span>第2次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=82}</span></span>
<span class="line"><span>第3次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=82}</span></span>
<span class="line"><span>第4次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=82}</span></span>
<span class="line"><span>第5次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=82}</span></span>
<span class="line"><span>第6次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=82}</span></span>
<span class="line"><span>第7次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=81}</span></span>
<span class="line"><span>第8次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=81}</span></span>
<span class="line"><span>第9次,权重轮训Server{host=&#39;127.0.0.1&#39;, port=81}</span></span></code></pre></div><p>但这样还是不均匀的, 相同的 ip 可能被连续的访问到其实就没有做到负载均衡。</p><p><strong>平滑加权算法</strong></p><p>主要解决上面那种不平滑的方案。这种方案是由 nginx (opens new window)提出来的。 算法的数学原理。</p><ul><li>最大权重，减总权重</li><li>当前权重加上原权重 如下权重变化。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>| 轮数 | 选择前的当前权重 | 选择节点 | 选择后的当前权重 |</span></span>
<span class="line"><span>| ---- | ---------------- | -------- | ---------------- |</span></span>
<span class="line"><span>| 1    | {5, 1, 1}        | a        | {-2, 1, 1}       |</span></span>
<span class="line"><span>| 2    | {3, 2, 2}        | a        | {-4, 2, 2}       |</span></span>
<span class="line"><span>| 3    | {1, 3, 3}        | b        | {1, -4, 3}       |</span></span>
<span class="line"><span>| 4    | {6, -3, 4}       | a        | {-1, -3, 4}      |</span></span>
<span class="line"><span>| 5    | {4, -2, 5}       | c        | {4, -2, -2}      |</span></span>
<span class="line"><span>| 6    | {9, -1, -1}      | a        | {2, -1, -1}      |</span></span>
<span class="line"><span>| 7    | {7, 0, 0}        | a        | {0, 0, 0}        |</span></span></code></pre></div><p>下面我们通过代码来实现。</p><ul><li>首先我们定义出服务器模型, <code>weight</code> 是初始配置的权重，<code>currentWeight</code> 是计算后的权重。</li><li>初始值 <code>weight = currentWeight</code></li></ul><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">AllArgsConstructor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ToString</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EqualsAndHashCode</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer port;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 初始化权重</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer weight;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 计算后的当前权重</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer currentWeight;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>然后我们根据算法的核心点来选择节点。这里我们先不考虑性能只说思路，有了思路在自己来优化代码。</p><ol><li>==line(3-6)== 首先获取总权重</li><li>==line(8-14)== 然后获取当前最大权重的节点</li><li>==line(16-21)== 重新计算权重(<code>主要使用算法的思想</code>) <ul><li>当前最大权重节点，重新计算权重。当前权重 = 当前权重 - 总权重 + 原始权重</li><li>其他节点，重新计算权重。当前权重 = 当前权重 + 原始权重</li></ul></li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Server </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">selectServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(List</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> servers) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 获取总权重</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Integer totalWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Server server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> servers) {</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            totalWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 根据权重从小到大排序</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; sortByCurrentWeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> servers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Comparator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">comparing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">getCurrentWeight))</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 集合反转,从大到小排序</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Collections.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sortByCurrentWeight);</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 当前最大权重</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Server maxWeightServer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sortByCurrentWeight.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line highlighted"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // 重新计算权重</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Server server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> servers) {</span></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">equals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(maxWeightServer)) {</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCurrentWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> totalWeight);</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setCurrentWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line highlighted"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line highlighted"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> maxWeightServer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p>可以看到非常的平滑均匀，每个 ip 都会被分散。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>第0次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8080, weight=4, currentWeight=1)</span></span>
<span class="line"><span>第1次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8081, weight=2, currentWeight=-1)</span></span>
<span class="line"><span>第2次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8080, weight=4, currentWeight=2)</span></span>
<span class="line"><span>第3次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8082, weight=1, currentWeight=-2)</span></span>
<span class="line"><span>第4次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8080, weight=4, currentWeight=3)</span></span>
<span class="line"><span>第5次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8081, weight=2, currentWeight=0)</span></span>
<span class="line"><span>第6次,平滑权重轮训WeightBalanceTest2.Server(host=127,0,0,1, port=8080, weight=4, currentWeight=4)</span></span></code></pre></div><p>很难想象,手写一个 RPC 框架,执行层所需要的技术储备只有这些而已。可以看出来，重要的是思路，思路决定出路。好了,下面我们就来实现这些思路吧。</p><p>那么你准备好跟我一起 Coding 了吗?</p><p><img src="https://img.springlearn.cn/blog/dcdc576db14dda19819196a4dba05a21.png" alt=""></p></div></div></main><footer class="VPDocFooter" data-v-4c88dc60 data-v-3c307435><!--[--><!--]--><!----><nav class="prev-next" data-v-3c307435><div class="pager" data-v-3c307435><a class="VPLink link pager-link prev" href="/project/mojito/%E7%AC%AC04%E7%AF%87:%E6%89%8B%E5%86%99JavaRPC%E6%A1%86%E6%9E%B6%E4%B9%8B%E6%90%9E%E5%AE%9A%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1.html" data-v-3c307435><!--[--><span class="desc" data-v-3c307435>Previous page</span><span class="title" data-v-3c307435>第04篇:手写JavaRPC框架之搞定网络通信</span><!--]--></a></div><div class="pager" data-v-3c307435><a class="VPLink link pager-link next" href="/project/mojito/HTTP%E5%8D%8F%E8%AE%AE%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B.html" data-v-3c307435><!--[--><span class="desc" data-v-3c307435>Next page</span><span class="title" data-v-3c307435>HTTP协议使用示例</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-a71c4469 data-v-5adb69fb><div class="container" data-v-5adb69fb><p class="message" data-v-5adb69fb>Released under the MIT License.</p><p class="copyright" data-v-5adb69fb>Copyright © 2019-present Evan You</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"design_领域驱动模型的思考与认知.md\":\"D8iFYd78\",\"design_index.md\":\"BbobI_Pc\",\"guide_javascript_esm.md\":\"BY5aJCtg\",\"guide_monnrepo_index.md\":\"DHBd6tc4\",\"guide_web-storm-plugins.md\":\"DQ9XH4JS\",\"design_年终总结汇报大纲.md\":\"q5ktFS9a\",\"design_沟通软实力.md\":\"tBzD7-cz\",\"guide_eslint-plugin.md\":\"DacHo8Oj\",\"guide_vite-plugin.md\":\"VUEyDsiV\",\"guide_monnrepo_monorepo.md\":\"C83wlYgg\",\"design_java代码规范全部奉上.md\":\"DQYYGNlf\",\"guide_typescript_generics.md\":\"BRidb2A5\",\"guide_ts-config-issue.md\":\"iY6cWvWD\",\"eslintprettierconfig.md\":\"CMoJ1Z8f\",\"design_勤劳不能致富.md\":\"DEIqiykY\",\"guide_plugin.md\":\"BZ6JydB8\",\"design_中文文档写作规范.md\":\"CFdVIvvg\",\"guide_typescript_tsconfig.md\":\"B9pvwRxM\",\"guide_javascript_package.md\":\"C-ZITWns\",\"guide_web-storm.md\":\"1HTUPreb\",\"index2.md\":\"PF1vMu0d\",\"index.md\":\"yTLRV1pX\",\"java_countdownlatch.md\":\"D_wb-bqN\",\"java_java异常体系.md\":\"iFdPrGLb\",\"java_spi.md\":\"XH0MfoxF\",\"java_readwritelock.md\":\"BSSxQFxq\",\"java_semaphore.md\":\"DswSw7uO\",\"java_condition.md\":\"B-WNER6k\",\"java_dubbo_dubbo源码解析之客户端consumer.md\":\"B3H5oezX\",\"java_blockingqueue.md\":\"kjrCLWYP\",\"guide_index.md\":\"DDUBW-hN\",\"java_reentrantlock.md\":\"2c7MUuMZ\",\"java_hooks函数.md\":\"DCqB3m3N\",\"java_dubbo_dubbo整合spring的两种实现原理.md\":\"CfPAi03G\",\"java_hashmap.md\":\"-L72hb6D\",\"java_jmx.md\":\"ycULrvZ0\",\"java_mybatis_authplugin.md\":\"Bc3L9zYk\",\"design_六脉神剑.md\":\"BT5vxpJ0\",\"guide_typescript_generics-function.md\":\"Fs8qkR-o\",\"java_index.md\":\"CXS0WcWG\",\"java_contended.md\":\"BQiVnehg\",\"java_cyclicbarrier.md\":\"D4muZ4PD\",\"java_mybatis_metaobject.md\":\"CK6ObLKz\",\"java_mybatis_mapper代理对象创建.md\":\"BxyQvX7g\",\"java_mybatis_mybatis一级二级缓存设计.md\":\"CltlXjnD\",\"java_mybatis_limitplugin.md\":\"p3OjhDXw\",\"java_dubbo_dubbo源码解析之服务端provider.md\":\"iPAl1xo3\",\"java_mybatis_pageplugin.md\":\"Tl20V_zI\",\"java_mybatis_mybatissql日志打印.md\":\"X6SyUq4p\",\"java_mybatis_readme.md\":\"BLIC0Q56\",\"java_mybatis_spring事务整合.md\":\"BmvDlp46\",\"java_mybatis_事务的实现方案.md\":\"CM7UVFin\",\"java_mybatis_mybatis缓存设计.md\":\"CqepW1aQ\",\"java_mybatis_插件分析.md\":\"Di5uGLUF\",\"java_spring_el.md\":\"DEfeVvVP\",\"java_mybatis_mybatis执行流程分析.md\":\"BUpUbvbo\",\"java_spring_aop.md\":\"ByoVR8lZ\",\"java_spring_endpoint监控端点扩展.md\":\"z00D3N-M\",\"java_mybatis_环境搭建.md\":\"CjaXnouG\",\"java_mybatis_配置文件解析.md\":\"Bk4452k0\",\"java_spring_factorybean接口实例化.md\":\"ChXsDyTS\",\"java_mybatis_核心类介绍.md\":\"Cu_TRdSn\",\"java_spring_web接口资源是如何保存起来的.md\":\"DmKQc49J\",\"java_spring_spring动态绑定配置.md\":\"D7ocKXEw\",\"java_spring_spring循环依赖.md\":\"CDLvoRtG\",\"java_spring_spring声明式事务的实现方案.md\":\"Tc_VeVDh\",\"java_spring_core02.md\":\"BPdyldwJ\",\"java_spring_core04.md\":\"BHiokDrn\",\"java_spring_core03.md\":\"CfoL3Ku2\",\"java_spring_core05.md\":\"DAuWZ-ym\",\"java_spring_index.md\":\"BsDsZF5k\",\"java_spring_core09.md\":\"69e8U8mF\",\"java_spring_core11.md\":\"CrVR3Mk4\",\"java_synchronized.md\":\"Bnv6ySK7\",\"java_spring_core10.md\":\"Cfmym9lb\",\"java_spring_core01.md\":\"DCoh5-bF\",\"java_spring_core06.md\":\"DnNWuzp5\",\"java_spring_core08.md\":\"CYeE9tKt\",\"java_spring_core07.md\":\"Cc97bLrI\",\"java_tools_arthas_class-cli.md\":\"BpACehfy\",\"java_tools_arthas_jvm-cli.md\":\"CdgMIK7i\",\"java_tools_arthas_base-cli.md\":\"Dnd8aPaX\",\"java_tools_arthas_readme.md\":\"C17hvWbQ\",\"java_tools_arthas_learn.md\":\"C6zG6u4e\",\"java_tools_disruptor_index.md\":\"BG0mAR7f\",\"java_tools_arthas_watch-cli.md\":\"DbAJqOsk\",\"java_tools_bytecode_javassist.md\":\"BILt4pAD\",\"java_tools_guava_readme.md\":\"C10e1jD3\",\"java_tools_guava_guava-map.md\":\"DzAfjzZl\",\"java_tools_guava_guava-retry.md\":\"Dr-Gkf16\",\"java_tools_guava_guava-cache.md\":\"pMdymXtl\",\"java_tools_jol_readme.md\":\"C2zDH-ME\",\"java_tools_reactor_webflux.md\":\"DulfeIEB\",\"java_tools_druid_readme.md\":\"mXyWqqH0\",\"java_函数式编程.md\":\"JLK7gQQj\",\"java_tools_guava_spring-retry.md\":\"B88WlKZV\",\"java_tools_pool2_readme.md\":\"oKDYwYX2\",\"java_tools_pool2_字符串常量池.md\":\"5mZOEJ43\",\"java_tools_reactor_readme.md\":\"Bqa3XuLm\",\"java_tools_jmh_readme.md\":\"B47evq-Z\",\"java_tools_reflections_index.md\":\"C7USJ_cI\",\"java_tools_apt_index.md\":\"DkQTh8tA\",\"java_四大引用.md\":\"CF1jSmgJ\",\"java_委派双亲之类加载器.md\":\"CAgNxTyM\",\"java_线程的工作状态.md\":\"IvoG5jaE\",\"java_tools_reflections_java泛型.md\":\"fTkDKmQ1\",\"project_jmvn_introduction.md\":\"Dwvd1724\",\"java_分布式锁.md\":\"BAUiUxm6\",\"java_拒绝策略.md\":\"Dl4w9ztH\",\"project_alfred_create-alfred.md\":\"B-Ex3TZx\",\"project_alfred_效率工具必备神器alfred插件开发.md\":\"DqE4DZer\",\"java_原子操作.md\":\"NRSjrqBR\",\"project_jmvn_jmvn-export.md\":\"Bew8QpwP\",\"project_jmvn_jmvn-install.md\":\"BTEk0ZTD\",\"java_线程工厂.md\":\"CY73UwiN\",\"project_jmvn_jmvn-init.md\":\"Dp_Dps-R\",\"project_index.md\":\"9id9j6Q1\",\"java_线程安全.md\":\"DJxHrbR8\",\"project_jmvn_introduction-install.md\":\"Cx2gDY3u\",\"java_线程隔离.md\":\"DDCvtQLg\",\"java_线程组.md\":\"ClO8AXGC\",\"project_jvm_jvm.md\":\"D-6Pv1aO\",\"java_线程池.md\":\"B2fEpMnV\",\"project_alfred_alfred-worflow-js.md\":\"D1dSRK0l\",\"project_jmvn_jmvn-plugin.md\":\"CEFTVtmf\",\"project_jvm_jvm参数配置说明.md\":\"BEG9iWAC\",\"project_mojito_rpc协议使用示例.md\":\"1Eouxk6l\",\"project_mojito_index.md\":\"DaQLUXqr\",\"project_jvm_jvm调优.md\":\"CiIrxtPF\",\"project_mojito_第01篇_手写javarpc框架之思路分析.md\":\"CyuTHtfF\",\"project_mojito_http协议使用示例.md\":\"DxRR6emx\",\"project_mojito_协议.md\":\"Cdpn0cht\",\"project_jmvn_基于命令行的java脚手架.md\":\"GyHJKRx1\",\"project_mojito_第02篇_手写javarpc框架之设计思路.md\":\"DQGpDru_\",\"project_mojito_第03篇_手写javarpc框架之搞定序列化.md\":\"DGs4zECv\",\"scm_index.md\":\"InImzn43\",\"scm_stock_stock.md\":\"AH4JNV3O\",\"teacher.md\":\"BS54-YDQ\",\"scm_finance_计提帐.md\":\"CMuz5Zj7\",\"test_feignmock.md\":\"BujKeATc\",\"scm_introduce_系统介绍.md\":\"CWPf74n_\",\"project_pangu_index.md\":\"DkNeb_78\",\"scm_introduce_白话翻译.md\":\"kyzYmVha\",\"test_mockdataapi.md\":\"yxtyK-wr\",\"test_junit单测类属性注入.md\":\"DJr1Zvgs\",\"test_mockitoapi.md\":\"B_bp77Zv\",\"test_springboottesting.md\":\"BouAEFS2\",\"project_mojito_第05篇_手写javarpc框架之执行层思路.md\":\"CU9Kaw7N\",\"test_单测维护.md\":\"C-C5xNL9\",\"test_事务回滚原理.md\":\"BNyZmMZc\",\"test_影响范围.md\":\"DUDtD6Ca\",\"test_junitapi.md\":\"BcRpGvXI\",\"test_命名规则.md\":\"D-4mQEHX\",\"test_使用断言.md\":\"DZqkpyBP\",\"test_如何知道是否依赖spring容器.md\":\"CVxb-8V3\",\"test_技术选型.md\":\"Bg75k7c4\",\"test_index.md\":\"BH_hHKhY\",\"test_启动缓慢.md\":\"Bf8y8vqj\",\"test_异步验证.md\":\"h2Wm6rzb\",\"test_谁在调用junit.md\":\"BcVO2H9I\",\"test_测试成本.md\":\"td7MK7Uv\",\"test_极限测试.md\":\"6lPBnTrc\",\"test_消息验证.md\":\"DsOnFgJu\",\"test_数据隔离.md\":\"B1CqxfFG\",\"test_案例分享.md\":\"B5lwZJvN\",\"test_测试范围.md\":\"CIlUElpC\",\"project_mojito_第04篇_手写javarpc框架之搞定网络通信.md\":\"Cy-yhDxt\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"编程牛马\",\"description\":\"From Arco\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"lightModeSwitchTitle\":\"太阳\",\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"root\":{\"translations\":{\"button\":{\"buttonText\":\"搜索\",\"buttonAriaLabel\":\"搜索\"},\"modal\":{\"displayDetails\":\"显示详细列表\",\"resetButtonTitle\":\"重置搜索\",\"backButtonTitle\":\"关闭搜索\",\"noResultsText\":\"没有结果\",\"footer\":{\"selectText\":\"选择\",\"selectKeyAriaLabel\":\"输入\",\"navigateText\":\"导航\",\"navigateUpKeyAriaLabel\":\"上箭头\",\"navigateDownKeyAriaLabel\":\"下箭头\",\"closeText\":\"关闭\",\"closeKeyAriaLabel\":\"esc\"}}}}}}},\"outline\":{\"level\":[2,3,4]},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2019-present Evan You\"},\"siteTitle\":\"西魏陶渊明\",\"logo\":\"https://img.springlearn.cn/learn_d98f09cdad8fa38168ec59c15a508490.ico\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"编程牛马\",\"items\":[{\"text\":\"前端\",\"link\":\"/guide/\"},{\"text\":\"后端\",\"link\":\"/java/\"},{\"text\":\"项目\",\"link\":\"/project/\"},{\"text\":\"测试\",\"link\":\"/test/\"},{\"text\":\"AI\",\"link\":\"/ai/\"}]},{\"text\":\"供应链\",\"link\":\"/scm/\"},{\"text\":\"VUI\",\"link\":\"/components/\"},{\"text\":\"设计与规范\",\"link\":\"/design/\"},{\"text\":\"Library\",\"items\":[{\"text\":\"animate\",\"link\":\"https://animate.style/\"},{\"text\":\"leader-line\",\"link\":\"https://anseki.github.io/leader-line/\"},{\"text\":\"canvas-confetti\",\"link\":\"https://github.com/catdad/canvas-confetti\"},{\"text\":\"relation-graph\",\"link\":\"https://www.relation-graph.com/\"},{\"text\":\"rough-notation\",\"link\":\"https://github.com/rough-stuff/rough-notation\"},{\"text\":\"swapy\",\"link\":\"https://github.com/TahaSh/swapy\"},{\"text\":\"loading.io\",\"link\":\"https://loading.io/\"}]},{\"text\":\"志同道合\",\"items\":[{\"text\":\"陈随易\",\"link\":\"https://me.yicode.tech/\"},{\"text\":\"Vue3\",\"link\":\"https://vue-compiler.iamouyang.cn/\"}]},{\"text\":\"知识库\",\"items\":[{\"text\":\"前端知识库\",\"items\":[{\"text\":\"prettier\",\"link\":\"https://www.prettier.cn/\"},{\"text\":\"prettier online\",\"link\":\"https://www.prettier.cn/playground/\"},{\"text\":\"eslint\",\"link\":\"https://eslint.org/docs/latest/use/getting-started\"},{\"text\":\"eslint online\",\"link\":\"https://eslint.org/play/\"},{\"text\":\"eslint vue\",\"link\":\"https://eslint.vuejs.org/user-guide/\"},{\"text\":\"eslint vue demo online\",\"link\":\"https://ota-meshi.github.io/eslint-plugin-vue-demo/\"},{\"text\":\"eslint-plugin-prettier\",\"link\":\"https://github.com/prettier/eslint-plugin-prettier\"},{\"text\":\"eslint-config-prettier\",\"link\":\"https://github.com/prettier/eslint-config-prettier\"},{\"text\":\"VitePress\",\"link\":\"https://vitepress.dev/zh/reference/frontmatter-config\"}]}]}],\"sidebar\":{\"/java/\":[{\"text\":\"Java进阶\",\"collapsed\":false,\"items\":[{\"text\":\"Java并发包队列之BlockingQueue\",\"link\":\"/java/BlockingQueue\"},{\"text\":\"没有条件创造条件Condition\",\"link\":\"/java/Condition\"},{\"text\":\"性能优化之@Contended减少伪共享\",\"link\":\"/java/Contended\"},{\"text\":\"倒计锁 CountDownLatch\",\"link\":\"/java/CountDownLatch\"},{\"text\":\"循环锁屏障 CyclicBarrier\",\"link\":\"/java/CyclicBarrier\"},{\"text\":\"面试再也不怕被HashMap欺负了\",\"link\":\"/java/HashMap\"},{\"text\":\"Java管理扩展\",\"link\":\"/java/JMX\"},{\"text\":\"Java异常体系\",\"link\":\"/java/Java异常体系\"},{\"text\":\"读写锁 ReadWriteLock\",\"link\":\"/java/ReadWriteLock\"},{\"text\":\"重入锁 ReentrantLock\",\"link\":\"/java/ReentrantLock\"},{\"text\":\"SPI服务发现机制\",\"link\":\"/java/SPI\"},{\"text\":\"信号量 Semaphore\",\"link\":\"/java/Semaphore\"},{\"text\":\"JVM钩子hooks函数\",\"link\":\"/java/hooks函数\"},{\"text\":\"synchronized锁升级\",\"link\":\"/java/synchronized\"},{\"text\":\"Lambda函数式编程\",\"link\":\"/java/函数式编程\"},{\"text\":\"分布式锁\",\"link\":\"/java/分布式锁\"},{\"text\":\"线程安全之原子操作\",\"link\":\"/java/原子操作\"},{\"text\":\"Java四大引用\",\"link\":\"/java/四大引用\"},{\"text\":\"委派双亲之类加载器\",\"link\":\"/java/委派双亲之类加载器\"},{\"text\":\"成熟的线程要懂得拒绝\",\"link\":\"/java/拒绝策略\"},{\"text\":\"线程安全感\",\"link\":\"/java/线程安全\"},{\"text\":\"开个工厂造线程\",\"link\":\"/java/线程工厂\"},{\"text\":\"线程池扫盲\",\"link\":\"/java/线程池\"},{\"text\":\"给线程归归类\",\"link\":\"/java/线程组\"},{\"text\":\"多线程之线程隔离\",\"link\":\"/java/线程隔离\"}]},{\"text\":\"java\",\"collapsed\":false,\"items\":[{\"text\":\"dubbo 客户端调用流程\",\"link\":\"/java/dubbo/Dubbo源码解析之客户端Consumer\"},{\"text\":\"dubbo 服务端注册流程\",\"link\":\"/java/dubbo/Dubbo源码解析之服务端Provider\"},{\"text\":\"dubbo适配Spring原理\",\"link\":\"/java/dubbo/dubbo整合spring的两种实现原理\"}]},{\"text\":\"Mybatis\",\"collapsed\":false,\"items\":[{\"text\":\"第01篇:Mybatis学习之环境搭建\",\"link\":\"/java/mybatis/环境搭建\"},{\"text\":\"第02篇:Mybatis配置文件解析\",\"link\":\"/java/mybatis/配置文件解析\"},{\"text\":\"第03篇:Mybatis核心类详细介绍\",\"link\":\"/java/mybatis/核心类介绍\"},{\"text\":\"第04篇:Mybatis代理对象生成\",\"link\":\"/java/mybatis/Mapper代理对象创建\"},{\"text\":\"第05篇:Mybatis的SQL执行流程分析\",\"link\":\"/java/mybatis/Mybatis执行流程分析\"},{\"text\":\"第06篇:Mybatis缓存设计\",\"link\":\"/java/mybatis/Mybatis一级二级缓存设计\"},{\"text\":\"第07篇:Mybatis缓存装饰器\",\"link\":\"/java/mybatis/Mybatis缓存设计\"},{\"text\":\"第08篇:Mybatis事务处理\",\"link\":\"/java/mybatis/事务的实现方案\"},{\"text\":\"第09篇:Spring处理Mybatis事务\",\"link\":\"/java/mybatis/Spring事务整合\"},{\"text\":\"第10篇:Mybatis的插件设计分析\",\"link\":\"/java/mybatis/插件分析\"},{\"text\":\"第11篇:Mybatis查询限制插件设计\",\"link\":\"/java/mybatis/LimitPlugin\"},{\"text\":\"第12篇:Mybatis分页插件设计\",\"link\":\"/java/mybatis/PagePlugin\"},{\"text\":\"第13篇:Mybatis权限插件设计\",\"link\":\"/java/mybatis/AuthPlugin\"},{\"text\":\"第14篇:Mybatis中反射工具\",\"link\":\"/java/mybatis/MetaObject\"},{\"text\":\"第15篇:Mybatis中打印Sql信息\",\"link\":\"/java/mybatis/Mybatissql日志打印\"}]},{\"text\":\"Spring Framework\",\"collapsed\":false,\"items\":[{\"text\":\"第01篇:搞定Spring容器管理\",\"link\":\"/java/spring/core01\"},{\"text\":\"第02篇:解耦就用Event\",\"link\":\"/java/spring/core02\"},{\"text\":\"第03篇:Validation参数校验\",\"link\":\"/java/spring/core03\"},{\"text\":\"第04篇:Resources资源文件\",\"link\":\"/java/spring/core04\"},{\"text\":\"第05篇:SpEL强大的表达式语言\",\"link\":\"/java/spring/core05\"},{\"text\":\"第06篇:AOP面向切面编程\",\"link\":\"/java/spring/core06\"},{\"text\":\"第07篇:Converter SPI类型转换\",\"link\":\"/java/spring/core07\"},{\"text\":\"第08篇:Data Binding类型绑定\",\"link\":\"/java/spring/core08\"},{\"text\":\"第09篇:MessageSource国际化\",\"link\":\"/java/spring/core09\"},{\"text\":\"第09篇:Formatter 格式转换\",\"link\":\"/java/spring/core11\"},{\"text\":\"第10篇:Spring Webflux\",\"link\":\"/java/spring/core10\"},{\"text\":\"AOP 使用指南\",\"link\":\"/java/spring/AOP\"},{\"text\":\"Spring EL表达式使用指南\",\"link\":\"/java/spring/EL\"}]},{\"text\":\"SpringBoot\",\"collapsed\":false,\"items\":[{\"text\":\"Spring Boot Endpoint监控端点扩展\",\"link\":\"/java/spring/Endpoint监控端点扩展\"},{\"text\":\"Spring声明式事务的实现方案?\",\"link\":\"/java/spring/Spring声明式事务的实现方案\"},{\"text\":\"Web接口资源是如何保存起来的?\",\"link\":\"/java/spring/Web接口资源是如何保存起来的\"}]},{\"text\":\"Spring\",\"collapsed\":false,\"items\":[{\"text\":\"FactoryBean接口实例化\",\"link\":\"/java/spring/FactoryBean接口实例化\"},{\"text\":\"动态绑定配置\",\"link\":\"/java/spring/Spring动态绑定配置\"},{\"text\":\"Spring循环依赖\",\"link\":\"/java/spring/Spring循环依赖\"}]},{\"text\":\"知识体系\",\"collapsed\":false,\"items\":[{\"text\":\"基础命令\",\"link\":\"/java/tools/arthas/base-cli\"},{\"text\":\"class/classloader相关\",\"link\":\"/java/tools/arthas/class-cli\"},{\"text\":\"JVM相关命令\",\"link\":\"/java/tools/arthas/jvm-cli\"},{\"text\":\"基础教程\",\"link\":\"/java/tools/arthas/learn\"},{\"text\":\"monitor/watch/trace相关\",\"link\":\"/java/tools/arthas/watch-cli\"},{\"text\":\"Javassist\",\"link\":\"/java/tools/bytecode/Javassist\"},{\"text\":\"Guava-cache\",\"link\":\"/java/tools/guava/guava-cache\"},{\"text\":\"Guava-Map\",\"link\":\"/java/tools/guava/guava-map\"},{\"text\":\"Guava-retry重试组件\",\"link\":\"/java/tools/guava/guava-retry\"},{\"text\":\"Spring-retry重试组件\",\"link\":\"/java/tools/guava/spring-retry\"},{\"link\":\"/java/tools/pool2/img.png\"},{\"text\":\"字符串常量池\",\"link\":\"/java/tools/pool2/字符串常量池\"},{\"link\":\"/java/tools/reactor/webflux\"},{\"text\":\"Java泛型体系知识学习\",\"link\":\"/java/tools/reflections/Java泛型\"},{\"text\":\"线程安全之锁操作\",\"link\":\"/java/线程安全之锁操作\"},{\"text\":\"线程状态\",\"link\":\"/java/线程的工作状态\"}]}],\"/guide/\":[{\"text\":\"Plugins\",\"collapsed\":false,\"items\":[{\"text\":\"Eslint和 Prettier使用\",\"link\":\"/guide/eslint-plugin\"},{\"text\":\"Vite 插件\",\"link\":\"/guide/vite-plugin\"}]},{\"text\":\"JavaScript\",\"collapsed\":false,\"items\":[{\"text\":\"CommonJs和ECMAScript\",\"link\":\"/guide/javascript/ESM\"},{\"text\":\"package.json\",\"link\":\"/guide/javascript/package\"}]},{\"text\":\"Monorepo\",\"collapsed\":false,\"items\":[{\"text\":\"what monorepo?\",\"link\":\"/guide/monnrepo/monorepo\"}]},{\"text\":\"知识体系\",\"collapsed\":false,\"items\":[{\"text\":\"Vite 从零搭建项目\",\"link\":\"/guide/plugin\"},{\"text\":\"typescript配置说明\",\"link\":\"/guide/ts-config-issue\"}]},{\"text\":\"TypeScript\",\"collapsed\":false,\"items\":[{\"text\":\"泛型函数\",\"link\":\"/guide/typescript/generics-function\"},{\"text\":\"泛型用法\",\"link\":\"/guide/typescript/generics\"},{\"text\":\"tsconfig.json\",\"link\":\"/guide/typescript/tsconfig\"}]},{\"text\":\"Code Editor\",\"collapsed\":false,\"items\":[{\"text\":\"WebStorm Plugins\",\"link\":\"/guide/web-storm-plugins\"},{\"text\":\"WebStorm 常用插件\",\"link\":\"/guide/web-storm\"}]}],\"/design/\":[{\"text\":\"知识体系\",\"collapsed\":false,\"items\":[{\"link\":\"/design/.DS_Store\"},{\"text\":\"Java代码规范全部奉上\",\"link\":\"/design/Java代码规范全部奉上\"},{\"text\":\"中文文档写作规范\",\"link\":\"/design/中文文档写作规范\"},{\"text\":\"年终总结汇报大纲\",\"link\":\"/design/年终总结汇报大纲\"},{\"text\":\"领域驱动模型的思考与认知\",\"link\":\"/design/领域驱动模型的思考与认知\"}]},{\"text\":\"设计&规范\",\"collapsed\":false,\"items\":[{\"text\":\"六大原则 & 23种设计模式\",\"link\":\"/design/六脉神剑\"}]},{\"text\":\"牛马人生\",\"collapsed\":false,\"items\":[{\"text\":\"勤劳致富\",\"link\":\"/design/勤劳不能致富\"},{\"text\":\"软实力之沟通篇\",\"link\":\"/design/沟通软实力\"}]}],\"/test/\":[{\"text\":\"技术框架\",\"collapsed\":false,\"items\":[{\"text\":\"Feign Mock注意事项\",\"link\":\"/test/FeignMock\"},{\"text\":\"JUnit API\",\"link\":\"/test/JUnitAPI\"},{\"text\":\"MockData API\",\"link\":\"/test/MockDataAPI\"},{\"text\":\"Mockito API\",\"link\":\"/test/MockitoAPI\"},{\"text\":\"SpringBoot Testing\",\"link\":\"/test/SpringBootTesting\"},{\"text\":\"技术选型\",\"link\":\"/test/技术选型\"}]},{\"text\":\"源码分析\",\"collapsed\":false,\"items\":[{\"text\":\"JUnit单测类属性注入\",\"link\":\"/test/JUnit单测类属性注入\"},{\"text\":\"事务回滚原理\",\"link\":\"/test/事务回滚原理\"},{\"text\":\"②如何知道是否依赖Spring容器\",\"link\":\"/test/如何知道是否依赖Spring容器\"},{\"text\":\"①谁在调用JUnit\",\"link\":\"/test/谁在调用JUnit\"}]},{\"text\":\"单测规范\",\"collapsed\":false,\"items\":[{\"text\":\"使用断言\",\"link\":\"/test/使用断言\"},{\"text\":\"单测维护\",\"link\":\"/test/单测维护\"},{\"text\":\"命名规则\",\"link\":\"/test/命名规则\"},{\"text\":\"影响范围\",\"link\":\"/test/影响范围\"},{\"text\":\"极限测试\",\"link\":\"/test/极限测试\"},{\"text\":\"测试范围\",\"link\":\"/test/测试范围\"}]},{\"text\":\"场景分析\",\"collapsed\":false,\"items\":[{\"text\":\"启动缓慢\",\"link\":\"/test/启动缓慢\"},{\"text\":\"异步验证\",\"link\":\"/test/异步验证\"},{\"text\":\"数据隔离\",\"link\":\"/test/数据隔离\"},{\"text\":\"测试成本\",\"link\":\"/test/测试成本\"},{\"text\":\"消息验证\",\"link\":\"/test/消息验证\"}]},{\"text\":\"案例分享\",\"collapsed\":false,\"items\":[{\"text\":\"案例分享\",\"link\":\"/test/案例分享\"}]}],\"/components/\":[],\"/scm/\":[{\"text\":\"会计小TIP\",\"collapsed\":false,\"items\":[{\"text\":\"计提帐\",\"link\":\"/scm/finance/计提帐\"}]},{\"text\":\"介绍\",\"collapsed\":false,\"items\":[{\"text\":\"白话供应链\",\"link\":\"/scm/introduce/白话翻译\"},{\"text\":\"系统介绍\",\"link\":\"/scm/introduce/系统介绍\"}]},{\"text\":\"存货核算\",\"collapsed\":false,\"items\":[{\"text\":\"存货核算\",\"link\":\"/scm/stock/stock\"}]}],\"/project/\":[{\"text\":\"Alfred Plugin\",\"collapsed\":false,\"items\":[{\"text\":\"Alfred-workflow-js\",\"link\":\"/project/alfred/alfred-worflow-js\"},{\"text\":\"Alfred添加工作流\",\"link\":\"/project/alfred/create-alfred\"},{\"text\":\"Mac 效率工具必备神器Alfred插件开发\",\"link\":\"/project/alfred/效率工具必备神器Alfred插件开发\"}]},{\"text\":\"JMVN\",\"collapsed\":false,\"items\":[{\"text\":\"快速安装\",\"link\":\"/project/jmvn/introduction-install\"},{\"text\":\"工具介绍\",\"link\":\"/project/jmvn/introduction\"},{\"text\":\"数据模型导出\",\"link\":\"/project/jmvn/jmvn-export\"},{\"text\":\"创建项目\",\"link\":\"/project/jmvn/jmvn-init\"},{\"text\":\"数据模型安装\",\"link\":\"/project/jmvn/jmvn-install\"},{\"text\":\"插件开发\",\"link\":\"/project/jmvn/jmvn-plugin\"},{\"text\":\"基于命令行的Java脚手架\",\"link\":\"/project/jmvn/基于命令行的Java脚手架\"}]},{\"text\":\"JVM\",\"collapsed\":false,\"items\":[{\"text\":\"JVM内存模型\",\"link\":\"/project/jvm/JVM\"},{\"text\":\"JVM参数配置说明\",\"link\":\"/project/jvm/JVM参数配置说明\"},{\"text\":\"JVM调优\",\"link\":\"/project/jvm/JVM调优\"}]},{\"text\":\"知识体系\",\"collapsed\":false,\"items\":[{\"link\":\"/project/jvm/img.png\"}]},{\"text\":\"Mojito\",\"collapsed\":false,\"items\":[{\"text\":\"第01篇:手写JavaRPC框架之思路分析\",\"link\":\"/project/mojito/第01篇:手写JavaRPC框架之思路分析\"},{\"text\":\"第02篇:手写JavaRPC框架之设计思路\",\"link\":\"/project/mojito/第02篇:手写JavaRPC框架之设计思路\"},{\"text\":\"第03篇:手写JavaRPC框架之搞定序列化\",\"link\":\"/project/mojito/第03篇:手写JavaRPC框架之搞定序列化\"},{\"text\":\"第04篇:手写JavaRPC框架之搞定网络通信\",\"link\":\"/project/mojito/第04篇:手写JavaRPC框架之搞定网络通信\"},{\"text\":\"第05篇:手写JavaRPC框架之执行层思路\",\"link\":\"/project/mojito/第05篇:手写JavaRPC框架之执行层思路\"},{\"text\":\"HTTP协议使用示例\",\"link\":\"/project/mojito/HTTP协议使用示例\"},{\"text\":\"RPC协议使用示例\",\"link\":\"/project/mojito/RPC协议使用示例\"},{\"text\":\"Protocol协议篇设计思路\",\"link\":\"/project/mojito/协议\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"}]},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>