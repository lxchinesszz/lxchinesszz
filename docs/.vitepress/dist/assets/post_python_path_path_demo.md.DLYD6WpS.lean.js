import{_ as i,o as a,c as n,a4 as l}from"./chunks/framework.B8fosacB.js";const c=JSON.parse('{"title":"文件路径处理","description":"","frontmatter":{"title":"文件路径处理","editLink":true,"navbar":true},"headers":[],"relativePath":"post/python/path/path_demo.md","filePath":"post/python/path/path_demo.md","lastUpdated":1731158524000}'),e={name:"post/python/path/path_demo.md"};function t(h,s,p,r,k,d){return a(),n("div",{"data-pagefind-body":!0},s[0]||(s[0]=[l(`<h2 id="文件处理" tabindex="-1">文件处理 <a class="header-anchor" href="#文件处理" aria-label="Permalink to &quot;文件处理&quot;">​</a></h2><ol><li>指定目录中文件打平处理</li><li>获取完整路径名，文件名，文件后缀名</li><li>使用 <code>shutil</code> 进行复制或移动</li><li>使用 <code>re</code> 匹配文件名</li></ol><div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> shutil</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data_source </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/Users/liuxin/PycharmProjects/drissionpagedocs/MasterData/新建文件夹&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file_path, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.walk(data_source, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">topdown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # /Users/liuxin/PycharmProjects/drissionpagedocs/MasterData/新建文件夹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # print(f&#39;file_path:{file_path}&#39;)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # dir:[&#39;test&#39;]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # print(f&#39;dir:{dir}&#39;)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> files:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 文件完整路径 /Users/liuxin/PycharmProjects/drissionpagedocs/MasterData/新建文件夹/StockLedger-Nap AU 2018-after-after-1.csv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file_full_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(file_path, fl)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 含扩展名 StockLedger-Nap AU 2018-after-after-1.csv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file_full_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.basename(fl)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 文件名 StockLedger-Nap AU 2018-after-after-1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.splitext(fl)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 文件扩展名 .csv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        file_ext_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.splitext(fl)[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 根据名字匹配</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mat </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re.findall(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">pattern</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;菜鸟|订单|费用|结算|预收&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fl, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">flags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">re.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">IGNORECASE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mat) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 把匹配上的文件都移动到指定的目录</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mat[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;菜鸟&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 或者移动 move</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                shutil.copy(file_full_path,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                            dst</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.path.join(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/Users/liuxin/PycharmProjects/drissionpagedocs/MasterData/static&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, fl))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file_full_path)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;===================&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="shutil" tabindex="-1">shutil <a class="header-anchor" href="#shutil" aria-label="Permalink to &quot;shutil&quot;">​</a></h2><p><code>shutil</code> 是 Python 标准库中的一个模块，专门用于处理文件和目录的高级操作，例如复制、移动、删除文件和目录等。它提供了一些便捷的方法，能够实现类似于操作系统的文件操作。下面是一些 <code>shutil</code> 模块的主要功能和用法。</p><h3 id="_1-shutil-copy" tabindex="-1">1. <code>shutil.copy()</code> <a class="header-anchor" href="#_1-shutil-copy" aria-label="Permalink to &quot;1. \`shutil.copy()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：复制文件。</li><li><strong>参数</strong>： <ul><li><code>src</code>：源文件路径。</li><li><code>dst</code>：目标文件路径或目录。</li></ul></li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> shutil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.copy(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source_file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination_folder/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h3 id="_2-shutil-copy2" tabindex="-1">2. <code>shutil.copy2()</code> <a class="header-anchor" href="#_2-shutil-copy2" aria-label="Permalink to &quot;2. \`shutil.copy2()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：与 <code>copy</code> 类似，但会保留源文件的元数据（例如创建时间、修改时间）。</li><li><strong>参数</strong>：同 <code>shutil.copy()</code>。</li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.copy2(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source_file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination_folder/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_3-shutil-copytree" tabindex="-1">3. <code>shutil.copytree()</code> <a class="header-anchor" href="#_3-shutil-copytree" aria-label="Permalink to &quot;3. \`shutil.copytree()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：递归复制整个目录树，即复制目录及其中的所有文件和子目录。</li><li><strong>参数</strong>： <ul><li><code>src</code>：源目录路径。</li><li><code>dst</code>：目标目录路径（若目录已存在，会抛出错误）。</li></ul></li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.copytree(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source_folder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination_folder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_4-shutil-move" tabindex="-1">4. <code>shutil.move()</code> <a class="header-anchor" href="#_4-shutil-move" aria-label="Permalink to &quot;4. \`shutil.move()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：移动文件或目录。</li><li><strong>参数</strong>： <ul><li><code>src</code>：源文件或目录路径。</li><li><code>dst</code>：目标文件或目录路径。</li></ul></li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.move(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source_file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination_folder/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_5-shutil-rmtree" tabindex="-1">5. <code>shutil.rmtree()</code> <a class="header-anchor" href="#_5-shutil-rmtree" aria-label="Permalink to &quot;5. \`shutil.rmtree()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：递归删除目录及其所有内容。<strong>使用时请小心，因为这是不可逆操作。</strong></li><li><strong>参数</strong>：<code>path</code>：要删除的目录路径。</li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.rmtree(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;folder_to_delete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_6-shutil-make-archive" tabindex="-1">6. <code>shutil.make_archive()</code> <a class="header-anchor" href="#_6-shutil-make-archive" aria-label="Permalink to &quot;6. \`shutil.make_archive()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：创建压缩包。</li><li><strong>参数</strong>： <ul><li><code>base_name</code>：压缩包的文件名（不带扩展名）。</li><li><code>format</code>：压缩格式，如 <code>&#39;zip&#39;</code>、<code>&#39;tar&#39;</code> 等。</li><li><code>root_dir</code>：要压缩的目录。</li></ul></li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.make_archive(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;backup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;zip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;folder_to_compress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="_7-shutil-unpack-archive" tabindex="-1">7. <code>shutil.unpack_archive()</code> <a class="header-anchor" href="#_7-shutil-unpack-archive" aria-label="Permalink to &quot;7. \`shutil.unpack_archive()\`&quot;">​</a></h3><ul><li><strong>作用</strong>：解压缩文件。</li><li><strong>参数</strong>： <ul><li><code>filename</code>：压缩文件名。</li><li><code>extract_dir</code>：解压目标目录。</li></ul></li><li><strong>示例</strong>：<div class="language-python vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">shutil.unpack_archive(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;backup.zip&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;extracted_folder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h3 id="使用注意" tabindex="-1">使用注意 <a class="header-anchor" href="#使用注意" aria-label="Permalink to &quot;使用注意&quot;">​</a></h3><ul><li><code>shutil.rmtree()</code> 删除操作不可撤销，建议在操作前仔细确认路径。</li><li><code>shutil.copytree()</code> 不允许目标路径已存在，因此通常在复制前检查路径。</li></ul>`,21)]))}const E=i(e,[["render",t]]);export{c as __pageData,E as default};
