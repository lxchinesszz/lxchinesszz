const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/index.Cl8LkLFd.js","assets/chunks/framework.B8fosacB.js","assets/chunks/index.CA6dDEUk.js"])))=>i.map(i=>d[i]);
import{d as defineComponent,o as openBlock,c as createElementBlock,r as renderSlot,a as createTextVNode,t as toDisplayString,n as normalizeClass,b as createBlock,w as withCtx,e as createCommentVNode,T as Transition,_ as _export_sfc$1,u as useData$1,i as isExternal,f as treatAsHtml,g as withBase,h as ref,j as inBrowser,k as computed,l as onMounted,m as createBaseVNode,p as unref,q as isActive,s as useMediaQuery,v as watch,x as watchEffect,y as onUnmounted,z as watchPostEffect,A as onUpdated,B as getScrollOffset,C as resolveComponent,F as Fragment,D as renderList,E as shallowRef,G as onContentUpdated,H as createVNode$1,I as EXTERNAL_URL_RE,J as resolveDynamicComponent,K as useRoute,L as mergeProps,M as inject,N as useWindowSize,O as normalizeStyle$1,P as onClickOutside,Q as onKeyStroke,R as nextTick,S as useWindowScroll,U as readonly,V as reactive,W as provide,X as onBeforeUnmount,Y as Teleport,Z as withDirectives,$ as vShow,a0 as toRefs,a1 as h$1,a2 as getCurrentScope,a3 as onScopeDispose,a4 as createStaticVNode,a5 as useRouter,a6 as createSlots,a7 as useScrollLock,a8 as toHandlers,a9 as withKeys,aa as withModifiers,ab as useSlots,ac as TransitionGroup,ad as createApp,ae as useClipboard,af as isClient$1,ag as getCurrentInstance,ah as defineClientComponent,ai as __vitePreload,aj as cloneVNode,ak as isVNode,al as toRef,am as onDeactivated,an as normalizeProps,ao as guardReactiveProps,ap as render$1,aq as isRef,ar as Comment$1,as as useCssVars}from"./framework.B8fosacB.js";const _sfc_main$4q=defineComponent({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(a){return(s,l)=>(openBlock(),createElementBlock("span",{class:normalizeClass(["VPBadge",s.type])},[renderSlot(s.$slots,"default",{},()=>[createTextVNode(toDisplayString(s.text),1)])],2))}}),_hoisted_1$2u={key:0,class:"VPBackdrop"},_sfc_main$4p=defineComponent({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(a){return(s,l)=>(openBlock(),createBlock(Transition,{name:"fade"},{default:withCtx(()=>[s.show?(openBlock(),createElementBlock("div",_hoisted_1$2u)):createCommentVNode("",!0)]),_:1}))}}),VPBackdrop=_export_sfc$1(_sfc_main$4p,[["__scopeId","data-v-5ad68aff"]]),useData=useData$1;function throttleAndDebounce(a,s){let l,o=!1;return()=>{l&&clearTimeout(l),o?l=setTimeout(a,s):(a(),(o=!0)&&setTimeout(()=>o=!1,s))}}function ensureStartingSlash(a){return/^\//.test(a)?a:`/${a}`}function normalizeLink$1(a){const{pathname:s,search:l,hash:o,protocol:c}=new URL(a,"http://a.com");if(isExternal(a)||a.startsWith("#")||!c.startsWith("http")||!treatAsHtml(s))return a;const{site:u}=useData(),d=s.endsWith("/")||s.endsWith(".html")?a:a.replace(/(?:(^\.+)\/)?.*$/,`$1${s.replace(/(\.md)?$/,u.value.cleanUrls?"":".html")}${l}${o}`);return withBase(d)}const hashRef=ref(inBrowser?location.hash:"");inBrowser&&window.addEventListener("hashchange",()=>{hashRef.value=location.hash});function useLangs({removeCurrent:a=!0,correspondingLink:s=!1}={}){const{site:l,localeIndex:o,page:c,theme:u}=useData(),d=computed(()=>({label:l.value.locales[o.value]?.label,link:l.value.locales[o.value]?.link||(o.value==="root"?"/":`/${o.value}/`)}));return{localeLinks:computed(()=>Object.entries(l.value.locales).flatMap(([g,y])=>a&&d.value.label===y.label?[]:{text:y.label,link:normalizeLink(y.link||(g==="root"?"/":`/${g}/`),u.value.i18nRouting!==!1&&s,c.value.relativePath.slice(d.value.link.length-1),!l.value.cleanUrls)+hashRef.value})),currentLang:d}}function normalizeLink(a,s,l,o){return s?a.replace(/\/$/,"")+ensureStartingSlash(l.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,o?".html":"")):a}const _hoisted_1$2t={class:"NotFound"},_hoisted_2$1C={class:"code"},_hoisted_3$1m={class:"title"},_hoisted_4$x={class:"quote"},_hoisted_5$h={class:"action"},_hoisted_6$b=["href","aria-label"],_sfc_main$4o=defineComponent({__name:"NotFound",setup(a){const{site:s,theme:l}=useData(),{localeLinks:o}=useLangs({removeCurrent:!1}),c=ref("/");return onMounted(()=>{const u=window.location.pathname.replace(s.value.base,"").replace(/(^.*?\/).*$/,"/$1");o.value.length&&(c.value=o.value.find(({link:d})=>d.startsWith(u))?.link||o.value[0].link)}),(u,d)=>(openBlock(),createElementBlock("div",_hoisted_1$2t,[createBaseVNode("p",_hoisted_2$1C,toDisplayString(unref(l).notFound?.code??"404"),1),createBaseVNode("h1",_hoisted_3$1m,toDisplayString(unref(l).notFound?.title??"PAGE NOT FOUND"),1),d[0]||(d[0]=createBaseVNode("div",{class:"divider"},null,-1)),createBaseVNode("blockquote",_hoisted_4$x,toDisplayString(unref(l).notFound?.quote??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),createBaseVNode("div",_hoisted_5$h,[createBaseVNode("a",{class:"link",href:unref(withBase)(c.value),"aria-label":unref(l).notFound?.linkLabel??"go to home"},toDisplayString(unref(l).notFound?.linkText??"Take me home"),9,_hoisted_6$b)])]))}}),NotFound=_export_sfc$1(_sfc_main$4o,[["__scopeId","data-v-7b0359d6"]]);function getSidebar(a,s){if(Array.isArray(a))return addBase(a);if(a==null)return[];s=ensureStartingSlash(s);const l=Object.keys(a).sort((c,u)=>u.split("/").length-c.split("/").length).find(c=>s.startsWith(ensureStartingSlash(c))),o=l?a[l]:[];return Array.isArray(o)?addBase(o):addBase(o.items,o.base)}function getSidebarGroups(a){const s=[];let l=0;for(const o in a){const c=a[o];if(c.items){l=s.push(c);continue}s[l]||s.push({items:[]}),s[l].items.push(c)}return s}function getFlatSideBarLinks(a){const s=[];function l(o){for(const c of o)c.text&&c.link&&s.push({text:c.text,link:c.link,docFooterText:c.docFooterText}),c.items&&l(c.items)}return l(a),s}function hasActiveLink(a,s){return Array.isArray(s)?s.some(l=>hasActiveLink(a,l)):isActive(a,s.link)?!0:s.items?hasActiveLink(a,s.items):!1}function addBase(a,s){return[...a].map(l=>{const o={...l},c=o.base||s;return c&&o.link&&(o.link=c+o.link),o.items&&(o.items=addBase(o.items,c)),o})}function useSidebar(){const{frontmatter:a,page:s,theme:l}=useData(),o=useMediaQuery("(min-width: 960px)"),c=ref(!1),u=computed(()=>{const ne=l.value.sidebar,se=s.value.relativePath;return ne?getSidebar(ne,se):[]}),d=ref(u.value);watch(u,(ne,se)=>{JSON.stringify(ne)!==JSON.stringify(se)&&(d.value=u.value)});const f=computed(()=>a.value.sidebar!==!1&&d.value.length>0&&a.value.layout!=="home"),g=computed(()=>y?a.value.aside==null?l.value.aside==="left":a.value.aside==="left":!1),y=computed(()=>a.value.layout==="home"?!1:a.value.aside!=null?!!a.value.aside:l.value.aside!==!1),$=computed(()=>f.value&&o.value),x=computed(()=>f.value?getSidebarGroups(d.value):[]);function N(){c.value=!0}function R(){c.value=!1}function j(){c.value?R():N()}return{isOpen:c,sidebar:d,sidebarGroups:x,hasSidebar:f,hasAside:y,leftAside:g,isSidebarEnabled:$,open:N,close:R,toggle:j}}function useCloseSidebarOnEscape(a,s){let l;watchEffect(()=>{l=a.value?document.activeElement:void 0}),onMounted(()=>{window.addEventListener("keyup",o)}),onUnmounted(()=>{window.removeEventListener("keyup",o)});function o(c){c.key==="Escape"&&a.value&&(s(),l?.focus())}}function useSidebarControl(a){const{page:s}=useData(),l=ref(!1),o=computed(()=>a.value.collapsed!=null),c=computed(()=>!!a.value.link),u=ref(!1),d=()=>{u.value=isActive(s.value.relativePath,a.value.link)};watch([s,a,hashRef],d),onMounted(d);const f=computed(()=>u.value?!0:a.value.items?hasActiveLink(s.value.relativePath,a.value.items):!1),g=computed(()=>!!(a.value.items&&a.value.items.length));watchEffect(()=>{l.value=!!(o.value&&a.value.collapsed)}),watchPostEffect(()=>{(u.value||f.value)&&(l.value=!1)});function y(){o.value&&(l.value=!l.value)}return{collapsed:l,collapsible:o,isLink:c,isActiveLink:u,hasActiveLink:f,hasChildren:g,toggle:y}}function useAside(){const{hasSidebar:a}=useSidebar(),s=useMediaQuery("(min-width: 960px)"),l=useMediaQuery("(min-width: 1280px)");return{isAsideEnabled:computed(()=>!l.value&&!s.value?!1:a.value?l.value:s.value)}}const resolvedHeaders=[];function resolveTitle(a){return typeof a.outline=="object"&&!Array.isArray(a.outline)&&a.outline.label||a.outlineTitle||"On this page"}function getHeaders(a){const s=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(l=>l.id&&l.hasChildNodes()).map(l=>{const o=Number(l.tagName[1]);return{element:l,title:serializeHeader(l),link:"#"+l.id,level:o}});return resolveHeaders(s,a)}function serializeHeader(a){let s="";for(const l of a.childNodes)if(l.nodeType===1){if(l.classList.contains("VPBadge")||l.classList.contains("header-anchor")||l.classList.contains("ignore-header"))continue;s+=l.textContent}else l.nodeType===3&&(s+=l.textContent);return s.trim()}function resolveHeaders(a,s){if(s===!1)return[];const l=(typeof s=="object"&&!Array.isArray(s)?s.level:s)||2,[o,c]=typeof l=="number"?[l,l]:l==="deep"?[2,6]:l;a=a.filter(d=>d.level>=o&&d.level<=c),resolvedHeaders.length=0;for(const{element:d,link:f}of a)resolvedHeaders.push({element:d,link:f});const u=[];e:for(let d=0;d<a.length;d++){const f=a[d];if(d===0)u.push(f);else{for(let g=d-1;g>=0;g--){const y=a[g];if(y.level<f.level){(y.children||(y.children=[])).push(f);continue e}}u.push(f)}}return u}function useActiveAnchor(a,s){const{isAsideEnabled:l}=useAside(),o=throttleAndDebounce(u,100);let c=null;onMounted(()=>{requestAnimationFrame(u),window.addEventListener("scroll",o)}),onUpdated(()=>{d(location.hash)}),onUnmounted(()=>{window.removeEventListener("scroll",o)});function u(){if(!l.value)return;const f=window.scrollY,g=window.innerHeight,y=document.body.offsetHeight,$=Math.abs(f+g-y)<1,x=resolvedHeaders.map(({element:R,link:j})=>({link:j,top:getAbsoluteTop(R)})).filter(({top:R})=>!Number.isNaN(R)).sort((R,j)=>R.top-j.top);if(!x.length){d(null);return}if(f<1){d(null);return}if($){d(x[x.length-1].link);return}let N=null;for(const{link:R,top:j}of x){if(j>f+getScrollOffset()+4)break;N=R}d(N)}function d(f){c&&c.classList.remove("active"),f==null?c=null:c=a.value.querySelector(`a[href="${decodeURIComponent(f)}"]`);const g=c;g?(g.classList.add("active"),s.value.style.top=g.offsetTop+39+"px",s.value.style.opacity="1"):(s.value.style.top="33px",s.value.style.opacity="0")}}function getAbsoluteTop(a){let s=0;for(;a!==document.body;){if(a===null)return NaN;s+=a.offsetTop,a=a.offsetParent}return s}const _hoisted_1$2s=["href","title"],_sfc_main$4n=defineComponent({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(a){function s({target:l}){const o=l.href.split("#")[1];document.getElementById(decodeURIComponent(o))?.focus({preventScroll:!0})}return(l,o)=>{const c=resolveComponent("VPDocOutlineItem",!0);return openBlock(),createElementBlock("ul",{class:normalizeClass(["VPDocOutlineItem",l.root?"root":"nested"])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.headers,({children:u,link:d,title:f})=>(openBlock(),createElementBlock("li",null,[createBaseVNode("a",{class:"outline-link",href:d,onClick:s,title:f},toDisplayString(f),9,_hoisted_1$2s),u?.length?(openBlock(),createBlock(c,{key:0,headers:u},null,8,["headers"])):createCommentVNode("",!0)]))),256))],2)}}}),VPDocOutlineItem=_export_sfc$1(_sfc_main$4n,[["__scopeId","data-v-40d94008"]]),_hoisted_1$2r={class:"content"},_hoisted_2$1B={class:"outline-title",role:"heading","aria-level":"2"},_hoisted_3$1l={"aria-labelledby":"doc-outline-aria-label"},_sfc_main$4m=defineComponent({__name:"VPDocAsideOutline",setup(a){const{frontmatter:s,theme:l}=useData(),o=shallowRef([]);onContentUpdated(()=>{o.value=getHeaders(s.value.outline??l.value.outline)});const c=ref(),u=ref();return useActiveAnchor(c,u),(d,f)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPDocAsideOutline",{"has-outline":o.value.length>0}]),ref_key:"container",ref:c,role:"navigation"},[createBaseVNode("div",_hoisted_1$2r,[createBaseVNode("div",{class:"outline-marker",ref_key:"marker",ref:u},null,512),createBaseVNode("div",_hoisted_2$1B,toDisplayString(unref(resolveTitle)(unref(l))),1),createBaseVNode("nav",_hoisted_3$1l,[f[0]||(f[0]=createBaseVNode("span",{class:"visually-hidden",id:"doc-outline-aria-label"}," Table of Contents for current page ",-1)),createVNode$1(VPDocOutlineItem,{headers:o.value,root:!0},null,8,["headers"])])])],2))}}),VPDocAsideOutline=_export_sfc$1(_sfc_main$4m,[["__scopeId","data-v-27754550"]]),_hoisted_1$2q={class:"VPDocAsideCarbonAds"},_sfc_main$4l=defineComponent({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(a){const s=()=>null;return(l,o)=>(openBlock(),createElementBlock("div",_hoisted_1$2q,[createVNode$1(unref(s),{"carbon-ads":l.carbonAds},null,8,["carbon-ads"])]))}}),_hoisted_1$2p={class:"VPDocAside"},_sfc_main$4k=defineComponent({__name:"VPDocAside",setup(a){const{theme:s}=useData();return(l,o)=>(openBlock(),createElementBlock("div",_hoisted_1$2p,[renderSlot(l.$slots,"aside-top",{},void 0,!0),renderSlot(l.$slots,"aside-outline-before",{},void 0,!0),createVNode$1(VPDocAsideOutline),renderSlot(l.$slots,"aside-outline-after",{},void 0,!0),o[0]||(o[0]=createBaseVNode("div",{class:"spacer"},null,-1)),renderSlot(l.$slots,"aside-ads-before",{},void 0,!0),unref(s).carbonAds?(openBlock(),createBlock(_sfc_main$4l,{key:0,"carbon-ads":unref(s).carbonAds},null,8,["carbon-ads"])):createCommentVNode("",!0),renderSlot(l.$slots,"aside-ads-after",{},void 0,!0),renderSlot(l.$slots,"aside-bottom",{},void 0,!0)]))}}),VPDocAside=_export_sfc$1(_sfc_main$4k,[["__scopeId","data-v-a72966ff"]]);function useEditLink(){const{theme:a,page:s}=useData();return computed(()=>{const{text:l="Edit this page",pattern:o=""}=a.value.editLink||{};let c;return typeof o=="function"?c=o(s.value):c=o.replace(/:path/g,s.value.filePath),{url:c,text:l}})}function usePrevNext(){const{page:a,theme:s,frontmatter:l}=useData();return computed(()=>{const o=getSidebar(s.value.sidebar,a.value.relativePath),c=getFlatSideBarLinks(o),u=uniqBy(c,y=>y.link.replace(/[?#].*$/,"")),d=u.findIndex(y=>isActive(a.value.relativePath,y.link)),f=s.value.docFooter?.prev===!1&&!l.value.prev||l.value.prev===!1,g=s.value.docFooter?.next===!1&&!l.value.next||l.value.next===!1;return{prev:f?void 0:{text:(typeof l.value.prev=="string"?l.value.prev:typeof l.value.prev=="object"?l.value.prev.text:void 0)??u[d-1]?.docFooterText??u[d-1]?.text,link:(typeof l.value.prev=="object"?l.value.prev.link:void 0)??u[d-1]?.link},next:g?void 0:{text:(typeof l.value.next=="string"?l.value.next:typeof l.value.next=="object"?l.value.next.text:void 0)??u[d+1]?.docFooterText??u[d+1]?.text,link:(typeof l.value.next=="object"?l.value.next.link:void 0)??u[d+1]?.link}}})}function uniqBy(a,s){const l=new Set;return a.filter(o=>{const c=s(o);return l.has(c)?!1:l.add(c)})}const _sfc_main$4j=defineComponent({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(a){const s=a,l=computed(()=>s.tag??(s.href?"a":"span")),o=computed(()=>s.href&&EXTERNAL_URL_RE.test(s.href));return(c,u)=>(openBlock(),createBlock(resolveDynamicComponent(l.value),{class:normalizeClass(["VPLink",{link:c.href,"vp-external-link-icon":o.value,"no-icon":c.noIcon}]),href:c.href?unref(normalizeLink$1)(c.href):void 0,target:c.target??(o.value?"_blank":void 0),rel:c.rel??(o.value?"noreferrer":void 0)},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),_hoisted_1$2o={class:"VPLastUpdated"},_hoisted_2$1A=["datetime"],_sfc_main$4i=defineComponent({__name:"VPDocFooterLastUpdated",setup(a){const{theme:s,page:l,frontmatter:o,lang:c}=useData(),u=computed(()=>new Date(o.value.lastUpdated??l.value.lastUpdated)),d=computed(()=>u.value.toISOString()),f=ref("");return onMounted(()=>{watchEffect(()=>{f.value=new Intl.DateTimeFormat(s.value.lastUpdated?.formatOptions?.forceLocale?c.value:void 0,s.value.lastUpdated?.formatOptions??{dateStyle:"short",timeStyle:"short"}).format(u.value)})}),(g,y)=>(openBlock(),createElementBlock("p",_hoisted_1$2o,[createTextVNode(toDisplayString(unref(s).lastUpdated?.text||unref(s).lastUpdatedText||"Last updated")+": ",1),createBaseVNode("time",{datetime:d.value},toDisplayString(f.value),9,_hoisted_2$1A)]))}}),VPDocFooterLastUpdated=_export_sfc$1(_sfc_main$4i,[["__scopeId","data-v-ca8b3d73"]]),_hoisted_1$2n={key:0,class:"VPDocFooter"},_hoisted_2$1z={key:0,class:"edit-info"},_hoisted_3$1k={key:0,class:"edit-link"},_hoisted_4$w={key:1,class:"last-updated"},_hoisted_5$g={key:1,class:"prev-next"},_hoisted_6$a={class:"pager"},_hoisted_7$7=["innerHTML"],_hoisted_8$4=["innerHTML"],_hoisted_9$2={class:"pager"},_hoisted_10$1=["innerHTML"],_hoisted_11$1=["innerHTML"],_sfc_main$4h=defineComponent({__name:"VPDocFooter",setup(a){const{theme:s,page:l,frontmatter:o}=useData(),c=useEditLink(),u=usePrevNext(),d=computed(()=>s.value.editLink&&o.value.editLink!==!1),f=computed(()=>l.value.lastUpdated&&o.value.lastUpdated!==!1),g=computed(()=>d.value||f.value||u.value.prev||u.value.next);return(y,$)=>g.value?(openBlock(),createElementBlock("footer",_hoisted_1$2n,[renderSlot(y.$slots,"doc-footer-before",{},void 0,!0),d.value||f.value?(openBlock(),createElementBlock("div",_hoisted_2$1z,[d.value?(openBlock(),createElementBlock("div",_hoisted_3$1k,[createVNode$1(_sfc_main$4j,{class:"edit-link-button",href:unref(c).url,"no-icon":!0},{default:withCtx(()=>[$[0]||($[0]=createBaseVNode("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),createTextVNode(" "+toDisplayString(unref(c).text),1)]),_:1},8,["href"])])):createCommentVNode("",!0),f.value?(openBlock(),createElementBlock("div",_hoisted_4$w,[createVNode$1(VPDocFooterLastUpdated)])):createCommentVNode("",!0)])):createCommentVNode("",!0),unref(u).prev?.link||unref(u).next?.link?(openBlock(),createElementBlock("nav",_hoisted_5$g,[createBaseVNode("div",_hoisted_6$a,[unref(u).prev?.link?(openBlock(),createBlock(_sfc_main$4j,{key:0,class:"pager-link prev",href:unref(u).prev.link},{default:withCtx(()=>[createBaseVNode("span",{class:"desc",innerHTML:unref(s).docFooter?.prev||"Previous page"},null,8,_hoisted_7$7),createBaseVNode("span",{class:"title",innerHTML:unref(u).prev.text},null,8,_hoisted_8$4)]),_:1},8,["href"])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_9$2,[unref(u).next?.link?(openBlock(),createBlock(_sfc_main$4j,{key:0,class:"pager-link next",href:unref(u).next.link},{default:withCtx(()=>[createBaseVNode("span",{class:"desc",innerHTML:unref(s).docFooter?.next||"Next page"},null,8,_hoisted_10$1),createBaseVNode("span",{class:"title",innerHTML:unref(u).next.text},null,8,_hoisted_11$1)]),_:1},8,["href"])):createCommentVNode("",!0)])])):createCommentVNode("",!0)])):createCommentVNode("",!0)}}),VPDocFooter=_export_sfc$1(_sfc_main$4h,[["__scopeId","data-v-4a9e7890"]]),_hoisted_1$2m={class:"container"},_hoisted_2$1y={class:"aside-container"},_hoisted_3$1j={class:"aside-content"},_hoisted_4$v={class:"content"},_hoisted_5$f={class:"content-container"},_hoisted_6$9={class:"main"},_sfc_main$4g=defineComponent({__name:"VPDoc",setup(a){const{theme:s}=useData(),l=useRoute(),{hasSidebar:o,hasAside:c,leftAside:u}=useSidebar(),d=computed(()=>l.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(f,g)=>{const y=resolveComponent("Content");return openBlock(),createElementBlock("div",{class:normalizeClass(["VPDoc",{"has-sidebar":unref(o),"has-aside":unref(c)}])},[renderSlot(f.$slots,"doc-top",{},void 0,!0),createBaseVNode("div",_hoisted_1$2m,[unref(c)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["aside",{"left-aside":unref(u)}])},[g[0]||(g[0]=createBaseVNode("div",{class:"aside-curtain"},null,-1)),createBaseVNode("div",_hoisted_2$1y,[createBaseVNode("div",_hoisted_3$1j,[createVNode$1(VPDocAside,null,{"aside-top":withCtx(()=>[renderSlot(f.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":withCtx(()=>[renderSlot(f.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":withCtx(()=>[renderSlot(f.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":withCtx(()=>[renderSlot(f.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":withCtx(()=>[renderSlot(f.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":withCtx(()=>[renderSlot(f.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_4$v,[createBaseVNode("div",_hoisted_5$f,[renderSlot(f.$slots,"doc-before",{},void 0,!0),createBaseVNode("main",_hoisted_6$9,[createVNode$1(y,{class:normalizeClass(["vp-doc",[d.value,unref(s).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),createVNode$1(VPDocFooter,null,{"doc-footer-before":withCtx(()=>[renderSlot(f.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),renderSlot(f.$slots,"doc-after",{},void 0,!0)])])]),renderSlot(f.$slots,"doc-bottom",{},void 0,!0)],2)}}}),VPDoc=_export_sfc$1(_sfc_main$4g,[["__scopeId","data-v-aafdf930"]]),_sfc_main$4f=defineComponent({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(a){const s=a,l=computed(()=>s.href&&EXTERNAL_URL_RE.test(s.href)),o=computed(()=>s.tag||s.href?"a":"button");return(c,u)=>(openBlock(),createBlock(resolveDynamicComponent(o.value),{class:normalizeClass(["VPButton",[c.size,c.theme]]),href:c.href?unref(normalizeLink$1)(c.href):void 0,target:s.target??(l.value?"_blank":void 0),rel:s.rel??(l.value?"noreferrer":void 0)},{default:withCtx(()=>[createTextVNode(toDisplayString(c.text),1)]),_:1},8,["class","href","target","rel"]))}}),VPButton=_export_sfc$1(_sfc_main$4f,[["__scopeId","data-v-596f2367"]]),_hoisted_1$2l=["src","alt"],_sfc_main$4e=defineComponent({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(a){return(s,l)=>{const o=resolveComponent("VPImage",!0);return s.image?(openBlock(),createElementBlock(Fragment,{key:0},[typeof s.image=="string"||"src"in s.image?(openBlock(),createElementBlock("img",mergeProps({key:0,class:"VPImage"},typeof s.image=="string"?s.$attrs:{...s.image,...s.$attrs},{src:unref(withBase)(typeof s.image=="string"?s.image:s.image.src),alt:s.alt??(typeof s.image=="string"?"":s.image.alt||"")}),null,16,_hoisted_1$2l)):(openBlock(),createElementBlock(Fragment,{key:1},[createVNode$1(o,mergeProps({class:"dark",image:s.image.dark,alt:s.image.alt},s.$attrs),null,16,["image","alt"]),createVNode$1(o,mergeProps({class:"light",image:s.image.light,alt:s.image.alt},s.$attrs),null,16,["image","alt"])],64))],64)):createCommentVNode("",!0)}}}),VPImage=_export_sfc$1(_sfc_main$4e,[["__scopeId","data-v-a8574158"]]),_hoisted_1$2k={class:"container"},_hoisted_2$1x={class:"main"},_hoisted_3$1i={key:0,class:"name"},_hoisted_4$u=["innerHTML"],_hoisted_5$e=["innerHTML"],_hoisted_6$8=["innerHTML"],_hoisted_7$6={key:0,class:"actions"},_hoisted_8$3={key:0,class:"image"},_hoisted_9$1={class:"image-container"},_sfc_main$4d=defineComponent({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(a){const s=inject("hero-image-slot-exists");return(l,o)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPHero",{"has-image":l.image||unref(s)}])},[createBaseVNode("div",_hoisted_1$2k,[createBaseVNode("div",_hoisted_2$1x,[renderSlot(l.$slots,"home-hero-info-before",{},void 0,!0),renderSlot(l.$slots,"home-hero-info",{},()=>[l.name?(openBlock(),createElementBlock("h1",_hoisted_3$1i,[createBaseVNode("span",{innerHTML:l.name,class:"clip"},null,8,_hoisted_4$u)])):createCommentVNode("",!0),l.text?(openBlock(),createElementBlock("p",{key:1,innerHTML:l.text,class:"text"},null,8,_hoisted_5$e)):createCommentVNode("",!0),l.tagline?(openBlock(),createElementBlock("p",{key:2,innerHTML:l.tagline,class:"tagline"},null,8,_hoisted_6$8)):createCommentVNode("",!0)],!0),renderSlot(l.$slots,"home-hero-info-after",{},void 0,!0),l.actions?(openBlock(),createElementBlock("div",_hoisted_7$6,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.actions,c=>(openBlock(),createElementBlock("div",{key:c.link,class:"action"},[createVNode$1(VPButton,{tag:"a",size:"medium",theme:c.theme,text:c.text,href:c.link,target:c.target,rel:c.rel},null,8,["theme","text","href","target","rel"])]))),128))])):createCommentVNode("",!0),renderSlot(l.$slots,"home-hero-actions-after",{},void 0,!0)]),l.image||unref(s)?(openBlock(),createElementBlock("div",_hoisted_8$3,[createBaseVNode("div",_hoisted_9$1,[o[0]||(o[0]=createBaseVNode("div",{class:"image-bg"},null,-1)),renderSlot(l.$slots,"home-hero-image",{},()=>[l.image?(openBlock(),createBlock(VPImage,{key:0,class:"image-src",image:l.image},null,8,["image"])):createCommentVNode("",!0)],!0)])])):createCommentVNode("",!0)])],2))}}),VPHero=_export_sfc$1(_sfc_main$4d,[["__scopeId","data-v-b653f786"]]),_sfc_main$4c=defineComponent({__name:"VPHomeHero",setup(a){const{frontmatter:s}=useData();return(l,o)=>unref(s).hero?(openBlock(),createBlock(VPHero,{key:0,class:"VPHomeHero",name:unref(s).hero.name,text:unref(s).hero.text,tagline:unref(s).hero.tagline,image:unref(s).hero.image,actions:unref(s).hero.actions},{"home-hero-info-before":withCtx(()=>[renderSlot(l.$slots,"home-hero-info-before")]),"home-hero-info":withCtx(()=>[renderSlot(l.$slots,"home-hero-info")]),"home-hero-info-after":withCtx(()=>[renderSlot(l.$slots,"home-hero-info-after")]),"home-hero-actions-after":withCtx(()=>[renderSlot(l.$slots,"home-hero-actions-after")]),"home-hero-image":withCtx(()=>[renderSlot(l.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):createCommentVNode("",!0)}}),_hoisted_1$2j={class:"box"},_hoisted_2$1w={key:0,class:"icon"},_hoisted_3$1h=["innerHTML"],_hoisted_4$t=["innerHTML"],_hoisted_5$d=["innerHTML"],_hoisted_6$7={key:4,class:"link-text"},_hoisted_7$5={class:"link-text-value"},_sfc_main$4b=defineComponent({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(a){return(s,l)=>(openBlock(),createBlock(_sfc_main$4j,{class:"VPFeature",href:s.link,rel:s.rel,target:s.target,"no-icon":!0,tag:s.link?"a":"div"},{default:withCtx(()=>[createBaseVNode("article",_hoisted_1$2j,[typeof s.icon=="object"&&s.icon.wrap?(openBlock(),createElementBlock("div",_hoisted_2$1w,[createVNode$1(VPImage,{image:s.icon,alt:s.icon.alt,height:s.icon.height||48,width:s.icon.width||48},null,8,["image","alt","height","width"])])):typeof s.icon=="object"?(openBlock(),createBlock(VPImage,{key:1,image:s.icon,alt:s.icon.alt,height:s.icon.height||48,width:s.icon.width||48},null,8,["image","alt","height","width"])):s.icon?(openBlock(),createElementBlock("div",{key:2,class:"icon",innerHTML:s.icon},null,8,_hoisted_3$1h)):createCommentVNode("",!0),createBaseVNode("h2",{class:"title",innerHTML:s.title},null,8,_hoisted_4$t),s.details?(openBlock(),createElementBlock("p",{key:3,class:"details",innerHTML:s.details},null,8,_hoisted_5$d)):createCommentVNode("",!0),s.linkText?(openBlock(),createElementBlock("div",_hoisted_6$7,[createBaseVNode("p",_hoisted_7$5,[createTextVNode(toDisplayString(s.linkText)+" ",1),l[0]||(l[0]=createBaseVNode("span",{class:"vpi-arrow-right link-text-icon"},null,-1))])])):createCommentVNode("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),VPFeature=_export_sfc$1(_sfc_main$4b,[["__scopeId","data-v-1cf25ee8"]]),_hoisted_1$2i={key:0,class:"VPFeatures"},_hoisted_2$1v={class:"container"},_hoisted_3$1g={class:"items"},_sfc_main$4a=defineComponent({__name:"VPFeatures",props:{features:{}},setup(a){const s=a,l=computed(()=>{const o=s.features.length;if(o){if(o===2)return"grid-2";if(o===3)return"grid-3";if(o%3===0)return"grid-6";if(o>3)return"grid-4"}else return});return(o,c)=>o.features?(openBlock(),createElementBlock("div",_hoisted_1$2i,[createBaseVNode("div",_hoisted_2$1v,[createBaseVNode("div",_hoisted_3$1g,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.features,u=>(openBlock(),createElementBlock("div",{key:u.title,class:normalizeClass(["item",[l.value]])},[createVNode$1(VPFeature,{icon:u.icon,title:u.title,details:u.details,link:u.link,"link-text":u.linkText,rel:u.rel,target:u.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):createCommentVNode("",!0)}}),VPFeatures=_export_sfc$1(_sfc_main$4a,[["__scopeId","data-v-cf123a79"]]),_sfc_main$49=defineComponent({__name:"VPHomeFeatures",setup(a){const{frontmatter:s}=useData();return(l,o)=>unref(s).features?(openBlock(),createBlock(VPFeatures,{key:0,class:"VPHomeFeatures",features:unref(s).features},null,8,["features"])):createCommentVNode("",!0)}}),_sfc_main$48=defineComponent({__name:"VPHomeContent",setup(a){const{width:s}=useWindowSize({includeScrollbar:!1});return(l,o)=>(openBlock(),createElementBlock("div",{class:"vp-doc container",style:normalizeStyle$1(unref(s)?{"--vp-offset":`calc(50% - ${unref(s)/2}px)`}:{})},[renderSlot(l.$slots,"default",{},void 0,!0)],4))}}),VPHomeContent=_export_sfc$1(_sfc_main$48,[["__scopeId","data-v-d85af6e4"]]),_hoisted_1$2h={class:"VPHome"},_sfc_main$47=defineComponent({__name:"VPHome",setup(a){const{frontmatter:s}=useData();return(l,o)=>{const c=resolveComponent("Content");return openBlock(),createElementBlock("div",_hoisted_1$2h,[renderSlot(l.$slots,"home-hero-before",{},void 0,!0),createVNode$1(_sfc_main$4c,null,{"home-hero-info-before":withCtx(()=>[renderSlot(l.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":withCtx(()=>[renderSlot(l.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":withCtx(()=>[renderSlot(l.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":withCtx(()=>[renderSlot(l.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":withCtx(()=>[renderSlot(l.$slots,"home-hero-image",{},void 0,!0)]),_:3}),renderSlot(l.$slots,"home-hero-after",{},void 0,!0),renderSlot(l.$slots,"home-features-before",{},void 0,!0),createVNode$1(_sfc_main$49),renderSlot(l.$slots,"home-features-after",{},void 0,!0),unref(s).markdownStyles!==!1?(openBlock(),createBlock(VPHomeContent,{key:0},{default:withCtx(()=>[createVNode$1(c)]),_:1})):(openBlock(),createBlock(c,{key:1}))])}}}),VPHome=_export_sfc$1(_sfc_main$47,[["__scopeId","data-v-6a2b2f08"]]),_sfc_main$46={},_hoisted_1$2g={class:"VPPage"};function _sfc_render$3g(a,s){const l=resolveComponent("Content");return openBlock(),createElementBlock("div",_hoisted_1$2g,[renderSlot(a.$slots,"page-top"),createVNode$1(l),renderSlot(a.$slots,"page-bottom")])}const VPPage=_export_sfc$1(_sfc_main$46,[["render",_sfc_render$3g]]),_sfc_main$45=defineComponent({__name:"VPContent",setup(a){const{page:s,frontmatter:l}=useData(),{hasSidebar:o}=useSidebar();return(c,u)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPContent",{"has-sidebar":unref(o),"is-home":unref(l).layout==="home"}]),id:"VPContent"},[unref(s).isNotFound?renderSlot(c.$slots,"not-found",{key:0},()=>[createVNode$1(NotFound)],!0):unref(l).layout==="page"?(openBlock(),createBlock(VPPage,{key:1},{"page-top":withCtx(()=>[renderSlot(c.$slots,"page-top",{},void 0,!0)]),"page-bottom":withCtx(()=>[renderSlot(c.$slots,"page-bottom",{},void 0,!0)]),_:3})):unref(l).layout==="home"?(openBlock(),createBlock(VPHome,{key:2},{"home-hero-before":withCtx(()=>[renderSlot(c.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":withCtx(()=>[renderSlot(c.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":withCtx(()=>[renderSlot(c.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":withCtx(()=>[renderSlot(c.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":withCtx(()=>[renderSlot(c.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":withCtx(()=>[renderSlot(c.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":withCtx(()=>[renderSlot(c.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":withCtx(()=>[renderSlot(c.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":withCtx(()=>[renderSlot(c.$slots,"home-features-after",{},void 0,!0)]),_:3})):unref(l).layout&&unref(l).layout!=="doc"?(openBlock(),createBlock(resolveDynamicComponent(unref(l).layout),{key:3})):(openBlock(),createBlock(VPDoc,{key:4},{"doc-top":withCtx(()=>[renderSlot(c.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":withCtx(()=>[renderSlot(c.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":withCtx(()=>[renderSlot(c.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":withCtx(()=>[renderSlot(c.$slots,"doc-before",{},void 0,!0)]),"doc-after":withCtx(()=>[renderSlot(c.$slots,"doc-after",{},void 0,!0)]),"aside-top":withCtx(()=>[renderSlot(c.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":withCtx(()=>[renderSlot(c.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":withCtx(()=>[renderSlot(c.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":withCtx(()=>[renderSlot(c.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":withCtx(()=>[renderSlot(c.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":withCtx(()=>[renderSlot(c.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),VPContent=_export_sfc$1(_sfc_main$45,[["__scopeId","data-v-d6c48ef3"]]),_hoisted_1$2f={class:"container"},_hoisted_2$1u=["innerHTML"],_hoisted_3$1f=["innerHTML"],_sfc_main$44=defineComponent({__name:"VPFooter",setup(a){const{theme:s,frontmatter:l}=useData(),{hasSidebar:o}=useSidebar();return(c,u)=>unref(s).footer&&unref(l).footer!==!1?(openBlock(),createElementBlock("footer",{key:0,class:normalizeClass(["VPFooter",{"has-sidebar":unref(o)}])},[createBaseVNode("div",_hoisted_1$2f,[unref(s).footer.message?(openBlock(),createElementBlock("p",{key:0,class:"message",innerHTML:unref(s).footer.message},null,8,_hoisted_2$1u)):createCommentVNode("",!0),unref(s).footer.copyright?(openBlock(),createElementBlock("p",{key:1,class:"copyright",innerHTML:unref(s).footer.copyright},null,8,_hoisted_3$1f)):createCommentVNode("",!0)])],2)):createCommentVNode("",!0)}}),VPFooter=_export_sfc$1(_sfc_main$44,[["__scopeId","data-v-d101d608"]]);function useLocalNav(){const{theme:a,frontmatter:s}=useData(),l=shallowRef([]),o=computed(()=>l.value.length>0);return onContentUpdated(()=>{l.value=getHeaders(s.value.outline??a.value.outline)}),{headers:l,hasLocalNav:o}}const _hoisted_1$2e={class:"header"},_hoisted_2$1t={class:"outline"},_sfc_main$43=defineComponent({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(a){const s=a,{theme:l}=useData(),o=ref(!1),c=ref(0),u=ref(),d=ref();onClickOutside(u,()=>{o.value=!1}),onKeyStroke("Escape",()=>{o.value=!1}),onContentUpdated(()=>{o.value=!1});function f(){o.value=!o.value,c.value=window.innerHeight+Math.min(window.scrollY-s.navHeight,0)}function g($){$.target.classList.contains("outline-link")&&(d.value&&(d.value.style.transition="none"),nextTick(()=>{o.value=!1}))}function y(){o.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return($,x)=>(openBlock(),createElementBlock("div",{class:"VPLocalNavOutlineDropdown",style:normalizeStyle$1({"--vp-vh":c.value+"px"}),ref_key:"main",ref:u},[$.headers.length>0?(openBlock(),createElementBlock("button",{key:0,onClick:f,class:normalizeClass({open:o.value})},[createTextVNode(toDisplayString(unref(resolveTitle)(unref(l)))+" ",1),x[0]||(x[0]=createBaseVNode("span",{class:"vpi-chevron-right icon"},null,-1))],2)):(openBlock(),createElementBlock("button",{key:1,onClick:y},toDisplayString(unref(l).returnToTopLabel||"Return to top"),1)),createVNode$1(Transition,{name:"flyout"},{default:withCtx(()=>[o.value?(openBlock(),createElementBlock("div",{key:0,ref_key:"items",ref:d,class:"items",onClick:g},[createBaseVNode("div",_hoisted_1$2e,[createBaseVNode("a",{class:"top-link",href:"#",onClick:y},toDisplayString(unref(l).returnToTopLabel||"Return to top"),1)]),createBaseVNode("div",_hoisted_2$1t,[createVNode$1(VPDocOutlineItem,{headers:$.headers},null,8,["headers"])])],512)):createCommentVNode("",!0)]),_:1})],4))}}),VPLocalNavOutlineDropdown=_export_sfc$1(_sfc_main$43,[["__scopeId","data-v-6ce03886"]]),_hoisted_1$2d={class:"container"},_hoisted_2$1s=["aria-expanded"],_hoisted_3$1e={class:"menu-text"},_sfc_main$42=defineComponent({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(a){const{theme:s,frontmatter:l}=useData(),{hasSidebar:o}=useSidebar(),{headers:c}=useLocalNav(),{y:u}=useWindowScroll(),d=ref(0);onMounted(()=>{d.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),onContentUpdated(()=>{c.value=getHeaders(l.value.outline??s.value.outline)});const f=computed(()=>c.value.length===0),g=computed(()=>f.value&&!o.value),y=computed(()=>({VPLocalNav:!0,"has-sidebar":o.value,empty:f.value,fixed:g.value}));return($,x)=>unref(l).layout!=="home"&&(!g.value||unref(u)>=d.value)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(y.value)},[createBaseVNode("div",_hoisted_1$2d,[unref(o)?(openBlock(),createElementBlock("button",{key:0,class:"menu","aria-expanded":$.open,"aria-controls":"VPSidebarNav",onClick:x[0]||(x[0]=N=>$.$emit("open-menu"))},[x[1]||(x[1]=createBaseVNode("span",{class:"vpi-align-left menu-icon"},null,-1)),createBaseVNode("span",_hoisted_3$1e,toDisplayString(unref(s).sidebarMenuLabel||"Menu"),1)],8,_hoisted_2$1s)):createCommentVNode("",!0),createVNode$1(VPLocalNavOutlineDropdown,{headers:unref(c),navHeight:d.value},null,8,["headers","navHeight"])])],2)):createCommentVNode("",!0)}}),VPLocalNav=_export_sfc$1(_sfc_main$42,[["__scopeId","data-v-6ea94542"]]);function useNav(){const a=ref(!1);function s(){a.value=!0,window.addEventListener("resize",c)}function l(){a.value=!1,window.removeEventListener("resize",c)}function o(){a.value?l():s()}function c(){window.outerWidth>=768&&l()}const u=useRoute();return watch(()=>u.path,l),{isScreenOpen:a,openScreen:s,closeScreen:l,toggleScreen:o}}const _sfc_main$41={},_hoisted_1$2c={class:"VPSwitch",type:"button",role:"switch"},_hoisted_2$1r={class:"check"},_hoisted_3$1d={key:0,class:"icon"};function _sfc_render$3f(a,s){return openBlock(),createElementBlock("button",_hoisted_1$2c,[createBaseVNode("span",_hoisted_2$1r,[a.$slots.default?(openBlock(),createElementBlock("span",_hoisted_3$1d,[renderSlot(a.$slots,"default",{},void 0,!0)])):createCommentVNode("",!0)])])}const VPSwitch=_export_sfc$1(_sfc_main$41,[["render",_sfc_render$3f],["__scopeId","data-v-d40f0642"]]),_sfc_main$40=defineComponent({__name:"VPSwitchAppearance",setup(a){const{isDark:s,theme:l}=useData(),o=inject("toggle-appearance",()=>{s.value=!s.value}),c=computed(()=>s.value?l.value.lightModeSwitchTitle||"Switch to light theme":l.value.darkModeSwitchTitle||"Switch to dark theme");return(u,d)=>(openBlock(),createBlock(VPSwitch,{title:c.value,class:"VPSwitchAppearance","aria-checked":unref(s),onClick:unref(o)},{default:withCtx(()=>d[0]||(d[0]=[createBaseVNode("span",{class:"vpi-sun sun"},null,-1),createBaseVNode("span",{class:"vpi-moon moon"},null,-1)])),_:1},8,["title","aria-checked","onClick"]))}}),VPSwitchAppearance=_export_sfc$1(_sfc_main$40,[["__scopeId","data-v-7a3742ae"]]),_hoisted_1$2b={key:0,class:"VPNavBarAppearance"},_sfc_main$3$=defineComponent({__name:"VPNavBarAppearance",setup(a){const{site:s}=useData();return(l,o)=>unref(s).appearance&&unref(s).appearance!=="force-dark"?(openBlock(),createElementBlock("div",_hoisted_1$2b,[createVNode$1(VPSwitchAppearance)])):createCommentVNode("",!0)}}),VPNavBarAppearance=_export_sfc$1(_sfc_main$3$,[["__scopeId","data-v-2756eff6"]]),focusedElement=ref();let active=!1,listeners=0;function useFlyout(a){const s=ref(!1);if(inBrowser){!active&&activateFocusTracking(),listeners++;const l=watch(focusedElement,o=>{o===a.el.value||a.el.value?.contains(o)?(s.value=!0,a.onFocus?.()):(s.value=!1,a.onBlur?.())});onUnmounted(()=>{l(),listeners--,listeners||deactivateFocusTracking()})}return readonly(s)}function activateFocusTracking(){document.addEventListener("focusin",handleFocusIn),active=!0,focusedElement.value=document.activeElement}function deactivateFocusTracking(){document.removeEventListener("focusin",handleFocusIn)}function handleFocusIn(){focusedElement.value=document.activeElement}const _hoisted_1$2a={class:"VPMenuLink"},_sfc_main$3_=defineComponent({__name:"VPMenuLink",props:{item:{}},setup(a){const{page:s}=useData();return(l,o)=>(openBlock(),createElementBlock("div",_hoisted_1$2a,[createVNode$1(_sfc_main$4j,{class:normalizeClass({active:unref(isActive)(unref(s).relativePath,l.item.activeMatch||l.item.link,!!l.item.activeMatch)}),href:l.item.link,target:l.item.target,rel:l.item.rel},{default:withCtx(()=>[createTextVNode(toDisplayString(l.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),VPMenuLink=_export_sfc$1(_sfc_main$3_,[["__scopeId","data-v-03a0723c"]]),_hoisted_1$29={class:"VPMenuGroup"},_hoisted_2$1q={key:0,class:"title"},_sfc_main$3Z=defineComponent({__name:"VPMenuGroup",props:{text:{},items:{}},setup(a){return(s,l)=>(openBlock(),createElementBlock("div",_hoisted_1$29,[s.text?(openBlock(),createElementBlock("p",_hoisted_2$1q,toDisplayString(s.text),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.items,o=>(openBlock(),createElementBlock(Fragment,null,["link"in o?(openBlock(),createBlock(VPMenuLink,{key:0,item:o},null,8,["item"])):createCommentVNode("",!0)],64))),256))]))}}),VPMenuGroup=_export_sfc$1(_sfc_main$3Z,[["__scopeId","data-v-15d4a2bf"]]),_hoisted_1$28={class:"VPMenu"},_hoisted_2$1p={key:0,class:"items"},_sfc_main$3Y=defineComponent({__name:"VPMenu",props:{items:{}},setup(a){return(s,l)=>(openBlock(),createElementBlock("div",_hoisted_1$28,[s.items?(openBlock(),createElementBlock("div",_hoisted_2$1p,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.items,o=>(openBlock(),createElementBlock(Fragment,{key:o.text},["link"in o?(openBlock(),createBlock(VPMenuLink,{key:0,item:o},null,8,["item"])):(openBlock(),createBlock(VPMenuGroup,{key:1,text:o.text,items:o.items},null,8,["text","items"]))],64))),128))])):createCommentVNode("",!0),renderSlot(s.$slots,"default",{},void 0,!0)]))}}),VPMenu=_export_sfc$1(_sfc_main$3Y,[["__scopeId","data-v-3f5854b2"]]),_hoisted_1$27=["aria-expanded","aria-label"],_hoisted_2$1o={key:0,class:"text"},_hoisted_3$1c=["innerHTML"],_hoisted_4$s={key:1,class:"vpi-more-horizontal icon"},_hoisted_5$c={class:"menu"},_sfc_main$3X=defineComponent({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(a){const s=ref(!1),l=ref();useFlyout({el:l,onBlur:o});function o(){s.value=!1}return(c,u)=>(openBlock(),createElementBlock("div",{class:"VPFlyout",ref_key:"el",ref:l,onMouseenter:u[1]||(u[1]=d=>s.value=!0),onMouseleave:u[2]||(u[2]=d=>s.value=!1)},[createBaseVNode("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":s.value,"aria-label":c.label,onClick:u[0]||(u[0]=d=>s.value=!s.value)},[c.button||c.icon?(openBlock(),createElementBlock("span",_hoisted_2$1o,[c.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([c.icon,"option-icon"])},null,2)):createCommentVNode("",!0),c.button?(openBlock(),createElementBlock("span",{key:1,innerHTML:c.button},null,8,_hoisted_3$1c)):createCommentVNode("",!0),u[3]||(u[3]=createBaseVNode("span",{class:"vpi-chevron-down text-icon"},null,-1))])):(openBlock(),createElementBlock("span",_hoisted_4$s))],8,_hoisted_1$27),createBaseVNode("div",_hoisted_5$c,[createVNode$1(VPMenu,{items:c.items},{default:withCtx(()=>[renderSlot(c.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),VPFlyout=_export_sfc$1(_sfc_main$3X,[["__scopeId","data-v-4aed174b"]]),_hoisted_1$26=["href","aria-label","innerHTML"],_sfc_main$3W=defineComponent({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(a){const s=a,l=computed(()=>typeof s.icon=="object"?s.icon.svg:`<span class="vpi-social-${s.icon}" />`);return(o,c)=>(openBlock(),createElementBlock("a",{class:"VPSocialLink no-icon",href:o.link,"aria-label":o.ariaLabel??(typeof o.icon=="string"?o.icon:""),target:"_blank",rel:"noopener",innerHTML:l.value},null,8,_hoisted_1$26))}}),VPSocialLink=_export_sfc$1(_sfc_main$3W,[["__scopeId","data-v-fad72068"]]),_hoisted_1$25={class:"VPSocialLinks"},_sfc_main$3V=defineComponent({__name:"VPSocialLinks",props:{links:{}},setup(a){return(s,l)=>(openBlock(),createElementBlock("div",_hoisted_1$25,[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.links,({link:o,icon:c,ariaLabel:u})=>(openBlock(),createBlock(VPSocialLink,{key:o,icon:c,link:o,ariaLabel:u},null,8,["icon","link","ariaLabel"]))),128))]))}}),VPSocialLinks=_export_sfc$1(_sfc_main$3V,[["__scopeId","data-v-899a3f57"]]),_hoisted_1$24={key:0,class:"group translations"},_hoisted_2$1n={class:"trans-title"},_hoisted_3$1b={key:1,class:"group"},_hoisted_4$r={class:"item appearance"},_hoisted_5$b={class:"label"},_hoisted_6$6={class:"appearance-action"},_hoisted_7$4={key:2,class:"group"},_hoisted_8$2={class:"item social-links"},_sfc_main$3U=defineComponent({__name:"VPNavBarExtra",setup(a){const{site:s,theme:l}=useData(),{localeLinks:o,currentLang:c}=useLangs({correspondingLink:!0}),u=computed(()=>o.value.length&&c.value.label||s.value.appearance||l.value.socialLinks);return(d,f)=>u.value?(openBlock(),createBlock(VPFlyout,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:withCtx(()=>[unref(o).length&&unref(c).label?(openBlock(),createElementBlock("div",_hoisted_1$24,[createBaseVNode("p",_hoisted_2$1n,toDisplayString(unref(c).label),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(o),g=>(openBlock(),createBlock(VPMenuLink,{key:g.link,item:g},null,8,["item"]))),128))])):createCommentVNode("",!0),unref(s).appearance&&unref(s).appearance!=="force-dark"?(openBlock(),createElementBlock("div",_hoisted_3$1b,[createBaseVNode("div",_hoisted_4$r,[createBaseVNode("p",_hoisted_5$b,toDisplayString(unref(l).darkModeSwitchLabel||"Appearance"),1),createBaseVNode("div",_hoisted_6$6,[createVNode$1(VPSwitchAppearance)])])])):createCommentVNode("",!0),unref(l).socialLinks?(openBlock(),createElementBlock("div",_hoisted_7$4,[createBaseVNode("div",_hoisted_8$2,[createVNode$1(VPSocialLinks,{class:"social-links-list",links:unref(l).socialLinks},null,8,["links"])])])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)}}),VPNavBarExtra=_export_sfc$1(_sfc_main$3U,[["__scopeId","data-v-02cf6c43"]]),_hoisted_1$23=["aria-expanded"],_sfc_main$3T=defineComponent({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(a){return(s,l)=>(openBlock(),createElementBlock("button",{type:"button",class:normalizeClass(["VPNavBarHamburger",{active:s.active}]),"aria-label":"mobile navigation","aria-expanded":s.active,"aria-controls":"VPNavScreen",onClick:l[0]||(l[0]=o=>s.$emit("click"))},l[1]||(l[1]=[createBaseVNode("span",{class:"container"},[createBaseVNode("span",{class:"top"}),createBaseVNode("span",{class:"middle"}),createBaseVNode("span",{class:"bottom"})],-1)]),10,_hoisted_1$23))}}),VPNavBarHamburger=_export_sfc$1(_sfc_main$3T,[["__scopeId","data-v-92a304c8"]]),_hoisted_1$22=["innerHTML"],_sfc_main$3S=defineComponent({__name:"VPNavBarMenuLink",props:{item:{}},setup(a){const{page:s}=useData();return(l,o)=>(openBlock(),createBlock(_sfc_main$4j,{class:normalizeClass({VPNavBarMenuLink:!0,active:unref(isActive)(unref(s).relativePath,l.item.activeMatch||l.item.link,!!l.item.activeMatch)}),href:l.item.link,noIcon:l.item.noIcon,target:l.item.target,rel:l.item.rel,tabindex:"0"},{default:withCtx(()=>[createBaseVNode("span",{innerHTML:l.item.text},null,8,_hoisted_1$22)]),_:1},8,["class","href","noIcon","target","rel"]))}}),VPNavBarMenuLink=_export_sfc$1(_sfc_main$3S,[["__scopeId","data-v-edb1df85"]]),_sfc_main$3R=defineComponent({__name:"VPNavBarMenuGroup",props:{item:{}},setup(a){const s=a,{page:l}=useData(),o=u=>"link"in u?isActive(l.value.relativePath,u.link,!!s.item.activeMatch):u.items.some(o),c=computed(()=>o(s.item));return(u,d)=>(openBlock(),createBlock(VPFlyout,{class:normalizeClass({VPNavBarMenuGroup:!0,active:unref(isActive)(unref(l).relativePath,u.item.activeMatch,!!u.item.activeMatch)||c.value}),button:u.item.text,items:u.item.items},null,8,["class","button","items"]))}}),_hoisted_1$21={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},_sfc_main$3Q=defineComponent({__name:"VPNavBarMenu",setup(a){const{theme:s}=useData();return(l,o)=>unref(s).nav?(openBlock(),createElementBlock("nav",_hoisted_1$21,[o[0]||(o[0]=createBaseVNode("span",{id:"main-nav-aria-label",class:"visually-hidden"},"Main Navigation",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s).nav,c=>(openBlock(),createElementBlock(Fragment,{key:c.text},["link"in c?(openBlock(),createBlock(VPNavBarMenuLink,{key:0,item:c},null,8,["item"])):(openBlock(),createBlock(_sfc_main$3R,{key:1,item:c},null,8,["item"]))],64))),128))])):createCommentVNode("",!0)}}),VPNavBarMenu=_export_sfc$1(_sfc_main$3Q,[["__scopeId","data-v-a1f5e620"]]);var Ce$1;const Be$1=typeof window<"u",yt$1=a=>typeof a=="string",ie=()=>{};Be$1&&((Ce$1=window?.navigator)!=null&&Ce$1.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function me$1(a){return typeof a=="function"?a():unref(a)}function Et$1(a,s){function l(...o){a(()=>s.apply(this,o),{fn:s,thisArg:this,args:o})}return l}function It$1(a,s={}){let l,o;return c=>{const u=me$1(a),d=me$1(s.maxWait);if(l&&clearTimeout(l),u<=0||d!==void 0&&d<=0)return o&&(clearTimeout(o),o=null),c();d&&!o&&(o=setTimeout(()=>{l&&clearTimeout(l),o=null,c()},d)),l=setTimeout(()=>{o&&clearTimeout(o),o=null,c()},u)}}function St$1(a){return a}function wt$1(a){return getCurrentScope()?(onScopeDispose(a),!0):!1}function He$1(a,s=200,l={}){return Et$1(It$1(s,l),a)}function ue$1(a,s=200,l={}){if(s<=0)return a;const o=ref(a.value),c=He$1(()=>{o.value=a.value},s,l);return watch(a,()=>c()),o}function We$1(a,s,l){return watch(a,(o,c,u)=>{o&&s(o,c,u)},l)}function Mt$1(a){var s;const l=me$1(a);return(s=l?.$el)!=null?s:l}const ze$1=Be$1?window:void 0;function re$1(...a){let s,l,o,c;if(yt$1(a[0])?([l,o,c]=a,s=ze$1):[s,l,o,c]=a,!s)return ie;let u=ie;const d=watch(()=>Mt$1(s),g=>{u(),g&&(g.addEventListener(l,o,c),u=()=>{g.removeEventListener(l,o,c),u=ie})},{immediate:!0,flush:"post"}),f=()=>{d(),u()};return wt$1(f),f}const pe$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge$1="__vueuse_ssr_handlers__";pe$1[ge$1]=pe$1[ge$1]||{};const bt$1={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function xt$1(a={}){const{reactive:s=!1,target:l=ze$1,aliasMap:o=bt$1,passive:c=!0,onEventFired:u=ie}=a,d=reactive(new Set),f={toJSON(){return{}},current:d},g=s?reactive(f):f,y=new Set,$=new Set;function x(ne,se){ne in g&&(s?g[ne]=se:g[ne].value=se)}function N(){for(const ne of $)x(ne,!1)}function R(ne,se){var ce,fe;const ea=(ce=ne.key)==null?void 0:ce.toLowerCase(),ta=[(fe=ne.code)==null?void 0:fe.toLowerCase(),ea].filter(Boolean);ea&&(se?d.add(ea):d.delete(ea));for(const na of ta)$.add(na),x(na,se);ea==="meta"&&!se?(y.forEach(na=>{d.delete(na),x(na,!1)}),y.clear()):typeof ne.getModifierState=="function"&&ne.getModifierState("Meta")&&se&&[...d,...ta].forEach(na=>y.add(na))}re$1(l,"keydown",ne=>(R(ne,!0),u(ne)),{passive:c}),re$1(l,"keyup",ne=>(R(ne,!1),u(ne)),{passive:c}),re$1("blur",N,{passive:!0}),re$1("focus",N,{passive:!0});const j=new Proxy(g,{get(ne,se,ce){if(typeof se!="string")return Reflect.get(ne,se,ce);if(se=se.toLowerCase(),se in o&&(se=o[se]),!(se in g))if(/[+_-]/.test(se)){const ea=se.split(/[+_-]/g).map(ta=>ta.trim());g[se]=computed(()=>ea.every(ta=>unref(j[ta])))}else g[se]=ref(!1);const fe=Reflect.get(ne,se,ce);return s?unref(fe):fe}});return j}var $e$1;(function(a){a.UP="UP",a.RIGHT="RIGHT",a.DOWN="DOWN",a.LEFT="LEFT",a.NONE="NONE"})($e$1||($e$1={}));var At$1=Object.defineProperty,Te$1=Object.getOwnPropertySymbols,kt$1=Object.prototype.hasOwnProperty,Ot$1=Object.prototype.propertyIsEnumerable,Ne$1=(a,s,l)=>s in a?At$1(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,Lt$1=(a,s)=>{for(var l in s||(s={}))kt$1.call(s,l)&&Ne$1(a,l,s[l]);if(Te$1)for(var l of Te$1(s))Ot$1.call(s,l)&&Ne$1(a,l,s[l]);return a};const Rt$1={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Lt$1({linear:St$1},Rt$1);function K$1(a){return Array.isArray?Array.isArray(a):Je$1(a)==="[object Array]"}const Ct$1=1/0;function $t$1(a){if(typeof a=="string")return a;let s=a+"";return s=="0"&&1/a==-Ct$1?"-0":s}function Tt$1(a){return a==null?"":$t$1(a)}function D$1(a){return typeof a=="string"}function Qe$1(a){return typeof a=="number"}function Nt$1(a){return a===!0||a===!1||Pt$1(a)&&Je$1(a)=="[object Boolean]"}function Ye$1(a){return typeof a=="object"}function Pt$1(a){return Ye$1(a)&&a!==null}function C(a){return a!=null}function he$1(a){return!a.trim().length}function Je$1(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(a)}const Dt$1="Incorrect 'index' type",Ft$1=a=>`Invalid value for key ${a}`,Kt$1=a=>`Pattern length exceeds max of ${a}.`,Gt$1=a=>`Missing ${a} property in key`,jt$1=a=>`Property 'weight' in key '${a}' must be a positive integer`,Pe$1=Object.prototype.hasOwnProperty;let Vt$1=class{constructor(s){this._keys=[],this._keyMap={};let l=0;s.forEach(o=>{let c=Xe$1(o);l+=c.weight,this._keys.push(c),this._keyMap[c.id]=c,l+=c.weight}),this._keys.forEach(o=>{o.weight/=l})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}};function Xe$1(a){let s=null,l=null,o=null,c=1,u=null;if(D$1(a)||K$1(a))o=a,s=De$1(a),l=_e$1(a);else{if(!Pe$1.call(a,"name"))throw new Error(Gt$1("name"));const d=a.name;if(o=d,Pe$1.call(a,"weight")&&(c=a.weight,c<=0))throw new Error(jt$1(d));s=De$1(d),l=_e$1(d),u=a.getFn}return{path:s,id:l,weight:c,src:o,getFn:u}}function De$1(a){return K$1(a)?a:a.split(".")}function _e$1(a){return K$1(a)?a.join("."):a}function Ut$1(a,s){let l=[],o=!1;const c=(u,d,f)=>{if(C(u))if(!d[f])l.push(u);else{let g=d[f];const y=u[g];if(!C(y))return;if(f===d.length-1&&(D$1(y)||Qe$1(y)||Nt$1(y)))l.push(Tt$1(y));else if(K$1(y)){o=!0;for(let $=0,x=y.length;$<x;$+=1)c(y[$],d,f+1)}else d.length&&c(y,d,f+1)}};return c(a,D$1(s)?s.split("."):s,0),o?l:l[0]}const Bt$1={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ht$1={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(a,s)=>a.score===s.score?a.idx<s.idx?-1:1:a.score<s.score?-1:1},Wt$1={location:0,threshold:.6,distance:100},zt$1={useExtendedSearch:!1,getFn:Ut$1,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var m$2={...Ht$1,...Bt$1,...Wt$1,...zt$1};const Qt$1=/[^ ]+/g;function Yt$1(a=1,s=3){const l=new Map,o=Math.pow(10,s);return{get(c){const u=c.match(Qt$1).length;if(l.has(u))return l.get(u);const d=1/Math.pow(u,.5*a),f=parseFloat(Math.round(d*o)/o);return l.set(u,f),f},clear(){l.clear()}}}let xe$1=class{constructor({getFn:s=m$2.getFn,fieldNormWeight:l=m$2.fieldNormWeight}={}){this.norm=Yt$1(l,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((l,o)=>{this._keysMap[l.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,D$1(this.docs[0])?this.docs.forEach((s,l)=>{this._addString(s,l)}):this.docs.forEach((s,l)=>{this._addObject(s,l)}),this.norm.clear())}add(s){const l=this.size();D$1(s)?this._addString(s,l):this._addObject(s,l)}removeAt(s){this.records.splice(s,1);for(let l=s,o=this.size();l<o;l+=1)this.records[l].i-=1}getValueForItemAtKeyId(s,l){return s[this._keysMap[l]]}size(){return this.records.length}_addString(s,l){if(!C(s)||he$1(s))return;let o={v:s,i:l,n:this.norm.get(s)};this.records.push(o)}_addObject(s,l){let o={i:l,$:{}};this.keys.forEach((c,u)=>{let d=c.getFn?c.getFn(s):this.getFn(s,c.path);if(C(d)){if(K$1(d)){let f=[];const g=[{nestedArrIndex:-1,value:d}];for(;g.length;){const{nestedArrIndex:y,value:$}=g.pop();if(C($))if(D$1($)&&!he$1($)){let x={v:$,i:y,n:this.norm.get($)};f.push(x)}else K$1($)&&$.forEach((x,N)=>{g.push({nestedArrIndex:N,value:x})})}o.$[u]=f}else if(D$1(d)&&!he$1(d)){let f={v:d,n:this.norm.get(d)};o.$[u]=f}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}};function qe$1(a,s,{getFn:l=m$2.getFn,fieldNormWeight:o=m$2.fieldNormWeight}={}){const c=new xe$1({getFn:l,fieldNormWeight:o});return c.setKeys(a.map(Xe$1)),c.setSources(s),c.create(),c}function Jt$1(a,{getFn:s=m$2.getFn,fieldNormWeight:l=m$2.fieldNormWeight}={}){const{keys:o,records:c}=a,u=new xe$1({getFn:s,fieldNormWeight:l});return u.setKeys(o),u.setIndexRecords(c),u}function oe(a,{errors:s=0,currentLocation:l=0,expectedLocation:o=0,distance:c=m$2.distance,ignoreLocation:u=m$2.ignoreLocation}={}){const d=s/a.length;if(u)return d;const f=Math.abs(o-l);return c?d+f/c:f?1:d}function Xt$1(a=[],s=m$2.minMatchCharLength){let l=[],o=-1,c=-1,u=0;for(let d=a.length;u<d;u+=1){let f=a[u];f&&o===-1?o=u:!f&&o!==-1&&(c=u-1,c-o+1>=s&&l.push([o,c]),o=-1)}return a[u-1]&&u-o>=s&&l.push([o,u-1]),l}const W$1=32;function qt$1(a,s,l,{location:o=m$2.location,distance:c=m$2.distance,threshold:u=m$2.threshold,findAllMatches:d=m$2.findAllMatches,minMatchCharLength:f=m$2.minMatchCharLength,includeMatches:g=m$2.includeMatches,ignoreLocation:y=m$2.ignoreLocation}={}){if(s.length>W$1)throw new Error(Kt$1(W$1));const $=s.length,x=a.length,N=Math.max(0,Math.min(o,x));let R=u,j=N;const ne=f>1||g,se=ne?Array(x):[];let ce;for(;(ce=a.indexOf(s,j))>-1;){let ia=oe(s,{currentLocation:ce,expectedLocation:N,distance:c,ignoreLocation:y});if(R=Math.min(ia,R),j=ce+$,ne){let sa=0;for(;sa<$;)se[ce+sa]=1,sa+=1}}j=-1;let fe=[],ea=1,ta=$+x;const na=1<<$-1;for(let ia=0;ia<$;ia+=1){let sa=0,ra=ta;for(;sa<ra;)oe(s,{errors:ia,currentLocation:N+ra,expectedLocation:N,distance:c,ignoreLocation:y})<=R?sa=ra:ta=ra,ra=Math.floor((ta-sa)/2+sa);ta=ra;let la=Math.max(1,N-ra+1),oa=d?x:Math.min(N+ra,x)+$,ca=Array(oa+2);ca[oa+1]=(1<<ia)-1;for(let pa=oa;pa>=la;pa-=1){let ua=pa-1,da=l[a.charAt(ua)];if(ne&&(se[ua]=+!!da),ca[pa]=(ca[pa+1]<<1|1)&da,ia&&(ca[pa]|=(fe[pa+1]|fe[pa])<<1|1|fe[pa+1]),ca[pa]&na&&(ea=oe(s,{errors:ia,currentLocation:ua,expectedLocation:N,distance:c,ignoreLocation:y}),ea<=R)){if(R=ea,j=ua,j<=N)break;la=Math.max(1,2*N-j)}}if(oe(s,{errors:ia+1,currentLocation:N,expectedLocation:N,distance:c,ignoreLocation:y})>R)break;fe=ca}const aa={isMatch:j>=0,score:Math.max(.001,ea)};if(ne){const ia=Xt$1(se,f);ia.length?g&&(aa.indices=ia):aa.isMatch=!1}return aa}function Zt$1(a){let s={};for(let l=0,o=a.length;l<o;l+=1){const c=a.charAt(l);s[c]=(s[c]||0)|1<<o-l-1}return s}let Ze$1=class{constructor(s,{location:l=m$2.location,threshold:o=m$2.threshold,distance:c=m$2.distance,includeMatches:u=m$2.includeMatches,findAllMatches:d=m$2.findAllMatches,minMatchCharLength:f=m$2.minMatchCharLength,isCaseSensitive:g=m$2.isCaseSensitive,ignoreLocation:y=m$2.ignoreLocation}={}){if(this.options={location:l,threshold:o,distance:c,includeMatches:u,findAllMatches:d,minMatchCharLength:f,isCaseSensitive:g,ignoreLocation:y},this.pattern=g?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const $=(N,R)=>{this.chunks.push({pattern:N,alphabet:Zt$1(N),startIndex:R})},x=this.pattern.length;if(x>W$1){let N=0;const R=x%W$1,j=x-R;for(;N<j;)$(this.pattern.substr(N,W$1),N),N+=W$1;if(R){const ne=x-W$1;$(this.pattern.substr(ne),ne)}}else $(this.pattern,0)}searchIn(s){const{isCaseSensitive:l,includeMatches:o}=this.options;if(l||(s=s.toLowerCase()),this.pattern===s){let j={isMatch:!0,score:0};return o&&(j.indices=[[0,s.length-1]]),j}const{location:c,distance:u,threshold:d,findAllMatches:f,minMatchCharLength:g,ignoreLocation:y}=this.options;let $=[],x=0,N=!1;this.chunks.forEach(({pattern:j,alphabet:ne,startIndex:se})=>{const{isMatch:ce,score:fe,indices:ea}=qt$1(s,j,ne,{location:c+se,distance:u,threshold:d,findAllMatches:f,minMatchCharLength:g,includeMatches:o,ignoreLocation:y});ce&&(N=!0),x+=fe,ce&&ea&&($=[...$,...ea])});let R={isMatch:N,score:N?x/this.chunks.length:1};return N&&o&&(R.indices=$),R}},V$1=class{constructor(s){this.pattern=s}static isMultiMatch(s){return Fe$1(s,this.multiRegex)}static isSingleMatch(s){return Fe$1(s,this.singleRegex)}search(){}};function Fe$1(a,s){const l=a.match(s);return l?l[1]:null}class es extends V$1{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const l=s===this.pattern;return{isMatch:l,score:l?0:1,indices:[0,this.pattern.length-1]}}}class ts extends V$1{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const l=s.indexOf(this.pattern)===-1;return{isMatch:l,score:l?0:1,indices:[0,s.length-1]}}}class ss extends V$1{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const l=s.startsWith(this.pattern);return{isMatch:l,score:l?0:1,indices:[0,this.pattern.length-1]}}}class ns extends V$1{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const l=!s.startsWith(this.pattern);return{isMatch:l,score:l?0:1,indices:[0,s.length-1]}}}class rs extends V$1{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const l=s.endsWith(this.pattern);return{isMatch:l,score:l?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class os extends V$1{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const l=!s.endsWith(this.pattern);return{isMatch:l,score:l?0:1,indices:[0,s.length-1]}}}let et$1=class extends V$1{constructor(s,{location:l=m$2.location,threshold:o=m$2.threshold,distance:c=m$2.distance,includeMatches:u=m$2.includeMatches,findAllMatches:d=m$2.findAllMatches,minMatchCharLength:f=m$2.minMatchCharLength,isCaseSensitive:g=m$2.isCaseSensitive,ignoreLocation:y=m$2.ignoreLocation}={}){super(s),this._bitapSearch=new Ze$1(s,{location:l,threshold:o,distance:c,includeMatches:u,findAllMatches:d,minMatchCharLength:f,isCaseSensitive:g,ignoreLocation:y})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}},tt$1=class extends V$1{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let l=0,o;const c=[],u=this.pattern.length;for(;(o=s.indexOf(this.pattern,l))>-1;)l=o+u,c.push([o,l-1]);const d=!!c.length;return{isMatch:d,score:d?0:1,indices:c}}};const ve$1=[es,tt$1,ss,ns,os,rs,ts,et$1],Ke$1=ve$1.length,is$1=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,cs="|";function as(a,s={}){return a.split(cs).map(l=>{let o=l.trim().split(is$1).filter(u=>u&&!!u.trim()),c=[];for(let u=0,d=o.length;u<d;u+=1){const f=o[u];let g=!1,y=-1;for(;!g&&++y<Ke$1;){const $=ve$1[y];let x=$.isMultiMatch(f);x&&(c.push(new $(x,s)),g=!0)}if(!g)for(y=-1;++y<Ke$1;){const $=ve$1[y];let x=$.isSingleMatch(f);if(x){c.push(new $(x,s));break}}}return c})}const ls=new Set([et$1.type,tt$1.type]);class us{constructor(s,{isCaseSensitive:l=m$2.isCaseSensitive,includeMatches:o=m$2.includeMatches,minMatchCharLength:c=m$2.minMatchCharLength,ignoreLocation:u=m$2.ignoreLocation,findAllMatches:d=m$2.findAllMatches,location:f=m$2.location,threshold:g=m$2.threshold,distance:y=m$2.distance}={}){this.query=null,this.options={isCaseSensitive:l,includeMatches:o,minMatchCharLength:c,findAllMatches:d,ignoreLocation:u,location:f,threshold:g,distance:y},this.pattern=l?s:s.toLowerCase(),this.query=as(this.pattern,this.options)}static condition(s,l){return l.useExtendedSearch}searchIn(s){const l=this.query;if(!l)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:c}=this.options;s=c?s:s.toLowerCase();let u=0,d=[],f=0;for(let g=0,y=l.length;g<y;g+=1){const $=l[g];d.length=0,u=0;for(let x=0,N=$.length;x<N;x+=1){const R=$[x],{isMatch:j,indices:ne,score:se}=R.search(s);if(j){if(u+=1,f+=se,o){const ce=R.constructor.type;ls.has(ce)?d=[...d,...ne]:d.push(ne)}}else{f=0,u=0,d.length=0;break}}if(u){let x={isMatch:!0,score:f/u};return o&&(x.indices=d),x}}return{isMatch:!1,score:1}}}const ye$1=[];function hs(...a){ye$1.push(...a)}function Ee$1(a,s){for(let l=0,o=ye$1.length;l<o;l+=1){let c=ye$1[l];if(c.condition(a,s))return new c(a,s)}return new Ze$1(a,s)}const ae$1={AND:"$and",OR:"$or"},Ie$1={PATH:"$path",PATTERN:"$val"},Se$1=a=>!!(a[ae$1.AND]||a[ae$1.OR]),ds=a=>!!a[Ie$1.PATH],fs=a=>!K$1(a)&&Ye$1(a)&&!Se$1(a),Ge$1=a=>({[ae$1.AND]:Object.keys(a).map(s=>({[s]:a[s]}))});function st$1(a,s,{auto:l=!0}={}){const o=c=>{let u=Object.keys(c);const d=ds(c);if(!d&&u.length>1&&!Se$1(c))return o(Ge$1(c));if(fs(c)){const g=d?c[Ie$1.PATH]:u[0],y=d?c[Ie$1.PATTERN]:c[g];if(!D$1(y))throw new Error(Ft$1(g));const $={keyId:_e$1(g),pattern:y};return l&&($.searcher=Ee$1(y,s)),$}let f={children:[],operator:u[0]};return u.forEach(g=>{const y=c[g];K$1(y)&&y.forEach($=>{f.children.push(o($))})}),f};return Se$1(a)||(a=Ge$1(a)),o(a)}function ms(a,{ignoreFieldNorm:s=m$2.ignoreFieldNorm}){a.forEach(l=>{let o=1;l.matches.forEach(({key:c,norm:u,score:d})=>{const f=c?c.weight:null;o*=Math.pow(d===0&&f?Number.EPSILON:d,(f||1)*(s?1:u))}),l.score=o})}function ps(a,s){const l=a.matches;s.matches=[],C(l)&&l.forEach(o=>{if(!C(o.indices)||!o.indices.length)return;const{indices:c,value:u}=o;let d={indices:c,value:u};o.key&&(d.key=o.key.src),o.idx>-1&&(d.refIndex=o.idx),s.matches.push(d)})}function gs(a,s){s.score=a.score}function _s(a,s,{includeMatches:l=m$2.includeMatches,includeScore:o=m$2.includeScore}={}){const c=[];return l&&c.push(ps),o&&c.push(gs),a.map(u=>{const{idx:d}=u,f={item:s[d],refIndex:d};return c.length&&c.forEach(g=>{g(u,f)}),f})}let Y$1=class{constructor(s,l={},o){this.options={...m$2,...l},this.options.useExtendedSearch,this._keyStore=new Vt$1(this.options.keys),this.setCollection(s,o)}setCollection(s,l){if(this._docs=s,l&&!(l instanceof xe$1))throw new Error(Dt$1);this._myIndex=l||qe$1(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){!C(s)||(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const l=[];for(let o=0,c=this._docs.length;o<c;o+=1){const u=this._docs[o];s(u,o)&&(this.removeAt(o),o-=1,c-=1,l.push(u))}return l}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:l=-1}={}){const{includeMatches:o,includeScore:c,shouldSort:u,sortFn:d,ignoreFieldNorm:f}=this.options;let g=D$1(s)?D$1(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return ms(g,{ignoreFieldNorm:f}),u&&g.sort(d),Qe$1(l)&&l>-1&&(g=g.slice(0,l)),_s(g,this._docs,{includeMatches:o,includeScore:c})}_searchStringList(s){const l=Ee$1(s,this.options),{records:o}=this._myIndex,c=[];return o.forEach(({v:u,i:d,n:f})=>{if(!C(u))return;const{isMatch:g,score:y,indices:$}=l.searchIn(u);g&&c.push({item:u,idx:d,matches:[{score:y,value:u,norm:f,indices:$}]})}),c}_searchLogical(s){const l=st$1(s,this.options),o=(f,g,y)=>{if(!f.children){const{keyId:x,searcher:N}=f,R=this._findMatches({key:this._keyStore.get(x),value:this._myIndex.getValueForItemAtKeyId(g,x),searcher:N});return R&&R.length?[{idx:y,item:g,matches:R}]:[]}const $=[];for(let x=0,N=f.children.length;x<N;x+=1){const R=f.children[x],j=o(R,g,y);if(j.length)$.push(...j);else if(f.operator===ae$1.AND)return[]}return $},c=this._myIndex.records,u={},d=[];return c.forEach(({$:f,i:g})=>{if(C(f)){let y=o(l,f,g);y.length&&(u[g]||(u[g]={idx:g,item:f,matches:[]},d.push(u[g])),y.forEach(({matches:$})=>{u[g].matches.push(...$)}))}}),d}_searchObjectList(s){const l=Ee$1(s,this.options),{keys:o,records:c}=this._myIndex,u=[];return c.forEach(({$:d,i:f})=>{if(!C(d))return;let g=[];o.forEach((y,$)=>{g.push(...this._findMatches({key:y,value:d[$],searcher:l}))}),g.length&&u.push({idx:f,item:d,matches:g})}),u}_findMatches({key:s,value:l,searcher:o}){if(!C(l))return[];let c=[];if(K$1(l))l.forEach(({v:u,i:d,n:f})=>{if(!C(u))return;const{isMatch:g,score:y,indices:$}=o.searchIn(u);g&&c.push({score:y,key:s,value:u,idx:d,norm:f,indices:$})});else{const{v:u,n:d}=l,{isMatch:f,score:g,indices:y}=o.searchIn(u);f&&c.push({score:g,key:s,value:u,norm:d,indices:y})}return c}};Y$1.version="6.6.2";Y$1.createIndex=qe$1;Y$1.parseIndex=Jt$1;Y$1.config=m$2;Y$1.parseQuery=st$1;hs(us);const je$1=reactive({selectedNode:"",selectedGroup:"",search:"",dataValue:"",filtered:{count:0,items:new Map,groups:new Set}}),J$1=()=>({isSearching:computed(()=>je$1.search!==""),...toRefs(je$1)});function vs(a){return{all:a=a||new Map,on:function(s,l){var o=a.get(s);o?o.push(l):a.set(s,[l])},off:function(s,l){var o=a.get(s);o&&(l?o.splice(o.indexOf(l)>>>0,1):a.set(s,[]))},emit:function(s,l){var o=a.get(s);o&&o.slice().map(function(c){c(l)}),(o=a.get("*"))&&o.slice().map(function(c){c(s,l)})}}}const ys=vs(),le=()=>({emitter:ys});function Es(a,s){let l=a.nextElementSibling;for(;l;){if(l.matches(s))return l;l=l.nextElementSibling}}function Is(a,s){let l=a.previousElementSibling;for(;l;){if(l.matches(s))return l;l=l.previousElementSibling}}const Ss=["command-theme"],ws={"command-root":""},Ms=defineComponent({name:"Command"}),bs=defineComponent({...Ms,props:{theme:{type:String,default:"default"},fuseOptions:{type:Object,default:()=>({threshold:.2,keys:["label"]})}},emits:["select-item"],setup(a,{emit:s}){const l=a,o='[command-item=""]',c="command-item-key",u='[command-group=""]',d="command-group-key",f='[command-group-heading=""]',g=`${o}:not([aria-disabled="true"])`,y=`${o}[aria-selected="true"]`,$="command-item-select",x="data-value";provide("theme",l.theme||"default");const{selectedNode:N,search:R,dataValue:j,filtered:ne}=J$1(),{emitter:se}=le(),ce=ref(),fe=ue$1(ref(new Map),333),ea=ue$1(ref(new Set),333),ta=ue$1(ref(new Map)),na=computed(()=>{const ba=[];for(const[Ea,Ca]of fe.value.entries())ba.push({key:Ea,label:Ca});return ba}),aa=computed(()=>{const ba=Y$1.createIndex(l.fuseOptions.keys,na.value);return new Y$1(na.value,l.fuseOptions,ba)}),ia=()=>{var ba,Ea,Ca;const $a=sa();$a&&(((ba=$a.parentElement)==null?void 0:ba.firstElementChild)===$a&&((Ca=(Ea=$a.closest(u))==null?void 0:Ea.querySelector(f))==null||Ca.scrollIntoView({block:"nearest"})),$a.scrollIntoView({block:"nearest"}))},sa=()=>{var ba;return(ba=ce.value)==null?void 0:ba.querySelector(y)},ra=(ba=ce.value)=>{const Ea=ba?.querySelectorAll(g);return Ea?Array.from(Ea):[]},la=()=>{var ba;const Ea=(ba=ce.value)==null?void 0:ba.querySelectorAll(u);return Ea?Array.from(Ea):[]},oa=()=>{const[ba]=ra();ba&&ba.getAttribute(c)&&(N.value=ba.getAttribute(c)||"")},ca=ba=>{const Ea=ra()[ba];Ea&&(N.value=Ea.getAttribute(c)||"")},pa=ba=>{const Ea=sa(),Ca=ra(),$a=Ca.findIndex(Da=>Da===Ea),Pa=Ca[$a+ba];Pa?N.value=Pa.getAttribute(c)||"":ba>0?ca(0):ca(Ca.length-1)},ua=ba=>{const Ea=sa();let Ca=Ea?.closest(u),$a=null;for(;Ca&&!$a;)Ca=ba>0?Es(Ca,u):Is(Ca,u),$a=Ca?.querySelector(g);$a?N.value=$a.getAttribute(c)||"":pa(ba)},da=()=>ca(0),ha=()=>ca(ra().length-1),ga=ba=>{ba.preventDefault(),ba.metaKey?ha():ba.altKey?ua(1):pa(1)},fa=ba=>{ba.preventDefault(),ba.metaKey?da():ba.altKey?ua(-1):pa(-1)},ma=ba=>{switch(ba.key){case"n":case"j":{ba.ctrlKey&&ga(ba);break}case"ArrowDown":{ga(ba);break}case"p":case"k":{ba.ctrlKey&&fa(ba);break}case"ArrowUp":{fa(ba);break}case"Home":{da();break}case"End":{ha();break}case"Enter":{const Ea=sa();if(Ea){const Ca=new Event($);Ea.dispatchEvent(Ca)}}}},va=()=>{if(!R.value){ne.value.count=ea.value.size;return}ne.value.groups=new Set("");const ba=new Map,Ea=aa.value.search(R.value).map(Ca=>Ca.item);for(const{key:Ca,label:$a}of Ea)ba.set(Ca,$a);for(const[Ca,$a]of ta.value)for(const Pa of $a)ba.get(Pa)&&ne.value.groups.add(Ca);nextTick(()=>{ne.value.count=ba.size,ne.value.items=ba})},ka=()=>{const ba=ra(),Ea=la();for(const Ca of ba){const $a=Ca.getAttribute(c)||"",Pa=Ca.getAttribute(x)||"";ea.value.add($a),fe.value.set($a,Pa),ne.value.count=fe.value.size}for(const Ca of Ea){const $a=ra(Ca),Pa=Ca.getAttribute(d)||"",Da=new Set("");for(const Ta of $a){const Ba=Ta.getAttribute(c)||"";Da.add(Ba)}ta.value.set(Pa,Da)}};watch(()=>N.value,ba=>{ba&&nextTick(ia)},{deep:!0}),watch(()=>R.value,ba=>{va(),nextTick(oa)}),se.on("selectItem",ba=>{s("select-item",ba)});const ya=He$1(ba=>{ba&&(ka(),nextTick(oa))},100);return se.on("rerenderList",ya),onMounted(()=>{ka(),oa()}),(ba,Ea)=>(openBlock(),createElementBlock("div",{class:normalizeClass(a.theme),onKeydown:ma,ref_key:"commandRef",ref:ce,"command-theme":a.theme},[createBaseVNode("div",ws,[renderSlot(ba.$slots,"default")])],42,Ss))}}),X$1=(a,s)=>{const l=a.__vccOpts||a;for(const[o,c]of s)l[o]=c;return l},we$1=X$1(bs,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/Command.vue"]]),xs={"command-dialog":""},As={"command-dialog-mask":""},ks={"command-dialog-wrapper":""},Os={"command-dialog-header":""},Ls={"command-dialog-body":""},Rs={key:0,"command-dialog-footer":""},Cs=defineComponent({name:"Command.Dialog"}),$s=defineComponent({...Cs,props:{visible:{type:Boolean,required:!0},theme:{type:String,required:!0}},emits:["select-item"],setup(a,{emit:s}){const l=a,{search:o,filtered:c}=J$1(),{emitter:u}=le(),d=ref();u.on("selectItem",g=>{s("select-item",g)});const f=()=>{o.value="",c.value.count=0,c.value.items=new Map,c.value.groups=new Set};return We$1(()=>l.visible,f),onBeforeUnmount(f),(g,y)=>(openBlock(),createBlock(Teleport,{to:"body",ref_key:"dialogRef",ref:d},[createVNode$1(Transition,{name:"command-dialog",appear:""},{default:withCtx(()=>[a.visible?(openBlock(),createBlock(we$1,{key:0,theme:a.theme},{default:withCtx(()=>[createBaseVNode("div",xs,[createBaseVNode("div",As,[createBaseVNode("div",ks,[createBaseVNode("div",Os,[renderSlot(g.$slots,"header")]),createBaseVNode("div",Ls,[renderSlot(g.$slots,"body")]),g.$slots.footer?(openBlock(),createElementBlock("div",Rs,[renderSlot(g.$slots,"footer")])):createCommentVNode("v-if",!0)])])])]),_:3},8,["theme"])):createCommentVNode("v-if",!0)]),_:3})],512))}}),Ts=X$1($s,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandDialog.vue"]]);let nt$1=(a=21)=>crypto.getRandomValues(new Uint8Array(a)).reduce((s,l)=>(l&=63,l<36?s+=l.toString(36):l<62?s+=(l-26).toString(36).toUpperCase():l>62?s+="-":s+="_",s),"");const Ns=["command-group-key","data-value"],Ps={key:0,"command-group-heading":""},Ds={"command-group-items":"",role:"group"},Fs=defineComponent({name:"Command.Group"}),Ks=defineComponent({...Fs,props:{heading:{type:String,required:!0}},setup(a){const s=computed(()=>`command-group-${nt$1()}`),{filtered:l,isSearching:o}=J$1(),c=computed(()=>o.value?l.value.groups.has(s.value):!0);return(u,d)=>withDirectives((openBlock(),createElementBlock("div",{"command-group":"",role:"presentation",key:unref(s),"command-group-key":unref(s),"data-value":a.heading},[a.heading?(openBlock(),createElementBlock("div",Ps,toDisplayString(a.heading),1)):createCommentVNode("v-if",!0),createBaseVNode("div",Ds,[renderSlot(u.$slots,"default")])],8,Ns)),[[vShow,unref(c)]])}}),Gs=X$1(Ks,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandGroup.vue"]]),js=["placeholder","value"],Vs=defineComponent({name:"Command.Input"}),Us=defineComponent({...Vs,props:{placeholder:{type:String,required:!0},value:{type:String,required:!1}},emits:["input","update:value"],setup(a,{emit:s}){const l=ref(null),{search:o}=J$1(),c=computed(()=>o.value),u=d=>{const f=d,g=d.target;o.value=g?.value,s("input",f),s("update:value",o.value)};return watchEffect(()=>{var d;(d=l.value)==null||d.focus()}),(d,f)=>(openBlock(),createElementBlock("input",{ref_key:"inputRef",ref:l,"command-input":"","auto-focus":"","auto-complete":"off","auto-correct":"off","spell-check":!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,placeholder:a.placeholder,value:unref(c),onInput:u},null,40,js))}}),Bs=X$1(Us,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandInput.vue"]]),Hs=["aria-selected","aria-disabled","command-item-key"],Ws=defineComponent({name:"Command.Item"}),zs=defineComponent({...Ws,props:{shortcut:{type:Array,required:!1},perform:{type:null,required:!1}},emits:["select"],setup(a,{emit:s}){const l=a,o="command-item-select",c="data-value",{current:u}=xt$1(),{selectedNode:d,filtered:f,isSearching:g}=J$1(),{emitter:y}=le(),$=ref(),x=computed(()=>`command-item-${nt$1()}`),N=computed(()=>{const ne=f.value.items.get(x.value);return g.value?ne!==void 0:!0}),R=computed(()=>Array.from(u)),j=()=>{var ne;const se={key:x.value,value:((ne=$.value)==null?void 0:ne.getAttribute(c))||""};s("select",se),y.emit("selectItem",se)};return We$1(R,ne=>{l.shortcut&&l.shortcut.length>0&&l.shortcut.every(se=>u.has(se.toLowerCase()))&&l.perform&&l.perform()}),watchEffect(()=>{var ne;(ne=$.value)==null||ne.addEventListener(o,j)}),onBeforeUnmount(()=>{var ne;(ne=$.value)==null||ne.removeEventListener(o,j)}),(ne,se)=>withDirectives((openBlock(),createElementBlock("div",{ref_key:"itemRef",ref:$,"command-item":"",role:"option","aria-selected":unref(d)===unref(x),"aria-disabled":!unref(N),key:unref(x),"command-item-key":unref(x),onClick:j},[renderSlot(ne.$slots,"default")],8,Hs)),[[vShow,unref(N)]])}}),Qs=X$1(zs,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandItem.vue"]]),Ys=defineComponent({name:"Command.List"}),Js=defineComponent({...Ys,setup(a){const{emitter:s}=le(),l=ref(),o=ref();let c=null,u;return watchEffect(()=>{u=o.value;const d=l.value;u&&d&&(c=new ResizeObserver(f=>{nextTick(()=>{const g=u?.offsetHeight;d?.style.setProperty("--command-list-height",`${g?.toFixed(1)}px`),s.emit("rerenderList",!0)})}),c.observe(u))}),onBeforeUnmount(()=>{c!==null&&u&&c.unobserve(u)}),(d,f)=>(openBlock(),createElementBlock("div",{"command-list":"",role:"listbox","aria-label":"Suggestions",ref_key:"listRef",ref:l},[createBaseVNode("div",{"command-list-sizer":"",ref_key:"heightRef",ref:o},[renderSlot(d.$slots,"default")],512)],512))}}),Xs=X$1(Js,[["__file","/Users/xiaoyunwei/Documents/GitHub/oss/vue-command-palette/packages/CommandList.vue"]]),qs=defineComponent({name:"Command.Empty",setup(a,{attrs:s,slots:l}){const{filtered:o}=J$1(),c=computed(()=>o.value.count===0);return()=>c.value?h$1("div",{"command-empty":"",role:"presentation",...s},l):h$1("div",{"command-empty":"hidden",role:"presentation",style:{display:"none"},...s})}}),Zs=defineComponent({name:"Command.Loading",setup(a,{attrs:s,slots:l}){return()=>h$1("div",{"command-loading":"",role:"progressbar",...s},l)}}),en=defineComponent({name:"Command.Separator",setup(a,{attrs:s,slots:l}){return()=>h$1("div",{"command-separator":"",role:"separator",...s})}}),sn=Object.assign(we$1,{Dialog:Ts,Empty:qs,Group:Gs,Input:Bs,Item:Qs,List:Xs,Loading:Zs,Separator:en,Root:we$1});var _a$1;const isClient=typeof window<"u",isFunction$3=a=>typeof a=="function",isString$3=a=>typeof a=="string",noop$1=()=>{};isClient&&((_a$1=window?.navigator)!=null&&_a$1.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(a){return typeof a=="function"?a():unref(a)}function createFilterWrapper(a,s){function l(...o){return new Promise((c,u)=>{Promise.resolve(a(()=>s.apply(this,o),{fn:s,thisArg:this,args:o})).then(c).catch(u)})}return l}const bypassFilter=a=>a();function pausableFilter(a=bypassFilter){const s=ref(!0);function l(){s.value=!1}function o(){s.value=!0}const c=(...u)=>{s.value&&a(...u)};return{isActive:readonly(s),pause:l,resume:o,eventFilter:c}}function identity$1(a){return a}function tryOnScopeDispose$1(a){return getCurrentScope()?(onScopeDispose(a),!0):!1}var __getOwnPropSymbols$6$1=Object.getOwnPropertySymbols,__hasOwnProp$6$1=Object.prototype.hasOwnProperty,__propIsEnum$6$1=Object.prototype.propertyIsEnumerable,__objRest$5=(a,s)=>{var l={};for(var o in a)__hasOwnProp$6$1.call(a,o)&&s.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&__getOwnPropSymbols$6$1)for(var o of __getOwnPropSymbols$6$1(a))s.indexOf(o)<0&&__propIsEnum$6$1.call(a,o)&&(l[o]=a[o]);return l};function watchWithFilter(a,s,l={}){const o=l,{eventFilter:c=bypassFilter}=o,u=__objRest$5(o,["eventFilter"]);return watch(a,createFilterWrapper(c,s),u)}var __defProp$2$1=Object.defineProperty,__defProps$2$1=Object.defineProperties,__getOwnPropDescs$2$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2$1=Object.getOwnPropertySymbols,__hasOwnProp$2$1=Object.prototype.hasOwnProperty,__propIsEnum$2$1=Object.prototype.propertyIsEnumerable,__defNormalProp$2$1=(a,s,l)=>s in a?__defProp$2$1(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$2$1=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$2$1.call(s,l)&&__defNormalProp$2$1(a,l,s[l]);if(__getOwnPropSymbols$2$1)for(var l of __getOwnPropSymbols$2$1(s))__propIsEnum$2$1.call(s,l)&&__defNormalProp$2$1(a,l,s[l]);return a},__spreadProps$2$1=(a,s)=>__defProps$2$1(a,__getOwnPropDescs$2$1(s)),__objRest$1$1=(a,s)=>{var l={};for(var o in a)__hasOwnProp$2$1.call(a,o)&&s.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&__getOwnPropSymbols$2$1)for(var o of __getOwnPropSymbols$2$1(a))s.indexOf(o)<0&&__propIsEnum$2$1.call(a,o)&&(l[o]=a[o]);return l};function watchPausable(a,s,l={}){const o=l,{eventFilter:c}=o,u=__objRest$1$1(o,["eventFilter"]),{eventFilter:d,pause:f,resume:g,isActive:y}=pausableFilter(c);return{stop:watchWithFilter(a,s,__spreadProps$2$1(__spreadValues$2$1({},u),{eventFilter:d})),pause:f,resume:g,isActive:y}}function unrefElement$1(a){var s;const l=resolveUnref(a);return(s=l?.$el)!=null?s:l}const defaultWindow$1=isClient?window:void 0;function useEventListener(...a){let s,l,o,c;if(isString$3(a[0])||Array.isArray(a[0])?([l,o,c]=a,s=defaultWindow$1):[s,l,o,c]=a,!s)return noop$1;Array.isArray(l)||(l=[l]),Array.isArray(o)||(o=[o]);const u=[],d=()=>{u.forEach($=>$()),u.length=0},f=($,x,N,R)=>($.addEventListener(x,N,R),()=>$.removeEventListener(x,N,R)),g=watch(()=>[unrefElement$1(s),resolveUnref(c)],([$,x])=>{d(),$&&u.push(...l.flatMap(N=>o.map(R=>f($,N,R,x))))},{immediate:!0,flush:"post"}),y=()=>{g(),d()};return tryOnScopeDispose$1(y),y}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers$2=_global[globalKey];function getSSRHandler(a,s){return handlers$2[a]||s}function guessSerializerType(a){return a==null?"any":a instanceof Set?"set":a instanceof Map?"map":a instanceof Date?"date":typeof a=="boolean"?"boolean":typeof a=="string"?"string":typeof a=="object"?"object":Number.isNaN(a)?"any":"number"}var __defProp$k$1=Object.defineProperty,__getOwnPropSymbols$m$1=Object.getOwnPropertySymbols,__hasOwnProp$m$1=Object.prototype.hasOwnProperty,__propIsEnum$m$1=Object.prototype.propertyIsEnumerable,__defNormalProp$k$1=(a,s,l)=>s in a?__defProp$k$1(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$k$1=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$m$1.call(s,l)&&__defNormalProp$k$1(a,l,s[l]);if(__getOwnPropSymbols$m$1)for(var l of __getOwnPropSymbols$m$1(s))__propIsEnum$m$1.call(s,l)&&__defNormalProp$k$1(a,l,s[l]);return a};const StorageSerializers={boolean:{read:a=>a==="true",write:a=>String(a)},object:{read:a=>JSON.parse(a),write:a=>JSON.stringify(a)},number:{read:a=>Number.parseFloat(a),write:a=>String(a)},any:{read:a=>a,write:a=>String(a)},string:{read:a=>a,write:a=>String(a)},map:{read:a=>new Map(JSON.parse(a)),write:a=>JSON.stringify(Array.from(a.entries()))},set:{read:a=>new Set(JSON.parse(a)),write:a=>JSON.stringify(Array.from(a))},date:{read:a=>new Date(a),write:a=>a.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(a,s,l,o={}){var c;const{flush:u="pre",deep:d=!0,listenToStorageChanges:f=!0,writeDefaults:g=!0,mergeDefaults:y=!1,shallow:$,window:x=defaultWindow$1,eventFilter:N,onError:R=sa=>{console.error(sa)}}=o,j=($?shallowRef:ref)(s);if(!l)try{l=getSSRHandler("getDefaultStorage",()=>{var sa;return(sa=defaultWindow$1)==null?void 0:sa.localStorage})()}catch(sa){R(sa)}if(!l)return j;const ne=resolveUnref(s),se=guessSerializerType(ne),ce=(c=o.serializer)!=null?c:StorageSerializers[se],{pause:fe,resume:ea}=watchPausable(j,()=>ta(j.value),{flush:u,deep:d,eventFilter:N});return x&&f&&(useEventListener(x,"storage",ia),useEventListener(x,customStorageEventName,aa)),ia(),j;function ta(sa){try{if(sa==null)l.removeItem(a);else{const ra=ce.write(sa),la=l.getItem(a);la!==ra&&(l.setItem(a,ra),x&&x.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:a,oldValue:la,newValue:ra,storageArea:l}})))}}catch(ra){R(ra)}}function na(sa){const ra=sa?sa.newValue:l.getItem(a);if(ra==null)return g&&ne!==null&&l.setItem(a,ce.write(ne)),ne;if(!sa&&y){const la=ce.read(ra);return isFunction$3(y)?y(la,ne):se==="object"&&!Array.isArray(la)?__spreadValues$k$1(__spreadValues$k$1({},ne),la):la}else return typeof ra!="string"?ra:ce.read(ra)}function aa(sa){ia(sa.detail)}function ia(sa){if(!(sa&&sa.storageArea!==l)){if(sa&&sa.key==null){j.value=ne;return}if(!(sa&&sa.key!==a)){fe();try{j.value=na(sa)}catch(ra){R(ra)}finally{sa?nextTick(ea):ea()}}}}}function useLocalStorage(a,s,l={}){const{window:o=defaultWindow$1}=l;return useStorage(a,s,o?.localStorage,l)}const DefaultMagicKeysAliasMap={ctrl:"control",command:"meta",cmd:"meta",option:"alt",up:"arrowup",down:"arrowdown",left:"arrowleft",right:"arrowright"};function useMagicKeys(a={}){const{reactive:s=!1,target:l=defaultWindow$1,aliasMap:o=DefaultMagicKeysAliasMap,passive:c=!0,onEventFired:u=noop$1}=a,d=reactive(new Set),f={toJSON(){return{}},current:d},g=s?reactive(f):f,y=new Set,$=new Set;function x(ne,se){ne in g&&(s?g[ne]=se:g[ne].value=se)}function N(){d.clear();for(const ne of $)x(ne,!1)}function R(ne,se){var ce,fe;const ea=(ce=ne.key)==null?void 0:ce.toLowerCase(),na=[(fe=ne.code)==null?void 0:fe.toLowerCase(),ea].filter(Boolean);ea&&(se?d.add(ea):d.delete(ea));for(const aa of na)$.add(aa),x(aa,se);ea==="meta"&&!se?(y.forEach(aa=>{d.delete(aa),x(aa,!1)}),y.clear()):typeof ne.getModifierState=="function"&&ne.getModifierState("Meta")&&se&&[...d,...na].forEach(aa=>y.add(aa))}useEventListener(l,"keydown",ne=>(R(ne,!0),u(ne)),{passive:c}),useEventListener(l,"keyup",ne=>(R(ne,!1),u(ne)),{passive:c}),useEventListener("blur",N,{passive:!0}),useEventListener("focus",N,{passive:!0});const j=new Proxy(g,{get(ne,se,ce){if(typeof se!="string")return Reflect.get(ne,se,ce);if(se=se.toLowerCase(),se in o&&(se=o[se]),!(se in g))if(/[+_-]/.test(se)){const ea=se.split(/[+_-]/g).map(ta=>ta.trim());g[se]=computed(()=>ea.every(ta=>unref(j[ta])))}else g[se]=ref(!1);const fe=Reflect.get(ne,se,ce);return s?unref(fe):fe}});return j}var SwipeDirection;(function(a){a.UP="UP",a.RIGHT="RIGHT",a.DOWN="DOWN",a.LEFT="LEFT",a.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp$18=Object.defineProperty,__getOwnPropSymbols$19=Object.getOwnPropertySymbols,__hasOwnProp$19=Object.prototype.hasOwnProperty,__propIsEnum$19=Object.prototype.propertyIsEnumerable,__defNormalProp$18=(a,s,l)=>s in a?__defProp$18(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$18=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$19.call(s,l)&&__defNormalProp$18(a,l,s[l]);if(__getOwnPropSymbols$19)for(var l of __getOwnPropSymbols$19(s))__propIsEnum$19.call(s,l)&&__defNormalProp$18(a,l,s[l]);return a};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues$18({linear:identity$1},_TransitionPresets);const searchConfig={btnPlaceholder:"搜索",placeholder:"搜索文档",emptyText:"空空如也",heading:"共: {{searchResult}} 条结果"},_sfc_main$3P={},_hoisted_1$20={width:"594",height:"112",viewBox:"0 0 594 112",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$3e(a,s){return openBlock(),createElementBlock("svg",_hoisted_1$20,s[0]||(s[0]=[createStaticVNode('<path d="M147.8 111.2H164V77.5998H164.6C164.6 77.5998 170.6 87.1998 183.2 87.1998C197 87.1998 209.6 74.5998 209.6 56.5998C209.6 38.5998 197 25.9998 183.2 25.9998C170.6 25.9998 164.6 35.5998 164.6 35.5998H164V27.1998H147.8V111.2ZM178.4 72.1998C170 72.1998 163.4 65.5998 163.4 56.5998C163.4 47.5998 170 40.9998 178.4 40.9998C186.8 40.9998 193.4 47.5998 193.4 56.5998C193.4 65.5998 186.8 72.1998 178.4 72.1998Z" fill="black"></path><path d="M230.628 87.1998C242.028 87.1998 248.028 78.7998 248.028 78.7998H248.628V85.9998C252.228 85.9998 264.828 85.9998 264.828 85.9998V49.3998C264.828 36.1998 254.628 25.9998 239.628 25.9998C224.028 25.9998 215.628 37.3998 215.628 37.3998L225.228 46.9998C225.228 46.9998 230.028 40.3998 238.428 40.3998C244.428 40.3998 248.028 43.9998 248.628 48.1998L230.028 51.5598C219.228 53.4798 212.628 60.7998 212.628 70.3998C212.628 79.9998 219.828 87.1998 230.628 87.1998ZM236.028 73.9998C231.228 73.9998 228.828 71.5998 228.828 67.9998C228.828 64.9998 231.228 62.7198 235.428 61.9998L248.628 59.5998V60.7998C248.628 68.5998 243.228 73.9998 236.028 73.9998Z" fill="black"></path><path d="M299.033 111.2C317.633 111.2 330.833 97.9998 330.833 79.9998V27.1998H314.633V35.5998H314.033C314.033 35.5998 308.633 25.9998 296.033 25.9998C282.833 25.9998 270.833 37.9998 270.833 55.3998C270.833 72.7998 282.833 84.7998 296.033 84.7998C308.633 84.7998 314.033 75.1998 314.033 75.1998H314.633V79.9998C314.633 89.5998 308.033 96.1998 299.033 96.1998C289.433 96.1998 283.433 88.9998 283.433 88.9998L273.233 99.1998C273.233 99.1998 281.633 111.2 299.033 111.2ZM300.833 69.7998C293.033 69.7998 287.033 63.7998 287.033 55.3998C287.033 46.9998 293.033 40.9998 300.833 40.9998C308.633 40.9998 314.633 46.9998 314.633 55.3998C314.633 63.7998 308.633 69.7998 300.833 69.7998Z" fill="black"></path><path d="M367.986 87.1998C384.186 87.1998 393.186 77.5998 393.186 77.5998L384.786 66.1998C384.786 66.1998 379.386 72.7998 369.186 72.7998C360.186 72.7998 355.386 67.9998 353.586 62.5998H396.186C396.186 62.5998 396.786 59.5998 396.786 55.3998C396.786 39.1998 383.586 25.9998 367.386 25.9998C350.586 25.9998 336.786 39.7998 336.786 56.5998C336.786 73.3998 350.586 87.1998 367.986 87.1998ZM353.586 50.5998C355.386 45.1998 360.186 40.3998 366.786 40.3998C373.386 40.3998 378.186 45.1998 379.986 50.5998H353.586Z" fill="black"></path><path d="M406.423 85.9998H422.624V43.3998H444.224V85.9998H460.423V28.3998H422.624V24.7998C422.624 19.3998 425.624 16.3998 430.423 16.3998C433.423 16.3998 435.823 17.5998 435.823 17.5998V2.5998C435.823 2.5998 431.624 0.799805 426.224 0.799805C414.224 0.799805 406.423 8.59981 406.423 22.3998V28.3998H397.423V43.3998H406.423V85.9998ZM452.263 19.3998C457.423 19.3998 461.624 15.1998 461.624 10.3998C461.624 5.59981 457.424 1.3998 452.384 1.3998C447.224 1.3998 443.023 5.59981 443.023 10.3998C443.023 15.1998 447.223 19.3998 452.263 19.3998Z" fill="black"></path><path d="M470.652 85.9998H486.852V54.7998C486.852 46.9998 492.252 41.5998 499.452 41.5998C506.052 41.5998 510.252 45.7998 510.252 52.9998V85.9998H526.452V50.5998C526.452 35.5998 516.852 25.9998 504.852 25.9998C493.452 25.9998 487.452 35.5998 487.452 35.5998H486.852V27.1998H470.652V85.9998Z" fill="black"></path><path d="M557.819 87.1998C570.419 87.1998 576.419 77.5998 576.419 77.5998H577.019V85.9998H593.219V1.9998H577.019V35.5998H576.419C576.419 35.5998 570.419 25.9998 557.819 25.9998C544.019 25.9998 531.419 38.5998 531.419 56.5998C531.419 74.5998 544.019 87.1998 557.819 87.1998ZM562.619 72.1998C554.219 72.1998 547.619 65.5998 547.619 56.5998C547.619 47.5998 554.219 40.9998 562.619 40.9998C571.019 40.9998 577.619 47.5998 577.619 56.5998C577.619 65.5998 571.019 72.1998 562.619 72.1998Z" fill="black"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M60 96.9999C93.1371 96.9999 120 81.8416 120 63.1428V50.8311H115.91C107.182 38.2198 85.4398 29.2856 60 29.2856C34.5602 29.2856 12.8183 38.2198 4.09026 50.8311H0V63.1428C0 81.8416 26.8629 96.9999 60 96.9999Z" fill="black"></path><path d="M116 52C116 59.317 110.727 66.7404 100.454 72.5615C90.3014 78.3149 76.0069 82 60 82C43.9931 82 29.6986 78.3149 19.5456 72.5615C9.2731 66.7404 4 59.317 4 52C4 44.6831 9.2731 37.2596 19.5456 31.4385C29.6986 25.6851 43.9931 22 60 22C76.0069 22 90.3014 25.6851 100.454 31.4385C110.727 37.2596 116 44.6831 116 52Z" fill="white" stroke="black" stroke-width="8"></path><path d="M57.8864 72.0605L87.2817 41.837C88.6253 40.4556 87.43 38.1599 85.5278 38.4684L26.0819 48.1083C23.9864 48.4481 23.794 51.3882 25.8273 51.9982L46.7151 58.2645C47.2181 58.4154 47.6415 58.7581 47.894 59.2185L54.6991 71.6277C55.3457 72.8069 56.9487 73.0246 57.8864 72.0605Z" fill="black"></path><ellipse cx="58" cy="53.5" rx="7" ry="4.5" fill="white"></ellipse>',11)]))}const LogoPagefind=_export_sfc$1(_sfc_main$3P,[["render",_sfc_render$3e]]);function decodeBase64AndDeserialize(a){if(!a)return{};try{const s=decodeURIComponent(atob(a));return JSON.parse(s)}catch{return{}}}function formatPagefindResult(a,s=1){const{sub_results:l,anchors:o,weighted_locations:c}=a;c.sort((f,g)=>g.weight===f.weight?f.location-g.location:g.weight-f.weight);const u=[];for(const{location:f}of c){const y=l.filter($=>{const{locations:x}=$,[N]=x||[];if(!N)return!1;const R=x.length===1?Number.POSITIVE_INFINITY:x[x.length-1];return N<=f&&f<=R}).reduce(($,x)=>$&&$.locations.length>x.locations.length?$:x,null);if(y&&(u.push(y),u.length>=s))break}u.sort((f,g)=>{const[y]=f.locations||[],[$]=g.locations||[];return!y||!$?0:y-$});const d=new Map;return u.map(f=>parseSubResult(f,o,a)).filter(f=>d.has(f.meta.title)?!1:(d.set(f.meta.title,f),!0))}function parseSubResult(a,s,l){const o=a?.url||l?.url,c=a?.excerpt||l?.excerpt,u=s?.filter($=>a?$.location<=a.anchor.location&&$.element<=a.anchor.element:!1)||[];u.reverse();const d=u.reduce(($,x)=>($.some(R=>R.element===x.element)||$.unshift(x),$),[]),f=d.length?d.map($=>$.text.trim()).filter($=>!!$).join(" > "):l.meta.title,{base64:g,...y}=l.meta;return{route:o,meta:{...decodeBase64AndDeserialize(g),...y,title:f,description:c},result:l}}function formatDate(a,s="yyyy-MM-dd hh:mm:ss"){a instanceof Date||(a=new Date(a));const l={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(s)&&(s=s.replace(RegExp.$1,`${a.getFullYear()}`.substr(4-RegExp.$1.length)));for(const o in l)new RegExp(`(${o})`).test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length===1?l[o]:`00${l[o]}`.substr(`${l[o]}`.length)));return s}function formatShowDate(a,s){const l=+new Date(a),c=+new Date-l,u=1e3,d=u*60,f=d*60,g=f*24,y=g*7,$={"zh-cn":{justNow:"刚刚",secondsAgo:"秒前",minutesAgo:"分钟前",hoursAgo:"小时前",daysAgo:"天前",weeksAgo:"周前"},"en-us":{justNow:" just now",secondsAgo:" seconds ago",minutesAgo:" minutes ago",hoursAgo:" hours ago",daysAgo:" days ago",weeksAgo:" weeks ago"}},x=$[s.toLowerCase()]||$["en-us"];return c<10?x.justNow:c<d?`${Math.floor(c/u)}${x.secondsAgo}`:c<f?`${Math.floor(c/d)}${x.minutesAgo}`:c<g?`${Math.floor(c/f)}${x.hoursAgo}`:c<y?`${Math.floor(c/g)}${x.daysAgo}`:formatDate(new Date(a),"yyyy-MM-dd")}const _hoisted_1$1$={class:"blog-search","data-pagefind-ignore":"all"},_hoisted_2$1m={class:"search-tip"},_hoisted_3$1a={class:"metaKey"},_hoisted_4$q={class:"search-bar"},_hoisted_5$a={class:"search-actions before"},_hoisted_6$5={class:"search-actions"},_hoisted_7$3=["disabled"],_hoisted_8$1={class:"link"},_hoisted_9={class:"title"},_hoisted_10={class:"headings"},_hoisted_11={key:0,class:"prefix"},_hoisted_12={key:0,class:"date"},_hoisted_13=["innerHTML"],_hoisted_14={class:"command-palette-logo"},_hoisted_15={href:"https://github.com/cloudcannon/pagefind",target:"_blank",rel:"noopener noreferrer"},_hoisted_16={class:"command-palette-Label"},_hoisted_17={class:"command-palette-commands"},_hoisted_18={class:"command-palette-Label"},_hoisted_19={class:"command-palette-Label"},_hoisted_20={class:"command-palette-Label"},_sfc_main$3O=defineComponent({__name:"Search",setup(a){const s=ref([]),l=searchConfig,{localeIndex:o,site:c,lang:u}=useData$1(),d=computed(()=>({...l,...l?.locales?.[o.value]||{}})),f=computed(()=>d.value?.ignorePublish??!1),g=computed(()=>d.value?.showDate??!1),y=computed(()=>typeof d.value.showDate=="function"?d.value.showDate:formatShowDate),$=computed(()=>d.value?.heading?d.value.heading.replace(/\{\{searchResult\}\}/,`${s.value.length}`):`Total: ${s.value.length} search results.`),x=ref("");onMounted(()=>{x.value=/(Mac|iPhone|iPod|iPad)/i.test(navigator?.platform)?"⌘":"Ctrl"});const N=ref(!1);function R(){N.value=!0}function j(){N.value=!1}const ne=useMagicKeys({passive:!1,onEventFired(ka){ka.ctrlKey&&ka.key==="k"&&ka.type==="keydown"&&ka.preventDefault()}}),se=ne["Meta+K"],ce=ne["Ctrl+K"],fe=ne.Escape;watch(se,ka=>{ka&&R()}),watch(ce,ka=>{ka&&R()}),watch(fe,ka=>{ka&&j()});const ea=ref("");function ta(){if(!ea.value){s.value=[];return}s.value=[{route:"#",meta:{title:"只在构建后才生效",description:"<mark>only support after build</mark>, only support after build"}}]}const na=/[\u4E00-\u9FA5]/g,aa=Intl?.Segmenter&&new Intl.Segmenter("ch",{granularity:"word"});function ia(ka){return aa?Array.from(aa?.segment(ka)).map(ba=>ba.segment).join(" "):ka.replace(na," $& ").replace(/\s+/g," ").trim()}const sa=computed(()=>d.value?.delay??300);watch(()=>ea.value,async()=>{if(!window?.__pagefind__?.search){ta();return}const ka=typeof d.value.customSearchQuery=="function"?d.value.customSearchQuery(ea.value):na.test(ea.value)?ia(ea.value):ea.value;await window?.__pagefind__?.debouncedSearch?.(ka,{},sa.value).then(async ya=>{if(ya===null)return;const Ea=(await Promise.all(ya.results.map(Ca=>Ca.data()))).map(Ca=>formatPagefindResult(Ca,d.value.pageResultCount||1).map(Pa=>(Pa.route=Pa.route.startsWith(c.value.base)?Pa.route:withBase(Pa.route),Pa))).flat().filter(Ca=>f.value||Ca.meta.publish!==!1);d.value.sort&&Ea.sort(d.value.sort),s.value=Ea.filter(d.value.filter??(()=>!0))}),nextTick(()=>{document.querySelectorAll('div[aria-disabled="true"]').forEach(ya=>{ya.setAttribute("aria-disabled","false")})})});function ra(ka){ka.target===ka.currentTarget&&j()}watch(()=>N.value,ka=>{ka?nextTick(()=>{document.querySelector("div[command-dialog-mask]")?.addEventListener("click",ra)}):document.querySelector("div[command-dialog-mask]")?.removeEventListener("click",ra)});const la=ref(999),oa=ref(0),ca=computed(()=>{const ya=oa.value%Math.ceil(s.value.length/la.value)*la.value;return s.value.slice(ya,ya+la.value)}),pa=useRouter(),ua=useRoute();function da(ka){j(),ua.path!==ka.value&&pa.go(ka.value)}const ha=computed(()=>d.value.langReload??!0);watch(()=>u.value,()=>{ha.value&&window.location.reload()});const ga=ref();function fa(){ea.value="",nextTick(()=>{ga.value&&(ga.value.$el.value="")})}const ma=useLocalStorage("pagefind-search-showDetail",!1);function va(){ma.value=!ma.value}return(ka,ya)=>{const ba=resolveComponent("ClientOnly");return openBlock(),createElementBlock("div",_hoisted_1$1$,[createBaseVNode("div",{class:"nav-search-btn-wait",onClick:ya[0]||(ya[0]=Ea=>N.value=!0)},[ya[3]||(ya[3]=createBaseVNode("span",null,[createBaseVNode("svg",{width:"14",height:"14",viewBox:"0 0 20 20"},[createBaseVNode("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none","fill-rule":"evenodd","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),createBaseVNode("span",_hoisted_2$1m,toDisplayString(d.value?.btnPlaceholder||"Search"),1),createBaseVNode("span",_hoisted_3$1a,toDisplayString(x.value)+" K ",1)]),createVNode$1(ba,null,{default:withCtx(()=>[createVNode$1(unref(sn).Dialog,{visible:N.value,theme:"algolia"},createSlots({header:withCtx(()=>[createBaseVNode("div",_hoisted_4$q,[createBaseVNode("div",_hoisted_5$a,[createBaseVNode("button",{class:"back-button",title:"Close search",onClick:ya[1]||(ya[1]=Ea=>N.value=!1)},ya[4]||(ya[4]=[createBaseVNode("span",{class:"vpi-arrow-left local-search-icon"},null,-1)]))]),createVNode$1(unref(sn).Input,{ref_key:"searchInput",ref:ga,value:ea.value,"onUpdate:value":ya[2]||(ya[2]=Ea=>ea.value=Ea),placeholder:d.value?.placeholder||"Search Docs"},null,8,["value","placeholder"]),createBaseVNode("div",_hoisted_6$5,[createBaseVNode("button",{class:normalizeClass([{active:unref(ma)},"toggle-layout-button"]),type:"button",title:"Display detailed list",onClick:va},ya[5]||(ya[5]=[createBaseVNode("span",{class:"vpi-layout-list local-search-icon"},null,-1)]),2),createBaseVNode("button",{disabled:!ea.value,class:"clear-button",type:"reset",title:"Reset search",onClick:fa},ya[6]||(ya[6]=[createBaseVNode("span",{class:"vpi-delete local-search-icon"},null,-1)]),8,_hoisted_7$3)])])]),body:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["search-dialog",{"detail-list":unref(ma)}])},[createVNode$1(unref(sn).List,null,{default:withCtx(()=>[s.value.length?(openBlock(),createBlock(unref(sn).Group,{key:1,heading:$.value},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ca.value,Ea=>(openBlock(),createBlock(unref(sn).Item,{key:Ea.route,"data-value":Ea.route,onSelect:da},{default:withCtx(()=>[createBaseVNode("div",_hoisted_8$1,[createBaseVNode("div",_hoisted_9,[createBaseVNode("span",_hoisted_10,[Ea.meta.title?(openBlock(),createElementBlock("i",_hoisted_11,"# ")):createCommentVNode("",!0),createTextVNode(toDisplayString(Ea.meta.title),1)]),g.value&&Ea.meta.date?(openBlock(),createElementBlock("span",_hoisted_12,toDisplayString(y.value(Ea.meta.date,unref(u))),1)):createCommentVNode("",!0)]),createBaseVNode("div",{class:"des",innerHTML:Ea.meta.description},null,8,_hoisted_13)])]),_:2},1032,["data-value"]))),128))]),_:1},8,["heading"])):(openBlock(),createBlock(unref(sn).Empty,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(d.value?.emptyText||"No results found."),1)]),_:1}))]),_:1})],2)]),_:2},[s.value.length?{name:"footer",fn:withCtx(()=>[createBaseVNode("div",_hoisted_14,[createBaseVNode("a",_hoisted_15,[createBaseVNode("span",_hoisted_16,toDisplayString(d.value?.searchBy||"Search by"),1),createVNode$1(LogoPagefind,{style:{width:"77px"}})])]),createBaseVNode("ul",_hoisted_17,[createBaseVNode("li",null,[ya[7]||(ya[7]=createBaseVNode("kbd",{class:"command-palette-commands-key"},[createBaseVNode("svg",{width:"15",height:"15","aria-label":"Enter key",role:"img"},[createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2"},[createBaseVNode("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"})])])],-1)),createBaseVNode("span",_hoisted_18,toDisplayString(d.value?.toSelect||"to select"),1)]),createBaseVNode("li",null,[ya[8]||(ya[8]=createBaseVNode("kbd",{class:"command-palette-commands-key"},[createBaseVNode("svg",{width:"15",height:"15","aria-label":"Arrow down",role:"img"},[createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2"},[createBaseVNode("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"})])])],-1)),ya[9]||(ya[9]=createBaseVNode("kbd",{class:"command-palette-commands-key"},[createBaseVNode("svg",{width:"15",height:"15","aria-label":"Arrow up",role:"img"},[createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2"},[createBaseVNode("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"})])])],-1)),createBaseVNode("span",_hoisted_19,toDisplayString(d.value?.toNavigate||"to navigate"),1)]),createBaseVNode("li",null,[ya[10]||(ya[10]=createBaseVNode("kbd",{class:"command-palette-commands-key"},[createBaseVNode("svg",{width:"15",height:"15","aria-label":"Escape key",role:"img"},[createBaseVNode("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.2"},[createBaseVNode("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"})])])],-1)),createBaseVNode("span",_hoisted_20,toDisplayString(d.value?.toClose||"to close"),1)])])]),key:"0"}:void 0]),1032,["visible"])]),_:1})])}}}),VPNavBarSearch=_export_sfc$1(_sfc_main$3O,[["__scopeId","data-v-c777953c"]]),_sfc_main$3N=defineComponent({__name:"VPNavBarSocialLinks",setup(a){const{theme:s}=useData();return(l,o)=>unref(s).socialLinks?(openBlock(),createBlock(VPSocialLinks,{key:0,class:"VPNavBarSocialLinks",links:unref(s).socialLinks},null,8,["links"])):createCommentVNode("",!0)}}),VPNavBarSocialLinks=_export_sfc$1(_sfc_main$3N,[["__scopeId","data-v-cb897a83"]]),_hoisted_1$1_=["href","rel","target"],_hoisted_2$1l={key:1},_hoisted_3$19={key:2},_sfc_main$3M=defineComponent({__name:"VPNavBarTitle",setup(a){const{site:s,theme:l}=useData(),{hasSidebar:o}=useSidebar(),{currentLang:c}=useLangs(),u=computed(()=>typeof l.value.logoLink=="string"?l.value.logoLink:l.value.logoLink?.link),d=computed(()=>typeof l.value.logoLink=="string"?void 0:l.value.logoLink?.rel),f=computed(()=>typeof l.value.logoLink=="string"?void 0:l.value.logoLink?.target);return(g,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPNavBarTitle",{"has-sidebar":unref(o)}])},[createBaseVNode("a",{class:"title",href:u.value??unref(normalizeLink$1)(unref(c).link),rel:d.value,target:f.value},[renderSlot(g.$slots,"nav-bar-title-before",{},void 0,!0),unref(l).logo?(openBlock(),createBlock(VPImage,{key:0,class:"logo",image:unref(l).logo},null,8,["image"])):createCommentVNode("",!0),unref(l).siteTitle?(openBlock(),createElementBlock("span",_hoisted_2$1l,toDisplayString(unref(l).siteTitle),1)):unref(l).siteTitle===void 0?(openBlock(),createElementBlock("span",_hoisted_3$19,toDisplayString(unref(s).title),1)):createCommentVNode("",!0),renderSlot(g.$slots,"nav-bar-title-after",{},void 0,!0)],8,_hoisted_1$1_)],2))}}),VPNavBarTitle=_export_sfc$1(_sfc_main$3M,[["__scopeId","data-v-86830bce"]]),_hoisted_1$1Z={class:"items"},_hoisted_2$1k={class:"title"},_sfc_main$3L=defineComponent({__name:"VPNavBarTranslations",setup(a){const{theme:s}=useData(),{localeLinks:l,currentLang:o}=useLangs({correspondingLink:!0});return(c,u)=>unref(l).length&&unref(o).label?(openBlock(),createBlock(VPFlyout,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:unref(s).langMenuLabel||"Change language"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1Z,[createBaseVNode("p",_hoisted_2$1k,toDisplayString(unref(o).label),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(l),d=>(openBlock(),createBlock(VPMenuLink,{key:d.link,item:d},null,8,["item"]))),128))])]),_:1},8,["label"])):createCommentVNode("",!0)}}),VPNavBarTranslations=_export_sfc$1(_sfc_main$3L,[["__scopeId","data-v-64068d3e"]]),_hoisted_1$1Y={class:"wrapper"},_hoisted_2$1j={class:"container"},_hoisted_3$18={class:"title"},_hoisted_4$p={class:"content"},_hoisted_5$9={class:"content-body"},_sfc_main$3K=defineComponent({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(a){const{y:s}=useWindowScroll(),{hasSidebar:l}=useSidebar(),{frontmatter:o}=useData(),c=ref({});return watchPostEffect(()=>{c.value={"has-sidebar":l.value,home:o.value.layout==="home",top:s.value===0}}),(u,d)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPNavBar",c.value])},[createBaseVNode("div",_hoisted_1$1Y,[createBaseVNode("div",_hoisted_2$1j,[createBaseVNode("div",_hoisted_3$18,[createVNode$1(VPNavBarTitle,null,{"nav-bar-title-before":withCtx(()=>[renderSlot(u.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":withCtx(()=>[renderSlot(u.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),createBaseVNode("div",_hoisted_4$p,[createBaseVNode("div",_hoisted_5$9,[renderSlot(u.$slots,"nav-bar-content-before",{},void 0,!0),createVNode$1(VPNavBarSearch,{class:"search"}),createVNode$1(VPNavBarMenu,{class:"menu"}),createVNode$1(VPNavBarTranslations,{class:"translations"}),createVNode$1(VPNavBarAppearance,{class:"appearance"}),createVNode$1(VPNavBarSocialLinks,{class:"social-links"}),createVNode$1(VPNavBarExtra,{class:"extra"}),renderSlot(u.$slots,"nav-bar-content-after",{},void 0,!0),createVNode$1(VPNavBarHamburger,{class:"hamburger",active:u.isScreenOpen,onClick:d[0]||(d[0]=f=>u.$emit("toggle-screen"))},null,8,["active"])])])])]),d[1]||(d[1]=createBaseVNode("div",{class:"divider"},[createBaseVNode("div",{class:"divider-line"})],-1))],2))}}),VPNavBar=_export_sfc$1(_sfc_main$3K,[["__scopeId","data-v-967327c2"]]),_hoisted_1$1X={key:0,class:"VPNavScreenAppearance"},_hoisted_2$1i={class:"text"},_sfc_main$3J=defineComponent({__name:"VPNavScreenAppearance",setup(a){const{site:s,theme:l}=useData();return(o,c)=>unref(s).appearance&&unref(s).appearance!=="force-dark"?(openBlock(),createElementBlock("div",_hoisted_1$1X,[createBaseVNode("p",_hoisted_2$1i,toDisplayString(unref(l).darkModeSwitchLabel||"Appearance"),1),createVNode$1(VPSwitchAppearance)])):createCommentVNode("",!0)}}),VPNavScreenAppearance=_export_sfc$1(_sfc_main$3J,[["__scopeId","data-v-eaa18018"]]),_sfc_main$3I=defineComponent({__name:"VPNavScreenMenuLink",props:{item:{}},setup(a){const s=inject("close-screen");return(l,o)=>(openBlock(),createBlock(_sfc_main$4j,{class:"VPNavScreenMenuLink",href:l.item.link,target:l.item.target,rel:l.item.rel,onClick:unref(s)},{default:withCtx(()=>[createTextVNode(toDisplayString(l.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),VPNavScreenMenuLink=_export_sfc$1(_sfc_main$3I,[["__scopeId","data-v-bec0ccc2"]]),_sfc_main$3H=defineComponent({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(a){const s=inject("close-screen");return(l,o)=>(openBlock(),createBlock(_sfc_main$4j,{class:"VPNavScreenMenuGroupLink",href:l.item.link,target:l.item.target,rel:l.item.rel,onClick:unref(s)},{default:withCtx(()=>[createTextVNode(toDisplayString(l.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),VPNavScreenMenuGroupLink=_export_sfc$1(_sfc_main$3H,[["__scopeId","data-v-c1a54a04"]]),_hoisted_1$1W={class:"VPNavScreenMenuGroupSection"},_hoisted_2$1h={key:0,class:"title"},_sfc_main$3G=defineComponent({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(a){return(s,l)=>(openBlock(),createElementBlock("div",_hoisted_1$1W,[s.text?(openBlock(),createElementBlock("p",_hoisted_2$1h,toDisplayString(s.text),1)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(s.items,o=>(openBlock(),createBlock(VPNavScreenMenuGroupLink,{key:o.text,item:o},null,8,["item"]))),128))]))}}),VPNavScreenMenuGroupSection=_export_sfc$1(_sfc_main$3G,[["__scopeId","data-v-c91a470f"]]),_hoisted_1$1V=["aria-controls","aria-expanded"],_hoisted_2$1g=["innerHTML"],_hoisted_3$17=["id"],_hoisted_4$o={key:1,class:"group"},_sfc_main$3F=defineComponent({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(a){const s=a,l=ref(!1),o=computed(()=>`NavScreenGroup-${s.text.replace(" ","-").toLowerCase()}`);function c(){l.value=!l.value}return(u,d)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["VPNavScreenMenuGroup",{open:l.value}])},[createBaseVNode("button",{class:"button","aria-controls":o.value,"aria-expanded":l.value,onClick:c},[createBaseVNode("span",{class:"button-text",innerHTML:u.text},null,8,_hoisted_2$1g),d[0]||(d[0]=createBaseVNode("span",{class:"vpi-plus button-icon"},null,-1))],8,_hoisted_1$1V),createBaseVNode("div",{id:o.value,class:"items"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.items,f=>(openBlock(),createElementBlock(Fragment,{key:f.text},["link"in f?(openBlock(),createElementBlock("div",{key:f.text,class:"item"},[createVNode$1(VPNavScreenMenuGroupLink,{item:f},null,8,["item"])])):(openBlock(),createElementBlock("div",_hoisted_4$o,[createVNode$1(VPNavScreenMenuGroupSection,{text:f.text,items:f.items},null,8,["text","items"])]))],64))),128))],8,_hoisted_3$17)],2))}}),VPNavScreenMenuGroup=_export_sfc$1(_sfc_main$3F,[["__scopeId","data-v-3e4b7a72"]]),_hoisted_1$1U={key:0,class:"VPNavScreenMenu"},_sfc_main$3E=defineComponent({__name:"VPNavScreenMenu",setup(a){const{theme:s}=useData();return(l,o)=>unref(s).nav?(openBlock(),createElementBlock("nav",_hoisted_1$1U,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s).nav,c=>(openBlock(),createElementBlock(Fragment,{key:c.text},["link"in c?(openBlock(),createBlock(VPNavScreenMenuLink,{key:0,item:c},null,8,["item"])):(openBlock(),createBlock(VPNavScreenMenuGroup,{key:1,text:c.text||"",items:c.items},null,8,["text","items"]))],64))),128))])):createCommentVNode("",!0)}}),_sfc_main$3D=defineComponent({__name:"VPNavScreenSocialLinks",setup(a){const{theme:s}=useData();return(l,o)=>unref(s).socialLinks?(openBlock(),createBlock(VPSocialLinks,{key:0,class:"VPNavScreenSocialLinks",links:unref(s).socialLinks},null,8,["links"])):createCommentVNode("",!0)}}),_hoisted_1$1T={class:"list"},_sfc_main$3C=defineComponent({__name:"VPNavScreenTranslations",setup(a){const{localeLinks:s,currentLang:l}=useLangs({correspondingLink:!0}),o=ref(!1);function c(){o.value=!o.value}return(u,d)=>unref(s).length&&unref(l).label?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["VPNavScreenTranslations",{open:o.value}])},[createBaseVNode("button",{class:"title",onClick:c},[d[0]||(d[0]=createBaseVNode("span",{class:"vpi-languages icon lang"},null,-1)),createTextVNode(" "+toDisplayString(unref(l).label)+" ",1),d[1]||(d[1]=createBaseVNode("span",{class:"vpi-chevron-down icon chevron"},null,-1))]),createBaseVNode("ul",_hoisted_1$1T,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),f=>(openBlock(),createElementBlock("li",{key:f.link,class:"item"},[createVNode$1(_sfc_main$4j,{class:"link",href:f.link},{default:withCtx(()=>[createTextVNode(toDisplayString(f.text),1)]),_:2},1032,["href"])]))),128))])],2)):createCommentVNode("",!0)}}),VPNavScreenTranslations=_export_sfc$1(_sfc_main$3C,[["__scopeId","data-v-cbb20849"]]),_hoisted_1$1S={class:"container"},_sfc_main$3B=defineComponent({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(a){const s=ref(null),l=useScrollLock(inBrowser?document.body:null);return(o,c)=>(openBlock(),createBlock(Transition,{name:"fade",onEnter:c[0]||(c[0]=u=>l.value=!0),onAfterLeave:c[1]||(c[1]=u=>l.value=!1)},{default:withCtx(()=>[o.open?(openBlock(),createElementBlock("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:s,id:"VPNavScreen"},[createBaseVNode("div",_hoisted_1$1S,[renderSlot(o.$slots,"nav-screen-content-before",{},void 0,!0),createVNode$1(_sfc_main$3E,{class:"menu"}),createVNode$1(VPNavScreenTranslations,{class:"translations"}),createVNode$1(VPNavScreenAppearance,{class:"appearance"}),createVNode$1(_sfc_main$3D,{class:"social-links"}),renderSlot(o.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):createCommentVNode("",!0)]),_:3}))}}),VPNavScreen=_export_sfc$1(_sfc_main$3B,[["__scopeId","data-v-f8c9e19c"]]),_hoisted_1$1R={key:0,class:"VPNav"},_sfc_main$3A=defineComponent({__name:"VPNav",setup(a){const{isScreenOpen:s,closeScreen:l,toggleScreen:o}=useNav(),{frontmatter:c}=useData(),u=computed(()=>c.value.navbar!==!1);return provide("close-screen",l),watchEffect(()=>{inBrowser&&document.documentElement.classList.toggle("hide-nav",!u.value)}),(d,f)=>u.value?(openBlock(),createElementBlock("header",_hoisted_1$1R,[createVNode$1(VPNavBar,{"is-screen-open":unref(s),onToggleScreen:unref(o)},{"nav-bar-title-before":withCtx(()=>[renderSlot(d.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":withCtx(()=>[renderSlot(d.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":withCtx(()=>[renderSlot(d.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":withCtx(()=>[renderSlot(d.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),createVNode$1(VPNavScreen,{open:unref(s)},{"nav-screen-content-before":withCtx(()=>[renderSlot(d.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":withCtx(()=>[renderSlot(d.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):createCommentVNode("",!0)}}),VPNav=_export_sfc$1(_sfc_main$3A,[["__scopeId","data-v-fb9162e4"]]),_hoisted_1$1Q=["role","tabindex"],_hoisted_2$1f={key:1,class:"items"},_sfc_main$3z=defineComponent({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(a){const s=a,{collapsed:l,collapsible:o,isLink:c,isActiveLink:u,hasActiveLink:d,hasChildren:f,toggle:g}=useSidebarControl(computed(()=>s.item)),y=computed(()=>f.value?"section":"div"),$=computed(()=>c.value?"a":"div"),x=computed(()=>f.value?s.depth+2===7?"p":`h${s.depth+2}`:"p"),N=computed(()=>c.value?void 0:"button"),R=computed(()=>[[`level-${s.depth}`],{collapsible:o.value},{collapsed:l.value},{"is-link":c.value},{"is-active":u.value},{"has-active":d.value}]);function j(se){"key"in se&&se.key!=="Enter"||!s.item.link&&g()}function ne(){s.item.link&&g()}return(se,ce)=>{const fe=resolveComponent("VPSidebarItem",!0);return openBlock(),createBlock(resolveDynamicComponent(y.value),{class:normalizeClass(["VPSidebarItem",R.value])},{default:withCtx(()=>[se.item.text?(openBlock(),createElementBlock("div",mergeProps({key:0,class:"item",role:N.value},toHandlers(se.item.items?{click:j,keydown:j}:{},!0),{tabindex:se.item.items&&0}),[ce[1]||(ce[1]=createBaseVNode("div",{class:"indicator"},null,-1)),se.item.link?(openBlock(),createBlock(_sfc_main$4j,{key:0,tag:$.value,class:"link",href:se.item.link,rel:se.item.rel,target:se.item.target},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(x.value),{class:"text",innerHTML:se.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(openBlock(),createBlock(resolveDynamicComponent(x.value),{key:1,class:"text",innerHTML:se.item.text},null,8,["innerHTML"])),se.item.collapsed!=null&&se.item.items&&se.item.items.length?(openBlock(),createElementBlock("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:ne,onKeydown:withKeys(ne,["enter"]),tabindex:"0"},ce[0]||(ce[0]=[createBaseVNode("span",{class:"vpi-chevron-right caret-icon"},null,-1)]),32)):createCommentVNode("",!0)],16,_hoisted_1$1Q)):createCommentVNode("",!0),se.item.items&&se.item.items.length?(openBlock(),createElementBlock("div",_hoisted_2$1f,[se.depth<5?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(se.item.items,ea=>(openBlock(),createBlock(fe,{key:ea.text,item:ea,depth:se.depth+1},null,8,["item","depth"]))),128)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),_:1},8,["class"])}}}),VPSidebarItem=_export_sfc$1(_sfc_main$3z,[["__scopeId","data-v-56b615fb"]]),_hoisted_1$1P={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},_sfc_main$3y=defineComponent({__name:"VPSidebar",props:{open:{type:Boolean}},setup(a){const{sidebarGroups:s,hasSidebar:l}=useSidebar(),o=a,c=ref(null),u=useScrollLock(inBrowser?document.body:null);return watch([o,c],()=>{o.open?(u.value=!0,c.value?.focus()):u.value=!1},{immediate:!0,flush:"post"}),(d,f)=>unref(l)?(openBlock(),createElementBlock("aside",{key:0,class:normalizeClass(["VPSidebar",{open:d.open}]),ref_key:"navEl",ref:c,onClick:f[0]||(f[0]=withModifiers(()=>{},["stop"]))},[f[2]||(f[2]=createBaseVNode("div",{class:"curtain"},null,-1)),createBaseVNode("nav",_hoisted_1$1P,[f[1]||(f[1]=createBaseVNode("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),renderSlot(d.$slots,"sidebar-nav-before",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(s),g=>(openBlock(),createElementBlock("div",{key:g.text,class:"group"},[createVNode$1(VPSidebarItem,{item:g,depth:0},null,8,["item"])]))),128)),renderSlot(d.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):createCommentVNode("",!0)}}),VPSidebar=_export_sfc$1(_sfc_main$3y,[["__scopeId","data-v-fe73b7fe"]]),_sfc_main$3x=defineComponent({__name:"VPSkipLink",setup(a){const s=useRoute(),l=ref();watch(()=>s.path,()=>l.value.focus());function o({target:c}){const u=document.getElementById(decodeURIComponent(c.hash).slice(1));if(u){const d=()=>{u.removeAttribute("tabindex"),u.removeEventListener("blur",d)};u.setAttribute("tabindex","-1"),u.addEventListener("blur",d),u.focus(),window.scrollTo(0,0)}}return(c,u)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("span",{ref_key:"backToTop",ref:l,tabindex:"-1"},null,512),createBaseVNode("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:o}," Skip to content ")],64))}}),VPSkipLink=_export_sfc$1(_sfc_main$3x,[["__scopeId","data-v-3aa7858b"]]),_sfc_main$3w=defineComponent({__name:"Layout",setup(a){const{isOpen:s,open:l,close:o}=useSidebar(),c=useRoute();watch(()=>c.path,o),useCloseSidebarOnEscape(s,o);const{frontmatter:u}=useData(),d=useSlots(),f=computed(()=>!!d["home-hero-image"]);return provide("hero-image-slot-exists",f),(g,y)=>{const $=resolveComponent("Content");return unref(u).layout!==!1?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["Layout",unref(u).pageClass])},[renderSlot(g.$slots,"layout-top",{},void 0,!0),createVNode$1(VPSkipLink),createVNode$1(VPBackdrop,{class:"backdrop",show:unref(s),onClick:unref(o)},null,8,["show","onClick"]),createVNode$1(VPNav,null,{"nav-bar-title-before":withCtx(()=>[renderSlot(g.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":withCtx(()=>[renderSlot(g.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":withCtx(()=>[renderSlot(g.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":withCtx(()=>[renderSlot(g.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":withCtx(()=>[renderSlot(g.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":withCtx(()=>[renderSlot(g.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),createVNode$1(VPLocalNav,{open:unref(s),onOpenMenu:unref(l)},null,8,["open","onOpenMenu"]),createVNode$1(VPSidebar,{open:unref(s)},{"sidebar-nav-before":withCtx(()=>[renderSlot(g.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":withCtx(()=>[renderSlot(g.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),createVNode$1(VPContent,null,{"page-top":withCtx(()=>[renderSlot(g.$slots,"page-top",{},void 0,!0)]),"page-bottom":withCtx(()=>[renderSlot(g.$slots,"page-bottom",{},void 0,!0)]),"not-found":withCtx(()=>[renderSlot(g.$slots,"not-found",{},void 0,!0)]),"home-hero-before":withCtx(()=>[renderSlot(g.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":withCtx(()=>[renderSlot(g.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":withCtx(()=>[renderSlot(g.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":withCtx(()=>[renderSlot(g.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":withCtx(()=>[renderSlot(g.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":withCtx(()=>[renderSlot(g.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":withCtx(()=>[renderSlot(g.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":withCtx(()=>[renderSlot(g.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":withCtx(()=>[renderSlot(g.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":withCtx(()=>[renderSlot(g.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":withCtx(()=>[renderSlot(g.$slots,"doc-before",{},void 0,!0)]),"doc-after":withCtx(()=>[renderSlot(g.$slots,"doc-after",{},void 0,!0)]),"doc-top":withCtx(()=>[renderSlot(g.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":withCtx(()=>[renderSlot(g.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":withCtx(()=>[renderSlot(g.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":withCtx(()=>[renderSlot(g.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":withCtx(()=>[renderSlot(g.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":withCtx(()=>[renderSlot(g.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":withCtx(()=>[renderSlot(g.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":withCtx(()=>[renderSlot(g.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),createVNode$1(VPFooter),renderSlot(g.$slots,"layout-bottom",{},void 0,!0)],2)):(openBlock(),createBlock($,{key:1}))}}}),Layout$1=_export_sfc$1(_sfc_main$3w,[["__scopeId","data-v-9ed3c748"]]),theme$1={Layout:Layout$1,enhanceApp:({app:a})=>{a.component("Badge",_sfc_main$4q)}},_hoisted_1$1O={key:0},_hoisted_2$1e=["src"],_sfc_main$3v=defineComponent({__name:"Layout",setup(a){const{Layout:s}=theme$1,{isDark:l,frontmatter:o}=useData$1(),c=()=>"startViewTransition"in document&&window.matchMedia("(prefers-reduced-motion: no-preference)").matches;return provide("toggle-appearance",async({clientX:u,clientY:d})=>{if(!c()){l.value=!l.value;return}const f=[`circle(0px at ${u}px ${d}px)`,`circle(${Math.hypot(Math.max(u,innerWidth-u),Math.max(d,innerHeight-d))}px at ${u}px ${d}px)`];await document.startViewTransition(async()=>{l.value=!l.value,await nextTick()}).ready,document.documentElement.animate({clipPath:l.value?f.reverse():f},{duration:300,easing:"ease-in",pseudoElement:`::view-transition-${l.value?"old":"new"}(root)`})}),(u,d)=>(openBlock(),createBlock(unref(s),null,{"aside-outline-before":withCtx(()=>[unref(o).sideImage!==!1?(openBlock(),createElementBlock("div",_hoisted_1$1O,[createBaseVNode("img",{src:unref(o).sideImage??"https://img.springlearn.cn/learn_c3d5074d94563b8297f81633f171d230.jpeg",alt:"sideAds"},null,8,_hoisted_2$1e)])):createCommentVNode("",!0)]),_:1}))}}),defaultNamespace="demoblock",statePrefix="is-",_bem=(a,s,l,o,c)=>{let u=`${a}-${s}`;return l&&(u+=`-${l}`),o&&(u+=`__${o}`),c&&(u+=`--${c}`),u},namespaceContextKey=Symbol("namespaceContextKey"),useGetDerivedNamespace=a=>{const s=inject(namespaceContextKey,ref(defaultNamespace));return computed(()=>unref(s)||defaultNamespace)},useNamespace=(a,s)=>{const l=useGetDerivedNamespace();return{namespace:l,b:(ne="")=>_bem(l.value,a,ne,"",""),e:ne=>ne?_bem(l.value,a,"",ne,""):"",m:ne=>ne?_bem(l.value,a,"","",ne):"",be:(ne,se)=>ne&&se?_bem(l.value,a,ne,se,""):"",em:(ne,se)=>ne&&se?_bem(l.value,a,"",ne,se):"",bm:(ne,se)=>ne&&se?_bem(l.value,a,ne,"",se):"",bem:(ne,se,ce)=>ne&&se&&ce?_bem(l.value,a,ne,se,ce):"",is:(ne,...se)=>{const ce=se.length>=1?se[0]:!0;return ne&&ce?`${statePrefix}${ne}`:""},cssVar:ne=>{const se={};for(const ce in ne)ne[ce]&&(se[`--${l.value}-${ce}`]=ne[ce]);return se},cssVarName:ne=>`--${l.value}-${ne}`,cssVarBlock:ne=>{const se={};for(const ce in ne)ne[ce]&&(se[`--${l.value}-${a}-${ce}`]=ne[ce]);return se},cssVarBlockName:ne=>`--${l.value}-${a}-${ne}`}};function utoa(a){return btoa(unescape(encodeURIComponent(a)))}const MAIN_FILE_NAME="App.vue",usePlayground=a=>{const s=decodeURIComponent(a),l={[MAIN_FILE_NAME]:s},o=utoa(JSON.stringify(l)),c=`https://play.vuejs.org/#${o}`;return{encoded:o,link:c}},_sfc_main$3u={name:"FluentCheckmarkCircle16Filled"},_hoisted_1$1N={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16"};function _sfc_render$3d(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1N,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2Zm2.12 4.164L7.25 9.042L5.854 7.646a.5.5 0 1 0-.708.708l1.75 1.75a.5.5 0 0 0 .708 0l3.224-3.234a.5.5 0 0 0-.708-.706Z"},null,-1)]))}const FluentCheckmarkCircle16Filled=_export_sfc$1(_sfc_main$3u,[["render",_sfc_render$3d]]),_sfc_main$3t={name:"FluentDismissCircle16Filled"},_hoisted_1$1M={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16"};function _sfc_render$3c(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1M,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2ZM6.534 5.839a.5.5 0 0 0-.638.057l-.057.07a.5.5 0 0 0 .057.638L7.293 8L5.896 9.396l-.057.07a.5.5 0 0 0 .057.638l.07.057a.5.5 0 0 0 .638-.057L8 8.707l1.396 1.397l.07.057a.5.5 0 0 0 .638-.057l.057-.07a.5.5 0 0 0-.057-.638L8.707 8l1.397-1.396l.057-.07a.5.5 0 0 0-.057-.638l-.07-.057a.5.5 0 0 0-.638.057L8 7.293L6.604 5.896l-.07-.057Z"},null,-1)]))}const FluentDismissCircle16Filled=_export_sfc$1(_sfc_main$3t,[["render",_sfc_render$3c]]),_sfc_main$3s={name:"FluentErrorCircle16Filled"},_hoisted_1$1L={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16"};function _sfc_render$3b(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1L,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2Zm0 8a.75.75 0 1 0 0 1.5a.75.75 0 0 0 0-1.5Zm0-5.5a.5.5 0 0 0-.492.41L7.5 5v3.5l.008.09a.5.5 0 0 0 .984 0L8.5 8.5V5l-.008-.09A.5.5 0 0 0 8 4.5Z"},null,-1)]))}const FluentErrorCircle16Filled=_export_sfc$1(_sfc_main$3s,[["render",_sfc_render$3b]]);let seed=0;function getUuid(){return"message_"+seed++}const _sfc_main$3r=defineComponent({components:{FluentCheckmarkCircle16Filled,FluentDismissCircle16Filled,FluentErrorCircle16Filled},setup(){const a={info:"FluentErrorCircle16Filled",success:"FluentCheckmarkCircle16Filled",warning:"FluentDismissCircle16Filled",error:"FluentErrorCircle16Filled"},s=ref([]);function l(c){const u=getUuid(),d={name:u,show:!0,...c};s.value.push(d);const f=c.duration;setTimeout(()=>{o(u)},f*1e3)}function o(c){for(const[u,d]of s.value.entries())if(d.name===c){s.value.splice(u,1);break}}return{components:a,messages:s,add:l,remove:o}}}),_hoisted_1$1K={class:"demoblock-message-content"};function _sfc_render$3a(a,s,l,o,c,u){return openBlock(),createBlock(TransitionGroup,{name:"demoblock-fade-transition",tag:"div",class:"demoblock-messages"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.messages,d=>(openBlock(),createElementBlock("div",{key:d.name,class:"demoblock-message-wrap"},[createBaseVNode("div",{class:normalizeClass(["demoblock-message",d.type?`demoblock-message--${d.type}`:""])},[(openBlock(),createBlock(resolveDynamicComponent(a.components[d.type]),{class:"demoblock-message-icon"})),createBaseVNode("div",_hoisted_1$1K,toDisplayString(d.content),1)],2)]))),128))]),_:1})}const Message$2=_export_sfc$1(_sfc_main$3r,[["render",_sfc_render$3a],["__scopeId","data-v-f23d8e2a"]]);Message$2.newInstance=(a={})=>{const s=document.createElement("div"),c=createApp({render(){return h$1(Message$2,{...a,ref:"messageRef"})}}).mount(s).$refs.messageRef;return document.body.appendChild(s.firstElementChild),{add(u){c.add(u)},remove(u){c.remove(u)}}};let messageInstance$1;function getMessageInstance(){return messageInstance$1=messageInstance$1||Message$2.newInstance(),messageInstance$1}function message$1(a,{duration:s=3,type:l=""}){getMessageInstance().add({content:a,duration:s,type:l})}const message$2={info(a,s){return message$1(a,{...s,type:"info"})},warning(a,s){return message$1(a,{...s,type:"warning"})},success(a,s){return message$1(a,{...s,type:"success"})},error(a,s){return message$1(a,{...s,type:"error"})}},_sfc_main$3q={name:"RiFlaskLine"},_hoisted_1$1J={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function _sfc_render$39(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1J,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M16 2v2h-1v3.243a8 8 0 0 0 .736 3.352l4.281 9.276A1.5 1.5 0 0 1 18.655 22H5.344a1.5 1.5 0 0 1-1.362-2.129l4.281-9.276A8 8 0 0 0 9 7.243V4H8V2h8Zm-2.613 8.001h-2.776a9.986 9.986 0 0 1-.374 1.071l-.158.362L6.124 20h11.75l-3.954-8.566A9.99 9.99 0 0 1 13.387 10ZM11 7.243c0 .253-.01.506-.028.758h2.057a9.59 9.59 0 0 1-.02-.364L13 7.243V4h-2v3.243Z"},null,-1)]))}const RiFlaskLine=_export_sfc$1(_sfc_main$3q,[["render",_sfc_render$39]]),_sfc_main$3p={name:"RiGithubLine"},_hoisted_1$1I={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function _sfc_render$38(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1I,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M5.884 18.653c-.3-.2-.558-.456-.86-.816a50.59 50.59 0 0 1-.466-.579c-.463-.575-.755-.841-1.056-.95a1 1 0 1 1 .675-1.882c.752.27 1.261.735 1.947 1.588c-.094-.117.34.427.433.539c.19.227.33.365.44.438c.204.137.588.196 1.15.14c.024-.382.094-.753.202-1.096c-2.968-.725-4.648-2.64-4.648-6.396c0-1.238.37-2.355 1.058-3.291c-.218-.894-.185-1.975.302-3.192a1 1 0 0 1 .63-.583c.081-.024.127-.034.208-.047c.803-.123 1.937.17 3.415 1.097a11.731 11.731 0 0 1 2.687-.308c.912 0 1.819.103 2.684.308c1.477-.933 2.614-1.227 3.422-1.097c.085.014.158.032.218.051a1 1 0 0 1 .616.58c.487 1.215.52 2.296.302 3.19c.691.936 1.058 2.045 1.058 3.292c0 3.758-1.674 5.666-4.642 6.393c.125.415.19.878.19 1.38c0 .664-.002 1.299-.007 2.01c0 .19-.002.394-.005.706a1 1 0 0 1-.018 1.957c-1.14.228-1.984-.532-1.984-1.524l.002-.447l.005-.705c.005-.707.008-1.338.008-1.997c0-.697-.184-1.152-.426-1.361c-.661-.57-.326-1.654.541-1.751c2.966-.334 4.336-1.483 4.336-4.66c0-.955-.312-1.745-.913-2.405a1 1 0 0 1-.189-1.044c.166-.415.236-.957.095-1.614l-.01.002c-.491.14-1.11.44-1.858.95a1 1 0 0 1-.833.135a9.626 9.626 0 0 0-2.592-.35c-.89 0-1.772.12-2.592.35a1 1 0 0 1-.829-.133c-.753-.507-1.374-.807-1.87-.947c-.143.653-.072 1.194.093 1.607a1 1 0 0 1-.189 1.044c-.597.656-.913 1.459-.913 2.404c0 3.172 1.371 4.33 4.322 4.66c.865.098 1.202 1.178.545 1.749c-.193.167-.43.732-.43 1.364v3.149c0 .986-.834 1.726-1.96 1.529a1 1 0 0 1-.04-1.963v-.99c-.91.062-1.661-.087-2.254-.484Z"},null,-1)]))}const RiGithubLine=_export_sfc$1(_sfc_main$3p,[["render",_sfc_render$38]]),_sfc_main$3o={name:"RiFileCopyLine"},_hoisted_1$1H={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function _sfc_render$37(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1H,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M7 6V3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3v3c0 .552-.45 1-1.007 1H4.007A1.001 1.001 0 0 1 3 21l.003-14c0-.552.45-1 1.006-1H7ZM5.002 8L5 20h10V8H5.002ZM9 6h8v10h2V4H9v2Z"},null,-1)]))}const RiFileCopyLine=_export_sfc$1(_sfc_main$3o,[["render",_sfc_render$37]]),_sfc_main$3n={name:"RiCodeLine"},_hoisted_1$1G={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"};function _sfc_render$36(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1G,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"m23 12l-7.071 7.07l-1.414-1.413L20.172 12l-5.657-5.657l1.414-1.414L23 11.999ZM3.828 12l5.657 5.657l-1.414 1.414L1 12l7.071-7.071l1.414 1.414L3.828 12Z"},null,-1)]))}const RiCodeLine=_export_sfc$1(_sfc_main$3n,[["render",_sfc_render$36]]),_sfc_main$3m={name:"EpCaretTop"},_hoisted_1$1F={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1024 1024"};function _sfc_render$35(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",_hoisted_1$1F,s[0]||(s[0]=[createBaseVNode("path",{fill:"currentColor",d:"M512 320L192 704h639.936z"},null,-1)]))}const EpCaretTop=_export_sfc$1(_sfc_main$3m,[["render",_sfc_render$35]]),min$2=Math.min,max$2=Math.max,round$5=Math.round,createCoords=a=>({x:a,y:a}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(a,s,l){return max$2(a,min$2(s,l))}function evaluate(a,s){return typeof a=="function"?a(s):a}function getSide(a){return a.split("-")[0]}function getAlignment(a){return a.split("-")[1]}function getOppositeAxis(a){return a==="x"?"y":"x"}function getAxisLength(a){return a==="y"?"height":"width"}function getSideAxis(a){return["top","bottom"].includes(getSide(a))?"y":"x"}function getAlignmentAxis(a){return getOppositeAxis(getSideAxis(a))}function getAlignmentSides(a,s,l){l===void 0&&(l=!1);const o=getAlignment(a),c=getAlignmentAxis(a),u=getAxisLength(c);let d=c==="x"?o===(l?"end":"start")?"right":"left":o==="start"?"bottom":"top";return s.reference[u]>s.floating[u]&&(d=getOppositePlacement(d)),[d,getOppositePlacement(d)]}function getExpandedPlacements(a){const s=getOppositePlacement(a);return[getOppositeAlignmentPlacement(a),s,getOppositeAlignmentPlacement(s)]}function getOppositeAlignmentPlacement(a){return a.replace(/start|end/g,s=>oppositeAlignmentMap[s])}function getSideList(a,s,l){const o=["left","right"],c=["right","left"],u=["top","bottom"],d=["bottom","top"];switch(a){case"top":case"bottom":return l?s?c:o:s?o:c;case"left":case"right":return s?u:d;default:return[]}}function getOppositeAxisPlacements(a,s,l,o){const c=getAlignment(a);let u=getSideList(getSide(a),l==="start",o);return c&&(u=u.map(d=>d+"-"+c),s&&(u=u.concat(u.map(getOppositeAlignmentPlacement)))),u}function getOppositePlacement(a){return a.replace(/left|right|bottom|top/g,s=>oppositeSideMap[s])}function expandPaddingObject(a){return{top:0,right:0,bottom:0,left:0,...a}}function getPaddingObject(a){return typeof a!="number"?expandPaddingObject(a):{top:a,right:a,bottom:a,left:a}}function rectToClientRect(a){const{x:s,y:l,width:o,height:c}=a;return{width:o,height:c,top:l,left:s,right:s+o,bottom:l+c,x:s,y:l}}function computeCoordsFromPlacement(a,s,l){let{reference:o,floating:c}=a;const u=getSideAxis(s),d=getAlignmentAxis(s),f=getAxisLength(d),g=getSide(s),y=u==="y",$=o.x+o.width/2-c.width/2,x=o.y+o.height/2-c.height/2,N=o[f]/2-c[f]/2;let R;switch(g){case"top":R={x:$,y:o.y-c.height};break;case"bottom":R={x:$,y:o.y+o.height};break;case"right":R={x:o.x+o.width,y:x};break;case"left":R={x:o.x-c.width,y:x};break;default:R={x:o.x,y:o.y}}switch(getAlignment(s)){case"start":R[d]-=N*(l&&y?-1:1);break;case"end":R[d]+=N*(l&&y?-1:1);break}return R}const computePosition$1=async(a,s,l)=>{const{placement:o="bottom",strategy:c="absolute",middleware:u=[],platform:d}=l,f=u.filter(Boolean),g=await(d.isRTL==null?void 0:d.isRTL(s));let y=await d.getElementRects({reference:a,floating:s,strategy:c}),{x:$,y:x}=computeCoordsFromPlacement(y,o,g),N=o,R={},j=0;for(let ne=0;ne<f.length;ne++){const{name:se,fn:ce}=f[ne],{x:fe,y:ea,data:ta,reset:na}=await ce({x:$,y:x,initialPlacement:o,placement:N,strategy:c,middlewareData:R,rects:y,platform:d,elements:{reference:a,floating:s}});$=fe??$,x=ea??x,R={...R,[se]:{...R[se],...ta}},na&&j<=50&&(j++,typeof na=="object"&&(na.placement&&(N=na.placement),na.rects&&(y=na.rects===!0?await d.getElementRects({reference:a,floating:s,strategy:c}):na.rects),{x:$,y:x}=computeCoordsFromPlacement(y,N,g)),ne=-1)}return{x:$,y:x,placement:N,strategy:c,middlewareData:R}};async function detectOverflow(a,s){var l;s===void 0&&(s={});const{x:o,y:c,platform:u,rects:d,elements:f,strategy:g}=a,{boundary:y="clippingAncestors",rootBoundary:$="viewport",elementContext:x="floating",altBoundary:N=!1,padding:R=0}=evaluate(s,a),j=getPaddingObject(R),se=f[N?x==="floating"?"reference":"floating":x],ce=rectToClientRect(await u.getClippingRect({element:(l=await(u.isElement==null?void 0:u.isElement(se)))==null||l?se:se.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(f.floating)),boundary:y,rootBoundary:$,strategy:g})),fe=x==="floating"?{x:o,y:c,width:d.floating.width,height:d.floating.height}:d.reference,ea=await(u.getOffsetParent==null?void 0:u.getOffsetParent(f.floating)),ta=await(u.isElement==null?void 0:u.isElement(ea))?await(u.getScale==null?void 0:u.getScale(ea))||{x:1,y:1}:{x:1,y:1},na=rectToClientRect(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:f,rect:fe,offsetParent:ea,strategy:g}):fe);return{top:(ce.top-na.top+j.top)/ta.y,bottom:(na.bottom-ce.bottom+j.bottom)/ta.y,left:(ce.left-na.left+j.left)/ta.x,right:(na.right-ce.right+j.right)/ta.x}}const flip$1=function(a){return a===void 0&&(a={}),{name:"flip",options:a,async fn(s){var l,o;const{placement:c,middlewareData:u,rects:d,initialPlacement:f,platform:g,elements:y}=s,{mainAxis:$=!0,crossAxis:x=!0,fallbackPlacements:N,fallbackStrategy:R="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:ne=!0,...se}=evaluate(a,s);if((l=u.arrow)!=null&&l.alignmentOffset)return{};const ce=getSide(c),fe=getSideAxis(f),ea=getSide(f)===f,ta=await(g.isRTL==null?void 0:g.isRTL(y.floating)),na=N||(ea||!ne?[getOppositePlacement(f)]:getExpandedPlacements(f)),aa=j!=="none";!N&&aa&&na.push(...getOppositeAxisPlacements(f,ne,j,ta));const ia=[f,...na],sa=await detectOverflow(s,se),ra=[];let la=((o=u.flip)==null?void 0:o.overflows)||[];if($&&ra.push(sa[ce]),x){const ua=getAlignmentSides(c,d,ta);ra.push(sa[ua[0]],sa[ua[1]])}if(la=[...la,{placement:c,overflows:ra}],!ra.every(ua=>ua<=0)){var oa,ca;const ua=(((oa=u.flip)==null?void 0:oa.index)||0)+1,da=ia[ua];if(da)return{data:{index:ua,overflows:la},reset:{placement:da}};let ha=(ca=la.filter(ga=>ga.overflows[0]<=0).sort((ga,fa)=>ga.overflows[1]-fa.overflows[1])[0])==null?void 0:ca.placement;if(!ha)switch(R){case"bestFit":{var pa;const ga=(pa=la.filter(fa=>{if(aa){const ma=getSideAxis(fa.placement);return ma===fe||ma==="y"}return!0}).map(fa=>[fa.placement,fa.overflows.filter(ma=>ma>0).reduce((ma,va)=>ma+va,0)]).sort((fa,ma)=>fa[1]-ma[1])[0])==null?void 0:pa[0];ga&&(ha=ga);break}case"initialPlacement":ha=f;break}if(c!==ha)return{reset:{placement:ha}}}return{}}}};async function convertValueToCoords(a,s){const{placement:l,platform:o,elements:c}=a,u=await(o.isRTL==null?void 0:o.isRTL(c.floating)),d=getSide(l),f=getAlignment(l),g=getSideAxis(l)==="y",y=["left","top"].includes(d)?-1:1,$=u&&g?-1:1,x=evaluate(s,a);let{mainAxis:N,crossAxis:R,alignmentAxis:j}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...x};return f&&typeof j=="number"&&(R=f==="end"?j*-1:j),g?{x:R*$,y:N*y}:{x:N*y,y:R*$}}const offset$1=function(a){return a===void 0&&(a=0),{name:"offset",options:a,async fn(s){var l,o;const{x:c,y:u,placement:d,middlewareData:f}=s,g=await convertValueToCoords(s,a);return d===((l=f.offset)==null?void 0:l.placement)&&(o=f.arrow)!=null&&o.alignmentOffset?{}:{x:c+g.x,y:u+g.y,data:{...g,placement:d}}}}},shift$1=function(a){return a===void 0&&(a={}),{name:"shift",options:a,async fn(s){const{x:l,y:o,placement:c}=s,{mainAxis:u=!0,crossAxis:d=!1,limiter:f={fn:se=>{let{x:ce,y:fe}=se;return{x:ce,y:fe}}},...g}=evaluate(a,s),y={x:l,y:o},$=await detectOverflow(s,g),x=getSideAxis(getSide(c)),N=getOppositeAxis(x);let R=y[N],j=y[x];if(u){const se=N==="y"?"top":"left",ce=N==="y"?"bottom":"right",fe=R+$[se],ea=R-$[ce];R=clamp$1(fe,R,ea)}if(d){const se=x==="y"?"top":"left",ce=x==="y"?"bottom":"right",fe=j+$[se],ea=j-$[ce];j=clamp$1(fe,j,ea)}const ne=f.fn({...s,[N]:R,[x]:j});return{...ne,data:{x:ne.x-l,y:ne.y-o}}}}};function getNodeName(a){return isNode(a)?(a.nodeName||"").toLowerCase():"#document"}function getWindow(a){var s;return(a==null||(s=a.ownerDocument)==null?void 0:s.defaultView)||window}function getDocumentElement(a){var s;return(s=(isNode(a)?a.ownerDocument:a.document)||window.document)==null?void 0:s.documentElement}function isNode(a){return a instanceof Node||a instanceof getWindow(a).Node}function isElement$1(a){return a instanceof Element||a instanceof getWindow(a).Element}function isHTMLElement(a){return a instanceof HTMLElement||a instanceof getWindow(a).HTMLElement}function isShadowRoot(a){return typeof ShadowRoot>"u"?!1:a instanceof ShadowRoot||a instanceof getWindow(a).ShadowRoot}function isOverflowElement(a){const{overflow:s,overflowX:l,overflowY:o,display:c}=getComputedStyle$2(a);return/auto|scroll|overlay|hidden|clip/.test(s+o+l)&&!["inline","contents"].includes(c)}function isTableElement(a){return["table","td","th"].includes(getNodeName(a))}function isTopLayer(a){return[":popover-open",":modal"].some(s=>{try{return a.matches(s)}catch{return!1}})}function isContainingBlock(a){const s=isWebKit(),l=isElement$1(a)?getComputedStyle$2(a):a;return l.transform!=="none"||l.perspective!=="none"||(l.containerType?l.containerType!=="normal":!1)||!s&&(l.backdropFilter?l.backdropFilter!=="none":!1)||!s&&(l.filter?l.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(l.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(l.contain||"").includes(o))}function getContainingBlock(a){let s=getParentNode(a);for(;isHTMLElement(s)&&!isLastTraversableNode(s);){if(isContainingBlock(s))return s;if(isTopLayer(s))return null;s=getParentNode(s)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(a){return["html","body","#document"].includes(getNodeName(a))}function getComputedStyle$2(a){return getWindow(a).getComputedStyle(a)}function getNodeScroll(a){return isElement$1(a)?{scrollLeft:a.scrollLeft,scrollTop:a.scrollTop}:{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function getParentNode(a){if(getNodeName(a)==="html")return a;const s=a.assignedSlot||a.parentNode||isShadowRoot(a)&&a.host||getDocumentElement(a);return isShadowRoot(s)?s.host:s}function getNearestOverflowAncestor(a){const s=getParentNode(a);return isLastTraversableNode(s)?a.ownerDocument?a.ownerDocument.body:a.body:isHTMLElement(s)&&isOverflowElement(s)?s:getNearestOverflowAncestor(s)}function getOverflowAncestors(a,s,l){var o;s===void 0&&(s=[]),l===void 0&&(l=!0);const c=getNearestOverflowAncestor(a),u=c===((o=a.ownerDocument)==null?void 0:o.body),d=getWindow(c);if(u){const f=getFrameElement(d);return s.concat(d,d.visualViewport||[],isOverflowElement(c)?c:[],f&&l?getOverflowAncestors(f):[])}return s.concat(c,getOverflowAncestors(c,[],l))}function getFrameElement(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function getCssDimensions(a){const s=getComputedStyle$2(a);let l=parseFloat(s.width)||0,o=parseFloat(s.height)||0;const c=isHTMLElement(a),u=c?a.offsetWidth:l,d=c?a.offsetHeight:o,f=round$5(l)!==u||round$5(o)!==d;return f&&(l=u,o=d),{width:l,height:o,$:f}}function unwrapElement(a){return isElement$1(a)?a:a.contextElement}function getScale$1(a){const s=unwrapElement(a);if(!isHTMLElement(s))return createCoords(1);const l=s.getBoundingClientRect(),{width:o,height:c,$:u}=getCssDimensions(s);let d=(u?round$5(l.width):l.width)/o,f=(u?round$5(l.height):l.height)/c;return(!d||!Number.isFinite(d))&&(d=1),(!f||!Number.isFinite(f))&&(f=1),{x:d,y:f}}const noOffsets=createCoords(0);function getVisualOffsets(a){const s=getWindow(a);return!isWebKit()||!s.visualViewport?noOffsets:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function shouldAddVisualOffsets(a,s,l){return s===void 0&&(s=!1),!l||s&&l!==getWindow(a)?!1:s}function getBoundingClientRect(a,s,l,o){s===void 0&&(s=!1),l===void 0&&(l=!1);const c=a.getBoundingClientRect(),u=unwrapElement(a);let d=createCoords(1);s&&(o?isElement$1(o)&&(d=getScale$1(o)):d=getScale$1(a));const f=shouldAddVisualOffsets(u,l,o)?getVisualOffsets(u):createCoords(0);let g=(c.left+f.x)/d.x,y=(c.top+f.y)/d.y,$=c.width/d.x,x=c.height/d.y;if(u){const N=getWindow(u),R=o&&isElement$1(o)?getWindow(o):o;let j=N,ne=getFrameElement(j);for(;ne&&o&&R!==j;){const se=getScale$1(ne),ce=ne.getBoundingClientRect(),fe=getComputedStyle$2(ne),ea=ce.left+(ne.clientLeft+parseFloat(fe.paddingLeft))*se.x,ta=ce.top+(ne.clientTop+parseFloat(fe.paddingTop))*se.y;g*=se.x,y*=se.y,$*=se.x,x*=se.y,g+=ea,y+=ta,j=getWindow(ne),ne=getFrameElement(j)}}return rectToClientRect({width:$,height:x,x:g,y})}function convertOffsetParentRelativeRectToViewportRelativeRect(a){let{elements:s,rect:l,offsetParent:o,strategy:c}=a;const u=c==="fixed",d=getDocumentElement(o),f=s?isTopLayer(s.floating):!1;if(o===d||f&&u)return l;let g={scrollLeft:0,scrollTop:0},y=createCoords(1);const $=createCoords(0),x=isHTMLElement(o);if((x||!x&&!u)&&((getNodeName(o)!=="body"||isOverflowElement(d))&&(g=getNodeScroll(o)),isHTMLElement(o))){const N=getBoundingClientRect(o);y=getScale$1(o),$.x=N.x+o.clientLeft,$.y=N.y+o.clientTop}return{width:l.width*y.x,height:l.height*y.y,x:l.x*y.x-g.scrollLeft*y.x+$.x,y:l.y*y.y-g.scrollTop*y.y+$.y}}function getClientRects(a){return Array.from(a.getClientRects())}function getWindowScrollBarX(a){return getBoundingClientRect(getDocumentElement(a)).left+getNodeScroll(a).scrollLeft}function getDocumentRect(a){const s=getDocumentElement(a),l=getNodeScroll(a),o=a.ownerDocument.body,c=max$2(s.scrollWidth,s.clientWidth,o.scrollWidth,o.clientWidth),u=max$2(s.scrollHeight,s.clientHeight,o.scrollHeight,o.clientHeight);let d=-l.scrollLeft+getWindowScrollBarX(a);const f=-l.scrollTop;return getComputedStyle$2(o).direction==="rtl"&&(d+=max$2(s.clientWidth,o.clientWidth)-c),{width:c,height:u,x:d,y:f}}function getViewportRect(a,s){const l=getWindow(a),o=getDocumentElement(a),c=l.visualViewport;let u=o.clientWidth,d=o.clientHeight,f=0,g=0;if(c){u=c.width,d=c.height;const y=isWebKit();(!y||y&&s==="fixed")&&(f=c.offsetLeft,g=c.offsetTop)}return{width:u,height:d,x:f,y:g}}function getInnerBoundingClientRect(a,s){const l=getBoundingClientRect(a,!0,s==="fixed"),o=l.top+a.clientTop,c=l.left+a.clientLeft,u=isHTMLElement(a)?getScale$1(a):createCoords(1),d=a.clientWidth*u.x,f=a.clientHeight*u.y,g=c*u.x,y=o*u.y;return{width:d,height:f,x:g,y}}function getClientRectFromClippingAncestor(a,s,l){let o;if(s==="viewport")o=getViewportRect(a,l);else if(s==="document")o=getDocumentRect(getDocumentElement(a));else if(isElement$1(s))o=getInnerBoundingClientRect(s,l);else{const c=getVisualOffsets(a);o={...s,x:s.x-c.x,y:s.y-c.y}}return rectToClientRect(o)}function hasFixedPositionAncestor(a,s){const l=getParentNode(a);return l===s||!isElement$1(l)||isLastTraversableNode(l)?!1:getComputedStyle$2(l).position==="fixed"||hasFixedPositionAncestor(l,s)}function getClippingElementAncestors(a,s){const l=s.get(a);if(l)return l;let o=getOverflowAncestors(a,[],!1).filter(f=>isElement$1(f)&&getNodeName(f)!=="body"),c=null;const u=getComputedStyle$2(a).position==="fixed";let d=u?getParentNode(a):a;for(;isElement$1(d)&&!isLastTraversableNode(d);){const f=getComputedStyle$2(d),g=isContainingBlock(d);!g&&f.position==="fixed"&&(c=null),(u?!g&&!c:!g&&f.position==="static"&&!!c&&["absolute","fixed"].includes(c.position)||isOverflowElement(d)&&!g&&hasFixedPositionAncestor(a,d))?o=o.filter($=>$!==d):c=f,d=getParentNode(d)}return s.set(a,o),o}function getClippingRect(a){let{element:s,boundary:l,rootBoundary:o,strategy:c}=a;const d=[...l==="clippingAncestors"?isTopLayer(s)?[]:getClippingElementAncestors(s,this._c):[].concat(l),o],f=d[0],g=d.reduce((y,$)=>{const x=getClientRectFromClippingAncestor(s,$,c);return y.top=max$2(x.top,y.top),y.right=min$2(x.right,y.right),y.bottom=min$2(x.bottom,y.bottom),y.left=max$2(x.left,y.left),y},getClientRectFromClippingAncestor(s,f,c));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function getDimensions(a){const{width:s,height:l}=getCssDimensions(a);return{width:s,height:l}}function getRectRelativeToOffsetParent(a,s,l){const o=isHTMLElement(s),c=getDocumentElement(s),u=l==="fixed",d=getBoundingClientRect(a,!0,u,s);let f={scrollLeft:0,scrollTop:0};const g=createCoords(0);if(o||!o&&!u)if((getNodeName(s)!=="body"||isOverflowElement(c))&&(f=getNodeScroll(s)),o){const x=getBoundingClientRect(s,!0,u,s);g.x=x.x+s.clientLeft,g.y=x.y+s.clientTop}else c&&(g.x=getWindowScrollBarX(c));const y=d.left+f.scrollLeft-g.x,$=d.top+f.scrollTop-g.y;return{x:y,y:$,width:d.width,height:d.height}}function isStaticPositioned(a){return getComputedStyle$2(a).position==="static"}function getTrueOffsetParent(a,s){return!isHTMLElement(a)||getComputedStyle$2(a).position==="fixed"?null:s?s(a):a.offsetParent}function getOffsetParent(a,s){const l=getWindow(a);if(isTopLayer(a))return l;if(!isHTMLElement(a)){let c=getParentNode(a);for(;c&&!isLastTraversableNode(c);){if(isElement$1(c)&&!isStaticPositioned(c))return c;c=getParentNode(c)}return l}let o=getTrueOffsetParent(a,s);for(;o&&isTableElement(o)&&isStaticPositioned(o);)o=getTrueOffsetParent(o,s);return o&&isLastTraversableNode(o)&&isStaticPositioned(o)&&!isContainingBlock(o)?l:o||getContainingBlock(a)||l}const getElementRects=async function(a){const s=this.getOffsetParent||getOffsetParent,l=this.getDimensions,o=await l(a.floating);return{reference:getRectRelativeToOffsetParent(a.reference,await s(a.floating),a.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function isRTL(a){return getComputedStyle$2(a).direction==="rtl"}const platform$1={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale:getScale$1,isElement:isElement$1,isRTL},offset=offset$1,shift=shift$1,flip=flip$1,computePosition=(a,s,l)=>{const o=new Map,c={platform:platform$1,...l},u={...c.platform,_c:o};return computePosition$1(a,s,{...c,platform:u})},_sfc_main$3l={props:{placement:{type:String,default:"top"},content:{type:String,default:""}},setup(a){const s=ref(null),l=ref(null),o=ref(!1);function c(){computePosition(s.value,l.value,{placement:a.placement,middleware:[offset(11),flip(),shift()]}).then(({x:g,y,placement:$,middlewareData:x})=>{Object.assign(l.value?.style,{left:0,top:0,transform:`translate(${g}px, ${y}px)`,willChange:"transform",pointerEvents:"none"})})}function u(){o.value=!0,c()}function d(){o.value=!1}return{reference:s,floating:l,showFloating:o,componentProps:{mouseenter:u,mouseleave:d,focus:u,blur:d},showTooltip:u}}},_hoisted_1$1E={class:"demoblock-tooltip"};function _sfc_render$34(a,s,l,o,c,u){return openBlock(),createElementBlock("div",_hoisted_1$1E,[createBaseVNode("div",mergeProps({ref:"reference",class:"demoblock-tooltip-trigger"},toHandlers(o.componentProps,!0)),[renderSlot(a.$slots,"default",{},void 0,!0)],16),withDirectives(createBaseVNode("div",{ref:"floating",class:"demoblock-tooltip-content"},toDisplayString(l.content),513),[[vShow,o.showFloating]])])}const Tooltip$1=_export_sfc$1(_sfc_main$3l,[["render",_sfc_render$34],["__scopeId","data-v-49c46b15"]]),_sfc_main$3k=defineComponent({setup(){return{ns:useNamespace("collapse-transition"),on:{beforeEnter(l){l.dataset||(l.dataset={}),l.dataset.oldPaddingTop=l.style.paddingTop,l.dataset.oldPaddingBottom=l.style.paddingBottom,l.style.maxHeight=0,l.style.paddingTop=0,l.style.paddingBottom=0},enter(l){l.dataset.oldOverflow=l.style.overflow,l.scrollHeight!==0?(l.style.maxHeight=`${l.scrollHeight}px`,l.style.paddingTop=l.dataset.oldPaddingTop,l.style.paddingBottom=l.dataset.oldPaddingBottom):(l.style.maxHeight=0,l.style.paddingTop=l.dataset.oldPaddingTop,l.style.paddingBottom=l.dataset.oldPaddingBottom),l.style.overflow="hidden"},afterEnter(l){l.style.maxHeight="",l.style.overflow=l.dataset.oldOverflow},beforeLeave(l){l.dataset||(l.dataset={}),l.dataset.oldPaddingTop=l.style.paddingTop,l.dataset.oldPaddingBottom=l.style.paddingBottom,l.dataset.oldOverflow=l.style.overflow,l.style.maxHeight=`${l.scrollHeight}px`,l.style.overflow="hidden"},leave(l){l.scrollHeight!==0&&(l.style.maxHeight=0,l.style.paddingTop=0,l.style.paddingBottom=0)},afterLeave(l){l.style.maxHeight="",l.style.overflow=l.dataset.oldOverflow,l.style.paddingTop=l.dataset.oldPaddingTop,l.style.paddingBottom=l.dataset.oldPaddingBottom}}}}});function _sfc_render$33(a,s,l,o,c,u){return openBlock(),createBlock(Transition,mergeProps({name:a.ns.b()},toHandlers(a.on)),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["name"])}const CollapseTransition=_export_sfc$1(_sfc_main$3k,[["render",_sfc_render$33]]),_sfc_main$3j={components:{RiFlaskLine,RiGithubLine,RiFileCopyLine,RiCodeLine,EpCaretTop,Tooltip:Tooltip$1,CollapseTransition},props:{customClass:String,sourceCode:String,options:String},setup(props,ctx){const{copy}=useClipboard(),data=useData$1(),route=useRoute();let instance;onMounted(()=>{instance=getCurrentInstance()}),watch(()=>route.path,a=>{pathArr.value=a.split("/")});const pathArr=ref(route.path.split("/")),component=computed(()=>pathArr.value[pathArr.value.length-1].split(".")[0]),blockClass=computed(()=>`demo-${component.value}`),source=ref(null),control=ref(null),demoblock=ref(null),onPlaygroundClick=()=>{const{link:a}=usePlayground(props.sourceCode);isClient$1&&window.open(a)},isExpanded=ref(!1),onControlClick=()=>{isExpanded.value=!isExpanded.value},locale=computed(()=>data.theme.value.demoblock?.[data.localeIndex.value]??{"view-source":"查看源代码","hide-source":"隐藏源代码","edit-in-editor":"在 Playground 中编辑","edit-on-github":"在 Github 中编辑","copy-code":"复制代码","copy-success":"复制成功","copy-error":"复制失败"}),onCopy=async()=>{const options=JSON.parse(props.options);try{if(copy(props.sourceCode),options.onCopySuccess){const onCopySuccess=eval(options.onCopySuccess);onCopySuccess(instance,locale.value["copy-success"])}else message$2.success(locale.value["copy-success"])}catch(err){if(options.onCopyError){const onCopyError=eval(options.onCopyError);onCopyError(instance,locale.value["copy-error"])}else message$2.error(locale.value["copy-error"])}};return{blockClass,locale,source,control,demoblock,isExpanded,onControlClick,onCopy,onPlaygroundClick}}},_hoisted_1$1D={class:"demoblock-view vp-raw"},_hoisted_2$1d={class:"demoblock-op-btns"},_hoisted_3$16={ref:"source",class:"demoblock-source"},_hoisted_4$n={class:"highlight"},_hoisted_5$8={class:"control-text"};function _sfc_render$32(a,s,l,o,c,u){const d=resolveComponent("RiFlaskLine"),f=resolveComponent("Tooltip"),g=resolveComponent("RiGithubLine"),y=resolveComponent("RiFileCopyLine"),$=resolveComponent("RiCodeLine"),x=resolveComponent("CollapseTransition"),N=resolveComponent("EpCaretTop"),R=resolveComponent("ClientOnly");return openBlock(),createBlock(R,null,{default:withCtx(()=>[createBaseVNode("div",{ref:"demoblock",class:normalizeClass(["demoblock",o.blockClass,l.customClass?l.customClass:""])},[createBaseVNode("div",_hoisted_1$1D,[renderSlot(a.$slots,"default",{},void 0,!0)]),s[1]||(s[1]=createBaseVNode("div",{class:"demoblock-divider demoblock-divider--horizontal"},null,-1)),createBaseVNode("div",_hoisted_2$1d,[createCommentVNode("",!0),createCommentVNode("",!0),createVNode$1(f,{placement:"top",content:o.locale["copy-code"]},{default:withCtx(()=>[createVNode$1(y,{class:"demoblock-op-btn",onClick:o.onCopy},null,8,["onClick"])]),_:1},8,["content"]),createVNode$1(f,{placement:"top",content:o.locale["view-source"]},{default:withCtx(()=>[createVNode$1($,{class:"demoblock-op-btn",onClick:o.onControlClick},null,8,["onClick"])]),_:1},8,["content"])]),createVNode$1(x,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_3$16,[createBaseVNode("div",_hoisted_4$n,[renderSlot(a.$slots,"highlight",{},void 0,!0)])],512),[[vShow,o.isExpanded]])]),_:3}),createVNode$1(Transition,{name:"demoblock-fade-in-linear"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref:"control",class:"demoblock-control",onClick:s[0]||(s[0]=(...j)=>o.onControlClick&&o.onControlClick(...j))},[createVNode$1(N,{class:"control-icon"}),createBaseVNode("span",_hoisted_5$8,toDisplayString(o.locale["hide-source"]),1)],512),[[vShow,o.isExpanded]])]),_:1})],2)]),_:3})}const Demo=_export_sfc$1(_sfc_main$3j,[["render",_sfc_render$32],["__scopeId","data-v-db42504e"]]),_sfc_main$3i=defineComponent({name:"DemoBlock",props:{customClass:String}}),_hoisted_1$1C={class:"demoblock-view"};function _sfc_render$31(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(["demoblock",[a.customClass?a.customClass:""]])},[createBaseVNode("div",_hoisted_1$1C,[renderSlot(a.$slots,"default",{},void 0,!0)])],2)}const DemoBlock=_export_sfc$1(_sfc_main$3i,[["render",_sfc_render$31],["__scopeId","data-v-3a52b874"]]);var defaultInstanceSettings={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},defaultTweenSettings={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},validTransforms=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],cache={CSS:{},springs:{}};function minMax(a,s,l){return Math.min(Math.max(a,s),l)}function stringContains(a,s){return a.indexOf(s)>-1}function applyArguments(a,s){return a.apply(null,s)}var is={arr:function(a){return Array.isArray(a)},obj:function(a){return stringContains(Object.prototype.toString.call(a),"Object")},pth:function(a){return is.obj(a)&&a.hasOwnProperty("totalLength")},svg:function(a){return a instanceof SVGElement},inp:function(a){return a instanceof HTMLInputElement},dom:function(a){return a.nodeType||is.svg(a)},str:function(a){return typeof a=="string"},fnc:function(a){return typeof a=="function"},und:function(a){return typeof a>"u"},nil:function(a){return is.und(a)||a===null},hex:function(a){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)},rgb:function(a){return/^rgb/.test(a)},hsl:function(a){return/^hsl/.test(a)},col:function(a){return is.hex(a)||is.rgb(a)||is.hsl(a)},key:function(a){return!defaultInstanceSettings.hasOwnProperty(a)&&!defaultTweenSettings.hasOwnProperty(a)&&a!=="targets"&&a!=="keyframes"}};function parseEasingParameters(a){var s=/\(([^)]+)\)/.exec(a);return s?s[1].split(",").map(function(l){return parseFloat(l)}):[]}function spring(a,s){var l=parseEasingParameters(a),o=minMax(is.und(l[0])?1:l[0],.1,100),c=minMax(is.und(l[1])?100:l[1],.1,100),u=minMax(is.und(l[2])?10:l[2],.1,100),d=minMax(is.und(l[3])?0:l[3],.1,100),f=Math.sqrt(c/o),g=u/(2*Math.sqrt(c*o)),y=g<1?f*Math.sqrt(1-g*g):0,$=1,x=g<1?(g*f+-d)/y:-d+f;function N(j){var ne=s?s*j/1e3:j;return g<1?ne=Math.exp(-ne*g*f)*($*Math.cos(y*ne)+x*Math.sin(y*ne)):ne=($+x*ne)*Math.exp(-ne*f),j===0||j===1?j:1-ne}function R(){var j=cache.springs[a];if(j)return j;for(var ne=1/6,se=0,ce=0;;)if(se+=ne,N(se)===1){if(ce++,ce>=16)break}else ce=0;var fe=se*ne*1e3;return cache.springs[a]=fe,fe}return s?N:R}function steps(a){return a===void 0&&(a=10),function(s){return Math.ceil(minMax(s,1e-6,1)*a)*(1/a)}}var bezier=function(){var a=11,s=1/(a-1);function l($,x){return 1-3*x+3*$}function o($,x){return 3*x-6*$}function c($){return 3*$}function u($,x,N){return((l(x,N)*$+o(x,N))*$+c(x))*$}function d($,x,N){return 3*l(x,N)*$*$+2*o(x,N)*$+c(x)}function f($,x,N,R,j){var ne,se,ce=0;do se=x+(N-x)/2,ne=u(se,R,j)-$,ne>0?N=se:x=se;while(Math.abs(ne)>1e-7&&++ce<10);return se}function g($,x,N,R){for(var j=0;j<4;++j){var ne=d(x,N,R);if(ne===0)return x;var se=u(x,N,R)-$;x-=se/ne}return x}function y($,x,N,R){if(!(0<=$&&$<=1&&0<=N&&N<=1))return;var j=new Float32Array(a);if($!==x||N!==R)for(var ne=0;ne<a;++ne)j[ne]=u(ne*s,$,N);function se(ce){for(var fe=0,ea=1,ta=a-1;ea!==ta&&j[ea]<=ce;++ea)fe+=s;--ea;var na=(ce-j[ea])/(j[ea+1]-j[ea]),aa=fe+na*s,ia=d(aa,$,N);return ia>=.001?g(ce,aa,$,N):ia===0?aa:f(ce,fe,fe+s,$,N)}return function(ce){return $===x&&N===R||ce===0||ce===1?ce:u(se(ce),x,R)}}return y}(),penner=function(){var a={linear:function(){return function(o){return o}}},s={Sine:function(){return function(o){return 1-Math.cos(o*Math.PI/2)}},Expo:function(){return function(o){return o?Math.pow(2,10*o-10):0}},Circ:function(){return function(o){return 1-Math.sqrt(1-o*o)}},Back:function(){return function(o){return o*o*(3*o-2)}},Bounce:function(){return function(o){for(var c,u=4;o<((c=Math.pow(2,--u))-1)/11;);return 1/Math.pow(4,3-u)-7.5625*Math.pow((c*3-2)/22-o,2)}},Elastic:function(o,c){o===void 0&&(o=1),c===void 0&&(c=.5);var u=minMax(o,1,10),d=minMax(c,.1,2);return function(f){return f===0||f===1?f:-u*Math.pow(2,10*(f-1))*Math.sin((f-1-d/(Math.PI*2)*Math.asin(1/u))*(Math.PI*2)/d)}}},l=["Quad","Cubic","Quart","Quint"];return l.forEach(function(o,c){s[o]=function(){return function(u){return Math.pow(u,c+2)}}}),Object.keys(s).forEach(function(o){var c=s[o];a["easeIn"+o]=c,a["easeOut"+o]=function(u,d){return function(f){return 1-c(u,d)(1-f)}},a["easeInOut"+o]=function(u,d){return function(f){return f<.5?c(u,d)(f*2)/2:1-c(u,d)(f*-2+2)/2}},a["easeOutIn"+o]=function(u,d){return function(f){return f<.5?(1-c(u,d)(1-f*2))/2:(c(u,d)(f*2-1)+1)/2}}}),a}();function parseEasings(a,s){if(is.fnc(a))return a;var l=a.split("(")[0],o=penner[l],c=parseEasingParameters(a);switch(l){case"spring":return spring(a,s);case"cubicBezier":return applyArguments(bezier,c);case"steps":return applyArguments(steps,c);default:return applyArguments(o,c)}}function selectString(a){try{var s=document.querySelectorAll(a);return s}catch{return}}function filterArray(a,s){for(var l=a.length,o=arguments.length>=2?arguments[1]:void 0,c=[],u=0;u<l;u++)if(u in a){var d=a[u];s.call(o,d,u,a)&&c.push(d)}return c}function flattenArray(a){return a.reduce(function(s,l){return s.concat(is.arr(l)?flattenArray(l):l)},[])}function toArray$1(a){return is.arr(a)?a:(is.str(a)&&(a=selectString(a)||a),a instanceof NodeList||a instanceof HTMLCollection?[].slice.call(a):[a])}function arrayContains(a,s){return a.some(function(l){return l===s})}function cloneObject(a){var s={};for(var l in a)s[l]=a[l];return s}function replaceObjectProps(a,s){var l=cloneObject(a);for(var o in a)l[o]=s.hasOwnProperty(o)?s[o]:a[o];return l}function mergeObjects(a,s){var l=cloneObject(a);for(var o in s)l[o]=is.und(a[o])?s[o]:a[o];return l}function rgbToRgba(a){var s=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(a);return s?"rgba("+s[1]+",1)":a}function hexToRgba(a){var s=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,l=a.replace(s,function(f,g,y,$){return g+g+y+y+$+$}),o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(l),c=parseInt(o[1],16),u=parseInt(o[2],16),d=parseInt(o[3],16);return"rgba("+c+","+u+","+d+",1)"}function hslToRgba(a){var s=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a),l=parseInt(s[1],10)/360,o=parseInt(s[2],10)/100,c=parseInt(s[3],10)/100,u=s[4]||1;function d(N,R,j){return j<0&&(j+=1),j>1&&(j-=1),j<1/6?N+(R-N)*6*j:j<1/2?R:j<2/3?N+(R-N)*(2/3-j)*6:N}var f,g,y;if(o==0)f=g=y=c;else{var $=c<.5?c*(1+o):c+o-c*o,x=2*c-$;f=d(x,$,l+1/3),g=d(x,$,l),y=d(x,$,l-1/3)}return"rgba("+f*255+","+g*255+","+y*255+","+u+")"}function colorToRgb(a){if(is.rgb(a))return rgbToRgba(a);if(is.hex(a))return hexToRgba(a);if(is.hsl(a))return hslToRgba(a)}function getUnit(a){var s=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a);if(s)return s[1]}function getTransformUnit(a){if(stringContains(a,"translate")||a==="perspective")return"px";if(stringContains(a,"rotate")||stringContains(a,"skew"))return"deg"}function getFunctionValue(a,s){return is.fnc(a)?a(s.target,s.id,s.total):a}function getAttribute$1(a,s){return a.getAttribute(s)}function convertPxToUnit(a,s,l){var o=getUnit(s);if(arrayContains([l,"deg","rad","turn"],o))return s;var c=cache.CSS[s+l];if(!is.und(c))return c;var u=100,d=document.createElement(a.tagName),f=a.parentNode&&a.parentNode!==document?a.parentNode:document.body;f.appendChild(d),d.style.position="absolute",d.style.width=u+l;var g=u/d.offsetWidth;f.removeChild(d);var y=g*parseFloat(s);return cache.CSS[s+l]=y,y}function getCSSValue(a,s,l){if(s in a.style){var o=s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),c=a.style[s]||getComputedStyle(a).getPropertyValue(o)||"0";return l?convertPxToUnit(a,c,l):c}}function getAnimationType(a,s){if(is.dom(a)&&!is.inp(a)&&(!is.nil(getAttribute$1(a,s))||is.svg(a)&&a[s]))return"attribute";if(is.dom(a)&&arrayContains(validTransforms,s))return"transform";if(is.dom(a)&&s!=="transform"&&getCSSValue(a,s))return"css";if(a[s]!=null)return"object"}function getElementTransforms(a){if(is.dom(a)){for(var s=a.style.transform||"",l=/(\w+)\(([^)]*)\)/g,o=new Map,c;c=l.exec(s);)o.set(c[1],c[2]);return o}}function getTransformValue(a,s,l,o){var c=stringContains(s,"scale")?1:0+getTransformUnit(s),u=getElementTransforms(a).get(s)||c;return l&&(l.transforms.list.set(s,u),l.transforms.last=s),o?convertPxToUnit(a,u,o):u}function getOriginalTargetValue(a,s,l,o){switch(getAnimationType(a,s)){case"transform":return getTransformValue(a,s,o,l);case"css":return getCSSValue(a,s,l);case"attribute":return getAttribute$1(a,s);default:return a[s]||0}}function getRelativeValue(a,s){var l=/^(\*=|\+=|-=)/.exec(a);if(!l)return a;var o=getUnit(a)||0,c=parseFloat(s),u=parseFloat(a.replace(l[0],""));switch(l[0][0]){case"+":return c+u+o;case"-":return c-u+o;case"*":return c*u+o}}function validateValue(a,s){if(is.col(a))return colorToRgb(a);if(/\s/g.test(a))return a;var l=getUnit(a),o=l?a.substr(0,a.length-l.length):a;return s?o+s:o}function getDistance(a,s){return Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2))}function getCircleLength(a){return Math.PI*2*getAttribute$1(a,"r")}function getRectLength(a){return getAttribute$1(a,"width")*2+getAttribute$1(a,"height")*2}function getLineLength(a){return getDistance({x:getAttribute$1(a,"x1"),y:getAttribute$1(a,"y1")},{x:getAttribute$1(a,"x2"),y:getAttribute$1(a,"y2")})}function getPolylineLength(a){for(var s=a.points,l=0,o,c=0;c<s.numberOfItems;c++){var u=s.getItem(c);c>0&&(l+=getDistance(o,u)),o=u}return l}function getPolygonLength(a){var s=a.points;return getPolylineLength(a)+getDistance(s.getItem(s.numberOfItems-1),s.getItem(0))}function getTotalLength(a){if(a.getTotalLength)return a.getTotalLength();switch(a.tagName.toLowerCase()){case"circle":return getCircleLength(a);case"rect":return getRectLength(a);case"line":return getLineLength(a);case"polyline":return getPolylineLength(a);case"polygon":return getPolygonLength(a)}}function setDashoffset(a){var s=getTotalLength(a);return a.setAttribute("stroke-dasharray",s),s}function getParentSvgEl(a){for(var s=a.parentNode;is.svg(s)&&is.svg(s.parentNode);)s=s.parentNode;return s}function getParentSvg(a,s){var l=s||{},o=l.el||getParentSvgEl(a),c=o.getBoundingClientRect(),u=getAttribute$1(o,"viewBox"),d=c.width,f=c.height,g=l.viewBox||(u?u.split(" "):[0,0,d,f]);return{el:o,viewBox:g,x:g[0]/1,y:g[1]/1,w:d,h:f,vW:g[2],vH:g[3]}}function getPath$1(a,s){var l=is.str(a)?selectString(a)[0]:a,o=s||100;return function(c){return{property:c,el:l,svg:getParentSvg(l),totalLength:getTotalLength(l)*(o/100)}}}function getPathProgress(a,s,l){function o($){$===void 0&&($=0);var x=s+$>=1?s+$:0;return a.el.getPointAtLength(x)}var c=getParentSvg(a.el,a.svg),u=o(),d=o(-1),f=o(1),g=l?1:c.w/c.vW,y=l?1:c.h/c.vH;switch(a.property){case"x":return(u.x-c.x)*g;case"y":return(u.y-c.y)*y;case"angle":return Math.atan2(f.y-d.y,f.x-d.x)*180/Math.PI}}function decomposeValue(a,s){var l=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,o=validateValue(is.pth(a)?a.totalLength:a,s)+"";return{original:o,numbers:o.match(l)?o.match(l).map(Number):[0],strings:is.str(a)||s?o.split(l):[]}}function parseTargets(a){var s=a?flattenArray(is.arr(a)?a.map(toArray$1):toArray$1(a)):[];return filterArray(s,function(l,o,c){return c.indexOf(l)===o})}function getAnimatables(a){var s=parseTargets(a);return s.map(function(l,o){return{target:l,id:o,total:s.length,transforms:{list:getElementTransforms(l)}}})}function normalizePropertyTweens(a,s){var l=cloneObject(s);if(/^spring/.test(l.easing)&&(l.duration=spring(l.easing)),is.arr(a)){var o=a.length,c=o===2&&!is.obj(a[0]);c?a={value:a}:is.fnc(s.duration)||(l.duration=s.duration/o)}var u=is.arr(a)?a:[a];return u.map(function(d,f){var g=is.obj(d)&&!is.pth(d)?d:{value:d};return is.und(g.delay)&&(g.delay=f?0:s.delay),is.und(g.endDelay)&&(g.endDelay=f===u.length-1?s.endDelay:0),g}).map(function(d){return mergeObjects(d,l)})}function flattenKeyframes(a){for(var s=filterArray(flattenArray(a.map(function(u){return Object.keys(u)})),function(u){return is.key(u)}).reduce(function(u,d){return u.indexOf(d)<0&&u.push(d),u},[]),l={},o=function(u){var d=s[u];l[d]=a.map(function(f){var g={};for(var y in f)is.key(y)?y==d&&(g.value=f[y]):g[y]=f[y];return g})},c=0;c<s.length;c++)o(c);return l}function getProperties(a,s){var l=[],o=s.keyframes;o&&(s=mergeObjects(flattenKeyframes(o),s));for(var c in s)is.key(c)&&l.push({name:c,tweens:normalizePropertyTweens(s[c],a)});return l}function normalizeTweenValues(a,s){var l={};for(var o in a){var c=getFunctionValue(a[o],s);is.arr(c)&&(c=c.map(function(u){return getFunctionValue(u,s)}),c.length===1&&(c=c[0])),l[o]=c}return l.duration=parseFloat(l.duration),l.delay=parseFloat(l.delay),l}function normalizeTweens(a,s){var l;return a.tweens.map(function(o){var c=normalizeTweenValues(o,s),u=c.value,d=is.arr(u)?u[1]:u,f=getUnit(d),g=getOriginalTargetValue(s.target,a.name,f,s),y=l?l.to.original:g,$=is.arr(u)?u[0]:y,x=getUnit($)||getUnit(g),N=f||x;return is.und(d)&&(d=y),c.from=decomposeValue($,N),c.to=decomposeValue(getRelativeValue(d,$),N),c.start=l?l.end:0,c.end=c.start+c.delay+c.duration+c.endDelay,c.easing=parseEasings(c.easing,c.duration),c.isPath=is.pth(u),c.isPathTargetInsideSVG=c.isPath&&is.svg(s.target),c.isColor=is.col(c.from.original),c.isColor&&(c.round=1),l=c,c})}var setProgressValue={css:function(a,s,l){return a.style[s]=l},attribute:function(a,s,l){return a.setAttribute(s,l)},object:function(a,s,l){return a[s]=l},transform:function(a,s,l,o,c){if(o.list.set(s,l),s===o.last||c){var u="";o.list.forEach(function(d,f){u+=f+"("+d+") "}),a.style.transform=u}}};function setTargetsValue(a,s){var l=getAnimatables(a);l.forEach(function(o){for(var c in s){var u=getFunctionValue(s[c],o),d=o.target,f=getUnit(u),g=getOriginalTargetValue(d,c,f,o),y=f||getUnit(g),$=getRelativeValue(validateValue(u,y),g),x=getAnimationType(d,c);setProgressValue[x](d,c,$,o.transforms,!0)}})}function createAnimation(a,s){var l=getAnimationType(a.target,s.name);if(l){var o=normalizeTweens(s,a),c=o[o.length-1];return{type:l,property:s.name,animatable:a,tweens:o,duration:c.end,delay:o[0].delay,endDelay:c.endDelay}}}function getAnimations(a,s){return filterArray(flattenArray(a.map(function(l){return s.map(function(o){return createAnimation(l,o)})})),function(l){return!is.und(l)})}function getInstanceTimings(a,s){var l=a.length,o=function(u){return u.timelineOffset?u.timelineOffset:0},c={};return c.duration=l?Math.max.apply(Math,a.map(function(u){return o(u)+u.duration})):s.duration,c.delay=l?Math.min.apply(Math,a.map(function(u){return o(u)+u.delay})):s.delay,c.endDelay=l?c.duration-Math.max.apply(Math,a.map(function(u){return o(u)+u.duration-u.endDelay})):s.endDelay,c}var instanceID=0;function createNewInstance(a){var s=replaceObjectProps(defaultInstanceSettings,a),l=replaceObjectProps(defaultTweenSettings,a),o=getProperties(l,a),c=getAnimatables(a.targets),u=getAnimations(c,o),d=getInstanceTimings(u,l),f=instanceID;return instanceID++,mergeObjects(s,{id:f,children:[],animatables:c,animations:u,duration:d.duration,delay:d.delay,endDelay:d.endDelay})}var activeInstances=[],engine=function(){var a;function s(){!a&&(!isDocumentHidden()||!anime.suspendWhenDocumentHidden)&&activeInstances.length>0&&(a=requestAnimationFrame(l))}function l(c){for(var u=activeInstances.length,d=0;d<u;){var f=activeInstances[d];f.paused?(activeInstances.splice(d,1),u--):(f.tick(c),d++)}a=d>0?requestAnimationFrame(l):void 0}function o(){anime.suspendWhenDocumentHidden&&(isDocumentHidden()?a=cancelAnimationFrame(a):(activeInstances.forEach(function(c){return c._onDocumentVisibility()}),engine()))}return typeof document<"u"&&document.addEventListener("visibilitychange",o),s}();function isDocumentHidden(){return!!document&&document.hidden}function anime(a){a===void 0&&(a={});var s=0,l=0,o=0,c,u=0,d=null;function f(fe){var ea=window.Promise&&new Promise(function(ta){return d=ta});return fe.finished=ea,ea}var g=createNewInstance(a);f(g);function y(){var fe=g.direction;fe!=="alternate"&&(g.direction=fe!=="normal"?"normal":"reverse"),g.reversed=!g.reversed,c.forEach(function(ea){return ea.reversed=g.reversed})}function $(fe){return g.reversed?g.duration-fe:fe}function x(){s=0,l=$(g.currentTime)*(1/anime.speed)}function N(fe,ea){ea&&ea.seek(fe-ea.timelineOffset)}function R(fe){if(g.reversePlayback)for(var ta=u;ta--;)N(fe,c[ta]);else for(var ea=0;ea<u;ea++)N(fe,c[ea])}function j(fe){for(var ea=0,ta=g.animations,na=ta.length;ea<na;){var aa=ta[ea],ia=aa.animatable,sa=aa.tweens,ra=sa.length-1,la=sa[ra];ra&&(la=filterArray(sa,function($a){return fe<$a.end})[0]||la);for(var oa=minMax(fe-la.start-la.delay,0,la.duration)/la.duration,ca=isNaN(oa)?1:la.easing(oa),pa=la.to.strings,ua=la.round,da=[],ha=la.to.numbers.length,ga=void 0,fa=0;fa<ha;fa++){var ma=void 0,va=la.to.numbers[fa],ka=la.from.numbers[fa]||0;la.isPath?ma=getPathProgress(la.value,ca*va,la.isPathTargetInsideSVG):ma=ka+ca*(va-ka),ua&&(la.isColor&&fa>2||(ma=Math.round(ma*ua)/ua)),da.push(ma)}var ya=pa.length;if(!ya)ga=da[0];else{ga=pa[0];for(var ba=0;ba<ya;ba++){pa[ba];var Ea=pa[ba+1],Ca=da[ba];isNaN(Ca)||(Ea?ga+=Ca+Ea:ga+=Ca+" ")}}setProgressValue[aa.type](ia.target,aa.property,ga,ia.transforms),aa.currentValue=ga,ea++}}function ne(fe){g[fe]&&!g.passThrough&&g[fe](g)}function se(){g.remaining&&g.remaining!==!0&&g.remaining--}function ce(fe){var ea=g.duration,ta=g.delay,na=ea-g.endDelay,aa=$(fe);g.progress=minMax(aa/ea*100,0,100),g.reversePlayback=aa<g.currentTime,c&&R(aa),!g.began&&g.currentTime>0&&(g.began=!0,ne("begin")),!g.loopBegan&&g.currentTime>0&&(g.loopBegan=!0,ne("loopBegin")),aa<=ta&&g.currentTime!==0&&j(0),(aa>=na&&g.currentTime!==ea||!ea)&&j(ea),aa>ta&&aa<na?(g.changeBegan||(g.changeBegan=!0,g.changeCompleted=!1,ne("changeBegin")),ne("change"),j(aa)):g.changeBegan&&(g.changeCompleted=!0,g.changeBegan=!1,ne("changeComplete")),g.currentTime=minMax(aa,0,ea),g.began&&ne("update"),fe>=ea&&(l=0,se(),g.remaining?(s=o,ne("loopComplete"),g.loopBegan=!1,g.direction==="alternate"&&y()):(g.paused=!0,g.completed||(g.completed=!0,ne("loopComplete"),ne("complete"),!g.passThrough&&"Promise"in window&&(d(),f(g)))))}return g.reset=function(){var fe=g.direction;g.passThrough=!1,g.currentTime=0,g.progress=0,g.paused=!0,g.began=!1,g.loopBegan=!1,g.changeBegan=!1,g.completed=!1,g.changeCompleted=!1,g.reversePlayback=!1,g.reversed=fe==="reverse",g.remaining=g.loop,c=g.children,u=c.length;for(var ea=u;ea--;)g.children[ea].reset();(g.reversed&&g.loop!==!0||fe==="alternate"&&g.loop===1)&&g.remaining++,j(g.reversed?g.duration:0)},g._onDocumentVisibility=x,g.set=function(fe,ea){return setTargetsValue(fe,ea),g},g.tick=function(fe){o=fe,s||(s=o),ce((o+(l-s))*anime.speed)},g.seek=function(fe){ce($(fe))},g.pause=function(){g.paused=!0,x()},g.play=function(){g.paused&&(g.completed&&g.reset(),g.paused=!1,activeInstances.push(g),x(),engine())},g.reverse=function(){y(),g.completed=!g.reversed,x()},g.restart=function(){g.reset(),g.play()},g.remove=function(fe){var ea=parseTargets(fe);removeTargetsFromInstance(ea,g)},g.reset(),g.autoplay&&g.play(),g}function removeTargetsFromAnimations(a,s){for(var l=s.length;l--;)arrayContains(a,s[l].animatable.target)&&s.splice(l,1)}function removeTargetsFromInstance(a,s){var l=s.animations,o=s.children;removeTargetsFromAnimations(a,l);for(var c=o.length;c--;){var u=o[c],d=u.animations;removeTargetsFromAnimations(a,d),!d.length&&!u.children.length&&o.splice(c,1)}!l.length&&!o.length&&s.pause()}function removeTargetsFromActiveInstances(a){for(var s=parseTargets(a),l=activeInstances.length;l--;){var o=activeInstances[l];removeTargetsFromInstance(s,o)}}function stagger(a,s){s===void 0&&(s={});var l=s.direction||"normal",o=s.easing?parseEasings(s.easing):null,c=s.grid,u=s.axis,d=s.from||0,f=d==="first",g=d==="center",y=d==="last",$=is.arr(a),x=parseFloat($?a[0]:a),N=$?parseFloat(a[1]):0,R=getUnit($?a[1]:a)||0,j=s.start||0+($?x:0),ne=[],se=0;return function(ce,fe,ea){if(f&&(d=0),g&&(d=(ea-1)/2),y&&(d=ea-1),!ne.length){for(var ta=0;ta<ea;ta++){if(!c)ne.push(Math.abs(d-ta));else{var na=g?(c[0]-1)/2:d%c[0],aa=g?(c[1]-1)/2:Math.floor(d/c[0]),ia=ta%c[0],sa=Math.floor(ta/c[0]),ra=na-ia,la=aa-sa,oa=Math.sqrt(ra*ra+la*la);u==="x"&&(oa=-ra),u==="y"&&(oa=-la),ne.push(oa)}se=Math.max.apply(Math,ne)}o&&(ne=ne.map(function(pa){return o(pa/se)*se})),l==="reverse"&&(ne=ne.map(function(pa){return u?pa<0?pa*-1:-pa:Math.abs(se-pa)}))}var ca=$?(N-x)/se:x;return j+ca*(Math.round(ne[fe]*100)/100)+R}}function timeline(a){a===void 0&&(a={});var s=anime(a);return s.duration=0,s.add=function(l,o){var c=activeInstances.indexOf(s),u=s.children;c>-1&&activeInstances.splice(c,1);function d(N){N.passThrough=!0}for(var f=0;f<u.length;f++)d(u[f]);var g=mergeObjects(l,replaceObjectProps(defaultTweenSettings,a));g.targets=g.targets||a.targets;var y=s.duration;g.autoplay=!1,g.direction=s.direction,g.timelineOffset=is.und(o)?y:getRelativeValue(o,y),d(s),s.seek(g.timelineOffset);var $=anime(g);d($),u.push($);var x=getInstanceTimings(u,a);return s.delay=x.delay,s.endDelay=x.endDelay,s.duration=x.duration,s.seek(0),s.reset(),s.autoplay&&s.play(),s},s}anime.version="3.2.1";anime.speed=1;anime.suspendWhenDocumentHidden=!0;anime.running=activeInstances;anime.remove=removeTargetsFromActiveInstances;anime.get=getOriginalTargetValue;anime.set=setTargetsValue;anime.convertPx=convertPxToUnit;anime.path=getPath$1;anime.setDashoffset=setDashoffset;anime.stagger=stagger;anime.timeline=timeline;anime.easing=parseEasings;anime.penner=penner;anime.random=function(a,s){return Math.floor(Math.random()*(s-a+1))+a};const getTargets=a=>a instanceof NodeList||a instanceof HTMLCollection||Array.isArray(a)?a:a instanceof HTMLElement?[a]:typeof a=="string"?document.querySelectorAll(a):null,deconstructText=(a,s,l)=>{const o=a.textContent.trim(),c=o.length,u=[];a.textContent="";for(let d=0;d<c;d++){const f=document.createElement(s);l&&l.length&&f.classList.add(l),f.textContent=o[d]===" "?" ":o[d],a.before(f),u.push(f)}return u},deconstructObjects=(a,s,l,o,c,u,d,f)=>{if(Array.isArray(s.letterize_id)||(s.letterize_id=[]),!s.letterize_id.includes(f)){s.letterize_id.push(f);const g=[...s.childNodes],y=g.length;for(let $=0;$<y;$++){let x;switch(g[$].nodeType){case 1:Array.prototype.indexOf.call(a,g[$])===-1&&deconstructObjects(a,g[$],l,o,c,u,d,f);break;case 3:x=deconstructText(g[$],l,o),u.push(...x),c[d].push(...x);break}}}};class Letterize{constructor(s){const l=getTargets(s.targets);if(!l||!l.length){console.error(`Letterize: targets '${l}' not found or not specified`);return}const o=l.length;Letterize.numInstances=(Letterize.numInstances||0)+1;const c=s.wrapper||"span",u=s.className,d=Letterize.numInstances,f=[],g=[];for(let y=0;y<o;y++)f[y]=[],deconstructObjects(l,l[y],c,u,f,g,y,d);this._wrapper=c,this._targets=l,this._list=f,this._listAll=g,this._className=u}get listAll(){return this._listAll}get list(){return this._list}get targets(){return this._targets}get className(){return this._className}get wrapper(){return this._wrapper}deletterize(){const s=this.listAll.length;for(let l=0;l<s;l++)this.listAll[l].before(...Array.from(this.listAll[l].childNodes)),this.listAll[l].remove();this._wrapper=void 0,this._targets=void 0,this._list=void 0,this._listAll=void 0,this._className=void 0,this.deletterize=void 0}}const _hoisted_1$1B={id:"container"},_hoisted_2$1c={class:"animation-wrapper"},_hoisted_3$15={class:"sphere-animation"},_hoisted_4$m={class:"sphere",viewBox:"0 0 440 440",stroke:"rgba(80,80,80,.35)"},_hoisted_5$7={id:"sphereGradient",x1:"5%",x2:"5%",y1:"0%",y2:"15%"},_hoisted_6$4=["stop-color"],_hoisted_7$2=["stop-color"],_hoisted_8=["stop-color"],_sfc_main$3h=defineComponent({__name:"Sphere",setup(a){const{isDark:s}=useData$1(),l=ref(["#373734","#242423","#0D0D0C"]),o=ref("");watchEffect(()=>{s.value?(l.value=["#373734","#242423","#0D0D0C"],o.value="white"):(l.value=["#FFFFFF","#F0F0F0","#E0E0E0"],o.value="#7930e7")});const c=(y,$)=>{var x=null;function N(){x&&clearTimeout(x),anime.set(y,{scale:1});var R=0,j=y.parentNode,ne=y.offsetWidth-R,se=j.offsetWidth,ce=se/ne;x=setTimeout(()=>anime.set(y,{scale:ce}),10)}N(),window.addEventListener("resize",N)},u=()=>{let y=document.querySelector(".sphere-animation"),$=y.querySelectorAll(".sphere path"),x=$.length,N=[];c(y);let R=anime({begin:function(){for(var se=0;se<x;se++)N.push(anime({targets:$[se],stroke:{value:["rgba(255,75,75,1)","rgba(80,80,80,.35)"],duration:500},translateX:[2,-4],translateY:[2,-4],easing:"easeOutQuad",autoplay:!1}))},update:function(se){N.forEach(function(ce,fe){let ea=(1-Math.sin(fe*.35+.0022*se.currentTime))/2;ce.seek(ce.duration*ea)})},duration:1/0,autoplay:!1}),j=anime.timeline({autoplay:!1}).add({targets:$,strokeDashoffset:{value:[anime.setDashoffset,0],duration:3900,easing:"easeInOutCirc",delay:anime.stagger(190,{direction:"reverse"})},duration:2e3,delay:anime.stagger(60,{direction:"reverse"}),easing:"linear"},0),ne=anime({targets:"#sphereGradient",x1:"25%",x2:"25%",y1:"0%",y2:"75%",duration:3e4,easing:"easeOutQuint",autoplay:!1});return[R,j,ne]},d=ref(),f=()=>{d.value||(d.value=u()),d.value.forEach(y=>{y.play()})},g=()=>{d.value&&d.value.forEach(y=>{y.remove()}),d.value=[]};return onMounted(()=>{f()}),onUnmounted(()=>{g()}),(y,$)=>(openBlock(),createElementBlock("div",_hoisted_1$1B,[createBaseVNode("div",_hoisted_2$1c,[createBaseVNode("div",_hoisted_3$15,[(openBlock(),createElementBlock("svg",_hoisted_4$m,[createBaseVNode("defs",null,[createBaseVNode("linearGradient",_hoisted_5$7,[createBaseVNode("stop",{"stop-color":l.value[0],offset:"0%"},null,8,_hoisted_6$4),createBaseVNode("stop",{"stop-color":l.value[1],offset:"50%"},null,8,_hoisted_7$2),createBaseVNode("stop",{"stop-color":l.value[2],offset:"100%"},null,8,_hoisted_8)])]),$[0]||($[0]=createStaticVNode('<path d="M361.604 361.238c-24.407 24.408-51.119 37.27-59.662 28.727-8.542-8.543 4.319-35.255 28.726-59.663 24.408-24.407 51.12-37.269 59.663-28.726 8.542 8.543-4.319 35.255-28.727 59.662z" data-v-057e15d7></path><path d="M360.72 360.354c-35.879 35.88-75.254 54.677-87.946 41.985-12.692-12.692 6.105-52.067 41.985-87.947 35.879-35.879 75.254-54.676 87.946-41.984 12.692 12.692-6.105 52.067-41.984 87.946z" data-v-057e15d7></path><path d="M357.185 356.819c-44.91 44.91-94.376 68.258-110.485 52.149-16.11-16.11 7.238-65.575 52.149-110.485 44.91-44.91 94.376-68.259 110.485-52.15 16.11 16.11-7.239 65.576-52.149 110.486z" data-v-057e15d7></path><path d="M350.998 350.632c-53.21 53.209-111.579 81.107-130.373 62.313-18.794-18.793 9.105-77.163 62.314-130.372 53.209-53.21 111.579-81.108 130.373-62.314 18.794 18.794-9.105 77.164-62.314 130.373z" data-v-057e15d7></path><path d="M343.043 342.677c-59.8 59.799-125.292 91.26-146.283 70.268-20.99-20.99 10.47-86.483 70.269-146.282 59.799-59.8 125.292-91.26 146.283-70.269 20.99 20.99-10.47 86.484-70.27 146.283z" data-v-057e15d7></path><path d="M334.646 334.28c-65.169 65.169-136.697 99.3-159.762 76.235-23.065-23.066 11.066-94.593 76.235-159.762s136.697-99.3 159.762-76.235c23.065 23.065-11.066 94.593-76.235 159.762z" data-v-057e15d7></path><path d="M324.923 324.557c-69.806 69.806-146.38 106.411-171.031 81.76-24.652-24.652 11.953-101.226 81.759-171.032 69.806-69.806 146.38-106.411 171.031-81.76 24.652 24.653-11.953 101.226-81.759 171.032z" data-v-057e15d7></path><path d="M312.99 312.625c-73.222 73.223-153.555 111.609-179.428 85.736-25.872-25.872 12.514-106.205 85.737-179.428s153.556-111.609 179.429-85.737c25.872 25.873-12.514 106.205-85.737 179.429z" data-v-057e15d7></path><path d="M300.175 299.808c-75.909 75.909-159.11 115.778-185.837 89.052-26.726-26.727 13.143-109.929 89.051-185.837 75.908-75.908 159.11-115.778 185.837-89.051 26.726 26.726-13.143 109.928-89.051 185.836z" data-v-057e15d7></path><path d="M284.707 284.34c-77.617 77.617-162.303 118.773-189.152 91.924-26.848-26.848 14.308-111.534 91.924-189.15C265.096 109.496 349.782 68.34 376.63 95.188c26.849 26.849-14.307 111.535-91.923 189.151z" data-v-057e15d7></path><path d="M269.239 267.989c-78.105 78.104-163.187 119.656-190.035 92.807-26.849-26.848 14.703-111.93 92.807-190.035 78.105-78.104 163.187-119.656 190.035-92.807 26.849 26.848-14.703 111.93-92.807 190.035z" data-v-057e15d7></path><path d="M252.887 252.52C175.27 330.138 90.584 371.294 63.736 344.446 36.887 317.596 78.043 232.91 155.66 155.293 233.276 77.677 317.962 36.521 344.81 63.37c26.85 26.848-14.307 111.534-91.923 189.15z" data-v-057e15d7></path><path d="M236.977 236.61C161.069 312.52 77.867 352.389 51.14 325.663c-26.726-26.727 13.143-109.928 89.052-185.837 75.908-75.908 159.11-115.777 185.836-89.05 26.727 26.726-13.143 109.928-89.051 185.836z" data-v-057e15d7></path><path d="M221.067 220.7C147.844 293.925 67.51 332.31 41.639 306.439c-25.873-25.873 12.513-106.206 85.736-179.429C200.6 53.786 280.931 15.4 306.804 41.272c25.872 25.873-12.514 106.206-85.737 179.429z" data-v-057e15d7></path><path d="M205.157 204.79c-69.806 69.807-146.38 106.412-171.031 81.76-24.652-24.652 11.953-101.225 81.759-171.031 69.806-69.807 146.38-106.411 171.031-81.76 24.652 24.652-11.953 101.226-81.759 171.032z" data-v-057e15d7></path><path d="M189.247 188.881c-65.169 65.169-136.696 99.3-159.762 76.235-23.065-23.065 11.066-94.593 76.235-159.762s136.697-99.3 159.762-76.235c23.065 23.065-11.066 94.593-76.235 159.762z" data-v-057e15d7></path><path d="M173.337 172.971c-59.799 59.8-125.292 91.26-146.282 70.269-20.991-20.99 10.47-86.484 70.268-146.283 59.8-59.799 125.292-91.26 146.283-70.269 20.99 20.991-10.47 86.484-70.269 146.283z" data-v-057e15d7></path><path d="M157.427 157.061c-53.209 53.21-111.578 81.108-130.372 62.314-18.794-18.794 9.104-77.164 62.313-130.373 53.21-53.209 111.58-81.108 130.373-62.314 18.794 18.794-9.105 77.164-62.314 130.373z" data-v-057e15d7></path><path d="M141.517 141.151c-44.91 44.91-94.376 68.259-110.485 52.15-16.11-16.11 7.239-65.576 52.15-110.486 44.91-44.91 94.375-68.258 110.485-52.15 16.109 16.11-7.24 65.576-52.15 110.486z" data-v-057e15d7></path><path d="M125.608 125.241c-35.88 35.88-75.255 54.677-87.947 41.985-12.692-12.692 6.105-52.067 41.985-87.947C115.525 43.4 154.9 24.603 167.592 37.295c12.692 12.692-6.105 52.067-41.984 87.946z" data-v-057e15d7></path><path d="M109.698 109.332c-24.408 24.407-51.12 37.268-59.663 28.726-8.542-8.543 4.319-35.255 28.727-59.662 24.407-24.408 51.12-37.27 59.662-28.727 8.543 8.543-4.319 35.255-28.726 59.663z" data-v-057e15d7></path>',21))]))])])]))}}),Sphere=_export_sfc$1(_sfc_main$3h,[["__scopeId","data-v-057e15d7"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(a,s){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(l[c]=o[c])},extendStatics(a,s)};function __extends(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");extendStatics(a,s);function l(){this.constructor=a}a.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}var Browser=function(){function a(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return a}(),Env=function(){function a(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return a}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:typeof navigator>"u"||navigator.userAgent.indexOf("Node.js")===0?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(a,s){var l=s.browser,o=a.match(/Firefox\/([\d.]+)/),c=a.match(/MSIE\s([\d.]+)/)||a.match(/Trident\/.+?rv:(([\d.]+))/),u=a.match(/Edge?\/([\d.]+)/),d=/micromessenger/i.test(a);o&&(l.firefox=!0,l.version=o[1]),c&&(l.ie=!0,l.version=c[1]),u&&(l.edge=!0,l.version=u[1],l.newEdge=+u[1].split(".")[0]>18),d&&(l.weChat=!0),s.svgSupported=typeof SVGRect<"u",s.touchEventsSupported="ontouchstart"in window&&!l.ie&&!l.edge,s.pointerEventsSupported="onpointerdown"in window&&(l.edge||l.ie&&+l.version>=11),s.domSupported=typeof document<"u";var f=document.documentElement.style;s.transform3dSupported=(l.ie&&"transition"in f||l.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in f)&&!("OTransition"in f),s.transformSupported=s.transform3dSupported||l.ie&&+l.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(a){var s={};if(typeof JSON>"u")return s;for(var l=0;l<a.length;l++){var o=String.fromCharCode(l+32),c=(a.charCodeAt(l)-OFFSET)/SCALE;s[o]=c}return s}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var a,s;return function(l,o){if(!a){var c=platformApi.createCanvas();a=c&&c.getContext("2d")}if(a)return s!==o&&(s=a.font=o||DEFAULT_FONT),a.measureText(l);l=l||"",o=o||DEFAULT_FONT;var u=/((?:\d+)?\.?\d*)px/.exec(o),d=u&&+u[1]||DEFAULT_FONT_SIZE,f=0;if(o.indexOf("mono")>=0)f=d*l.length;else for(var g=0;g<l.length;g++){var y=DEFAULT_TEXT_WIDTH_MAP[l[g]];f+=y==null?d:y*d}return{width:f}}}(),loadImage:function(a,s,l){var o=new Image;return o.onload=s,o.onerror=l,o.src=a,o}},BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(a,s){return a["[object "+s+"]"]=!0,a},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(a,s){return a["[object "+s+"Array]"]=!0,a},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=function(){}.constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];typeof console<"u"&&console.error.apply(console,a)}function clone$4(a){if(a==null||typeof a!="object")return a;var s=a,l=objToString.call(a);if(l==="[object Array]"){if(!isPrimitive(a)){s=[];for(var o=0,c=a.length;o<c;o++)s[o]=clone$4(a[o])}}else if(TYPED_ARRAY[l]){if(!isPrimitive(a)){var u=a.constructor;if(u.from)s=u.from(a);else{s=new u(a.length);for(var o=0,c=a.length;o<c;o++)s[o]=a[o]}}}else if(!BUILTIN_OBJECT[l]&&!isPrimitive(a)&&!isDom(a)){s={};for(var d in a)a.hasOwnProperty(d)&&d!==protoKey&&(s[d]=clone$4(a[d]))}return s}function merge(a,s,l){if(!isObject$5(s)||!isObject$5(a))return l?clone$4(s):a;for(var o in s)if(s.hasOwnProperty(o)&&o!==protoKey){var c=a[o],u=s[o];isObject$5(u)&&isObject$5(c)&&!isArray$3(u)&&!isArray$3(c)&&!isDom(u)&&!isDom(c)&&!isBuiltInObject(u)&&!isBuiltInObject(c)&&!isPrimitive(u)&&!isPrimitive(c)?merge(c,u,l):(l||!(o in a))&&(a[o]=clone$4(s[o]))}return a}function mergeAll(a,s){for(var l=a[0],o=1,c=a.length;o<c;o++)l=merge(l,a[o],s);return l}function extend(a,s){if(Object.assign)Object.assign(a,s);else for(var l in s)s.hasOwnProperty(l)&&l!==protoKey&&(a[l]=s[l]);return a}function defaults(a,s,l){for(var o=keys(s),c=0;c<o.length;c++){var u=o[c];(l?s[u]!=null:a[u]==null)&&(a[u]=s[u])}return a}function indexOf(a,s){if(a){if(a.indexOf)return a.indexOf(s);for(var l=0,o=a.length;l<o;l++)if(a[l]===s)return l}return-1}function inherits(a,s){var l=a.prototype;function o(){}o.prototype=s.prototype,a.prototype=new o;for(var c in l)l.hasOwnProperty(c)&&(a.prototype[c]=l[c]);a.prototype.constructor=a,a.superClass=s}function mixin(a,s,l){if(a="prototype"in a?a.prototype:a,s="prototype"in s?s.prototype:s,Object.getOwnPropertyNames)for(var o=Object.getOwnPropertyNames(s),c=0;c<o.length;c++){var u=o[c];u!=="constructor"&&(l?s[u]!=null:a[u]==null)&&(a[u]=s[u])}else defaults(a,s,l)}function isArrayLike(a){return!a||typeof a=="string"?!1:typeof a.length=="number"}function each$f(a,s,l){if(a&&s)if(a.forEach&&a.forEach===nativeForEach)a.forEach(s,l);else if(a.length===+a.length)for(var o=0,c=a.length;o<c;o++)s.call(l,a[o],o,a);else for(var u in a)a.hasOwnProperty(u)&&s.call(l,a[u],u,a)}function map$1(a,s,l){if(!a)return[];if(!s)return slice(a);if(a.map&&a.map===nativeMap)return a.map(s,l);for(var o=[],c=0,u=a.length;c<u;c++)o.push(s.call(l,a[c],c,a));return o}function reduce(a,s,l,o){if(a&&s){for(var c=0,u=a.length;c<u;c++)l=s.call(o,l,a[c],c,a);return l}}function filter(a,s,l){if(!a)return[];if(!s)return slice(a);if(a.filter&&a.filter===nativeFilter)return a.filter(s,l);for(var o=[],c=0,u=a.length;c<u;c++)s.call(l,a[c],c,a)&&o.push(a[c]);return o}function find(a,s,l){if(a&&s){for(var o=0,c=a.length;o<c;o++)if(s.call(l,a[o],o,a))return a[o]}}function keys(a){if(!a)return[];if(Object.keys)return Object.keys(a);var s=[];for(var l in a)a.hasOwnProperty(l)&&s.push(l);return s}function bindPolyfill(a,s){for(var l=[],o=2;o<arguments.length;o++)l[o-2]=arguments[o];return function(){return a.apply(s,l.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$2(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return function(){return a.apply(this,s.concat(nativeSlice.call(arguments)))}}function isArray$3(a){return Array.isArray?Array.isArray(a):objToString.call(a)==="[object Array]"}function isFunction$2(a){return typeof a=="function"}function isString$2(a){return typeof a=="string"}function isStringSafe(a){return objToString.call(a)==="[object String]"}function isNumber$2(a){return typeof a=="number"}function isObject$5(a){var s=typeof a;return s==="function"||!!a&&s==="object"}function isBuiltInObject(a){return!!BUILTIN_OBJECT[objToString.call(a)]}function isTypedArray(a){return!!TYPED_ARRAY[objToString.call(a)]}function isDom(a){return typeof a=="object"&&typeof a.nodeType=="number"&&typeof a.ownerDocument=="object"}function isGradientObject(a){return a.colorStops!=null}function isImagePatternObject(a){return a.image!=null}function isRegExp(a){return objToString.call(a)==="[object RegExp]"}function eqNaN(a){return a!==a}function retrieve(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];for(var l=0,o=a.length;l<o;l++)if(a[l]!=null)return a[l]}function retrieve2(a,s){return a??s}function retrieve3(a,s,l){return a??s??l}function slice(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return nativeSlice.apply(a,s)}function normalizeCssArray$1(a){if(typeof a=="number")return[a,a,a,a];var s=a.length;return s===2?[a[0],a[1],a[0],a[1]]:s===3?[a[0],a[1],a[2],a[1]]:a}function assert(a,s){if(!a)throw new Error(s)}function trim$1(a){return a==null?null:typeof a.trim=="function"?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(a){a[primitiveKey]=!0}function isPrimitive(a){return a[primitiveKey]}var MapPolyfill=function(){function a(){this.data={}}return a.prototype.delete=function(s){var l=this.has(s);return l&&delete this.data[s],l},a.prototype.has=function(s){return this.data.hasOwnProperty(s)},a.prototype.get=function(s){return this.data[s]},a.prototype.set=function(s,l){return this.data[s]=l,this},a.prototype.keys=function(){return keys(this.data)},a.prototype.forEach=function(s){var l=this.data;for(var o in l)l.hasOwnProperty(o)&&s(l[o],o)},a}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function a(s){var l=isArray$3(s);this.data=maybeNativeMap();var o=this;s instanceof a?s.each(c):s&&each$f(s,c);function c(u,d){l?o.set(u,d):o.set(d,u)}}return a.prototype.hasKey=function(s){return this.data.has(s)},a.prototype.get=function(s){return this.data.get(s)},a.prototype.set=function(s,l){return this.data.set(s,l),l},a.prototype.each=function(s,l){this.data.forEach(function(o,c){s.call(l,o,c)})},a.prototype.keys=function(){var s=this.data.keys();return isNativeMapSupported?Array.from(s):s},a.prototype.removeKey=function(s){this.data.delete(s)},a}();function createHashMap(a){return new HashMap(a)}function concatArray(a,s){for(var l=new a.constructor(a.length+s.length),o=0;o<a.length;o++)l[o]=a[o];for(var c=a.length,o=0;o<s.length;o++)l[o+c]=s[o];return l}function createObject(a,s){var l;if(Object.create)l=Object.create(a);else{var o=function(){};o.prototype=a,l=new o}return s&&extend(l,s),l}function disableUserSelect(a){var s=a.style;s.webkitUserSelect="none",s.userSelect="none",s.webkitTapHighlightColor="rgba(0,0,0,0)",s["-webkit-touch-callout"]="none"}function hasOwn(a,s){return a.hasOwnProperty(s)}function noop(){}var RADIAN_TO_DEGREE=180/Math.PI;function create$2(a,s){return a==null&&(a=0),s==null&&(s=0),[a,s]}function copy$1(a,s){return a[0]=s[0],a[1]=s[1],a}function clone$3(a){return[a[0],a[1]]}function set$1(a,s,l){return a[0]=s,a[1]=l,a}function add(a,s,l){return a[0]=s[0]+l[0],a[1]=s[1]+l[1],a}function scaleAndAdd$1(a,s,l,o){return a[0]=s[0]+l[0]*o,a[1]=s[1]+l[1]*o,a}function sub(a,s,l){return a[0]=s[0]-l[0],a[1]=s[1]-l[1],a}function len(a){return Math.sqrt(lenSquare(a))}function lenSquare(a){return a[0]*a[0]+a[1]*a[1]}function scale$2(a,s,l){return a[0]=s[0]*l,a[1]=s[1]*l,a}function normalize$3(a,s){var l=len(s);return l===0?(a[0]=0,a[1]=0):(a[0]=s[0]/l,a[1]=s[1]/l),a}function distance(a,s){return Math.sqrt((a[0]-s[0])*(a[0]-s[0])+(a[1]-s[1])*(a[1]-s[1]))}var dist$1=distance;function distanceSquare(a,s){return(a[0]-s[0])*(a[0]-s[0])+(a[1]-s[1])*(a[1]-s[1])}var distSquare=distanceSquare;function lerp$1(a,s,l,o){return a[0]=s[0]+o*(l[0]-s[0]),a[1]=s[1]+o*(l[1]-s[1]),a}function applyTransform$1(a,s,l){var o=s[0],c=s[1];return a[0]=l[0]*o+l[2]*c+l[4],a[1]=l[1]*o+l[3]*c+l[5],a}function min$1(a,s,l){return a[0]=Math.min(s[0],l[0]),a[1]=Math.min(s[1],l[1]),a}function max$1(a,s,l){return a[0]=Math.max(s[0],l[0]),a[1]=Math.max(s[1],l[1]),a}var Param=function(){function a(s,l){this.target=s,this.topTarget=l&&l.topTarget}return a}(),Draggable=function(){function a(s){this.handler=s,s.on("mousedown",this._dragStart,this),s.on("mousemove",this._drag,this),s.on("mouseup",this._dragEnd,this)}return a.prototype._dragStart=function(s){for(var l=s.target;l&&!l.draggable;)l=l.parent||l.__hostTarget;l&&(this._draggingTarget=l,l.dragging=!0,this._x=s.offsetX,this._y=s.offsetY,this.handler.dispatchToElement(new Param(l,s),"dragstart",s.event))},a.prototype._drag=function(s){var l=this._draggingTarget;if(l){var o=s.offsetX,c=s.offsetY,u=o-this._x,d=c-this._y;this._x=o,this._y=c,l.drift(u,d,s),this.handler.dispatchToElement(new Param(l,s),"drag",s.event);var f=this.handler.findHover(o,c,l).target,g=this._dropTarget;this._dropTarget=f,l!==f&&(g&&f!==g&&this.handler.dispatchToElement(new Param(g,s),"dragleave",s.event),f&&f!==g&&this.handler.dispatchToElement(new Param(f,s),"dragenter",s.event))}},a.prototype._dragEnd=function(s){var l=this._draggingTarget;l&&(l.dragging=!1),this.handler.dispatchToElement(new Param(l,s),"dragend",s.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,s),"drop",s.event),this._draggingTarget=null,this._dropTarget=null},a}(),Eventful=function(){function a(s){s&&(this._$eventProcessor=s)}return a.prototype.on=function(s,l,o,c){this._$handlers||(this._$handlers={});var u=this._$handlers;if(typeof l=="function"&&(c=o,o=l,l=null),!o||!s)return this;var d=this._$eventProcessor;l!=null&&d&&d.normalizeQuery&&(l=d.normalizeQuery(l)),u[s]||(u[s]=[]);for(var f=0;f<u[s].length;f++)if(u[s][f].h===o)return this;var g={h:o,query:l,ctx:c||this,callAtLast:o.zrEventfulCallAtLast},y=u[s].length-1,$=u[s][y];return $&&$.callAtLast?u[s].splice(y,0,g):u[s].push(g),this},a.prototype.isSilent=function(s){var l=this._$handlers;return!l||!l[s]||!l[s].length},a.prototype.off=function(s,l){var o=this._$handlers;if(!o)return this;if(!s)return this._$handlers={},this;if(l){if(o[s]){for(var c=[],u=0,d=o[s].length;u<d;u++)o[s][u].h!==l&&c.push(o[s][u]);o[s]=c}o[s]&&o[s].length===0&&delete o[s]}else delete o[s];return this},a.prototype.trigger=function(s){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];if(!this._$handlers)return this;var c=this._$handlers[s],u=this._$eventProcessor;if(c)for(var d=l.length,f=c.length,g=0;g<f;g++){var y=c[g];if(!(u&&u.filter&&y.query!=null&&!u.filter(s,y.query)))switch(d){case 0:y.h.call(y.ctx);break;case 1:y.h.call(y.ctx,l[0]);break;case 2:y.h.call(y.ctx,l[0],l[1]);break;default:y.h.apply(y.ctx,l);break}}return u&&u.afterTrigger&&u.afterTrigger(s),this},a.prototype.triggerWithContext=function(s){for(var l=[],o=1;o<arguments.length;o++)l[o-1]=arguments[o];if(!this._$handlers)return this;var c=this._$handlers[s],u=this._$eventProcessor;if(c)for(var d=l.length,f=l[d-1],g=c.length,y=0;y<g;y++){var $=c[y];if(!(u&&u.filter&&$.query!=null&&!u.filter(s,$.query)))switch(d){case 0:$.h.call(f);break;case 1:$.h.call(f,l[0]);break;case 2:$.h.call(f,l[0],l[1]);break;default:$.h.apply(f,l.slice(1,d-1));break}}return u&&u.afterTrigger&&u.afterTrigger(s),this},a}(),LN2=Math.log(2);function determinant(a,s,l,o,c,u){var d=o+"-"+c,f=a.length;if(u.hasOwnProperty(d))return u[d];if(s===1){var g=Math.round(Math.log((1<<f)-1&~c)/LN2);return a[l][g]}for(var y=o|1<<l,$=l+1;o&1<<$;)$++;for(var x=0,N=0,R=0;N<f;N++){var j=1<<N;j&c||(x+=(R%2?-1:1)*a[l][N]*determinant(a,s-1,$,y,c|j,u),R++)}return u[d]=x,x}function buildTransformer(a,s){var l=[[a[0],a[1],1,0,0,0,-s[0]*a[0],-s[0]*a[1]],[0,0,0,a[0],a[1],1,-s[1]*a[0],-s[1]*a[1]],[a[2],a[3],1,0,0,0,-s[2]*a[2],-s[2]*a[3]],[0,0,0,a[2],a[3],1,-s[3]*a[2],-s[3]*a[3]],[a[4],a[5],1,0,0,0,-s[4]*a[4],-s[4]*a[5]],[0,0,0,a[4],a[5],1,-s[5]*a[4],-s[5]*a[5]],[a[6],a[7],1,0,0,0,-s[6]*a[6],-s[6]*a[7]],[0,0,0,a[6],a[7],1,-s[7]*a[6],-s[7]*a[7]]],o={},c=determinant(l,8,0,0,0,o);if(c!==0){for(var u=[],d=0;d<8;d++)for(var f=0;f<8;f++)u[f]==null&&(u[f]=0),u[f]+=((d+f)%2?-1:1)*determinant(l,7,d===0?1:0,1<<d,1<<f,o)/c*s[d];return function(g,y,$){var x=y*u[6]+$*u[7]+1;g[0]=(y*u[0]+$*u[1]+u[2])/x,g[1]=(y*u[3]+$*u[4]+u[5])/x}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(a,s,l,o,c){return transformCoordWithViewport(_calcOut$1,s,o,c,!0)&&transformCoordWithViewport(a,l,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(a,s,l,o,c){if(s.getBoundingClientRect&&env.domSupported&&!isCanvasEl(s)){var u=s[EVENT_SAVED_PROP]||(s[EVENT_SAVED_PROP]={}),d=prepareCoordMarkers(s,u),f=preparePointerTransformer(d,u,c);if(f)return f(a,l,o),!0}return!1}function prepareCoordMarkers(a,s){var l=s.markers;if(l)return l;l=s.markers=[];for(var o=["left","right"],c=["top","bottom"],u=0;u<4;u++){var d=document.createElement("div"),f=d.style,g=u%2,y=(u>>1)%2;f.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",o[g]+":0",c[y]+":0",o[1-g]+":auto",c[1-y]+":auto",""].join("!important;"),a.appendChild(d),l.push(d)}return l}function preparePointerTransformer(a,s,l){for(var o=l?"invTrans":"trans",c=s[o],u=s.srcCoords,d=[],f=[],g=!0,y=0;y<4;y++){var $=a[y].getBoundingClientRect(),x=2*y,N=$.left,R=$.top;d.push(N,R),g=g&&u&&N===u[x]&&R===u[x+1],f.push(a[y].offsetLeft,a[y].offsetTop)}return g&&c?c:(s.srcCoords=d,s[o]=l?buildTransformer(f,d):buildTransformer(d,f))}function isCanvasEl(a){return a.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(a){return a==null?"":(a+"").replace(replaceReg,function(s,l){return replaceMap[l]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(a,s,l,o){return l=l||{},o?calculateZrXY(a,s,l):firefoxNotSupportOffsetXY&&s.layerX!=null&&s.layerX!==s.offsetX?(l.zrX=s.layerX,l.zrY=s.layerY):s.offsetX!=null?(l.zrX=s.offsetX,l.zrY=s.offsetY):calculateZrXY(a,s,l),l}function calculateZrXY(a,s,l){if(env.domSupported&&a.getBoundingClientRect){var o=s.clientX,c=s.clientY;if(isCanvasEl(a)){var u=a.getBoundingClientRect();l.zrX=o-u.left,l.zrY=c-u.top;return}else if(transformCoordWithViewport(_calcOut,a,o,c)){l.zrX=_calcOut[0],l.zrY=_calcOut[1];return}}l.zrX=l.zrY=0}function getNativeEvent(a){return a||window.event}function normalizeEvent(a,s,l){if(s=getNativeEvent(s),s.zrX!=null)return s;var o=s.type,c=o&&o.indexOf("touch")>=0;if(c){var d=o!=="touchend"?s.targetTouches[0]:s.changedTouches[0];d&&clientToLocal(a,d,s,l)}else{clientToLocal(a,s,s,l);var u=getWheelDeltaMayPolyfill(s);s.zrDelta=u?u/120:-(s.detail||0)/3}var f=s.button;return s.which==null&&f!==void 0&&MOUSE_EVENT_REG.test(s.type)&&(s.which=f&1?1:f&2?3:f&4?2:0),s}function getWheelDeltaMayPolyfill(a){var s=a.wheelDelta;if(s)return s;var l=a.deltaX,o=a.deltaY;if(l==null||o==null)return s;var c=Math.abs(o!==0?o:l),u=o>0?-1:o<0?1:l>0?-1:1;return 3*c*u}function addEventListener(a,s,l,o){a.addEventListener(s,l,o)}function removeEventListener(a,s,l,o){a.removeEventListener(s,l,o)}var stop=function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(a){return a.which===2||a.which===3}var GestureMgr=function(){function a(){this._track=[]}return a.prototype.recognize=function(s,l,o){return this._doTrack(s,l,o),this._recognize(s)},a.prototype.clear=function(){return this._track.length=0,this},a.prototype._doTrack=function(s,l,o){var c=s.touches;if(c){for(var u={points:[],touches:[],target:l,event:s},d=0,f=c.length;d<f;d++){var g=c[d],y=clientToLocal(o,g,{});u.points.push([y.zrX,y.zrY]),u.touches.push(g)}this._track.push(u)}},a.prototype._recognize=function(s){for(var l in recognizers)if(recognizers.hasOwnProperty(l)){var o=recognizers[l](this._track,s);if(o)return o}},a}();function dist(a){var s=a[1][0]-a[0][0],l=a[1][1]-a[0][1];return Math.sqrt(s*s+l*l)}function center$1(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}var recognizers={pinch:function(a,s){var l=a.length;if(l){var o=(a[l-1]||{}).points,c=(a[l-2]||{}).points||o;if(c&&c.length>1&&o&&o.length>1){var u=dist(o)/dist(c);!isFinite(u)&&(u=1),s.pinchScale=u;var d=center$1(o);return s.pinchX=d[0],s.pinchY=d[1],{type:"pinch",target:a[0].target,event:s}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a}function copy(a,s){return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4],a[5]=s[5],a}function mul(a,s,l){var o=s[0]*l[0]+s[2]*l[1],c=s[1]*l[0]+s[3]*l[1],u=s[0]*l[2]+s[2]*l[3],d=s[1]*l[2]+s[3]*l[3],f=s[0]*l[4]+s[2]*l[5]+s[4],g=s[1]*l[4]+s[3]*l[5]+s[5];return a[0]=o,a[1]=c,a[2]=u,a[3]=d,a[4]=f,a[5]=g,a}function translate(a,s,l){return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a[4]=s[4]+l[0],a[5]=s[5]+l[1],a}function rotate(a,s,l,o){o===void 0&&(o=[0,0]);var c=s[0],u=s[2],d=s[4],f=s[1],g=s[3],y=s[5],$=Math.sin(l),x=Math.cos(l);return a[0]=c*x+f*$,a[1]=-c*$+f*x,a[2]=u*x+g*$,a[3]=-u*$+x*g,a[4]=x*(d-o[0])+$*(y-o[1])+o[0],a[5]=x*(y-o[1])-$*(d-o[0])+o[1],a}function scale$1(a,s,l){var o=l[0],c=l[1];return a[0]=s[0]*o,a[1]=s[1]*c,a[2]=s[2]*o,a[3]=s[3]*c,a[4]=s[4]*o,a[5]=s[5]*c,a}function invert(a,s){var l=s[0],o=s[2],c=s[4],u=s[1],d=s[3],f=s[5],g=l*d-u*o;return g?(g=1/g,a[0]=d*g,a[1]=-u*g,a[2]=-o*g,a[3]=l*g,a[4]=(o*f-d*c)*g,a[5]=(u*c-l*f)*g,a):null}function clone$2(a){var s=create$1();return copy(s,a),s}var Point=function(){function a(s,l){this.x=s||0,this.y=l||0}return a.prototype.copy=function(s){return this.x=s.x,this.y=s.y,this},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.set=function(s,l){return this.x=s,this.y=l,this},a.prototype.equal=function(s){return s.x===this.x&&s.y===this.y},a.prototype.add=function(s){return this.x+=s.x,this.y+=s.y,this},a.prototype.scale=function(s){this.x*=s,this.y*=s},a.prototype.scaleAndAdd=function(s,l){this.x+=s.x*l,this.y+=s.y*l},a.prototype.sub=function(s){return this.x-=s.x,this.y-=s.y,this},a.prototype.dot=function(s){return this.x*s.x+this.y*s.y},a.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},a.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},a.prototype.normalize=function(){var s=this.len();return this.x/=s,this.y/=s,this},a.prototype.distance=function(s){var l=this.x-s.x,o=this.y-s.y;return Math.sqrt(l*l+o*o)},a.prototype.distanceSquare=function(s){var l=this.x-s.x,o=this.y-s.y;return l*l+o*o},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.transform=function(s){if(s){var l=this.x,o=this.y;return this.x=s[0]*l+s[2]*o+s[4],this.y=s[1]*l+s[3]*o+s[5],this}},a.prototype.toArray=function(s){return s[0]=this.x,s[1]=this.y,s},a.prototype.fromArray=function(s){this.x=s[0],this.y=s[1]},a.set=function(s,l,o){s.x=l,s.y=o},a.copy=function(s,l){s.x=l.x,s.y=l.y},a.len=function(s){return Math.sqrt(s.x*s.x+s.y*s.y)},a.lenSquare=function(s){return s.x*s.x+s.y*s.y},a.dot=function(s,l){return s.x*l.x+s.y*l.y},a.add=function(s,l,o){s.x=l.x+o.x,s.y=l.y+o.y},a.sub=function(s,l,o){s.x=l.x-o.x,s.y=l.y-o.y},a.scale=function(s,l,o){s.x=l.x*o,s.y=l.y*o},a.scaleAndAdd=function(s,l,o,c){s.x=l.x+o.x*c,s.y=l.y+o.y*c},a.lerp=function(s,l,o,c){var u=1-c;s.x=u*l.x+c*o.x,s.y=u*l.y+c*o.y},a}(),mathMin$a=Math.min,mathMax$a=Math.max,lt$1=new Point,rb=new Point,lb=new Point,rt$1=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function a(s,l,o,c){o<0&&(s=s+o,o=-o),c<0&&(l=l+c,c=-c),this.x=s,this.y=l,this.width=o,this.height=c}return a.prototype.union=function(s){var l=mathMin$a(s.x,this.x),o=mathMin$a(s.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(s.x+s.width,this.x+this.width)-l:this.width=s.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(s.y+s.height,this.y+this.height)-o:this.height=s.height,this.x=l,this.y=o},a.prototype.applyTransform=function(s){a.applyTransform(this,this,s)},a.prototype.calculateTransform=function(s){var l=this,o=s.width/l.width,c=s.height/l.height,u=create$1();return translate(u,u,[-l.x,-l.y]),scale$1(u,u,[o,c]),translate(u,u,[s.x,s.y]),u},a.prototype.intersect=function(s,l){if(!s)return!1;s instanceof a||(s=a.create(s));var o=this,c=o.x,u=o.x+o.width,d=o.y,f=o.y+o.height,g=s.x,y=s.x+s.width,$=s.y,x=s.y+s.height,N=!(u<g||y<c||f<$||x<d);if(l){var R=1/0,j=0,ne=Math.abs(u-g),se=Math.abs(y-c),ce=Math.abs(f-$),fe=Math.abs(x-d),ea=Math.min(ne,se),ta=Math.min(ce,fe);u<g||y<c?ea>j&&(j=ea,ne<se?Point.set(maxTv$1,-ne,0):Point.set(maxTv$1,se,0)):ea<R&&(R=ea,ne<se?Point.set(minTv$1,ne,0):Point.set(minTv$1,-se,0)),f<$||x<d?ta>j&&(j=ta,ce<fe?Point.set(maxTv$1,0,-ce):Point.set(maxTv$1,0,fe)):ea<R&&(R=ea,ce<fe?Point.set(minTv$1,0,ce):Point.set(minTv$1,0,-fe))}return l&&Point.copy(l,N?minTv$1:maxTv$1),N},a.prototype.contain=function(s,l){var o=this;return s>=o.x&&s<=o.x+o.width&&l>=o.y&&l<=o.y+o.height},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(s){a.copy(this,s)},a.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},a.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},a.prototype.isZero=function(){return this.width===0||this.height===0},a.create=function(s){return new a(s.x,s.y,s.width,s.height)},a.copy=function(s,l){s.x=l.x,s.y=l.y,s.width=l.width,s.height=l.height},a.applyTransform=function(s,l,o){if(!o){s!==l&&a.copy(s,l);return}if(o[1]<1e-5&&o[1]>-1e-5&&o[2]<1e-5&&o[2]>-1e-5){var c=o[0],u=o[3],d=o[4],f=o[5];s.x=l.x*c+d,s.y=l.y*u+f,s.width=l.width*c,s.height=l.height*u,s.width<0&&(s.x+=s.width,s.width=-s.width),s.height<0&&(s.y+=s.height,s.height=-s.height);return}lt$1.x=lb.x=l.x,lt$1.y=rt$1.y=l.y,rb.x=rt$1.x=l.x+l.width,rb.y=lb.y=l.y+l.height,lt$1.transform(o),rt$1.transform(o),rb.transform(o),lb.transform(o),s.x=mathMin$a(lt$1.x,rb.x,lb.x,rt$1.x),s.y=mathMin$a(lt$1.y,rb.y,lb.y,rt$1.y);var g=mathMax$a(lt$1.x,rb.x,lb.x,rt$1.x),y=mathMax$a(lt$1.y,rb.y,lb.y,rt$1.y);s.width=g-s.x,s.height=y-s.y},a}(),SILENT="silent";function makeEventPacket(a,s,l){return{type:a,event:l,target:s.target,topTarget:s.topTarget,cancelBubble:!1,offsetX:l.zrX,offsetY:l.zrY,gestureEvent:l.gestureEvent,pinchX:l.pinchX,pinchY:l.pinchY,pinchScale:l.pinchScale,wheelDelta:l.zrDelta,zrByTouch:l.zrByTouch,which:l.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.handler=null,l}return s.prototype.dispose=function(){},s.prototype.setCursor=function(){},s}(Eventful),HoveredResult=function(){function a(s,l){this.x=s,this.y=l}return a}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(a){__extends(s,a);function s(l,o,c,u,d){var f=a.call(this)||this;return f._hovered=new HoveredResult(0,0),f.storage=l,f.painter=o,f.painterRoot=u,f._pointerSize=d,c=c||new EmptyProxy,f.proxy=null,f.setHandlerProxy(c),f._draggingMgr=new Draggable(f),f}return s.prototype.setHandlerProxy=function(l){this.proxy&&this.proxy.dispose(),l&&(each$f(handlerNames,function(o){l.on&&l.on(o,this[o],this)},this),l.handler=this),this.proxy=l},s.prototype.mousemove=function(l){var o=l.zrX,c=l.zrY,u=isOutsideBoundary(this,o,c),d=this._hovered,f=d.target;f&&!f.__zr&&(d=this.findHover(d.x,d.y),f=d.target);var g=this._hovered=u?new HoveredResult(o,c):this.findHover(o,c),y=g.target,$=this.proxy;$.setCursor&&$.setCursor(y?y.cursor:"default"),f&&y!==f&&this.dispatchToElement(d,"mouseout",l),this.dispatchToElement(g,"mousemove",l),y&&y!==f&&this.dispatchToElement(g,"mouseover",l)},s.prototype.mouseout=function(l){var o=l.zrEventControl;o!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",l),o!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:l})},s.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},s.prototype.dispatch=function(l,o){var c=this[l];c&&c.call(this,o)},s.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},s.prototype.setCursorStyle=function(l){var o=this.proxy;o.setCursor&&o.setCursor(l)},s.prototype.dispatchToElement=function(l,o,c){l=l||{};var u=l.target;if(!(u&&u.silent)){for(var d="on"+o,f=makeEventPacket(o,l,c);u&&(u[d]&&(f.cancelBubble=!!u[d].call(u,f)),u.trigger(o,f),u=u.__hostTarget?u.__hostTarget:u.parent,!f.cancelBubble););f.cancelBubble||(this.trigger(o,f),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(g){typeof g[d]=="function"&&g[d].call(g,f),g.trigger&&g.trigger(o,f)}))}},s.prototype.findHover=function(l,o,c){var u=this.storage.getDisplayList(),d=new HoveredResult(l,o);if(setHoverTarget(u,d,l,o,c),this._pointerSize&&!d.target){for(var f=[],g=this._pointerSize,y=g/2,$=new BoundingRect(l-y,o-y,g,g),x=u.length-1;x>=0;x--){var N=u[x];N!==c&&!N.ignore&&!N.ignoreCoarsePointer&&(!N.parent||!N.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(N.getBoundingRect()),N.transform&&tmpRect$1.applyTransform(N.transform),tmpRect$1.intersect($)&&f.push(N))}if(f.length)for(var R=4,j=Math.PI/12,ne=Math.PI*2,se=0;se<y;se+=R)for(var ce=0;ce<ne;ce+=j){var fe=l+se*Math.cos(ce),ea=o+se*Math.sin(ce);if(setHoverTarget(f,d,fe,ea,c),d.target)return d}}return d},s.prototype.processGesture=function(l,o){this._gestureMgr||(this._gestureMgr=new GestureMgr);var c=this._gestureMgr;o==="start"&&c.clear();var u=c.recognize(l,this.findHover(l.zrX,l.zrY,null).target,this.proxy.dom);if(o==="end"&&c.clear(),u){var d=u.type;l.gestureEvent=d;var f=new HoveredResult;f.target=u.target,this.dispatchToElement(f,d,u.event)}},s}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(a){Handler.prototype[a]=function(s){var l=s.zrX,o=s.zrY,c=isOutsideBoundary(this,l,o),u,d;if((a!=="mouseup"||!c)&&(u=this.findHover(l,o),d=u.target),a==="mousedown")this._downEl=d,this._downPoint=[s.zrX,s.zrY],this._upEl=d;else if(a==="mouseup")this._upEl=d;else if(a==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[s.zrX,s.zrY])>4)return;this._downPoint=null}this.dispatchToElement(u,a,s)}});function isHover(a,s,l){if(a[a.rectHover?"rectContain":"contain"](s,l)){for(var o=a,c=void 0,u=!1;o;){if(o.ignoreClip&&(u=!0),!u){var d=o.getClipPath();if(d&&!d.contain(s,l))return!1}o.silent&&(c=!0);var f=o.__hostTarget;o=f||o.parent}return c?SILENT:!0}return!1}function setHoverTarget(a,s,l,o,c){for(var u=a.length-1;u>=0;u--){var d=a[u],f=void 0;if(d!==c&&!d.ignore&&(f=isHover(d,l,o))&&(!s.topTarget&&(s.topTarget=d),f!==SILENT)){s.target=d;break}}}function isOutsideBoundary(a,s,l){var o=a.painter;return s<0||s>o.getWidth()||l<0||l>o.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(a){for(var s=0;a>=DEFAULT_MIN_MERGE;)s|=a&1,a>>=1;return a+s}function makeAscendingRun(a,s,l,o){var c=s+1;if(c===l)return 1;if(o(a[c++],a[s])<0){for(;c<l&&o(a[c],a[c-1])<0;)c++;reverseRun(a,s,c)}else for(;c<l&&o(a[c],a[c-1])>=0;)c++;return c-s}function reverseRun(a,s,l){for(l--;s<l;){var o=a[s];a[s++]=a[l],a[l--]=o}}function binaryInsertionSort(a,s,l,o,c){for(o===s&&o++;o<l;o++){for(var u=a[o],d=s,f=o,g;d<f;)g=d+f>>>1,c(u,a[g])<0?f=g:d=g+1;var y=o-d;switch(y){case 3:a[d+3]=a[d+2];case 2:a[d+2]=a[d+1];case 1:a[d+1]=a[d];break;default:for(;y>0;)a[d+y]=a[d+y-1],y--}a[d]=u}}function gallopLeft(a,s,l,o,c,u){var d=0,f=0,g=1;if(u(a,s[l+c])>0){for(f=o-c;g<f&&u(a,s[l+c+g])>0;)d=g,g=(g<<1)+1,g<=0&&(g=f);g>f&&(g=f),d+=c,g+=c}else{for(f=c+1;g<f&&u(a,s[l+c-g])<=0;)d=g,g=(g<<1)+1,g<=0&&(g=f);g>f&&(g=f);var y=d;d=c-g,g=c-y}for(d++;d<g;){var $=d+(g-d>>>1);u(a,s[l+$])>0?d=$+1:g=$}return g}function gallopRight(a,s,l,o,c,u){var d=0,f=0,g=1;if(u(a,s[l+c])<0){for(f=c+1;g<f&&u(a,s[l+c-g])<0;)d=g,g=(g<<1)+1,g<=0&&(g=f);g>f&&(g=f);var y=d;d=c-g,g=c-y}else{for(f=o-c;g<f&&u(a,s[l+c+g])>=0;)d=g,g=(g<<1)+1,g<=0&&(g=f);g>f&&(g=f),d+=c,g+=c}for(d++;d<g;){var $=d+(g-d>>>1);u(a,s[l+$])<0?g=$:d=$+1}return g}function TimSort(a,s){var l=DEFAULT_MIN_GALLOPING,o,c,u=0,d=[];o=[],c=[];function f(R,j){o[u]=R,c[u]=j,u+=1}function g(){for(;u>1;){var R=u-2;if(R>=1&&c[R-1]<=c[R]+c[R+1]||R>=2&&c[R-2]<=c[R]+c[R-1])c[R-1]<c[R+1]&&R--;else if(c[R]>c[R+1])break;$(R)}}function y(){for(;u>1;){var R=u-2;R>0&&c[R-1]<c[R+1]&&R--,$(R)}}function $(R){var j=o[R],ne=c[R],se=o[R+1],ce=c[R+1];c[R]=ne+ce,R===u-3&&(o[R+1]=o[R+2],c[R+1]=c[R+2]),u--;var fe=gallopRight(a[se],a,j,ne,0,s);j+=fe,ne-=fe,ne!==0&&(ce=gallopLeft(a[j+ne-1],a,se,ce,ce-1,s),ce!==0&&(ne<=ce?x(j,ne,se,ce):N(j,ne,se,ce)))}function x(R,j,ne,se){var ce=0;for(ce=0;ce<j;ce++)d[ce]=a[R+ce];var fe=0,ea=ne,ta=R;if(a[ta++]=a[ea++],--se===0){for(ce=0;ce<j;ce++)a[ta+ce]=d[fe+ce];return}if(j===1){for(ce=0;ce<se;ce++)a[ta+ce]=a[ea+ce];a[ta+se]=d[fe];return}for(var na=l,aa,ia,sa;;){aa=0,ia=0,sa=!1;do if(s(a[ea],d[fe])<0){if(a[ta++]=a[ea++],ia++,aa=0,--se===0){sa=!0;break}}else if(a[ta++]=d[fe++],aa++,ia=0,--j===1){sa=!0;break}while((aa|ia)<na);if(sa)break;do{if(aa=gallopRight(a[ea],d,fe,j,0,s),aa!==0){for(ce=0;ce<aa;ce++)a[ta+ce]=d[fe+ce];if(ta+=aa,fe+=aa,j-=aa,j<=1){sa=!0;break}}if(a[ta++]=a[ea++],--se===0){sa=!0;break}if(ia=gallopLeft(d[fe],a,ea,se,0,s),ia!==0){for(ce=0;ce<ia;ce++)a[ta+ce]=a[ea+ce];if(ta+=ia,ea+=ia,se-=ia,se===0){sa=!0;break}}if(a[ta++]=d[fe++],--j===1){sa=!0;break}na--}while(aa>=DEFAULT_MIN_GALLOPING||ia>=DEFAULT_MIN_GALLOPING);if(sa)break;na<0&&(na=0),na+=2}if(l=na,l<1&&(l=1),j===1){for(ce=0;ce<se;ce++)a[ta+ce]=a[ea+ce];a[ta+se]=d[fe]}else{if(j===0)throw new Error;for(ce=0;ce<j;ce++)a[ta+ce]=d[fe+ce]}}function N(R,j,ne,se){var ce=0;for(ce=0;ce<se;ce++)d[ce]=a[ne+ce];var fe=R+j-1,ea=se-1,ta=ne+se-1,na=0,aa=0;if(a[ta--]=a[fe--],--j===0){for(na=ta-(se-1),ce=0;ce<se;ce++)a[na+ce]=d[ce];return}if(se===1){for(ta-=j,fe-=j,aa=ta+1,na=fe+1,ce=j-1;ce>=0;ce--)a[aa+ce]=a[na+ce];a[ta]=d[ea];return}for(var ia=l;;){var sa=0,ra=0,la=!1;do if(s(d[ea],a[fe])<0){if(a[ta--]=a[fe--],sa++,ra=0,--j===0){la=!0;break}}else if(a[ta--]=d[ea--],ra++,sa=0,--se===1){la=!0;break}while((sa|ra)<ia);if(la)break;do{if(sa=j-gallopRight(d[ea],a,R,j,j-1,s),sa!==0){for(ta-=sa,fe-=sa,j-=sa,aa=ta+1,na=fe+1,ce=sa-1;ce>=0;ce--)a[aa+ce]=a[na+ce];if(j===0){la=!0;break}}if(a[ta--]=d[ea--],--se===1){la=!0;break}if(ra=se-gallopLeft(a[fe],d,0,se,se-1,s),ra!==0){for(ta-=ra,ea-=ra,se-=ra,aa=ta+1,na=ea+1,ce=0;ce<ra;ce++)a[aa+ce]=d[na+ce];if(se<=1){la=!0;break}}if(a[ta--]=a[fe--],--j===0){la=!0;break}ia--}while(sa>=DEFAULT_MIN_GALLOPING||ra>=DEFAULT_MIN_GALLOPING);if(la)break;ia<0&&(ia=0),ia+=2}if(l=ia,l<1&&(l=1),se===1){for(ta-=j,fe-=j,aa=ta+1,na=fe+1,ce=j-1;ce>=0;ce--)a[aa+ce]=a[na+ce];a[ta]=d[ea]}else{if(se===0)throw new Error;for(na=ta-(se-1),ce=0;ce<se;ce++)a[na+ce]=d[ce]}}return{mergeRuns:g,forceMergeRuns:y,pushRun:f}}function sort$2(a,s,l,o){l||(l=0),o||(o=a.length);var c=o-l;if(!(c<2)){var u=0;if(c<DEFAULT_MIN_MERGE){u=makeAscendingRun(a,l,o,s),binaryInsertionSort(a,l,o,l+u,s);return}var d=TimSort(a,s),f=minRunLength(c);do{if(u=makeAscendingRun(a,l,o,s),u<f){var g=c;g>f&&(g=f),binaryInsertionSort(a,l,l+g,l+u,s),u=g}d.pushRun(l,u),d.mergeRuns(),c-=u,l+=u}while(c!==0);d.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(a,s){return a.zlevel===s.zlevel?a.z===s.z?a.z2-s.z2:a.z-s.z:a.zlevel-s.zlevel}var Storage=function(){function a(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return a.prototype.traverse=function(s,l){for(var o=0;o<this._roots.length;o++)this._roots[o].traverse(s,l)},a.prototype.getDisplayList=function(s,l){l=l||!1;var o=this._displayList;return(s||!o.length)&&this.updateDisplayList(l),o},a.prototype.updateDisplayList=function(s){this._displayListLen=0;for(var l=this._roots,o=this._displayList,c=0,u=l.length;c<u;c++)this._updateAndAddDisplayable(l[c],null,s);o.length=this._displayListLen,sort$2(o,shapeCompareFunc)},a.prototype._updateAndAddDisplayable=function(s,l,o){if(!(s.ignore&&!o)){s.beforeUpdate(),s.update(),s.afterUpdate();var c=s.getClipPath();if(s.ignoreClip)l=null;else if(c){l?l=l.slice():l=[];for(var u=c,d=s;u;)u.parent=d,u.updateTransform(),l.push(u),d=u,u=u.getClipPath()}if(s.childrenRef){for(var f=s.childrenRef(),g=0;g<f.length;g++){var y=f[g];s.__dirty&&(y.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(y,l,o)}s.__dirty=0}else{var $=s;l&&l.length?$.__clipPaths=l:$.__clipPaths&&$.__clipPaths.length>0&&($.__clipPaths=[]),isNaN($.z)&&(logInvalidZError(),$.z=0),isNaN($.z2)&&(logInvalidZError(),$.z2=0),isNaN($.zlevel)&&(logInvalidZError(),$.zlevel=0),this._displayList[this._displayListLen++]=$}var x=s.getDecalElement&&s.getDecalElement();x&&this._updateAndAddDisplayable(x,l,o);var N=s.getTextGuideLine();N&&this._updateAndAddDisplayable(N,l,o);var R=s.getTextContent();R&&this._updateAndAddDisplayable(R,l,o)}},a.prototype.addRoot=function(s){s.__zr&&s.__zr.storage===this||this._roots.push(s)},a.prototype.delRoot=function(s){if(s instanceof Array){for(var l=0,o=s.length;l<o;l++)this.delRoot(s[l]);return}var c=indexOf(this._roots,s);c>=0&&this._roots.splice(c,1)},a.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},a.prototype.getRoots=function(){return this._roots},a.prototype.dispose=function(){this._displayList=null,this._roots=null},a}(),requestAnimationFrame$2;requestAnimationFrame$2=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(a){return setTimeout(a,16)};var easingFuncs={linear:function(a){return a},quadraticIn:function(a){return a*a},quadraticOut:function(a){return a*(2-a)},quadraticInOut:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},cubicIn:function(a){return a*a*a},cubicOut:function(a){return--a*a*a+1},cubicInOut:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},quarticIn:function(a){return a*a*a*a},quarticOut:function(a){return 1- --a*a*a*a},quarticInOut:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},quinticIn:function(a){return a*a*a*a*a},quinticOut:function(a){return--a*a*a*a*a+1},quinticInOut:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},sinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},sinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},sinusoidalInOut:function(a){return .5*(1-Math.cos(Math.PI*a))},exponentialIn:function(a){return a===0?0:Math.pow(1024,a-1)},exponentialOut:function(a){return a===1?1:1-Math.pow(2,-10*a)},exponentialInOut:function(a){return a===0?0:a===1?1:(a*=2)<1?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},circularIn:function(a){return 1-Math.sqrt(1-a*a)},circularOut:function(a){return Math.sqrt(1- --a*a)},circularInOut:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},elasticIn:function(a){var s,l=.1,o=.4;return a===0?0:a===1?1:(!l||l<1?(l=1,s=o/4):s=o*Math.asin(1/l)/(2*Math.PI),-(l*Math.pow(2,10*(a-=1))*Math.sin((a-s)*(2*Math.PI)/o)))},elasticOut:function(a){var s,l=.1,o=.4;return a===0?0:a===1?1:(!l||l<1?(l=1,s=o/4):s=o*Math.asin(1/l)/(2*Math.PI),l*Math.pow(2,-10*a)*Math.sin((a-s)*(2*Math.PI)/o)+1)},elasticInOut:function(a){var s,l=.1,o=.4;return a===0?0:a===1?1:(!l||l<1?(l=1,s=o/4):s=o*Math.asin(1/l)/(2*Math.PI),(a*=2)<1?-.5*(l*Math.pow(2,10*(a-=1))*Math.sin((a-s)*(2*Math.PI)/o)):l*Math.pow(2,-10*(a-=1))*Math.sin((a-s)*(2*Math.PI)/o)*.5+1)},backIn:function(a){var s=1.70158;return a*a*((s+1)*a-s)},backOut:function(a){var s=1.70158;return--a*a*((s+1)*a+s)+1},backInOut:function(a){var s=2.5949095;return(a*=2)<1?.5*(a*a*((s+1)*a-s)):.5*((a-=2)*a*((s+1)*a+s)+2)},bounceIn:function(a){return 1-easingFuncs.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},bounceInOut:function(a){return a<.5?easingFuncs.bounceIn(a*2)*.5:easingFuncs.bounceOut(a*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(a){return a>-EPSILON$4&&a<EPSILON$4}function isNotAroundZero$1(a){return a>EPSILON$4||a<-EPSILON$4}function cubicAt(a,s,l,o,c){var u=1-c;return u*u*(u*a+3*c*s)+c*c*(c*o+3*u*l)}function cubicDerivativeAt(a,s,l,o,c){var u=1-c;return 3*(((s-a)*u+2*(l-s)*c)*u+(o-l)*c*c)}function cubicRootAt(a,s,l,o,c,u){var d=o+3*(s-l)-a,f=3*(l-s*2+a),g=3*(s-a),y=a-c,$=f*f-3*d*g,x=f*g-9*d*y,N=g*g-3*f*y,R=0;if(isAroundZero$1($)&&isAroundZero$1(x))if(isAroundZero$1(f))u[0]=0;else{var j=-g/f;j>=0&&j<=1&&(u[R++]=j)}else{var ne=x*x-4*$*N;if(isAroundZero$1(ne)){var se=x/$,j=-f/d+se,ce=-se/2;j>=0&&j<=1&&(u[R++]=j),ce>=0&&ce<=1&&(u[R++]=ce)}else if(ne>0){var fe=mathSqrt$3(ne),ea=$*f+1.5*d*(-x+fe),ta=$*f+1.5*d*(-x-fe);ea<0?ea=-mathPow$2(-ea,ONE_THIRD):ea=mathPow$2(ea,ONE_THIRD),ta<0?ta=-mathPow$2(-ta,ONE_THIRD):ta=mathPow$2(ta,ONE_THIRD);var j=(-f-(ea+ta))/(3*d);j>=0&&j<=1&&(u[R++]=j)}else{var na=(2*$*f-3*d*x)/(2*mathSqrt$3($*$*$)),aa=Math.acos(na)/3,ia=mathSqrt$3($),sa=Math.cos(aa),j=(-f-2*ia*sa)/(3*d),ce=(-f+ia*(sa+THREE_SQRT*Math.sin(aa)))/(3*d),ra=(-f+ia*(sa-THREE_SQRT*Math.sin(aa)))/(3*d);j>=0&&j<=1&&(u[R++]=j),ce>=0&&ce<=1&&(u[R++]=ce),ra>=0&&ra<=1&&(u[R++]=ra)}}return R}function cubicExtrema(a,s,l,o,c){var u=6*l-12*s+6*a,d=9*s+3*o-3*a-9*l,f=3*s-3*a,g=0;if(isAroundZero$1(d)){if(isNotAroundZero$1(u)){var y=-f/u;y>=0&&y<=1&&(c[g++]=y)}}else{var $=u*u-4*d*f;if(isAroundZero$1($))c[0]=-u/(2*d);else if($>0){var x=mathSqrt$3($),y=(-u+x)/(2*d),N=(-u-x)/(2*d);y>=0&&y<=1&&(c[g++]=y),N>=0&&N<=1&&(c[g++]=N)}}return g}function cubicSubdivide(a,s,l,o,c,u){var d=(s-a)*c+a,f=(l-s)*c+s,g=(o-l)*c+l,y=(f-d)*c+d,$=(g-f)*c+f,x=($-y)*c+y;u[0]=a,u[1]=d,u[2]=y,u[3]=x,u[4]=x,u[5]=$,u[6]=g,u[7]=o}function cubicProjectPoint(a,s,l,o,c,u,d,f,g,y,$){var x,N=.005,R=1/0,j,ne,se,ce;_v0[0]=g,_v0[1]=y;for(var fe=0;fe<1;fe+=.05)_v1[0]=cubicAt(a,l,c,d,fe),_v1[1]=cubicAt(s,o,u,f,fe),se=distSquare(_v0,_v1),se<R&&(x=fe,R=se);R=1/0;for(var ea=0;ea<32&&!(N<EPSILON_NUMERIC);ea++)j=x-N,ne=x+N,_v1[0]=cubicAt(a,l,c,d,j),_v1[1]=cubicAt(s,o,u,f,j),se=distSquare(_v1,_v0),j>=0&&se<R?(x=j,R=se):(_v2[0]=cubicAt(a,l,c,d,ne),_v2[1]=cubicAt(s,o,u,f,ne),ce=distSquare(_v2,_v0),ne<=1&&ce<R?(x=ne,R=ce):N*=.5);return $&&($[0]=cubicAt(a,l,c,d,x),$[1]=cubicAt(s,o,u,f,x)),mathSqrt$3(R)}function cubicLength(a,s,l,o,c,u,d,f,g){for(var y=a,$=s,x=0,N=1/g,R=1;R<=g;R++){var j=R*N,ne=cubicAt(a,l,c,d,j),se=cubicAt(s,o,u,f,j),ce=ne-y,fe=se-$;x+=Math.sqrt(ce*ce+fe*fe),y=ne,$=se}return x}function quadraticAt$1(a,s,l,o){var c=1-o;return c*(c*a+2*o*s)+o*o*l}function quadraticDerivativeAt(a,s,l,o){return 2*((1-o)*(s-a)+o*(l-s))}function quadraticRootAt(a,s,l,o,c){var u=a-2*s+l,d=2*(s-a),f=a-o,g=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(d)){var y=-f/d;y>=0&&y<=1&&(c[g++]=y)}}else{var $=d*d-4*u*f;if(isAroundZero$1($)){var y=-d/(2*u);y>=0&&y<=1&&(c[g++]=y)}else if($>0){var x=mathSqrt$3($),y=(-d+x)/(2*u),N=(-d-x)/(2*u);y>=0&&y<=1&&(c[g++]=y),N>=0&&N<=1&&(c[g++]=N)}}return g}function quadraticExtremum(a,s,l){var o=a+l-2*s;return o===0?.5:(a-s)/o}function quadraticSubdivide(a,s,l,o,c){var u=(s-a)*o+a,d=(l-s)*o+s,f=(d-u)*o+u;c[0]=a,c[1]=u,c[2]=f,c[3]=f,c[4]=d,c[5]=l}function quadraticProjectPoint(a,s,l,o,c,u,d,f,g){var y,$=.005,x=1/0;_v0[0]=d,_v0[1]=f;for(var N=0;N<1;N+=.05){_v1[0]=quadraticAt$1(a,l,c,N),_v1[1]=quadraticAt$1(s,o,u,N);var R=distSquare(_v0,_v1);R<x&&(y=N,x=R)}x=1/0;for(var j=0;j<32&&!($<EPSILON_NUMERIC);j++){var ne=y-$,se=y+$;_v1[0]=quadraticAt$1(a,l,c,ne),_v1[1]=quadraticAt$1(s,o,u,ne);var R=distSquare(_v1,_v0);if(ne>=0&&R<x)y=ne,x=R;else{_v2[0]=quadraticAt$1(a,l,c,se),_v2[1]=quadraticAt$1(s,o,u,se);var ce=distSquare(_v2,_v0);se<=1&&ce<x?(y=se,x=ce):$*=.5}}return g&&(g[0]=quadraticAt$1(a,l,c,y),g[1]=quadraticAt$1(s,o,u,y)),mathSqrt$3(x)}function quadraticLength(a,s,l,o,c,u,d){for(var f=a,g=s,y=0,$=1/d,x=1;x<=d;x++){var N=x*$,R=quadraticAt$1(a,l,c,N),j=quadraticAt$1(s,o,u,N),ne=R-f,se=j-g;y+=Math.sqrt(ne*ne+se*se),f=R,g=j}return y}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(a){var s=a&&regexp.exec(a);if(s){var l=s[1].split(","),o=+trim$1(l[0]),c=+trim$1(l[1]),u=+trim$1(l[2]),d=+trim$1(l[3]);if(isNaN(o+c+u+d))return;var f=[];return function(g){return g<=0?0:g>=1?1:cubicRootAt(0,o,u,1,g,f)&&cubicAt(0,c,d,1,f[0])}}}var Clip=function(){function a(s){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=s.life||1e3,this._delay=s.delay||0,this.loop=s.loop||!1,this.onframe=s.onframe||noop,this.ondestroy=s.ondestroy||noop,this.onrestart=s.onrestart||noop,s.easing&&this.setEasing(s.easing)}return a.prototype.step=function(s,l){if(this._inited||(this._startTime=s+this._delay,this._inited=!0),this._paused){this._pausedTime+=l;return}var o=this._life,c=s-this._startTime-this._pausedTime,u=c/o;u<0&&(u=0),u=Math.min(u,1);var d=this.easingFunc,f=d?d(u):u;if(this.onframe(f),u===1)if(this.loop){var g=c%o;this._startTime=s-g,this._pausedTime=0,this.onrestart()}else return!0;return!1},a.prototype.pause=function(){this._paused=!0},a.prototype.resume=function(){this._paused=!1},a.prototype.setEasing=function(s){this.easing=s,this.easingFunc=isFunction$2(s)?s:easingFuncs[s]||createCubicEasingFunc(s)},a}(),Entry=function(){function a(s){this.value=s}return a}(),LinkedList=function(){function a(){this._len=0}return a.prototype.insert=function(s){var l=new Entry(s);return this.insertEntry(l),l},a.prototype.insertEntry=function(s){this.head?(this.tail.next=s,s.prev=this.tail,s.next=null,this.tail=s):this.head=this.tail=s,this._len++},a.prototype.remove=function(s){var l=s.prev,o=s.next;l?l.next=o:this.head=o,o?o.prev=l:this.tail=l,s.next=s.prev=null,this._len--},a.prototype.len=function(){return this._len},a.prototype.clear=function(){this.head=this.tail=null,this._len=0},a}(),LRU=function(){function a(s){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=s}return a.prototype.put=function(s,l){var o=this._list,c=this._map,u=null;if(c[s]==null){var d=o.len(),f=this._lastRemovedEntry;if(d>=this._maxSize&&d>0){var g=o.head;o.remove(g),delete c[g.key],u=g.value,this._lastRemovedEntry=g}f?f.value=l:f=new Entry(l),f.key=s,o.insertEntry(f),c[s]=f}return u},a.prototype.get=function(s){var l=this._map[s],o=this._list;if(l!=null)return l!==o.tail&&(o.remove(l),o.insertEntry(l)),l.value},a.prototype.clear=function(){this._list.clear(),this._map={}},a.prototype.len=function(){return this._list.len()},a}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(a){return a=Math.round(a),a<0?0:a>255?255:a}function clampCssAngle(a){return a=Math.round(a),a<0?0:a>360?360:a}function clampCssFloat(a){return a<0?0:a>1?1:a}function parseCssInt(a){var s=a;return s.length&&s.charAt(s.length-1)==="%"?clampCssByte(parseFloat(s)/100*255):clampCssByte(parseInt(s,10))}function parseCssFloat(a){var s=a;return s.length&&s.charAt(s.length-1)==="%"?clampCssFloat(parseFloat(s)/100):clampCssFloat(parseFloat(s))}function cssHueToRgb(a,s,l){return l<0?l+=1:l>1&&(l-=1),l*6<1?a+(s-a)*l*6:l*2<1?s:l*3<2?a+(s-a)*(2/3-l)*6:a}function lerpNumber(a,s,l){return a+(s-a)*l}function setRgba(a,s,l,o,c){return a[0]=s,a[1]=l,a[2]=o,a[3]=c,a}function copyRgba(a,s){return a[0]=s[0],a[1]=s[1],a[2]=s[2],a[3]=s[3],a}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(a,s){lastRemovedArr&&copyRgba(lastRemovedArr,s),lastRemovedArr=colorCache.put(a,lastRemovedArr||s.slice())}function parse(a,s){if(a){s=s||[];var l=colorCache.get(a);if(l)return copyRgba(s,l);a=a+"";var o=a.replace(/ /g,"").toLowerCase();if(o in kCSSColorTable)return copyRgba(s,kCSSColorTable[o]),putToCache(a,s),s;var c=o.length;if(o.charAt(0)==="#"){if(c===4||c===5){var u=parseInt(o.slice(1,4),16);if(!(u>=0&&u<=4095)){setRgba(s,0,0,0,1);return}return setRgba(s,(u&3840)>>4|(u&3840)>>8,u&240|(u&240)>>4,u&15|(u&15)<<4,c===5?parseInt(o.slice(4),16)/15:1),putToCache(a,s),s}else if(c===7||c===9){var u=parseInt(o.slice(1,7),16);if(!(u>=0&&u<=16777215)){setRgba(s,0,0,0,1);return}return setRgba(s,(u&16711680)>>16,(u&65280)>>8,u&255,c===9?parseInt(o.slice(7),16)/255:1),putToCache(a,s),s}return}var d=o.indexOf("("),f=o.indexOf(")");if(d!==-1&&f+1===c){var g=o.substr(0,d),y=o.substr(d+1,f-(d+1)).split(","),$=1;switch(g){case"rgba":if(y.length!==4)return y.length===3?setRgba(s,+y[0],+y[1],+y[2],1):setRgba(s,0,0,0,1);$=parseCssFloat(y.pop());case"rgb":if(y.length>=3)return setRgba(s,parseCssInt(y[0]),parseCssInt(y[1]),parseCssInt(y[2]),y.length===3?$:parseCssFloat(y[3])),putToCache(a,s),s;setRgba(s,0,0,0,1);return;case"hsla":if(y.length!==4){setRgba(s,0,0,0,1);return}return y[3]=parseCssFloat(y[3]),hsla2rgba(y,s),putToCache(a,s),s;case"hsl":if(y.length!==3){setRgba(s,0,0,0,1);return}return hsla2rgba(y,s),putToCache(a,s),s;default:return}}setRgba(s,0,0,0,1)}}function hsla2rgba(a,s){var l=(parseFloat(a[0])%360+360)%360/360,o=parseCssFloat(a[1]),c=parseCssFloat(a[2]),u=c<=.5?c*(o+1):c+o-c*o,d=c*2-u;return s=s||[],setRgba(s,clampCssByte(cssHueToRgb(d,u,l+1/3)*255),clampCssByte(cssHueToRgb(d,u,l)*255),clampCssByte(cssHueToRgb(d,u,l-1/3)*255),1),a.length===4&&(s[3]=a[3]),s}function rgba2hsla(a){if(a){var s=a[0]/255,l=a[1]/255,o=a[2]/255,c=Math.min(s,l,o),u=Math.max(s,l,o),d=u-c,f=(u+c)/2,g,y;if(d===0)g=0,y=0;else{f<.5?y=d/(u+c):y=d/(2-u-c);var $=((u-s)/6+d/2)/d,x=((u-l)/6+d/2)/d,N=((u-o)/6+d/2)/d;s===u?g=N-x:l===u?g=1/3+$-N:o===u&&(g=2/3+x-$),g<0&&(g+=1),g>1&&(g-=1)}var R=[g*360,y,f];return a[3]!=null&&R.push(a[3]),R}}function lift(a,s){var l=parse(a);if(l){for(var o=0;o<3;o++)s<0?l[o]=l[o]*(1-s)|0:l[o]=(255-l[o])*s+l[o]|0,l[o]>255?l[o]=255:l[o]<0&&(l[o]=0);return stringify(l,l.length===4?"rgba":"rgb")}}function fastLerp(a,s,l){if(!(!(s&&s.length)||!(a>=0&&a<=1))){l=l||[];var o=a*(s.length-1),c=Math.floor(o),u=Math.ceil(o),d=s[c],f=s[u],g=o-c;return l[0]=clampCssByte(lerpNumber(d[0],f[0],g)),l[1]=clampCssByte(lerpNumber(d[1],f[1],g)),l[2]=clampCssByte(lerpNumber(d[2],f[2],g)),l[3]=clampCssFloat(lerpNumber(d[3],f[3],g)),l}}function lerp(a,s,l){if(!(!(s&&s.length)||!(a>=0&&a<=1))){var o=a*(s.length-1),c=Math.floor(o),u=Math.ceil(o),d=parse(s[c]),f=parse(s[u]),g=o-c,y=stringify([clampCssByte(lerpNumber(d[0],f[0],g)),clampCssByte(lerpNumber(d[1],f[1],g)),clampCssByte(lerpNumber(d[2],f[2],g)),clampCssFloat(lerpNumber(d[3],f[3],g))],"rgba");return l?{color:y,leftIndex:c,rightIndex:u,value:o}:y}}function modifyHSL(a,s,l,o){var c=parse(a);if(a)return c=rgba2hsla(c),s!=null&&(c[0]=clampCssAngle(s)),l!=null&&(c[1]=parseCssFloat(l)),o!=null&&(c[2]=parseCssFloat(o)),stringify(hsla2rgba(c),"rgba")}function modifyAlpha(a,s){var l=parse(a);if(l&&s!=null)return l[3]=clampCssFloat(s),stringify(l,"rgba")}function stringify(a,s){if(!(!a||!a.length)){var l=a[0]+","+a[1]+","+a[2];return(s==="rgba"||s==="hsva"||s==="hsla")&&(l+=","+a[3]),s+"("+l+")"}}function lum(a,s){var l=parse(a);return l?(.299*l[0]+.587*l[1]+.114*l[2])*l[3]/255+(1-l[3])*s:0}var liftedColorCache=new LRU(100);function liftColor(a){if(isString$2(a)){var s=liftedColorCache.get(a);return s||(s=lift(a,-.1),liftedColorCache.put(a,s)),s}else if(isGradientObject(a)){var l=extend({},a);return l.colorStops=map$1(a.colorStops,function(o){return{offset:o.offset,color:lift(o.color,-.1)}}),l}return a}var mathRound$1=Math.round;function normalizeColor(a){var s;if(!a||a==="transparent")a="none";else if(typeof a=="string"&&a.indexOf("rgba")>-1){var l=parse(a);l&&(a="rgb("+l[0]+","+l[1]+","+l[2]+")",s=l[3])}return{color:a,opacity:s??1}}var EPSILON$3=1e-4;function isAroundZero(a){return a<EPSILON$3&&a>-EPSILON$3}function round3(a){return mathRound$1(a*1e3)/1e3}function round4(a){return mathRound$1(a*1e4)/1e4}function getMatrixStr(a){return"matrix("+round3(a[0])+","+round3(a[1])+","+round3(a[2])+","+round3(a[3])+","+round4(a[4])+","+round4(a[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(a,s,l){return l==="top"?a+=s/2:l==="bottom"&&(a-=s/2),a}function hasShadow(a){return a&&(a.shadowBlur||a.shadowOffsetX||a.shadowOffsetY)}function getShadowKey(a){var s=a.style,l=a.getGlobalScale();return[s.shadowColor,(s.shadowBlur||0).toFixed(2),(s.shadowOffsetX||0).toFixed(2),(s.shadowOffsetY||0).toFixed(2),l[0],l[1]].join(",")}function isImagePattern(a){return a&&!!a.image}function isSVGPattern(a){return a&&!!a.svgElement}function isPattern(a){return isImagePattern(a)||isSVGPattern(a)}function isLinearGradient(a){return a.type==="linear"}function isRadialGradient(a){return a.type==="radial"}function isGradient(a){return a&&(a.type==="linear"||a.type==="radial")}function getIdURL(a){return"url(#"+a+")"}function getPathPrecision(a){var s=a.getGlobalScale(),l=Math.max(s[0],s[1]);return Math.max(Math.ceil(Math.log(l)/Math.log(10)),1)}function getSRTTransformString(a){var s=a.x||0,l=a.y||0,o=(a.rotation||0)*RADIAN_TO_DEGREE,c=retrieve2(a.scaleX,1),u=retrieve2(a.scaleY,1),d=a.skewX||0,f=a.skewY||0,g=[];return(s||l)&&g.push("translate("+s+"px,"+l+"px)"),o&&g.push("rotate("+o+")"),(c!==1||u!==1)&&g.push("scale("+c+","+u+")"),(d||f)&&g.push("skew("+mathRound$1(d*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(f*RADIAN_TO_DEGREE)+"deg)"),g.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$2(window.btoa)?function(a){return window.btoa(unescape(encodeURIComponent(a)))}:typeof Buffer<"u"?function(a){return Buffer.from(a).toString("base64")}:function(a){return null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(a,s,l){return(s-a)*l+a}function interpolate1DArray(a,s,l,o){for(var c=s.length,u=0;u<c;u++)a[u]=interpolateNumber$1(s[u],l[u],o);return a}function interpolate2DArray(a,s,l,o){for(var c=s.length,u=c&&s[0].length,d=0;d<c;d++){a[d]||(a[d]=[]);for(var f=0;f<u;f++)a[d][f]=interpolateNumber$1(s[d][f],l[d][f],o)}return a}function add1DArray(a,s,l,o){for(var c=s.length,u=0;u<c;u++)a[u]=s[u]+l[u]*o;return a}function add2DArray(a,s,l,o){for(var c=s.length,u=c&&s[0].length,d=0;d<c;d++){a[d]||(a[d]=[]);for(var f=0;f<u;f++)a[d][f]=s[d][f]+l[d][f]*o}return a}function fillColorStops(a,s){for(var l=a.length,o=s.length,c=l>o?s:a,u=Math.min(l,o),d=c[u-1]||{color:[0,0,0,0],offset:0},f=u;f<Math.max(l,o);f++)c.push({offset:d.offset,color:d.color.slice()})}function fillArray(a,s,l){var o=a,c=s;if(!(!o.push||!c.push)){var u=o.length,d=c.length;if(u!==d){var f=u>d;if(f)o.length=d;else for(var g=u;g<d;g++)o.push(l===1?c[g]:arraySlice.call(c[g]))}for(var y=o[0]&&o[0].length,g=0;g<o.length;g++)if(l===1)isNaN(o[g])&&(o[g]=c[g]);else for(var $=0;$<y;$++)isNaN(o[g][$])&&(o[g][$]=c[g][$])}}function cloneValue(a){if(isArrayLike(a)){var s=a.length;if(isArrayLike(a[0])){for(var l=[],o=0;o<s;o++)l.push(arraySlice.call(a[o]));return l}return arraySlice.call(a)}return a}function rgba2String(a){return a[0]=Math.floor(a[0])||0,a[1]=Math.floor(a[1])||0,a[2]=Math.floor(a[2])||0,a[3]=a[3]==null?1:a[3],"rgba("+a.join(",")+")"}function guessArrayDim(a){return isArrayLike(a&&a[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(a){return a===VALUE_TYPE_LINEAR_GRADIENT||a===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(a){return a===VALUE_TYPE_1D_ARRAY||a===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function a(s){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=s}return a.prototype.isFinished=function(){return this._finished},a.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},a.prototype.needsAnimate=function(){return this.keyframes.length>=1},a.prototype.getAdditiveTrack=function(){return this._additiveTrack},a.prototype.addKeyframe=function(s,l,o){this._needsSort=!0;var c=this.keyframes,u=c.length,d=!1,f=VALUE_TYPE_UNKOWN,g=l;if(isArrayLike(l)){var y=guessArrayDim(l);f=y,(y===1&&!isNumber$2(l[0])||y===2&&!isNumber$2(l[0][0]))&&(d=!0)}else if(isNumber$2(l)&&!eqNaN(l))f=VALUE_TYPE_NUMBER;else if(isString$2(l))if(!isNaN(+l))f=VALUE_TYPE_NUMBER;else{var $=parse(l);$&&(g=$,f=VALUE_TYPE_COLOR)}else if(isGradientObject(l)){var x=extend({},g);x.colorStops=map$1(l.colorStops,function(R){return{offset:R.offset,color:parse(R.color)}}),isLinearGradient(l)?f=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(l)&&(f=VALUE_TYPE_RADIAL_GRADIENT),g=x}u===0?this.valType=f:(f!==this.valType||f===VALUE_TYPE_UNKOWN)&&(d=!0),this.discrete=this.discrete||d;var N={time:s,value:g,rawValue:l,percent:0};return o&&(N.easing=o,N.easingFunc=isFunction$2(o)?o:easingFuncs[o]||createCubicEasingFunc(o)),c.push(N),N},a.prototype.prepare=function(s,l){var o=this.keyframes;this._needsSort&&o.sort(function(ne,se){return ne.time-se.time});for(var c=this.valType,u=o.length,d=o[u-1],f=this.discrete,g=isArrayValueType(c),y=isGradientValueType(c),$=0;$<u;$++){var x=o[$],N=x.value,R=d.value;x.percent=x.time/s,f||(g&&$!==u-1?fillArray(N,R,c):y&&fillColorStops(N.colorStops,R.colorStops))}if(!f&&c!==VALUE_TYPE_RADIAL_GRADIENT&&l&&this.needsAnimate()&&l.needsAnimate()&&c===l.valType&&!l._finished){this._additiveTrack=l;for(var j=o[0].value,$=0;$<u;$++)c===VALUE_TYPE_NUMBER?o[$].additiveValue=o[$].value-j:c===VALUE_TYPE_COLOR?o[$].additiveValue=add1DArray([],o[$].value,j,-1):isArrayValueType(c)&&(o[$].additiveValue=c===VALUE_TYPE_1D_ARRAY?add1DArray([],o[$].value,j,-1):add2DArray([],o[$].value,j,-1))}},a.prototype.step=function(s,l){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var o=this._additiveTrack!=null,c=o?"additiveValue":"value",u=this.valType,d=this.keyframes,f=d.length,g=this.propName,y=u===VALUE_TYPE_COLOR,$,x=this._lastFr,N=Math.min,R,j;if(f===1)R=j=d[0];else{if(l<0)$=0;else if(l<this._lastFrP){var ne=N(x+1,f-1);for($=ne;$>=0&&!(d[$].percent<=l);$--);$=N($,f-2)}else{for($=x;$<f&&!(d[$].percent>l);$++);$=N($-1,f-2)}j=d[$+1],R=d[$]}if(R&&j){this._lastFr=$,this._lastFrP=l;var se=j.percent-R.percent,ce=se===0?1:N((l-R.percent)/se,1);j.easingFunc&&(ce=j.easingFunc(ce));var fe=o?this._additiveValue:y?tmpRgba:s[g];if((isArrayValueType(u)||y)&&!fe&&(fe=this._additiveValue=[]),this.discrete)s[g]=ce<1?R.rawValue:j.rawValue;else if(isArrayValueType(u))u===VALUE_TYPE_1D_ARRAY?interpolate1DArray(fe,R[c],j[c],ce):interpolate2DArray(fe,R[c],j[c],ce);else if(isGradientValueType(u)){var ea=R[c],ta=j[c],na=u===VALUE_TYPE_LINEAR_GRADIENT;s[g]={type:na?"linear":"radial",x:interpolateNumber$1(ea.x,ta.x,ce),y:interpolateNumber$1(ea.y,ta.y,ce),colorStops:map$1(ea.colorStops,function(ia,sa){var ra=ta.colorStops[sa];return{offset:interpolateNumber$1(ia.offset,ra.offset,ce),color:rgba2String(interpolate1DArray([],ia.color,ra.color,ce))}}),global:ta.global},na?(s[g].x2=interpolateNumber$1(ea.x2,ta.x2,ce),s[g].y2=interpolateNumber$1(ea.y2,ta.y2,ce)):s[g].r=interpolateNumber$1(ea.r,ta.r,ce)}else if(y)interpolate1DArray(fe,R[c],j[c],ce),o||(s[g]=rgba2String(fe));else{var aa=interpolateNumber$1(R[c],j[c],ce);o?this._additiveValue=aa:s[g]=aa}o&&this._addToTarget(s)}}},a.prototype._addToTarget=function(s){var l=this.valType,o=this.propName,c=this._additiveValue;l===VALUE_TYPE_NUMBER?s[o]=s[o]+c:l===VALUE_TYPE_COLOR?(parse(s[o],tmpRgba),add1DArray(tmpRgba,tmpRgba,c,1),s[o]=rgba2String(tmpRgba)):l===VALUE_TYPE_1D_ARRAY?add1DArray(s[o],s[o],c,1):l===VALUE_TYPE_2D_ARRAY&&add2DArray(s[o],s[o],c,1)},a}(),Animator=function(){function a(s,l,o,c){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=s,this._loop=l,l&&c){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=c,this._allowDiscrete=o}return a.prototype.getMaxTime=function(){return this._maxTime},a.prototype.getDelay=function(){return this._delay},a.prototype.getLoop=function(){return this._loop},a.prototype.getTarget=function(){return this._target},a.prototype.changeTarget=function(s){this._target=s},a.prototype.when=function(s,l,o){return this.whenWithKeys(s,l,keys(l),o)},a.prototype.whenWithKeys=function(s,l,o,c){for(var u=this._tracks,d=0;d<o.length;d++){var f=o[d],g=u[f];if(!g){g=u[f]=new Track(f);var y=void 0,$=this._getAdditiveTrack(f);if($){var x=$.keyframes,N=x[x.length-1];y=N&&N.value,$.valType===VALUE_TYPE_COLOR&&y&&(y=rgba2String(y))}else y=this._target[f];if(y==null)continue;s>0&&g.addKeyframe(0,cloneValue(y),c),this._trackKeys.push(f)}g.addKeyframe(s,cloneValue(l[f]),c)}return this._maxTime=Math.max(this._maxTime,s),this},a.prototype.pause=function(){this._clip.pause(),this._paused=!0},a.prototype.resume=function(){this._clip.resume(),this._paused=!1},a.prototype.isPaused=function(){return!!this._paused},a.prototype.duration=function(s){return this._maxTime=s,this._force=!0,this},a.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var s=this._doneCbs;if(s)for(var l=s.length,o=0;o<l;o++)s[o].call(this)},a.prototype._abortedCallback=function(){this._setTracksFinished();var s=this.animation,l=this._abortedCbs;if(s&&s.removeClip(this._clip),this._clip=null,l)for(var o=0;o<l.length;o++)l[o].call(this)},a.prototype._setTracksFinished=function(){for(var s=this._tracks,l=this._trackKeys,o=0;o<l.length;o++)s[l[o]].setFinished()},a.prototype._getAdditiveTrack=function(s){var l,o=this._additiveAnimators;if(o)for(var c=0;c<o.length;c++){var u=o[c].getTrack(s);u&&(l=u)}return l},a.prototype.start=function(s){if(!(this._started>0)){this._started=1;for(var l=this,o=[],c=this._maxTime||0,u=0;u<this._trackKeys.length;u++){var d=this._trackKeys[u],f=this._tracks[d],g=this._getAdditiveTrack(d),y=f.keyframes,$=y.length;if(f.prepare(c,g),f.needsAnimate())if(!this._allowDiscrete&&f.discrete){var x=y[$-1];x&&(l._target[f.propName]=x.rawValue),f.setFinished()}else o.push(f)}if(o.length||this._force){var N=new Clip({life:c,loop:this._loop,delay:this._delay||0,onframe:function(R){l._started=2;var j=l._additiveAnimators;if(j){for(var ne=!1,se=0;se<j.length;se++)if(j[se]._clip){ne=!0;break}ne||(l._additiveAnimators=null)}for(var se=0;se<o.length;se++)o[se].step(l._target,R);var ce=l._onframeCbs;if(ce)for(var se=0;se<ce.length;se++)ce[se](l._target,R)},ondestroy:function(){l._doneCallback()}});this._clip=N,this.animation&&this.animation.addClip(N),s&&N.setEasing(s)}else this._doneCallback();return this}},a.prototype.stop=function(s){if(this._clip){var l=this._clip;s&&l.onframe(1),this._abortedCallback()}},a.prototype.delay=function(s){return this._delay=s,this},a.prototype.during=function(s){return s&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(s)),this},a.prototype.done=function(s){return s&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(s)),this},a.prototype.aborted=function(s){return s&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(s)),this},a.prototype.getClip=function(){return this._clip},a.prototype.getTrack=function(s){return this._tracks[s]},a.prototype.getTracks=function(){var s=this;return map$1(this._trackKeys,function(l){return s._tracks[l]})},a.prototype.stopTracks=function(s,l){if(!s.length||!this._clip)return!0;for(var o=this._tracks,c=this._trackKeys,u=0;u<s.length;u++){var d=o[s[u]];d&&!d.isFinished()&&(l?d.step(this._target,1):this._started===1&&d.step(this._target,0),d.setFinished())}for(var f=!0,u=0;u<c.length;u++)if(!o[c[u]].isFinished()){f=!1;break}return f&&this._abortedCallback(),f},a.prototype.saveTo=function(s,l,o){if(s){l=l||this._trackKeys;for(var c=0;c<l.length;c++){var u=l[c],d=this._tracks[u];if(!(!d||d.isFinished())){var f=d.keyframes,g=f[o?0:f.length-1];g&&(s[u]=cloneValue(g.rawValue))}}}},a.prototype.__changeFinalValue=function(s,l){l=l||keys(s);for(var o=0;o<l.length;o++){var c=l[o],u=this._tracks[c];if(u){var d=u.keyframes;if(d.length>1){var f=d.pop();u.addKeyframe(f.time,s[c]),u.prepare(this._maxTime,u.getAdditiveTrack())}}}},a}();function getTime(){return new Date().getTime()}var Animation=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;return o._running=!1,o._time=0,o._pausedTime=0,o._pauseStart=0,o._paused=!1,l=l||{},o.stage=l.stage||{},o}return s.prototype.addClip=function(l){l.animation&&this.removeClip(l),this._head?(this._tail.next=l,l.prev=this._tail,l.next=null,this._tail=l):this._head=this._tail=l,l.animation=this},s.prototype.addAnimator=function(l){l.animation=this;var o=l.getClip();o&&this.addClip(o)},s.prototype.removeClip=function(l){if(l.animation){var o=l.prev,c=l.next;o?o.next=c:this._head=c,c?c.prev=o:this._tail=o,l.next=l.prev=l.animation=null}},s.prototype.removeAnimator=function(l){var o=l.getClip();o&&this.removeClip(o),l.animation=null},s.prototype.update=function(l){for(var o=getTime()-this._pausedTime,c=o-this._time,u=this._head;u;){var d=u.next,f=u.step(o,c);f&&(u.ondestroy(),this.removeClip(u)),u=d}this._time=o,l||(this.trigger("frame",c),this.stage.update&&this.stage.update())},s.prototype._startLoop=function(){var l=this;this._running=!0;function o(){l._running&&(requestAnimationFrame$2(o),!l._paused&&l.update())}requestAnimationFrame$2(o)},s.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},s.prototype.stop=function(){this._running=!1},s.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},s.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},s.prototype.clear=function(){for(var l=this._head;l;){var o=l.next;l.prev=l.next=l.animation=null,l=o}this._head=this._tail=null},s.prototype.isFinished=function(){return this._head==null},s.prototype.animate=function(l,o){o=o||{},this.start();var c=new Animator(l,o.loop);return this.addAnimator(c),c},s}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var a=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],s=["touchstart","touchend","touchmove"],l={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},o=map$1(a,function(c){var u=c.replace("mouse","pointer");return l.hasOwnProperty(u)?u:c});return{mouse:a,touch:s,pointer:o}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(a){var s=a.pointerType;return s==="pen"||s==="touch"}function setTouchTimer(a){a.touching=!0,a.touchTimer!=null&&(clearTimeout(a.touchTimer),a.touchTimer=null),a.touchTimer=setTimeout(function(){a.touching=!1,a.touchTimer=null},700)}function markTouch(a){a&&(a.zrByTouch=!0)}function normalizeGlobalEvent(a,s){return normalizeEvent(a.dom,new FakeGlobalEvent(a,s),!0)}function isLocalEl(a,s){for(var l=s,o=!1;l&&l.nodeType!==9&&!(o=l.domBelongToZr||l!==s&&l===a.painterRoot);)l=l.parentNode;return o}var FakeGlobalEvent=function(){function a(s,l){this.stopPropagation=noop,this.stopImmediatePropagation=noop,this.preventDefault=noop,this.type=l.type,this.target=this.currentTarget=s.dom,this.pointerType=l.pointerType,this.clientX=l.clientX,this.clientY=l.clientY}return a}(),localDOMHandlers={mousedown:function(a){a=normalizeEvent(this.dom,a),this.__mayPointerCapture=[a.zrX,a.zrY],this.trigger("mousedown",a)},mousemove:function(a){a=normalizeEvent(this.dom,a);var s=this.__mayPointerCapture;s&&(a.zrX!==s[0]||a.zrY!==s[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",a)},mouseup:function(a){a=normalizeEvent(this.dom,a),this.__togglePointerCapture(!1),this.trigger("mouseup",a)},mouseout:function(a){a=normalizeEvent(this.dom,a);var s=a.toElement||a.relatedTarget;isLocalEl(this,s)||(this.__pointerCapturing&&(a.zrEventControl="no_globalout"),this.trigger("mouseout",a))},wheel:function(a){wheelEventSupported=!0,a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a)},mousewheel:function(a){wheelEventSupported||(a=normalizeEvent(this.dom,a),this.trigger("mousewheel",a))},touchstart:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.__lastTouchMoment=new Date,this.handler.processGesture(a,"start"),localDOMHandlers.mousemove.call(this,a),localDOMHandlers.mousedown.call(this,a)},touchmove:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"change"),localDOMHandlers.mousemove.call(this,a)},touchend:function(a){a=normalizeEvent(this.dom,a),markTouch(a),this.handler.processGesture(a,"end"),localDOMHandlers.mouseup.call(this,a),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,a)},pointerdown:function(a){localDOMHandlers.mousedown.call(this,a)},pointermove:function(a){isPointerFromTouch(a)||localDOMHandlers.mousemove.call(this,a)},pointerup:function(a){localDOMHandlers.mouseup.call(this,a)},pointerout:function(a){isPointerFromTouch(a)||localDOMHandlers.mouseout.call(this,a)}};each$f(["click","dblclick","contextmenu"],function(a){localDOMHandlers[a]=function(s){s=normalizeEvent(this.dom,s),this.trigger(a,s)}});var globalDOMHandlers={pointermove:function(a){isPointerFromTouch(a)||globalDOMHandlers.mousemove.call(this,a)},pointerup:function(a){globalDOMHandlers.mouseup.call(this,a)},mousemove:function(a){this.trigger("mousemove",a)},mouseup:function(a){var s=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",a),s&&(a.zrEventControl="only_globalout",this.trigger("mouseout",a))}};function mountLocalDOMEventListeners(a,s){var l=s.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(o){mountSingleDOMEventListener(s,o,function(c){l[o].call(a,c)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(o){mountSingleDOMEventListener(s,o,function(c){l[o].call(a,c),setTouchTimer(s)})}),each$f(localNativeListenerNames.mouse,function(o){mountSingleDOMEventListener(s,o,function(c){c=getNativeEvent(c),s.touching||l[o].call(a,c)})}))}function mountGlobalDOMEventListeners(a,s){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,l):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,l);function l(o){function c(u){u=getNativeEvent(u),isLocalEl(a,u.target)||(u=normalizeGlobalEvent(a,u),s.domHandlers[o].call(a,u))}mountSingleDOMEventListener(s,o,c,{capture:!0})}}function mountSingleDOMEventListener(a,s,l,o){a.mounted[s]=l,a.listenerOpts[s]=o,addEventListener(a.domTarget,s,l,o)}function unmountDOMEventListeners(a){var s=a.mounted;for(var l in s)s.hasOwnProperty(l)&&removeEventListener(a.domTarget,l,s[l],a.listenerOpts[l]);a.mounted={}}var DOMHandlerScope=function(){function a(s,l){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=s,this.domHandlers=l}return a}(),HandlerDomProxy=function(a){__extends(s,a);function s(l,o){var c=a.call(this)||this;return c.__pointerCapturing=!1,c.dom=l,c.painterRoot=o,c._localHandlerScope=new DOMHandlerScope(l,localDOMHandlers),globalEventSupported&&(c._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(c,c._localHandlerScope),c}return s.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},s.prototype.setCursor=function(l){this.dom.style&&(this.dom.style.cursor=l||"default")},s.prototype.__togglePointerCapture=function(l){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+l){this.__pointerCapturing=l;var o=this._globalHandlerScope;l?mountGlobalDOMEventListeners(this,o):unmountDOMEventListeners(o)}},s}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(a){return a>EPSILON$2||a<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function a(){}return a.prototype.getLocalTransform=function(s){return a.getLocalTransform(this,s)},a.prototype.setPosition=function(s){this.x=s[0],this.y=s[1]},a.prototype.setScale=function(s){this.scaleX=s[0],this.scaleY=s[1]},a.prototype.setSkew=function(s){this.skewX=s[0],this.skewY=s[1]},a.prototype.setOrigin=function(s){this.originX=s[0],this.originY=s[1]},a.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},a.prototype.updateTransform=function(){var s=this.parent&&this.parent.transform,l=this.needLocalTransform(),o=this.transform;if(!(l||s)){o&&(mIdentity(o),this.invTransform=null);return}o=o||create$1(),l?this.getLocalTransform(o):mIdentity(o),s&&(l?mul(o,s,o):copy(o,s)),this.transform=o,this._resolveGlobalScaleRatio(o)},a.prototype._resolveGlobalScaleRatio=function(s){var l=this.globalScaleRatio;if(l!=null&&l!==1){this.getGlobalScale(scaleTmp);var o=scaleTmp[0]<0?-1:1,c=scaleTmp[1]<0?-1:1,u=((scaleTmp[0]-o)*l+o)/scaleTmp[0]||0,d=((scaleTmp[1]-c)*l+c)/scaleTmp[1]||0;s[0]*=u,s[1]*=u,s[2]*=d,s[3]*=d}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,s)},a.prototype.getComputedTransform=function(){for(var s=this,l=[];s;)l.push(s),s=s.parent;for(;s=l.pop();)s.updateTransform();return this.transform},a.prototype.setLocalTransform=function(s){if(s){var l=s[0]*s[0]+s[1]*s[1],o=s[2]*s[2]+s[3]*s[3],c=Math.atan2(s[1],s[0]),u=Math.PI/2+c-Math.atan2(s[3],s[2]);o=Math.sqrt(o)*Math.cos(u),l=Math.sqrt(l),this.skewX=u,this.skewY=0,this.rotation=-c,this.x=+s[4],this.y=+s[5],this.scaleX=l,this.scaleY=o,this.originX=0,this.originY=0}},a.prototype.decomposeTransform=function(){if(this.transform){var s=this.parent,l=this.transform;s&&s.transform&&(s.invTransform=s.invTransform||create$1(),mul(tmpTransform,s.invTransform,l),l=tmpTransform);var o=this.originX,c=this.originY;(o||c)&&(originTransform[4]=o,originTransform[5]=c,mul(tmpTransform,l,originTransform),tmpTransform[4]-=o,tmpTransform[5]-=c,l=tmpTransform),this.setLocalTransform(l)}},a.prototype.getGlobalScale=function(s){var l=this.transform;return s=s||[],l?(s[0]=Math.sqrt(l[0]*l[0]+l[1]*l[1]),s[1]=Math.sqrt(l[2]*l[2]+l[3]*l[3]),l[0]<0&&(s[0]=-s[0]),l[3]<0&&(s[1]=-s[1]),s):(s[0]=1,s[1]=1,s)},a.prototype.transformCoordToLocal=function(s,l){var o=[s,l],c=this.invTransform;return c&&applyTransform$1(o,o,c),o},a.prototype.transformCoordToGlobal=function(s,l){var o=[s,l],c=this.transform;return c&&applyTransform$1(o,o,c),o},a.prototype.getLineScale=function(){var s=this.transform;return s&&abs(s[0]-1)>1e-10&&abs(s[3]-1)>1e-10?Math.sqrt(abs(s[0]*s[3]-s[2]*s[1])):1},a.prototype.copyTransform=function(s){copyTransform(this,s)},a.getLocalTransform=function(s,l){l=l||[];var o=s.originX||0,c=s.originY||0,u=s.scaleX,d=s.scaleY,f=s.anchorX,g=s.anchorY,y=s.rotation||0,$=s.x,x=s.y,N=s.skewX?Math.tan(s.skewX):0,R=s.skewY?Math.tan(-s.skewY):0;if(o||c||f||g){var j=o+f,ne=c+g;l[4]=-j*u-N*ne*d,l[5]=-ne*d-R*j*u}else l[4]=l[5]=0;return l[0]=u,l[3]=d,l[1]=R*u,l[2]=N*d,y&&rotate(l,l,y),l[4]+=o+$,l[5]+=c+x,l},a.initDefaultProps=function(){var s=a.prototype;s.scaleX=s.scaleY=s.globalScaleRatio=1,s.x=s.y=s.originX=s.originY=s.skewX=s.skewY=s.rotation=s.anchorX=s.anchorY=0}(),a}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(a,s){for(var l=0;l<TRANSFORMABLE_PROPS.length;l++){var o=TRANSFORMABLE_PROPS[l];a[o]=s[o]}}var textWidthCache={};function getWidth(a,s){s=s||DEFAULT_FONT;var l=textWidthCache[s];l||(l=textWidthCache[s]=new LRU(500));var o=l.get(a);return o==null&&(o=platformApi.measureText(a,s).width,l.put(a,o)),o}function innerGetBoundingRect(a,s,l,o){var c=getWidth(a,s),u=getLineHeight(s),d=adjustTextX(0,c,l),f=adjustTextY(0,u,o),g=new BoundingRect(d,f,c,u);return g}function getBoundingRect(a,s,l,o){var c=((a||"")+"").split(`
`),u=c.length;if(u===1)return innerGetBoundingRect(c[0],s,l,o);for(var d=new BoundingRect(0,0,0,0),f=0;f<c.length;f++){var g=innerGetBoundingRect(c[f],s,l,o);f===0?d.copy(g):d.union(g)}return d}function adjustTextX(a,s,l){return l==="right"?a-=s:l==="center"&&(a-=s/2),a}function adjustTextY(a,s,l){return l==="middle"?a-=s/2:l==="bottom"&&(a-=s),a}function getLineHeight(a){return getWidth("国",a)}function parsePercent$1(a,s){return typeof a=="string"?a.lastIndexOf("%")>=0?parseFloat(a)/100*s:parseFloat(a):a}function calculateTextPosition(a,s,l){var o=s.position||"inside",c=s.distance!=null?s.distance:5,u=l.height,d=l.width,f=u/2,g=l.x,y=l.y,$="left",x="top";if(o instanceof Array)g+=parsePercent$1(o[0],l.width),y+=parsePercent$1(o[1],l.height),$=null,x=null;else switch(o){case"left":g-=c,y+=f,$="right",x="middle";break;case"right":g+=c+d,y+=f,x="middle";break;case"top":g+=d/2,y-=c,$="center",x="bottom";break;case"bottom":g+=d/2,y+=u+c,$="center";break;case"inside":g+=d/2,y+=f,$="center",x="middle";break;case"insideLeft":g+=c,y+=f,x="middle";break;case"insideRight":g+=d-c,y+=f,$="right",x="middle";break;case"insideTop":g+=d/2,y+=c,$="center";break;case"insideBottom":g+=d/2,y+=u-c,$="center",x="bottom";break;case"insideTopLeft":g+=c,y+=c;break;case"insideTopRight":g+=d-c,y+=c,$="right";break;case"insideBottomLeft":g+=c,y+=u-c,x="bottom";break;case"insideBottomRight":g+=d-c,y+=u-c,$="right",x="bottom";break}return a=a||{},a.x=g,a.y=y,a.align=$,a.verticalAlign=x,a}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(a,s){return a[s]=!0,a},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element$1=function(){function a(s){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(s)}return a.prototype._init=function(s){this.attr(s)},a.prototype.drift=function(s,l,o){switch(this.draggable){case"horizontal":l=0;break;case"vertical":s=0;break}var c=this.transform;c||(c=this.transform=[1,0,0,1,0,0]),c[4]+=s,c[5]+=l,this.decomposeTransform(),this.markRedraw()},a.prototype.beforeUpdate=function(){},a.prototype.afterUpdate=function(){},a.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},a.prototype.updateInnerText=function(s){var l=this._textContent;if(l&&(!l.ignore||s)){this.textConfig||(this.textConfig={});var o=this.textConfig,c=o.local,u=l.innerTransformable,d=void 0,f=void 0,g=!1;u.parent=c?this:null;var y=!1;if(u.copyTransform(l),o.position!=null){var $=tmpBoundingRect;o.layoutRect?$.copy(o.layoutRect):$.copy(this.getBoundingRect()),c||$.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,o,$):calculateTextPosition(tmpTextPosCalcRes,o,$),u.x=tmpTextPosCalcRes.x,u.y=tmpTextPosCalcRes.y,d=tmpTextPosCalcRes.align,f=tmpTextPosCalcRes.verticalAlign;var x=o.origin;if(x&&o.rotation!=null){var N=void 0,R=void 0;x==="center"?(N=$.width*.5,R=$.height*.5):(N=parsePercent$1(x[0],$.width),R=parsePercent$1(x[1],$.height)),y=!0,u.originX=-u.x+N+(c?0:$.x),u.originY=-u.y+R+(c?0:$.y)}}o.rotation!=null&&(u.rotation=o.rotation);var j=o.offset;j&&(u.x+=j[0],u.y+=j[1],y||(u.originX=-j[0],u.originY=-j[1]));var ne=o.inside==null?typeof o.position=="string"&&o.position.indexOf("inside")>=0:o.inside,se=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),ce=void 0,fe=void 0,ea=void 0;ne&&this.canBeInsideText()?(ce=o.insideFill,fe=o.insideStroke,(ce==null||ce==="auto")&&(ce=this.getInsideTextFill()),(fe==null||fe==="auto")&&(fe=this.getInsideTextStroke(ce),ea=!0)):(ce=o.outsideFill,fe=o.outsideStroke,(ce==null||ce==="auto")&&(ce=this.getOutsideFill()),(fe==null||fe==="auto")&&(fe=this.getOutsideStroke(ce),ea=!0)),ce=ce||"#000",(ce!==se.fill||fe!==se.stroke||ea!==se.autoStroke||d!==se.align||f!==se.verticalAlign)&&(g=!0,se.fill=ce,se.stroke=fe,se.autoStroke=ea,se.align=d,se.verticalAlign=f,l.setDefaultTextStyle(se)),l.__dirty|=REDRAW_BIT,g&&l.dirtyStyle(!0)}},a.prototype.canBeInsideText=function(){return!0},a.prototype.getInsideTextFill=function(){return"#fff"},a.prototype.getInsideTextStroke=function(s){return"#000"},a.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},a.prototype.getOutsideStroke=function(s){var l=this.__zr&&this.__zr.getBackgroundColor(),o=typeof l=="string"&&parse(l);o||(o=[255,255,255,1]);for(var c=o[3],u=this.__zr.isDarkMode(),d=0;d<3;d++)o[d]=o[d]*c+(u?0:255)*(1-c);return o[3]=1,stringify(o,"rgba")},a.prototype.traverse=function(s,l){},a.prototype.attrKV=function(s,l){s==="textConfig"?this.setTextConfig(l):s==="textContent"?this.setTextContent(l):s==="clipPath"?this.setClipPath(l):s==="extra"?(this.extra=this.extra||{},extend(this.extra,l)):this[s]=l},a.prototype.hide=function(){this.ignore=!0,this.markRedraw()},a.prototype.show=function(){this.ignore=!1,this.markRedraw()},a.prototype.attr=function(s,l){if(typeof s=="string")this.attrKV(s,l);else if(isObject$5(s))for(var o=s,c=keys(o),u=0;u<c.length;u++){var d=c[u];this.attrKV(d,s[d])}return this.markRedraw(),this},a.prototype.saveCurrentToNormalState=function(s){this._innerSaveToNormal(s);for(var l=this._normalState,o=0;o<this.animators.length;o++){var c=this.animators[o],u=c.__fromStateTransition;if(!(c.getLoop()||u&&u!==PRESERVED_NORMAL_STATE)){var d=c.targetName,f=d?l[d]:l;c.saveTo(f)}}},a.prototype._innerSaveToNormal=function(s){var l=this._normalState;l||(l=this._normalState={}),s.textConfig&&!l.textConfig&&(l.textConfig=this.textConfig),this._savePrimaryToNormal(s,l,PRIMARY_STATES_KEYS$1)},a.prototype._savePrimaryToNormal=function(s,l,o){for(var c=0;c<o.length;c++){var u=o[c];s[u]!=null&&!(u in l)&&(l[u]=this[u])}},a.prototype.hasState=function(){return this.currentStates.length>0},a.prototype.getState=function(s){return this.states[s]},a.prototype.ensureState=function(s){var l=this.states;return l[s]||(l[s]={}),l[s]},a.prototype.clearStates=function(s){this.useState(PRESERVED_NORMAL_STATE,!1,s)},a.prototype.useState=function(s,l,o,c){var u=s===PRESERVED_NORMAL_STATE,d=this.hasState();if(!(!d&&u)){var f=this.currentStates,g=this.stateTransition;if(!(indexOf(f,s)>=0&&(l||f.length===1))){var y;if(this.stateProxy&&!u&&(y=this.stateProxy(s)),y||(y=this.states&&this.states[s]),!y&&!u){logError("State "+s+" not exists.");return}u||this.saveCurrentToNormalState(y);var $=!!(y&&y.hoverLayer||c);$&&this._toggleHoverLayerFlag(!0),this._applyStateObj(s,y,this._normalState,l,!o&&!this.__inHover&&g&&g.duration>0,g);var x=this._textContent,N=this._textGuide;return x&&x.useState(s,l,o,$),N&&N.useState(s,l,o,$),u?(this.currentStates=[],this._normalState={}):l?this.currentStates.push(s):this.currentStates=[s],this._updateAnimationTargets(),this.markRedraw(),!$&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),y}}},a.prototype.useStates=function(s,l,o){if(!s.length)this.clearStates();else{var c=[],u=this.currentStates,d=s.length,f=d===u.length;if(f){for(var g=0;g<d;g++)if(s[g]!==u[g]){f=!1;break}}if(f)return;for(var g=0;g<d;g++){var y=s[g],$=void 0;this.stateProxy&&($=this.stateProxy(y,s)),$||($=this.states[y]),$&&c.push($)}var x=c[d-1],N=!!(x&&x.hoverLayer||o);N&&this._toggleHoverLayerFlag(!0);var R=this._mergeStates(c),j=this.stateTransition;this.saveCurrentToNormalState(R),this._applyStateObj(s.join(","),R,this._normalState,!1,!l&&!this.__inHover&&j&&j.duration>0,j);var ne=this._textContent,se=this._textGuide;ne&&ne.useStates(s,l,N),se&&se.useStates(s,l,N),this._updateAnimationTargets(),this.currentStates=s.slice(),this.markRedraw(),!N&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},a.prototype.isSilent=function(){for(var s=this.silent,l=this.parent;!s&&l;){if(l.silent){s=!0;break}l=l.parent}return s},a.prototype._updateAnimationTargets=function(){for(var s=0;s<this.animators.length;s++){var l=this.animators[s];l.targetName&&l.changeTarget(this[l.targetName])}},a.prototype.removeState=function(s){var l=indexOf(this.currentStates,s);if(l>=0){var o=this.currentStates.slice();o.splice(l,1),this.useStates(o)}},a.prototype.replaceState=function(s,l,o){var c=this.currentStates.slice(),u=indexOf(c,s),d=indexOf(c,l)>=0;u>=0?d?c.splice(u,1):c[u]=l:o&&!d&&c.push(l),this.useStates(c)},a.prototype.toggleState=function(s,l){l?this.useState(s,!0):this.removeState(s)},a.prototype._mergeStates=function(s){for(var l={},o,c=0;c<s.length;c++){var u=s[c];extend(l,u),u.textConfig&&(o=o||{},extend(o,u.textConfig))}return o&&(l.textConfig=o),l},a.prototype._applyStateObj=function(s,l,o,c,u,d){var f=!(l&&c);l&&l.textConfig?(this.textConfig=extend({},c?this.textConfig:o.textConfig),extend(this.textConfig,l.textConfig)):f&&o.textConfig&&(this.textConfig=o.textConfig);for(var g={},y=!1,$=0;$<PRIMARY_STATES_KEYS$1.length;$++){var x=PRIMARY_STATES_KEYS$1[$],N=u&&DEFAULT_ANIMATABLE_MAP[x];l&&l[x]!=null?N?(y=!0,g[x]=l[x]):this[x]=l[x]:f&&o[x]!=null&&(N?(y=!0,g[x]=o[x]):this[x]=o[x])}if(!u)for(var $=0;$<this.animators.length;$++){var R=this.animators[$],j=R.targetName;R.getLoop()||R.__changeFinalValue(j?(l||o)[j]:l||o)}y&&this._transitionState(s,g,d)},a.prototype._attachComponent=function(s){if(!(s.__zr&&!s.__hostTarget)&&s!==this){var l=this.__zr;l&&s.addSelfToZr(l),s.__zr=l,s.__hostTarget=this}},a.prototype._detachComponent=function(s){s.__zr&&s.removeSelfFromZr(s.__zr),s.__zr=null,s.__hostTarget=null},a.prototype.getClipPath=function(){return this._clipPath},a.prototype.setClipPath=function(s){this._clipPath&&this._clipPath!==s&&this.removeClipPath(),this._attachComponent(s),this._clipPath=s,this.markRedraw()},a.prototype.removeClipPath=function(){var s=this._clipPath;s&&(this._detachComponent(s),this._clipPath=null,this.markRedraw())},a.prototype.getTextContent=function(){return this._textContent},a.prototype.setTextContent=function(s){var l=this._textContent;l!==s&&(l&&l!==s&&this.removeTextContent(),s.innerTransformable=new Transformable,this._attachComponent(s),this._textContent=s,this.markRedraw())},a.prototype.setTextConfig=function(s){this.textConfig||(this.textConfig={}),extend(this.textConfig,s),this.markRedraw()},a.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},a.prototype.removeTextContent=function(){var s=this._textContent;s&&(s.innerTransformable=null,this._detachComponent(s),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},a.prototype.getTextGuideLine=function(){return this._textGuide},a.prototype.setTextGuideLine=function(s){this._textGuide&&this._textGuide!==s&&this.removeTextGuideLine(),this._attachComponent(s),this._textGuide=s,this.markRedraw()},a.prototype.removeTextGuideLine=function(){var s=this._textGuide;s&&(this._detachComponent(s),this._textGuide=null,this.markRedraw())},a.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var s=this.__zr;s&&(this.__inHover?s.refreshHover():s.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},a.prototype.dirty=function(){this.markRedraw()},a.prototype._toggleHoverLayerFlag=function(s){this.__inHover=s;var l=this._textContent,o=this._textGuide;l&&(l.__inHover=s),o&&(o.__inHover=s)},a.prototype.addSelfToZr=function(s){if(this.__zr!==s){this.__zr=s;var l=this.animators;if(l)for(var o=0;o<l.length;o++)s.animation.addAnimator(l[o]);this._clipPath&&this._clipPath.addSelfToZr(s),this._textContent&&this._textContent.addSelfToZr(s),this._textGuide&&this._textGuide.addSelfToZr(s)}},a.prototype.removeSelfFromZr=function(s){if(this.__zr){this.__zr=null;var l=this.animators;if(l)for(var o=0;o<l.length;o++)s.animation.removeAnimator(l[o]);this._clipPath&&this._clipPath.removeSelfFromZr(s),this._textContent&&this._textContent.removeSelfFromZr(s),this._textGuide&&this._textGuide.removeSelfFromZr(s)}},a.prototype.animate=function(s,l,o){var c=s?this[s]:this,u=new Animator(c,l,o);return s&&(u.targetName=s),this.addAnimator(u,s),u},a.prototype.addAnimator=function(s,l){var o=this.__zr,c=this;s.during(function(){c.updateDuringAnimation(l)}).done(function(){var u=c.animators,d=indexOf(u,s);d>=0&&u.splice(d,1)}),this.animators.push(s),o&&o.animation.addAnimator(s),o&&o.wakeUp()},a.prototype.updateDuringAnimation=function(s){this.markRedraw()},a.prototype.stopAnimation=function(s,l){for(var o=this.animators,c=o.length,u=[],d=0;d<c;d++){var f=o[d];!s||s===f.scope?f.stop(l):u.push(f)}return this.animators=u,this},a.prototype.animateTo=function(s,l,o){animateTo(this,s,l,o)},a.prototype.animateFrom=function(s,l,o){animateTo(this,s,l,o,!0)},a.prototype._transitionState=function(s,l,o,c){for(var u=animateTo(this,l,o,c),d=0;d<u.length;d++)u[d].__fromStateTransition=s},a.prototype.getBoundingRect=function(){return null},a.prototype.getPaintRect=function(){return null},a.initDefaultProps=function(){var s=a.prototype;s.type="element",s.name="",s.ignore=s.silent=s.isGroup=s.draggable=s.dragging=s.ignoreClip=s.__inHover=!1,s.__dirty=REDRAW_BIT;function l(o,c,u,d){Object.defineProperty(s,o,{get:function(){if(!this[c]){var g=this[c]=[];f(this,g)}return this[c]},set:function(g){this[u]=g[0],this[d]=g[1],this[c]=g,f(this,g)}});function f(g,y){Object.defineProperty(y,0,{get:function(){return g[u]},set:function($){g[u]=$}}),Object.defineProperty(y,1,{get:function(){return g[d]},set:function($){g[d]=$}})}}Object.defineProperty&&(l("position","_legacyPos","x","y"),l("scale","_legacyScale","scaleX","scaleY"),l("origin","_legacyOrigin","originX","originY"))}(),a}();mixin(Element$1,Eventful);mixin(Element$1,Transformable);function animateTo(a,s,l,o,c){l=l||{};var u=[];animateToShallow(a,"",a,s,l,o,u,c);var d=u.length,f=!1,g=l.done,y=l.aborted,$=function(){f=!0,d--,d<=0&&(f?g&&g():y&&y())},x=function(){d--,d<=0&&(f?g&&g():y&&y())};d||g&&g(),u.length>0&&l.during&&u[0].during(function(j,ne){l.during(ne)});for(var N=0;N<u.length;N++){var R=u[N];$&&R.done($),x&&R.aborted(x),l.force&&R.duration(l.duration),R.start(l.easing)}return u}function copyArrShallow(a,s,l){for(var o=0;o<l;o++)a[o]=s[o]}function is2DArray(a){return isArrayLike(a[0])}function copyValue(a,s,l){if(isArrayLike(s[l]))if(isArrayLike(a[l])||(a[l]=[]),isTypedArray(s[l])){var o=s[l].length;a[l].length!==o&&(a[l]=new s[l].constructor(o),copyArrShallow(a[l],s[l],o))}else{var c=s[l],u=a[l],d=c.length;if(is2DArray(c))for(var f=c[0].length,g=0;g<d;g++)u[g]?copyArrShallow(u[g],c[g],f):u[g]=Array.prototype.slice.call(c[g]);else copyArrShallow(u,c,d);u.length=c.length}else a[l]=s[l]}function isValueSame(a,s){return a===s||isArrayLike(a)&&isArrayLike(s)&&is1DArraySame(a,s)}function is1DArraySame(a,s){var l=a.length;if(l!==s.length)return!1;for(var o=0;o<l;o++)if(a[o]!==s[o])return!1;return!0}function animateToShallow(a,s,l,o,c,u,d,f){for(var g=keys(o),y=c.duration,$=c.delay,x=c.additive,N=c.setToFinal,R=!isObject$5(u),j=a.animators,ne=[],se=0;se<g.length;se++){var ce=g[se],fe=o[ce];if(fe!=null&&l[ce]!=null&&(R||u[ce]))if(isObject$5(fe)&&!isArrayLike(fe)&&!isGradientObject(fe)){if(s){f||(l[ce]=fe,a.updateDuringAnimation(s));continue}animateToShallow(a,ce,l[ce],fe,c,u&&u[ce],d,f)}else ne.push(ce);else f||(l[ce]=fe,a.updateDuringAnimation(s),ne.push(ce))}var ea=ne.length;if(!x&&ea)for(var ta=0;ta<j.length;ta++){var na=j[ta];if(na.targetName===s){var aa=na.stopTracks(ne);if(aa){var ia=indexOf(j,na);j.splice(ia,1)}}}if(c.force||(ne=filter(ne,function(oa){return!isValueSame(o[oa],l[oa])}),ea=ne.length),ea>0||c.force&&!d.length){var sa=void 0,ra=void 0,la=void 0;if(f){ra={},N&&(sa={});for(var ta=0;ta<ea;ta++){var ce=ne[ta];ra[ce]=l[ce],N?sa[ce]=o[ce]:l[ce]=o[ce]}}else if(N){la={};for(var ta=0;ta<ea;ta++){var ce=ne[ta];la[ce]=cloneValue(l[ce]),copyValue(l,o,ce)}}var na=new Animator(l,!1,!1,x?filter(j,function(ca){return ca.targetName===s}):null);na.targetName=s,c.scope&&(na.scope=c.scope),N&&sa&&na.whenWithKeys(0,sa,ne),la&&na.whenWithKeys(0,la,ne),na.whenWithKeys(y??500,f?ra:o,ne).delay($||0),a.addAnimator(na,s),d.push(na)}}var Group$3=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;return o.isGroup=!0,o._children=[],o.attr(l),o}return s.prototype.childrenRef=function(){return this._children},s.prototype.children=function(){return this._children.slice()},s.prototype.childAt=function(l){return this._children[l]},s.prototype.childOfName=function(l){for(var o=this._children,c=0;c<o.length;c++)if(o[c].name===l)return o[c]},s.prototype.childCount=function(){return this._children.length},s.prototype.add=function(l){return l&&l!==this&&l.parent!==this&&(this._children.push(l),this._doAdd(l)),this},s.prototype.addBefore=function(l,o){if(l&&l!==this&&l.parent!==this&&o&&o.parent===this){var c=this._children,u=c.indexOf(o);u>=0&&(c.splice(u,0,l),this._doAdd(l))}return this},s.prototype.replace=function(l,o){var c=indexOf(this._children,l);return c>=0&&this.replaceAt(o,c),this},s.prototype.replaceAt=function(l,o){var c=this._children,u=c[o];if(l&&l!==this&&l.parent!==this&&l!==u){c[o]=l,u.parent=null;var d=this.__zr;d&&u.removeSelfFromZr(d),this._doAdd(l)}return this},s.prototype._doAdd=function(l){l.parent&&l.parent.remove(l),l.parent=this;var o=this.__zr;o&&o!==l.__zr&&l.addSelfToZr(o),o&&o.refresh()},s.prototype.remove=function(l){var o=this.__zr,c=this._children,u=indexOf(c,l);return u<0?this:(c.splice(u,1),l.parent=null,o&&l.removeSelfFromZr(o),o&&o.refresh(),this)},s.prototype.removeAll=function(){for(var l=this._children,o=this.__zr,c=0;c<l.length;c++){var u=l[c];o&&u.removeSelfFromZr(o),u.parent=null}return l.length=0,this},s.prototype.eachChild=function(l,o){for(var c=this._children,u=0;u<c.length;u++){var d=c[u];l.call(o,d,u)}return this},s.prototype.traverse=function(l,o){for(var c=0;c<this._children.length;c++){var u=this._children[c],d=l.call(o,u);u.isGroup&&!d&&u.traverse(l,o)}return this},s.prototype.addSelfToZr=function(l){a.prototype.addSelfToZr.call(this,l);for(var o=0;o<this._children.length;o++){var c=this._children[o];c.addSelfToZr(l)}},s.prototype.removeSelfFromZr=function(l){a.prototype.removeSelfFromZr.call(this,l);for(var o=0;o<this._children.length;o++){var c=this._children[o];c.removeSelfFromZr(l)}},s.prototype.getBoundingRect=function(l){for(var o=new BoundingRect(0,0,0,0),c=l||this._children,u=[],d=null,f=0;f<c.length;f++){var g=c[f];if(!(g.ignore||g.invisible)){var y=g.getBoundingRect(),$=g.getLocalTransform(u);$?(BoundingRect.applyTransform(o,y,$),d=d||o.clone(),d.union(o)):(d=d||y.clone(),d.union(y))}}return d||o},s}(Element$1);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(a){delete instances$1[a]}function isDarkMode(a){if(!a)return!1;if(typeof a=="string")return lum(a,1)<DARK_MODE_THRESHOLD;if(a.colorStops){for(var s=a.colorStops,l=0,o=s.length,c=0;c<o;c++)l+=lum(s[c].color,1);return l/=o,l<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function a(s,l,o){var c=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,o=o||{},this.dom=l,this.id=s;var u=new Storage,d=o.renderer||"canvas";painterCtors[d]||(d=keys(painterCtors)[0]),o.useDirtyRect=o.useDirtyRect==null?!1:o.useDirtyRect;var f=new painterCtors[d](l,u,o,s),g=o.ssr||f.ssrOnly;this.storage=u,this.painter=f;var y=!env.node&&!env.worker&&!g?new HandlerDomProxy(f.getViewportRoot(),f.root):null,$=o.useCoarsePointer,x=$==null||$==="auto"?env.touchEventsSupported:!!$,N=44,R;x&&(R=retrieve2(o.pointerSize,N)),this.handler=new Handler(u,f,y,f.root,R),this.animation=new Animation({stage:{update:g?null:function(){return c._flush(!0)}}}),g||this.animation.start()}return a.prototype.add=function(s){this._disposed||!s||(this.storage.addRoot(s),s.addSelfToZr(this),this.refresh())},a.prototype.remove=function(s){this._disposed||!s||(this.storage.delRoot(s),s.removeSelfFromZr(this),this.refresh())},a.prototype.configLayer=function(s,l){this._disposed||(this.painter.configLayer&&this.painter.configLayer(s,l),this.refresh())},a.prototype.setBackgroundColor=function(s){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(s),this.refresh(),this._backgroundColor=s,this._darkMode=isDarkMode(s))},a.prototype.getBackgroundColor=function(){return this._backgroundColor},a.prototype.setDarkMode=function(s){this._darkMode=s},a.prototype.isDarkMode=function(){return this._darkMode},a.prototype.refreshImmediately=function(s){this._disposed||(s||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},a.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},a.prototype.flush=function(){this._disposed||this._flush(!1)},a.prototype._flush=function(s){var l,o=getTime();this._needsRefresh&&(l=!0,this.refreshImmediately(s)),this._needsRefreshHover&&(l=!0,this.refreshHoverImmediately());var c=getTime();l?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:c-o})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},a.prototype.setSleepAfterStill=function(s){this._sleepAfterStill=s},a.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},a.prototype.refreshHover=function(){this._needsRefreshHover=!0},a.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},a.prototype.resize=function(s){this._disposed||(s=s||{},this.painter.resize(s.width,s.height),this.handler.resize())},a.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},a.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},a.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},a.prototype.setCursorStyle=function(s){this._disposed||this.handler.setCursorStyle(s)},a.prototype.findHover=function(s,l){if(!this._disposed)return this.handler.findHover(s,l)},a.prototype.on=function(s,l,o){return this._disposed||this.handler.on(s,l,o),this},a.prototype.off=function(s,l){this._disposed||this.handler.off(s,l)},a.prototype.trigger=function(s,l){this._disposed||this.handler.trigger(s,l)},a.prototype.clear=function(){if(!this._disposed){for(var s=this.storage.getRoots(),l=0;l<s.length;l++)s[l]instanceof Group$3&&s[l].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},a.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},a}();function init$2(a,s){var l=new ZRender(guid(),a,s);return instances$1[l.id]=l,l}function registerPainter(a,s){painterCtors[a]=s}var ssrDataGetter;function getElementSSRData(a){if(typeof ssrDataGetter=="function")return ssrDataGetter(a)}function registerSSRDataGetter(a){ssrDataGetter=a}var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(a){return a.replace(/^\s+|\s+$/g,"")}function linearMap$2(a,s,l,o){var c=s[0],u=s[1],d=l[0],f=l[1],g=u-c,y=f-d;if(g===0)return y===0?d:(d+f)/2;if(o)if(g>0){if(a<=c)return d;if(a>=u)return f}else{if(a>=c)return d;if(a<=u)return f}else{if(a===c)return d;if(a===u)return f}return(a-c)/g*y+d}function parsePercent(a,s){switch(a){case"center":case"middle":a="50%";break;case"left":case"top":a="0%";break;case"right":case"bottom":a="100%";break}return isString$2(a)?_trim(a).match(/%$/)?parseFloat(a)/100*s:parseFloat(a):a==null?NaN:+a}function round$4(a,s,l){return s==null&&(s=10),s=Math.min(Math.max(0,s),ROUND_SUPPORTED_PRECISION_MAX),a=(+a).toFixed(s),l?a:+a}function asc$2(a){return a.sort(function(s,l){return s-l}),a}function getPrecision(a){if(a=+a,isNaN(a))return 0;if(a>1e-14){for(var s=1,l=0;l<15;l++,s*=10)if(Math.round(a*s)/s===a)return l}return getPrecisionSafe(a)}function getPrecisionSafe(a){var s=a.toString().toLowerCase(),l=s.indexOf("e"),o=l>0?+s.slice(l+1):0,c=l>0?l:s.length,u=s.indexOf("."),d=u<0?0:c-1-u;return Math.max(0,d-o)}function getPixelPrecision(a,s){var l=Math.log,o=Math.LN10,c=Math.floor(l(a[1]-a[0])/o),u=Math.round(l(Math.abs(s[1]-s[0]))/o),d=Math.min(Math.max(-c+u,0),20);return isFinite(d)?d:20}function getPercentSeats(a,s){var l=reduce(a,function(R,j){return R+(isNaN(j)?0:j)},0);if(l===0)return[];for(var o=Math.pow(10,s),c=map$1(a,function(R){return(isNaN(R)?0:R)/l*o*100}),u=o*100,d=map$1(c,function(R){return Math.floor(R)}),f=reduce(d,function(R,j){return R+j},0),g=map$1(c,function(R,j){return R-d[j]});f<u;){for(var y=Number.NEGATIVE_INFINITY,$=null,x=0,N=g.length;x<N;++x)g[x]>y&&(y=g[x],$=x);++d[$],g[$]=0,++f}return map$1(d,function(R){return R/o})}function addSafe(a,s){var l=Math.max(getPrecision(a),getPrecision(s)),o=a+s;return l>ROUND_SUPPORTED_PRECISION_MAX?o:round$4(o,l)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(a){var s=Math.PI*2;return(a%s+s)%s}function isRadianAroundZero(a){return a>-RADIAN_EPSILON&&a<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(a){if(a instanceof Date)return a;if(isString$2(a)){var s=TIME_REG.exec(a);if(!s)return new Date(NaN);if(s[8]){var l=+s[4]||0;return s[8].toUpperCase()!=="Z"&&(l-=+s[8].slice(0,3)),new Date(Date.UTC(+s[1],+(s[2]||1)-1,+s[3]||1,l,+(s[5]||0),+s[6]||0,s[7]?+s[7].substring(0,3):0))}else return new Date(+s[1],+(s[2]||1)-1,+s[3]||1,+s[4]||0,+(s[5]||0),+s[6]||0,s[7]?+s[7].substring(0,3):0)}else if(a==null)return new Date(NaN);return new Date(Math.round(a))}function quantity(a){return Math.pow(10,quantityExponent(a))}function quantityExponent(a){if(a===0)return 0;var s=Math.floor(Math.log(a)/Math.LN10);return a/Math.pow(10,s)>=10&&s++,s}function nice(a,s){var l=quantityExponent(a),o=Math.pow(10,l),c=a/o,u;return c<1.5?u=1:c<2.5?u=2:c<4?u=3:c<7?u=5:u=10,a=u*o,l>=-20?+a.toFixed(l<0?-l:0):a}function quantile(a,s){var l=(a.length-1)*s+1,o=Math.floor(l),c=+a[o-1],u=l-o;return u?c+u*(a[o]-c):c}function reformIntervals(a){a.sort(function(g,y){return f(g,y,0)?-1:1});for(var s=-1/0,l=1,o=0;o<a.length;){for(var c=a[o].interval,u=a[o].close,d=0;d<2;d++)c[d]<=s&&(c[d]=s,u[d]=d?1:1-l),s=c[d],l=u[d];c[0]===c[1]&&u[0]*u[1]!==1?a.splice(o,1):o++}return a;function f(g,y,$){return g.interval[$]<y.interval[$]||g.interval[$]===y.interval[$]&&(g.close[$]-y.close[$]===($?-1:1)||!$&&f(g,y,1))}}function numericToNumber(a){var s=parseFloat(a);return s==a&&(s!==0||!isString$2(a)||a.indexOf("x")<=0)?s:NaN}function isNumeric(a){return!isNaN(numericToNumber(a))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(a,s){return s===0?a:getGreatestCommonDividor(s,a%s)}function getLeastCommonMultiple(a,s){return a==null?s:s==null?a:a*s/getGreatestCommonDividor(a,s)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(a,s,l){if(hasConsole){{if(storedLogs[s])return;storedLogs[s]=!0}console[a](ECHARTS_PREFIX+s)}}function warn(a,s){outputLog("warn",a)}function throwError(a){throw new Error(a)}function interpolateNumber(a,s,l){return(s-a)*l+a}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(a){return a instanceof Array?a:a==null?[]:[a]}function defaultEmphasis(a,s,l){if(a){a[s]=a[s]||{},a.emphasis=a.emphasis||{},a.emphasis[s]=a.emphasis[s]||{};for(var o=0,c=l.length;o<c;o++){var u=l[o];!a.emphasis[s].hasOwnProperty(u)&&a[s].hasOwnProperty(u)&&(a.emphasis[s][u]=a[s][u])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(a){return isObject$5(a)&&!isArray$3(a)&&!(a instanceof Date)?a.value:a}function isDataItemOption(a){return isObject$5(a)&&!(a instanceof Array)}function mappingToExists(a,s,l){var o=l==="normalMerge",c=l==="replaceMerge",u=l==="replaceAll";a=a||[],s=(s||[]).slice();var d=createHashMap();each$f(s,function(g,y){if(!isObject$5(g)){s[y]=null;return}});var f=prepareResult(a,d,l);return(o||c)&&mappingById(f,a,d,s),o&&mappingByName(f,s),o||c?mappingByIndex(f,s,c):u&&mappingInReplaceAllMode(f,s),makeIdAndName(f),f}function prepareResult(a,s,l){var o=[];if(l==="replaceAll")return o;for(var c=0;c<a.length;c++){var u=a[c];u&&u.id!=null&&s.set(u.id,c),o.push({existing:l==="replaceMerge"||isComponentIdInternal(u)?null:u,newOption:null,keyInfo:null,brandNew:null})}return o}function mappingById(a,s,l,o){each$f(o,function(c,u){if(!(!c||c.id==null)){var d=makeComparableKey(c.id),f=l.get(d);if(f!=null){var g=a[f];assert(!g.newOption,'Duplicated option on id "'+d+'".'),g.newOption=c,g.existing=s[f],o[u]=null}}})}function mappingByName(a,s){each$f(s,function(l,o){if(!(!l||l.name==null))for(var c=0;c<a.length;c++){var u=a[c].existing;if(!a[c].newOption&&u&&(u.id==null||l.id==null)&&!isComponentIdInternal(l)&&!isComponentIdInternal(u)&&keyExistAndEqual("name",u,l)){a[c].newOption=l,s[o]=null;return}}})}function mappingByIndex(a,s,l){each$f(s,function(o){if(o){for(var c,u=0;(c=a[u])&&(c.newOption||isComponentIdInternal(c.existing)||c.existing&&o.id!=null&&!keyExistAndEqual("id",o,c.existing));)u++;c?(c.newOption=o,c.brandNew=l):a.push({newOption:o,brandNew:l,existing:null,keyInfo:null}),u++}})}function mappingInReplaceAllMode(a,s){each$f(s,function(l){a.push({newOption:l,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(a){var s=createHashMap();each$f(a,function(l){var o=l.existing;o&&s.set(o.id,l)}),each$f(a,function(l){var o=l.newOption;assert(!o||o.id==null||!s.get(o.id)||s.get(o.id)===l,"id duplicates: "+(o&&o.id)),o&&o.id!=null&&s.set(o.id,l),!l.keyInfo&&(l.keyInfo={})}),each$f(a,function(l,o){var c=l.existing,u=l.newOption,d=l.keyInfo;if(isObject$5(u)){if(d.name=u.name!=null?makeComparableKey(u.name):c?c.name:DUMMY_COMPONENT_NAME_PREFIX+o,c)d.id=makeComparableKey(c.id);else if(u.id!=null)d.id=makeComparableKey(u.id);else{var f=0;do d.id="\0"+d.name+"\0"+f++;while(s.get(d.id))}s.set(d.id,l)}})}function keyExistAndEqual(a,s,l){var o=convertOptionIdName(s[a],null),c=convertOptionIdName(l[a],null);return o!=null&&c!=null&&o===c}function makeComparableKey(a){return convertOptionIdName(a,"")}function convertOptionIdName(a,s){return a==null?s:isString$2(a)?a:isNumber$2(a)||isStringSafe(a)?a+"":s}function isNameSpecified(a){var s=a.name;return!!(s&&s.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(a){return a&&a.id!=null&&makeComparableKey(a.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(a){return INTERNAL_COMPONENT_ID_PREFIX+a}function setComponentTypeToKeyInfo(a,s,l){each$f(a,function(o){var c=o.newOption;isObject$5(c)&&(o.keyInfo.mainType=s,o.keyInfo.subType=determineSubType(s,c,o.existing,l))})}function determineSubType(a,s,l,o){var c=s.type?s.type:l?l.subType:o.determineSubType(a,s);return c}function compressBatches(a,s){var l={},o={};return c(a||[],l),c(s||[],o,l),[u(l),u(o)];function c(d,f,g){for(var y=0,$=d.length;y<$;y++){var x=convertOptionIdName(d[y].seriesId,null);if(x==null)return;for(var N=normalizeToArray(d[y].dataIndex),R=g&&g[x],j=0,ne=N.length;j<ne;j++){var se=N[j];R&&R[se]?R[se]=null:(f[x]||(f[x]={}))[se]=1}}}function u(d,f){var g=[];for(var y in d)if(d.hasOwnProperty(y)&&d[y]!=null)if(f)g.push(+y);else{var $=u(d[y],!0);$.length&&g.push({seriesId:y,dataIndex:$})}return g}}function queryDataIndex(a,s){if(s.dataIndexInside!=null)return s.dataIndexInside;if(s.dataIndex!=null)return isArray$3(s.dataIndex)?map$1(s.dataIndex,function(l){return a.indexOfRawIndex(l)}):a.indexOfRawIndex(s.dataIndex);if(s.name!=null)return isArray$3(s.name)?map$1(s.name,function(l){return a.indexOfName(l)}):a.indexOfName(s.name)}function makeInner(){var a="__ec_inner_"+innerUniqueIndex++;return function(s){return s[a]||(s[a]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(a,s,l){var o=preParseFinder(s,l),c=o.mainTypeSpecified,u=o.queryOptionMap,d=o.others,f=d,g=l?l.defaultMainType:null;return!c&&g&&u.set(g,{}),u.each(function(y,$){var x=queryReferringComponents(a,$,y,{useDefault:g===$,enableAll:l&&l.enableAll!=null?l.enableAll:!0,enableNone:l&&l.enableNone!=null?l.enableNone:!0});f[$+"Models"]=x.models,f[$+"Model"]=x.models[0]}),f}function preParseFinder(a,s){var l;if(isString$2(a)){var o={};o[a+"Index"]=0,l=o}else l=a;var c=createHashMap(),u={},d=!1;return each$f(l,function(f,g){if(g==="dataIndex"||g==="dataIndexInside"){u[g]=f;return}var y=g.match(/^(\w+)(Index|Id|Name)$/)||[],$=y[1],x=(y[2]||"").toLowerCase();if(!(!$||!x||s&&s.includeMainTypes&&indexOf(s.includeMainTypes,$)<0)){d=d||!!$;var N=c.get($)||c.set($,{});N[x]=f}}),{mainTypeSpecified:d,queryOptionMap:c,others:u}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(a,s,l,o){o=o||SINGLE_REFERRING;var c=l.index,u=l.id,d=l.name,f={models:null,specified:c!=null||u!=null||d!=null};if(!f.specified){var g=void 0;return f.models=o.useDefault&&(g=a.getComponent(s))?[g]:[],f}return c==="none"||c===!1?(assert(o.enableNone,'`"none"` or `false` is not a valid value on index option.'),f.models=[],f):(c==="all"&&(assert(o.enableAll,'`"all"` is not a valid value on index option.'),c=u=d=null),f.models=a.queryComponents({mainType:s,index:c,id:u,name:d}),f)}function setAttribute(a,s,l){a.setAttribute?a.setAttribute(s,l):a[s]=l}function getAttribute(a,s){return a.getAttribute?a.getAttribute(s):a[s]}function getTooltipRenderMode(a){return a==="auto"?env.domSupported?"html":"richText":a||"html"}function groupData(a,s){var l=createHashMap(),o=[];return each$f(a,function(c){var u=s(c);(l.get(u)||(o.push(u),l.set(u,[]))).push(c)}),{keys:o,buckets:l}}function interpolateRawValues(a,s,l,o,c){var u=s==null||s==="auto";if(o==null)return o;if(isNumber$2(o)){var d=interpolateNumber(l||0,o,c);return round$4(d,u?Math.max(getPrecision(l||0),getPrecision(o)):s)}else{if(isString$2(o))return c<1?l:o;for(var f=[],g=l,y=o,$=Math.max(g?g.length:0,y.length),x=0;x<$;++x){var N=a.getDimensionInfo(x);if(N&&N.type==="ordinal")f[x]=(c<1&&g?g:y)[x];else{var R=g&&g[x]?g[x]:0,j=y[x],d=interpolateNumber(R,j,c);f[x]=round$4(d,u?Math.max(getPrecision(R),getPrecision(j)):s)}}return f}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(a){var s={main:"",sub:""};if(a){var l=a.split(TYPE_DELIMITER);s.main=l[0]||"",s.sub=l[1]||""}return s}function checkClassType(a){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(a),'componentType "'+a+'" illegal')}function isExtendedClass(a){return!!(a&&a[IS_EXTENDED_CLASS])}function enableClassExtend(a,s){a.$constructor=a,a.extend=function(l){var o=this,c;return isESClass(o)?c=function(u){__extends(d,u);function d(){return u.apply(this,arguments)||this}return d}(o):(c=function(){(l.$constructor||o).apply(this,arguments)},inherits(c,this)),extend(c.prototype,l),c[IS_EXTENDED_CLASS]=!0,c.extend=this.extend,c.superCall=superCall,c.superApply=superApply,c.superClass=o,c}}function isESClass(a){return isFunction$2(a)&&/^class\s/.test(Function.prototype.toString.call(a))}function mountExtend(a,s){a.extend=s.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(a){var s=["__\0is_clz",classBase++].join("_");a.prototype[s]=!0,a.isInstance=function(l){return!!(l&&l[s])}}function superCall(a,s){for(var l=[],o=2;o<arguments.length;o++)l[o-2]=arguments[o];return this.superClass.prototype[s].apply(a,l)}function superApply(a,s,l){return this.superClass.prototype[s].apply(a,l)}function enableClassManagement(a){var s={};a.registerClass=function(o){var c=o.type||o.prototype.type;if(c){checkClassType(c),o.prototype.type=c;var u=parseClassType(c);if(!u.sub)s[u.main]=o;else if(u.sub!==IS_CONTAINER){var d=l(u);d[u.sub]=o}}return o},a.getClass=function(o,c,u){var d=s[o];if(d&&d[IS_CONTAINER]&&(d=c?d[c]:null),u&&!d)throw new Error(c?"Component "+o+"."+(c||"")+" is used but not imported.":o+".type should be specified.");return d},a.getClassesByMainType=function(o){var c=parseClassType(o),u=[],d=s[c.main];return d&&d[IS_CONTAINER]?each$f(d,function(f,g){g!==IS_CONTAINER&&u.push(f)}):u.push(d),u},a.hasClass=function(o){var c=parseClassType(o);return!!s[c.main]},a.getAllClassMainTypes=function(){var o=[];return each$f(s,function(c,u){o.push(u)}),o},a.hasSubTypes=function(o){var c=parseClassType(o),u=s[c.main];return u&&u[IS_CONTAINER]};function l(o){var c=s[o.main];return(!c||!c[IS_CONTAINER])&&(c=s[o.main]={},c[IS_CONTAINER]=!0),c}}function makeStyleMapper(a,s){for(var l=0;l<a.length;l++)a[l][1]||(a[l][1]=a[l][0]);return s=s||!1,function(o,c,u){for(var d={},f=0;f<a.length;f++){var g=a[f][1];if(!(c&&indexOf(c,g)>=0||u&&indexOf(u,g)<0)){var y=o.getShallow(g,s);y!=null&&(d[a[f][0]]=y)}}return d}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function a(){}return a.prototype.getAreaStyle=function(s,l){return getAreaStyle(this,s,l)},a}(),globalImageCache=new LRU(50);function findExistImage(a){if(typeof a=="string"){var s=globalImageCache.get(a);return s&&s.image}else return a}function createOrUpdateImage(a,s,l,o,c){if(a)if(typeof a=="string"){if(s&&s.__zrImageSrc===a||!l)return s;var u=globalImageCache.get(a),d={hostEl:l,cb:o,cbPayload:c};return u?(s=u.image,!isImageReady(s)&&u.pending.push(d)):(s=platformApi.loadImage(a,imageOnLoad,imageOnLoad),s.__zrImageSrc=a,globalImageCache.put(a,s.__cachedImgObj={image:s,pending:[d]})),s}else return a;else return s}function imageOnLoad(){var a=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var s=0;s<a.pending.length;s++){var l=a.pending[s],o=l.cb;o&&o(this,l.cbPayload),l.hostEl.dirty()}a.pending.length=0}function isImageReady(a){return a&&a.width&&a.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(a,s,l,o,c){if(!s)return"";var u=(a+"").split(`
`);c=prepareTruncateOptions(s,l,o,c);for(var d=0,f=u.length;d<f;d++)u[d]=truncateSingleLine(u[d],c);return u.join(`
`)}function prepareTruncateOptions(a,s,l,o){o=o||{};var c=extend({},o);c.font=s,l=retrieve2(l,"..."),c.maxIterations=retrieve2(o.maxIterations,2);var u=c.minChar=retrieve2(o.minChar,0);c.cnCharWidth=getWidth("国",s);var d=c.ascCharWidth=getWidth("a",s);c.placeholder=retrieve2(o.placeholder,"");for(var f=a=Math.max(0,a-1),g=0;g<u&&f>=d;g++)f-=d;var y=getWidth(l,s);return y>f&&(l="",y=0),f=a-y,c.ellipsis=l,c.ellipsisWidth=y,c.contentWidth=f,c.containerWidth=a,c}function truncateSingleLine(a,s){var l=s.containerWidth,o=s.font,c=s.contentWidth;if(!l)return"";var u=getWidth(a,o);if(u<=l)return a;for(var d=0;;d++){if(u<=c||d>=s.maxIterations){a+=s.ellipsis;break}var f=d===0?estimateLength(a,c,s.ascCharWidth,s.cnCharWidth):u>0?Math.floor(a.length*c/u):0;a=a.substr(0,f),u=getWidth(a,o)}return a===""&&(a=s.placeholder),a}function estimateLength(a,s,l,o){for(var c=0,u=0,d=a.length;u<d&&c<s;u++){var f=a.charCodeAt(u);c+=0<=f&&f<=127?l:o}return u}function parsePlainText(a,s){a!=null&&(a+="");var l=s.overflow,o=s.padding,c=s.font,u=l==="truncate",d=getLineHeight(c),f=retrieve2(s.lineHeight,d),g=!!s.backgroundColor,y=s.lineOverflow==="truncate",$=s.width,x;$!=null&&(l==="break"||l==="breakAll")?x=a?wrapText(a,s.font,$,l==="breakAll",0).lines:[]:x=a?a.split(`
`):[];var N=x.length*f,R=retrieve2(s.height,N);if(N>R&&y){var j=Math.floor(R/f);x=x.slice(0,j)}if(a&&u&&$!=null)for(var ne=prepareTruncateOptions($,c,s.ellipsis,{minChar:s.truncateMinChar,placeholder:s.placeholder}),se=0;se<x.length;se++)x[se]=truncateSingleLine(x[se],ne);for(var ce=R,fe=0,se=0;se<x.length;se++)fe=Math.max(getWidth(x[se],c),fe);$==null&&($=fe);var ea=fe;return o&&(ce+=o[0]+o[2],ea+=o[1]+o[3],$+=o[1]+o[3]),g&&(ea=$),{lines:x,height:R,outerWidth:ea,outerHeight:ce,lineHeight:f,calculatedLineHeight:d,contentWidth:fe,contentHeight:N,width:$}}var RichTextToken=function(){function a(){}return a}(),RichTextLine=function(){function a(s){this.tokens=[],s&&(this.tokens=s)}return a}(),RichTextContentBlock=function(){function a(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return a}();function parseRichText(a,s){var l=new RichTextContentBlock;if(a!=null&&(a+=""),!a)return l;for(var o=s.width,c=s.height,u=s.overflow,d=(u==="break"||u==="breakAll")&&o!=null?{width:o,accumWidth:0,breakAll:u==="breakAll"}:null,f=STYLE_REG.lastIndex=0,g;(g=STYLE_REG.exec(a))!=null;){var y=g.index;y>f&&pushTokens(l,a.substring(f,y),s,d),pushTokens(l,g[2],s,d,g[1]),f=STYLE_REG.lastIndex}f<a.length&&pushTokens(l,a.substring(f,a.length),s,d);var $=[],x=0,N=0,R=s.padding,j=u==="truncate",ne=s.lineOverflow==="truncate";function se(fa,ma,va){fa.width=ma,fa.lineHeight=va,x+=va,N=Math.max(N,ma)}e:for(var ce=0;ce<l.lines.length;ce++){for(var fe=l.lines[ce],ea=0,ta=0,na=0;na<fe.tokens.length;na++){var aa=fe.tokens[na],ia=aa.styleName&&s.rich[aa.styleName]||{},sa=aa.textPadding=ia.padding,ra=sa?sa[1]+sa[3]:0,la=aa.font=ia.font||s.font;aa.contentHeight=getLineHeight(la);var oa=retrieve2(ia.height,aa.contentHeight);if(aa.innerHeight=oa,sa&&(oa+=sa[0]+sa[2]),aa.height=oa,aa.lineHeight=retrieve3(ia.lineHeight,s.lineHeight,oa),aa.align=ia&&ia.align||s.align,aa.verticalAlign=ia&&ia.verticalAlign||"middle",ne&&c!=null&&x+aa.lineHeight>c){na>0?(fe.tokens=fe.tokens.slice(0,na),se(fe,ta,ea),l.lines=l.lines.slice(0,ce+1)):l.lines=l.lines.slice(0,ce);break e}var ca=ia.width,pa=ca==null||ca==="auto";if(typeof ca=="string"&&ca.charAt(ca.length-1)==="%")aa.percentWidth=ca,$.push(aa),aa.contentWidth=getWidth(aa.text,la);else{if(pa){var ua=ia.backgroundColor,da=ua&&ua.image;da&&(da=findExistImage(da),isImageReady(da)&&(aa.width=Math.max(aa.width,da.width*oa/da.height)))}var ha=j&&o!=null?o-ta:null;ha!=null&&ha<aa.width?!pa||ha<ra?(aa.text="",aa.width=aa.contentWidth=0):(aa.text=truncateText(aa.text,ha-ra,la,s.ellipsis,{minChar:s.truncateMinChar}),aa.width=aa.contentWidth=getWidth(aa.text,la)):aa.contentWidth=getWidth(aa.text,la)}aa.width+=ra,ta+=aa.width,ia&&(ea=Math.max(ea,aa.lineHeight))}se(fe,ta,ea)}l.outerWidth=l.width=retrieve2(o,N),l.outerHeight=l.height=retrieve2(c,x),l.contentHeight=x,l.contentWidth=N,R&&(l.outerWidth+=R[1]+R[3],l.outerHeight+=R[0]+R[2]);for(var ce=0;ce<$.length;ce++){var aa=$[ce],ga=aa.percentWidth;aa.width=parseInt(ga,10)/100*l.width}return l}function pushTokens(a,s,l,o,c){var u=s==="",d=c&&l.rich[c]||{},f=a.lines,g=d.font||l.font,y=!1,$,x;if(o){var N=d.padding,R=N?N[1]+N[3]:0;if(d.width!=null&&d.width!=="auto"){var j=parsePercent$1(d.width,o.width)+R;f.length>0&&j+o.accumWidth>o.width&&($=s.split(`
`),y=!0),o.accumWidth=j}else{var ne=wrapText(s,g,o.width,o.breakAll,o.accumWidth);o.accumWidth=ne.accumWidth+R,x=ne.linesWidths,$=ne.lines}}else $=s.split(`
`);for(var se=0;se<$.length;se++){var ce=$[se],fe=new RichTextToken;if(fe.styleName=c,fe.text=ce,fe.isLineHolder=!ce&&!u,typeof d.width=="number"?fe.width=d.width:fe.width=x?x[se]:getWidth(ce,g),!se&&!y){var ea=(f[f.length-1]||(f[0]=new RichTextLine)).tokens,ta=ea.length;ta===1&&ea[0].isLineHolder?ea[0]=fe:(ce||!ta||u)&&ea.push(fe)}else f.push(new RichTextLine([fe]))}}function isAlphabeticLetter(a){var s=a.charCodeAt(0);return s>=32&&s<=591||s>=880&&s<=4351||s>=4608&&s<=5119||s>=7680&&s<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(a,s){return a[s]=!0,a},{});function isWordBreakChar(a){return isAlphabeticLetter(a)?!!breakCharMap[a]:!0}function wrapText(a,s,l,o,c){for(var u=[],d=[],f="",g="",y=0,$=0,x=0;x<a.length;x++){var N=a.charAt(x);if(N===`
`){g&&(f+=g,$+=y),u.push(f),d.push($),f="",g="",y=0,$=0;continue}var R=getWidth(N,s),j=o?!1:!isWordBreakChar(N);if(u.length?$+R>l:c+$+R>l){$?(f||g)&&(j?(f||(f=g,g="",y=0,$=y),u.push(f),d.push($-y),g+=N,y+=R,f="",$=y):(g&&(f+=g,g="",y=0),u.push(f),d.push($),f=N,$=R)):j?(u.push(g),d.push(y),g=N,y=R):(u.push(N),d.push(R));continue}$+=R,j?(g+=N,y+=R):(g&&(f+=g,g="",y=0),f+=N)}return!u.length&&!f&&(f=a,g="",y=0),g&&(f+=g),f&&(u.push(f),d.push($)),u.length===1&&($+=c),{accumWidth:$,lines:u,linesWidths:d}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype._init=function(l){for(var o=keys(l),c=0;c<o.length;c++){var u=o[c];u==="style"?this.useStyle(l[u]):a.prototype.attrKV.call(this,u,l[u])}this.style||this.useStyle({})},s.prototype.beforeBrush=function(){},s.prototype.afterBrush=function(){},s.prototype.innerBeforeBrush=function(){},s.prototype.innerAfterBrush=function(){},s.prototype.shouldBePainted=function(l,o,c,u){var d=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,l,o)||d&&!d[0]&&!d[3])return!1;if(c&&this.__clipPaths){for(var f=0;f<this.__clipPaths.length;++f)if(this.__clipPaths[f].isZeroArea())return!1}if(u&&this.parent)for(var g=this.parent;g;){if(g.ignore)return!1;g=g.parent}return!0},s.prototype.contain=function(l,o){return this.rectContain(l,o)},s.prototype.traverse=function(l,o){l.call(o,this)},s.prototype.rectContain=function(l,o){var c=this.transformCoordToLocal(l,o),u=this.getBoundingRect();return u.contain(c[0],c[1])},s.prototype.getPaintRect=function(){var l=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,c=this.getBoundingRect(),u=this.style,d=u.shadowBlur||0,f=u.shadowOffsetX||0,g=u.shadowOffsetY||0;l=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),o?BoundingRect.applyTransform(l,c,o):l.copy(c),(d||f||g)&&(l.width+=d*2+Math.abs(f),l.height+=d*2+Math.abs(g),l.x=Math.min(l.x,l.x+f-d),l.y=Math.min(l.y,l.y+g-d));var y=this.dirtyRectTolerance;l.isZero()||(l.x=Math.floor(l.x-y),l.y=Math.floor(l.y-y),l.width=Math.ceil(l.width+1+y*2),l.height=Math.ceil(l.height+1+y*2))}return l},s.prototype.setPrevPaintRect=function(l){l?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(l)):this._prevPaintRect=null},s.prototype.getPrevPaintRect=function(){return this._prevPaintRect},s.prototype.animateStyle=function(l){return this.animate("style",l)},s.prototype.updateDuringAnimation=function(l){l==="style"?this.dirtyStyle():this.markRedraw()},s.prototype.attrKV=function(l,o){l!=="style"?a.prototype.attrKV.call(this,l,o):this.style?this.setStyle(o):this.useStyle(o)},s.prototype.setStyle=function(l,o){return typeof l=="string"?this.style[l]=o:extend(this.style,l),this.dirtyStyle(),this},s.prototype.dirtyStyle=function(l){l||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},s.prototype.dirty=function(){this.dirtyStyle()},s.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},s.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},s.prototype.createStyle=function(l){return createObject(DEFAULT_COMMON_STYLE,l)},s.prototype.useStyle=function(l){l[STYLE_MAGIC_KEY]||(l=this.createStyle(l)),this.__inHover?this.__hoverStyle=l:this.style=l,this.dirtyStyle()},s.prototype.isStyleObject=function(l){return l[STYLE_MAGIC_KEY]},s.prototype._innerSaveToNormal=function(l){a.prototype._innerSaveToNormal.call(this,l);var o=this._normalState;l.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(l,o,PRIMARY_STATES_KEYS)},s.prototype._applyStateObj=function(l,o,c,u,d,f){a.prototype._applyStateObj.call(this,l,o,c,u,d,f);var g=!(o&&u),y;if(o&&o.style?d?u?y=o.style:(y=this._mergeStyle(this.createStyle(),c.style),this._mergeStyle(y,o.style)):(y=this._mergeStyle(this.createStyle(),u?this.style:c.style),this._mergeStyle(y,o.style)):g&&(y=c.style),y)if(d){var $=this.style;if(this.style=this.createStyle(g?{}:$),g)for(var x=keys($),N=0;N<x.length;N++){var R=x[N];R in y&&(y[R]=y[R],this.style[R]=$[R])}for(var j=keys(y),N=0;N<j.length;N++){var R=j[N];this.style[R]=this.style[R]}this._transitionState(l,{style:y},f,this.getAnimationStyleProps())}else this.useStyle(y);for(var ne=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,N=0;N<ne.length;N++){var R=ne[N];o&&o[R]!=null?this[R]=o[R]:g&&c[R]!=null&&(this[R]=c[R])}},s.prototype._mergeStates=function(l){for(var o=a.prototype._mergeStates.call(this,l),c,u=0;u<l.length;u++){var d=l[u];d.style&&(c=c||{},this._mergeStyle(c,d.style))}return c&&(o.style=c),o},s.prototype._mergeStyle=function(l,o){return extend(l,o),l},s.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},s.initDefaultProps=function(){var l=s.prototype;l.type="displayable",l.invisible=!1,l.z=0,l.z2=0,l.zlevel=0,l.culling=!1,l.cursor="pointer",l.rectHover=!1,l.incremental=!1,l._rect=null,l.dirtyRectTolerance=0,l.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),s}(Element$1),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(a,s,l){return tmpRect.copy(a.getBoundingRect()),a.transform&&tmpRect.applyTransform(a.transform),viewRect.width=s,viewRect.height=l,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(a,s,l){if(a.length!==0){for(var o=a[0],c=o[0],u=o[0],d=o[1],f=o[1],g=1;g<a.length;g++)o=a[g],c=mathMin$9(c,o[0]),u=mathMax$9(u,o[0]),d=mathMin$9(d,o[1]),f=mathMax$9(f,o[1]);s[0]=c,s[1]=d,l[0]=u,l[1]=f}}function fromLine(a,s,l,o,c,u){c[0]=mathMin$9(a,l),c[1]=mathMin$9(s,o),u[0]=mathMax$9(a,l),u[1]=mathMax$9(s,o)}var xDim=[],yDim=[];function fromCubic(a,s,l,o,c,u,d,f,g,y){var $=cubicExtrema,x=cubicAt,N=$(a,l,c,d,xDim);g[0]=1/0,g[1]=1/0,y[0]=-1/0,y[1]=-1/0;for(var R=0;R<N;R++){var j=x(a,l,c,d,xDim[R]);g[0]=mathMin$9(j,g[0]),y[0]=mathMax$9(j,y[0])}N=$(s,o,u,f,yDim);for(var R=0;R<N;R++){var ne=x(s,o,u,f,yDim[R]);g[1]=mathMin$9(ne,g[1]),y[1]=mathMax$9(ne,y[1])}g[0]=mathMin$9(a,g[0]),y[0]=mathMax$9(a,y[0]),g[0]=mathMin$9(d,g[0]),y[0]=mathMax$9(d,y[0]),g[1]=mathMin$9(s,g[1]),y[1]=mathMax$9(s,y[1]),g[1]=mathMin$9(f,g[1]),y[1]=mathMax$9(f,y[1])}function fromQuadratic(a,s,l,o,c,u,d,f){var g=quadraticExtremum,y=quadraticAt$1,$=mathMax$9(mathMin$9(g(a,l,c),1),0),x=mathMax$9(mathMin$9(g(s,o,u),1),0),N=y(a,l,c,$),R=y(s,o,u,x);d[0]=mathMin$9(a,c,N),d[1]=mathMin$9(s,u,R),f[0]=mathMax$9(a,c,N),f[1]=mathMax$9(s,u,R)}function fromArc(a,s,l,o,c,u,d,f,g){var y=min$1,$=max$1,x=Math.abs(c-u);if(x%PI2$8<1e-4&&x>1e-4){f[0]=a-l,f[1]=s-o,g[0]=a+l,g[1]=s+o;return}if(start[0]=mathCos$4(c)*l+a,start[1]=mathSin$4(c)*o+s,end[0]=mathCos$4(u)*l+a,end[1]=mathSin$4(u)*o+s,y(f,start,end),$(g,start,end),c=c%PI2$8,c<0&&(c=c+PI2$8),u=u%PI2$8,u<0&&(u=u+PI2$8),c>u&&!d?u+=PI2$8:c<u&&d&&(c+=PI2$8),d){var N=u;u=c,c=N}for(var R=0;R<u;R+=Math.PI/2)R>c&&(extremity[0]=mathCos$4(R)*l+a,extremity[1]=mathSin$4(R)*o+s,y(f,extremity,f),$(g,extremity,g))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(a){var s=Math.round(a/PI$8*1e8)/1e8;return s%2*PI$8}function normalizeArcAngles(a,s){var l=modPI2(a[0]);l<0&&(l+=PI2$7);var o=l-a[0],c=a[1];c+=o,!s&&c-l>=PI2$7?c=l+PI2$7:s&&l-c>=PI2$7?c=l-PI2$7:!s&&l>c?c=l+(PI2$7-modPI2(l-c)):s&&l<c&&(c=l-(PI2$7-modPI2(c-l))),a[0]=l,a[1]=c}var PathProxy=function(){function a(s){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,s&&(this._saveData=!1),this._saveData&&(this.data=[])}return a.prototype.increaseVersion=function(){this._version++},a.prototype.getVersion=function(){return this._version},a.prototype.setScale=function(s,l,o){o=o||0,o>0&&(this._ux=mathAbs$2(o/devicePixelRatio/s)||0,this._uy=mathAbs$2(o/devicePixelRatio/l)||0)},a.prototype.setDPR=function(s){this.dpr=s},a.prototype.setContext=function(s){this._ctx=s},a.prototype.getContext=function(){return this._ctx},a.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},a.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},a.prototype.moveTo=function(s,l){return this._drawPendingPt(),this.addData(CMD$4.M,s,l),this._ctx&&this._ctx.moveTo(s,l),this._x0=s,this._y0=l,this._xi=s,this._yi=l,this},a.prototype.lineTo=function(s,l){var o=mathAbs$2(s-this._xi),c=mathAbs$2(l-this._yi),u=o>this._ux||c>this._uy;if(this.addData(CMD$4.L,s,l),this._ctx&&u&&this._ctx.lineTo(s,l),u)this._xi=s,this._yi=l,this._pendingPtDist=0;else{var d=o*o+c*c;d>this._pendingPtDist&&(this._pendingPtX=s,this._pendingPtY=l,this._pendingPtDist=d)}return this},a.prototype.bezierCurveTo=function(s,l,o,c,u,d){return this._drawPendingPt(),this.addData(CMD$4.C,s,l,o,c,u,d),this._ctx&&this._ctx.bezierCurveTo(s,l,o,c,u,d),this._xi=u,this._yi=d,this},a.prototype.quadraticCurveTo=function(s,l,o,c){return this._drawPendingPt(),this.addData(CMD$4.Q,s,l,o,c),this._ctx&&this._ctx.quadraticCurveTo(s,l,o,c),this._xi=o,this._yi=c,this},a.prototype.arc=function(s,l,o,c,u,d){this._drawPendingPt(),tmpAngles[0]=c,tmpAngles[1]=u,normalizeArcAngles(tmpAngles,d),c=tmpAngles[0],u=tmpAngles[1];var f=u-c;return this.addData(CMD$4.A,s,l,o,o,c,f,0,d?0:1),this._ctx&&this._ctx.arc(s,l,o,c,u,d),this._xi=mathCos$3(u)*o+s,this._yi=mathSin$3(u)*o+l,this},a.prototype.arcTo=function(s,l,o,c,u){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(s,l,o,c,u),this},a.prototype.rect=function(s,l,o,c){return this._drawPendingPt(),this._ctx&&this._ctx.rect(s,l,o,c),this.addData(CMD$4.R,s,l,o,c),this},a.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var s=this._ctx,l=this._x0,o=this._y0;return s&&s.closePath(),this._xi=l,this._yi=o,this},a.prototype.fill=function(s){s&&s.fill(),this.toStatic()},a.prototype.stroke=function(s){s&&s.stroke(),this.toStatic()},a.prototype.len=function(){return this._len},a.prototype.setData=function(s){var l=s.length;!(this.data&&this.data.length===l)&&hasTypedArray&&(this.data=new Float32Array(l));for(var o=0;o<l;o++)this.data[o]=s[o];this._len=l},a.prototype.appendPath=function(s){s instanceof Array||(s=[s]);for(var l=s.length,o=0,c=this._len,u=0;u<l;u++)o+=s[u].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(c+o));for(var u=0;u<l;u++)for(var d=s[u].data,f=0;f<d.length;f++)this.data[c++]=d[f];this._len=c},a.prototype.addData=function(s,l,o,c,u,d,f,g,y){if(this._saveData){var $=this.data;this._len+arguments.length>$.length&&(this._expandData(),$=this.data);for(var x=0;x<arguments.length;x++)$[this._len++]=arguments[x]}},a.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},a.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var s=[],l=0;l<this._len;l++)s[l]=this.data[l];this.data=s}},a.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var s=this.data;s instanceof Array&&(s.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(s)))}},a.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var s=this.data,l=0,o=0,c=0,u=0,d;for(d=0;d<this._len;){var f=s[d++],g=d===1;switch(g&&(l=s[d],o=s[d+1],c=l,u=o),f){case CMD$4.M:l=c=s[d++],o=u=s[d++],min2[0]=c,min2[1]=u,max2[0]=c,max2[1]=u;break;case CMD$4.L:fromLine(l,o,s[d],s[d+1],min2,max2),l=s[d++],o=s[d++];break;case CMD$4.C:fromCubic(l,o,s[d++],s[d++],s[d++],s[d++],s[d],s[d+1],min2,max2),l=s[d++],o=s[d++];break;case CMD$4.Q:fromQuadratic(l,o,s[d++],s[d++],s[d],s[d+1],min2,max2),l=s[d++],o=s[d++];break;case CMD$4.A:var y=s[d++],$=s[d++],x=s[d++],N=s[d++],R=s[d++],j=s[d++]+R;d+=1;var ne=!s[d++];g&&(c=mathCos$3(R)*x+y,u=mathSin$3(R)*N+$),fromArc(y,$,x,N,R,j,ne,min2,max2),l=mathCos$3(j)*x+y,o=mathSin$3(j)*N+$;break;case CMD$4.R:c=l=s[d++],u=o=s[d++];var se=s[d++],ce=s[d++];fromLine(c,u,c+se,u+ce,min2,max2);break;case CMD$4.Z:l=c,o=u;break}min$1(min,min,min2),max$1(max,max,max2)}return d===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},a.prototype._calculateLength=function(){var s=this.data,l=this._len,o=this._ux,c=this._uy,u=0,d=0,f=0,g=0;this._pathSegLen||(this._pathSegLen=[]);for(var y=this._pathSegLen,$=0,x=0,N=0;N<l;){var R=s[N++],j=N===1;j&&(u=s[N],d=s[N+1],f=u,g=d);var ne=-1;switch(R){case CMD$4.M:u=f=s[N++],d=g=s[N++];break;case CMD$4.L:{var se=s[N++],ce=s[N++],fe=se-u,ea=ce-d;(mathAbs$2(fe)>o||mathAbs$2(ea)>c||N===l-1)&&(ne=Math.sqrt(fe*fe+ea*ea),u=se,d=ce);break}case CMD$4.C:{var ta=s[N++],na=s[N++],se=s[N++],ce=s[N++],aa=s[N++],ia=s[N++];ne=cubicLength(u,d,ta,na,se,ce,aa,ia,10),u=aa,d=ia;break}case CMD$4.Q:{var ta=s[N++],na=s[N++],se=s[N++],ce=s[N++];ne=quadraticLength(u,d,ta,na,se,ce,10),u=se,d=ce;break}case CMD$4.A:var sa=s[N++],ra=s[N++],la=s[N++],oa=s[N++],ca=s[N++],pa=s[N++],ua=pa+ca;N+=1,j&&(f=mathCos$3(ca)*la+sa,g=mathSin$3(ca)*oa+ra),ne=mathMax$8(la,oa)*mathMin$8(PI2$7,Math.abs(pa)),u=mathCos$3(ua)*la+sa,d=mathSin$3(ua)*oa+ra;break;case CMD$4.R:{f=u=s[N++],g=d=s[N++];var da=s[N++],ha=s[N++];ne=da*2+ha*2;break}case CMD$4.Z:{var fe=f-u,ea=g-d;ne=Math.sqrt(fe*fe+ea*ea),u=f,d=g;break}}ne>=0&&(y[x++]=ne,$+=ne)}return this._pathLen=$,$},a.prototype.rebuildPath=function(s,l){var o=this.data,c=this._ux,u=this._uy,d=this._len,f,g,y,$,x,N,R=l<1,j,ne,se=0,ce=0,fe,ea=0,ta,na;if(!(R&&(this._pathSegLen||this._calculateLength(),j=this._pathSegLen,ne=this._pathLen,fe=l*ne,!fe)))e:for(var aa=0;aa<d;){var ia=o[aa++],sa=aa===1;switch(sa&&(y=o[aa],$=o[aa+1],f=y,g=$),ia!==CMD$4.L&&ea>0&&(s.lineTo(ta,na),ea=0),ia){case CMD$4.M:f=y=o[aa++],g=$=o[aa++],s.moveTo(y,$);break;case CMD$4.L:{x=o[aa++],N=o[aa++];var ra=mathAbs$2(x-y),la=mathAbs$2(N-$);if(ra>c||la>u){if(R){var oa=j[ce++];if(se+oa>fe){var ca=(fe-se)/oa;s.lineTo(y*(1-ca)+x*ca,$*(1-ca)+N*ca);break e}se+=oa}s.lineTo(x,N),y=x,$=N,ea=0}else{var pa=ra*ra+la*la;pa>ea&&(ta=x,na=N,ea=pa)}break}case CMD$4.C:{var ua=o[aa++],da=o[aa++],ha=o[aa++],ga=o[aa++],fa=o[aa++],ma=o[aa++];if(R){var oa=j[ce++];if(se+oa>fe){var ca=(fe-se)/oa;cubicSubdivide(y,ua,ha,fa,ca,tmpOutX),cubicSubdivide($,da,ga,ma,ca,tmpOutY),s.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}se+=oa}s.bezierCurveTo(ua,da,ha,ga,fa,ma),y=fa,$=ma;break}case CMD$4.Q:{var ua=o[aa++],da=o[aa++],ha=o[aa++],ga=o[aa++];if(R){var oa=j[ce++];if(se+oa>fe){var ca=(fe-se)/oa;quadraticSubdivide(y,ua,ha,ca,tmpOutX),quadraticSubdivide($,da,ga,ca,tmpOutY),s.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}se+=oa}s.quadraticCurveTo(ua,da,ha,ga),y=ha,$=ga;break}case CMD$4.A:var va=o[aa++],ka=o[aa++],ya=o[aa++],ba=o[aa++],Ea=o[aa++],Ca=o[aa++],$a=o[aa++],Pa=!o[aa++],Da=ya>ba?ya:ba,Ta=mathAbs$2(ya-ba)>.001,Ba=Ea+Ca,wa=!1;if(R){var oa=j[ce++];se+oa>fe&&(Ba=Ea+Ca*(fe-se)/oa,wa=!0),se+=oa}if(Ta&&s.ellipse?s.ellipse(va,ka,ya,ba,$a,Ea,Ba,Pa):s.arc(va,ka,Da,Ea,Ba,Pa),wa)break e;sa&&(f=mathCos$3(Ea)*ya+va,g=mathSin$3(Ea)*ba+ka),y=mathCos$3(Ba)*ya+va,$=mathSin$3(Ba)*ba+ka;break;case CMD$4.R:f=y=o[aa],g=$=o[aa+1],x=o[aa++],N=o[aa++];var Oa=o[aa++],Aa=o[aa++];if(R){var oa=j[ce++];if(se+oa>fe){var Sa=fe-se;s.moveTo(x,N),s.lineTo(x+mathMin$8(Sa,Oa),N),Sa-=Oa,Sa>0&&s.lineTo(x+Oa,N+mathMin$8(Sa,Aa)),Sa-=Aa,Sa>0&&s.lineTo(x+mathMax$8(Oa-Sa,0),N+Aa),Sa-=Oa,Sa>0&&s.lineTo(x,N+mathMax$8(Aa-Sa,0));break e}se+=oa}s.rect(x,N,Oa,Aa);break;case CMD$4.Z:if(R){var oa=j[ce++];if(se+oa>fe){var ca=(fe-se)/oa;s.lineTo(y*(1-ca)+f*ca,$*(1-ca)+g*ca);break e}se+=oa}s.closePath(),y=f,$=g}}},a.prototype.clone=function(){var s=new a,l=this.data;return s.data=l.slice?l.slice():Array.prototype.slice.call(l),s._len=this._len,s},a.CMD=CMD$4,a.initDefaultProps=function(){var s=a.prototype;s._saveData=!0,s._ux=0,s._uy=0,s._pendingPtDist=0,s._version=0}(),a}();function containStroke$4(a,s,l,o,c,u,d){if(c===0)return!1;var f=c,g=0,y=a;if(d>s+f&&d>o+f||d<s-f&&d<o-f||u>a+f&&u>l+f||u<a-f&&u<l-f)return!1;if(a!==l)g=(s-o)/(a-l),y=(a*o-l*s)/(a-l);else return Math.abs(u-a)<=f/2;var $=g*u-d+y,x=$*$/(g*g+1);return x<=f/2*f/2}function containStroke$3(a,s,l,o,c,u,d,f,g,y,$){if(g===0)return!1;var x=g;if($>s+x&&$>o+x&&$>u+x&&$>f+x||$<s-x&&$<o-x&&$<u-x&&$<f-x||y>a+x&&y>l+x&&y>c+x&&y>d+x||y<a-x&&y<l-x&&y<c-x&&y<d-x)return!1;var N=cubicProjectPoint(a,s,l,o,c,u,d,f,y,$,null);return N<=x/2}function containStroke$2(a,s,l,o,c,u,d,f,g){if(d===0)return!1;var y=d;if(g>s+y&&g>o+y&&g>u+y||g<s-y&&g<o-y&&g<u-y||f>a+y&&f>l+y&&f>c+y||f<a-y&&f<l-y&&f<c-y)return!1;var $=quadraticProjectPoint(a,s,l,o,c,u,f,g,null);return $<=y/2}var PI2$6=Math.PI*2;function normalizeRadian(a){return a%=PI2$6,a<0&&(a+=PI2$6),a}var PI2$5=Math.PI*2;function containStroke$1(a,s,l,o,c,u,d,f,g){if(d===0)return!1;var y=d;f-=a,g-=s;var $=Math.sqrt(f*f+g*g);if($-y>l||$+y<l)return!1;if(Math.abs(o-c)%PI2$5<1e-4)return!0;if(u){var x=o;o=normalizeRadian(c),c=normalizeRadian(x)}else o=normalizeRadian(o),c=normalizeRadian(c);o>c&&(c+=PI2$5);var N=Math.atan2(g,f);return N<0&&(N+=PI2$5),N>=o&&N<=c||N+PI2$5>=o&&N+PI2$5<=c}function windingLine(a,s,l,o,c,u){if(u>s&&u>o||u<s&&u<o||o===s)return 0;var d=(u-s)/(o-s),f=o<s?1:-1;(d===1||d===0)&&(f=o<s?.5:-.5);var g=d*(l-a)+a;return g===c?1/0:g>c?f:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(a,s){return Math.abs(a-s)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var a=extrema[0];extrema[0]=extrema[1],extrema[1]=a}function windingCubic(a,s,l,o,c,u,d,f,g,y){if(y>s&&y>o&&y>u&&y>f||y<s&&y<o&&y<u&&y<f)return 0;var $=cubicRootAt(s,o,u,f,y,roots);if($===0)return 0;for(var x=0,N=-1,R=void 0,j=void 0,ne=0;ne<$;ne++){var se=roots[ne],ce=se===0||se===1?.5:1,fe=cubicAt(a,l,c,d,se);fe<g||(N<0&&(N=cubicExtrema(s,o,u,f,extrema),extrema[1]<extrema[0]&&N>1&&swapExtrema(),R=cubicAt(s,o,u,f,extrema[0]),N>1&&(j=cubicAt(s,o,u,f,extrema[1]))),N===2?se<extrema[0]?x+=R<s?ce:-ce:se<extrema[1]?x+=j<R?ce:-ce:x+=f<j?ce:-ce:se<extrema[0]?x+=R<s?ce:-ce:x+=f<R?ce:-ce)}return x}function windingQuadratic(a,s,l,o,c,u,d,f){if(f>s&&f>o&&f>u||f<s&&f<o&&f<u)return 0;var g=quadraticRootAt(s,o,u,f,roots);if(g===0)return 0;var y=quadraticExtremum(s,o,u);if(y>=0&&y<=1){for(var $=0,x=quadraticAt$1(s,o,u,y),N=0;N<g;N++){var R=roots[N]===0||roots[N]===1?.5:1,j=quadraticAt$1(a,l,c,roots[N]);j<d||(roots[N]<y?$+=x<s?R:-R:$+=u<x?R:-R)}return $}else{var R=roots[0]===0||roots[0]===1?.5:1,j=quadraticAt$1(a,l,c,roots[0]);return j<d?0:u<s?R:-R}}function windingArc(a,s,l,o,c,u,d,f){if(f-=s,f>l||f<-l)return 0;var g=Math.sqrt(l*l-f*f);roots[0]=-g,roots[1]=g;var y=Math.abs(o-c);if(y<1e-4)return 0;if(y>=PI2$4-1e-4){o=0,c=PI2$4;var $=u?1:-1;return d>=roots[0]+a&&d<=roots[1]+a?$:0}if(o>c){var x=o;o=c,c=x}o<0&&(o+=PI2$4,c+=PI2$4);for(var N=0,R=0;R<2;R++){var j=roots[R];if(j+a>d){var ne=Math.atan2(f,j),$=u?1:-1;ne<0&&(ne=PI2$4+ne),(ne>=o&&ne<=c||ne+PI2$4>=o&&ne+PI2$4<=c)&&(ne>Math.PI/2&&ne<Math.PI*1.5&&($=-$),N+=$)}}return N}function containPath(a,s,l,o,c){for(var u=a.data,d=a.len(),f=0,g=0,y=0,$=0,x=0,N,R,j=0;j<d;){var ne=u[j++],se=j===1;switch(ne===CMD$3.M&&j>1&&(l||(f+=windingLine(g,y,$,x,o,c))),se&&(g=u[j],y=u[j+1],$=g,x=y),ne){case CMD$3.M:$=u[j++],x=u[j++],g=$,y=x;break;case CMD$3.L:if(l){if(containStroke$4(g,y,u[j],u[j+1],s,o,c))return!0}else f+=windingLine(g,y,u[j],u[j+1],o,c)||0;g=u[j++],y=u[j++];break;case CMD$3.C:if(l){if(containStroke$3(g,y,u[j++],u[j++],u[j++],u[j++],u[j],u[j+1],s,o,c))return!0}else f+=windingCubic(g,y,u[j++],u[j++],u[j++],u[j++],u[j],u[j+1],o,c)||0;g=u[j++],y=u[j++];break;case CMD$3.Q:if(l){if(containStroke$2(g,y,u[j++],u[j++],u[j],u[j+1],s,o,c))return!0}else f+=windingQuadratic(g,y,u[j++],u[j++],u[j],u[j+1],o,c)||0;g=u[j++],y=u[j++];break;case CMD$3.A:var ce=u[j++],fe=u[j++],ea=u[j++],ta=u[j++],na=u[j++],aa=u[j++];j+=1;var ia=!!(1-u[j++]);N=Math.cos(na)*ea+ce,R=Math.sin(na)*ta+fe,se?($=N,x=R):f+=windingLine(g,y,N,R,o,c);var sa=(o-ce)*ta/ea+ce;if(l){if(containStroke$1(ce,fe,ta,na,na+aa,ia,s,sa,c))return!0}else f+=windingArc(ce,fe,ta,na,na+aa,ia,sa,c);g=Math.cos(na+aa)*ea+ce,y=Math.sin(na+aa)*ta+fe;break;case CMD$3.R:$=g=u[j++],x=y=u[j++];var ra=u[j++],la=u[j++];if(N=$+ra,R=x+la,l){if(containStroke$4($,x,N,x,s,o,c)||containStroke$4(N,x,N,R,s,o,c)||containStroke$4(N,R,$,R,s,o,c)||containStroke$4($,R,$,x,s,o,c))return!0}else f+=windingLine(N,x,N,R,o,c),f+=windingLine($,R,$,x,o,c);break;case CMD$3.Z:if(l){if(containStroke$4(g,y,$,x,s,o,c))return!0}else f+=windingLine(g,y,$,x,o,c);g=$,y=x;break}}return!l&&!isAroundEqual$1(y,x)&&(f+=windingLine(g,y,$,x,o,c)||0),f!==0}function contain$2(a,s,l){return containPath(a,0,!1,s,l)}function containStroke(a,s,l,o){return containPath(a,s,!0,l,o)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.update=function(){var l=this;a.prototype.update.call(this);var o=this.style;if(o.decal){var c=this._decalEl=this._decalEl||new s;c.buildPath===s.prototype.buildPath&&(c.buildPath=function(g){l.buildPath(g,l.shape)}),c.silent=!0;var u=c.style;for(var d in o)u[d]!==o[d]&&(u[d]=o[d]);u.fill=o.fill?o.decal:null,u.decal=null,u.shadowColor=null,o.strokeFirst&&(u.stroke=null);for(var f=0;f<pathCopyParams.length;++f)c[pathCopyParams[f]]=this[pathCopyParams[f]];c.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},s.prototype.getDecalElement=function(){return this._decalEl},s.prototype._init=function(l){var o=keys(l);this.shape=this.getDefaultShape();var c=this.getDefaultStyle();c&&this.useStyle(c);for(var u=0;u<o.length;u++){var d=o[u],f=l[d];d==="style"?this.style?extend(this.style,f):this.useStyle(f):d==="shape"?extend(this.shape,f):a.prototype.attrKV.call(this,d,f)}this.style||this.useStyle({})},s.prototype.getDefaultStyle=function(){return null},s.prototype.getDefaultShape=function(){return{}},s.prototype.canBeInsideText=function(){return this.hasFill()},s.prototype.getInsideTextFill=function(){var l=this.style.fill;if(l!=="none"){if(isString$2(l)){var o=lum(l,0);return o>.5?DARK_LABEL_COLOR:o>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(l)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},s.prototype.getInsideTextStroke=function(l){var o=this.style.fill;if(isString$2(o)){var c=this.__zr,u=!!(c&&c.isDarkMode()),d=lum(l,0)<DARK_MODE_THRESHOLD;if(u===d)return o}},s.prototype.buildPath=function(l,o,c){},s.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},s.prototype.getUpdatedPathProxy=function(l){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,l),this.path},s.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},s.prototype.hasStroke=function(){var l=this.style,o=l.stroke;return!(o==null||o==="none"||!(l.lineWidth>0))},s.prototype.hasFill=function(){var l=this.style,o=l.fill;return o!=null&&o!=="none"},s.prototype.getBoundingRect=function(){var l=this._rect,o=this.style,c=!l;if(c){var u=!1;this.path||(u=!0,this.createPathProxy());var d=this.path;(u||this.__dirty&SHAPE_CHANGED_BIT)&&(d.beginPath(),this.buildPath(d,this.shape,!1),this.pathUpdated()),l=d.getBoundingRect()}if(this._rect=l,this.hasStroke()&&this.path&&this.path.len()>0){var f=this._rectStroke||(this._rectStroke=l.clone());if(this.__dirty||c){f.copy(l);var g=o.strokeNoScale?this.getLineScale():1,y=o.lineWidth;if(!this.hasFill()){var $=this.strokeContainThreshold;y=Math.max(y,$??4)}g>1e-10&&(f.width+=y/g,f.height+=y/g,f.x-=y/g/2,f.y-=y/g/2)}return f}return l},s.prototype.contain=function(l,o){var c=this.transformCoordToLocal(l,o),u=this.getBoundingRect(),d=this.style;if(l=c[0],o=c[1],u.contain(l,o)){var f=this.path;if(this.hasStroke()){var g=d.lineWidth,y=d.strokeNoScale?this.getLineScale():1;if(y>1e-10&&(this.hasFill()||(g=Math.max(g,this.strokeContainThreshold)),containStroke(f,g/y,l,o)))return!0}if(this.hasFill())return contain$2(f,l,o)}return!1},s.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},s.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},s.prototype.animateShape=function(l){return this.animate("shape",l)},s.prototype.updateDuringAnimation=function(l){l==="style"?this.dirtyStyle():l==="shape"?this.dirtyShape():this.markRedraw()},s.prototype.attrKV=function(l,o){l==="shape"?this.setShape(o):a.prototype.attrKV.call(this,l,o)},s.prototype.setShape=function(l,o){var c=this.shape;return c||(c=this.shape={}),typeof l=="string"?c[l]=o:extend(c,l),this.dirtyShape(),this},s.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},s.prototype.createStyle=function(l){return createObject(DEFAULT_PATH_STYLE,l)},s.prototype._innerSaveToNormal=function(l){a.prototype._innerSaveToNormal.call(this,l);var o=this._normalState;l.shape&&!o.shape&&(o.shape=extend({},this.shape))},s.prototype._applyStateObj=function(l,o,c,u,d,f){a.prototype._applyStateObj.call(this,l,o,c,u,d,f);var g=!(o&&u),y;if(o&&o.shape?d?u?y=o.shape:(y=extend({},c.shape),extend(y,o.shape)):(y=extend({},u?this.shape:c.shape),extend(y,o.shape)):g&&(y=c.shape),y)if(d){this.shape=extend({},this.shape);for(var $={},x=keys(y),N=0;N<x.length;N++){var R=x[N];typeof y[R]=="object"?this.shape[R]=y[R]:$[R]=y[R]}this._transitionState(l,{shape:$},f)}else this.shape=y,this.dirtyShape()},s.prototype._mergeStates=function(l){for(var o=a.prototype._mergeStates.call(this,l),c,u=0;u<l.length;u++){var d=l[u];d.shape&&(c=c||{},this._mergeStyle(c,d.shape))}return c&&(o.shape=c),o},s.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},s.prototype.isZeroArea=function(){return!1},s.extend=function(l){var o=function(u){__extends(d,u);function d(f){var g=u.call(this,f)||this;return l.init&&l.init.call(g,f),g}return d.prototype.getDefaultStyle=function(){return clone$4(l.style)},d.prototype.getDefaultShape=function(){return clone$4(l.shape)},d}(s);for(var c in l)typeof l[c]=="function"&&(o.prototype[c]=l[c]);return o},s.initDefaultProps=function(){var l=s.prototype;l.type="path",l.strokeContainThreshold=5,l.segmentIgnoreThreshold=0,l.subPixelOptimize=!1,l.autoBatch=!1,l.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),s}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.hasStroke=function(){var l=this.style,o=l.stroke;return o!=null&&o!=="none"&&l.lineWidth>0},s.prototype.hasFill=function(){var l=this.style,o=l.fill;return o!=null&&o!=="none"},s.prototype.createStyle=function(l){return createObject(DEFAULT_TSPAN_STYLE,l)},s.prototype.setBoundingRect=function(l){this._rect=l},s.prototype.getBoundingRect=function(){var l=this.style;if(!this._rect){var o=l.text;o!=null?o+="":o="";var c=getBoundingRect(o,l.font,l.textAlign,l.textBaseline);if(c.x+=l.x||0,c.y+=l.y||0,this.hasStroke()){var u=l.lineWidth;c.x-=u/2,c.y-=u/2,c.width+=u,c.height+=u}this._rect=c}return this._rect},s.initDefaultProps=function(){var l=s.prototype;l.dirtyRectTolerance=10}(),s}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(a){return!!(a&&typeof a!="string"&&a.width&&a.height)}var ZRImage=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.createStyle=function(l){return createObject(DEFAULT_IMAGE_STYLE,l)},s.prototype._getSize=function(l){var o=this.style,c=o[l];if(c!=null)return c;var u=isImageLike$1(o.image)?o.image:this.__image;if(!u)return 0;var d=l==="width"?"height":"width",f=o[d];return f==null?u[l]:u[l]/u[d]*f},s.prototype.getWidth=function(){return this._getSize("width")},s.prototype.getHeight=function(){return this._getSize("height")},s.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},s.prototype.getBoundingRect=function(){var l=this.style;return this._rect||(this._rect=new BoundingRect(l.x||0,l.y||0,this.getWidth(),this.getHeight())),this._rect},s}(Displayable);ZRImage.prototype.type="image";function buildPath$2(a,s){var l=s.x,o=s.y,c=s.width,u=s.height,d=s.r,f,g,y,$;c<0&&(l=l+c,c=-c),u<0&&(o=o+u,u=-u),typeof d=="number"?f=g=y=$=d:d instanceof Array?d.length===1?f=g=y=$=d[0]:d.length===2?(f=y=d[0],g=$=d[1]):d.length===3?(f=d[0],g=$=d[1],y=d[2]):(f=d[0],g=d[1],y=d[2],$=d[3]):f=g=y=$=0;var x;f+g>c&&(x=f+g,f*=c/x,g*=c/x),y+$>c&&(x=y+$,y*=c/x,$*=c/x),g+y>u&&(x=g+y,g*=u/x,y*=u/x),f+$>u&&(x=f+$,f*=u/x,$*=u/x),a.moveTo(l+f,o),a.lineTo(l+c-g,o),g!==0&&a.arc(l+c-g,o+g,g,-Math.PI/2,0),a.lineTo(l+c,o+u-y),y!==0&&a.arc(l+c-y,o+u-y,y,0,Math.PI/2),a.lineTo(l+$,o+u),$!==0&&a.arc(l+$,o+u-$,$,Math.PI/2,Math.PI),a.lineTo(l,o+f),f!==0&&a.arc(l+f,o+f,f,Math.PI,Math.PI*1.5)}var round$3=Math.round;function subPixelOptimizeLine$1(a,s,l){if(s){var o=s.x1,c=s.x2,u=s.y1,d=s.y2;a.x1=o,a.x2=c,a.y1=u,a.y2=d;var f=l&&l.lineWidth;return f&&(round$3(o*2)===round$3(c*2)&&(a.x1=a.x2=subPixelOptimize$1(o,f,!0)),round$3(u*2)===round$3(d*2)&&(a.y1=a.y2=subPixelOptimize$1(u,f,!0))),a}}function subPixelOptimizeRect$1(a,s,l){if(s){var o=s.x,c=s.y,u=s.width,d=s.height;a.x=o,a.y=c,a.width=u,a.height=d;var f=l&&l.lineWidth;return f&&(a.x=subPixelOptimize$1(o,f,!0),a.y=subPixelOptimize$1(c,f,!0),a.width=Math.max(subPixelOptimize$1(o+u,f,!1)-a.x,u===0?0:1),a.height=Math.max(subPixelOptimize$1(c+d,f,!1)-a.y,d===0?0:1)),a}}function subPixelOptimize$1(a,s,l){if(!s)return a;var o=round$3(a*2);return(o+round$3(s))%2===0?o/2:(o+(l?1:-1))/2}var RectShape=function(){function a(){this.x=0,this.y=0,this.width=0,this.height=0}return a}(),subPixelOptimizeOutputShape$1={},Rect$2=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new RectShape},s.prototype.buildPath=function(l,o){var c,u,d,f;if(this.subPixelOptimize){var g=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,o,this.style);c=g.x,u=g.y,d=g.width,f=g.height,g.r=o.r,o=g}else c=o.x,u=o.y,d=o.width,f=o.height;o.r?buildPath$2(l,o):l.rect(c,u,d,f)},s.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},s}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;return o.type="text",o._children=[],o._defaultStyle=DEFAULT_RICH_TEXT_COLOR,o.attr(l),o}return s.prototype.childrenRef=function(){return this._children},s.prototype.update=function(){a.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var l=0;l<this._children.length;l++){var o=this._children[l];o.zlevel=this.zlevel,o.z=this.z,o.z2=this.z2,o.culling=this.culling,o.cursor=this.cursor,o.invisible=this.invisible}},s.prototype.updateTransform=function(){var l=this.innerTransformable;l?(l.updateTransform(),l.transform&&(this.transform=l.transform)):a.prototype.updateTransform.call(this)},s.prototype.getLocalTransform=function(l){var o=this.innerTransformable;return o?o.getLocalTransform(l):a.prototype.getLocalTransform.call(this,l)},s.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),a.prototype.getComputedTransform.call(this)},s.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},s.prototype.addSelfToZr=function(l){a.prototype.addSelfToZr.call(this,l);for(var o=0;o<this._children.length;o++)this._children[o].__zr=l},s.prototype.removeSelfFromZr=function(l){a.prototype.removeSelfFromZr.call(this,l);for(var o=0;o<this._children.length;o++)this._children[o].__zr=null},s.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var l=new BoundingRect(0,0,0,0),o=this._children,c=[],u=null,d=0;d<o.length;d++){var f=o[d],g=f.getBoundingRect(),y=f.getLocalTransform(c);y?(l.copy(g),l.applyTransform(y),u=u||l.clone(),u.union(l)):(u=u||g.clone(),u.union(g))}this._rect=u||l}return this._rect},s.prototype.setDefaultTextStyle=function(l){this._defaultStyle=l||DEFAULT_RICH_TEXT_COLOR},s.prototype.setTextContent=function(l){},s.prototype._mergeStyle=function(l,o){if(!o)return l;var c=o.rich,u=l.rich||c&&{};return extend(l,o),c&&u?(this._mergeRich(u,c),l.rich=u):u&&(l.rich=u),l},s.prototype._mergeRich=function(l,o){for(var c=keys(o),u=0;u<c.length;u++){var d=c[u];l[d]=l[d]||{},extend(l[d],o[d])}},s.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},s.prototype._getOrCreateChild=function(l){var o=this._children[this._childCursor];return(!o||!(o instanceof l))&&(o=new l),this._children[this._childCursor++]=o,o.__zr=this.__zr,o.parent=this,o},s.prototype._updatePlainTexts=function(){var l=this.style,o=l.font||DEFAULT_FONT,c=l.padding,u=getStyleText(l),d=parsePlainText(u,l),f=needDrawBackground(l),g=!!l.backgroundColor,y=d.outerHeight,$=d.outerWidth,x=d.contentWidth,N=d.lines,R=d.lineHeight,j=this._defaultStyle,ne=l.x||0,se=l.y||0,ce=l.align||j.align||"left",fe=l.verticalAlign||j.verticalAlign||"top",ea=ne,ta=adjustTextY(se,d.contentHeight,fe);if(f||c){var na=adjustTextX(ne,$,ce),aa=adjustTextY(se,y,fe);f&&this._renderBackground(l,l,na,aa,$,y)}ta+=R/2,c&&(ea=getTextXForPadding(ne,ce,c),fe==="top"?ta+=c[0]:fe==="bottom"&&(ta-=c[2]));for(var ia=0,sa=!1,ra=getFill("fill"in l?l.fill:(sa=!0,j.fill)),la=getStroke("stroke"in l?l.stroke:!g&&(!j.autoStroke||sa)?(ia=DEFAULT_STROKE_LINE_WIDTH,j.stroke):null),oa=l.textShadowBlur>0,ca=l.width!=null&&(l.overflow==="truncate"||l.overflow==="break"||l.overflow==="breakAll"),pa=d.calculatedLineHeight,ua=0;ua<N.length;ua++){var da=this._getOrCreateChild(TSpan),ha=da.createStyle();da.useStyle(ha),ha.text=N[ua],ha.x=ea,ha.y=ta,ce&&(ha.textAlign=ce),ha.textBaseline="middle",ha.opacity=l.opacity,ha.strokeFirst=!0,oa&&(ha.shadowBlur=l.textShadowBlur||0,ha.shadowColor=l.textShadowColor||"transparent",ha.shadowOffsetX=l.textShadowOffsetX||0,ha.shadowOffsetY=l.textShadowOffsetY||0),ha.stroke=la,ha.fill=ra,la&&(ha.lineWidth=l.lineWidth||ia,ha.lineDash=l.lineDash,ha.lineDashOffset=l.lineDashOffset||0),ha.font=o,setSeparateFont(ha,l),ta+=R,ca&&da.setBoundingRect(new BoundingRect(adjustTextX(ha.x,l.width,ha.textAlign),adjustTextY(ha.y,pa,ha.textBaseline),x,pa))}},s.prototype._updateRichTexts=function(){var l=this.style,o=getStyleText(l),c=parseRichText(o,l),u=c.width,d=c.outerWidth,f=c.outerHeight,g=l.padding,y=l.x||0,$=l.y||0,x=this._defaultStyle,N=l.align||x.align,R=l.verticalAlign||x.verticalAlign,j=adjustTextX(y,d,N),ne=adjustTextY($,f,R),se=j,ce=ne;g&&(se+=g[3],ce+=g[0]);var fe=se+u;needDrawBackground(l)&&this._renderBackground(l,l,j,ne,d,f);for(var ea=!!l.backgroundColor,ta=0;ta<c.lines.length;ta++){for(var na=c.lines[ta],aa=na.tokens,ia=aa.length,sa=na.lineHeight,ra=na.width,la=0,oa=se,ca=fe,pa=ia-1,ua=void 0;la<ia&&(ua=aa[la],!ua.align||ua.align==="left");)this._placeToken(ua,l,sa,ce,oa,"left",ea),ra-=ua.width,oa+=ua.width,la++;for(;pa>=0&&(ua=aa[pa],ua.align==="right");)this._placeToken(ua,l,sa,ce,ca,"right",ea),ra-=ua.width,ca-=ua.width,pa--;for(oa+=(u-(oa-se)-(fe-ca)-ra)/2;la<=pa;)ua=aa[la],this._placeToken(ua,l,sa,ce,oa+ua.width/2,"center",ea),oa+=ua.width,la++;ce+=sa}},s.prototype._placeToken=function(l,o,c,u,d,f,g){var y=o.rich[l.styleName]||{};y.text=l.text;var $=l.verticalAlign,x=u+c/2;$==="top"?x=u+l.height/2:$==="bottom"&&(x=u+c-l.height/2);var N=!l.isLineHolder&&needDrawBackground(y);N&&this._renderBackground(y,o,f==="right"?d-l.width:f==="center"?d-l.width/2:d,x-l.height/2,l.width,l.height);var R=!!y.backgroundColor,j=l.textPadding;j&&(d=getTextXForPadding(d,f,j),x-=l.height/2-j[0]-l.innerHeight/2);var ne=this._getOrCreateChild(TSpan),se=ne.createStyle();ne.useStyle(se);var ce=this._defaultStyle,fe=!1,ea=0,ta=getFill("fill"in y?y.fill:"fill"in o?o.fill:(fe=!0,ce.fill)),na=getStroke("stroke"in y?y.stroke:"stroke"in o?o.stroke:!R&&!g&&(!ce.autoStroke||fe)?(ea=DEFAULT_STROKE_LINE_WIDTH,ce.stroke):null),aa=y.textShadowBlur>0||o.textShadowBlur>0;se.text=l.text,se.x=d,se.y=x,aa&&(se.shadowBlur=y.textShadowBlur||o.textShadowBlur||0,se.shadowColor=y.textShadowColor||o.textShadowColor||"transparent",se.shadowOffsetX=y.textShadowOffsetX||o.textShadowOffsetX||0,se.shadowOffsetY=y.textShadowOffsetY||o.textShadowOffsetY||0),se.textAlign=f,se.textBaseline="middle",se.font=l.font||DEFAULT_FONT,se.opacity=retrieve3(y.opacity,o.opacity,1),setSeparateFont(se,y),na&&(se.lineWidth=retrieve3(y.lineWidth,o.lineWidth,ea),se.lineDash=retrieve2(y.lineDash,o.lineDash),se.lineDashOffset=o.lineDashOffset||0,se.stroke=na),ta&&(se.fill=ta);var ia=l.contentWidth,sa=l.contentHeight;ne.setBoundingRect(new BoundingRect(adjustTextX(se.x,ia,se.textAlign),adjustTextY(se.y,sa,se.textBaseline),ia,sa))},s.prototype._renderBackground=function(l,o,c,u,d,f){var g=l.backgroundColor,y=l.borderWidth,$=l.borderColor,x=g&&g.image,N=g&&!x,R=l.borderRadius,j=this,ne,se;if(N||l.lineHeight||y&&$){ne=this._getOrCreateChild(Rect$2),ne.useStyle(ne.createStyle()),ne.style.fill=null;var ce=ne.shape;ce.x=c,ce.y=u,ce.width=d,ce.height=f,ce.r=R,ne.dirtyShape()}if(N){var fe=ne.style;fe.fill=g||null,fe.fillOpacity=retrieve2(l.fillOpacity,1)}else if(x){se=this._getOrCreateChild(ZRImage),se.onload=function(){j.dirtyStyle()};var ea=se.style;ea.image=g.image,ea.x=c,ea.y=u,ea.width=d,ea.height=f}if(y&&$){var fe=ne.style;fe.lineWidth=y,fe.stroke=$,fe.strokeOpacity=retrieve2(l.strokeOpacity,1),fe.lineDash=l.borderDash,fe.lineDashOffset=l.borderDashOffset||0,ne.strokeContainThreshold=0,ne.hasFill()&&ne.hasStroke()&&(fe.strokeFirst=!0,fe.lineWidth*=2)}var ta=(ne||se).style;ta.shadowBlur=l.shadowBlur||0,ta.shadowColor=l.shadowColor||"transparent",ta.shadowOffsetX=l.shadowOffsetX||0,ta.shadowOffsetY=l.shadowOffsetY||0,ta.opacity=retrieve3(l.opacity,o.opacity,1)},s.makeFont=function(l){var o="";return hasSeparateFont(l)&&(o=[l.fontStyle,l.fontWeight,parseFontSize(l.fontSize),l.fontFamily||"sans-serif"].join(" ")),o&&trim$1(o)||l.textFont||l.font},s}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(a){return typeof a=="string"&&(a.indexOf("px")!==-1||a.indexOf("rem")!==-1||a.indexOf("em")!==-1)?a:isNaN(+a)?DEFAULT_FONT_SIZE+"px":a+"px"}function setSeparateFont(a,s){for(var l=0;l<FONT_PARTS.length;l++){var o=FONT_PARTS[l],c=s[o];c!=null&&(a[o]=c)}}function hasSeparateFont(a){return a.fontSize!=null||a.fontFamily||a.fontWeight}function normalizeTextStyle(a){return normalizeStyle(a),each$f(a.rich,normalizeStyle),a}function normalizeStyle(a){if(a){a.font=ZRText.makeFont(a);var s=a.align;s==="middle"&&(s="center"),a.align=s==null||VALID_TEXT_ALIGN[s]?s:"left";var l=a.verticalAlign;l==="center"&&(l="middle"),a.verticalAlign=l==null||VALID_TEXT_VERTICAL_ALIGN[l]?l:"top";var o=a.padding;o&&(a.padding=normalizeCssArray$1(a.padding))}}function getStroke(a,s){return a==null||s<=0||a==="transparent"||a==="none"?null:a.image||a.colorStops?"#000":a}function getFill(a){return a==null||a==="none"?null:a.image||a.colorStops?"#000":a}function getTextXForPadding(a,s,l){return s==="right"?a-l[1]:s==="center"?a+l[3]/2-l[1]/2:a+l[3]}function getStyleText(a){var s=a.text;return s!=null&&(s+=""),s}function needDrawBackground(a){return!!(a.backgroundColor||a.lineHeight||a.borderWidth&&a.borderColor)}var getECData=makeInner(),setCommonECData=function(a,s,l,o){if(o){var c=getECData(o);c.dataIndex=l,c.dataType=s,c.seriesIndex=a,c.ssrType="chart",o.type==="group"&&o.traverse(function(u){var d=getECData(u);d.seriesIndex=a,d.dataIndex=l,d.dataType=s,d.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(a){return a!=null&&a!=="none"}function doChangeHoverState(a,s,l){a.onHoverStateChange&&(a.hoverState||0)!==l&&a.onHoverStateChange(s),a.hoverState=l}function singleEnterEmphasis(a){doChangeHoverState(a,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(a){a.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(a){doChangeHoverState(a,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(a){a.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(a,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(a){a.selected=!0}function singleLeaveSelect(a){a.selected=!1}function updateElementState(a,s,l){s(a,l)}function traverseUpdateState(a,s,l){updateElementState(a,s,l),a.isGroup&&a.traverse(function(o){updateElementState(o,s,l)})}function setStatesFlag(a,s){switch(s){case"emphasis":a.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":a.hoverState=HOVER_STATE_NORMAL;break;case"blur":a.hoverState=HOVER_STATE_BLUR;break;case"select":a.selected=!0}}function getFromStateStyle(a,s,l,o){for(var c=a.style,u={},d=0;d<s.length;d++){var f=s[d],g=c[f];u[f]=g??(o&&o[f])}for(var d=0;d<a.animators.length;d++){var y=a.animators[d];y.__fromStateTransition&&y.__fromStateTransition.indexOf(l)<0&&y.targetName==="style"&&y.saveTo(u,s)}return u}function createEmphasisDefaultState(a,s,l,o){var c=l&&indexOf(l,"select")>=0,u=!1;if(a instanceof Path){var d=getSavedStates(a),f=c&&d.selectFill||d.normalFill,g=c&&d.selectStroke||d.normalStroke;if(hasFillOrStroke(f)||hasFillOrStroke(g)){o=o||{};var y=o.style||{};y.fill==="inherit"?(u=!0,o=extend({},o),y=extend({},y),y.fill=f):!hasFillOrStroke(y.fill)&&hasFillOrStroke(f)?(u=!0,o=extend({},o),y=extend({},y),y.fill=liftColor(f)):!hasFillOrStroke(y.stroke)&&hasFillOrStroke(g)&&(u||(o=extend({},o),y=extend({},y)),y.stroke=liftColor(g)),o.style=y}}if(o&&o.z2==null){u||(o=extend({},o));var $=a.z2EmphasisLift;o.z2=a.z2+($??Z2_EMPHASIS_LIFT)}return o}function createSelectDefaultState(a,s,l){if(l&&l.z2==null){l=extend({},l);var o=a.z2SelectLift;l.z2=a.z2+(o??Z2_SELECT_LIFT)}return l}function createBlurDefaultState(a,s,l){var o=indexOf(a.currentStates,s)>=0,c=a.style.opacity,u=o?null:getFromStateStyle(a,["opacity"],s,{opacity:1});l=l||{};var d=l.style||{};return d.opacity==null&&(l=extend({},l),d=extend({opacity:o?c:u.opacity*.1},d),l.style=d),l}function elementStateProxy(a,s){var l=this.states[a];if(this.style){if(a==="emphasis")return createEmphasisDefaultState(this,a,s,l);if(a==="blur")return createBlurDefaultState(this,a,l);if(a==="select")return createSelectDefaultState(this,a,l)}return l}function setDefaultStateProxy(a){a.stateProxy=elementStateProxy;var s=a.getTextContent(),l=a.getTextGuideLine();s&&(s.stateProxy=elementStateProxy),l&&(l.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(a,s){!shouldSilent(a,s)&&!a.__highByOuter&&traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(a,s){!shouldSilent(a,s)&&!a.__highByOuter&&traverseUpdateState(a,singleLeaveEmphasis)}function enterEmphasis(a,s){a.__highByOuter|=1<<(s||0),traverseUpdateState(a,singleEnterEmphasis)}function leaveEmphasis(a,s){!(a.__highByOuter&=~(1<<(s||0)))&&traverseUpdateState(a,singleLeaveEmphasis)}function enterBlur(a){traverseUpdateState(a,singleEnterBlur)}function leaveBlur(a){traverseUpdateState(a,singleLeaveBlur)}function enterSelect(a){traverseUpdateState(a,singleEnterSelect)}function leaveSelect(a){traverseUpdateState(a,singleLeaveSelect)}function shouldSilent(a,s){return a.__highDownSilentOnTouch&&s.zrByTouch}function allLeaveBlur(a){var s=a.getModel(),l=[],o=[];s.eachComponent(function(c,u){var d=getComponentStates(u),f=c==="series",g=f?a.getViewOfSeriesModel(u):a.getViewOfComponentModel(u);!f&&o.push(g),d.isBlured&&(g.group.traverse(function(y){singleLeaveBlur(y)}),f&&l.push(u)),d.isBlured=!1}),each$f(o,function(c){c&&c.toggleBlurSeries&&c.toggleBlurSeries(l,!1,s)})}function blurSeries(a,s,l,o){var c=o.getModel();l=l||"coordinateSystem";function u(y,$){for(var x=0;x<$.length;x++){var N=y.getItemGraphicEl($[x]);N&&leaveBlur(N)}}if(a!=null&&!(!s||s==="none")){var d=c.getSeriesByIndex(a),f=d.coordinateSystem;f&&f.master&&(f=f.master);var g=[];c.eachSeries(function(y){var $=d===y,x=y.coordinateSystem;x&&x.master&&(x=x.master);var N=x&&f?x===f:$;if(!(l==="series"&&!$||l==="coordinateSystem"&&!N||s==="series"&&$)){var R=o.getViewOfSeriesModel(y);if(R.group.traverse(function(se){se.__highByOuter&&$&&s==="self"||singleEnterBlur(se)}),isArrayLike(s))u(y.getData(),s);else if(isObject$5(s))for(var j=keys(s),ne=0;ne<j.length;ne++)u(y.getData(j[ne]),s[j[ne]]);g.push(y),getComponentStates(y).isBlured=!0}}),c.eachComponent(function(y,$){if(y!=="series"){var x=o.getViewOfComponentModel($);x&&x.toggleBlurSeries&&x.toggleBlurSeries(g,!0,c)}})}}function blurComponent(a,s,l){if(!(a==null||s==null)){var o=l.getModel().getComponent(a,s);if(o){getComponentStates(o).isBlured=!0;var c=l.getViewOfComponentModel(o);!c||!c.focusBlurEnabled||c.group.traverse(function(u){singleEnterBlur(u)})}}}function blurSeriesFromHighlightPayload(a,s,l){var o=a.seriesIndex,c=a.getData(s.dataType);if(c){var u=queryDataIndex(c,s);u=(isArray$3(u)?u[0]:u)||0;var d=c.getItemGraphicEl(u);if(!d)for(var f=c.count(),g=0;!d&&g<f;)d=c.getItemGraphicEl(g++);if(d){var y=getECData(d);blurSeries(o,y.focus,y.blurScope,l)}else{var $=a.get(["emphasis","focus"]),x=a.get(["emphasis","blurScope"]);$!=null&&blurSeries(o,$,x,l)}}}function findComponentHighDownDispatchers(a,s,l,o){var c={focusSelf:!1,dispatchers:null};if(a==null||a==="series"||s==null||l==null)return c;var u=o.getModel().getComponent(a,s);if(!u)return c;var d=o.getViewOfComponentModel(u);if(!d||!d.findHighDownDispatchers)return c;for(var f=d.findHighDownDispatchers(l),g,y=0;y<f.length;y++)if(getECData(f[y]).focus==="self"){g=!0;break}return{focusSelf:g,dispatchers:f}}function handleGlobalMouseOverForHighDown(a,s,l){var o=getECData(a),c=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,l),u=c.dispatchers,d=c.focusSelf;u?(d&&blurComponent(o.componentMainType,o.componentIndex,l),each$f(u,function(f){return enterEmphasisWhenMouseOver(f,s)})):(blurSeries(o.seriesIndex,o.focus,o.blurScope,l),o.focus==="self"&&blurComponent(o.componentMainType,o.componentIndex,l),enterEmphasisWhenMouseOver(a,s))}function handleGlobalMouseOutForHighDown(a,s,l){allLeaveBlur(l);var o=getECData(a),c=findComponentHighDownDispatchers(o.componentMainType,o.componentIndex,o.componentHighDownName,l).dispatchers;c?each$f(c,function(u){return leaveEmphasisWhenMouseOut(u,s)}):leaveEmphasisWhenMouseOut(a,s)}function toggleSelectionFromPayload(a,s,l){if(isSelectChangePayload(s)){var o=s.dataType,c=a.getData(o),u=queryDataIndex(c,s);isArray$3(u)||(u=[u]),a[s.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":s.type===SELECT_ACTION_TYPE?"select":"unselect"](u,o)}}function updateSeriesElementSelection(a){var s=a.getAllData();each$f(s,function(l){var o=l.data,c=l.type;o.eachItemGraphicEl(function(u,d){a.isSelected(d,c)?enterSelect(u):leaveSelect(u)})})}function getAllSelectedIndices(a){var s=[];return a.eachSeries(function(l){var o=l.getAllData();each$f(o,function(c){c.data;var u=c.type,d=l.getSelectedDataIndices();if(d.length>0){var f={dataIndex:d,seriesIndex:l.seriesIndex};u!=null&&(f.dataType=u),s.push(f)}})}),s}function enableHoverEmphasis(a,s,l){setAsHighDownDispatcher(a,!0),traverseUpdateState(a,setDefaultStateProxy),enableHoverFocus(a,s,l)}function disableHoverEmphasis(a){setAsHighDownDispatcher(a,!1)}function toggleHoverEmphasis(a,s,l,o){o?disableHoverEmphasis(a):enableHoverEmphasis(a,s,l)}function enableHoverFocus(a,s,l){var o=getECData(a);s!=null?(o.focus=s,o.blurScope=l):o.focus&&(o.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(a,s,l,o){l=l||"itemStyle";for(var c=0;c<OTHER_STATES.length;c++){var u=OTHER_STATES[c],d=s.getModel([u,l]),f=a.ensureState(u);f.style=o?o(d):d[defaultStyleGetterMap[l]]()}}function setAsHighDownDispatcher(a,s){var l=s===!1,o=a;a.highDownSilentOnTouch&&(o.__highDownSilentOnTouch=a.highDownSilentOnTouch),(!l||o.__highDownDispatcher)&&(o.__highByOuter=o.__highByOuter||0,o.__highDownDispatcher=!l)}function isHighDownDispatcher(a){return!!(a&&a.__highDownDispatcher)}function enableComponentHighDownFeatures(a,s,l){var o=getECData(a);o.componentMainType=s.mainType,o.componentIndex=s.componentIndex,o.componentHighDownName=l}function getHighlightDigit(a){var s=_highlightKeyMap[a];return s==null&&_highlightNextDigit<=32&&(s=_highlightKeyMap[a]=_highlightNextDigit++),s}function isSelectChangePayload(a){var s=a.type;return s===SELECT_ACTION_TYPE||s===UNSELECT_ACTION_TYPE||s===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(a){var s=a.type;return s===HIGHLIGHT_ACTION_TYPE||s===DOWNPLAY_ACTION_TYPE}function savePathStates(a){var s=getSavedStates(a);s.normalFill=a.style.fill,s.normalStroke=a.style.stroke;var l=a.states.select||{};s.selectFill=l.style&&l.style.fill||null,s.selectStroke=l.style&&l.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(a,s){if(s){var l=a.data,o=a.len(),c,u,d,f,g,y,$=CMD$2.M,x=CMD$2.C,N=CMD$2.L,R=CMD$2.R,j=CMD$2.A,ne=CMD$2.Q;for(d=0,f=0;d<o;){switch(c=l[d++],f=d,u=0,c){case $:u=1;break;case N:u=1;break;case x:u=3;break;case ne:u=2;break;case j:var se=s[4],ce=s[5],fe=mathSqrt$2(s[0]*s[0]+s[1]*s[1]),ea=mathSqrt$2(s[2]*s[2]+s[3]*s[3]),ta=mathAtan2(-s[1]/ea,s[0]/fe);l[d]*=fe,l[d++]+=se,l[d]*=ea,l[d++]+=ce,l[d++]*=fe,l[d++]*=ea,l[d++]+=ta,l[d++]+=ta,d+=2,f=d;break;case R:y[0]=l[d++],y[1]=l[d++],applyTransform$1(y,y,s),l[f++]=y[0],l[f++]=y[1],y[0]+=l[d++],y[1]+=l[d++],applyTransform$1(y,y,s),l[f++]=y[0],l[f++]=y[1]}for(g=0;g<u;g++){var na=points$2[g];na[0]=l[d++],na[1]=l[d++],applyTransform$1(na,na,s),l[f++]=na[0],l[f++]=na[1]}}a.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function vRatio(a,s){return(a[0]*s[0]+a[1]*s[1])/(vMag(a)*vMag(s))}function vAngle(a,s){return(a[0]*s[1]<a[1]*s[0]?-1:1)*Math.acos(vRatio(a,s))}function processArc(a,s,l,o,c,u,d,f,g,y,$){var x=g*(PI$7/180),N=mathCos$2(x)*(a-l)/2+mathSin$2(x)*(s-o)/2,R=-1*mathSin$2(x)*(a-l)/2+mathCos$2(x)*(s-o)/2,j=N*N/(d*d)+R*R/(f*f);j>1&&(d*=mathSqrt$1(j),f*=mathSqrt$1(j));var ne=(c===u?-1:1)*mathSqrt$1((d*d*(f*f)-d*d*(R*R)-f*f*(N*N))/(d*d*(R*R)+f*f*(N*N)))||0,se=ne*d*R/f,ce=ne*-f*N/d,fe=(a+l)/2+mathCos$2(x)*se-mathSin$2(x)*ce,ea=(s+o)/2+mathSin$2(x)*se+mathCos$2(x)*ce,ta=vAngle([1,0],[(N-se)/d,(R-ce)/f]),na=[(N-se)/d,(R-ce)/f],aa=[(-1*N-se)/d,(-1*R-ce)/f],ia=vAngle(na,aa);if(vRatio(na,aa)<=-1&&(ia=PI$7),vRatio(na,aa)>=1&&(ia=0),ia<0){var sa=Math.round(ia/PI$7*1e6)/1e6;ia=PI$7*2+sa%2*PI$7}$.addData(y,fe,ea,d,f,ta,ia,x,u)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(a){var s=new PathProxy;if(!a)return s;var l=0,o=0,c=l,u=o,d,f=PathProxy.CMD,g=a.match(commandReg);if(!g)return s;for(var y=0;y<g.length;y++){for(var $=g[y],x=$.charAt(0),N=void 0,R=$.match(numberReg$1)||[],j=R.length,ne=0;ne<j;ne++)R[ne]=parseFloat(R[ne]);for(var se=0;se<j;){var ce=void 0,fe=void 0,ea=void 0,ta=void 0,na=void 0,aa=void 0,ia=void 0,sa=l,ra=o,la=void 0,oa=void 0;switch(x){case"l":l+=R[se++],o+=R[se++],N=f.L,s.addData(N,l,o);break;case"L":l=R[se++],o=R[se++],N=f.L,s.addData(N,l,o);break;case"m":l+=R[se++],o+=R[se++],N=f.M,s.addData(N,l,o),c=l,u=o,x="l";break;case"M":l=R[se++],o=R[se++],N=f.M,s.addData(N,l,o),c=l,u=o,x="L";break;case"h":l+=R[se++],N=f.L,s.addData(N,l,o);break;case"H":l=R[se++],N=f.L,s.addData(N,l,o);break;case"v":o+=R[se++],N=f.L,s.addData(N,l,o);break;case"V":o=R[se++],N=f.L,s.addData(N,l,o);break;case"C":N=f.C,s.addData(N,R[se++],R[se++],R[se++],R[se++],R[se++],R[se++]),l=R[se-2],o=R[se-1];break;case"c":N=f.C,s.addData(N,R[se++]+l,R[se++]+o,R[se++]+l,R[se++]+o,R[se++]+l,R[se++]+o),l+=R[se-2],o+=R[se-1];break;case"S":ce=l,fe=o,la=s.len(),oa=s.data,d===f.C&&(ce+=l-oa[la-4],fe+=o-oa[la-3]),N=f.C,sa=R[se++],ra=R[se++],l=R[se++],o=R[se++],s.addData(N,ce,fe,sa,ra,l,o);break;case"s":ce=l,fe=o,la=s.len(),oa=s.data,d===f.C&&(ce+=l-oa[la-4],fe+=o-oa[la-3]),N=f.C,sa=l+R[se++],ra=o+R[se++],l+=R[se++],o+=R[se++],s.addData(N,ce,fe,sa,ra,l,o);break;case"Q":sa=R[se++],ra=R[se++],l=R[se++],o=R[se++],N=f.Q,s.addData(N,sa,ra,l,o);break;case"q":sa=R[se++]+l,ra=R[se++]+o,l+=R[se++],o+=R[se++],N=f.Q,s.addData(N,sa,ra,l,o);break;case"T":ce=l,fe=o,la=s.len(),oa=s.data,d===f.Q&&(ce+=l-oa[la-4],fe+=o-oa[la-3]),l=R[se++],o=R[se++],N=f.Q,s.addData(N,ce,fe,l,o);break;case"t":ce=l,fe=o,la=s.len(),oa=s.data,d===f.Q&&(ce+=l-oa[la-4],fe+=o-oa[la-3]),l+=R[se++],o+=R[se++],N=f.Q,s.addData(N,ce,fe,l,o);break;case"A":ea=R[se++],ta=R[se++],na=R[se++],aa=R[se++],ia=R[se++],sa=l,ra=o,l=R[se++],o=R[se++],N=f.A,processArc(sa,ra,l,o,aa,ia,ea,ta,na,N,s);break;case"a":ea=R[se++],ta=R[se++],na=R[se++],aa=R[se++],ia=R[se++],sa=l,ra=o,l+=R[se++],o+=R[se++],N=f.A,processArc(sa,ra,l,o,aa,ia,ea,ta,na,N,s);break}}(x==="z"||x==="Z")&&(N=f.Z,s.addData(N),l=c,o=u),d=N}return s.toStatic(),s}var SVGPath=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.applyTransform=function(l){},s}(Path);function isPathProxy(a){return a.setData!=null}function createPathOptions(a,s){var l=createPathProxyFromString(a),o=extend({},s);return o.buildPath=function(c){if(isPathProxy(c)){c.setData(l.data);var u=c.getContext();u&&c.rebuildPath(u,1)}else{var u=c;l.rebuildPath(u,1)}},o.applyTransform=function(c){transformPath(l,c),this.dirtyShape()},o}function createFromString(a,s){return new SVGPath(createPathOptions(a,s))}function extendFromString(a,s){var l=createPathOptions(a,s),o=function(c){__extends(u,c);function u(d){var f=c.call(this,d)||this;return f.applyTransform=l.applyTransform,f.buildPath=l.buildPath,f}return u}(SVGPath);return o}function mergePath$1(a,s){for(var l=[],o=a.length,c=0;c<o;c++){var u=a[c];l.push(u.getUpdatedPathProxy(!0))}var d=new Path(s);return d.createPathProxy(),d.buildPath=function(f){if(isPathProxy(f)){f.appendPath(l);var g=f.getContext();g&&f.rebuildPath(g,1)}},d}function clonePath(a,s){s=s||{};var l=new Path;return a.shape&&l.setShape(a.shape),l.setStyle(a.style),s.bakeTransform?transformPath(l.path,a.getComputedTransform()):s.toLocal?l.setLocalTransform(a.getComputedTransform()):l.copyTransform(a),l.buildPath=a.buildPath,l.applyTransform=l.applyTransform,l.z=a.z,l.z2=a.z2,l.zlevel=a.zlevel,l}var CircleShape=function(){function a(){this.cx=0,this.cy=0,this.r=0}return a}(),Circle=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new CircleShape},s.prototype.buildPath=function(l,o){l.moveTo(o.cx+o.r,o.cy),l.arc(o.cx,o.cy,o.r,0,Math.PI*2)},s}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function a(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return a}(),Ellipse=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new EllipseShape},s.prototype.buildPath=function(l,o){var c=.5522848,u=o.cx,d=o.cy,f=o.rx,g=o.ry,y=f*c,$=g*c;l.moveTo(u-f,d),l.bezierCurveTo(u-f,d-$,u-y,d-g,u,d-g),l.bezierCurveTo(u+y,d-g,u+f,d-$,u+f,d),l.bezierCurveTo(u+f,d+$,u+y,d+g,u,d+g),l.bezierCurveTo(u-y,d+g,u-f,d+$,u-f,d),l.closePath()},s}(Path);Ellipse.prototype.type="ellipse";const Ellipse$1=Ellipse;var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e$1=1e-4;function intersect(a,s,l,o,c,u,d,f){var g=l-a,y=o-s,$=d-c,x=f-u,N=x*g-$*y;if(!(N*N<e$1))return N=($*(s-u)-x*(a-c))/N,[a+N*g,s+N*y]}function computeCornerTangents(a,s,l,o,c,u,d){var f=a-l,g=s-o,y=(d?u:-u)/mathSqrt(f*f+g*g),$=y*g,x=-y*f,N=a+$,R=s+x,j=l+$,ne=o+x,se=(N+j)/2,ce=(R+ne)/2,fe=j-N,ea=ne-R,ta=fe*fe+ea*ea,na=c-u,aa=N*ne-j*R,ia=(ea<0?-1:1)*mathSqrt(mathMax$7(0,na*na*ta-aa*aa)),sa=(aa*ea-fe*ia)/ta,ra=(-aa*fe-ea*ia)/ta,la=(aa*ea+fe*ia)/ta,oa=(-aa*fe+ea*ia)/ta,ca=sa-se,pa=ra-ce,ua=la-se,da=oa-ce;return ca*ca+pa*pa>ua*ua+da*da&&(sa=la,ra=oa),{cx:sa,cy:ra,x0:-$,y0:-x,x1:sa*(c/na-1),y1:ra*(c/na-1)}}function normalizeCornerRadius(a){var s;if(isArray$3(a)){var l=a.length;if(!l)return a;l===1?s=[a[0],a[0],0,0]:l===2?s=[a[0],a[0],a[1],a[1]]:l===3?s=a.concat(a[2]):s=a}else s=[a,a,a,a];return s}function buildPath$1(a,s){var l,o=mathMax$7(s.r,0),c=mathMax$7(s.r0||0,0),u=o>0,d=c>0;if(!(!u&&!d)){if(u||(o=c,c=0),c>o){var f=o;o=c,c=f}var g=s.startAngle,y=s.endAngle;if(!(isNaN(g)||isNaN(y))){var $=s.cx,x=s.cy,N=!!s.clockwise,R=mathAbs$1(y-g),j=R>PI2$3&&R%PI2$3;if(j>e$1&&(R=j),!(o>e$1))a.moveTo($,x);else if(R>PI2$3-e$1)a.moveTo($+o*mathCos$1(g),x+o*mathSin$1(g)),a.arc($,x,o,g,y,!N),c>e$1&&(a.moveTo($+c*mathCos$1(y),x+c*mathSin$1(y)),a.arc($,x,c,y,g,N));else{var ne=void 0,se=void 0,ce=void 0,fe=void 0,ea=void 0,ta=void 0,na=void 0,aa=void 0,ia=void 0,sa=void 0,ra=void 0,la=void 0,oa=void 0,ca=void 0,pa=void 0,ua=void 0,da=o*mathCos$1(g),ha=o*mathSin$1(g),ga=c*mathCos$1(y),fa=c*mathSin$1(y),ma=R>e$1;if(ma){var va=s.cornerRadius;va&&(l=normalizeCornerRadius(va),ne=l[0],se=l[1],ce=l[2],fe=l[3]);var ka=mathAbs$1(o-c)/2;if(ea=mathMin$7(ka,ce),ta=mathMin$7(ka,fe),na=mathMin$7(ka,ne),aa=mathMin$7(ka,se),ra=ia=mathMax$7(ea,ta),la=sa=mathMax$7(na,aa),(ia>e$1||sa>e$1)&&(oa=o*mathCos$1(y),ca=o*mathSin$1(y),pa=c*mathCos$1(g),ua=c*mathSin$1(g),R<PI$6)){var ya=intersect(da,ha,pa,ua,oa,ca,ga,fa);if(ya){var ba=da-ya[0],Ea=ha-ya[1],Ca=oa-ya[0],$a=ca-ya[1],Pa=1/mathSin$1(mathACos((ba*Ca+Ea*$a)/(mathSqrt(ba*ba+Ea*Ea)*mathSqrt(Ca*Ca+$a*$a)))/2),Da=mathSqrt(ya[0]*ya[0]+ya[1]*ya[1]);ra=mathMin$7(ia,(o-Da)/(Pa+1)),la=mathMin$7(sa,(c-Da)/(Pa-1))}}}if(!ma)a.moveTo($+da,x+ha);else if(ra>e$1){var Ta=mathMin$7(ce,ra),Ba=mathMin$7(fe,ra),wa=computeCornerTangents(pa,ua,da,ha,o,Ta,N),Oa=computeCornerTangents(oa,ca,ga,fa,o,Ba,N);a.moveTo($+wa.cx+wa.x0,x+wa.cy+wa.y0),ra<ia&&Ta===Ba?a.arc($+wa.cx,x+wa.cy,ra,mathATan2(wa.y0,wa.x0),mathATan2(Oa.y0,Oa.x0),!N):(Ta>0&&a.arc($+wa.cx,x+wa.cy,Ta,mathATan2(wa.y0,wa.x0),mathATan2(wa.y1,wa.x1),!N),a.arc($,x,o,mathATan2(wa.cy+wa.y1,wa.cx+wa.x1),mathATan2(Oa.cy+Oa.y1,Oa.cx+Oa.x1),!N),Ba>0&&a.arc($+Oa.cx,x+Oa.cy,Ba,mathATan2(Oa.y1,Oa.x1),mathATan2(Oa.y0,Oa.x0),!N))}else a.moveTo($+da,x+ha),a.arc($,x,o,g,y,!N);if(!(c>e$1)||!ma)a.lineTo($+ga,x+fa);else if(la>e$1){var Ta=mathMin$7(ne,la),Ba=mathMin$7(se,la),wa=computeCornerTangents(ga,fa,oa,ca,c,-Ba,N),Oa=computeCornerTangents(da,ha,pa,ua,c,-Ta,N);a.lineTo($+wa.cx+wa.x0,x+wa.cy+wa.y0),la<sa&&Ta===Ba?a.arc($+wa.cx,x+wa.cy,la,mathATan2(wa.y0,wa.x0),mathATan2(Oa.y0,Oa.x0),!N):(Ba>0&&a.arc($+wa.cx,x+wa.cy,Ba,mathATan2(wa.y0,wa.x0),mathATan2(wa.y1,wa.x1),!N),a.arc($,x,c,mathATan2(wa.cy+wa.y1,wa.cx+wa.x1),mathATan2(Oa.cy+Oa.y1,Oa.cx+Oa.x1),N),Ta>0&&a.arc($+Oa.cx,x+Oa.cy,Ta,mathATan2(Oa.y1,Oa.x1),mathATan2(Oa.y0,Oa.x0),!N))}else a.lineTo($+ga,x+fa),a.arc($,x,c,y,g,N)}a.closePath()}}}var SectorShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return a}(),Sector=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new SectorShape},s.prototype.buildPath=function(l,o){buildPath$1(l,o)},s.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},s}(Path);Sector.prototype.type="sector";var RingShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return a}(),Ring=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new RingShape},s.prototype.buildPath=function(l,o){var c=o.cx,u=o.cy,d=Math.PI*2;l.moveTo(c+o.r,u),l.arc(c,u,o.r,0,d,!1),l.moveTo(c+o.r0,u),l.arc(c,u,o.r0,0,d,!0)},s}(Path);Ring.prototype.type="ring";const Ring$1=Ring;function smoothBezier(a,s,l,o){var c=[],u=[],d=[],f=[],g,y,$,x;if(o){$=[1/0,1/0],x=[-1/0,-1/0];for(var N=0,R=a.length;N<R;N++)min$1($,$,a[N]),max$1(x,x,a[N]);min$1($,$,o[0]),max$1(x,x,o[1])}for(var N=0,R=a.length;N<R;N++){var j=a[N];if(l)g=a[N?N-1:R-1],y=a[(N+1)%R];else if(N===0||N===R-1){c.push(clone$3(a[N]));continue}else g=a[N-1],y=a[N+1];sub(u,y,g),scale$2(u,u,s);var ne=distance(j,g),se=distance(j,y),ce=ne+se;ce!==0&&(ne/=ce,se/=ce),scale$2(d,u,-ne),scale$2(f,u,se);var fe=add([],j,d),ea=add([],j,f);o&&(max$1(fe,fe,$),min$1(fe,fe,x),max$1(ea,ea,$),min$1(ea,ea,x)),c.push(fe),c.push(ea)}return l&&c.push(c.shift()),c}function buildPath(a,s,l){var o=s.smooth,c=s.points;if(c&&c.length>=2){if(o){var u=smoothBezier(c,o,l,s.smoothConstraint);a.moveTo(c[0][0],c[0][1]);for(var d=c.length,f=0;f<(l?d:d-1);f++){var g=u[f*2],y=u[f*2+1],$=c[(f+1)%d];a.bezierCurveTo(g[0],g[1],y[0],y[1],$[0],$[1])}}else{a.moveTo(c[0][0],c[0][1]);for(var f=1,x=c.length;f<x;f++)a.lineTo(c[f][0],c[f][1])}l&&a.closePath()}}var PolygonShape=function(){function a(){this.points=null,this.smooth=0,this.smoothConstraint=null}return a}(),Polygon=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new PolygonShape},s.prototype.buildPath=function(l,o){buildPath(l,o,!0)},s}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function a(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return a}(),Polyline$1=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new PolylineShape},s.prototype.buildPath=function(l,o){buildPath(l,o,!1)},s}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),Line$1=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new LineShape},s.prototype.buildPath=function(l,o){var c,u,d,f;if(this.subPixelOptimize){var g=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,o,this.style);c=g.x1,u=g.y1,d=g.x2,f=g.y2}else c=o.x1,u=o.y1,d=o.x2,f=o.y2;var y=o.percent;y!==0&&(l.moveTo(c,u),y<1&&(d=c*(1-y)+d*y,f=u*(1-y)+f*y),l.lineTo(d,f))},s.prototype.pointAt=function(l){var o=this.shape;return[o.x1*(1-l)+o.x2*l,o.y1*(1-l)+o.y2*l]},s}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return a}();function someVectorAt(a,s,l){var o=a.cpx2,c=a.cpy2;return o!=null||c!=null?[(l?cubicDerivativeAt:cubicAt)(a.x1,a.cpx1,a.cpx2,a.x2,s),(l?cubicDerivativeAt:cubicAt)(a.y1,a.cpy1,a.cpy2,a.y2,s)]:[(l?quadraticDerivativeAt:quadraticAt$1)(a.x1,a.cpx1,a.x2,s),(l?quadraticDerivativeAt:quadraticAt$1)(a.y1,a.cpy1,a.y2,s)]}var BezierCurve=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new BezierCurveShape},s.prototype.buildPath=function(l,o){var c=o.x1,u=o.y1,d=o.x2,f=o.y2,g=o.cpx1,y=o.cpy1,$=o.cpx2,x=o.cpy2,N=o.percent;N!==0&&(l.moveTo(c,u),$==null||x==null?(N<1&&(quadraticSubdivide(c,g,d,N,out),g=out[1],d=out[2],quadraticSubdivide(u,y,f,N,out),y=out[1],f=out[2]),l.quadraticCurveTo(g,y,d,f)):(N<1&&(cubicSubdivide(c,g,$,d,N,out),g=out[1],$=out[2],d=out[3],cubicSubdivide(u,y,x,f,N,out),y=out[1],x=out[2],f=out[3]),l.bezierCurveTo(g,y,$,x,d,f)))},s.prototype.pointAt=function(l){return someVectorAt(this.shape,l,!1)},s.prototype.tangentAt=function(l){var o=someVectorAt(this.shape,l,!0);return normalize$3(o,o)},s}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function a(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),Arc=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new ArcShape},s.prototype.buildPath=function(l,o){var c=o.cx,u=o.cy,d=Math.max(o.r,0),f=o.startAngle,g=o.endAngle,y=o.clockwise,$=Math.cos(f),x=Math.sin(f);l.moveTo($*d+c,x*d+u),l.arc(c,u,d,f,g,!y)},s}(Path);Arc.prototype.type="arc";var CompoundPath=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="compound",l}return s.prototype._updatePathDirty=function(){for(var l=this.shape.paths,o=this.shapeChanged(),c=0;c<l.length;c++)o=o||l[c].shapeChanged();o&&this.dirtyShape()},s.prototype.beforeBrush=function(){this._updatePathDirty();for(var l=this.shape.paths||[],o=this.getGlobalScale(),c=0;c<l.length;c++)l[c].path||l[c].createPathProxy(),l[c].path.setScale(o[0],o[1],l[c].segmentIgnoreThreshold)},s.prototype.buildPath=function(l,o){for(var c=o.paths||[],u=0;u<c.length;u++)c[u].buildPath(l,c[u].shape,!0)},s.prototype.afterBrush=function(){for(var l=this.shape.paths||[],o=0;o<l.length;o++)l[o].pathUpdated()},s.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},s}(Path);const CompoundPath$1=CompoundPath;var Gradient=function(){function a(s){this.colorStops=s||[]}return a.prototype.addColorStop=function(s,l){this.colorStops.push({offset:s,color:l})},a}(),LinearGradient=function(a){__extends(s,a);function s(l,o,c,u,d,f){var g=a.call(this,d)||this;return g.x=l??0,g.y=o??0,g.x2=c??1,g.y2=u??0,g.type="linear",g.global=f||!1,g}return s}(Gradient),RadialGradient=function(a){__extends(s,a);function s(l,o,c,u,d){var f=a.call(this,u)||this;return f.x=l??.5,f.y=o??.5,f.r=c??.5,f.type="radial",f.global=d||!1,f}return s}(Gradient);const RadialGradient$1=RadialGradient;var extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function a(s,l){this._corners=[],this._axes=[],this._origin=[0,0];for(var o=0;o<4;o++)this._corners[o]=new Point;for(var o=0;o<2;o++)this._axes[o]=new Point;s&&this.fromBoundingRect(s,l)}return a.prototype.fromBoundingRect=function(s,l){var o=this._corners,c=this._axes,u=s.x,d=s.y,f=u+s.width,g=d+s.height;if(o[0].set(u,d),o[1].set(f,d),o[2].set(f,g),o[3].set(u,g),l)for(var y=0;y<4;y++)o[y].transform(l);Point.sub(c[0],o[1],o[0]),Point.sub(c[1],o[3],o[0]),c[0].normalize(),c[1].normalize();for(var y=0;y<2;y++)this._origin[y]=c[y].dot(o[0])},a.prototype.intersect=function(s,l){var o=!0,c=!l;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,s,minTv,maxTv,c,1)&&(o=!1,c)||!this._intersectCheckOneSide(s,this,minTv,maxTv,c,-1)&&(o=!1,c)||c||Point.copy(l,o?minTv:maxTv),o},a.prototype._intersectCheckOneSide=function(s,l,o,c,u,d){for(var f=!0,g=0;g<2;g++){var y=this._axes[g];if(this._getProjMinMaxOnAxis(g,s._corners,extent),this._getProjMinMaxOnAxis(g,l._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(f=!1,u)return f;var $=Math.abs(extent2[0]-extent[1]),x=Math.abs(extent[0]-extent2[1]);Math.min($,x)>c.len()&&($<x?Point.scale(c,y,-$*d):Point.scale(c,y,x*d))}else if(o){var $=Math.abs(extent2[0]-extent[1]),x=Math.abs(extent[0]-extent2[1]);Math.min($,x)<o.len()&&($<x?Point.scale(o,y,$*d):Point.scale(o,y,-x*d))}}return f},a.prototype._getProjMinMaxOnAxis=function(s,l,o){for(var c=this._axes[s],u=this._origin,d=l[0].dot(c)+u[s],f=d,g=d,y=1;y<l.length;y++){var $=l[y].dot(c)+u[s];f=Math.min($,f),g=Math.max($,g)}o[0]=f,o[1]=g},a}();const OrientedBoundingRect$1=OrientedBoundingRect;var m$1=[],IncrementalDisplayable=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.notClear=!0,l.incremental=!0,l._displayables=[],l._temporaryDisplayables=[],l._cursor=0,l}return s.prototype.traverse=function(l,o){l.call(o,this)},s.prototype.useStyle=function(){this.style={}},s.prototype.getCursor=function(){return this._cursor},s.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},s.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},s.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},s.prototype.addDisplayable=function(l,o){o?this._temporaryDisplayables.push(l):this._displayables.push(l),this.markRedraw()},s.prototype.addDisplayables=function(l,o){o=o||!1;for(var c=0;c<l.length;c++)this.addDisplayable(l[c],o)},s.prototype.getDisplayables=function(){return this._displayables},s.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},s.prototype.eachPendingDisplayable=function(l){for(var o=this._cursor;o<this._displayables.length;o++)l&&l(this._displayables[o]);for(var o=0;o<this._temporaryDisplayables.length;o++)l&&l(this._temporaryDisplayables[o])},s.prototype.update=function(){this.updateTransform();for(var l=this._cursor;l<this._displayables.length;l++){var o=this._displayables[l];o.parent=this,o.update(),o.parent=null}for(var l=0;l<this._temporaryDisplayables.length;l++){var o=this._temporaryDisplayables[l];o.parent=this,o.update(),o.parent=null}},s.prototype.getBoundingRect=function(){if(!this._rect){for(var l=new BoundingRect(1/0,1/0,-1/0,-1/0),o=0;o<this._displayables.length;o++){var c=this._displayables[o],u=c.getBoundingRect().clone();c.needLocalTransform()&&u.applyTransform(c.getLocalTransform(m$1)),l.union(u)}this._rect=l}return this._rect},s.prototype.contain=function(l,o){var c=this.transformCoordToLocal(l,o),u=this.getBoundingRect();if(u.contain(c[0],c[1]))for(var d=0;d<this._displayables.length;d++){var f=this._displayables[d];if(f.contain(l,o))return!0}return!1},s}(Displayable);const IncrementalDisplayable$1=IncrementalDisplayable;var transitionStore=makeInner();function getAnimationConfig(a,s,l,o,c){var u;if(s&&s.ecModel){var d=s.ecModel.getUpdatePayload();u=d&&d.animation}var f=s&&s.isAnimationEnabled(),g=a==="update";if(f){var y=void 0,$=void 0,x=void 0;o?(y=retrieve2(o.duration,200),$=retrieve2(o.easing,"cubicOut"),x=0):(y=s.getShallow(g?"animationDurationUpdate":"animationDuration"),$=s.getShallow(g?"animationEasingUpdate":"animationEasing"),x=s.getShallow(g?"animationDelayUpdate":"animationDelay")),u&&(u.duration!=null&&(y=u.duration),u.easing!=null&&($=u.easing),u.delay!=null&&(x=u.delay)),isFunction$2(x)&&(x=x(l,c)),isFunction$2(y)&&(y=y(l));var N={duration:y||0,delay:x,easing:$};return N}else return null}function animateOrSetProps(a,s,l,o,c,u,d){var f=!1,g;isFunction$2(c)?(d=u,u=c,c=null):isObject$5(c)&&(u=c.cb,d=c.during,f=c.isFrom,g=c.removeOpt,c=c.dataIndex);var y=a==="leave";y||s.stopAnimation("leave");var $=getAnimationConfig(a,o,c,y?g||{}:null,o&&o.getAnimationDelayParams?o.getAnimationDelayParams(s,c):null);if($&&$.duration>0){var x=$.duration,N=$.delay,R=$.easing,j={duration:x,delay:N||0,easing:R,done:u,force:!!u||!!d,setToFinal:!y,scope:a,during:d};f?s.animateFrom(l,j):s.animateTo(l,j)}else s.stopAnimation(),!f&&s.attr(l),d&&d(1),u&&u()}function updateProps$1(a,s,l,o,c,u){animateOrSetProps("update",a,s,l,o,c,u)}function initProps(a,s,l,o,c,u){animateOrSetProps("enter",a,s,l,o,c,u)}function isElementRemoved(a){if(!a.__zr)return!0;for(var s=0;s<a.animators.length;s++){var l=a.animators[s];if(l.scope==="leave")return!0}return!1}function removeElement(a,s,l,o,c,u){isElementRemoved(a)||animateOrSetProps("leave",a,s,l,o,c,u)}function fadeOutDisplayable(a,s,l,o){a.removeTextContent(),a.removeTextGuideLine(),removeElement(a,{style:{opacity:0}},s,l,o)}function removeElementWithFadeOut(a,s,l){function o(){a.parent&&a.parent.remove(a)}a.isGroup?a.traverse(function(c){c.isGroup||fadeOutDisplayable(c,s,l,o)}):fadeOutDisplayable(a,s,l,o)}function saveOldStyle(a){transitionStore(a).oldStyle=a.style}function getOldStyle(a){return transitionStore(a).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(a){return Path.extend(a)}var extendPathFromString=extendFromString;function extendPath(a,s){return extendPathFromString(a,s)}function registerShape(a,s){_customShapeMap[a]=s}function getShapeClass(a){if(_customShapeMap.hasOwnProperty(a))return _customShapeMap[a]}function makePath(a,s,l,o){var c=createFromString(a,s);return l&&(o==="center"&&(l=centerGraphic(l,c.getBoundingRect())),resizePath(c,l)),c}function makeImage(a,s,l){var o=new ZRImage({style:{image:a,x:s.x,y:s.y,width:s.width,height:s.height},onload:function(c){if(l==="center"){var u={width:c.width,height:c.height};o.setStyle(centerGraphic(s,u))}}});return o}function centerGraphic(a,s){var l=s.width/s.height,o=a.height*l,c;o<=a.width?c=a.height:(o=a.width,c=o/l);var u=a.x+a.width/2,d=a.y+a.height/2;return{x:u-o/2,y:d-c/2,width:o,height:c}}var mergePath=mergePath$1;function resizePath(a,s){if(a.applyTransform){var l=a.getBoundingRect(),o=l.calculateTransform(s);a.applyTransform(o)}}function subPixelOptimizeLine(a,s){return subPixelOptimizeLine$1(a,a,{lineWidth:s}),a}function subPixelOptimizeRect(a){return subPixelOptimizeRect$1(a.shape,a.shape,a.style),a}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(a,s){for(var l=identity([]);a&&a!==s;)mul(l,a.getLocalTransform(),l),a=a.parent;return l}function applyTransform(a,s,l){return s&&!isArrayLike(s)&&(s=Transformable.getLocalTransform(s)),l&&(s=invert([],s)),applyTransform$1([],a,s)}function transformDirection(a,s,l){var o=s[4]===0||s[5]===0||s[0]===0?1:Math.abs(2*s[4]/s[0]),c=s[4]===0||s[5]===0||s[2]===0?1:Math.abs(2*s[4]/s[2]),u=[a==="left"?-o:a==="right"?o:0,a==="top"?-c:a==="bottom"?c:0];return u=applyTransform(u,s,l),Math.abs(u[0])>Math.abs(u[1])?u[0]>0?"right":"left":u[1]>0?"bottom":"top"}function isNotGroup(a){return!a.isGroup}function isPath$1(a){return a.shape!=null}function groupTransition(a,s,l){if(!a||!s)return;function o(d){var f={};return d.traverse(function(g){isNotGroup(g)&&g.anid&&(f[g.anid]=g)}),f}function c(d){var f={x:d.x,y:d.y,rotation:d.rotation};return isPath$1(d)&&(f.shape=extend({},d.shape)),f}var u=o(a);s.traverse(function(d){if(isNotGroup(d)&&d.anid){var f=u[d.anid];if(f){var g=c(d);d.attr(c(f)),updateProps$1(d,g,l,getECData(d).dataIndex)}}})}function clipPointsByRect(a,s){return map$1(a,function(l){var o=l[0];o=mathMax$6(o,s.x),o=mathMin$6(o,s.x+s.width);var c=l[1];return c=mathMax$6(c,s.y),c=mathMin$6(c,s.y+s.height),[o,c]})}function clipRectByRect(a,s){var l=mathMax$6(a.x,s.x),o=mathMin$6(a.x+a.width,s.x+s.width),c=mathMax$6(a.y,s.y),u=mathMin$6(a.y+a.height,s.y+s.height);if(o>=l&&u>=c)return{x:l,y:c,width:o-l,height:u-c}}function createIcon(a,s,l){var o=extend({rectHover:!0},s),c=o.style={strokeNoScale:!0};if(l=l||{x:-1,y:-1,width:2,height:2},a)return a.indexOf("image://")===0?(c.image=a.slice(8),defaults(c,l),new ZRImage(o)):makePath(a.replace("path://",""),o,l,"center")}function linePolygonIntersect(a,s,l,o,c){for(var u=0,d=c[c.length-1];u<c.length;u++){var f=c[u];if(lineLineIntersect$1(a,s,l,o,f[0],f[1],d[0],d[1]))return!0;d=f}}function lineLineIntersect$1(a,s,l,o,c,u,d,f){var g=l-a,y=o-s,$=d-c,x=f-u,N=crossProduct2d$1($,x,g,y);if(nearZero(N))return!1;var R=a-c,j=s-u,ne=crossProduct2d$1(R,j,g,y)/N;if(ne<0||ne>1)return!1;var se=crossProduct2d$1(R,j,$,x)/N;return!(se<0||se>1)}function crossProduct2d$1(a,s,l,o){return a*o-l*s}function nearZero(a){return a<=1e-6&&a>=-1e-6}function setTooltipConfig(a){var s=a.itemTooltipOption,l=a.componentModel,o=a.itemName,c=isString$2(s)?{formatter:s}:s,u=l.mainType,d=l.componentIndex,f={componentType:u,name:o,$vars:["name"]};f[u+"Index"]=d;var g=a.formatterParamsExtra;g&&each$f(keys(g),function($){hasOwn(f,$)||(f[$]=g[$],f.$vars.push($))});var y=getECData(a.el);y.componentMainType=u,y.componentIndex=d,y.tooltipConfig={name:o,option:defaults({content:o,encodeHTMLContent:!0,formatterParams:f},c)}}function traverseElement(a,s){var l;a.isGroup&&(l=s(a)),l||a.traverse(s)}function traverseElements(a,s){if(a)if(isArray$3(a))for(var l=0;l<a.length;l++)traverseElement(a[l],s);else traverseElement(a,s)}registerShape("circle",Circle);registerShape("ellipse",Ellipse$1);registerShape("sector",Sector);registerShape("ring",Ring$1);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath:CompoundPath$1,Ellipse:Ellipse$1,Group:Group$3,Image:ZRImage,IncrementalDisplayable:IncrementalDisplayable$1,Line:Line$1,LinearGradient,OrientedBoundingRect:OrientedBoundingRect$1,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient:RadialGradient$1,Rect:Rect$2,Ring:Ring$1,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(a,s){for(var l=0;l<SPECIAL_STATES.length;l++){var o=SPECIAL_STATES[l],c=s[o],u=a.ensureState(o);u.style=u.style||{},u.style.text=c}var d=a.currentStates.slice();a.clearStates(!0),a.setStyle({text:s.normal}),a.useStates(d,!0)}function getLabelText(a,s,l){var o=a.labelFetcher,c=a.labelDataIndex,u=a.labelDimIndex,d=s.normal,f;o&&(f=o.getFormattedLabel(c,"normal",null,u,d&&d.get("formatter"),l!=null?{interpolatedValue:l}:null)),f==null&&(f=isFunction$2(a.defaultText)?a.defaultText(c,a,l):a.defaultText);for(var g={normal:f},y=0;y<SPECIAL_STATES.length;y++){var $=SPECIAL_STATES[y],x=s[$];g[$]=retrieve2(o?o.getFormattedLabel(c,$,null,u,x&&x.get("formatter")):null,f)}return g}function setLabelStyle(a,s,l,o){l=l||EMPTY_OBJ;for(var c=a instanceof ZRText,u=!1,d=0;d<DISPLAY_STATES.length;d++){var f=s[DISPLAY_STATES[d]];if(f&&f.getShallow("show")){u=!0;break}}var g=c?a:a.getTextContent();if(u){c||(g||(g=new ZRText,a.setTextContent(g)),a.stateProxy&&(g.stateProxy=a.stateProxy));var y=getLabelText(l,s),$=s.normal,x=!!$.getShallow("show"),N=createTextStyle($,o&&o.normal,l,!1,!c);N.text=y.normal,c||a.setTextConfig(createTextConfig($,l,!1));for(var d=0;d<SPECIAL_STATES.length;d++){var R=SPECIAL_STATES[d],f=s[R];if(f){var j=g.ensureState(R),ne=!!retrieve2(f.getShallow("show"),x);if(ne!==x&&(j.ignore=!ne),j.style=createTextStyle(f,o&&o[R],l,!0,!c),j.style.text=y[R],!c){var se=a.ensureState(R);se.textConfig=createTextConfig(f,l,!0)}}}g.silent=!!$.getShallow("silent"),g.style.x!=null&&(N.x=g.style.x),g.style.y!=null&&(N.y=g.style.y),g.ignore=!x,g.useStyle(N),g.dirty(),l.enableTextSetter&&(labelInner(g).setLabelText=function(ce){var fe=getLabelText(l,s,ce);setLabelText(g,fe)})}else g&&(g.ignore=!0);a.dirty()}function getLabelStatesModels(a,s){s=s||"label";for(var l={normal:a.getModel(s)},o=0;o<SPECIAL_STATES.length;o++){var c=SPECIAL_STATES[o];l[c]=a.getModel([c,s])}return l}function createTextStyle(a,s,l,o,c){var u={};return setTextStyleCommon(u,a,l,o,c),s&&extend(u,s),u}function createTextConfig(a,s,l){s=s||{};var o={},c,u=a.getShallow("rotate"),d=retrieve2(a.getShallow("distance"),l?null:5),f=a.getShallow("offset");return c=a.getShallow("position")||(l?null:"inside"),c==="outside"&&(c=s.defaultOutsidePosition||"top"),c!=null&&(o.position=c),f!=null&&(o.offset=f),u!=null&&(u*=Math.PI/180,o.rotation=u),d!=null&&(o.distance=d),o.outsideFill=a.get("color")==="inherit"?s.inheritColor||null:"auto",o}function setTextStyleCommon(a,s,l,o,c){l=l||EMPTY_OBJ;var u=s.ecModel,d=u&&u.option.textStyle,f=getRichItemNames(s),g;if(f){g={};for(var y in f)if(f.hasOwnProperty(y)){var $=s.getModel(["rich",y]);setTokenTextStyle(g[y]={},$,d,l,o,c,!1,!0)}}g&&(a.rich=g);var x=s.get("overflow");x&&(a.overflow=x);var N=s.get("minMargin");N!=null&&(a.margin=N),setTokenTextStyle(a,s,d,l,o,c,!0,!1)}function getRichItemNames(a){for(var s;a&&a!==a.ecModel;){var l=(a.option||EMPTY_OBJ).rich;if(l){s=s||{};for(var o=keys(l),c=0;c<o.length;c++){var u=o[c];s[u]=1}}a=a.parentModel}return s}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(a,s,l,o,c,u,d,f){l=!c&&l||EMPTY_OBJ;var g=o&&o.inheritColor,y=s.getShallow("color"),$=s.getShallow("textBorderColor"),x=retrieve2(s.getShallow("opacity"),l.opacity);(y==="inherit"||y==="auto")&&(g?y=g:y=null),($==="inherit"||$==="auto")&&(g?$=g:$=null),u||(y=y||l.color,$=$||l.textBorderColor),y!=null&&(a.fill=y),$!=null&&(a.stroke=$);var N=retrieve2(s.getShallow("textBorderWidth"),l.textBorderWidth);N!=null&&(a.lineWidth=N);var R=retrieve2(s.getShallow("textBorderType"),l.textBorderType);R!=null&&(a.lineDash=R);var j=retrieve2(s.getShallow("textBorderDashOffset"),l.textBorderDashOffset);j!=null&&(a.lineDashOffset=j),!c&&x==null&&!f&&(x=o&&o.defaultOpacity),x!=null&&(a.opacity=x),!c&&!u&&a.fill==null&&o.inheritColor&&(a.fill=o.inheritColor);for(var ne=0;ne<TEXT_PROPS_WITH_GLOBAL.length;ne++){var se=TEXT_PROPS_WITH_GLOBAL[ne],ce=retrieve2(s.getShallow(se),l[se]);ce!=null&&(a[se]=ce)}for(var ne=0;ne<TEXT_PROPS_SELF.length;ne++){var se=TEXT_PROPS_SELF[ne],ce=s.getShallow(se);ce!=null&&(a[se]=ce)}if(a.verticalAlign==null){var fe=s.getShallow("baseline");fe!=null&&(a.verticalAlign=fe)}if(!d||!o.disableBox){for(var ne=0;ne<TEXT_PROPS_BOX.length;ne++){var se=TEXT_PROPS_BOX[ne],ce=s.getShallow(se);ce!=null&&(a[se]=ce)}var ea=s.getShallow("borderType");ea!=null&&(a.borderDash=ea),(a.backgroundColor==="auto"||a.backgroundColor==="inherit")&&g&&(a.backgroundColor=g),(a.borderColor==="auto"||a.borderColor==="inherit")&&g&&(a.borderColor=g)}}function getFont(a,s){var l=s&&s.getModel("textStyle");return trim$1([a.fontStyle||l&&l.getShallow("fontStyle")||"",a.fontWeight||l&&l.getShallow("fontWeight")||"",(a.fontSize||l&&l.getShallow("fontSize")||12)+"px",a.fontFamily||l&&l.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(a,s,l,o){if(a){var c=labelInner(a);c.prevValue=c.value,c.value=l;var u=s.normal;c.valueAnimation=u.get("valueAnimation"),c.valueAnimation&&(c.precision=u.get("precision"),c.defaultInterpolatedText=o,c.statesModels=s)}}function animateLabelValue(a,s,l,o,c){var u=labelInner(a);if(!u.valueAnimation||u.prevValue===u.value)return;var d=u.defaultInterpolatedText,f=retrieve2(u.interpolatedValue,u.prevValue),g=u.value;function y($){var x=interpolateRawValues(l,u.precision,f,g,$);u.interpolatedValue=$===1?null:x;var N=getLabelText({labelDataIndex:s,labelFetcher:c,defaultText:d?d(x):x+""},u.statesModels,x);setLabelText(a,N)}a.percent=0,(u.prevValue==null?initProps:updateProps$1)(a,{percent:1},o,s,null,y)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function a(){}return a.prototype.getTextColor=function(s){var l=this.ecModel;return this.getShallow("color")||(!s&&l?l.get(PATH_COLOR):null)},a.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},a.prototype.getTextRect=function(s){for(var l={text:s,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},o=0;o<textStyleParams.length;o++)l[textStyleParams[o]]=this.getShallow(textStyleParams[o]);return tmpText.useStyle(l),tmpText.update(),tmpText.getBoundingRect()},a}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function a(){}return a.prototype.getLineStyle=function(s){return getLineStyle(this,s)},a}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function a(){}return a.prototype.getItemStyle=function(s,l){return getItemStyle(this,s,l)},a}(),Model=function(){function a(s,l,o){this.parentModel=l,this.ecModel=o,this.option=s}return a.prototype.init=function(s,l,o){},a.prototype.mergeOption=function(s,l){merge(this.option,s,!0)},a.prototype.get=function(s,l){return s==null?this.option:this._doGet(this.parsePath(s),!l&&this.parentModel)},a.prototype.getShallow=function(s,l){var o=this.option,c=o==null?o:o[s];if(c==null&&!l){var u=this.parentModel;u&&(c=u.getShallow(s))}return c},a.prototype.getModel=function(s,l){var o=s!=null,c=o?this.parsePath(s):null,u=o?this._doGet(c):this.option;return l=l||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(c)),new a(u,l,this.ecModel)},a.prototype.isEmpty=function(){return this.option==null},a.prototype.restoreData=function(){},a.prototype.clone=function(){var s=this.constructor;return new s(clone$4(this.option))},a.prototype.parsePath=function(s){return typeof s=="string"?s.split("."):s},a.prototype.resolveParentPath=function(s){return s},a.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},a.prototype._doGet=function(s,l){var o=this.option;if(!s)return o;for(var c=0;c<s.length&&!(s[c]&&(o=o&&typeof o=="object"?o[s[c]]:null,o==null));c++);return o==null&&l&&(o=l._doGet(this.resolveParentPath(s),l.parentModel)),o},a}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(a){return[a||"",base++].join("_")}function enableSubTypeDefaulter(a){var s={};a.registerSubTypeDefaulter=function(l,o){var c=parseClassType(l);s[c.main]=o},a.determineSubType=function(l,o){var c=o.type;if(!c){var u=parseClassType(l).main;a.hasSubTypes(l)&&s[u]&&(c=s[u](o))}return c}}function enableTopologicalTravel(a,s){a.topologicalTravel=function(u,d,f,g){if(!u.length)return;var y=l(d),$=y.graph,x=y.noEntryList,N={};for(each$f(u,function(fe){N[fe]=!0});x.length;){var R=x.pop(),j=$[R],ne=!!N[R];ne&&(f.call(g,R,j.originalDeps.slice()),delete N[R]),each$f(j.successor,ne?ce:se)}each$f(N,function(){var fe="";throw new Error(fe)});function se(fe){$[fe].entryCount--,$[fe].entryCount===0&&x.push(fe)}function ce(fe){N[fe]=!0,se(fe)}};function l(u){var d={},f=[];return each$f(u,function(g){var y=o(d,g),$=y.originalDeps=s(g),x=c($,u);y.entryCount=x.length,y.entryCount===0&&f.push(g),each$f(x,function(N){indexOf(y.predecessor,N)<0&&y.predecessor.push(N);var R=o(d,N);indexOf(R.successor,N)<0&&R.successor.push(g)})}),{graph:d,noEntryList:f}}function o(u,d){return u[d]||(u[d]={predecessor:[],successor:[]}),u[d]}function c(u,d){var f=[];return each$f(u,function(g){indexOf(d,g)>=0&&f.push(g)}),f}}function inheritDefaultOption(a,s){return merge(merge({},a,!0),s,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var a=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return a.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(a,s){a=a.toUpperCase(),localeModels[a]=new Model(s),localeStorage[a]=s}function createLocaleObject(a){if(isString$2(a)){var s=localeStorage[a.toUpperCase()]||{};return a===LOCALE_ZH||a===LOCALE_EN?clone$4(s):merge(clone$4(s),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(a){return localeModels[a]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(a,s){return a+="","0000".substr(0,s-a.length)+a}function getPrimaryTimeUnit(a){switch(a){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return a}}function isPrimaryTimeUnit(a){return a===getPrimaryTimeUnit(a)}function getDefaultFormatPrecisionOfInterval(a){switch(a){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format(a,s,l,o){var c=parseDate(a),u=c[fullYearGetterName(l)](),d=c[monthGetterName(l)]()+1,f=Math.floor((d-1)/3)+1,g=c[dateGetterName(l)](),y=c["get"+(l?"UTC":"")+"Day"](),$=c[hoursGetterName(l)](),x=($-1)%12+1,N=c[minutesGetterName(l)](),R=c[secondsGetterName(l)](),j=c[millisecondsGetterName(l)](),ne=$>=12?"pm":"am",se=ne.toUpperCase(),ce=o instanceof Model?o:getLocaleModel(o||SYSTEM_LANG)||getDefaultLocaleModel(),fe=ce.getModel("time"),ea=fe.get("month"),ta=fe.get("monthAbbr"),na=fe.get("dayOfWeek"),aa=fe.get("dayOfWeekAbbr");return(s||"").replace(/{a}/g,ne+"").replace(/{A}/g,se+"").replace(/{yyyy}/g,u+"").replace(/{yy}/g,pad(u%100+"",2)).replace(/{Q}/g,f+"").replace(/{MMMM}/g,ea[d-1]).replace(/{MMM}/g,ta[d-1]).replace(/{MM}/g,pad(d,2)).replace(/{M}/g,d+"").replace(/{dd}/g,pad(g,2)).replace(/{d}/g,g+"").replace(/{eeee}/g,na[y]).replace(/{ee}/g,aa[y]).replace(/{e}/g,y+"").replace(/{HH}/g,pad($,2)).replace(/{H}/g,$+"").replace(/{hh}/g,pad(x+"",2)).replace(/{h}/g,x+"").replace(/{mm}/g,pad(N,2)).replace(/{m}/g,N+"").replace(/{ss}/g,pad(R,2)).replace(/{s}/g,R+"").replace(/{SSS}/g,pad(j,3)).replace(/{S}/g,j+"")}function leveledFormat(a,s,l,o,c){var u=null;if(isString$2(l))u=l;else if(isFunction$2(l))u=l(a.value,s,{level:a.level});else{var d=extend({},defaultLeveledFormatter);if(a.level>0)for(var f=0;f<primaryTimeUnits.length;++f)d[primaryTimeUnits[f]]="{primary|"+d[primaryTimeUnits[f]]+"}";var g=l?l.inherit===!1?l:defaults(l,d):d,y=getUnitFromValue(a.value,c);if(g[y])u=g[y];else if(g.inherit){for(var $=timeUnits.indexOf(y),f=$-1;f>=0;--f)if(g[y]){u=g[y];break}u=u||d.none}if(isArray$3(u)){var x=a.level==null?0:a.level>=0?a.level:u.length+a.level;x=Math.min(x,u.length-1),u=u[x]}}return format(new Date(a.value),u,c,o)}function getUnitFromValue(a,s){var l=parseDate(a),o=l[monthGetterName(s)]()+1,c=l[dateGetterName(s)](),u=l[hoursGetterName(s)](),d=l[minutesGetterName(s)](),f=l[secondsGetterName(s)](),g=l[millisecondsGetterName(s)](),y=g===0,$=y&&f===0,x=$&&d===0,N=x&&u===0,R=N&&c===1,j=R&&o===1;return j?"year":R?"month":N?"day":x?"hour":$?"minute":y?"second":"millisecond"}function getUnitValue(a,s,l){var o=isNumber$2(a)?parseDate(a):a;switch(s=s||getUnitFromValue(a,l),s){case"year":return o[fullYearGetterName(l)]();case"half-year":return o[monthGetterName(l)]()>=6?1:0;case"quarter":return Math.floor((o[monthGetterName(l)]()+1)/4);case"month":return o[monthGetterName(l)]();case"day":return o[dateGetterName(l)]();case"half-day":return o[hoursGetterName(l)]()/24;case"hour":return o[hoursGetterName(l)]();case"minute":return o[minutesGetterName(l)]();case"second":return o[secondsGetterName(l)]();case"millisecond":return o[millisecondsGetterName(l)]()}}function fullYearGetterName(a){return a?"getUTCFullYear":"getFullYear"}function monthGetterName(a){return a?"getUTCMonth":"getMonth"}function dateGetterName(a){return a?"getUTCDate":"getDate"}function hoursGetterName(a){return a?"getUTCHours":"getHours"}function minutesGetterName(a){return a?"getUTCMinutes":"getMinutes"}function secondsGetterName(a){return a?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(a){return a?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(a){return a?"setUTCFullYear":"setFullYear"}function monthSetterName(a){return a?"setUTCMonth":"setMonth"}function dateSetterName(a){return a?"setUTCDate":"setDate"}function hoursSetterName(a){return a?"setUTCHours":"setHours"}function minutesSetterName(a){return a?"setUTCMinutes":"setMinutes"}function secondsSetterName(a){return a?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(a){return a?"setUTCMilliseconds":"setMilliseconds"}function addCommas(a){if(!isNumeric(a))return isString$2(a)?a:"-";var s=(a+"").split(".");return s[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(s.length>1?"."+s[1]:"")}function toCamelCase(a,s){return a=(a||"").toLowerCase().replace(/-(.)/g,function(l,o){return o.toUpperCase()}),s&&a&&(a=a.charAt(0).toUpperCase()+a.slice(1)),a}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(a,s,l){var o="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function c($){return $&&trim$1($)?$:"-"}function u($){return!!($!=null&&!isNaN($)&&isFinite($))}var d=s==="time",f=a instanceof Date;if(d||f){var g=d?parseDate(a):a;if(isNaN(+g)){if(f)return"-"}else return format(g,o,l)}if(s==="ordinal")return isStringSafe(a)?c(a):isNumber$2(a)&&u(a)?a+"":"-";var y=numericToNumber(a);return u(y)?addCommas(y):isStringSafe(a)?c(a):typeof a=="boolean"?a+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(a,s){return"{"+a+(s??"")+"}"};function formatTpl(a,s,l){isArray$3(s)||(s=[s]);var o=s.length;if(!o)return"";for(var c=s[0].$vars||[],u=0;u<c.length;u++){var d=TPL_VAR_ALIAS[u];a=a.replace(wrapVar(d),wrapVar(d,0))}for(var f=0;f<o;f++)for(var g=0;g<c.length;g++){var y=s[f][c[g]];a=a.replace(wrapVar(TPL_VAR_ALIAS[g],f),l?encodeHTML(y):y)}return a}function formatTplSimple(a,s,l){return each$f(s,function(o,c){a=a.replace("{"+c+"}",o)}),a}function getTooltipMarker(a,s){var l=isString$2(a)?{color:a,extraCssText:s}:a||{},o=l.color,c=l.type;s=l.extraCssText;var u=l.renderMode||"html";if(!o)return"";if(u==="html")return c==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(o)+";"+(s||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(o)+";"+(s||"")+'"></span>';var d=l.markerId||"markerX";return{renderMode:u,content:"{"+d+"|}  ",style:c==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:o}:{width:10,height:10,borderRadius:5,backgroundColor:o}}}function convertToColorString(a,s){return s=s||"transparent",isString$2(a)?a:isObject$5(a)&&a.colorStops&&(a.colorStops[0]||{}).color||s}function windowOpen(a,s){if(s==="_blank"||s==="blank"){var l=window.open();l.opener=null,l.location.href=a}else window.open(a,s)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(a,s,l,o,c){var u=0,d=0;o==null&&(o=1/0),c==null&&(c=1/0);var f=0;s.eachChild(function(g,y){var $=g.getBoundingRect(),x=s.childAt(y+1),N=x&&x.getBoundingRect(),R,j;if(a==="horizontal"){var ne=$.width+(N?-N.x+$.x:0);R=u+ne,R>o||g.newline?(u=0,R=ne,d+=f+l,f=$.height):f=Math.max(f,$.height)}else{var se=$.height+(N?-N.y+$.y:0);j=d+se,j>c||g.newline?(u+=f+l,d=0,j=se,f=$.width):f=Math.max(f,$.width)}g.newline||(g.x=u,g.y=d,g.markRedraw(),a==="horizontal"?u=R+l:d=j+l)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(a,s,l){var o=s.width,c=s.height,u=parsePercent(a.left,o),d=parsePercent(a.top,c),f=parsePercent(a.right,o),g=parsePercent(a.bottom,c);return(isNaN(u)||isNaN(parseFloat(a.left)))&&(u=0),(isNaN(f)||isNaN(parseFloat(a.right)))&&(f=o),(isNaN(d)||isNaN(parseFloat(a.top)))&&(d=0),(isNaN(g)||isNaN(parseFloat(a.bottom)))&&(g=c),l=normalizeCssArray(l||0),{width:Math.max(f-u-l[1]-l[3],0),height:Math.max(g-d-l[0]-l[2],0)}}function getLayoutRect(a,s,l){l=normalizeCssArray(l||0);var o=s.width,c=s.height,u=parsePercent(a.left,o),d=parsePercent(a.top,c),f=parsePercent(a.right,o),g=parsePercent(a.bottom,c),y=parsePercent(a.width,o),$=parsePercent(a.height,c),x=l[2]+l[0],N=l[1]+l[3],R=a.aspect;switch(isNaN(y)&&(y=o-f-N-u),isNaN($)&&($=c-g-x-d),R!=null&&(isNaN(y)&&isNaN($)&&(R>o/c?y=o*.8:$=c*.8),isNaN(y)&&(y=R*$),isNaN($)&&($=y/R)),isNaN(u)&&(u=o-f-y-N),isNaN(d)&&(d=c-g-$-x),a.left||a.right){case"center":u=o/2-y/2-l[3];break;case"right":u=o-y-N;break}switch(a.top||a.bottom){case"middle":case"center":d=c/2-$/2-l[0];break;case"bottom":d=c-$-x;break}u=u||0,d=d||0,isNaN(y)&&(y=o-N-u-(f||0)),isNaN($)&&($=c-x-d-(g||0));var j=new BoundingRect(u+l[3],d+l[0],y,$);return j.margin=l,j}function positionElement(a,s,l,o,c,u){var d=!c||!c.hv||c.hv[0],f=!c||!c.hv||c.hv[1],g=c&&c.boundingMode||"all";if(u=u||a,u.x=a.x,u.y=a.y,!d&&!f)return!1;var y;if(g==="raw")y=a.type==="group"?new BoundingRect(0,0,+s.width||0,+s.height||0):a.getBoundingRect();else if(y=a.getBoundingRect(),a.needLocalTransform()){var $=a.getLocalTransform();y=y.clone(),y.applyTransform($)}var x=getLayoutRect(defaults({width:y.width,height:y.height},s),l,o),N=d?x.x-y.x:0,R=f?x.y-y.y:0;return g==="raw"?(u.x=N,u.y=R):(u.x+=N,u.y+=R),u===a&&a.markRedraw(),!0}function sizeCalculable(a,s){return a[HV_NAMES[s][0]]!=null||a[HV_NAMES[s][1]]!=null&&a[HV_NAMES[s][2]]!=null}function fetchLayoutMode(a){var s=a.layoutMode||a.constructor.layoutMode;return isObject$5(s)?s:s?{type:s}:null}function mergeLayoutParam(a,s,l){var o=l&&l.ignoreSize;!isArray$3(o)&&(o=[o,o]);var c=d(HV_NAMES[0],0),u=d(HV_NAMES[1],1);y(HV_NAMES[0],a,c),y(HV_NAMES[1],a,u);function d($,x){var N={},R=0,j={},ne=0,se=2;if(each$e($,function(ea){j[ea]=a[ea]}),each$e($,function(ea){f(s,ea)&&(N[ea]=j[ea]=s[ea]),g(N,ea)&&R++,g(j,ea)&&ne++}),o[x])return g(s,$[1])?j[$[2]]=null:g(s,$[2])&&(j[$[1]]=null),j;if(ne===se||!R)return j;if(R>=se)return N;for(var ce=0;ce<$.length;ce++){var fe=$[ce];if(!f(N,fe)&&f(a,fe)){N[fe]=a[fe];break}}return N}function f($,x){return $.hasOwnProperty(x)}function g($,x){return $[x]!=null&&$[x]!=="auto"}function y($,x,N){each$e($,function(R){x[R]=N[R]})}}function getLayoutParams(a){return copyLayoutParams({},a)}function copyLayoutParams(a,s){return s&&a&&each$e(LOCATION_PARAMS,function(l){s.hasOwnProperty(l)&&(a[l]=s[l])}),a}var inner$l=makeInner(),ComponentModel=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this,l,o,c)||this;return u.uid=getUID("ec_cpt_model"),u}return s.prototype.init=function(l,o,c){this.mergeDefaultAndTheme(l,c)},s.prototype.mergeDefaultAndTheme=function(l,o){var c=fetchLayoutMode(this),u=c?getLayoutParams(l):{},d=o.getTheme();merge(l,d.get(this.mainType)),merge(l,this.getDefaultOption()),c&&mergeLayoutParam(l,u,c)},s.prototype.mergeOption=function(l,o){merge(this.option,l,!0);var c=fetchLayoutMode(this);c&&mergeLayoutParam(this.option,l,c)},s.prototype.optionUpdated=function(l,o){},s.prototype.getDefaultOption=function(){var l=this.constructor;if(!isExtendedClass(l))return l.defaultOption;var o=inner$l(this);if(!o.defaultOption){for(var c=[],u=l;u;){var d=u.prototype.defaultOption;d&&c.push(d),u=u.superClass}for(var f={},g=c.length-1;g>=0;g--)f=merge(f,c[g],!0);o.defaultOption=f}return o.defaultOption},s.prototype.getReferringComponents=function(l,o){var c=l+"Index",u=l+"Id";return queryReferringComponents(this.ecModel,l,{index:this.get(c,!0),id:this.get(u,!0)},o)},s.prototype.getBoxLayoutParams=function(){var l=this;return{left:l.get("left"),top:l.get("top"),right:l.get("right"),bottom:l.get("bottom"),width:l.get("width"),height:l.get("height")}},s.prototype.getZLevelKey=function(){return""},s.prototype.setZLevel=function(l){this.option.zlevel=l},s.protoInitialize=function(){var l=s.prototype;l.type="component",l.id="",l.name="",l.mainType="",l.subType="",l.componentIndex=0}(),s}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(a){var s=[];return each$f(ComponentModel.getClassesByMainType(a),function(l){s=s.concat(l.dependencies||l.prototype.dependencies||[])}),s=map$1(s,function(l){return parseClassType(l).main}),a!=="dataset"&&indexOf(s,"dataset")<=0&&s.unshift("dataset"),s}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(a){innerGlobalModel(a).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(a,s,l){var o={},c=querySeriesUpstreamDatasetModel(s);if(!c||!a)return o;var u=[],d=[],f=s.ecModel,g=innerGlobalModel(f).datasetMap,y=c.uid+"_"+l.seriesLayoutBy,$,x;a=a.slice(),each$f(a,function(ne,se){var ce=isObject$5(ne)?ne:a[se]={name:ne};ce.type==="ordinal"&&$==null&&($=se,x=j(ce)),o[ce.name]=[]});var N=g.get(y)||g.set(y,{categoryWayDim:x,valueWayDim:0});each$f(a,function(ne,se){var ce=ne.name,fe=j(ne);if($==null){var ea=N.valueWayDim;R(o[ce],ea,fe),R(d,ea,fe),N.valueWayDim+=fe}else if($===se)R(o[ce],0,fe),R(u,0,fe);else{var ea=N.categoryWayDim;R(o[ce],ea,fe),R(d,ea,fe),N.categoryWayDim+=fe}});function R(ne,se,ce){for(var fe=0;fe<ce;fe++)ne.push(se+fe)}function j(ne){var se=ne.dimsDef;return se?se.length:1}return u.length&&(o.itemName=u),d.length&&(o.seriesName=d),o}function makeSeriesEncodeForNameBased(a,s,l){var o={},c=querySeriesUpstreamDatasetModel(a);if(!c)return o;var u=s.sourceFormat,d=s.dimensionsDefine,f;(u===SOURCE_FORMAT_OBJECT_ROWS||u===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(d,function($,x){(isObject$5($)?$.name:$)==="name"&&(f=x)});var g=function(){for(var $={},x={},N=[],R=0,j=Math.min(5,l);R<j;R++){var ne=doGuessOrdinal(s.data,u,s.seriesLayoutBy,d,s.startIndex,R);N.push(ne);var se=ne===BE_ORDINAL.Not;if(se&&$.v==null&&R!==f&&($.v=R),($.n==null||$.n===$.v||!se&&N[$.n]===BE_ORDINAL.Not)&&($.n=R),ce($)&&N[$.n]!==BE_ORDINAL.Not)return $;se||(ne===BE_ORDINAL.Might&&x.v==null&&R!==f&&(x.v=R),(x.n==null||x.n===x.v)&&(x.n=R))}function ce(fe){return fe.v!=null&&fe.n!=null}return ce($)?$:ce(x)?x:null}();if(g){o.value=[g.v];var y=f??g.n;o.itemName=[y],o.seriesName=[y]}return o}function querySeriesUpstreamDatasetModel(a){var s=a.get("data",!0);if(!s)return queryReferringComponents(a.ecModel,"dataset",{index:a.get("datasetIndex",!0),id:a.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(a){return!a.get("transform",!0)&&!a.get("fromTransformResult",!0)?[]:queryReferringComponents(a.ecModel,"dataset",{index:a.get("fromDatasetIndex",!0),id:a.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(a,s){return doGuessOrdinal(a.data,a.sourceFormat,a.seriesLayoutBy,a.dimensionsDefine,a.startIndex,s)}function doGuessOrdinal(a,s,l,o,c,u){var d,f=5;if(isTypedArray(a))return BE_ORDINAL.Not;var g,y;if(o){var $=o[u];isObject$5($)?(g=$.name,y=$.type):isString$2($)&&(g=$)}if(y!=null)return y==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(s===SOURCE_FORMAT_ARRAY_ROWS){var x=a;if(l===SERIES_LAYOUT_BY_ROW){for(var N=x[u],R=0;R<(N||[]).length&&R<f;R++)if((d=ta(N[c+R]))!=null)return d}else for(var R=0;R<x.length&&R<f;R++){var j=x[c+R];if(j&&(d=ta(j[u]))!=null)return d}}else if(s===SOURCE_FORMAT_OBJECT_ROWS){var ne=a;if(!g)return BE_ORDINAL.Not;for(var R=0;R<ne.length&&R<f;R++){var se=ne[R];if(se&&(d=ta(se[g]))!=null)return d}}else if(s===SOURCE_FORMAT_KEYED_COLUMNS){var ce=a;if(!g)return BE_ORDINAL.Not;var N=ce[g];if(!N||isTypedArray(N))return BE_ORDINAL.Not;for(var R=0;R<N.length&&R<f;R++)if((d=ta(N[R]))!=null)return d}else if(s===SOURCE_FORMAT_ORIGINAL)for(var fe=a,R=0;R<fe.length&&R<f;R++){var se=fe[R],ea=getDataItemValue(se);if(!isArray$3(ea))return BE_ORDINAL.Not;if((d=ta(ea[u]))!=null)return d}function ta(na){var aa=isString$2(na);if(na!=null&&Number.isFinite(Number(na))&&na!=="")return aa?BE_ORDINAL.Might:BE_ORDINAL.Not;if(aa&&na!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(a,s){assert(internalOptionCreatorMap.get(a)==null&&s),internalOptionCreatorMap.set(a,s)}function concatInternalOptions(a,s,l){var o=internalOptionCreatorMap.get(s);if(!o)return l;var c=o(a);return c?l.concat(c):l}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function a(){}return a.prototype.getColorFromPalette=function(s,l,o){var c=normalizeToArray(this.get("color",!0)),u=this.get("colorLayer",!0);return getFromPalette(this,innerColor,c,u,s,l,o)},a.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},a}();function getDecalFromPalette(a,s,l,o){var c=normalizeToArray(a.get(["aria","decal","decals"]));return getFromPalette(a,innerDecal,c,null,s,l,o)}function getNearestPalette(a,s){for(var l=a.length,o=0;o<l;o++)if(a[o].length>s)return a[o];return a[l-1]}function getFromPalette(a,s,l,o,c,u,d){u=u||a;var f=s(u),g=f.paletteIdx||0,y=f.paletteNameMap=f.paletteNameMap||{};if(y.hasOwnProperty(c))return y[c];var $=d==null||!o?l:getNearestPalette(o,d);if($=$||l,!(!$||!$.length)){var x=$[g];return c&&(y[c]=x),f.paletteIdx=(g+1)%$.length,x}}function clearPalette(a,s){s(a).paletteIdx=0,s(a).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,GlobalModel=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.init=function(l,o,c,u,d,f){u=u||{},this.option=null,this._theme=new Model(u),this._locale=new Model(d),this._optionManager=f},s.prototype.setOption=function(l,o,c){var u=normalizeSetOptionInput(o);this._optionManager.setOption(l,c,u),this._resetOption(null,u)},s.prototype.resetOption=function(l,o){return this._resetOption(l,normalizeSetOptionInput(o))},s.prototype._resetOption=function(l,o){var c=!1,u=this._optionManager;if(!l||l==="recreate"){var d=u.mountOption(l==="recreate");!this.option||l==="recreate"?initBase(this,d):(this.restoreData(),this._mergeOption(d,o)),c=!0}if((l==="timeline"||l==="media")&&this.restoreData(),!l||l==="recreate"||l==="timeline"){var f=u.getTimelineOption(this);f&&(c=!0,this._mergeOption(f,o))}if(!l||l==="recreate"||l==="media"){var g=u.getMediaOption(this);g.length&&each$f(g,function(y){c=!0,this._mergeOption(y,o)},this)}return c},s.prototype.mergeOption=function(l){this._mergeOption(l,null)},s.prototype._mergeOption=function(l,o){var c=this.option,u=this._componentsMap,d=this._componentsCount,f=[],g=createHashMap(),y=o&&o.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(l,function(x,N){x!=null&&(ComponentModel.hasClass(N)?N&&(f.push(N),g.set(N,!0)):c[N]=c[N]==null?clone$4(x):merge(c[N],x,!0))}),y&&y.each(function(x,N){ComponentModel.hasClass(N)&&!g.get(N)&&(f.push(N),g.set(N,!0))}),ComponentModel.topologicalTravel(f,ComponentModel.getAllClassMainTypes(),$,this);function $(x){var N=concatInternalOptions(this,x,normalizeToArray(l[x])),R=u.get(x),j=R?y&&y.get(x)?"replaceMerge":"normalMerge":"replaceAll",ne=mappingToExists(R,N,j);setComponentTypeToKeyInfo(ne,x,ComponentModel),c[x]=null,u.set(x,null),d.set(x,0);var se=[],ce=[],fe=0,ea;each$f(ne,function(ta,na){var aa=ta.existing,ia=ta.newOption;if(!ia)aa&&(aa.mergeOption({},this),aa.optionUpdated({},!1));else{var sa=x==="series",ra=ComponentModel.getClass(x,ta.keyInfo.subType,!sa);if(!ra)return;if(x==="tooltip"){if(ea)return;ea=!0}if(aa&&aa.constructor===ra)aa.name=ta.keyInfo.name,aa.mergeOption(ia,this),aa.optionUpdated(ia,!1);else{var la=extend({componentIndex:na},ta.keyInfo);aa=new ra(ia,this,this,la),extend(aa,la),ta.brandNew&&(aa.__requireNewView=!0),aa.init(ia,this,this),aa.optionUpdated(null,!0)}}aa?(se.push(aa.option),ce.push(aa),fe++):(se.push(void 0),ce.push(void 0))},this),c[x]=se,u.set(x,ce),d.set(x,fe),x==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},s.prototype.getOption=function(){var l=clone$4(this.option);return each$f(l,function(o,c){if(ComponentModel.hasClass(c)){for(var u=normalizeToArray(o),d=u.length,f=!1,g=d-1;g>=0;g--)u[g]&&!isComponentIdInternal(u[g])?f=!0:(u[g]=null,!f&&d--);u.length=d,l[c]=u}}),delete l[OPTION_INNER_KEY],l},s.prototype.getTheme=function(){return this._theme},s.prototype.getLocaleModel=function(){return this._locale},s.prototype.setUpdatePayload=function(l){this._payload=l},s.prototype.getUpdatePayload=function(){return this._payload},s.prototype.getComponent=function(l,o){var c=this._componentsMap.get(l);if(c){var u=c[o||0];if(u)return u;if(o==null){for(var d=0;d<c.length;d++)if(c[d])return c[d]}}},s.prototype.queryComponents=function(l){var o=l.mainType;if(!o)return[];var c=l.index,u=l.id,d=l.name,f=this._componentsMap.get(o);if(!f||!f.length)return[];var g;return c!=null?(g=[],each$f(normalizeToArray(c),function(y){f[y]&&g.push(f[y])})):u!=null?g=queryByIdOrName("id",u,f):d!=null?g=queryByIdOrName("name",d,f):g=filter(f,function(y){return!!y}),filterBySubType(g,l)},s.prototype.findComponents=function(l){var o=l.query,c=l.mainType,u=f(o),d=u?this.queryComponents(u):filter(this._componentsMap.get(c),function(y){return!!y});return g(filterBySubType(d,l));function f(y){var $=c+"Index",x=c+"Id",N=c+"Name";return y&&(y[$]!=null||y[x]!=null||y[N]!=null)?{mainType:c,index:y[$],id:y[x],name:y[N]}:null}function g(y){return l.filter?filter(y,l.filter):y}},s.prototype.eachComponent=function(l,o,c){var u=this._componentsMap;if(isFunction$2(l)){var d=o,f=l;u.each(function(x,N){for(var R=0;x&&R<x.length;R++){var j=x[R];j&&f.call(d,N,j,j.componentIndex)}})}else for(var g=isString$2(l)?u.get(l):isObject$5(l)?this.findComponents(l):null,y=0;g&&y<g.length;y++){var $=g[y];$&&o.call(c,$,$.componentIndex)}},s.prototype.getSeriesByName=function(l){var o=convertOptionIdName(l,null);return filter(this._componentsMap.get("series"),function(c){return!!c&&o!=null&&c.name===o})},s.prototype.getSeriesByIndex=function(l){return this._componentsMap.get("series")[l]},s.prototype.getSeriesByType=function(l){return filter(this._componentsMap.get("series"),function(o){return!!o&&o.subType===l})},s.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(l){return!!l})},s.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},s.prototype.eachSeries=function(l,o){assertSeriesInitialized(this),each$f(this._seriesIndices,function(c){var u=this._componentsMap.get("series")[c];l.call(o,u,c)},this)},s.prototype.eachRawSeries=function(l,o){each$f(this._componentsMap.get("series"),function(c){c&&l.call(o,c,c.componentIndex)})},s.prototype.eachSeriesByType=function(l,o,c){assertSeriesInitialized(this),each$f(this._seriesIndices,function(u){var d=this._componentsMap.get("series")[u];d.subType===l&&o.call(c,d,u)},this)},s.prototype.eachRawSeriesByType=function(l,o,c){return each$f(this.getSeriesByType(l),o,c)},s.prototype.isSeriesFiltered=function(l){return assertSeriesInitialized(this),this._seriesIndicesMap.get(l.componentIndex)==null},s.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},s.prototype.filterSeries=function(l,o){assertSeriesInitialized(this);var c=[];each$f(this._seriesIndices,function(u){var d=this._componentsMap.get("series")[u];l.call(o,d,u)&&c.push(u)},this),this._seriesIndices=c,this._seriesIndicesMap=createHashMap(c)},s.prototype.restoreData=function(l){reCreateSeriesIndices(this);var o=this._componentsMap,c=[];o.each(function(u,d){ComponentModel.hasClass(d)&&c.push(d)}),ComponentModel.topologicalTravel(c,ComponentModel.getAllClassMainTypes(),function(u){each$f(o.get(u),function(d){d&&(u!=="series"||!isNotTargetSeries(d,l))&&d.restoreData()})})},s.internalField=function(){reCreateSeriesIndices=function(l){var o=l._seriesIndices=[];each$f(l._componentsMap.get("series"),function(c){c&&o.push(c.componentIndex)}),l._seriesIndicesMap=createHashMap(o)},assertSeriesInitialized=function(l){},initBase=function(l,o){l.option={},l.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,l._componentsMap=createHashMap({series:[]}),l._componentsCount=createHashMap();var c=o.aria;isObject$5(c)&&c.enabled==null&&(c.enabled=!0),mergeTheme(o,l._theme.option),merge(o,globalDefault,!1),l._mergeOption(o,null)}}(),s}(Model);function isNotTargetSeries(a,s){if(s){var l=s.seriesIndex,o=s.seriesId,c=s.seriesName;return l!=null&&a.componentIndex!==l||o!=null&&a.id!==o||c!=null&&a.name!==c}}function mergeTheme(a,s){var l=a.color&&!a.colorLayer;each$f(s,function(o,c){c==="colorLayer"&&l||ComponentModel.hasClass(c)||(typeof o=="object"?a[c]=a[c]?merge(a[c],o,!1):clone$4(o):a[c]==null&&(a[c]=o))})}function queryByIdOrName(a,s,l){if(isArray$3(s)){var o=createHashMap();return each$f(s,function(u){if(u!=null){var d=convertOptionIdName(u,null);d!=null&&o.set(u,!0)}}),filter(l,function(u){return u&&o.get(u[a])})}else{var c=convertOptionIdName(s,null);return filter(l,function(u){return u&&c!=null&&u[a]===c})}}function filterBySubType(a,s){return s.hasOwnProperty("subType")?filter(a,function(l){return l&&l.subType===s.subType}):a}function normalizeSetOptionInput(a){var s=createHashMap();return a&&each$f(normalizeToArray(a.replaceMerge),function(l){s.set(l,!0)}),{replaceMergeMainTypeMap:s}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function a(s){each$f(availableMethods,function(l){this[l]=bind$1(s[l],s)},this)}return a}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function a(){this._coordinateSystems=[]}return a.prototype.create=function(s,l){var o=[];each$f(coordinateSystemCreators,function(c,u){var d=c.create(s,l);o=o.concat(d||[])}),this._coordinateSystems=o},a.prototype.update=function(s,l){each$f(this._coordinateSystems,function(o){o.update&&o.update(s,l)})},a.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},a.register=function(s,l){coordinateSystemCreators[s]=l},a.get=function(s){return coordinateSystemCreators[s]},a}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function a(s){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=s}return a.prototype.setOption=function(s,l,o){s&&(each$f(normalizeToArray(s.series),function(d){d&&d.data&&isTypedArray(d.data)&&setAsPrimitive(d.data)}),each$f(normalizeToArray(s.dataset),function(d){d&&d.source&&isTypedArray(d.source)&&setAsPrimitive(d.source)})),s=clone$4(s);var c=this._optionBackup,u=parseRawOption(s,l,!c);this._newBaseOption=u.baseOption,c?(u.timelineOptions.length&&(c.timelineOptions=u.timelineOptions),u.mediaList.length&&(c.mediaList=u.mediaList),u.mediaDefault&&(c.mediaDefault=u.mediaDefault)):this._optionBackup=u},a.prototype.mountOption=function(s){var l=this._optionBackup;return this._timelineOptions=l.timelineOptions,this._mediaList=l.mediaList,this._mediaDefault=l.mediaDefault,this._currentMediaIndices=[],clone$4(s?l.baseOption:this._newBaseOption)},a.prototype.getTimelineOption=function(s){var l,o=this._timelineOptions;if(o.length){var c=s.getComponent("timeline");c&&(l=clone$4(o[c.getCurrentIndex()]))}return l},a.prototype.getMediaOption=function(s){var l=this._api.getWidth(),o=this._api.getHeight(),c=this._mediaList,u=this._mediaDefault,d=[],f=[];if(!c.length&&!u)return f;for(var g=0,y=c.length;g<y;g++)applyMediaQuery(c[g].query,l,o)&&d.push(g);return!d.length&&u&&(d=[-1]),d.length&&!indicesEquals(d,this._currentMediaIndices)&&(f=map$1(d,function($){return clone$4($===-1?u.option:c[$].option)})),this._currentMediaIndices=d,f},a}();function parseRawOption(a,s,l){var o=[],c,u,d=a.baseOption,f=a.timeline,g=a.options,y=a.media,$=!!a.media,x=!!(g||f||d&&d.timeline);d?(u=d,u.timeline||(u.timeline=f)):((x||$)&&(a.options=a.media=null),u=a),$&&isArray$3(y)&&each$f(y,function(R){R&&R.option&&(R.query?o.push(R):c||(c=R))}),N(u),each$f(g,function(R){return N(R)}),each$f(o,function(R){return N(R.option)});function N(R){each$f(s,function(j){j(R,l)})}return{baseOption:u,timelineOptions:g||[],mediaDefault:c,mediaList:o}}function applyMediaQuery(a,s,l){var o={width:s,height:l,aspectratio:s/l},c=!0;return each$f(a,function(u,d){var f=d.match(QUERY_REG);if(!(!f||!f[1]||!f[2])){var g=f[1],y=f[2].toLowerCase();compare(o[y],u,g)||(c=!1)}}),c}function compare(a,s,l){return l==="min"?a>=s:l==="max"?a<=s:a===s}function indicesEquals(a,s){return a.join(",")===s.join(",")}var each$d=each$f,isObject$4=isObject$5,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(a){var s=a&&a.itemStyle;if(s)for(var l=0,o=POSSIBLE_STYLES.length;l<o;l++){var c=POSSIBLE_STYLES[l],u=s.normal,d=s.emphasis;u&&u[c]&&(a[c]=a[c]||{},a[c].normal?merge(a[c].normal,u[c]):a[c].normal=u[c],u[c]=null),d&&d[c]&&(a[c]=a[c]||{},a[c].emphasis?merge(a[c].emphasis,d[c]):a[c].emphasis=d[c],d[c]=null)}}function convertNormalEmphasis(a,s,l){if(a&&a[s]&&(a[s].normal||a[s].emphasis)){var o=a[s].normal,c=a[s].emphasis;o&&(l?(a[s].normal=a[s].emphasis=null,defaults(a[s],o)):a[s]=o),c&&(a.emphasis=a.emphasis||{},a.emphasis[s]=c,c.focus&&(a.emphasis.focus=c.focus),c.blurScope&&(a.emphasis.blurScope=c.blurScope))}}function removeEC3NormalStatus(a){convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"lineStyle"),convertNormalEmphasis(a,"areaStyle"),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"labelLine"),convertNormalEmphasis(a,"upperLabel"),convertNormalEmphasis(a,"edgeLabel")}function compatTextStyle(a,s){var l=isObject$4(a)&&a[s],o=isObject$4(l)&&l.textStyle;if(o)for(var c=0,u=TEXT_STYLE_OPTIONS.length;c<u;c++){var d=TEXT_STYLE_OPTIONS[c];o.hasOwnProperty(d)&&(l[d]=o[d])}}function compatEC3CommonStyles(a){a&&(removeEC3NormalStatus(a),compatTextStyle(a,"label"),a.emphasis&&compatTextStyle(a.emphasis,"label"))}function processSeries(a){if(isObject$4(a)){compatEC2ItemStyle(a),removeEC3NormalStatus(a),compatTextStyle(a,"label"),compatTextStyle(a,"upperLabel"),compatTextStyle(a,"edgeLabel"),a.emphasis&&(compatTextStyle(a.emphasis,"label"),compatTextStyle(a.emphasis,"upperLabel"),compatTextStyle(a.emphasis,"edgeLabel"));var s=a.markPoint;s&&(compatEC2ItemStyle(s),compatEC3CommonStyles(s));var l=a.markLine;l&&(compatEC2ItemStyle(l),compatEC3CommonStyles(l));var o=a.markArea;o&&compatEC3CommonStyles(o);var c=a.data;if(a.type==="graph"){c=c||a.nodes;var u=a.links||a.edges;if(u&&!isTypedArray(u))for(var d=0;d<u.length;d++)compatEC3CommonStyles(u[d]);each$f(a.categories,function(y){removeEC3NormalStatus(y)})}if(c&&!isTypedArray(c))for(var d=0;d<c.length;d++)compatEC3CommonStyles(c[d]);if(s=a.markPoint,s&&s.data)for(var f=s.data,d=0;d<f.length;d++)compatEC3CommonStyles(f[d]);if(l=a.markLine,l&&l.data)for(var g=l.data,d=0;d<g.length;d++)isArray$3(g[d])?(compatEC3CommonStyles(g[d][0]),compatEC3CommonStyles(g[d][1])):compatEC3CommonStyles(g[d]);a.type==="gauge"?(compatTextStyle(a,"axisLabel"),compatTextStyle(a,"title"),compatTextStyle(a,"detail")):a.type==="treemap"?(convertNormalEmphasis(a.breadcrumb,"itemStyle"),each$f(a.levels,function(y){removeEC3NormalStatus(y)})):a.type==="tree"&&removeEC3NormalStatus(a.leaves)}}function toArr(a){return isArray$3(a)?a:a?[a]:[]}function toObj(a){return(isArray$3(a)?a[0]:a)||{}}function globalCompatStyle(a,s){each$d(toArr(a.series),function(o){isObject$4(o)&&processSeries(o)});var l=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];s&&l.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(l,function(o){each$d(toArr(a[o]),function(c){c&&(compatTextStyle(c,"axisLabel"),compatTextStyle(c.axisPointer,"label"))})}),each$d(toArr(a.parallel),function(o){var c=o&&o.parallelAxisDefault;compatTextStyle(c,"axisLabel"),compatTextStyle(c&&c.axisPointer,"label")}),each$d(toArr(a.calendar),function(o){convertNormalEmphasis(o,"itemStyle"),compatTextStyle(o,"dayLabel"),compatTextStyle(o,"monthLabel"),compatTextStyle(o,"yearLabel")}),each$d(toArr(a.radar),function(o){compatTextStyle(o,"name"),o.name&&o.axisName==null&&(o.axisName=o.name,delete o.name),o.nameGap!=null&&o.axisNameGap==null&&(o.axisNameGap=o.nameGap,delete o.nameGap)}),each$d(toArr(a.geo),function(o){isObject$4(o)&&(compatEC3CommonStyles(o),each$d(toArr(o.regions),function(c){compatEC3CommonStyles(c)}))}),each$d(toArr(a.timeline),function(o){compatEC3CommonStyles(o),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"controlStyle",!0);var c=o.data;isArray$3(c)&&each$f(c,function(u){isObject$5(u)&&(convertNormalEmphasis(u,"label"),convertNormalEmphasis(u,"itemStyle"))})}),each$d(toArr(a.toolbox),function(o){convertNormalEmphasis(o,"iconStyle"),each$d(o.feature,function(c){convertNormalEmphasis(c,"iconStyle")})}),compatTextStyle(toObj(a.axisPointer),"label"),compatTextStyle(toObj(a.tooltip).axisPointer,"label")}function get(a,s){for(var l=s.split(","),o=a,c=0;c<l.length&&(o=o&&o[l[c]],o!=null);c++);return o}function set(a,s,l,o){for(var c=s.split(","),u=a,d,f=0;f<c.length-1;f++)d=c[f],u[d]==null&&(u[d]={}),u=u[d];u[c[f]]==null&&(u[c[f]]=l)}function compatLayoutProperties(a){a&&each$f(LAYOUT_PROPERTIES,function(s){s[0]in a&&!(s[1]in a)&&(a[s[1]]=a[s[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(a){var s=a&&a.itemStyle;if(s)for(var l=0;l<BAR_ITEM_STYLE_MAP.length;l++){var o=BAR_ITEM_STYLE_MAP[l][1],c=BAR_ITEM_STYLE_MAP[l][0];s[o]!=null&&(s[c]=s[o])}}function compatPieLabel(a){a&&a.alignTo==="edge"&&a.margin!=null&&a.edgeDistance==null&&(a.edgeDistance=a.margin)}function compatSunburstState(a){a&&a.downplay&&!a.blur&&(a.blur=a.downplay)}function compatGraphFocus(a){a&&a.focusNodeAdjacency!=null&&(a.emphasis=a.emphasis||{},a.emphasis.focus==null&&(a.emphasis.focus="adjacency"))}function traverseTree(a,s){if(a)for(var l=0;l<a.length;l++)s(a[l]),a[l]&&traverseTree(a[l].children,s)}function globalBackwardCompat(a,s){globalCompatStyle(a,s),a.series=normalizeToArray(a.series),each$f(a.series,function(l){if(isObject$5(l)){var o=l.type;if(o==="line")l.clipOverflow!=null&&(l.clip=l.clipOverflow);else if(o==="pie"||o==="gauge"){l.clockWise!=null&&(l.clockwise=l.clockWise),compatPieLabel(l.label);var c=l.data;if(c&&!isTypedArray(c))for(var u=0;u<c.length;u++)compatPieLabel(c[u]);l.hoverOffset!=null&&(l.emphasis=l.emphasis||{},(l.emphasis.scaleSize=null)&&(l.emphasis.scaleSize=l.hoverOffset))}else if(o==="gauge"){var d=get(l,"pointer.color");d!=null&&set(l,"itemStyle.color",d)}else if(o==="bar"){compatBarItemStyle(l),compatBarItemStyle(l.backgroundStyle),compatBarItemStyle(l.emphasis);var c=l.data;if(c&&!isTypedArray(c))for(var u=0;u<c.length;u++)typeof c[u]=="object"&&(compatBarItemStyle(c[u]),compatBarItemStyle(c[u]&&c[u].emphasis))}else if(o==="sunburst"){var f=l.highlightPolicy;f&&(l.emphasis=l.emphasis||{},l.emphasis.focus||(l.emphasis.focus=f)),compatSunburstState(l),traverseTree(l.data,compatSunburstState)}else o==="graph"||o==="sankey"?compatGraphFocus(l):o==="map"&&(l.mapType&&!l.map&&(l.map=l.mapType),l.mapLocation&&defaults(l,l.mapLocation));l.hoverAnimation!=null&&(l.emphasis=l.emphasis||{},l.emphasis&&l.emphasis.scale==null&&(l.emphasis.scale=l.hoverAnimation)),compatLayoutProperties(l)}}),a.dataRange&&(a.visualMap=a.dataRange),each$f(COMPATITABLE_COMPONENTS,function(l){var o=a[l];o&&(isArray$3(o)||(o=[o]),each$f(o,function(c){compatLayoutProperties(c)}))})}function dataStack(a){var s=createHashMap();a.eachSeries(function(l){var o=l.get("stack");if(o){var c=s.get(o)||s.set(o,[]),u=l.getData(),d={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:l};if(!d.stackedDimension||!(d.isStackedByIndex||d.stackedByDimension))return;c.length&&u.setCalculationInfo("stackedOnSeries",c[c.length-1].seriesModel),c.push(d)}}),s.each(calculateStack)}function calculateStack(a){each$f(a,function(s,l){var o=[],c=[NaN,NaN],u=[s.stackResultDimension,s.stackedOverDimension],d=s.data,f=s.isStackedByIndex,g=s.seriesModel.get("stackStrategy")||"samesign";d.modify(u,function(y,$,x){var N=d.get(s.stackedDimension,x);if(isNaN(N))return c;var R,j;f?j=d.getRawIndex(x):R=d.get(s.stackedByDimension,x);for(var ne=NaN,se=l-1;se>=0;se--){var ce=a[se];if(f||(j=ce.data.rawIndexOf(ce.stackedByDimension,R)),j>=0){var fe=ce.data.getByRawIndex(ce.stackResultDimension,j);if(g==="all"||g==="positive"&&fe>0||g==="negative"&&fe<0||g==="samesign"&&N>=0&&fe>0||g==="samesign"&&N<=0&&fe<0){N=addSafe(N,fe),ne=fe;break}}}return o[0]=N,o[1]=ne,o})})}var SourceImpl=function(){function a(s){this.data=s.data||(s.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=s.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=s.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=s.startIndex||0,this.dimensionsDetectedCount=s.dimensionsDetectedCount,this.metaRawOption=s.metaRawOption;var l=this.dimensionsDefine=s.dimensionsDefine;if(l)for(var o=0;o<l.length;o++){var c=l[o];c.type==null&&guessOrdinal(this,o)===BE_ORDINAL.Must&&(c.type="ordinal")}}return a}();function isSourceInstance(a){return a instanceof SourceImpl}function createSource(a,s,l){l=l||detectSourceFormat(a);var o=s.seriesLayoutBy,c=determineSourceDimensions(a,l,o,s.sourceHeader,s.dimensions),u=new SourceImpl({data:a,sourceFormat:l,seriesLayoutBy:o,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectedCount:c.dimensionsDetectedCount,metaRawOption:clone$4(s)});return u}function createSourceFromSeriesDataOption(a){return new SourceImpl({data:a,sourceFormat:isTypedArray(a)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(a){return new SourceImpl({data:a.data,sourceFormat:a.sourceFormat,seriesLayoutBy:a.seriesLayoutBy,dimensionsDefine:clone$4(a.dimensionsDefine),startIndex:a.startIndex,dimensionsDetectedCount:a.dimensionsDetectedCount})}function detectSourceFormat(a){var s=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(a))s=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$3(a)){a.length===0&&(s=SOURCE_FORMAT_ARRAY_ROWS);for(var l=0,o=a.length;l<o;l++){var c=a[l];if(c!=null){if(isArray$3(c)||isTypedArray(c)){s=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$5(c)){s=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$5(a)){for(var u in a)if(hasOwn(a,u)&&isArrayLike(a[u])){s=SOURCE_FORMAT_KEYED_COLUMNS;break}}return s}function determineSourceDimensions(a,s,l,o,c){var u,d;if(!a)return{dimensionsDefine:normalizeDimensionsOption(c),startIndex:d,dimensionsDetectedCount:u};if(s===SOURCE_FORMAT_ARRAY_ROWS){var f=a;o==="auto"||o==null?arrayRowsTravelFirst(function(y){y!=null&&y!=="-"&&(isString$2(y)?d==null&&(d=1):d=0)},l,f,10):d=isNumber$2(o)?o:o?1:0,!c&&d===1&&(c=[],arrayRowsTravelFirst(function(y,$){c[$]=y!=null?y+"":""},l,f,1/0)),u=c?c.length:l===SERIES_LAYOUT_BY_ROW?f.length:f[0]?f[0].length:null}else if(s===SOURCE_FORMAT_OBJECT_ROWS)c||(c=objectRowsCollectDimensions(a));else if(s===SOURCE_FORMAT_KEYED_COLUMNS)c||(c=[],each$f(a,function(y,$){c.push($)}));else if(s===SOURCE_FORMAT_ORIGINAL){var g=getDataItemValue(a[0]);u=isArray$3(g)&&g.length||1}return{startIndex:d,dimensionsDefine:normalizeDimensionsOption(c),dimensionsDetectedCount:u}}function objectRowsCollectDimensions(a){for(var s=0,l;s<a.length&&!(l=a[s++]););if(l)return keys(l)}function normalizeDimensionsOption(a){if(a){var s=createHashMap();return map$1(a,function(l,o){l=isObject$5(l)?l:{name:l};var c={name:l.name,displayName:l.displayName,type:l.type};if(c.name==null)return c;c.name+="",c.displayName==null&&(c.displayName=c.name);var u=s.get(c.name);return u?c.name+="-"+u.count++:s.set(c.name,{count:1}),c})}}function arrayRowsTravelFirst(a,s,l,o){if(s===SERIES_LAYOUT_BY_ROW)for(var c=0;c<l.length&&c<o;c++)a(l[c]?l[c][0]:null,c);else for(var u=l[0]||[],c=0;c<u.length&&c<o;c++)a(u[c],c)}function shouldRetrieveDataByName(a){var s=a.sourceFormat;return s===SOURCE_FORMAT_OBJECT_ROWS||s===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function a(s,l){var o=isSourceInstance(s)?s:createSourceFromSeriesDataOption(s);this._source=o;var c=this._data=o.data;o.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY&&(this._offset=0,this._dimSize=l,this._data=c),mountMethods(this,c,o)}return a.prototype.getSource=function(){return this._source},a.prototype.count=function(){return 0},a.prototype.getItem=function(s,l){},a.prototype.appendData=function(s){},a.prototype.clean=function(){},a.protoInitialize=function(){var s=a.prototype;s.pure=!1,s.persistent=!0}(),a.internalField=function(){var s;mountMethods=function(d,f,g){var y=g.sourceFormat,$=g.seriesLayoutBy,x=g.startIndex,N=g.dimensionsDefine,R=providerMethods[getMethodMapKey(y,$)];if(extend(d,R),y===SOURCE_FORMAT_TYPED_ARRAY)d.getItem=l,d.count=c,d.fillStorage=o;else{var j=getRawSourceItemGetter(y,$);d.getItem=bind$1(j,null,f,x,N);var ne=getRawSourceDataCounter(y,$);d.count=bind$1(ne,null,f,x,N)}};var l=function(d,f){d=d-this._offset,f=f||[];for(var g=this._data,y=this._dimSize,$=y*d,x=0;x<y;x++)f[x]=g[$+x];return f},o=function(d,f,g,y){for(var $=this._data,x=this._dimSize,N=0;N<x;N++){for(var R=y[N],j=R[0]==null?1/0:R[0],ne=R[1]==null?-1/0:R[1],se=f-d,ce=g[N],fe=0;fe<se;fe++){var ea=$[fe*x+N];ce[d+fe]=ea,ea<j&&(j=ea),ea>ne&&(ne=ea)}R[0]=j,R[1]=ne}},c=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(s={},s[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:u},s[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},s[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:u},s[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(d){var f=this._data;each$f(d,function(g,y){for(var $=f[y]||(f[y]=[]),x=0;x<(g||[]).length;x++)$.push(g[x])})}},s[SOURCE_FORMAT_ORIGINAL]={appendData:u},s[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(d){this._data=d},clean:function(){this._offset+=this.count(),this._data=null}},s);function u(d){for(var f=0;f<d.length;f++)this._data.push(d[f])}}(),a}(),getItemSimply=function(a,s,l,o){return a[o]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,s,l,o){return a[o+s]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,s,l,o,c){o+=s;for(var u=c||[],d=a,f=0;f<d.length;f++){var g=d[f];u[f]=g?g[o]:null}return u},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,s,l,o,c){for(var u=c||[],d=0;d<l.length;d++){var f=l[d].name,g=a[f];u[d]=g?g[o]:null}return u},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(a,s){var l=rawSourceItemGetterMap[getMethodMapKey(a,s)];return l}var countSimply=function(a,s,l){return a.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(a,s,l){return Math.max(0,a.length-s)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(a,s,l){var o=a[0];return o?Math.max(0,o.length-s):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(a,s,l){var o=l[0].name,c=a[o];return c?c.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(a,s){var l=rawSourceDataCounterMap[getMethodMapKey(a,s)];return l}var getRawValueSimply=function(a,s,l){return a[s]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(a,s,l){return a[l]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(a,s,l){var o=getDataItemValue(a);return o instanceof Array?o[s]:o},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(a){var s=rawSourceValueGetterMap[a];return s}function getMethodMapKey(a,s){return a===SOURCE_FORMAT_ARRAY_ROWS?a+"_"+s:a}function retrieveRawValue(a,s,l){if(a){var o=a.getRawDataItem(s);if(o!=null){var c=a.getStore(),u=c.getSource().sourceFormat;if(l!=null){var d=a.getDimensionIndex(l),f=c.getDimensionProperty(d);return getRawSourceValueGetter(u)(o,d,f)}else{var g=o;return u===SOURCE_FORMAT_ORIGINAL&&(g=getDataItemValue(o)),g}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function a(){}return a.prototype.getDataParams=function(s,l){var o=this.getData(l),c=this.getRawValue(s,l),u=o.getRawIndex(s),d=o.getName(s),f=o.getRawDataItem(s),g=o.getItemVisual(s,"style"),y=g&&g[o.getItemVisual(s,"drawType")||"fill"],$=g&&g.stroke,x=this.mainType,N=x==="series",R=o.userOutput&&o.userOutput.get();return{componentType:x,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:N?this.subType:null,seriesIndex:this.seriesIndex,seriesId:N?this.id:null,seriesName:N?this.name:null,name:d,dataIndex:u,data:f,dataType:l,value:c,color:y,borderColor:$,dimensionNames:R?R.fullDimensions:null,encode:R?R.encode:null,$vars:["seriesName","name","value"]}},a.prototype.getFormattedLabel=function(s,l,o,c,u,d){l=l||"normal";var f=this.getData(o),g=this.getDataParams(s,o);if(d&&(g.value=d.interpolatedValue),c!=null&&isArray$3(g.value)&&(g.value=g.value[c]),!u){var y=f.getItemModel(s);u=y.get(l==="normal"?["label","formatter"]:[l,"label","formatter"])}if(isFunction$2(u))return g.status=l,g.dimensionIndex=c,u(g);if(isString$2(u)){var $=formatTpl(u,g);return $.replace(DIMENSION_LABEL_REG,function(x,N){var R=N.length,j=N;j.charAt(0)==="["&&j.charAt(R-1)==="]"&&(j=+j.slice(1,R-1));var ne=retrieveRawValue(f,s,j);if(d&&isArray$3(d.interpolatedValue)){var se=f.getDimensionIndex(j);se>=0&&(ne=d.interpolatedValue[se])}return ne!=null?ne+"":""})}},a.prototype.getRawValue=function(s,l){return retrieveRawValue(this.getData(l),s)},a.prototype.formatTooltip=function(s,l,o){},a}();function normalizeTooltipFormatResult(a){var s,l;return isObject$5(a)?a.type&&(l=a):s=a,{text:s,frag:l}}function createTask(a){return new Task(a)}var Task=function(){function a(s){s=s||{},this._reset=s.reset,this._plan=s.plan,this._count=s.count,this._onDirty=s.onDirty,this._dirty=!0}return a.prototype.perform=function(s){var l=this._upstream,o=s&&s.skip;if(this._dirty&&l){var c=this.context;c.data=c.outputData=l.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var u;this._plan&&!o&&(u=this._plan(this.context));var d=$(this._modBy),f=this._modDataCount||0,g=$(s&&s.modBy),y=s&&s.modDataCount||0;(d!==g||f!==y)&&(u="reset");function $(fe){return!(fe>=1)&&(fe=1),fe}var x;(this._dirty||u==="reset")&&(this._dirty=!1,x=this._doReset(o)),this._modBy=g,this._modDataCount=y;var N=s&&s.step;if(l?this._dueEnd=l._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var R=this._dueIndex,j=Math.min(N!=null?this._dueIndex+N:1/0,this._dueEnd);if(!o&&(x||R<j)){var ne=this._progress;if(isArray$3(ne))for(var se=0;se<ne.length;se++)this._doProgress(ne[se],R,j,g,y);else this._doProgress(ne,R,j,g,y)}this._dueIndex=j;var ce=this._settedOutputEnd!=null?this._settedOutputEnd:j;this._outputDueEnd=ce}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},a.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},a.prototype._doProgress=function(s,l,o,c,u){iterator.reset(l,o,c,u),this._callingProgress=s,this._callingProgress({start:l,end:o,count:o-l,next:iterator.next},this.context)},a.prototype._doReset=function(s){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var l,o;!s&&this._reset&&(l=this._reset(this.context),l&&l.progress&&(o=l.forceFirstProgress,l=l.progress),isArray$3(l)&&!l.length&&(l=null)),this._progress=l,this._modBy=this._modDataCount=null;var c=this._downstream;return c&&c.dirty(),o},a.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},a.prototype.pipe=function(s){(this._downstream!==s||this._dirty)&&(this._downstream=s,s._upstream=this,s.dirty())},a.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},a.prototype.getUpstream=function(){return this._upstream},a.prototype.getDownstream=function(){return this._downstream},a.prototype.setOutputEnd=function(s){this._outputDueEnd=this._settedOutputEnd=s},a}(),iterator=function(){var a,s,l,o,c,u={reset:function(g,y,$,x){s=g,a=y,l=$,o=x,c=Math.ceil(o/l),u.next=l>1&&o>0?f:d}};return u;function d(){return s<a?s++:null}function f(){var g=s%c*l+Math.ceil(s/c),y=s>=a?null:g<o?g:s;return s++,y}}();function parseDataValue(a,s){var l=s&&s.type;return l==="ordinal"?a:(l==="time"&&!isNumber$2(a)&&a!=null&&a!=="-"&&(a=+parseDate(a)),a==null||a===""?NaN:Number(a))}var valueParserMap=createHashMap({number:function(a){return parseFloat(a)},time:function(a){return+parseDate(a)},trim:function(a){return isString$2(a)?trim$1(a):a}});function getRawValueParser(a){return valueParserMap.get(a)}var ORDER_COMPARISON_OP_MAP={lt:function(a,s){return a<s},lte:function(a,s){return a<=s},gt:function(a,s){return a>s},gte:function(a,s){return a>=s}},FilterOrderComparator=function(){function a(s,l){if(!isNumber$2(l)){var o="";throwError(o)}this._opFn=ORDER_COMPARISON_OP_MAP[s],this._rvalFloat=numericToNumber(l)}return a.prototype.evaluate=function(s){return isNumber$2(s)?this._opFn(s,this._rvalFloat):this._opFn(numericToNumber(s),this._rvalFloat)},a}(),SortOrderComparator=function(){function a(s,l){var o=s==="desc";this._resultLT=o?1:-1,l==null&&(l=o?"min":"max"),this._incomparable=l==="min"?-1/0:1/0}return a.prototype.evaluate=function(s,l){var o=isNumber$2(s)?s:numericToNumber(s),c=isNumber$2(l)?l:numericToNumber(l),u=isNaN(o),d=isNaN(c);if(u&&(o=this._incomparable),d&&(c=this._incomparable),u&&d){var f=isString$2(s),g=isString$2(l);f&&(o=g?s:0),g&&(c=f?l:0)}return o<c?this._resultLT:o>c?-this._resultLT:0},a}(),FilterEqualityComparator=function(){function a(s,l){this._rval=l,this._isEQ=s,this._rvalTypeof=typeof l,this._rvalFloat=numericToNumber(l)}return a.prototype.evaluate=function(s){var l=s===this._rval;if(!l){var o=typeof s;o!==this._rvalTypeof&&(o==="number"||this._rvalTypeof==="number")&&(l=numericToNumber(s)===this._rvalFloat)}return this._isEQ?l:!l},a}();function createFilterComparator(a,s){return a==="eq"||a==="ne"?new FilterEqualityComparator(a==="eq",s):hasOwn(ORDER_COMPARISON_OP_MAP,a)?new FilterOrderComparator(a,s):null}var ExternalSource=function(){function a(){}return a.prototype.getRawData=function(){throw new Error("not supported")},a.prototype.getRawDataItem=function(s){throw new Error("not supported")},a.prototype.cloneRawData=function(){},a.prototype.getDimensionInfo=function(s){},a.prototype.cloneAllDimensionInfo=function(){},a.prototype.count=function(){},a.prototype.retrieveValue=function(s,l){},a.prototype.retrieveValueFromItem=function(s,l){},a.prototype.convertValue=function(s,l){return parseDataValue(s,l)},a}();function createExternalSource(a,s){var l=new ExternalSource,o=a.data,c=l.sourceFormat=a.sourceFormat,u=a.startIndex,d="";a.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&throwError(d);var f=[],g={},y=a.dimensionsDefine;if(y)each$f(y,function(ne,se){var ce=ne.name,fe={index:se,name:ce,displayName:ne.displayName};if(f.push(fe),ce!=null){var ea="";hasOwn(g,ce)&&throwError(ea),g[ce]=fe}});else for(var $=0;$<a.dimensionsDetectedCount;$++)f.push({index:$});var x=getRawSourceItemGetter(c,SERIES_LAYOUT_BY_COLUMN);s.__isBuiltIn&&(l.getRawDataItem=function(ne){return x(o,u,f,ne)},l.getRawData=bind$1(getRawData,null,a)),l.cloneRawData=bind$1(cloneRawData,null,a);var N=getRawSourceDataCounter(c,SERIES_LAYOUT_BY_COLUMN);l.count=bind$1(N,null,o,u,f);var R=getRawSourceValueGetter(c);l.retrieveValue=function(ne,se){var ce=x(o,u,f,ne);return j(ce,se)};var j=l.retrieveValueFromItem=function(ne,se){if(ne!=null){var ce=f[se];if(ce)return R(ne,se,ce.name)}};return l.getDimensionInfo=bind$1(getDimensionInfo,null,f,g),l.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,f),l}function getRawData(a){var s=a.sourceFormat;if(!isSupportedSourceFormat(s)){var l="";throwError(l)}return a.data}function cloneRawData(a){var s=a.sourceFormat,l=a.data;if(!isSupportedSourceFormat(s)){var o="";throwError(o)}if(s===SOURCE_FORMAT_ARRAY_ROWS){for(var c=[],u=0,d=l.length;u<d;u++)c.push(l[u].slice());return c}else if(s===SOURCE_FORMAT_OBJECT_ROWS){for(var c=[],u=0,d=l.length;u<d;u++)c.push(extend({},l[u]));return c}}function getDimensionInfo(a,s,l){if(l!=null){if(isNumber$2(l)||!isNaN(l)&&!hasOwn(s,l))return a[l];if(hasOwn(s,l))return s[l]}}function cloneAllDimensionInfo(a){return clone$4(a)}var externalTransformMap=createHashMap();function registerExternalTransform(a){a=clone$4(a);var s=a.type,l="";s||throwError(l);var o=s.split(":");o.length!==2&&throwError(l);var c=!1;o[0]==="echarts"&&(s=o[1],c=!0),a.__isBuiltIn=c,externalTransformMap.set(s,a)}function applyDataTransform(a,s,l){var o=normalizeToArray(a),c=o.length,u="";c||throwError(u);for(var d=0,f=c;d<f;d++){var g=o[d];s=applySingleDataTransform(g,s),d!==f-1&&(s.length=Math.max(s.length,1))}return s}function applySingleDataTransform(a,s,l,o){var c="";s.length||throwError(c),isObject$5(a)||throwError(c);var u=a.type,d=externalTransformMap.get(u);d||throwError(c);var f=map$1(s,function(y){return createExternalSource(y,d)}),g=normalizeToArray(d.transform({upstream:f[0],upstreamList:f,config:clone$4(a.config)}));return map$1(g,function(y,$){var x="";isObject$5(y)||throwError(x),y.data||throwError(x);var N=detectSourceFormat(y.data);isSupportedSourceFormat(N)||throwError(x);var R,j=s[0];if(j&&$===0&&!y.dimensions){var ne=j.startIndex;ne&&(y.data=j.data.slice(0,ne).concat(y.data)),R={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:ne,dimensions:j.metaRawOption.dimensions}}else R={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:y.dimensions};return createSource(y.data,R,null)})}function isSupportedSourceFormat(a){return a===SOURCE_FORMAT_ARRAY_ROWS||a===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(a){return a>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(a){var s=a.constructor;return s===Array?a.slice():new s(a)}function prepareStore(a,s,l,o,c){var u=dataCtors[l||"float"];if(c){var d=a[s],f=d&&d.length;if(f!==o){for(var g=new u(o),y=0;y<f;y++)g[y]=d[y];a[s]=g}}else a[s]=new u(o)}var DataStore=function(){function a(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return a.prototype.initData=function(s,l,o){this._provider=s,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var c=s.getSource(),u=this.defaultDimValueGetter=defaultDimValueGetters[c.sourceFormat];this._dimValueGetter=o||u,this._rawExtent=[],shouldRetrieveDataByName(c),this._dimensions=map$1(l,function(d){return{type:d.type,property:d.property}}),this._initDataFromProvider(0,s.count())},a.prototype.getProvider=function(){return this._provider},a.prototype.getSource=function(){return this._provider.getSource()},a.prototype.ensureCalculationDimension=function(s,l){var o=this._calcDimNameToIdx,c=this._dimensions,u=o.get(s);if(u!=null){if(c[u].type===l)return u}else u=c.length;return c[u]={type:l},o.set(s,u),this._chunks[u]=new dataCtors[l||"float"](this._rawCount),this._rawExtent[u]=getInitialExtent(),u},a.prototype.collectOrdinalMeta=function(s,l){var o=this._chunks[s],c=this._dimensions[s],u=this._rawExtent,d=c.ordinalOffset||0,f=o.length;d===0&&(u[s]=getInitialExtent());for(var g=u[s],y=d;y<f;y++){var $=o[y]=l.parseAndCollect(o[y]);isNaN($)||(g[0]=Math.min($,g[0]),g[1]=Math.max($,g[1]))}c.ordinalMeta=l,c.ordinalOffset=f,c.type="ordinal"},a.prototype.getOrdinalMeta=function(s){var l=this._dimensions[s],o=l.ordinalMeta;return o},a.prototype.getDimensionProperty=function(s){var l=this._dimensions[s];return l&&l.property},a.prototype.appendData=function(s){var l=this._provider,o=this.count();l.appendData(s);var c=l.count();return l.persistent||(c+=o),o<c&&this._initDataFromProvider(o,c,!0),[o,c]},a.prototype.appendValues=function(s,l){for(var o=this._chunks,c=this._dimensions,u=c.length,d=this._rawExtent,f=this.count(),g=f+Math.max(s.length,l||0),y=0;y<u;y++){var $=c[y];prepareStore(o,y,$.type,g,!0)}for(var x=[],N=f;N<g;N++)for(var R=N-f,j=0;j<u;j++){var $=c[j],ne=defaultDimValueGetters.arrayRows.call(this,s[R]||x,$.property,R,j);o[j][N]=ne;var se=d[j];ne<se[0]&&(se[0]=ne),ne>se[1]&&(se[1]=ne)}return this._rawCount=this._count=g,{start:f,end:g}},a.prototype._initDataFromProvider=function(s,l,o){for(var c=this._provider,u=this._chunks,d=this._dimensions,f=d.length,g=this._rawExtent,y=map$1(d,function(fe){return fe.property}),$=0;$<f;$++){var x=d[$];g[$]||(g[$]=getInitialExtent()),prepareStore(u,$,x.type,l,o)}if(c.fillStorage)c.fillStorage(s,l,u,g);else for(var N=[],R=s;R<l;R++){N=c.getItem(R,N);for(var j=0;j<f;j++){var ne=u[j],se=this._dimValueGetter(N,y[j],R,j);ne[R]=se;var ce=g[j];se<ce[0]&&(ce[0]=se),se>ce[1]&&(ce[1]=se)}}!c.persistent&&c.clean&&c.clean(),this._rawCount=this._count=l,this._extent=[]},a.prototype.count=function(){return this._count},a.prototype.get=function(s,l){if(!(l>=0&&l<this._count))return NaN;var o=this._chunks[s];return o?o[this.getRawIndex(l)]:NaN},a.prototype.getValues=function(s,l){var o=[],c=[];if(l==null){l=s,s=[];for(var u=0;u<this._dimensions.length;u++)c.push(u)}else c=s;for(var u=0,d=c.length;u<d;u++)o.push(this.get(c[u],l));return o},a.prototype.getByRawIndex=function(s,l){if(!(l>=0&&l<this._rawCount))return NaN;var o=this._chunks[s];return o?o[l]:NaN},a.prototype.getSum=function(s){var l=this._chunks[s],o=0;if(l)for(var c=0,u=this.count();c<u;c++){var d=this.get(s,c);isNaN(d)||(o+=d)}return o},a.prototype.getMedian=function(s){var l=[];this.each([s],function(u){isNaN(u)||l.push(u)});var o=l.sort(function(u,d){return u-d}),c=this.count();return c===0?0:c%2===1?o[(c-1)/2]:(o[c/2]+o[c/2-1])/2},a.prototype.indexOfRawIndex=function(s){if(s>=this._rawCount||s<0)return-1;if(!this._indices)return s;var l=this._indices,o=l[s];if(o!=null&&o<this._count&&o===s)return s;for(var c=0,u=this._count-1;c<=u;){var d=(c+u)/2|0;if(l[d]<s)c=d+1;else if(l[d]>s)u=d-1;else return d}return-1},a.prototype.indicesOfNearest=function(s,l,o){var c=this._chunks,u=c[s],d=[];if(!u)return d;o==null&&(o=1/0);for(var f=1/0,g=-1,y=0,$=0,x=this.count();$<x;$++){var N=this.getRawIndex($),R=l-u[N],j=Math.abs(R);j<=o&&((j<f||j===f&&R>=0&&g<0)&&(f=j,g=R,y=0),R===g&&(d[y++]=$))}return d.length=y,d},a.prototype.getIndices=function(){var s,l=this._indices;if(l){var o=l.constructor,c=this._count;if(o===Array){s=new o(c);for(var u=0;u<c;u++)s[u]=l[u]}else s=new o(l.buffer,0,c)}else{var o=getIndicesCtor(this._rawCount);s=new o(this.count());for(var u=0;u<s.length;u++)s[u]=u}return s},a.prototype.filter=function(s,l){if(!this._count)return this;for(var o=this.clone(),c=o.count(),u=getIndicesCtor(o._rawCount),d=new u(c),f=[],g=s.length,y=0,$=s[0],x=o._chunks,N=0;N<c;N++){var R=void 0,j=o.getRawIndex(N);if(g===0)R=l(N);else if(g===1){var ne=x[$][j];R=l(ne,N)}else{for(var se=0;se<g;se++)f[se]=x[s[se]][j];f[se]=N,R=l.apply(null,f)}R&&(d[y++]=j)}return y<c&&(o._indices=d),o._count=y,o._extent=[],o._updateGetRawIdx(),o},a.prototype.selectRange=function(s){var l=this.clone(),o=l._count;if(!o)return this;var c=keys(s),u=c.length;if(!u)return this;var d=l.count(),f=getIndicesCtor(l._rawCount),g=new f(d),y=0,$=c[0],x=s[$][0],N=s[$][1],R=l._chunks,j=!1;if(!l._indices){var ne=0;if(u===1){for(var se=R[c[0]],ce=0;ce<o;ce++){var fe=se[ce];(fe>=x&&fe<=N||isNaN(fe))&&(g[y++]=ne),ne++}j=!0}else if(u===2){for(var se=R[c[0]],ea=R[c[1]],ta=s[c[1]][0],na=s[c[1]][1],ce=0;ce<o;ce++){var fe=se[ce],aa=ea[ce];(fe>=x&&fe<=N||isNaN(fe))&&(aa>=ta&&aa<=na||isNaN(aa))&&(g[y++]=ne),ne++}j=!0}}if(!j)if(u===1)for(var ce=0;ce<d;ce++){var ia=l.getRawIndex(ce),fe=R[c[0]][ia];(fe>=x&&fe<=N||isNaN(fe))&&(g[y++]=ia)}else for(var ce=0;ce<d;ce++){for(var sa=!0,ia=l.getRawIndex(ce),ra=0;ra<u;ra++){var la=c[ra],fe=R[la][ia];(fe<s[la][0]||fe>s[la][1])&&(sa=!1)}sa&&(g[y++]=l.getRawIndex(ce))}return y<d&&(l._indices=g),l._count=y,l._extent=[],l._updateGetRawIdx(),l},a.prototype.map=function(s,l){var o=this.clone(s);return this._updateDims(o,s,l),o},a.prototype.modify=function(s,l){this._updateDims(this,s,l)},a.prototype._updateDims=function(s,l,o){for(var c=s._chunks,u=[],d=l.length,f=s.count(),g=[],y=s._rawExtent,$=0;$<l.length;$++)y[l[$]]=getInitialExtent();for(var x=0;x<f;x++){for(var N=s.getRawIndex(x),R=0;R<d;R++)g[R]=c[l[R]][N];g[d]=x;var j=o&&o.apply(null,g);if(j!=null){typeof j!="object"&&(u[0]=j,j=u);for(var $=0;$<j.length;$++){var ne=l[$],se=j[$],ce=y[ne],fe=c[ne];fe&&(fe[N]=se),se<ce[0]&&(ce[0]=se),se>ce[1]&&(ce[1]=se)}}}},a.prototype.lttbDownSample=function(s,l){var o=this.clone([s],!0),c=o._chunks,u=c[s],d=this.count(),f=0,g=Math.floor(1/l),y=this.getRawIndex(0),$,x,N,R=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(d/g)+2)*2,d));R[f++]=y;for(var j=1;j<d-1;j+=g){for(var ne=Math.min(j+g,d-1),se=Math.min(j+g*2,d),ce=(se+ne)/2,fe=0,ea=ne;ea<se;ea++){var ta=this.getRawIndex(ea),na=u[ta];isNaN(na)||(fe+=na)}fe/=se-ne;var aa=j,ia=Math.min(j+g,d),sa=j-1,ra=u[y];$=-1,N=aa;for(var la=-1,oa=0,ea=aa;ea<ia;ea++){var ta=this.getRawIndex(ea),na=u[ta];if(isNaN(na)){oa++,la<0&&(la=ta);continue}x=Math.abs((sa-ce)*(na-ra)-(sa-ea)*(fe-ra)),x>$&&($=x,N=ta)}oa>0&&oa<ia-aa&&(R[f++]=Math.min(la,N),N=Math.max(la,N)),R[f++]=N,y=N}return R[f++]=this.getRawIndex(d-1),o._count=f,o._indices=R,o.getRawIndex=this._getRawIdx,o},a.prototype.downSample=function(s,l,o,c){for(var u=this.clone([s],!0),d=u._chunks,f=[],g=Math.floor(1/l),y=d[s],$=this.count(),x=u._rawExtent[s]=getInitialExtent(),N=new(getIndicesCtor(this._rawCount))(Math.ceil($/g)),R=0,j=0;j<$;j+=g){g>$-j&&(g=$-j,f.length=g);for(var ne=0;ne<g;ne++){var se=this.getRawIndex(j+ne);f[ne]=y[se]}var ce=o(f),fe=this.getRawIndex(Math.min(j+c(f,ce)||0,$-1));y[fe]=ce,ce<x[0]&&(x[0]=ce),ce>x[1]&&(x[1]=ce),N[R++]=fe}return u._count=R,u._indices=N,u._updateGetRawIdx(),u},a.prototype.each=function(s,l){if(this._count)for(var o=s.length,c=this._chunks,u=0,d=this.count();u<d;u++){var f=this.getRawIndex(u);switch(o){case 0:l(u);break;case 1:l(c[s[0]][f],u);break;case 2:l(c[s[0]][f],c[s[1]][f],u);break;default:for(var g=0,y=[];g<o;g++)y[g]=c[s[g]][f];y[g]=u,l.apply(null,y)}}},a.prototype.getDataExtent=function(s){var l=this._chunks[s],o=getInitialExtent();if(!l)return o;var c=this.count(),u=!this._indices,d;if(u)return this._rawExtent[s].slice();if(d=this._extent[s],d)return d.slice();d=o;for(var f=d[0],g=d[1],y=0;y<c;y++){var $=this.getRawIndex(y),x=l[$];x<f&&(f=x),x>g&&(g=x)}return d=[f,g],this._extent[s]=d,d},a.prototype.getRawDataItem=function(s){var l=this.getRawIndex(s);if(this._provider.persistent)return this._provider.getItem(l);for(var o=[],c=this._chunks,u=0;u<c.length;u++)o.push(c[u][l]);return o},a.prototype.clone=function(s,l){var o=new a,c=this._chunks,u=s&&reduce(s,function(f,g){return f[g]=!0,f},{});if(u)for(var d=0;d<c.length;d++)o._chunks[d]=u[d]?cloneChunk(c[d]):c[d];else o._chunks=c;return this._copyCommonProps(o),l||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},a.prototype._copyCommonProps=function(s){s._count=this._count,s._rawCount=this._rawCount,s._provider=this._provider,s._dimensions=this._dimensions,s._extent=clone$4(this._extent),s._rawExtent=clone$4(this._rawExtent)},a.prototype._cloneIndices=function(){if(this._indices){var s=this._indices.constructor,l=void 0;if(s===Array){var o=this._indices.length;l=new s(o);for(var c=0;c<o;c++)l[c]=this._indices[c]}else l=new s(this._indices);return l}return null},a.prototype._getRawIdxIdentity=function(s){return s},a.prototype._getRawIdx=function(s){return s<this._count&&s>=0?this._indices[s]:-1},a.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},a.internalField=function(){function s(l,o,c,u){return parseDataValue(l[u],this._dimensions[u])}defaultDimValueGetters={arrayRows:s,objectRows:function(l,o,c,u){return parseDataValue(l[o],this._dimensions[u])},keyedColumns:s,original:function(l,o,c,u){var d=l&&(l.value==null?l:l.value);return parseDataValue(d instanceof Array?d[u]:d,this._dimensions[u])},typedArray:function(l,o,c,u){return l[u]}}}(),a}(),SourceManager=function(){function a(s){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=s}return a.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},a.prototype._setLocalSource=function(s,l){this._sourceList=s,this._upstreamSignList=l,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},a.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},a.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},a.prototype._createSource=function(){this._setLocalSource([],[]);var s=this._sourceHost,l=this._getUpstreamSourceManagers(),o=!!l.length,c,u;if(isSeries(s)){var d=s,f=void 0,g=void 0,y=void 0;if(o){var $=l[0];$.prepareSource(),y=$.getSource(),f=y.data,g=y.sourceFormat,u=[$._getVersionSign()]}else f=d.get("data",!0),g=isTypedArray(f)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,u=[];var x=this._getSourceMetaRawOption()||{},N=y&&y.metaRawOption||{},R=retrieve2(x.seriesLayoutBy,N.seriesLayoutBy)||null,j=retrieve2(x.sourceHeader,N.sourceHeader),ne=retrieve2(x.dimensions,N.dimensions),se=R!==N.seriesLayoutBy||!!j!=!!N.sourceHeader||ne;c=se?[createSource(f,{seriesLayoutBy:R,sourceHeader:j,dimensions:ne},g)]:[]}else{var ce=s;if(o){var fe=this._applyTransform(l);c=fe.sourceList,u=fe.upstreamSignList}else{var ea=ce.get("source",!0);c=[createSource(ea,this._getSourceMetaRawOption(),null)],u=[]}}this._setLocalSource(c,u)},a.prototype._applyTransform=function(s){var l=this._sourceHost,o=l.get("transform",!0),c=l.get("fromTransformResult",!0);if(c!=null){var u="";s.length!==1&&doThrow(u)}var d,f=[],g=[];return each$f(s,function(y){y.prepareSource();var $=y.getSource(c||0),x="";c!=null&&!$&&doThrow(x),f.push($),g.push(y._getVersionSign())}),o?d=applyDataTransform(o,f,{datasetIndex:l.componentIndex}):c!=null&&(d=[cloneSourceShallow(f[0])]),{sourceList:d,upstreamSignList:g}},a.prototype._isDirty=function(){if(this._dirty)return!0;for(var s=this._getUpstreamSourceManagers(),l=0;l<s.length;l++){var o=s[l];if(o._isDirty()||this._upstreamSignList[l]!==o._getVersionSign())return!0}},a.prototype.getSource=function(s){s=s||0;var l=this._sourceList[s];if(!l){var o=this._getUpstreamSourceManagers();return o[0]&&o[0].getSource(s)}return l},a.prototype.getSharedDataStore=function(s){var l=s.makeStoreSchema();return this._innerGetDataStore(l.dimensions,s.source,l.hash)},a.prototype._innerGetDataStore=function(s,l,o){var c=0,u=this._storeList,d=u[c];d||(d=u[c]={});var f=d[o];if(!f){var g=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&g?f=g._innerGetDataStore(s,l,o):(f=new DataStore,f.initData(new DefaultDataProvider(l,s.length),s)),d[o]=f}return f},a.prototype._getUpstreamSourceManagers=function(){var s=this._sourceHost;if(isSeries(s)){var l=querySeriesUpstreamDatasetModel(s);return l?[l.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(s),function(o){return o.getSourceManager()})},a.prototype._getSourceMetaRawOption=function(){var s=this._sourceHost,l,o,c;if(isSeries(s))l=s.get("seriesLayoutBy",!0),o=s.get("sourceHeader",!0),c=s.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var u=s;l=u.get("seriesLayoutBy",!0),o=u.get("sourceHeader",!0),c=u.get("dimensions",!0)}return{seriesLayoutBy:l,sourceHeader:o,dimensions:c}},a}();function disableTransformOptionMerge(a){var s=a.option.transform;s&&setAsPrimitive(a.option.transform)}function isSeries(a){return a.mainType==="series"}function doThrow(a){throw new Error(a)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipTextStyle(a,s){var l=a.color||"#6e7079",o=a.fontSize||12,c=a.fontWeight||"400",u=a.color||"#464646",d=a.fontSize||14,f=a.fontWeight||"900";return s==="html"?{nameStyle:"font-size:"+encodeHTML(o+"")+"px;color:"+encodeHTML(l)+";font-weight:"+encodeHTML(c+""),valueStyle:"font-size:"+encodeHTML(d+"")+"px;color:"+encodeHTML(u)+";font-weight:"+encodeHTML(f+"")}:{nameStyle:{fontSize:o,fill:l,fontWeight:c},valueStyle:{fontSize:d,fill:u,fontWeight:f}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(a,s){return s.type=a,s}function isSectionFragment(a){return a.type==="section"}function getBuilder(a){return isSectionFragment(a)?buildSection:buildNameValue}function getBlockGapLevel(a){if(isSectionFragment(a)){var s=0,l=a.blocks.length,o=l>1||l>0&&!a.noHeader;return each$f(a.blocks,function(c){var u=getBlockGapLevel(c);u>=s&&(s=u+ +(o&&(!u||isSectionFragment(c)&&!c.noHeader)))}),s}return 0}function buildSection(a,s,l,o){var c=s.noHeader,u=getGap(getBlockGapLevel(s)),d=[],f=s.blocks||[];assert(!f||isArray$3(f)),f=f||[];var g=a.orderMode;if(s.sortBlocks&&g){f=f.slice();var y={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(y,g)){var $=new SortOrderComparator(y[g],null);f.sort(function(j,ne){return $.evaluate(j.sortParam,ne.sortParam)})}else g==="seriesDesc"&&f.reverse()}each$f(f,function(j,ne){var se=s.valueFormatter,ce=getBuilder(j)(se?extend(extend({},a),{valueFormatter:se}):a,j,ne>0?u.html:0,o);ce!=null&&d.push(ce)});var x=a.renderMode==="richText"?d.join(u.richText):wrapBlockHTML(d.join(""),c?l:u.html);if(c)return x;var N=makeValueReadable(s.header,"ordinal",a.useUTC),R=getTooltipTextStyle(o,a.renderMode).nameStyle;return a.renderMode==="richText"?wrapInlineNameRichText(a,N,R)+u.richText+x:wrapBlockHTML('<div style="'+R+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+encodeHTML(N)+"</div>"+x,l)}function buildNameValue(a,s,l,o){var c=a.renderMode,u=s.noName,d=s.noValue,f=!s.markerType,g=s.name,y=a.useUTC,$=s.valueFormatter||a.valueFormatter||function(ta){return ta=isArray$3(ta)?ta:[ta],map$1(ta,function(na,aa){return makeValueReadable(na,isArray$3(R)?R[aa]:R,y)})};if(!(u&&d)){var x=f?"":a.markupStyleCreator.makeTooltipMarker(s.markerType,s.markerColor||"#333",c),N=u?"":makeValueReadable(g,"ordinal",y),R=s.valueType,j=d?[]:$(s.value,s.dataIndex),ne=!f||!u,se=!f&&u,ce=getTooltipTextStyle(o,c),fe=ce.nameStyle,ea=ce.valueStyle;return c==="richText"?(f?"":x)+(u?"":wrapInlineNameRichText(a,N,fe))+(d?"":wrapInlineValueRichText(a,j,ne,se,ea)):wrapBlockHTML((f?"":x)+(u?"":wrapInlineNameHTML(N,!f,fe))+(d?"":wrapInlineValueHTML(j,ne,se,ea)),l)}}function buildTooltipMarkup(a,s,l,o,c,u){if(a){var d=getBuilder(a),f={useUTC:c,renderMode:l,orderMode:o,markupStyleCreator:s,valueFormatter:a.valueFormatter};return d(f,a,0,u)}}function getGap(a){return{html:HTML_GAPS[a],richText:RICH_TEXT_GAPS[a]}}function wrapBlockHTML(a,s){var l='<div style="clear:both"></div>',o="margin: "+s+"px 0 0";return'<div style="'+o+";"+TOOLTIP_LINE_HEIGHT_CSS+';">'+a+l+"</div>"}function wrapInlineNameHTML(a,s,l){var o=s?"margin-left:2px":"";return'<span style="'+l+";"+o+'">'+encodeHTML(a)+"</span>"}function wrapInlineValueHTML(a,s,l,o){var c=l?"10px":"20px",u=s?"float:right;margin-left:"+c:"";return a=isArray$3(a)?a:[a],'<span style="'+u+";"+o+'">'+map$1(a,function(d){return encodeHTML(d)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(a,s,l){return a.markupStyleCreator.wrapRichTextStyle(s,l)}function wrapInlineValueRichText(a,s,l,o,c){var u=[c],d=o?10:20;return l&&u.push({padding:[0,0,0,d],align:"right"}),a.markupStyleCreator.wrapRichTextStyle(isArray$3(s)?s.join("  "):s,u)}function retrieveVisualColorForTooltipMarker(a,s){var l=a.getData().getItemVisual(s,"style"),o=l[a.visualDrawType];return convertToColorString(o)}function getPaddingFromTooltipModel(a,s){var l=a.get("padding");return l??(s==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function a(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return a.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},a.prototype.makeTooltipMarker=function(s,l,o){var c=o==="richText"?this._generateStyleName():null,u=getTooltipMarker({color:l,type:s,renderMode:o,markerId:c});return isString$2(u)?u:(this.richTextStyles[c]=u.style,u.content)},a.prototype.wrapRichTextStyle=function(s,l){var o={};isArray$3(l)?each$f(l,function(u){return extend(o,u)}):extend(o,l);var c=this._generateStyleName();return this.richTextStyles[c]=o,"{"+c+"|"+s+"}"},a}();function defaultSeriesFormatTooltip(a){var s=a.series,l=a.dataIndex,o=a.multipleSeries,c=s.getData(),u=c.mapDimensionsAll("defaultedTooltip"),d=u.length,f=s.getRawValue(l),g=isArray$3(f),y=retrieveVisualColorForTooltipMarker(s,l),$,x,N,R;if(d>1||g&&!d){var j=formatTooltipArrayValue(f,s,l,u,y);$=j.inlineValues,x=j.inlineValueTypes,N=j.blocks,R=j.inlineValues[0]}else if(d){var ne=c.getDimensionInfo(u[0]);R=$=retrieveRawValue(c,l,u[0]),x=ne.type}else R=$=g?f[0]:f;var se=isNameSpecified(s),ce=se&&s.name||"",fe=c.getName(l),ea=o?ce:fe;return createTooltipMarkup("section",{header:ce,noHeader:o||!se,sortParam:R,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:y,name:ea,noName:!trim$1(ea),value:$,valueType:x,dataIndex:l})].concat(N||[])})}function formatTooltipArrayValue(a,s,l,o,c){var u=s.getData(),d=reduce(a,function(x,N,R){var j=u.getDimensionInfo(R);return x=x||j&&j.tooltip!==!1&&j.displayName!=null},!1),f=[],g=[],y=[];o.length?each$f(o,function(x){$(retrieveRawValue(u,l,x),x)}):each$f(a,$);function $(x,N){var R=u.getDimensionInfo(N);!R||R.otherDims.tooltip===!1||(d?y.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:c,name:R.displayName,value:x,valueType:R.type})):(f.push(x),g.push(R.type)))}return{inlineValues:f,inlineValueTypes:g,blocks:y}}var inner$k=makeInner();function getSelectionKey(a,s){return a.getName(s)||a.getId(s)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l._selectedDataIndicesMap={},l}return s.prototype.init=function(l,o,c){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(l,c);var u=inner$k(this).sourceManager=new SourceManager(this);u.prepareSource();var d=this.getInitialData(l,c);wrapData(d,this),this.dataTask.context.data=d,inner$k(this).dataBeforeProcessed=d,autoSeriesName(this),this._initSelectedMapFromData(d)},s.prototype.mergeDefaultAndTheme=function(l,o){var c=fetchLayoutMode(this),u=c?getLayoutParams(l):{},d=this.subType;ComponentModel.hasClass(d)&&(d+="Series"),merge(l,o.getTheme().get(this.subType)),merge(l,this.getDefaultOption()),defaultEmphasis(l,"label",["show"]),this.fillDataTextStyle(l.data),c&&mergeLayoutParam(l,u,c)},s.prototype.mergeOption=function(l,o){l=merge(this.option,l,!0),this.fillDataTextStyle(l.data);var c=fetchLayoutMode(this);c&&mergeLayoutParam(this.option,l,c);var u=inner$k(this).sourceManager;u.dirty(),u.prepareSource();var d=this.getInitialData(l,o);wrapData(d,this),this.dataTask.dirty(),this.dataTask.context.data=d,inner$k(this).dataBeforeProcessed=d,autoSeriesName(this),this._initSelectedMapFromData(d)},s.prototype.fillDataTextStyle=function(l){if(l&&!isTypedArray(l))for(var o=["show"],c=0;c<l.length;c++)l[c]&&l[c].label&&defaultEmphasis(l[c],"label",o)},s.prototype.getInitialData=function(l,o){},s.prototype.appendData=function(l){var o=this.getRawData();o.appendData(l.data)},s.prototype.getData=function(l){var o=getCurrentTask(this);if(o){var c=o.context.data;return l==null||!c.getLinkedData?c:c.getLinkedData(l)}else return inner$k(this).data},s.prototype.getAllData=function(){var l=this.getData();return l&&l.getLinkedDataAll?l.getLinkedDataAll():[{data:l}]},s.prototype.setData=function(l){var o=getCurrentTask(this);if(o){var c=o.context;c.outputData=l,o!==this.dataTask&&(c.data=l)}inner$k(this).data=l},s.prototype.getEncode=function(){var l=this.get("encode",!0);if(l)return createHashMap(l)},s.prototype.getSourceManager=function(){return inner$k(this).sourceManager},s.prototype.getSource=function(){return this.getSourceManager().getSource()},s.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},s.prototype.getColorBy=function(){var l=this.get("colorBy");return l||"series"},s.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},s.prototype.getBaseAxis=function(){var l=this.coordinateSystem;return l&&l.getBaseAxis&&l.getBaseAxis()},s.prototype.formatTooltip=function(l,o,c){return defaultSeriesFormatTooltip({series:this,dataIndex:l,multipleSeries:o})},s.prototype.isAnimationEnabled=function(){var l=this.ecModel;if(env.node&&!(l&&l.ssr))return!1;var o=this.getShallow("animation");return o&&this.getData().count()>this.getShallow("animationThreshold")&&(o=!1),!!o},s.prototype.restoreData=function(){this.dataTask.dirty()},s.prototype.getColorFromPalette=function(l,o,c){var u=this.ecModel,d=PaletteMixin.prototype.getColorFromPalette.call(this,l,o,c);return d||(d=u.getColorFromPalette(l,o,c)),d},s.prototype.coordDimToDataDim=function(l){return this.getRawData().mapDimensionsAll(l)},s.prototype.getProgressive=function(){return this.get("progressive")},s.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},s.prototype.select=function(l,o){this._innerSelect(this.getData(o),l)},s.prototype.unselect=function(l,o){var c=this.option.selectedMap;if(c){var u=this.option.selectedMode,d=this.getData(o);if(u==="series"||c==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var f=0;f<l.length;f++){var g=l[f],y=getSelectionKey(d,g);c[y]=!1,this._selectedDataIndicesMap[y]=-1}}},s.prototype.toggleSelect=function(l,o){for(var c=[],u=0;u<l.length;u++)c[0]=l[u],this.isSelected(l[u],o)?this.unselect(c,o):this.select(c,o)},s.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var l=this._selectedDataIndicesMap,o=keys(l),c=[],u=0;u<o.length;u++){var d=l[o[u]];d>=0&&c.push(d)}return c},s.prototype.isSelected=function(l,o){var c=this.option.selectedMap;if(!c)return!1;var u=this.getData(o);return(c==="all"||c[getSelectionKey(u,l)])&&!u.getItemModel(l).get(["select","disabled"])},s.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var l=this.option.universalTransition;return l?l===!0?!0:l&&l.enabled:!1},s.prototype._innerSelect=function(l,o){var c,u,d=this.option,f=d.selectedMode,g=o.length;if(!(!f||!g)){if(f==="series")d.selectedMap="all";else if(f==="multiple"){isObject$5(d.selectedMap)||(d.selectedMap={});for(var y=d.selectedMap,$=0;$<g;$++){var x=o[$],N=getSelectionKey(l,x);y[N]=!0,this._selectedDataIndicesMap[N]=l.getRawIndex(x)}}else if(f==="single"||f===!0){var R=o[g-1],N=getSelectionKey(l,R);d.selectedMap=(c={},c[N]=!0,c),this._selectedDataIndicesMap=(u={},u[N]=l.getRawIndex(R),u)}}},s.prototype._initSelectedMapFromData=function(l){if(!this.option.selectedMap){var o=[];l.hasItemOption&&l.each(function(c){var u=l.getRawDataItem(c);u&&u.selected&&o.push(c)}),o.length>0&&this._innerSelect(l,o)}},s.registerClass=function(l){return ComponentModel.registerClass(l)},s.protoInitialize=function(){var l=s.prototype;l.type="series.__base__",l.seriesIndex=0,l.ignoreStyleOnData=!1,l.hasSymbolVisual=!1,l.defaultSymbol="circle",l.visualStyleAccessPath="itemStyle",l.visualDrawType="fill"}(),s}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(a){var s=a.name;isNameSpecified(a)||(a.name=getSeriesAutoName(a)||s)}function getSeriesAutoName(a){var s=a.getRawData(),l=s.mapDimensionsAll("seriesName"),o=[];return each$f(l,function(c){var u=s.getDimensionInfo(c);u.displayName&&o.push(u.displayName)}),o.join(" ")}function dataTaskCount(a){return a.model.getRawData().count()}function dataTaskReset(a){var s=a.model;return s.setData(s.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(a,s){s.outputData&&a.end>s.outputData.count()&&s.model.getRawData().cloneShallow(s.outputData)}function wrapData(a,s){each$f(concatArray(a.CHANGABLE_METHODS,a.DOWNSAMPLE_METHODS),function(l){a.wrapMethod(l,curry$1(onDataChange,s))})}function onDataChange(a,s){var l=getCurrentTask(a);return l&&l.setOutputEnd((s||this).count()),s}function getCurrentTask(a){var s=(a.ecModel||{}).scheduler,l=s&&s.getPipeline(a.uid);if(l){var o=l.currentTask;if(o){var c=o.agentStubMap;c&&(o=c.get(a.uid))}return o}}var ComponentView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewComponent")}return a.prototype.init=function(s,l){},a.prototype.render=function(s,l,o,c){},a.prototype.dispose=function(s,l){},a.prototype.updateView=function(s,l,o,c){},a.prototype.updateLayout=function(s,l,o,c){},a.prototype.updateVisual=function(s,l,o,c){},a.prototype.toggleBlurSeries=function(s,l,o){},a.prototype.eachRendered=function(s){var l=this.group;l&&l.traverse(s)},a}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var a=makeInner();return function(s){var l=a(s),o=s.pipelineContext,c=!!l.large,u=!!l.progressiveRender,d=l.large=!!(o&&o.large),f=l.progressiveRender=!!(o&&o.progressiveRender);return(c!==d||u!==f)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function a(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return a.prototype.init=function(s,l){},a.prototype.render=function(s,l,o,c){},a.prototype.highlight=function(s,l,o,c){var u=s.getData(c&&c.dataType);u&&toggleHighlight(u,c,"emphasis")},a.prototype.downplay=function(s,l,o,c){var u=s.getData(c&&c.dataType);u&&toggleHighlight(u,c,"normal")},a.prototype.remove=function(s,l){this.group.removeAll()},a.prototype.dispose=function(s,l){},a.prototype.updateView=function(s,l,o,c){this.render(s,l,o,c)},a.prototype.updateLayout=function(s,l,o,c){this.render(s,l,o,c)},a.prototype.updateVisual=function(s,l,o,c){this.render(s,l,o,c)},a.prototype.eachRendered=function(s){traverseElements(this.group,s)},a.markUpdateMethod=function(s,l){inner$j(s).updateMethod=l},a.protoInitialize=function(){var s=a.prototype;s.type="chart"}(),a}();function elSetState(a,s,l){a&&isHighDownDispatcher(a)&&(s==="emphasis"?enterEmphasis:leaveEmphasis)(a,l)}function toggleHighlight(a,s,l){var o=queryDataIndex(a,s),c=s&&s.highlightKey!=null?getHighlightDigit(s.highlightKey):null;o!=null?each$f(normalizeToArray(o),function(u){elSetState(a.getItemGraphicEl(u),l,c)}):a.eachItemGraphicEl(function(u){elSetState(u,l,c)})}enableClassExtend(ChartView);enableClassManagement(ChartView);function renderTaskPlan(a){return renderPlanner(a.model)}function renderTaskReset(a){var s=a.model,l=a.ecModel,o=a.api,c=a.payload,u=s.pipelineContext.progressiveRender,d=a.view,f=c&&inner$j(c).updateMethod,g=u?"incrementalPrepareRender":f&&d[f]?f:"render";return g!=="render"&&d[g](s,l,o,c),progressMethodMap[g]}var progressMethodMap={incrementalPrepareRender:{progress:function(a,s){s.view.incrementalRender(a,s.model,s.ecModel,s.api,s.payload)}},render:{forceFirstProgress:!0,progress:function(a,s){s.view.render(s.model,s.ecModel,s.api,s.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle$1(a,s,l){var o,c=0,u=0,d=null,f,g,y,$;s=s||0;function x(){u=new Date().getTime(),d=null,a.apply(g,y||[])}var N=function(){for(var R=[],j=0;j<arguments.length;j++)R[j]=arguments[j];o=new Date().getTime(),g=this,y=R;var ne=$||s,se=$||l;$=null,f=o-(se?c:u)-ne,clearTimeout(d),se?d=setTimeout(x,ne):f>=0?x():d=setTimeout(x,-f),c=o};return N.clear=function(){d&&(clearTimeout(d),d=null)},N.debounceNextCall=function(R){$=R},N}function createOrUpdate(a,s,l,o){var c=a[s];if(c){var u=c[ORIGIN_METHOD]||c,d=c[THROTTLE_TYPE],f=c[RATE];if(f!==l||d!==o){if(l==null||!o)return a[s]=u;c=a[s]=throttle$1(u,l,o==="debounce"),c[ORIGIN_METHOD]=u,c[THROTTLE_TYPE]=o,c[RATE]=l}return c}}function clear$1(a,s){var l=a[s];l&&l[ORIGIN_METHOD]&&(l.clear&&l.clear(),a[s]=l[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(a,s){var l=a.visualStyleMapper||defaultStyleMappers[s];return l||(console.warn("Unknown style type '"+s+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(a,s){var l=a.visualDrawType||defaultColorKey[s];return l||(console.warn("Unknown style type '"+s+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,s){var l=a.getData(),o=a.visualStyleAccessPath||"itemStyle",c=a.getModel(o),u=getStyleMapper(a,o),d=u(c),f=c.getShallow("decal");f&&(l.setVisual("decal",f),f.dirty=!0);var g=getDefaultColorKey(a,o),y=d[g],$=isFunction$2(y)?y:null,x=d.fill==="auto"||d.stroke==="auto";if(!d[g]||$||x){var N=a.getColorFromPalette(a.name,null,s.getSeriesCount());d[g]||(d[g]=N,l.setVisual("colorFromPalette",!0)),d.fill=d.fill==="auto"||isFunction$2(d.fill)?N:d.fill,d.stroke=d.stroke==="auto"||isFunction$2(d.stroke)?N:d.stroke}if(l.setVisual("style",d),l.setVisual("drawType",g),!s.isSeriesFiltered(a)&&$)return l.setVisual("colorFromPalette",!1),{dataEach:function(R,j){var ne=a.getDataParams(j),se=extend({},d);se[g]=$(ne),R.setItemVisual(j,"style",se)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,s){if(!(a.ignoreStyleOnData||s.isSeriesFiltered(a))){var l=a.getData(),o=a.visualStyleAccessPath||"itemStyle",c=getStyleMapper(a,o),u=l.getVisual("drawType");return{dataEach:l.hasItemOption?function(d,f){var g=d.getRawDataItem(f);if(g&&g[o]){sharedModel.option=g[o];var y=c(sharedModel),$=d.ensureUniqueItemVisual(f,"style");extend($,y),sharedModel.option.decal&&(d.setItemVisual(f,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),u in y&&d.setItemVisual(f,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(a){var s=createHashMap();a.eachSeries(function(l){var o=l.getColorBy();if(!l.isColorBySeries()){var c=l.type+"-"+o,u=s.get(c);u||(u={},s.set(c,u)),inner$i(l).scope=u}}),a.eachSeries(function(l){if(!(l.isColorBySeries()||a.isSeriesFiltered(l))){var o=l.getRawData(),c={},u=l.getData(),d=inner$i(l).scope,f=l.visualStyleAccessPath||"itemStyle",g=getDefaultColorKey(l,f);u.each(function(y){var $=u.getRawIndex(y);c[$]=y}),o.each(function(y){var $=c[y],x=u.getItemVisual($,"colorFromPalette");if(x){var N=u.ensureUniqueItemVisual($,"style"),R=o.getName(y)||y+"",j=o.count();N[g]=l.getColorFromPalette(R,d,j)}})}})}},PI$5=Math.PI;function defaultLoading(a,s){s=s||{},defaults(s,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var l=new Group$3,o=new Rect$2({style:{fill:s.maskColor},zlevel:s.zlevel,z:1e4});l.add(o);var c=new ZRText({style:{text:s.text,fill:s.textColor,fontSize:s.fontSize,fontWeight:s.fontWeight,fontStyle:s.fontStyle,fontFamily:s.fontFamily},zlevel:s.zlevel,z:10001}),u=new Rect$2({style:{fill:"none"},textContent:c,textConfig:{position:"right",distance:10},zlevel:s.zlevel,z:10001});l.add(u);var d;return s.showSpinner&&(d=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:s.spinnerRadius},style:{stroke:s.color,lineCap:"round",lineWidth:s.lineWidth},zlevel:s.zlevel,z:10001}),d.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),d.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),l.add(d)),l.resize=function(){var f=c.getBoundingRect().width,g=s.showSpinner?s.spinnerRadius:0,y=(a.getWidth()-g*2-(s.showSpinner&&f?10:0)-f)/2-(s.showSpinner&&f?0:5+f/2)+(s.showSpinner?0:f/2)+(f?0:g),$=a.getHeight()/2;s.showSpinner&&d.setShape({cx:y,cy:$}),u.setShape({x:y-g,y:$-g,width:g*2,height:g*2}),o.setShape({x:0,y:0,width:a.getWidth(),height:a.getHeight()})},l.resize(),l}var Scheduler=function(){function a(s,l,o,c){this._stageTaskMap=createHashMap(),this.ecInstance=s,this.api=l,o=this._dataProcessorHandlers=o.slice(),c=this._visualHandlers=c.slice(),this._allHandlers=o.concat(c)}return a.prototype.restoreData=function(s,l){s.restoreData(l),this._stageTaskMap.each(function(o){var c=o.overallTask;c&&c.dirty()})},a.prototype.getPerformArgs=function(s,l){if(s.__pipeline){var o=this._pipelineMap.get(s.__pipeline.id),c=o.context,u=!l&&o.progressiveEnabled&&(!c||c.progressiveRender)&&s.__idxInPipeline>o.blockIndex,d=u?o.step:null,f=c&&c.modDataCount,g=f!=null?Math.ceil(f/d):null;return{step:d,modBy:g,modDataCount:f}}},a.prototype.getPipeline=function(s){return this._pipelineMap.get(s)},a.prototype.updateStreamModes=function(s,l){var o=this._pipelineMap.get(s.uid),c=s.getData(),u=c.count(),d=o.progressiveEnabled&&l.incrementalPrepareRender&&u>=o.threshold,f=s.get("large")&&u>=s.get("largeThreshold"),g=s.get("progressiveChunkMode")==="mod"?u:null;s.pipelineContext=o.context={progressiveRender:d,modDataCount:g,large:f}},a.prototype.restorePipelines=function(s){var l=this,o=l._pipelineMap=createHashMap();s.eachSeries(function(c){var u=c.getProgressive(),d=c.uid;o.set(d,{id:d,head:null,tail:null,threshold:c.getProgressiveThreshold(),progressiveEnabled:u&&!(c.preventIncremental&&c.preventIncremental()),blockIndex:-1,step:Math.round(u||700),count:0}),l._pipe(c,c.dataTask)})},a.prototype.prepareStageTasks=function(){var s=this._stageTaskMap,l=this.api.getModel(),o=this.api;each$f(this._allHandlers,function(c){var u=s.get(c.uid)||s.set(c.uid,{}),d="";assert(!(c.reset&&c.overallReset),d),c.reset&&this._createSeriesStageTask(c,u,l,o),c.overallReset&&this._createOverallStageTask(c,u,l,o)},this)},a.prototype.prepareView=function(s,l,o,c){var u=s.renderTask,d=u.context;d.model=l,d.ecModel=o,d.api=c,u.__block=!s.incrementalPrepareRender,this._pipe(l,u)},a.prototype.performDataProcessorTasks=function(s,l){this._performStageTasks(this._dataProcessorHandlers,s,l,{block:!0})},a.prototype.performVisualTasks=function(s,l,o){this._performStageTasks(this._visualHandlers,s,l,o)},a.prototype._performStageTasks=function(s,l,o,c){c=c||{};var u=!1,d=this;each$f(s,function(g,y){if(!(c.visualType&&c.visualType!==g.visualType)){var $=d._stageTaskMap.get(g.uid),x=$.seriesTaskMap,N=$.overallTask;if(N){var R,j=N.agentStubMap;j.each(function(se){f(c,se)&&(se.dirty(),R=!0)}),R&&N.dirty(),d.updatePayload(N,o);var ne=d.getPerformArgs(N,c.block);j.each(function(se){se.perform(ne)}),N.perform(ne)&&(u=!0)}else x&&x.each(function(se,ce){f(c,se)&&se.dirty();var fe=d.getPerformArgs(se,c.block);fe.skip=!g.performRawSeries&&l.isSeriesFiltered(se.context.model),d.updatePayload(se,o),se.perform(fe)&&(u=!0)})}});function f(g,y){return g.setDirty&&(!g.dirtyMap||g.dirtyMap.get(y.__pipeline.id))}this.unfinished=u||this.unfinished},a.prototype.performSeriesTasks=function(s){var l;s.eachSeries(function(o){l=o.dataTask.perform()||l}),this.unfinished=l||this.unfinished},a.prototype.plan=function(){this._pipelineMap.each(function(s){var l=s.tail;do{if(l.__block){s.blockIndex=l.__idxInPipeline;break}l=l.getUpstream()}while(l)})},a.prototype.updatePayload=function(s,l){l!=="remain"&&(s.context.payload=l)},a.prototype._createSeriesStageTask=function(s,l,o,c){var u=this,d=l.seriesTaskMap,f=l.seriesTaskMap=createHashMap(),g=s.seriesType,y=s.getTargetSeries;s.createOnAllSeries?o.eachRawSeries($):g?o.eachRawSeriesByType(g,$):y&&y(o,c).each($);function $(x){var N=x.uid,R=f.set(N,d&&d.get(N)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));R.context={model:x,ecModel:o,api:c,useClearVisual:s.isVisual&&!s.isLayout,plan:s.plan,reset:s.reset,scheduler:u},u._pipe(x,R)}},a.prototype._createOverallStageTask=function(s,l,o,c){var u=this,d=l.overallTask=l.overallTask||createTask({reset:overallTaskReset});d.context={ecModel:o,api:c,overallReset:s.overallReset,scheduler:u};var f=d.agentStubMap,g=d.agentStubMap=createHashMap(),y=s.seriesType,$=s.getTargetSeries,x=!0,N=!1,R="";assert(!s.createOnAllSeries,R),y?o.eachRawSeriesByType(y,j):$?$(o,c).each(j):(x=!1,each$f(o.getSeries(),j));function j(ne){var se=ne.uid,ce=g.set(se,f&&f.get(se)||(N=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));ce.context={model:ne,overallProgress:x},ce.agent=d,ce.__block=x,u._pipe(ne,ce)}N&&d.dirty()},a.prototype._pipe=function(s,l){var o=s.uid,c=this._pipelineMap.get(o);!c.head&&(c.head=l),c.tail&&c.tail.pipe(l),c.tail=l,l.__idxInPipeline=c.count++,l.__pipeline=c},a.wrapStageHandler=function(s,l){return isFunction$2(s)&&(s={overallReset:s,seriesType:detectSeriseType(s)}),s.uid=getUID("stageHandler"),l&&(s.visualType=l),s},a}();function overallTaskReset(a){a.overallReset(a.ecModel,a.api,a.payload)}function stubReset(a){return a.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(a){return a.plan?a.plan(a.model,a.ecModel,a.api,a.payload):null}function seriesTaskReset(a){a.useClearVisual&&a.data.clearAllVisual();var s=a.resetDefines=normalizeToArray(a.reset(a.model,a.ecModel,a.api,a.payload));return s.length>1?map$1(s,function(l,o){return makeSeriesTaskProgress(o)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(a){return function(s,l){var o=l.data,c=l.resetDefines[a];if(c&&c.dataEach)for(var u=s.start;u<s.end;u++)c.dataEach(o,u);else c&&c.progress&&c.progress(s,o)}}function seriesTaskCount(a){return a.data.count()}function detectSeriseType(a){seriesType=null;try{a(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(a){seriesType=a};ecModelMock.eachComponent=function(a){a.mainType==="series"&&a.subType&&(seriesType=a.subType)};function mockMethods(a,s){for(var l in s.prototype)a[l]=noop}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function a(){}return a.prototype.normalizeQuery=function(s){var l={},o={},c={};if(isString$2(s)){var u=parseClassType(s);l.mainType=u.main||null,l.subType=u.sub||null}else{var d=["Index","Name","Id"],f={name:1,dataIndex:1,dataType:1};each$f(s,function(g,y){for(var $=!1,x=0;x<d.length;x++){var N=d[x],R=y.lastIndexOf(N);if(R>0&&R===y.length-N.length){var j=y.slice(0,R);j!=="data"&&(l.mainType=j,l[N.toLowerCase()]=g,$=!0)}}f.hasOwnProperty(y)&&(o[y]=g,$=!0),$||(c[y]=g)})}return{cptQuery:l,dataQuery:o,otherQuery:c}},a.prototype.filter=function(s,l){var o=this.eventInfo;if(!o)return!0;var c=o.targetEl,u=o.packedEvent,d=o.model,f=o.view;if(!d||!f)return!0;var g=l.cptQuery,y=l.dataQuery;return $(g,d,"mainType")&&$(g,d,"subType")&&$(g,d,"index","componentIndex")&&$(g,d,"name")&&$(g,d,"id")&&$(y,u,"name")&&$(y,u,"dataIndex")&&$(y,u,"dataType")&&(!f.filterForExposedEvent||f.filterForExposedEvent(s,l.otherQuery,c,u));function $(x,N,R,j){return x[R]==null||N[j||R]===x[R]}},a.prototype.afterTrigger=function(){this.eventInfo=null},a}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,s){var l=a.getData();if(a.legendIcon&&l.setVisual("legendIcon",a.legendIcon),!a.hasSymbolVisual)return;for(var o={},c={},u=!1,d=0;d<SYMBOL_PROPS_WITH_CB.length;d++){var f=SYMBOL_PROPS_WITH_CB[d],g=a.get(f);isFunction$2(g)?(u=!0,c[f]=g):o[f]=g}if(o.symbol=o.symbol||a.defaultSymbol,l.setVisual(extend({legendIcon:a.legendIcon||o.symbol,symbolKeepAspect:a.get("symbolKeepAspect")},o)),s.isSeriesFiltered(a))return;var y=keys(c);function $(x,N){for(var R=a.getRawValue(N),j=a.getDataParams(N),ne=0;ne<y.length;ne++){var se=y[ne];x.setItemVisual(N,se,c[se](R,j))}}return{dataEach:u?$:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(a,s){if(!a.hasSymbolVisual||s.isSeriesFiltered(a))return;var l=a.getData();function o(c,u){for(var d=c.getItemModel(u),f=0;f<SYMBOL_PROPS.length;f++){var g=SYMBOL_PROPS[f],y=d.getShallow(g,!0);y!=null&&c.setItemVisual(u,g,y)}}return{dataEach:l.hasItemOption?o:null}}};function getItemVisualFromData(a,s,l){switch(l){case"color":var o=a.getItemVisual(s,"style");return o[a.getVisual("drawType")];case"opacity":return a.getItemVisual(s,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getItemVisual(s,l)}}function getVisualFromData(a,s){switch(s){case"color":var l=a.getVisual("style");return l[a.getVisual("drawType")];case"opacity":return a.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return a.getVisual(s)}}function setItemVisualFromData(a,s,l,o){switch(l){case"color":var c=a.ensureUniqueItemVisual(s,"style");c[a.getVisual("drawType")]=o,a.setItemVisual(s,"colorFromPalette",!1);break;case"opacity":a.ensureUniqueItemVisual(s,"style").opacity=o;break;case"symbol":case"symbolSize":case"liftZ":a.setItemVisual(s,l,o);break}}function createLegacyDataSelectAction(a,s){function l(o,c){var u=[];return o.eachComponent({mainType:"series",subType:a,query:c},function(d){u.push(d.seriesIndex)}),u}each$f([[a+"ToggleSelect","toggleSelect"],[a+"Select","select"],[a+"UnSelect","unselect"]],function(o){s(o[0],function(c,u,d){c=extend({},c),d.dispatchAction(extend(c,{type:o[1],seriesIndex:l(u,c)}))})})}function handleSeriesLegacySelectEvents(a,s,l,o,c){var u=a+s;l.isSilent(u)||o.eachComponent({mainType:"series",subType:"pie"},function(d){for(var f=d.seriesIndex,g=d.option.selectedMap,y=c.selected,$=0;$<y.length;$++)if(y[$].seriesIndex===f){var x=d.getData(),N=queryDataIndex(x,c.fromActionPayload);l.trigger(u,{type:u,seriesId:d.id,name:isArray$3(N)?x.getName(N[0]):x.getName(N),selected:isString$2(g)?g:extend({},g)})}})}function handleLegacySelectEvents(a,s,l){a.on("selectchanged",function(o){var c=l.getModel();o.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",s,c,o),handleSeriesLegacySelectEvents("pie","selectchanged",s,c,o)):o.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",s,c,o),handleSeriesLegacySelectEvents("pie","selected",s,c,o)):o.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",s,c,o),handleSeriesLegacySelectEvents("pie","unselected",s,c,o))})}function findEventDispatcher(a,s,l){for(var o;a&&!(s(a)&&(o=a,l));)a=a.__hostTarget||a.parent;return o}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function a(){this._id="__ec_inner_"+wmUniqueIndex++}return a.prototype.get=function(s){return this._guard(s)[this._id]},a.prototype.set=function(s,l){var o=this._guard(s);return supportDefineProperty?Object.defineProperty(o,this._id,{value:l,enumerable:!1,configurable:!0}):o[this._id]=l,this},a.prototype.delete=function(s){return this.has(s)?(delete this._guard(s)[this._id],!0):!1},a.prototype.has=function(s){return!!this._guard(s)[this._id]},a.prototype._guard=function(s){if(s!==Object(s))throw TypeError("Value of WeakMap is not a non-null object.");return s},a}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,s){var l=s.cx,o=s.cy,c=s.width/2,u=s.height/2;a.moveTo(l,o-u),a.lineTo(l+c,o+u),a.lineTo(l-c,o+u),a.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(a,s){var l=s.cx,o=s.cy,c=s.width/2,u=s.height/2;a.moveTo(l,o-u),a.lineTo(l+c,o),a.lineTo(l,o+u),a.lineTo(l-c,o),a.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,s){var l=s.x,o=s.y,c=s.width/5*3,u=Math.max(c,s.height),d=c/2,f=d*d/(u-d),g=o-u+d+f,y=Math.asin(f/d),$=Math.cos(y)*d,x=Math.sin(y),N=Math.cos(y),R=d*.6,j=d*.7;a.moveTo(l-$,g+f),a.arc(l,g,d,Math.PI-y,Math.PI*2+y),a.bezierCurveTo(l+$-x*R,g+f+N*R,l,o-j,l,o),a.bezierCurveTo(l,o-j,l-$+x*R,g+f+N*R,l-$,g+f),a.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(a,s){var l=s.height,o=s.width,c=s.x,u=s.y,d=o/3*2;a.moveTo(c,u),a.lineTo(c+d,u+l),a.lineTo(c,u+l/4*3),a.lineTo(c-d,u+l),a.lineTo(c,u),a.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(a,s,l,o,c){c.x1=a,c.y1=s+o/2,c.x2=a+l,c.y2=s+o/2},rect:function(a,s,l,o,c){c.x=a,c.y=s,c.width=l,c.height=o},roundRect:function(a,s,l,o,c){c.x=a,c.y=s,c.width=l,c.height=o,c.r=Math.min(l,o)/4},square:function(a,s,l,o,c){var u=Math.min(l,o);c.x=a,c.y=s,c.width=u,c.height=u},circle:function(a,s,l,o,c){c.cx=a+l/2,c.cy=s+o/2,c.r=Math.min(l,o)/2},diamond:function(a,s,l,o,c){c.cx=a+l/2,c.cy=s+o/2,c.width=l,c.height=o},pin:function(a,s,l,o,c){c.x=a+l/2,c.y=s+o/2,c.width=l,c.height=o},arrow:function(a,s,l,o,c){c.x=a+l/2,c.y=s+o/2,c.width=l,c.height=o},triangle:function(a,s,l,o,c){c.cx=a+l/2,c.cy=s+o/2,c.width=l,c.height=o}},symbolBuildProxies={};each$f(symbolCtors,function(a,s){symbolBuildProxies[s]=new a});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(a,s,l){var o=calculateTextPosition(a,s,l),c=this.shape;return c&&c.symbolType==="pin"&&s.position==="inside"&&(o.y=l.y+l.height*.4),o},buildPath:function(a,s,l){var o=s.symbolType;if(o!=="none"){var c=symbolBuildProxies[o];c||(o="rect",c=symbolBuildProxies[o]),symbolShapeMakers[o](s.x,s.y,s.width,s.height,c.shape),c.buildPath(a,c.shape,l)}}});function symbolPathSetColor(a,s){if(this.type!=="image"){var l=this.style;this.__isEmptyBrush?(l.stroke=a,l.fill=s||"#fff",l.lineWidth=2):this.shape.symbolType==="line"?l.stroke=a:l.fill=a,this.markRedraw()}}function createSymbol$1(a,s,l,o,c,u,d){var f=a.indexOf("empty")===0;f&&(a=a.substr(5,1).toLowerCase()+a.substr(6));var g;return a.indexOf("image://")===0?g=makeImage(a.slice(8),new BoundingRect(s,l,o,c),d?"center":"cover"):a.indexOf("path://")===0?g=makePath(a.slice(7),{},new BoundingRect(s,l,o,c),d?"center":"cover"):g=new SymbolClz({shape:{symbolType:a,x:s,y:l,width:o,height:c}}),g.__isEmptyBrush=f,g.setColor=symbolPathSetColor,u&&g.setColor(u),g}function normalizeSymbolSize(a){return isArray$3(a)||(a=[+a,+a]),[a[0]||0,a[1]||0]}function normalizeSymbolOffset(a,s){if(a!=null)return isArray$3(a)||(a=[a,a]),[parsePercent(a[0],s[0])||0,parsePercent(retrieve2(a[1],a[0]),s[1])||0]}function isSafeNum(a){return isFinite(a)}function createLinearGradient(a,s,l){var o=s.x==null?0:s.x,c=s.x2==null?1:s.x2,u=s.y==null?0:s.y,d=s.y2==null?0:s.y2;s.global||(o=o*l.width+l.x,c=c*l.width+l.x,u=u*l.height+l.y,d=d*l.height+l.y),o=isSafeNum(o)?o:0,c=isSafeNum(c)?c:1,u=isSafeNum(u)?u:0,d=isSafeNum(d)?d:0;var f=a.createLinearGradient(o,u,c,d);return f}function createRadialGradient(a,s,l){var o=l.width,c=l.height,u=Math.min(o,c),d=s.x==null?.5:s.x,f=s.y==null?.5:s.y,g=s.r==null?.5:s.r;s.global||(d=d*o+l.x,f=f*c+l.y,g=g*u),d=isSafeNum(d)?d:.5,f=isSafeNum(f)?f:.5,g=g>=0&&isSafeNum(g)?g:.5;var y=a.createRadialGradient(d,f,0,d,f,g);return y}function getCanvasGradient(a,s,l){for(var o=s.type==="radial"?createRadialGradient(a,s,l):createLinearGradient(a,s,l),c=s.colorStops,u=0;u<c.length;u++)o.addColorStop(c[u].offset,c[u].color);return o}function isClipPathChanged(a,s){if(a===s||!a&&!s)return!1;if(!a||!s||a.length!==s.length)return!0;for(var l=0;l<a.length;l++)if(a[l]!==s[l])return!0;return!1}function parseInt10(a){return parseInt(a,10)}function getSize$1(a,s,l){var o=["width","height"][s],c=["clientWidth","clientHeight"][s],u=["paddingLeft","paddingTop"][s],d=["paddingRight","paddingBottom"][s];if(l[o]!=null&&l[o]!=="auto")return parseFloat(l[o]);var f=document.defaultView.getComputedStyle(a);return(a[c]||parseInt10(f[o])||parseInt10(a.style[o]))-(parseInt10(f[u])||0)-(parseInt10(f[d])||0)|0}function normalizeLineDash(a,s){return!a||a==="solid"||!(s>0)?null:a==="dashed"?[4*s,2*s]:a==="dotted"?[s]:isNumber$2(a)?[a]:isArray$3(a)?a:null}function getLineDash(a){var s=a.style,l=s.lineDash&&s.lineWidth>0&&normalizeLineDash(s.lineDash,s.lineWidth),o=s.lineDashOffset;if(l){var c=s.strokeNoScale&&a.getLineScale?a.getLineScale():1;c&&c!==1&&(l=map$1(l,function(u){return u/c}),o/=c)}return[l,o]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(a){var s=a.stroke;return!(s==null||s==="none"||!(a.lineWidth>0))}function isValidStrokeFillStyle(a){return typeof a=="string"&&a!=="none"}function styleHasFill(a){var s=a.fill;return s!=null&&s!=="none"}function doFillPath(a,s){if(s.fillOpacity!=null&&s.fillOpacity!==1){var l=a.globalAlpha;a.globalAlpha=s.fillOpacity*s.opacity,a.fill(),a.globalAlpha=l}else a.fill()}function doStrokePath(a,s){if(s.strokeOpacity!=null&&s.strokeOpacity!==1){var l=a.globalAlpha;a.globalAlpha=s.strokeOpacity*s.opacity,a.stroke(),a.globalAlpha=l}else a.stroke()}function createCanvasPattern(a,s,l){var o=createOrUpdateImage(s.image,s.__image,l);if(isImageReady(o)){var c=a.createPattern(o,s.repeat||"repeat");if(typeof DOMMatrix=="function"&&c&&c.setTransform){var u=new DOMMatrix;u.translateSelf(s.x||0,s.y||0),u.rotateSelf(0,0,(s.rotation||0)*RADIAN_TO_DEGREE),u.scaleSelf(s.scaleX||1,s.scaleY||1),c.setTransform(u)}return c}}function brushPath(a,s,l,o){var c,u=styleHasStroke(l),d=styleHasFill(l),f=l.strokePercent,g=f<1,y=!s.path;(!s.silent||g)&&y&&s.createPathProxy();var $=s.path||pathProxyForDraw,x=s.__dirty;if(!o){var N=l.fill,R=l.stroke,j=d&&!!N.colorStops,ne=u&&!!R.colorStops,se=d&&!!N.image,ce=u&&!!R.image,fe=void 0,ea=void 0,ta=void 0,na=void 0,aa=void 0;(j||ne)&&(aa=s.getBoundingRect()),j&&(fe=x?getCanvasGradient(a,N,aa):s.__canvasFillGradient,s.__canvasFillGradient=fe),ne&&(ea=x?getCanvasGradient(a,R,aa):s.__canvasStrokeGradient,s.__canvasStrokeGradient=ea),se&&(ta=x||!s.__canvasFillPattern?createCanvasPattern(a,N,s):s.__canvasFillPattern,s.__canvasFillPattern=ta),ce&&(na=x||!s.__canvasStrokePattern?createCanvasPattern(a,R,s):s.__canvasStrokePattern,s.__canvasStrokePattern=ta),j?a.fillStyle=fe:se&&(ta?a.fillStyle=ta:d=!1),ne?a.strokeStyle=ea:ce&&(na?a.strokeStyle=na:u=!1)}var ia=s.getGlobalScale();$.setScale(ia[0],ia[1],s.segmentIgnoreThreshold);var sa,ra;a.setLineDash&&l.lineDash&&(c=getLineDash(s),sa=c[0],ra=c[1]);var la=!0;(y||x&SHAPE_CHANGED_BIT)&&($.setDPR(a.dpr),g?$.setContext(null):($.setContext(a),la=!1),$.reset(),s.buildPath($,s.shape,o),$.toStatic(),s.pathUpdated()),la&&$.rebuildPath(a,g?f:1),sa&&(a.setLineDash(sa),a.lineDashOffset=ra),o||(l.strokeFirst?(u&&doStrokePath(a,l),d&&doFillPath(a,l)):(d&&doFillPath(a,l),u&&doStrokePath(a,l))),sa&&a.setLineDash([])}function brushImage(a,s,l){var o=s.__image=createOrUpdateImage(l.image,s.__image,s,s.onload);if(!(!o||!isImageReady(o))){var c=l.x||0,u=l.y||0,d=s.getWidth(),f=s.getHeight(),g=o.width/o.height;if(d==null&&f!=null?d=f*g:f==null&&d!=null?f=d/g:d==null&&f==null&&(d=o.width,f=o.height),l.sWidth&&l.sHeight){var y=l.sx||0,$=l.sy||0;a.drawImage(o,y,$,l.sWidth,l.sHeight,c,u,d,f)}else if(l.sx&&l.sy){var y=l.sx,$=l.sy,x=d-y,N=f-$;a.drawImage(o,y,$,x,N,c,u,d,f)}else a.drawImage(o,c,u,d,f)}}function brushText(a,s,l){var o,c=l.text;if(c!=null&&(c+=""),c){a.font=l.font||DEFAULT_FONT,a.textAlign=l.textAlign,a.textBaseline=l.textBaseline;var u=void 0,d=void 0;a.setLineDash&&l.lineDash&&(o=getLineDash(s),u=o[0],d=o[1]),u&&(a.setLineDash(u),a.lineDashOffset=d),l.strokeFirst?(styleHasStroke(l)&&a.strokeText(c,l.x,l.y),styleHasFill(l)&&a.fillText(c,l.x,l.y)):(styleHasFill(l)&&a.fillText(c,l.x,l.y),styleHasStroke(l)&&a.strokeText(c,l.x,l.y)),u&&a.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(a,s,l,o,c){var u=!1;if(!o&&(l=l||{},s===l))return!1;if(o||s.opacity!==l.opacity){flushPathDrawn(a,c),u=!0;var d=Math.max(Math.min(s.opacity,1),0);a.globalAlpha=isNaN(d)?DEFAULT_COMMON_STYLE.opacity:d}(o||s.blend!==l.blend)&&(u||(flushPathDrawn(a,c),u=!0),a.globalCompositeOperation=s.blend||DEFAULT_COMMON_STYLE.blend);for(var f=0;f<SHADOW_NUMBER_PROPS.length;f++){var g=SHADOW_NUMBER_PROPS[f];(o||s[g]!==l[g])&&(u||(flushPathDrawn(a,c),u=!0),a[g]=a.dpr*(s[g]||0))}return(o||s.shadowColor!==l.shadowColor)&&(u||(flushPathDrawn(a,c),u=!0),a.shadowColor=s.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),u}function bindPathAndTextCommonStyle(a,s,l,o,c){var u=getStyle$2(s,c.inHover),d=o?null:l&&getStyle$2(l,c.inHover)||{};if(u===d)return!1;var f=bindCommonProps(a,u,d,o,c);if((o||u.fill!==d.fill)&&(f||(flushPathDrawn(a,c),f=!0),isValidStrokeFillStyle(u.fill)&&(a.fillStyle=u.fill)),(o||u.stroke!==d.stroke)&&(f||(flushPathDrawn(a,c),f=!0),isValidStrokeFillStyle(u.stroke)&&(a.strokeStyle=u.stroke)),(o||u.opacity!==d.opacity)&&(f||(flushPathDrawn(a,c),f=!0),a.globalAlpha=u.opacity==null?1:u.opacity),s.hasStroke()){var g=u.lineWidth,y=g/(u.strokeNoScale&&s.getLineScale?s.getLineScale():1);a.lineWidth!==y&&(f||(flushPathDrawn(a,c),f=!0),a.lineWidth=y)}for(var $=0;$<STROKE_PROPS.length;$++){var x=STROKE_PROPS[$],N=x[0];(o||u[N]!==d[N])&&(f||(flushPathDrawn(a,c),f=!0),a[N]=u[N]||x[1])}return f}function bindImageStyle(a,s,l,o,c){return bindCommonProps(a,getStyle$2(s,c.inHover),l&&getStyle$2(l,c.inHover),o,c)}function setContextTransform(a,s){var l=s.transform,o=a.dpr||1;l?a.setTransform(o*l[0],o*l[1],o*l[2],o*l[3],o*l[4],o*l[5]):a.setTransform(o,0,0,o,0,0)}function updateClipStatus(a,s,l){for(var o=!1,c=0;c<a.length;c++){var u=a[c];o=o||u.isZeroArea(),setContextTransform(s,u),s.beginPath(),u.buildPath(s,u.shape),s.clip()}l.allClipped=o}function isTransformChanged(a,s){return a&&s?a[0]!==s[0]||a[1]!==s[1]||a[2]!==s[2]||a[3]!==s[3]||a[4]!==s[4]||a[5]!==s[5]:!(!a&&!s)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(a){var s=styleHasFill(a),l=styleHasStroke(a);return!(a.lineDash||!(+s^+l)||s&&typeof a.fill!="string"||l&&typeof a.stroke!="string"||a.strokePercent<1||a.strokeOpacity<1||a.fillOpacity<1)}function flushPathDrawn(a,s){s.batchFill&&a.fill(),s.batchStroke&&a.stroke(),s.batchFill="",s.batchStroke=""}function getStyle$2(a,s){return s&&a.__hoverStyle||a.style}function brushSingle(a,s){brush$1(a,s,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(a,s,l,o){var c=s.transform;if(!s.shouldBePainted(l.viewWidth,l.viewHeight,!1,!1)){s.__dirty&=~REDRAW_BIT,s.__isRendered=!1;return}var u=s.__clipPaths,d=l.prevElClipPaths,f=!1,g=!1;if((!d||isClipPathChanged(u,d))&&(d&&d.length&&(flushPathDrawn(a,l),a.restore(),g=f=!0,l.prevElClipPaths=null,l.allClipped=!1,l.prevEl=null),u&&u.length&&(flushPathDrawn(a,l),a.save(),updateClipStatus(u,a,l),f=!0),l.prevElClipPaths=u),l.allClipped){s.__isRendered=!1;return}s.beforeBrush&&s.beforeBrush(),s.innerBeforeBrush();var y=l.prevEl;y||(g=f=!0);var $=s instanceof Path&&s.autoBatch&&canPathBatch(s.style);f||isTransformChanged(c,y.transform)?(flushPathDrawn(a,l),setContextTransform(a,s)):$||flushPathDrawn(a,l);var x=getStyle$2(s,l.inHover);s instanceof Path?(l.lastDrawType!==DRAW_TYPE_PATH&&(g=!0,l.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(a,s,y,g,l),(!$||!l.batchFill&&!l.batchStroke)&&a.beginPath(),brushPath(a,s,x,$),$&&(l.batchFill=x.fill||"",l.batchStroke=x.stroke||"")):s instanceof TSpan?(l.lastDrawType!==DRAW_TYPE_TEXT&&(g=!0,l.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(a,s,y,g,l),brushText(a,s,x)):s instanceof ZRImage?(l.lastDrawType!==DRAW_TYPE_IMAGE&&(g=!0,l.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(a,s,y,g,l),brushImage(a,s,x)):s.getTemporalDisplayables&&(l.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(g=!0,l.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(a,s,l)),$&&o&&flushPathDrawn(a,l),s.innerAfterBrush(),s.afterBrush&&s.afterBrush(),l.prevEl=s,s.__dirty=0,s.__isRendered=!0}function brushIncremental(a,s,l){var o=s.getDisplayables(),c=s.getTemporalDisplayables();a.save();var u={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:l.viewWidth,viewHeight:l.viewHeight,inHover:l.inHover},d,f;for(d=s.getCursor(),f=o.length;d<f;d++){var g=o[d];g.beforeBrush&&g.beforeBrush(),g.innerBeforeBrush(),brush$1(a,g,u,d===f-1),g.innerAfterBrush(),g.afterBrush&&g.afterBrush(),u.prevEl=g}for(var y=0,$=c.length;y<$;y++){var g=c[y];g.beforeBrush&&g.beforeBrush(),g.innerBeforeBrush(),brush$1(a,g,u,y===$-1),g.innerAfterBrush(),g.afterBrush&&g.afterBrush(),u.prevEl=g}s.clearTemporalDisplayables(),s.notClear=!0,a.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(a,s){if(a==="none")return null;var l=s.getDevicePixelRatio(),o=s.getZr(),c=o.painter.type==="svg";a.dirty&&decalMap.delete(a);var u=decalMap.get(a);if(u)return u;var d=defaults(a,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});d.backgroundColor==="none"&&(d.backgroundColor=null);var f={repeat:"repeat"};return g(f),f.rotation=d.rotation,f.scaleX=f.scaleY=c?1:1/l,decalMap.set(a,f),a.dirty=!1,f;function g(y){for(var $=[l],x=!0,N=0;N<decalKeys.length;++N){var R=d[decalKeys[N]];if(R!=null&&!isArray$3(R)&&!isString$2(R)&&!isNumber$2(R)&&typeof R!="boolean"){x=!1;break}$.push(R)}var j;if(x){j=$.join(",")+(c?"-svg":"");var ne=decalCache.get(j);ne&&(c?y.svgElement=ne:y.image=ne)}var se=normalizeDashArrayX(d.dashArrayX),ce=normalizeDashArrayY(d.dashArrayY),fe=normalizeSymbolArray(d.symbol),ea=getLineBlockLengthX(se),ta=getLineBlockLengthY(ce),na=!c&&platformApi.createCanvas(),aa=c&&{tag:"g",attrs:{},key:"dcl",children:[]},ia=ra(),sa;na&&(na.width=ia.width*l,na.height=ia.height*l,sa=na.getContext("2d")),la(),x&&decalCache.put(j,na||aa),y.image=na,y.svgElement=aa,y.svgWidth=ia.width,y.svgHeight=ia.height;function ra(){for(var oa=1,ca=0,pa=ea.length;ca<pa;++ca)oa=getLeastCommonMultiple(oa,ea[ca]);for(var ua=1,ca=0,pa=fe.length;ca<pa;++ca)ua=getLeastCommonMultiple(ua,fe[ca].length);oa*=ua;var da=ta*ea.length*fe.length;return{width:Math.max(1,Math.min(oa,d.maxTileWidth)),height:Math.max(1,Math.min(da,d.maxTileHeight))}}function la(){sa&&(sa.clearRect(0,0,na.width,na.height),d.backgroundColor&&(sa.fillStyle=d.backgroundColor,sa.fillRect(0,0,na.width,na.height)));for(var oa=0,ca=0;ca<ce.length;++ca)oa+=ce[ca];if(oa<=0)return;for(var pa=-ta,ua=0,da=0,ha=0;pa<ia.height;){if(ua%2===0){for(var ga=da/2%fe.length,fa=0,ma=0,va=0;fa<ia.width*2;){for(var ka=0,ca=0;ca<se[ha].length;++ca)ka+=se[ha][ca];if(ka<=0)break;if(ma%2===0){var ya=(1-d.symbolSize)*.5,ba=fa+se[ha][ma]*ya,Ea=pa+ce[ua]*ya,Ca=se[ha][ma]*d.symbolSize,$a=ce[ua]*d.symbolSize,Pa=va/2%fe[ga].length;Da(ba,Ea,Ca,$a,fe[ga][Pa])}fa+=se[ha][ma],++va,++ma,ma===se[ha].length&&(ma=0)}++ha,ha===se.length&&(ha=0)}pa+=ce[ua],++da,++ua,ua===ce.length&&(ua=0)}function Da(Ta,Ba,wa,Oa,Aa){var Sa=c?1:l,Fa=createSymbol$1(Aa,Ta*Sa,Ba*Sa,wa*Sa,Oa*Sa,d.color,d.symbolKeepAspect);if(c){var Ia=o.painter.renderOneToVNode(Fa);Ia&&aa.children.push(Ia)}else brushSingle(sa,Fa)}}}}function normalizeSymbolArray(a){if(!a||a.length===0)return[["rect"]];if(isString$2(a))return[[a]];for(var s=!0,l=0;l<a.length;++l)if(!isString$2(a[l])){s=!1;break}if(s)return normalizeSymbolArray([a]);for(var o=[],l=0;l<a.length;++l)isString$2(a[l])?o.push([a[l]]):o.push(a[l]);return o}function normalizeDashArrayX(a){if(!a||a.length===0)return[[0,0]];if(isNumber$2(a)){var s=Math.ceil(a);return[[s,s]]}for(var l=!0,o=0;o<a.length;++o)if(!isNumber$2(a[o])){l=!1;break}if(l)return normalizeDashArrayX([a]);for(var c=[],o=0;o<a.length;++o)if(isNumber$2(a[o])){var s=Math.ceil(a[o]);c.push([s,s])}else{var s=map$1(a[o],function(f){return Math.ceil(f)});s.length%2===1?c.push(s.concat(s)):c.push(s)}return c}function normalizeDashArrayY(a){if(!a||typeof a=="object"&&a.length===0)return[0,0];if(isNumber$2(a)){var s=Math.ceil(a);return[s,s]}var l=map$1(a,function(o){return Math.ceil(o)});return a.length%2?l.concat(l):l}function getLineBlockLengthX(a){return map$1(a,function(s){return getLineBlockLengthY(s)})}function getLineBlockLengthY(a){for(var s=0,l=0;l<a.length;++l)s+=a[l];return a.length%2===1?s*2:s}function decalVisual(a,s){a.eachRawSeries(function(l){if(!a.isSeriesFiltered(l)){var o=l.getData();o.hasItemVisual()&&o.each(function(d){var f=o.getItemVisual(d,"decal");if(f){var g=o.ensureUniqueItemVisual(d,"style");g.decal=createOrUpdatePatternFromDecal(f,s)}});var c=o.getVisual("decal");if(c){var u=o.getVisual("style");u.decal=createOrUpdatePatternFromDecal(c,s)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(a,s){implsStore[a]=s}function getImpl(a){return implsStore[a]}var TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(a){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(this.isDisposed()){this.id;return}return toLowercaseNameAndCallEventful(this,a,s)}}function createRegisterEventWithLowercaseMessageCenter(a){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];return toLowercaseNameAndCallEventful(this,a,s)}}function toLowercaseNameAndCallEventful(a,s,l){return l[0]=l[0]&&l[0].toLowerCase(),Eventful.prototype[s].apply(a,l)}var MessageCenter=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this,new ECEventProcessor)||this;u._chartsViews=[],u._chartsMap={},u._componentsViews=[],u._componentsMap={},u._pendingActions=[],c=c||{},isString$2(o)&&(o=themeStorage[o]),u._dom=l;var d="canvas",f="auto",g=!1;c.ssr&&registerSSRDataGetter(function(N){var R=getECData(N),j=R.dataIndex;if(j!=null){var ne=createHashMap();return ne.set("series_index",R.seriesIndex),ne.set("data_index",j),R.ssrType&&ne.set("ssr_type",R.ssrType),ne}});var y=u._zr=init$2(l,{renderer:c.renderer||d,devicePixelRatio:c.devicePixelRatio,width:c.width,height:c.height,ssr:c.ssr,useDirtyRect:retrieve2(c.useDirtyRect,g),useCoarsePointer:retrieve2(c.useCoarsePointer,f),pointerSize:c.pointerSize});u._ssr=c.ssr,u._throttledZrFlush=throttle$1(bind$1(y.flush,y),17),o=clone$4(o),o&&globalBackwardCompat(o,!0),u._theme=o,u._locale=createLocaleObject(c.locale||SYSTEM_LANG),u._coordSysMgr=new CoordinateSystemManager;var $=u._api=createExtensionAPI(u);function x(N,R){return N.__prio-R.__prio}return sort$2(visualFuncs,x),sort$2(dataProcessorFuncs,x),u._scheduler=new Scheduler(u,$,dataProcessorFuncs,visualFuncs),u._messageCenter=new MessageCenter,u._initEvents(),u.resize=bind$1(u.resize,u),y.animation.on("frame",u._onframe,u),bindRenderedEvent(y,u),bindMouseEvent(y,u),setAsPrimitive(u),u}return s.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var l=this._scheduler;if(this[PENDING_UPDATE]){var o=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(g){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,g}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,o),triggerUpdatedEvent.call(this,o)}else if(l.unfinished){var c=TEST_FRAME_REMAIN_TIME,u=this._model,d=this._api;l.unfinished=!1;do{var f=+new Date;l.performSeriesTasks(u),l.performDataProcessorTasks(u),updateStreamModes(this,u),l.performVisualTasks(u),renderSeries(this,this._model,d,"remain",{}),c-=+new Date-f}while(c>0&&l.unfinished);l.unfinished||this._zr.flush()}}},s.prototype.getDom=function(){return this._dom},s.prototype.getId=function(){return this.id},s.prototype.getZr=function(){return this._zr},s.prototype.isSSR=function(){return this._ssr},s.prototype.setOption=function(l,o,c){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}var u,d,f;if(isObject$5(o)&&(c=o.lazyUpdate,u=o.silent,d=o.replaceMerge,f=o.transition,o=o.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||o){var g=new OptionManager(this._api),y=this._theme,$=this._model=new GlobalModel;$.scheduler=this._scheduler,$.ssr=this._ssr,$.init(null,null,null,y,this._locale,g)}this._model.setOption(l,{replaceMerge:d},optionPreprocessorFuncs);var x={seriesTransition:f,optionChanged:!0};if(c)this[PENDING_UPDATE]={silent:u,updateParams:x},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,x)}catch(N){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,N}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},s.prototype.setTheme=function(){},s.prototype.getModel=function(){return this._model},s.prototype.getOption=function(){return this._model&&this._model.getOption()},s.prototype.getWidth=function(){return this._zr.getWidth()},s.prototype.getHeight=function(){return this._zr.getHeight()},s.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},s.prototype.getRenderedCanvas=function(l){return this.renderToCanvas(l)},s.prototype.renderToCanvas=function(l){l=l||{};var o=this._zr.painter;return o.getRenderedCanvas({backgroundColor:l.backgroundColor||this._model.get("backgroundColor"),pixelRatio:l.pixelRatio||this.getDevicePixelRatio()})},s.prototype.renderToSVGString=function(l){l=l||{};var o=this._zr.painter;return o.renderToString({useViewBox:l.useViewBox})},s.prototype.getSvgDataURL=function(){if(env.svgSupported){var l=this._zr,o=l.storage.getDisplayList();return each$f(o,function(c){c.stopAnimation(null,!0)}),l.painter.toDataURL()}},s.prototype.getDataURL=function(l){if(this._disposed){this.id;return}l=l||{};var o=l.excludeComponents,c=this._model,u=[],d=this;each$f(o,function(g){c.eachComponent({mainType:g},function(y){var $=d._componentsMap[y.__viewId];$.group.ignore||(u.push($),$.group.ignore=!0)})});var f=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(l).toDataURL("image/"+(l&&l.type||"png"));return each$f(u,function(g){g.group.ignore=!1}),f},s.prototype.getConnectedDataURL=function(l){if(this._disposed){this.id;return}var o=l.type==="svg",c=this.group,u=Math.min,d=Math.max,f=1/0;if(connectedGroups[c]){var g=f,y=f,$=-f,x=-f,N=[],R=l&&l.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(ea,ta){if(ea.group===c){var na=o?ea.getZr().painter.getSvgDom().innerHTML:ea.renderToCanvas(clone$4(l)),aa=ea.getDom().getBoundingClientRect();g=u(aa.left,g),y=u(aa.top,y),$=d(aa.right,$),x=d(aa.bottom,x),N.push({dom:na,left:aa.left,top:aa.top})}}),g*=R,y*=R,$*=R,x*=R;var j=$-g,ne=x-y,se=platformApi.createCanvas(),ce=init$2(se,{renderer:o?"svg":"canvas"});if(ce.resize({width:j,height:ne}),o){var fe="";return each$f(N,function(ea){var ta=ea.left-g,na=ea.top-y;fe+='<g transform="translate('+ta+","+na+')">'+ea.dom+"</g>"}),ce.painter.getSvgRoot().innerHTML=fe,l.connectedBackgroundColor&&ce.painter.setBackgroundColor(l.connectedBackgroundColor),ce.refreshImmediately(),ce.painter.toDataURL()}else return l.connectedBackgroundColor&&ce.add(new Rect$2({shape:{x:0,y:0,width:j,height:ne},style:{fill:l.connectedBackgroundColor}})),each$f(N,function(ea){var ta=new ZRImage({style:{x:ea.left*R-g,y:ea.top*R-y,image:ea.dom}});ce.add(ta)}),ce.refreshImmediately(),se.toDataURL("image/"+(l&&l.type||"png"))}else return this.getDataURL(l)},s.prototype.convertToPixel=function(l,o){return doConvertPixel(this,"convertToPixel",l,o)},s.prototype.convertFromPixel=function(l,o){return doConvertPixel(this,"convertFromPixel",l,o)},s.prototype.containPixel=function(l,o){if(this._disposed){this.id;return}var c=this._model,u,d=parseFinder$1(c,l);return each$f(d,function(f,g){g.indexOf("Models")>=0&&each$f(f,function(y){var $=y.coordinateSystem;if($&&$.containPoint)u=u||!!$.containPoint(o);else if(g==="seriesModels"){var x=this._chartsMap[y.__viewId];x&&x.containPoint&&(u=u||x.containPoint(o,y))}},this)},this),!!u},s.prototype.getVisual=function(l,o){var c=this._model,u=parseFinder$1(c,l,{defaultMainType:"series"}),d=u.seriesModel,f=d.getData(),g=u.hasOwnProperty("dataIndexInside")?u.dataIndexInside:u.hasOwnProperty("dataIndex")?f.indexOfRawIndex(u.dataIndex):null;return g!=null?getItemVisualFromData(f,g,o):getVisualFromData(f,o)},s.prototype.getViewOfComponentModel=function(l){return this._componentsMap[l.__viewId]},s.prototype.getViewOfSeriesModel=function(l){return this._chartsMap[l.__viewId]},s.prototype._initEvents=function(){var l=this;each$f(MOUSE_EVENT_NAMES,function(o){var c=function(u){var d=l.getModel(),f=u.target,g,y=o==="globalout";if(y?g={}:f&&findEventDispatcher(f,function(j){var ne=getECData(j);if(ne&&ne.dataIndex!=null){var se=ne.dataModel||d.getSeriesByIndex(ne.seriesIndex);return g=se&&se.getDataParams(ne.dataIndex,ne.dataType,f)||{},!0}else if(ne.eventData)return g=extend({},ne.eventData),!0},!0),g){var $=g.componentType,x=g.componentIndex;($==="markLine"||$==="markPoint"||$==="markArea")&&($="series",x=g.seriesIndex);var N=$&&x!=null&&d.getComponent($,x),R=N&&l[N.mainType==="series"?"_chartsMap":"_componentsMap"][N.__viewId];g.event=u,g.type=o,l._$eventProcessor.eventInfo={targetEl:f,packedEvent:g,model:N,view:R},l.trigger(o,g)}};c.zrEventfulCallAtLast=!0,l._zr.on(o,c,l)}),each$f(eventActionMap,function(o,c){l._messageCenter.on(c,function(u){this.trigger(c,u)},l)}),each$f(["selectchanged"],function(o){l._messageCenter.on(o,function(c){this.trigger(o,c)},l)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},s.prototype.isDisposed=function(){return this._disposed},s.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},s.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var l=this.getDom();l&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var o=this,c=o._api,u=o._model;each$f(o._componentsViews,function(d){d.dispose(u,c)}),each$f(o._chartsViews,function(d){d.dispose(u,c)}),o._zr.dispose(),o._dom=o._model=o._chartsMap=o._componentsMap=o._chartsViews=o._componentsViews=o._scheduler=o._api=o._zr=o._throttledZrFlush=o._theme=o._coordSysMgr=o._messageCenter=null,delete instances[o.id]},s.prototype.resize=function(l){if(!this[IN_MAIN_PROCESS_KEY]){if(this._disposed){this.id;return}this._zr.resize(l);var o=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!o){var c=o.resetOption("media"),u=l&&l.silent;this[PENDING_UPDATE]&&(u==null&&(u=this[PENDING_UPDATE].silent),c=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{c&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},l&&l.animation)})}catch(d){throw this[IN_MAIN_PROCESS_KEY]=!1,d}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,u),triggerUpdatedEvent.call(this,u)}}},s.prototype.showLoading=function(l,o){if(this._disposed){this.id;return}if(isObject$5(l)&&(o=l,l=""),l=l||"default",this.hideLoading(),!!loadingEffects[l]){var c=loadingEffects[l](this._api,o),u=this._zr;this._loadingFX=c,u.add(c)}},s.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},s.prototype.makeActionFromEvent=function(l){var o=extend({},l);return o.type=eventActionMap[l.type],o},s.prototype.dispatchAction=function(l,o){if(this._disposed){this.id;return}if(isObject$5(o)||(o={silent:!!o}),!!actions[l.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(l);return}var c=o.silent;doDispatchAction.call(this,l,c);var u=o.flush;u?this._zr.flush():u!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}},s.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},s.prototype.appendData=function(l){if(this._disposed){this.id;return}var o=l.seriesIndex,c=this.getModel(),u=c.getSeriesByIndex(o);u.appendData(l),this._scheduler.unfinished=!0,this.getZr().wakeUp()},s.internalField=function(){prepare=function(x){var N=x._scheduler;N.restorePipelines(x._model),N.prepareStageTasks(),prepareView(x,!0),prepareView(x,!1),N.plan()},prepareView=function(x,N){for(var R=x._model,j=x._scheduler,ne=N?x._componentsViews:x._chartsViews,se=N?x._componentsMap:x._chartsMap,ce=x._zr,fe=x._api,ea=0;ea<ne.length;ea++)ne[ea].__alive=!1;N?R.eachComponent(function(aa,ia){aa!=="series"&&ta(ia)}):R.eachSeries(ta);function ta(aa){var ia=aa.__requireNewView;aa.__requireNewView=!1;var sa="_ec_"+aa.id+"_"+aa.type,ra=!ia&&se[sa];if(!ra){var la=parseClassType(aa.type),oa=N?ComponentView.getClass(la.main,la.sub):ChartView.getClass(la.sub);ra=new oa,ra.init(R,fe),se[sa]=ra,ne.push(ra),ce.add(ra.group)}aa.__viewId=ra.__id=sa,ra.__alive=!0,ra.__model=aa,ra.group.__ecComponentInfo={mainType:aa.mainType,index:aa.componentIndex},!N&&j.prepareView(ra,aa,R,fe)}for(var ea=0;ea<ne.length;){var na=ne[ea];na.__alive?ea++:(!N&&na.renderTask.dispose(),ce.remove(na.group),na.dispose(R,fe),ne.splice(ea,1),se[na.__id]===na&&delete se[na.__id],na.__id=na.group.__ecComponentInfo=null)}},updateDirectly=function(x,N,R,j,ne){var se=x._model;if(se.setUpdatePayload(R),!j){each$f([].concat(x._componentsViews).concat(x._chartsViews),na);return}var ce={};ce[j+"Id"]=R[j+"Id"],ce[j+"Index"]=R[j+"Index"],ce[j+"Name"]=R[j+"Name"];var fe={mainType:j,query:ce};ne&&(fe.subType=ne);var ea=R.excludeSeriesId,ta;ea!=null&&(ta=createHashMap(),each$f(normalizeToArray(ea),function(aa){var ia=convertOptionIdName(aa,null);ia!=null&&ta.set(ia,!0)})),se&&se.eachComponent(fe,function(aa){var ia=ta&&ta.get(aa.id)!=null;if(!ia)if(isHighDownPayload(R))if(aa instanceof SeriesModel)R.type===HIGHLIGHT_ACTION_TYPE&&!R.notBlur&&!aa.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(aa,R,x._api);else{var sa=findComponentHighDownDispatchers(aa.mainType,aa.componentIndex,R.name,x._api),ra=sa.focusSelf,la=sa.dispatchers;R.type===HIGHLIGHT_ACTION_TYPE&&ra&&!R.notBlur&&blurComponent(aa.mainType,aa.componentIndex,x._api),la&&each$f(la,function(oa){R.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(oa):leaveEmphasis(oa)})}else isSelectChangePayload(R)&&aa instanceof SeriesModel&&(toggleSelectionFromPayload(aa,R,x._api),updateSeriesElementSelection(aa),markStatusToUpdate(x))},x),se&&se.eachComponent(fe,function(aa){var ia=ta&&ta.get(aa.id)!=null;ia||na(x[j==="series"?"_chartsMap":"_componentsMap"][aa.__viewId])},x);function na(aa){aa&&aa.__alive&&aa[N]&&aa[N](aa.__model,se,x._api,R)}},updateMethods={prepareAndUpdate:function(x){prepare(this),updateMethods.update.call(this,x,{optionChanged:x.newOption!=null})},update:function(x,N){var R=this._model,j=this._api,ne=this._zr,se=this._coordSysMgr,ce=this._scheduler;if(R){R.setUpdatePayload(x),ce.restoreData(R,x),ce.performSeriesTasks(R),se.create(R,j),ce.performDataProcessorTasks(R,x),updateStreamModes(this,R),se.update(R,j),l(R),ce.performVisualTasks(R,x),render(this,R,j,x,N);var fe=R.get("backgroundColor")||"transparent",ea=R.get("darkMode");ne.setBackgroundColor(fe),ea!=null&&ea!=="auto"&&ne.setDarkMode(ea),lifecycle.trigger("afterupdate",R,j)}},updateTransform:function(x){var N=this,R=this._model,j=this._api;if(R){R.setUpdatePayload(x);var ne=[];R.eachComponent(function(ce,fe){if(ce!=="series"){var ea=N.getViewOfComponentModel(fe);if(ea&&ea.__alive)if(ea.updateTransform){var ta=ea.updateTransform(fe,R,j,x);ta&&ta.update&&ne.push(ea)}else ne.push(ea)}});var se=createHashMap();R.eachSeries(function(ce){var fe=N._chartsMap[ce.__viewId];if(fe.updateTransform){var ea=fe.updateTransform(ce,R,j,x);ea&&ea.update&&se.set(ce.uid,1)}else se.set(ce.uid,1)}),l(R),this._scheduler.performVisualTasks(R,x,{setDirty:!0,dirtyMap:se}),renderSeries(this,R,j,x,{},se),lifecycle.trigger("afterupdate",R,j)}},updateView:function(x){var N=this._model;N&&(N.setUpdatePayload(x),ChartView.markUpdateMethod(x,"updateView"),l(N),this._scheduler.performVisualTasks(N,x,{setDirty:!0}),render(this,N,this._api,x,{}),lifecycle.trigger("afterupdate",N,this._api))},updateVisual:function(x){var N=this,R=this._model;R&&(R.setUpdatePayload(x),R.eachSeries(function(j){j.getData().clearAllVisual()}),ChartView.markUpdateMethod(x,"updateVisual"),l(R),this._scheduler.performVisualTasks(R,x,{visualType:"visual",setDirty:!0}),R.eachComponent(function(j,ne){if(j!=="series"){var se=N.getViewOfComponentModel(ne);se&&se.__alive&&se.updateVisual(ne,R,N._api,x)}}),R.eachSeries(function(j){var ne=N._chartsMap[j.__viewId];ne.updateVisual(j,R,N._api,x)}),lifecycle.trigger("afterupdate",R,this._api))},updateLayout:function(x){updateMethods.update.call(this,x)}},doConvertPixel=function(x,N,R,j){if(x._disposed){x.id;return}for(var ne=x._model,se=x._coordSysMgr.getCoordinateSystems(),ce,fe=parseFinder$1(ne,R),ea=0;ea<se.length;ea++){var ta=se[ea];if(ta[N]&&(ce=ta[N](ne,fe,j))!=null)return ce}},updateStreamModes=function(x,N){var R=x._chartsMap,j=x._scheduler;N.eachSeries(function(ne){j.updateStreamModes(ne,R[ne.__viewId])})},doDispatchAction=function(x,N){var R=this,j=this.getModel(),ne=x.type,se=x.escapeConnect,ce=actions[ne],fe=ce.actionInfo,ea=(fe.update||"update").split(":"),ta=ea.pop(),na=ea[0]!=null&&parseClassType(ea[0]);this[IN_MAIN_PROCESS_KEY]=!0;var aa=[x],ia=!1;x.batch&&(ia=!0,aa=map$1(x.batch,function(ua){return ua=defaults(extend({},ua),x),ua.batch=null,ua}));var sa=[],ra,la=isSelectChangePayload(x),oa=isHighDownPayload(x);if(oa&&allLeaveBlur(this._api),each$f(aa,function(ua){if(ra=ce.action(ua,R._model,R._api),ra=ra||extend({},ua),ra.type=fe.event||ra.type,sa.push(ra),oa){var da=preParseFinder(x),ha=da.queryOptionMap,ga=da.mainTypeSpecified,fa=ga?ha.keys()[0]:"series";updateDirectly(R,ta,ua,fa),markStatusToUpdate(R)}else la?(updateDirectly(R,ta,ua,"series"),markStatusToUpdate(R)):na&&updateDirectly(R,ta,ua,na.main,na.sub)}),ta!=="none"&&!oa&&!la&&!na)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,x),this[PENDING_UPDATE]=null):updateMethods[ta].call(this,x)}catch(ua){throw this[IN_MAIN_PROCESS_KEY]=!1,ua}if(ia?ra={type:fe.event||ne,escapeConnect:se,batch:sa}:ra=sa[0],this[IN_MAIN_PROCESS_KEY]=!1,!N){var ca=this._messageCenter;if(ca.trigger(ra.type,ra),la){var pa={type:"selectchanged",escapeConnect:se,selected:getAllSelectedIndices(j),isFromClick:x.isFromClick||!1,fromAction:x.type,fromActionPayload:x};ca.trigger(pa.type,pa)}}},flushPendingActions=function(x){for(var N=this._pendingActions;N.length;){var R=N.shift();doDispatchAction.call(this,R,x)}},triggerUpdatedEvent=function(x){!x&&this.trigger("updated")},bindRenderedEvent=function(x,N){x.on("rendered",function(R){N.trigger("rendered",R),x.animation.isFinished()&&!N[PENDING_UPDATE]&&!N._scheduler.unfinished&&!N._pendingActions.length&&N.trigger("finished")})},bindMouseEvent=function(x,N){x.on("mouseover",function(R){var j=R.target,ne=findEventDispatcher(j,isHighDownDispatcher);ne&&(handleGlobalMouseOverForHighDown(ne,R,N._api),markStatusToUpdate(N))}).on("mouseout",function(R){var j=R.target,ne=findEventDispatcher(j,isHighDownDispatcher);ne&&(handleGlobalMouseOutForHighDown(ne,R,N._api),markStatusToUpdate(N))}).on("click",function(R){var j=R.target,ne=findEventDispatcher(j,function(fe){return getECData(fe).dataIndex!=null},!0);if(ne){var se=ne.selected?"unselect":"select",ce=getECData(ne);N._api.dispatchAction({type:se,dataType:ce.dataType,dataIndexInside:ce.dataIndex,seriesIndex:ce.seriesIndex,isFromClick:!0})}})};function l(x){x.clearColorPalette(),x.eachSeries(function(N){N.clearColorPalette()})}function o(x){var N=[],R=[],j=!1;if(x.eachComponent(function(fe,ea){var ta=ea.get("zlevel")||0,na=ea.get("z")||0,aa=ea.getZLevelKey();j=j||!!aa,(fe==="series"?R:N).push({zlevel:ta,z:na,idx:ea.componentIndex,type:fe,key:aa})}),j){var ne=N.concat(R),se,ce;sort$2(ne,function(fe,ea){return fe.zlevel===ea.zlevel?fe.z-ea.z:fe.zlevel-ea.zlevel}),each$f(ne,function(fe){var ea=x.getComponent(fe.type,fe.idx),ta=fe.zlevel,na=fe.key;se!=null&&(ta=Math.max(se,ta)),na?(ta===se&&na!==ce&&ta++,ce=na):ce&&(ta===se&&ta++,ce=""),se=ta,ea.setZLevel(ta)})}}render=function(x,N,R,j,ne){o(N),renderComponents(x,N,R,j,ne),each$f(x._chartsViews,function(se){se.__alive=!1}),renderSeries(x,N,R,j,ne),each$f(x._chartsViews,function(se){se.__alive||se.remove(N,R)})},renderComponents=function(x,N,R,j,ne,se){each$f(se||x._componentsViews,function(ce){var fe=ce.__model;y(fe,ce),ce.render(fe,N,R,j),f(fe,ce),$(fe,ce)})},renderSeries=function(x,N,R,j,ne,se){var ce=x._scheduler;ne=extend(ne||{},{updatedSeries:N.getSeries()}),lifecycle.trigger("series:beforeupdate",N,R,ne);var fe=!1;N.eachSeries(function(ea){var ta=x._chartsMap[ea.__viewId];ta.__alive=!0;var na=ta.renderTask;ce.updatePayload(na,j),y(ea,ta),se&&se.get(ea.uid)&&na.dirty(),na.perform(ce.getPerformArgs(na))&&(fe=!0),ta.group.silent=!!ea.get("silent"),d(ea,ta),updateSeriesElementSelection(ea)}),ce.unfinished=fe||ce.unfinished,lifecycle.trigger("series:layoutlabels",N,R,ne),lifecycle.trigger("series:transition",N,R,ne),N.eachSeries(function(ea){var ta=x._chartsMap[ea.__viewId];f(ea,ta),$(ea,ta)}),u(x,N),lifecycle.trigger("series:afterupdate",N,R,ne)},markStatusToUpdate=function(x){x[STATUS_NEEDS_UPDATE_KEY]=!0,x.getZr().wakeUp()},applyChangedStates=function(x){x[STATUS_NEEDS_UPDATE_KEY]&&(x.getZr().storage.traverse(function(N){isElementRemoved(N)||c(N)}),x[STATUS_NEEDS_UPDATE_KEY]=!1)};function c(x){for(var N=[],R=x.currentStates,j=0;j<R.length;j++){var ne=R[j];ne==="emphasis"||ne==="blur"||ne==="select"||N.push(ne)}x.selected&&x.states.select&&N.push("select"),x.hoverState===HOVER_STATE_EMPHASIS&&x.states.emphasis?N.push("emphasis"):x.hoverState===HOVER_STATE_BLUR&&x.states.blur&&N.push("blur"),x.useStates(N)}function u(x,N){var R=x._zr,j=R.storage,ne=0;j.traverse(function(se){se.isGroup||ne++}),ne>N.get("hoverLayerThreshold")&&!env.node&&!env.worker&&N.eachSeries(function(se){if(!se.preventUsingHoverLayer){var ce=x._chartsMap[se.__viewId];ce.__alive&&ce.eachRendered(function(fe){fe.states.emphasis&&(fe.states.emphasis.hoverLayer=!0)})}})}function d(x,N){var R=x.get("blendMode")||null;N.eachRendered(function(j){j.isGroup||(j.style.blend=R)})}function f(x,N){if(!x.preventAutoZ){var R=x.get("z")||0,j=x.get("zlevel")||0;N.eachRendered(function(ne){return g(ne,R,j,-1/0),!0})}}function g(x,N,R,j){var ne=x.getTextContent(),se=x.getTextGuideLine(),ce=x.isGroup;if(ce)for(var fe=x.childrenRef(),ea=0;ea<fe.length;ea++)j=Math.max(g(fe[ea],N,R,j),j);else x.z=N,x.zlevel=R,j=Math.max(x.z2,j);if(ne&&(ne.z=N,ne.zlevel=R,isFinite(j)&&(ne.z2=j+2)),se){var ta=x.textGuideLineConfig;se.z=N,se.zlevel=R,isFinite(j)&&(se.z2=j+(ta&&ta.showAbove?1:-1))}return j}function y(x,N){N.eachRendered(function(R){if(!isElementRemoved(R)){var j=R.getTextContent(),ne=R.getTextGuideLine();R.stateTransition&&(R.stateTransition=null),j&&j.stateTransition&&(j.stateTransition=null),ne&&ne.stateTransition&&(ne.stateTransition=null),R.hasState()?(R.prevStates=R.currentStates,R.clearStates()):R.prevStates&&(R.prevStates=null)}})}function $(x,N){var R=x.getModel("stateAnimation"),j=x.isAnimationEnabled(),ne=R.get("duration"),se=ne>0?{duration:ne,delay:R.get("delay"),easing:R.get("easing")}:null;N.eachRendered(function(ce){if(ce.states&&ce.states.emphasis){if(isElementRemoved(ce))return;if(ce instanceof Path&&savePathStates(ce),ce.__dirty){var fe=ce.prevStates;fe&&ce.useStates(fe)}if(j){ce.stateTransition=se;var ea=ce.getTextContent(),ta=ce.getTextGuideLine();ea&&(ea.stateTransition=se),ta&&(ta.stateTransition=se)}ce.__dirty&&c(ce)}})}createExtensionAPI=function(x){return new(function(N){__extends(R,N);function R(){return N!==null&&N.apply(this,arguments)||this}return R.prototype.getCoordinateSystems=function(){return x._coordSysMgr.getCoordinateSystems()},R.prototype.getComponentByElement=function(j){for(;j;){var ne=j.__ecComponentInfo;if(ne!=null)return x._model.getComponent(ne.mainType,ne.index);j=j.parent}},R.prototype.enterEmphasis=function(j,ne){enterEmphasis(j,ne),markStatusToUpdate(x)},R.prototype.leaveEmphasis=function(j,ne){leaveEmphasis(j,ne),markStatusToUpdate(x)},R.prototype.enterBlur=function(j){enterBlur(j),markStatusToUpdate(x)},R.prototype.leaveBlur=function(j){leaveBlur(j),markStatusToUpdate(x)},R.prototype.enterSelect=function(j){enterSelect(j),markStatusToUpdate(x)},R.prototype.leaveSelect=function(j){leaveSelect(j),markStatusToUpdate(x)},R.prototype.getModel=function(){return x.getModel()},R.prototype.getViewOfComponentModel=function(j){return x.getViewOfComponentModel(j)},R.prototype.getViewOfSeriesModel=function(j){return x.getViewOfSeriesModel(j)},R}(ExtensionAPI))(x)},enableConnect=function(x){function N(R,j){for(var ne=0;ne<R.length;ne++){var se=R[ne];se[CONNECT_STATUS_KEY]=j}}each$f(eventActionMap,function(R,j){x._messageCenter.on(j,function(ne){if(connectedGroups[x.group]&&x[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(ne&&ne.escapeConnect)return;var se=x.makeActionFromEvent(ne),ce=[];each$f(instances,function(fe){fe!==x&&fe.group===x.group&&ce.push(fe)}),N(ce,CONNECT_STATUS_PENDING),each$f(ce,function(fe){fe[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&fe.dispatchAction(se)}),N(ce,CONNECT_STATUS_UPDATED)}})})}}(),s}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(a,s,l){var o=this;function c(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];s&&s.apply&&s.apply(this,u),o.off(a,c)}this.on.call(this,a,c,l)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(a){}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(a,s,l){var o=!(l&&l.ssr);if(o){var c=getInstanceByDom(a);if(c)return c}var u=new ECharts(a,s,l);return u.id="ec_"+idBase++,instances[u.id]=u,o&&setAttribute(a,DOM_ATTRIBUTE_KEY,u.id),enableConnect(u),lifecycle.trigger("afterinit",u),u}function getInstanceByDom(a){return instances[getAttribute(a,DOM_ATTRIBUTE_KEY)]}function registerTheme(a,s){themeStorage[a]=s}function registerPreprocessor(a){indexOf(optionPreprocessorFuncs,a)<0&&optionPreprocessorFuncs.push(a)}function registerProcessor(a,s){normalizeRegister(dataProcessorFuncs,a,s,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(a){registerUpdateLifecycle("afterinit",a)}function registerPostUpdate(a){registerUpdateLifecycle("afterupdate",a)}function registerUpdateLifecycle(a,s){lifecycle.on(a,s)}function registerAction(a,s,l){isFunction$2(s)&&(l=s,s="");var o=isObject$5(a)?a.type:[a,a={event:s}][0];a.event=(a.event||o).toLowerCase(),s=a.event,!eventActionMap[s]&&(assert(ACTION_REG.test(o)&&ACTION_REG.test(s)),actions[o]||(actions[o]={action:l,actionInfo:a}),eventActionMap[s]=o)}function registerCoordinateSystem(a,s){CoordinateSystemManager.register(a,s)}function registerLayout(a,s){normalizeRegister(visualFuncs,a,s,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(a,s){normalizeRegister(visualFuncs,a,s,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(a,s,l,o,c){if((isFunction$2(s)||isObject$5(s))&&(l=s,s=o),!(indexOf(registeredTasks,l)>=0)){registeredTasks.push(l);var u=Scheduler.wrapStageHandler(l,c);u.__prio=s,u.__raw=l,a.push(u)}}function registerLoading(a,s){loadingEffects[a]=s}function registerMap$1(a,s,l){var o=getImpl("registerMap");o&&o(a,s,l)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop);registerTheme("light",lightTheme);registerTheme("dark",theme);var extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(a){ComponentModel.registerClass(a)},registerComponentView:function(a){ComponentView.registerClass(a)},registerSeriesModel:function(a){SeriesModel.registerClass(a)},registerChartView:function(a){ChartView.registerClass(a)},registerSubTypeDefaulter:function(a,s){ComponentModel.registerSubTypeDefaulter(a,s)},registerPainter:function(a,s){registerPainter(a,s)}};function use(a){if(isArray$3(a)){each$f(a,function(s){use(s)});return}indexOf(extensions,a)>=0||(extensions.push(a),isFunction$2(a)&&(a={install:a}),a.install(extensionRegisters))}function dataIndexMapValueLength(a){return a==null?0:a.length||1}function defaultKeyGetter(a){return a}var DataDiffer=function(){function a(s,l,o,c,u,d){this._old=s,this._new=l,this._oldKeyGetter=o||defaultKeyGetter,this._newKeyGetter=c||defaultKeyGetter,this.context=u,this._diffModeMultiple=d==="multiple"}return a.prototype.add=function(s){return this._add=s,this},a.prototype.update=function(s){return this._update=s,this},a.prototype.updateManyToOne=function(s){return this._updateManyToOne=s,this},a.prototype.updateOneToMany=function(s){return this._updateOneToMany=s,this},a.prototype.updateManyToMany=function(s){return this._updateManyToMany=s,this},a.prototype.remove=function(s){return this._remove=s,this},a.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},a.prototype._executeOneToOne=function(){var s=this._old,l=this._new,o={},c=new Array(s.length),u=new Array(l.length);this._initIndexMap(s,null,c,"_oldKeyGetter"),this._initIndexMap(l,o,u,"_newKeyGetter");for(var d=0;d<s.length;d++){var f=c[d],g=o[f],y=dataIndexMapValueLength(g);if(y>1){var $=g.shift();g.length===1&&(o[f]=g[0]),this._update&&this._update($,d)}else y===1?(o[f]=null,this._update&&this._update(g,d)):this._remove&&this._remove(d)}this._performRestAdd(u,o)},a.prototype._executeMultiple=function(){var s=this._old,l=this._new,o={},c={},u=[],d=[];this._initIndexMap(s,o,u,"_oldKeyGetter"),this._initIndexMap(l,c,d,"_newKeyGetter");for(var f=0;f<u.length;f++){var g=u[f],y=o[g],$=c[g],x=dataIndexMapValueLength(y),N=dataIndexMapValueLength($);if(x>1&&N===1)this._updateManyToOne&&this._updateManyToOne($,y),c[g]=null;else if(x===1&&N>1)this._updateOneToMany&&this._updateOneToMany($,y),c[g]=null;else if(x===1&&N===1)this._update&&this._update($,y),c[g]=null;else if(x>1&&N>1)this._updateManyToMany&&this._updateManyToMany($,y),c[g]=null;else if(x>1)for(var R=0;R<x;R++)this._remove&&this._remove(y[R]);else this._remove&&this._remove(y)}this._performRestAdd(d,c)},a.prototype._performRestAdd=function(s,l){for(var o=0;o<s.length;o++){var c=s[o],u=l[c],d=dataIndexMapValueLength(u);if(d>1)for(var f=0;f<d;f++)this._add&&this._add(u[f]);else d===1&&this._add&&this._add(u);l[c]=null}},a.prototype._initIndexMap=function(s,l,o,c){for(var u=this._diffModeMultiple,d=0;d<s.length;d++){var f="_ec_"+this[c](s[d],d);if(u||(o[d]=f),!!l){var g=l[f],y=dataIndexMapValueLength(g);y===0?(l[f]=d,u&&o.push(f)):y===1?l[f]=[g,d]:g.push(d)}}},a}(),DimensionUserOuput=function(){function a(s,l){this._encode=s,this._schema=l}return a.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},a.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},a}();function summarizeDimensions(a,s){var l={},o=l.encode={},c=createHashMap(),u=[],d=[],f={};each$f(a.dimensions,function(N){var R=a.getDimensionInfo(N),j=R.coordDim;if(j){var ne=R.coordDimIndex;getOrCreateEncodeArr(o,j)[ne]=N,R.isExtraCoord||(c.set(j,1),mayLabelDimType(R.type)&&(u[0]=N),getOrCreateEncodeArr(f,j)[ne]=a.getDimensionIndex(R.name)),R.defaultTooltip&&d.push(N)}VISUAL_DIMENSIONS.each(function(se,ce){var fe=getOrCreateEncodeArr(o,ce),ea=R.otherDims[ce];ea!=null&&ea!==!1&&(fe[ea]=R.name)})});var g=[],y={};c.each(function(N,R){var j=o[R];y[R]=j[0],g=g.concat(j)}),l.dataDimsOnCoord=g,l.dataDimIndicesOnCoord=map$1(g,function(N){return a.getDimensionInfo(N).storeDimIndex}),l.encodeFirstDimNotExtra=y;var $=o.label;$&&$.length&&(u=$.slice());var x=o.tooltip;return x&&x.length?d=x.slice():d.length||(d=u.slice()),o.defaultedLabel=u,o.defaultedTooltip=d,l.userOutput=new DimensionUserOuput(f,s),l}function getOrCreateEncodeArr(a,s){return a.hasOwnProperty(s)||(a[s]=[]),a[s]}function getDimensionTypeByAxis(a){return a==="category"?"ordinal":a==="time"?"time":"float"}function mayLabelDimType(a){return!(a==="ordinal"||a==="time")}var SeriesDimensionDefine=function(){function a(s){this.otherDims={},s!=null&&extend(this,s)}return a}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function a(s){this.dimensions=s.dimensions,this._dimOmitted=s.dimensionOmitted,this.source=s.source,this._fullDimCount=s.fullDimensionCount,this._updateDimOmitted(s.dimensionOmitted)}return a.prototype.isDimensionOmitted=function(){return this._dimOmitted},a.prototype._updateDimOmitted=function(s){this._dimOmitted=s,s&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},a.prototype.getSourceDimensionIndex=function(s){return retrieve2(this._dimNameMap.get(s),-1)},a.prototype.getSourceDimension=function(s){var l=this.source.dimensionsDefine;if(l)return l[s]},a.prototype.makeStoreSchema=function(){for(var s=this._fullDimCount,l=shouldRetrieveDataByName(this.source),o=!shouldOmitUnusedDimensions(s),c="",u=[],d=0,f=0;d<s;d++){var g=void 0,y=void 0,$=void 0,x=this.dimensions[f];if(x&&x.storeDimIndex===d)g=l?x.name:null,y=x.type,$=x.ordinalMeta,f++;else{var N=this.getSourceDimension(d);N&&(g=l?N.name:null,y=N.type)}u.push({property:g,type:y,ordinalMeta:$}),l&&g!=null&&(!x||!x.isCalculationCoord)&&(c+=o?g.replace(/\`/g,"`1").replace(/\$/g,"`2"):g),c+="$",c+=dimTypeShort[y]||"f",$&&(c+=$.uid),c+="$"}var R=this.source,j=[R.seriesLayoutBy,R.startIndex,c].join("$$");return{dimensions:u,hash:j}},a.prototype.makeOutputDimensionNames=function(){for(var s=[],l=0,o=0;l<this._fullDimCount;l++){var c=void 0,u=this.dimensions[o];if(u&&u.storeDimIndex===l)u.isCalculationCoord||(c=u.name),o++;else{var d=this.getSourceDimension(l);d&&(c=d.name)}s.push(c)}return s},a.prototype.appendCalculationDimension=function(s){this.dimensions.push(s),s.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},a}();function isSeriesDataSchema(a){return a instanceof SeriesDataSchema}function createDimNameMap(a){for(var s=createHashMap(),l=0;l<(a||[]).length;l++){var o=a[l],c=isObject$5(o)?o.name:o;c!=null&&s.get(c)==null&&s.set(c,l)}return s}function ensureSourceDimNameMap(a){var s=inner$h(a);return s.dimNameMap||(s.dimNameMap=createDimNameMap(a.dimensionsDefine))}function shouldOmitUnusedDimensions(a){return a>30}var isObject$3=isObject$5,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function a(s,l){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var o,c=!1;isSeriesDataSchema(s)?(o=s.dimensions,this._dimOmitted=s.isDimensionOmitted(),this._schema=s):(c=!0,o=s),o=o||["x","y"];for(var u={},d=[],f={},g=!1,y={},$=0;$<o.length;$++){var x=o[$],N=isString$2(x)?new SeriesDimensionDefine({name:x}):x instanceof SeriesDimensionDefine?x:new SeriesDimensionDefine(x),R=N.name;N.type=N.type||"float",N.coordDim||(N.coordDim=R,N.coordDimIndex=0);var j=N.otherDims=N.otherDims||{};d.push(R),u[R]=N,y[R]!=null&&(g=!0),N.createInvertedIndices&&(f[R]=[]),j.itemName===0&&(this._nameDimIdx=$),j.itemId===0&&(this._idDimIdx=$),c&&(N.storeDimIndex=$)}if(this.dimensions=d,this._dimInfos=u,this._initGetDimensionInfo(g),this.hostModel=l,this._invertedIndicesMap=f,this._dimOmitted){var ne=this._dimIdxToName=createHashMap();each$f(d,function(se){ne.set(u[se].storeDimIndex,se)})}}return a.prototype.getDimension=function(s){var l=this._recognizeDimIndex(s);if(l==null)return s;if(l=s,!this._dimOmitted)return this.dimensions[l];var o=this._dimIdxToName.get(l);if(o!=null)return o;var c=this._schema.getSourceDimension(l);if(c)return c.name},a.prototype.getDimensionIndex=function(s){var l=this._recognizeDimIndex(s);if(l!=null)return l;if(s==null)return-1;var o=this._getDimInfo(s);return o?o.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(s):-1},a.prototype._recognizeDimIndex=function(s){if(isNumber$2(s)||s!=null&&!isNaN(s)&&!this._getDimInfo(s)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(s)<0))return+s},a.prototype._getStoreDimIndex=function(s){var l=this.getDimensionIndex(s);return l},a.prototype.getDimensionInfo=function(s){return this._getDimInfo(this.getDimension(s))},a.prototype._initGetDimensionInfo=function(s){var l=this._dimInfos;this._getDimInfo=s?function(o){return l.hasOwnProperty(o)?l[o]:void 0}:function(o){return l[o]}},a.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},a.prototype.mapDimension=function(s,l){var o=this._dimSummary;if(l==null)return o.encodeFirstDimNotExtra[s];var c=o.encode[s];return c?c[l]:null},a.prototype.mapDimensionsAll=function(s){var l=this._dimSummary,o=l.encode[s];return(o||[]).slice()},a.prototype.getStore=function(){return this._store},a.prototype.initData=function(s,l,o){var c=this,u;if(s instanceof DataStore&&(u=s),!u){var d=this.dimensions,f=isSourceInstance(s)||isArrayLike(s)?new DefaultDataProvider(s,d.length):s;u=new DataStore;var g=map(d,function(y){return{type:c._dimInfos[y].type,property:y}});u.initData(f,g,o)}this._store=u,this._nameList=(l||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,u.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},a.prototype.appendData=function(s){var l=this._store.appendData(s);this._doInit(l[0],l[1])},a.prototype.appendValues=function(s,l){var o=this._store.appendValues(s,l.length),c=o.start,u=o.end,d=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),l)for(var f=c;f<u;f++){var g=f-c;this._nameList[f]=l[g],d&&makeIdFromName(this,f)}},a.prototype._updateOrdinalMeta=function(){for(var s=this._store,l=this.dimensions,o=0;o<l.length;o++){var c=this._dimInfos[l[o]];c.ordinalMeta&&s.collectOrdinalMeta(c.storeDimIndex,c.ordinalMeta)}},a.prototype._shouldMakeIdFromName=function(){var s=this._store.getProvider();return this._idDimIdx==null&&s.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!s.fillStorage},a.prototype._doInit=function(s,l){if(!(s>=l)){var o=this._store,c=o.getProvider();this._updateOrdinalMeta();var u=this._nameList,d=this._idList,f=c.getSource().sourceFormat,g=f===SOURCE_FORMAT_ORIGINAL;if(g&&!c.pure)for(var y=[],$=s;$<l;$++){var x=c.getItem($,y);if(!this.hasItemOption&&isDataItemOption(x)&&(this.hasItemOption=!0),x){var N=x.name;u[$]==null&&N!=null&&(u[$]=convertOptionIdName(N,null));var R=x.id;d[$]==null&&R!=null&&(d[$]=convertOptionIdName(R,null))}}if(this._shouldMakeIdFromName())for(var $=s;$<l;$++)makeIdFromName(this,$);prepareInvertedIndex(this)}},a.prototype.getApproximateExtent=function(s){return this._approximateExtent[s]||this._store.getDataExtent(this._getStoreDimIndex(s))},a.prototype.setApproximateExtent=function(s,l){l=this.getDimension(l),this._approximateExtent[l]=s.slice()},a.prototype.getCalculationInfo=function(s){return this._calculationInfo[s]},a.prototype.setCalculationInfo=function(s,l){isObject$3(s)?extend(this._calculationInfo,s):this._calculationInfo[s]=l},a.prototype.getName=function(s){var l=this.getRawIndex(s),o=this._nameList[l];return o==null&&this._nameDimIdx!=null&&(o=getIdNameFromStore(this,this._nameDimIdx,l)),o==null&&(o=""),o},a.prototype._getCategory=function(s,l){var o=this._store.get(s,l),c=this._store.getOrdinalMeta(s);return c?c.categories[o]:o},a.prototype.getId=function(s){return getId(this,this.getRawIndex(s))},a.prototype.count=function(){return this._store.count()},a.prototype.get=function(s,l){var o=this._store,c=this._dimInfos[s];if(c)return o.get(c.storeDimIndex,l)},a.prototype.getByRawIndex=function(s,l){var o=this._store,c=this._dimInfos[s];if(c)return o.getByRawIndex(c.storeDimIndex,l)},a.prototype.getIndices=function(){return this._store.getIndices()},a.prototype.getDataExtent=function(s){return this._store.getDataExtent(this._getStoreDimIndex(s))},a.prototype.getSum=function(s){return this._store.getSum(this._getStoreDimIndex(s))},a.prototype.getMedian=function(s){return this._store.getMedian(this._getStoreDimIndex(s))},a.prototype.getValues=function(s,l){var o=this,c=this._store;return isArray$3(s)?c.getValues(map(s,function(u){return o._getStoreDimIndex(u)}),l):c.getValues(s)},a.prototype.hasValue=function(s){for(var l=this._dimSummary.dataDimIndicesOnCoord,o=0,c=l.length;o<c;o++)if(isNaN(this._store.get(l[o],s)))return!1;return!0},a.prototype.indexOfName=function(s){for(var l=0,o=this._store.count();l<o;l++)if(this.getName(l)===s)return l;return-1},a.prototype.getRawIndex=function(s){return this._store.getRawIndex(s)},a.prototype.indexOfRawIndex=function(s){return this._store.indexOfRawIndex(s)},a.prototype.rawIndexOf=function(s,l){var o=s&&this._invertedIndicesMap[s],c=o[l];return c==null||isNaN(c)?INDEX_NOT_FOUND:c},a.prototype.indicesOfNearest=function(s,l,o){return this._store.indicesOfNearest(this._getStoreDimIndex(s),l,o)},a.prototype.each=function(s,l,o){isFunction$2(s)&&(o=l,l=s,s=[]);var c=o||this,u=map(normalizeDimensions(s),this._getStoreDimIndex,this);this._store.each(u,c?bind$1(l,c):l)},a.prototype.filterSelf=function(s,l,o){isFunction$2(s)&&(o=l,l=s,s=[]);var c=o||this,u=map(normalizeDimensions(s),this._getStoreDimIndex,this);return this._store=this._store.filter(u,c?bind$1(l,c):l),this},a.prototype.selectRange=function(s){var l=this,o={},c=keys(s);return each$f(c,function(u){var d=l._getStoreDimIndex(u);o[d]=s[u]}),this._store=this._store.selectRange(o),this},a.prototype.mapArray=function(s,l,o){isFunction$2(s)&&(o=l,l=s,s=[]),o=o||this;var c=[];return this.each(s,function(){c.push(l&&l.apply(this,arguments))},o),c},a.prototype.map=function(s,l,o,c){var u=o||c||this,d=map(normalizeDimensions(s),this._getStoreDimIndex,this),f=cloneListForMapAndSample(this);return f._store=this._store.map(d,u?bind$1(l,u):l),f},a.prototype.modify=function(s,l,o,c){var u=o||c||this,d=map(normalizeDimensions(s),this._getStoreDimIndex,this);this._store.modify(d,u?bind$1(l,u):l)},a.prototype.downSample=function(s,l,o,c){var u=cloneListForMapAndSample(this);return u._store=this._store.downSample(this._getStoreDimIndex(s),l,o,c),u},a.prototype.lttbDownSample=function(s,l){var o=cloneListForMapAndSample(this);return o._store=this._store.lttbDownSample(this._getStoreDimIndex(s),l),o},a.prototype.getRawDataItem=function(s){return this._store.getRawDataItem(s)},a.prototype.getItemModel=function(s){var l=this.hostModel,o=this.getRawDataItem(s);return new Model(o,l,l&&l.ecModel)},a.prototype.diff=function(s){var l=this;return new DataDiffer(s?s.getStore().getIndices():[],this.getStore().getIndices(),function(o){return getId(s,o)},function(o){return getId(l,o)})},a.prototype.getVisual=function(s){var l=this._visual;return l&&l[s]},a.prototype.setVisual=function(s,l){this._visual=this._visual||{},isObject$3(s)?extend(this._visual,s):this._visual[s]=l},a.prototype.getItemVisual=function(s,l){var o=this._itemVisuals[s],c=o&&o[l];return c??this.getVisual(l)},a.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},a.prototype.ensureUniqueItemVisual=function(s,l){var o=this._itemVisuals,c=o[s];c||(c=o[s]={});var u=c[l];return u==null&&(u=this.getVisual(l),isArray$3(u)?u=u.slice():isObject$3(u)&&(u=extend({},u)),c[l]=u),u},a.prototype.setItemVisual=function(s,l,o){var c=this._itemVisuals[s]||{};this._itemVisuals[s]=c,isObject$3(l)?extend(c,l):c[l]=o},a.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},a.prototype.setLayout=function(s,l){isObject$3(s)?extend(this._layout,s):this._layout[s]=l},a.prototype.getLayout=function(s){return this._layout[s]},a.prototype.getItemLayout=function(s){return this._itemLayouts[s]},a.prototype.setItemLayout=function(s,l,o){this._itemLayouts[s]=o?extend(this._itemLayouts[s]||{},l):l},a.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},a.prototype.setItemGraphicEl=function(s,l){var o=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(o,this.dataType,s,l),this._graphicEls[s]=l},a.prototype.getItemGraphicEl=function(s){return this._graphicEls[s]},a.prototype.eachItemGraphicEl=function(s,l){each$f(this._graphicEls,function(o,c){o&&s&&s.call(l,o,c)})},a.prototype.cloneShallow=function(s){return s||(s=new a(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(s,this),s._store=this._store,s},a.prototype.wrapMethod=function(s,l){var o=this[s];isFunction$2(o)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(s),this[s]=function(){var c=o.apply(this,arguments);return l.apply(this,[c].concat(slice(arguments)))})},a.internalField=function(){prepareInvertedIndex=function(s){var l=s._invertedIndicesMap;each$f(l,function(o,c){var u=s._dimInfos[c],d=u.ordinalMeta,f=s._store;if(d){o=l[c]=new CtorInt32Array(d.categories.length);for(var g=0;g<o.length;g++)o[g]=INDEX_NOT_FOUND;for(var g=0;g<f.count();g++)o[f.get(u.storeDimIndex,g)]=g}})},getIdNameFromStore=function(s,l,o){return convertOptionIdName(s._getCategory(l,o),null)},getId=function(s,l){var o=s._idList[l];return o==null&&s._idDimIdx!=null&&(o=getIdNameFromStore(s,s._idDimIdx,l)),o==null&&(o=ID_PREFIX+l),o},normalizeDimensions=function(s){return isArray$3(s)||(s=s!=null?[s]:[]),s},cloneListForMapAndSample=function(s){var l=new a(s._schema?s._schema:map(s.dimensions,s._getDimInfo,s),s.hostModel);return transferProperties(l,s),l},transferProperties=function(s,l){each$f(TRANSFERABLE_PROPERTIES.concat(l.__wrappedMethods||[]),function(o){l.hasOwnProperty(o)&&(s[o]=l[o])}),s.__wrappedMethods=l.__wrappedMethods,each$f(CLONE_PROPERTIES,function(o){s[o]=clone$4(l[o])}),s._calculationInfo=extend({},l._calculationInfo)},makeIdFromName=function(s,l){var o=s._nameList,c=s._idList,u=s._nameDimIdx,d=s._idDimIdx,f=o[l],g=c[l];if(f==null&&u!=null&&(o[l]=f=getIdNameFromStore(s,u,l)),g==null&&d!=null&&(c[l]=g=getIdNameFromStore(s,d,l)),g==null&&f!=null){var y=s._nameRepeatCount,$=y[f]=(y[f]||0)+1;g=f,$>1&&(g+="__ec__"+$),c[l]=g}}}(),a}();function prepareSeriesDataSchema(a,s){isSourceInstance(a)||(a=createSourceFromSeriesDataOption(a)),s=s||{};var l=s.coordDimensions||[],o=s.dimensionsDefine||a.dimensionsDefine||[],c=createHashMap(),u=[],d=getDimCount(a,l,o,s.dimensionsCount),f=s.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(d),g=o===a.dimensionsDefine,y=g?ensureSourceDimNameMap(a):createDimNameMap(o),$=s.encodeDefine;!$&&s.encodeDefaulter&&($=s.encodeDefaulter(a,d));for(var x=createHashMap($),N=new CtorInt32Array$1(d),R=0;R<N.length;R++)N[R]=-1;function j(ra){var la=N[ra];if(la<0){var oa=o[ra],ca=isObject$5(oa)?oa:{name:oa},pa=new SeriesDimensionDefine,ua=ca.name;ua!=null&&y.get(ua)!=null&&(pa.name=pa.displayName=ua),ca.type!=null&&(pa.type=ca.type),ca.displayName!=null&&(pa.displayName=ca.displayName);var da=u.length;return N[ra]=da,pa.storeDimIndex=ra,u.push(pa),pa}return u[la]}if(!f)for(var R=0;R<d;R++)j(R);x.each(function(ra,la){var oa=normalizeToArray(ra).slice();if(oa.length===1&&!isString$2(oa[0])&&oa[0]<0){x.set(la,!1);return}var ca=x.set(la,[]);each$f(oa,function(pa,ua){var da=isString$2(pa)?y.get(pa):pa;da!=null&&da<d&&(ca[ua]=da,se(j(da),la,ua))})});var ne=0;each$f(l,function(ra){var la,oa,ca,pa;if(isString$2(ra))la=ra,pa={};else{pa=ra,la=pa.name;var ua=pa.ordinalMeta;pa.ordinalMeta=null,pa=extend({},pa),pa.ordinalMeta=ua,oa=pa.dimsDef,ca=pa.otherDims,pa.name=pa.coordDim=pa.coordDimIndex=pa.dimsDef=pa.otherDims=null}var da=x.get(la);if(da!==!1){if(da=normalizeToArray(da),!da.length)for(var ha=0;ha<(oa&&oa.length||1);ha++){for(;ne<d&&j(ne).coordDim!=null;)ne++;ne<d&&da.push(ne++)}each$f(da,function(ga,fa){var ma=j(ga);if(g&&pa.type!=null&&(ma.type=pa.type),se(defaults(ma,pa),la,fa),ma.name==null&&oa){var va=oa[fa];!isObject$5(va)&&(va={name:va}),ma.name=ma.displayName=va.name,ma.defaultTooltip=va.defaultTooltip}ca&&defaults(ma.otherDims,ca)})}});function se(ra,la,oa){VISUAL_DIMENSIONS.get(la)!=null?ra.otherDims[la]=oa:(ra.coordDim=la,ra.coordDimIndex=oa,c.set(la,!0))}var ce=s.generateCoord,fe=s.generateCoordCount,ea=fe!=null;fe=ce?fe||1:0;var ta=ce||"value";function na(ra){ra.name==null&&(ra.name=ra.coordDim)}if(f)each$f(u,function(ra){na(ra)}),u.sort(function(ra,la){return ra.storeDimIndex-la.storeDimIndex});else for(var aa=0;aa<d;aa++){var ia=j(aa),sa=ia.coordDim;sa==null&&(ia.coordDim=genCoordDimName(ta,c,ea),ia.coordDimIndex=0,(!ce||fe<=0)&&(ia.isExtraCoord=!0),fe--),na(ia),ia.type==null&&(guessOrdinal(a,aa)===BE_ORDINAL.Must||ia.isExtraCoord&&(ia.otherDims.itemName!=null||ia.otherDims.seriesName!=null))&&(ia.type="ordinal")}return removeDuplication(u),new SeriesDataSchema({source:a,dimensions:u,fullDimensionCount:d,dimensionOmitted:f})}function removeDuplication(a){for(var s=createHashMap(),l=0;l<a.length;l++){var o=a[l],c=o.name,u=s.get(c)||0;u>0&&(o.name=c+(u-1)),u++,s.set(c,u)}}function getDimCount(a,s,l,o){var c=Math.max(a.dimensionsDetectedCount||1,s.length,l.length,o||0);return each$f(s,function(u){var d;isObject$5(u)&&(d=u.dimsDef)&&(c=Math.max(c,d.length))}),c}function genCoordDimName(a,s,l){if(l||s.hasKey(a)){for(var o=0;s.hasKey(a+o);)o++;a+=o}return s.set(a,!0),a}var CoordSysInfo=function(){function a(s){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=s}return a}();function getCoordSysInfoBySeries(a){var s=a.get("coordinateSystem"),l=new CoordSysInfo(s),o=fetchers[s];if(o)return o(a,l,l.axisMap,l.categoryAxisMap),l}var fetchers={cartesian2d:function(a,s,l,o){var c=a.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],u=a.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];s.coordSysDims=["x","y"],l.set("x",c),l.set("y",u),isCategory(c)&&(o.set("x",c),s.firstCategoryDimIndex=0),isCategory(u)&&(o.set("y",u),s.firstCategoryDimIndex==null&&(s.firstCategoryDimIndex=1))},singleAxis:function(a,s,l,o){var c=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordSysDims=["single"],l.set("single",c),isCategory(c)&&(o.set("single",c),s.firstCategoryDimIndex=0)},polar:function(a,s,l,o){var c=a.getReferringComponents("polar",SINGLE_REFERRING).models[0],u=c.findAxisModel("radiusAxis"),d=c.findAxisModel("angleAxis");s.coordSysDims=["radius","angle"],l.set("radius",u),l.set("angle",d),isCategory(u)&&(o.set("radius",u),s.firstCategoryDimIndex=0),isCategory(d)&&(o.set("angle",d),s.firstCategoryDimIndex==null&&(s.firstCategoryDimIndex=1))},geo:function(a,s,l,o){s.coordSysDims=["lng","lat"]},parallel:function(a,s,l,o){var c=a.ecModel,u=c.getComponent("parallel",a.get("parallelIndex")),d=s.coordSysDims=u.dimensions.slice();each$f(u.parallelAxisIndex,function(f,g){var y=c.getComponent("parallelAxis",f),$=d[g];l.set($,y),isCategory(y)&&(o.set($,y),s.firstCategoryDimIndex==null&&(s.firstCategoryDimIndex=g))})}};function isCategory(a){return a.get("type")==="category"}function enableDataStack(a,s,l){l=l||{};var o=l.byIndex,c=l.stackedCoordDimension,u,d,f;isLegacyDimensionsInput(s)?u=s:(d=s.schema,u=d.dimensions,f=s.store);var g=!!(a&&a.get("stack")),y,$,x,N;if(each$f(u,function(fe,ea){isString$2(fe)&&(u[ea]=fe={name:fe}),g&&!fe.isExtraCoord&&(!o&&!y&&fe.ordinalMeta&&(y=fe),!$&&fe.type!=="ordinal"&&fe.type!=="time"&&(!c||c===fe.coordDim)&&($=fe))}),$&&!o&&!y&&(o=!0),$){x="__\0ecstackresult_"+a.id,N="__\0ecstackedover_"+a.id,y&&(y.createInvertedIndices=!0);var R=$.coordDim,j=$.type,ne=0;each$f(u,function(fe){fe.coordDim===R&&ne++});var se={name:x,coordDim:R,coordDimIndex:ne,type:j,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length},ce={name:N,coordDim:N,coordDimIndex:ne+1,type:j,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:u.length+1};d?(f&&(se.storeDimIndex=f.ensureCalculationDimension(N,j),ce.storeDimIndex=f.ensureCalculationDimension(x,j)),d.appendCalculationDimension(se),d.appendCalculationDimension(ce)):(u.push(se),u.push(ce))}return{stackedDimension:$&&$.name,stackedByDimension:y&&y.name,isStackedByIndex:o,stackedOverDimension:N,stackResultDimension:x}}function isLegacyDimensionsInput(a){return!isSeriesDataSchema(a.schema)}function isDimensionStacked(a,s){return!!s&&s===a.getCalculationInfo("stackedDimension")}function getStackedDimension(a,s){return isDimensionStacked(a,s)?a.getCalculationInfo("stackResultDimension"):s}function getCoordSysDimDefs(a,s){var l=a.get("coordinateSystem"),o=CoordinateSystemManager.get(l),c;return s&&s.coordSysDims&&(c=map$1(s.coordSysDims,function(u){var d={name:u},f=s.axisMap.get(u);if(f){var g=f.get("type");d.type=getDimensionTypeByAxis(g)}return d})),c||(c=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),c}function injectOrdinalMeta(a,s,l){var o,c;return l&&each$f(a,function(u,d){var f=u.coordDim,g=l.categoryAxisMap.get(f);g&&(o==null&&(o=d),u.ordinalMeta=g.getOrdinalMeta(),s&&(u.createInvertedIndices=!0)),u.otherDims.itemName!=null&&(c=!0)}),!c&&o!=null&&(a[o].otherDims.itemName=0),o}function createSeriesData(a,s,l){l=l||{};var o=s.getSourceManager(),c,u=!1;a?(u=!0,c=createSourceFromSeriesDataOption(a)):(c=o.getSource(),u=c.sourceFormat===SOURCE_FORMAT_ORIGINAL);var d=getCoordSysInfoBySeries(s),f=getCoordSysDimDefs(s,d),g=l.useEncodeDefaulter,y=isFunction$2(g)?g:g?curry$1(makeSeriesEncodeForAxisCoordSys,f,s):null,$={coordDimensions:f,generateCoord:l.generateCoord,encodeDefine:s.getEncode(),encodeDefaulter:y,canOmitUnusedDimensions:!u},x=prepareSeriesDataSchema(c,$),N=injectOrdinalMeta(x.dimensions,l.createInvertedIndices,d),R=u?null:o.getSharedDataStore(x),j=enableDataStack(s,{schema:x,store:R}),ne=new SeriesData(x,s);ne.setCalculationInfo(j);var se=N!=null&&isNeedCompleteOrdinalData(c)?function(ce,fe,ea,ta){return ta===N?ea:this.defaultDimValueGetter(ce,fe,ea,ta)}:null;return ne.hasItemOption=!1,ne.initData(u?c:R,null,se),ne}function isNeedCompleteOrdinalData(a){if(a.sourceFormat===SOURCE_FORMAT_ORIGINAL){var s=firstDataNotNull(a.data||[]);return!isArray$3(getDataItemValue(s))}}function firstDataNotNull(a){for(var s=0;s<a.length&&a[s]==null;)s++;return a[s]}var Scale=function(){function a(s){this._setting=s||{},this._extent=[1/0,-1/0]}return a.prototype.getSetting=function(s){return this._setting[s]},a.prototype.unionExtent=function(s){var l=this._extent;s[0]<l[0]&&(l[0]=s[0]),s[1]>l[1]&&(l[1]=s[1])},a.prototype.unionExtentFromData=function(s,l){this.unionExtent(s.getApproximateExtent(l))},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.setExtent=function(s,l){var o=this._extent;isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l)},a.prototype.isInExtentRange=function(s){return this._extent[0]<=s&&this._extent[1]>=s},a.prototype.isBlank=function(){return this._isBlank},a.prototype.setBlank=function(s){this._isBlank=s},a}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function a(s){this.categories=s.categories||[],this._needCollect=s.needCollect,this._deduplication=s.deduplication,this.uid=++uidBase}return a.createByAxisModel=function(s){var l=s.option,o=l.data,c=o&&map$1(o,getName);return new a({categories:c,needCollect:!c,deduplication:l.dedplication!==!1})},a.prototype.getOrdinal=function(s){return this._getOrCreateMap().get(s)},a.prototype.parseAndCollect=function(s){var l,o=this._needCollect;if(!isString$2(s)&&!o)return s;if(o&&!this._deduplication)return l=this.categories.length,this.categories[l]=s,l;var c=this._getOrCreateMap();return l=c.get(s),l==null&&(o?(l=this.categories.length,this.categories[l]=s,c.set(s,l)):l=NaN),l},a.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},a}();function getName(a){return isObject$5(a)&&a.value!=null?a.value:a+""}function isIntervalOrLogScale(a){return a.type==="interval"||a.type==="log"}function intervalScaleNiceTicks(a,s,l,o){var c={},u=a[1]-a[0],d=c.interval=nice(u/s);l!=null&&d<l&&(d=c.interval=l),o!=null&&d>o&&(d=c.interval=o);var f=c.intervalPrecision=getIntervalPrecision(d),g=c.niceTickExtent=[round$4(Math.ceil(a[0]/d)*d,f),round$4(Math.floor(a[1]/d)*d,f)];return fixExtent(g,a),c}function increaseInterval(a){var s=Math.pow(10,quantityExponent(a)),l=a/s;return l?l===2?l=3:l===3?l=5:l*=2:l=1,round$4(l*s)}function getIntervalPrecision(a){return getPrecision(a)+2}function clamp(a,s,l){a[s]=Math.max(Math.min(a[s],l[1]),l[0])}function fixExtent(a,s){!isFinite(a[0])&&(a[0]=s[0]),!isFinite(a[1])&&(a[1]=s[1]),clamp(a,0,s),clamp(a,1,s),a[0]>a[1]&&(a[0]=a[1])}function contain$1(a,s){return a>=s[0]&&a<=s[1]}function normalize$2(a,s){return s[1]===s[0]?.5:(a-s[0])/(s[1]-s[0])}function scale(a,s){return a*(s[1]-s[0])+s[0]}var OrdinalScale=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;o.type="ordinal";var c=o.getSetting("ordinalMeta");return c||(c=new OrdinalMeta({})),isArray$3(c)&&(c=new OrdinalMeta({categories:map$1(c,function(u){return isObject$5(u)?u.value:u})})),o._ordinalMeta=c,o._extent=o.getSetting("extent")||[0,c.categories.length-1],o}return s.prototype.parse=function(l){return l==null?NaN:isString$2(l)?this._ordinalMeta.getOrdinal(l):Math.round(l)},s.prototype.contain=function(l){return l=this.parse(l),contain$1(l,this._extent)&&this._ordinalMeta.categories[l]!=null},s.prototype.normalize=function(l){return l=this._getTickNumber(this.parse(l)),normalize$2(l,this._extent)},s.prototype.scale=function(l){return l=Math.round(scale(l,this._extent)),this.getRawOrdinalNumber(l)},s.prototype.getTicks=function(){for(var l=[],o=this._extent,c=o[0];c<=o[1];)l.push({value:c}),c++;return l},s.prototype.getMinorTicks=function(l){},s.prototype.setSortInfo=function(l){if(l==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var o=l.ordinalNumbers,c=this._ordinalNumbersByTick=[],u=this._ticksByOrdinalNumber=[],d=0,f=this._ordinalMeta.categories.length,g=Math.min(f,o.length);d<g;++d){var y=o[d];c[d]=y,u[y]=d}for(var $=0;d<f;++d){for(;u[$]!=null;)$++;c.push($),u[$]=d}},s.prototype._getTickNumber=function(l){var o=this._ticksByOrdinalNumber;return o&&l>=0&&l<o.length?o[l]:l},s.prototype.getRawOrdinalNumber=function(l){var o=this._ordinalNumbersByTick;return o&&l>=0&&l<o.length?o[l]:l},s.prototype.getLabel=function(l){if(!this.isBlank()){var o=this.getRawOrdinalNumber(l.value),c=this._ordinalMeta.categories[o];return c==null?"":c+""}},s.prototype.count=function(){return this._extent[1]-this._extent[0]+1},s.prototype.unionExtentFromData=function(l,o){this.unionExtent(l.getApproximateExtent(o))},s.prototype.isInExtentRange=function(l){return l=this._getTickNumber(l),this._extent[0]<=l&&this._extent[1]>=l},s.prototype.getOrdinalMeta=function(){return this._ordinalMeta},s.prototype.calcNiceTicks=function(){},s.prototype.calcNiceExtent=function(){},s.type="ordinal",s}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$4,IntervalScale=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="interval",l._interval=0,l._intervalPrecision=2,l}return s.prototype.parse=function(l){return l},s.prototype.contain=function(l){return contain$1(l,this._extent)},s.prototype.normalize=function(l){return normalize$2(l,this._extent)},s.prototype.scale=function(l){return scale(l,this._extent)},s.prototype.setExtent=function(l,o){var c=this._extent;isNaN(l)||(c[0]=parseFloat(l)),isNaN(o)||(c[1]=parseFloat(o))},s.prototype.unionExtent=function(l){var o=this._extent;l[0]<o[0]&&(o[0]=l[0]),l[1]>o[1]&&(o[1]=l[1]),this.setExtent(o[0],o[1])},s.prototype.getInterval=function(){return this._interval},s.prototype.setInterval=function(l){this._interval=l,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(l)},s.prototype.getTicks=function(l){var o=this._interval,c=this._extent,u=this._niceExtent,d=this._intervalPrecision,f=[];if(!o)return f;var g=1e4;c[0]<u[0]&&(l?f.push({value:roundNumber(u[0]-o,d)}):f.push({value:c[0]}));for(var y=u[0];y<=u[1]&&(f.push({value:y}),y=roundNumber(y+o,d),y!==f[f.length-1].value);)if(f.length>g)return[];var $=f.length?f[f.length-1].value:u[1];return c[1]>$&&(l?f.push({value:roundNumber($+o,d)}):f.push({value:c[1]})),f},s.prototype.getMinorTicks=function(l){for(var o=this.getTicks(!0),c=[],u=this.getExtent(),d=1;d<o.length;d++){for(var f=o[d],g=o[d-1],y=0,$=[],x=f.value-g.value,N=x/l;y<l-1;){var R=roundNumber(g.value+(y+1)*N);R>u[0]&&R<u[1]&&$.push(R),y++}c.push($)}return c},s.prototype.getLabel=function(l,o){if(l==null)return"";var c=o&&o.precision;c==null?c=getPrecision(l.value)||0:c==="auto"&&(c=this._intervalPrecision);var u=roundNumber(l.value,c,!0);return addCommas(u)},s.prototype.calcNiceTicks=function(l,o,c){l=l||5;var u=this._extent,d=u[1]-u[0];if(isFinite(d)){d<0&&(d=-d,u.reverse());var f=intervalScaleNiceTicks(u,l,o,c);this._intervalPrecision=f.intervalPrecision,this._interval=f.interval,this._niceExtent=f.niceTickExtent}},s.prototype.calcNiceExtent=function(l){var o=this._extent;if(o[0]===o[1])if(o[0]!==0){var c=Math.abs(o[0]);l.fixMax||(o[1]+=c/2),o[0]-=c/2}else o[1]=1;var u=o[1]-o[0];isFinite(u)||(o[0]=0,o[1]=1),this.calcNiceTicks(l.splitNumber,l.minInterval,l.maxInterval);var d=this._interval;l.fixMin||(o[0]=roundNumber(Math.floor(o[0]/d)*d)),l.fixMax||(o[1]=roundNumber(Math.ceil(o[1]/d)*d))},s.prototype.setNiceExtent=function(l,o){this._niceExtent=[l,o]},s.type="interval",s}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(a){return isArray$3(a)?supportFloat32Array?new Float32Array(a):a:new Float32ArrayCtor(a)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(a){return a.get("stack")||STACK_PREFIX+a.seriesIndex}function getAxisKey$1(a){return a.dim+a.index}function getLayoutOnAxis(a){var s=[],l=a.axis,o="axis0";if(l.type==="category"){for(var c=l.getBandWidth(),u=0;u<a.count;u++)s.push(defaults({bandWidth:c,axisKey:o,stackId:STACK_PREFIX+u},a));for(var d=doCalBarWidthAndOffset(s),f=[],u=0;u<a.count;u++){var g=d[o][STACK_PREFIX+u];g.offsetCenter=g.offset+g.width/2,f.push(g)}return f}}function prepareLayoutBarSeries(a,s){var l=[];return s.eachSeriesByType(a,function(o){isOnCartesian(o)&&l.push(o)}),l}function getValueAxesMinGaps(a){var s={};each$f(a,function(g){var y=g.coordinateSystem,$=y.getBaseAxis();if(!($.type!=="time"&&$.type!=="value"))for(var x=g.getData(),N=$.dim+"_"+$.index,R=x.getDimensionIndex(x.mapDimension($.dim)),j=x.getStore(),ne=0,se=j.count();ne<se;++ne){var ce=j.get(R,ne);s[N]?s[N].push(ce):s[N]=[ce]}});var l={};for(var o in s)if(s.hasOwnProperty(o)){var c=s[o];if(c){c.sort(function(g,y){return g-y});for(var u=null,d=1;d<c.length;++d){var f=c[d]-c[d-1];f>0&&(u=u===null?f:Math.min(u,f))}l[o]=u}}return l}function makeColumnLayout(a){var s=getValueAxesMinGaps(a),l=[];return each$f(a,function(o){var c=o.coordinateSystem,u=c.getBaseAxis(),d=u.getExtent(),f;if(u.type==="category")f=u.getBandWidth();else if(u.type==="value"||u.type==="time"){var g=u.dim+"_"+u.index,y=s[g],$=Math.abs(d[1]-d[0]),x=u.scale.getExtent(),N=Math.abs(x[1]-x[0]);f=y?$/N*y:$}else{var R=o.getData();f=Math.abs(d[1]-d[0])/R.count()}var j=parsePercent(o.get("barWidth"),f),ne=parsePercent(o.get("barMaxWidth"),f),se=parsePercent(o.get("barMinWidth")||(isInLargeMode(o)?.5:1),f),ce=o.get("barGap"),fe=o.get("barCategoryGap");l.push({bandWidth:f,barWidth:j,barMaxWidth:ne,barMinWidth:se,barGap:ce,barCategoryGap:fe,axisKey:getAxisKey$1(u),stackId:getSeriesStackId$1(o)})}),doCalBarWidthAndOffset(l)}function doCalBarWidthAndOffset(a){var s={};each$f(a,function(o,c){var u=o.axisKey,d=o.bandWidth,f=s[u]||{bandWidth:d,remainedWidth:d,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},g=f.stacks;s[u]=f;var y=o.stackId;g[y]||f.autoWidthCount++,g[y]=g[y]||{width:0,maxWidth:0};var $=o.barWidth;$&&!g[y].width&&(g[y].width=$,$=Math.min(f.remainedWidth,$),f.remainedWidth-=$);var x=o.barMaxWidth;x&&(g[y].maxWidth=x);var N=o.barMinWidth;N&&(g[y].minWidth=N);var R=o.barGap;R!=null&&(f.gap=R);var j=o.barCategoryGap;j!=null&&(f.categoryGap=j)});var l={};return each$f(s,function(o,c){l[c]={};var u=o.stacks,d=o.bandWidth,f=o.categoryGap;if(f==null){var g=keys(u).length;f=Math.max(35-g*4,15)+"%"}var y=parsePercent(f,d),$=parsePercent(o.gap,1),x=o.remainedWidth,N=o.autoWidthCount,R=(x-y)/(N+(N-1)*$);R=Math.max(R,0),each$f(u,function(ce){var fe=ce.maxWidth,ea=ce.minWidth;if(ce.width){var ta=ce.width;fe&&(ta=Math.min(ta,fe)),ea&&(ta=Math.max(ta,ea)),ce.width=ta,x-=ta+$*ta,N--}else{var ta=R;fe&&fe<ta&&(ta=Math.min(fe,x)),ea&&ea>ta&&(ta=ea),ta!==R&&(ce.width=ta,x-=ta+$*ta,N--)}}),R=(x-y)/(N+(N-1)*$),R=Math.max(R,0);var j=0,ne;each$f(u,function(ce,fe){ce.width||(ce.width=R),ne=ce,j+=ce.width*(1+$)}),ne&&(j-=ne.width*$);var se=-j/2;each$f(u,function(ce,fe){l[c][fe]=l[c][fe]||{bandWidth:d,offset:se,width:ce.width},se+=ce.width*(1+$)})}),l}function retrieveColumnLayout(a,s,l){if(a&&s){var o=a[getAxisKey$1(s)];return o!=null&&l!=null?o[getSeriesStackId$1(l)]:o}}function layout$3(a,s){var l=prepareLayoutBarSeries(a,s),o=makeColumnLayout(l);each$f(l,function(c){var u=c.getData(),d=c.coordinateSystem,f=d.getBaseAxis(),g=getSeriesStackId$1(c),y=o[getAxisKey$1(f)][g],$=y.offset,x=y.width;u.setLayout({bandWidth:y.bandWidth,offset:$,size:x})})}function createProgressiveLayout(a){return{seriesType:a,plan:createRenderPlanner(),reset:function(s){if(isOnCartesian(s)){var l=s.getData(),o=s.coordinateSystem,c=o.getBaseAxis(),u=o.getOtherAxis(c),d=l.getDimensionIndex(l.mapDimension(u.dim)),f=l.getDimensionIndex(l.mapDimension(c.dim)),g=s.get("showBackground",!0),y=l.mapDimension(u.dim),$=l.getCalculationInfo("stackResultDimension"),x=isDimensionStacked(l,y)&&!!l.getCalculationInfo("stackedOnSeries"),N=u.isHorizontal(),R=getValueAxisStart(c,u),j=isInLargeMode(s),ne=s.get("barMinHeight")||0,se=$&&l.getDimensionIndex($),ce=l.getLayout("size"),fe=l.getLayout("offset");return{progress:function(ea,ta){for(var na=ea.count,aa=j&&createFloat32Array(na*3),ia=j&&g&&createFloat32Array(na*3),sa=j&&createFloat32Array(na),ra=o.master.getRect(),la=N?ra.width:ra.height,oa,ca=ta.getStore(),pa=0;(oa=ea.next())!=null;){var ua=ca.get(x?se:d,oa),da=ca.get(f,oa),ha=R,ga=void 0;x&&(ga=+ua-ca.get(d,oa));var fa=void 0,ma=void 0,va=void 0,ka=void 0;if(N){var ya=o.dataToPoint([ua,da]);if(x){var ba=o.dataToPoint([ga,da]);ha=ba[0]}fa=ha,ma=ya[1]+fe,va=ya[0]-ha,ka=ce,Math.abs(va)<ne&&(va=(va<0?-1:1)*ne)}else{var ya=o.dataToPoint([da,ua]);if(x){var ba=o.dataToPoint([da,ga]);ha=ba[1]}fa=ya[0]+fe,ma=ha,va=ce,ka=ya[1]-ha,Math.abs(ka)<ne&&(ka=(ka<=0?-1:1)*ne)}j?(aa[pa]=fa,aa[pa+1]=ma,aa[pa+2]=N?va:ka,ia&&(ia[pa]=N?ra.x:fa,ia[pa+1]=N?ma:ra.y,ia[pa+2]=la),sa[oa]=oa):ta.setItemLayout(oa,{x:fa,y:ma,width:va,height:ka}),pa+=3}j&&ta.setLayout({largePoints:aa,largeDataIndices:sa,largeBackgroundPoints:ia,valueAxisHorizontal:N})}}}}}}function isOnCartesian(a){return a.coordinateSystem&&a.coordinateSystem.type==="cartesian2d"}function isInLargeMode(a){return a.pipelineContext&&a.pipelineContext.large}function getValueAxisStart(a,s){var l=s.model.get("startValue");return l||(l=0),s.toGlobalCoord(s.dataToCoord(s.type==="log"?l>0?l:1:l))}var bisect=function(a,s,l,o){for(;l<o;){var c=l+o>>>1;a[c][1]<s?l=c+1:o=c}return l},TimeScale=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="time",o}return s.prototype.getLabel=function(l){var o=this.getSetting("useUTC");return format(l.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,o,this.getSetting("locale"))},s.prototype.getFormattedLabel=function(l,o,c){var u=this.getSetting("useUTC"),d=this.getSetting("locale");return leveledFormat(l,o,c,d,u)},s.prototype.getTicks=function(){var l=this._interval,o=this._extent,c=[];if(!l)return c;c.push({value:o[0],level:0});var u=this.getSetting("useUTC"),d=getIntervalTicks(this._minLevelUnit,this._approxInterval,u,o);return c=c.concat(d),c.push({value:o[1],level:0}),c},s.prototype.calcNiceExtent=function(l){var o=this._extent;if(o[0]===o[1]&&(o[0]-=ONE_DAY,o[1]+=ONE_DAY),o[1]===-1/0&&o[0]===1/0){var c=new Date;o[1]=+new Date(c.getFullYear(),c.getMonth(),c.getDate()),o[0]=o[1]-ONE_DAY}this.calcNiceTicks(l.splitNumber,l.minInterval,l.maxInterval)},s.prototype.calcNiceTicks=function(l,o,c){l=l||10;var u=this._extent,d=u[1]-u[0];this._approxInterval=d/l,o!=null&&this._approxInterval<o&&(this._approxInterval=o),c!=null&&this._approxInterval>c&&(this._approxInterval=c);var f=scaleIntervals.length,g=Math.min(bisect(scaleIntervals,this._approxInterval,0,f),f-1);this._interval=scaleIntervals[g][1],this._minLevelUnit=scaleIntervals[Math.max(g-1,0)][0]},s.prototype.parse=function(l){return isNumber$2(l)?l:+parseDate(l)},s.prototype.contain=function(l){return contain$1(this.parse(l),this._extent)},s.prototype.normalize=function(l){return normalize$2(this.parse(l),this._extent)},s.prototype.scale=function(l){return scale(l,this._extent)},s.type="time",s}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(a,s,l,o){var c=parseDate(s),u=parseDate(l),d=function(j){return getUnitValue(c,j,o)===getUnitValue(u,j,o)},f=function(){return d("year")},g=function(){return f()&&d("month")},y=function(){return g()&&d("day")},$=function(){return y()&&d("hour")},x=function(){return $()&&d("minute")},N=function(){return x()&&d("second")},R=function(){return N()&&d("millisecond")};switch(a){case"year":return f();case"month":return g();case"day":return y();case"hour":return $();case"minute":return x();case"second":return N();case"millisecond":return R()}}function getDateInterval(a,s){return a/=ONE_DAY,a>16?16:a>7.5?7:a>3.5?4:a>1.5?2:1}function getMonthInterval(a){var s=30*ONE_DAY;return a/=s,a>6?6:a>3?3:a>2?2:1}function getHourInterval(a){return a/=ONE_HOUR,a>12?12:a>6?6:a>3.5?4:a>2?2:1}function getMinutesAndSecondsInterval(a,s){return a/=s?ONE_MINUTE:ONE_SECOND,a>30?30:a>20?20:a>15?15:a>10?10:a>5?5:a>2?2:1}function getMillisecondsInterval(a){return nice(a)}function getFirstTimestampOfUnit(a,s,l){var o=new Date(a);switch(getPrimaryTimeUnit(s)){case"year":case"month":o[monthSetterName(l)](0);case"day":o[dateSetterName(l)](1);case"hour":o[hoursSetterName(l)](0);case"minute":o[minutesSetterName(l)](0);case"second":o[secondsSetterName(l)](0),o[millisecondsSetterName(l)](0)}return o.getTime()}function getIntervalTicks(a,s,l,o){var c=1e4,u=timeUnits,d=0;function f(la,oa,ca,pa,ua,da,ha){for(var ga=new Date(oa),fa=oa,ma=ga[pa]();fa<ca&&fa<=o[1];)ha.push({value:fa}),ma+=la,ga[ua](ma),fa=ga.getTime();ha.push({value:fa,notAdd:!0})}function g(la,oa,ca){var pa=[],ua=!oa.length;if(!isUnitValueSame(getPrimaryTimeUnit(la),o[0],o[1],l)){ua&&(oa=[{value:getFirstTimestampOfUnit(new Date(o[0]),la,l)},{value:o[1]}]);for(var da=0;da<oa.length-1;da++){var ha=oa[da].value,ga=oa[da+1].value;if(ha!==ga){var fa=void 0,ma=void 0,va=void 0,ka=!1;switch(la){case"year":fa=Math.max(1,Math.round(s/ONE_DAY/365)),ma=fullYearGetterName(l),va=fullYearSetterName(l);break;case"half-year":case"quarter":case"month":fa=getMonthInterval(s),ma=monthGetterName(l),va=monthSetterName(l);break;case"week":case"half-week":case"day":fa=getDateInterval(s),ma=dateGetterName(l),va=dateSetterName(l),ka=!0;break;case"half-day":case"quarter-day":case"hour":fa=getHourInterval(s),ma=hoursGetterName(l),va=hoursSetterName(l);break;case"minute":fa=getMinutesAndSecondsInterval(s,!0),ma=minutesGetterName(l),va=minutesSetterName(l);break;case"second":fa=getMinutesAndSecondsInterval(s,!1),ma=secondsGetterName(l),va=secondsSetterName(l);break;case"millisecond":fa=getMillisecondsInterval(s),ma=millisecondsGetterName(l),va=millisecondsSetterName(l);break}f(fa,ha,ga,ma,va,ka,pa),la==="year"&&ca.length>1&&da===0&&ca.unshift({value:ca[0].value-fa})}}for(var da=0;da<pa.length;da++)ca.push(pa[da]);return pa}}for(var y=[],$=[],x=0,N=0,R=0;R<u.length&&d++<c;++R){var j=getPrimaryTimeUnit(u[R]);if(isPrimaryTimeUnit(u[R])){g(u[R],y[y.length-1]||[],$);var ne=u[R+1]?getPrimaryTimeUnit(u[R+1]):null;if(j!==ne){if($.length){N=x,$.sort(function(la,oa){return la.value-oa.value});for(var se=[],ce=0;ce<$.length;++ce){var fe=$[ce].value;(ce===0||$[ce-1].value!==fe)&&(se.push($[ce]),fe>=o[0]&&fe<=o[1]&&x++)}var ea=(o[1]-o[0])/s;if(x>ea*1.5&&N>ea/1.5||(y.push(se),x>ea||a===u[R]))break}$=[]}}}for(var ta=filter(map$1(y,function(la){return filter(la,function(oa){return oa.value>=o[0]&&oa.value<=o[1]&&!oa.notAdd})}),function(la){return la.length>0}),na=[],aa=ta.length-1,R=0;R<ta.length;++R)for(var ia=ta[R],sa=0;sa<ia.length;++sa)na.push({value:ia[sa].value,level:aa-R});na.sort(function(la,oa){return la.value-oa.value});for(var ra=[],R=0;R<na.length;++R)(R===0||na[R].value!==na[R-1].value)&&ra.push(na[R]);return ra}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$4,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="log",l.base=10,l._originalScale=new IntervalScale,l._interval=0,l}return s.prototype.getTicks=function(l){var o=this._originalScale,c=this._extent,u=o.getExtent(),d=intervalScaleProto.getTicks.call(this,l);return map$1(d,function(f){var g=f.value,y=round$4(mathPow$1(this.base,g));return y=g===c[0]&&this._fixMin?fixRoundingError(y,u[0]):y,y=g===c[1]&&this._fixMax?fixRoundingError(y,u[1]):y,{value:y}},this)},s.prototype.setExtent=function(l,o){var c=mathLog$1(this.base);l=mathLog$1(Math.max(0,l))/c,o=mathLog$1(Math.max(0,o))/c,intervalScaleProto.setExtent.call(this,l,o)},s.prototype.getExtent=function(){var l=this.base,o=scaleProto.getExtent.call(this);o[0]=mathPow$1(l,o[0]),o[1]=mathPow$1(l,o[1]);var c=this._originalScale,u=c.getExtent();return this._fixMin&&(o[0]=fixRoundingError(o[0],u[0])),this._fixMax&&(o[1]=fixRoundingError(o[1],u[1])),o},s.prototype.unionExtent=function(l){this._originalScale.unionExtent(l);var o=this.base;l[0]=mathLog$1(l[0])/mathLog$1(o),l[1]=mathLog$1(l[1])/mathLog$1(o),scaleProto.unionExtent.call(this,l)},s.prototype.unionExtentFromData=function(l,o){this.unionExtent(l.getApproximateExtent(o))},s.prototype.calcNiceTicks=function(l){l=l||10;var o=this._extent,c=o[1]-o[0];if(!(c===1/0||c<=0)){var u=quantity(c),d=l/c*u;for(d<=.5&&(u*=10);!isNaN(u)&&Math.abs(u)<1&&Math.abs(u)>0;)u*=10;var f=[round$4(mathCeil$1(o[0]/u)*u),round$4(mathFloor$1(o[1]/u)*u)];this._interval=u,this._niceExtent=f}},s.prototype.calcNiceExtent=function(l){intervalScaleProto.calcNiceExtent.call(this,l),this._fixMin=l.fixMin,this._fixMax=l.fixMax},s.prototype.parse=function(l){return l},s.prototype.contain=function(l){return l=mathLog$1(l)/mathLog$1(this.base),contain$1(l,this._extent)},s.prototype.normalize=function(l){return l=mathLog$1(l)/mathLog$1(this.base),normalize$2(l,this._extent)},s.prototype.scale=function(l){return l=scale(l,this._extent),mathPow$1(this.base,l)},s.type="log",s}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(a,s){return roundingErrorFix(a,getPrecision(s))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function a(s,l,o){this._prepareParams(s,l,o)}return a.prototype._prepareParams=function(s,l,o){o[1]<o[0]&&(o=[NaN,NaN]),this._dataMin=o[0],this._dataMax=o[1];var c=this._isOrdinal=s.type==="ordinal";this._needCrossZero=s.type==="interval"&&l.getNeedCrossZero&&l.getNeedCrossZero();var u=l.get("min",!0);u==null&&(u=l.get("startValue",!0));var d=this._modelMinRaw=u;isFunction$2(d)?this._modelMinNum=parseAxisModelMinMax(s,d({min:o[0],max:o[1]})):d!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(s,d));var f=this._modelMaxRaw=l.get("max",!0);if(isFunction$2(f)?this._modelMaxNum=parseAxisModelMinMax(s,f({min:o[0],max:o[1]})):f!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(s,f)),c)this._axisDataLen=l.getCategories().length;else{var g=l.get("boundaryGap"),y=isArray$3(g)?g:[g||0,g||0];typeof y[0]=="boolean"||typeof y[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[parsePercent$1(y[0],1),parsePercent$1(y[1],1)]}},a.prototype.calculate=function(){var s=this._isOrdinal,l=this._dataMin,o=this._dataMax,c=this._axisDataLen,u=this._boundaryGapInner,d=s?null:o-l||Math.abs(l),f=this._modelMinRaw==="dataMin"?l:this._modelMinNum,g=this._modelMaxRaw==="dataMax"?o:this._modelMaxNum,y=f!=null,$=g!=null;f==null&&(f=s?c?0:NaN:l-u[0]*d),g==null&&(g=s?c?c-1:NaN:o+u[1]*d),(f==null||!isFinite(f))&&(f=NaN),(g==null||!isFinite(g))&&(g=NaN);var x=eqNaN(f)||eqNaN(g)||s&&!c;this._needCrossZero&&(f>0&&g>0&&!y&&(f=0),f<0&&g<0&&!$&&(g=0));var N=this._determinedMin,R=this._determinedMax;return N!=null&&(f=N,y=!0),R!=null&&(g=R,$=!0),{min:f,max:g,minFixed:y,maxFixed:$,isBlank:x}},a.prototype.modifyDataMinMax=function(s,l){this[DATA_MIN_MAX_ATTR[s]]=l},a.prototype.setDeterminedMinMax=function(s,l){var o=DETERMINED_MIN_MAX_ATTR[s];this[o]=l},a.prototype.freeze=function(){this.frozen=!0},a}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(a,s,l){var o=a.rawExtentInfo;return o||(o=new ScaleRawExtentInfo(a,s,l),a.rawExtentInfo=o,o)}function parseAxisModelMinMax(a,s){return s==null?null:eqNaN(s)?NaN:a.parse(s)}function getScaleExtent(a,s){var l=a.type,o=ensureScaleRawExtentInfo(a,s,a.getExtent()).calculate();a.setBlank(o.isBlank);var c=o.min,u=o.max,d=s.ecModel;if(d&&l==="time"){var f=prepareLayoutBarSeries("bar",d),g=!1;if(each$f(f,function(x){g=g||x.getBaseAxis()===s.axis}),g){var y=makeColumnLayout(f),$=adjustScaleForOverflow(c,u,s,y);c=$.min,u=$.max}}return{extent:[c,u],fixMin:o.minFixed,fixMax:o.maxFixed}}function adjustScaleForOverflow(a,s,l,o){var c=l.axis.getExtent(),u=c[1]-c[0],d=retrieveColumnLayout(o,l.axis);if(d===void 0)return{min:a,max:s};var f=1/0;each$f(d,function(R){f=Math.min(R.offset,f)});var g=-1/0;each$f(d,function(R){g=Math.max(R.offset+R.width,g)}),f=Math.abs(f),g=Math.abs(g);var y=f+g,$=s-a,x=1-(f+g)/u,N=$/x-$;return s+=N*(g/y),a-=N*(f/y),{min:a,max:s}}function niceScaleExtent(a,s){var l=s,o=getScaleExtent(a,l),c=o.extent,u=l.get("splitNumber");a instanceof LogScale&&(a.base=l.get("logBase"));var d=a.type,f=l.get("interval"),g=d==="interval"||d==="time";a.setExtent(c[0],c[1]),a.calcNiceExtent({splitNumber:u,fixMin:o.fixMin,fixMax:o.fixMax,minInterval:g?l.get("minInterval"):null,maxInterval:g?l.get("maxInterval"):null}),f!=null&&a.setInterval&&a.setInterval(f)}function createScaleByModel$1(a,s){if(s=s||a.get("type"),s)switch(s){case"category":return new OrdinalScale({ordinalMeta:a.getOrdinalMeta?a.getOrdinalMeta():a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new(Scale.getClass(s)||IntervalScale)}}function ifAxisCrossZero(a){var s=a.scale.getExtent(),l=s[0],o=s[1];return!(l>0&&o>0||l<0&&o<0)}function makeLabelFormatter(a){var s=a.getLabelModel().get("formatter"),l=a.type==="category"?a.scale.getExtent()[0]:null;return a.scale.type==="time"?function(o){return function(c,u){return a.scale.getFormattedLabel(c,u,o)}}(s):isString$2(s)?function(o){return function(c){var u=a.scale.getLabel(c),d=o.replace("{value}",u??"");return d}}(s):isFunction$2(s)?function(o){return function(c,u){return l!=null&&(u=c.value-l),o(getAxisRawValue(a,c),u,c.level!=null?{level:c.level}:null)}}(s):function(o){return a.scale.getLabel(o)}}function getAxisRawValue(a,s){return a.type==="category"?a.scale.getLabel(s):s.value}function estimateLabelUnionRect(a){var s=a.model,l=a.scale;if(!(!s.get(["axisLabel","show"])||l.isBlank())){var o,c,u=l.getExtent();l instanceof OrdinalScale?c=l.count():(o=l.getTicks(),c=o.length);var d=a.getLabelModel(),f=makeLabelFormatter(a),g,y=1;c>40&&(y=Math.ceil(c/40));for(var $=0;$<c;$+=y){var x=o?o[$]:{value:u[0]+$},N=f(x,$),R=d.getTextRect(N),j=rotateTextRect(R,d.get("rotate")||0);g?g.union(j):g=j}return g}}function rotateTextRect(a,s){var l=s*Math.PI/180,o=a.width,c=a.height,u=o*Math.abs(Math.cos(l))+Math.abs(c*Math.sin(l)),d=o*Math.abs(Math.sin(l))+Math.abs(c*Math.cos(l)),f=new BoundingRect(a.x,a.y,u,d);return f}function getOptionCategoryInterval(a){var s=a.get("interval");return s??"auto"}function shouldShowAllLabels(a){return a.type==="category"&&getOptionCategoryInterval(a.getLabelModel())===0}function getDataDimensionsOnAxis(a,s){var l={};return each$f(a.mapDimensionsAll(s),function(o){l[getStackedDimension(a,o)]=!0}),keys(l)}function unionAxisExtentFromData(a,s,l){s&&each$f(getDataDimensionsOnAxis(s,l),function(o){var c=s.getApproximateExtent(o);c[0]<a[0]&&(a[0]=c[0]),c[1]>a[1]&&(a[1]=c[1])})}var AxisModelCommonMixin=function(){function a(){}return a.prototype.getNeedCrossZero=function(){var s=this.option;return!s.scale},a.prototype.getCoordSysModel=function(){},a}(),EPSILON=1e-8;function isAroundEqual(a,s){return Math.abs(a-s)<EPSILON}function contain(a,s,l){var o=0,c=a[0];if(!c)return!1;for(var u=1;u<a.length;u++){var d=a[u];o+=windingLine(c[0],c[1],d[0],d[1],s,l),c=d}var f=a[0];return(!isAroundEqual(c[0],f[0])||!isAroundEqual(c[1],f[1]))&&(o+=windingLine(c[0],c[1],f[0],f[1],s,l)),o!==0}var TMP_TRANSFORM=[];function transformPoints(a,s){for(var l=0;l<a.length;l++)applyTransform$1(a[l],a[l],s)}function updateBBoxFromPoints(a,s,l,o){for(var c=0;c<a.length;c++){var u=a[c];o&&(u=o.project(u)),u&&isFinite(u[0])&&isFinite(u[1])&&(min$1(s,s,u),max$1(l,l,u))}}function centroid$1(a){for(var s=0,l=0,o=0,c=a.length,u=a[c-1][0],d=a[c-1][1],f=0;f<c;f++){var g=a[f][0],y=a[f][1],$=u*y-g*d;s+=$,l+=(u+g)*$,o+=(d+y)*$,u=g,d=y}return s?[l/s/3,o/s/3,s]:[a[0][0]||0,a[0][1]||0]}var Region=function(){function a(s){this.name=s}return a.prototype.setCenter=function(s){this._center=s},a.prototype.getCenter=function(){var s=this._center;return s||(s=this._center=this.calcCenter()),s},a}(),GeoJSONPolygonGeometry=function(){function a(s,l){this.type="polygon",this.exterior=s,this.interiors=l}return a}(),GeoJSONLineStringGeometry=function(){function a(s){this.type="linestring",this.points=s}return a}(),GeoJSONRegion=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this,l)||this;return u.type="geoJSON",u.geometries=o,u._center=c&&[c[0],c[1]],u}return s.prototype.calcCenter=function(){for(var l=this.geometries,o,c=0,u=0;u<l.length;u++){var d=l[u],f=d.exterior,g=f&&f.length;g>c&&(o=d,c=g)}if(o)return centroid$1(o.exterior);var y=this.getBoundingRect();return[y.x+y.width/2,y.y+y.height/2]},s.prototype.getBoundingRect=function(l){var o=this._rect;if(o&&!l)return o;var c=[1/0,1/0],u=[-1/0,-1/0],d=this.geometries;return each$f(d,function(f){f.type==="polygon"?updateBBoxFromPoints(f.exterior,c,u,l):each$f(f.points,function(g){updateBBoxFromPoints(g,c,u,l)})}),isFinite(c[0])&&isFinite(c[1])&&isFinite(u[0])&&isFinite(u[1])||(c[0]=c[1]=u[0]=u[1]=0),o=new BoundingRect(c[0],c[1],u[0]-c[0],u[1]-c[1]),l||(this._rect=o),o},s.prototype.contain=function(l){var o=this.getBoundingRect(),c=this.geometries;if(!o.contain(l[0],l[1]))return!1;e:for(var u=0,d=c.length;u<d;u++){var f=c[u];if(f.type==="polygon"){var g=f.exterior,y=f.interiors;if(contain(g,l[0],l[1])){for(var $=0;$<(y?y.length:0);$++)if(contain(y[$],l[0],l[1]))continue e;return!0}}}return!1},s.prototype.transformTo=function(l,o,c,u){var d=this.getBoundingRect(),f=d.width/d.height;c?u||(u=c/f):c=f*u;for(var g=new BoundingRect(l,o,c,u),y=d.calculateTransform(g),$=this.geometries,x=0;x<$.length;x++){var N=$[x];N.type==="polygon"?(transformPoints(N.exterior,y),each$f(N.interiors,function(R){transformPoints(R,y)})):each$f(N.points,function(R){transformPoints(R,y)})}d=this._rect,d.copy(g),this._center=[d.x+d.width/2,d.y+d.height/2]},s.prototype.cloneShallow=function(l){l==null&&(l=this.name);var o=new s(l,this.geometries,this._center);return o._rect=this._rect,o.transformTo=null,o},s}(Region),GeoSVGRegion=function(a){__extends(s,a);function s(l,o){var c=a.call(this,l)||this;return c.type="geoSVG",c._elOnlyForCalculate=o,c}return s.prototype.calcCenter=function(){for(var l=this._elOnlyForCalculate,o=l.getBoundingRect(),c=[o.x+o.width/2,o.y+o.height/2],u=identity(TMP_TRANSFORM),d=l;d&&!d.isGeoSVGGraphicRoot;)mul(u,d.getLocalTransform(),u),d=d.parent;return invert(u,u),applyTransform$1(c,c,u),c},s}(Region);function decode(a){if(!a.UTF8Encoding)return a;var s=a,l=s.UTF8Scale;l==null&&(l=1024);var o=s.features;return each$f(o,function(c){var u=c.geometry,d=u.encodeOffsets,f=u.coordinates;if(d)switch(u.type){case"LineString":u.coordinates=decodeRing(f,d,l);break;case"Polygon":decodeRings(f,d,l);break;case"MultiLineString":decodeRings(f,d,l);break;case"MultiPolygon":each$f(f,function(g,y){return decodeRings(g,d[y],l)})}}),s.UTF8Encoding=!1,s}function decodeRings(a,s,l){for(var o=0;o<a.length;o++)a[o]=decodeRing(a[o],s[o],l)}function decodeRing(a,s,l){for(var o=[],c=s[0],u=s[1],d=0;d<a.length;d+=2){var f=a.charCodeAt(d)-64,g=a.charCodeAt(d+1)-64;f=f>>1^-(f&1),g=g>>1^-(g&1),f+=c,g+=u,c=f,u=g,o.push([f/l,g/l])}return o}function parseGeoJSON(a,s){return a=decode(a),map$1(filter(a.features,function(l){return l.geometry&&l.properties&&l.geometry.coordinates.length>0}),function(l){var o=l.properties,c=l.geometry,u=[];switch(c.type){case"Polygon":var d=c.coordinates;u.push(new GeoJSONPolygonGeometry(d[0],d.slice(1)));break;case"MultiPolygon":each$f(c.coordinates,function(g){g[0]&&u.push(new GeoJSONPolygonGeometry(g[0],g.slice(1)))});break;case"LineString":u.push(new GeoJSONLineStringGeometry([c.coordinates]));break;case"MultiLineString":u.push(new GeoJSONLineStringGeometry(c.coordinates))}var f=new GeoJSONRegion(o[s||"name"],u,o.cp);return f.properties=o,f})}var inner$g=makeInner();function tickValuesToNumbers(a,s){var l=map$1(s,function(o){return a.scale.parse(o)});return a.type==="time"&&l.length>0&&(l.sort(),l.unshift(l[0]),l.push(l[l.length-1])),l}function createAxisLabels(a){var s=a.getLabelModel().get("customValues");if(s){var l=makeLabelFormatter(a);return{labels:tickValuesToNumbers(a,s).map(function(o){var c={value:o};return{formattedLabel:l(c),rawLabel:a.scale.getLabel(c),tickValue:o}})}}return a.type==="category"?makeCategoryLabels(a):makeRealNumberLabels(a)}function createAxisTicks(a,s){var l=a.getTickModel().get("customValues");return l?{ticks:tickValuesToNumbers(a,l)}:a.type==="category"?makeCategoryTicks(a,s):{ticks:map$1(a.scale.getTicks(),function(o){return o.value})}}function makeCategoryLabels(a){var s=a.getLabelModel(),l=makeCategoryLabelsActually(a,s);return!s.get("show")||a.scale.isBlank()?{labels:[],labelCategoryInterval:l.labelCategoryInterval}:l}function makeCategoryLabelsActually(a,s){var l=getListCache(a,"labels"),o=getOptionCategoryInterval(s),c=listCacheGet(l,o);if(c)return c;var u,d;return isFunction$2(o)?u=makeLabelsByCustomizedCategoryInterval(a,o):(d=o==="auto"?makeAutoCategoryInterval(a):o,u=makeLabelsByNumericCategoryInterval(a,d)),listCacheSet(l,o,{labels:u,labelCategoryInterval:d})}function makeCategoryTicks(a,s){var l=getListCache(a,"ticks"),o=getOptionCategoryInterval(s),c=listCacheGet(l,o);if(c)return c;var u,d;if((!s.get("show")||a.scale.isBlank())&&(u=[]),isFunction$2(o))u=makeLabelsByCustomizedCategoryInterval(a,o,!0);else if(o==="auto"){var f=makeCategoryLabelsActually(a,a.getLabelModel());d=f.labelCategoryInterval,u=map$1(f.labels,function(g){return g.tickValue})}else d=o,u=makeLabelsByNumericCategoryInterval(a,d,!0);return listCacheSet(l,o,{ticks:u,tickCategoryInterval:d})}function makeRealNumberLabels(a){var s=a.scale.getTicks(),l=makeLabelFormatter(a);return{labels:map$1(s,function(o,c){return{level:o.level,formattedLabel:l(o,c),rawLabel:a.scale.getLabel(o),tickValue:o.value}})}}function getListCache(a,s){return inner$g(a)[s]||(inner$g(a)[s]=[])}function listCacheGet(a,s){for(var l=0;l<a.length;l++)if(a[l].key===s)return a[l].value}function listCacheSet(a,s,l){return a.push({key:s,value:l}),l}function makeAutoCategoryInterval(a){var s=inner$g(a).autoInterval;return s??(inner$g(a).autoInterval=a.calculateCategoryInterval())}function calculateCategoryInterval(a){var s=fetchAutoCategoryIntervalCalculationParams(a),l=makeLabelFormatter(a),o=(s.axisRotate-s.labelRotate)/180*Math.PI,c=a.scale,u=c.getExtent(),d=c.count();if(u[1]-u[0]<1)return 0;var f=1;d>40&&(f=Math.max(1,Math.floor(d/40)));for(var g=u[0],y=a.dataToCoord(g+1)-a.dataToCoord(g),$=Math.abs(y*Math.cos(o)),x=Math.abs(y*Math.sin(o)),N=0,R=0;g<=u[1];g+=f){var j=0,ne=0,se=getBoundingRect(l({value:g}),s.font,"center","top");j=se.width*1.3,ne=se.height*1.3,N=Math.max(N,j,7),R=Math.max(R,ne,7)}var ce=N/$,fe=R/x;isNaN(ce)&&(ce=1/0),isNaN(fe)&&(fe=1/0);var ea=Math.max(0,Math.floor(Math.min(ce,fe))),ta=inner$g(a.model),na=a.getExtent(),aa=ta.lastAutoInterval,ia=ta.lastTickCount;return aa!=null&&ia!=null&&Math.abs(aa-ea)<=1&&Math.abs(ia-d)<=1&&aa>ea&&ta.axisExtent0===na[0]&&ta.axisExtent1===na[1]?ea=aa:(ta.lastTickCount=d,ta.lastAutoInterval=ea,ta.axisExtent0=na[0],ta.axisExtent1=na[1]),ea}function fetchAutoCategoryIntervalCalculationParams(a){var s=a.getLabelModel();return{axisRotate:a.getRotate?a.getRotate():a.isHorizontal&&!a.isHorizontal()?90:0,labelRotate:s.get("rotate")||0,font:s.getFont()}}function makeLabelsByNumericCategoryInterval(a,s,l){var o=makeLabelFormatter(a),c=a.scale,u=c.getExtent(),d=a.getLabelModel(),f=[],g=Math.max((s||0)+1,1),y=u[0],$=c.count();y!==0&&g>1&&$/g>2&&(y=Math.round(Math.ceil(y/g)*g));var x=shouldShowAllLabels(a),N=d.get("showMinLabel")||x,R=d.get("showMaxLabel")||x;N&&y!==u[0]&&ne(u[0]);for(var j=y;j<=u[1];j+=g)ne(j);R&&j-g!==u[1]&&ne(u[1]);function ne(se){var ce={value:se};f.push(l?se:{formattedLabel:o(ce),rawLabel:c.getLabel(ce),tickValue:se})}return f}function makeLabelsByCustomizedCategoryInterval(a,s,l){var o=a.scale,c=makeLabelFormatter(a),u=[];return each$f(o.getTicks(),function(d){var f=o.getLabel(d),g=d.value;s(d.value,f)&&u.push(l?g:{formattedLabel:c(d),rawLabel:f,tickValue:g})}),u}var NORMALIZED_EXTENT=[0,1],Axis=function(){function a(s,l,o){this.onBand=!1,this.inverse=!1,this.dim=s,this.scale=l,this._extent=o||[0,0]}return a.prototype.contain=function(s){var l=this._extent,o=Math.min(l[0],l[1]),c=Math.max(l[0],l[1]);return s>=o&&s<=c},a.prototype.containData=function(s){return this.scale.contain(s)},a.prototype.getExtent=function(){return this._extent.slice()},a.prototype.getPixelPrecision=function(s){return getPixelPrecision(s||this.scale.getExtent(),this._extent)},a.prototype.setExtent=function(s,l){var o=this._extent;o[0]=s,o[1]=l},a.prototype.dataToCoord=function(s,l){var o=this._extent,c=this.scale;return s=c.normalize(s),this.onBand&&c.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,c.count())),linearMap$2(s,NORMALIZED_EXTENT,o,l)},a.prototype.coordToData=function(s,l){var o=this._extent,c=this.scale;this.onBand&&c.type==="ordinal"&&(o=o.slice(),fixExtentWithBands(o,c.count()));var u=linearMap$2(s,o,NORMALIZED_EXTENT,l);return this.scale.scale(u)},a.prototype.pointToData=function(s,l){},a.prototype.getTicksCoords=function(s){s=s||{};var l=s.tickModel||this.getTickModel(),o=createAxisTicks(this,l),c=o.ticks,u=map$1(c,function(f){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(f):f),tickValue:f}},this),d=l.get("alignWithLabel");return fixOnBandTicksCoords(this,u,d,s.clamp),u},a.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var s=this.model.getModel("minorTick"),l=s.get("splitNumber");l>0&&l<100||(l=5);var o=this.scale.getMinorTicks(l),c=map$1(o,function(u){return map$1(u,function(d){return{coord:this.dataToCoord(d),tickValue:d}},this)},this);return c},a.prototype.getViewLabels=function(){return createAxisLabels(this).labels},a.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},a.prototype.getTickModel=function(){return this.model.getModel("axisTick")},a.prototype.getBandWidth=function(){var s=this._extent,l=this.scale.getExtent(),o=l[1]-l[0]+(this.onBand?1:0);o===0&&(o=1);var c=Math.abs(s[1]-s[0]);return Math.abs(c)/o},a.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},a}();function fixExtentWithBands(a,s){var l=a[1]-a[0],o=s,c=l/o/2;a[0]+=c,a[1]-=c}function fixOnBandTicksCoords(a,s,l,o){var c=s.length;if(!a.onBand||l||!c)return;var u=a.getExtent(),d,f;if(c===1)s[0].coord=u[0],d=s[1]={coord:u[1]};else{var g=s[c-1].tickValue-s[0].tickValue,y=(s[c-1].coord-s[0].coord)/g;each$f(s,function(R){R.coord-=y/2});var $=a.scale.getExtent();f=1+$[1]-s[c-1].tickValue,d={coord:s[c-1].coord+y*f},s.push(d)}var x=u[0]>u[1];N(s[0].coord,u[0])&&(o?s[0].coord=u[0]:s.shift()),o&&N(u[0],s[0].coord)&&s.unshift({coord:u[0]}),N(u[1],d.coord)&&(o?d.coord=u[1]:s.pop()),o&&N(d.coord,u[1])&&s.push({coord:u[1]});function N(R,j){return R=round$4(R),j=round$4(j),x?R>j:R<j}}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(a,s,l,o,c){var u=l.width,d=l.height;switch(a){case"top":o.set(l.x+u/2,l.y-s),c.set(0,-1);break;case"bottom":o.set(l.x+u/2,l.y+d+s),c.set(0,1);break;case"left":o.set(l.x-s,l.y+d/2),c.set(-1,0);break;case"right":o.set(l.x+u+s,l.y+d/2),c.set(1,0);break}}function projectPointToArc(a,s,l,o,c,u,d,f,g){d-=a,f-=s;var y=Math.sqrt(d*d+f*f);d/=y,f/=y;var $=d*l+a,x=f*l+s;if(Math.abs(o-c)%PI2$2<1e-4)return g[0]=$,g[1]=x,y-l;if(u){var N=o;o=normalizeRadian(c),c=normalizeRadian(N)}else o=normalizeRadian(o),c=normalizeRadian(c);o>c&&(c+=PI2$2);var R=Math.atan2(f,d);if(R<0&&(R+=PI2$2),R>=o&&R<=c||R+PI2$2>=o&&R+PI2$2<=c)return g[0]=$,g[1]=x,y-l;var j=l*Math.cos(o)+a,ne=l*Math.sin(o)+s,se=l*Math.cos(c)+a,ce=l*Math.sin(c)+s,fe=(j-d)*(j-d)+(ne-f)*(ne-f),ea=(se-d)*(se-d)+(ce-f)*(ce-f);return fe<ea?(g[0]=j,g[1]=ne,Math.sqrt(fe)):(g[0]=se,g[1]=ce,Math.sqrt(ea))}function projectPointToLine(a,s,l,o,c,u,d,f){var g=c-a,y=u-s,$=l-a,x=o-s,N=Math.sqrt($*$+x*x);$/=N,x/=N;var R=g*$+y*x,j=R/N;f&&(j=Math.min(Math.max(j,0),1)),j*=N;var ne=d[0]=a+j*$,se=d[1]=s+j*x;return Math.sqrt((ne-c)*(ne-c)+(se-u)*(se-u))}function projectPointToRect(a,s,l,o,c,u,d){l<0&&(a=a+l,l=-l),o<0&&(s=s+o,o=-o);var f=a+l,g=s+o,y=d[0]=Math.min(Math.max(c,a),f),$=d[1]=Math.min(Math.max(u,s),g);return Math.sqrt((y-c)*(y-c)+($-u)*($-u))}var tmpPt=[];function nearestPointOnRect(a,s,l){var o=projectPointToRect(s.x,s.y,s.width,s.height,a.x,a.y,tmpPt);return l.set(tmpPt[0],tmpPt[1]),o}function nearestPointOnPath(a,s,l){for(var o=0,c=0,u=0,d=0,f,g,y=1/0,$=s.data,x=a.x,N=a.y,R=0;R<$.length;){var j=$[R++];R===1&&(o=$[R],c=$[R+1],u=o,d=c);var ne=y;switch(j){case CMD$1.M:u=$[R++],d=$[R++],o=u,c=d;break;case CMD$1.L:ne=projectPointToLine(o,c,$[R],$[R+1],x,N,tmpPt,!0),o=$[R++],c=$[R++];break;case CMD$1.C:ne=cubicProjectPoint(o,c,$[R++],$[R++],$[R++],$[R++],$[R],$[R+1],x,N,tmpPt),o=$[R++],c=$[R++];break;case CMD$1.Q:ne=quadraticProjectPoint(o,c,$[R++],$[R++],$[R],$[R+1],x,N,tmpPt),o=$[R++],c=$[R++];break;case CMD$1.A:var se=$[R++],ce=$[R++],fe=$[R++],ea=$[R++],ta=$[R++],na=$[R++];R+=1;var aa=!!(1-$[R++]);f=Math.cos(ta)*fe+se,g=Math.sin(ta)*ea+ce,R<=1&&(u=f,d=g);var ia=(x-se)*ea/fe+se;ne=projectPointToArc(se,ce,ea,ta,ta+na,aa,ia,N,tmpPt),o=Math.cos(ta+na)*fe+se,c=Math.sin(ta+na)*ea+ce;break;case CMD$1.R:u=o=$[R++],d=c=$[R++];var sa=$[R++],ra=$[R++];ne=projectPointToRect(u,d,sa,ra,x,N,tmpPt);break;case CMD$1.Z:ne=projectPointToLine(o,c,u,d,x,N,tmpPt,!0),o=u,c=d;break}ne<y&&(y=ne,l.set(tmpPt[0],tmpPt[1]))}return y}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(a,s){if(a){var l=a.getTextGuideLine(),o=a.getTextContent();if(o&&l){var c=a.textGuideLineConfig||{},u=[[0,0],[0,0],[0,0]],d=c.candidates||DEFAULT_SEARCH_SPACE,f=o.getBoundingRect().clone();f.applyTransform(o.getComputedTransform());var g=1/0,y=c.anchor,$=a.getComputedTransform(),x=$&&invert([],$),N=s.get("length2")||0;y&&pt2.copy(y);for(var R=0;R<d.length;R++){var j=d[R];getCandidateAnchor(j,0,f,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,N),pt1.transform(x);var ne=a.getBoundingRect(),se=y?y.distance(pt1):a instanceof Path?nearestPointOnPath(pt1,a.path,pt2):nearestPointOnRect(pt1,ne,pt2);se<g&&(g=se,pt1.transform($),pt2.transform($),pt2.toArray(u[0]),pt1.toArray(u[1]),pt0.toArray(u[2]))}limitTurnAngle(u,s.get("minTurnAngle")),l.setShape({points:u})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(a,s){if(s<=180&&s>0){s=s/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var l=dir.len(),o=dir2.len();if(!(l<.001||o<.001)){dir.scale(1/l),dir2.scale(1/o);var c=dir.dot(dir2),u=Math.cos(s);if(u<c){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI-s));var f=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(f))return;f<0?Point.copy(tmpProjPoint,pt1):f>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(a[1])}}}}function limitSurfaceAngle(a,s,l){if(l<=180&&l>0){l=l/180*Math.PI,pt0.fromArray(a[0]),pt1.fromArray(a[1]),pt2.fromArray(a[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var o=dir.len(),c=dir2.len();if(!(o<.001||c<.001)){dir.scale(1/o),dir2.scale(1/c);var u=dir.dot(s),d=Math.cos(l);if(u<d){var f=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var g=Math.PI/2,y=Math.acos(dir2.dot(s)),$=g+y-l;if($>=g)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,f/Math.tan(Math.PI/2-$));var x=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(x))return;x<0?Point.copy(tmpProjPoint,pt1):x>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(a[1])}}}}function setLabelLineState(a,s,l,o){var c=l==="normal",u=c?a:a.ensureState(l);u.ignore=s;var d=o.get("smooth");d&&d===!0&&(d=.3),u.shape=u.shape||{},d>0&&(u.shape.smooth=d);var f=o.getModel("lineStyle").getLineStyle();c?a.useStyle(f):u.style=f}function buildLabelLinePath(a,s){var l=s.smooth,o=s.points;if(o)if(a.moveTo(o[0][0],o[0][1]),l>0&&o.length>=3){var c=dist$1(o[0],o[1]),u=dist$1(o[1],o[2]);if(!c||!u){a.lineTo(o[1][0],o[1][1]),a.lineTo(o[2][0],o[2][1]);return}var d=Math.min(c,u)*l,f=lerp$1([],o[1],o[0],d/c),g=lerp$1([],o[1],o[2],d/u),y=lerp$1([],f,g,.5);a.bezierCurveTo(f[0],f[1],f[0],f[1],y[0],y[1]),a.bezierCurveTo(g[0],g[1],g[0],g[1],o[2][0],o[2][1])}else for(var $=1;$<o.length;$++)a.lineTo(o[$][0],o[$][1])}function setLabelLineStyle(a,s,l){var o=a.getTextGuideLine(),c=a.getTextContent();if(!c){o&&a.removeTextGuideLine();return}for(var u=s.normal,d=u.get("show"),f=c.ignore,g=0;g<DISPLAY_STATES.length;g++){var y=DISPLAY_STATES[g],$=s[y],x=y==="normal";if($){var N=$.get("show"),R=x?f:retrieve2(c.states[y]&&c.states[y].ignore,f);if(R||!retrieve2(N,d)){var j=x?o:o&&o.states[y];j&&(j.ignore=!0),o&&setLabelLineState(o,!0,y,$);continue}o||(o=new Polyline$1,a.setTextGuideLine(o),!x&&(f||!d)&&setLabelLineState(o,!0,"normal",s.normal),a.stateProxy&&(o.stateProxy=a.stateProxy)),setLabelLineState(o,!1,y,$)}}if(o){defaults(o.style,l),o.style.fill=null;var ne=u.get("showAbove"),se=a.textGuideLineConfig=a.textGuideLineConfig||{};se.showAbove=ne||!1,o.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(a,s){s=s||"labelLine";for(var l={normal:a.getModel(s)},o=0;o<SPECIAL_STATES.length;o++){var c=SPECIAL_STATES[o];l[c]=a.getModel([c,s])}return l}function prepareLayoutList(a){for(var s=[],l=0;l<a.length;l++){var o=a[l];if(!o.defaultAttr.ignore){var c=o.label,u=c.getComputedTransform(),d=c.getBoundingRect(),f=!u||u[1]<1e-5&&u[2]<1e-5,g=c.style.margin||0,y=d.clone();y.applyTransform(u),y.x-=g/2,y.y-=g/2,y.width+=g,y.height+=g;var $=f?new OrientedBoundingRect$1(d,u):null;s.push({label:c,labelLine:o.labelLine,rect:y,localRect:d,obb:$,priority:o.priority,defaultAttr:o.defaultAttr,layoutOption:o.computedLayoutOption,axisAligned:f,transform:u})}}return s}function shiftLayout(a,s,l,o,c,u){var d=a.length;if(d<2)return;a.sort(function(sa,ra){return sa.rect[s]-ra.rect[s]});for(var f=0,g,y=!1,$=0,x=0;x<d;x++){var N=a[x],R=N.rect;g=R[s]-f,g<0&&(R[s]-=g,N.label[s]-=g,y=!0);var j=Math.max(-g,0);$+=j,f=R[s]+R[l]}$>0&&u&&na(-$/d,0,d);var ne=a[0],se=a[d-1],ce,fe;ea(),ce<0&&aa(-ce,.8),fe<0&&aa(fe,.8),ea(),ta(ce,fe,1),ta(fe,ce,-1),ea(),ce<0&&ia(-ce),fe<0&&ia(fe);function ea(){ce=ne.rect[s]-o,fe=c-se.rect[s]-se.rect[l]}function ta(sa,ra,la){if(sa<0){var oa=Math.min(ra,-sa);if(oa>0){na(oa*la,0,d);var ca=oa+sa;ca<0&&aa(-ca*la,1)}else aa(-sa*la,1)}}function na(sa,ra,la){sa!==0&&(y=!0);for(var oa=ra;oa<la;oa++){var ca=a[oa],pa=ca.rect;pa[s]+=sa,ca.label[s]+=sa}}function aa(sa,ra){for(var la=[],oa=0,ca=1;ca<d;ca++){var pa=a[ca-1].rect,ua=Math.max(a[ca].rect[s]-pa[s]-pa[l],0);la.push(ua),oa+=ua}if(oa){var da=Math.min(Math.abs(sa)/oa,ra);if(sa>0)for(var ca=0;ca<d-1;ca++){var ha=la[ca]*da;na(ha,0,ca+1)}else for(var ca=d-1;ca>0;ca--){var ha=la[ca-1]*da;na(-ha,ca,d)}}}function ia(sa){var ra=sa<0?-1:1;sa=Math.abs(sa);for(var la=Math.ceil(sa/(d-1)),oa=0;oa<d-1;oa++)if(ra>0?na(la,0,oa+1):na(-la,d-oa-1,d),sa-=la,sa<=0)return}return y}function shiftLayoutOnX(a,s,l,o){return shiftLayout(a,"x","width",s,l,o)}function shiftLayoutOnY(a,s,l,o){return shiftLayout(a,"y","height",s,l,o)}function hideOverlap(a){var s=[];a.sort(function(ne,se){return se.priority-ne.priority});var l=new BoundingRect(0,0,0,0);function o(ne){if(!ne.ignore){var se=ne.ensureState("emphasis");se.ignore==null&&(se.ignore=!1)}ne.ignore=!0}for(var c=0;c<a.length;c++){var u=a[c],d=u.axisAligned,f=u.localRect,g=u.transform,y=u.label,$=u.labelLine;l.copy(u.rect),l.width-=.1,l.height-=.1,l.x+=.05,l.y+=.05;for(var x=u.obb,N=!1,R=0;R<s.length;R++){var j=s[R];if(l.intersect(j.rect)){if(d&&j.axisAligned){N=!0;break}if(j.obb||(j.obb=new OrientedBoundingRect$1(j.localRect,j.transform)),x||(x=new OrientedBoundingRect$1(f,g)),x.intersect(j.obb)){N=!0;break}}}N?(o(y),$&&o($)):(y.attr("ignore",u.defaultAttr.ignore),$&&$.attr("ignore",u.defaultAttr.labelGuideIgnore),s.push(u))}}function cloneArr(a){if(a){for(var s=[],l=0;l<a.length;l++)s.push(a[l].slice());return s}}function prepareLayoutCallbackParams(a,s){var l=a.label,o=s&&s.getTextGuideLine();return{dataIndex:a.dataIndex,dataType:a.dataType,seriesIndex:a.seriesModel.seriesIndex,text:a.label.style.text,rect:a.hostRect,labelRect:a.rect,align:l.style.align,verticalAlign:l.style.verticalAlign,labelLinePoints:cloneArr(o&&o.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(a,s,l){for(var o=0;o<l.length;o++){var c=l[o];s[c]!=null&&(a[c]=s[c])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function a(){this._labelList=[],this._chartViewList=[]}return a.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},a.prototype._addLabel=function(s,l,o,c,u){var d=c.style,f=c.__hostTarget,g=f.textConfig||{},y=c.getComputedTransform(),$=c.getBoundingRect().plain();BoundingRect.applyTransform($,$,y),y?dummyTransformable.setLocalTransform(y):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var x=c.__hostTarget,N;if(x){N=x.getBoundingRect().plain();var R=x.getComputedTransform();BoundingRect.applyTransform(N,N,R)}var j=N&&x.getTextGuideLine();this._labelList.push({label:c,labelLine:j,seriesModel:o,dataIndex:s,dataType:l,layoutOption:u,computedLayoutOption:null,rect:$,hostRect:N,priority:N?N.width*N.height:0,defaultAttr:{ignore:c.ignore,labelGuideIgnore:j&&j.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:d.x,y:d.y,align:d.align,verticalAlign:d.verticalAlign,width:d.width,height:d.height,fontSize:d.fontSize},cursor:c.cursor,attachedPos:g.position,attachedRot:g.rotation}})},a.prototype.addLabelsOfSeries=function(s){var l=this;this._chartViewList.push(s);var o=s.__model,c=o.get("labelLayout");(isFunction$2(c)||keys(c).length)&&s.group.traverse(function(u){if(u.ignore)return!0;var d=u.getTextContent(),f=getECData(u);d&&!d.disableLabelLayout&&l._addLabel(f.dataIndex,f.dataType,o,d,c)})},a.prototype.updateLayoutConfig=function(s){var l=s.getWidth(),o=s.getHeight();function c(ea,ta){return function(){updateLabelLinePoints(ea,ta)}}for(var u=0;u<this._labelList.length;u++){var d=this._labelList[u],f=d.label,g=f.__hostTarget,y=d.defaultAttr,$=void 0;isFunction$2(d.layoutOption)?$=d.layoutOption(prepareLayoutCallbackParams(d,g)):$=d.layoutOption,$=$||{},d.computedLayoutOption=$;var x=Math.PI/180;g&&g.setTextConfig({local:!1,position:$.x!=null||$.y!=null?null:y.attachedPos,rotation:$.rotate!=null?$.rotate*x:y.attachedRot,offset:[$.dx||0,$.dy||0]});var N=!1;if($.x!=null?(f.x=parsePercent($.x,l),f.setStyle("x",0),N=!0):(f.x=y.x,f.setStyle("x",y.style.x)),$.y!=null?(f.y=parsePercent($.y,o),f.setStyle("y",0),N=!0):(f.y=y.y,f.setStyle("y",y.style.y)),$.labelLinePoints){var R=g.getTextGuideLine();R&&(R.setShape({points:$.labelLinePoints}),N=!1)}var j=labelLayoutInnerStore(f);j.needsUpdateLabelLine=N,f.rotation=$.rotate!=null?$.rotate*x:y.rotation,f.scaleX=y.scaleX,f.scaleY=y.scaleY;for(var ne=0;ne<LABEL_OPTION_TO_STYLE_KEYS.length;ne++){var se=LABEL_OPTION_TO_STYLE_KEYS[ne];f.setStyle(se,$[se]!=null?$[se]:y.style[se])}if($.draggable){if(f.draggable=!0,f.cursor="move",g){var ce=d.seriesModel;if(d.dataIndex!=null){var fe=d.seriesModel.getData(d.dataType);ce=fe.getItemModel(d.dataIndex)}f.on("drag",c(g,ce.getModel("labelLine")))}}else f.off("drag"),f.cursor=y.cursor}},a.prototype.layout=function(s){var l=s.getWidth(),o=s.getHeight(),c=prepareLayoutList(this._labelList),u=filter(c,function(g){return g.layoutOption.moveOverlap==="shiftX"}),d=filter(c,function(g){return g.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(u,0,l),shiftLayoutOnY(d,0,o);var f=filter(c,function(g){return g.layoutOption.hideOverlap});hideOverlap(f)},a.prototype.processLabelsOverall=function(){var s=this;each$f(this._chartViewList,function(l){var o=l.__model,c=l.ignoreLabelLineUpdate,u=o.isAnimationEnabled();l.group.traverse(function(d){if(d.ignore&&!d.forceLabelAnimation)return!0;var f=!c,g=d.getTextContent();!f&&g&&(f=labelLayoutInnerStore(g).needsUpdateLabelLine),f&&s._updateLabelLine(d,o),u&&s._animateLabels(d,o)})})},a.prototype._updateLabelLine=function(s,l){var o=s.getTextContent(),c=getECData(s),u=c.dataIndex;if(o&&u!=null){var d=l.getData(c.dataType),f=d.getItemModel(u),g={},y=d.getItemVisual(u,"style");if(y){var $=d.getVisual("drawType");g.stroke=y[$]}var x=f.getModel("labelLine");setLabelLineStyle(s,getLabelLineStatesModels(f),g),updateLabelLinePoints(s,x)}},a.prototype._animateLabels=function(s,l){var o=s.getTextContent(),c=s.getTextGuideLine();if(o&&(s.forceLabelAnimation||!o.ignore&&!o.invisible&&!s.disableLabelAnimation&&!isElementRemoved(s))){var u=labelLayoutInnerStore(o),d=u.oldLayout,f=getECData(s),g=f.dataIndex,y={x:o.x,y:o.y,rotation:o.rotation},$=l.getData(f.dataType);if(d){o.attr(d);var N=s.prevStates;N&&(indexOf(N,"select")>=0&&o.attr(u.oldLayoutSelect),indexOf(N,"emphasis")>=0&&o.attr(u.oldLayoutEmphasis)),updateProps$1(o,y,l,g)}else if(o.attr(y),!labelInner(o).valueAnimation){var x=retrieve2(o.style.opacity,1);o.style.opacity=0,initProps(o,{style:{opacity:x}},l,g)}if(u.oldLayout=y,o.states.select){var R=u.oldLayoutSelect={};extendWithKeys(R,y,LABEL_LAYOUT_PROPS),extendWithKeys(R,o.states.select,LABEL_LAYOUT_PROPS)}if(o.states.emphasis){var j=u.oldLayoutEmphasis={};extendWithKeys(j,y,LABEL_LAYOUT_PROPS),extendWithKeys(j,o.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(o,g,$,l,l)}if(c&&!c.ignore&&!c.invisible){var u=labelLineAnimationStore(c),d=u.oldLayout,ne={points:c.shape.points};d?(c.attr({shape:d}),updateProps$1(c,{shape:ne},l)):(c.setShape(ne),c.style.strokePercent=0,initProps(c,{style:{strokePercent:1}},l)),u.oldLayout=ne}},a}(),getLabelManager=makeInner();function installLabelLayout(a){a.registerUpdateLifecycle("series:beforeupdate",function(s,l,o){var c=getLabelManager(l).labelManager;c||(c=getLabelManager(l).labelManager=new LabelManager),c.clearLabels()}),a.registerUpdateLifecycle("series:layoutlabels",function(s,l,o){var c=getLabelManager(l).labelManager;o.updatedSeries.forEach(function(u){c.addLabelsOfSeries(l.getViewOfSeriesModel(u))}),c.updateLayoutConfig(l),c.layout(l),c.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function a(){}return a.prototype.reset=function(s){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,s||4)},a.prototype.moveTo=function(s,l){this._add("M",s,l)},a.prototype.lineTo=function(s,l){this._add("L",s,l)},a.prototype.bezierCurveTo=function(s,l,o,c,u,d){this._add("C",s,l,o,c,u,d)},a.prototype.quadraticCurveTo=function(s,l,o,c){this._add("Q",s,l,o,c)},a.prototype.arc=function(s,l,o,c,u,d){this.ellipse(s,l,o,o,0,c,u,d)},a.prototype.ellipse=function(s,l,o,c,u,d,f,g){var y=f-d,$=!g,x=Math.abs(y),N=isAroundZero(x-PI2$1)||($?y>=PI2$1:-y>=PI2$1),R=y>0?y%PI2$1:y%PI2$1+PI2$1,j=!1;N?j=!0:isAroundZero(x)?j=!1:j=R>=PI$4==!!$;var ne=s+o*mathCos(d),se=l+c*mathSin(d);this._start&&this._add("M",ne,se);var ce=Math.round(u*degree);if(N){var fe=1/this._p,ea=($?1:-1)*(PI2$1-fe);this._add("A",o,c,ce,1,+$,s+o*mathCos(d+ea),l+c*mathSin(d+ea)),fe>.01&&this._add("A",o,c,ce,0,+$,ne,se)}else{var ta=s+o*mathCos(f),na=l+c*mathSin(f);this._add("A",o,c,ce,+j,+$,ta,na)}},a.prototype.rect=function(s,l,o,c){this._add("M",s,l),this._add("l",o,0),this._add("l",0,c),this._add("l",-o,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(s,l,o,c,u,d,f,g,y){for(var $=[],x=this._p,N=1;N<arguments.length;N++){var R=arguments[N];if(isNaN(R)){this._invalid=!0;return}$.push(Math.round(R*x)/x)}this._d.push(s+$.join(" ")),this._start=s==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),NONE="none",mathRound=Math.round;function pathHasFill(a){var s=a.fill;return s!=null&&s!==NONE}function pathHasStroke(a){var s=a.stroke;return s!=null&&s!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(a){return"stroke-"+a.toLowerCase()});function mapStyleToAttrs(a,s,l,o){var c=s.opacity==null?1:s.opacity;if(l instanceof ZRImage){a("opacity",c);return}if(pathHasFill(s)){var u=normalizeColor(s.fill);a("fill",u.color);var d=s.fillOpacity!=null?s.fillOpacity*u.opacity*c:u.opacity*c;d<1&&a("fill-opacity",d)}else a("fill",NONE);if(pathHasStroke(s)){var f=normalizeColor(s.stroke);a("stroke",f.color);var g=s.strokeNoScale?l.getLineScale():1,y=g?(s.lineWidth||0)/g:0,$=s.strokeOpacity!=null?s.strokeOpacity*f.opacity*c:f.opacity*c,x=s.strokeFirst;if(y!==1&&a("stroke-width",y),x&&a("paint-order",x?"stroke":"fill"),$<1&&a("stroke-opacity",$),s.lineDash){var N=getLineDash(l),R=N[0],j=N[1];R&&(j=mathRound(j||0),a("stroke-dasharray",R.join(",")),(j||o)&&a("stroke-dashoffset",j))}for(var ne=0;ne<strokeProps.length;ne++){var se=strokeProps[ne];if(s[se]!==DEFAULT_PATH_STYLE[se]){var ce=s[se]||DEFAULT_PATH_STYLE[se];ce&&a(svgStrokeProps[ne],ce)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(a){return document.createElementNS(SVGNS,a)}function createVNode(a,s,l,o,c){return{tag:a,attrs:l||{},children:o,text:c,key:s}}function createElementOpen(a,s){var l=[];if(s)for(var o in s){var c=s[o],u=o;c!==!1&&(c!==!0&&c!=null&&(u+='="'+c+'"'),l.push(u))}return"<"+a+" "+l.join(" ")+">"}function createElementClose(a){return"</"+a+">"}function vNodeToString(a,s){s=s||{};var l=s.newline?`
`:"";function o(c){var u=c.children,d=c.tag,f=c.attrs,g=c.text;return createElementOpen(d,f)+(d!=="style"?encodeHTML(g):g||"")+(u?""+l+map$1(u,function(y){return o(y)}).join(l)+l:"")+createElementClose(d)}return o(a)}function getCssString(a,s,l){l=l||{};var o=l.newline?`
`:"",c=" {"+o,u=o+"}",d=map$1(keys(a),function(g){return g+c+map$1(keys(a[g]),function(y){return y+":"+a[g][y]+";"}).join(o)+u}).join(o),f=map$1(keys(s),function(g){return"@keyframes "+g+c+map$1(keys(s[g]),function(y){return y+c+map$1(keys(s[g][y]),function($){var x=s[g][y][$];return $==="d"&&(x='path("'+x+'")'),$+":"+x+";"}).join(o)+u}).join(o)+u}).join(o);return!d&&!f?"":["<![CDATA[",d,f,"]]>"].join(o)}function createBrushScope(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(a,s,l,o){return createVNode("svg","root",{width:a,height:s,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:o?"0 0 "+a+" "+s:!1},l)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(a,s,l){var o=extend({},a.shape);extend(o,s),a.buildPath(l,o);var c=new SVGPathRebuilder;return c.reset(getPathPrecision(a)),l.rebuildPath(c,1),c.generateStr(),c.getStr()}function setTransformOrigin(a,s){var l=s.originX,o=s.originY;(l||o)&&(a[transformOriginKey]=l+"px "+o+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(a,s){var l=s.zrId+"-ani-"+s.cssAnimIdx++;return s.cssAnims[l]=a,l}function createCompoundPathCSSAnimation(a,s,l){var o=a.shape.paths,c={},u,d;if(each$f(o,function(g){var y=createBrushScope(l.zrId);y.animation=!0,createCSSAnimation(g,{},y,!0);var $=y.cssAnims,x=y.cssNodes,N=keys($),R=N.length;if(R){d=N[R-1];var j=$[d];for(var ne in j){var se=j[ne];c[ne]=c[ne]||{d:""},c[ne].d+=se.d||""}for(var ce in x){var fe=x[ce].animation;fe.indexOf(d)>=0&&(u=fe)}}}),!!u){s.d=!1;var f=addAnimation(c,l);return u.replace(d,f)}}function getEasingFunc(a){return isString$2(a)?EASING_MAP[a]?"cubic-bezier("+EASING_MAP[a]+")":createCubicEasingFunc(a)?a:"":""}function createCSSAnimation(a,s,l,o){var c=a.animators,u=c.length,d=[];if(a instanceof CompoundPath$1){var f=createCompoundPathCSSAnimation(a,s,l);if(f)d.push(f);else if(!u)return}else if(!u)return;for(var g={},y=0;y<u;y++){var $=c[y],x=[$.getMaxTime()/1e3+"s"],N=getEasingFunc($.getClip().easing),R=$.getDelay();N?x.push(N):x.push("linear"),R&&x.push(R/1e3+"s"),$.getLoop()&&x.push("infinite");var j=x.join(" ");g[j]=g[j]||[j,[]],g[j][1].push($)}function ne(fe){var ea=fe[1],ta=ea.length,na={},aa={},ia={},sa="animation-timing-function";function ra(Da,Ta,Ba){for(var wa=Da.getTracks(),Oa=Da.getMaxTime(),Aa=0;Aa<wa.length;Aa++){var Sa=wa[Aa];if(Sa.needsAnimate()){var Fa=Sa.keyframes,Ia=Sa.propName;if(Ba&&(Ia=Ba(Ia)),Ia)for(var Ga=0;Ga<Fa.length;Ga++){var Ya=Fa[Ga],Va=Math.round(Ya.time/Oa*100)+"%",La=getEasingFunc(Ya.easing),Za=Ya.rawValue;(isString$2(Za)||isNumber$2(Za))&&(Ta[Va]=Ta[Va]||{},Ta[Va][Ia]=Ya.rawValue,La&&(Ta[Va][sa]=La))}}}}for(var la=0;la<ta;la++){var oa=ea[la],ca=oa.targetName;ca?ca==="shape"&&ra(oa,aa):!o&&ra(oa,na)}for(var pa in na){var ua={};copyTransform(ua,a),extend(ua,na[pa]);var da=getSRTTransformString(ua),ha=na[pa][sa];ia[pa]=da?{transform:da}:{},setTransformOrigin(ia[pa],ua),ha&&(ia[pa][sa]=ha)}var ga,fa=!0;for(var pa in aa){ia[pa]=ia[pa]||{};var ma=!ga,ha=aa[pa][sa];ma&&(ga=new PathProxy);var va=ga.len();ga.reset(),ia[pa].d=buildPathString(a,aa[pa],ga);var ka=ga.len();if(!ma&&va!==ka){fa=!1;break}ha&&(ia[pa][sa]=ha)}if(!fa)for(var pa in ia)delete ia[pa].d;if(!o)for(var la=0;la<ta;la++){var oa=ea[la],ca=oa.targetName;ca==="style"&&ra(oa,ia,function(wa){return ANIMATE_STYLE_MAP[wa]})}for(var ya=keys(ia),ba=!0,Ea,la=1;la<ya.length;la++){var Ca=ya[la-1],$a=ya[la];if(ia[Ca][transformOriginKey]!==ia[$a][transformOriginKey]){ba=!1;break}Ea=ia[Ca][transformOriginKey]}if(ba&&Ea){for(var pa in ia)ia[pa][transformOriginKey]&&delete ia[pa][transformOriginKey];s[transformOriginKey]=Ea}if(filter(ya,function(Da){return keys(ia[Da]).length>0}).length){var Pa=addAnimation(ia,l);return Pa+" "+fe[0]+" both"}}for(var se in g){var f=ne(g[se]);f&&d.push(f)}if(d.length){var ce=l.zrId+"-cls-"+getClassId();l.cssNodes["."+ce]={animation:d.join(",")},s.class=ce}}function createCSSEmphasis(a,s,l){if(!a.ignore)if(a.isSilent()){var o={"pointer-events":"none"};setClassAttribute(o,s,l)}else{var c=a.states.emphasis&&a.states.emphasis.style?a.states.emphasis.style:{},u=c.fill;if(!u){var d=a.style&&a.style.fill,f=a.states.select&&a.states.select.style&&a.states.select.style.fill,g=a.currentStates.indexOf("select")>=0&&f||d;g&&(u=liftColor(g))}var y=c.lineWidth;if(y){var $=!c.strokeNoScale&&a.transform?a.transform[0]:1;y=y/$}var o={cursor:"pointer"};u&&(o.fill=u),c.stroke&&(o.stroke=c.stroke),y&&(o["stroke-width"]=y),setClassAttribute(o,s,l)}}function setClassAttribute(a,s,l,o){var c=JSON.stringify(a),u=l.cssStyleCache[c];u||(u=l.zrId+"-cls-"+getClassId(),l.cssStyleCache[c]=u,l.cssNodes["."+u+":hover"]=a),s.class=s.class?s.class+" "+u:u}var round$2=Math.round;function isImageLike(a){return a&&isString$2(a.src)}function isCanvasLike(a){return a&&isFunction$2(a.toDataURL)}function setStyleAttrs(a,s,l,o){mapStyleToAttrs(function(c,u){var d=c==="fill"||c==="stroke";d&&isGradient(u)?setGradient(s,a,c,o):d&&isPattern(u)?setPattern(l,a,c,o):d&&u==="none"?a[c]="transparent":a[c]=u},s,l,!1),setShadow(l,a,o)}function setMetaData(a,s){var l=getElementSSRData(s);l&&(l.each(function(o,c){o!=null&&(a[(META_DATA_PREFIX+c).toLowerCase()]=o+"")}),s.isSilent()&&(a[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(a){return isAroundZero(a[0]-1)&&isAroundZero(a[1])&&isAroundZero(a[2])&&isAroundZero(a[3]-1)}function noTranslate(a){return isAroundZero(a[4])&&isAroundZero(a[5])}function setTransform(a,s,l){if(s&&!(noTranslate(s)&&noRotateScale(s))){var o=1e4;a.transform=noRotateScale(s)?"translate("+round$2(s[4]*o)/o+" "+round$2(s[5]*o)/o+")":getMatrixStr(s)}}function convertPolyShape(a,s,l){for(var o=a.points,c=[],u=0;u<o.length;u++)c.push(round$2(o[u][0]*l)/l),c.push(round$2(o[u][1]*l)/l);s.points=c.join(" ")}function validatePolyShape(a){return!a.smooth}function createAttrsConvert(a){var s=map$1(a,function(l){return typeof l=="string"?[l,l]:l});return function(l,o,c){for(var u=0;u<s.length;u++){var d=s[u],f=l[d[0]];f!=null&&(o[d[1]]=round$2(f*c)/c)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(a){for(var s=a.animators,l=0;l<s.length;l++)if(s[l].targetName==="shape")return!0;return!1}function brushSVGPath(a,s){var l=a.style,o=a.shape,c=builtinShapesDef[a.type],u={},d=s.animation,f="path",g=a.style.strokePercent,y=s.compress&&getPathPrecision(a)||4;if(c&&!s.willUpdate&&!(c[1]&&!c[1](o))&&!(d&&hasShapeAnimation(a))&&!(g<1)){f=a.type;var $=Math.pow(10,y);c[0](o,u,$)}else{var x=!a.path||a.shapeChanged();a.path||a.createPathProxy();var N=a.path;x&&(N.beginPath(),a.buildPath(N,a.shape),a.pathUpdated());var R=N.getVersion(),j=a,ne=j.__svgPathBuilder;(j.__svgPathVersion!==R||!ne||g!==j.__svgPathStrokePercent)&&(ne||(ne=j.__svgPathBuilder=new SVGPathRebuilder),ne.reset(y),N.rebuildPath(ne,g),ne.generateStr(),j.__svgPathVersion=R,j.__svgPathStrokePercent=g),u.d=ne.getStr()}return setTransform(u,a.transform),setStyleAttrs(u,l,a,s),setMetaData(u,a),s.animation&&createCSSAnimation(a,u,s),s.emphasis&&createCSSEmphasis(a,u,s),createVNode(f,a.id+"",u)}function brushSVGImage(a,s){var l=a.style,o=l.image;if(o&&!isString$2(o)&&(isImageLike(o)?o=o.src:isCanvasLike(o)&&(o=o.toDataURL())),!!o){var c=l.x||0,u=l.y||0,d=l.width,f=l.height,g={href:o,width:d,height:f};return c&&(g.x=c),u&&(g.y=u),setTransform(g,a.transform),setStyleAttrs(g,l,a,s),setMetaData(g,a),s.animation&&createCSSAnimation(a,g,s),createVNode("image",a.id+"",g)}}function brushSVGTSpan(a,s){var l=a.style,o=l.text;if(o!=null&&(o+=""),!(!o||isNaN(l.x)||isNaN(l.y))){var c=l.font||DEFAULT_FONT,u=l.x||0,d=adjustTextY$1(l.y||0,getLineHeight(c),l.textBaseline),f=TEXT_ALIGN_TO_ANCHOR[l.textAlign]||l.textAlign,g={"dominant-baseline":"central","text-anchor":f};if(hasSeparateFont(l)){var y="",$=l.fontStyle,x=parseFontSize(l.fontSize);if(!parseFloat(x))return;var N=l.fontFamily||DEFAULT_FONT_FAMILY,R=l.fontWeight;y+="font-size:"+x+";font-family:"+N+";",$&&$!=="normal"&&(y+="font-style:"+$+";"),R&&R!=="normal"&&(y+="font-weight:"+R+";"),g.style=y}else g.style="font: "+c;return o.match(/\s/)&&(g["xml:space"]="preserve"),u&&(g.x=u),d&&(g.y=d),setTransform(g,a.transform),setStyleAttrs(g,l,a,s),setMetaData(g,a),s.animation&&createCSSAnimation(a,g,s),createVNode("text",a.id+"",g,void 0,o)}}function brush(a,s){if(a instanceof Path)return brushSVGPath(a,s);if(a instanceof ZRImage)return brushSVGImage(a,s);if(a instanceof TSpan)return brushSVGTSpan(a,s)}function setShadow(a,s,l){var o=a.style;if(hasShadow(o)){var c=getShadowKey(a),u=l.shadowCache,d=u[c];if(!d){var f=a.getGlobalScale(),g=f[0],y=f[1];if(!g||!y)return;var $=o.shadowOffsetX||0,x=o.shadowOffsetY||0,N=o.shadowBlur,R=normalizeColor(o.shadowColor),j=R.opacity,ne=R.color,se=N/2/g,ce=N/2/y,fe=se+" "+ce;d=l.zrId+"-s"+l.shadowIdx++,l.defs[d]=createVNode("filter",d,{id:d,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:$/g,dy:x/y,stdDeviation:fe,"flood-color":ne,"flood-opacity":j})]),u[c]=d}s.filter=getIdURL(d)}}function setGradient(a,s,l,o){var c=a[l],u,d={gradientUnits:c.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(c))u="linearGradient",d.x1=c.x,d.y1=c.y,d.x2=c.x2,d.y2=c.y2;else if(isRadialGradient(c))u="radialGradient",d.cx=retrieve2(c.x,.5),d.cy=retrieve2(c.y,.5),d.r=retrieve2(c.r,.5);else return;for(var f=c.colorStops,g=[],y=0,$=f.length;y<$;++y){var x=round4(f[y].offset)*100+"%",N=f[y].color,R=normalizeColor(N),j=R.color,ne=R.opacity,se={offset:x};se["stop-color"]=j,ne<1&&(se["stop-opacity"]=ne),g.push(createVNode("stop",y+"",se))}var ce=createVNode(u,"",d,g),fe=vNodeToString(ce),ea=o.gradientCache,ta=ea[fe];ta||(ta=o.zrId+"-g"+o.gradientIdx++,ea[fe]=ta,d.id=ta,o.defs[ta]=createVNode(u,ta,d,g)),s[l]=getIdURL(ta)}function setPattern(a,s,l,o){var c=a.style[l],u=a.getBoundingRect(),d={},f=c.repeat,g=f==="no-repeat",y=f==="repeat-x",$=f==="repeat-y",x;if(isImagePattern(c)){var N=c.imageWidth,R=c.imageHeight,j=void 0,ne=c.image;if(isString$2(ne)?j=ne:isImageLike(ne)?j=ne.src:isCanvasLike(ne)&&(j=ne.toDataURL()),typeof Image>"u"){var se="Image width/height must been given explictly in svg-ssr renderer.";assert(N,se),assert(R,se)}else if(N==null||R==null){var ce=function(la,oa){if(la){var ca=la.elm,pa=N||oa.width,ua=R||oa.height;la.tag==="pattern"&&(y?(ua=1,pa/=u.width):$&&(pa=1,ua/=u.height)),la.attrs.width=pa,la.attrs.height=ua,ca&&(ca.setAttribute("width",pa),ca.setAttribute("height",ua))}},fe=createOrUpdateImage(j,null,a,function(la){g||ce(aa,la),ce(x,la)});fe&&fe.width&&fe.height&&(N=N||fe.width,R=R||fe.height)}x=createVNode("image","img",{href:j,width:N,height:R}),d.width=N,d.height=R}else c.svgElement&&(x=clone$4(c.svgElement),d.width=c.svgWidth,d.height=c.svgHeight);if(x){var ea,ta;g?ea=ta=1:y?(ta=1,ea=d.width/u.width):$?(ea=1,ta=d.height/u.height):d.patternUnits="userSpaceOnUse",ea!=null&&!isNaN(ea)&&(d.width=ea),ta!=null&&!isNaN(ta)&&(d.height=ta);var na=getSRTTransformString(c);na&&(d.patternTransform=na);var aa=createVNode("pattern","",d,[x]),ia=vNodeToString(aa),sa=o.patternCache,ra=sa[ia];ra||(ra=o.zrId+"-p"+o.patternIdx++,sa[ia]=ra,d.id=ra,aa=o.defs[ra]=createVNode("pattern",ra,d,[x])),s[l]=getIdURL(ra)}}function setClipPath(a,s,l){var o=l.clipPathCache,c=l.defs,u=o[a.id];if(!u){u=l.zrId+"-c"+l.clipPathIdx++;var d={id:u};o[a.id]=u,c[u]=createVNode("clipPath",u,d,[brushSVGPath(a,l)])}s["clip-path"]=getIdURL(u)}function createTextNode(a){return document.createTextNode(a)}function insertBefore(a,s,l){a.insertBefore(s,l)}function removeChild(a,s){a.removeChild(s)}function appendChild(a,s){a.appendChild(s)}function parentNode(a){return a.parentNode}function nextSibling(a){return a.nextSibling}function setTextContent(a,s){a.textContent=s}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(a){return a===void 0}function isDef(a){return a!==void 0}function createKeyToOldIdx(a,s,l){for(var o={},c=s;c<=l;++c){var u=a[c].key;u!==void 0&&(o[u]=c)}return o}function sameVnode(a,s){var l=a.key===s.key,o=a.tag===s.tag;return o&&l}function createElm(a){var s,l=a.children,o=a.tag;if(isDef(o)){var c=a.elm=createElement(o);if(updateAttrs(emptyNode,a),isArray$3(l))for(s=0;s<l.length;++s){var u=l[s];u!=null&&appendChild(c,createElm(u))}else isDef(a.text)&&!isObject$5(a.text)&&appendChild(c,createTextNode(a.text))}else a.elm=createTextNode(a.text);return a.elm}function addVnodes(a,s,l,o,c){for(;o<=c;++o){var u=l[o];u!=null&&insertBefore(a,createElm(u),s)}}function removeVnodes(a,s,l,o){for(;l<=o;++l){var c=s[l];if(c!=null)if(isDef(c.tag)){var u=parentNode(c.elm);removeChild(u,c.elm)}else removeChild(a,c.elm)}}function updateAttrs(a,s){var l,o=s.elm,c=a&&a.attrs||{},u=s.attrs||{};if(c!==u){for(l in u){var d=u[l],f=c[l];f!==d&&(d===!0?o.setAttribute(l,""):d===!1?o.removeAttribute(l):l==="style"?o.style.cssText=d:l.charCodeAt(0)!==xChar?o.setAttribute(l,d):l==="xmlns:xlink"||l==="xmlns"?o.setAttributeNS(XMLNS,l,d):l.charCodeAt(3)===colonChar?o.setAttributeNS(XML_NAMESPACE,l,d):l.charCodeAt(5)===colonChar?o.setAttributeNS(XLINKNS,l,d):o.setAttribute(l,d))}for(l in c)l in u||o.removeAttribute(l)}}function updateChildren(a,s,l){for(var o=0,c=0,u=s.length-1,d=s[0],f=s[u],g=l.length-1,y=l[0],$=l[g],x,N,R,j;o<=u&&c<=g;)d==null?d=s[++o]:f==null?f=s[--u]:y==null?y=l[++c]:$==null?$=l[--g]:sameVnode(d,y)?(patchVnode(d,y),d=s[++o],y=l[++c]):sameVnode(f,$)?(patchVnode(f,$),f=s[--u],$=l[--g]):sameVnode(d,$)?(patchVnode(d,$),insertBefore(a,d.elm,nextSibling(f.elm)),d=s[++o],$=l[--g]):sameVnode(f,y)?(patchVnode(f,y),insertBefore(a,f.elm,d.elm),f=s[--u],y=l[++c]):(isUndef(x)&&(x=createKeyToOldIdx(s,o,u)),N=x[y.key],isUndef(N)?insertBefore(a,createElm(y),d.elm):(R=s[N],R.tag!==y.tag?insertBefore(a,createElm(y),d.elm):(patchVnode(R,y),s[N]=void 0,insertBefore(a,R.elm,d.elm))),y=l[++c]);(o<=u||c<=g)&&(o>u?(j=l[g+1]==null?null:l[g+1].elm,addVnodes(a,j,l,c,g)):removeVnodes(a,s,o,u))}function patchVnode(a,s){var l=s.elm=a.elm,o=a.children,c=s.children;a!==s&&(updateAttrs(a,s),isUndef(s.text)?isDef(o)&&isDef(c)?o!==c&&updateChildren(l,o,c):isDef(c)?(isDef(a.text)&&setTextContent(l,""),addVnodes(l,null,c,0,c.length-1)):isDef(o)?removeVnodes(l,o,0,o.length-1):isDef(a.text)&&setTextContent(l,""):a.text!==s.text&&(isDef(o)&&removeVnodes(l,o,0,o.length-1),setTextContent(l,s.text)))}function patch(a,s){if(sameVnode(a,s))patchVnode(a,s);else{var l=a.elm,o=parentNode(l);createElm(s),o!==null&&(insertBefore(o,s.elm,nextSibling(l)),removeVnodes(o,[a],0,0))}return s}var svgId=0,SVGPainter=function(){function a(s,l,o){if(this.type="svg",this.refreshHover=createMethodNotSupport(),this.configLayer=createMethodNotSupport(),this.storage=l,this._opts=o=extend({},o),this.root=s,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(o.width,o.height),s&&!o.ssr){var c=this._viewport=document.createElement("div");c.style.cssText="position:relative;overflow:hidden";var u=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),c.appendChild(u),s.appendChild(c)}this.resize(o.width,o.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var s=this.getViewportRoot();if(s)return{offsetLeft:s.offsetLeft||0,offsetTop:s.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var s=this.renderToVNode({willUpdate:!0});s.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,s),this._oldVNode=s}},a.prototype.renderOneToVNode=function(s){return brush(s,createBrushScope(this._id))},a.prototype.renderToVNode=function(s){s=s||{};var l=this.storage.getDisplayList(!0),o=this._width,c=this._height,u=createBrushScope(this._id);u.animation=s.animation,u.willUpdate=s.willUpdate,u.compress=s.compress,u.emphasis=s.emphasis;var d=[],f=this._bgVNode=createBackgroundVNode(o,c,this._backgroundColor,u);f&&d.push(f);var g=s.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(l,u,g?g.children:d),g&&d.push(g);var y=map$1(keys(u.defs),function(N){return u.defs[N]});if(y.length&&d.push(createVNode("defs","defs",{},y)),s.animation){var $=getCssString(u.cssNodes,u.cssAnims,{newline:!0});if($){var x=createVNode("style","stl",{},[],$);d.push(x)}}return createSVGVNode(o,c,d,s.useViewBox)},a.prototype.renderToString=function(s){return s=s||{},vNodeToString(this.renderToVNode({animation:retrieve2(s.cssAnimation,!0),emphasis:retrieve2(s.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(s.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(s){this._backgroundColor=s},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(s,l,o){for(var c=s.length,u=[],d=0,f,g,y=0,$=0;$<c;$++){var x=s[$];if(!x.invisible){var N=x.__clipPaths,R=N&&N.length||0,j=g&&g.length||0,ne=void 0;for(ne=Math.max(R-1,j-1);ne>=0&&!(N&&g&&N[ne]===g[ne]);ne--);for(var se=j-1;se>ne;se--)d--,f=u[d-1];for(var ce=ne+1;ce<R;ce++){var fe={};setClipPath(N[ce],fe,l);var ea=createVNode("g","clip-g-"+y++,fe,[]);(f?f.children:o).push(ea),u[d++]=ea,f=ea}g=N;var ta=brush(x,l);ta&&(f?f.children:o).push(ta)}}},a.prototype.resize=function(s,l){var o=this._opts,c=this.root,u=this._viewport;if(s!=null&&(o.width=s),l!=null&&(o.height=l),c&&u&&(u.style.display="none",s=getSize$1(c,0,o),l=getSize$1(c,1,o),u.style.display=""),this._width!==s||this._height!==l){if(this._width=s,this._height=l,u){var d=u.style;d.width=s+"px",d.height=l+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var f=this._svgDom;f&&(f.setAttribute("width",s),f.setAttribute("height",l));var g=this._bgVNode&&this._bgVNode.elm;g&&(g.setAttribute("width",s),g.setAttribute("height",l))}}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(s){var l=this.renderToString(),o="data:image/svg+xml;";return s?(l=encodeBase64(l),l&&o+"base64,"+l):o+"charset=UTF-8,"+encodeURIComponent(l)},a}();function createMethodNotSupport(a){return function(){}}function createBackgroundVNode(a,s,l,o){var c;if(l&&l!=="none")if(c=createVNode("rect","bg",{width:a,height:s,x:"0",y:"0"}),isGradient(l))setGradient({fill:l},c.attrs,"fill",o);else if(isPattern(l))setPattern({style:{fill:l},dirty:noop,getBoundingRect:function(){return{width:a,height:s}}},c.attrs,"fill",o);else{var u=normalizeColor(l),d=u.color,f=u.opacity;c.attrs.fill=d,f<1&&(c.attrs["fill-opacity"]=f)}return c}function install$T(a){a.registerPainter("svg",SVGPainter)}function createDom(a,s,l){var o=platformApi.createCanvas(),c=s.getWidth(),u=s.getHeight(),d=o.style;return d&&(d.position="absolute",d.left="0",d.top="0",d.width=c+"px",d.height=u+"px",o.setAttribute("data-zr-dom-id",a)),o.width=c*l,o.height=u*l,o}var Layer=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this)||this;u.motionBlur=!1,u.lastFrameAlpha=.7,u.dpr=1,u.virtual=!1,u.config={},u.incremental=!1,u.zlevel=0,u.maxRepaintRectCount=5,u.__dirty=!0,u.__firstTimePaint=!0,u.__used=!1,u.__drawIndex=0,u.__startIndex=0,u.__endIndex=0,u.__prevStartIndex=null,u.__prevEndIndex=null;var d;c=c||devicePixelRatio,typeof l=="string"?d=createDom(l,o,c):isObject$5(l)&&(d=l,l=d.id),u.id=l,u.dom=d;var f=d.style;return f&&(disableUserSelect(d),d.onselectstart=function(){return!1},f.padding="0",f.margin="0",f.borderWidth="0"),u.painter=o,u.dpr=c,u}return s.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},s.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},s.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},s.prototype.setUnpainted=function(){this.__firstTimePaint=!0},s.prototype.createBackBuffer=function(){var l=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,l),this.ctxBack=this.domBack.getContext("2d"),l!==1&&this.ctxBack.scale(l,l)},s.prototype.createRepaintRects=function(l,o,c,u){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var d=[],f=this.maxRepaintRectCount,g=!1,y=new BoundingRect(0,0,0,0);function $(fe){if(!(!fe.isFinite()||fe.isZero()))if(d.length===0){var ea=new BoundingRect(0,0,0,0);ea.copy(fe),d.push(ea)}else{for(var ta=!1,na=1/0,aa=0,ia=0;ia<d.length;++ia){var sa=d[ia];if(sa.intersect(fe)){var ra=new BoundingRect(0,0,0,0);ra.copy(sa),ra.union(fe),d[ia]=ra,ta=!0;break}else if(g){y.copy(fe),y.union(sa);var la=fe.width*fe.height,oa=sa.width*sa.height,ca=y.width*y.height,pa=ca-la-oa;pa<na&&(na=pa,aa=ia)}}if(g&&(d[aa].union(fe),ta=!0),!ta){var ea=new BoundingRect(0,0,0,0);ea.copy(fe),d.push(ea)}g||(g=d.length>=f)}}for(var x=this.__startIndex;x<this.__endIndex;++x){var N=l[x];if(N){var R=N.shouldBePainted(c,u,!0,!0),j=N.__isRendered&&(N.__dirty&REDRAW_BIT||!R)?N.getPrevPaintRect():null;j&&$(j);var ne=R&&(N.__dirty&REDRAW_BIT||!N.__isRendered)?N.getPaintRect():null;ne&&$(ne)}}for(var x=this.__prevStartIndex;x<this.__prevEndIndex;++x){var N=o[x],R=N&&N.shouldBePainted(c,u,!0,!0);if(N&&(!R||!N.__zr)&&N.__isRendered){var j=N.getPrevPaintRect();j&&$(j)}}var se;do{se=!1;for(var x=0;x<d.length;){if(d[x].isZero()){d.splice(x,1);continue}for(var ce=x+1;ce<d.length;)d[x].intersect(d[ce])?(se=!0,d[x].union(d[ce]),d.splice(ce,1)):ce++;x++}}while(se);return this._paintRects=d,d},s.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},s.prototype.resize=function(l,o){var c=this.dpr,u=this.dom,d=u.style,f=this.domBack;d&&(d.width=l+"px",d.height=o+"px"),u.width=l*c,u.height=o*c,f&&(f.width=l*c,f.height=o*c,c!==1&&this.ctxBack.scale(c,c))},s.prototype.clear=function(l,o,c){var u=this.dom,d=this.ctx,f=u.width,g=u.height;o=o||this.clearColor;var y=this.motionBlur&&!l,$=this.lastFrameAlpha,x=this.dpr,N=this;y&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(u,0,0,f/x,g/x));var R=this.domBack;function j(ne,se,ce,fe){if(d.clearRect(ne,se,ce,fe),o&&o!=="transparent"){var ea=void 0;if(isGradientObject(o)){var ta=o.global||o.__width===ce&&o.__height===fe;ea=ta&&o.__canvasGradient||getCanvasGradient(d,o,{x:0,y:0,width:ce,height:fe}),o.__canvasGradient=ea,o.__width=ce,o.__height=fe}else isImagePatternObject(o)&&(o.scaleX=o.scaleX||x,o.scaleY=o.scaleY||x,ea=createCanvasPattern(d,o,{dirty:function(){N.setUnpainted(),N.painter.refresh()}}));d.save(),d.fillStyle=ea||o,d.fillRect(ne,se,ce,fe),d.restore()}y&&(d.save(),d.globalAlpha=$,d.drawImage(R,ne,se,ce,fe),d.restore())}!c||y?j(0,0,f,g):c.length&&each$f(c,function(ne){j(ne.x*x,ne.y*x,ne.width*x,ne.height*x)})},s}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(a){return a?a.__builtin__?!0:!(typeof a.resize!="function"||typeof a.refresh!="function"):!1}function createRoot(a,s){var l=document.createElement("div");return l.style.cssText=["position:relative","width:"+a+"px","height:"+s+"px","padding:0","margin:0","border-width:0"].join(";")+";",l}var CanvasPainter=function(){function a(s,l,o,c){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var u=!s.nodeName||s.nodeName.toUpperCase()==="CANVAS";this._opts=o=extend({},o||{}),this.dpr=o.devicePixelRatio||devicePixelRatio,this._singleCanvas=u,this.root=s;var d=s.style;d&&(disableUserSelect(s),s.innerHTML=""),this.storage=l;var f=this._zlevelList;this._prevDisplayList=[];var g=this._layers;if(u){var $=s,x=$.width,N=$.height;o.width!=null&&(x=o.width),o.height!=null&&(N=o.height),this.dpr=o.devicePixelRatio||1,$.width=x*this.dpr,$.height=N*this.dpr,this._width=x,this._height=N;var R=new Layer($,this,this.dpr);R.__builtin__=!0,R.initContext(),g[CANVAS_ZLEVEL]=R,R.zlevel=CANVAS_ZLEVEL,f.push(CANVAS_ZLEVEL),this._domRoot=s}else{this._width=getSize$1(s,0,o),this._height=getSize$1(s,1,o);var y=this._domRoot=createRoot(this._width,this._height);s.appendChild(y)}}return a.prototype.getType=function(){return"canvas"},a.prototype.isSingleCanvas=function(){return this._singleCanvas},a.prototype.getViewportRoot=function(){return this._domRoot},a.prototype.getViewportRootOffset=function(){var s=this.getViewportRoot();if(s)return{offsetLeft:s.offsetLeft||0,offsetTop:s.offsetTop||0}},a.prototype.refresh=function(s){var l=this.storage.getDisplayList(!0),o=this._prevDisplayList,c=this._zlevelList;this._redrawId=Math.random(),this._paintList(l,o,s,this._redrawId);for(var u=0;u<c.length;u++){var d=c[u],f=this._layers[d];if(!f.__builtin__&&f.refresh){var g=u===0?this._backgroundColor:null;f.refresh(g)}}return this._opts.useDirtyRect&&(this._prevDisplayList=l.slice()),this},a.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},a.prototype._paintHoverList=function(s){var l=s.length,o=this._hoverlayer;if(o&&o.clear(),!!l){for(var c={inHover:!0,viewWidth:this._width,viewHeight:this._height},u,d=0;d<l;d++){var f=s[d];f.__inHover&&(o||(o=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),u||(u=o.ctx,u.save()),brush$1(u,f,c,d===l-1))}u&&u.restore()}},a.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},a.prototype.paintOne=function(s,l){brushSingle(s,l)},a.prototype._paintList=function(s,l,o,c){if(this._redrawId===c){o=o||!1,this._updateLayerStatus(s);var u=this._doPaintList(s,l,o),d=u.finished,f=u.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),f&&this._paintHoverList(s),d)this.eachLayer(function(y){y.afterBrush&&y.afterBrush()});else{var g=this;requestAnimationFrame$2(function(){g._paintList(s,l,o,c)})}}},a.prototype._compositeManually=function(){var s=this.getLayer(CANVAS_ZLEVEL).ctx,l=this._domRoot.width,o=this._domRoot.height;s.clearRect(0,0,l,o),this.eachBuiltinLayer(function(c){c.virtual&&s.drawImage(c.dom,0,0,l,o)})},a.prototype._doPaintList=function(s,l,o){for(var c=this,u=[],d=this._opts.useDirtyRect,f=0;f<this._zlevelList.length;f++){var g=this._zlevelList[f],y=this._layers[g];y.__builtin__&&y!==this._hoverlayer&&(y.__dirty||o)&&u.push(y)}for(var $=!0,x=!1,N=function(ne){var se=u[ne],ce=se.ctx,fe=d&&se.createRepaintRects(s,l,R._width,R._height),ea=o?se.__startIndex:se.__drawIndex,ta=!o&&se.incremental&&Date.now,na=ta&&Date.now(),aa=se.zlevel===R._zlevelList[0]?R._backgroundColor:null;if(se.__startIndex===se.__endIndex)se.clear(!1,aa,fe);else if(ea===se.__startIndex){var ia=s[ea];(!ia.incremental||!ia.notClear||o)&&se.clear(!1,aa,fe)}ea===-1&&(console.error("For some unknown reason. drawIndex is -1"),ea=se.__startIndex);var sa,ra=function(pa){var ua={inHover:!1,allClipped:!1,prevEl:null,viewWidth:c._width,viewHeight:c._height};for(sa=ea;sa<se.__endIndex;sa++){var da=s[sa];if(da.__inHover&&(x=!0),c._doPaintEl(da,se,d,pa,ua,sa===se.__endIndex-1),ta){var ha=Date.now()-na;if(ha>15)break}}ua.prevElClipPaths&&ce.restore()};if(fe)if(fe.length===0)sa=se.__endIndex;else for(var la=R.dpr,oa=0;oa<fe.length;++oa){var ca=fe[oa];ce.save(),ce.beginPath(),ce.rect(ca.x*la,ca.y*la,ca.width*la,ca.height*la),ce.clip(),ra(ca),ce.restore()}else ce.save(),ra(),ce.restore();se.__drawIndex=sa,se.__drawIndex<se.__endIndex&&($=!1)},R=this,j=0;j<u.length;j++)N(j);return env.wxa&&each$f(this._layers,function(ne){ne&&ne.ctx&&ne.ctx.draw&&ne.ctx.draw()}),{finished:$,needsRefreshHover:x}},a.prototype._doPaintEl=function(s,l,o,c,u,d){var f=l.ctx;if(o){var g=s.getPaintRect();(!c||g&&g.intersect(c))&&(brush$1(f,s,u,d),s.setPrevPaintRect(g))}else brush$1(f,s,u,d)},a.prototype.getLayer=function(s,l){this._singleCanvas&&!this._needsManuallyCompositing&&(s=CANVAS_ZLEVEL);var o=this._layers[s];return o||(o=new Layer("zr_"+s,this,this.dpr),o.zlevel=s,o.__builtin__=!0,this._layerConfig[s]?merge(o,this._layerConfig[s],!0):this._layerConfig[s-EL_AFTER_INCREMENTAL_INC]&&merge(o,this._layerConfig[s-EL_AFTER_INCREMENTAL_INC],!0),l&&(o.virtual=l),this.insertLayer(s,o),o.initContext()),o},a.prototype.insertLayer=function(s,l){var o=this._layers,c=this._zlevelList,u=c.length,d=this._domRoot,f=null,g=-1;if(!o[s]&&isLayerValid(l)){if(u>0&&s>c[0]){for(g=0;g<u-1&&!(c[g]<s&&c[g+1]>s);g++);f=o[c[g]]}if(c.splice(g+1,0,s),o[s]=l,!l.virtual)if(f){var y=f.dom;y.nextSibling?d.insertBefore(l.dom,y.nextSibling):d.appendChild(l.dom)}else d.firstChild?d.insertBefore(l.dom,d.firstChild):d.appendChild(l.dom);l.painter||(l.painter=this)}},a.prototype.eachLayer=function(s,l){for(var o=this._zlevelList,c=0;c<o.length;c++){var u=o[c];s.call(l,this._layers[u],u)}},a.prototype.eachBuiltinLayer=function(s,l){for(var o=this._zlevelList,c=0;c<o.length;c++){var u=o[c],d=this._layers[u];d.__builtin__&&s.call(l,d,u)}},a.prototype.eachOtherLayer=function(s,l){for(var o=this._zlevelList,c=0;c<o.length;c++){var u=o[c],d=this._layers[u];d.__builtin__||s.call(l,d,u)}},a.prototype.getLayers=function(){return this._layers},a.prototype._updateLayerStatus=function(s){this.eachBuiltinLayer(function(x,N){x.__dirty=x.__used=!1});function l(x){u&&(u.__endIndex!==x&&(u.__dirty=!0),u.__endIndex=x)}if(this._singleCanvas)for(var o=1;o<s.length;o++){var c=s[o];if(c.zlevel!==s[o-1].zlevel||c.incremental){this._needsManuallyCompositing=!0;break}}var u=null,d=0,f,g;for(g=0;g<s.length;g++){var c=s[g],y=c.zlevel,$=void 0;f!==y&&(f=y,d=0),c.incremental?($=this.getLayer(y+INCREMENTAL_INC,this._needsManuallyCompositing),$.incremental=!0,d=1):$=this.getLayer(y+(d>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),$.__builtin__||logError("ZLevel "+y+" has been used by unkown layer "+$.id),$!==u&&($.__used=!0,$.__startIndex!==g&&($.__dirty=!0),$.__startIndex=g,$.incremental?$.__drawIndex=-1:$.__drawIndex=g,l(g),u=$),c.__dirty&REDRAW_BIT&&!c.__inHover&&($.__dirty=!0,$.incremental&&$.__drawIndex<0&&($.__drawIndex=g))}l(g),this.eachBuiltinLayer(function(x,N){!x.__used&&x.getElementCount()>0&&(x.__dirty=!0,x.__startIndex=x.__endIndex=x.__drawIndex=0),x.__dirty&&x.__drawIndex<0&&(x.__drawIndex=x.__startIndex)})},a.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},a.prototype._clearLayer=function(s){s.clear()},a.prototype.setBackgroundColor=function(s){this._backgroundColor=s,each$f(this._layers,function(l){l.setUnpainted()})},a.prototype.configLayer=function(s,l){if(l){var o=this._layerConfig;o[s]?merge(o[s],l,!0):o[s]=l;for(var c=0;c<this._zlevelList.length;c++){var u=this._zlevelList[c];if(u===s||u===s+EL_AFTER_INCREMENTAL_INC){var d=this._layers[u];merge(d,o[s],!0)}}}},a.prototype.delLayer=function(s){var l=this._layers,o=this._zlevelList,c=l[s];c&&(c.dom.parentNode.removeChild(c.dom),delete l[s],o.splice(indexOf(o,s),1))},a.prototype.resize=function(s,l){if(this._domRoot.style){var o=this._domRoot;o.style.display="none";var c=this._opts,u=this.root;if(s!=null&&(c.width=s),l!=null&&(c.height=l),s=getSize$1(u,0,c),l=getSize$1(u,1,c),o.style.display="",this._width!==s||l!==this._height){o.style.width=s+"px",o.style.height=l+"px";for(var d in this._layers)this._layers.hasOwnProperty(d)&&this._layers[d].resize(s,l);this.refresh(!0)}this._width=s,this._height=l}else{if(s==null||l==null)return;this._width=s,this._height=l,this.getLayer(CANVAS_ZLEVEL).resize(s,l)}return this},a.prototype.clearLayer=function(s){var l=this._layers[s];l&&l.clear()},a.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},a.prototype.getRenderedCanvas=function(s){if(s=s||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var l=new Layer("image",this,s.pixelRatio||this.dpr);l.initContext(),l.clear(!1,s.backgroundColor||this._backgroundColor);var o=l.ctx;if(s.pixelRatio<=this.dpr){this.refresh();var c=l.dom.width,u=l.dom.height;this.eachLayer(function(x){x.__builtin__?o.drawImage(x.dom,0,0,c,u):x.renderToCanvas&&(o.save(),x.renderToCanvas(o),o.restore())})}else for(var d={inHover:!1,viewWidth:this._width,viewHeight:this._height},f=this.storage.getDisplayList(!0),g=0,y=f.length;g<y;g++){var $=f[g];brush$1(o,$,d,g===y-1)}return l.dom},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a}();function install$S(a){a.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l}return s.prototype.getInitialData=function(l){return createSeriesData(null,this,{useEncodeDefaulter:!0})},s.prototype.getLegendIcon=function(l){var o=new Group$3,c=createSymbol$1("line",0,l.itemHeight/2,l.itemWidth,0,l.lineStyle.stroke,!1);o.add(c),c.setStyle(l.lineStyle);var u=this.getData().getVisual("symbol"),d=this.getData().getVisual("symbolRotate"),f=u==="none"?"circle":u,g=l.itemHeight*.8,y=createSymbol$1(f,(l.itemWidth-g)/2,(l.itemHeight-g)/2,g,g,l.itemStyle.fill);o.add(y),y.setStyle(l.itemStyle);var $=l.iconRotate==="inherit"?d:l.iconRotate||0;return y.rotation=$*Math.PI/180,y.setOrigin([l.itemWidth/2,l.itemHeight/2]),f.indexOf("empty")>-1&&(y.style.stroke=y.style.fill,y.style.fill="#fff",y.style.lineWidth=2),o},s.type="series.line",s.dependencies=["grid","polar"],s.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},s}(SeriesModel);function getDefaultLabel(a,s){var l=a.mapDimensionsAll("defaultedLabel"),o=l.length;if(o===1){var c=retrieveRawValue(a,s,l[0]);return c!=null?c+"":null}else if(o){for(var u=[],d=0;d<l.length;d++)u.push(retrieveRawValue(a,s,l[d]));return u.join(" ")}}function getDefaultInterpolatedLabel(a,s){var l=a.mapDimensionsAll("defaultedLabel");if(!isArray$3(s))return s+"";for(var o=[],c=0;c<l.length;c++){var u=a.getDimensionIndex(l[c]);u>=0&&o.push(s[u])}return o.join(" ")}var Symbol$1=function(a){__extends(s,a);function s(l,o,c,u){var d=a.call(this)||this;return d.updateData(l,o,c,u),d}return s.prototype._createSymbol=function(l,o,c,u,d){this.removeAll();var f=createSymbol$1(l,-1,-1,2,2,null,d);f.attr({z2:100,culling:!0,scaleX:u[0]/2,scaleY:u[1]/2}),f.drift=driftSymbol,this._symbolType=l,this.add(f)},s.prototype.stopSymbolAnimation=function(l){this.childAt(0).stopAnimation(null,l)},s.prototype.getSymbolType=function(){return this._symbolType},s.prototype.getSymbolPath=function(){return this.childAt(0)},s.prototype.highlight=function(){enterEmphasis(this.childAt(0))},s.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},s.prototype.setZ=function(l,o){var c=this.childAt(0);c.zlevel=l,c.z=o},s.prototype.setDraggable=function(l,o){var c=this.childAt(0);c.draggable=l,c.cursor=!o&&l?"move":c.cursor},s.prototype.updateData=function(l,o,c,u){this.silent=!1;var d=l.getItemVisual(o,"symbol")||"circle",f=l.hostModel,g=s.getSymbolSize(l,o),y=d!==this._symbolType,$=u&&u.disableAnimation;if(y){var x=l.getItemVisual(o,"symbolKeepAspect");this._createSymbol(d,l,o,g,x)}else{var N=this.childAt(0);N.silent=!1;var R={scaleX:g[0]/2,scaleY:g[1]/2};$?N.attr(R):updateProps$1(N,R,f,o),saveOldStyle(N)}if(this._updateCommon(l,o,g,c,u),y){var N=this.childAt(0);if(!$){var R={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:N.style.opacity}};N.scaleX=N.scaleY=0,N.style.opacity=0,initProps(N,R,f,o)}}$&&this.childAt(0).stopAnimation("leave")},s.prototype._updateCommon=function(l,o,c,u,d){var f=this.childAt(0),g=l.hostModel,y,$,x,N,R,j,ne,se,ce;if(u&&(y=u.emphasisItemStyle,$=u.blurItemStyle,x=u.selectItemStyle,N=u.focus,R=u.blurScope,ne=u.labelStatesModels,se=u.hoverScale,ce=u.cursorStyle,j=u.emphasisDisabled),!u||l.hasItemOption){var fe=u&&u.itemModel?u.itemModel:l.getItemModel(o),ea=fe.getModel("emphasis");y=ea.getModel("itemStyle").getItemStyle(),x=fe.getModel(["select","itemStyle"]).getItemStyle(),$=fe.getModel(["blur","itemStyle"]).getItemStyle(),N=ea.get("focus"),R=ea.get("blurScope"),j=ea.get("disabled"),ne=getLabelStatesModels(fe),se=ea.getShallow("scale"),ce=fe.getShallow("cursor")}var ta=l.getItemVisual(o,"symbolRotate");f.attr("rotation",(ta||0)*Math.PI/180||0);var na=normalizeSymbolOffset(l.getItemVisual(o,"symbolOffset"),c);na&&(f.x=na[0],f.y=na[1]),ce&&f.attr("cursor",ce);var aa=l.getItemVisual(o,"style"),ia=aa.fill;if(f instanceof ZRImage){var sa=f.style;f.useStyle(extend({image:sa.image,x:sa.x,y:sa.y,width:sa.width,height:sa.height},aa))}else f.__isEmptyBrush?f.useStyle(extend({},aa)):f.useStyle(aa),f.style.decal=null,f.setColor(ia,d&&d.symbolInnerColor),f.style.strokeNoScale=!0;var ra=l.getItemVisual(o,"liftZ"),la=this._z2;ra!=null?la==null&&(this._z2=f.z2,f.z2+=ra):la!=null&&(f.z2=la,this._z2=null);var oa=d&&d.useNameLabel;setLabelStyle(f,ne,{labelFetcher:g,labelDataIndex:o,defaultText:ca,inheritColor:ia,defaultOpacity:aa.opacity});function ca(da){return oa?l.getName(da):getDefaultLabel(l,da)}this._sizeX=c[0]/2,this._sizeY=c[1]/2;var pa=f.ensureState("emphasis");pa.style=y,f.ensureState("select").style=x,f.ensureState("blur").style=$;var ua=se==null||se===!0?Math.max(1.1,3/this._sizeY):isFinite(se)&&se>0?+se:1;pa.scaleX=this._sizeX*ua,pa.scaleY=this._sizeY*ua,this.setSymbolScale(1),toggleHoverEmphasis(this,N,R,j)},s.prototype.setSymbolScale=function(l){this.scaleX=this.scaleY=l},s.prototype.fadeOut=function(l,o,c){var u=this.childAt(0),d=getECData(this).dataIndex,f=c&&c.animation;if(this.silent=u.silent=!0,c&&c.fadeLabel){var g=u.getTextContent();g&&removeElement(g,{style:{opacity:0}},o,{dataIndex:d,removeOpt:f,cb:function(){u.removeTextContent()}})}else u.removeTextContent();removeElement(u,{style:{opacity:0},scaleX:0,scaleY:0},o,{dataIndex:d,cb:l,removeOpt:f})},s.getSymbolSize=function(l,o){return normalizeSymbolSize(l.getItemVisual(o,"symbolSize"))},s}(Group$3);function driftSymbol(a,s){this.parent.drift(a,s)}function symbolNeedsDraw$1(a,s,l,o){return s&&!isNaN(s[0])&&!isNaN(s[1])&&!(o.isIgnore&&o.isIgnore(l))&&!(o.clipShape&&!o.clipShape.contain(s[0],s[1]))&&a.getItemVisual(l,"symbol")!=="none"}function normalizeUpdateOpt(a){return a!=null&&!isObject$5(a)&&(a={isIgnore:a}),a||{}}function makeSeriesScope$2(a){var s=a.hostModel,l=s.getModel("emphasis");return{emphasisItemStyle:l.getModel("itemStyle").getItemStyle(),blurItemStyle:s.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:s.getModel(["select","itemStyle"]).getItemStyle(),focus:l.get("focus"),blurScope:l.get("blurScope"),emphasisDisabled:l.get("disabled"),hoverScale:l.get("scale"),labelStatesModels:getLabelStatesModels(s),cursorStyle:s.get("cursor")}}var SymbolDraw=function(){function a(s){this.group=new Group$3,this._SymbolCtor=s||Symbol$1}return a.prototype.updateData=function(s,l){this._progressiveEls=null,l=normalizeUpdateOpt(l);var o=this.group,c=s.hostModel,u=this._data,d=this._SymbolCtor,f=l.disableAnimation,g=makeSeriesScope$2(s),y={disableAnimation:f},$=l.getSymbolPoint||function(x){return s.getItemLayout(x)};u||o.removeAll(),s.diff(u).add(function(x){var N=$(x);if(symbolNeedsDraw$1(s,N,x,l)){var R=new d(s,x,g,y);R.setPosition(N),s.setItemGraphicEl(x,R),o.add(R)}}).update(function(x,N){var R=u.getItemGraphicEl(N),j=$(x);if(!symbolNeedsDraw$1(s,j,x,l)){o.remove(R);return}var ne=s.getItemVisual(x,"symbol")||"circle",se=R&&R.getSymbolType&&R.getSymbolType();if(!R||se&&se!==ne)o.remove(R),R=new d(s,x,g,y),R.setPosition(j);else{R.updateData(s,x,g,y);var ce={x:j[0],y:j[1]};f?R.attr(ce):updateProps$1(R,ce,c)}o.add(R),s.setItemGraphicEl(x,R)}).remove(function(x){var N=u.getItemGraphicEl(x);N&&N.fadeOut(function(){o.remove(N)},c)}).execute(),this._getSymbolPoint=$,this._data=s},a.prototype.updateLayout=function(){var s=this,l=this._data;l&&l.eachItemGraphicEl(function(o,c){var u=s._getSymbolPoint(c);o.setPosition(u),o.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=makeSeriesScope$2(s),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(s,l,o){this._progressiveEls=[],o=normalizeUpdateOpt(o);function c(g){g.isGroup||(g.incremental=!0,g.ensureState("emphasis").hoverLayer=!0)}for(var u=s.start;u<s.end;u++){var d=l.getItemLayout(u);if(symbolNeedsDraw$1(l,d,u,o)){var f=new this._SymbolCtor(l,u,this._seriesScope);f.traverse(c),f.setPosition(d),this.group.add(f),l.setItemGraphicEl(u,f),this._progressiveEls.push(f)}}},a.prototype.eachRendered=function(s){traverseElements(this._progressiveEls||this.group,s)},a.prototype.remove=function(s){var l=this.group,o=this._data;o&&s?o.eachItemGraphicEl(function(c){c.fadeOut(function(){l.remove(c)},o.hostModel)}):l.removeAll()},a}();function prepareDataCoordInfo(a,s,l){var o=a.getBaseAxis(),c=a.getOtherAxis(o),u=getValueStart(c,l),d=o.dim,f=c.dim,g=s.mapDimension(f),y=s.mapDimension(d),$=f==="x"||f==="radius"?1:0,x=map$1(a.dimensions,function(j){return s.mapDimension(j)}),N=!1,R=s.getCalculationInfo("stackResultDimension");return isDimensionStacked(s,x[0])&&(N=!0,x[0]=R),isDimensionStacked(s,x[1])&&(N=!0,x[1]=R),{dataDimsForPoint:x,valueStart:u,valueAxisDim:f,baseAxisDim:d,stacked:!!N,valueDim:g,baseDim:y,baseDataOffset:$,stackedOverDimension:s.getCalculationInfo("stackedOverDimension")}}function getValueStart(a,s){var l=0,o=a.scale.getExtent();return s==="start"?l=o[0]:s==="end"?l=o[1]:isNumber$2(s)&&!isNaN(s)?l=s:o[0]>0?l=o[0]:o[1]<0&&(l=o[1]),l}function getStackedOnPoint(a,s,l,o){var c=NaN;a.stacked&&(c=l.get(l.getCalculationInfo("stackedOverDimension"),o)),isNaN(c)&&(c=a.valueStart);var u=a.baseDataOffset,d=[];return d[u]=l.get(a.baseDim,o),d[1-u]=c,s.dataToPoint(d)}function diffData(a,s){var l=[];return s.diff(a).add(function(o){l.push({cmd:"+",idx:o})}).update(function(o,c){l.push({cmd:"=",idx:c,idx1:o})}).remove(function(o){l.push({cmd:"-",idx:o})}).execute(),l}function lineAnimationDiff(a,s,l,o,c,u,d,f){for(var g=diffData(a,s),y=[],$=[],x=[],N=[],R=[],j=[],ne=[],se=prepareDataCoordInfo(c,s,d),ce=a.getLayout("points")||[],fe=s.getLayout("points")||[],ea=0;ea<g.length;ea++){var ta=g[ea],na=!0,aa=void 0,ia=void 0;switch(ta.cmd){case"=":aa=ta.idx*2,ia=ta.idx1*2;var sa=ce[aa],ra=ce[aa+1],la=fe[ia],oa=fe[ia+1];(isNaN(sa)||isNaN(ra))&&(sa=la,ra=oa),y.push(sa,ra),$.push(la,oa),x.push(l[aa],l[aa+1]),N.push(o[ia],o[ia+1]),ne.push(s.getRawIndex(ta.idx1));break;case"+":var ca=ta.idx,pa=se.dataDimsForPoint,ua=c.dataToPoint([s.get(pa[0],ca),s.get(pa[1],ca)]);ia=ca*2,y.push(ua[0],ua[1]),$.push(fe[ia],fe[ia+1]);var da=getStackedOnPoint(se,c,s,ca);x.push(da[0],da[1]),N.push(o[ia],o[ia+1]),ne.push(s.getRawIndex(ca));break;case"-":na=!1}na&&(R.push(ta),j.push(j.length))}j.sort(function(Ca,$a){return ne[Ca]-ne[$a]});for(var ha=y.length,ga=createFloat32Array(ha),fa=createFloat32Array(ha),ma=createFloat32Array(ha),va=createFloat32Array(ha),ka=[],ea=0;ea<j.length;ea++){var ya=j[ea],ba=ea*2,Ea=ya*2;ga[ba]=y[Ea],ga[ba+1]=y[Ea+1],fa[ba]=$[Ea],fa[ba+1]=$[Ea+1],ma[ba]=x[Ea],ma[ba+1]=x[Ea+1],va[ba]=N[Ea],va[ba+1]=N[Ea+1],ka[ea]=R[ya]}return{current:ga,next:fa,stackedOnCurrent:ma,stackedOnNext:va,status:ka}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(a,s){return isNaN(a)||isNaN(s)}function drawSegment(a,s,l,o,c,u,d,f,g){for(var y,$,x,N,R,j,ne=l,se=0;se<o;se++){var ce=s[ne*2],fe=s[ne*2+1];if(ne>=c||ne<0)break;if(isPointNull$1(ce,fe)){if(g){ne+=u;continue}break}if(ne===l)a[u>0?"moveTo":"lineTo"](ce,fe),x=ce,N=fe;else{var ea=ce-y,ta=fe-$;if(ea*ea+ta*ta<.5){ne+=u;continue}if(d>0){for(var na=ne+u,aa=s[na*2],ia=s[na*2+1];aa===ce&&ia===fe&&se<o;)se++,na+=u,ne+=u,aa=s[na*2],ia=s[na*2+1],ce=s[ne*2],fe=s[ne*2+1],ea=ce-y,ta=fe-$;var sa=se+1;if(g)for(;isPointNull$1(aa,ia)&&sa<o;)sa++,na+=u,aa=s[na*2],ia=s[na*2+1];var ra=.5,la=0,oa=0,ca=void 0,pa=void 0;if(sa>=o||isPointNull$1(aa,ia))R=ce,j=fe;else{la=aa-y,oa=ia-$;var ua=ce-y,da=aa-ce,ha=fe-$,ga=ia-fe,fa=void 0,ma=void 0;if(f==="x"){fa=Math.abs(ua),ma=Math.abs(da);var va=la>0?1:-1;R=ce-va*fa*d,j=fe,ca=ce+va*ma*d,pa=fe}else if(f==="y"){fa=Math.abs(ha),ma=Math.abs(ga);var ka=oa>0?1:-1;R=ce,j=fe-ka*fa*d,ca=ce,pa=fe+ka*ma*d}else fa=Math.sqrt(ua*ua+ha*ha),ma=Math.sqrt(da*da+ga*ga),ra=ma/(ma+fa),R=ce-la*d*(1-ra),j=fe-oa*d*(1-ra),ca=ce+la*d*ra,pa=fe+oa*d*ra,ca=mathMin$5(ca,mathMax$5(aa,ce)),pa=mathMin$5(pa,mathMax$5(ia,fe)),ca=mathMax$5(ca,mathMin$5(aa,ce)),pa=mathMax$5(pa,mathMin$5(ia,fe)),la=ca-ce,oa=pa-fe,R=ce-la*fa/ma,j=fe-oa*fa/ma,R=mathMin$5(R,mathMax$5(y,ce)),j=mathMin$5(j,mathMax$5($,fe)),R=mathMax$5(R,mathMin$5(y,ce)),j=mathMax$5(j,mathMin$5($,fe)),la=ce-R,oa=fe-j,ca=ce+la*ma/fa,pa=fe+oa*ma/fa}a.bezierCurveTo(x,N,R,j,ce,fe),x=ca,N=pa}else a.lineTo(ce,fe)}y=ce,$=fe,ne+=u}return se}var ECPolylineShape=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),ECPolyline=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="ec-polyline",o}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new ECPolylineShape},s.prototype.buildPath=function(l,o){var c=o.points,u=0,d=c.length/2;if(o.connectNulls){for(;d>0&&isPointNull$1(c[d*2-2],c[d*2-1]);d--);for(;u<d&&isPointNull$1(c[u*2],c[u*2+1]);u++);}for(;u<d;)u+=drawSegment(l,c,u,d,d,1,o.smooth,o.smoothMonotone,o.connectNulls)+1},s.prototype.getPointOn=function(l,o){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var c=this.path,u=c.data,d=PathProxy.CMD,f,g,y=o==="x",$=[],x=0;x<u.length;){var N=u[x++],R=void 0,j=void 0,ne=void 0,se=void 0,ce=void 0,fe=void 0,ea=void 0;switch(N){case d.M:f=u[x++],g=u[x++];break;case d.L:if(R=u[x++],j=u[x++],ea=y?(l-f)/(R-f):(l-g)/(j-g),ea<=1&&ea>=0){var ta=y?(j-g)*ea+g:(R-f)*ea+f;return y?[l,ta]:[ta,l]}f=R,g=j;break;case d.C:R=u[x++],j=u[x++],ne=u[x++],se=u[x++],ce=u[x++],fe=u[x++];var na=y?cubicRootAt(f,R,ne,ce,l,$):cubicRootAt(g,j,se,fe,l,$);if(na>0)for(var aa=0;aa<na;aa++){var ia=$[aa];if(ia<=1&&ia>=0){var ta=y?cubicAt(g,j,se,fe,ia):cubicAt(f,R,ne,ce,ia);return y?[l,ta]:[ta,l]}}f=ce,g=fe;break}}},s}(Path),ECPolygonShape=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s}(ECPolylineShape),ECPolygon=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="ec-polygon",o}return s.prototype.getDefaultShape=function(){return new ECPolygonShape},s.prototype.buildPath=function(l,o){var c=o.points,u=o.stackedOnPoints,d=0,f=c.length/2,g=o.smoothMonotone;if(o.connectNulls){for(;f>0&&isPointNull$1(c[f*2-2],c[f*2-1]);f--);for(;d<f&&isPointNull$1(c[d*2],c[d*2+1]);d++);}for(;d<f;){var y=drawSegment(l,c,d,f,f,1,o.smooth,g,o.connectNulls);drawSegment(l,u,d+y-1,y,f,-1,o.stackedOnSmooth,g,o.connectNulls),d+=y+1,l.closePath()}},s}(Path);function createGridClipPath(a,s,l,o,c){var u=a.getArea(),d=u.x,f=u.y,g=u.width,y=u.height,$=l.get(["lineStyle","width"])||2;d-=$/2,f-=$/2,g+=$,y+=$,g=Math.ceil(g),d!==Math.floor(d)&&(d=Math.floor(d),g++);var x=new Rect$2({shape:{x:d,y:f,width:g,height:y}});if(s){var N=a.getBaseAxis(),R=N.isHorizontal(),j=N.inverse;R?(j&&(x.shape.x+=g),x.shape.width=0):(j||(x.shape.y+=y),x.shape.height=0);var ne=isFunction$2(c)?function(se){c(se,x)}:null;initProps(x,{shape:{width:g,height:y,x:d,y:f}},l,null,o,ne)}return x}function createPolarClipPath(a,s,l){var o=a.getArea(),c=round$4(o.r0,1),u=round$4(o.r,1),d=new Sector({shape:{cx:round$4(a.cx,1),cy:round$4(a.cy,1),r0:c,r:u,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});if(s){var f=a.getBaseAxis().dim==="angle";f?d.shape.endAngle=o.startAngle:d.shape.r=c,initProps(d,{shape:{endAngle:o.endAngle,r:u}},l)}return d}function createClipPath(a,s,l,o,c){if(a){if(a.type==="polar")return createPolarClipPath(a,s,l);if(a.type==="cartesian2d")return createGridClipPath(a,s,l,o,c)}else return null;return null}function isCoordinateSystemType(a,s){return a.type===s}function isPointsSame(a,s){if(a.length===s.length){for(var l=0;l<a.length;l++)if(a[l]!==s[l])return;return!0}}function bboxFromPoints(a){for(var s=1/0,l=1/0,o=-1/0,c=-1/0,u=0;u<a.length;){var d=a[u++],f=a[u++];isNaN(d)||(s=Math.min(d,s),o=Math.max(d,o)),isNaN(f)||(l=Math.min(f,l),c=Math.max(f,c))}return[[s,l],[o,c]]}function getBoundingDiff(a,s){var l=bboxFromPoints(a),o=l[0],c=l[1],u=bboxFromPoints(s),d=u[0],f=u[1];return Math.max(Math.abs(o[0]-d[0]),Math.abs(o[1]-d[1]),Math.abs(c[0]-f[0]),Math.abs(c[1]-f[1]))}function getSmooth(a){return isNumber$2(a)?a:a?.5:0}function getStackedOnPoints(a,s,l){if(!l.valueDim)return[];for(var o=s.count(),c=createFloat32Array(o*2),u=0;u<o;u++){var d=getStackedOnPoint(l,a,s,u);c[u*2]=d[0],c[u*2+1]=d[1]}return c}function turnPointsIntoStep(a,s,l,o){var c=s.getBaseAxis(),u=c.dim==="x"||c.dim==="radius"?0:1,d=[],f=0,g=[],y=[],$=[],x=[];if(o){for(f=0;f<a.length;f+=2)!isNaN(a[f])&&!isNaN(a[f+1])&&x.push(a[f],a[f+1]);a=x}for(f=0;f<a.length-2;f+=2)switch($[0]=a[f+2],$[1]=a[f+3],y[0]=a[f],y[1]=a[f+1],d.push(y[0],y[1]),l){case"end":g[u]=$[u],g[1-u]=y[1-u],d.push(g[0],g[1]);break;case"middle":var N=(y[u]+$[u])/2,R=[];g[u]=R[u]=N,g[1-u]=y[1-u],R[1-u]=$[1-u],d.push(g[0],g[1]),d.push(R[0],R[1]);break;default:g[u]=y[u],g[1-u]=$[1-u],d.push(g[0],g[1])}return d.push(a[f++],a[f++]),d}function clipColorStops(a,s){var l=[],o=a.length,c,u;function d($,x,N){var R=$.coord,j=(N-R)/(x.coord-R),ne=lerp(j,[$.color,x.color]);return{coord:N,color:ne}}for(var f=0;f<o;f++){var g=a[f],y=g.coord;if(y<0)c=g;else if(y>s){u?l.push(d(u,g,s)):c&&l.push(d(c,g,0),d(c,g,s));break}else c&&(l.push(d(c,g,0)),c=null),l.push(g),u=g}return l}function getVisualGradient(a,s,l){var o=a.getVisual("visualMeta");if(!(!o||!o.length||!a.count())&&s.type==="cartesian2d"){for(var c,u,d=o.length-1;d>=0;d--){var f=a.getDimensionInfo(o[d].dimension);if(c=f&&f.coordDim,c==="x"||c==="y"){u=o[d];break}}if(u){var g=s.getAxis(c),y=map$1(u.stops,function(ea){return{coord:g.toGlobalCoord(g.dataToCoord(ea.value)),color:ea.color}}),$=y.length,x=u.outerColors.slice();$&&y[0].coord>y[$-1].coord&&(y.reverse(),x.reverse());var N=clipColorStops(y,c==="x"?l.getWidth():l.getHeight()),R=N.length;if(!R&&$)return y[0].coord<0?x[1]?x[1]:y[$-1].color:x[0]?x[0]:y[0].color;var j=10,ne=N[0].coord-j,se=N[R-1].coord+j,ce=se-ne;if(ce<.001)return"transparent";each$f(N,function(ea){ea.offset=(ea.coord-ne)/ce}),N.push({offset:R?N[R-1].offset:.5,color:x[1]||"transparent"}),N.unshift({offset:R?N[0].offset:.5,color:x[0]||"transparent"});var fe=new LinearGradient(0,0,0,0,N,!0);return fe[c]=ne,fe[c+"2"]=se,fe}}}function getIsIgnoreFunc(a,s,l){var o=a.get("showAllSymbol"),c=o==="auto";if(!(o&&!c)){var u=l.getAxesByScale("ordinal")[0];if(u&&!(c&&canShowAllSymbolForCategory(u,s))){var d=s.mapDimension(u.dim),f={};return each$f(u.getViewLabels(),function(g){var y=u.scale.getRawOrdinalNumber(g.tickValue);f[y]=1}),function(g){return!f.hasOwnProperty(s.get(d,g))}}}}function canShowAllSymbolForCategory(a,s){var l=a.getExtent(),o=Math.abs(l[1]-l[0])/a.scale.count();isNaN(o)&&(o=0);for(var c=s.count(),u=Math.max(1,Math.round(c/5)),d=0;d<c;d+=u)if(Symbol$1.getSymbolSize(s,d)[a.isHorizontal()?1:0]*1.5>o)return!1;return!0}function isPointNull(a,s){return isNaN(a)||isNaN(s)}function getLastIndexNotNull(a){for(var s=a.length/2;s>0&&isPointNull(a[s*2-2],a[s*2-1]);s--);return s-1}function getPointAtIndex(a,s){return[a[s*2],a[s*2+1]]}function getIndexRange(a,s,l){for(var o=a.length/2,c=l==="x"?0:1,u,d,f=0,g=-1,y=0;y<o;y++)if(d=a[y*2+c],!(isNaN(d)||isNaN(a[y*2+1-c]))){if(y===0){u=d;continue}if(u<=s&&d>=s||u>=s&&d<=s){g=y;break}f=y,u=d}return{range:[f,g],t:(s-u)/(d-u)}}function anyStateShowEndLabel(a){if(a.get(["endLabel","show"]))return!0;for(var s=0;s<SPECIAL_STATES.length;s++)if(a.get([SPECIAL_STATES[s],"endLabel","show"]))return!0;return!1}function createLineClipPath(a,s,l,o){if(isCoordinateSystemType(s,"cartesian2d")){var c=o.getModel("endLabel"),u=c.get("valueAnimation"),d=o.getData(),f={lastFrameIndex:0},g=anyStateShowEndLabel(o)?function(R,j){a._endLabelOnDuring(R,j,d,f,u,c,s)}:null,y=s.getBaseAxis().isHorizontal(),$=createGridClipPath(s,l,o,function(){var R=a._endLabel;R&&l&&f.originalX!=null&&R.attr({x:f.originalX,y:f.originalY})},g);if(!o.get("clip",!0)){var x=$.shape,N=Math.max(x.width,x.height);y?(x.y-=N,x.height+=N*2):(x.x-=N,x.width+=N*2)}return g&&g(1,$),$}else return createPolarClipPath(s,l,o)}function getEndLabelStateSpecified(a,s){var l=s.getBaseAxis(),o=l.isHorizontal(),c=l.inverse,u=o?c?"right":"left":"center",d=o?"middle":c?"top":"bottom";return{normal:{align:a.get("align")||u,verticalAlign:a.get("verticalAlign")||d}}}var LineView=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.init=function(){var l=new Group$3,o=new SymbolDraw;this.group.add(o.group),this._symbolDraw=o,this._lineGroup=l},s.prototype.render=function(l,o,c){var u=this,d=l.coordinateSystem,f=this.group,g=l.getData(),y=l.getModel("lineStyle"),$=l.getModel("areaStyle"),x=g.getLayout("points")||[],N=d.type==="polar",R=this._coordSys,j=this._symbolDraw,ne=this._polyline,se=this._polygon,ce=this._lineGroup,fe=!o.ssr&&l.get("animation"),ea=!$.isEmpty(),ta=$.get("origin"),na=prepareDataCoordInfo(d,g,ta),aa=ea&&getStackedOnPoints(d,g,na),ia=l.get("showSymbol"),sa=l.get("connectNulls"),ra=ia&&!N&&getIsIgnoreFunc(l,g,d),la=this._data;la&&la.eachItemGraphicEl(function($a,Pa){$a.__temp&&(f.remove($a),la.setItemGraphicEl(Pa,null))}),ia||j.remove(),f.add(ce);var oa=N?!1:l.get("step"),ca;d&&d.getArea&&l.get("clip",!0)&&(ca=d.getArea(),ca.width!=null?(ca.x-=.1,ca.y-=.1,ca.width+=.2,ca.height+=.2):ca.r0&&(ca.r0-=.5,ca.r+=.5)),this._clipShapeForSymbol=ca;var pa=getVisualGradient(g,d,c)||g.getVisual("style")[g.getVisual("drawType")];if(!(ne&&R.type===d.type&&oa===this._step))ia&&j.updateData(g,{isIgnore:ra,clipShape:ca,disableAnimation:!0,getSymbolPoint:function($a){return[x[$a*2],x[$a*2+1]]}}),fe&&this._initSymbolLabelAnimation(g,d,ca),oa&&(x=turnPointsIntoStep(x,d,oa,sa),aa&&(aa=turnPointsIntoStep(aa,d,oa,sa))),ne=this._newPolyline(x),ea?se=this._newPolygon(x,aa):se&&(ce.remove(se),se=this._polygon=null),N||this._initOrUpdateEndLabel(l,d,convertToColorString(pa)),ce.setClipPath(createLineClipPath(this,d,!0,l));else{ea&&!se?se=this._newPolygon(x,aa):se&&!ea&&(ce.remove(se),se=this._polygon=null),N||this._initOrUpdateEndLabel(l,d,convertToColorString(pa));var ua=ce.getClipPath();if(ua){var da=createLineClipPath(this,d,!1,l);initProps(ua,{shape:da.shape},l)}else ce.setClipPath(createLineClipPath(this,d,!0,l));ia&&j.updateData(g,{isIgnore:ra,clipShape:ca,disableAnimation:!0,getSymbolPoint:function($a){return[x[$a*2],x[$a*2+1]]}}),(!isPointsSame(this._stackedOnPoints,aa)||!isPointsSame(this._points,x))&&(fe?this._doUpdateAnimation(g,aa,d,c,oa,ta,sa):(oa&&(x=turnPointsIntoStep(x,d,oa,sa),aa&&(aa=turnPointsIntoStep(aa,d,oa,sa))),ne.setShape({points:x}),se&&se.setShape({points:x,stackedOnPoints:aa})))}var ha=l.getModel("emphasis"),ga=ha.get("focus"),fa=ha.get("blurScope"),ma=ha.get("disabled");if(ne.useStyle(defaults(y.getLineStyle(),{fill:"none",stroke:pa,lineJoin:"bevel"})),setStatesStylesFromModel(ne,l,"lineStyle"),ne.style.lineWidth>0&&l.get(["emphasis","lineStyle","width"])==="bolder"){var va=ne.getState("emphasis").style;va.lineWidth=+ne.style.lineWidth+1}getECData(ne).seriesIndex=l.seriesIndex,toggleHoverEmphasis(ne,ga,fa,ma);var ka=getSmooth(l.get("smooth")),ya=l.get("smoothMonotone");if(ne.setShape({smooth:ka,smoothMonotone:ya,connectNulls:sa}),se){var ba=g.getCalculationInfo("stackedOnSeries"),Ea=0;se.useStyle(defaults($.getAreaStyle(),{fill:pa,opacity:.7,lineJoin:"bevel",decal:g.getVisual("style").decal})),ba&&(Ea=getSmooth(ba.get("smooth"))),se.setShape({smooth:ka,stackedOnSmooth:Ea,smoothMonotone:ya,connectNulls:sa}),setStatesStylesFromModel(se,l,"areaStyle"),getECData(se).seriesIndex=l.seriesIndex,toggleHoverEmphasis(se,ga,fa,ma)}var Ca=function($a){u._changePolyState($a)};g.eachItemGraphicEl(function($a){$a&&($a.onHoverStateChange=Ca)}),this._polyline.onHoverStateChange=Ca,this._data=g,this._coordSys=d,this._stackedOnPoints=aa,this._points=x,this._step=oa,this._valueOrigin=ta,l.get("triggerLineEvent")&&(this.packEventData(l,ne),se&&this.packEventData(l,se))},s.prototype.packEventData=function(l,o){getECData(o).eventData={componentType:"series",componentSubType:"line",componentIndex:l.componentIndex,seriesIndex:l.seriesIndex,seriesName:l.name,seriesType:"line"}},s.prototype.highlight=function(l,o,c,u){var d=l.getData(),f=queryDataIndex(d,u);if(this._changePolyState("emphasis"),!(f instanceof Array)&&f!=null&&f>=0){var g=d.getLayout("points"),y=d.getItemGraphicEl(f);if(!y){var $=g[f*2],x=g[f*2+1];if(isNaN($)||isNaN(x)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain($,x))return;var N=l.get("zlevel")||0,R=l.get("z")||0;y=new Symbol$1(d,f),y.x=$,y.y=x,y.setZ(N,R);var j=y.getSymbolPath().getTextContent();j&&(j.zlevel=N,j.z=R,j.z2=this._polyline.z2+1),y.__temp=!0,d.setItemGraphicEl(f,y),y.stopSymbolAnimation(!0),this.group.add(y)}y.highlight()}else ChartView.prototype.highlight.call(this,l,o,c,u)},s.prototype.downplay=function(l,o,c,u){var d=l.getData(),f=queryDataIndex(d,u);if(this._changePolyState("normal"),f!=null&&f>=0){var g=d.getItemGraphicEl(f);g&&(g.__temp?(d.setItemGraphicEl(f,null),this.group.remove(g)):g.downplay())}else ChartView.prototype.downplay.call(this,l,o,c,u)},s.prototype._changePolyState=function(l){var o=this._polygon;setStatesFlag(this._polyline,l),o&&setStatesFlag(o,l)},s.prototype._newPolyline=function(l){var o=this._polyline;return o&&this._lineGroup.remove(o),o=new ECPolyline({shape:{points:l},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(o),this._polyline=o,o},s.prototype._newPolygon=function(l,o){var c=this._polygon;return c&&this._lineGroup.remove(c),c=new ECPolygon({shape:{points:l,stackedOnPoints:o},segmentIgnoreThreshold:2}),this._lineGroup.add(c),this._polygon=c,c},s.prototype._initSymbolLabelAnimation=function(l,o,c){var u,d,f=o.getBaseAxis(),g=f.inverse;o.type==="cartesian2d"?(u=f.isHorizontal(),d=!1):o.type==="polar"&&(u=f.dim==="angle",d=!0);var y=l.hostModel,$=y.get("animationDuration");isFunction$2($)&&($=$(null));var x=y.get("animationDelay")||0,N=isFunction$2(x)?x(null):x;l.eachItemGraphicEl(function(R,j){var ne=R;if(ne){var se=[R.x,R.y],ce=void 0,fe=void 0,ea=void 0;if(c)if(d){var ta=c,na=o.pointToCoord(se);u?(ce=ta.startAngle,fe=ta.endAngle,ea=-na[1]/180*Math.PI):(ce=ta.r0,fe=ta.r,ea=na[0])}else{var aa=c;u?(ce=aa.x,fe=aa.x+aa.width,ea=R.x):(ce=aa.y+aa.height,fe=aa.y,ea=R.y)}var ia=fe===ce?0:(ea-ce)/(fe-ce);g&&(ia=1-ia);var sa=isFunction$2(x)?x(j):$*ia+N,ra=ne.getSymbolPath(),la=ra.getTextContent();ne.attr({scaleX:0,scaleY:0}),ne.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:sa}),la&&la.animateFrom({style:{opacity:0}},{duration:300,delay:sa}),ra.disableLabelAnimation=!0}})},s.prototype._initOrUpdateEndLabel=function(l,o,c){var u=l.getModel("endLabel");if(anyStateShowEndLabel(l)){var d=l.getData(),f=this._polyline,g=d.getLayout("points");if(!g){f.removeTextContent(),this._endLabel=null;return}var y=this._endLabel;y||(y=this._endLabel=new ZRText({z2:200}),y.ignoreClip=!0,f.setTextContent(this._endLabel),f.disableLabelAnimation=!0);var $=getLastIndexNotNull(g);$>=0&&(setLabelStyle(f,getLabelStatesModels(l,"endLabel"),{inheritColor:c,labelFetcher:l,labelDataIndex:$,defaultText:function(x,N,R){return R!=null?getDefaultInterpolatedLabel(d,R):getDefaultLabel(d,x)},enableTextSetter:!0},getEndLabelStateSpecified(u,o)),f.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},s.prototype._endLabelOnDuring=function(l,o,c,u,d,f,g){var y=this._endLabel,$=this._polyline;if(y){l<1&&u.originalX==null&&(u.originalX=y.x,u.originalY=y.y);var x=c.getLayout("points"),N=c.hostModel,R=N.get("connectNulls"),j=f.get("precision"),ne=f.get("distance")||0,se=g.getBaseAxis(),ce=se.isHorizontal(),fe=se.inverse,ea=o.shape,ta=fe?ce?ea.x:ea.y+ea.height:ce?ea.x+ea.width:ea.y,na=(ce?ne:0)*(fe?-1:1),aa=(ce?0:-ne)*(fe?-1:1),ia=ce?"x":"y",sa=getIndexRange(x,ta,ia),ra=sa.range,la=ra[1]-ra[0],oa=void 0;if(la>=1){if(la>1&&!R){var ca=getPointAtIndex(x,ra[0]);y.attr({x:ca[0]+na,y:ca[1]+aa}),d&&(oa=N.getRawValue(ra[0]))}else{var ca=$.getPointOn(ta,ia);ca&&y.attr({x:ca[0]+na,y:ca[1]+aa});var pa=N.getRawValue(ra[0]),ua=N.getRawValue(ra[1]);d&&(oa=interpolateRawValues(c,j,pa,ua,sa.t))}u.lastFrameIndex=ra[0]}else{var da=l===1||u.lastFrameIndex>0?ra[0]:0,ca=getPointAtIndex(x,da);d&&(oa=N.getRawValue(da)),y.attr({x:ca[0]+na,y:ca[1]+aa})}if(d){var ha=labelInner(y);typeof ha.setLabelText=="function"&&ha.setLabelText(oa)}}},s.prototype._doUpdateAnimation=function(l,o,c,u,d,f,g){var y=this._polyline,$=this._polygon,x=l.hostModel,N=lineAnimationDiff(this._data,l,this._stackedOnPoints,o,this._coordSys,c,this._valueOrigin),R=N.current,j=N.stackedOnCurrent,ne=N.next,se=N.stackedOnNext;if(d&&(R=turnPointsIntoStep(N.current,c,d,g),j=turnPointsIntoStep(N.stackedOnCurrent,c,d,g),ne=turnPointsIntoStep(N.next,c,d,g),se=turnPointsIntoStep(N.stackedOnNext,c,d,g)),getBoundingDiff(R,ne)>3e3||$&&getBoundingDiff(j,se)>3e3){y.stopAnimation(),y.setShape({points:ne}),$&&($.stopAnimation(),$.setShape({points:ne,stackedOnPoints:se}));return}y.shape.__points=N.current,y.shape.points=R;var ce={shape:{points:ne}};N.current!==R&&(ce.shape.__points=N.next),y.stopAnimation(),updateProps$1(y,ce,x),$&&($.setShape({points:R,stackedOnPoints:j}),$.stopAnimation(),updateProps$1($,{shape:{stackedOnPoints:se}},x),y.shape.points!==$.shape.points&&($.shape.points=y.shape.points));for(var fe=[],ea=N.status,ta=0;ta<ea.length;ta++){var na=ea[ta].cmd;if(na==="="){var aa=l.getItemGraphicEl(ea[ta].idx1);aa&&fe.push({el:aa,ptIdx:ta})}}y.animators&&y.animators.length&&y.animators[0].during(function(){$&&$.dirtyShape();for(var ia=y.shape.__points,sa=0;sa<fe.length;sa++){var ra=fe[sa].el,la=fe[sa].ptIdx*2;ra.x=ia[la],ra.y=ia[la+1],ra.markRedraw()}})},s.prototype.remove=function(l){var o=this.group,c=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),c&&c.eachItemGraphicEl(function(u,d){u.__temp&&(o.remove(u),c.setItemGraphicEl(d,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},s.type="line",s}(ChartView);function pointsLayout(a,s){return{seriesType:a,plan:createRenderPlanner(),reset:function(l){var o=l.getData(),c=l.coordinateSystem,u=l.pipelineContext,d=s||u.large;if(c){var f=map$1(c.dimensions,function(R){return o.mapDimension(R)}).slice(0,2),g=f.length,y=o.getCalculationInfo("stackResultDimension");isDimensionStacked(o,f[0])&&(f[0]=y),isDimensionStacked(o,f[1])&&(f[1]=y);var $=o.getStore(),x=o.getDimensionIndex(f[0]),N=o.getDimensionIndex(f[1]);return g&&{progress:function(R,j){for(var ne=R.end-R.start,se=d&&createFloat32Array(ne*g),ce=[],fe=[],ea=R.start,ta=0;ea<R.end;ea++){var na=void 0;if(g===1){var aa=$.get(x,ea);na=c.dataToPoint(aa,null,fe)}else ce[0]=$.get(x,ea),ce[1]=$.get(N,ea),na=c.dataToPoint(ce,null,fe);d?(se[ta++]=na[0],se[ta++]=na[1]):j.setItemLayout(ea,na.slice())}d&&j.setLayout("points",se)}}}}}}var samplers={average:function(a){for(var s=0,l=0,o=0;o<a.length;o++)isNaN(a[o])||(s+=a[o],l++);return l===0?NaN:s/l},sum:function(a){for(var s=0,l=0;l<a.length;l++)s+=a[l]||0;return s},max:function(a){for(var s=-1/0,l=0;l<a.length;l++)a[l]>s&&(s=a[l]);return isFinite(s)?s:NaN},min:function(a){for(var s=1/0,l=0;l<a.length;l++)a[l]<s&&(s=a[l]);return isFinite(s)?s:NaN},minmax:function(a){for(var s=-1/0,l=-1/0,o=0;o<a.length;o++){var c=a[o],u=Math.abs(c);u>s&&(s=u,l=c)}return isFinite(l)?l:NaN},nearest:function(a){return a[0]}},indexSampler=function(a){return Math.round(a.length/2)};function dataSample(a){return{seriesType:a,reset:function(s,l,o){var c=s.getData(),u=s.get("sampling"),d=s.coordinateSystem,f=c.count();if(f>10&&d.type==="cartesian2d"&&u){var g=d.getBaseAxis(),y=d.getOtherAxis(g),$=g.getExtent(),x=o.getDevicePixelRatio(),N=Math.abs($[1]-$[0])*(x||1),R=Math.round(f/N);if(isFinite(R)&&R>1){u==="lttb"&&s.setData(c.lttbDownSample(c.mapDimension(y.dim),1/R));var j=void 0;isString$2(u)?j=samplers[u]:isFunction$2(u)&&(j=u),j&&s.setData(c.downSample(c.mapDimension(y.dim),1/R,j,indexSampler))}}}}}function install$R(a){a.registerChartView(LineView),a.registerSeriesModel(LineSeriesModel),a.registerLayout(pointsLayout("line",!0)),a.registerVisual({seriesType:"line",reset:function(s){var l=s.getData(),o=s.getModel("lineStyle").getLineStyle();o&&!o.stroke&&(o.stroke=l.getVisual("style").fill),l.setVisual("legendLineStyle",o)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.getInitialData=function(l,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},s.prototype.getMarkerPosition=function(l,o,c){var u=this.coordinateSystem;if(u&&u.clampData){var d=u.clampData(l),f=u.dataToPoint(d);if(c)each$f(u.getAxes(),function(N,R){if(N.type==="category"&&o!=null){var j=N.getTicksCoords(),ne=N.getTickModel().get("alignWithLabel"),se=d[R],ce=o[R]==="x1"||o[R]==="y1";if(ce&&!ne&&(se+=1),j.length<2)return;if(j.length===2){f[R]=N.toGlobalCoord(N.getExtent()[ce?1:0]);return}for(var fe=void 0,ea=void 0,ta=1,na=0;na<j.length;na++){var aa=j[na].coord,ia=na===j.length-1?j[na-1].tickValue+ta:j[na].tickValue;if(ia===se){ea=aa;break}else if(ia<se)fe=aa;else if(fe!=null&&ia>se){ea=(aa+fe)/2;break}na===1&&(ta=ia-j[0].tickValue)}ea==null&&(fe?fe&&(ea=j[j.length-1].coord):ea=j[0].coord),f[R]=N.toGlobalCoord(ea)}});else{var g=this.getData(),y=g.getLayout("offset"),$=g.getLayout("size"),x=u.getBaseAxis().isHorizontal()?0:1;f[x]+=y+$/2}return f}return[NaN,NaN]},s.type="series.__base_bar__",s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},s}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},s.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},s.prototype.getProgressiveThreshold=function(){var l=this.get("progressiveThreshold"),o=this.get("largeThreshold");return o>l&&(l=o),l},s.prototype.brushSelector=function(l,o,c){return c.rect(o.getItemLayout(l))},s.type="series.bar",s.dependencies=["grid","polar"],s.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),s}(BaseBarSeriesModel),SausageShape=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),SausagePath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="sausage",o}return s.prototype.getDefaultShape=function(){return new SausageShape},s.prototype.buildPath=function(l,o){var c=o.cx,u=o.cy,d=Math.max(o.r0||0,0),f=Math.max(o.r,0),g=(f-d)*.5,y=d+g,$=o.startAngle,x=o.endAngle,N=o.clockwise,R=Math.PI*2,j=N?x-$<R:$-x<R;j||($=x-(N?R:-R));var ne=Math.cos($),se=Math.sin($),ce=Math.cos(x),fe=Math.sin(x);j?(l.moveTo(ne*d+c,se*d+u),l.arc(ne*y+c,se*y+u,g,-Math.PI+$,$,!N)):l.moveTo(ne*f+c,se*f+u),l.arc(c,u,f,$,x,!N),l.arc(ce*y+c,fe*y+u,g,x-Math.PI*2,x-Math.PI,!N),d!==0&&l.arc(c,u,d,x,$,N)},s}(Path);function createSectorCalculateTextPosition(a,s){s=s||{};var l=s.isRoundCap;return function(o,c,u){var d=c.position;if(!d||d instanceof Array)return calculateTextPosition(o,c,u);var f=a(d),g=c.distance!=null?c.distance:5,y=this.shape,$=y.cx,x=y.cy,N=y.r,R=y.r0,j=(N+R)/2,ne=y.startAngle,se=y.endAngle,ce=(ne+se)/2,fe=l?Math.abs(N-R)/2:0,ea=Math.cos,ta=Math.sin,na=$+N*ea(ne),aa=x+N*ta(ne),ia="left",sa="top";switch(f){case"startArc":na=$+(R-g)*ea(ce),aa=x+(R-g)*ta(ce),ia="center",sa="top";break;case"insideStartArc":na=$+(R+g)*ea(ce),aa=x+(R+g)*ta(ce),ia="center",sa="bottom";break;case"startAngle":na=$+j*ea(ne)+adjustAngleDistanceX(ne,g+fe,!1),aa=x+j*ta(ne)+adjustAngleDistanceY(ne,g+fe,!1),ia="right",sa="middle";break;case"insideStartAngle":na=$+j*ea(ne)+adjustAngleDistanceX(ne,-g+fe,!1),aa=x+j*ta(ne)+adjustAngleDistanceY(ne,-g+fe,!1),ia="left",sa="middle";break;case"middle":na=$+j*ea(ce),aa=x+j*ta(ce),ia="center",sa="middle";break;case"endArc":na=$+(N+g)*ea(ce),aa=x+(N+g)*ta(ce),ia="center",sa="bottom";break;case"insideEndArc":na=$+(N-g)*ea(ce),aa=x+(N-g)*ta(ce),ia="center",sa="top";break;case"endAngle":na=$+j*ea(se)+adjustAngleDistanceX(se,g+fe,!0),aa=x+j*ta(se)+adjustAngleDistanceY(se,g+fe,!0),ia="left",sa="middle";break;case"insideEndAngle":na=$+j*ea(se)+adjustAngleDistanceX(se,-g+fe,!0),aa=x+j*ta(se)+adjustAngleDistanceY(se,-g+fe,!0),ia="right",sa="middle";break;default:return calculateTextPosition(o,c,u)}return o=o||{},o.x=na,o.y=aa,o.align=ia,o.verticalAlign=sa,o}}function setSectorTextRotation(a,s,l,o){if(isNumber$2(o)){a.setTextConfig({rotation:o});return}else if(isArray$3(s)){a.setTextConfig({rotation:0});return}var c=a.shape,u=c.clockwise?c.startAngle:c.endAngle,d=c.clockwise?c.endAngle:c.startAngle,f=(u+d)/2,g,y=l(s);switch(y){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":g=f;break;case"startAngle":case"insideStartAngle":g=u;break;case"endAngle":case"insideEndAngle":g=d;break;default:a.setTextConfig({rotation:0});return}var $=Math.PI*1.5-g;y==="middle"&&$>Math.PI/2&&$<Math.PI*1.5&&($-=Math.PI),a.setTextConfig({rotation:$})}function adjustAngleDistanceX(a,s,l){return s*Math.sin(a)*(l?-1:1)}function adjustAngleDistanceY(a,s,l){return s*Math.cos(a)*(l?1:-1)}function getSectorCornerRadius(a,s,l){var o=a.get("borderRadius");if(o==null)return l?{cornerRadius:0}:null;isArray$3(o)||(o=[o,o,o,o]);var c=Math.abs(s.r||0-s.r0||0);return{cornerRadius:map$1(o,function(u){return parsePercent$1(u,c)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(a,s){var l=a.getArea&&a.getArea();if(isCoordinateSystemType(a,"cartesian2d")){var o=a.getBaseAxis();if(o.type!=="category"||!o.onBand){var c=s.getLayout("bandWidth");o.isHorizontal()?(l.x-=c,l.width+=c*2):(l.y-=c,l.height+=c*2)}}return l}var BarView=function(a){__extends(s,a);function s(){var l=a.call(this)||this;return l.type=s.type,l._isFirstFrame=!0,l}return s.prototype.render=function(l,o,c,u){this._model=l,this._removeOnRenderedListener(c),this._updateDrawMode(l);var d=l.get("coordinateSystem");(d==="cartesian2d"||d==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(l,o,c):this._renderNormal(l,o,c,u))},s.prototype.incrementalPrepareRender=function(l){this._clear(),this._updateDrawMode(l),this._updateLargeClip(l)},s.prototype.incrementalRender=function(l,o){this._progressiveEls=[],this._incrementalRenderLarge(l,o)},s.prototype.eachRendered=function(l){traverseElements(this._progressiveEls||this.group,l)},s.prototype._updateDrawMode=function(l){var o=l.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},s.prototype._renderNormal=function(l,o,c,u){var d=this.group,f=l.getData(),g=this._data,y=l.coordinateSystem,$=y.getBaseAxis(),x;y.type==="cartesian2d"?x=$.isHorizontal():y.type==="polar"&&(x=$.dim==="angle");var N=l.isAnimationEnabled()?l:null,R=shouldRealtimeSort(l,y);R&&this._enableRealtimeSort(R,f,c);var j=l.get("clip",!0)||R,ne=getClipArea(y,f);d.removeClipPath();var se=l.get("roundCap",!0),ce=l.get("showBackground",!0),fe=l.getModel("backgroundStyle"),ea=fe.get("borderRadius")||0,ta=[],na=this._backgroundEls,aa=u&&u.isInitSort,ia=u&&u.type==="changeAxisOrder";function sa(oa){var ca=getLayout[y.type](f,oa),pa=createBackgroundEl(y,x,ca);return pa.useStyle(fe.getItemStyle()),y.type==="cartesian2d"?pa.setShape("r",ea):pa.setShape("cornerRadius",ea),ta[oa]=pa,pa}f.diff(g).add(function(oa){var ca=f.getItemModel(oa),pa=getLayout[y.type](f,oa,ca);if(ce&&sa(oa),!(!f.hasValue(oa)||!isValidLayout[y.type](pa))){var ua=!1;j&&(ua=clip[y.type](ne,pa));var da=elementCreator[y.type](l,f,oa,pa,x,N,$.model,!1,se);R&&(da.forceLabelAnimation=!0),updateStyle(da,f,oa,ca,pa,l,x,y.type==="polar"),aa?da.attr({shape:pa}):R?updateRealtimeAnimation(R,N,da,pa,oa,x,!1,!1):initProps(da,{shape:pa},l,oa),f.setItemGraphicEl(oa,da),d.add(da),da.ignore=ua}}).update(function(oa,ca){var pa=f.getItemModel(oa),ua=getLayout[y.type](f,oa,pa);if(ce){var da=void 0;na.length===0?da=sa(ca):(da=na[ca],da.useStyle(fe.getItemStyle()),y.type==="cartesian2d"?da.setShape("r",ea):da.setShape("cornerRadius",ea),ta[oa]=da);var ha=getLayout[y.type](f,oa),ga=createBackgroundShape(x,ha,y);updateProps$1(da,{shape:ga},N,oa)}var fa=g.getItemGraphicEl(ca);if(!f.hasValue(oa)||!isValidLayout[y.type](ua)){d.remove(fa);return}var ma=!1;if(j&&(ma=clip[y.type](ne,ua),ma&&d.remove(fa)),fa?saveOldStyle(fa):fa=elementCreator[y.type](l,f,oa,ua,x,N,$.model,!!fa,se),R&&(fa.forceLabelAnimation=!0),ia){var va=fa.getTextContent();if(va){var ka=labelInner(va);ka.prevValue!=null&&(ka.prevValue=ka.value)}}else updateStyle(fa,f,oa,pa,ua,l,x,y.type==="polar");aa?fa.attr({shape:ua}):R?updateRealtimeAnimation(R,N,fa,ua,oa,x,!0,ia):updateProps$1(fa,{shape:ua},l,oa,null),f.setItemGraphicEl(oa,fa),fa.ignore=ma,d.add(fa)}).remove(function(oa){var ca=g.getItemGraphicEl(oa);ca&&removeElementWithFadeOut(ca,l,oa)}).execute();var ra=this._backgroundGroup||(this._backgroundGroup=new Group$3);ra.removeAll();for(var la=0;la<ta.length;++la)ra.add(ta[la]);d.add(ra),this._backgroundEls=ta,this._data=f},s.prototype._renderLarge=function(l,o,c){this._clear(),createLarge$1(l,this.group),this._updateLargeClip(l)},s.prototype._incrementalRenderLarge=function(l,o){this._removeBackground(),createLarge$1(o,this.group,this._progressiveEls,!0)},s.prototype._updateLargeClip=function(l){var o=l.get("clip",!0)&&createClipPath(l.coordinateSystem,!1,l),c=this.group;o?c.setClipPath(o):c.removeClipPath()},s.prototype._enableRealtimeSort=function(l,o,c){var u=this;if(o.count()){var d=l.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(o,l,c),this._isFirstFrame=!1;else{var f=function(g){var y=o.getItemGraphicEl(g),$=y&&y.shape;return $&&Math.abs(d.isHorizontal()?$.height:$.width)||0};this._onRendered=function(){u._updateSortWithinSameData(o,f,d,c)},c.getZr().on("rendered",this._onRendered)}}},s.prototype._dataSort=function(l,o,c){var u=[];return l.each(l.mapDimension(o.dim),function(d,f){var g=c(f);g=g??NaN,u.push({dataIndex:f,mappedValue:g,ordinalNumber:d})}),u.sort(function(d,f){return f.mappedValue-d.mappedValue}),{ordinalNumbers:map$1(u,function(d){return d.ordinalNumber})}},s.prototype._isOrderChangedWithinSameData=function(l,o,c){for(var u=c.scale,d=l.mapDimension(c.dim),f=Number.MAX_VALUE,g=0,y=u.getOrdinalMeta().categories.length;g<y;++g){var $=l.rawIndexOf(d,u.getRawOrdinalNumber(g)),x=$<0?Number.MIN_VALUE:o(l.indexOfRawIndex($));if(x>f)return!0;f=x}return!1},s.prototype._isOrderDifferentInView=function(l,o){for(var c=o.scale,u=c.getExtent(),d=Math.max(0,u[0]),f=Math.min(u[1],c.getOrdinalMeta().categories.length-1);d<=f;++d)if(l.ordinalNumbers[d]!==c.getRawOrdinalNumber(d))return!0},s.prototype._updateSortWithinSameData=function(l,o,c,u){if(this._isOrderChangedWithinSameData(l,o,c)){var d=this._dataSort(l,c,o);this._isOrderDifferentInView(d,c)&&(this._removeOnRenderedListener(u),u.dispatchAction({type:"changeAxisOrder",componentType:c.dim+"Axis",axisId:c.index,sortInfo:d}))}},s.prototype._dispatchInitSort=function(l,o,c){var u=o.baseAxis,d=this._dataSort(l,u,function(f){return l.get(l.mapDimension(o.otherAxis.dim),f)});c.dispatchAction({type:"changeAxisOrder",componentType:u.dim+"Axis",isInitSort:!0,axisId:u.index,sortInfo:d})},s.prototype.remove=function(l,o){this._clear(this._model),this._removeOnRenderedListener(o)},s.prototype.dispose=function(l,o){this._removeOnRenderedListener(o)},s.prototype._removeOnRenderedListener=function(l){this._onRendered&&(l.getZr().off("rendered",this._onRendered),this._onRendered=null)},s.prototype._clear=function(l){var o=this.group,c=this._data;l&&l.isAnimationEnabled()&&c&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],c.eachItemGraphicEl(function(u){removeElementWithFadeOut(u,l,getECData(u).dataIndex)})):o.removeAll(),this._data=null,this._isFirstFrame=!0},s.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},s.type="bar",s}(ChartView),clip={cartesian2d:function(a,s){var l=s.width<0?-1:1,o=s.height<0?-1:1;l<0&&(s.x+=s.width,s.width=-s.width),o<0&&(s.y+=s.height,s.height=-s.height);var c=a.x+a.width,u=a.y+a.height,d=mathMax$4(s.x,a.x),f=mathMin$4(s.x+s.width,c),g=mathMax$4(s.y,a.y),y=mathMin$4(s.y+s.height,u),$=f<d,x=y<g;return s.x=$&&d>c?f:d,s.y=x&&g>u?y:g,s.width=$?0:f-d,s.height=x?0:y-g,l<0&&(s.x+=s.width,s.width=-s.width),o<0&&(s.y+=s.height,s.height=-s.height),$||x},polar:function(a,s){var l=s.r0<=s.r?1:-1;if(l<0){var o=s.r;s.r=s.r0,s.r0=o}var c=mathMin$4(s.r,a.r),u=mathMax$4(s.r0,a.r0);s.r=c,s.r0=u;var d=c-u<0;if(l<0){var o=s.r;s.r=s.r0,s.r0=o}return d}},elementCreator={cartesian2d:function(a,s,l,o,c,u,d,f,g){var y=new Rect$2({shape:extend({},o),z2:1});if(y.__dataIndex=l,y.name="item",u){var $=y.shape,x=c?"height":"width";$[x]=0}return y},polar:function(a,s,l,o,c,u,d,f,g){var y=!c&&g?SausagePath:Sector,$=new y({shape:o,z2:1});$.name="item";var x=createPolarPositionMapping(c);if($.calculateTextPosition=createSectorCalculateTextPosition(x,{isRoundCap:y===SausagePath}),u){var N=$.shape,R=c?"r":"endAngle",j={};N[R]=c?o.r0:o.startAngle,j[R]=o[R],(f?updateProps$1:initProps)($,{shape:j},u)}return $}};function shouldRealtimeSort(a,s){var l=a.get("realtimeSort",!0),o=s.getBaseAxis();if(l&&o.type==="category"&&s.type==="cartesian2d")return{baseAxis:o,otherAxis:s.getOtherAxis(o)}}function updateRealtimeAnimation(a,s,l,o,c,u,d,f){var g,y;u?(y={x:o.x,width:o.width},g={y:o.y,height:o.height}):(y={y:o.y,height:o.height},g={x:o.x,width:o.width}),f||(d?updateProps$1:initProps)(l,{shape:g},s,c,null);var $=s?a.baseAxis.model:null;(d?updateProps$1:initProps)(l,{shape:y},$,c)}function checkPropertiesNotValid(a,s){for(var l=0;l<s.length;l++)if(!isFinite(a[s[l]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(a){return!checkPropertiesNotValid(a,rectPropties)},polar:function(a){return!checkPropertiesNotValid(a,polarPropties)}},getLayout={cartesian2d:function(a,s,l){var o=a.getItemLayout(s),c=l?getLineWidth(l,o):0,u=o.width>0?1:-1,d=o.height>0?1:-1;return{x:o.x+u*c/2,y:o.y+d*c/2,width:o.width-u*c,height:o.height-d*c}},polar:function(a,s,l){var o=a.getItemLayout(s);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}}};function isZeroOnPolar(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function createPolarPositionMapping(a){return function(s){var l=s?"Arc":"Angle";return function(o){switch(o){case"start":case"insideStart":case"end":case"insideEnd":return o+l;default:return o}}}(a)}function updateStyle(a,s,l,o,c,u,d,f){var g=s.getItemVisual(l,"style");if(f){if(!u.get("roundCap")){var $=a.shape,x=getSectorCornerRadius(o.getModel("itemStyle"),$,!0);extend($,x),a.setShape($)}}else{var y=o.get(["itemStyle","borderRadius"])||0;a.setShape("r",y)}a.useStyle(g);var N=o.getShallow("cursor");N&&a.attr("cursor",N);var R=f?d?c.r>=c.r0?"endArc":"startArc":c.endAngle>=c.startAngle?"endAngle":"startAngle":d?c.height>=0?"bottom":"top":c.width>=0?"right":"left",j=getLabelStatesModels(o);setLabelStyle(a,j,{labelFetcher:u,labelDataIndex:l,defaultText:getDefaultLabel(u.getData(),l),inheritColor:g.fill,defaultOpacity:g.opacity,defaultOutsidePosition:R});var ne=a.getTextContent();if(f&&ne){var se=o.get(["label","position"]);a.textConfig.inside=se==="middle"?!0:null,setSectorTextRotation(a,se==="outside"?R:se,createPolarPositionMapping(d),o.get(["label","rotate"]))}setLabelValueAnimation(ne,j,u.getRawValue(l),function(fe){return getDefaultInterpolatedLabel(s,fe)});var ce=o.getModel(["emphasis"]);toggleHoverEmphasis(a,ce.get("focus"),ce.get("blurScope"),ce.get("disabled")),setStatesStylesFromModel(a,o),isZeroOnPolar(c)&&(a.style.fill="none",a.style.stroke="none",each$f(a.states,function(fe){fe.style&&(fe.style.fill=fe.style.stroke="none")}))}function getLineWidth(a,s){var l=a.get(["itemStyle","borderColor"]);if(!l||l==="none")return 0;var o=a.get(["itemStyle","borderWidth"])||0,c=isNaN(s.width)?Number.MAX_VALUE:Math.abs(s.width),u=isNaN(s.height)?Number.MAX_VALUE:Math.abs(s.height);return Math.min(o,c,u)}var LagePathShape=function(){function a(){}return a}(),LargePath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="largeBar",o}return s.prototype.getDefaultShape=function(){return new LagePathShape},s.prototype.buildPath=function(l,o){for(var c=o.points,u=this.baseDimIdx,d=1-this.baseDimIdx,f=[],g=[],y=this.barWidth,$=0;$<c.length;$+=3)g[u]=y,g[d]=c[$+2],f[u]=c[$+u],f[d]=c[$+d],l.rect(f[0],f[1],g[0],g[1])},s}(Path);function createLarge$1(a,s,l,o){var c=a.getData(),u=c.getLayout("valueAxisHorizontal")?1:0,d=c.getLayout("largeDataIndices"),f=c.getLayout("size"),g=a.getModel("backgroundStyle"),y=c.getLayout("largeBackgroundPoints");if(y){var $=new LargePath({shape:{points:y},incremental:!!o,silent:!0,z2:0});$.baseDimIdx=u,$.largeDataIndices=d,$.barWidth=f,$.useStyle(g.getItemStyle()),s.add($),l&&l.push($)}var x=new LargePath({shape:{points:c.getLayout("largePoints")},incremental:!!o,ignoreCoarsePointer:!0,z2:1});x.baseDimIdx=u,x.largeDataIndices=d,x.barWidth=f,s.add(x),x.useStyle(c.getVisual("style")),getECData(x).seriesIndex=a.seriesIndex,a.get("silent")||(x.on("mousedown",largePathUpdateDataIndex),x.on("mousemove",largePathUpdateDataIndex)),l&&l.push(x)}var largePathUpdateDataIndex=throttle$1(function(a){var s=this,l=largePathFindDataIndex(s,a.offsetX,a.offsetY);getECData(s).dataIndex=l>=0?l:null},30,!1);function largePathFindDataIndex(a,s,l){for(var o=a.baseDimIdx,c=1-o,u=a.shape.points,d=a.largeDataIndices,f=[],g=[],y=a.barWidth,$=0,x=u.length/3;$<x;$++){var N=$*3;if(g[o]=y,g[c]=u[N+2],f[o]=u[N+o],f[c]=u[N+c],g[c]<0&&(f[c]+=g[c],g[c]=-g[c]),s>=f[0]&&s<=f[0]+g[0]&&l>=f[1]&&l<=f[1]+g[1])return d[$]}return-1}function createBackgroundShape(a,s,l){if(isCoordinateSystemType(l,"cartesian2d")){var o=s,c=l.getArea();return{x:a?o.x:c.x,y:a?c.y:o.y,width:a?o.width:c.width,height:a?c.height:o.height}}else{var c=l.getArea(),u=s;return{cx:c.cx,cy:c.cy,r0:a?c.r0:u.r0,r:a?c.r:u.r,startAngle:a?u.startAngle:0,endAngle:a?u.endAngle:Math.PI*2}}}function createBackgroundEl(a,s,l){var o=a.type==="polar"?Sector:Rect$2;return new o({shape:createBackgroundShape(s,l,a),silent:!0,z2:0})}function install$Q(a){a.registerChartView(BarView),a.registerSeriesModel(BarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(s,l){var o=s.componentType||"series";l.eachComponent({mainType:o,query:s},function(c){s.sortInfo&&c.axis.setCategorySortInfo(s.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(a,s){return getLayoutRect(a.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function getBasicPieLayout(a,s){var l=getViewRect$5(a,s),o=a.get("center"),c=a.get("radius");isArray$3(c)||(c=[0,c]);var u=parsePercent(l.width,s.getWidth()),d=parsePercent(l.height,s.getHeight()),f=Math.min(u,d),g=parsePercent(c[0],f/2),y=parsePercent(c[1],f/2),$,x,N=a.coordinateSystem;if(N){var R=N.dataToPoint(o);$=R[0]||0,x=R[1]||0}else isArray$3(o)||(o=[o,o]),$=parsePercent(o[0],u)+l.x,x=parsePercent(o[1],d)+l.y;return{cx:$,cy:x,r0:g,r:y}}function pieLayout(a,s,l){s.eachSeriesByType(a,function(o){var c=o.getData(),u=c.mapDimension("value"),d=getViewRect$5(o,l),f=getBasicPieLayout(o,l),g=f.cx,y=f.cy,$=f.r,x=f.r0,N=-o.get("startAngle")*RADIAN$2,R=o.get("endAngle"),j=o.get("padAngle")*RADIAN$2;R=R==="auto"?N-PI2:-R*RADIAN$2;var ne=o.get("minAngle")*RADIAN$2,se=ne+j,ce=0;c.each(u,function(ga){!isNaN(ga)&&ce++});var fe=c.getSum(u),ea=Math.PI/(fe||ce)*2,ta=o.get("clockwise"),na=o.get("roseType"),aa=o.get("stillShowZeroSum"),ia=c.getDataExtent(u);ia[0]=0;var sa=ta?1:-1,ra=[N,R],la=sa*j/2;normalizeArcAngles(ra,!ta),N=ra[0],R=ra[1];var oa=getSeriesLayoutData(o);oa.startAngle=N,oa.endAngle=R,oa.clockwise=ta;var ca=Math.abs(R-N),pa=ca,ua=0,da=N;if(c.setLayout({viewRect:d,r:$}),c.each(u,function(ga,fa){var ma;if(isNaN(ga)){c.setItemLayout(fa,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:ta,cx:g,cy:y,r0:x,r:na?NaN:$});return}na!=="area"?ma=fe===0&&aa?ea:ga*ea:ma=ca/ce,ma<se?(ma=se,pa-=se):ua+=ga;var va=da+sa*ma,ka=0,ya=0;j>ma?(ka=da+sa*ma/2,ya=ka):(ka=da+la,ya=va-la),c.setItemLayout(fa,{angle:ma,startAngle:ka,endAngle:ya,clockwise:ta,cx:g,cy:y,r0:x,r:na?linearMap$2(ga,ia,[x,$]):$}),da=va}),pa<PI2&&ce)if(pa<=.001){var ha=ca/ce;c.each(u,function(ga,fa){if(!isNaN(ga)){var ma=c.getItemLayout(fa);ma.angle=ha;var va=0,ka=0;ha<j?(va=N+sa*(fa+1/2)*ha,ka=va):(va=N+sa*fa*ha+la,ka=N+sa*(fa+1)*ha-la),ma.startAngle=va,ma.endAngle=ka}})}else ea=pa/ua,da=N,c.each(u,function(ga,fa){if(!isNaN(ga)){var ma=c.getItemLayout(fa),va=ma.angle===se?se:ga*ea,ka=0,ya=0;va<j?(ka=da+sa*va/2,ya=ka):(ka=da+la,ya=da+sa*va-la),ma.startAngle=ka,ma.endAngle=ya,da+=sa*va}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(a){return{seriesType:a,reset:function(s,l){var o=l.findComponents({mainType:"legend"});if(!(!o||!o.length)){var c=s.getData();c.filterSelf(function(u){for(var d=c.getName(u),f=0;f<o.length;f++)if(!o[f].isSelected(d))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(a,s,l,o,c,u,d,f,g,y){if(a.length<2)return;function $(ne){for(var se=ne.rB,ce=se*se,fe=0;fe<ne.list.length;fe++){var ea=ne.list[fe],ta=Math.abs(ea.label.y-l),na=o+ea.len,aa=na*na,ia=Math.sqrt((1-Math.abs(ta*ta/ce))*aa),sa=s+(ia+ea.len2)*c,ra=sa-ea.label.x,la=ea.targetTextWidth-ra*c;constrainTextWidth(ea,la,!0),ea.label.x=sa}}function x(ne){for(var se={list:[],maxY:0},ce={list:[],maxY:0},fe=0;fe<ne.length;fe++)if(ne[fe].labelAlignTo==="none"){var ea=ne[fe],ta=ea.label.y>l?ce:se,na=Math.abs(ea.label.y-l);if(na>=ta.maxY){var aa=ea.label.x-s-ea.len2*c,ia=o+ea.len,sa=Math.abs(aa)<ia?Math.sqrt(na*na/(1-aa*aa/ia/ia)):ia;ta.rB=sa,ta.maxY=na}ta.list.push(ea)}$(se),$(ce)}for(var N=a.length,R=0;R<N;R++)if(a[R].position==="outer"&&a[R].labelAlignTo==="labelLine"){var j=a[R].label.x-y;a[R].linePoints[1][0]+=j,a[R].label.x=y}shiftLayoutOnY(a,g,g+d)&&x(a)}function avoidOverlap(a,s,l,o,c,u,d,f){for(var g=[],y=[],$=Number.MAX_VALUE,x=-Number.MAX_VALUE,N=0;N<a.length;N++){var R=a[N].label;isPositionCenter(a[N])||(R.x<s?($=Math.min($,R.x),g.push(a[N])):(x=Math.max(x,R.x),y.push(a[N])))}for(var N=0;N<a.length;N++){var j=a[N];if(!isPositionCenter(j)&&j.linePoints){if(j.labelStyleWidth!=null)continue;var R=j.label,ne=j.linePoints,se=void 0;j.labelAlignTo==="edge"?R.x<s?se=ne[2][0]-j.labelDistance-d-j.edgeDistance:se=d+c-j.edgeDistance-ne[2][0]-j.labelDistance:j.labelAlignTo==="labelLine"?R.x<s?se=$-d-j.bleedMargin:se=d+c-x-j.bleedMargin:R.x<s?se=R.x-d-j.bleedMargin:se=d+c-R.x-j.bleedMargin,j.targetTextWidth=se,constrainTextWidth(j,se)}}adjustSingleSide(y,s,l,o,1,c,u,d,f,x),adjustSingleSide(g,s,l,o,-1,c,u,d,f,$);for(var N=0;N<a.length;N++){var j=a[N];if(!isPositionCenter(j)&&j.linePoints){var R=j.label,ne=j.linePoints,ce=j.labelAlignTo==="edge",fe=R.style.padding,ea=fe?fe[1]+fe[3]:0,ta=R.style.backgroundColor?0:ea,na=j.rect.width+ta,aa=ne[1][0]-ne[2][0];ce?R.x<s?ne[2][0]=d+j.edgeDistance+na+j.labelDistance:ne[2][0]=d+c-j.edgeDistance-na-j.labelDistance:(R.x<s?ne[2][0]=R.x+j.labelDistance:ne[2][0]=R.x-j.labelDistance,ne[1][0]=ne[2][0]+aa),ne[1][1]=ne[2][1]=R.y}}}function constrainTextWidth(a,s,l){if(l===void 0&&(l=!1),a.labelStyleWidth==null){var o=a.label,c=o.style,u=a.rect,d=c.backgroundColor,f=c.padding,g=f?f[1]+f[3]:0,y=c.overflow,$=u.width+(d?0:g);if(s<$||l){var x=u.height;if(y&&y.match("break")){o.setStyle("backgroundColor",null),o.setStyle("width",s-g);var N=o.getBoundingRect();o.setStyle("width",Math.ceil(N.width)),o.setStyle("backgroundColor",d)}else{var R=s-g,j=s<$?R:l?R>a.unconstrainedWidth?null:R:null;o.setStyle("width",j)}var ne=o.getBoundingRect();u.width=ne.width;var se=(o.style.margin||0)+2.1;u.height=ne.height+se,u.y-=(u.height-x)/2}}}function isPositionCenter(a){return a.position==="center"}function pieLabelLayout(a){var s=a.getData(),l=[],o,c,u=!1,d=(a.get("minShowLabelAngle")||0)*RADIAN$1,f=s.getLayout("viewRect"),g=s.getLayout("r"),y=f.width,$=f.x,x=f.y,N=f.height;function R(aa){aa.ignore=!0}function j(aa){if(!aa.ignore)return!0;for(var ia in aa.states)if(aa.states[ia].ignore===!1)return!0;return!1}s.each(function(aa){var ia=s.getItemGraphicEl(aa),sa=ia.shape,ra=ia.getTextContent(),la=ia.getTextGuideLine(),oa=s.getItemModel(aa),ca=oa.getModel("label"),pa=ca.get("position")||oa.get(["emphasis","label","position"]),ua=ca.get("distanceToLabelLine"),da=ca.get("alignTo"),ha=parsePercent(ca.get("edgeDistance"),y),ga=ca.get("bleedMargin"),fa=oa.getModel("labelLine"),ma=fa.get("length");ma=parsePercent(ma,y);var va=fa.get("length2");if(va=parsePercent(va,y),Math.abs(sa.endAngle-sa.startAngle)<d){each$f(ra.states,R),ra.ignore=!0,la&&(each$f(la.states,R),la.ignore=!0);return}if(j(ra)){var ka=(sa.startAngle+sa.endAngle)/2,ya=Math.cos(ka),ba=Math.sin(ka),Ea,Ca,$a,Pa;o=sa.cx,c=sa.cy;var Da=pa==="inside"||pa==="inner";if(pa==="center")Ea=sa.cx,Ca=sa.cy,Pa="center";else{var Ta=(Da?(sa.r+sa.r0)/2*ya:sa.r*ya)+o,Ba=(Da?(sa.r+sa.r0)/2*ba:sa.r*ba)+c;if(Ea=Ta+ya*3,Ca=Ba+ba*3,!Da){var wa=Ta+ya*(ma+g-sa.r),Oa=Ba+ba*(ma+g-sa.r),Aa=wa+(ya<0?-1:1)*va,Sa=Oa;da==="edge"?Ea=ya<0?$+ha:$+y-ha:Ea=Aa+(ya<0?-ua:ua),Ca=Sa,$a=[[Ta,Ba],[wa,Oa],[Aa,Sa]]}Pa=Da?"center":da==="edge"?ya>0?"right":"left":ya>0?"left":"right"}var Fa=Math.PI,Ia=0,Ga=ca.get("rotate");if(isNumber$2(Ga))Ia=Ga*(Fa/180);else if(pa==="center")Ia=0;else if(Ga==="radial"||Ga===!0){var Ya=ya<0?-ka+Fa:-ka;Ia=Ya}else if(Ga==="tangential"&&pa!=="outside"&&pa!=="outer"){var Va=Math.atan2(ya,ba);Va<0&&(Va=Fa*2+Va);var La=ba>0;La&&(Va=Fa+Va),Ia=Va-Fa}if(u=!!Ia,ra.x=Ea,ra.y=Ca,ra.rotation=Ia,ra.setStyle({verticalAlign:"middle"}),Da){ra.setStyle({align:Pa});var pn=ra.states.select;pn&&(pn.x+=ra.x,pn.y+=ra.y)}else{var Za=ra.getBoundingRect().clone();Za.applyTransform(ra.getComputedTransform());var rn=(ra.style.margin||0)+2.1;Za.y-=rn/2,Za.height+=rn,l.push({label:ra,labelLine:la,position:pa,len:ma,len2:va,minTurnAngle:fa.get("minTurnAngle"),maxSurfaceAngle:fa.get("maxSurfaceAngle"),surfaceNormal:new Point(ya,ba),linePoints:$a,textAlign:Pa,labelDistance:ua,labelAlignTo:da,edgeDistance:ha,bleedMargin:ga,rect:Za,unconstrainedWidth:Za.width,labelStyleWidth:ra.style.width})}ia.setTextConfig({inside:Da})}}),!u&&a.get("avoidLabelOverlap")&&avoidOverlap(l,o,c,g,y,N,$,x);for(var ne=0;ne<l.length;ne++){var se=l[ne],ce=se.label,fe=se.labelLine,ea=isNaN(ce.x)||isNaN(ce.y);if(ce){ce.setStyle({align:se.textAlign}),ea&&(each$f(ce.states,R),ce.ignore=!0);var ta=ce.states.select;ta&&(ta.x+=ce.x,ta.y+=ce.y)}if(fe){var na=se.linePoints;ea||!na?(each$f(fe.states,R),fe.ignore=!0):(limitTurnAngle(na,se.minTurnAngle),limitSurfaceAngle(na,se.surfaceNormal,se.maxSurfaceAngle),fe.setShape({points:na}),ce.__hostTarget.textGuideLineConfig={anchor:new Point(na[0][0],na[0][1])})}}}var PiePiece=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this)||this;u.z2=2;var d=new ZRText;return u.setTextContent(d),u.updateData(l,o,c,!0),u}return s.prototype.updateData=function(l,o,c,u){var d=this,f=l.hostModel,g=l.getItemModel(o),y=g.getModel("emphasis"),$=l.getItemLayout(o),x=extend(getSectorCornerRadius(g.getModel("itemStyle"),$,!0),$);if(isNaN(x.startAngle)){d.setShape(x);return}if(u){d.setShape(x);var N=f.getShallow("animationType");f.ecModel.ssr?(initProps(d,{scaleX:0,scaleY:0},f,{dataIndex:o,isFrom:!0}),d.originX=x.cx,d.originY=x.cy):N==="scale"?(d.shape.r=$.r0,initProps(d,{shape:{r:$.r}},f,o)):c!=null?(d.setShape({startAngle:c,endAngle:c}),initProps(d,{shape:{startAngle:$.startAngle,endAngle:$.endAngle}},f,o)):(d.shape.endAngle=$.startAngle,updateProps$1(d,{shape:{endAngle:$.endAngle}},f,o))}else saveOldStyle(d),updateProps$1(d,{shape:x},f,o);d.useStyle(l.getItemVisual(o,"style")),setStatesStylesFromModel(d,g);var R=($.startAngle+$.endAngle)/2,j=f.get("selectedOffset"),ne=Math.cos(R)*j,se=Math.sin(R)*j,ce=g.getShallow("cursor");ce&&d.attr("cursor",ce),this._updateLabel(f,l,o),d.ensureState("emphasis").shape=extend({r:$.r+(y.get("scale")&&y.get("scaleSize")||0)},getSectorCornerRadius(y.getModel("itemStyle"),$)),extend(d.ensureState("select"),{x:ne,y:se,shape:getSectorCornerRadius(g.getModel(["select","itemStyle"]),$)}),extend(d.ensureState("blur"),{shape:getSectorCornerRadius(g.getModel(["blur","itemStyle"]),$)});var fe=d.getTextGuideLine(),ea=d.getTextContent();fe&&extend(fe.ensureState("select"),{x:ne,y:se}),extend(ea.ensureState("select"),{x:ne,y:se}),toggleHoverEmphasis(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(l,o,c){var u=this,d=o.getItemModel(c),f=d.getModel("labelLine"),g=o.getItemVisual(c,"style"),y=g&&g.fill,$=g&&g.opacity;setLabelStyle(u,getLabelStatesModels(d),{labelFetcher:o.hostModel,labelDataIndex:c,inheritColor:y,defaultOpacity:$,defaultText:l.getFormattedLabel(c,"normal")||o.getName(c)});var x=u.getTextContent();u.setTextConfig({position:null,rotation:null}),x.attr({z2:10});var N=l.get(["label","position"]);if(N!=="outside"&&N!=="outer")u.removeTextGuideLine();else{var R=this.getTextGuideLine();R||(R=new Polyline$1,this.setTextGuideLine(R)),setLabelLineStyle(this,getLabelLineStatesModels(d),{stroke:y,opacity:retrieve3(f.get(["lineStyle","opacity"]),$,1)})}},s}(Sector),PieView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.ignoreLabelLineUpdate=!0,l}return s.prototype.render=function(l,o,c,u){var d=l.getData(),f=this._data,g=this.group,y;if(!f&&d.count()>0){for(var $=d.getItemLayout(0),x=1;isNaN($&&$.startAngle)&&x<d.count();++x)$=d.getItemLayout(x);$&&(y=$.startAngle)}if(this._emptyCircleSector&&g.remove(this._emptyCircleSector),d.count()===0&&l.get("showEmptyCircle")){var N=getSeriesLayoutData(l),R=new Sector({shape:extend(getBasicPieLayout(l,c),N)});R.useStyle(l.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=R,g.add(R)}d.diff(f).add(function(j){var ne=new PiePiece(d,j,y);d.setItemGraphicEl(j,ne),g.add(ne)}).update(function(j,ne){var se=f.getItemGraphicEl(ne);se.updateData(d,j,y),se.off("click"),g.add(se),d.setItemGraphicEl(j,se)}).remove(function(j){var ne=f.getItemGraphicEl(j);removeElementWithFadeOut(ne,l,j)}).execute(),pieLabelLayout(l),l.get("animationTypeUpdate")!=="expansion"&&(this._data=d)},s.prototype.dispose=function(){},s.prototype.containPoint=function(l,o){var c=o.getData(),u=c.getItemLayout(0);if(u){var d=l[0]-u.cx,f=l[1]-u.cy,g=Math.sqrt(d*d+f*f);return g<=u.r&&g>=u.r0}},s.type="pie",s}(ChartView);function createSeriesDataSimply(a,s,l){s=isArray$3(s)&&{coordDimensions:s}||extend({encodeDefine:a.getEncode()},s);var o=a.getSource(),c=prepareSeriesDataSchema(o,s).dimensions,u=new SeriesData(c,a);return u.initData(o,l),u}var LegendVisualProvider=function(){function a(s,l){this._getDataWithEncodedVisual=s,this._getRawData=l}return a.prototype.getAllNames=function(){var s=this._getRawData();return s.mapArray(s.getName)},a.prototype.containName=function(s){var l=this._getRawData();return l.indexOfName(s)>=0},a.prototype.indexOfName=function(s){var l=this._getDataWithEncodedVisual();return l.indexOfName(s)},a.prototype.getItemVisual=function(s,l){var o=this._getDataWithEncodedVisual();return o.getItemVisual(s,l)},a}(),innerData=makeInner(),PieSeriesModel=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.init=function(l){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(l)},s.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},s.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},s.prototype.getDataParams=function(l){var o=this.getData(),c=innerData(o),u=c.seats;if(!u){var d=[];o.each(o.mapDimension("value"),function(g){d.push(g)}),u=c.seats=getPercentSeats(d,o.hostModel.get("percentPrecision"))}var f=a.prototype.getDataParams.call(this,l);return f.percent=u[l]||0,f.$vars.push("percent"),f},s.prototype._defaultLabelLine=function(l){defaultEmphasis(l,"labelLine",["show"]);var o=l.labelLine,c=l.emphasis.labelLine;o.show=o.show&&l.label.show,c.show=c.show&&l.emphasis.label.show},s.type="series.pie",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},s}(SeriesModel);function negativeDataFilter(a){return{seriesType:a,reset:function(s,l){var o=s.getData();o.filterSelf(function(c){var u=o.mapDimension("value"),d=o.get(u,c);return!(isNumber$2(d)&&!isNaN(d)&&d<0)})}}}function install$P(a){a.registerChartView(PieView),a.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",a.registerAction),a.registerLayout(curry$1(pieLayout,"pie")),a.registerProcessor(dataFilter$1("pie")),a.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l}return s.prototype.getInitialData=function(l,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},s.prototype.getProgressive=function(){var l=this.option.progressive;return l??(this.option.large?5e3:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){var l=this.option.progressiveThreshold;return l??(this.option.large?1e4:this.get("progressiveThreshold"))},s.prototype.brushSelector=function(l,o,c){return c.point(o.getItemLayout(l))},s.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},s.type="series.scatter",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},s}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function a(){}return a}(),LargeSymbolPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o._off=0,o.hoverDataIdx=-1,o}return s.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.buildPath=function(l,o){var c=o.points,u=o.size,d=this.symbolProxy,f=d.shape,g=l.getContext?l.getContext():l,y=g&&u[0]<BOOST_SIZE_THRESHOLD,$=this.softClipShape,x;if(y){this._ctx=g;return}for(this._ctx=null,x=this._off;x<c.length;){var N=c[x++],R=c[x++];isNaN(N)||isNaN(R)||$&&!$.contain(N,R)||(f.x=N-u[0]/2,f.y=R-u[1]/2,f.width=u[0],f.height=u[1],d.buildPath(l,f,!0))}this.incremental&&(this._off=x,this.notClear=!0)},s.prototype.afterBrush=function(){var l=this.shape,o=l.points,c=l.size,u=this._ctx,d=this.softClipShape,f;if(u){for(f=this._off;f<o.length;){var g=o[f++],y=o[f++];isNaN(g)||isNaN(y)||d&&!d.contain(g,y)||u.fillRect(g-c[0]/2,y-c[1]/2,c[0],c[1])}this.incremental&&(this._off=f,this.notClear=!0)}},s.prototype.findDataIndex=function(l,o){for(var c=this.shape,u=c.points,d=c.size,f=Math.max(d[0],4),g=Math.max(d[1],4),y=u.length/2-1;y>=0;y--){var $=y*2,x=u[$]-f/2,N=u[$+1]-g/2;if(l>=x&&o>=N&&l<=x+f&&o<=N+g)return y}return-1},s.prototype.contain=function(l,o){var c=this.transformCoordToLocal(l,o),u=this.getBoundingRect();if(l=c[0],o=c[1],u.contain(l,o)){var d=this.hoverDataIdx=this.findDataIndex(l,o);return d>=0}return this.hoverDataIdx=-1,!1},s.prototype.getBoundingRect=function(){var l=this._rect;if(!l){for(var o=this.shape,c=o.points,u=o.size,d=u[0],f=u[1],g=1/0,y=1/0,$=-1/0,x=-1/0,N=0;N<c.length;){var R=c[N++],j=c[N++];g=Math.min(R,g),$=Math.max(R,$),y=Math.min(j,y),x=Math.max(j,x)}l=this._rect=new BoundingRect(g-d/2,y-f/2,$-g+d,x-y+f)}return l},s}(Path),LargeSymbolDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(s,l){this._clear();var o=this._create();o.setShape({points:s.getLayout("points")}),this._setCommon(o,s,l)},a.prototype.updateLayout=function(s){var l=s.getLayout("points");this.group.eachChild(function(o){if(o.startIndex!=null){var c=(o.endIndex-o.startIndex)*2,u=o.startIndex*4*2;l=new Float32Array(l.buffer,u,c)}o.setShape("points",l),o.reset()})},a.prototype.incrementalPrepareUpdate=function(s){this._clear()},a.prototype.incrementalUpdate=function(s,l,o){var c=this._newAdded[0],u=l.getLayout("points"),d=c&&c.shape.points;if(d&&d.length<2e4){var f=d.length,g=new Float32Array(f+u.length);g.set(d),g.set(u,f),c.endIndex=s.end,c.setShape({points:g})}else{this._newAdded=[];var y=this._create();y.startIndex=s.start,y.endIndex=s.end,y.incremental=!0,y.setShape({points:u}),this._setCommon(y,l,o)}},a.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},a.prototype._create=function(){var s=new LargeSymbolPath({cursor:"default"});return s.ignoreCoarsePointer=!0,this.group.add(s),this._newAdded.push(s),s},a.prototype._setCommon=function(s,l,o){var c=l.hostModel;o=o||{};var u=l.getVisual("symbolSize");s.setShape("size",u instanceof Array?u:[u,u]),s.softClipShape=o.clipShape||null,s.symbolProxy=createSymbol$1(l.getVisual("symbol"),0,0,0,0),s.setColor=s.symbolProxy.setColor;var d=s.shape.size[0]<BOOST_SIZE_THRESHOLD;s.useStyle(c.getModel("itemStyle").getItemStyle(d?["color","shadowBlur","shadowColor"]:["color"]));var f=l.getVisual("style"),g=f&&f.fill;g&&s.setColor(g);var y=getECData(s);y.seriesIndex=c.seriesIndex,s.on("mousemove",function($){y.dataIndex=null;var x=s.hoverDataIdx;x>=0&&(y.dataIndex=x+(s.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),ScatterView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=l.getData(),d=this._updateSymbolDraw(u,l);d.updateData(u,{clipShape:this._getClipShape(l)}),this._finished=!0},s.prototype.incrementalPrepareRender=function(l,o,c){var u=l.getData(),d=this._updateSymbolDraw(u,l);d.incrementalPrepareUpdate(u),this._finished=!1},s.prototype.incrementalRender=function(l,o,c){this._symbolDraw.incrementalUpdate(l,o.getData(),{clipShape:this._getClipShape(o)}),this._finished=l.end===o.getData().count()},s.prototype.updateTransform=function(l,o,c){var u=l.getData();if(this.group.dirty(),!this._finished||u.count()>1e4)return{update:!0};var d=pointsLayout("").reset(l,o,c);d.progress&&d.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout(u)},s.prototype.eachRendered=function(l){this._symbolDraw&&this._symbolDraw.eachRendered(l)},s.prototype._getClipShape=function(l){if(l.get("clip",!0)){var o=l.coordinateSystem;return o&&o.getArea&&o.getArea(.1)}},s.prototype._updateSymbolDraw=function(l,o){var c=this._symbolDraw,u=o.pipelineContext,d=u.large;return(!c||d!==this._isLargeDraw)&&(c&&c.remove(),c=this._symbolDraw=d?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=d,this.group.removeAll()),this.group.add(c.group),c},s.prototype.remove=function(l,o){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},s.prototype.dispose=function(){},s.type="scatter",s}(ChartView),GridModel=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.type="grid",s.dependencies=["xAxis","yAxis"],s.layoutMode="box",s.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},s}(ComponentModel),CartesianAxisModel=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},s.type="cartesian2dAxis",s}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(a,s,l,o){each$f(AXIS_TYPES,function(c,u){var d=merge(merge({},axisDefault[u],!0),o,!0),f=function(g){__extends(y,g);function y(){var $=g!==null&&g.apply(this,arguments)||this;return $.type=s+"Axis."+u,$}return y.prototype.mergeDefaultAndTheme=function($,x){var N=fetchLayoutMode(this),R=N?getLayoutParams($):{},j=x.getTheme();merge($,j.get(u+"Axis")),merge($,this.getDefaultOption()),$.type=getAxisType($),N&&mergeLayoutParam($,R,N)},y.prototype.optionUpdated=function(){var $=this.option;$.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},y.prototype.getCategories=function($){var x=this.option;if(x.type==="category")return $?x.data:this.__ordinalMeta.categories},y.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},y.type=s+"Axis."+u,y.defaultOption=d,y}(l);a.registerComponentModel(f)}),a.registerSubTypeDefaulter(s+"Axis",getAxisType)}function getAxisType(a){return a.type||(a.data?"category":"value")}var Cartesian=function(){function a(s){this.type="cartesian",this._dimList=[],this._axes={},this.name=s||""}return a.prototype.getAxis=function(s){return this._axes[s]},a.prototype.getAxes=function(){return map$1(this._dimList,function(s){return this._axes[s]},this)},a.prototype.getAxesByScale=function(s){return s=s.toLowerCase(),filter(this.getAxes(),function(l){return l.scale.type===s})},a.prototype.addAxis=function(s){var l=s.dim;this._axes[l]=s,this._dimList.push(l)},a}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(a){return a.type==="interval"||a.type==="time"}var Cartesian2D=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="cartesian2d",l.dimensions=cartesian2DDimensions,l}return s.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var l=this.getAxis("x").scale,o=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(l)||!canCalculateAffineTransform(o))){var c=l.getExtent(),u=o.getExtent(),d=this.dataToPoint([c[0],u[0]]),f=this.dataToPoint([c[1],u[1]]),g=c[1]-c[0],y=u[1]-u[0];if(!(!g||!y)){var $=(f[0]-d[0])/g,x=(f[1]-d[1])/y,N=d[0]-c[0]*$,R=d[1]-u[0]*x,j=this._transform=[$,0,0,x,N,R];this._invTransform=invert([],j)}}},s.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},s.prototype.containPoint=function(l){var o=this.getAxis("x"),c=this.getAxis("y");return o.contain(o.toLocalCoord(l[0]))&&c.contain(c.toLocalCoord(l[1]))},s.prototype.containData=function(l){return this.getAxis("x").containData(l[0])&&this.getAxis("y").containData(l[1])},s.prototype.containZone=function(l,o){var c=this.dataToPoint(l),u=this.dataToPoint(o),d=this.getArea(),f=new BoundingRect(c[0],c[1],u[0]-c[0],u[1]-c[1]);return d.intersect(f)},s.prototype.dataToPoint=function(l,o,c){c=c||[];var u=l[0],d=l[1];if(this._transform&&u!=null&&isFinite(u)&&d!=null&&isFinite(d))return applyTransform$1(c,l,this._transform);var f=this.getAxis("x"),g=this.getAxis("y");return c[0]=f.toGlobalCoord(f.dataToCoord(u,o)),c[1]=g.toGlobalCoord(g.dataToCoord(d,o)),c},s.prototype.clampData=function(l,o){var c=this.getAxis("x").scale,u=this.getAxis("y").scale,d=c.getExtent(),f=u.getExtent(),g=c.parse(l[0]),y=u.parse(l[1]);return o=o||[],o[0]=Math.min(Math.max(Math.min(d[0],d[1]),g),Math.max(d[0],d[1])),o[1]=Math.min(Math.max(Math.min(f[0],f[1]),y),Math.max(f[0],f[1])),o},s.prototype.pointToData=function(l,o){var c=[];if(this._invTransform)return applyTransform$1(c,l,this._invTransform);var u=this.getAxis("x"),d=this.getAxis("y");return c[0]=u.coordToData(u.toLocalCoord(l[0]),o),c[1]=d.coordToData(d.toLocalCoord(l[1]),o),c},s.prototype.getOtherAxis=function(l){return this.getAxis(l.dim==="x"?"y":"x")},s.prototype.getArea=function(l){l=l||0;var o=this.getAxis("x").getGlobalExtent(),c=this.getAxis("y").getGlobalExtent(),u=Math.min(o[0],o[1])-l,d=Math.min(c[0],c[1])-l,f=Math.max(o[0],o[1])-u+l,g=Math.max(c[0],c[1])-d+l;return new BoundingRect(u,d,f,g)},s}(Cartesian),Axis2D=function(a){__extends(s,a);function s(l,o,c,u,d){var f=a.call(this,l,o,c)||this;return f.index=0,f.type=u||"value",f.position=d||"bottom",f}return s.prototype.isHorizontal=function(){var l=this.position;return l==="top"||l==="bottom"},s.prototype.getGlobalExtent=function(l){var o=this.getExtent();return o[0]=this.toGlobalCoord(o[0]),o[1]=this.toGlobalCoord(o[1]),l&&o[0]>o[1]&&o.reverse(),o},s.prototype.pointToData=function(l,o){return this.coordToData(this.toLocalCoord(l[this.dim==="x"?0:1]),o)},s.prototype.setCategorySortInfo=function(l){if(this.type!=="category")return!1;this.model.option.categorySortInfo=l,this.scale.setSortInfo(l)},s}(Axis);function layout$2(a,s,l){l=l||{};var o=a.coordinateSystem,c=s.axis,u={},d=c.getAxesOnZeroOf()[0],f=c.position,g=d?"onZero":f,y=c.dim,$=o.getRect(),x=[$.x,$.x+$.width,$.y,$.y+$.height],N={left:0,right:1,top:0,bottom:1,onZero:2},R=s.get("offset")||0,j=y==="x"?[x[2]-R,x[3]+R]:[x[0]-R,x[1]+R];if(d){var ne=d.toGlobalCoord(d.dataToCoord(0));j[N.onZero]=Math.max(Math.min(ne,j[1]),j[0])}u.position=[y==="y"?j[N[g]]:x[0],y==="x"?j[N[g]]:x[3]],u.rotation=Math.PI/2*(y==="x"?0:1);var se={top:-1,bottom:1,left:-1,right:1};u.labelDirection=u.tickDirection=u.nameDirection=se[f],u.labelOffset=d?j[N[f]]-j[N.onZero]:0,s.get(["axisTick","inside"])&&(u.tickDirection=-u.tickDirection),retrieve(l.labelInside,s.get(["axisLabel","inside"]))&&(u.labelDirection=-u.labelDirection);var ce=s.get(["axisLabel","rotate"]);return u.labelRotate=g==="top"?-ce:ce,u.z2=1,u}function isCartesian2DSeries(a){return a.get("coordinateSystem")==="cartesian2d"}function findAxisModels(a){var s={xAxisModel:null,yAxisModel:null};return each$f(s,function(l,o){var c=o.replace(/Model$/,""),u=a.getReferringComponents(c,SINGLE_REFERRING).models[0];s[o]=u}),s}var mathLog=Math.log;function alignScaleTicks(a,s,l){var o=IntervalScale.prototype,c=o.getTicks.call(l),u=o.getTicks.call(l,!0),d=c.length-1,f=o.getInterval.call(l),g=getScaleExtent(a,s),y=g.extent,$=g.fixMin,x=g.fixMax;if(a.type==="log"){var N=mathLog(a.base);y=[mathLog(y[0])/N,mathLog(y[1])/N]}a.setExtent(y[0],y[1]),a.calcNiceExtent({splitNumber:d,fixMin:$,fixMax:x});var R=o.getExtent.call(a);$&&(y[0]=R[0]),x&&(y[1]=R[1]);var j=o.getInterval.call(a),ne=y[0],se=y[1];if($&&x)j=(se-ne)/d;else if($)for(se=y[0]+j*d;se<y[1]&&isFinite(se)&&isFinite(y[1]);)j=increaseInterval(j),se=y[0]+j*d;else if(x)for(ne=y[1]-j*d;ne>y[0]&&isFinite(ne)&&isFinite(y[0]);)j=increaseInterval(j),ne=y[1]-j*d;else{var ce=a.getTicks().length-1;ce>d&&(j=increaseInterval(j));var fe=j*d;se=Math.ceil(y[1]/j)*j,ne=round$4(se-fe),ne<0&&y[0]>=0?(ne=0,se=round$4(fe)):se>0&&y[1]<=0&&(se=0,ne=-round$4(fe))}var ea=(c[0].value-u[0].value)/f,ta=(c[d].value-u[d].value)/f;o.setExtent.call(a,ne+j*ea,se+j*ta),o.setInterval.call(a,j),(ea||ta)&&o.setNiceExtent.call(a,ne+j,se-j)}var Grid$1=function(){function a(s,l,o){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(s,l,o),this.model=s}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(s,l){var o=this._axesMap;this._updateScale(s,this.model);function c(d){var f,g=keys(d),y=g.length;if(y){for(var $=[],x=y-1;x>=0;x--){var N=+g[x],R=d[N],j=R.model,ne=R.scale;isIntervalOrLogScale(ne)&&j.get("alignTicks")&&j.get("interval")==null?$.push(R):(niceScaleExtent(ne,j),isIntervalOrLogScale(ne)&&(f=R))}$.length&&(f||(f=$.pop(),niceScaleExtent(f.scale,f.model)),each$f($,function(se){alignScaleTicks(se.scale,se.model,f.scale)}))}}c(o.x),c(o.y);var u={};each$f(o.x,function(d){fixAxisOnZero(o,"y",d,u)}),each$f(o.y,function(d){fixAxisOnZero(o,"x",d,u)}),this.resize(this.model,l)},a.prototype.resize=function(s,l,o){var c=s.getBoxLayoutParams(),u=!o&&s.get("containLabel"),d=getLayoutRect(c,{width:l.getWidth(),height:l.getHeight()});this._rect=d;var f=this._axesList;g(),u&&(each$f(f,function(y){if(!y.model.get(["axisLabel","inside"])){var $=estimateLabelUnionRect(y);if($){var x=y.isHorizontal()?"height":"width",N=y.model.get(["axisLabel","margin"]);d[x]-=$[x]+N,y.position==="top"?d.y+=$.height+N:y.position==="left"&&(d.x+=$.width+N)}}}),g()),each$f(this._coordsList,function(y){y.calcAffineTransform()});function g(){each$f(f,function(y){var $=y.isHorizontal(),x=$?[0,d.width]:[0,d.height],N=y.inverse?1:0;y.setExtent(x[N],x[1-N]),updateAxisTransform(y,$?d.x:d.y)})}},a.prototype.getAxis=function(s,l){var o=this._axesMap[s];if(o!=null)return o[l||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(s,l){if(s!=null&&l!=null){var o="x"+s+"y"+l;return this._coordsMap[o]}isObject$5(s)&&(l=s.yAxisIndex,s=s.xAxisIndex);for(var c=0,u=this._coordsList;c<u.length;c++)if(u[c].getAxis("x").index===s||u[c].getAxis("y").index===l)return u[c]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(s,l,o){var c=this._findConvertTarget(l);return c.cartesian?c.cartesian.dataToPoint(o):c.axis?c.axis.toGlobalCoord(c.axis.dataToCoord(o)):null},a.prototype.convertFromPixel=function(s,l,o){var c=this._findConvertTarget(l);return c.cartesian?c.cartesian.pointToData(o):c.axis?c.axis.coordToData(c.axis.toLocalCoord(o)):null},a.prototype._findConvertTarget=function(s){var l=s.seriesModel,o=s.xAxisModel||l&&l.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],c=s.yAxisModel||l&&l.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],u=s.gridModel,d=this._coordsList,f,g;if(l)f=l.coordinateSystem,indexOf(d,f)<0&&(f=null);else if(o&&c)f=this.getCartesian(o.componentIndex,c.componentIndex);else if(o)g=this.getAxis("x",o.componentIndex);else if(c)g=this.getAxis("y",c.componentIndex);else if(u){var y=u.coordinateSystem;y===this&&(f=this._coordsList[0])}return{cartesian:f,axis:g}},a.prototype.containPoint=function(s){var l=this._coordsList[0];if(l)return l.containPoint(s)},a.prototype._initCartesian=function(s,l,o){var c=this,u=this,d={left:!1,right:!1,top:!1,bottom:!1},f={x:{},y:{}},g={x:0,y:0};if(l.eachComponent("xAxis",y("x"),this),l.eachComponent("yAxis",y("y"),this),!g.x||!g.y){this._axesMap={},this._axesList=[];return}this._axesMap=f,each$f(f.x,function($,x){each$f(f.y,function(N,R){var j="x"+x+"y"+R,ne=new Cartesian2D(j);ne.master=c,ne.model=s,c._coordsMap[j]=ne,c._coordsList.push(ne),ne.addAxis($),ne.addAxis(N)})});function y($){return function(x,N){if(isAxisUsedInTheGrid(x,s)){var R=x.get("position");$==="x"?R!=="top"&&R!=="bottom"&&(R=d.bottom?"top":"bottom"):R!=="left"&&R!=="right"&&(R=d.left?"right":"left"),d[R]=!0;var j=new Axis2D($,createScaleByModel$1(x),[0,0],x.get("type"),R),ne=j.type==="category";j.onBand=ne&&x.get("boundaryGap"),j.inverse=x.get("inverse"),x.axis=j,j.model=x,j.grid=u,j.index=N,u._axesList.push(j),f[$][N]=j,g[$]++}}}},a.prototype._updateScale=function(s,l){each$f(this._axesList,function(c){if(c.scale.setExtent(1/0,-1/0),c.type==="category"){var u=c.model.get("categorySortInfo");c.scale.setSortInfo(u)}}),s.eachSeries(function(c){if(isCartesian2DSeries(c)){var u=findAxisModels(c),d=u.xAxisModel,f=u.yAxisModel;if(!isAxisUsedInTheGrid(d,l)||!isAxisUsedInTheGrid(f,l))return;var g=this.getCartesian(d.componentIndex,f.componentIndex),y=c.getData(),$=g.getAxis("x"),x=g.getAxis("y");o(y,$),o(y,x)}},this);function o(c,u){each$f(getDataDimensionsOnAxis(c,u.dim),function(d){u.scale.unionExtentFromData(c,d)})}},a.prototype.getTooltipAxes=function(s){var l=[],o=[];return each$f(this.getCartesians(),function(c){var u=s!=null&&s!=="auto"?c.getAxis(s):c.getBaseAxis(),d=c.getOtherAxis(u);indexOf(l,u)<0&&l.push(u),indexOf(o,d)<0&&o.push(d)}),{baseAxes:l,otherAxes:o}},a.create=function(s,l){var o=[];return s.eachComponent("grid",function(c,u){var d=new a(c,s,l);d.name="grid_"+u,d.resize(c,l,!0),c.coordinateSystem=d,o.push(d)}),s.eachSeries(function(c){if(isCartesian2DSeries(c)){var u=findAxisModels(c),d=u.xAxisModel,f=u.yAxisModel,g=d.getCoordSysModel(),y=g.coordinateSystem;c.coordinateSystem=y.getCartesian(d.componentIndex,f.componentIndex)}}),o},a.dimensions=cartesian2DDimensions,a}();function isAxisUsedInTheGrid(a,s){return a.getCoordSysModel()===s}function fixAxisOnZero(a,s,l,o){l.getAxesOnZeroOf=function(){return u?[u]:[]};var c=a[s],u,d=l.model,f=d.get(["axisLine","onZero"]),g=d.get(["axisLine","onZeroAxisIndex"]);if(!f)return;if(g!=null)canOnZeroToAxis(c[g])&&(u=c[g]);else for(var y in c)if(c.hasOwnProperty(y)&&canOnZeroToAxis(c[y])&&!o[$(c[y])]){u=c[y];break}u&&(o[$(u)]=!0);function $(x){return x.dim+"_"+x.index}}function canOnZeroToAxis(a){return a&&a.type!=="category"&&a.type!=="time"&&ifAxisCrossZero(a)}function updateAxisTransform(a,s){var l=a.getExtent(),o=l[0]+l[1];a.toGlobalCoord=a.dim==="x"?function(c){return c+s}:function(c){return o-c+s},a.toLocalCoord=a.dim==="x"?function(c){return c-s}:function(c){return o-c+s}}var PI$3=Math.PI,AxisBuilder=function(){function a(s,l){this.group=new Group$3,this.opt=l,this.axisModel=s,defaults(l,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var o=new Group$3({x:l.position[0],y:l.position[1],rotation:l.rotation});o.updateTransform(),this._transformGroup=o}return a.prototype.hasBuilder=function(s){return!!builders[s]},a.prototype.add=function(s){builders[s](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(s,l,o){var c=remRadian(l-s),u,d;return isRadianAroundZero(c)?(d=o>0?"top":"bottom",u="center"):isRadianAroundZero(c-PI$3)?(d=o>0?"bottom":"top",u="center"):(d="middle",c>0&&c<PI$3?u=o>0?"right":"left":u=o>0?"left":"right"),{rotation:c,textAlign:u,textVerticalAlign:d}},a.makeAxisEventDataBase=function(s){var l={componentType:s.mainType,componentIndex:s.componentIndex};return l[s.mainType+"Index"]=s.componentIndex,l},a.isLabelSilent=function(s){var l=s.get("tooltip");return s.get("silent")||!(s.get("triggerEvent")||l&&l.show)},a}(),builders={axisLine:function(a,s,l,o){var c=s.get(["axisLine","show"]);if(c==="auto"&&a.handleAutoShown&&(c=a.handleAutoShown("axisLine")),!!c){var u=s.axis.getExtent(),d=o.transform,f=[u[0],0],g=[u[1],0],y=f[0]>g[0];d&&(applyTransform$1(f,f,d),applyTransform$1(g,g,d));var $=extend({lineCap:"round"},s.getModel(["axisLine","lineStyle"]).getLineStyle()),x=new Line$1({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},style:$,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(x.shape,x.style.lineWidth),x.anid="line",l.add(x);var N=s.get(["axisLine","symbol"]);if(N!=null){var R=s.get(["axisLine","symbolSize"]);isString$2(N)&&(N=[N,N]),(isString$2(R)||isNumber$2(R))&&(R=[R,R]);var j=normalizeSymbolOffset(s.get(["axisLine","symbolOffset"])||0,R),ne=R[0],se=R[1];each$f([{rotate:a.rotation+Math.PI/2,offset:j[0],r:0},{rotate:a.rotation-Math.PI/2,offset:j[1],r:Math.sqrt((f[0]-g[0])*(f[0]-g[0])+(f[1]-g[1])*(f[1]-g[1]))}],function(ce,fe){if(N[fe]!=="none"&&N[fe]!=null){var ea=createSymbol$1(N[fe],-ne/2,-se/2,ne,se,$.stroke,!0),ta=ce.r+ce.offset,na=y?g:f;ea.attr({rotation:ce.rotate,x:na[0]+ta*Math.cos(a.rotation),y:na[1]-ta*Math.sin(a.rotation),silent:!0,z2:11}),l.add(ea)}})}}},axisTickLabel:function(a,s,l,o){var c=buildAxisMajorTicks(l,o,s,a),u=buildAxisLabel(l,o,s,a);if(fixMinMaxLabelShow(s,u,c),buildAxisMinorTicks(l,o,s,a.tickDirection),s.get(["axisLabel","hideOverlap"])){var d=prepareLayoutList(map$1(u,function(f){return{label:f,priority:f.z2,defaultAttr:{ignore:f.ignore}}}));hideOverlap(d)}},axisName:function(a,s,l,o){var c=retrieve(a.axisName,s.get("name"));if(c){var u=s.get("nameLocation"),d=a.nameDirection,f=s.getModel("nameTextStyle"),g=s.get("nameGap")||0,y=s.axis.getExtent(),$=y[0]>y[1]?-1:1,x=[u==="start"?y[0]-$*g:u==="end"?y[1]+$*g:(y[0]+y[1])/2,isNameLocationCenter(u)?a.labelOffset+d*g:0],N,R=s.get("nameRotate");R!=null&&(R=R*PI$3/180);var j;isNameLocationCenter(u)?N=AxisBuilder.innerTextLayout(a.rotation,R??a.rotation,d):(N=endTextLayout(a.rotation,u,R||0,y),j=a.axisNameAvailableWidth,j!=null&&(j=Math.abs(j/Math.sin(N.rotation)),!isFinite(j)&&(j=null)));var ne=f.getFont(),se=s.get("nameTruncate",!0)||{},ce=se.ellipsis,fe=retrieve(a.nameTruncateMaxWidth,se.maxWidth,j),ea=new ZRText({x:x[0],y:x[1],rotation:N.rotation,silent:AxisBuilder.isLabelSilent(s),style:createTextStyle(f,{text:c,font:ne,overflow:"truncate",width:fe,ellipsis:ce,fill:f.getTextColor()||s.get(["axisLine","lineStyle","color"]),align:f.get("align")||N.textAlign,verticalAlign:f.get("verticalAlign")||N.textVerticalAlign}),z2:1});if(setTooltipConfig({el:ea,componentModel:s,itemName:c}),ea.__fullText=c,ea.anid="name",s.get("triggerEvent")){var ta=AxisBuilder.makeAxisEventDataBase(s);ta.targetType="axisName",ta.name=c,getECData(ea).eventData=ta}o.add(ea),ea.updateTransform(),l.add(ea),ea.decomposeTransform()}}};function endTextLayout(a,s,l,o){var c=remRadian(l-a),u,d,f=o[0]>o[1],g=s==="start"&&!f||s!=="start"&&f;return isRadianAroundZero(c-PI$3/2)?(d=g?"bottom":"top",u="center"):isRadianAroundZero(c-PI$3*1.5)?(d=g?"top":"bottom",u="center"):(d="middle",c<PI$3*1.5&&c>PI$3/2?u=g?"left":"right":u=g?"right":"left"),{rotation:c,textAlign:u,textVerticalAlign:d}}function fixMinMaxLabelShow(a,s,l){if(!shouldShowAllLabels(a.axis)){var o=a.get(["axisLabel","showMinLabel"]),c=a.get(["axisLabel","showMaxLabel"]);s=s||[],l=l||[];var u=s[0],d=s[1],f=s[s.length-1],g=s[s.length-2],y=l[0],$=l[1],x=l[l.length-1],N=l[l.length-2];o===!1?(ignoreEl(u),ignoreEl(y)):isTwoLabelOverlapped(u,d)&&(o?(ignoreEl(d),ignoreEl($)):(ignoreEl(u),ignoreEl(y))),c===!1?(ignoreEl(f),ignoreEl(x)):isTwoLabelOverlapped(g,f)&&(c?(ignoreEl(g),ignoreEl(N)):(ignoreEl(f),ignoreEl(x)))}}function ignoreEl(a){a&&(a.ignore=!0)}function isTwoLabelOverlapped(a,s){var l=a&&a.getBoundingRect().clone(),o=s&&s.getBoundingRect().clone();if(!(!l||!o)){var c=identity([]);return rotate(c,c,-a.rotation),l.applyTransform(mul([],c,a.getLocalTransform())),o.applyTransform(mul([],c,s.getLocalTransform())),l.intersect(o)}}function isNameLocationCenter(a){return a==="middle"||a==="center"}function createTicks(a,s,l,o,c){for(var u=[],d=[],f=[],g=0;g<a.length;g++){var y=a[g].coord;d[0]=y,d[1]=0,f[0]=y,f[1]=l,s&&(applyTransform$1(d,d,s),applyTransform$1(f,f,s));var $=new Line$1({shape:{x1:d[0],y1:d[1],x2:f[0],y2:f[1]},style:o,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine($.shape,$.style.lineWidth),$.anid=c+"_"+a[g].tickValue,u.push($)}return u}function buildAxisMajorTicks(a,s,l,o){var c=l.axis,u=l.getModel("axisTick"),d=u.get("show");if(d==="auto"&&o.handleAutoShown&&(d=o.handleAutoShown("axisTick")),!(!d||c.scale.isBlank())){for(var f=u.getModel("lineStyle"),g=o.tickDirection*u.get("length"),y=c.getTicksCoords(),$=createTicks(y,s.transform,g,defaults(f.getLineStyle(),{stroke:l.get(["axisLine","lineStyle","color"])}),"ticks"),x=0;x<$.length;x++)a.add($[x]);return $}}function buildAxisMinorTicks(a,s,l,o){var c=l.axis,u=l.getModel("minorTick");if(!(!u.get("show")||c.scale.isBlank())){var d=c.getMinorTicksCoords();if(d.length)for(var f=u.getModel("lineStyle"),g=o*u.get("length"),y=defaults(f.getLineStyle(),defaults(l.getModel("axisTick").getLineStyle(),{stroke:l.get(["axisLine","lineStyle","color"])})),$=0;$<d.length;$++)for(var x=createTicks(d[$],s.transform,g,y,"minorticks_"+$),N=0;N<x.length;N++)a.add(x[N])}}function buildAxisLabel(a,s,l,o){var c=l.axis,u=retrieve(o.axisLabelShow,l.get(["axisLabel","show"]));if(!(!u||c.scale.isBlank())){var d=l.getModel("axisLabel"),f=d.get("margin"),g=c.getViewLabels(),y=(retrieve(o.labelRotate,d.get("rotate"))||0)*PI$3/180,$=AxisBuilder.innerTextLayout(o.rotation,y,o.labelDirection),x=l.getCategories&&l.getCategories(!0),N=[],R=AxisBuilder.isLabelSilent(l),j=l.get("triggerEvent");return each$f(g,function(ne,se){var ce=c.scale.type==="ordinal"?c.scale.getRawOrdinalNumber(ne.tickValue):ne.tickValue,fe=ne.formattedLabel,ea=ne.rawLabel,ta=d;if(x&&x[ce]){var na=x[ce];isObject$5(na)&&na.textStyle&&(ta=new Model(na.textStyle,d,l.ecModel))}var aa=ta.getTextColor()||l.get(["axisLine","lineStyle","color"]),ia=c.dataToCoord(ce),sa=ta.getShallow("align",!0)||$.textAlign,ra=retrieve2(ta.getShallow("alignMinLabel",!0),sa),la=retrieve2(ta.getShallow("alignMaxLabel",!0),sa),oa=ta.getShallow("verticalAlign",!0)||ta.getShallow("baseline",!0)||$.textVerticalAlign,ca=retrieve2(ta.getShallow("verticalAlignMinLabel",!0),oa),pa=retrieve2(ta.getShallow("verticalAlignMaxLabel",!0),oa),ua=new ZRText({x:ia,y:o.labelOffset+o.labelDirection*f,rotation:$.rotation,silent:R,z2:10+(ne.level||0),style:createTextStyle(ta,{text:fe,align:se===0?ra:se===g.length-1?la:sa,verticalAlign:se===0?ca:se===g.length-1?pa:oa,fill:isFunction$2(aa)?aa(c.type==="category"?ea:c.type==="value"?ce+"":ce,se):aa})});if(ua.anid="label_"+ce,j){var da=AxisBuilder.makeAxisEventDataBase(l);da.targetType="axisLabel",da.value=ea,da.tickIndex=se,c.type==="category"&&(da.dataIndex=ce),getECData(ua).eventData=da}s.add(ua),ua.updateTransform(),N.push(ua),a.add(ua),ua.decomposeTransform()}),N}}function collect(a,s){var l={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(l,a,s),l.seriesInvolved&&collectSeriesInfo(l,a),l}function collectAxesInfo(a,s,l){var o=s.getComponent("tooltip"),c=s.getComponent("axisPointer"),u=c.get("link",!0)||[],d=[];each$f(l.getCoordinateSystems(),function(f){if(!f.axisPointerEnabled)return;var g=makeKey(f.model),y=a.coordSysAxesInfo[g]={};a.coordSysMap[g]=f;var $=f.model,x=$.getModel("tooltip",o);if(each$f(f.getAxes(),curry$1(ne,!1,null)),f.getTooltipAxes&&o&&x.get("show")){var N=x.get("trigger")==="axis",R=x.get(["axisPointer","type"])==="cross",j=f.getTooltipAxes(x.get(["axisPointer","axis"]));(N||R)&&each$f(j.baseAxes,curry$1(ne,R?"cross":!0,N)),R&&each$f(j.otherAxes,curry$1(ne,"cross",!1))}function ne(se,ce,fe){var ea=fe.model.getModel("axisPointer",c),ta=ea.get("show");if(!(!ta||ta==="auto"&&!se&&!isHandleTrigger(ea))){ce==null&&(ce=ea.get("triggerTooltip")),ea=se?makeAxisPointerModel(fe,x,c,s,se,ce):ea;var na=ea.get("snap"),aa=ea.get("triggerEmphasis"),ia=makeKey(fe.model),sa=ce||na||fe.type==="category",ra=a.axesInfo[ia]={key:ia,axis:fe,coordSys:f,axisPointerModel:ea,triggerTooltip:ce,triggerEmphasis:aa,involveSeries:sa,snap:na,useHandle:isHandleTrigger(ea),seriesModels:[],linkGroup:null};y[ia]=ra,a.seriesInvolved=a.seriesInvolved||sa;var la=getLinkGroupIndex(u,fe);if(la!=null){var oa=d[la]||(d[la]={axesInfo:{}});oa.axesInfo[ia]=ra,oa.mapper=u[la].mapper,ra.linkGroup=oa}}}})}function makeAxisPointerModel(a,s,l,o,c,u){var d=s.getModel("axisPointer"),f=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],g={};each$f(f,function(N){g[N]=clone$4(d.get(N))}),g.snap=a.type!=="category"&&!!u,d.get("type")==="cross"&&(g.type="line");var y=g.label||(g.label={});if(y.show==null&&(y.show=!1),c==="cross"){var $=d.get(["label","show"]);if(y.show=$??!0,!u){var x=g.lineStyle=d.get("crossStyle");x&&defaults(y,x.textStyle)}}return a.model.getModel("axisPointer",new Model(g,l,o))}function collectSeriesInfo(a,s){s.eachSeries(function(l){var o=l.coordinateSystem,c=l.get(["tooltip","trigger"],!0),u=l.get(["tooltip","show"],!0);!o||c==="none"||c===!1||c==="item"||u===!1||l.get(["axisPointer","show"],!0)===!1||each$f(a.coordSysAxesInfo[makeKey(o.model)],function(d){var f=d.axis;o.getAxis(f.dim)===f&&(d.seriesModels.push(l),d.seriesDataCount==null&&(d.seriesDataCount=0),d.seriesDataCount+=l.getData().count())})})}function getLinkGroupIndex(a,s){for(var l=s.model,o=s.dim,c=0;c<a.length;c++){var u=a[c]||{};if(checkPropInLink(u[o+"AxisId"],l.id)||checkPropInLink(u[o+"AxisIndex"],l.componentIndex)||checkPropInLink(u[o+"AxisName"],l.name))return c}}function checkPropInLink(a,s){return a==="all"||isArray$3(a)&&indexOf(a,s)>=0||a===s}function fixValue(a){var s=getAxisInfo$1(a);if(s){var l=s.axisPointerModel,o=s.axis.scale,c=l.option,u=l.get("status"),d=l.get("value");d!=null&&(d=o.parse(d));var f=isHandleTrigger(l);u==null&&(c.status=f?"show":"hide");var g=o.getExtent().slice();g[0]>g[1]&&g.reverse(),(d==null||d>g[1])&&(d=g[1]),d<g[0]&&(d=g[0]),c.value=d,f&&(c.status=s.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(a){var s=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return s&&s.axesInfo[makeKey(a)]}function getAxisPointerModel(a){var s=getAxisInfo$1(a);return s&&s.axisPointerModel}function isHandleTrigger(a){return!!a.get(["handle","show"])}function makeKey(a){return a.type+"||"+a.id}var axisPointerClazz={},AxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c,u){this.axisPointerClass&&fixValue(l),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(l,c,!0)},s.prototype.updateAxisPointer=function(l,o,c,u){this._doUpdateAxisPointerClass(l,c,!1)},s.prototype.remove=function(l,o){var c=this._axisPointer;c&&c.remove(o)},s.prototype.dispose=function(l,o){this._disposeAxisPointer(o),a.prototype.dispose.apply(this,arguments)},s.prototype._doUpdateAxisPointerClass=function(l,o,c){var u=s.getAxisPointerClass(this.axisPointerClass);if(u){var d=getAxisPointerModel(l);d?(this._axisPointer||(this._axisPointer=new u)).render(l,d,o,c):this._disposeAxisPointer(o)}},s.prototype._disposeAxisPointer=function(l){this._axisPointer&&this._axisPointer.dispose(l),this._axisPointer=null},s.registerAxisPointerClass=function(l,o){axisPointerClazz[l]=o},s.getAxisPointerClass=function(l){return l&&axisPointerClazz[l]},s.type="axis",s}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(a,s,l,o){var c=l.axis;if(!c.scale.isBlank()){var u=l.getModel("splitArea"),d=u.getModel("areaStyle"),f=d.get("color"),g=o.coordinateSystem.getRect(),y=c.getTicksCoords({tickModel:u,clamp:!0});if(y.length){var $=f.length,x=inner$f(a).splitAreaColors,N=createHashMap(),R=0;if(x)for(var j=0;j<y.length;j++){var ne=x.get(y[j].tickValue);if(ne!=null){R=(ne+($-1)*j)%$;break}}var se=c.toGlobalCoord(y[0].coord),ce=d.getAreaStyle();f=isArray$3(f)?f:[f];for(var j=1;j<y.length;j++){var fe=c.toGlobalCoord(y[j].coord),ea=void 0,ta=void 0,na=void 0,aa=void 0;c.isHorizontal()?(ea=se,ta=g.y,na=fe-ea,aa=g.height,se=ea+na):(ea=g.x,ta=se,na=g.width,aa=fe-ta,se=ta+aa);var ia=y[j-1].tickValue;ia!=null&&N.set(ia,R),s.add(new Rect$2({anid:ia!=null?"area_"+ia:null,shape:{x:ea,y:ta,width:na,height:aa},style:defaults({fill:f[R]},ce),autoBatch:!0,silent:!0})),R=(R+1)%$}inner$f(a).splitAreaColors=N}}}function rectCoordAxisHandleRemove(a){inner$f(a).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.axisPointerClass="CartesianAxisPointer",l}return s.prototype.render=function(l,o,c,u){this.group.removeAll();var d=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!l.get("show")){var f=l.getCoordSysModel(),g=layout$2(f,l),y=new AxisBuilder(l,extend({handleAutoShown:function(x){for(var N=f.coordinateSystem.getCartesians(),R=0;R<N.length;R++)if(isIntervalOrLogScale(N[R].getOtherAxis(l.axis).scale))return!0;return!1}},g));each$f(axisBuilderAttrs$3,y.add,y),this._axisGroup.add(y.getGroup()),each$f(selfBuilderAttrs$2,function(x){l.get([x,"show"])&&axisElementBuilders$2[x](this,this._axisGroup,l,f)},this);var $=u&&u.type==="changeAxisOrder"&&u.isInitSort;$||groupTransition(d,this._axisGroup,l),a.prototype.render.call(this,l,o,c,u)}},s.prototype.remove=function(){rectCoordAxisHandleRemove(this)},s.type="cartesianAxis",s}(AxisView),axisElementBuilders$2={splitLine:function(a,s,l,o){var c=l.axis;if(!c.scale.isBlank()){var u=l.getModel("splitLine"),d=u.getModel("lineStyle"),f=d.get("color");f=isArray$3(f)?f:[f];for(var g=o.coordinateSystem.getRect(),y=c.isHorizontal(),$=0,x=c.getTicksCoords({tickModel:u}),N=[],R=[],j=d.getLineStyle(),ne=0;ne<x.length;ne++){var se=c.toGlobalCoord(x[ne].coord);y?(N[0]=se,N[1]=g.y,R[0]=se,R[1]=g.y+g.height):(N[0]=g.x,N[1]=se,R[0]=g.x+g.width,R[1]=se);var ce=$++%f.length,fe=x[ne].tickValue,ea=new Line$1({anid:fe!=null?"line_"+x[ne].tickValue:null,autoBatch:!0,shape:{x1:N[0],y1:N[1],x2:R[0],y2:R[1]},style:defaults({stroke:f[ce]},j),silent:!0});subPixelOptimizeLine(ea.shape,j.lineWidth),s.add(ea)}}},minorSplitLine:function(a,s,l,o){var c=l.axis,u=l.getModel("minorSplitLine"),d=u.getModel("lineStyle"),f=o.coordinateSystem.getRect(),g=c.isHorizontal(),y=c.getMinorTicksCoords();if(y.length)for(var $=[],x=[],N=d.getLineStyle(),R=0;R<y.length;R++)for(var j=0;j<y[R].length;j++){var ne=c.toGlobalCoord(y[R][j].coord);g?($[0]=ne,$[1]=f.y,x[0]=ne,x[1]=f.y+f.height):($[0]=f.x,$[1]=ne,x[0]=f.x+f.width,x[1]=ne);var se=new Line$1({anid:"minor_line_"+y[R][j].tickValue,autoBatch:!0,shape:{x1:$[0],y1:$[1],x2:x[0],y2:x[1]},style:N,silent:!0});subPixelOptimizeLine(se.shape,N.lineWidth),s.add(se)}},splitArea:function(a,s,l,o){rectCoordAxisBuildSplitArea(a,s,l,o)}},CartesianXAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="xAxis",s}(CartesianAxisView),CartesianYAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=CartesianXAxisView.type,l}return s.type="yAxis",s}(CartesianAxisView),GridView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="grid",l}return s.prototype.render=function(l,o){this.group.removeAll(),l.get("show")&&this.group.add(new Rect$2({shape:l.coordinateSystem.getRect(),style:defaults({fill:l.get("backgroundColor")},l.getItemStyle()),silent:!0,z2:-1}))},s.type="grid",s}(ComponentView),extraOption={offset:0};function install$O(a){a.registerComponentView(GridView),a.registerComponentModel(GridModel),a.registerCoordinateSystem("cartesian2d",Grid$1),axisModelCreator(a,"x",CartesianAxisModel,extraOption),axisModelCreator(a,"y",CartesianAxisModel,extraOption),a.registerComponentView(CartesianXAxisView),a.registerComponentView(CartesianYAxisView),a.registerPreprocessor(function(s){s.xAxis&&s.yAxis&&!s.grid&&(s.grid={})})}function install$N(a){use(install$O),a.registerSeriesModel(ScatterSeriesModel),a.registerChartView(ScatterView),a.registerLayout(pointsLayout("scatter"))}function radarLayout(a){a.eachSeriesByType("radar",function(s){var l=s.getData(),o=[],c=s.coordinateSystem;if(c){var u=c.getIndicatorAxes();each$f(u,function(d,f){l.each(l.mapDimension(u[f].dim),function(g,y){o[y]=o[y]||[];var $=c.dataToPoint(g,f);o[y][f]=isValidPoint($)?$:getValueMissingPoint(c)})}),l.each(function(d){var f=find(o[d],function(g){return isValidPoint(g)})||getValueMissingPoint(c);o[d].push(f.slice()),l.setItemLayout(d,o[d])})}})}function isValidPoint(a){return!isNaN(a[0])&&!isNaN(a[1])}function getValueMissingPoint(a){return[a.cx,a.cy]}function radarBackwardCompat(a){var s=a.polar;if(s){isArray$3(s)||(s=[s]);var l=[];each$f(s,function(o,c){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),a.radar=a.radar||[],isArray$3(a.radar)||(a.radar=[a.radar]),a.radar.push(o)):l.push(o)}),a.polar=l}each$f(a.series,function(o){o&&o.type==="radar"&&o.polarIndex&&(o.radarIndex=o.polarIndex)})}var RadarView$1=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=l.coordinateSystem,d=this.group,f=l.getData(),g=this._data;function y(N,R){var j=N.getItemVisual(R,"symbol")||"circle";if(j!=="none"){var ne=normalizeSymbolSize(N.getItemVisual(R,"symbolSize")),se=createSymbol$1(j,-1,-1,2,2),ce=N.getItemVisual(R,"symbolRotate")||0;return se.attr({style:{strokeNoScale:!0},z2:100,scaleX:ne[0]/2,scaleY:ne[1]/2,rotation:ce*Math.PI/180||0}),se}}function $(N,R,j,ne,se,ce){j.removeAll();for(var fe=0;fe<R.length-1;fe++){var ea=y(ne,se);ea&&(ea.__dimIdx=fe,N[fe]?(ea.setPosition(N[fe]),graphic[ce?"initProps":"updateProps"](ea,{x:R[fe][0],y:R[fe][1]},l,se)):ea.setPosition(R[fe]),j.add(ea))}}function x(N){return map$1(N,function(R){return[u.cx,u.cy]})}f.diff(g).add(function(N){var R=f.getItemLayout(N);if(R){var j=new Polygon,ne=new Polyline$1,se={shape:{points:R}};j.shape.points=x(R),ne.shape.points=x(R),initProps(j,se,l,N),initProps(ne,se,l,N);var ce=new Group$3,fe=new Group$3;ce.add(ne),ce.add(j),ce.add(fe),$(ne.shape.points,R,fe,f,N,!0),f.setItemGraphicEl(N,ce)}}).update(function(N,R){var j=g.getItemGraphicEl(R),ne=j.childAt(0),se=j.childAt(1),ce=j.childAt(2),fe={shape:{points:f.getItemLayout(N)}};fe.shape.points&&($(ne.shape.points,fe.shape.points,ce,f,N,!1),saveOldStyle(se),saveOldStyle(ne),updateProps$1(ne,fe,l),updateProps$1(se,fe,l),f.setItemGraphicEl(N,j))}).remove(function(N){d.remove(g.getItemGraphicEl(N))}).execute(),f.eachItemGraphicEl(function(N,R){var j=f.getItemModel(R),ne=N.childAt(0),se=N.childAt(1),ce=N.childAt(2),fe=f.getItemVisual(R,"style"),ea=fe.fill;d.add(N),ne.useStyle(defaults(j.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:ea})),setStatesStylesFromModel(ne,j,"lineStyle"),setStatesStylesFromModel(se,j,"areaStyle");var ta=j.getModel("areaStyle"),na=ta.isEmpty()&&ta.parentModel.isEmpty();se.ignore=na,each$f(["emphasis","select","blur"],function(sa){var ra=j.getModel([sa,"areaStyle"]),la=ra.isEmpty()&&ra.parentModel.isEmpty();se.ensureState(sa).ignore=la&&na}),se.useStyle(defaults(ta.getAreaStyle(),{fill:ea,opacity:.7,decal:fe.decal}));var aa=j.getModel("emphasis"),ia=aa.getModel("itemStyle").getItemStyle();ce.eachChild(function(sa){if(sa instanceof ZRImage){var ra=sa.style;sa.useStyle(extend({image:ra.image,x:ra.x,y:ra.y,width:ra.width,height:ra.height},fe))}else sa.useStyle(fe),sa.setColor(ea),sa.style.strokeNoScale=!0;var la=sa.ensureState("emphasis");la.style=clone$4(ia);var oa=f.getStore().get(f.getDimensionIndex(sa.__dimIdx),R);(oa==null||isNaN(oa))&&(oa=""),setLabelStyle(sa,getLabelStatesModels(j),{labelFetcher:f.hostModel,labelDataIndex:R,labelDimIndex:sa.__dimIdx,defaultText:oa,inheritColor:ea,defaultOpacity:fe.opacity})}),toggleHoverEmphasis(N,aa.get("focus"),aa.get("blurScope"),aa.get("disabled"))}),this._data=f},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.type="radar",s}(ChartView),RadarSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l}return s.prototype.init=function(l){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},s.prototype.getInitialData=function(l,o){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},s.prototype.formatTooltip=function(l,o,c){var u=this.getData(),d=this.coordinateSystem,f=d.getIndicatorAxes(),g=this.getData().getName(l),y=g===""?this.name:g,$=retrieveVisualColorForTooltipMarker(this,l);return createTooltipMarkup("section",{header:y,sortBlocks:!0,blocks:map$1(f,function(x){var N=u.get(u.mapDimension(x.dim),l);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:$,name:x.name,value:N,sortParam:N})})})},s.prototype.getTooltipPosition=function(l){if(l!=null){for(var o=this.getData(),c=this.coordinateSystem,u=o.getValues(map$1(c.dimensions,function(y){return o.mapDimension(y)}),l),d=0,f=u.length;d<f;d++)if(!isNaN(u[d])){var g=c.getIndicatorAxes();return c.coordToPoint(g[d].dataToCoord(u[d]),d)}}},s.type="series.radar",s.dependencies=["radar"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},s}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(a,s){return defaults({show:s},a)}var RadarModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.optionUpdated=function(){var l=this.get("boundaryGap"),o=this.get("splitNumber"),c=this.get("scale"),u=this.get("axisLine"),d=this.get("axisTick"),f=this.get("axisLabel"),g=this.get("axisName"),y=this.get(["axisName","show"]),$=this.get(["axisName","formatter"]),x=this.get("axisNameGap"),N=this.get("triggerEvent"),R=map$1(this.get("indicator")||[],function(j){j.max!=null&&j.max>0&&!j.min?j.min=0:j.min!=null&&j.min<0&&!j.max&&(j.max=0);var ne=g;j.color!=null&&(ne=defaults({color:j.color},g));var se=merge(clone$4(j),{boundaryGap:l,splitNumber:o,scale:c,axisLine:u,axisTick:d,axisLabel:f,name:j.text,showName:y,nameLocation:"end",nameGap:x,nameTextStyle:ne,triggerEvent:N},!1);if(isString$2($)){var ce=se.name;se.name=$.replace("{value}",ce??"")}else isFunction$2($)&&(se.name=$(se.name,se));var fe=new Model(se,null,this.ecModel);return mixin(fe,AxisModelCommonMixin.prototype),fe.mainType="radar",fe.componentIndex=this.componentIndex,fe},this);this._indicatorModels=R},s.prototype.getIndicatorModels=function(){return this._indicatorModels},s.type="radar",s.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},s}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=this.group;u.removeAll(),this._buildAxes(l),this._buildSplitLineAndArea(l)},s.prototype._buildAxes=function(l){var o=l.coordinateSystem,c=o.getIndicatorAxes(),u=map$1(c,function(d){var f=d.model.get("showName")?d.name:"",g=new AxisBuilder(d.model,{axisName:f,position:[o.cx,o.cy],rotation:d.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return g});each$f(u,function(d){each$f(axisBuilderAttrs$2,d.add,d),this.group.add(d.getGroup())},this)},s.prototype._buildSplitLineAndArea=function(l){var o=l.coordinateSystem,c=o.getIndicatorAxes();if(!c.length)return;var u=l.get("shape"),d=l.getModel("splitLine"),f=l.getModel("splitArea"),g=d.getModel("lineStyle"),y=f.getModel("areaStyle"),$=d.get("show"),x=f.get("show"),N=g.get("color"),R=y.get("color"),j=isArray$3(N)?N:[N],ne=isArray$3(R)?R:[R],se=[],ce=[];function fe(da,ha,ga){var fa=ga%ha.length;return da[fa]=da[fa]||[],fa}if(u==="circle")for(var ea=c[0].getTicksCoords(),ta=o.cx,na=o.cy,aa=0;aa<ea.length;aa++){if($){var ia=fe(se,j,aa);se[ia].push(new Circle({shape:{cx:ta,cy:na,r:ea[aa].coord}}))}if(x&&aa<ea.length-1){var ia=fe(ce,ne,aa);ce[ia].push(new Ring$1({shape:{cx:ta,cy:na,r0:ea[aa].coord,r:ea[aa+1].coord}}))}}else for(var sa,ra=map$1(c,function(da,ha){var ga=da.getTicksCoords();return sa=sa==null?ga.length-1:Math.min(ga.length-1,sa),map$1(ga,function(fa){return o.coordToPoint(fa.coord,ha)})}),la=[],aa=0;aa<=sa;aa++){for(var oa=[],ca=0;ca<c.length;ca++)oa.push(ra[ca][aa]);if(oa[0]&&oa.push(oa[0].slice()),$){var ia=fe(se,j,aa);se[ia].push(new Polyline$1({shape:{points:oa}}))}if(x&&la){var ia=fe(ce,ne,aa-1);ce[ia].push(new Polygon({shape:{points:oa.concat(la)}}))}la=oa.slice().reverse()}var pa=g.getLineStyle(),ua=y.getAreaStyle();each$f(ce,function(da,ha){this.group.add(mergePath(da,{style:defaults({stroke:"none",fill:ne[ha%ne.length]},ua),silent:!0}))},this),each$f(se,function(da,ha){this.group.add(mergePath(da,{style:defaults({fill:"none",stroke:j[ha%j.length]},pa),silent:!0}))},this)},s.type="radar",s}(ComponentView),IndicatorAxis=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this,l,o,c)||this;return u.type="value",u.angle=0,u.name="",u}return s}(Axis),Radar=function(){function a(s,l,o){this.dimensions=[],this._model=s,this._indicatorAxes=map$1(s.getIndicatorModels(),function(c,u){var d="indicator_"+u,f=new IndicatorAxis(d,new IntervalScale);return f.name=c.get("name"),f.model=c,c.axis=f,this.dimensions.push(d),f},this),this.resize(s,o)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(s,l){var o=this._indicatorAxes[l];return this.coordToPoint(o.dataToCoord(s),l)},a.prototype.coordToPoint=function(s,l){var o=this._indicatorAxes[l],c=o.angle,u=this.cx+s*Math.cos(c),d=this.cy-s*Math.sin(c);return[u,d]},a.prototype.pointToData=function(s){var l=s[0]-this.cx,o=s[1]-this.cy,c=Math.sqrt(l*l+o*o);l/=c,o/=c;for(var u=Math.atan2(-o,l),d=1/0,f,g=-1,y=0;y<this._indicatorAxes.length;y++){var $=this._indicatorAxes[y],x=Math.abs(u-$.angle);x<d&&(f=$,g=y,d=x)}return[g,+(f&&f.coordToData(c))]},a.prototype.resize=function(s,l){var o=s.get("center"),c=l.getWidth(),u=l.getHeight(),d=Math.min(c,u)/2;this.cx=parsePercent(o[0],c),this.cy=parsePercent(o[1],u),this.startAngle=s.get("startAngle")*Math.PI/180;var f=s.get("radius");(isString$2(f)||isNumber$2(f))&&(f=[0,f]),this.r0=parsePercent(f[0],d),this.r=parsePercent(f[1],d),each$f(this._indicatorAxes,function(g,y){g.setExtent(this.r0,this.r);var $=this.startAngle+y*Math.PI*2/this._indicatorAxes.length;$=Math.atan2(Math.sin($),Math.cos($)),g.angle=$},this)},a.prototype.update=function(s,l){var o=this._indicatorAxes,c=this._model;each$f(o,function(f){f.scale.setExtent(1/0,-1/0)}),s.eachSeriesByType("radar",function(f,g){if(!(f.get("coordinateSystem")!=="radar"||s.getComponent("radar",f.get("radarIndex"))!==c)){var y=f.getData();each$f(o,function($){$.scale.unionExtentFromData(y,y.mapDimension($.dim))})}},this);var u=c.get("splitNumber"),d=new IntervalScale;d.setExtent(0,u),d.setInterval(1),each$f(o,function(f,g){alignScaleTicks(f.scale,f.model,d)})},a.prototype.convertToPixel=function(s,l,o){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(s,l,o){return console.warn("Not implemented."),null},a.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},a.create=function(s,l){var o=[];return s.eachComponent("radar",function(c){var u=new a(c,s,l);o.push(u),c.coordinateSystem=u}),s.eachSeriesByType("radar",function(c){c.get("coordinateSystem")==="radar"&&(c.coordinateSystem=o[c.get("radarIndex")||0])}),o},a.dimensions=[],a}();function install$M(a){a.registerCoordinateSystem("radar",Radar),a.registerComponentModel(RadarModel),a.registerComponentView(RadarView),a.registerVisual({seriesType:"radar",reset:function(s){var l=s.getData();l.each(function(o){l.setItemVisual(o,"legendIcon","roundRect")}),l.setVisual("legendIcon","roundRect")}})}function install$L(a){use(install$M),a.registerChartView(RadarView$1),a.registerSeriesModel(RadarSeriesModel),a.registerLayout(radarLayout),a.registerProcessor(dataFilter$1("radar")),a.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(a,s,l){var o=getStore(a);o[s]=l}function release(a,s,l){var o=getStore(a),c=o[s];c===l&&(o[s]=null)}function isTaken(a,s){return!!getStore(a)[s]}function getStore(a){return a[ATTR]||(a[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop);var RoamController=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;o._zr=l;var c=bind$1(o._mousedownHandler,o),u=bind$1(o._mousemoveHandler,o),d=bind$1(o._mouseupHandler,o),f=bind$1(o._mousewheelHandler,o),g=bind$1(o._pinchHandler,o);return o.enable=function(y,$){this.disable(),this._opt=defaults(clone$4($)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),y==null&&(y=!0),(y===!0||y==="move"||y==="pan")&&(l.on("mousedown",c),l.on("mousemove",u),l.on("mouseup",d)),(y===!0||y==="scale"||y==="zoom")&&(l.on("mousewheel",f),l.on("pinch",g))},o.disable=function(){l.off("mousedown",c),l.off("mousemove",u),l.off("mouseup",d),l.off("mousewheel",f),l.off("pinch",g)},o}return s.prototype.isDragging=function(){return this._dragging},s.prototype.isPinching=function(){return this._pinching},s.prototype.setPointerChecker=function(l){this.pointerChecker=l},s.prototype.dispose=function(){this.disable()},s.prototype._mousedownHandler=function(l){if(!isMiddleOrRightButtonOnMouseUpDown(l)){for(var o=l.target;o;){if(o.draggable)return;o=o.__hostTarget||o.parent}var c=l.offsetX,u=l.offsetY;this.pointerChecker&&this.pointerChecker(l,c,u)&&(this._x=c,this._y=u,this._dragging=!0)}},s.prototype._mousemoveHandler=function(l){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",l,this._opt)||l.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var o=l.offsetX,c=l.offsetY,u=this._x,d=this._y,f=o-u,g=c-d;this._x=o,this._y=c,this._opt.preventDefaultMouseMove&&stop(l.event),trigger$1(this,"pan","moveOnMouseMove",l,{dx:f,dy:g,oldX:u,oldY:d,newX:o,newY:c,isAvailableBehavior:null})}},s.prototype._mouseupHandler=function(l){isMiddleOrRightButtonOnMouseUpDown(l)||(this._dragging=!1)},s.prototype._mousewheelHandler=function(l){var o=isAvailableBehavior("zoomOnMouseWheel",l,this._opt),c=isAvailableBehavior("moveOnMouseWheel",l,this._opt),u=l.wheelDelta,d=Math.abs(u),f=l.offsetX,g=l.offsetY;if(!(u===0||!o&&!c)){if(o){var y=d>3?1.4:d>1?1.2:1.1,$=u>0?y:1/y;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",l,{scale:$,originX:f,originY:g,isAvailableBehavior:null})}if(c){var x=Math.abs(u),N=(u>0?1:-1)*(x>3?.4:x>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",l,{scrollDelta:N,originX:f,originY:g,isAvailableBehavior:null})}}},s.prototype._pinchHandler=function(l){if(!isTaken(this._zr,"globalPan")){var o=l.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,l,{scale:o,originX:l.pinchX,originY:l.pinchY,isAvailableBehavior:null})}},s}(Eventful);function checkPointerAndTrigger(a,s,l,o,c){a.pointerChecker&&a.pointerChecker(o,c.originX,c.originY)&&(stop(o.event),trigger$1(a,s,l,o,c))}function trigger$1(a,s,l,o,c){c.isAvailableBehavior=bind$1(isAvailableBehavior,null,l,o),a.trigger(s,c)}function isAvailableBehavior(a,s,l){var o=l[a];return!a||o&&(!isString$2(o)||s.event[o+"Key"])}function updateViewOnPan(a,s,l){var o=a.target;o.x+=s,o.y+=l,o.dirty()}function updateViewOnZoom(a,s,l,o){var c=a.target,u=a.zoomLimit,d=a.zoom=a.zoom||1;if(d*=s,u){var f=u.min||0,g=u.max||1/0;d=Math.max(Math.min(g,d),f)}var y=d/a.zoom;a.zoom=d,c.x-=(l-c.x)*(y-1),c.y-=(o-c.y)*(y-1),c.scaleX*=y,c.scaleY*=y,c.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(a,s,l){var o=s.getComponentByElement(a.topTarget),c=o&&o.coordinateSystem;return o&&o!==l&&!IRRELEVANT_EXCLUDES.hasOwnProperty(o.mainType)&&c&&c.model!==l}function parseXML(a){if(isString$2(a)){var s=new DOMParser;a=s.parseFromString(a,"text/xml")}var l=a;for(l.nodeType===9&&(l=l.firstChild);l.nodeName.toLowerCase()!=="svg"||l.nodeType!==1;)l=l.nextSibling;return l}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(s,l){l=l||{};var o=parseXML(s);this._defsUsePending=[];var c=new Group$3;this._root=c;var u=[],d=o.getAttribute("viewBox")||"",f=parseFloat(o.getAttribute("width")||l.width),g=parseFloat(o.getAttribute("height")||l.height);isNaN(f)&&(f=null),isNaN(g)&&(g=null),parseAttributes(o,c,null,!0,!1);for(var y=o.firstChild;y;)this._parseNode(y,c,u,null,!1,!1),y=y.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var $,x;if(d){var N=splitNumberSequence(d);N.length>=4&&($={x:parseFloat(N[0]||0),y:parseFloat(N[1]||0),width:parseFloat(N[2]),height:parseFloat(N[3])})}if($&&f!=null&&g!=null&&(x=makeViewBoxTransform($,{x:0,y:0,width:f,height:g}),!l.ignoreViewBox)){var R=c;c=new Group$3,c.add(R),R.scaleX=R.scaleY=x.scale,R.x=x.x,R.y=x.y}return!l.ignoreRootClip&&f!=null&&g!=null&&c.setClipPath(new Rect$2({shape:{x:0,y:0,width:f,height:g}})),{root:c,width:f,height:g,viewBoxRect:$,viewBoxTransform:x,named:u}},a.prototype._parseNode=function(s,l,o,c,u,d){var f=s.nodeName.toLowerCase(),g,y=c;if(f==="defs"&&(u=!0),f==="text"&&(d=!0),f==="defs"||f==="switch")g=l;else{if(!u){var $=nodeParsers[f];if($&&hasOwn(nodeParsers,f)){g=$.call(this,s,l);var x=s.getAttribute("name");if(x){var N={name:x,namedFrom:null,svgNodeTagLower:f,el:g};o.push(N),f==="g"&&(y=N)}else c&&o.push({name:c.name,namedFrom:c,svgNodeTagLower:f,el:g});l.add(g)}}var R=paintServerParsers[f];if(R&&hasOwn(paintServerParsers,f)){var j=R.call(this,s),ne=s.getAttribute("id");ne&&(this._defs[ne]=j)}}if(g&&g.isGroup)for(var se=s.firstChild;se;)se.nodeType===1?this._parseNode(se,g,o,y,u,d):se.nodeType===3&&d&&this._parseText(se,g),se=se.nextSibling},a.prototype._parseText=function(s,l){var o=new TSpan({style:{text:s.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),applyTextAlignment(o,l);var c=o.style,u=c.fontSize;u&&u<9&&(c.fontSize=9,o.scaleX*=u/9,o.scaleY*=u/9);var d=(c.fontSize||c.fontFamily)&&[c.fontStyle,c.fontWeight,(c.fontSize||12)+"px",c.fontFamily||"sans-serif"].join(" ");c.font=d;var f=o.getBoundingRect();return this._textX+=f.width,l.add(o),o},a.internalField=function(){nodeParsers={g:function(s,l){var o=new Group$3;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o},rect:function(s,l){var o=new Rect$2;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o.setShape({x:parseFloat(s.getAttribute("x")||"0"),y:parseFloat(s.getAttribute("y")||"0"),width:parseFloat(s.getAttribute("width")||"0"),height:parseFloat(s.getAttribute("height")||"0")}),o.silent=!0,o},circle:function(s,l){var o=new Circle;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),r:parseFloat(s.getAttribute("r")||"0")}),o.silent=!0,o},line:function(s,l){var o=new Line$1;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o.setShape({x1:parseFloat(s.getAttribute("x1")||"0"),y1:parseFloat(s.getAttribute("y1")||"0"),x2:parseFloat(s.getAttribute("x2")||"0"),y2:parseFloat(s.getAttribute("y2")||"0")}),o.silent=!0,o},ellipse:function(s,l){var o=new Ellipse$1;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o.setShape({cx:parseFloat(s.getAttribute("cx")||"0"),cy:parseFloat(s.getAttribute("cy")||"0"),rx:parseFloat(s.getAttribute("rx")||"0"),ry:parseFloat(s.getAttribute("ry")||"0")}),o.silent=!0,o},polygon:function(s,l){var o=s.getAttribute("points"),c;o&&(c=parsePoints(o));var u=new Polygon({shape:{points:c||[]},silent:!0});return inheritStyle(l,u),parseAttributes(s,u,this._defsUsePending,!1,!1),u},polyline:function(s,l){var o=s.getAttribute("points"),c;o&&(c=parsePoints(o));var u=new Polyline$1({shape:{points:c||[]},silent:!0});return inheritStyle(l,u),parseAttributes(s,u,this._defsUsePending,!1,!1),u},image:function(s,l){var o=new ZRImage;return inheritStyle(l,o),parseAttributes(s,o,this._defsUsePending,!1,!1),o.setStyle({image:s.getAttribute("xlink:href")||s.getAttribute("href"),x:+s.getAttribute("x"),y:+s.getAttribute("y"),width:+s.getAttribute("width"),height:+s.getAttribute("height")}),o.silent=!0,o},text:function(s,l){var o=s.getAttribute("x")||"0",c=s.getAttribute("y")||"0",u=s.getAttribute("dx")||"0",d=s.getAttribute("dy")||"0";this._textX=parseFloat(o)+parseFloat(u),this._textY=parseFloat(c)+parseFloat(d);var f=new Group$3;return inheritStyle(l,f),parseAttributes(s,f,this._defsUsePending,!1,!0),f},tspan:function(s,l){var o=s.getAttribute("x"),c=s.getAttribute("y");o!=null&&(this._textX=parseFloat(o)),c!=null&&(this._textY=parseFloat(c));var u=s.getAttribute("dx")||"0",d=s.getAttribute("dy")||"0",f=new Group$3;return inheritStyle(l,f),parseAttributes(s,f,this._defsUsePending,!1,!0),this._textX+=parseFloat(u),this._textY+=parseFloat(d),f},path:function(s,l){var o=s.getAttribute("d")||"",c=createFromString(o);return inheritStyle(l,c),parseAttributes(s,c,this._defsUsePending,!1,!1),c.silent=!0,c}}}(),a}(),paintServerParsers={lineargradient:function(a){var s=parseInt(a.getAttribute("x1")||"0",10),l=parseInt(a.getAttribute("y1")||"0",10),o=parseInt(a.getAttribute("x2")||"10",10),c=parseInt(a.getAttribute("y2")||"0",10),u=new LinearGradient(s,l,o,c);return parsePaintServerUnit(a,u),parseGradientColorStops(a,u),u},radialgradient:function(a){var s=parseInt(a.getAttribute("cx")||"0",10),l=parseInt(a.getAttribute("cy")||"0",10),o=parseInt(a.getAttribute("r")||"0",10),c=new RadialGradient$1(s,l,o);return parsePaintServerUnit(a,c),parseGradientColorStops(a,c),c}};function parsePaintServerUnit(a,s){var l=a.getAttribute("gradientUnits");l==="userSpaceOnUse"&&(s.global=!0)}function parseGradientColorStops(a,s){for(var l=a.firstChild;l;){if(l.nodeType===1&&l.nodeName.toLocaleLowerCase()==="stop"){var o=l.getAttribute("offset"),c=void 0;o&&o.indexOf("%")>0?c=parseInt(o,10)/100:o?c=parseFloat(o):c=0;var u={};parseInlineStyle(l,u,u);var d=u.stopColor||l.getAttribute("stop-color")||"#000000";s.colorStops.push({offset:c,color:d})}l=l.nextSibling}}function inheritStyle(a,s){a&&a.__inheritedStyle&&(s.__inheritedStyle||(s.__inheritedStyle={}),defaults(s.__inheritedStyle,a.__inheritedStyle))}function parsePoints(a){for(var s=splitNumberSequence(a),l=[],o=0;o<s.length;o+=2){var c=parseFloat(s[o]),u=parseFloat(s[o+1]);l.push([c,u])}return l}function parseAttributes(a,s,l,o,c){var u=s,d=u.__inheritedStyle=u.__inheritedStyle||{},f={};a.nodeType===1&&(parseTransformAttribute(a,s),parseInlineStyle(a,d,f),o||parseAttributeStyle(a,d,f)),u.style=u.style||{},d.fill!=null&&(u.style.fill=getFillStrokeStyle(u,"fill",d.fill,l)),d.stroke!=null&&(u.style.stroke=getFillStrokeStyle(u,"stroke",d.stroke,l)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(g){d[g]!=null&&(u.style[g]=parseFloat(d[g]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(g){d[g]!=null&&(u.style[g]=d[g])}),c&&(u.__selfStyle=f),d.lineDash&&(u.style.lineDash=map$1(splitNumberSequence(d.lineDash),function(g){return parseFloat(g)})),(d.visibility==="hidden"||d.visibility==="collapse")&&(u.invisible=!0),d.display==="none"&&(u.ignore=!0)}function applyTextAlignment(a,s){var l=s.__selfStyle;if(l){var o=l.textBaseline,c=o;!o||o==="auto"||o==="baseline"?c="alphabetic":o==="before-edge"||o==="text-before-edge"?c="top":o==="after-edge"||o==="text-after-edge"?c="bottom":(o==="central"||o==="mathematical")&&(c="middle"),a.style.textBaseline=c}var u=s.__inheritedStyle;if(u){var d=u.textAlign,f=d;d&&(d==="middle"&&(f="center"),a.style.textAlign=f)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(a,s,l,o){var c=l&&l.match(urlRegex);if(c){var u=trim$1(c[1]);o.push([a,s,u]);return}return l==="none"&&(l=null),l}function applyDefs(a,s){for(var l=0;l<s.length;l++){var o=s[l];o[0].style[o[1]]=a[o[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(a){return a.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(a,s){var l=a.getAttribute("transform");if(l){l=l.replace(/,/g," ");var o=[],c=null;l.replace(transformRegex,function(x,N,R){return o.push(N,R),""});for(var u=o.length-1;u>0;u-=2){var d=o[u],f=o[u-1],g=splitNumberSequence(d);switch(c=c||create$1(),f){case"translate":translate(c,c,[parseFloat(g[0]),parseFloat(g[1]||"0")]);break;case"scale":scale$1(c,c,[parseFloat(g[0]),parseFloat(g[1]||g[0])]);break;case"rotate":rotate(c,c,-parseFloat(g[0])*DEGREE_TO_ANGLE,[parseFloat(g[1]||"0"),parseFloat(g[2]||"0")]);break;case"skewX":var y=Math.tan(parseFloat(g[0])*DEGREE_TO_ANGLE);mul(c,[1,0,y,1,0,0],c);break;case"skewY":var $=Math.tan(parseFloat(g[0])*DEGREE_TO_ANGLE);mul(c,[1,$,0,1,0,0],c);break;case"matrix":c[0]=parseFloat(g[0]),c[1]=parseFloat(g[1]),c[2]=parseFloat(g[2]),c[3]=parseFloat(g[3]),c[4]=parseFloat(g[4]),c[5]=parseFloat(g[5]);break}}s.setLocalTransform(c)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(a,s,l){var o=a.getAttribute("style");if(o){styleRegex.lastIndex=0;for(var c;(c=styleRegex.exec(o))!=null;){var u=c[1],d=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,u)?INHERITABLE_STYLE_ATTRIBUTES_MAP[u]:null;d&&(s[d]=c[2]);var f=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,u)?SELF_STYLE_ATTRIBUTES_MAP[u]:null;f&&(l[f]=c[2])}}}function parseAttributeStyle(a,s,l){for(var o=0;o<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var c=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[o],u=a.getAttribute(c);u!=null&&(s[INHERITABLE_STYLE_ATTRIBUTES_MAP[c]]=u)}for(var o=0;o<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;o++){var c=SELF_STYLE_ATTRIBUTES_MAP_KEYS[o],u=a.getAttribute(c);u!=null&&(l[SELF_STYLE_ATTRIBUTES_MAP[c]]=u)}}function makeViewBoxTransform(a,s){var l=s.width/a.width,o=s.height/a.height,c=Math.min(l,o);return{scale:c,x:-(a.x+a.width/2)*c+(s.x+s.width/2),y:-(a.y+a.height/2)*c+(s.y+s.height/2)}}function parseSVG(a,s){var l=new SVGParser;return l.parse(a,s)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function a(s,l){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=s,this._parsedXML=parseXML(l)}return a.prototype.load=function(){var s=this._firstGraphic;if(!s){s=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(s),this._boundingRect=this._firstGraphic.boundingRect.clone();var l=createRegions(s.named),o=l.regions,c=l.regionsMap;this._regions=o,this._regionsMap=c}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(s){var l,o;try{l=s&&parseSVG(s,{ignoreViewBox:!0,ignoreRootClip:!0})||{},o=l.root,assert(o!=null)}catch(se){throw new Error(`Invalid svg format
`+se.message)}var c=new Group$3;c.add(o),c.isGeoSVGGraphicRoot=!0;var u=l.width,d=l.height,f=l.viewBoxRect,g=this._boundingRect;if(!g){var y=void 0,$=void 0,x=void 0,N=void 0;if(u!=null?(y=0,x=u):f&&(y=f.x,x=f.width),d!=null?($=0,N=d):f&&($=f.y,N=f.height),y==null||$==null){var R=o.getBoundingRect();y==null&&(y=R.x,x=R.width),$==null&&($=R.y,N=R.height)}g=this._boundingRect=new BoundingRect(y,$,x,N)}if(f){var j=makeViewBoxTransform(f,g);o.scaleX=o.scaleY=j.scale,o.x=j.x,o.y=j.y}c.setClipPath(new Rect$2({shape:g.plain()}));var ne=[];return each$f(l.named,function(se){REGION_AVAILABLE_SVG_TAG_MAP.get(se.svgNodeTagLower)!=null&&(ne.push(se),setSilent(se.el))}),{root:c,boundingRect:g,named:ne}},a.prototype.useGraphic=function(s){var l=this._usedGraphicMap,o=l.get(s);return o||(o=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),l.set(s,o),o)},a.prototype.freeGraphic=function(s){var l=this._usedGraphicMap,o=l.get(s);o&&(l.removeKey(s),this._freedGraphics.push(o))},a}();function setSilent(a){a.silent=!1,a.isGroup&&a.traverse(function(s){s.silent=!1})}function createRegions(a){var s=[],l=createHashMap();return each$f(a,function(o){if(o.namedFrom==null){var c=new GeoSVGRegion(o.name,o.el);s.push(c),l.set(o.name,c)}}),{regions:s,regionsMap:l}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i$1=0;i$1<points$1.length;i$1++)for(var k$1=0;k$1<points$1[i$1].length;k$1++)points$1[i$1][k$1][0]/=10.5,points$1[i$1][k$1][1]/=-10.5/.75,points$1[i$1][k$1][0]+=geoCoord[0],points$1[i$1][k$1][1]+=geoCoord[1];function fixNanhai(a,s){if(a==="china"){for(var l=0;l<s.length;l++)if(s[l].name===nanhaiName)return;s.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(o){return{type:"polygon",exterior:o}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(a,s){if(a==="china"){var l=coordsOffsetMap[s.name];if(l){var o=s.getCenter();o[0]+=l[0]/10.5,o[1]+=-l[1]/(10.5/.75),s.setCenter(o)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(a,s){a==="china"&&s.name==="台湾"&&s.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function a(s,l,o){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=s,this._specialAreas=o,this._geoJSON=parseInput(l)}return a.prototype.load=function(s,l){l=l||DEFAULT_NAME_PROPERTY;var o=this._parsedMap.get(l);if(!o){var c=this._parseToRegions(l);o=this._parsedMap.set(l,{regions:c,boundingRect:calculateBoundingRect(c)})}var u=createHashMap(),d=[];return each$f(o.regions,function(f){var g=f.name;s&&hasOwn(s,g)&&(f=f.cloneShallow(g=s[g])),d.push(f),u.set(g,f)}),{regions:d,boundingRect:o.boundingRect||new BoundingRect(0,0,0,0),regionsMap:u}},a.prototype._parseToRegions=function(s){var l=this._mapName,o=this._geoJSON,c;try{c=o?parseGeoJSON(o,s):[]}catch(u){throw new Error(`Invalid geoJson format
`+u.message)}return fixNanhai(l,c),each$f(c,function(u){var d=u.name;fixTextCoords(l,u),fixDiaoyuIsland(l,u);var f=this._specialAreas&&this._specialAreas[d];f&&u.transformTo(f.left,f.top,f.width,f.height)},this),c},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function calculateBoundingRect(a){for(var s,l=0;l<a.length;l++){var o=a[l].getBoundingRect();s=s||o.clone(),s.union(o)}return s}function parseInput(a){return isString$2(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var storage=createHashMap();const geoSourceManager={registerMap:function(a,s,l){if(s.svg){var o=new GeoSVGResource(a,s.svg);storage.set(a,o)}else{var c=s.geoJson||s.geoJSON;c&&!s.features?l=s.specialAreas:c=s;var o=new GeoJSONResource(a,c,l);storage.set(a,o)}},getGeoResource:function(a){return storage.get(a)},getMapForUser:function(a){var s=storage.get(a);return s&&s.type==="geoJSON"&&s.getMapForUser()},load:function(a,s,l){var o=storage.get(a);if(o)return o.load(s,l)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(a){var s=a.getItemStyle(),l=a.get("areaColor");return l!=null&&(s.fill=l),s}function fixLineStyle(a){var s=a.style;s&&(s.stroke=s.stroke||s.fill,s.fill=null)}var MapDraw=function(){function a(s){var l=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(s.getZr()),this._controllerHost={target:l},this.group=l,l.add(this._regionsGroup=new Group$3),l.add(this._svgGroup=new Group$3)}return a.prototype.draw=function(s,l,o,c,u){var d=s.mainType==="geo",f=s.getData&&s.getData();d&&l.eachComponent({mainType:"series",subType:"map"},function(ce){!f&&ce.getHostGeoModel()===s&&(f=ce.getData())});var g=s.coordinateSystem,y=this._regionsGroup,$=this.group,x=g.getTransformInfo(),N=x.raw,R=x.roam,j=!y.childAt(0)||u;j?($.x=R.x,$.y=R.y,$.scaleX=R.scaleX,$.scaleY=R.scaleY,$.dirty()):updateProps$1($,R,s);var ne=f&&f.getVisual("visualMeta")&&f.getVisual("visualMeta").length>0,se={api:o,geo:g,mapOrGeoModel:s,data:f,isVisualEncodedByVisualMap:ne,isGeo:d,transformInfoRaw:N};g.resourceType==="geoJSON"?this._buildGeoJSON(se):g.resourceType==="geoSVG"&&this._buildSVG(se),this._updateController(s,l,o),this._updateMapSelectHandler(s,y,o,c)},a.prototype._buildGeoJSON=function(s){var l=this._regionsGroupByName=createHashMap(),o=createHashMap(),c=this._regionsGroup,u=s.transformInfoRaw,d=s.mapOrGeoModel,f=s.data,g=s.geo.projection,y=g&&g.stream;function $(R,j){return j&&(R=j(R)),R&&[R[0]*u.scaleX+u.x,R[1]*u.scaleY+u.y]}function x(R){for(var j=[],ne=!y&&g&&g.project,se=0;se<R.length;++se){var ce=$(R[se],ne);ce&&j.push(ce)}return j}function N(R){return{shape:{points:x(R)}}}c.removeAll(),each$f(s.geo.regions,function(R){var j=R.name,ne=l.get(j),se=o.get(j)||{},ce=se.dataIdx,fe=se.regionModel;ne||(ne=l.set(j,new Group$3),c.add(ne),ce=f?f.indexOfName(j):null,fe=s.isGeo?d.getRegionModel(j):f?f.getItemModel(ce):null,o.set(j,{dataIdx:ce,regionModel:fe}));var ea=[],ta=[];each$f(R.geometries,function(ia){if(ia.type==="polygon"){var sa=[ia.exterior].concat(ia.interiors||[]);y&&(sa=projectPolys(sa,y)),each$f(sa,function(la){ea.push(new Polygon(N(la)))})}else{var ra=ia.points;y&&(ra=projectPolys(ra,y,!0)),each$f(ra,function(la){ta.push(new Polyline$1(N(la)))})}});var na=$(R.getCenter(),g&&g.project);function aa(ia,sa){if(ia.length){var ra=new CompoundPath$1({culling:!0,segmentIgnoreThreshold:1,shape:{paths:ia}});ne.add(ra),applyOptionStyleForRegion(s,ra,ce,fe),resetLabelForRegion(s,ra,j,fe,d,ce,na),sa&&(fixLineStyle(ra),each$f(ra.states,fixLineStyle))}}aa(ea),aa(ta,!0)}),l.each(function(R,j){var ne=o.get(j),se=ne.dataIdx,ce=ne.regionModel;resetEventTriggerForRegion(s,R,j,ce,d,se),resetTooltipForRegion(s,R,j,ce,d),resetStateTriggerForRegion(s,R,j,ce,d)},this)},a.prototype._buildSVG=function(s){var l=s.geo.map,o=s.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(l)&&(this._freeSVG(),this._useSVG(l));var c=this._svgDispatcherMap=createHashMap(),u=!1;each$f(this._svgGraphicRecord.named,function(d){var f=d.name,g=s.mapOrGeoModel,y=s.data,$=d.svgNodeTagLower,x=d.el,N=y?y.indexOfName(f):null,R=g.getRegionModel(f);if(OPTION_STYLE_ENABLED_TAG_MAP.get($)!=null&&x instanceof Displayable&&applyOptionStyleForRegion(s,x,N,R),x instanceof Displayable&&(x.culling=!0),x.z2EmphasisLift=0,!d.namedFrom&&(LABEL_HOST_MAP.get($)!=null&&resetLabelForRegion(s,x,f,R,g,N,null),resetEventTriggerForRegion(s,x,f,R,g,N),resetTooltipForRegion(s,x,f,R,g),STATE_TRIGGER_TAG_MAP.get($)!=null)){var j=resetStateTriggerForRegion(s,x,f,R,g);j==="self"&&(u=!0);var ne=c.get(f)||c.set(f,[]);ne.push(x)}},this),this._enableBlurEntireSVG(u,s)},a.prototype._enableBlurEntireSVG=function(s,l){if(s&&l.isGeo){var o=l.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),c=o.opacity;this._svgGraphicRecord.root.traverse(function(u){if(!u.isGroup){setDefaultStateProxy(u);var d=u.ensureState("blur").style||{};d.opacity==null&&c!=null&&(d.opacity=c),u.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(s,l){if(s==null)return[];var o=l.coordinateSystem;if(o.resourceType==="geoJSON"){var c=this._regionsGroupByName;if(c){var u=c.get(s);return u?[u]:[]}}else if(o.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(s)||[]},a.prototype._svgResourceChanged=function(s){return this._svgMapName!==s},a.prototype._useSVG=function(s){var l=geoSourceManager.getGeoResource(s);if(l&&l.type==="geoSVG"){var o=l.useGraphic(this.uid);this._svgGroup.add(o.root),this._svgGraphicRecord=o,this._svgMapName=s}},a.prototype._freeSVG=function(){var s=this._svgMapName;if(s!=null){var l=geoSourceManager.getGeoResource(s);l&&l.type==="geoSVG"&&l.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(s,l,o){var c=s.coordinateSystem,u=this._controller,d=this._controllerHost;d.zoomLimit=s.get("scaleLimit"),d.zoom=c.getZoom(),u.enable(s.get("roam")||!1);var f=s.mainType;function g(){var y={type:"geoRoam",componentType:f};return y[f+"Id"]=s.id,y}u.off("pan").on("pan",function(y){this._mouseDownFlag=!1,updateViewOnPan(d,y.dx,y.dy),o.dispatchAction(extend(g(),{dx:y.dx,dy:y.dy,animation:{duration:0}}))},this),u.off("zoom").on("zoom",function(y){this._mouseDownFlag=!1,updateViewOnZoom(d,y.scale,y.originX,y.originY),o.dispatchAction(extend(g(),{totalZoom:d.zoom,zoom:y.scale,originX:y.originX,originY:y.originY,animation:{duration:0}}))},this),u.setPointerChecker(function(y,$,x){return c.containPoint([$,x])&&!onIrrelevantElement(y,o,s)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(s){var l=s.getTextContent();l&&(l.ignore=mapLabelRaw(l).ignore)})},a.prototype._updateMapSelectHandler=function(s,l,o,c){var u=this;l.off("mousedown"),l.off("click"),s.get("selectedMode")&&(l.on("mousedown",function(){u._mouseDownFlag=!0}),l.on("click",function(d){u._mouseDownFlag&&(u._mouseDownFlag=!1)}))},a}();function applyOptionStyleForRegion(a,s,l,o){var c=o.getModel("itemStyle"),u=o.getModel(["emphasis","itemStyle"]),d=o.getModel(["blur","itemStyle"]),f=o.getModel(["select","itemStyle"]),g=getFixedItemStyle(c),y=getFixedItemStyle(u),$=getFixedItemStyle(f),x=getFixedItemStyle(d),N=a.data;if(N){var R=N.getItemVisual(l,"style"),j=N.getItemVisual(l,"decal");a.isVisualEncodedByVisualMap&&R.fill&&(g.fill=R.fill),j&&(g.decal=createOrUpdatePatternFromDecal(j,a.api))}s.setStyle(g),s.style.strokeNoScale=!0,s.ensureState("emphasis").style=y,s.ensureState("select").style=$,s.ensureState("blur").style=x,setDefaultStateProxy(s)}function resetLabelForRegion(a,s,l,o,c,u,d){var f=a.data,g=a.isGeo,y=f&&isNaN(f.get(f.mapDimension("value"),u)),$=f&&f.getItemLayout(u);if(g||y||$&&$.showLabel){var x=g?l:u,N=void 0;(!f||u>=0)&&(N=c);var R=d?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(s,getLabelStatesModels(o),{labelFetcher:N,labelDataIndex:x,defaultText:l},R);var j=s.getTextContent();if(j&&(mapLabelRaw(j).ignore=j.ignore,s.textConfig&&d)){var ne=s.getBoundingRect().clone();s.textConfig.layoutRect=ne,s.textConfig.position=[(d[0]-ne.x)/ne.width*100+"%",(d[1]-ne.y)/ne.height*100+"%"]}s.disableLabelAnimation=!0}else s.removeTextContent(),s.removeTextConfig(),s.disableLabelAnimation=null}function resetEventTriggerForRegion(a,s,l,o,c,u){a.data?a.data.setItemGraphicEl(u,s):getECData(s).eventData={componentType:"geo",componentIndex:c.componentIndex,geoIndex:c.componentIndex,name:l,region:o&&o.option||{}}}function resetTooltipForRegion(a,s,l,o,c){a.data||setTooltipConfig({el:s,componentModel:c,itemName:l,itemTooltipOption:o.get("tooltip")})}function resetStateTriggerForRegion(a,s,l,o,c){s.highDownSilentOnTouch=!!c.get("selectedMode");var u=o.getModel("emphasis"),d=u.get("focus");return toggleHoverEmphasis(s,d,u.get("blurScope"),u.get("disabled")),a.isGeo&&enableComponentHighDownFeatures(s,c,l),d}function projectPolys(a,s,l){var o=[],c;function u(){c=[]}function d(){c.length&&(o.push(c),c=[])}var f=s({polygonStart:u,polygonEnd:d,lineStart:u,lineEnd:d,point:function(g,y){isFinite(g)&&isFinite(y)&&c.push([g,y])},sphere:function(){}});return!l&&f.polygonStart(),each$f(a,function(g){f.lineStart();for(var y=0;y<g.length;y++)f.point(g[y][0],g[y][1]);f.lineEnd()}),!l&&f.polygonEnd(),o}var MapView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c,u){if(!(u&&u.type==="mapToggleSelect"&&u.from===this.uid)){var d=this.group;if(d.removeAll(),!l.getHostGeoModel()){if(this._mapDraw&&u&&u.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),u&&u.type==="geoRoam"&&u.componentType==="series"&&u.seriesId===l.id){var f=this._mapDraw;f&&d.add(f.group)}else if(l.needsDrawMap){var f=this._mapDraw||new MapDraw(c);d.add(f.group),f.draw(l,o,c,this,u),this._mapDraw=f}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;l.get("showLegendSymbol")&&o.getComponent("legend")&&this._renderSymbols(l,o,c)}}},s.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},s.prototype._renderSymbols=function(l,o,c){var u=l.originalData,d=this.group;u.each(u.mapDimension("value"),function(f,g){if(!isNaN(f)){var y=u.getItemLayout(g);if(!(!y||!y.point)){var $=y.point,x=y.offset,N=new Circle({style:{fill:l.getData().getVisual("style").fill},shape:{cx:$[0]+x*9,cy:$[1],r:3},silent:!0,z2:8+(x?0:Z2_EMPHASIS_LIFT+1)});if(!x){var R=l.mainSeries.getData(),j=u.getName(g),ne=R.indexOfName(j),se=u.getItemModel(g),ce=se.getModel("label"),fe=R.getItemGraphicEl(ne);setLabelStyle(N,getLabelStatesModels(se),{labelFetcher:{getFormattedLabel:function(ea,ta){return l.getFormattedLabel(ne,ta)}},defaultText:j}),N.disableLabelAnimation=!0,ce.get("position")||N.setTextConfig({position:"bottom"}),fe.onHoverStateChange=function(ea){setStatesFlag(N,ea)}}d.add(N)}}})},s.type="map",s}(ChartView),MapSeries=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.needsDrawMap=!1,l.seriesGroup=[],l.getTooltipPosition=function(o){if(o!=null){var c=this.getData().getName(o),u=this.coordinateSystem,d=u.getRegion(c);return d&&u.dataToPoint(d.getCenter())}},l}return s.prototype.getInitialData=function(l){for(var o=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),c=createHashMap(),u=[],d=0,f=o.count();d<f;d++){var g=o.getName(d);c.set(g,!0)}var y=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(y.regions,function($){var x=$.name;c.get(x)||u.push(x)}),o.appendValues([],u),o},s.prototype.getHostGeoModel=function(){var l=this.option.geoIndex;return l!=null?this.ecModel.getComponent("geo",l):null},s.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},s.prototype.getRawValue=function(l){var o=this.getData();return o.get(o.mapDimension("value"),l)},s.prototype.getRegionModel=function(l){var o=this.getData();return o.getItemModel(o.indexOfName(l))},s.prototype.formatTooltip=function(l,o,c){for(var u=this.getData(),d=this.getRawValue(l),f=u.getName(l),g=this.seriesGroup,y=[],$=0;$<g.length;$++){var x=g[$].originalData.indexOfName(f),N=u.mapDimension("value");isNaN(g[$].originalData.get(N,x))||y.push(g[$].name)}return createTooltipMarkup("section",{header:y.join(", "),noHeader:!y.length,blocks:[createTooltipMarkup("nameValue",{name:f,value:d})]})},s.prototype.setZoom=function(l){this.option.zoom=l},s.prototype.setCenter=function(l){this.option.center=l},s.prototype.getLegendIcon=function(l){var o=l.icon||"roundRect",c=createSymbol$1(o,0,0,l.itemWidth,l.itemHeight,l.itemStyle.fill);return c.setStyle(l.itemStyle),c.style.stroke="none",o.indexOf("empty")>-1&&(c.style.stroke=c.style.fill,c.style.fill="#fff",c.style.lineWidth=2),c},s.type="series.map",s.dependencies=["geo"],s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},s}(SeriesModel);function dataStatistics(a,s){var l={};return each$f(a,function(o){o.each(o.mapDimension("value"),function(c,u){var d="ec-"+o.getName(u);l[d]=l[d]||[],isNaN(c)||l[d].push(c)})}),a[0].map(a[0].mapDimension("value"),function(o,c){for(var u="ec-"+a[0].getName(c),d=0,f=1/0,g=-1/0,y=l[u].length,$=0;$<y;$++)f=Math.min(f,l[u][$]),g=Math.max(g,l[u][$]),d+=l[u][$];var x;return s==="min"?x=f:s==="max"?x=g:s==="average"?x=d/y:x=d,y===0?NaN:x})}function mapDataStatistic(a){var s={};a.eachSeriesByType("map",function(l){var o=l.getHostGeoModel(),c=o?"o"+o.id:"i"+l.getMapType();(s[c]=s[c]||[]).push(l)}),each$f(s,function(l,o){for(var c=dataStatistics(map$1(l,function(d){return d.getData()}),l[0].get("mapValueCalculation")),u=0;u<l.length;u++)l[u].originalData=l[u].getData();for(var u=0;u<l.length;u++)l[u].seriesGroup=l,l[u].needsDrawMap=u===0&&!l[u].getHostGeoModel(),l[u].setData(c.cloneShallow()),l[u].mainSeries=l[0]})}function mapSymbolLayout(a){var s={};a.eachSeriesByType("map",function(l){var o=l.getMapType();if(!(l.getHostGeoModel()||s[o])){var c={};each$f(l.seriesGroup,function(d){var f=d.coordinateSystem,g=d.originalData;d.get("showLegendSymbol")&&a.getComponent("legend")&&g.each(g.mapDimension("value"),function(y,$){var x=g.getName($),N=f.getRegion(x);if(!(!N||isNaN(y))){var R=c[x]||0,j=f.dataToPoint(N.getCenter());c[x]=R+1,g.setItemLayout($,{point:j,offset:R})}})});var u=l.getData();u.each(function(d){var f=u.getName(d),g=u.getItemLayout(d)||{};g.showLabel=!c[f],u.setItemLayout(d,g)}),s[o]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new Transformable,o._rawTransformable=new Transformable,o.name=l,o}return s.prototype.setBoundingRect=function(l,o,c,u){return this._rect=new BoundingRect(l,o,c,u),this._rect},s.prototype.getBoundingRect=function(){return this._rect},s.prototype.setViewRect=function(l,o,c,u){this._transformTo(l,o,c,u),this._viewRect=new BoundingRect(l,o,c,u)},s.prototype._transformTo=function(l,o,c,u){var d=this.getBoundingRect(),f=this._rawTransformable;f.transform=d.calculateTransform(new BoundingRect(l,o,c,u));var g=f.parent;f.parent=null,f.decomposeTransform(),f.parent=g,this._updateTransform()},s.prototype.setCenter=function(l,o){l&&(this._center=[parsePercent(l[0],o.getWidth()),parsePercent(l[1],o.getHeight())],this._updateCenterAndZoom())},s.prototype.setZoom=function(l){l=l||1;var o=this.zoomLimit;o&&(o.max!=null&&(l=Math.min(o.max,l)),o.min!=null&&(l=Math.max(o.min,l))),this._zoom=l,this._updateCenterAndZoom()},s.prototype.getDefaultCenter=function(){var l=this.getBoundingRect(),o=l.x+l.width/2,c=l.y+l.height/2;return[o,c]},s.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},s.prototype.getZoom=function(){return this._zoom||1},s.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},s.prototype._updateCenterAndZoom=function(){var l=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,c=this.getDefaultCenter(),u=this.getCenter(),d=this.getZoom();u=applyTransform$1([],u,l),c=applyTransform$1([],c,l),o.originX=u[0],o.originY=u[1],o.x=c[0]-u[0],o.y=c[1]-u[1],o.scaleX=o.scaleY=d,this._updateTransform()},s.prototype._updateTransform=function(){var l=this._roamTransformable,o=this._rawTransformable;o.parent=l,l.updateTransform(),o.updateTransform(),copy(this.transform||(this.transform=[]),o.transform||create$1()),this._rawTransform=o.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},s.prototype.getTransformInfo=function(){var l=this._rawTransformable,o=this._roamTransformable,c=new Transformable;return c.transform=o.transform,c.decomposeTransform(),{roam:{x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY},raw:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}}},s.prototype.getViewRect=function(){return this._viewRect},s.prototype.getViewRectAfterRoam=function(){var l=this.getBoundingRect().clone();return l.applyTransform(this.transform),l},s.prototype.dataToPoint=function(l,o,c){var u=o?this._rawTransform:this.transform;return c=c||[],u?v2ApplyTransform(c,l,u):copy$1(c,l)},s.prototype.pointToData=function(l){var o=this.invTransform;return o?v2ApplyTransform([],l,o):[l[0],l[1]]},s.prototype.convertToPixel=function(l,o,c){var u=getCoordSys$4(o);return u===this?u.dataToPoint(c):null},s.prototype.convertFromPixel=function(l,o,c){var u=getCoordSys$4(o);return u===this?u.pointToData(c):null},s.prototype.containPoint=function(l){return this.getViewRectAfterRoam().contain(l[0],l[1])},s.dimensions=["x","y"],s}(Transformable);function getCoordSys$4(a){var s=a.seriesModel;return s?s.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this,l)||this;u.dimensions=geo2DDimensions,u.type="geo",u._nameCoordMap=createHashMap(),u.map=o;var d=c.projection,f=geoSourceManager.load(o,c.nameMap,c.nameProperty),g=geoSourceManager.getGeoResource(o);u.resourceType=g?g.type:null;var y=u.regions=f.regions,$=GEO_DEFAULT_PARAMS[g.type];u._regionsMap=f.regionsMap,u.regions=f.regions,u.projection=d;var x;if(d)for(var N=0;N<y.length;N++){var R=y[N].getBoundingRect(d);x=x||R.clone(),x.union(R)}else x=f.boundingRect;return u.setBoundingRect(x.x,x.y,x.width,x.height),u.aspectScale=d?1:retrieve2(c.aspectScale,$.aspectScale),u._invertLongitute=d?!1:$.invertLongitute,u}return s.prototype._transformTo=function(l,o,c,u){var d=this.getBoundingRect(),f=this._invertLongitute;d=d.clone(),f&&(d.y=-d.y-d.height);var g=this._rawTransformable;g.transform=d.calculateTransform(new BoundingRect(l,o,c,u));var y=g.parent;g.parent=null,g.decomposeTransform(),g.parent=y,f&&(g.scaleY=-g.scaleY),this._updateTransform()},s.prototype.getRegion=function(l){return this._regionsMap.get(l)},s.prototype.getRegionByCoord=function(l){for(var o=this.regions,c=0;c<o.length;c++){var u=o[c];if(u.type==="geoJSON"&&u.contain(l))return o[c]}},s.prototype.addGeoCoord=function(l,o){this._nameCoordMap.set(l,o)},s.prototype.getGeoCoord=function(l){var o=this._regionsMap.get(l);return this._nameCoordMap.get(l)||o&&o.getCenter()},s.prototype.dataToPoint=function(l,o,c){if(isString$2(l)&&(l=this.getGeoCoord(l)),l){var u=this.projection;return u&&(l=u.project(l)),l&&this.projectedToPoint(l,o,c)}},s.prototype.pointToData=function(l){var o=this.projection;return o&&(l=o.unproject(l)),l&&this.pointToProjected(l)},s.prototype.pointToProjected=function(l){return a.prototype.pointToData.call(this,l)},s.prototype.projectedToPoint=function(l,o,c){return a.prototype.dataToPoint.call(this,l,o,c)},s.prototype.convertToPixel=function(l,o,c){var u=getCoordSys$3(o);return u===this?u.dataToPoint(c):null},s.prototype.convertFromPixel=function(l,o,c){var u=getCoordSys$3(o);return u===this?u.pointToData(c):null},s}(View);mixin(Geo,View);function getCoordSys$3(a){var s=a.geoModel,l=a.seriesModel;return s?s.coordinateSystem:l?l.coordinateSystem||(l.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}const Geo$1=Geo;function resizeGeo(a,s){var l=a.get("boundingCoords");if(l!=null){var o=l[0],c=l[1];if(isFinite(o[0])&&isFinite(o[1])&&isFinite(c[0])&&isFinite(c[1])){var u=this.projection;if(u){var d=o[0],f=o[1],g=c[0],y=c[1];o=[1/0,1/0],c=[-1/0,-1/0];var $=function(aa,ia,sa,ra){for(var la=sa-aa,oa=ra-ia,ca=0;ca<=100;ca++){var pa=ca/100,ua=u.project([aa+la*pa,ia+oa*pa]);min$1(o,o,ua),max$1(c,c,ua)}};$(d,f,g,f),$(g,f,g,y),$(g,y,d,y),$(d,y,g,f)}this.setBoundingRect(o[0],o[1],c[0]-o[0],c[1]-o[1])}}var x=this.getBoundingRect(),N=a.get("layoutCenter"),R=a.get("layoutSize"),j=s.getWidth(),ne=s.getHeight(),se=x.width/x.height*this.aspectScale,ce=!1,fe,ea;N&&R&&(fe=[parsePercent(N[0],j),parsePercent(N[1],ne)],ea=parsePercent(R,Math.min(j,ne)),!isNaN(fe[0])&&!isNaN(fe[1])&&!isNaN(ea)&&(ce=!0));var ta;if(ce)ta={},se>1?(ta.width=ea,ta.height=ea/se):(ta.height=ea,ta.width=ea*se),ta.y=fe[1]-ta.height/2,ta.x=fe[0]-ta.width/2;else{var na=a.getBoxLayoutParams();na.aspect=se,ta=getLayoutRect(na,{width:j,height:ne})}this.setViewRect(ta.x,ta.y,ta.width,ta.height),this.setCenter(a.get("center"),s),this.setZoom(a.get("zoom"))}function setGeoCoords(a,s){each$f(s.get("geoCoord"),function(l,o){a.addGeoCoord(o,l)})}var GeoCreator=function(){function a(){this.dimensions=geo2DDimensions}return a.prototype.create=function(s,l){var o=[];function c(d){return{nameProperty:d.get("nameProperty"),aspectScale:d.get("aspectScale"),projection:d.get("projection")}}s.eachComponent("geo",function(d,f){var g=d.get("map"),y=new Geo$1(g+f,g,extend({nameMap:d.get("nameMap")},c(d)));y.zoomLimit=d.get("scaleLimit"),o.push(y),d.coordinateSystem=y,y.model=d,y.resize=resizeGeo,y.resize(d,l)}),s.eachSeries(function(d){var f=d.get("coordinateSystem");if(f==="geo"){var g=d.get("geoIndex")||0;d.coordinateSystem=o[g]}});var u={};return s.eachSeriesByType("map",function(d){if(!d.getHostGeoModel()){var f=d.getMapType();u[f]=u[f]||[],u[f].push(d)}}),each$f(u,function(d,f){var g=map$1(d,function($){return $.get("nameMap")}),y=new Geo$1(f,f,extend({nameMap:mergeAll(g)},c(d[0])));y.zoomLimit=retrieve.apply(null,map$1(d,function($){return $.get("scaleLimit")})),o.push(y),y.resize=resizeGeo,y.resize(d[0],l),each$f(d,function($){$.coordinateSystem=y,setGeoCoords(y,$)})}),o},a.prototype.getFilledRegions=function(s,l,o,c){for(var u=(s||[]).slice(),d=createHashMap(),f=0;f<u.length;f++)d.set(u[f].name,u[f]);var g=geoSourceManager.load(l,o,c);return each$f(g.regions,function(y){var $=y.name;!d.get($)&&u.push({name:$})}),u},a}(),geoCreator=new GeoCreator,GeoModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o,c){var u=geoSourceManager.getGeoResource(l.map);if(u&&u.type==="geoJSON"){var d=l.itemStyle=l.itemStyle||{};"color"in d||(d.color="#eee")}this.mergeDefaultAndTheme(l,c),defaultEmphasis(l,"label",["show"])},s.prototype.optionUpdated=function(){var l=this,o=this.option;o.regions=geoCreator.getFilledRegions(o.regions,o.map,o.nameMap,o.nameProperty);var c={};this._optionModelMap=reduce(o.regions||[],function(u,d){var f=d.name;return f&&(u.set(f,new Model(d,l,l.ecModel)),d.selected&&(c[f]=!0)),u},createHashMap()),o.selectedMap||(o.selectedMap=c)},s.prototype.getRegionModel=function(l){return this._optionModelMap.get(l)||new Model(null,this,this.ecModel)},s.prototype.getFormattedLabel=function(l,o){var c=this.getRegionModel(l),u=o==="normal"?c.get(["label","formatter"]):c.get(["emphasis","label","formatter"]),d={name:l};if(isFunction$2(u))return d.status=o,u(d);if(isString$2(u))return u.replace("{a}",l??"")},s.prototype.setZoom=function(l){this.option.zoom=l},s.prototype.setCenter=function(l){this.option.center=l},s.prototype.select=function(l){var o=this.option,c=o.selectedMode;if(c){c!=="multiple"&&(o.selectedMap=null);var u=o.selectedMap||(o.selectedMap={});u[l]=!0}},s.prototype.unSelect=function(l){var o=this.option.selectedMap;o&&(o[l]=!1)},s.prototype.toggleSelected=function(l){this[this.isSelected(l)?"unSelect":"select"](l)},s.prototype.isSelected=function(l){var o=this.option.selectedMap;return!!(o&&o[l])},s.type="geo",s.layoutMode="box",s.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},s}(ComponentModel);function getCenterCoord(a,s){return a.pointToProjected?a.pointToProjected(s):a.pointToData(s)}function updateCenterAndZoom(a,s,l,o){var c=a.getZoom(),u=a.getCenter(),d=s.zoom,f=a.projectedToPoint?a.projectedToPoint(u):a.dataToPoint(u);if(s.dx!=null&&s.dy!=null&&(f[0]-=s.dx,f[1]-=s.dy,a.setCenter(getCenterCoord(a,f),o)),d!=null){if(l){var g=l.min||0,y=l.max||1/0;d=Math.max(Math.min(c*d,y),g)/c}a.scaleX*=d,a.scaleY*=d;var $=(s.originX-a.x)*(d-1),x=(s.originY-a.y)*(d-1);a.x-=$,a.y-=x,a.updateTransform(),a.setCenter(getCenterCoord(a,f),o),a.setZoom(d*c)}return{center:a.getCenter(),zoom:a.getZoom()}}var GeoView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.focusBlurEnabled=!0,l}return s.prototype.init=function(l,o){this._api=o},s.prototype.render=function(l,o,c,u){if(this._model=l,!l.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(c));var d=this._mapDraw;d.draw(l,o,c,this,u),d.group.on("click",this._handleRegionClick,this),d.group.silent=l.get("silent"),this.group.add(d.group),this.updateSelectStatus(l,o,c)},s.prototype._handleRegionClick=function(l){var o;findEventDispatcher(l.target,function(c){return(o=getECData(c).eventData)!=null},!0),o&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:o.name})},s.prototype.updateSelectStatus=function(l,o,c){var u=this;this._mapDraw.group.traverse(function(d){var f=getECData(d).eventData;if(f)return u._model.isSelected(f.name)?c.enterSelect(d):c.leaveSelect(d),!0})},s.prototype.findHighDownDispatchers=function(l){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(l,this._model)},s.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},s.type="geo",s}(ComponentView);function registerMap(a,s,l){geoSourceManager.registerMap(a,s,l)}function install$K(a){a.registerCoordinateSystem("geo",geoCreator),a.registerComponentModel(GeoModel),a.registerComponentView(GeoView),a.registerImpl("registerMap",registerMap),a.registerImpl("getMap",function(l){return geoSourceManager.getMapForUser(l)});function s(l,o){o.update="geo:updateSelectStatus",a.registerAction(o,function(c,u){var d={},f=[];return u.eachComponent({mainType:"geo",query:c},function(g){g[l](c.name);var y=g.coordinateSystem;each$f(y.regions,function(x){d[x.name]=g.isSelected(x.name)||!1});var $=[];each$f(d,function(x,N){d[N]&&$.push(N)}),f.push({geoIndex:g.componentIndex,name:$})}),{selected:d,allSelected:f,name:c.name}})}s("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),s("select",{type:"geoSelect",event:"geoselected"}),s("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(l,o,c){var u=l.componentType||"series";o.eachComponent({mainType:u,query:l},function(d){var f=d.coordinateSystem;if(f.type==="geo"){var g=updateCenterAndZoom(f,l,d.get("scaleLimit"),c);d.setCenter&&d.setCenter(g.center),d.setZoom&&d.setZoom(g.zoom),u==="series"&&each$f(d.seriesGroup,function(y){y.setCenter(g.center),y.setZoom(g.zoom)})}})})}function install$J(a){use(install$K),a.registerChartView(MapView),a.registerSeriesModel(MapSeries),a.registerLayout(mapSymbolLayout),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",a.registerAction)}function init(a){var s=a;s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var l=[s],o,c;o=l.pop();)if(c=o.children,o.isExpand&&c.length)for(var u=c.length,d=u-1;d>=0;d--){var f=c[d];f.hierNode={defaultAncestor:null,ancestor:f,prelim:0,modifier:0,change:0,shift:0,i:d,thread:null},l.push(f)}}function firstWalk(a,s){var l=a.isExpand?a.children:[],o=a.parentNode.children,c=a.hierNode.i?o[a.hierNode.i-1]:null;if(l.length){executeShifts(a);var u=(l[0].hierNode.prelim+l[l.length-1].hierNode.prelim)/2;c?(a.hierNode.prelim=c.hierNode.prelim+s(a,c),a.hierNode.modifier=a.hierNode.prelim-u):a.hierNode.prelim=u}else c&&(a.hierNode.prelim=c.hierNode.prelim+s(a,c));a.parentNode.hierNode.defaultAncestor=apportion(a,c,a.parentNode.hierNode.defaultAncestor||o[0],s)}function secondWalk(a){var s=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:s},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function separation(a){return arguments.length?a:defaultSeparation}function radialCoordinate(a,s){return a-=Math.PI/2,{x:s*Math.cos(a),y:s*Math.sin(a)}}function getViewRect$4(a,s){return getLayoutRect(a.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function executeShifts(a){for(var s=a.children,l=s.length,o=0,c=0;--l>=0;){var u=s[l];u.hierNode.prelim+=o,u.hierNode.modifier+=o,c+=u.hierNode.change,o+=u.hierNode.shift+c}}function apportion(a,s,l,o){if(s){for(var c=a,u=a,d=u.parentNode.children[0],f=s,g=c.hierNode.modifier,y=u.hierNode.modifier,$=d.hierNode.modifier,x=f.hierNode.modifier;f=nextRight(f),u=nextLeft(u),f&&u;){c=nextRight(c),d=nextLeft(d),c.hierNode.ancestor=a;var N=f.hierNode.prelim+x-u.hierNode.prelim-y+o(f,u);N>0&&(moveSubtree(nextAncestor(f,a,l),a,N),y+=N,g+=N),x+=f.hierNode.modifier,y+=u.hierNode.modifier,g+=c.hierNode.modifier,$+=d.hierNode.modifier}f&&!nextRight(c)&&(c.hierNode.thread=f,c.hierNode.modifier+=x-g),u&&!nextLeft(d)&&(d.hierNode.thread=u,d.hierNode.modifier+=y-$,l=a)}return l}function nextRight(a){var s=a.children;return s.length&&a.isExpand?s[s.length-1]:a.hierNode.thread}function nextLeft(a){var s=a.children;return s.length&&a.isExpand?s[0]:a.hierNode.thread}function nextAncestor(a,s,l){return a.hierNode.ancestor.parentNode===s.parentNode?a.hierNode.ancestor:l}function moveSubtree(a,s,l){var o=l/(s.hierNode.i-a.hierNode.i);s.hierNode.change-=o,s.hierNode.shift+=l,s.hierNode.modifier+=l,s.hierNode.prelim+=l,a.hierNode.change+=o}function defaultSeparation(a,s){return a.parentNode===s.parentNode?1:2}var TreeEdgeShape=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),TreePath=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new TreeEdgeShape},s.prototype.buildPath=function(l,o){var c=o.childPoints,u=c.length,d=o.parentPoint,f=c[0],g=c[u-1];if(u===1){l.moveTo(d[0],d[1]),l.lineTo(f[0],f[1]);return}var y=o.orient,$=y==="TB"||y==="BT"?0:1,x=1-$,N=parsePercent(o.forkPosition,1),R=[];R[$]=d[$],R[x]=d[x]+(g[x]-d[x])*N,l.moveTo(d[0],d[1]),l.lineTo(R[0],R[1]),l.moveTo(f[0],f[1]),R[$]=f[$],l.lineTo(R[0],R[1]),R[$]=g[$],l.lineTo(R[0],R[1]),l.lineTo(g[0],g[1]);for(var j=1;j<u-1;j++){var ne=c[j];l.moveTo(ne[0],ne[1]),R[$]=ne[$],l.lineTo(R[0],R[1])}},s}(Path),TreeView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._mainGroup=new Group$3,l}return s.prototype.init=function(l,o){this._controller=new RoamController(o.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},s.prototype.render=function(l,o,c){var u=l.getData(),d=l.layoutInfo,f=this._mainGroup,g=l.get("layout");g==="radial"?(f.x=d.x+d.width/2,f.y=d.y+d.height/2):(f.x=d.x,f.y=d.y),this._updateViewCoordSys(l,c),this._updateController(l,o,c);var y=this._data;u.diff(y).add(function($){symbolNeedsDraw(u,$)&&updateNode(u,$,null,f,l)}).update(function($,x){var N=y.getItemGraphicEl(x);if(!symbolNeedsDraw(u,$)){N&&removeNode(y,x,N,f,l);return}updateNode(u,$,N,f,l)}).remove(function($){var x=y.getItemGraphicEl($);x&&removeNode(y,$,x,f,l)}).execute(),this._nodeScaleRatio=l.get("nodeScaleRatio"),this._updateNodeAndLinkScale(l),l.get("expandAndCollapse")===!0&&u.eachItemGraphicEl(function($,x){$.off("click").on("click",function(){c.dispatchAction({type:"treeExpandAndCollapse",seriesId:l.id,dataIndex:x})})}),this._data=u},s.prototype._updateViewCoordSys=function(l,o){var c=l.getData(),u=[];c.each(function(x){var N=c.getItemLayout(x);N&&!isNaN(N.x)&&!isNaN(N.y)&&u.push([+N.x,+N.y])});var d=[],f=[];fromPoints(u,d,f);var g=this._min,y=this._max;f[0]-d[0]===0&&(d[0]=g?g[0]:d[0]-1,f[0]=y?y[0]:f[0]+1),f[1]-d[1]===0&&(d[1]=g?g[1]:d[1]-1,f[1]=y?y[1]:f[1]+1);var $=l.coordinateSystem=new View;$.zoomLimit=l.get("scaleLimit"),$.setBoundingRect(d[0],d[1],f[0]-d[0],f[1]-d[1]),$.setCenter(l.get("center"),o),$.setZoom(l.get("zoom")),this.group.attr({x:$.x,y:$.y,scaleX:$.scaleX,scaleY:$.scaleY}),this._min=d,this._max=f},s.prototype._updateController=function(l,o,c){var u=this,d=this._controller,f=this._controllerHost,g=this.group;d.setPointerChecker(function(y,$,x){var N=g.getBoundingRect();return N.applyTransform(g.transform),N.contain($,x)&&!onIrrelevantElement(y,c,l)}),d.enable(l.get("roam")),f.zoomLimit=l.get("scaleLimit"),f.zoom=l.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(y){updateViewOnPan(f,y.dx,y.dy),c.dispatchAction({seriesId:l.id,type:"treeRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){updateViewOnZoom(f,y.scale,y.originX,y.originY),c.dispatchAction({seriesId:l.id,type:"treeRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),u._updateNodeAndLinkScale(l),c.updateLabelLayout()})},s.prototype._updateNodeAndLinkScale=function(l){var o=l.getData(),c=this._getNodeGlobalScale(l);o.eachItemGraphicEl(function(u,d){u.setSymbolScale(c)})},s.prototype._getNodeGlobalScale=function(l){var o=l.coordinateSystem;if(o.type!=="view")return 1;var c=this._nodeScaleRatio,u=o.scaleX||1,d=o.getZoom(),f=(d-1)*c+1;return f/u},s.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},s.type="tree",s}(ChartView);function symbolNeedsDraw(a,s){var l=a.getItemLayout(s);return l&&!isNaN(l.x)&&!isNaN(l.y)}function updateNode(a,s,l,o,c){var u=!l,d=a.tree.getNodeByDataIndex(s),f=d.getModel(),g=d.getVisual("style").fill,y=d.isExpand===!1&&d.children.length!==0?g:"#fff",$=a.tree.root,x=d.parentNode===$?d:d.parentNode||d,N=a.getItemGraphicEl(x.dataIndex),R=x.getLayout(),j=N?{x:N.__oldX,y:N.__oldY,rawX:N.__radialOldRawX,rawY:N.__radialOldRawY}:R,ne=d.getLayout();u?(l=new Symbol$1(a,s,null,{symbolInnerColor:y,useNameLabel:!0}),l.x=j.x,l.y=j.y):l.updateData(a,s,null,{symbolInnerColor:y,useNameLabel:!0}),l.__radialOldRawX=l.__radialRawX,l.__radialOldRawY=l.__radialRawY,l.__radialRawX=ne.rawX,l.__radialRawY=ne.rawY,o.add(l),a.setItemGraphicEl(s,l),l.__oldX=l.x,l.__oldY=l.y,updateProps$1(l,{x:ne.x,y:ne.y},c);var se=l.getSymbolPath();if(c.get("layout")==="radial"){var ce=$.children[0],fe=ce.getLayout(),ea=ce.children.length,ta=void 0,na=void 0;if(ne.x===fe.x&&d.isExpand===!0&&ce.children.length){var aa={x:(ce.children[0].getLayout().x+ce.children[ea-1].getLayout().x)/2,y:(ce.children[0].getLayout().y+ce.children[ea-1].getLayout().y)/2};ta=Math.atan2(aa.y-fe.y,aa.x-fe.x),ta<0&&(ta=Math.PI*2+ta),na=aa.x<fe.x,na&&(ta=ta-Math.PI)}else ta=Math.atan2(ne.y-fe.y,ne.x-fe.x),ta<0&&(ta=Math.PI*2+ta),d.children.length===0||d.children.length!==0&&d.isExpand===!1?(na=ne.x<fe.x,na&&(ta=ta-Math.PI)):(na=ne.x>fe.x,na||(ta=ta-Math.PI));var ia=na?"left":"right",sa=f.getModel("label"),ra=sa.get("rotate"),la=ra*(Math.PI/180),oa=se.getTextContent();oa&&(se.setTextConfig({position:sa.get("position")||ia,rotation:ra==null?-ta:la,origin:"center"}),oa.setStyle("verticalAlign","middle"))}var ca=f.get(["emphasis","focus"]),pa=ca==="relative"?concatArray(d.getAncestorsIndices(),d.getDescendantIndices()):ca==="ancestor"?d.getAncestorsIndices():ca==="descendant"?d.getDescendantIndices():null;pa&&(getECData(l).focus=pa),drawEdge(c,d,$,l,j,R,ne,o),l.__edge&&(l.onHoverStateChange=function(ua){if(ua!=="blur"){var da=d.parentNode&&a.getItemGraphicEl(d.parentNode.dataIndex);da&&da.hoverState===HOVER_STATE_BLUR||setStatesFlag(l.__edge,ua)}})}function drawEdge(a,s,l,o,c,u,d,f){var g=s.getModel(),y=a.get("edgeShape"),$=a.get("layout"),x=a.getOrient(),N=a.get(["lineStyle","curveness"]),R=a.get("edgeForkPosition"),j=g.getModel("lineStyle").getLineStyle(),ne=o.__edge;if(y==="curve")s.parentNode&&s.parentNode!==l&&(ne||(ne=o.__edge=new BezierCurve({shape:getEdgeShape($,x,N,c,c)})),updateProps$1(ne,{shape:getEdgeShape($,x,N,u,d)},a));else if(y==="polyline"&&$==="orthogonal"&&s!==l&&s.children&&s.children.length!==0&&s.isExpand===!0){for(var se=s.children,ce=[],fe=0;fe<se.length;fe++){var ea=se[fe].getLayout();ce.push([ea.x,ea.y])}ne||(ne=o.__edge=new TreePath({shape:{parentPoint:[d.x,d.y],childPoints:[[d.x,d.y]],orient:x,forkPosition:R}})),updateProps$1(ne,{shape:{parentPoint:[d.x,d.y],childPoints:ce}},a)}ne&&!(y==="polyline"&&!s.isExpand)&&(ne.useStyle(defaults({strokeNoScale:!0,fill:null},j)),setStatesStylesFromModel(ne,g,"lineStyle"),setDefaultStateProxy(ne),f.add(ne))}function removeNodeEdge(a,s,l,o,c){var u=s.tree.root,d=getSourceNode(u,a),f=d.source,g=d.sourceLayout,y=s.getItemGraphicEl(a.dataIndex);if(y){var $=s.getItemGraphicEl(f.dataIndex),x=$.__edge,N=y.__edge||(f.isExpand===!1||f.children.length===1?x:void 0),R=o.get("edgeShape"),j=o.get("layout"),ne=o.get("orient"),se=o.get(["lineStyle","curveness"]);N&&(R==="curve"?removeElement(N,{shape:getEdgeShape(j,ne,se,g,g),style:{opacity:0}},o,{cb:function(){l.remove(N)},removeOpt:c}):R==="polyline"&&o.get("layout")==="orthogonal"&&removeElement(N,{shape:{parentPoint:[g.x,g.y],childPoints:[[g.x,g.y]]},style:{opacity:0}},o,{cb:function(){l.remove(N)},removeOpt:c}))}}function getSourceNode(a,s){for(var l=s.parentNode===a?s:s.parentNode||s,o;o=l.getLayout(),o==null;)l=l.parentNode===a?l:l.parentNode||l;return{source:l,sourceLayout:o}}function removeNode(a,s,l,o,c){var u=a.tree.getNodeByDataIndex(s),d=a.tree.root,f=getSourceNode(d,u).sourceLayout,g={duration:c.get("animationDurationUpdate"),easing:c.get("animationEasingUpdate")};removeElement(l,{x:f.x+1,y:f.y+1},c,{cb:function(){o.remove(l),a.setItemGraphicEl(s,null)},removeOpt:g}),l.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:g}),u.children.forEach(function(y){removeNodeEdge(y,a,o,c,g)}),removeNodeEdge(u,a,o,c,g)}function getEdgeShape(a,s,l,o,c){var u,d,f,g,y,$,x,N;if(a==="radial"){y=o.rawX,x=o.rawY,$=c.rawX,N=c.rawY;var R=radialCoordinate(y,x),j=radialCoordinate(y,x+(N-x)*l),ne=radialCoordinate($,N+(x-N)*l),se=radialCoordinate($,N);return{x1:R.x||0,y1:R.y||0,x2:se.x||0,y2:se.y||0,cpx1:j.x||0,cpy1:j.y||0,cpx2:ne.x||0,cpy2:ne.y||0}}else y=o.x,x=o.y,$=c.x,N=c.y,(s==="LR"||s==="RL")&&(u=y+($-y)*l,d=x,f=$+(y-$)*l,g=N),(s==="TB"||s==="BT")&&(u=y,d=x+(N-x)*l,f=$,g=N+(x-N)*l);return{x1:y,y1:x,x2:$,y2:N,cpx1:u,cpy1:d,cpx2:f,cpy2:g}}var inner$e=makeInner();function linkSeriesData(a){var s=a.mainData,l=a.datas;l||(l={main:s},a.datasAttr={main:"data"}),a.datas=a.mainData=null,linkAll(s,l,a),each$f(l,function(o){each$f(s.TRANSFERABLE_METHODS,function(c){o.wrapMethod(c,curry$1(transferInjection,a))})}),s.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,a)),each$f(s.CHANGABLE_METHODS,function(o){s.wrapMethod(o,curry$1(changeInjection,a))}),assert(l[s.dataType]===s)}function transferInjection(a,s){if(isMainData(this)){var l=extend({},inner$e(this).datas);l[this.dataType]=s,linkAll(s,l,a)}else linkSingle(s,this.dataType,inner$e(this).mainData,a);return s}function changeInjection(a,s){return a.struct&&a.struct.update(),s}function cloneShallowInjection(a,s){return each$f(inner$e(s).datas,function(l,o){l!==s&&linkSingle(l.cloneShallow(),o,s,a)}),s}function getLinkedData(a){var s=inner$e(this).mainData;return a==null||s==null?s:inner$e(s).datas[a]}function getLinkedDataAll(){var a=inner$e(this).mainData;return a==null?[{data:a}]:map$1(keys(inner$e(a).datas),function(s){return{type:s,data:inner$e(a).datas[s]}})}function isMainData(a){return inner$e(a).mainData===a}function linkAll(a,s,l){inner$e(a).datas={},each$f(s,function(o,c){linkSingle(o,c,a,l)})}function linkSingle(a,s,l,o){inner$e(l).datas[s]=a,inner$e(a).mainData=l,a.dataType=s,o.struct&&(a[o.structAttr]=o.struct,o.struct[o.datasAttr[s]]=a),a.getLinkedData=getLinkedData,a.getLinkedDataAll=getLinkedDataAll}var TreeNode$1=function(){function a(s,l){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=s||"",this.hostTree=l}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(s,l,o){isFunction$2(s)&&(o=l,l=s,s=null),s=s||{},isString$2(s)&&(s={order:s});var c=s.order||"preorder",u=this[s.attr||"children"],d;c==="preorder"&&(d=l.call(o,this));for(var f=0;!d&&f<u.length;f++)u[f].eachNode(s,l,o);c==="postorder"&&l.call(o,this)},a.prototype.updateDepthAndHeight=function(s){var l=0;this.depth=s;for(var o=0;o<this.children.length;o++){var c=this.children[o];c.updateDepthAndHeight(s+1),c.height>l&&(l=c.height)}this.height=l+1},a.prototype.getNodeById=function(s){if(this.getId()===s)return this;for(var l=0,o=this.children,c=o.length;l<c;l++){var u=o[l].getNodeById(s);if(u)return u}},a.prototype.contains=function(s){if(s===this)return!0;for(var l=0,o=this.children,c=o.length;l<c;l++){var u=o[l].contains(s);if(u)return u}},a.prototype.getAncestors=function(s){for(var l=[],o=s?this:this.parentNode;o;)l.push(o),o=o.parentNode;return l.reverse(),l},a.prototype.getAncestorsIndices=function(){for(var s=[],l=this;l;)s.push(l.dataIndex),l=l.parentNode;return s.reverse(),s},a.prototype.getDescendantIndices=function(){var s=[];return this.eachNode(function(l){s.push(l.dataIndex)}),s},a.prototype.getValue=function(s){var l=this.hostTree.data;return l.getStore().get(l.getDimensionIndex(s||"value"),this.dataIndex)},a.prototype.setLayout=function(s,l){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,s,l)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(s){if(!(this.dataIndex<0)){var l=this.hostTree,o=l.data.getItemModel(this.dataIndex);return o.getModel(s)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(s,l){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,s,l)},a.prototype.getVisual=function(s){return this.hostTree.data.getItemVisual(this.dataIndex,s)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var s=this.parentNode.children,l=0;l<s.length;++l)if(s[l]===this)return l;return-1}return-1},a.prototype.isAncestorOf=function(s){for(var l=s.parentNode;l;){if(l===this)return!0;l=l.parentNode}return!1},a.prototype.isDescendantOf=function(s){return s!==this&&s.isAncestorOf(this)},a}(),Tree$1=function(){function a(s){this.type="tree",this._nodes=[],this.hostModel=s}return a.prototype.eachNode=function(s,l,o){this.root.eachNode(s,l,o)},a.prototype.getNodeByDataIndex=function(s){var l=this.data.getRawIndex(s);return this._nodes[l]},a.prototype.getNodeById=function(s){return this.root.getNodeById(s)},a.prototype.update=function(){for(var s=this.data,l=this._nodes,o=0,c=l.length;o<c;o++)l[o].dataIndex=-1;for(var o=0,c=s.count();o<c;o++)l[s.getRawIndex(o)].dataIndex=o},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(s,l,o){var c=new a(l),u=[],d=1;f(s);function f($,x){var N=$.value;d=Math.max(d,isArray$3(N)?N.length:1),u.push($);var R=new TreeNode$1(convertOptionIdName($.name,""),c);x?addChild(R,x):c.root=R,c._nodes.push(R);var j=$.children;if(j)for(var ne=0;ne<j.length;ne++)f(j[ne],R)}c.root.updateDepthAndHeight(0);var g=prepareSeriesDataSchema(u,{coordDimensions:["value"],dimensionsCount:d}).dimensions,y=new SeriesData(g,l);return y.initData(u),o&&o(y),linkSeriesData({mainData:y,struct:c,structAttr:"tree"}),c.update(),c},a}();function addChild(a,s){var l=s.children;a.parentNode!==s&&(l.push(a),a.parentNode=s)}function retrieveTargetInfo(a,s,l){if(a&&indexOf(s,a.type)>=0){var o=l.getData().tree.root,c=a.targetNode;if(isString$2(c)&&(c=o.getNodeById(c)),c&&o.contains(c))return{node:c};var u=a.targetNodeId;if(u!=null&&(c=o.getNodeById(u)))return{node:c}}}function getPathToRoot(a){for(var s=[];a;)a=a.parentNode,a&&s.push(a);return s.reverse()}function aboveViewRoot(a,s){var l=getPathToRoot(a);return indexOf(l,s)>=0}function wrapTreePathInfo(a,s){for(var l=[];a;){var o=a.dataIndex;l.push({name:a.name,dataIndex:o,value:s.getRawValue(o)}),a=a.parentNode}return l.reverse(),l}var TreeSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.hasSymbolVisual=!0,l.ignoreStyleOnData=!0,l}return s.prototype.getInitialData=function(l){var o={name:l.name,children:l.data},c=l.leaves||{},u=new Model(c,this,this.ecModel),d=Tree$1.createTree(o,this,f);function f(x){x.wrapMethod("getItemModel",function(N,R){var j=d.getNodeByDataIndex(R);return j&&j.children.length&&j.isExpand||(N.parentModel=u),N})}var g=0;d.eachNode("preorder",function(x){x.depth>g&&(g=x.depth)});var y=l.expandAndCollapse,$=y&&l.initialTreeDepth>=0?l.initialTreeDepth:g;return d.root.eachNode("preorder",function(x){var N=x.hostTree.data.getRawDataItem(x.dataIndex);x.isExpand=N&&N.collapsed!=null?!N.collapsed:x.depth<=$}),d.data},s.prototype.getOrient=function(){var l=this.get("orient");return l==="horizontal"?l="LR":l==="vertical"&&(l="TB"),l},s.prototype.setZoom=function(l){this.option.zoom=l},s.prototype.setCenter=function(l){this.option.center=l},s.prototype.formatTooltip=function(l,o,c){for(var u=this.getData().tree,d=u.root.children[0],f=u.getNodeByDataIndex(l),g=f.getValue(),y=f.name;f&&f!==d;)y=f.parentNode.name+"."+y,f=f.parentNode;return createTooltipMarkup("nameValue",{name:y,value:g,noValue:isNaN(g)||g==null})},s.prototype.getDataParams=function(l){var o=a.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(l);return o.treeAncestors=wrapTreePathInfo(c,this),o.collapsed=!c.isExpand,o},s.type="series.tree",s.layoutMode="box",s.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},s}(SeriesModel);function eachAfter(a,s,l){for(var o=[a],c=[],u;u=o.pop();)if(c.push(u),u.isExpand){var d=u.children;if(d.length)for(var f=0;f<d.length;f++)o.push(d[f])}for(;u=c.pop();)s(u,l)}function eachBefore(a,s){for(var l=[a],o;o=l.pop();)if(s(o),o.isExpand){var c=o.children;if(c.length)for(var u=c.length-1;u>=0;u--)l.push(c[u])}}function treeLayout(a,s){a.eachSeriesByType("tree",function(l){commonLayout(l,s)})}function commonLayout(a,s){var l=getViewRect$4(a,s);a.layoutInfo=l;var o=a.get("layout"),c=0,u=0,d=null;o==="radial"?(c=2*Math.PI,u=Math.min(l.height,l.width)/2,d=separation(function(ea,ta){return(ea.parentNode===ta.parentNode?1:2)/ea.depth})):(c=l.width,u=l.height,d=separation());var f=a.getData().tree.root,g=f.children[0];if(g){init(f),eachAfter(g,firstWalk,d),f.hierNode.modifier=-g.hierNode.prelim,eachBefore(g,secondWalk);var y=g,$=g,x=g;eachBefore(g,function(ea){var ta=ea.getLayout().x;ta<y.getLayout().x&&(y=ea),ta>$.getLayout().x&&($=ea),ea.depth>x.depth&&(x=ea)});var N=y===$?1:d(y,$)/2,R=N-y.getLayout().x,j=0,ne=0,se=0,ce=0;if(o==="radial")j=c/($.getLayout().x+N+R),ne=u/(x.depth-1||1),eachBefore(g,function(ea){se=(ea.getLayout().x+R)*j,ce=(ea.depth-1)*ne;var ta=radialCoordinate(se,ce);ea.setLayout({x:ta.x,y:ta.y,rawX:se,rawY:ce},!0)});else{var fe=a.getOrient();fe==="RL"||fe==="LR"?(ne=u/($.getLayout().x+N+R),j=c/(x.depth-1||1),eachBefore(g,function(ea){ce=(ea.getLayout().x+R)*ne,se=fe==="LR"?(ea.depth-1)*j:c-(ea.depth-1)*j,ea.setLayout({x:se,y:ce},!0)})):(fe==="TB"||fe==="BT")&&(j=c/($.getLayout().x+N+R),ne=u/(x.depth-1||1),eachBefore(g,function(ea){se=(ea.getLayout().x+R)*j,ce=fe==="TB"?(ea.depth-1)*ne:u-(ea.depth-1)*ne,ea.setLayout({x:se,y:ce},!0)}))}}}function treeVisual(a){a.eachSeriesByType("tree",function(s){var l=s.getData(),o=l.tree;o.eachNode(function(c){var u=c.getModel(),d=u.getModel("itemStyle").getItemStyle(),f=l.ensureUniqueItemVisual(c.dataIndex,"style");extend(f,d)})})}function installTreeAction(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(s,l){l.eachComponent({mainType:"series",subType:"tree",query:s},function(o){var c=s.dataIndex,u=o.getData().tree,d=u.getNodeByDataIndex(c);d.isExpand=!d.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(s,l,o){l.eachComponent({mainType:"series",subType:"tree",query:s},function(c){var u=c.coordinateSystem,d=updateCenterAndZoom(u,s,void 0,o);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom)})})}function install$I(a){a.registerChartView(TreeView),a.registerSeriesModel(TreeSeriesModel),a.registerLayout(treeLayout),a.registerVisual(treeVisual),installTreeAction(a)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(a){for(var s=0;s<actionTypes.length;s++)a.registerAction({type:actionTypes[s],update:"updateView"},noop);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(l,o){o.eachComponent({mainType:"series",subType:"treemap",query:l},c);function c(u,d){var f=["treemapZoomToNode","treemapRootToNode"],g=retrieveTargetInfo(l,f,u);if(g){var y=u.getViewRoot();y&&(l.direction=aboveViewRoot(y,g.node)?"rollUp":"drillDown"),u.resetViewRoot(g.node)}}})}function enableAriaDecalForTree(a){var s=a.getData(),l=s.tree,o={};l.eachNode(function(c){for(var u=c;u&&u.depth>1;)u=u.parentNode;var d=getDecalFromPalette(a.ecModel,u.name||u.dataIndex+"",o);c.setVisual("decal",d)})}var TreemapSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.preventUsingHoverLayer=!0,l}return s.prototype.getInitialData=function(l,o){var c={name:l.name,children:l.data};completeTreeValue$1(c);var u=l.levels||[],d=this.designatedVisualItemStyle={},f=new Model({itemStyle:d},this,o);u=l.levels=setDefault(u,o);var g=map$1(u||[],function(x){return new Model(x,f,o)},this),y=Tree$1.createTree(c,this,$);function $(x){x.wrapMethod("getItemModel",function(N,R){var j=y.getNodeByDataIndex(R),ne=j?g[j.depth]:null;return N.parentModel=ne||f,N})}return y.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.formatTooltip=function(l,o,c){var u=this.getData(),d=this.getRawValue(l),f=u.getName(l);return createTooltipMarkup("nameValue",{name:f,value:d})},s.prototype.getDataParams=function(l){var o=a.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(l);return o.treeAncestors=wrapTreePathInfo(c,this),o.treePathInfo=o.treeAncestors,o},s.prototype.setLayoutInfo=function(l){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,l)},s.prototype.mapIdToIndex=function(l){var o=this._idIndexMap;o||(o=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var c=o.get(l);return c==null&&o.set(l,c=this._idIndexMapCount++),c},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(l){l?this._viewRoot=l:l=this._viewRoot;var o=this.getRawData().tree.root;(!l||l!==o&&!o.contains(l))&&(this._viewRoot=o)},s.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},s.type="series.treemap",s.layoutMode="box",s.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},s}(SeriesModel);function completeTreeValue$1(a){var s=0;each$f(a.children,function(o){completeTreeValue$1(o);var c=o.value;isArray$3(c)&&(c=c[0]),s+=c});var l=a.value;isArray$3(l)&&(l=l[0]),(l==null||isNaN(l))&&(l=s),l<0&&(l=0),isArray$3(a.value)?a.value[0]=l:a.value=l}function setDefault(a,s){var l=normalizeToArray(s.get("color")),o=normalizeToArray(s.get(["aria","decal","decals"]));if(l){a=a||[];var c,u;each$f(a,function(f){var g=new Model(f),y=g.get("color"),$=g.get("decal");(g.get(["itemStyle","color"])||y&&y!=="none")&&(c=!0),(g.get(["itemStyle","decal"])||$&&$!=="none")&&(u=!0)});var d=a[0]||(a[0]={});return c||(d.color=l.slice()),!u&&o&&(d.decal=o.slice()),a}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb$1=function(){function a(s){this.group=new Group$3,s.add(this.group)}return a.prototype.render=function(s,l,o,c){var u=s.getModel("breadcrumb"),d=this.group;if(d.removeAll(),!(!u.get("show")||!o)){var f=u.getModel("itemStyle"),g=u.getModel("emphasis"),y=f.getModel("textStyle"),$=g.getModel(["itemStyle","textStyle"]),x={pos:{left:u.get("left"),right:u.get("right"),top:u.get("top"),bottom:u.get("bottom")},box:{width:l.getWidth(),height:l.getHeight()},emptyItemWidth:u.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(o,x,y),this._renderContent(s,x,f,g,y,$,c),positionElement(d,x.pos,x.box)}},a.prototype._prepare=function(s,l,o){for(var c=s;c;c=c.parentNode){var u=convertOptionIdName(c.getModel().get("name"),""),d=o.getTextRect(u),f=Math.max(d.width+TEXT_PADDING*2,l.emptyItemWidth);l.totalWidth+=f+ITEM_GAP,l.renderList.push({node:c,text:u,width:f})}},a.prototype._renderContent=function(s,l,o,c,u,d,f){for(var g=0,y=l.emptyItemWidth,$=s.get(["breadcrumb","height"]),x=getAvailableSize(l.pos,l.box),N=l.totalWidth,R=l.renderList,j=c.getModel("itemStyle").getItemStyle(),ne=R.length-1;ne>=0;ne--){var se=R[ne],ce=se.node,fe=se.width,ea=se.text;N>x.width&&(N-=fe-y,fe=y,ea=null);var ta=new Polygon({shape:{points:makeItemPoints(g,0,fe,$,ne===R.length-1,ne===0)},style:defaults(o.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle(u,{text:ea})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(f,ce)});ta.disableLabelAnimation=!0,ta.getTextContent().ensureState("emphasis").style=createTextStyle(d,{text:ea}),ta.ensureState("emphasis").style=j,toggleHoverEmphasis(ta,c.get("focus"),c.get("blurScope"),c.get("disabled")),this.group.add(ta),packEventData(ta,s,ce),g+=fe+ITEM_GAP}},a.prototype.remove=function(){this.group.removeAll()},a}();function makeItemPoints(a,s,l,o,c,u){var d=[[c?a:a-ARRAY_LENGTH,s],[a+l,s],[a+l,s+o],[c?a:a-ARRAY_LENGTH,s+o]];return!u&&d.splice(2,0,[a+l+ARRAY_LENGTH,s+o/2]),!c&&d.push([a,s+o/2]),d}function packEventData(a,s,l){getECData(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:s.componentIndex,seriesIndex:s.seriesIndex,seriesName:s.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:l&&l.dataIndex,name:l&&l.name},treePathInfo:l&&wrapTreePathInfo(l,s)}}var AnimationWrap=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(s,l,o,c,u){return this._elExistsMap[s.id]?!1:(this._elExistsMap[s.id]=!0,this._storage.push({el:s,target:l,duration:o,delay:c,easing:u}),!0)},a.prototype.finished=function(s){return this._finishedCallback=s,this},a.prototype.start=function(){for(var s=this,l=this._storage.length,o=function(){l--,l<=0&&(s._storage.length=0,s._elExistsMap={},s._finishedCallback&&s._finishedCallback())},c=0,u=this._storage.length;c<u;c++){var d=this._storage[c];d.el.animateTo(d.target,{duration:d.duration,delay:d.delay,easing:d.easing,setToFinal:!0,done:o,aborted:o})}return this},a}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(a){var s=getStateItemStyle(a);return s.stroke=s.fill=s.lineWidth=null,s},inner$d=makeInner(),TreemapView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._state="ready",l._storage=createStorage(),l}return s.prototype.render=function(l,o,c,u){var d=o.findComponents({mainType:"series",subType:"treemap",query:u});if(!(indexOf(d,l)<0)){this.seriesModel=l,this.api=c,this.ecModel=o;var f=["treemapZoomToNode","treemapRootToNode"],g=retrieveTargetInfo(u,f,l),y=u&&u.type,$=l.layoutInfo,x=!this._oldTree,N=this._storage,R=y==="treemapRootToNode"&&g&&N?{rootNodeGroup:N.nodeGroup[g.node.getRawIndex()],direction:u.direction}:null,j=this._giveContainerGroup($),ne=l.get("animation"),se=this._doRender(j,l,R);ne&&!x&&(!y||y==="treemapZoomToNode"||y==="treemapRootToNode")?this._doAnimation(j,se,l,R):se.renderFinally(),this._resetController(c),this._renderBreadcrumb(l,c,g)}},s.prototype._giveContainerGroup=function(l){var o=this._containerGroup;return o||(o=this._containerGroup=new Group$2,this._initEvents(o),this.group.add(o)),o.x=l.x,o.y=l.y,o},s.prototype._doRender=function(l,o,c){var u=o.getData().tree,d=this._oldTree,f=createStorage(),g=createStorage(),y=this._storage,$=[];function x(fe,ea,ta,na){return renderNode(o,g,y,c,f,$,fe,ea,ta,na)}ne(u.root?[u.root]:[],d&&d.root?[d.root]:[],l,u===d||!d,0);var N=se(y);if(this._oldTree=u,this._storage=g,this._controllerHost){var R=this.seriesModel.layoutInfo,j=u.root.getLayout();j.width===R.width&&j.height===R.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:f,willDeleteEls:N,renderFinally:ce};function ne(fe,ea,ta,na,aa){na?(ea=fe,each$f(fe,function(ra,la){!ra.isRemoved()&&sa(la,la)})):new DataDiffer(ea,fe,ia,ia).add(sa).update(sa).remove(curry$1(sa,null)).execute();function ia(ra){return ra.getId()}function sa(ra,la){var oa=ra!=null?fe[ra]:null,ca=la!=null?ea[la]:null,pa=x(oa,ca,ta,aa);pa&&ne(oa&&oa.viewChildren||[],ca&&ca.viewChildren||[],pa,na,aa+1)}}function se(fe){var ea=createStorage();return fe&&each$f(fe,function(ta,na){var aa=ea[na];each$f(ta,function(ia){ia&&(aa.push(ia),inner$d(ia).willDelete=!0)})}),ea}function ce(){each$f(N,function(fe){each$f(fe,function(ea){ea.parent&&ea.parent.remove(ea)})}),each$f($,function(fe){fe.invisible=!0,fe.dirty()})}},s.prototype._doAnimation=function(l,o,c,u){var d=c.get("animationDurationUpdate"),f=c.get("animationEasing"),g=(isFunction$2(d)?0:d)||0,y=(isFunction$2(f)?null:f)||"cubicOut",$=createWrap();each$f(o.willDeleteEls,function(x,N){each$f(x,function(R,j){if(!R.invisible){var ne=R.parent,se,ce=inner$d(ne);if(u&&u.direction==="drillDown")se=ne===u.rootNodeGroup?{shape:{x:0,y:0,width:ce.nodeWidth,height:ce.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var fe=0,ea=0;ce.willDelete||(fe=ce.nodeWidth/2,ea=ce.nodeHeight/2),se=N==="nodeGroup"?{x:fe,y:ea,style:{opacity:0}}:{shape:{x:fe,y:ea,width:0,height:0},style:{opacity:0}}}se&&$.add(R,se,g,0,y)}})}),each$f(this._storage,function(x,N){each$f(x,function(R,j){var ne=o.lastsForAnimation[N][j],se={};ne&&(R instanceof Group$3?ne.oldX!=null&&(se.x=R.x,se.y=R.y,R.x=ne.oldX,R.y=ne.oldY):(ne.oldShape&&(se.shape=extend({},R.shape),R.setShape(ne.oldShape)),ne.fadein?(R.setStyle("opacity",0),se.style={opacity:1}):R.style.opacity!==1&&(se.style={opacity:1})),$.add(R,se,g,0,y))})},this),this._state="animating",$.finished(bind$1(function(){this._state="ready",o.renderFinally()},this)).start()},s.prototype._resetController=function(l){var o=this._controller,c=this._controllerHost;c||(this._controllerHost={target:this.group},c=this._controllerHost),o||(o=this._controller=new RoamController(l.getZr()),o.enable(this.seriesModel.get("roam")),c.zoomLimit=this.seriesModel.get("scaleLimit"),c.zoom=this.seriesModel.get("zoom"),o.on("pan",bind$1(this._onPan,this)),o.on("zoom",bind$1(this._onZoom,this)));var u=new BoundingRect(0,0,l.getWidth(),l.getHeight());o.setPointerChecker(function(d,f,g){return u.contain(f,g)})},s.prototype._clearController=function(){var l=this._controller;this._controllerHost=null,l&&(l.dispose(),l=null)},s.prototype._onPan=function(l){if(this._state!=="animating"&&(Math.abs(l.dx)>DRAG_THRESHOLD||Math.abs(l.dy)>DRAG_THRESHOLD)){var o=this.seriesModel.getData().tree.root;if(!o)return;var c=o.getLayout();if(!c)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:c.x+l.dx,y:c.y+l.dy,width:c.width,height:c.height}})}},s.prototype._onZoom=function(l){var o=l.originX,c=l.originY,u=l.scale;if(this._state!=="animating"){var d=this.seriesModel.getData().tree.root;if(!d)return;var f=d.getLayout();if(!f)return;var g=new BoundingRect(f.x,f.y,f.width,f.height),y=null,$=this._controllerHost;y=$.zoomLimit;var x=$.zoom=$.zoom||1;if(x*=u,y){var N=y.min||0,R=y.max||1/0;x=Math.max(Math.min(R,x),N)}var j=x/$.zoom;$.zoom=x;var ne=this.seriesModel.layoutInfo;o-=ne.x,c-=ne.y;var se=create$1();translate(se,se,[-o,-c]),scale$1(se,se,[j,j]),translate(se,se,[o,c]),g.applyTransform(se),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:g.x,y:g.y,width:g.width,height:g.height}})}},s.prototype._initEvents=function(l){var o=this;l.on("click",function(c){if(o._state==="ready"){var u=o.seriesModel.get("nodeClick",!0);if(u){var d=o.findTarget(c.offsetX,c.offsetY);if(d){var f=d.node;if(f.getLayout().isLeafRoot)o._rootToNode(d);else if(u==="zoomToNode")o._zoomToNode(d);else if(u==="link"){var g=f.hostTree.data.getItemModel(f.dataIndex),y=g.get("link",!0),$=g.get("target",!0)||"blank";y&&windowOpen(y,$)}}}}},this)},s.prototype._renderBreadcrumb=function(l,o,c){var u=this;c||(c=l.get("leafDepth",!0)!=null?{node:l.getViewRoot()}:this.findTarget(o.getWidth()/2,o.getHeight()/2),c||(c={node:l.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb$1(this.group))).render(l,o,c.node,function(d){u._state!=="animating"&&(aboveViewRoot(l.getViewRoot(),d)?u._rootToNode({node:d}):u._zoomToNode({node:d}))})},s.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},s.prototype.dispose=function(){this._clearController()},s.prototype._zoomToNode=function(l){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:l.node})},s.prototype._rootToNode=function(l){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:l.node})},s.prototype.findTarget=function(l,o){var c,u=this.seriesModel.getViewRoot();return u.eachNode({attr:"viewChildren",order:"preorder"},function(d){var f=this._storage.background[d.getRawIndex()];if(f){var g=f.transformCoordToLocal(l,o),y=f.shape;if(y.x<=g[0]&&g[0]<=y.x+y.width&&y.y<=g[1]&&g[1]<=y.y+y.height)c={node:d,offsetX:g[0],offsetY:g[1]};else return!1}},this),c},s.type="treemap",s}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(a,s,l,o,c,u,d,f,g,y){if(!d)return;var $=d.getLayout(),x=a.getData(),N=d.getModel();if(x.setItemGraphicEl(d.dataIndex,null),!$||!$.isInView)return;var R=$.width,j=$.height,ne=$.borderWidth,se=$.invisible,ce=d.getRawIndex(),fe=f&&f.getRawIndex(),ea=d.viewChildren,ta=$.upperHeight,na=ea&&ea.length,aa=N.getModel("itemStyle"),ia=N.getModel(["emphasis","itemStyle"]),sa=N.getModel(["blur","itemStyle"]),ra=N.getModel(["select","itemStyle"]),la=aa.get("borderRadius")||0,oa=Ea("nodeGroup",Group$2);if(!oa)return;if(g.add(oa),oa.x=$.x||0,oa.y=$.y||0,oa.markRedraw(),inner$d(oa).nodeWidth=R,inner$d(oa).nodeHeight=j,$.isAboveViewRoot)return oa;var ca=Ea("background",Rect$1,y,Z2_BG);ca&&ma(oa,ca,na&&$.upperLabelHeight);var pa=N.getModel("emphasis"),ua=pa.get("focus"),da=pa.get("blurScope"),ha=pa.get("disabled"),ga=ua==="ancestor"?d.getAncestorsIndices():ua==="descendant"?d.getDescendantIndices():ua;if(na)isHighDownDispatcher(oa)&&setAsHighDownDispatcher(oa,!1),ca&&(setAsHighDownDispatcher(ca,!ha),x.setItemGraphicEl(d.dataIndex,ca),enableHoverFocus(ca,ga,da));else{var fa=Ea("content",Rect$1,y,Z2_CONTENT);fa&&va(oa,fa),ca.disableMorphing=!0,ca&&isHighDownDispatcher(ca)&&setAsHighDownDispatcher(ca,!1),setAsHighDownDispatcher(oa,!ha),x.setItemGraphicEl(d.dataIndex,oa),enableHoverFocus(oa,ga,da)}return oa;function ma(Pa,Da,Ta){var Ba=getECData(Da);if(Ba.dataIndex=d.dataIndex,Ba.seriesIndex=a.seriesIndex,Da.setShape({x:0,y:0,width:R,height:j,r:la}),se)ka(Da);else{Da.invisible=!1;var wa=d.getVisual("style"),Oa=wa.stroke,Aa=getItemStyleNormal(aa);Aa.fill=Oa;var Sa=getStateItemStyle(ia);Sa.fill=ia.get("borderColor");var Fa=getStateItemStyle(sa);Fa.fill=sa.get("borderColor");var Ia=getStateItemStyle(ra);if(Ia.fill=ra.get("borderColor"),Ta){var Ga=R-2*ne;ya(Da,Oa,wa.opacity,{x:ne,y:0,width:Ga,height:ta})}else Da.removeTextContent();Da.setStyle(Aa),Da.ensureState("emphasis").style=Sa,Da.ensureState("blur").style=Fa,Da.ensureState("select").style=Ia,setDefaultStateProxy(Da)}Pa.add(Da)}function va(Pa,Da){var Ta=getECData(Da);Ta.dataIndex=d.dataIndex,Ta.seriesIndex=a.seriesIndex;var Ba=Math.max(R-2*ne,0),wa=Math.max(j-2*ne,0);if(Da.culling=!0,Da.setShape({x:ne,y:ne,width:Ba,height:wa,r:la}),se)ka(Da);else{Da.invisible=!1;var Oa=d.getVisual("style"),Aa=Oa.fill,Sa=getItemStyleNormal(aa);Sa.fill=Aa,Sa.decal=Oa.decal;var Fa=getStateItemStyle(ia),Ia=getStateItemStyle(sa),Ga=getStateItemStyle(ra);ya(Da,Aa,Oa.opacity,null),Da.setStyle(Sa),Da.ensureState("emphasis").style=Fa,Da.ensureState("blur").style=Ia,Da.ensureState("select").style=Ga,setDefaultStateProxy(Da)}Pa.add(Da)}function ka(Pa){!Pa.invisible&&u.push(Pa)}function ya(Pa,Da,Ta,Ba){var wa=N.getModel(Ba?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),Oa=convertOptionIdName(N.get("name"),null),Aa=wa.getShallow("show");setLabelStyle(Pa,getLabelStatesModels(N,Ba?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Aa?Oa:null,inheritColor:Da,defaultOpacity:Ta,labelFetcher:a,labelDataIndex:d.dataIndex});var Sa=Pa.getTextContent();if(Sa){var Fa=Sa.style,Ia=normalizeCssArray$1(Fa.padding||0);Ba&&(Pa.setTextConfig({layoutRect:Ba}),Sa.disableLabelLayout=!0),Sa.beforeUpdate=function(){var Ya=Math.max((Ba?Ba.width:Pa.shape.width)-Ia[1]-Ia[3],0),Va=Math.max((Ba?Ba.height:Pa.shape.height)-Ia[0]-Ia[2],0);(Fa.width!==Ya||Fa.height!==Va)&&Sa.setStyle({width:Ya,height:Va})},Fa.truncateMinChar=2,Fa.lineOverflow="truncate",ba(Fa,Ba,$);var Ga=Sa.getState("emphasis");ba(Ga?Ga.style:null,Ba,$)}}function ba(Pa,Da,Ta){var Ba=Pa?Pa.text:null;if(!Da&&Ta.isLeafRoot&&Ba!=null){var wa=a.get("drillDownIcon",!0);Pa.text=wa?wa+" "+Ba:Ba}}function Ea(Pa,Da,Ta,Ba){var wa=fe!=null&&l[Pa][fe],Oa=c[Pa];return wa?(l[Pa][fe]=null,Ca(Oa,wa)):se||(wa=new Da,wa instanceof Displayable&&(wa.z2=calculateZ2(Ta,Ba)),$a(Oa,wa)),s[Pa][ce]=wa}function Ca(Pa,Da){var Ta=Pa[ce]={};Da instanceof Group$2?(Ta.oldX=Da.x,Ta.oldY=Da.y):Ta.oldShape=extend({},Da.shape)}function $a(Pa,Da){var Ta=Pa[ce]={},Ba=d.parentNode,wa=Da instanceof Group$3;if(Ba&&(!o||o.direction==="drillDown")){var Oa=0,Aa=0,Sa=c.background[Ba.getRawIndex()];!o&&Sa&&Sa.oldShape&&(Oa=Sa.oldShape.width,Aa=Sa.oldShape.height),wa?(Ta.oldX=0,Ta.oldY=Aa):Ta.oldShape={x:Oa,y:Aa,width:0,height:0}}Ta.fadein=!wa}}function calculateZ2(a,s){return a*Z2_BASE+s}var each$c=each$f,isObject$2=isObject$5,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function a(s){var l=s.mappingMethod,o=s.type,c=this.option=clone$4(s);this.type=o,this.mappingMethod=l,this._normalizeData=normalizers[l];var u=a.visualHandlers[o];this.applyVisual=u.applyVisual,this.getColorMapper=u.getColorMapper,this._normalizedToVisual=u._normalizedToVisual[l],l==="piecewise"?(normalizeVisualRange(c),preprocessForPiecewise(c)):l==="category"?c.categories?preprocessForSpecifiedCategory(c):normalizeVisualRange(c,!0):(assert(l!=="linear"||c.dataExtent),normalizeVisualRange(c))}return a.prototype.mapValueToVisual=function(s){var l=this._normalizeData(s);return this._normalizedToVisual(l,s)},a.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},a.listVisualTypes=function(){return keys(a.visualHandlers)},a.isValidType=function(s){return a.visualHandlers.hasOwnProperty(s)},a.eachVisual=function(s,l,o){isObject$5(s)?each$f(s,l,o):l.call(o,s)},a.mapVisual=function(s,l,o){var c,u=isArray$3(s)?[]:isObject$5(s)?{}:(c=!0,null);return a.eachVisual(s,function(d,f){var g=l.call(o,d,f);c?u=g:u[f]=g}),u},a.retrieveVisuals=function(s){var l={},o;return s&&each$c(a.visualHandlers,function(c,u){s.hasOwnProperty(u)&&(l[u]=s[u],o=!0)}),o?l:null},a.prepareVisualTypes=function(s){if(isArray$3(s))s=s.slice();else if(isObject$2(s)){var l=[];each$c(s,function(o,c){l.push(c)}),s=l}else return[];return s.sort(function(o,c){return c==="color"&&o!=="color"&&o.indexOf("color")===0?1:-1}),s},a.dependsOn=function(s,l){return l==="color"?!!(s&&s.indexOf(l)===0):s===l},a.findPieceIndex=function(s,l,o){for(var c,u=1/0,d=0,f=l.length;d<f;d++){var g=l[d].value;if(g!=null){if(g===s||isString$2(g)&&g===s+"")return d;o&&N(g,d)}}for(var d=0,f=l.length;d<f;d++){var y=l[d],$=y.interval,x=y.close;if($){if($[0]===-1/0){if(littleThan(x[1],s,$[1]))return d}else if($[1]===1/0){if(littleThan(x[0],$[0],s))return d}else if(littleThan(x[0],$[0],s)&&littleThan(x[1],s,$[1]))return d;o&&N($[0],d),o&&N($[1],d)}}if(o)return s===1/0?l.length-1:s===-1/0?0:c;function N(R,j){var ne=Math.abs(R-s);ne<u&&(u=ne,c=j)}},a.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var s=this.option;return bind$1(s.mappingMethod==="category"?function(l,o){return!o&&(l=this._normalizeData(l)),doMapCategory.call(this,l)}:function(l,o,c){var u=!!c;return!o&&(l=this._normalizeData(l)),c=fastLerp(l,s.parsedVisual,c),u?c:stringify(c,"rgba")},this)},_normalizedToVisual:{linear:function(s){return stringify(fastLerp(s,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(s,l){var o=getSpecifiedVisual.call(this,l);return o==null&&(o=stringify(fastLerp(s,this.option.parsedVisual),"rgba")),o},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(s,l){return modifyHSL(s,l)}),colorSaturation:makePartialColorVisualHandler(function(s,l){return modifyHSL(s,null,l)}),colorLightness:makePartialColorVisualHandler(function(s,l){return modifyHSL(s,null,null,l)}),colorAlpha:makePartialColorVisualHandler(function(s,l){return modifyAlpha(s,l)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(s,l,o){var c=this.mapValueToVisual(s);o("symbol",c)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(s,l){var o=getSpecifiedVisual.call(this,l);return o==null&&(o=doMapToArray.call(this,s)),o},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},a}();function preprocessForPiecewise(a){var s=a.pieceList;a.hasSpecialVisual=!1,each$f(s,function(l,o){l.originIndex=o,l.visual!=null&&(a.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(a){var s=a.categories,l=a.categoryMap={},o=a.visual;if(each$c(s,function(d,f){l[d]=f}),!isArray$3(o)){var c=[];isObject$5(o)?each$c(o,function(d,f){var g=l[f];c[g??CATEGORY_DEFAULT_VISUAL_INDEX]=d}):c[CATEGORY_DEFAULT_VISUAL_INDEX]=o,o=setVisualToOption(a,c)}for(var u=s.length-1;u>=0;u--)o[u]==null&&(delete l[s[u]],s.pop())}function normalizeVisualRange(a,s){var l=a.visual,o=[];isObject$5(l)?each$c(l,function(u){o.push(u)}):l!=null&&o.push(l);var c={color:1,symbol:1};!s&&o.length===1&&!c.hasOwnProperty(a.type)&&(o[1]=o[0]),setVisualToOption(a,o)}function makePartialColorVisualHandler(a){return{applyVisual:function(s,l,o){var c=this.mapValueToVisual(s);o("color",a(l("color"),c))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(a){var s=this.option.visual;return s[Math.round(linearMap$2(a,[0,1],[0,s.length-1],!0))]||{}}function makeApplyVisual(a){return function(s,l,o){o(a,this.mapValueToVisual(s))}}function doMapCategory(a){var s=this.option.visual;return s[this.option.loop&&a!==CATEGORY_DEFAULT_VISUAL_INDEX?a%s.length:a]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(a){return{linear:function(s){return linearMap$2(s,a,this.option.visual,!0)},category:doMapCategory,piecewise:function(s,l){var o=getSpecifiedVisual.call(this,l);return o==null&&(o=linearMap$2(s,a,this.option.visual,!0)),o},fixed:doMapFixed}}function getSpecifiedVisual(a){var s=this.option,l=s.pieceList;if(s.hasSpecialVisual){var o=VisualMapping.findPieceIndex(a,l),c=l[o];if(c&&c.visual)return c.visual[this.type]}}function setVisualToOption(a,s){return a.visual=s,a.type==="color"&&(a.parsedVisual=map$1(s,function(l){var o=parse(l);return o||[0,0,0,1]})),s}var normalizers={linear:function(a){return linearMap$2(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var s=this.option.pieceList,l=VisualMapping.findPieceIndex(a,s,!0);if(l!=null)return linearMap$2(l,[0,s.length-1],[0,1],!0)},category:function(a){var s=this.option.categories?this.option.categoryMap[a]:a;return s??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop};function littleThan(a,s,l){return a?s<=l:s<l}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(a){var s=a.getData().tree,l=s.root;l.isRemoved()||travelTree(l,{},a.getViewRoot().getAncestors(),a)}};function travelTree(a,s,l,o){var c=a.getModel(),u=a.getLayout(),d=a.hostTree.data;if(!(!u||u.invisible||!u.isInView)){var f=c.getModel(ITEM_STYLE_NORMAL),g=buildVisuals(f,s,o),y=d.ensureUniqueItemVisual(a.dataIndex,"style"),$=f.get("borderColor"),x=f.get("borderColorSaturation"),N;x!=null&&(N=calculateColor(g),$=calculateBorderColor(x,N)),y.stroke=$;var R=a.viewChildren;if(!R||!R.length)N=calculateColor(g),y.fill=N;else{var j=buildVisualMapping(a,c,u,f,g,R);each$f(R,function(ne,se){if(ne.depth>=l.length||ne===l[ne.depth]){var ce=mapVisual$1(c,g,ne,se,j,o);travelTree(ne,ce,l,o)}})}}}function buildVisuals(a,s,l){var o=extend({},s),c=l.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(u){c[u]=s[u];var d=a.get(u);c[u]=null,d!=null&&(o[u]=d)}),o}function calculateColor(a){var s=getValueVisualDefine(a,"color");if(s){var l=getValueVisualDefine(a,"colorAlpha"),o=getValueVisualDefine(a,"colorSaturation");return o&&(s=modifyHSL(s,null,null,o)),l&&(s=modifyAlpha(s,l)),s}}function calculateBorderColor(a,s){return s!=null?modifyHSL(s,null,null,a):null}function getValueVisualDefine(a,s){var l=a[s];if(l!=null&&l!=="none")return l}function buildVisualMapping(a,s,l,o,c,u){if(!(!u||!u.length)){var d=getRangeVisual(s,"color")||c.color!=null&&c.color!=="none"&&(getRangeVisual(s,"colorAlpha")||getRangeVisual(s,"colorSaturation"));if(d){var f=s.get("visualMin"),g=s.get("visualMax"),y=l.dataExtent.slice();f!=null&&f<y[0]&&(y[0]=f),g!=null&&g>y[1]&&(y[1]=g);var $=s.get("colorMappingBy"),x={type:d.name,dataExtent:y,visual:d.range};x.type==="color"&&($==="index"||$==="id")?(x.mappingMethod="category",x.loop=!0):x.mappingMethod="linear";var N=new VisualMapping(x);return inner$c(N).drColorMappingBy=$,N}}}function getRangeVisual(a,s){var l=a.get(s);return isArray$3(l)&&l.length?{name:s,range:l}:null}function mapVisual$1(a,s,l,o,c,u){var d=extend({},s);if(c){var f=c.type,g=f==="color"&&inner$c(c).drColorMappingBy,y=g==="index"?o:g==="id"?u.mapIdToIndex(l.getId()):l.getValue(a.get("visualDimension"));d[f]=c.mapValueToVisual(y)}return d}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(a,s,l,o){var c=l.getWidth(),u=l.getHeight(),d=a.option,f=getLayoutRect(a.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()}),g=d.size||[],y=parsePercent(retrieveValue(f.width,g[0]),c),$=parsePercent(retrieveValue(f.height,g[1]),u),x=o&&o.type,N=["treemapZoomToNode","treemapRootToNode"],R=retrieveTargetInfo(o,N,a),j=x==="treemapRender"||x==="treemapMove"?o.rootRect:null,ne=a.getViewRoot(),se=getPathToRoot(ne);if(x!=="treemapMove"){var ce=x==="treemapZoomToNode"?estimateRootSize(a,R,ne,y,$):j?[j.width,j.height]:[y,$],fe=d.sort;fe&&fe!=="asc"&&fe!=="desc"&&(fe="desc");var ea={squareRatio:d.squareRatio,sort:fe,leafDepth:d.leafDepth};ne.hostTree.clearLayouts();var ta={x:0,y:0,width:ce[0],height:ce[1],area:ce[0]*ce[1]};ne.setLayout(ta),squarify(ne,ea,!1,0),ta=ne.getLayout(),each$b(se,function(aa,ia){var sa=(se[ia+1]||ne).getValue();aa.setLayout(extend({dataExtent:[sa,sa],borderWidth:0,upperHeight:0},ta))})}var na=a.getData().tree.root;na.setLayout(calculateRootPosition(f,j,R),!0),a.setLayoutInfo(f),prunning(na,new BoundingRect(-f.x,-f.y,c,u),se,ne,0)}};function squarify(a,s,l,o){var c,u;if(!a.isRemoved()){var d=a.getLayout();c=d.width,u=d.height;var f=a.getModel(),g=f.get(PATH_BORDER_WIDTH),y=f.get(PATH_GAP_WIDTH)/2,$=getUpperLabelHeight(f),x=Math.max(g,$),N=g-y,R=x-y;a.setLayout({borderWidth:g,upperHeight:x,upperLabelHeight:$},!0),c=mathMax$3(c-2*N,0),u=mathMax$3(u-N-R,0);var j=c*u,ne=initChildren$1(a,f,j,s,l,o);if(ne.length){var se={x:N,y:R,width:c,height:u},ce=mathMin$3(c,u),fe=1/0,ea=[];ea.area=0;for(var ta=0,na=ne.length;ta<na;){var aa=ne[ta];ea.push(aa),ea.area+=aa.getLayout().area;var ia=worst(ea,ce,s.squareRatio);ia<=fe?(ta++,fe=ia):(ea.area-=ea.pop().getLayout().area,position(ea,ce,se,y,!1),ce=mathMin$3(se.width,se.height),ea.length=ea.area=0,fe=1/0)}if(ea.length&&position(ea,ce,se,y,!0),!l){var sa=f.get("childrenVisibleMin");sa!=null&&j<sa&&(l=!0)}for(var ta=0,na=ne.length;ta<na;ta++)squarify(ne[ta],s,l,o+1)}}}function initChildren$1(a,s,l,o,c,u){var d=a.children||[],f=o.sort;f!=="asc"&&f!=="desc"&&(f=null);var g=o.leafDepth!=null&&o.leafDepth<=u;if(c&&!g)return a.viewChildren=[];d=filter(d,function(R){return!R.isRemoved()}),sort$1(d,f);var y=statistic(s,d,f);if(y.sum===0)return a.viewChildren=[];if(y.sum=filterByThreshold(s,l,y.sum,f,d),y.sum===0)return a.viewChildren=[];for(var $=0,x=d.length;$<x;$++){var N=d[$].getValue()/y.sum*l;d[$].setLayout({area:N})}return g&&(d.length&&a.setLayout({isLeafRoot:!0},!0),d.length=0),a.viewChildren=d,a.setLayout({dataExtent:y.dataExtent},!0),d}function filterByThreshold(a,s,l,o,c){if(!o)return l;for(var u=a.get("visibleMin"),d=c.length,f=d,g=d-1;g>=0;g--){var y=c[o==="asc"?d-g-1:g].getValue();y/l*s<u&&(f=g,l-=y)}return o==="asc"?c.splice(0,d-f):c.splice(f,d-f),l}function sort$1(a,s){return s&&a.sort(function(l,o){var c=s==="asc"?l.getValue()-o.getValue():o.getValue()-l.getValue();return c===0?s==="asc"?l.dataIndex-o.dataIndex:o.dataIndex-l.dataIndex:c}),a}function statistic(a,s,l){for(var o=0,c=0,u=s.length;c<u;c++)o+=s[c].getValue();var d=a.get("visualDimension"),f;return!s||!s.length?f=[NaN,NaN]:d==="value"&&l?(f=[s[s.length-1].getValue(),s[0].getValue()],l==="asc"&&f.reverse()):(f=[1/0,-1/0],each$b(s,function(g){var y=g.getValue(d);y<f[0]&&(f[0]=y),y>f[1]&&(f[1]=y)})),{sum:o,dataExtent:f}}function worst(a,s,l){for(var o=0,c=1/0,u=0,d=void 0,f=a.length;u<f;u++)d=a[u].getLayout().area,d&&(d<c&&(c=d),d>o&&(o=d));var g=a.area*a.area,y=s*s*l;return g?mathMax$3(y*o/g,g/(y*c)):1/0}function position(a,s,l,o,c){var u=s===l.width?0:1,d=1-u,f=["x","y"],g=["width","height"],y=l[f[u]],$=s?a.area/s:0;(c||$>l[g[d]])&&($=l[g[d]]);for(var x=0,N=a.length;x<N;x++){var R=a[x],j={},ne=$?R.getLayout().area/$:0,se=j[g[d]]=mathMax$3($-2*o,0),ce=l[f[u]]+l[g[u]]-y,fe=x===N-1||ce<ne?ce:ne,ea=j[g[u]]=mathMax$3(fe-2*o,0);j[f[d]]=l[f[d]]+mathMin$3(o,se/2),j[f[u]]=y+mathMin$3(o,ea/2),y+=fe,R.setLayout(j,!0)}l[f[d]]+=$,l[g[d]]-=$}function estimateRootSize(a,s,l,o,c){var u=(s||{}).node,d=[o,c];if(!u||u===l)return d;for(var f,g=o*c,y=g*a.option.zoomToNodeRatio;f=u.parentNode;){for(var $=0,x=f.children,N=0,R=x.length;N<R;N++)$+=x[N].getValue();var j=u.getValue();if(j===0)return d;y*=$/j;var ne=f.getModel(),se=ne.get(PATH_BORDER_WIDTH),ce=Math.max(se,getUpperLabelHeight(ne));y+=4*se*se+(3*se+ce)*Math.pow(y,.5),y>MAX_SAFE_INTEGER&&(y=MAX_SAFE_INTEGER),u=f}y<g&&(y=g);var fe=Math.pow(y/g,.5);return[o*fe,c*fe]}function calculateRootPosition(a,s,l){if(s)return{x:s.x,y:s.y};var o={x:0,y:0};if(!l)return o;var c=l.node,u=c.getLayout();if(!u)return o;for(var d=[u.width/2,u.height/2],f=c;f;){var g=f.getLayout();d[0]+=g.x,d[1]+=g.y,f=f.parentNode}return{x:a.width/2-d[0],y:a.height/2-d[1]}}function prunning(a,s,l,o,c){var u=a.getLayout(),d=l[c],f=d&&d===a;if(!(d&&!f||c===l.length&&a!==o)){a.setLayout({isInView:!0,invisible:!f&&!s.intersect(u),isAboveViewRoot:f},!0);var g=new BoundingRect(s.x-u.x,s.y-u.y,s.width,s.height);each$b(a.viewChildren||[],function(y){prunning(y,g,l,o,c+1)})}}function getUpperLabelHeight(a){return a.get(PATH_UPPER_LABEL_SHOW)?a.get(PATH_UPPER_LABEL_HEIGHT):0}function install$H(a){a.registerSeriesModel(TreemapSeriesModel),a.registerChartView(TreemapView),a.registerVisual(treemapVisual),a.registerLayout(treemapLayout),installTreemapAction(a)}function categoryFilter(a){var s=a.findComponents({mainType:"legend"});!s||!s.length||a.eachSeriesByType("graph",function(l){var o=l.getCategoriesData(),c=l.getGraph(),u=c.data,d=o.mapArray(o.getName);u.filterSelf(function(f){var g=u.getItemModel(f),y=g.getShallow("category");if(y!=null){isNumber$2(y)&&(y=d[y]);for(var $=0;$<s.length;$++)if(!s[$].isSelected(y))return!1}return!0})})}function categoryVisual(a){var s={};a.eachSeriesByType("graph",function(l){var o=l.getCategoriesData(),c=l.getData(),u={};o.each(function(d){var f=o.getName(d);u["ec-"+f]=d;var g=o.getItemModel(d),y=g.getModel("itemStyle").getItemStyle();y.fill||(y.fill=l.getColorFromPalette(f,s)),o.setItemVisual(d,"style",y);for(var $=["symbol","symbolSize","symbolKeepAspect"],x=0;x<$.length;x++){var N=g.getShallow($[x],!0);N!=null&&o.setItemVisual(d,$[x],N)}}),o.count()&&c.each(function(d){var f=c.getItemModel(d),g=f.getShallow("category");if(g!=null){isString$2(g)&&(g=u["ec-"+g]);var y=o.getItemVisual(g,"style"),$=c.ensureUniqueItemVisual(d,"style");extend($,y);for(var x=["symbol","symbolSize","symbolKeepAspect"],N=0;N<x.length;N++)c.setItemVisual(d,x[N],o.getItemVisual(g,x[N]))}})})}function normalize$1(a){return a instanceof Array||(a=[a,a]),a}function graphEdgeVisual(a){a.eachSeriesByType("graph",function(s){var l=s.getGraph(),o=s.getEdgeData(),c=normalize$1(s.get("edgeSymbol")),u=normalize$1(s.get("edgeSymbolSize"));o.setVisual("fromSymbol",c&&c[0]),o.setVisual("toSymbol",c&&c[1]),o.setVisual("fromSymbolSize",u&&u[0]),o.setVisual("toSymbolSize",u&&u[1]),o.setVisual("style",s.getModel("lineStyle").getLineStyle()),o.each(function(d){var f=o.getItemModel(d),g=l.getEdgeByIndex(d),y=normalize$1(f.getShallow("symbol",!0)),$=normalize$1(f.getShallow("symbolSize",!0)),x=f.getModel("lineStyle").getLineStyle(),N=o.ensureUniqueItemVisual(d,"style");switch(extend(N,x),N.stroke){case"source":{var R=g.node1.getVisual("style");N.stroke=R&&R.fill;break}case"target":{var R=g.node2.getVisual("style");N.stroke=R&&R.fill;break}}y[0]&&g.setVisual("fromSymbol",y[0]),y[1]&&g.setVisual("toSymbol",y[1]),$[0]&&g.setVisual("fromSymbolSize",$[0]),$[1]&&g.setVisual("toSymbolSize",$[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(a){return a.get("autoCurveness")||null},createCurveness=function(a,s){var l=getAutoCurvenessParams(a),o=20,c=[];if(isNumber$2(l))o=l;else if(isArray$3(l)){a.__curvenessList=l;return}s>o&&(o=s);var u=o%2?o+2:o+3;c=[];for(var d=0;d<u;d++)c.push((d%2?d+1:d)/10*(d%2?-1:1));a.__curvenessList=c},getKeyOfEdges=function(a,s,l){var o=[a.id,a.dataIndex].join("."),c=[s.id,s.dataIndex].join(".");return[l.uid,o,c].join(KEY_DELIMITER)},getOppositeKey=function(a){var s=a.split(KEY_DELIMITER);return[s[0],s[2],s[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(a,s){var l=getKeyOfEdges(a.node1,a.node2,s);return s.__edgeMap[l]},getTotalLengthBetweenNodes=function(a,s){var l=getEdgeMapLengthWithKey(getKeyOfEdges(a.node1,a.node2,s),s),o=getEdgeMapLengthWithKey(getKeyOfEdges(a.node2,a.node1,s),s);return l+o},getEdgeMapLengthWithKey=function(a,s){var l=s.__edgeMap;return l[a]?l[a].length:0};function initCurvenessList(a){getAutoCurvenessParams(a)&&(a.__curvenessList=[],a.__edgeMap={},createCurveness(a))}function createEdgeMapForCurveness(a,s,l,o){if(getAutoCurvenessParams(l)){var c=getKeyOfEdges(a,s,l),u=l.__edgeMap,d=u[getOppositeKey(c)];u[c]&&!d?u[c].isForward=!0:d&&u[c]&&(d.isForward=!0,u[c].isForward=!1),u[c]=u[c]||[],u[c].push(o)}}function getCurvenessForEdge(a,s,l,o){var c=getAutoCurvenessParams(s),u=isArray$3(c);if(!c)return null;var d=getEdgeFromMap(a,s);if(!d)return null;for(var f=-1,g=0;g<d.length;g++)if(d[g]===l){f=g;break}var y=getTotalLengthBetweenNodes(a,s);createCurveness(s,y),a.lineStyle=a.lineStyle||{};var $=getKeyOfEdges(a.node1,a.node2,s),x=s.__curvenessList,N=u||y%2?0:1;if(d.isForward)return x[N+f];var R=getOppositeKey($),j=getEdgeMapLengthWithKey(R,s),ne=x[f+j+N];return o?u?c&&c[0]===0?(j+N)%2?ne:-ne:((j%2?0:1)+N)%2?ne:-ne:(j+N)%2?ne:-ne:x[f+j+N]}function simpleLayout(a){var s=a.coordinateSystem;if(!(s&&s.type!=="view")){var l=a.getGraph();l.eachNode(function(o){var c=o.getModel();o.setLayout([+c.get("x"),+c.get("y")])}),simpleLayoutEdge(l,a)}}function simpleLayoutEdge(a,s){a.eachEdge(function(l,o){var c=retrieve3(l.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(l,s,o,!0),0),u=clone$3(l.node1.getLayout()),d=clone$3(l.node2.getLayout()),f=[u,d];+c&&f.push([(u[0]+d[0])/2-(u[1]-d[1])*c,(u[1]+d[1])/2-(d[0]-u[0])*c]),l.setLayout(f)})}function graphSimpleLayout(a,s){a.eachSeriesByType("graph",function(l){var o=l.get("layout"),c=l.coordinateSystem;if(c&&c.type!=="view"){var u=l.getData(),d=[];each$f(c.dimensions,function(N){d=d.concat(u.mapDimensionsAll(N))});for(var f=0;f<u.count();f++){for(var g=[],y=!1,$=0;$<d.length;$++){var x=u.get(d[$],f);isNaN(x)||(y=!0),g.push(x)}y?u.setItemLayout(f,c.dataToPoint(g)):u.setItemLayout(f,[NaN,NaN])}simpleLayoutEdge(u.graph,l)}else(!o||o==="none")&&simpleLayout(l)})}function getNodeGlobalScale(a){var s=a.coordinateSystem;if(s.type!=="view")return 1;var l=a.option.nodeScaleRatio,o=s.scaleX,c=s.getZoom(),u=(c-1)*l+1;return u/o}function getSymbolSize(a){var s=a.getVisual("symbolSize");return s instanceof Array&&(s=(s[0]+s[1])/2),+s}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(a,s,l,o){var c=a.coordinateSystem;if(!(c&&c.type!=="view")){var u=c.getBoundingRect(),d=a.getData(),f=d.graph,g=u.width/2+u.x,y=u.height/2+u.y,$=Math.min(u.width,u.height)/2,x=d.count();if(d.setLayout({cx:g,cy:y}),!!x){if(l){var N=c.pointToData(o),R=N[0],j=N[1],ne=[R-g,j-y];normalize$3(ne,ne),scale$2(ne,ne,$),l.setLayout([g+ne[0],y+ne[1]],!0);var se=a.get(["circular","rotateLabel"]);rotateNodeLabel(l,se,g,y)}_layoutNodesBasedOn[s](a,f,d,$,g,y,x),f.eachEdge(function(ce,fe){var ea=retrieve3(ce.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(ce,a,fe),0),ta=clone$3(ce.node1.getLayout()),na=clone$3(ce.node2.getLayout()),aa,ia=(ta[0]+na[0])/2,sa=(ta[1]+na[1])/2;+ea&&(ea*=3,aa=[g*ea+ia*(1-ea),y*ea+sa*(1-ea)]),ce.setLayout([ta,na,aa])})}}}var _layoutNodesBasedOn={value:function(a,s,l,o,c,u,d){var f=0,g=l.getSum("value"),y=Math.PI*2/(g||d);s.eachNode(function($){var x=$.getValue("value"),N=y*(g?x:1)/2;f+=N,$.setLayout([o*Math.cos(f)+c,o*Math.sin(f)+u]),f+=N})},symbolSize:function(a,s,l,o,c,u,d){var f=0;_symbolRadiansHalf.length=d;var g=getNodeGlobalScale(a);s.eachNode(function(x){var N=getSymbolSize(x);isNaN(N)&&(N=2),N<0&&(N=0),N*=g;var R=Math.asin(N/2/o);isNaN(R)&&(R=PI$2/2),_symbolRadiansHalf[x.dataIndex]=R,f+=R*2});var y=(2*PI$2-f)/d/2,$=0;s.eachNode(function(x){var N=y+_symbolRadiansHalf[x.dataIndex];$+=N,(!x.getLayout()||!x.getLayout().fixed)&&x.setLayout([o*Math.cos($)+c,o*Math.sin($)+u]),$+=N})}};function rotateNodeLabel(a,s,l,o){var c=a.getGraphicEl();if(c){var u=a.getModel(),d=u.get(["label","rotate"])||0,f=c.getSymbolPath();if(s){var g=a.getLayout(),y=Math.atan2(g[1]-o,g[0]-l);y<0&&(y=Math.PI*2+y);var $=g[0]<l;$&&(y=y-Math.PI);var x=$?"left":"right";f.setTextConfig({rotation:-y,position:x,origin:"center"});var N=f.ensureState("emphasis");extend(N.textConfig||(N.textConfig={}),{position:x})}else f.setTextConfig({rotation:d*=Math.PI/180})}}function graphCircularLayout(a){a.eachSeriesByType("graph",function(s){s.get("layout")==="circular"&&circularLayout(s,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(a,s,l){for(var o=a,c=s,u=l.rect,d=u.width,f=u.height,g=[u.x+d/2,u.y+f/2],y=l.gravity==null?.1:l.gravity,$=0;$<o.length;$++){var x=o[$];x.p||(x.p=create$2(d*(Math.random()-.5)+g[0],f*(Math.random()-.5)+g[1])),x.pp=clone$3(x.p),x.edges=null}var N=l.friction==null?.6:l.friction,R=N,j,ne;return{warmUp:function(){R=N*.8},setFixed:function(se){o[se].fixed=!0},setUnfixed:function(se){o[se].fixed=!1},beforeStep:function(se){j=se},afterStep:function(se){ne=se},step:function(se){j&&j(o,c);for(var ce=[],fe=o.length,ea=0;ea<c.length;ea++){var ta=c[ea];if(!ta.ignoreForceLayout){var na=ta.n1,aa=ta.n2;sub(ce,aa.p,na.p);var ia=len(ce)-ta.d,sa=aa.w/(na.w+aa.w);isNaN(sa)&&(sa=0),normalize$3(ce,ce),!na.fixed&&scaleAndAdd(na.p,na.p,ce,sa*ia*R),!aa.fixed&&scaleAndAdd(aa.p,aa.p,ce,-(1-sa)*ia*R)}}for(var ea=0;ea<fe;ea++){var ra=o[ea];ra.fixed||(sub(ce,g,ra.p),scaleAndAdd(ra.p,ra.p,ce,y*R))}for(var ea=0;ea<fe;ea++)for(var na=o[ea],la=ea+1;la<fe;la++){var aa=o[la];sub(ce,aa.p,na.p);var ia=len(ce);ia===0&&(set$1(ce,Math.random()-.5,Math.random()-.5),ia=1);var oa=(na.rep+aa.rep)/ia/ia;!na.fixed&&scaleAndAdd(na.pp,na.pp,ce,oa),!aa.fixed&&scaleAndAdd(aa.pp,aa.pp,ce,-oa)}for(var ca=[],ea=0;ea<fe;ea++){var ra=o[ea];ra.fixed||(sub(ca,ra.p,ra.pp),scaleAndAdd(ra.p,ra.p,ca,R),copy$1(ra.pp,ra.p))}R=R*.992;var pa=R<.01;ne&&ne(o,c,pa),se&&se(pa)}}}function graphForceLayout(a){a.eachSeriesByType("graph",function(s){var l=s.coordinateSystem;if(!(l&&l.type!=="view"))if(s.get("layout")==="force"){var o=s.preservedPoints||{},c=s.getGraph(),u=c.data,d=c.edgeData,f=s.getModel("force"),g=f.get("initLayout");s.preservedPoints?u.each(function(ea){var ta=u.getId(ea);u.setItemLayout(ea,o[ta]||[NaN,NaN])}):!g||g==="none"?simpleLayout(s):g==="circular"&&circularLayout(s,"value");var y=u.getDataExtent("value"),$=d.getDataExtent("value"),x=f.get("repulsion"),N=f.get("edgeLength"),R=isArray$3(x)?x:[x,x],j=isArray$3(N)?N:[N,N];j=[j[1],j[0]];var ne=u.mapArray("value",function(ea,ta){var na=u.getItemLayout(ta),aa=linearMap$2(ea,y,R);return isNaN(aa)&&(aa=(R[0]+R[1])/2),{w:aa,rep:aa,fixed:u.getItemModel(ta).get("fixed"),p:!na||isNaN(na[0])||isNaN(na[1])?null:na}}),se=d.mapArray("value",function(ea,ta){var na=c.getEdgeByIndex(ta),aa=linearMap$2(ea,$,j);isNaN(aa)&&(aa=(j[0]+j[1])/2);var ia=na.getModel(),sa=retrieve3(na.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(na,s,ta,!0),0);return{n1:ne[na.node1.dataIndex],n2:ne[na.node2.dataIndex],d:aa,curveness:sa,ignoreForceLayout:ia.get("ignoreForceLayout")}}),ce=l.getBoundingRect(),fe=forceLayout(ne,se,{rect:ce,gravity:f.get("gravity"),friction:f.get("friction")});fe.beforeStep(function(ea,ta){for(var na=0,aa=ea.length;na<aa;na++)ea[na].fixed&&copy$1(ea[na].p,c.getNodeByIndex(na).getLayout())}),fe.afterStep(function(ea,ta,na){for(var aa=0,ia=ea.length;aa<ia;aa++)ea[aa].fixed||c.getNodeByIndex(aa).setLayout(ea[aa].p),o[u.getId(aa)]=ea[aa].p;for(var aa=0,ia=ta.length;aa<ia;aa++){var sa=ta[aa],ra=c.getEdgeByIndex(aa),la=sa.n1.p,oa=sa.n2.p,ca=ra.getLayout();ca=ca?ca.slice():[],ca[0]=ca[0]||[],ca[1]=ca[1]||[],copy$1(ca[0],la),copy$1(ca[1],oa),+sa.curveness&&(ca[2]=[(la[0]+oa[0])/2-(la[1]-oa[1])*sa.curveness,(la[1]+oa[1])/2-(oa[0]-la[0])*sa.curveness]),ra.setLayout(ca)}}),s.forceLayout=fe,s.preservedPoints=o,fe.step()}else s.forceLayout=null})}function getViewRect$3(a,s,l){var o=extend(a.getBoxLayoutParams(),{aspect:l});return getLayoutRect(o,{width:s.getWidth(),height:s.getHeight()})}function createViewCoordSys(a,s){var l=[];return a.eachSeriesByType("graph",function(o){var c=o.get("coordinateSystem");if(!c||c==="view"){var u=o.getData(),d=u.mapArray(function(se){var ce=u.getItemModel(se);return[+ce.get("x"),+ce.get("y")]}),f=[],g=[];fromPoints(d,f,g),g[0]-f[0]===0&&(g[0]+=1,f[0]-=1),g[1]-f[1]===0&&(g[1]+=1,f[1]-=1);var y=(g[0]-f[0])/(g[1]-f[1]),$=getViewRect$3(o,s,y);isNaN(y)&&(f=[$.x,$.y],g=[$.x+$.width,$.y+$.height]);var x=g[0]-f[0],N=g[1]-f[1],R=$.width,j=$.height,ne=o.coordinateSystem=new View;ne.zoomLimit=o.get("scaleLimit"),ne.setBoundingRect(f[0],f[1],x,N),ne.setViewRect($.x,$.y,R,j),ne.setCenter(o.get("center"),s),ne.setZoom(o.get("zoom")),l.push(ne)}}),l}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}();(function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s})(StraightLineShape);function isStraightLine(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var ECLinePath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="ec-line",o}return s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new StraightLineShape},s.prototype.buildPath=function(l,o){isStraightLine(o)?straightLineProto.buildPath.call(this,l,o):bezierCurveProto.buildPath.call(this,l,o)},s.prototype.pointAt=function(l){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,l):bezierCurveProto.pointAt.call(this,l)},s.prototype.tangentAt=function(l){var o=this.shape,c=isStraightLine(o)?[o.x2-o.x1,o.y2-o.y1]:bezierCurveProto.tangentAt.call(this,l);return normalize$3(c,c)},s}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(a){return"_"+a+"Type"}function makeSymbolTypeValue(a,s,l){var o=s.getItemVisual(l,a);if(!o||o==="none")return o;var c=s.getItemVisual(l,a+"Size"),u=s.getItemVisual(l,a+"Rotate"),d=s.getItemVisual(l,a+"Offset"),f=s.getItemVisual(l,a+"KeepAspect"),g=normalizeSymbolSize(c),y=normalizeSymbolOffset(d||0,g);return o+g+y+(u||"")+(f||"")}function createSymbol(a,s,l){var o=s.getItemVisual(l,a);if(!(!o||o==="none")){var c=s.getItemVisual(l,a+"Size"),u=s.getItemVisual(l,a+"Rotate"),d=s.getItemVisual(l,a+"Offset"),f=s.getItemVisual(l,a+"KeepAspect"),g=normalizeSymbolSize(c),y=normalizeSymbolOffset(d||0,g),$=createSymbol$1(o,-g[0]/2+y[0],-g[1]/2+y[1],g[0],g[1],null,f);return $.__specifiedRotation=u==null||isNaN(u)?void 0:+u*Math.PI/180||0,$.name=a,$}}function createLine(a){var s=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(s.shape,a),s}function setLinePoints(a,s){a.x1=s[0][0],a.y1=s[0][1],a.x2=s[1][0],a.y2=s[1][1],a.percent=1;var l=s[2];l?(a.cpx1=l[0],a.cpy1=l[1]):(a.cpx1=NaN,a.cpy1=NaN)}var Line=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this)||this;return u._createLine(l,o,c),u}return s.prototype._createLine=function(l,o,c){var u=l.hostModel,d=l.getItemLayout(o),f=createLine(d);f.shape.percent=0,initProps(f,{shape:{percent:1}},u,o),this.add(f),each$f(SYMBOL_CATEGORIES,function(g){var y=createSymbol(g,l,o);this.add(y),this[makeSymbolTypeKey(g)]=makeSymbolTypeValue(g,l,o)},this),this._updateCommonStl(l,o,c)},s.prototype.updateData=function(l,o,c){var u=l.hostModel,d=this.childOfName("line"),f=l.getItemLayout(o),g={shape:{}};setLinePoints(g.shape,f),updateProps$1(d,g,u,o),each$f(SYMBOL_CATEGORIES,function(y){var $=makeSymbolTypeValue(y,l,o),x=makeSymbolTypeKey(y);if(this[x]!==$){this.remove(this.childOfName(y));var N=createSymbol(y,l,o);this.add(N)}this[x]=$},this),this._updateCommonStl(l,o,c)},s.prototype.getLinePath=function(){return this.childAt(0)},s.prototype._updateCommonStl=function(l,o,c){var u=l.hostModel,d=this.childOfName("line"),f=c&&c.emphasisLineStyle,g=c&&c.blurLineStyle,y=c&&c.selectLineStyle,$=c&&c.labelStatesModels,x=c&&c.emphasisDisabled,N=c&&c.focus,R=c&&c.blurScope;if(!c||l.hasItemOption){var j=l.getItemModel(o),ne=j.getModel("emphasis");f=ne.getModel("lineStyle").getLineStyle(),g=j.getModel(["blur","lineStyle"]).getLineStyle(),y=j.getModel(["select","lineStyle"]).getLineStyle(),x=ne.get("disabled"),N=ne.get("focus"),R=ne.get("blurScope"),$=getLabelStatesModels(j)}var se=l.getItemVisual(o,"style"),ce=se.stroke;d.useStyle(se),d.style.fill=null,d.style.strokeNoScale=!0,d.ensureState("emphasis").style=f,d.ensureState("blur").style=g,d.ensureState("select").style=y,each$f(SYMBOL_CATEGORIES,function(aa){var ia=this.childOfName(aa);if(ia){ia.setColor(ce),ia.style.opacity=se.opacity;for(var sa=0;sa<SPECIAL_STATES.length;sa++){var ra=SPECIAL_STATES[sa],la=d.getState(ra);if(la){var oa=la.style||{},ca=ia.ensureState(ra),pa=ca.style||(ca.style={});oa.stroke!=null&&(pa[ia.__isEmptyBrush?"stroke":"fill"]=oa.stroke),oa.opacity!=null&&(pa.opacity=oa.opacity)}}ia.markRedraw()}},this);var fe=u.getRawValue(o);setLabelStyle(this,$,{labelDataIndex:o,labelFetcher:{getFormattedLabel:function(aa,ia){return u.getFormattedLabel(aa,ia,l.dataType)}},inheritColor:ce||"#000",defaultOpacity:se.opacity,defaultText:(fe==null?l.getName(o):isFinite(fe)?round$4(fe):fe)+""});var ea=this.getTextContent();if(ea){var ta=$.normal;ea.__align=ea.style.align,ea.__verticalAlign=ea.style.verticalAlign,ea.__position=ta.get("position")||"middle";var na=ta.get("distance");isArray$3(na)||(na=[na,na]),ea.__labelDistance=na}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,N,R,x)},s.prototype.highlight=function(){enterEmphasis(this)},s.prototype.downplay=function(){leaveEmphasis(this)},s.prototype.updateLayout=function(l,o){this.setLinePoints(l.getItemLayout(o))},s.prototype.setLinePoints=function(l){var o=this.childOfName("line");setLinePoints(o.shape,l),o.dirty()},s.prototype.beforeUpdate=function(){var l=this,o=l.childOfName("fromSymbol"),c=l.childOfName("toSymbol"),u=l.getTextContent();if(!o&&!c&&(!u||u.ignore))return;for(var d=1,f=this.parent;f;)f.scaleX&&(d/=f.scaleX),f=f.parent;var g=l.childOfName("line");if(!this.__dirty&&!g.__dirty)return;var y=g.shape.percent,$=g.pointAt(0),x=g.pointAt(y),N=sub([],x,$);normalize$3(N,N);function R(la,oa){var ca=la.__specifiedRotation;if(ca==null){var pa=g.tangentAt(oa);la.attr("rotation",(oa===1?-1:1)*Math.PI/2-Math.atan2(pa[1],pa[0]))}else la.attr("rotation",ca)}if(o&&(o.setPosition($),R(o,0),o.scaleX=o.scaleY=d*y,o.markRedraw()),c&&(c.setPosition(x),R(c,1),c.scaleX=c.scaleY=d*y,c.markRedraw()),u&&!u.ignore){u.x=u.y=0,u.originX=u.originY=0;var j=void 0,ne=void 0,se=u.__labelDistance,ce=se[0]*d,fe=se[1]*d,ea=y/2,ta=g.tangentAt(ea),na=[ta[1],-ta[0]],aa=g.pointAt(ea);na[1]>0&&(na[0]=-na[0],na[1]=-na[1]);var ia=ta[0]<0?-1:1;if(u.__position!=="start"&&u.__position!=="end"){var sa=-Math.atan2(ta[1],ta[0]);x[0]<$[0]&&(sa=Math.PI+sa),u.rotation=sa}var ra=void 0;switch(u.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":ra=-fe,ne="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":ra=fe,ne="top";break;default:ra=0,ne="middle"}switch(u.__position){case"end":u.x=N[0]*ce+x[0],u.y=N[1]*fe+x[1],j=N[0]>.8?"left":N[0]<-.8?"right":"center",ne=N[1]>.8?"top":N[1]<-.8?"bottom":"middle";break;case"start":u.x=-N[0]*ce+$[0],u.y=-N[1]*fe+$[1],j=N[0]>.8?"right":N[0]<-.8?"left":"center",ne=N[1]>.8?"bottom":N[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":u.x=ce*ia+$[0],u.y=$[1]+ra,j=ta[0]<0?"right":"left",u.originX=-ce*ia,u.originY=-ra;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":u.x=aa[0],u.y=aa[1]+ra,j="center",u.originY=-ra;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":u.x=-ce*ia+x[0],u.y=x[1]+ra,j=ta[0]>=0?"right":"left",u.originX=ce*ia,u.originY=-ra;break}u.scaleX=u.scaleY=d,u.setStyle({verticalAlign:u.__verticalAlign||ne,align:u.__align||j})}},s}(Group$3),LineDraw=function(){function a(s){this.group=new Group$3,this._LineCtor=s||Line}return a.prototype.updateData=function(s){var l=this;this._progressiveEls=null;var o=this,c=o.group,u=o._lineData;o._lineData=s,u||c.removeAll();var d=makeSeriesScope$1(s);s.diff(u).add(function(f){l._doAdd(s,f,d)}).update(function(f,g){l._doUpdate(u,s,g,f,d)}).remove(function(f){c.remove(u.getItemGraphicEl(f))}).execute()},a.prototype.updateLayout=function(){var s=this._lineData;s&&s.eachItemGraphicEl(function(l,o){l.updateLayout(s,o)},this)},a.prototype.incrementalPrepareUpdate=function(s){this._seriesScope=makeSeriesScope$1(s),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(s,l){this._progressiveEls=[];function o(f){!f.isGroup&&!isEffectObject(f)&&(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var c=s.start;c<s.end;c++){var u=l.getItemLayout(c);if(lineNeedsDraw(u)){var d=new this._LineCtor(l,c,this._seriesScope);d.traverse(o),this.group.add(d),l.setItemGraphicEl(c,d),this._progressiveEls.push(d)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(s){traverseElements(this._progressiveEls||this.group,s)},a.prototype._doAdd=function(s,l,o){var c=s.getItemLayout(l);if(lineNeedsDraw(c)){var u=new this._LineCtor(s,l,o);s.setItemGraphicEl(l,u),this.group.add(u)}},a.prototype._doUpdate=function(s,l,o,c,u){var d=s.getItemGraphicEl(o);if(!lineNeedsDraw(l.getItemLayout(c))){this.group.remove(d);return}d?d.updateData(l,c,u):d=new this._LineCtor(l,c,u),l.setItemGraphicEl(c,d),this.group.add(d)},a}();function isEffectObject(a){return a.animators&&a.animators.length>0}function makeSeriesScope$1(a){var s=a.hostModel,l=s.getModel("emphasis");return{lineStyle:s.getModel("lineStyle").getLineStyle(),emphasisLineStyle:l.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:s.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:s.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:l.get("disabled"),blurScope:l.get("blurScope"),focus:l.get("focus"),labelStatesModels:getLabelStatesModels(s)}}function isPointNaN(a){return isNaN(a[0])||isNaN(a[1])}function lineNeedsDraw(a){return a&&!isPointNaN(a[0])&&!isPointNaN(a[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(a,s,l){for(var o=a[0],c=a[1],u=a[2],d=1/0,f,g=l*l,y=.1,$=.1;$<=.9;$+=.1){v1[0]=quadraticAt(o[0],c[0],u[0],$),v1[1]=quadraticAt(o[1],c[1],u[1],$);var x=mathAbs(v2DistSquare(v1,s)-g);x<d&&(d=x,f=$)}for(var N=0;N<32;N++){var R=f+y;v2[0]=quadraticAt(o[0],c[0],u[0],f),v2[1]=quadraticAt(o[1],c[1],u[1],f),v3[0]=quadraticAt(o[0],c[0],u[0],R),v3[1]=quadraticAt(o[1],c[1],u[1],R);var x=v2DistSquare(v2,s)-g;if(mathAbs(x)<.01)break;var j=v2DistSquare(v3,s)-g;y/=2,x<0?j>=0?f=f+y:f=f-y:j>=0?f=f-y:f=f+y}return f}function adjustEdge(a,s){var l=[],o=quadraticSubdivide,c=[[],[],[]],u=[[],[]],d=[];s/=2,a.eachEdge(function(f,g){var y=f.getLayout(),$=f.getVisual("fromSymbol"),x=f.getVisual("toSymbol");y.__original||(y.__original=[clone$3(y[0]),clone$3(y[1])],y[2]&&y.__original.push(clone$3(y[2])));var N=y.__original;if(y[2]!=null){if(copy$1(c[0],N[0]),copy$1(c[1],N[2]),copy$1(c[2],N[1]),$&&$!=="none"){var R=getSymbolSize(f.node1),j=intersectCurveCircle(c,N[0],R*s);o(c[0][0],c[1][0],c[2][0],j,l),c[0][0]=l[3],c[1][0]=l[4],o(c[0][1],c[1][1],c[2][1],j,l),c[0][1]=l[3],c[1][1]=l[4]}if(x&&x!=="none"){var R=getSymbolSize(f.node2),j=intersectCurveCircle(c,N[1],R*s);o(c[0][0],c[1][0],c[2][0],j,l),c[1][0]=l[1],c[2][0]=l[2],o(c[0][1],c[1][1],c[2][1],j,l),c[1][1]=l[1],c[2][1]=l[2]}copy$1(y[0],c[0]),copy$1(y[1],c[2]),copy$1(y[2],c[1])}else{if(copy$1(u[0],N[0]),copy$1(u[1],N[1]),sub(d,u[1],u[0]),normalize$3(d,d),$&&$!=="none"){var R=getSymbolSize(f.node1);scaleAndAdd$1(u[0],u[0],d,R*s)}if(x&&x!=="none"){var R=getSymbolSize(f.node2);scaleAndAdd$1(u[1],u[1],d,-R*s)}copy$1(y[0],u[0]),copy$1(y[1],u[1])}})}function isViewCoordSys(a){return a.type==="view"}var GraphView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o){var c=new SymbolDraw,u=new LineDraw,d=this.group;this._controller=new RoamController(o.getZr()),this._controllerHost={target:d},d.add(c.group),d.add(u.group),this._symbolDraw=c,this._lineDraw=u,this._firstRender=!0},s.prototype.render=function(l,o,c){var u=this,d=l.coordinateSystem;this._model=l;var f=this._symbolDraw,g=this._lineDraw,y=this.group;if(isViewCoordSys(d)){var $={x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY};this._firstRender?y.attr($):updateProps$1(y,$,l)}adjustEdge(l.getGraph(),getNodeGlobalScale(l));var x=l.getData();f.updateData(x);var N=l.getEdgeData();g.updateData(N),this._updateNodeAndLinkScale(),this._updateController(l,o,c),clearTimeout(this._layoutTimeout);var R=l.forceLayout,j=l.get(["force","layoutAnimation"]);R&&this._startForceLayoutIteration(R,j);var ne=l.get("layout");x.graph.eachNode(function(ea){var ta=ea.dataIndex,na=ea.getGraphicEl(),aa=ea.getModel();if(na){na.off("drag").off("dragend");var ia=aa.get("draggable");ia&&na.on("drag",function(ra){switch(ne){case"force":R.warmUp(),!u._layouting&&u._startForceLayoutIteration(R,j),R.setFixed(ta),x.setItemLayout(ta,[na.x,na.y]);break;case"circular":x.setItemLayout(ta,[na.x,na.y]),ea.setLayout({fixed:!0},!0),circularLayout(l,"symbolSize",ea,[ra.offsetX,ra.offsetY]),u.updateLayout(l);break;case"none":default:x.setItemLayout(ta,[na.x,na.y]),simpleLayoutEdge(l.getGraph(),l),u.updateLayout(l);break}}).on("dragend",function(){R&&R.setUnfixed(ta)}),na.setDraggable(ia,!!aa.get("cursor"));var sa=aa.get(["emphasis","focus"]);sa==="adjacency"&&(getECData(na).focus=ea.getAdjacentDataIndices())}}),x.graph.eachEdge(function(ea){var ta=ea.getGraphicEl(),na=ea.getModel().get(["emphasis","focus"]);ta&&na==="adjacency"&&(getECData(ta).focus={edge:[ea.dataIndex],node:[ea.node1.dataIndex,ea.node2.dataIndex]})});var se=l.get("layout")==="circular"&&l.get(["circular","rotateLabel"]),ce=x.getLayout("cx"),fe=x.getLayout("cy");x.graph.eachNode(function(ea){rotateNodeLabel(ea,se,ce,fe)}),this._firstRender=!1},s.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},s.prototype._startForceLayoutIteration=function(l,o){var c=this;(function u(){l.step(function(d){c.updateLayout(c._model),(c._layouting=!d)&&(o?c._layoutTimeout=setTimeout(u,16):u())})})()},s.prototype._updateController=function(l,o,c){var u=this,d=this._controller,f=this._controllerHost,g=this.group;if(d.setPointerChecker(function(y,$,x){var N=g.getBoundingRect();return N.applyTransform(g.transform),N.contain($,x)&&!onIrrelevantElement(y,c,l)}),!isViewCoordSys(l.coordinateSystem)){d.disable();return}d.enable(l.get("roam")),f.zoomLimit=l.get("scaleLimit"),f.zoom=l.coordinateSystem.getZoom(),d.off("pan").off("zoom").on("pan",function(y){updateViewOnPan(f,y.dx,y.dy),c.dispatchAction({seriesId:l.id,type:"graphRoam",dx:y.dx,dy:y.dy})}).on("zoom",function(y){updateViewOnZoom(f,y.scale,y.originX,y.originY),c.dispatchAction({seriesId:l.id,type:"graphRoam",zoom:y.scale,originX:y.originX,originY:y.originY}),u._updateNodeAndLinkScale(),adjustEdge(l.getGraph(),getNodeGlobalScale(l)),u._lineDraw.updateLayout(),c.updateLabelLayout()})},s.prototype._updateNodeAndLinkScale=function(){var l=this._model,o=l.getData(),c=getNodeGlobalScale(l);o.eachItemGraphicEl(function(u,d){u&&u.setSymbolScale(c)})},s.prototype.updateLayout=function(l){adjustEdge(l.getGraph(),getNodeGlobalScale(l)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},s.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},s.type="graph",s}(ChartView);function generateNodeKey(a){return"_EC_"+a}var Graph=function(){function a(s){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=s||!1}return a.prototype.isDirected=function(){return this._directed},a.prototype.addNode=function(s,l){s=s==null?""+l:""+s;var o=this._nodesMap;if(!o[generateNodeKey(s)]){var c=new GraphNode(s,l);return c.hostGraph=this,this.nodes.push(c),o[generateNodeKey(s)]=c,c}},a.prototype.getNodeByIndex=function(s){var l=this.data.getRawIndex(s);return this.nodes[l]},a.prototype.getNodeById=function(s){return this._nodesMap[generateNodeKey(s)]},a.prototype.addEdge=function(s,l,o){var c=this._nodesMap,u=this._edgesMap;if(isNumber$2(s)&&(s=this.nodes[s]),isNumber$2(l)&&(l=this.nodes[l]),s instanceof GraphNode||(s=c[generateNodeKey(s)]),l instanceof GraphNode||(l=c[generateNodeKey(l)]),!(!s||!l)){var d=s.id+"-"+l.id,f=new GraphEdge(s,l,o);return f.hostGraph=this,this._directed&&(s.outEdges.push(f),l.inEdges.push(f)),s.edges.push(f),s!==l&&l.edges.push(f),this.edges.push(f),u[d]=f,f}},a.prototype.getEdgeByIndex=function(s){var l=this.edgeData.getRawIndex(s);return this.edges[l]},a.prototype.getEdge=function(s,l){s instanceof GraphNode&&(s=s.id),l instanceof GraphNode&&(l=l.id);var o=this._edgesMap;return this._directed?o[s+"-"+l]:o[s+"-"+l]||o[l+"-"+s]},a.prototype.eachNode=function(s,l){for(var o=this.nodes,c=o.length,u=0;u<c;u++)o[u].dataIndex>=0&&s.call(l,o[u],u)},a.prototype.eachEdge=function(s,l){for(var o=this.edges,c=o.length,u=0;u<c;u++)o[u].dataIndex>=0&&o[u].node1.dataIndex>=0&&o[u].node2.dataIndex>=0&&s.call(l,o[u],u)},a.prototype.breadthFirstTraverse=function(s,l,o,c){if(l instanceof GraphNode||(l=this._nodesMap[generateNodeKey(l)]),!!l){for(var u=o==="out"?"outEdges":o==="in"?"inEdges":"edges",d=0;d<this.nodes.length;d++)this.nodes[d].__visited=!1;if(!s.call(c,l,null))for(var f=[l];f.length;)for(var g=f.shift(),y=g[u],d=0;d<y.length;d++){var $=y[d],x=$.node1===g?$.node2:$.node1;if(!x.__visited){if(s.call(c,x,g))return;f.push(x),x.__visited=!0}}}},a.prototype.update=function(){for(var s=this.data,l=this.edgeData,o=this.nodes,c=this.edges,u=0,d=o.length;u<d;u++)o[u].dataIndex=-1;for(var u=0,d=s.count();u<d;u++)o[s.getRawIndex(u)].dataIndex=u;l.filterSelf(function(f){var g=c[l.getRawIndex(f)];return g.node1.dataIndex>=0&&g.node2.dataIndex>=0});for(var u=0,d=c.length;u<d;u++)c[u].dataIndex=-1;for(var u=0,d=l.count();u<d;u++)c[l.getRawIndex(u)].dataIndex=u},a.prototype.clone=function(){for(var s=new a(this._directed),l=this.nodes,o=this.edges,c=0;c<l.length;c++)s.addNode(l[c].id,l[c].dataIndex);for(var c=0;c<o.length;c++){var u=o[c];s.addEdge(u.node1.id,u.node2.id,u.dataIndex)}return s},a}(),GraphNode=function(){function a(s,l){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=s??"",this.dataIndex=l??-1}return a.prototype.degree=function(){return this.edges.length},a.prototype.inDegree=function(){return this.inEdges.length},a.prototype.outDegree=function(){return this.outEdges.length},a.prototype.getModel=function(s){if(!(this.dataIndex<0)){var l=this.hostGraph,o=l.data.getItemModel(this.dataIndex);return o.getModel(s)}},a.prototype.getAdjacentDataIndices=function(){for(var s={edge:[],node:[]},l=0;l<this.edges.length;l++){var o=this.edges[l];o.dataIndex<0||(s.edge.push(o.dataIndex),s.node.push(o.node1.dataIndex,o.node2.dataIndex))}return s},a.prototype.getTrajectoryDataIndices=function(){for(var s=createHashMap(),l=createHashMap(),o=0;o<this.edges.length;o++){var c=this.edges[o];if(!(c.dataIndex<0)){s.set(c.dataIndex,!0);for(var u=[c.node1],d=[c.node2],f=0;f<u.length;){var g=u[f];f++,l.set(g.dataIndex,!0);for(var y=0;y<g.inEdges.length;y++)s.set(g.inEdges[y].dataIndex,!0),u.push(g.inEdges[y].node1)}for(f=0;f<d.length;){var $=d[f];f++,l.set($.dataIndex,!0);for(var y=0;y<$.outEdges.length;y++)s.set($.outEdges[y].dataIndex,!0),d.push($.outEdges[y].node2)}}}return{edge:s.keys(),node:l.keys()}},a}(),GraphEdge=function(){function a(s,l,o){this.dataIndex=-1,this.node1=s,this.node2=l,this.dataIndex=o??-1}return a.prototype.getModel=function(s){if(!(this.dataIndex<0)){var l=this.hostGraph,o=l.edgeData.getItemModel(this.dataIndex);return o.getModel(s)}},a.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},a.prototype.getTrajectoryDataIndices=function(){var s=createHashMap(),l=createHashMap();s.set(this.dataIndex,!0);for(var o=[this.node1],c=[this.node2],u=0;u<o.length;){var d=o[u];u++,l.set(d.dataIndex,!0);for(var f=0;f<d.inEdges.length;f++)s.set(d.inEdges[f].dataIndex,!0),o.push(d.inEdges[f].node1)}for(u=0;u<c.length;){var g=c[u];u++,l.set(g.dataIndex,!0);for(var f=0;f<g.outEdges.length;f++)s.set(g.outEdges[f].dataIndex,!0),c.push(g.outEdges[f].node2)}return{edge:s.keys(),node:l.keys()}},a}();function createGraphDataProxyMixin(a,s){return{getValue:function(l){var o=this[a][s];return o.getStore().get(o.getDimensionIndex(l||"value"),this.dataIndex)},setVisual:function(l,o){this.dataIndex>=0&&this[a][s].setItemVisual(this.dataIndex,l,o)},getVisual:function(l){return this[a][s].getItemVisual(this.dataIndex,l)},setLayout:function(l,o){this.dataIndex>=0&&this[a][s].setItemLayout(this.dataIndex,l,o)},getLayout:function(){return this[a][s].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[a][s].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[a][s].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(a,s,l,o,c){for(var u=new Graph(o),d=0;d<a.length;d++)u.addNode(retrieve(a[d].id,a[d].name,d),d);for(var f=[],g=[],y=0,d=0;d<s.length;d++){var $=s[d],x=$.source,N=$.target;u.addEdge(x,N,y)&&(g.push($),f.push(retrieve(convertOptionIdName($.id,null),x+" > "+N)),y++)}var R=l.get("coordinateSystem"),j;if(R==="cartesian2d"||R==="polar")j=createSeriesData(a,l);else{var ne=CoordinateSystemManager.get(R),se=ne?ne.dimensions||[]:[];indexOf(se,"value")<0&&se.concat(["value"]);var ce=prepareSeriesDataSchema(a,{coordDimensions:se,encodeDefine:l.getEncode()}).dimensions;j=new SeriesData(ce,l),j.initData(a)}var fe=new SeriesData(["value"],l);return fe.initData(g,f),c&&c(j,fe),linkSeriesData({mainData:j,struct:u,structAttr:"graph",datas:{node:j,edge:fe},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}var GraphSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l}return s.prototype.init=function(l){a.prototype.init.apply(this,arguments);var o=this;function c(){return o._categoriesData}this.legendVisualProvider=new LegendVisualProvider(c,c),this.fillDataTextStyle(l.edges||l.links),this._updateCategoriesData()},s.prototype.mergeOption=function(l){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(l.edges||l.links),this._updateCategoriesData()},s.prototype.mergeDefaultAndTheme=function(l){a.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(l,"edgeLabel",["show"])},s.prototype.getInitialData=function(l,o){var c=l.edges||l.links||[],u=l.data||l.nodes||[],d=this;if(u&&c){initCurvenessList(this);var f=createGraphFromNodeEdge(u,c,this,!0,g);return each$f(f.edges,function(y){createEdgeMapForCurveness(y.node1,y.node2,this,y.dataIndex)},this),f.data}function g(y,$){y.wrapMethod("getItemModel",function(j){var ne=d._categoriesModels,se=j.getShallow("category"),ce=ne[se];return ce&&(ce.parentModel=j.parentModel,j.parentModel=ce),j});var x=Model.prototype.getModel;function N(j,ne){var se=x.call(this,j,ne);return se.resolveParentPath=R,se}$.wrapMethod("getItemModel",function(j){return j.resolveParentPath=R,j.getModel=N,j});function R(j){if(j&&(j[0]==="label"||j[1]==="label")){var ne=j.slice();return j[0]==="label"?ne[0]="edgeLabel":j[1]==="label"&&(ne[1]="edgeLabel"),ne}return j}}},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.getCategoriesData=function(){return this._categoriesData},s.prototype.formatTooltip=function(l,o,c){if(c==="edge"){var u=this.getData(),d=this.getDataParams(l,c),f=u.graph.getEdgeByIndex(l),g=u.getName(f.node1.dataIndex),y=u.getName(f.node2.dataIndex),$=[];return g!=null&&$.push(g),y!=null&&$.push(y),createTooltipMarkup("nameValue",{name:$.join(" > "),value:d.value,noValue:d.value==null})}var x=defaultSeriesFormatTooltip({series:this,dataIndex:l,multipleSeries:o});return x},s.prototype._updateCategoriesData=function(){var l=map$1(this.option.categories||[],function(c){return c.value!=null?c:extend({value:0},c)}),o=new SeriesData(["value"],this);o.initData(l),this._categoriesData=o,this._categoriesModels=o.mapArray(function(c){return o.getItemModel(c)})},s.prototype.setZoom=function(l){this.option.zoom=l},s.prototype.setCenter=function(l){this.option.center=l},s.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},s.type="series.graph",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$G(a){a.registerChartView(GraphView),a.registerSeriesModel(GraphSeriesModel),a.registerProcessor(categoryFilter),a.registerVisual(categoryVisual),a.registerVisual(graphEdgeVisual),a.registerLayout(graphSimpleLayout),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),a.registerLayout(graphForceLayout),a.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop),a.registerAction(actionInfo$1,function(s,l,o){l.eachComponent({mainType:"series",query:s},function(c){var u=c.coordinateSystem,d=updateCenterAndZoom(u,s,void 0,o);c.setCenter&&c.setCenter(d.center),c.setZoom&&c.setZoom(d.zoom)})})}var PointerShape=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),PointerPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="pointer",o}return s.prototype.getDefaultShape=function(){return new PointerShape},s.prototype.buildPath=function(l,o){var c=Math.cos,u=Math.sin,d=o.r,f=o.width,g=o.angle,y=o.x-c(g)*f*(f>=d/3?1:2),$=o.y-u(g)*f*(f>=d/3?1:2);g=o.angle-Math.PI/2,l.moveTo(y,$),l.lineTo(o.x+c(g)*f,o.y+u(g)*f),l.lineTo(o.x+c(o.angle)*d,o.y+u(o.angle)*d),l.lineTo(o.x-c(g)*f,o.y-u(g)*f),l.lineTo(y,$)},s}(Path);function parsePosition(a,s){var l=a.get("center"),o=s.getWidth(),c=s.getHeight(),u=Math.min(o,c),d=parsePercent(l[0],s.getWidth()),f=parsePercent(l[1],s.getHeight()),g=parsePercent(a.get("radius"),u/2);return{cx:d,cy:f,r:g}}function formatLabel(a,s){var l=a==null?"":a+"";return s&&(isString$2(s)?l=s.replace("{value}",l):isFunction$2(s)&&(l=s(a))),l}var GaugeView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){this.group.removeAll();var u=l.get(["axisLine","lineStyle","color"]),d=parsePosition(l,c);this._renderMain(l,o,c,u,d),this._data=l.getData()},s.prototype.dispose=function(){},s.prototype._renderMain=function(l,o,c,u,d){var f=this.group,g=l.get("clockwise"),y=-l.get("startAngle")/180*Math.PI,$=-l.get("endAngle")/180*Math.PI,x=l.getModel("axisLine"),N=x.get("roundCap"),R=N?SausagePath:Sector,j=x.get("show"),ne=x.getModel("lineStyle"),se=ne.get("width"),ce=[y,$];normalizeArcAngles(ce,!g),y=ce[0],$=ce[1];for(var fe=$-y,ea=y,ta=[],na=0;j&&na<u.length;na++){var aa=Math.min(Math.max(u[na][0],0),1);$=y+fe*aa;var ia=new R({shape:{startAngle:ea,endAngle:$,cx:d.cx,cy:d.cy,clockwise:g,r0:d.r-se,r:d.r},silent:!0});ia.setStyle({fill:u[na][1]}),ia.setStyle(ne.getLineStyle(["color","width"])),ta.push(ia),ea=$}ta.reverse(),each$f(ta,function(ra){return f.add(ra)});var sa=function(ra){if(ra<=0)return u[0][1];var la;for(la=0;la<u.length;la++)if(u[la][0]>=ra&&(la===0?0:u[la-1][0])<ra)return u[la][1];return u[la-1][1]};this._renderTicks(l,o,c,sa,d,y,$,g,se),this._renderTitleAndDetail(l,o,c,sa,d),this._renderAnchor(l,d),this._renderPointer(l,o,c,sa,d,y,$,g,se)},s.prototype._renderTicks=function(l,o,c,u,d,f,g,y,$){for(var x=this.group,N=d.cx,R=d.cy,j=d.r,ne=+l.get("min"),se=+l.get("max"),ce=l.getModel("splitLine"),fe=l.getModel("axisTick"),ea=l.getModel("axisLabel"),ta=l.get("splitNumber"),na=fe.get("splitNumber"),aa=parsePercent(ce.get("length"),j),ia=parsePercent(fe.get("length"),j),sa=f,ra=(g-f)/ta,la=ra/na,oa=ce.getModel("lineStyle").getLineStyle(),ca=fe.getModel("lineStyle").getLineStyle(),pa=ce.get("distance"),ua,da,ha=0;ha<=ta;ha++){if(ua=Math.cos(sa),da=Math.sin(sa),ce.get("show")){var ga=pa?pa+$:$,fa=new Line$1({shape:{x1:ua*(j-ga)+N,y1:da*(j-ga)+R,x2:ua*(j-aa-ga)+N,y2:da*(j-aa-ga)+R},style:oa,silent:!0});oa.stroke==="auto"&&fa.setStyle({stroke:u(ha/ta)}),x.add(fa)}if(ea.get("show")){var ga=ea.get("distance")+pa,ma=formatLabel(round$4(ha/ta*(se-ne)+ne),ea.get("formatter")),va=u(ha/ta),ka=ua*(j-aa-ga)+N,ya=da*(j-aa-ga)+R,ba=ea.get("rotate"),Ea=0;ba==="radial"?(Ea=-sa+2*Math.PI,Ea>Math.PI/2&&(Ea+=Math.PI)):ba==="tangential"?Ea=-sa-Math.PI/2:isNumber$2(ba)&&(Ea=ba*Math.PI/180),Ea===0?x.add(new ZRText({style:createTextStyle(ea,{text:ma,x:ka,y:ya,verticalAlign:da<-.8?"top":da>.8?"bottom":"middle",align:ua<-.4?"left":ua>.4?"right":"center"},{inheritColor:va}),silent:!0})):x.add(new ZRText({style:createTextStyle(ea,{text:ma,x:ka,y:ya,verticalAlign:"middle",align:"center"},{inheritColor:va}),silent:!0,originX:ka,originY:ya,rotation:Ea}))}if(fe.get("show")&&ha!==ta){var ga=fe.get("distance");ga=ga?ga+$:$;for(var Ca=0;Ca<=na;Ca++){ua=Math.cos(sa),da=Math.sin(sa);var $a=new Line$1({shape:{x1:ua*(j-ga)+N,y1:da*(j-ga)+R,x2:ua*(j-ia-ga)+N,y2:da*(j-ia-ga)+R},silent:!0,style:ca});ca.stroke==="auto"&&$a.setStyle({stroke:u((ha+Ca/na)/ta)}),x.add($a),sa+=la}sa-=la}else sa+=ra}},s.prototype._renderPointer=function(l,o,c,u,d,f,g,y,$){var x=this.group,N=this._data,R=this._progressEls,j=[],ne=l.get(["pointer","show"]),se=l.getModel("progress"),ce=se.get("show"),fe=l.getData(),ea=fe.mapDimension("value"),ta=+l.get("min"),na=+l.get("max"),aa=[ta,na],ia=[f,g];function sa(la,oa){var ca=fe.getItemModel(la),pa=ca.getModel("pointer"),ua=parsePercent(pa.get("width"),d.r),da=parsePercent(pa.get("length"),d.r),ha=l.get(["pointer","icon"]),ga=pa.get("offsetCenter"),fa=parsePercent(ga[0],d.r),ma=parsePercent(ga[1],d.r),va=pa.get("keepAspect"),ka;return ha?ka=createSymbol$1(ha,fa-ua/2,ma-da,ua,da,null,va):ka=new PointerPath({shape:{angle:-Math.PI/2,width:ua,r:da,x:fa,y:ma}}),ka.rotation=-(oa+Math.PI/2),ka.x=d.cx,ka.y=d.cy,ka}function ra(la,oa){var ca=se.get("roundCap"),pa=ca?SausagePath:Sector,ua=se.get("overlap"),da=ua?se.get("width"):$/fe.count(),ha=ua?d.r-da:d.r-(la+1)*da,ga=ua?d.r:d.r-la*da,fa=new pa({shape:{startAngle:f,endAngle:oa,cx:d.cx,cy:d.cy,clockwise:y,r0:ha,r:ga}});return ua&&(fa.z2=na-fe.get(ea,la)%na),fa}(ce||ne)&&(fe.diff(N).add(function(la){var oa=fe.get(ea,la);if(ne){var ca=sa(la,f);initProps(ca,{rotation:-((isNaN(+oa)?ia[0]:linearMap$2(oa,aa,ia,!0))+Math.PI/2)},l),x.add(ca),fe.setItemGraphicEl(la,ca)}if(ce){var pa=ra(la,f),ua=se.get("clip");initProps(pa,{shape:{endAngle:linearMap$2(oa,aa,ia,ua)}},l),x.add(pa),setCommonECData(l.seriesIndex,fe.dataType,la,pa),j[la]=pa}}).update(function(la,oa){var ca=fe.get(ea,la);if(ne){var pa=N.getItemGraphicEl(oa),ua=pa?pa.rotation:f,da=sa(la,ua);da.rotation=ua,updateProps$1(da,{rotation:-((isNaN(+ca)?ia[0]:linearMap$2(ca,aa,ia,!0))+Math.PI/2)},l),x.add(da),fe.setItemGraphicEl(la,da)}if(ce){var ha=R[oa],ga=ha?ha.shape.endAngle:f,fa=ra(la,ga),ma=se.get("clip");updateProps$1(fa,{shape:{endAngle:linearMap$2(ca,aa,ia,ma)}},l),x.add(fa),setCommonECData(l.seriesIndex,fe.dataType,la,fa),j[la]=fa}}).execute(),fe.each(function(la){var oa=fe.getItemModel(la),ca=oa.getModel("emphasis"),pa=ca.get("focus"),ua=ca.get("blurScope"),da=ca.get("disabled");if(ne){var ha=fe.getItemGraphicEl(la),ga=fe.getItemVisual(la,"style"),fa=ga.fill;if(ha instanceof ZRImage){var ma=ha.style;ha.useStyle(extend({image:ma.image,x:ma.x,y:ma.y,width:ma.width,height:ma.height},ga))}else ha.useStyle(ga),ha.type!=="pointer"&&ha.setColor(fa);ha.setStyle(oa.getModel(["pointer","itemStyle"]).getItemStyle()),ha.style.fill==="auto"&&ha.setStyle("fill",u(linearMap$2(fe.get(ea,la),aa,[0,1],!0))),ha.z2EmphasisLift=0,setStatesStylesFromModel(ha,oa),toggleHoverEmphasis(ha,pa,ua,da)}if(ce){var va=j[la];va.useStyle(fe.getItemVisual(la,"style")),va.setStyle(oa.getModel(["progress","itemStyle"]).getItemStyle()),va.z2EmphasisLift=0,setStatesStylesFromModel(va,oa),toggleHoverEmphasis(va,pa,ua,da)}}),this._progressEls=j)},s.prototype._renderAnchor=function(l,o){var c=l.getModel("anchor"),u=c.get("show");if(u){var d=c.get("size"),f=c.get("icon"),g=c.get("offsetCenter"),y=c.get("keepAspect"),$=createSymbol$1(f,o.cx-d/2+parsePercent(g[0],o.r),o.cy-d/2+parsePercent(g[1],o.r),d,d,null,y);$.z2=c.get("showAbove")?1:0,$.setStyle(c.getModel("itemStyle").getItemStyle()),this.group.add($)}},s.prototype._renderTitleAndDetail=function(l,o,c,u,d){var f=this,g=l.getData(),y=g.mapDimension("value"),$=+l.get("min"),x=+l.get("max"),N=new Group$3,R=[],j=[],ne=l.isAnimationEnabled(),se=l.get(["pointer","showAbove"]);g.diff(this._data).add(function(ce){R[ce]=new ZRText({silent:!0}),j[ce]=new ZRText({silent:!0})}).update(function(ce,fe){R[ce]=f._titleEls[fe],j[ce]=f._detailEls[fe]}).execute(),g.each(function(ce){var fe=g.getItemModel(ce),ea=g.get(y,ce),ta=new Group$3,na=u(linearMap$2(ea,[$,x],[0,1],!0)),aa=fe.getModel("title");if(aa.get("show")){var ia=aa.get("offsetCenter"),sa=d.cx+parsePercent(ia[0],d.r),ra=d.cy+parsePercent(ia[1],d.r),la=R[ce];la.attr({z2:se?0:2,style:createTextStyle(aa,{x:sa,y:ra,text:g.getName(ce),align:"center",verticalAlign:"middle"},{inheritColor:na})}),ta.add(la)}var oa=fe.getModel("detail");if(oa.get("show")){var ca=oa.get("offsetCenter"),pa=d.cx+parsePercent(ca[0],d.r),ua=d.cy+parsePercent(ca[1],d.r),da=parsePercent(oa.get("width"),d.r),ha=parsePercent(oa.get("height"),d.r),ga=l.get(["progress","show"])?g.getItemVisual(ce,"style").fill:na,la=j[ce],fa=oa.get("formatter");la.attr({z2:se?0:2,style:createTextStyle(oa,{x:pa,y:ua,text:formatLabel(ea,fa),width:isNaN(da)?null:da,height:isNaN(ha)?null:ha,align:"center",verticalAlign:"middle"},{inheritColor:ga})}),setLabelValueAnimation(la,{normal:oa},ea,function(va){return formatLabel(va,fa)}),ne&&animateLabelValue(la,ce,g,l,{getFormattedLabel:function(va,ka,ya,ba,Ea,Ca){return formatLabel(Ca?Ca.interpolatedValue:ea,fa)}}),ta.add(la)}N.add(ta)}),this.group.add(N),this._titleEls=R,this._detailEls=j},s.type="gauge",s}(ChartView),GaugeSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.visualStyleAccessPath="itemStyle",l}return s.prototype.getInitialData=function(l,o){return createSeriesDataSimply(this,["value"])},s.type="series.gauge",s.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},s}(SeriesModel);function install$F(a){a.registerChartView(GaugeView),a.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(a){__extends(s,a);function s(l,o){var c=a.call(this)||this,u=c,d=new Polyline$1,f=new ZRText;return u.setTextContent(f),c.setTextGuideLine(d),c.updateData(l,o,!0),c}return s.prototype.updateData=function(l,o,c){var u=this,d=l.hostModel,f=l.getItemModel(o),g=l.getItemLayout(o),y=f.getModel("emphasis"),$=f.get(opacityAccessPath$1);$=$??1,c||saveOldStyle(u),u.useStyle(l.getItemVisual(o,"style")),u.style.lineJoin="round",c?(u.setShape({points:g.points}),u.style.opacity=0,initProps(u,{style:{opacity:$}},d,o)):updateProps$1(u,{style:{opacity:$},shape:{points:g.points}},d,o),setStatesStylesFromModel(u,f),this._updateLabel(l,o),toggleHoverEmphasis(this,y.get("focus"),y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(l,o){var c=this,u=this.getTextGuideLine(),d=c.getTextContent(),f=l.hostModel,g=l.getItemModel(o),y=l.getItemLayout(o),$=y.label,x=l.getItemVisual(o,"style"),N=x.fill;setLabelStyle(d,getLabelStatesModels(g),{labelFetcher:l.hostModel,labelDataIndex:o,defaultOpacity:x.opacity,defaultText:l.getName(o)},{normal:{align:$.textAlign,verticalAlign:$.verticalAlign}}),c.setTextConfig({local:!0,inside:!!$.inside,insideStroke:N,outsideFill:N});var R=$.linePoints;u.setShape({points:R}),c.textGuideLineConfig={anchor:R?new Point(R[0][0],R[0][1]):null},updateProps$1(d,{style:{x:$.x,y:$.y}},f,o),d.attr({rotation:$.rotation,originX:$.x,originY:$.y,z2:10}),setLabelLineStyle(c,getLabelLineStatesModels(g),{stroke:N})},s}(Polygon),FunnelView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.ignoreLabelLineUpdate=!0,l}return s.prototype.render=function(l,o,c){var u=l.getData(),d=this._data,f=this.group;u.diff(d).add(function(g){var y=new FunnelPiece(u,g);u.setItemGraphicEl(g,y),f.add(y)}).update(function(g,y){var $=d.getItemGraphicEl(y);$.updateData(u,g),f.add($),u.setItemGraphicEl(g,$)}).remove(function(g){var y=d.getItemGraphicEl(g);removeElementWithFadeOut(y,l,g)}).execute(),this._data=u},s.prototype.remove=function(){this.group.removeAll(),this._data=null},s.prototype.dispose=function(){},s.type="funnel",s}(ChartView),FunnelSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(l)},s.prototype.getInitialData=function(l,o){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},s.prototype._defaultLabelLine=function(l){defaultEmphasis(l,"labelLine",["show"]);var o=l.labelLine,c=l.emphasis.labelLine;o.show=o.show&&l.label.show,c.show=c.show&&l.emphasis.label.show},s.prototype.getDataParams=function(l){var o=this.getData(),c=a.prototype.getDataParams.call(this,l),u=o.mapDimension("value"),d=o.getSum(u);return c.percent=d?+(o.get(u,l)/d*100).toFixed(2):0,c.$vars.push("percent"),c},s.type="series.funnel",s.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},s}(SeriesModel);function getViewRect$2(a,s){return getLayoutRect(a.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function getSortedIndices(a,s){for(var l=a.mapDimension("value"),o=a.mapArray(l,function(g){return g}),c=[],u=s==="ascending",d=0,f=a.count();d<f;d++)c[d]=d;return isFunction$2(s)?c.sort(s):s!=="none"&&c.sort(function(g,y){return u?o[g]-o[y]:o[y]-o[g]}),c}function labelLayout(a){var s=a.hostModel,l=s.get("orient");a.each(function(o){var c=a.getItemModel(o),u=c.getModel("label"),d=u.get("position"),f=c.getModel("labelLine"),g=a.getItemLayout(o),y=g.points,$=d==="inner"||d==="inside"||d==="center"||d==="insideLeft"||d==="insideRight",x,N,R,j;if($)d==="insideLeft"?(N=(y[0][0]+y[3][0])/2+5,R=(y[0][1]+y[3][1])/2,x="left"):d==="insideRight"?(N=(y[1][0]+y[2][0])/2-5,R=(y[1][1]+y[2][1])/2,x="right"):(N=(y[0][0]+y[1][0]+y[2][0]+y[3][0])/4,R=(y[0][1]+y[1][1]+y[2][1]+y[3][1])/4,x="center"),j=[[N,R],[N,R]];else{var ne=void 0,se=void 0,ce=void 0,fe=void 0,ea=f.get("length");d==="left"?(ne=(y[3][0]+y[0][0])/2,se=(y[3][1]+y[0][1])/2,ce=ne-ea,N=ce-5,x="right"):d==="right"?(ne=(y[1][0]+y[2][0])/2,se=(y[1][1]+y[2][1])/2,ce=ne+ea,N=ce+5,x="left"):d==="top"?(ne=(y[3][0]+y[0][0])/2,se=(y[3][1]+y[0][1])/2,fe=se-ea,R=fe-5,x="center"):d==="bottom"?(ne=(y[1][0]+y[2][0])/2,se=(y[1][1]+y[2][1])/2,fe=se+ea,R=fe+5,x="center"):d==="rightTop"?(ne=l==="horizontal"?y[3][0]:y[1][0],se=l==="horizontal"?y[3][1]:y[1][1],l==="horizontal"?(fe=se-ea,R=fe-5,x="center"):(ce=ne+ea,N=ce+5,x="top")):d==="rightBottom"?(ne=y[2][0],se=y[2][1],l==="horizontal"?(fe=se+ea,R=fe+5,x="center"):(ce=ne+ea,N=ce+5,x="bottom")):d==="leftTop"?(ne=y[0][0],se=l==="horizontal"?y[0][1]:y[1][1],l==="horizontal"?(fe=se-ea,R=fe-5,x="center"):(ce=ne-ea,N=ce-5,x="right")):d==="leftBottom"?(ne=l==="horizontal"?y[1][0]:y[3][0],se=l==="horizontal"?y[1][1]:y[2][1],l==="horizontal"?(fe=se+ea,R=fe+5,x="center"):(ce=ne-ea,N=ce-5,x="right")):(ne=(y[1][0]+y[2][0])/2,se=(y[1][1]+y[2][1])/2,l==="horizontal"?(fe=se+ea,R=fe+5,x="center"):(ce=ne+ea,N=ce+5,x="left")),l==="horizontal"?(ce=ne,N=ce):(fe=se,R=fe),j=[[ne,se],[ce,fe]]}g.label={linePoints:j,x:N,y:R,verticalAlign:"middle",textAlign:x,inside:$}})}function funnelLayout(a,s){a.eachSeriesByType("funnel",function(l){var o=l.getData(),c=o.mapDimension("value"),u=l.get("sort"),d=getViewRect$2(l,s),f=l.get("orient"),g=d.width,y=d.height,$=getSortedIndices(o,u),x=d.x,N=d.y,R=f==="horizontal"?[parsePercent(l.get("minSize"),y),parsePercent(l.get("maxSize"),y)]:[parsePercent(l.get("minSize"),g),parsePercent(l.get("maxSize"),g)],j=o.getDataExtent(c),ne=l.get("min"),se=l.get("max");ne==null&&(ne=Math.min(j[0],0)),se==null&&(se=j[1]);var ce=l.get("funnelAlign"),fe=l.get("gap"),ea=f==="horizontal"?g:y,ta=(ea-fe*(o.count()-1))/o.count(),na=function(ua,da){if(f==="horizontal"){var ha=o.get(c,ua)||0,ga=linearMap$2(ha,[ne,se],R,!0),fa=void 0;switch(ce){case"top":fa=N;break;case"center":fa=N+(y-ga)/2;break;case"bottom":fa=N+(y-ga);break}return[[da,fa],[da,fa+ga]]}var ma=o.get(c,ua)||0,va=linearMap$2(ma,[ne,se],R,!0),ka;switch(ce){case"left":ka=x;break;case"center":ka=x+(g-va)/2;break;case"right":ka=x+g-va;break}return[[ka,da],[ka+va,da]]};u==="ascending"&&(ta=-ta,fe=-fe,f==="horizontal"?x+=g:N+=y,$=$.reverse());for(var aa=0;aa<$.length;aa++){var ia=$[aa],sa=$[aa+1],ra=o.getItemModel(ia);if(f==="horizontal"){var la=ra.get(["itemStyle","width"]);la==null?la=ta:(la=parsePercent(la,g),u==="ascending"&&(la=-la));var oa=na(ia,x),ca=na(sa,x+la);x+=la+fe,o.setItemLayout(ia,{points:oa.concat(ca.slice().reverse())})}else{var pa=ra.get(["itemStyle","height"]);pa==null?pa=ta:(pa=parsePercent(pa,y),u==="ascending"&&(pa=-pa));var oa=na(ia,N),ca=na(sa,N+pa);N+=pa+fe,o.setItemLayout(ia,{points:oa.concat(ca.slice().reverse())})}}labelLayout(o)})}function install$E(a){a.registerChartView(FunnelView),a.registerSeriesModel(FunnelSeriesModel),a.registerLayout(funnelLayout),a.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._dataGroup=new Group$3,l._initialized=!1,l}return s.prototype.init=function(){this.group.add(this._dataGroup)},s.prototype.render=function(l,o,c,u){this._progressiveEls=null;var d=this._dataGroup,f=l.getData(),g=this._data,y=l.coordinateSystem,$=y.dimensions,x=makeSeriesScope(l);f.diff(g).add(N).update(R).remove(j).execute();function N(se){var ce=addEl(f,d,se,$,y);updateElCommon(ce,f,se,x)}function R(se,ce){var fe=g.getItemGraphicEl(ce),ea=createLinePoints(f,se,$,y);f.setItemGraphicEl(se,fe),updateProps$1(fe,{shape:{points:ea}},l,se),saveOldStyle(fe),updateElCommon(fe,f,se,x)}function j(se){var ce=g.getItemGraphicEl(se);d.remove(ce)}if(!this._initialized){this._initialized=!0;var ne=createGridClipShape$2(y,l,function(){setTimeout(function(){d.removeClipPath()})});d.setClipPath(ne)}this._data=f},s.prototype.incrementalPrepareRender=function(l,o,c){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},s.prototype.incrementalRender=function(l,o,c){for(var u=o.getData(),d=o.coordinateSystem,f=d.dimensions,g=makeSeriesScope(o),y=this._progressiveEls=[],$=l.start;$<l.end;$++){var x=addEl(u,this._dataGroup,$,f,d);x.incremental=!0,updateElCommon(x,u,$,g),y.push(x)}},s.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},s.type="parallel",s}(ChartView);function createGridClipShape$2(a,s,l){var o=a.model,c=a.getRect(),u=new Rect$2({shape:{x:c.x,y:c.y,width:c.width,height:c.height}}),d=o.get("layout")==="horizontal"?"width":"height";return u.setShape(d,0),initProps(u,{shape:{width:c.width,height:c.height}},s,l),u}function createLinePoints(a,s,l,o){for(var c=[],u=0;u<l.length;u++){var d=l[u],f=a.get(a.mapDimension(d),s);isEmptyValue$1(f,o.getAxis(d).type)||c.push(o.dataToPoint(f,d))}return c}function addEl(a,s,l,o,c){var u=createLinePoints(a,l,o,c),d=new Polyline$1({shape:{points:u},z2:10});return s.add(d),a.setItemGraphicEl(l,d),d}function makeSeriesScope(a){var s=a.get("smooth",!0);return s===!0&&(s=DEFAULT_SMOOTH),s=numericToNumber(s),eqNaN(s)&&(s=0),{smooth:s}}function updateElCommon(a,s,l,o){a.useStyle(s.getItemVisual(l,"style")),a.style.fill=null,a.setShape("smooth",o.smooth);var c=s.getItemModel(l),u=c.getModel("emphasis");setStatesStylesFromModel(a,c,"lineStyle"),toggleHoverEmphasis(a,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function isEmptyValue$1(a,s){return s==="category"?a==null:a==null||isNaN(a)}var ParallelSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.visualStyleAccessPath="lineStyle",l.visualDrawType="stroke",l}return s.prototype.getInitialData=function(l,o){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},s.prototype.getRawIndicesByActiveState=function(l){var o=this.coordinateSystem,c=this.getData(),u=[];return o.eachActiveState(c,function(d,f){l===d&&u.push(c.getRawIndex(f))}),u},s.type="series.parallel",s.dependencies=["parallel"],s.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},s}(SeriesModel);function makeDefaultEncode(a){var s=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(s){var l={};return each$f(s.dimensions,function(o){var c=convertDimNameToNumber(o);l[o]=c}),l}}function convertDimNameToNumber(a){return+a.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(a,s){var l=a.coordinateSystem,o={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(c,u){l.eachActiveState(u,function(d,f){var g=o[d];if(d==="normal"&&u.hasItemOption){var y=u.getItemModel(f).get(opacityAccessPath,!0);y!=null&&(g=y)}var $=u.ensureUniqueItemVisual(f,"style");$.opacity=g},c.start,c.end)}}}};function parallelPreprocessor(a){createParallelIfNeeded(a),mergeAxisOptionFromParallel(a)}function createParallelIfNeeded(a){if(!a.parallel){var s=!1;each$f(a.series,function(l){l&&l.type==="parallel"&&(s=!0)}),s&&(a.parallel=[{}])}}function mergeAxisOptionFromParallel(a){var s=normalizeToArray(a.parallelAxis);each$f(s,function(l){if(isObject$5(l)){var o=l.parallelIndex||0,c=normalizeToArray(a.parallel)[o];c&&c.parallelAxisDefault&&merge(l,c.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){this._model=l,this._api=c,this._handlers||(this._handlers={},each$f(handlers$1,function(u,d){c.getZr().on(d,this._handlers[d]=bind$1(u,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",l.get("axisExpandRate"),"fixRate")},s.prototype.dispose=function(l,o){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(c,u){o.getZr().off(u,c)}),this._handlers=null},s.prototype._throttledDispatchExpand=function(l){this._dispatchExpand(l)},s.prototype._dispatchExpand=function(l){l&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},l))},s.type="parallel",s}(ComponentView),handlers$1={mousedown:function(a){checkTrigger(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var s=this._mouseDownPoint;if(checkTrigger(this,"click")&&s){var l=[a.offsetX,a.offsetY],o=Math.pow(s[0]-l[0],2)+Math.pow(s[1]-l[1],2);if(o>CLICK_THRESHOLD)return;var c=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);c.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:c.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var s=this._model,l=s.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),o=l.behavior;o==="jump"&&this._throttledDispatchExpand.debounceNextCall(s.get("axisExpandDebounce")),this._throttledDispatchExpand(o==="none"?null:{axisExpandWindow:l.axisExpandWindow,animation:o==="jump"?null:{duration:0}})}}};function checkTrigger(a,s){var l=a._model;return l.get("axisExpandable")&&l.get("axisExpandTriggerOn")===s}var ParallelModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},s.prototype.mergeOption=function(l){var o=this.option;l&&merge(o,l,!0),this._initDimensions()},s.prototype.contains=function(l,o){var c=l.get("parallelIndex");return c!=null&&o.getComponent("parallel",c)===this},s.prototype.setAxisExpand=function(l){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(o){l.hasOwnProperty(o)&&(this.option[o]=l[o])},this)},s.prototype._initDimensions=function(){var l=this.dimensions=[],o=this.parallelAxisIndex=[],c=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(u){return(u.get("parallelIndex")||0)===this.componentIndex},this);each$f(c,function(u){l.push("dim"+u.get("dim")),o.push(u.componentIndex)})},s.type="parallel",s.dependencies=["parallelAxis"],s.layoutMode="box",s.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},s}(ComponentModel),ParallelAxis=function(a){__extends(s,a);function s(l,o,c,u,d){var f=a.call(this,l,o,c)||this;return f.type=u||"value",f.axisIndex=d,f}return s.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},s}(Axis);function sliderMove(a,s,l,o,c,u){a=a||0;var d=l[1]-l[0];if(c!=null&&(c=restrict$1(c,[0,d])),u!=null&&(u=Math.max(u,c??0)),o==="all"){var f=Math.abs(s[1]-s[0]);f=restrict$1(f,[0,d]),c=u=restrict$1(f,[c,u]),o=0}s[0]=restrict$1(s[0],l),s[1]=restrict$1(s[1],l);var g=getSpanSign(s,o);s[o]+=a;var y=c||0,$=l.slice();g.sign<0?$[0]+=y:$[1]-=y,s[o]=restrict$1(s[o],$);var x;return x=getSpanSign(s,o),c!=null&&(x.sign!==g.sign||x.span<c)&&(s[1-o]=s[o]+g.sign*c),x=getSpanSign(s,o),u!=null&&x.span>u&&(s[1-o]=s[o]+x.sign*u),s}function getSpanSign(a,s){var l=a[s]-a[1-s];return{span:Math.abs(l),sign:l>0?-1:l<0?1:s?-1:1}}function restrict$1(a,s){return Math.min(s[1]!=null?s[1]:1/0,Math.max(s[0]!=null?s[0]:-1/0,a))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round$1=round$4,PI$1=Math.PI,Parallel=function(){function a(s,l,o){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=s.dimensions,this._model=s,this._init(s,l,o)}return a.prototype._init=function(s,l,o){var c=s.dimensions,u=s.parallelAxisIndex;each$a(c,function(d,f){var g=u[f],y=l.getComponent("parallelAxis",g),$=this._axesMap.set(d,new ParallelAxis(d,createScaleByModel$1(y),[0,0],y.get("type"),g)),x=$.type==="category";$.onBand=x&&y.get("boundaryGap"),$.inverse=y.get("inverse"),y.axis=$,$.model=y,$.coordinateSystem=y.coordinateSystem=this},this)},a.prototype.update=function(s,l){this._updateAxesFromSeries(this._model,s)},a.prototype.containPoint=function(s){var l=this._makeLayoutInfo(),o=l.axisBase,c=l.layoutBase,u=l.pixelDimIndex,d=s[1-u],f=s[u];return d>=o&&d<=o+l.axisLength&&f>=c&&f<=c+l.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(s,l){l.eachSeries(function(o){if(s.contains(o,l)){var c=o.getData();each$a(this.dimensions,function(u){var d=this._axesMap.get(u);d.scale.unionExtentFromData(c,c.mapDimension(u)),niceScaleExtent(d.scale,d.model)},this)}},this)},a.prototype.resize=function(s,l){this._rect=getLayoutRect(s.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var s=this._model,l=this._rect,o=["x","y"],c=["width","height"],u=s.get("layout"),d=u==="horizontal"?0:1,f=l[c[d]],g=[0,f],y=this.dimensions.length,$=restrict(s.get("axisExpandWidth"),g),x=restrict(s.get("axisExpandCount")||0,[0,y]),N=s.get("axisExpandable")&&y>3&&y>x&&x>1&&$>0&&f>0,R=s.get("axisExpandWindow"),j;if(R)j=restrict(R[1]-R[0],g),R[1]=R[0]+j;else{j=restrict($*(x-1),g);var ne=s.get("axisExpandCenter")||mathFloor(y/2);R=[$*ne-j/2],R[1]=R[0]+j}var se=(f-j)/(y-x);se<3&&(se=0);var ce=[mathFloor(round$1(R[0]/$,1))+1,mathCeil(round$1(R[1]/$,1))-1],fe=se/$*R[0];return{layout:u,pixelDimIndex:d,layoutBase:l[o[d]],layoutLength:f,axisBase:l[o[1-d]],axisLength:l[c[1-d]],axisExpandable:N,axisExpandWidth:$,axisCollapseWidth:se,axisExpandWindow:R,axisCount:y,winInnerIndices:ce,axisExpandWindow0Pos:fe}},a.prototype._layoutAxes=function(){var s=this._rect,l=this._axesMap,o=this.dimensions,c=this._makeLayoutInfo(),u=c.layout;l.each(function(d){var f=[0,c.axisLength],g=d.inverse?1:0;d.setExtent(f[g],f[1-g])}),each$a(o,function(d,f){var g=(c.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(f,c),y={horizontal:{x:g.position,y:c.axisLength},vertical:{x:0,y:g.position}},$={horizontal:PI$1/2,vertical:0},x=[y[u].x+s.x,y[u].y+s.y],N=$[u],R=create$1();rotate(R,R,N),translate(R,R,x),this._axesLayout[d]={position:x,rotation:N,transform:R,axisNameAvailableWidth:g.axisNameAvailableWidth,axisLabelShow:g.axisLabelShow,nameTruncateMaxWidth:g.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(s){return this._axesMap.get(s)},a.prototype.dataToPoint=function(s,l){return this.axisCoordToPoint(this._axesMap.get(l).dataToCoord(s),l)},a.prototype.eachActiveState=function(s,l,o,c){o==null&&(o=0),c==null&&(c=s.count());var u=this._axesMap,d=this.dimensions,f=[],g=[];each$f(d,function(se){f.push(s.mapDimension(se)),g.push(u.get(se).model)});for(var y=this.hasAxisBrushed(),$=o;$<c;$++){var x=void 0;if(!y)x="normal";else{x="active";for(var N=s.getValues(f,$),R=0,j=d.length;R<j;R++){var ne=g[R].getActiveState(N[R]);if(ne==="inactive"){x="inactive";break}}}l(x,$)}},a.prototype.hasAxisBrushed=function(){for(var s=this.dimensions,l=this._axesMap,o=!1,c=0,u=s.length;c<u;c++)l.get(s[c]).model.getActiveState()!=="normal"&&(o=!0);return o},a.prototype.axisCoordToPoint=function(s,l){var o=this._axesLayout[l];return applyTransform([s,0],o.transform)},a.prototype.getAxisLayout=function(s){return clone$4(this._axesLayout[s])},a.prototype.getSlidedAxisExpandWindow=function(s){var l=this._makeLayoutInfo(),o=l.pixelDimIndex,c=l.axisExpandWindow.slice(),u=c[1]-c[0],d=[0,l.axisExpandWidth*(l.axisCount-1)];if(!this.containPoint(s))return{behavior:"none",axisExpandWindow:c};var f=s[o]-l.layoutBase-l.axisExpandWindow0Pos,g,y="slide",$=l.axisCollapseWidth,x=this._model.get("axisExpandSlideTriggerArea"),N=x[0]!=null;if($)N&&$&&f<u*x[0]?(y="jump",g=f-u*x[2]):N&&$&&f>u*(1-x[0])?(y="jump",g=f-u*(1-x[2])):(g=f-u*x[1])>=0&&(g=f-u*(1-x[1]))<=0&&(g=0),g*=l.axisExpandWidth/$,g?sliderMove(g,c,d,"all"):y="none";else{var R=c[1]-c[0],j=d[1]*f/R;c=[mathMax$2(0,j-R/2)],c[1]=mathMin$2(d[1],c[0]+R),c[0]=c[1]-R}return{axisExpandWindow:c,behavior:y}},a}();function restrict(a,s){return mathMin$2(mathMax$2(a,s[0]),s[1])}function layoutAxisWithoutExpand(a,s){var l=s.layoutLength/(s.axisCount-1);return{position:l*a,axisNameAvailableWidth:l,axisLabelShow:!0}}function layoutAxisWithExpand(a,s){var l=s.layoutLength,o=s.axisExpandWidth,c=s.axisCount,u=s.axisCollapseWidth,d=s.winInnerIndices,f,g=u,y=!1,$;return a<d[0]?(f=a*u,$=u):a<=d[1]?(f=s.axisExpandWindow0Pos+a*o-s.axisExpandWindow[0],g=o,y=!0):(f=l-(c-1-a)*u,$=u),{position:f,axisNameAvailableWidth:g,axisLabelShow:y,nameTruncateMaxWidth:$}}function createParallelCoordSys(a,s){var l=[];return a.eachComponent("parallel",function(o,c){var u=new Parallel(o,a,s);u.name="parallel_"+c,u.resize(o,s),o.coordinateSystem=u,u.model=o,l.push(u)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="parallel"){var c=o.getReferringComponents("parallel",SINGLE_REFERRING).models[0];o.coordinateSystem=c.coordinateSystem}}),l}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.activeIntervals=[],l}return s.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},s.prototype.setActiveIntervals=function(l){var o=this.activeIntervals=clone$4(l);if(o)for(var c=o.length-1;c>=0;c--)asc$2(o[c])},s.prototype.getActiveState=function(l){var o=this.activeIntervals;if(!o.length)return"normal";if(l==null||isNaN(+l))return"inactive";if(o.length===1){var c=o[0];if(c[0]<=l&&l<=c[1])return"active"}else for(var u=0,d=o.length;u<d;u++)if(o[u][0]<=l&&l<=o[u][1])return"active";return"inactive"},s}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(a){__extends(s,a);function s(l){var o=a.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=l,o.group=new Group$3,o._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(c,u){this._handlers[u]=bind$1(c,this)},o),o}return s.prototype.enableBrush=function(l){return this._brushType&&this._doDisableBrush(),l.brushType&&this._doEnableBrush(l),this},s.prototype._doEnableBrush=function(l){var o=this._zr;this._enableGlobalPan||take(o,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(c,u){o.on(u,c)}),this._brushType=l.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),l,!0)},s.prototype._doDisableBrush=function(){var l=this._zr;release(l,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(o,c){l.off(c,o)}),this._brushType=this._brushOption=null},s.prototype.setPanels=function(l){if(l&&l.length){var o=this._panels={};each$f(l,function(c){o[c.panelId]=clone$4(c)})}else this._panels=null;return this},s.prototype.mount=function(l){l=l||{},this._enableGlobalPan=l.enableGlobalPan;var o=this.group;return this._zr.add(o),o.attr({x:l.x||0,y:l.y||0,rotation:l.rotation||0,scaleX:l.scaleX||1,scaleY:l.scaleY||1}),this._transform=o.getLocalTransform(),this},s.prototype.updateCovers=function(l){l=map$1(l,function(N){return merge(clone$4(DEFAULT_BRUSH_OPT),N,!0)});var o="\0-brush-index-",c=this._covers,u=this._covers=[],d=this,f=this._creatingCover;return new DataDiffer(c,l,y,g).add($).update($).remove(x).execute(),this;function g(N,R){return(N.id!=null?N.id:o+R)+"-"+N.brushType}function y(N,R){return g(N.__brushOption,R)}function $(N,R){var j=l[N];if(R!=null&&c[R]===f)u[N]=c[R];else{var ne=u[N]=R!=null?(c[R].__brushOption=j,c[R]):endCreating(d,createCover(d,j));updateCoverAfterCreation(d,ne)}}function x(N){c[N]!==f&&d.group.remove(c[N])}},s.prototype.unmount=function(){return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),this},s.prototype.dispose=function(){this.unmount(),this.off()},s}(Eventful);function createCover(a,s){var l=coverRenderers[s.brushType].createCover(a,s);return l.__brushOption=s,updateZ$1(l,s),a.group.add(l),l}function endCreating(a,s){var l=getCoverRenderer(s);return l.endCreating&&(l.endCreating(a,s),updateZ$1(s,s.__brushOption)),s}function updateCoverShape(a,s){var l=s.__brushOption;getCoverRenderer(s).updateCoverShape(a,s,l.range,l)}function updateZ$1(a,s){var l=s.z;l==null&&(l=COVER_Z),a.traverse(function(o){o.z=l,o.z2=l})}function updateCoverAfterCreation(a,s){getCoverRenderer(s).updateCommon(a,s),updateCoverShape(a,s)}function getCoverRenderer(a){return coverRenderers[a.__brushOption.brushType]}function getPanelByPoint(a,s,l){var o=a._panels;if(!o)return BRUSH_PANEL_GLOBAL;var c,u=a._transform;return each$f(o,function(d){d.isTargetByCursor(s,l,u)&&(c=d)}),c}function getPanelByCover(a,s){var l=a._panels;if(!l)return BRUSH_PANEL_GLOBAL;var o=s.__brushOption.panelId;return o!=null?l[o]:BRUSH_PANEL_GLOBAL}function clearCovers(a){var s=a._covers,l=s.length;return each$f(s,function(o){a.group.remove(o)},a),s.length=0,!!l}function trigger(a,s){var l=map$1(a._covers,function(o){var c=o.__brushOption,u=clone$4(c.range);return{brushType:c.brushType,panelId:c.panelId,range:u}});a.trigger("brush",{areas:l,isEnd:!!s.isEnd,removeOnClick:!!s.removeOnClick})}function shouldShowCover(a){var s=a._track;if(!s.length)return!1;var l=s[s.length-1],o=s[0],c=l[0]-o[0],u=l[1]-o[1],d=mathPow(c*c+u*u,.5);return d>UNSELECT_THRESHOLD}function getTrackEnds(a){var s=a.length-1;return s<0&&(s=0),[a[0],a[s]]}function createBaseRectCover(a,s,l,o){var c=new Group$3;return c.add(new Rect$2({name:"main",style:makeStyle(l),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,a,s,c,["n","s","w","e"]),ondragend:curry$1(trigger,s,{isEnd:!0})})),each$f(o,function(u){c.add(new Rect$2({name:u.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,a,s,c,u),ondragend:curry$1(trigger,s,{isEnd:!0})}))}),c}function updateBaseRect(a,s,l,o){var c=o.brushStyle.lineWidth||0,u=mathMax$1(c,MIN_RESIZE_LINE_WIDTH),d=l[0][0],f=l[1][0],g=d-c/2,y=f-c/2,$=l[0][1],x=l[1][1],N=$-u+c/2,R=x-u+c/2,j=$-d,ne=x-f,se=j+c,ce=ne+c;updateRectShape(a,s,"main",d,f,j,ne),o.transformable&&(updateRectShape(a,s,"w",g,y,u,ce),updateRectShape(a,s,"e",N,y,u,ce),updateRectShape(a,s,"n",g,y,se,u),updateRectShape(a,s,"s",g,R,se,u),updateRectShape(a,s,"nw",g,y,u,u),updateRectShape(a,s,"ne",N,y,u,u),updateRectShape(a,s,"sw",g,R,u,u),updateRectShape(a,s,"se",N,R,u,u))}function updateCommon$1(a,s){var l=s.__brushOption,o=l.transformable,c=s.childAt(0);c.useStyle(makeStyle(l)),c.attr({silent:!o,cursor:o?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(u){var d=s.childOfName(u.join("")),f=u.length===1?getGlobalDirection1(a,u[0]):getGlobalDirection2(a,u);d&&d.attr({silent:!o,invisible:!o,cursor:o?CURSOR_MAP[f]+"-resize":null})})}function updateRectShape(a,s,l,o,c,u,d){var f=s.childOfName(l);f&&f.setShape(pointsToRect(clipByPanel(a,s,[[o,c],[o+u,c+d]])))}function makeStyle(a){return defaults({strokeNoScale:!0},a.brushStyle)}function formatRectRange(a,s,l,o){var c=[mathMin$1(a,l),mathMin$1(s,o)],u=[mathMax$1(a,l),mathMax$1(s,o)];return[[c[0],u[0]],[c[1],u[1]]]}function getTransform(a){return getTransform$1(a.group)}function getGlobalDirection1(a,s){var l={w:"left",e:"right",n:"top",s:"bottom"},o={left:"w",right:"e",top:"n",bottom:"s"},c=transformDirection(l[s],getTransform(a));return o[c]}function getGlobalDirection2(a,s){var l=[getGlobalDirection1(a,s[0]),getGlobalDirection1(a,s[1])];return(l[0]==="e"||l[0]==="w")&&l.reverse(),l.join("")}function driftRect(a,s,l,o,c,u){var d=l.__brushOption,f=a.toRectRange(d.range),g=toLocalDelta(s,c,u);each$f(o,function(y){var $=DIRECTION_MAP[y];f[$[0]][$[1]]+=g[$[0]]}),d.range=a.fromRectRange(formatRectRange(f[0][0],f[1][0],f[0][1],f[1][1])),updateCoverAfterCreation(s,l),trigger(s,{isEnd:!1})}function driftPolygon(a,s,l,o){var c=s.__brushOption.range,u=toLocalDelta(a,l,o);each$f(c,function(d){d[0]+=u[0],d[1]+=u[1]}),updateCoverAfterCreation(a,s),trigger(a,{isEnd:!1})}function toLocalDelta(a,s,l){var o=a.group,c=o.transformCoordToLocal(s,l),u=o.transformCoordToLocal(0,0);return[c[0]-u[0],c[1]-u[1]]}function clipByPanel(a,s,l){var o=getPanelByCover(a,s);return o&&o!==BRUSH_PANEL_GLOBAL?o.clipPath(l,a._transform):clone$4(l)}function pointsToRect(a){var s=mathMin$1(a[0][0],a[1][0]),l=mathMin$1(a[0][1],a[1][1]),o=mathMax$1(a[0][0],a[1][0]),c=mathMax$1(a[0][1],a[1][1]);return{x:s,y:l,width:o-s,height:c-l}}function resetCursor(a,s,l){if(!(!a._brushType||isOutsideZrArea(a,s.offsetX,s.offsetY))){var o=a._zr,c=a._covers,u=getPanelByPoint(a,s,l);if(!a._dragging)for(var d=0;d<c.length;d++){var f=c[d].__brushOption;if(u&&(u===BRUSH_PANEL_GLOBAL||f.panelId===u.panelId)&&coverRenderers[f.brushType].contain(c[d],l[0],l[1]))return}u&&o.setCursorStyle("crosshair")}}function preventDefault(a){var s=a.event;s.preventDefault&&s.preventDefault()}function mainShapeContain(a,s,l){return a.childOfName("main").contain(s,l)}function updateCoverByMouse(a,s,l,o){var c=a._creatingCover,u=a._creatingPanel,d=a._brushOption,f;if(a._track.push(l.slice()),shouldShowCover(a)||c){if(u&&!c){d.brushMode==="single"&&clearCovers(a);var g=clone$4(d);g.brushType=determineBrushType(g.brushType,u),g.panelId=u===BRUSH_PANEL_GLOBAL?null:u.panelId,c=a._creatingCover=createCover(a,g),a._covers.push(c)}if(c){var y=coverRenderers[determineBrushType(a._brushType,u)],$=c.__brushOption;$.range=y.getCreatingRange(clipByPanel(a,c,a._track)),o&&(endCreating(a,c),y.updateCommon(a,c)),updateCoverShape(a,c),f={isEnd:o}}}else o&&d.brushMode==="single"&&d.removeOnClick&&getPanelByPoint(a,s,l)&&clearCovers(a)&&(f={isEnd:o,removeOnClick:!0});return f}function determineBrushType(a,s){return a==="auto"?s.defaultBrushType:a}var pointerHandlers={mousedown:function(a){if(this._dragging)handleDragEnd(this,a);else if(!a.target||!a.target.draggable){preventDefault(a);var s=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var l=this._creatingPanel=getPanelByPoint(this,a,s);l&&(this._dragging=!0,this._track=[s.slice()])}},mousemove:function(a){var s=a.offsetX,l=a.offsetY,o=this.group.transformCoordToLocal(s,l);if(resetCursor(this,a,o),this._dragging){preventDefault(a);var c=updateCoverByMouse(this,a,o,!1);c&&trigger(this,c)}},mouseup:function(a){handleDragEnd(this,a)}};function handleDragEnd(a,s){if(a._dragging){preventDefault(s);var l=s.offsetX,o=s.offsetY,c=a.group.transformCoordToLocal(l,o),u=updateCoverByMouse(a,s,c,!0);a._dragging=!1,a._track=[],a._creatingCover=null,u&&trigger(a,u)}}function isOutsideZrArea(a,s,l){var o=a._zr;return s<0||s>o.getWidth()||l<0||l>o.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(a,s){function l(o){return o}return createBaseRectCover({toRectRange:l,fromRectRange:l},a,s,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var s=getTrackEnds(a);return formatRectRange(s[1][0],s[1][1],s[0][0],s[0][1])},updateCoverShape:function(a,s,l,o){updateBaseRect(a,s,l,o)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(a,s){var l=new Group$3;return l.add(new Polyline$1({name:"main",style:makeStyle(s),silent:!0})),l},getCreatingRange:function(a){return a},endCreating:function(a,s){s.remove(s.childAt(0)),s.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,a,s),ondragend:curry$1(trigger,a,{isEnd:!0})}))},updateCoverShape:function(a,s,l,o){s.childAt(0).setShape({points:clipByPanel(a,s,l)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(a){return{createCover:function(s,l){return createBaseRectCover({toRectRange:function(o){var c=[o,[0,100]];return a&&c.reverse(),c},fromRectRange:function(o){return o[a]}},s,l,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(s){var l=getTrackEnds(s),o=mathMin$1(l[0][a],l[1][a]),c=mathMax$1(l[0][a],l[1][a]);return[o,c]},updateCoverShape:function(s,l,o,c){var u,d=getPanelByCover(s,l);if(d!==BRUSH_PANEL_GLOBAL&&d.getLinearBrushOtherExtent)u=d.getLinearBrushOtherExtent(a);else{var f=s._zr;u=[0,[f.getWidth(),f.getHeight()][1-a]]}var g=[o,u];a&&g.reverse(),updateBaseRect(s,l,g,c)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(a){return a=normalizeRect(a),function(s){return clipPointsByRect(s,a)}}function makeLinearBrushOtherExtent(a,s){return a=normalizeRect(a),function(l){var o=s??l,c=o?a.width:a.height,u=o?a.x:a.y;return[u,u+(c||0)]}}function makeRectIsTargetByCursor(a,s,l){var o=normalizeRect(a);return function(c,u){return o.contain(u[0],u[1])&&!onIrrelevantElement(c,s,l)}}function normalizeRect(a){return BoundingRect.create(a)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o){a.prototype.init.apply(this,arguments),(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this))},s.prototype.render=function(l,o,c,u){if(!fromAxisAreaSelect(l,o,u)){this.axisModel=l,this.api=c,this.group.removeAll();var d=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!l.get("show")){var f=getCoordSysModel(l,o),g=f.coordinateSystem,y=l.getAreaSelectStyle(),$=y.width,x=l.axis.dim,N=g.getAxisLayout(x),R=extend({strokeContainThreshold:$},N),j=new AxisBuilder(l,R);each$f(elementList$1,j.add,j),this._axisGroup.add(j.getGroup()),this._refreshBrushController(R,y,l,f,$,c),groupTransition(d,this._axisGroup,l)}}},s.prototype._refreshBrushController=function(l,o,c,u,d,f){var g=c.axis.getExtent(),y=g[1]-g[0],$=Math.min(30,Math.abs(y)*.1),x=BoundingRect.create({x:g[0],y:-d/2,width:y,height:d});x.x-=$,x.width+=2*$,this._brushController.mount({enableGlobalPan:!0,rotation:l.rotation,x:l.position[0],y:l.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(x),isTargetByCursor:makeRectIsTargetByCursor(x,f,u),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(x,0)}]).enableBrush({brushType:"lineX",brushStyle:o,removeOnClick:!0}).updateCovers(getCoverInfoList(c))},s.prototype._onBrush=function(l){var o=l.areas,c=this.axisModel,u=c.axis,d=map$1(o,function(f){return[u.coordToData(f.range[0],!0),u.coordToData(f.range[1],!0)]});(!c.option.realtime===l.isEnd||l.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:c.id,intervals:d})},s.prototype.dispose=function(){this._brushController.dispose()},s.type="parallelAxis",s}(ComponentView);function fromAxisAreaSelect(a,s,l){return l&&l.type==="axisAreaSelect"&&s.findComponents({mainType:"parallelAxis",query:l})[0]===a}function getCoverInfoList(a){var s=a.axis;return map$1(a.activeIntervals,function(l){return{brushType:"lineX",panelId:"pl",range:[s.dataToCoord(l[0],!0),s.dataToCoord(l[1],!0)]}})}function getCoordSysModel(a,s){return s.getComponent("parallel",a.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(a){a.registerAction(actionInfo,function(s,l){l.eachComponent({mainType:"parallelAxis",query:s},function(o){o.axis.model.setActiveIntervals(s.intervals)})}),a.registerAction("parallelAxisExpand",function(s,l){l.eachComponent({mainType:"parallel",query:s},function(o){o.setAxisExpand(s)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$D(a){a.registerComponentView(ParallelView),a.registerComponentModel(ParallelModel),a.registerCoordinateSystem("parallel",parallelCoordSysCreator),a.registerPreprocessor(parallelPreprocessor),a.registerComponentModel(ParallelAxisModel),a.registerComponentView(ParallelAxisView),axisModelCreator(a,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(a)}function install$C(a){use(install$D),a.registerChartView(ParallelView$1),a.registerSeriesModel(ParallelSeriesModel),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),SankeyPath=function(a){__extends(s,a);function s(l){return a.call(this,l)||this}return s.prototype.getDefaultShape=function(){return new SankeyPathShape},s.prototype.buildPath=function(l,o){var c=o.extent;l.moveTo(o.x1,o.y1),l.bezierCurveTo(o.cpx1,o.cpy1,o.cpx2,o.cpy2,o.x2,o.y2),o.orient==="vertical"?(l.lineTo(o.x2+c,o.y2),l.bezierCurveTo(o.cpx2+c,o.cpy2,o.cpx1+c,o.cpy1,o.x1+c,o.y1)):(l.lineTo(o.x2,o.y2+c),l.bezierCurveTo(o.cpx2,o.cpy2+c,o.cpx1,o.cpy1+c,o.x1,o.y1+c)),l.closePath()},s.prototype.highlight=function(){enterEmphasis(this)},s.prototype.downplay=function(){leaveEmphasis(this)},s}(Path),SankeyView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._focusAdjacencyDisabled=!1,l}return s.prototype.render=function(l,o,c){var u=this,d=l.getGraph(),f=this.group,g=l.layoutInfo,y=g.width,$=g.height,x=l.getData(),N=l.getData("edge"),R=l.get("orient");this._model=l,f.removeAll(),f.x=g.x,f.y=g.y,d.eachEdge(function(j){var ne=new SankeyPath,se=getECData(ne);se.dataIndex=j.dataIndex,se.seriesIndex=l.seriesIndex,se.dataType="edge";var ce=j.getModel(),fe=ce.getModel("lineStyle"),ea=fe.get("curveness"),ta=j.node1.getLayout(),na=j.node1.getModel(),aa=na.get("localX"),ia=na.get("localY"),sa=j.node2.getLayout(),ra=j.node2.getModel(),la=ra.get("localX"),oa=ra.get("localY"),ca=j.getLayout(),pa,ua,da,ha,ga,fa,ma,va;ne.shape.extent=Math.max(1,ca.dy),ne.shape.orient=R,R==="vertical"?(pa=(aa!=null?aa*y:ta.x)+ca.sy,ua=(ia!=null?ia*$:ta.y)+ta.dy,da=(la!=null?la*y:sa.x)+ca.ty,ha=oa!=null?oa*$:sa.y,ga=pa,fa=ua*(1-ea)+ha*ea,ma=da,va=ua*ea+ha*(1-ea)):(pa=(aa!=null?aa*y:ta.x)+ta.dx,ua=(ia!=null?ia*$:ta.y)+ca.sy,da=la!=null?la*y:sa.x,ha=(oa!=null?oa*$:sa.y)+ca.ty,ga=pa*(1-ea)+da*ea,fa=ua,ma=pa*ea+da*(1-ea),va=ha),ne.setShape({x1:pa,y1:ua,x2:da,y2:ha,cpx1:ga,cpy1:fa,cpx2:ma,cpy2:va}),ne.useStyle(fe.getItemStyle()),applyCurveStyle(ne.style,R,j);var ka=""+ce.get("value"),ya=getLabelStatesModels(ce,"edgeLabel");setLabelStyle(ne,ya,{labelFetcher:{getFormattedLabel:function(Ca,$a,Pa,Da,Ta,Ba){return l.getFormattedLabel(Ca,$a,"edge",Da,retrieve3(Ta,ya.normal&&ya.normal.get("formatter"),ka),Ba)}},labelDataIndex:j.dataIndex,defaultText:ka}),ne.setTextConfig({position:"inside"});var ba=ce.getModel("emphasis");setStatesStylesFromModel(ne,ce,"lineStyle",function(Ca){var $a=Ca.getItemStyle();return applyCurveStyle($a,R,j),$a}),f.add(ne),N.setItemGraphicEl(j.dataIndex,ne);var Ea=ba.get("focus");toggleHoverEmphasis(ne,Ea==="adjacency"?j.getAdjacentDataIndices():Ea==="trajectory"?j.getTrajectoryDataIndices():Ea,ba.get("blurScope"),ba.get("disabled"))}),d.eachNode(function(j){var ne=j.getLayout(),se=j.getModel(),ce=se.get("localX"),fe=se.get("localY"),ea=se.getModel("emphasis"),ta=se.get(["itemStyle","borderRadius"])||0,na=new Rect$2({shape:{x:ce!=null?ce*y:ne.x,y:fe!=null?fe*$:ne.y,width:ne.dx,height:ne.dy,r:ta},style:se.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(na,getLabelStatesModels(se),{labelFetcher:{getFormattedLabel:function(ia,sa){return l.getFormattedLabel(ia,sa,"node")}},labelDataIndex:j.dataIndex,defaultText:j.id}),na.disableLabelAnimation=!0,na.setStyle("fill",j.getVisual("color")),na.setStyle("decal",j.getVisual("style").decal),setStatesStylesFromModel(na,se),f.add(na),x.setItemGraphicEl(j.dataIndex,na),getECData(na).dataType="node";var aa=ea.get("focus");toggleHoverEmphasis(na,aa==="adjacency"?j.getAdjacentDataIndices():aa==="trajectory"?j.getTrajectoryDataIndices():aa,ea.get("blurScope"),ea.get("disabled"))}),x.eachItemGraphicEl(function(j,ne){var se=x.getItemModel(ne);se.get("draggable")&&(j.drift=function(ce,fe){u._focusAdjacencyDisabled=!0,this.shape.x+=ce,this.shape.y+=fe,this.dirty(),c.dispatchAction({type:"dragNode",seriesId:l.id,dataIndex:x.getRawIndex(ne),localX:this.shape.x/y,localY:this.shape.y/$})},j.ondragend=function(){u._focusAdjacencyDisabled=!1},j.draggable=!0,j.cursor="move")}),!this._data&&l.isAnimationEnabled()&&f.setClipPath(createGridClipShape$1(f.getBoundingRect(),l,function(){f.removeClipPath()})),this._data=l.getData()},s.prototype.dispose=function(){},s.type="sankey",s}(ChartView);function applyCurveStyle(a,s,l){switch(a.fill){case"source":a.fill=l.node1.getVisual("color"),a.decal=l.node1.getVisual("style").decal;break;case"target":a.fill=l.node2.getVisual("color"),a.decal=l.node2.getVisual("style").decal;break;case"gradient":var o=l.node1.getVisual("color"),c=l.node2.getVisual("color");isString$2(o)&&isString$2(c)&&(a.fill=new LinearGradient(0,0,+(s==="horizontal"),+(s==="vertical"),[{color:o,offset:0},{color:c,offset:1}]))}}function createGridClipShape$1(a,s,l){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{width:a.width+20}},s,l),o}var SankeySeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.getInitialData=function(l,o){var c=l.edges||l.links,u=l.data||l.nodes,d=l.levels;this.levelModels=[];for(var f=this.levelModels,g=0;g<d.length;g++)d[g].depth!=null&&d[g].depth>=0&&(f[d[g].depth]=new Model(d[g],this,o));if(u&&c){var y=createGraphFromNodeEdge(u,c,this,!0,$);return y.data}function $(x,N){x.wrapMethod("getItemModel",function(R,j){var ne=R.parentModel,se=ne.getData().getItemLayout(j);if(se){var ce=se.depth,fe=ne.levelModels[ce];fe&&(R.parentModel=fe)}return R}),N.wrapMethod("getItemModel",function(R,j){var ne=R.parentModel,se=ne.getGraph().getEdgeByIndex(j),ce=se.node1.getLayout();if(ce){var fe=ce.depth,ea=ne.levelModels[fe];ea&&(R.parentModel=ea)}return R})}},s.prototype.setNodePosition=function(l,o){var c=this.option.data||this.option.nodes,u=c[l];u.localX=o[0],u.localY=o[1]},s.prototype.getGraph=function(){return this.getData().graph},s.prototype.getEdgeData=function(){return this.getGraph().edgeData},s.prototype.formatTooltip=function(l,o,c){function u(R){return isNaN(R)||R==null}if(c==="edge"){var d=this.getDataParams(l,c),f=d.data,g=d.value,y=f.source+" -- "+f.target;return createTooltipMarkup("nameValue",{name:y,value:g,noValue:u(g)})}else{var $=this.getGraph().getNodeByIndex(l),x=$.getLayout().value,N=this.getDataParams(l,c).data.name;return createTooltipMarkup("nameValue",{name:N!=null?N+"":null,value:x,noValue:u(x)})}},s.prototype.optionUpdated=function(){},s.prototype.getDataParams=function(l,o){var c=a.prototype.getDataParams.call(this,l,o);if(c.value==null&&o==="node"){var u=this.getGraph().getNodeByIndex(l),d=u.getLayout().value;c.value=d}return c},s.type="series.sankey",s.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},s}(SeriesModel);function sankeyLayout(a,s){a.eachSeriesByType("sankey",function(l){var o=l.get("nodeWidth"),c=l.get("nodeGap"),u=getViewRect$1(l,s);l.layoutInfo=u;var d=u.width,f=u.height,g=l.getGraph(),y=g.nodes,$=g.edges;computeNodeValues(y);var x=filter(y,function(ne){return ne.getLayout().value===0}),N=x.length!==0?0:l.get("layoutIterations"),R=l.get("orient"),j=l.get("nodeAlign");layoutSankey(y,$,o,c,d,f,N,R,j)})}function getViewRect$1(a,s){return getLayoutRect(a.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()})}function layoutSankey(a,s,l,o,c,u,d,f,g){computeNodeBreadths(a,s,l,c,u,f,g),computeNodeDepths(a,s,u,c,o,d,f),computeEdgeDepths(a,f)}function computeNodeValues(a){each$f(a,function(s){var l=sum(s.outEdges,getEdgeValue),o=sum(s.inEdges,getEdgeValue),c=s.getValue()||0,u=Math.max(l,o,c);s.setLayout({value:u},!0)})}function computeNodeBreadths(a,s,l,o,c,u,d){for(var f=[],g=[],y=[],$=[],x=0,N=0;N<s.length;N++)f[N]=1;for(var N=0;N<a.length;N++)g[N]=a[N].inEdges.length,g[N]===0&&y.push(a[N]);for(var R=-1;y.length;){for(var j=0;j<y.length;j++){var ne=y[j],se=ne.hostGraph.data.getRawDataItem(ne.dataIndex),ce=se.depth!=null&&se.depth>=0;ce&&se.depth>R&&(R=se.depth),ne.setLayout({depth:ce?se.depth:x},!0),u==="vertical"?ne.setLayout({dy:l},!0):ne.setLayout({dx:l},!0);for(var fe=0;fe<ne.outEdges.length;fe++){var ea=ne.outEdges[fe],ta=s.indexOf(ea);f[ta]=0;var na=ea.node2,aa=a.indexOf(na);--g[aa]===0&&$.indexOf(na)<0&&$.push(na)}}++x,y=$,$=[]}for(var N=0;N<f.length;N++)if(f[N]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var ia=R>x-1?R:x-1;d&&d!=="left"&&adjustNodeWithNodeAlign(a,d,u,ia);var sa=u==="vertical"?(c-l)/ia:(o-l)/ia;scaleNodeBreadths(a,sa,u)}function isNodeDepth(a){var s=a.hostGraph.data.getRawDataItem(a.dataIndex);return s.depth!=null&&s.depth>=0}function adjustNodeWithNodeAlign(a,s,l,o){if(s==="right"){for(var c=[],u=a,d=0;u.length;){for(var f=0;f<u.length;f++){var g=u[f];g.setLayout({skNodeHeight:d},!0);for(var y=0;y<g.inEdges.length;y++){var $=g.inEdges[y];c.indexOf($.node1)<0&&c.push($.node1)}}u=c,c=[],++d}each$f(a,function(x){isNodeDepth(x)||x.setLayout({depth:Math.max(0,o-x.getLayout().skNodeHeight)},!0)})}else s==="justify"&&moveSinksRight(a,o)}function moveSinksRight(a,s){each$f(a,function(l){!isNodeDepth(l)&&!l.outEdges.length&&l.setLayout({depth:s},!0)})}function scaleNodeBreadths(a,s,l){each$f(a,function(o){var c=o.getLayout().depth*s;l==="vertical"?o.setLayout({y:c},!0):o.setLayout({x:c},!0)})}function computeNodeDepths(a,s,l,o,c,u,d){var f=prepareNodesByBreadth(a,d);initializeNodeDepth(f,s,l,o,c,d),resolveCollisions(f,c,l,o,d);for(var g=1;u>0;u--)g*=.99,relaxRightToLeft(f,g,d),resolveCollisions(f,c,l,o,d),relaxLeftToRight(f,g,d),resolveCollisions(f,c,l,o,d)}function prepareNodesByBreadth(a,s){var l=[],o=s==="vertical"?"y":"x",c=groupData(a,function(u){return u.getLayout()[o]});return c.keys.sort(function(u,d){return u-d}),each$f(c.keys,function(u){l.push(c.buckets.get(u))}),l}function initializeNodeDepth(a,s,l,o,c,u){var d=1/0;each$f(a,function(f){var g=f.length,y=0;each$f(f,function(x){y+=x.getLayout().value});var $=u==="vertical"?(o-(g-1)*c)/y:(l-(g-1)*c)/y;$<d&&(d=$)}),each$f(a,function(f){each$f(f,function(g,y){var $=g.getLayout().value*d;u==="vertical"?(g.setLayout({x:y},!0),g.setLayout({dx:$},!0)):(g.setLayout({y},!0),g.setLayout({dy:$},!0))})}),each$f(s,function(f){var g=+f.getValue()*d;f.setLayout({dy:g},!0)})}function resolveCollisions(a,s,l,o,c){var u=c==="vertical"?"x":"y";each$f(a,function(d){d.sort(function(ne,se){return ne.getLayout()[u]-se.getLayout()[u]});for(var f,g,y,$=0,x=d.length,N=c==="vertical"?"dx":"dy",R=0;R<x;R++)g=d[R],y=$-g.getLayout()[u],y>0&&(f=g.getLayout()[u]+y,c==="vertical"?g.setLayout({x:f},!0):g.setLayout({y:f},!0)),$=g.getLayout()[u]+g.getLayout()[N]+s;var j=c==="vertical"?o:l;if(y=$-s-j,y>0){f=g.getLayout()[u]-y,c==="vertical"?g.setLayout({x:f},!0):g.setLayout({y:f},!0),$=f;for(var R=x-2;R>=0;--R)g=d[R],y=g.getLayout()[u]+g.getLayout()[N]+s-$,y>0&&(f=g.getLayout()[u]-y,c==="vertical"?g.setLayout({x:f},!0):g.setLayout({y:f},!0)),$=g.getLayout()[u]}})}function relaxRightToLeft(a,s,l){each$f(a.slice().reverse(),function(o){each$f(o,function(c){if(c.outEdges.length){var u=sum(c.outEdges,weightedTarget,l)/sum(c.outEdges,getEdgeValue);if(isNaN(u)){var d=c.outEdges.length;u=d?sum(c.outEdges,centerTarget,l)/d:0}if(l==="vertical"){var f=c.getLayout().x+(u-center(c,l))*s;c.setLayout({x:f},!0)}else{var g=c.getLayout().y+(u-center(c,l))*s;c.setLayout({y:g},!0)}}})})}function weightedTarget(a,s){return center(a.node2,s)*a.getValue()}function centerTarget(a,s){return center(a.node2,s)}function weightedSource(a,s){return center(a.node1,s)*a.getValue()}function centerSource(a,s){return center(a.node1,s)}function center(a,s){return s==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function getEdgeValue(a){return a.getValue()}function sum(a,s,l){for(var o=0,c=a.length,u=-1;++u<c;){var d=+s(a[u],l);isNaN(d)||(o+=d)}return o}function relaxLeftToRight(a,s,l){each$f(a,function(o){each$f(o,function(c){if(c.inEdges.length){var u=sum(c.inEdges,weightedSource,l)/sum(c.inEdges,getEdgeValue);if(isNaN(u)){var d=c.inEdges.length;u=d?sum(c.inEdges,centerSource,l)/d:0}if(l==="vertical"){var f=c.getLayout().x+(u-center(c,l))*s;c.setLayout({x:f},!0)}else{var g=c.getLayout().y+(u-center(c,l))*s;c.setLayout({y:g},!0)}}})})}function computeEdgeDepths(a,s){var l=s==="vertical"?"x":"y";each$f(a,function(o){o.outEdges.sort(function(c,u){return c.node2.getLayout()[l]-u.node2.getLayout()[l]}),o.inEdges.sort(function(c,u){return c.node1.getLayout()[l]-u.node1.getLayout()[l]})}),each$f(a,function(o){var c=0,u=0;each$f(o.outEdges,function(d){d.setLayout({sy:c},!0),c+=d.getLayout().dy}),each$f(o.inEdges,function(d){d.setLayout({ty:u},!0),u+=d.getLayout().dy})})}function sankeyVisual(a){a.eachSeriesByType("sankey",function(s){var l=s.getGraph(),o=l.nodes,c=l.edges;if(o.length){var u=1/0,d=-1/0;each$f(o,function(f){var g=f.getLayout().value;g<u&&(u=g),g>d&&(d=g)}),each$f(o,function(f){var g=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[u,d],visual:s.get("color")}),y=g.mapValueToVisual(f.getLayout().value),$=f.getModel().get(["itemStyle","color"]);$!=null?(f.setVisual("color",$),f.setVisual("style",{fill:$})):(f.setVisual("color",y),f.setVisual("style",{fill:y}))})}c.length&&each$f(c,function(f){var g=f.getModel().get("lineStyle");f.setVisual("style",g)})})}function install$B(a){a.registerChartView(SankeyView),a.registerSeriesModel(SankeySeriesModel),a.registerLayout(sankeyLayout),a.registerVisual(sankeyVisual),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(s,l){l.eachComponent({mainType:"series",subType:"sankey",query:s},function(o){o.setNodePosition(s.dataIndex,[s.localX,s.localY])})})}var WhiskerBoxCommonMixin=function(){function a(){}return a.prototype.getInitialData=function(s,l){var o,c=l.getComponent("xAxis",this.get("xAxisIndex")),u=l.getComponent("yAxis",this.get("yAxisIndex")),d=c.get("type"),f=u.get("type"),g;d==="category"?(s.layout="horizontal",o=c.getOrdinalMeta(),g=!0):f==="category"?(s.layout="vertical",o=u.getOrdinalMeta(),g=!0):s.layout=s.layout||"horizontal";var y=["x","y"],$=s.layout==="horizontal"?0:1,x=this._baseAxisDim=y[$],N=y[1-$],R=[c,u],j=R[$].get("type"),ne=R[1-$].get("type"),se=s.data;if(se&&g){var ce=[];each$f(se,function(ta,na){var aa;isArray$3(ta)?(aa=ta.slice(),ta.unshift(na)):isArray$3(ta.value)?(aa=extend({},ta),aa.value=aa.value.slice(),ta.value.unshift(na)):aa=ta,ce.push(aa)}),s.data=ce}var fe=this.defaultValueDimensions,ea=[{name:x,type:getDimensionTypeByAxis(j),ordinalMeta:o,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:N,type:getDimensionTypeByAxis(ne),dimsDef:fe.slice()}];return createSeriesDataSimply(this,{coordDimensions:ea,dimensionsCount:fe.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,ea,this)})},a.prototype.getBaseAxis=function(){var s=this._baseAxisDim;return this.ecModel.getComponent(s+"Axis",this.get(s+"AxisIndex")).axis},a}(),BoxplotSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],l.visualDrawType="stroke",l}return s.type="series.boxplot",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},s}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=l.getData(),d=this.group,f=this._data;this._data||d.removeAll();var g=l.get("layout")==="horizontal"?1:0;u.diff(f).add(function(y){if(u.hasValue(y)){var $=u.getItemLayout(y),x=createNormalBox$1($,u,y,g,!0);u.setItemGraphicEl(y,x),d.add(x)}}).update(function(y,$){var x=f.getItemGraphicEl($);if(!u.hasValue(y)){d.remove(x);return}var N=u.getItemLayout(y);x?(saveOldStyle(x),updateNormalBoxData(N,x,u,y)):x=createNormalBox$1(N,u,y,g),d.add(x),u.setItemGraphicEl(y,x)}).remove(function(y){var $=f.getItemGraphicEl(y);$&&d.remove($)}).execute(),this._data=u},s.prototype.remove=function(l){var o=this.group,c=this._data;this._data=null,c&&c.eachItemGraphicEl(function(u){u&&o.remove(u)})},s.type="boxplot",s}(ChartView),BoxPathShape=function(){function a(){}return a}(),BoxPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="boxplotBoxPath",o}return s.prototype.getDefaultShape=function(){return new BoxPathShape},s.prototype.buildPath=function(l,o){var c=o.points,u=0;for(l.moveTo(c[u][0],c[u][1]),u++;u<4;u++)l.lineTo(c[u][0],c[u][1]);for(l.closePath();u<c.length;u++)l.moveTo(c[u][0],c[u][1]),u++,l.lineTo(c[u][0],c[u][1])},s}(Path);function createNormalBox$1(a,s,l,o,c){var u=a.ends,d=new BoxPath({shape:{points:c?transInit$1(u,o,a):u}});return updateNormalBoxData(a,d,s,l,c),d}function updateNormalBoxData(a,s,l,o,c){var u=l.hostModel,d=graphic[c?"initProps":"updateProps"];d(s,{shape:{points:a.ends}},u,o),s.useStyle(l.getItemVisual(o,"style")),s.style.strokeNoScale=!0,s.z2=100;var f=l.getItemModel(o),g=f.getModel("emphasis");setStatesStylesFromModel(s,f),toggleHoverEmphasis(s,g.get("focus"),g.get("blurScope"),g.get("disabled"))}function transInit$1(a,s,l){return map$1(a,function(o){return o=o.slice(),o[s]=l.initBaseline,o})}var each$9=each$f;function boxplotLayout(a){var s=groupSeriesByAxis(a);each$9(s,function(l){var o=l.seriesModels;o.length&&(calculateBase(l),each$9(o,function(c,u){layoutSingleSeries(c,l.boxOffsetList[u],l.boxWidthList[u])}))})}function groupSeriesByAxis(a){var s=[],l=[];return a.eachSeriesByType("boxplot",function(o){var c=o.getBaseAxis(),u=indexOf(l,c);u<0&&(u=l.length,l[u]=c,s[u]={axis:c,seriesModels:[]}),s[u].seriesModels.push(o)}),s}function calculateBase(a){var s=a.axis,l=a.seriesModels,o=l.length,c=a.boxWidthList=[],u=a.boxOffsetList=[],d=[],f;if(s.type==="category")f=s.getBandWidth();else{var g=0;each$9(l,function(j){g=Math.max(g,j.getData().count())});var y=s.getExtent();f=Math.abs(y[1]-y[0])/g}each$9(l,function(j){var ne=j.get("boxWidth");isArray$3(ne)||(ne=[ne,ne]),d.push([parsePercent(ne[0],f)||0,parsePercent(ne[1],f)||0])});var $=f*.8-2,x=$/o*.3,N=($-x*(o-1))/o,R=N/2-$/2;each$9(l,function(j,ne){u.push(R),R+=x+N,c.push(Math.min(Math.max(N,d[ne][0]),d[ne][1]))})}function layoutSingleSeries(a,s,l){var o=a.coordinateSystem,c=a.getData(),u=l/2,d=a.get("layout")==="horizontal"?0:1,f=1-d,g=["x","y"],y=c.mapDimension(g[d]),$=c.mapDimensionsAll(g[f]);if(y==null||$.length<5)return;for(var x=0;x<c.count();x++){var N=c.get(y,x),R=ea(N,$[2],x),j=ea(N,$[0],x),ne=ea(N,$[1],x),se=ea(N,$[3],x),ce=ea(N,$[4],x),fe=[];ta(fe,ne,!1),ta(fe,se,!0),fe.push(j,ne,ce,se),na(fe,j),na(fe,ce),na(fe,R),c.setItemLayout(x,{initBaseline:R[f],ends:fe})}function ea(aa,ia,sa){var ra=c.get(ia,sa),la=[];la[d]=aa,la[f]=ra;var oa;return isNaN(aa)||isNaN(ra)?oa=[NaN,NaN]:(oa=o.dataToPoint(la),oa[d]+=s),oa}function ta(aa,ia,sa){var ra=ia.slice(),la=ia.slice();ra[d]+=u,la[d]-=u,sa?aa.push(ra,la):aa.push(la,ra)}function na(aa,ia){var sa=ia.slice(),ra=ia.slice();sa[d]-=u,ra[d]+=u,aa.push(sa,ra)}}function prepareBoxplotData(a,s){s=s||{};for(var l=[],o=[],c=s.boundIQR,u=c==="none"||c===0,d=0;d<a.length;d++){var f=asc$2(a[d].slice()),g=quantile(f,.25),y=quantile(f,.5),$=quantile(f,.75),x=f[0],N=f[f.length-1],R=(c??1.5)*($-g),j=u?x:Math.max(x,g-R),ne=u?N:Math.min(N,$+R),se=s.itemNameFormatter,ce=isFunction$2(se)?se({value:d}):isString$2(se)?se.replace("{value}",d+""):d+"";l.push([ce,j,g,y,$,ne]);for(var fe=0;fe<f.length;fe++){var ea=f[fe];if(ea<j||ea>ne){var ta=[ce,ea];o.push(ta)}}}return{boxData:l,outliers:o}}var boxplotTransform={type:"echarts:boxplot",transform:function a(s){var l=s.upstream;if(l.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var o="";throwError(o)}var c=prepareBoxplotData(l.getRawData(),s.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:c.boxData},{data:c.outliers}]}};function install$A(a){a.registerSeriesModel(BoxplotSeriesModel),a.registerChartView(BoxplotView),a.registerLayout(boxplotLayout),a.registerTransform(boxplotTransform)}var SKIP_PROPS=["color","borderColor"],CandlestickView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(l),this._isLargeDraw?this._renderLarge(l):this._renderNormal(l)},s.prototype.incrementalPrepareRender=function(l,o,c){this._clear(),this._updateDrawMode(l)},s.prototype.incrementalRender=function(l,o,c,u){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(l,o):this._incrementalRenderNormal(l,o)},s.prototype.eachRendered=function(l){traverseElements(this._progressiveEls||this.group,l)},s.prototype._updateDrawMode=function(l){var o=l.pipelineContext.large;(this._isLargeDraw==null||o!==this._isLargeDraw)&&(this._isLargeDraw=o,this._clear())},s.prototype._renderNormal=function(l){var o=l.getData(),c=this._data,u=this.group,d=o.getLayout("isSimpleBox"),f=l.get("clip",!0),g=l.coordinateSystem,y=g.getArea&&g.getArea();this._data||u.removeAll(),o.diff(c).add(function($){if(o.hasValue($)){var x=o.getItemLayout($);if(f&&isNormalBoxClipped(y,x))return;var N=createNormalBox(x,$,!0);initProps(N,{shape:{points:x.ends}},l,$),setBoxCommon(N,o,$,d),u.add(N),o.setItemGraphicEl($,N)}}).update(function($,x){var N=c.getItemGraphicEl(x);if(!o.hasValue($)){u.remove(N);return}var R=o.getItemLayout($);if(f&&isNormalBoxClipped(y,R)){u.remove(N);return}N?(updateProps$1(N,{shape:{points:R.ends}},l,$),saveOldStyle(N)):N=createNormalBox(R),setBoxCommon(N,o,$,d),u.add(N),o.setItemGraphicEl($,N)}).remove(function($){var x=c.getItemGraphicEl($);x&&u.remove(x)}).execute(),this._data=o},s.prototype._renderLarge=function(l){this._clear(),createLarge(l,this.group);var o=l.get("clip",!0)?createClipPath(l.coordinateSystem,!1,l):null;o?this.group.setClipPath(o):this.group.removeClipPath()},s.prototype._incrementalRenderNormal=function(l,o){for(var c=o.getData(),u=c.getLayout("isSimpleBox"),d;(d=l.next())!=null;){var f=c.getItemLayout(d),g=createNormalBox(f);setBoxCommon(g,c,d,u),g.incremental=!0,this.group.add(g),this._progressiveEls.push(g)}},s.prototype._incrementalRenderLarge=function(l,o){createLarge(o,this.group,this._progressiveEls,!0)},s.prototype.remove=function(l){this._clear()},s.prototype._clear=function(){this.group.removeAll(),this._data=null},s.type="candlestick",s}(ChartView),NormalBoxPathShape=function(){function a(){}return a}(),NormalBoxPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="normalCandlestickBox",o}return s.prototype.getDefaultShape=function(){return new NormalBoxPathShape},s.prototype.buildPath=function(l,o){var c=o.points;this.__simpleBox?(l.moveTo(c[4][0],c[4][1]),l.lineTo(c[6][0],c[6][1])):(l.moveTo(c[0][0],c[0][1]),l.lineTo(c[1][0],c[1][1]),l.lineTo(c[2][0],c[2][1]),l.lineTo(c[3][0],c[3][1]),l.closePath(),l.moveTo(c[4][0],c[4][1]),l.lineTo(c[5][0],c[5][1]),l.moveTo(c[6][0],c[6][1]),l.lineTo(c[7][0],c[7][1]))},s}(Path);function createNormalBox(a,s,l){var o=a.ends;return new NormalBoxPath({shape:{points:l?transInit(o,a):o},z2:100})}function isNormalBoxClipped(a,s){for(var l=!0,o=0;o<s.ends.length;o++)if(a.contain(s.ends[o][0],s.ends[o][1])){l=!1;break}return l}function setBoxCommon(a,s,l,o){var c=s.getItemModel(l);a.useStyle(s.getItemVisual(l,"style")),a.style.strokeNoScale=!0,a.__simpleBox=o,setStatesStylesFromModel(a,c)}function transInit(a,s){return map$1(a,function(l){return l=l.slice(),l[1]=s.initBaseline,l})}var LargeBoxPathShape=function(){function a(){}return a}(),LargeBoxPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o.type="largeCandlestickBox",o}return s.prototype.getDefaultShape=function(){return new LargeBoxPathShape},s.prototype.buildPath=function(l,o){for(var c=o.points,u=0;u<c.length;)if(this.__sign===c[u++]){var d=c[u++];l.moveTo(d,c[u++]),l.lineTo(d,c[u++])}else u+=3},s}(Path);function createLarge(a,s,l,o){var c=a.getData(),u=c.getLayout("largePoints"),d=new LargeBoxPath({shape:{points:u},__sign:1,ignoreCoarsePointer:!0});s.add(d);var f=new LargeBoxPath({shape:{points:u},__sign:-1,ignoreCoarsePointer:!0});s.add(f);var g=new LargeBoxPath({shape:{points:u},__sign:0,ignoreCoarsePointer:!0});s.add(g),setLargeStyle(1,d,a),setLargeStyle(-1,f,a),setLargeStyle(0,g,a),o&&(d.incremental=!0,f.incremental=!0),l&&l.push(d,f)}function setLargeStyle(a,s,l,o){var c=l.get(["itemStyle",a>0?"borderColor":"borderColor0"])||l.get(["itemStyle",a>0?"color":"color0"]);a===0&&(c=l.get(["itemStyle","borderColorDoji"]));var u=l.getModel("itemStyle").getItemStyle(SKIP_PROPS);s.useStyle(u),s.style.fill=null,s.style.stroke=c}var CandlestickSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],l}return s.prototype.getShadowDim=function(){return"open"},s.prototype.brushSelector=function(l,o,c){var u=o.getItemLayout(l);return u&&c.rect(u.brushRect)},s.type="series.candlestick",s.dependencies=["xAxis","yAxis","grid"],s.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},s}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(a){!a||!isArray$3(a.series)||each$f(a.series,function(s){isObject$5(s)&&s.type==="k"&&(s.type="candlestick")})}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"],candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(a,s){function l(u,d){return d.get(u>0?positiveColorQuery:negativeColorQuery)}function o(u,d){return d.get(u===0?dojiBorderColorQuery:u>0?positiveBorderColorQuery:negativeBorderColorQuery)}if(!s.isSeriesFiltered(a)){var c=a.pipelineContext.large;return!c&&{progress:function(u,d){for(var f;(f=u.next())!=null;){var g=d.getItemModel(f),y=d.getItemLayout(f).sign,$=g.getItemStyle();$.fill=l(y,g),$.stroke=o(y,g)||$.fill;var x=d.ensureUniqueItemVisual(f,"style");extend(x,$)}}}}}},candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(a){var s=a.coordinateSystem,l=a.getData(),o=calculateCandleWidth(a,l),c=0,u=1,d=["x","y"],f=l.getDimensionIndex(l.mapDimension(d[c])),g=map$1(l.mapDimensionsAll(d[u]),l.getDimensionIndex,l),y=g[0],$=g[1],x=g[2],N=g[3];if(l.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),f<0||g.length<4)return;return{progress:a.pipelineContext.large?j:R};function R(ne,se){for(var ce,fe=se.getStore();(ce=ne.next())!=null;){var ea=fe.get(f,ce),ta=fe.get(y,ce),na=fe.get($,ce),aa=fe.get(x,ce),ia=fe.get(N,ce),sa=Math.min(ta,na),ra=Math.max(ta,na),la=ga(sa,ea),oa=ga(ra,ea),ca=ga(aa,ea),pa=ga(ia,ea),ua=[];fa(ua,oa,0),fa(ua,la,1),ua.push(va(pa),va(oa),va(ca),va(la));var da=se.getItemModel(ce),ha=!!da.get(["itemStyle","borderColorDoji"]);se.setItemLayout(ce,{sign:getSign(fe,ce,ta,na,$,ha),initBaseline:ta>na?oa[u]:la[u],ends:ua,brushRect:ma(aa,ia,ea)})}function ga(ka,ya){var ba=[];return ba[c]=ya,ba[u]=ka,isNaN(ya)||isNaN(ka)?[NaN,NaN]:s.dataToPoint(ba)}function fa(ka,ya,ba){var Ea=ya.slice(),Ca=ya.slice();Ea[c]=subPixelOptimize(Ea[c]+o/2,1,!1),Ca[c]=subPixelOptimize(Ca[c]-o/2,1,!0),ba?ka.push(Ea,Ca):ka.push(Ca,Ea)}function ma(ka,ya,ba){var Ea=ga(ka,ba),Ca=ga(ya,ba);return Ea[c]-=o/2,Ca[c]-=o/2,{x:Ea[0],y:Ea[1],width:o,height:Ca[1]-Ea[1]}}function va(ka){return ka[c]=subPixelOptimize(ka[c],1),ka}}function j(ne,se){for(var ce=createFloat32Array(ne.count*4),fe=0,ea,ta=[],na=[],aa,ia=se.getStore(),sa=!!a.get(["itemStyle","borderColorDoji"]);(aa=ne.next())!=null;){var ra=ia.get(f,aa),la=ia.get(y,aa),oa=ia.get($,aa),ca=ia.get(x,aa),pa=ia.get(N,aa);if(isNaN(ra)||isNaN(ca)||isNaN(pa)){ce[fe++]=NaN,fe+=3;continue}ce[fe++]=getSign(ia,aa,la,oa,$,sa),ta[c]=ra,ta[u]=ca,ea=s.dataToPoint(ta,null,na),ce[fe++]=ea?ea[0]:NaN,ce[fe++]=ea?ea[1]:NaN,ta[u]=pa,ea=s.dataToPoint(ta,null,na),ce[fe++]=ea?ea[1]:NaN}se.setLayout("largePoints",ce)}}};function getSign(a,s,l,o,c,u){var d;return l>o?d=-1:l<o?d=1:d=u?0:s>0?a.get(c,s-1)<=o?1:-1:1,d}function calculateCandleWidth(a,s){var l=a.getBaseAxis(),o,c=l.type==="category"?l.getBandWidth():(o=l.getExtent(),Math.abs(o[1]-o[0])/s.count()),u=parsePercent(retrieve2(a.get("barMaxWidth"),c),c),d=parsePercent(retrieve2(a.get("barMinWidth"),1),c),f=a.get("barWidth");return f!=null?parsePercent(f,c):Math.max(Math.min(c/2,u),d)}function install$z(a){a.registerChartView(CandlestickView),a.registerSeriesModel(CandlestickSeriesModel),a.registerPreprocessor(candlestickPreprocessor),a.registerVisual(candlestickVisual),a.registerLayout(candlestickLayout)}function updateRipplePath(a,s){var l=s.rippleEffectColor||s.color;a.eachChild(function(o){o.attr({z:s.z,zlevel:s.zlevel,style:{stroke:s.brushType==="stroke"?l:null,fill:s.brushType==="fill"?l:null}})})}var EffectSymbol=function(a){__extends(s,a);function s(l,o){var c=a.call(this)||this,u=new Symbol$1(l,o),d=new Group$3;return c.add(u),c.add(d),c.updateData(l,o),c}return s.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},s.prototype.startEffectAnimation=function(l){for(var o=l.symbolType,c=l.color,u=l.rippleNumber,d=this.childAt(1),f=0;f<u;f++){var g=createSymbol$1(o,-1,-1,2,2,c);g.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var y=-f/u*l.period+l.effectOffset;g.animate("",!0).when(l.period,{scaleX:l.rippleScale/2,scaleY:l.rippleScale/2}).delay(y).start(),g.animateStyle(!0).when(l.period,{opacity:0}).delay(y).start(),d.add(g)}updateRipplePath(d,l)},s.prototype.updateEffectAnimation=function(l){for(var o=this._effectCfg,c=this.childAt(1),u=["symbolType","period","rippleScale","rippleNumber"],d=0;d<u.length;d++){var f=u[d];if(o[f]!==l[f]){this.stopEffectAnimation(),this.startEffectAnimation(l);return}}updateRipplePath(c,l)},s.prototype.highlight=function(){enterEmphasis(this)},s.prototype.downplay=function(){leaveEmphasis(this)},s.prototype.getSymbolType=function(){var l=this.childAt(0);return l&&l.getSymbolType()},s.prototype.updateData=function(l,o){var c=this,u=l.hostModel;this.childAt(0).updateData(l,o);var d=this.childAt(1),f=l.getItemModel(o),g=l.getItemVisual(o,"symbol"),y=normalizeSymbolSize(l.getItemVisual(o,"symbolSize")),$=l.getItemVisual(o,"style"),x=$&&$.fill,N=f.getModel("emphasis");d.setScale(y),d.traverse(function(se){se.setStyle("fill",x)});var R=normalizeSymbolOffset(l.getItemVisual(o,"symbolOffset"),y);R&&(d.x=R[0],d.y=R[1]);var j=l.getItemVisual(o,"symbolRotate");d.rotation=(j||0)*Math.PI/180||0;var ne={};ne.showEffectOn=u.get("showEffectOn"),ne.rippleScale=f.get(["rippleEffect","scale"]),ne.brushType=f.get(["rippleEffect","brushType"]),ne.period=f.get(["rippleEffect","period"])*1e3,ne.effectOffset=o/l.count(),ne.z=u.getShallow("z")||0,ne.zlevel=u.getShallow("zlevel")||0,ne.symbolType=g,ne.color=x,ne.rippleEffectColor=f.get(["rippleEffect","color"]),ne.rippleNumber=f.get(["rippleEffect","number"]),ne.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(ne):this.startEffectAnimation(ne),this._effectCfg=ne):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(se){se==="emphasis"?ne.showEffectOn!=="render"&&c.startEffectAnimation(ne):se==="normal"&&ne.showEffectOn!=="render"&&c.stopEffectAnimation()}),this._effectCfg=ne,toggleHoverEmphasis(this,N.get("focus"),N.get("blurScope"),N.get("disabled"))},s.prototype.fadeOut=function(l){l&&l()},s}(Group$3),EffectScatterView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},s.prototype.render=function(l,o,c){var u=l.getData(),d=this._symbolDraw;d.updateData(u,{clipShape:this._getClipShape(l)}),this.group.add(d.group)},s.prototype._getClipShape=function(l){var o=l.coordinateSystem,c=o&&o.getArea&&o.getArea();return l.get("clip",!0)?c:null},s.prototype.updateTransform=function(l,o,c){var u=l.getData();this.group.dirty();var d=pointsLayout("").reset(l,o,c);d.progress&&d.progress({start:0,end:u.count(),count:u.count()},u),this._symbolDraw.updateLayout()},s.prototype._updateGroupTransform=function(l){var o=l.coordinateSystem;o&&o.getRoamTransform&&(this.group.transform=clone$2(o.getRoamTransform()),this.group.decomposeTransform())},s.prototype.remove=function(l,o){this._symbolDraw&&this._symbolDraw.remove(!0)},s.type="effectScatter",s}(ChartView),EffectScatterSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l}return s.prototype.getInitialData=function(l,o){return createSeriesData(null,this,{useEncodeDefaulter:!0})},s.prototype.brushSelector=function(l,o,c){return c.point(o.getItemLayout(l))},s.type="series.effectScatter",s.dependencies=["grid","polar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},s}(SeriesModel);function install$y(a){a.registerChartView(EffectScatterView),a.registerSeriesModel(EffectScatterSeriesModel),a.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this)||this;return u.add(u.createLine(l,o,c)),u._updateEffectSymbol(l,o),u}return s.prototype.createLine=function(l,o,c){return new Line(l,o,c)},s.prototype._updateEffectSymbol=function(l,o){var c=l.getItemModel(o),u=c.getModel("effect"),d=u.get("symbolSize"),f=u.get("symbol");isArray$3(d)||(d=[d,d]);var g=l.getItemVisual(o,"style"),y=u.get("color")||g&&g.stroke,$=this.childAt(1);this._symbolType!==f&&(this.remove($),$=createSymbol$1(f,-.5,-.5,1,1,y),$.z2=100,$.culling=!0,this.add($)),$&&($.setStyle("shadowColor",y),$.setStyle(u.getItemStyle(["color"])),$.scaleX=d[0],$.scaleY=d[1],$.setColor(y),this._symbolType=f,this._symbolScale=d,this._updateEffectAnimation(l,u,o))},s.prototype._updateEffectAnimation=function(l,o,c){var u=this.childAt(1);if(u){var d=l.getItemLayout(c),f=o.get("period")*1e3,g=o.get("loop"),y=o.get("roundTrip"),$=o.get("constantSpeed"),x=retrieve(o.get("delay"),function(R){return R/l.count()*f/3});if(u.ignore=!0,this._updateAnimationPoints(u,d),$>0&&(f=this._getLineLength(u)/$*1e3),f!==this._period||g!==this._loop||y!==this._roundTrip){u.stopAnimation();var N=void 0;isFunction$2(x)?N=x(c):N=x,u.__t>0&&(N=-f*u.__t),this._animateSymbol(u,f,N,g,y)}this._period=f,this._loop=g,this._roundTrip=y}},s.prototype._animateSymbol=function(l,o,c,u,d){if(o>0){l.__t=0;var f=this,g=l.animate("",u).when(d?o*2:o,{__t:d?2:1}).delay(c).during(function(){f._updateSymbolPosition(l)});u||g.done(function(){f.remove(l)}),g.start()}},s.prototype._getLineLength=function(l){return dist$1(l.__p1,l.__cp1)+dist$1(l.__cp1,l.__p2)},s.prototype._updateAnimationPoints=function(l,o){l.__p1=o[0],l.__p2=o[1],l.__cp1=o[2]||[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]},s.prototype.updateData=function(l,o,c){this.childAt(0).updateData(l,o,c),this._updateEffectSymbol(l,o)},s.prototype._updateSymbolPosition=function(l){var o=l.__p1,c=l.__p2,u=l.__cp1,d=l.__t<1?l.__t:2-l.__t,f=[l.x,l.y],g=f.slice(),y=quadraticAt$1,$=quadraticDerivativeAt;f[0]=y(o[0],u[0],c[0],d),f[1]=y(o[1],u[1],c[1],d);var x=l.__t<1?$(o[0],u[0],c[0],d):$(c[0],u[0],o[0],1-d),N=l.__t<1?$(o[1],u[1],c[1],d):$(c[1],u[1],o[1],1-d);l.rotation=-Math.atan2(N,x)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(l.__lastT!==void 0&&l.__lastT<l.__t?(l.scaleY=dist$1(g,f)*1.05,d===1&&(f[0]=g[0]+(f[0]-g[0])/2,f[1]=g[1]+(f[1]-g[1])/2)):l.__lastT===1?l.scaleY=2*dist$1(o,f):l.scaleY=this._symbolScale[1]),l.__lastT=l.__t,l.ignore=!1,l.x=f[0],l.y=f[1]},s.prototype.updateLayout=function(l,o){this.childAt(0).updateLayout(l,o);var c=l.getItemModel(o).getModel("effect");this._updateEffectAnimation(l,c,o)},s}(Group$3),Polyline=function(a){__extends(s,a);function s(l,o,c){var u=a.call(this)||this;return u._createPolyline(l,o,c),u}return s.prototype._createPolyline=function(l,o,c){var u=l.getItemLayout(o),d=new Polyline$1({shape:{points:u}});this.add(d),this._updateCommonStl(l,o,c)},s.prototype.updateData=function(l,o,c){var u=l.hostModel,d=this.childAt(0),f={shape:{points:l.getItemLayout(o)}};updateProps$1(d,f,u,o),this._updateCommonStl(l,o,c)},s.prototype._updateCommonStl=function(l,o,c){var u=this.childAt(0),d=l.getItemModel(o),f=c&&c.emphasisLineStyle,g=c&&c.focus,y=c&&c.blurScope,$=c&&c.emphasisDisabled;if(!c||l.hasItemOption){var x=d.getModel("emphasis");f=x.getModel("lineStyle").getLineStyle(),$=x.get("disabled"),g=x.get("focus"),y=x.get("blurScope")}u.useStyle(l.getItemVisual(o,"style")),u.style.fill=null,u.style.strokeNoScale=!0;var N=u.ensureState("emphasis");N.style=f,toggleHoverEmphasis(this,g,y,$)},s.prototype.updateLayout=function(l,o){var c=this.childAt(0);c.setShape("points",l.getItemLayout(o))},s}(Group$3),EffectPolyline=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l._lastFrame=0,l._lastFramePercent=0,l}return s.prototype.createLine=function(l,o,c){return new Polyline(l,o,c)},s.prototype._updateAnimationPoints=function(l,o){this._points=o;for(var c=[0],u=0,d=1;d<o.length;d++){var f=o[d-1],g=o[d];u+=dist$1(f,g),c.push(u)}if(u===0){this._length=0;return}for(var d=0;d<c.length;d++)c[d]/=u;this._offsets=c,this._length=u},s.prototype._getLineLength=function(){return this._length},s.prototype._updateSymbolPosition=function(l){var o=l.__t<1?l.__t:2-l.__t,c=this._points,u=this._offsets,d=c.length;if(u){var f=this._lastFrame,g;if(o<this._lastFramePercent){var y=Math.min(f+1,d-1);for(g=y;g>=0&&!(u[g]<=o);g--);g=Math.min(g,d-2)}else{for(g=f;g<d&&!(u[g]>o);g++);g=Math.min(g-1,d-2)}var $=(o-u[g])/(u[g+1]-u[g]),x=c[g],N=c[g+1];l.x=x[0]*(1-$)+$*N[0],l.y=x[1]*(1-$)+$*N[1];var R=l.__t<1?N[0]-x[0]:x[0]-N[0],j=l.__t<1?N[1]-x[1]:x[1]-N[1];l.rotation=-Math.atan2(j,R)-Math.PI/2,this._lastFrame=g,this._lastFramePercent=o,l.ignore=!1}},s}(EffectLine),LargeLinesPathShape=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),LargeLinesPath=function(a){__extends(s,a);function s(l){var o=a.call(this,l)||this;return o._off=0,o.hoverDataIdx=-1,o}return s.prototype.reset=function(){this.notClear=!1,this._off=0},s.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},s.prototype.getDefaultShape=function(){return new LargeLinesPathShape},s.prototype.buildPath=function(l,o){var c=o.segs,u=o.curveness,d;if(o.polyline)for(d=this._off;d<c.length;){var f=c[d++];if(f>0){l.moveTo(c[d++],c[d++]);for(var g=1;g<f;g++)l.lineTo(c[d++],c[d++])}}else for(d=this._off;d<c.length;){var y=c[d++],$=c[d++],x=c[d++],N=c[d++];if(l.moveTo(y,$),u>0){var R=(y+x)/2-($-N)*u,j=($+N)/2-(x-y)*u;l.quadraticCurveTo(R,j,x,N)}else l.lineTo(x,N)}this.incremental&&(this._off=d,this.notClear=!0)},s.prototype.findDataIndex=function(l,o){var c=this.shape,u=c.segs,d=c.curveness,f=this.style.lineWidth;if(c.polyline)for(var g=0,y=0;y<u.length;){var $=u[y++];if($>0)for(var x=u[y++],N=u[y++],R=1;R<$;R++){var j=u[y++],ne=u[y++];if(containStroke$4(x,N,j,ne,f,l,o))return g}g++}else for(var g=0,y=0;y<u.length;){var x=u[y++],N=u[y++],j=u[y++],ne=u[y++];if(d>0){var se=(x+j)/2-(N-ne)*d,ce=(N+ne)/2-(j-x)*d;if(containStroke$2(x,N,se,ce,j,ne,f,l,o))return g}else if(containStroke$4(x,N,j,ne,f,l,o))return g;g++}return-1},s.prototype.contain=function(l,o){var c=this.transformCoordToLocal(l,o),u=this.getBoundingRect();if(l=c[0],o=c[1],u.contain(l,o)){var d=this.hoverDataIdx=this.findDataIndex(l,o);return d>=0}return this.hoverDataIdx=-1,!1},s.prototype.getBoundingRect=function(){var l=this._rect;if(!l){for(var o=this.shape,c=o.segs,u=1/0,d=1/0,f=-1/0,g=-1/0,y=0;y<c.length;){var $=c[y++],x=c[y++];u=Math.min($,u),f=Math.max($,f),d=Math.min(x,d),g=Math.max(x,g)}l=this._rect=new BoundingRect(u,d,f,g)}return l},s}(Path),LargeLineDraw=function(){function a(){this.group=new Group$3}return a.prototype.updateData=function(s){this._clear();var l=this._create();l.setShape({segs:s.getLayout("linesPoints")}),this._setCommon(l,s)},a.prototype.incrementalPrepareUpdate=function(s){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(s,l){var o=this._newAdded[0],c=l.getLayout("linesPoints"),u=o&&o.shape.segs;if(u&&u.length<2e4){var d=u.length,f=new Float32Array(d+c.length);f.set(u),f.set(c,d),o.setShape({segs:f})}else{this._newAdded=[];var g=this._create();g.incremental=!0,g.setShape({segs:c}),this._setCommon(g,l),g.__startIndex=s.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(s){this._newAdded[0]&&s(this._newAdded[0])},a.prototype._create=function(){var s=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(s),this.group.add(s),s},a.prototype._setCommon=function(s,l,o){var c=l.hostModel;s.setShape({polyline:c.get("polyline"),curveness:c.get(["lineStyle","curveness"])}),s.useStyle(c.getModel("lineStyle").getLineStyle()),s.style.strokeNoScale=!0;var u=l.getVisual("style");u&&u.stroke&&s.setStyle("stroke",u.stroke),s.setStyle("fill",null);var d=getECData(s);d.seriesIndex=c.seriesIndex,s.on("mousemove",function(f){d.dataIndex=null;var g=s.hoverDataIdx;g>0&&(d.dataIndex=g+s.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(a){var s=a.coordinateSystem;if(s){var l=a.get("polyline"),o=a.pipelineContext.large;return{progress:function(c,u){var d=[];if(o){var f=void 0,g=c.end-c.start;if(l){for(var y=0,$=c.start;$<c.end;$++)y+=a.getLineCoordsCount($);f=new Float32Array(g+y*2)}else f=new Float32Array(g*4);for(var x=0,N=[],$=c.start;$<c.end;$++){var R=a.getLineCoords($,d);l&&(f[x++]=R);for(var j=0;j<R;j++)N=s.dataToPoint(d[j],!1,N),f[x++]=N[0],f[x++]=N[1]}u.setLayout("linesPoints",f)}else for(var $=c.start;$<c.end;$++){var ne=u.getItemModel($),R=a.getLineCoords($,d),se=[];if(l)for(var ce=0;ce<R;ce++)se.push(s.dataToPoint(d[ce]));else{se[0]=s.dataToPoint(d[0]),se[1]=s.dataToPoint(d[1]);var fe=ne.get(["lineStyle","curveness"]);+fe&&(se[2]=[(se[0][0]+se[1][0])/2-(se[0][1]-se[1][1])*fe,(se[0][1]+se[1][1])/2-(se[1][0]-se[0][0])*fe])}u.setItemLayout($,se)}}}}}},LinesView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=l.getData(),d=this._updateLineDraw(u,l),f=l.get("zlevel"),g=l.get(["effect","trailLength"]),y=c.getZr(),$=y.painter.getType()==="svg";$||y.painter.getLayer(f).clear(!0),this._lastZlevel!=null&&!$&&y.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(l)&&g>0&&($||y.configLayer(f,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(g/10+.9,1),0)})),d.updateData(u);var x=l.get("clip",!0)&&createClipPath(l.coordinateSystem,!1,l);x?this.group.setClipPath(x):this.group.removeClipPath(),this._lastZlevel=f,this._finished=!0},s.prototype.incrementalPrepareRender=function(l,o,c){var u=l.getData(),d=this._updateLineDraw(u,l);d.incrementalPrepareUpdate(u),this._clearLayer(c),this._finished=!1},s.prototype.incrementalRender=function(l,o,c){this._lineDraw.incrementalUpdate(l,o.getData()),this._finished=l.end===o.getData().count()},s.prototype.eachRendered=function(l){this._lineDraw&&this._lineDraw.eachRendered(l)},s.prototype.updateTransform=function(l,o,c){var u=l.getData(),d=l.pipelineContext;if(!this._finished||d.large||d.progressiveRender)return{update:!0};var f=linesLayout.reset(l,o,c);f.progress&&f.progress({start:0,end:u.count(),count:u.count()},u),this._lineDraw.updateLayout(),this._clearLayer(c)},s.prototype._updateLineDraw=function(l,o){var c=this._lineDraw,u=this._showEffect(o),d=!!o.get("polyline"),f=o.pipelineContext,g=f.large;return(!c||u!==this._hasEffet||d!==this._isPolyline||g!==this._isLargeDraw)&&(c&&c.remove(),c=this._lineDraw=g?new LargeLineDraw:new LineDraw(d?u?EffectPolyline:Polyline:u?EffectLine:Line),this._hasEffet=u,this._isPolyline=d,this._isLargeDraw=g),this.group.add(c.group),c},s.prototype._showEffect=function(l){return!!l.get(["effect","show"])},s.prototype._clearLayer=function(l){var o=l.getZr(),c=o.painter.getType()==="svg";!c&&this._lastZlevel!=null&&o.painter.getLayer(this._lastZlevel).clear(!0)},s.prototype.remove=function(l,o){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(o)},s.prototype.dispose=function(l,o){this.remove(l,o)},s.type="lines",s}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(a){var s=a.data;s&&s[0]&&s[0][0]&&s[0][0].coord&&(a.data=map$1(s,function(l){var o=[l[0].coord,l[1].coord],c={coords:o};return l[0].name&&(c.fromName=l[0].name),l[1].name&&(c.toName=l[1].name),mergeAll([c,l[0],l[1]])}))}var LinesSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.visualStyleAccessPath="lineStyle",l.visualDrawType="stroke",l}return s.prototype.init=function(l){l.data=l.data||[],compatEc2(l);var o=this._processFlatCoordsArray(l.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(l.data=new Float32Array(o.count)),a.prototype.init.apply(this,arguments)},s.prototype.mergeOption=function(l){if(compatEc2(l),l.data){var o=this._processFlatCoordsArray(l.data);this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset,o.flatCoords&&(l.data=new Float32Array(o.count))}a.prototype.mergeOption.apply(this,arguments)},s.prototype.appendData=function(l){var o=this._processFlatCoordsArray(l.data);o.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,o.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,o.flatCoordsOffset)):(this._flatCoords=o.flatCoords,this._flatCoordsOffset=o.flatCoordsOffset),l.data=new Float32Array(o.count)),this.getRawData().appendData(l.data)},s.prototype._getCoordsFromItemModel=function(l){var o=this.getData().getItemModel(l),c=o.option instanceof Array?o.option:o.getShallow("coords");return c},s.prototype.getLineCoordsCount=function(l){return this._flatCoordsOffset?this._flatCoordsOffset[l*2+1]:this._getCoordsFromItemModel(l).length},s.prototype.getLineCoords=function(l,o){if(this._flatCoordsOffset){for(var c=this._flatCoordsOffset[l*2],u=this._flatCoordsOffset[l*2+1],d=0;d<u;d++)o[d]=o[d]||[],o[d][0]=this._flatCoords[c+d*2],o[d][1]=this._flatCoords[c+d*2+1];return u}else{for(var f=this._getCoordsFromItemModel(l),d=0;d<f.length;d++)o[d]=o[d]||[],o[d][0]=f[d][0],o[d][1]=f[d][1];return f.length}},s.prototype._processFlatCoordsArray=function(l){var o=0;if(this._flatCoords&&(o=this._flatCoords.length),isNumber$2(l[0])){for(var c=l.length,u=new Uint32Arr(c),d=new Float64Arr(c),f=0,g=0,y=0,$=0;$<c;){y++;var x=l[$++];u[g++]=f+o,u[g++]=x;for(var N=0;N<x;N++){var R=l[$++],j=l[$++];d[f++]=R,d[f++]=j}}return{flatCoordsOffset:new Uint32Array(u.buffer,0,g),flatCoords:d,count:y}}return{flatCoordsOffset:null,flatCoords:null,count:l.length}},s.prototype.getInitialData=function(l,o){var c=new SeriesData(["value"],this);return c.hasItemOption=!1,c.initData(l.data,[],function(u,d,f,g){if(u instanceof Array)return NaN;c.hasItemOption=!0;var y=u.value;if(y!=null)return y instanceof Array?y[g]:y}),c},s.prototype.formatTooltip=function(l,o,c){var u=this.getData(),d=u.getItemModel(l),f=d.get("name");if(f)return f;var g=d.get("fromName"),y=d.get("toName"),$=[];return g!=null&&$.push(g),y!=null&&$.push(y),createTooltipMarkup("nameValue",{name:$.join(" > ")})},s.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},s.prototype.getProgressive=function(){var l=this.option.progressive;return l??(this.option.large?1e4:this.get("progressive"))},s.prototype.getProgressiveThreshold=function(){var l=this.option.progressiveThreshold;return l??(this.option.large?2e4:this.get("progressiveThreshold"))},s.prototype.getZLevelKey=function(){var l=this.getModel("effect"),o=l.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:l.get("show")&&o>0?o+"":""},s.type="series.lines",s.dependencies=["grid","polar","geo","calendar"],s.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},s}(SeriesModel);function normalize(a){return a instanceof Array||(a=[a,a]),a}var linesVisual={seriesType:"lines",reset:function(a){var s=normalize(a.get("symbol")),l=normalize(a.get("symbolSize")),o=a.getData();o.setVisual("fromSymbol",s&&s[0]),o.setVisual("toSymbol",s&&s[1]),o.setVisual("fromSymbolSize",l&&l[0]),o.setVisual("toSymbolSize",l&&l[1]);function c(u,d){var f=u.getItemModel(d),g=normalize(f.getShallow("symbol",!0)),y=normalize(f.getShallow("symbolSize",!0));g[0]&&u.setItemVisual(d,"fromSymbol",g[0]),g[1]&&u.setItemVisual(d,"toSymbol",g[1]),y[0]&&u.setItemVisual(d,"fromSymbolSize",y[0]),y[1]&&u.setItemVisual(d,"toSymbolSize",y[1])}return{dataEach:o.hasItemOption?c:null}}};function install$x(a){a.registerChartView(LinesView),a.registerSeriesModel(LinesSeriesModel),a.registerLayout(linesLayout),a.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var s=platformApi.createCanvas();this.canvas=s}return a.prototype.update=function(s,l,o,c,u,d){var f=this._getBrush(),g=this._getGradient(u,"inRange"),y=this._getGradient(u,"outOfRange"),$=this.pointSize+this.blurSize,x=this.canvas,N=x.getContext("2d"),R=s.length;x.width=l,x.height=o;for(var j=0;j<R;++j){var ne=s[j],se=ne[0],ce=ne[1],fe=ne[2],ea=c(fe);N.globalAlpha=ea,N.drawImage(f,se-$,ce-$)}if(!x.width||!x.height)return x;for(var ta=N.getImageData(0,0,x.width,x.height),na=ta.data,aa=0,ia=na.length,sa=this.minOpacity,ra=this.maxOpacity,la=ra-sa;aa<ia;){var ea=na[aa+3]/256,oa=Math.floor(ea*(GRADIENT_LEVELS-1))*4;if(ea>0){var ca=d(ea)?g:y;ea>0&&(ea=ea*la+sa),na[aa++]=ca[oa],na[aa++]=ca[oa+1],na[aa++]=ca[oa+2],na[aa++]=ca[oa+3]*ea*256}else aa+=4}return N.putImageData(ta,0,0),x},a.prototype._getBrush=function(){var s=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),l=this.pointSize+this.blurSize,o=l*2;s.width=o,s.height=o;var c=s.getContext("2d");return c.clearRect(0,0,o,o),c.shadowOffsetX=o,c.shadowBlur=this.blurSize,c.shadowColor="#000",c.beginPath(),c.arc(-l,l,this.pointSize,0,Math.PI*2,!0),c.closePath(),c.fill(),s},a.prototype._getGradient=function(s,l){for(var o=this._gradientPixels,c=o[l]||(o[l]=new Uint8ClampedArray(256*4)),u=[0,0,0,0],d=0,f=0;f<256;f++)s[l](f/255,!0,u),c[d++]=u[0],c[d++]=u[1],c[d++]=u[2],c[d++]=u[3];return c},a}();function getIsInPiecewiseRange(a,s,l){var o=a[1]-a[0];s=map$1(s,function(d){return{interval:[(d.interval[0]-a[0])/o,(d.interval[1]-a[0])/o]}});var c=s.length,u=0;return function(d){var f;for(f=u;f<c;f++){var g=s[f].interval;if(g[0]<=d&&d<=g[1]){u=f;break}}if(f===c)for(f=u-1;f>=0;f--){var g=s[f].interval;if(g[0]<=d&&d<=g[1]){u=f;break}}return f>=0&&f<c&&l[f]}}function getIsInContinuousRange(a,s){var l=a[1]-a[0];return s=[(s[0]-a[0])/l,(s[1]-a[0])/l],function(o){return o>=s[0]&&o<=s[1]}}function isGeoCoordSys(a){var s=a.dimensions;return s[0]==="lng"&&s[1]==="lat"}var HeatmapView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u;o.eachComponent("visualMap",function(f){f.eachTargetSeries(function(g){g===l&&(u=f)})}),this._progressiveEls=null,this.group.removeAll();var d=l.coordinateSystem;d.type==="cartesian2d"||d.type==="calendar"?this._renderOnCartesianAndCalendar(l,c,0,l.getData().count()):isGeoCoordSys(d)&&this._renderOnGeo(d,l,u,c)},s.prototype.incrementalPrepareRender=function(l,o,c){this.group.removeAll()},s.prototype.incrementalRender=function(l,o,c,u){var d=o.coordinateSystem;d&&(isGeoCoordSys(d)?this.render(o,c,u):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(o,u,l.start,l.end,!0)))},s.prototype.eachRendered=function(l){traverseElements(this._progressiveEls||this.group,l)},s.prototype._renderOnCartesianAndCalendar=function(l,o,c,u,d){var f=l.coordinateSystem,g=isCoordinateSystemType(f,"cartesian2d"),y,$,x,N;if(g){var R=f.getAxis("x"),j=f.getAxis("y");y=R.getBandWidth()+.5,$=j.getBandWidth()+.5,x=R.scale.getExtent(),N=j.scale.getExtent()}for(var ne=this.group,se=l.getData(),ce=l.getModel(["emphasis","itemStyle"]).getItemStyle(),fe=l.getModel(["blur","itemStyle"]).getItemStyle(),ea=l.getModel(["select","itemStyle"]).getItemStyle(),ta=l.get(["itemStyle","borderRadius"]),na=getLabelStatesModels(l),aa=l.getModel("emphasis"),ia=aa.get("focus"),sa=aa.get("blurScope"),ra=aa.get("disabled"),la=g?[se.mapDimension("x"),se.mapDimension("y"),se.mapDimension("value")]:[se.mapDimension("time"),se.mapDimension("value")],oa=c;oa<u;oa++){var ca=void 0,pa=se.getItemVisual(oa,"style");if(g){var ua=se.get(la[0],oa),da=se.get(la[1],oa);if(isNaN(se.get(la[2],oa))||isNaN(ua)||isNaN(da)||ua<x[0]||ua>x[1]||da<N[0]||da>N[1])continue;var ha=f.dataToPoint([ua,da]);ca=new Rect$2({shape:{x:ha[0]-y/2,y:ha[1]-$/2,width:y,height:$},style:pa})}else{if(isNaN(se.get(la[1],oa)))continue;ca=new Rect$2({z2:1,shape:f.dataToRect([se.get(la[0],oa)]).contentShape,style:pa})}if(se.hasItemOption){var ga=se.getItemModel(oa),fa=ga.getModel("emphasis");ce=fa.getModel("itemStyle").getItemStyle(),fe=ga.getModel(["blur","itemStyle"]).getItemStyle(),ea=ga.getModel(["select","itemStyle"]).getItemStyle(),ta=ga.get(["itemStyle","borderRadius"]),ia=fa.get("focus"),sa=fa.get("blurScope"),ra=fa.get("disabled"),na=getLabelStatesModels(ga)}ca.shape.r=ta;var ma=l.getRawValue(oa),va="-";ma&&ma[2]!=null&&(va=ma[2]+""),setLabelStyle(ca,na,{labelFetcher:l,labelDataIndex:oa,defaultOpacity:pa.opacity,defaultText:va}),ca.ensureState("emphasis").style=ce,ca.ensureState("blur").style=fe,ca.ensureState("select").style=ea,toggleHoverEmphasis(ca,ia,sa,ra),ca.incremental=d,d&&(ca.states.emphasis.hoverLayer=!0),ne.add(ca),se.setItemGraphicEl(oa,ca),this._progressiveEls&&this._progressiveEls.push(ca)}},s.prototype._renderOnGeo=function(l,o,c,u){var d=c.targetVisuals.inRange,f=c.targetVisuals.outOfRange,g=o.getData(),y=this._hmLayer||this._hmLayer||new HeatmapLayer;y.blurSize=o.get("blurSize"),y.pointSize=o.get("pointSize"),y.minOpacity=o.get("minOpacity"),y.maxOpacity=o.get("maxOpacity");var $=l.getViewRect().clone(),x=l.getRoamTransform();$.applyTransform(x);var N=Math.max($.x,0),R=Math.max($.y,0),j=Math.min($.width+$.x,u.getWidth()),ne=Math.min($.height+$.y,u.getHeight()),se=j-N,ce=ne-R,fe=[g.mapDimension("lng"),g.mapDimension("lat"),g.mapDimension("value")],ea=g.mapArray(fe,function(ia,sa,ra){var la=l.dataToPoint([ia,sa]);return la[0]-=N,la[1]-=R,la.push(ra),la}),ta=c.getExtent(),na=c.type==="visualMap.continuous"?getIsInContinuousRange(ta,c.option.range):getIsInPiecewiseRange(ta,c.getPieceList(),c.option.selected);y.update(ea,se,ce,d.color.getNormalizer(),{inRange:d.color.getColorMapper(),outOfRange:f.color.getColorMapper()},na);var aa=new ZRImage({style:{width:se,height:ce,x:N,y:R,image:y.canvas},silent:!0});this.group.add(aa)},s.type="heatmap",s}(ChartView),HeatmapSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.getInitialData=function(l,o){return createSeriesData(null,this,{generateCoord:"value"})},s.prototype.preventIncremental=function(){var l=CoordinateSystemManager.get(this.get("coordinateSystem"));if(l&&l.dimensions)return l.dimensions[0]==="lng"&&l.dimensions[1]==="lat"},s.type="series.heatmap",s.dependencies=["grid","geo","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},s}(SeriesModel);function install$w(a){a.registerChartView(HeatmapView),a.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=this.group,d=l.getData(),f=this._data,g=l.coordinateSystem,y=g.getBaseAxis(),$=y.isHorizontal(),x=g.master.getRect(),N={ecSize:{width:c.getWidth(),height:c.getHeight()},seriesModel:l,coordSys:g,coordSysExtent:[[x.x,x.x+x.width],[x.y,x.y+x.height]],isHorizontal:$,valueDim:LAYOUT_ATTRS[+$],categoryDim:LAYOUT_ATTRS[1-+$]};d.diff(f).add(function(j){if(d.hasValue(j)){var ne=getItemModel(d,j),se=getSymbolMeta(d,j,ne,N),ce=createBar(d,N,se);d.setItemGraphicEl(j,ce),u.add(ce),updateCommon(ce,N,se)}}).update(function(j,ne){var se=f.getItemGraphicEl(ne);if(!d.hasValue(j)){u.remove(se);return}var ce=getItemModel(d,j),fe=getSymbolMeta(d,j,ce,N),ea=getShapeStr(d,fe);se&&ea!==se.__pictorialShapeStr&&(u.remove(se),d.setItemGraphicEl(j,null),se=null),se?updateBar(se,N,fe):se=createBar(d,N,fe,!0),d.setItemGraphicEl(j,se),se.__pictorialSymbolMeta=fe,u.add(se),updateCommon(se,N,fe)}).remove(function(j){var ne=f.getItemGraphicEl(j);ne&&removeBar(f,j,ne.__pictorialSymbolMeta.animationModel,ne)}).execute();var R=l.get("clip",!0)?createClipPath(l.coordinateSystem,!1,l):null;return R?u.setClipPath(R):u.removeClipPath(),this._data=d,this.group},s.prototype.remove=function(l,o){var c=this.group,u=this._data;l.get("animation")?u&&u.eachItemGraphicEl(function(d){removeBar(u,getECData(d).dataIndex,l,d)}):c.removeAll()},s.type="pictorialBar",s}(ChartView);function getSymbolMeta(a,s,l,o){var c=a.getItemLayout(s),u=l.get("symbolRepeat"),d=l.get("symbolClip"),f=l.get("symbolPosition")||"start",g=l.get("symbolRotate"),y=(g||0)*Math.PI/180||0,$=l.get("symbolPatternSize")||2,x=l.isAnimationEnabled(),N={dataIndex:s,layout:c,itemModel:l,symbolType:a.getItemVisual(s,"symbol")||"circle",style:a.getItemVisual(s,"style"),symbolClip:d,symbolRepeat:u,symbolRepeatDirection:l.get("symbolRepeatDirection"),symbolPatternSize:$,rotation:y,animationModel:x?l:null,hoverScale:x&&l.get(["emphasis","scale"]),z2:l.getShallow("z",!0)||0};prepareBarLength(l,u,c,o,N),prepareSymbolSize(a,s,c,u,d,N.boundingLength,N.pxSign,$,o,N),prepareLineWidth(l,N.symbolScale,y,o,N);var R=N.symbolSize,j=normalizeSymbolOffset(l.get("symbolOffset"),R);return prepareLayoutInfo(l,R,c,u,d,j,f,N.valueLineWidth,N.boundingLength,N.repeatCutLength,o,N),N}function prepareBarLength(a,s,l,o,c){var u=o.valueDim,d=a.get("symbolBoundingData"),f=o.coordSys.getOtherAxis(o.coordSys.getBaseAxis()),g=f.toGlobalCoord(f.dataToCoord(0)),y=1-+(l[u.wh]<=0),$;if(isArray$3(d)){var x=[convertToCoordOnAxis(f,d[0])-g,convertToCoordOnAxis(f,d[1])-g];x[1]<x[0]&&x.reverse(),$=x[y]}else d!=null?$=convertToCoordOnAxis(f,d)-g:s?$=o.coordSysExtent[u.index][y]-g:$=l[u.wh];c.boundingLength=$,s&&(c.repeatCutLength=l[u.wh]),c.pxSign=$>0?1:-1}function convertToCoordOnAxis(a,s){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(s)))}function prepareSymbolSize(a,s,l,o,c,u,d,f,g,y){var $=g.valueDim,x=g.categoryDim,N=Math.abs(l[x.wh]),R=a.getItemVisual(s,"symbolSize"),j;isArray$3(R)?j=R.slice():R==null?j=["100%","100%"]:j=[R,R],j[x.index]=parsePercent(j[x.index],N),j[$.index]=parsePercent(j[$.index],o?N:Math.abs(u)),y.symbolSize=j;var ne=y.symbolScale=[j[0]/f,j[1]/f];ne[$.index]*=(g.isHorizontal?-1:1)*d}function prepareLineWidth(a,s,l,o,c){var u=a.get(BAR_BORDER_WIDTH_QUERY)||0;u&&(pathForLineWidth.attr({scaleX:s[0],scaleY:s[1],rotation:l}),pathForLineWidth.updateTransform(),u/=pathForLineWidth.getLineScale(),u*=s[o.valueDim.index]),c.valueLineWidth=u||0}function prepareLayoutInfo(a,s,l,o,c,u,d,f,g,y,$,x){var N=$.categoryDim,R=$.valueDim,j=x.pxSign,ne=Math.max(s[R.index]+f,0),se=ne;if(o){var ce=Math.abs(g),fe=retrieve(a.get("symbolMargin"),"15%")+"",ea=!1;fe.lastIndexOf("!")===fe.length-1&&(ea=!0,fe=fe.slice(0,fe.length-1));var ta=parsePercent(fe,s[R.index]),na=Math.max(ne+ta*2,0),aa=ea?0:ta*2,ia=isNumeric(o),sa=ia?o:toIntTimes((ce+aa)/na),ra=ce-sa*ne;ta=ra/2/(ea?sa:Math.max(sa-1,1)),na=ne+ta*2,aa=ea?0:ta*2,!ia&&o!=="fixed"&&(sa=y?toIntTimes((Math.abs(y)+aa)/na):0),se=sa*na-aa,x.repeatTimes=sa,x.symbolMargin=ta}var la=j*(se/2),oa=x.pathPosition=[];oa[N.index]=l[N.wh]/2,oa[R.index]=d==="start"?la:d==="end"?g-la:g/2,u&&(oa[0]+=u[0],oa[1]+=u[1]);var ca=x.bundlePosition=[];ca[N.index]=l[N.xy],ca[R.index]=l[R.xy];var pa=x.barRectShape=extend({},l);pa[R.wh]=j*Math.max(Math.abs(l[R.wh]),Math.abs(oa[R.index]+la)),pa[N.wh]=l[N.wh];var ua=x.clipShape={};ua[N.xy]=-l[N.xy],ua[N.wh]=$.ecSize[N.wh],ua[R.xy]=0,ua[R.wh]=l[R.wh]}function createPath(a){var s=a.symbolPatternSize,l=createSymbol$1(a.symbolType,-s/2,-s/2,s,s);return l.attr({culling:!0}),l.type!=="image"&&l.setStyle({strokeNoScale:!0}),l}function createOrUpdateRepeatSymbols(a,s,l,o){var c=a.__pictorialBundle,u=l.symbolSize,d=l.valueLineWidth,f=l.pathPosition,g=s.valueDim,y=l.repeatTimes||0,$=0,x=u[s.valueDim.index]+d+l.symbolMargin*2;for(eachPath(a,function(ne){ne.__pictorialAnimationIndex=$,ne.__pictorialRepeatTimes=y,$<y?updateAttr(ne,null,j($),l,o):updateAttr(ne,null,{scaleX:0,scaleY:0},l,o,function(){c.remove(ne)}),$++});$<y;$++){var N=createPath(l);N.__pictorialAnimationIndex=$,N.__pictorialRepeatTimes=y,c.add(N);var R=j($);updateAttr(N,{x:R.x,y:R.y,scaleX:0,scaleY:0},{scaleX:R.scaleX,scaleY:R.scaleY,rotation:R.rotation},l,o)}function j(ne){var se=f.slice(),ce=l.pxSign,fe=ne;return(l.symbolRepeatDirection==="start"?ce>0:ce<0)&&(fe=y-1-ne),se[g.index]=x*(fe-y/2+.5)+f[g.index],{x:se[0],y:se[1],scaleX:l.symbolScale[0],scaleY:l.symbolScale[1],rotation:l.rotation}}}function createOrUpdateSingleSymbol(a,s,l,o){var c=a.__pictorialBundle,u=a.__pictorialMainPath;u?updateAttr(u,null,{x:l.pathPosition[0],y:l.pathPosition[1],scaleX:l.symbolScale[0],scaleY:l.symbolScale[1],rotation:l.rotation},l,o):(u=a.__pictorialMainPath=createPath(l),c.add(u),updateAttr(u,{x:l.pathPosition[0],y:l.pathPosition[1],scaleX:0,scaleY:0,rotation:l.rotation},{scaleX:l.symbolScale[0],scaleY:l.symbolScale[1]},l,o))}function createOrUpdateBarRect(a,s,l){var o=extend({},s.barRectShape),c=a.__pictorialBarRect;c?updateAttr(c,null,{shape:o},s,l):(c=a.__pictorialBarRect=new Rect$2({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),c.disableMorphing=!0,a.add(c))}function createOrUpdateClip(a,s,l,o){if(l.symbolClip){var c=a.__pictorialClipPath,u=extend({},l.clipShape),d=s.valueDim,f=l.animationModel,g=l.dataIndex;if(c)updateProps$1(c,{shape:u},f,g);else{u[d.wh]=0,c=new Rect$2({shape:u}),a.__pictorialBundle.setClipPath(c),a.__pictorialClipPath=c;var y={};y[d.wh]=l.clipShape[d.wh],graphic[o?"updateProps":"initProps"](c,{shape:y},f,g)}}}function getItemModel(a,s){var l=a.getItemModel(s);return l.getAnimationDelayParams=getAnimationDelayParams,l.isAnimationEnabled=isAnimationEnabled,l}function getAnimationDelayParams(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(a,s,l,o){var c=new Group$3,u=new Group$3;return c.add(u),c.__pictorialBundle=u,u.x=l.bundlePosition[0],u.y=l.bundlePosition[1],l.symbolRepeat?createOrUpdateRepeatSymbols(c,s,l):createOrUpdateSingleSymbol(c,s,l),createOrUpdateBarRect(c,l,o),createOrUpdateClip(c,s,l,o),c.__pictorialShapeStr=getShapeStr(a,l),c.__pictorialSymbolMeta=l,c}function updateBar(a,s,l){var o=l.animationModel,c=l.dataIndex,u=a.__pictorialBundle;updateProps$1(u,{x:l.bundlePosition[0],y:l.bundlePosition[1]},o,c),l.symbolRepeat?createOrUpdateRepeatSymbols(a,s,l,!0):createOrUpdateSingleSymbol(a,s,l,!0),createOrUpdateBarRect(a,l,!0),createOrUpdateClip(a,s,l,!0)}function removeBar(a,s,l,o){var c=o.__pictorialBarRect;c&&c.removeTextContent();var u=[];eachPath(o,function(d){u.push(d)}),o.__pictorialMainPath&&u.push(o.__pictorialMainPath),o.__pictorialClipPath&&(l=null),each$f(u,function(d){removeElement(d,{scaleX:0,scaleY:0},l,s,function(){o.parent&&o.parent.remove(o)})}),a.setItemGraphicEl(s,null)}function getShapeStr(a,s){return[a.getItemVisual(s.dataIndex,"symbol")||"none",!!s.symbolRepeat,!!s.symbolClip].join(":")}function eachPath(a,s,l){each$f(a.__pictorialBundle.children(),function(o){o!==a.__pictorialBarRect&&s.call(l,o)})}function updateAttr(a,s,l,o,c,u){s&&a.attr(s),o.symbolClip&&!c?l&&a.attr(l):l&&graphic[c?"updateProps":"initProps"](a,l,o.animationModel,o.dataIndex,u)}function updateCommon(a,s,l){var o=l.dataIndex,c=l.itemModel,u=c.getModel("emphasis"),d=u.getModel("itemStyle").getItemStyle(),f=c.getModel(["blur","itemStyle"]).getItemStyle(),g=c.getModel(["select","itemStyle"]).getItemStyle(),y=c.getShallow("cursor"),$=u.get("focus"),x=u.get("blurScope"),N=u.get("scale");eachPath(a,function(ne){if(ne instanceof ZRImage){var se=ne.style;ne.useStyle(extend({image:se.image,x:se.x,y:se.y,width:se.width,height:se.height},l.style))}else ne.useStyle(l.style);var ce=ne.ensureState("emphasis");ce.style=d,N&&(ce.scaleX=ne.scaleX*1.1,ce.scaleY=ne.scaleY*1.1),ne.ensureState("blur").style=f,ne.ensureState("select").style=g,y&&(ne.cursor=y),ne.z2=l.z2});var R=s.valueDim.posDesc[+(l.boundingLength>0)],j=a.__pictorialBarRect;j.ignoreClip=!0,setLabelStyle(j,getLabelStatesModels(c),{labelFetcher:s.seriesModel,labelDataIndex:o,defaultText:getDefaultLabel(s.seriesModel.getData(),o),inheritColor:l.style.fill,defaultOpacity:l.style.opacity,defaultOutsidePosition:R}),toggleHoverEmphasis(a,$,x,u.get("disabled"))}function toIntTimes(a){var s=Math.round(a);return Math.abs(a-s)<1e-4?s:Math.ceil(a)}var PictorialBarSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.hasSymbolVisual=!0,l.defaultSymbol="roundRect",l}return s.prototype.getInitialData=function(l){return l.stack=null,a.prototype.getInitialData.apply(this,arguments)},s.type="series.pictorialBar",s.dependencies=["grid"],s.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),s}(BaseBarSeriesModel);function install$v(a){a.registerChartView(PictorialBarView),a.registerSeriesModel(PictorialBarSeriesModel),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._layers=[],l}return s.prototype.render=function(l,o,c){var u=l.getData(),d=this,f=this.group,g=l.getLayerSeries(),y=u.getLayout("layoutInfo"),$=y.rect,x=y.boundaryGap;f.x=0,f.y=$.y+x[0];function N(se){return se.name}var R=new DataDiffer(this._layersSeries||[],g,N,N),j=[];R.add(bind$1(ne,this,"add")).update(bind$1(ne,this,"update")).remove(bind$1(ne,this,"remove")).execute();function ne(se,ce,fe){var ea=d._layers;if(se==="remove"){f.remove(ea[ce]);return}for(var ta=[],na=[],aa,ia=g[ce].indices,sa=0;sa<ia.length;sa++){var ra=u.getItemLayout(ia[sa]),la=ra.x,oa=ra.y0,ca=ra.y;ta.push(la,oa),na.push(la,oa+ca),aa=u.getItemVisual(ia[sa],"style")}var pa,ua=u.getItemLayout(ia[0]),da=l.getModel("label"),ha=da.get("margin"),ga=l.getModel("emphasis");if(se==="add"){var fa=j[ce]=new Group$3;pa=new ECPolygon({shape:{points:ta,stackedOnPoints:na,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),fa.add(pa),f.add(fa),l.isAnimationEnabled()&&pa.setClipPath(createGridClipShape(pa.getBoundingRect(),l,function(){pa.removeClipPath()}))}else{var fa=ea[fe];pa=fa.childAt(0),f.add(fa),j[ce]=fa,updateProps$1(pa,{shape:{points:ta,stackedOnPoints:na}},l),saveOldStyle(pa)}setLabelStyle(pa,getLabelStatesModels(l),{labelDataIndex:ia[sa-1],defaultText:u.getName(ia[sa-1]),inheritColor:aa.fill},{normal:{verticalAlign:"middle"}}),pa.setTextConfig({position:null,local:!0});var ma=pa.getTextContent();ma&&(ma.x=ua.x-ha,ma.y=ua.y0+ua.y/2),pa.useStyle(aa),u.setItemGraphicEl(ce,pa),setStatesStylesFromModel(pa,l),toggleHoverEmphasis(pa,ga.get("focus"),ga.get("blurScope"),ga.get("disabled"))}this._layersSeries=g,this._layers=j},s.type="themeRiver",s}(ChartView);function createGridClipShape(a,s,l){var o=new Rect$2({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return initProps(o,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},s,l),o}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},s.prototype.fixData=function(l){var o=l.length,c={},u=groupData(l,function(N){return c.hasOwnProperty(N[0]+"")||(c[N[0]+""]=-1),N[2]}),d=[];u.buckets.each(function(N,R){d.push({name:R,dataList:N})});for(var f=d.length,g=0;g<f;++g){for(var y=d[g].name,$=0;$<d[g].dataList.length;++$){var x=d[g].dataList[$][0]+"";c[x]=g}for(var x in c)c.hasOwnProperty(x)&&c[x]!==g&&(c[x]=g,l[o]=[x,0,y],o++)}return l},s.prototype.getInitialData=function(l,o){for(var c=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],u=c.get("type"),d=filter(l.data,function(j){return j[2]!==void 0}),f=this.fixData(d||[]),g=[],y=this.nameMap=createHashMap(),$=0,x=0;x<f.length;++x)g.push(f[x][DATA_NAME_INDEX]),y.get(f[x][DATA_NAME_INDEX])||(y.set(f[x][DATA_NAME_INDEX],$),$++);var N=prepareSeriesDataSchema(f,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(u)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,R=new SeriesData(N,this);return R.initData(f),R},s.prototype.getLayerSeries=function(){for(var l=this.getData(),o=l.count(),c=[],u=0;u<o;++u)c[u]=u;var d=l.mapDimension("single"),f=groupData(c,function(y){return l.get("name",y)}),g=[];return f.buckets.each(function(y,$){y.sort(function(x,N){return l.get(d,x)-l.get(d,N)}),g.push({name:$,indices:y})}),g},s.prototype.getAxisTooltipData=function(l,o,c){isArray$3(l)||(l=l?[l]:[]);for(var u=this.getData(),d=this.getLayerSeries(),f=[],g=d.length,y,$=0;$<g;++$){for(var x=Number.MAX_VALUE,N=-1,R=d[$].indices.length,j=0;j<R;++j){var ne=u.get(l[0],d[$].indices[j]),se=Math.abs(ne-o);se<=x&&(y=ne,x=se,N=d[$].indices[j])}f.push(N)}return{dataIndices:f,nestestValue:y}},s.prototype.formatTooltip=function(l,o,c){var u=this.getData(),d=u.getName(l),f=u.get(u.mapDimension("value"),l);return createTooltipMarkup("nameValue",{name:d,value:f})},s.type="series.themeRiver",s.dependencies=["singleAxis"],s.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},s}(SeriesModel);function themeRiverLayout(a,s){a.eachSeriesByType("themeRiver",function(l){var o=l.getData(),c=l.coordinateSystem,u={},d=c.getRect();u.rect=d;var f=l.get("boundaryGap"),g=c.getAxis();if(u.boundaryGap=f,g.orient==="horizontal"){f[0]=parsePercent(f[0],d.height),f[1]=parsePercent(f[1],d.height);var y=d.height-f[0]-f[1];doThemeRiverLayout(o,l,y)}else{f[0]=parsePercent(f[0],d.width),f[1]=parsePercent(f[1],d.width);var $=d.width-f[0]-f[1];doThemeRiverLayout(o,l,$)}o.setLayout("layoutInfo",u)})}function doThemeRiverLayout(a,s,l){if(a.count())for(var o=s.coordinateSystem,c=s.getLayerSeries(),u=a.mapDimension("single"),d=a.mapDimension("value"),f=map$1(c,function(se){return map$1(se.indices,function(ce){var fe=o.dataToPoint(a.get(u,ce));return fe[1]=a.get(d,ce),fe})}),g=computeBaseline(f),y=g.y0,$=l/g.max,x=c.length,N=c[0].indices.length,R,j=0;j<N;++j){R=y[j]*$,a.setItemLayout(c[0].indices[j],{layerIndex:0,x:f[0][j][0],y0:R,y:f[0][j][1]*$});for(var ne=1;ne<x;++ne)R+=f[ne-1][j][1]*$,a.setItemLayout(c[ne].indices[j],{layerIndex:ne,x:f[ne][j][0],y0:R,y:f[ne][j][1]*$})}}function computeBaseline(a){for(var s=a.length,l=a[0].length,o=[],c=[],u=0,d=0;d<l;++d){for(var f=0,g=0;g<s;++g)f+=a[g][d][1];f>u&&(u=f),o.push(f)}for(var y=0;y<l;++y)c[y]=(u-o[y])/2;u=0;for(var $=0;$<l;++$){var x=o[$]+c[$];x>u&&(u=x)}return{y0:c,max:u}}function install$u(a){a.registerChartView(ThemeRiverView),a.registerSeriesModel(ThemeRiverSeriesModel),a.registerLayout(themeRiverLayout),a.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(a){__extends(s,a);function s(l,o,c,u){var d=a.call(this)||this;d.z2=DEFAULT_SECTOR_Z,d.textConfig={inside:!0},getECData(d).seriesIndex=o.seriesIndex;var f=new ZRText({z2:DEFAULT_TEXT_Z,silent:l.getModel().get(["label","silent"])});return d.setTextContent(f),d.updateData(!0,l,o,c,u),d}return s.prototype.updateData=function(l,o,c,u,d){this.node=o,o.piece=this,c=c||this._seriesModel,u=u||this._ecModel;var f=this;getECData(f).dataIndex=o.dataIndex;var g=o.getModel(),y=g.getModel("emphasis"),$=o.getLayout(),x=extend({},$);x.label=null;var N=o.getVisual("style");N.lineJoin="bevel";var R=o.getVisual("decal");R&&(N.decal=createOrUpdatePatternFromDecal(R,d));var j=getSectorCornerRadius(g.getModel("itemStyle"),x,!0);extend(x,j),each$f(SPECIAL_STATES,function(fe){var ea=f.ensureState(fe),ta=g.getModel([fe,"itemStyle"]);ea.style=ta.getItemStyle();var na=getSectorCornerRadius(ta,x);na&&(ea.shape=na)}),l?(f.setShape(x),f.shape.r=$.r0,initProps(f,{shape:{r:$.r}},c,o.dataIndex)):(updateProps$1(f,{shape:x},c),saveOldStyle(f)),f.useStyle(N),this._updateLabel(c);var ne=g.getShallow("cursor");ne&&f.attr("cursor",ne),this._seriesModel=c||this._seriesModel,this._ecModel=u||this._ecModel;var se=y.get("focus"),ce=se==="ancestor"?o.getAncestorsIndices():se==="descendant"?o.getDescendantIndices():se;toggleHoverEmphasis(this,ce,y.get("blurScope"),y.get("disabled"))},s.prototype._updateLabel=function(l){var o=this,c=this.node.getModel(),u=c.getModel("label"),d=this.node.getLayout(),f=d.endAngle-d.startAngle,g=(d.startAngle+d.endAngle)/2,y=Math.cos(g),$=Math.sin(g),x=this,N=x.getTextContent(),R=this.node.dataIndex,j=u.get("minAngle")/180*Math.PI,ne=u.get("show")&&!(j!=null&&Math.abs(f)<j);N.ignore=!ne,each$f(DISPLAY_STATES,function(ce){var fe=ce==="normal"?c.getModel("label"):c.getModel([ce,"label"]),ea=ce==="normal",ta=ea?N:N.ensureState(ce),na=l.getFormattedLabel(R,ce);ea&&(na=na||o.node.name),ta.style=createTextStyle(fe,{},null,ce!=="normal",!0),na&&(ta.style.text=na);var aa=fe.get("show");aa!=null&&!ea&&(ta.ignore=!aa);var ia=se(fe,"position"),sa=ea?x:x.states[ce],ra=sa.style.fill;sa.textConfig={outsideFill:fe.get("color")==="inherit"?ra:null,inside:ia!=="outside"};var la,oa=se(fe,"distance")||0,ca=se(fe,"align"),pa=se(fe,"rotate"),ua=Math.PI*.5,da=Math.PI*1.5,ha=normalizeRadian(pa==="tangential"?Math.PI/2-g:g),ga=ha>ua&&!isRadianAroundZero(ha-ua)&&ha<da;ia==="outside"?(la=d.r+oa,ca=ga?"right":"left"):!ca||ca==="center"?(f===2*Math.PI&&d.r0===0?la=0:la=(d.r+d.r0)/2,ca="center"):ca==="left"?(la=d.r0+oa,ca=ga?"right":"left"):ca==="right"&&(la=d.r-oa,ca=ga?"left":"right"),ta.style.align=ca,ta.style.verticalAlign=se(fe,"verticalAlign")||"middle",ta.x=la*y+d.cx,ta.y=la*$+d.cy;var fa=0;pa==="radial"?fa=normalizeRadian(-g)+(ga?Math.PI:0):pa==="tangential"?fa=normalizeRadian(Math.PI/2-g)+(ga?Math.PI:0):isNumber$2(pa)&&(fa=pa*Math.PI/180),ta.rotation=normalizeRadian(fa)});function se(ce,fe){var ea=ce.get(fe);return ea??u.get(fe)}N.dirtyStyle()},s}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(a){a.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(s,l){l.eachComponent({mainType:"series",subType:"sunburst",query:s},o);function o(c,u){var d=retrieveTargetInfo(s,[ROOT_TO_NODE_ACTION],c);if(d){var f=c.getViewRoot();f&&(s.direction=aboveViewRoot(f,d.node)?"rollUp":"drillDown"),c.resetViewRoot(d.node)}}}),a.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(s,l,o){s=extend({},s),l.eachComponent({mainType:"series",subType:"sunburst",query:s},c);function c(u){var d=retrieveTargetInfo(s,[HIGHLIGHT_ACTION],u);d&&(s.dataIndex=d.node.dataIndex)}o.dispatchAction(extend(s,{type:"highlight"}))}),a.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(s,l,o){s=extend({},s),o.dispatchAction(extend(s,{type:"downplay"}))})}var SunburstView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c,u){var d=this;this.seriesModel=l,this.api=c,this.ecModel=o;var f=l.getData(),g=f.tree.root,y=l.getViewRoot(),$=this.group,x=l.get("renderLabelForZeroData"),N=[];y.eachNode(function(fe){N.push(fe)});var R=this._oldChildren||[];j(N,R),ce(g,y),this._initEvents(),this._oldChildren=N;function j(fe,ea){if(fe.length===0&&ea.length===0)return;new DataDiffer(ea,fe,ta,ta).add(na).update(na).remove(curry$1(na,null)).execute();function ta(aa){return aa.getId()}function na(aa,ia){var sa=aa==null?null:fe[aa],ra=ia==null?null:ea[ia];ne(sa,ra)}}function ne(fe,ea){if(!x&&fe&&!fe.getValue()&&(fe=null),fe!==g&&ea!==g){if(ea&&ea.piece)fe?(ea.piece.updateData(!1,fe,l,o,c),f.setItemGraphicEl(fe.dataIndex,ea.piece)):se(ea);else if(fe){var ta=new SunburstPiece(fe,l,o,c);$.add(ta),f.setItemGraphicEl(fe.dataIndex,ta)}}}function se(fe){fe&&fe.piece&&($.remove(fe.piece),fe.piece=null)}function ce(fe,ea){ea.depth>0?(d.virtualPiece?d.virtualPiece.updateData(!1,fe,l,o,c):(d.virtualPiece=new SunburstPiece(fe,l,o,c),$.add(d.virtualPiece)),ea.piece.off("click"),d.virtualPiece.on("click",function(ta){d._rootToNode(ea.parentNode)})):d.virtualPiece&&($.remove(d.virtualPiece),d.virtualPiece=null)}},s.prototype._initEvents=function(){var l=this;this.group.off("click"),this.group.on("click",function(o){var c=!1,u=l.seriesModel.getViewRoot();u.eachNode(function(d){if(!c&&d.piece&&d.piece===o.target){var f=d.getModel().get("nodeClick");if(f==="rootToNode")l._rootToNode(d);else if(f==="link"){var g=d.getModel(),y=g.get("link");if(y){var $=g.get("target",!0)||"_blank";windowOpen(y,$)}}c=!0}})})},s.prototype._rootToNode=function(l){l!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:l})},s.prototype.containPoint=function(l,o){var c=o.getData(),u=c.getItemLayout(0);if(u){var d=l[0]-u.cx,f=l[1]-u.cy,g=Math.sqrt(d*d+f*f);return g<=u.r&&g>=u.r0}},s.type="sunburst",s}(ChartView),SunburstSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.ignoreStyleOnData=!0,l}return s.prototype.getInitialData=function(l,o){var c={name:l.name,children:l.data};completeTreeValue(c);var u=this._levelModels=map$1(l.levels||[],function(g){return new Model(g,this,o)},this),d=Tree$1.createTree(c,this,f);function f(g){g.wrapMethod("getItemModel",function(y,$){var x=d.getNodeByDataIndex($),N=u[x.depth];return N&&(y.parentModel=N),y})}return d.data},s.prototype.optionUpdated=function(){this.resetViewRoot()},s.prototype.getDataParams=function(l){var o=a.prototype.getDataParams.apply(this,arguments),c=this.getData().tree.getNodeByDataIndex(l);return o.treePathInfo=wrapTreePathInfo(c,this),o},s.prototype.getLevelModel=function(l){return this._levelModels&&this._levelModels[l.depth]},s.prototype.getViewRoot=function(){return this._viewRoot},s.prototype.resetViewRoot=function(l){l?this._viewRoot=l:l=this._viewRoot;var o=this.getRawData().tree.root;(!l||l!==o&&!o.contains(l))&&(this._viewRoot=o)},s.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},s.type="series.sunburst",s.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},s}(SeriesModel);function completeTreeValue(a){var s=0;each$f(a.children,function(o){completeTreeValue(o);var c=o.value;isArray$3(c)&&(c=c[0]),s+=c});var l=a.value;isArray$3(l)&&(l=l[0]),(l==null||isNaN(l))&&(l=s),l<0&&(l=0),isArray$3(a.value)?a.value[0]=l:a.value=l}var RADIAN=Math.PI/180;function sunburstLayout(a,s,l){s.eachSeriesByType(a,function(o){var c=o.get("center"),u=o.get("radius");isArray$3(u)||(u=[0,u]),isArray$3(c)||(c=[c,c]);var d=l.getWidth(),f=l.getHeight(),g=Math.min(d,f),y=parsePercent(c[0],d),$=parsePercent(c[1],f),x=parsePercent(u[0],g/2),N=parsePercent(u[1],g/2),R=-o.get("startAngle")*RADIAN,j=o.get("minAngle")*RADIAN,ne=o.getData().tree.root,se=o.getViewRoot(),ce=se.depth,fe=o.get("sort");fe!=null&&initChildren(se,fe);var ea=0;each$f(se.children,function(ha){!isNaN(ha.getValue())&&ea++});var ta=se.getValue(),na=Math.PI/(ta||ea)*2,aa=se.depth>0,ia=se.height-(aa?-1:1),sa=(N-x)/(ia||1),ra=o.get("clockwise"),la=o.get("stillShowZeroSum"),oa=ra?1:-1,ca=function(ha,ga){if(ha){var fa=ga;if(ha!==ne){var ma=ha.getValue(),va=ta===0&&la?na:ma*na;va<j&&(va=j),fa=ga+oa*va;var ka=ha.depth-ce-(aa?-1:1),ya=x+sa*ka,ba=x+sa*(ka+1),Ea=o.getLevelModel(ha);if(Ea){var Ca=Ea.get("r0",!0),$a=Ea.get("r",!0),Pa=Ea.get("radius",!0);Pa!=null&&(Ca=Pa[0],$a=Pa[1]),Ca!=null&&(ya=parsePercent(Ca,g/2)),$a!=null&&(ba=parsePercent($a,g/2))}ha.setLayout({angle:va,startAngle:ga,endAngle:fa,clockwise:ra,cx:y,cy:$,r0:ya,r:ba})}if(ha.children&&ha.children.length){var Da=0;each$f(ha.children,function(Ta){Da+=ca(Ta,ga+Da)})}return fa-ga}};if(aa){var pa=x,ua=x+sa,da=Math.PI*2;ne.setLayout({angle:da,startAngle:R,endAngle:R+da,clockwise:ra,cx:y,cy:$,r0:pa,r:ua})}ca(se,R)})}function initChildren(a,s){var l=a.children||[];a.children=sort(l,s),l.length&&each$f(a.children,function(o){initChildren(o,s)})}function sort(a,s){if(isFunction$2(s)){var l=map$1(a,function(c,u){var d=c.getValue();return{params:{depth:c.depth,height:c.height,dataIndex:c.dataIndex,getValue:function(){return d}},index:u}});return l.sort(function(c,u){return s(c.params,u.params)}),map$1(l,function(c){return a[c.index]})}else{var o=s==="asc";return a.sort(function(c,u){var d=(c.getValue()-u.getValue())*(o?1:-1);return d===0?(c.dataIndex-u.dataIndex)*(o?-1:1):d})}}function sunburstVisual(a){var s={};function l(o,c,u){for(var d=o;d&&d.depth>1;)d=d.parentNode;var f=c.getColorFromPalette(d.name||d.dataIndex+"",s);return o.depth>1&&isString$2(f)&&(f=lift(f,(o.depth-1)/(u-1)*.5)),f}a.eachSeriesByType("sunburst",function(o){var c=o.getData(),u=c.tree;u.eachNode(function(d){var f=d.getModel(),g=f.getModel("itemStyle").getItemStyle();g.fill||(g.fill=l(d,o,u.root.height));var y=c.ensureUniqueItemVisual(d.dataIndex,"style");extend(y,g)})})}function install$t(a){a.registerChartView(SunburstView),a.registerSeriesModel(SunburstSeriesModel),a.registerLayout(curry$1(sunburstLayout,"sunburst")),a.registerProcessor(curry$1(dataFilter$1,"sunburst")),a.registerVisual(sunburstVisual),installSunburstAction(a)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},s.prototype.getInitialData=function(l,o){return createSeriesData(null,this)},s.prototype.getDataParams=function(l,o,c){var u=a.prototype.getDataParams.call(this,l,o);return c&&(u.info=customInnerStore(c).info),u},s.type="series.custom",s.dependencies=["grid","polar","geo","singleAxis","calendar"],s.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},s}(SeriesModel);function dataToCoordSize$3(a,s){return s=s||[0,0],map$1(["x","y"],function(l,o){var c=this.getAxis(l),u=s[o],d=a[o]/2;return c.type==="category"?c.getBandWidth():Math.abs(c.dataToCoord(u-d)-c.dataToCoord(u+d))},this)}function cartesianPrepareCustom(a){var s=a.master.getRect();return{coordSys:{type:"cartesian2d",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(l){return a.dataToPoint(l)},size:bind$1(dataToCoordSize$3,a)}}}function dataToCoordSize$2(a,s){return s=s||[0,0],map$1([0,1],function(l){var o=s[l],c=a[l]/2,u=[],d=[];return u[l]=o-c,d[l]=o+c,u[1-l]=d[1-l]=s[1-l],Math.abs(this.dataToPoint(u)[l]-this.dataToPoint(d)[l])},this)}function geoPrepareCustom(a){var s=a.getBoundingRect();return{coordSys:{type:"geo",x:s.x,y:s.y,width:s.width,height:s.height,zoom:a.getZoom()},api:{coord:function(l){return a.dataToPoint(l)},size:bind$1(dataToCoordSize$2,a)}}}function dataToCoordSize$1(a,s){var l=this.getAxis(),o=s instanceof Array?s[0]:s,c=(a instanceof Array?a[0]:a)/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(o-c)-l.dataToCoord(o+c))}function singlePrepareCustom(a){var s=a.getRect();return{coordSys:{type:"singleAxis",x:s.x,y:s.y,width:s.width,height:s.height},api:{coord:function(l){return a.dataToPoint(l)},size:bind$1(dataToCoordSize$1,a)}}}function dataToCoordSize(a,s){return s=s||[0,0],map$1(["Radius","Angle"],function(l,o){var c="get"+l+"Axis",u=this[c](),d=s[o],f=a[o]/2,g=u.type==="category"?u.getBandWidth():Math.abs(u.dataToCoord(d-f)-u.dataToCoord(d+f));return l==="Angle"&&(g=g*Math.PI/180),g},this)}function polarPrepareCustom(a){var s=a.getRadiusAxis(),l=a.getAngleAxis(),o=s.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:o[1],r0:o[0]},api:{coord:function(c){var u=s.dataToRadius(c[0]),d=l.dataToAngle(c[1]),f=a.coordToPoint([u,d]);return f.push(u,d*Math.PI/180),f},size:bind$1(dataToCoordSize,a)}}}function calendarPrepareCustom(a){var s=a.getRect(),l=a.getRangeInfo();return{coordSys:{type:"calendar",x:s.x,y:s.y,width:s.width,height:s.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:l.start,end:l.end,weeks:l.weeks,dayCount:l.allDay}},api:{coord:function(o,c){return a.dataToPoint(o,c)}}}}function isEC4CompatibleStyle(a,s,l,o){return a&&(a.legacy||a.legacy!==!1&&!l&&!o&&s!=="tspan"&&(s==="text"||hasOwn(a,"text")))}function convertFromEC4CompatibleStyle(a,s,l){var o=a,c,u,d;if(s==="text")d=o;else{d={},hasOwn(o,"text")&&(d.text=o.text),hasOwn(o,"rich")&&(d.rich=o.rich),hasOwn(o,"textFill")&&(d.fill=o.textFill),hasOwn(o,"textStroke")&&(d.stroke=o.textStroke),hasOwn(o,"fontFamily")&&(d.fontFamily=o.fontFamily),hasOwn(o,"fontSize")&&(d.fontSize=o.fontSize),hasOwn(o,"fontStyle")&&(d.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(d.fontWeight=o.fontWeight),u={type:"text",style:d,silent:!0},c={};var f=hasOwn(o,"textPosition");l?c.position=f?o.textPosition:"inside":f&&(c.position=o.textPosition),hasOwn(o,"textPosition")&&(c.position=o.textPosition),hasOwn(o,"textOffset")&&(c.offset=o.textOffset),hasOwn(o,"textRotation")&&(c.rotation=o.textRotation),hasOwn(o,"textDistance")&&(c.distance=o.textDistance)}return convertEC4CompatibleRichItem(d,a),each$f(d.rich,function(g){convertEC4CompatibleRichItem(g,g)}),{textConfig:c,textContent:u}}function convertEC4CompatibleRichItem(a,s){s&&(s.font=s.textFont||s.font,hasOwn(s,"textStrokeWidth")&&(a.lineWidth=s.textStrokeWidth),hasOwn(s,"textAlign")&&(a.align=s.textAlign),hasOwn(s,"textVerticalAlign")&&(a.verticalAlign=s.textVerticalAlign),hasOwn(s,"textLineHeight")&&(a.lineHeight=s.textLineHeight),hasOwn(s,"textWidth")&&(a.width=s.textWidth),hasOwn(s,"textHeight")&&(a.height=s.textHeight),hasOwn(s,"textBackgroundColor")&&(a.backgroundColor=s.textBackgroundColor),hasOwn(s,"textPadding")&&(a.padding=s.textPadding),hasOwn(s,"textBorderColor")&&(a.borderColor=s.textBorderColor),hasOwn(s,"textBorderWidth")&&(a.borderWidth=s.textBorderWidth),hasOwn(s,"textBorderRadius")&&(a.borderRadius=s.textBorderRadius),hasOwn(s,"textBoxShadowColor")&&(a.shadowColor=s.textBoxShadowColor),hasOwn(s,"textBoxShadowBlur")&&(a.shadowBlur=s.textBoxShadowBlur),hasOwn(s,"textBoxShadowOffsetX")&&(a.shadowOffsetX=s.textBoxShadowOffsetX),hasOwn(s,"textBoxShadowOffsetY")&&(a.shadowOffsetY=s.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(a,s,l){var o=a;o.textPosition=o.textPosition||l.position||"inside",l.offset!=null&&(o.textOffset=l.offset),l.rotation!=null&&(o.textRotation=l.rotation),l.distance!=null&&(o.textDistance=l.distance);var c=o.textPosition.indexOf("inside")>=0,u=a.fill||"#000";convertToEC4RichItem(o,s);var d=o.textFill==null;return c?d&&(o.textFill=l.insideFill||"#fff",!o.textStroke&&l.insideStroke&&(o.textStroke=l.insideStroke),!o.textStroke&&(o.textStroke=u),o.textStrokeWidth==null&&(o.textStrokeWidth=2)):(d&&(o.textFill=a.fill||l.outsideFill||"#000"),!o.textStroke&&l.outsideStroke&&(o.textStroke=l.outsideStroke)),o.text=s.text,o.rich=s.rich,each$f(s.rich,function(f){convertToEC4RichItem(f,f)}),o}function convertToEC4RichItem(a,s){s&&(hasOwn(s,"fill")&&(a.textFill=s.fill),hasOwn(s,"stroke")&&(a.textStroke=s.fill),hasOwn(s,"lineWidth")&&(a.textStrokeWidth=s.lineWidth),hasOwn(s,"font")&&(a.font=s.font),hasOwn(s,"fontStyle")&&(a.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(a.fontWeight=s.fontWeight),hasOwn(s,"fontSize")&&(a.fontSize=s.fontSize),hasOwn(s,"fontFamily")&&(a.fontFamily=s.fontFamily),hasOwn(s,"align")&&(a.textAlign=s.align),hasOwn(s,"verticalAlign")&&(a.textVerticalAlign=s.verticalAlign),hasOwn(s,"lineHeight")&&(a.textLineHeight=s.lineHeight),hasOwn(s,"width")&&(a.textWidth=s.width),hasOwn(s,"height")&&(a.textHeight=s.height),hasOwn(s,"backgroundColor")&&(a.textBackgroundColor=s.backgroundColor),hasOwn(s,"padding")&&(a.textPadding=s.padding),hasOwn(s,"borderColor")&&(a.textBorderColor=s.borderColor),hasOwn(s,"borderWidth")&&(a.textBorderWidth=s.borderWidth),hasOwn(s,"borderRadius")&&(a.textBorderRadius=s.borderRadius),hasOwn(s,"shadowColor")&&(a.textBoxShadowColor=s.shadowColor),hasOwn(s,"shadowBlur")&&(a.textBoxShadowBlur=s.shadowBlur),hasOwn(s,"shadowOffsetX")&&(a.textBoxShadowOffsetX=s.shadowOffsetX),hasOwn(s,"shadowOffsetY")&&(a.textBoxShadowOffsetY=s.shadowOffsetY),hasOwn(s,"textShadowColor")&&(a.textShadowColor=s.textShadowColor),hasOwn(s,"textShadowBlur")&&(a.textShadowBlur=s.textShadowBlur),hasOwn(s,"textShadowOffsetX")&&(a.textShadowOffsetX=s.textShadowOffsetX),hasOwn(s,"textShadowOffsetY")&&(a.textShadowOffsetY=s.textShadowOffsetY))}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP);reduce(TRANSFORMABLE_PROPS,function(a,s){return a[s]=1,a},{});TRANSFORMABLE_PROPS.join(", ");var ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(a,s,l,o,c){var u=a+"Animation",d=getAnimationConfig(a,o,c)||{},f=transitionInnerStore(s).userDuring;return d.duration>0&&(d.during=f?bind$1(duringCall,{el:s,userDuring:f}):null,d.setToFinal=!0,d.scope=a),extend(d,l[u]),d}function applyUpdateTransition(a,s,l,o){o=o||{};var c=o.dataIndex,u=o.isInit,d=o.clearStyle,f=l.isAnimationEnabled(),g=transitionInnerStore(a),y=s.style;g.userDuring=s.during;var $={},x={};if(prepareTransformAllPropsFinal(a,s,x),prepareShapeOrExtraAllPropsFinal("shape",s,x),prepareShapeOrExtraAllPropsFinal("extra",s,x),!u&&f&&(prepareTransformTransitionFrom(a,s,$),prepareShapeOrExtraTransitionFrom("shape",a,s,$),prepareShapeOrExtraTransitionFrom("extra",a,s,$),prepareStyleTransitionFrom(a,s,y,$)),x.style=y,applyPropsDirectly(a,x,d),applyMiscProps(a,s),f)if(u){var N={};each$f(ELEMENT_ANIMATABLE_PROPS,function(j){var ne=j?s[j]:s;ne&&ne.enterFrom&&(j&&(N[j]=N[j]||{}),extend(j?N[j]:N,ne.enterFrom))});var R=getElementAnimationConfig("enter",a,s,l,c);R.duration>0&&a.animateFrom(N,R)}else applyPropsTransition(a,s,c||0,l,$);updateLeaveTo(a,s),y?a.dirty():a.markRedraw()}function updateLeaveTo(a,s){for(var l=transitionInnerStore(a).leaveToProps,o=0;o<ELEMENT_ANIMATABLE_PROPS.length;o++){var c=ELEMENT_ANIMATABLE_PROPS[o],u=c?s[c]:s;u&&u.leaveTo&&(l||(l=transitionInnerStore(a).leaveToProps={}),c&&(l[c]=l[c]||{}),extend(c?l[c]:l,u.leaveTo))}}function applyLeaveTransition(a,s,l,o){if(a){var c=a.parent,u=transitionInnerStore(a).leaveToProps;if(u){var d=getElementAnimationConfig("update",a,s,l,0);d.done=function(){c.remove(a)},a.animateTo(u,d)}else c.remove(a)}}function isTransitionAll(a){return a==="all"}function applyPropsDirectly(a,s,l){var o=s.style;if(!a.isGroup&&o){if(l){a.useStyle({});for(var c=a.animators,u=0;u<c.length;u++){var d=c[u];d.targetName==="style"&&d.changeTarget(a.style)}}a.setStyle(o)}s&&(s.style=null,s&&a.attr(s),s.style=o)}function applyPropsTransition(a,s,l,o,c){if(c){var u=getElementAnimationConfig("update",a,s,o,l);u.duration>0&&a.animateFrom(c,u)}}function applyMiscProps(a,s){hasOwn(s,"silent")&&(a.silent=s.silent),hasOwn(s,"ignore")&&(a.ignore=s.ignore),a instanceof Displayable&&hasOwn(s,"invisible")&&(a.invisible=s.invisible),a instanceof Path&&hasOwn(s,"autoBatch")&&(a.autoBatch=s.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(a,s){return tmpDuringScope.el[a]=s,this},getTransform:function(a){return tmpDuringScope.el[a]},setShape:function(a,s){var l=tmpDuringScope.el,o=l.shape||(l.shape={});return o[a]=s,l.dirtyShape&&l.dirtyShape(),this},getShape:function(a){var s=tmpDuringScope.el.shape;if(s)return s[a]},setStyle:function(a,s){var l=tmpDuringScope.el,o=l.style;return o&&(o[a]=s,l.dirtyStyle&&l.dirtyStyle()),this},getStyle:function(a){var s=tmpDuringScope.el.style;if(s)return s[a]},setExtra:function(a,s){var l=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return l[a]=s,this},getExtra:function(a){var s=tmpDuringScope.el.extra;if(s)return s[a]}};function duringCall(){var a=this,s=a.el;if(s){var l=transitionInnerStore(s).userDuring,o=a.userDuring;if(l!==o){a.el=a.userDuring=null;return}tmpDuringScope.el=s,o(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(a,s,l,o){var c=l[a];if(c){var u=s[a],d;if(u){var f=l.transition,g=c.transition;if(g)if(!d&&(d=o[a]={}),isTransitionAll(g))extend(d,u);else for(var y=normalizeToArray(g),$=0;$<y.length;$++){var x=y[$],N=u[x];d[x]=N}else if(isTransitionAll(f)||indexOf(f,a)>=0){!d&&(d=o[a]={});for(var R=keys(u),$=0;$<R.length;$++){var x=R[$],N=u[x];isNonStyleTransitionEnabled(c[x],N)&&(d[x]=N)}}}}}function prepareShapeOrExtraAllPropsFinal(a,s,l){var o=s[a];if(o)for(var c=l[a]={},u=keys(o),d=0;d<u.length;d++){var f=u[d];c[f]=cloneValue(o[f])}}function prepareTransformTransitionFrom(a,s,l){for(var o=s.transition,c=isTransitionAll(o)?TRANSFORMABLE_PROPS:normalizeToArray(o||[]),u=0;u<c.length;u++){var d=c[u];if(!(d==="style"||d==="shape"||d==="extra")){var f=a[d];l[d]=f}}}function prepareTransformAllPropsFinal(a,s,l){for(var o=0;o<LEGACY_TRANSFORM_PROPS.length;o++){var c=LEGACY_TRANSFORM_PROPS[o],u=LEGACY_TRANSFORM_PROPS_MAP[c],d=s[c];d&&(l[u[0]]=d[0],l[u[1]]=d[1])}for(var o=0;o<TRANSFORMABLE_PROPS.length;o++){var f=TRANSFORMABLE_PROPS[o];s[f]!=null&&(l[f]=s[f])}}function prepareStyleTransitionFrom(a,s,l,o){if(l){var c=a.style,u;if(c){var d=l.transition,f=s.transition;if(d&&!isTransitionAll(d)){var g=normalizeToArray(d);!u&&(u=o.style={});for(var y=0;y<g.length;y++){var $=g[y],x=c[$];u[$]=x}}else if(a.getAnimationStyleProps&&(isTransitionAll(f)||isTransitionAll(d)||indexOf(f,"style")>=0)){var N=a.getAnimationStyleProps(),R=N?N.style:null;if(R){!u&&(u=o.style={});for(var j=keys(l),y=0;y<j.length;y++){var $=j[y];if(R[$]){var x=c[$];u[$]=x}}}}}}}function isNonStyleTransitionEnabled(a,s){return isArrayLike(a)?a!==s:a!=null&&isFinite(a)}var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(a){a.stopAnimation("keyframe"),a.attr(getStateToRestore(a))}function applyKeyframeAnimation(a,s,l){if(!(!l.isAnimationEnabled()||!s)){if(isArray$3(s)){each$f(s,function(f){applyKeyframeAnimation(a,f,l)});return}var o=s.keyframes,c=s.duration;if(l&&c==null){var u=getAnimationConfig("enter",l,0);c=u&&u.duration}if(!(!o||!c)){var d=getStateToRestore(a);each$f(ELEMENT_ANIMATABLE_PROPS,function(f){if(!(f&&!a[f])){var g;o.sort(function(y,$){return y.percent-$.percent}),each$f(o,function(y){var $=a.animators,x=f?y[f]:y;if(x){var N=keys(x);if(f||(N=filter(N,function(ne){return indexOf(KEYFRAME_EXCLUDE_KEYS,ne)<0})),!!N.length){g||(g=a.animate(f,s.loop,!0),g.scope="keyframe");for(var R=0;R<$.length;R++)$[R]!==g&&$[R].targetName===g.targetName&&$[R].stopTracks(N);f&&(d[f]=d[f]||{});var j=f?d[f]:d;each$f(N,function(ne){j[ne]=((f?a[f]:a)||{})[ne]}),g.whenWithKeys(c*y.percent,x,N,y.easing)}}}),g&&g.delay(s.delay||0).duration(c).start(s.easing)}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(a){return a instanceof Path}function isDisplayable(a){return a instanceof Displayable}function copyElement(a,s){s.copyTransform(a),isDisplayable(s)&&isDisplayable(a)&&(s.setStyle(a.style),s.z=a.z,s.z2=a.z2,s.zlevel=a.zlevel,s.invisible=a.invisible,s.ignore=a.ignore,isPath(s)&&isPath(a)&&s.setShape(a.shape))}var CustomChartView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c,u){this._progressiveEls=null;var d=this._data,f=l.getData(),g=this.group,y=makeRenderItem(l,f,o,c);d||g.removeAll(),f.diff(d).add(function(x){createOrUpdateItem(c,null,x,y(x,u),l,g,f)}).remove(function(x){var N=d.getItemGraphicEl(x);N&&applyLeaveTransition(N,customInnerStore(N).option,l)}).update(function(x,N){var R=d.getItemGraphicEl(N);createOrUpdateItem(c,R,x,y(x,u),l,g,f)}).execute();var $=l.get("clip",!0)?createClipPath(l.coordinateSystem,!1,l):null;$?g.setClipPath($):g.removeClipPath(),this._data=f},s.prototype.incrementalPrepareRender=function(l,o,c){this.group.removeAll(),this._data=null},s.prototype.incrementalRender=function(l,o,c,u,d){var f=o.getData(),g=makeRenderItem(o,f,c,u),y=this._progressiveEls=[];function $(R){R.isGroup||(R.incremental=!0,R.ensureState("emphasis").hoverLayer=!0)}for(var x=l.start;x<l.end;x++){var N=createOrUpdateItem(null,null,x,g(x,d),o,this.group,f);N&&(N.traverse($),y.push(N))}},s.prototype.eachRendered=function(l){traverseElements(this._progressiveEls||this.group,l)},s.prototype.filterForExposedEvent=function(l,o,c,u){var d=o.element;if(d==null||c.name===d)return!0;for(;(c=c.__hostTarget||c.parent)&&c!==this.group;)if(c.name===d)return!0;return!1},s.type="custom",s}(ChartView);function createEl$1(a){var s=a.type,l;if(s==="path"){var o=a.shape,c=o.width!=null&&o.height!=null?{x:o.x||0,y:o.y||0,width:o.width,height:o.height}:null,u=getPathData(o);l=makePath(u,null,c,o.layout||"center"),customInnerStore(l).customPathData=u}else if(s==="image")l=new ZRImage({}),customInnerStore(l).customImagePath=a.style.image;else if(s==="text")l=new ZRText({});else if(s==="group")l=new Group$3;else{if(s==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var d=getShapeClass(s);if(!d){var f="";throwError(f)}l=new d}return customInnerStore(l).customGraphicType=s,l.name=a.name,l.z2EmphasisLift=1,l.z2SelectLift=1,l}function updateElNormal(a,s,l,o,c,u,d){stopPreviousKeyframeAnimationAndRestore(s);var f=c&&c.normal.cfg;f&&s.setTextConfig(f),o&&o.transition==null&&(o.transition=DEFAULT_TRANSITION);var g=o&&o.style;if(g){if(s.type==="text"){var y=g;hasOwn(y,"textFill")&&(y.fill=y.textFill),hasOwn(y,"textStroke")&&(y.stroke=y.textStroke)}var $=void 0,x=isPath(s)?g.decal:null;a&&x&&(x.dirty=!0,$=createOrUpdatePatternFromDecal(x,a)),g.__decalPattern=$}if(isDisplayable(s)&&g){var $=g.__decalPattern;$&&(g.decal=$)}applyUpdateTransition(s,o,u,{dataIndex:l,isInit:d,clearStyle:!0}),applyKeyframeAnimation(s,o.keyframeAnimation,u)}function updateElOnState(a,s,l,o,c){var u=s.isGroup?null:s,d=c&&c[a].cfg;if(u){var f=u.ensureState(a);if(o===!1){var g=u.getState(a);g&&(g.style=null)}else f.style=o||null;d&&(f.textConfig=d),setDefaultStateProxy(u)}}function updateZ(a,s,l){if(!a.isGroup){var o=a,c=l.currentZ,u=l.currentZLevel;o.z=c,o.zlevel=u;var d=s.z2;d!=null&&(o.z2=d||0);for(var f=0;f<STATES.length;f++)updateZForEachState(o,s,STATES[f])}}function updateZForEachState(a,s,l){var o=l===NORMAL,c=o?s:retrieveStateOption(s,l),u=c?c.z2:null,d;u!=null&&(d=o?a:a.ensureState(l),d.z2=u||0)}function makeRenderItem(a,s,l,o){var c=a.get("renderItem"),u=a.coordinateSystem,d={};u&&(d=u.prepareCustoms?u.prepareCustoms(u):prepareCustoms[u.type](u));for(var f=defaults({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:ta,style:aa,ordinalRawValue:na,styleEmphasis:ia,visual:la,barLayout:oa,currentSeriesIndices:ca,font:pa},d.api||{}),g={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:d.coordSys,dataInsideLength:s.count(),encode:wrapEncodeDef(a.getData())},y,$,x={},N={},R={},j={},ne=0;ne<STATES.length;ne++){var se=STATES[ne];R[se]=a.getModel(PATH_ITEM_STYLE[se]),j[se]=a.getModel(PATH_LABEL[se])}function ce(ua){return ua===y?$||($=s.getItemModel(ua)):s.getItemModel(ua)}function fe(ua,da){return s.hasItemOption?ua===y?x[da]||(x[da]=ce(ua).getModel(PATH_ITEM_STYLE[da])):ce(ua).getModel(PATH_ITEM_STYLE[da]):R[da]}function ea(ua,da){return s.hasItemOption?ua===y?N[da]||(N[da]=ce(ua).getModel(PATH_LABEL[da])):ce(ua).getModel(PATH_LABEL[da]):j[da]}return function(ua,da){return y=ua,$=null,x={},N={},c&&c(defaults({dataIndexInside:ua,dataIndex:s.getRawIndex(ua),actionType:da?da.type:null},g),f)};function ta(ua,da){return da==null&&(da=y),s.getStore().get(s.getDimensionIndex(ua||0),da)}function na(ua,da){da==null&&(da=y),ua=ua||0;var ha=s.getDimensionInfo(ua);if(!ha){var ga=s.getDimensionIndex(ua);return ga>=0?s.getStore().get(ga,da):void 0}var fa=s.get(ha.name,da),ma=ha&&ha.ordinalMeta;return ma?ma.categories[fa]:fa}function aa(ua,da){da==null&&(da=y);var ha=s.getItemVisual(da,"style"),ga=ha&&ha.fill,fa=ha&&ha.opacity,ma=fe(da,NORMAL).getItemStyle();ga!=null&&(ma.fill=ga),fa!=null&&(ma.opacity=fa);var va={inheritColor:isString$2(ga)?ga:"#000"},ka=ea(da,NORMAL),ya=createTextStyle(ka,null,va,!1,!0);ya.text=ka.getShallow("show")?retrieve2(a.getFormattedLabel(da,NORMAL),getDefaultLabel(s,da)):null;var ba=createTextConfig(ka,va,!1);return ra(ua,ma),ma=convertToEC4StyleForCustomSerise(ma,ya,ba),ua&&sa(ma,ua),ma.legacy=!0,ma}function ia(ua,da){da==null&&(da=y);var ha=fe(da,EMPHASIS).getItemStyle(),ga=ea(da,EMPHASIS),fa=createTextStyle(ga,null,null,!0,!0);fa.text=ga.getShallow("show")?retrieve3(a.getFormattedLabel(da,EMPHASIS),a.getFormattedLabel(da,NORMAL),getDefaultLabel(s,da)):null;var ma=createTextConfig(ga,null,!0);return ra(ua,ha),ha=convertToEC4StyleForCustomSerise(ha,fa,ma),ua&&sa(ha,ua),ha.legacy=!0,ha}function sa(ua,da){for(var ha in da)hasOwn(da,ha)&&(ua[ha]=da[ha])}function ra(ua,da){ua&&(ua.textFill&&(da.textFill=ua.textFill),ua.textPosition&&(da.textPosition=ua.textPosition))}function la(ua,da){if(da==null&&(da=y),hasOwn(STYLE_VISUAL_TYPE,ua)){var ha=s.getItemVisual(da,"style");return ha?ha[STYLE_VISUAL_TYPE[ua]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,ua))return s.getItemVisual(da,ua)}function oa(ua){if(u.type==="cartesian2d"){var da=u.getBaseAxis();return getLayoutOnAxis(defaults({axis:da},ua))}}function ca(){return l.getCurrentSeriesIndices()}function pa(ua){return getFont(ua,l)}}function wrapEncodeDef(a){var s={};return each$f(a.dimensions,function(l){var o=a.getDimensionInfo(l);if(!o.isExtraCoord){var c=o.coordDim,u=s[c]=s[c]||[];u[o.coordDimIndex]=a.getDimensionIndex(l)}}),s}function createOrUpdateItem(a,s,l,o,c,u,d){if(!o){u.remove(s);return}var f=doCreateOrUpdateEl(a,s,l,o,c,u);return f&&d.setItemGraphicEl(l,f),f&&toggleHoverEmphasis(f,o.focus,o.blurScope,o.emphasisDisabled),f}function doCreateOrUpdateEl(a,s,l,o,c,u){var d=-1,f=s;s&&doesElNeedRecreate(s,o,c)&&(d=indexOf(u.childrenRef(),s),s=null);var g=!s,y=s;y?y.clearStates():(y=createEl$1(o),f&&copyElement(f,y)),o.morph===!1?y.disableMorphing=!0:y.disableMorphing&&(y.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(y,l,o,c,g,attachedTxInfoTmp),doCreateOrUpdateClipPath(y,l,o,c,g),updateElNormal(a,y,l,o,attachedTxInfoTmp,c,g),hasOwn(o,"info")&&(customInnerStore(y).info=o.info);for(var $=0;$<STATES.length;$++){var x=STATES[$];if(x!==NORMAL){var N=retrieveStateOption(o,x),R=retrieveStyleOptionOnState(o,N,x);updateElOnState(x,y,N,R,attachedTxInfoTmp)}}return updateZ(y,o,c),o.type==="group"&&mergeChildren(a,y,l,o,c),d>=0?u.replaceAt(y,d):u.add(y),y}function doesElNeedRecreate(a,s,l){var o=customInnerStore(a),c=s.type,u=s.shape,d=s.style;return l.isUniversalTransitionEnabled()||c!=null&&c!==o.customGraphicType||c==="path"&&hasOwnPathData(u)&&getPathData(u)!==o.customPathData||c==="image"&&hasOwn(d,"image")&&d.image!==o.customImagePath}function doCreateOrUpdateClipPath(a,s,l,o,c){var u=l.clipPath;if(u===!1)a&&a.getClipPath()&&a.removeClipPath();else if(u){var d=a.getClipPath();d&&doesElNeedRecreate(d,u,o)&&(d=null),d||(d=createEl$1(u),a.setClipPath(d)),updateElNormal(null,d,s,u,null,o,c)}}function doCreateOrUpdateAttachedTx(a,s,l,o,c,u){if(!a.isGroup){processTxInfo(l,null,u),processTxInfo(l,EMPHASIS,u);var d=u.normal.conOpt,f=u.emphasis.conOpt,g=u.blur.conOpt,y=u.select.conOpt;if(d!=null||f!=null||y!=null||g!=null){var $=a.getTextContent();if(d===!1)$&&a.removeTextContent();else{d=u.normal.conOpt=d||{type:"text"},$?$.clearStates():($=createEl$1(d),a.setTextContent($)),updateElNormal(null,$,s,d,null,o,c);for(var x=d&&d.style,N=0;N<STATES.length;N++){var R=STATES[N];if(R!==NORMAL){var j=u[R].conOpt;updateElOnState(R,$,j,retrieveStyleOptionOnState(d,j,R),null)}}x?$.dirty():$.markRedraw()}}}}function processTxInfo(a,s,l){var o=s?retrieveStateOption(a,s):a,c=s?retrieveStyleOptionOnState(a,o,EMPHASIS):a.style,u=a.type,d=o?o.textConfig:null,f=a.textContent,g=f?s?retrieveStateOption(f,s):f:null;if(c&&(l.isLegacy||isEC4CompatibleStyle(c,u,!!d,!!g))){l.isLegacy=!0;var y=convertFromEC4CompatibleStyle(c,u,!s);!d&&y.textConfig&&(d=y.textConfig),!g&&y.textContent&&(g=y.textContent)}if(!s&&g){var $=g;!$.type&&($.type="text")}var x=s?l[s]:l.normal;x.cfg=d,x.conOpt=g}function retrieveStateOption(a,s){return s?a?a[s]:null:a}function retrieveStyleOptionOnState(a,s,l){var o=s&&s.style;return o==null&&l===EMPHASIS&&a&&(o=a.styleEmphasis),o}function mergeChildren(a,s,l,o,c){var u=o.children,d=u?u.length:0,f=o.$mergeChildren,g=f==="byName"||o.diffChildrenByName,y=f===!1;if(!(!d&&!g&&!y)){if(g){diffGroupChildren({api:a,oldChildren:s.children()||[],newChildren:u||[],dataIndex:l,seriesModel:c,group:s});return}y&&s.removeAll();for(var $=0;$<d;$++){var x=u[$],N=s.childAt($);x?(x.ignore==null&&(x.ignore=!1),doCreateOrUpdateEl(a,N,l,x,c,s)):N.ignore=!0}for(var R=s.childCount()-1;R>=$;R--){var j=s.childAt(R);removeChildFromGroup(s,j,c)}}}function removeChildFromGroup(a,s,l){s&&applyLeaveTransition(s,customInnerStore(a).option,l)}function diffGroupChildren(a){new DataDiffer(a.oldChildren,a.newChildren,getKey$1,getKey$1,a).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey$1(a,s){var l=a&&a.name;return l??GROUP_DIFF_PREFIX+s}function processAddUpdate(a,s){var l=this.context,o=a!=null?l.newChildren[a]:null,c=s!=null?l.oldChildren[s]:null;doCreateOrUpdateEl(l.api,c,l.dataIndex,o,l.seriesModel,l.group)}function processRemove(a){var s=this.context,l=s.oldChildren[a];l&&applyLeaveTransition(l,customInnerStore(l).option,s.seriesModel)}function getPathData(a){return a&&(a.pathData||a.d)}function hasOwnPathData(a){return a&&(hasOwn(a,"pathData")||hasOwn(a,"d"))}function install$s(a){a.registerChartView(CustomChartView),a.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(s,l,o,c){var u=l.get("value"),d=l.get("status");if(this._axisModel=s,this._axisPointerModel=l,this._api=o,!(!c&&this._lastValue===u&&this._lastStatus===d)){this._lastValue=u,this._lastStatus=d;var f=this._group,g=this._handle;if(!d||d==="hide"){f&&f.hide(),g&&g.hide();return}f&&f.show(),g&&g.show();var y={};this.makeElOption(y,u,s,l,o);var $=y.graphicKey;$!==this._lastGraphicKey&&this.clear(o),this._lastGraphicKey=$;var x=this._moveAnimation=this.determineAnimation(s,l);if(!f)f=this._group=new Group$3,this.createPointerEl(f,y,s,l),this.createLabelEl(f,y,s,l),o.getZr().add(f);else{var N=curry$1(updateProps,l,x);this.updatePointerEl(f,y,N),this.updateLabelEl(f,y,N,l)}updateMandatoryProps(f,l,!0),this._renderHandle(u)}},a.prototype.remove=function(s){this.clear(s)},a.prototype.dispose=function(s){this.clear(s)},a.prototype.determineAnimation=function(s,l){var o=l.get("animation"),c=s.axis,u=c.type==="category",d=l.get("snap");if(!d&&!u)return!1;if(o==="auto"||o==null){var f=this.animationThreshold;if(u&&c.getBandWidth()>f)return!0;if(d){var g=getAxisInfo$1(s).seriesDataCount,y=c.getExtent();return Math.abs(y[0]-y[1])/g>f}return!1}return o===!0},a.prototype.makeElOption=function(s,l,o,c,u){},a.prototype.createPointerEl=function(s,l,o,c){var u=l.pointer;if(u){var d=inner$b(s).pointerEl=new graphic[u.type](clone$1(l.pointer));s.add(d)}},a.prototype.createLabelEl=function(s,l,o,c){if(l.label){var u=inner$b(s).labelEl=new ZRText(clone$1(l.label));s.add(u),updateLabelShowHide(u,c)}},a.prototype.updatePointerEl=function(s,l,o){var c=inner$b(s).pointerEl;c&&l.pointer&&(c.setStyle(l.pointer.style),o(c,{shape:l.pointer.shape}))},a.prototype.updateLabelEl=function(s,l,o,c){var u=inner$b(s).labelEl;u&&(u.setStyle(l.label.style),o(u,{x:l.label.x,y:l.label.y}),updateLabelShowHide(u,c))},a.prototype._renderHandle=function(s){if(!(this._dragging||!this.updateHandleTransform)){var l=this._axisPointerModel,o=this._api.getZr(),c=this._handle,u=l.getModel("handle"),d=l.get("status");if(!u.get("show")||!d||d==="hide"){c&&o.remove(c),this._handle=null;return}var f;this._handle||(f=!0,c=this._handle=createIcon(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(y){stop(y.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),o.add(c)),updateMandatoryProps(c,l,!1),c.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var g=u.get("size");isArray$3(g)||(g=[g,g]),c.scaleX=g[0]/2,c.scaleY=g[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(s,f)}},a.prototype._moveHandleToValue=function(s,l){updateProps(this._axisPointerModel,!l&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(s,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(s,l){var o=this._handle;if(o){this._dragging=!0;var c=this.updateHandleTransform(getHandleTransProps(o),[s,l],this._axisModel,this._axisPointerModel);this._payloadInfo=c,o.stopAnimation(),o.attr(getHandleTransProps(c)),inner$b(o).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var s=this._handle;if(s){var l=this._payloadInfo,o=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:l.cursorPoint[0],y:l.cursorPoint[1],tooltipOption:l.tooltipOption,axesInfo:[{axisDim:o.axis.dim,axisIndex:o.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var s=this._handle;if(s){var l=this._axisPointerModel.get("value");this._moveHandleToValue(l),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(s){this._lastValue=null,this._lastStatus=null;var l=s.getZr(),o=this._group,c=this._handle;l&&o&&(this._lastGraphicKey=null,o&&l.remove(o),c&&l.remove(c),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(s,l,o){return o=o||0,{x:s[o],y:s[1-o],width:l[o],height:l[1-o]}},a}();function updateProps(a,s,l,o){propsEqual(inner$b(l).lastProp,o)||(inner$b(l).lastProp=o,s?updateProps$1(l,o,a):(l.stopAnimation(),l.attr(o)))}function propsEqual(a,s){if(isObject$5(a)&&isObject$5(s)){var l=!0;return each$f(s,function(o,c){l=l&&propsEqual(a[c],o)}),!!l}else return a===s}function updateLabelShowHide(a,s){a[s.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function updateMandatoryProps(a,s,l){var o=s.get("z"),c=s.get("zlevel");a&&a.traverse(function(u){u.type!=="group"&&(o!=null&&(u.z=o),c!=null&&(u.zlevel=c),u.silent=l)})}function buildElStyle(a){var s=a.get("type"),l=a.getModel(s+"Style"),o;return s==="line"?(o=l.getLineStyle(),o.fill=null):s==="shadow"&&(o=l.getAreaStyle(),o.stroke=null),o}function buildLabelElOption(a,s,l,o,c){var u=l.get("value"),d=getValueLabel(u,s.axis,s.ecModel,l.get("seriesDataIndices"),{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])}),f=l.getModel("label"),g=normalizeCssArray(f.get("padding")||0),y=f.getFont(),$=getBoundingRect(d,y),x=c.position,N=$.width+g[1]+g[3],R=$.height+g[0]+g[2],j=c.align;j==="right"&&(x[0]-=N),j==="center"&&(x[0]-=N/2);var ne=c.verticalAlign;ne==="bottom"&&(x[1]-=R),ne==="middle"&&(x[1]-=R/2),confineInContainer(x,N,R,o);var se=f.get("backgroundColor");(!se||se==="auto")&&(se=s.get(["axisLine","lineStyle","color"])),a.label={x:x[0],y:x[1],style:createTextStyle(f,{text:d,font:y,fill:f.getTextColor(),padding:g,backgroundColor:se}),z2:10}}function confineInContainer(a,s,l,o){var c=o.getWidth(),u=o.getHeight();a[0]=Math.min(a[0]+s,c)-s,a[1]=Math.min(a[1]+l,u)-l,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function getValueLabel(a,s,l,o,c){a=s.scale.parse(a);var u=s.scale.getLabel({value:a},{precision:c.precision}),d=c.formatter;if(d){var f={value:getAxisRawValue(s,{value:a}),axisDimension:s.dim,axisIndex:s.index,seriesData:[]};each$f(o,function(g){var y=l.getSeriesByIndex(g.seriesIndex),$=g.dataIndexInside,x=y&&y.getDataParams($);x&&f.seriesData.push(x)}),isString$2(d)?u=d.replace("{value}",u):isFunction$2(d)&&(u=d(f))}return u}function getTransformedPosition(a,s,l){var o=create$1();return rotate(o,o,l.rotation),translate(o,o,l.position),applyTransform([a.dataToCoord(s),(l.labelOffset||0)+(l.labelDirection||1)*(l.labelMargin||0)],o)}function buildCartesianSingleLabelElOption(a,s,l,o,c,u){var d=AxisBuilder.innerTextLayout(l.rotation,0,l.labelDirection);l.labelMargin=c.get(["label","margin"]),buildLabelElOption(s,o,c,u,{position:getTransformedPosition(o.axis,a,l),align:d.textAlign,verticalAlign:d.textVerticalAlign})}function makeLineShape(a,s,l){return l=l||0,{x1:a[l],y1:a[1-l],x2:s[l],y2:s[1-l]}}function makeRectShape(a,s,l){return l=l||0,{x:a[l],y:a[1-l],width:s[l],height:s[1-l]}}function makeSectorShape(a,s,l,o,c,u){return{cx:a,cy:s,r0:l,r:o,startAngle:c,endAngle:u,clockwise:!0}}var CartesianAxisPointer=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.makeElOption=function(l,o,c,u,d){var f=c.axis,g=f.grid,y=u.get("type"),$=getCartesian(g,f).getOtherAxis(f).getGlobalExtent(),x=f.toGlobalCoord(f.dataToCoord(o,!0));if(y&&y!=="none"){var N=buildElStyle(u),R=pointerShapeBuilder$2[y](f,x,$);R.style=N,l.graphicKey=R.type,l.pointer=R}var j=layout$2(g.model,c);buildCartesianSingleLabelElOption(o,l,j,c,u,d)},s.prototype.getHandleTransform=function(l,o,c){var u=layout$2(o.axis.grid.model,o,{labelInside:!1});u.labelMargin=c.get(["handle","margin"]);var d=getTransformedPosition(o.axis,l,u);return{x:d[0],y:d[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(l,o,c,u){var d=c.axis,f=d.grid,g=d.getGlobalExtent(!0),y=getCartesian(f,d).getOtherAxis(d).getGlobalExtent(),$=d.dim==="x"?0:1,x=[l.x,l.y];x[$]+=o[$],x[$]=Math.min(g[1],x[$]),x[$]=Math.max(g[0],x[$]);var N=(y[1]+y[0])/2,R=[N,N];R[$]=x[$];var j=[{verticalAlign:"middle"},{align:"center"}];return{x:x[0],y:x[1],rotation:l.rotation,cursorPoint:R,tooltipOption:j[$]}},s}(BaseAxisPointer);function getCartesian(a,s){var l={};return l[s.dim+"AxisIndex"]=s.index,a.getCartesian(l)}var pointerShapeBuilder$2={line:function(a,s,l){var o=makeLineShape([s,l[0]],[s,l[1]],getAxisDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,s,l){var o=Math.max(1,a.getBandWidth()),c=l[1]-l[0];return{type:"Rect",shape:makeRectShape([s-o/2,l[0]],[o,c],getAxisDimIndex(a))}}};function getAxisDimIndex(a){return a.dim==="x"?0:1}var AxisPointerModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="axisPointer",s.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},s}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(a,s,l){if(!env.node){var o=s.getZr();inner$a(o).records||(inner$a(o).records={}),initGlobalListeners(o,s);var c=inner$a(o).records[a]||(inner$a(o).records[a]={});c.handler=l}}function initGlobalListeners(a,s){if(inner$a(a).initialized)return;inner$a(a).initialized=!0,l("click",curry$1(doEnter,"click")),l("mousemove",curry$1(doEnter,"mousemove")),l("globalout",onLeave);function l(o,c){a.on(o,function(u){var d=makeDispatchAction$1(s);each$8(inner$a(a).records,function(f){f&&c(f,u,d.dispatchAction)}),dispatchTooltipFinally(d.pendings,s)})}}function dispatchTooltipFinally(a,s){var l=a.showTip.length,o=a.hideTip.length,c;l?c=a.showTip[l-1]:o&&(c=a.hideTip[o-1]),c&&(c.dispatchAction=null,s.dispatchAction(c))}function onLeave(a,s,l){a.handler("leave",null,l)}function doEnter(a,s,l,o){s.handler(a,l,o)}function makeDispatchAction$1(a){var s={showTip:[],hideTip:[]},l=function(o){var c=s[o.type];c?c.push(o):(o.dispatchAction=l,a.dispatchAction(o))};return{dispatchAction:l,pendings:s}}function unregister(a,s){if(!env.node){var l=s.getZr(),o=(inner$a(l).records||{})[a];o&&(inner$a(l).records[a]=null)}}var AxisPointerView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=o.getComponent("tooltip"),d=l.get("triggerOn")||u&&u.get("triggerOn")||"mousemove|click";register("axisPointer",c,function(f,g,y){d!=="none"&&(f==="leave"||d.indexOf(f)>=0)&&y({type:"updateAxisPointer",currTrigger:f,x:g&&g.offsetX,y:g&&g.offsetY})})},s.prototype.remove=function(l,o){unregister("axisPointer",o)},s.prototype.dispose=function(l,o){unregister("axisPointer",o)},s.type="axisPointer",s}(ComponentView);function findPointFromSeries(a,s){var l=[],o=a.seriesIndex,c;if(o==null||!(c=s.getSeriesByIndex(o)))return{point:[]};var u=c.getData(),d=queryDataIndex(u,a);if(d==null||d<0||isArray$3(d))return{point:[]};var f=u.getItemGraphicEl(d),g=c.coordinateSystem;if(c.getTooltipPosition)l=c.getTooltipPosition(d)||[];else if(g&&g.dataToPoint)if(a.isStacked){var y=g.getBaseAxis(),$=g.getOtherAxis(y),x=$.dim,N=y.dim,R=x==="x"||x==="radius"?1:0,j=u.mapDimension(N),ne=[];ne[R]=u.get(j,d),ne[1-R]=u.get(u.getCalculationInfo("stackResultDimension"),d),l=g.dataToPoint(ne)||[]}else l=g.dataToPoint(u.getValues(map$1(g.dimensions,function(ce){return u.mapDimension(ce)}),d))||[];else if(f){var se=f.getBoundingRect().clone();se.applyTransform(f.transform),l=[se.x+se.width/2,se.y+se.height/2]}return{point:l,el:f}}var inner$9=makeInner();function axisTrigger(a,s,l){var o=a.currTrigger,c=[a.x,a.y],u=a,d=a.dispatchAction||bind$1(l.dispatchAction,l),f=s.getComponent("axisPointer").coordSysAxesInfo;if(f){illegalPoint(c)&&(c=findPointFromSeries({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},s).point);var g=illegalPoint(c),y=u.axesInfo,$=f.axesInfo,x=o==="leave"||illegalPoint(c),N={},R={},j={list:[],map:{}},ne={showPointer:curry$1(showPointer,R),showTooltip:curry$1(showTooltip,j)};each$f(f.coordSysMap,function(ce,fe){var ea=g||ce.containPoint(c);each$f(f.coordSysAxesInfo[fe],function(ta,na){var aa=ta.axis,ia=findInputAxisInfo(y,ta);if(!x&&ea&&(!y||ia)){var sa=ia&&ia.value;sa==null&&!g&&(sa=aa.pointToData(c)),sa!=null&&processOnAxis(ta,sa,ne,!1,N)}})});var se={};return each$f($,function(ce,fe){var ea=ce.linkGroup;ea&&!R[fe]&&each$f(ea.axesInfo,function(ta,na){var aa=R[na];if(ta!==ce&&aa){var ia=aa.value;ea.mapper&&(ia=ce.axis.scale.parse(ea.mapper(ia,makeMapperParam(ta),makeMapperParam(ce)))),se[ce.key]=ia}})}),each$f(se,function(ce,fe){processOnAxis($[fe],ce,ne,!0,N)}),updateModelActually(R,$,N),dispatchTooltipActually(j,c,a,d),dispatchHighDownActually($,d,l),N}}function processOnAxis(a,s,l,o,c){var u=a.axis;if(!(u.scale.isBlank()||!u.containData(s))){if(!a.involveSeries){l.showPointer(a,s);return}var d=buildPayloadsBySeries(s,a),f=d.payloadBatch,g=d.snapToValue;f[0]&&c.seriesIndex==null&&extend(c,f[0]),!o&&a.snap&&u.containData(g)&&g!=null&&(s=g),l.showPointer(a,s,f),l.showTooltip(a,d,g)}}function buildPayloadsBySeries(a,s){var l=s.axis,o=l.dim,c=a,u=[],d=Number.MAX_VALUE,f=-1;return each$f(s.seriesModels,function(g,y){var $=g.getData().mapDimensionsAll(o),x,N;if(g.getAxisTooltipData){var R=g.getAxisTooltipData($,a,l);N=R.dataIndices,x=R.nestestValue}else{if(N=g.getData().indicesOfNearest($[0],a,l.type==="category"?.5:null),!N.length)return;x=g.getData().get($[0],N[0])}if(!(x==null||!isFinite(x))){var j=a-x,ne=Math.abs(j);ne<=d&&((ne<d||j>=0&&f<0)&&(d=ne,f=j,c=x,u.length=0),each$f(N,function(se){u.push({seriesIndex:g.seriesIndex,dataIndexInside:se,dataIndex:g.getData().getRawIndex(se)})}))}}),{payloadBatch:u,snapToValue:c}}function showPointer(a,s,l,o){a[s.key]={value:l,payloadBatch:o}}function showTooltip(a,s,l,o){var c=l.payloadBatch,u=s.axis,d=u.model,f=s.axisPointerModel;if(!(!s.triggerTooltip||!c.length)){var g=s.coordSys.model,y=makeKey(g),$=a.map[y];$||($=a.map[y]={coordSysId:g.id,coordSysIndex:g.componentIndex,coordSysType:g.type,coordSysMainType:g.mainType,dataByAxis:[]},a.list.push($)),$.dataByAxis.push({axisDim:u.dim,axisIndex:d.componentIndex,axisType:d.type,axisId:d.id,value:o,valueLabelOpt:{precision:f.get(["label","precision"]),formatter:f.get(["label","formatter"])},seriesDataIndices:c.slice()})}}function updateModelActually(a,s,l){var o=l.axesInfo=[];each$f(s,function(c,u){var d=c.axisPointerModel.option,f=a[u];f?(!c.useHandle&&(d.status="show"),d.value=f.value,d.seriesDataIndices=(f.payloadBatch||[]).slice()):!c.useHandle&&(d.status="hide"),d.status==="show"&&o.push({axisDim:c.axis.dim,axisIndex:c.axis.model.componentIndex,value:d.value})})}function dispatchTooltipActually(a,s,l,o){if(illegalPoint(s)||!a.list.length){o({type:"hideTip"});return}var c=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};o({type:"showTip",escapeConnect:!0,x:s[0],y:s[1],tooltipOption:l.tooltipOption,position:l.position,dataIndexInside:c.dataIndexInside,dataIndex:c.dataIndex,seriesIndex:c.seriesIndex,dataByCoordSys:a.list})}function dispatchHighDownActually(a,s,l){var o=l.getZr(),c="axisPointerLastHighlights",u=inner$9(o)[c]||{},d=inner$9(o)[c]={};each$f(a,function(y,$){var x=y.axisPointerModel.option;x.status==="show"&&y.triggerEmphasis&&each$f(x.seriesDataIndices,function(N){var R=N.seriesIndex+" | "+N.dataIndex;d[R]=N})});var f=[],g=[];each$f(u,function(y,$){!d[$]&&g.push(y)}),each$f(d,function(y,$){!u[$]&&f.push(y)}),g.length&&l.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:g}),f.length&&l.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:f})}function findInputAxisInfo(a,s){for(var l=0;l<(a||[]).length;l++){var o=a[l];if(s.axis.dim===o.axisDim&&s.axis.model.componentIndex===o.axisIndex)return o}}function makeMapperParam(a){var s=a.axis.model,l={},o=l.axisDim=a.axis.dim;return l.axisIndex=l[o+"AxisIndex"]=s.componentIndex,l.axisName=l[o+"AxisName"]=s.name,l.axisId=l[o+"AxisId"]=s.id,l}function illegalPoint(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function install$r(a){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),a.registerComponentModel(AxisPointerModel),a.registerComponentView(AxisPointerView),a.registerPreprocessor(function(s){if(s){(!s.axisPointer||s.axisPointer.length===0)&&(s.axisPointer={});var l=s.axisPointer.link;l&&!isArray$3(l)&&(s.axisPointer.link=[l])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(s,l){s.getComponent("axisPointer").coordSysAxesInfo=collect(s,l)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$q(a){use(install$O),use(install$r)}var PolarAxisPointer=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.makeElOption=function(l,o,c,u,d){var f=c.axis;f.dim==="angle"&&(this.animationThreshold=Math.PI/18);var g=f.polar,y=g.getOtherAxis(f),$=y.getExtent(),x=f.dataToCoord(o),N=u.get("type");if(N&&N!=="none"){var R=buildElStyle(u),j=pointerShapeBuilder$1[N](f,g,x,$);j.style=R,l.graphicKey=j.type,l.pointer=j}var ne=u.get(["label","margin"]),se=getLabelPosition(o,c,u,g,ne);buildLabelElOption(l,c,u,d,se)},s}(BaseAxisPointer);function getLabelPosition(a,s,l,o,c){var u=s.axis,d=u.dataToCoord(a),f=o.getAngleAxis().getExtent()[0];f=f/180*Math.PI;var g=o.getRadiusAxis().getExtent(),y,$,x;if(u.dim==="radius"){var N=create$1();rotate(N,N,f),translate(N,N,[o.cx,o.cy]),y=applyTransform([d,-c],N);var R=s.getModel("axisLabel").get("rotate")||0,j=AxisBuilder.innerTextLayout(f,R*Math.PI/180,-1);$=j.textAlign,x=j.textVerticalAlign}else{var ne=g[1];y=o.coordToPoint([ne+c,d]);var se=o.cx,ce=o.cy;$=Math.abs(y[0]-se)/ne<.3?"center":y[0]>se?"left":"right",x=Math.abs(y[1]-ce)/ne<.3?"middle":y[1]>ce?"top":"bottom"}return{position:y,align:$,verticalAlign:x}}var pointerShapeBuilder$1={line:function(a,s,l,o){return a.dim==="angle"?{type:"Line",shape:makeLineShape(s.coordToPoint([o[0],l]),s.coordToPoint([o[1],l]))}:{type:"Circle",shape:{cx:s.cx,cy:s.cy,r:l}}},shadow:function(a,s,l,o){var c=Math.max(1,a.getBandWidth()),u=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:makeSectorShape(s.cx,s.cy,o[0],o[1],(-l-c/2)*u,(-l+c/2)*u)}:{type:"Sector",shape:makeSectorShape(s.cx,s.cy,l-c/2,l+c/2,0,Math.PI*2)}}},PolarModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.findAxisModel=function(l){var o,c=this.ecModel;return c.eachComponent(l,function(u){u.getCoordSysModel()===this&&(o=u)},this),o},s.type="polar",s.dependencies=["radiusAxis","angleAxis"],s.defaultOption={z:0,center:["50%","50%"],radius:"80%"},s}(ComponentModel),PolarAxisModel=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},s.type="polarAxis",s}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="angleAxis",s}(PolarAxisModel),RadiusAxisModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="radiusAxis",s}(PolarAxisModel),RadiusAxis=function(a){__extends(s,a);function s(l,o){return a.call(this,"radius",l,o)||this}return s.prototype.pointToData=function(l,o){return this.polar.pointToData(l,o)[this.dim==="radius"?0:1]},s}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(a){__extends(s,a);function s(l,o){return a.call(this,"angle",l,o||[0,360])||this}return s.prototype.pointToData=function(l,o){return this.polar.pointToData(l,o)[this.dim==="radius"?0:1]},s.prototype.calculateCategoryInterval=function(){var l=this,o=l.getLabelModel(),c=l.scale,u=c.getExtent(),d=c.count();if(u[1]-u[0]<1)return 0;var f=u[0],g=l.dataToCoord(f+1)-l.dataToCoord(f),y=Math.abs(g),$=getBoundingRect(f==null?"":f+"",o.getFont(),"center","top"),x=Math.max($.height,7),N=x/y;isNaN(N)&&(N=1/0);var R=Math.max(0,Math.floor(N)),j=inner$8(l.model),ne=j.lastAutoInterval,se=j.lastTickCount;return ne!=null&&se!=null&&Math.abs(ne-R)<=1&&Math.abs(se-d)<=1&&ne>R?R=ne:(j.lastTickCount=d,j.lastAutoInterval=R),R},s}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function a(s){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=s||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(s){var l=this.pointToCoord(s);return this._radiusAxis.contain(l[0])&&this._angleAxis.contain(l[1])},a.prototype.containData=function(s){return this._radiusAxis.containData(s[0])&&this._angleAxis.containData(s[1])},a.prototype.getAxis=function(s){var l="_"+s+"Axis";return this[l]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(s){var l=[],o=this._angleAxis,c=this._radiusAxis;return o.scale.type===s&&l.push(o),c.scale.type===s&&l.push(c),l},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(s){var l=this._angleAxis;return s===l?this._radiusAxis:l},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(s){var l=s!=null&&s!=="auto"?this.getAxis(s):this.getBaseAxis();return{baseAxes:[l],otherAxes:[this.getOtherAxis(l)]}},a.prototype.dataToPoint=function(s,l){return this.coordToPoint([this._radiusAxis.dataToRadius(s[0],l),this._angleAxis.dataToAngle(s[1],l)])},a.prototype.pointToData=function(s,l){var o=this.pointToCoord(s);return[this._radiusAxis.radiusToData(o[0],l),this._angleAxis.angleToData(o[1],l)]},a.prototype.pointToCoord=function(s){var l=s[0]-this.cx,o=s[1]-this.cy,c=this.getAngleAxis(),u=c.getExtent(),d=Math.min(u[0],u[1]),f=Math.max(u[0],u[1]);c.inverse?d=f-360:f=d+360;var g=Math.sqrt(l*l+o*o);l/=g,o/=g;for(var y=Math.atan2(-o,l)/Math.PI*180,$=y<d?1:-1;y<d||y>f;)y+=$*360;return[g,y]},a.prototype.coordToPoint=function(s){var l=s[0],o=s[1]/180*Math.PI,c=Math.cos(o)*l+this.cx,u=-Math.sin(o)*l+this.cy;return[c,u]},a.prototype.getArea=function(){var s=this.getAngleAxis(),l=this.getRadiusAxis(),o=l.getExtent().slice();o[0]>o[1]&&o.reverse();var c=s.getExtent(),u=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:o[0],r:o[1],startAngle:-c[0]*u,endAngle:-c[1]*u,clockwise:s.inverse,contain:function(d,f){var g=d-this.cx,y=f-this.cy,$=g*g+y*y-1e-4,x=this.r,N=this.r0;return $<=x*x&&$>=N*N}}},a.prototype.convertToPixel=function(s,l,o){var c=getCoordSys$2(l);return c===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(s,l,o){var c=getCoordSys$2(l);return c===this?this.pointToData(o):null},a}();function getCoordSys$2(a){var s=a.seriesModel,l=a.polarModel;return l&&l.coordinateSystem||s&&s.coordinateSystem}const Polar$1=Polar;function resizePolar(a,s,l){var o=s.get("center"),c=l.getWidth(),u=l.getHeight();a.cx=parsePercent(o[0],c),a.cy=parsePercent(o[1],u);var d=a.getRadiusAxis(),f=Math.min(c,u)/2,g=s.get("radius");g==null?g=[0,"100%"]:isArray$3(g)||(g=[0,g]);var y=[parsePercent(g[0],f),parsePercent(g[1],f)];d.inverse?d.setExtent(y[1],y[0]):d.setExtent(y[0],y[1])}function updatePolarScale(a,s){var l=this,o=l.getAngleAxis(),c=l.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),c.scale.setExtent(1/0,-1/0),a.eachSeries(function(f){if(f.coordinateSystem===l){var g=f.getData();each$f(getDataDimensionsOnAxis(g,"radius"),function(y){c.scale.unionExtentFromData(g,y)}),each$f(getDataDimensionsOnAxis(g,"angle"),function(y){o.scale.unionExtentFromData(g,y)})}}),niceScaleExtent(o.scale,o.model),niceScaleExtent(c.scale,c.model),o.type==="category"&&!o.onBand){var u=o.getExtent(),d=360/o.scale.count();o.inverse?u[1]+=d:u[1]-=d,o.setExtent(u[0],u[1])}}function isAngleAxisModel(a){return a.mainType==="angleAxis"}function setAxis(a,s){var l;if(a.type=s.get("type"),a.scale=createScaleByModel$1(s),a.onBand=s.get("boundaryGap")&&a.type==="category",a.inverse=s.get("inverse"),isAngleAxisModel(s)){a.inverse=a.inverse!==s.get("clockwise");var o=s.get("startAngle"),c=(l=s.get("endAngle"))!==null&&l!==void 0?l:o+(a.inverse?-360:360);a.setExtent(o,c)}s.axis=a,a.model=s}var polarCreator={dimensions:polarDimensions,create:function(a,s){var l=[];return a.eachComponent("polar",function(o,c){var u=new Polar$1(c+"");u.update=updatePolarScale;var d=u.getRadiusAxis(),f=u.getAngleAxis(),g=o.findAxisModel("radiusAxis"),y=o.findAxisModel("angleAxis");setAxis(d,g),setAxis(f,y),resizePolar(u,o,s),l.push(u),o.coordinateSystem=u,u.model=o}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="polar"){var c=o.getReferringComponents("polar",SINGLE_REFERRING).models[0];o.coordinateSystem=c.coordinateSystem}}),l}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(a,s,l){s[1]>s[0]&&(s=s.slice().reverse());var o=a.coordToPoint([s[0],l]),c=a.coordToPoint([s[1],l]);return{x1:o[0],y1:o[1],x2:c[0],y2:c[1]}}function getRadiusIdx(a){var s=a.getRadiusAxis();return s.inverse?0:1}function fixAngleOverlap(a){var s=a[0],l=a[a.length-1];s&&l&&Math.abs(Math.abs(s.coord-l.coord)-360)<1e-4&&a.pop()}var AngleAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.axisPointerClass="PolarAxisPointer",l}return s.prototype.render=function(l,o){if(this.group.removeAll(),!!l.get("show")){var c=l.axis,u=c.polar,d=u.getRadiusAxis().getExtent(),f=c.getTicksCoords(),g=c.getMinorTicksCoords(),y=map$1(c.getViewLabels(),function($){$=clone$4($);var x=c.scale,N=x.type==="ordinal"?x.getRawOrdinalNumber($.tickValue):$.tickValue;return $.coord=c.dataToCoord(N),$});fixAngleOverlap(y),fixAngleOverlap(f),each$f(elementList,function($){l.get([$,"show"])&&(!c.scale.isBlank()||$==="axisLine")&&angelAxisElementsBuilders[$](this.group,l,u,f,g,d,y)},this)}},s.type="angleAxis",s}(AxisView),angelAxisElementsBuilders={axisLine:function(a,s,l,o,c,u){var d=s.getModel(["axisLine","lineStyle"]),f=l.getAngleAxis(),g=Math.PI/180,y=f.getExtent(),$=getRadiusIdx(l),x=$?0:1,N,R=Math.abs(y[1]-y[0])===360?"Circle":"Arc";u[x]===0?N=new graphic[R]({shape:{cx:l.cx,cy:l.cy,r:u[$],startAngle:-y[0]*g,endAngle:-y[1]*g,clockwise:f.inverse},style:d.getLineStyle(),z2:1,silent:!0}):N=new Ring$1({shape:{cx:l.cx,cy:l.cy,r:u[$],r0:u[x]},style:d.getLineStyle(),z2:1,silent:!0}),N.style.fill=null,a.add(N)},axisTick:function(a,s,l,o,c,u){var d=s.getModel("axisTick"),f=(d.get("inside")?-1:1)*d.get("length"),g=u[getRadiusIdx(l)],y=map$1(o,function($){return new Line$1({shape:getAxisLineShape(l,[g,g+f],$.coord)})});a.add(mergePath(y,{style:defaults(d.getModel("lineStyle").getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,s,l,o,c,u){if(c.length){for(var d=s.getModel("axisTick"),f=s.getModel("minorTick"),g=(d.get("inside")?-1:1)*f.get("length"),y=u[getRadiusIdx(l)],$=[],x=0;x<c.length;x++)for(var N=0;N<c[x].length;N++)$.push(new Line$1({shape:getAxisLineShape(l,[y,y+g],c[x][N].coord)}));a.add(mergePath($,{style:defaults(f.getModel("lineStyle").getLineStyle(),defaults(d.getLineStyle(),{stroke:s.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,s,l,o,c,u,d){var f=s.getCategories(!0),g=s.getModel("axisLabel"),y=g.get("margin"),$=s.get("triggerEvent");each$f(d,function(x,N){var R=g,j=x.tickValue,ne=u[getRadiusIdx(l)],se=l.coordToPoint([ne+y,x.coord]),ce=l.cx,fe=l.cy,ea=Math.abs(se[0]-ce)/ne<.3?"center":se[0]>ce?"left":"right",ta=Math.abs(se[1]-fe)/ne<.3?"middle":se[1]>fe?"top":"bottom";if(f&&f[j]){var na=f[j];isObject$5(na)&&na.textStyle&&(R=new Model(na.textStyle,g,g.ecModel))}var aa=new ZRText({silent:AxisBuilder.isLabelSilent(s),style:createTextStyle(R,{x:se[0],y:se[1],fill:R.getTextColor()||s.get(["axisLine","lineStyle","color"]),text:x.formattedLabel,align:ea,verticalAlign:ta})});if(a.add(aa),$){var ia=AxisBuilder.makeAxisEventDataBase(s);ia.targetType="axisLabel",ia.value=x.rawLabel,getECData(aa).eventData=ia}},this)},splitLine:function(a,s,l,o,c,u){var d=s.getModel("splitLine"),f=d.getModel("lineStyle"),g=f.get("color"),y=0;g=g instanceof Array?g:[g];for(var $=[],x=0;x<o.length;x++){var N=y++%g.length;$[N]=$[N]||[],$[N].push(new Line$1({shape:getAxisLineShape(l,u,o[x].coord)}))}for(var x=0;x<$.length;x++)a.add(mergePath($[x],{style:defaults({stroke:g[x%g.length]},f.getLineStyle()),silent:!0,z:s.get("z")}))},minorSplitLine:function(a,s,l,o,c,u){if(c.length){for(var d=s.getModel("minorSplitLine"),f=d.getModel("lineStyle"),g=[],y=0;y<c.length;y++)for(var $=0;$<c[y].length;$++)g.push(new Line$1({shape:getAxisLineShape(l,u,c[y][$].coord)}));a.add(mergePath(g,{style:f.getLineStyle(),silent:!0,z:s.get("z")}))}},splitArea:function(a,s,l,o,c,u){if(o.length){var d=s.getModel("splitArea"),f=d.getModel("areaStyle"),g=f.get("color"),y=0;g=g instanceof Array?g:[g];for(var $=[],x=Math.PI/180,N=-o[0].coord*x,R=Math.min(u[0],u[1]),j=Math.max(u[0],u[1]),ne=s.get("clockwise"),se=1,ce=o.length;se<=ce;se++){var fe=se===ce?o[0].coord:o[se].coord,ea=y++%g.length;$[ea]=$[ea]||[],$[ea].push(new Sector({shape:{cx:l.cx,cy:l.cy,r0:R,r:j,startAngle:N,endAngle:-fe*x,clockwise:ne},silent:!0})),N=-fe*x}for(var se=0;se<$.length;se++)a.add(mergePath($[se],{style:defaults({fill:g[se%g.length]},f.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.axisPointerClass="PolarAxisPointer",l}return s.prototype.render=function(l,o){if(this.group.removeAll(),!!l.get("show")){var c=this._axisGroup,u=this._axisGroup=new Group$3;this.group.add(u);var d=l.axis,f=d.polar,g=f.getAngleAxis(),y=d.getTicksCoords(),$=d.getMinorTicksCoords(),x=g.getExtent()[0],N=d.getExtent(),R=layoutAxis(f,l,x),j=new AxisBuilder(l,R);each$f(axisBuilderAttrs$1,j.add,j),u.add(j.getGroup()),groupTransition(c,u,l),each$f(selfBuilderAttrs$1,function(ne){l.get([ne,"show"])&&!d.scale.isBlank()&&axisElementBuilders$1[ne](this.group,l,f,x,N,y,$)},this)}},s.type="radiusAxis",s}(AxisView),axisElementBuilders$1={splitLine:function(a,s,l,o,c,u){var d=s.getModel("splitLine"),f=d.getModel("lineStyle"),g=f.get("color"),y=0,$=l.getAngleAxis(),x=Math.PI/180,N=$.getExtent(),R=Math.abs(N[1]-N[0])===360?"Circle":"Arc";g=g instanceof Array?g:[g];for(var j=[],ne=0;ne<u.length;ne++){var se=y++%g.length;j[se]=j[se]||[],j[se].push(new graphic[R]({shape:{cx:l.cx,cy:l.cy,r:Math.max(u[ne].coord,0),startAngle:-N[0]*x,endAngle:-N[1]*x,clockwise:$.inverse}}))}for(var ne=0;ne<j.length;ne++)a.add(mergePath(j[ne],{style:defaults({stroke:g[ne%g.length],fill:null},f.getLineStyle()),silent:!0}))},minorSplitLine:function(a,s,l,o,c,u,d){if(d.length){for(var f=s.getModel("minorSplitLine"),g=f.getModel("lineStyle"),y=[],$=0;$<d.length;$++)for(var x=0;x<d[$].length;x++)y.push(new Circle({shape:{cx:l.cx,cy:l.cy,r:d[$][x].coord}}));a.add(mergePath(y,{style:defaults({fill:null},g.getLineStyle()),silent:!0}))}},splitArea:function(a,s,l,o,c,u){if(u.length){var d=s.getModel("splitArea"),f=d.getModel("areaStyle"),g=f.get("color"),y=0;g=g instanceof Array?g:[g];for(var $=[],x=u[0].coord,N=1;N<u.length;N++){var R=y++%g.length;$[R]=$[R]||[],$[R].push(new Sector({shape:{cx:l.cx,cy:l.cy,r0:x,r:u[N].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),x=u[N].coord}for(var N=0;N<$.length;N++)a.add(mergePath($[N],{style:defaults({fill:g[N%g.length]},f.getAreaStyle()),silent:!0}))}}};function layoutAxis(a,s,l){return{position:[a.cx,a.cy],rotation:l/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:s.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function getAxisKey(a,s){return s.dim+a.model.componentIndex}function barLayoutPolar(a,s,l){var o={},c=calRadialBar(filter(s.getSeriesByType(a),function(u){return!s.isSeriesFiltered(u)&&u.coordinateSystem&&u.coordinateSystem.type==="polar"}));s.eachSeriesByType(a,function(u){if(u.coordinateSystem.type==="polar"){var d=u.getData(),f=u.coordinateSystem,g=f.getBaseAxis(),y=getAxisKey(f,g),$=getSeriesStackId(u),x=c[y][$],N=x.offset,R=x.width,j=f.getOtherAxis(g),ne=u.coordinateSystem.cx,se=u.coordinateSystem.cy,ce=u.get("barMinHeight")||0,fe=u.get("barMinAngle")||0;o[$]=o[$]||[];for(var ea=d.mapDimension(j.dim),ta=d.mapDimension(g.dim),na=isDimensionStacked(d,ea),aa=g.dim!=="radius"||!u.get("roundCap",!0),ia=j.model,sa=ia.get("startValue"),ra=j.dataToCoord(sa||0),la=0,oa=d.count();la<oa;la++){var ca=d.get(ea,la),pa=d.get(ta,la),ua=ca>=0?"p":"n",da=ra;na&&(o[$][pa]||(o[$][pa]={p:ra,n:ra}),da=o[$][pa][ua]);var ha=void 0,ga=void 0,fa=void 0,ma=void 0;if(j.dim==="radius"){var va=j.dataToCoord(ca)-ra,ka=g.dataToCoord(pa);Math.abs(va)<ce&&(va=(va<0?-1:1)*ce),ha=da,ga=da+va,fa=ka-N,ma=fa-R,na&&(o[$][pa][ua]=ga)}else{var ya=j.dataToCoord(ca,aa)-ra,ba=g.dataToCoord(pa);Math.abs(ya)<fe&&(ya=(ya<0?-1:1)*fe),ha=ba+N,ga=ha+R,fa=da,ma=da+ya,na&&(o[$][pa][ua]=ma)}d.setItemLayout(la,{cx:ne,cy:se,r0:ha,r:ga,startAngle:-fa*Math.PI/180,endAngle:-ma*Math.PI/180,clockwise:fa>=ma})}}})}function calRadialBar(a){var s={};each$f(a,function(o,c){var u=o.getData(),d=o.coordinateSystem,f=d.getBaseAxis(),g=getAxisKey(d,f),y=f.getExtent(),$=f.type==="category"?f.getBandWidth():Math.abs(y[1]-y[0])/u.count(),x=s[g]||{bandWidth:$,remainedWidth:$,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},N=x.stacks;s[g]=x;var R=getSeriesStackId(o);N[R]||x.autoWidthCount++,N[R]=N[R]||{width:0,maxWidth:0};var j=parsePercent(o.get("barWidth"),$),ne=parsePercent(o.get("barMaxWidth"),$),se=o.get("barGap"),ce=o.get("barCategoryGap");j&&!N[R].width&&(j=Math.min(x.remainedWidth,j),N[R].width=j,x.remainedWidth-=j),ne&&(N[R].maxWidth=ne),se!=null&&(x.gap=se),ce!=null&&(x.categoryGap=ce)});var l={};return each$f(s,function(o,c){l[c]={};var u=o.stacks,d=o.bandWidth,f=parsePercent(o.categoryGap,d),g=parsePercent(o.gap,1),y=o.remainedWidth,$=o.autoWidthCount,x=(y-f)/($+($-1)*g);x=Math.max(x,0),each$f(u,function(ne,se){var ce=ne.maxWidth;ce&&ce<x&&(ce=Math.min(ce,y),ne.width&&(ce=Math.min(ce,ne.width)),y-=ce,ne.width=ce,$--)}),x=(y-f)/($+($-1)*g),x=Math.max(x,0);var N=0,R;each$f(u,function(ne,se){ne.width||(ne.width=x),R=ne,N+=ne.width*(1+g)}),R&&(N-=R.width*g);var j=-N/2;each$f(u,function(ne,se){l[c][se]=l[c][se]||{offset:j,width:ne.width},j+=ne.width*(1+g)})}),l}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="polar",s}(ComponentView);function install$p(a){use(install$r),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),a.registerCoordinateSystem("polar",polarCreator),a.registerComponentModel(PolarModel),a.registerComponentView(PolarView),axisModelCreator(a,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(a,"radius",RadiusAxisModel,radiusAxisExtraOption),a.registerComponentView(AngleAxisView),a.registerComponentView(RadiusAxisView),a.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(a,s){s=s||{};var l=a.coordinateSystem,o=a.axis,c={},u=o.position,d=o.orient,f=l.getRect(),g=[f.x,f.x+f.width,f.y,f.y+f.height],y={horizontal:{top:g[2],bottom:g[3]},vertical:{left:g[0],right:g[1]}};c.position=[d==="vertical"?y.vertical[u]:g[0],d==="horizontal"?y.horizontal[u]:g[3]];var $={horizontal:0,vertical:1};c.rotation=Math.PI/2*$[d];var x={top:-1,bottom:1,right:1,left:-1};c.labelDirection=c.tickDirection=c.nameDirection=x[u],a.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),retrieve(s.labelInside,a.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var N=s.rotate;return N==null&&(N=a.get(["axisLabel","rotate"])),c.labelRotation=u==="top"?-N:N,c.z2=1,c}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.axisPointerClass="SingleAxisPointer",l}return s.prototype.render=function(l,o,c,u){var d=this.group;d.removeAll();var f=this._axisGroup;this._axisGroup=new Group$3;var g=layout$1(l),y=new AxisBuilder(l,g);each$f(axisBuilderAttrs,y.add,y),d.add(this._axisGroup),d.add(y.getGroup()),each$f(selfBuilderAttrs,function($){l.get([$,"show"])&&axisElementBuilders[$](this,this.group,this._axisGroup,l)},this),groupTransition(f,this._axisGroup,l),a.prototype.render.call(this,l,o,c,u)},s.prototype.remove=function(){rectCoordAxisHandleRemove(this)},s.type="singleAxis",s}(AxisView),axisElementBuilders={splitLine:function(a,s,l,o){var c=o.axis;if(!c.scale.isBlank()){var u=o.getModel("splitLine"),d=u.getModel("lineStyle"),f=d.get("color");f=f instanceof Array?f:[f];for(var g=d.get("width"),y=o.coordinateSystem.getRect(),$=c.isHorizontal(),x=[],N=0,R=c.getTicksCoords({tickModel:u}),j=[],ne=[],se=0;se<R.length;++se){var ce=c.toGlobalCoord(R[se].coord);$?(j[0]=ce,j[1]=y.y,ne[0]=ce,ne[1]=y.y+y.height):(j[0]=y.x,j[1]=ce,ne[0]=y.x+y.width,ne[1]=ce);var fe=new Line$1({shape:{x1:j[0],y1:j[1],x2:ne[0],y2:ne[1]},silent:!0});subPixelOptimizeLine(fe.shape,g);var ea=N++%f.length;x[ea]=x[ea]||[],x[ea].push(fe)}for(var ta=d.getLineStyle(["color"]),se=0;se<x.length;++se)s.add(mergePath(x[se],{style:defaults({stroke:f[se%f.length]},ta),silent:!0}))}},splitArea:function(a,s,l,o){rectCoordAxisBuildSplitArea(a,l,o,o)}},SingleAxisModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.getCoordSysModel=function(){return this},s.type="singleAxis",s.layoutMode="box",s.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},s}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(a){__extends(s,a);function s(l,o,c,u,d){var f=a.call(this,l,o,c)||this;return f.type=u||"value",f.position=d||"bottom",f}return s.prototype.isHorizontal=function(){var l=this.position;return l==="top"||l==="bottom"},s.prototype.pointToData=function(l,o){return this.coordinateSystem.pointToData(l)[0]},s}(Axis),singleDimensions=["single"],Single=function(){function a(s,l,o){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=s,this._init(s,l,o)}return a.prototype._init=function(s,l,o){var c=this.dimension,u=new SingleAxis(c,createScaleByModel$1(s),[0,0],s.get("type"),s.get("position")),d=u.type==="category";u.onBand=d&&s.get("boundaryGap"),u.inverse=s.get("inverse"),u.orient=s.get("orient"),s.axis=u,u.model=s,u.coordinateSystem=this,this._axis=u},a.prototype.update=function(s,l){s.eachSeries(function(o){if(o.coordinateSystem===this){var c=o.getData();each$f(c.mapDimensionsAll(this.dimension),function(u){this._axis.scale.unionExtentFromData(c,u)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(s,l){this._rect=getLayoutRect({left:s.get("left"),top:s.get("top"),right:s.get("right"),bottom:s.get("bottom"),width:s.get("width"),height:s.get("height")},{width:l.getWidth(),height:l.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var s=this._rect,l=this._axis,o=l.isHorizontal(),c=o?[0,s.width]:[0,s.height],u=l.inverse?1:0;l.setExtent(c[u],c[1-u]),this._updateAxisTransform(l,o?s.x:s.y)},a.prototype._updateAxisTransform=function(s,l){var o=s.getExtent(),c=o[0]+o[1],u=s.isHorizontal();s.toGlobalCoord=u?function(d){return d+l}:function(d){return c-d+l},s.toLocalCoord=u?function(d){return d-l}:function(d){return c-d+l}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(s){var l=this.getRect(),o=this.getAxis(),c=o.orient;return c==="horizontal"?o.contain(o.toLocalCoord(s[0]))&&s[1]>=l.y&&s[1]<=l.y+l.height:o.contain(o.toLocalCoord(s[1]))&&s[0]>=l.y&&s[0]<=l.y+l.height},a.prototype.pointToData=function(s){var l=this.getAxis();return[l.coordToData(l.toLocalCoord(s[l.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(s){var l=this.getAxis(),o=this.getRect(),c=[],u=l.orient==="horizontal"?0:1;return s instanceof Array&&(s=s[0]),c[u]=l.toGlobalCoord(l.dataToCoord(+s)),c[1-u]=u===0?o.y+o.height/2:o.x+o.width/2,c},a.prototype.convertToPixel=function(s,l,o){var c=getCoordSys$1(l);return c===this?this.dataToPoint(o):null},a.prototype.convertFromPixel=function(s,l,o){var c=getCoordSys$1(l);return c===this?this.pointToData(o):null},a}();function getCoordSys$1(a){var s=a.seriesModel,l=a.singleAxisModel;return l&&l.coordinateSystem||s&&s.coordinateSystem}function create(a,s){var l=[];return a.eachComponent("singleAxis",function(o,c){var u=new Single(o,a,s);u.name="single_"+c,u.resize(o,s),o.coordinateSystem=u,l.push(u)}),a.eachSeries(function(o){if(o.get("coordinateSystem")==="singleAxis"){var c=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];o.coordinateSystem=c&&c.coordinateSystem}}),l}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.makeElOption=function(l,o,c,u,d){var f=c.axis,g=f.coordinateSystem,y=getGlobalExtent(g,1-getPointDimIndex(f)),$=g.dataToPoint(o)[0],x=u.get("type");if(x&&x!=="none"){var N=buildElStyle(u),R=pointerShapeBuilder[x](f,$,y);R.style=N,l.graphicKey=R.type,l.pointer=R}var j=layout$1(c);buildCartesianSingleLabelElOption(o,l,j,c,u,d)},s.prototype.getHandleTransform=function(l,o,c){var u=layout$1(o,{labelInside:!1});u.labelMargin=c.get(["handle","margin"]);var d=getTransformedPosition(o.axis,l,u);return{x:d[0],y:d[1],rotation:u.rotation+(u.labelDirection<0?Math.PI:0)}},s.prototype.updateHandleTransform=function(l,o,c,u){var d=c.axis,f=d.coordinateSystem,g=getPointDimIndex(d),y=getGlobalExtent(f,g),$=[l.x,l.y];$[g]+=o[g],$[g]=Math.min(y[1],$[g]),$[g]=Math.max(y[0],$[g]);var x=getGlobalExtent(f,1-g),N=(x[1]+x[0])/2,R=[N,N];return R[g]=$[g],{x:$[0],y:$[1],rotation:l.rotation,cursorPoint:R,tooltipOption:{verticalAlign:"middle"}}},s}(BaseAxisPointer),pointerShapeBuilder={line:function(a,s,l){var o=makeLineShape([s,l[0]],[s,l[1]],getPointDimIndex(a));return{type:"Line",subPixelOptimize:!0,shape:o}},shadow:function(a,s,l){var o=a.getBandWidth(),c=l[1]-l[0];return{type:"Rect",shape:makeRectShape([s-o/2,l[0]],[o,c],getPointDimIndex(a))}}};function getPointDimIndex(a){return a.isHorizontal()?0:1}function getGlobalExtent(a,s){var l=a.getRect();return[l[XY$1[s]],l[XY$1[s]]+l[WH$1[s]]]}var SingleView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="single",s}(ComponentView);function install$o(a){use(install$r),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),a.registerComponentView(SingleView),a.registerComponentView(SingleAxisView),a.registerComponentModel(SingleAxisModel),axisModelCreator(a,"single",SingleAxisModel,SingleAxisModel.defaultOption),a.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o,c){var u=getLayoutParams(l);a.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(l,u)},s.prototype.mergeOption=function(l){a.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,l)},s.prototype.getCellSize=function(){return this.option.cellSize},s.type="calendar",s.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},s}(ComponentModel);function mergeAndNormalizeLayoutParams$1(a,s){var l=a.cellSize,o;isArray$3(l)?o=l:o=a.cellSize=[l,l],o.length===1&&(o[1]=o[0]);var c=map$1([0,1],function(u){return sizeCalculable(s,u)&&(o[u]="auto"),o[u]!=null&&o[u]!=="auto"});mergeLayoutParam(a,s,{type:"box",ignoreSize:c})}var CalendarView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){var u=this.group;u.removeAll();var d=l.coordinateSystem,f=d.getRangeInfo(),g=d.getOrient(),y=o.getLocaleModel();this._renderDayRect(l,f,u),this._renderLines(l,f,g,u),this._renderYearText(l,f,g,u),this._renderMonthText(l,y,g,u),this._renderWeekText(l,y,f,g,u)},s.prototype._renderDayRect=function(l,o,c){for(var u=l.coordinateSystem,d=l.getModel("itemStyle").getItemStyle(),f=u.getCellWidth(),g=u.getCellHeight(),y=o.start.time;y<=o.end.time;y=u.getNextNDay(y,1).time){var $=u.dataToRect([y],!1).tl,x=new Rect$2({shape:{x:$[0],y:$[1],width:f,height:g},cursor:"default",style:d});c.add(x)}},s.prototype._renderLines=function(l,o,c,u){var d=this,f=l.coordinateSystem,g=l.getModel(["splitLine","lineStyle"]).getLineStyle(),y=l.get(["splitLine","show"]),$=g.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var x=o.start,N=0;x.time<=o.end.time;N++){j(x.formatedDate),N===0&&(x=f.getDateInfo(o.start.y+"-"+o.start.m));var R=x.date;R.setMonth(R.getMonth()+1),x=f.getDateInfo(R)}j(f.getNextNDay(o.end.time,1).formatedDate);function j(ne){d._firstDayOfMonth.push(f.getDateInfo(ne)),d._firstDayPoints.push(f.dataToRect([ne],!1).tl);var se=d._getLinePointsOfOneWeek(l,ne,c);d._tlpoints.push(se[0]),d._blpoints.push(se[se.length-1]),y&&d._drawSplitline(se,g,u)}y&&this._drawSplitline(d._getEdgesPoints(d._tlpoints,$,c),g,u),y&&this._drawSplitline(d._getEdgesPoints(d._blpoints,$,c),g,u)},s.prototype._getEdgesPoints=function(l,o,c){var u=[l[0].slice(),l[l.length-1].slice()],d=c==="horizontal"?0:1;return u[0][d]=u[0][d]-o/2,u[1][d]=u[1][d]+o/2,u},s.prototype._drawSplitline=function(l,o,c){var u=new Polyline$1({z2:20,shape:{points:l},style:o});c.add(u)},s.prototype._getLinePointsOfOneWeek=function(l,o,c){for(var u=l.coordinateSystem,d=u.getDateInfo(o),f=[],g=0;g<7;g++){var y=u.getNextNDay(d.time,g),$=u.dataToRect([y.time],!1);f[2*y.day]=$.tl,f[2*y.day+1]=$[c==="horizontal"?"bl":"tr"]}return f},s.prototype._formatterLabel=function(l,o){return isString$2(l)&&l?formatTplSimple(l,o):isFunction$2(l)?l(o):o.nameMap},s.prototype._yearTextPositionControl=function(l,o,c,u,d){var f=o[0],g=o[1],y=["center","bottom"];u==="bottom"?(g+=d,y=["center","top"]):u==="left"?f-=d:u==="right"?(f+=d,y=["center","top"]):g-=d;var $=0;return(u==="left"||u==="right")&&($=Math.PI/2),{rotation:$,x:f,y:g,style:{align:y[0],verticalAlign:y[1]}}},s.prototype._renderYearText=function(l,o,c,u){var d=l.getModel("yearLabel");if(d.get("show")){var f=d.get("margin"),g=d.get("position");g||(g=c!=="horizontal"?"top":"left");var y=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],$=(y[0][0]+y[1][0])/2,x=(y[0][1]+y[1][1])/2,N=c==="horizontal"?0:1,R={top:[$,y[N][1]],bottom:[$,y[1-N][1]],left:[y[1-N][0],x],right:[y[N][0],x]},j=o.start.y;+o.end.y>+o.start.y&&(j=j+"-"+o.end.y);var ne=d.get("formatter"),se={start:o.start.y,end:o.end.y,nameMap:j},ce=this._formatterLabel(ne,se),fe=new ZRText({z2:30,style:createTextStyle(d,{text:ce})});fe.attr(this._yearTextPositionControl(fe,R[g],c,g,f)),u.add(fe)}},s.prototype._monthTextPositionControl=function(l,o,c,u,d){var f="left",g="top",y=l[0],$=l[1];return c==="horizontal"?($=$+d,o&&(f="center"),u==="start"&&(g="bottom")):(y=y+d,o&&(g="middle"),u==="start"&&(f="right")),{x:y,y:$,align:f,verticalAlign:g}},s.prototype._renderMonthText=function(l,o,c,u){var d=l.getModel("monthLabel");if(d.get("show")){var f=d.get("nameMap"),g=d.get("margin"),y=d.get("position"),$=d.get("align"),x=[this._tlpoints,this._blpoints];(!f||isString$2(f))&&(f&&(o=getLocaleModel(f)||o),f=o.get(["time","monthAbbr"])||[]);var N=y==="start"?0:1,R=c==="horizontal"?0:1;g=y==="start"?-g:g;for(var j=$==="center",ne=0;ne<x[N].length-1;ne++){var se=x[N][ne].slice(),ce=this._firstDayOfMonth[ne];if(j){var fe=this._firstDayPoints[ne];se[R]=(fe[R]+x[0][ne+1][R])/2}var ea=d.get("formatter"),ta=f[+ce.m-1],na={yyyy:ce.y,yy:(ce.y+"").slice(2),MM:ce.m,M:+ce.m,nameMap:ta},aa=this._formatterLabel(ea,na),ia=new ZRText({z2:30,style:extend(createTextStyle(d,{text:aa}),this._monthTextPositionControl(se,j,c,y,g))});u.add(ia)}}},s.prototype._weekTextPositionControl=function(l,o,c,u,d){var f="center",g="middle",y=l[0],$=l[1],x=c==="start";return o==="horizontal"?(y=y+u+(x?1:-1)*d[0]/2,f=x?"right":"left"):($=$+u+(x?1:-1)*d[1]/2,g=x?"bottom":"top"),{x:y,y:$,align:f,verticalAlign:g}},s.prototype._renderWeekText=function(l,o,c,u,d){var f=l.getModel("dayLabel");if(f.get("show")){var g=l.coordinateSystem,y=f.get("position"),$=f.get("nameMap"),x=f.get("margin"),N=g.getFirstDayOfWeek();if(!$||isString$2($)){$&&(o=getLocaleModel($)||o);var R=o.get(["time","dayOfWeekShort"]);$=R||map$1(o.get(["time","dayOfWeekAbbr"]),function(na){return na[0]})}var j=g.getNextNDay(c.end.time,7-c.lweek).time,ne=[g.getCellWidth(),g.getCellHeight()];x=parsePercent(x,Math.min(ne[1],ne[0])),y==="start"&&(j=g.getNextNDay(c.start.time,-(7+c.fweek)).time,x=-x);for(var se=0;se<7;se++){var ce=g.getNextNDay(j,se),fe=g.dataToRect([ce.time],!1).center,ea=se;ea=Math.abs((se+N)%7);var ta=new ZRText({z2:30,style:extend(createTextStyle(f,{text:$[ea]}),this._weekTextPositionControl(fe,u,y,x,ne))});d.add(ta)}}},s.type="calendar",s}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar$1=function(){function a(s,l,o){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=s}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(s){s=parseDate(s);var l=s.getFullYear(),o=s.getMonth()+1,c=o<10?"0"+o:""+o,u=s.getDate(),d=u<10?"0"+u:""+u,f=s.getDay();return f=Math.abs((f+7-this.getFirstDayOfWeek())%7),{y:l+"",m:c,d,day:f,time:s.getTime(),formatedDate:l+"-"+c+"-"+d,date:s}},a.prototype.getNextNDay=function(s,l){return l=l||0,l===0?this.getDateInfo(s):(s=new Date(this.getDateInfo(s).time),s.setDate(s.getDate()+l),this.getDateInfo(s))},a.prototype.update=function(s,l){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var o=this._rangeInfo.weeks||1,c=["width","height"],u=this._model.getCellSize().slice(),d=this._model.getBoxLayoutParams(),f=this._orient==="horizontal"?[o,7]:[7,o];each$f([0,1],function(x){$(u,x)&&(d[c[x]]=u[x]*f[x])});var g={width:l.getWidth(),height:l.getHeight()},y=this._rect=getLayoutRect(d,g);each$f([0,1],function(x){$(u,x)||(u[x]=y[c[x]]/f[x])});function $(x,N){return x[N]!=null&&x[N]!=="auto"}this._sw=u[0],this._sh=u[1]},a.prototype.dataToPoint=function(s,l){isArray$3(s)&&(s=s[0]),l==null&&(l=!0);var o=this.getDateInfo(s),c=this._rangeInfo,u=o.formatedDate;if(l&&!(o.time>=c.start.time&&o.time<c.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var d=o.day,f=this._getRangeInfo([c.start.time,u]).nthWeek;return this._orient==="vertical"?[this._rect.x+d*this._sw+this._sw/2,this._rect.y+f*this._sh+this._sh/2]:[this._rect.x+f*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]},a.prototype.pointToData=function(s){var l=this.pointToDate(s);return l&&l.time},a.prototype.dataToRect=function(s,l){var o=this.dataToPoint(s,l);return{contentShape:{x:o[0]-(this._sw-this._lineWidth)/2,y:o[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:o,tl:[o[0]-this._sw/2,o[1]-this._sh/2],tr:[o[0]+this._sw/2,o[1]-this._sh/2],br:[o[0]+this._sw/2,o[1]+this._sh/2],bl:[o[0]-this._sw/2,o[1]+this._sh/2]}},a.prototype.pointToDate=function(s){var l=Math.floor((s[0]-this._rect.x)/this._sw)+1,o=Math.floor((s[1]-this._rect.y)/this._sh)+1,c=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(o,l-1,c):this._getDateByWeeksAndDay(l,o-1,c)},a.prototype.convertToPixel=function(s,l,o){var c=getCoordSys(l);return c===this?c.dataToPoint(o):null},a.prototype.convertFromPixel=function(s,l,o){var c=getCoordSys(l);return c===this?c.pointToData(o):null},a.prototype.containPoint=function(s){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var s=this._model.get("range"),l;if(isArray$3(s)&&s.length===1&&(s=s[0]),isArray$3(s))l=s;else{var o=s.toString();if(/^\d{4}$/.test(o)&&(l=[o+"-01-01",o+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(o)){var c=this.getDateInfo(o),u=c.date;u.setMonth(u.getMonth()+1);var d=this.getNextNDay(u,-1);l=[c.formatedDate,d.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(o)&&(l=[o,o])}if(!l)return s;var f=this._getRangeInfo(l);return f.start.time>f.end.time&&l.reverse(),l},a.prototype._getRangeInfo=function(s){var l=[this.getDateInfo(s[0]),this.getDateInfo(s[1])],o;l[0].time>l[1].time&&(o=!0,l.reverse());var c=Math.floor(l[1].time/PROXIMATE_ONE_DAY)-Math.floor(l[0].time/PROXIMATE_ONE_DAY)+1,u=new Date(l[0].time),d=u.getDate(),f=l[1].date.getDate();u.setDate(d+c-1);var g=u.getDate();if(g!==f)for(var y=u.getTime()-l[1].time>0?1:-1;(g=u.getDate())!==f&&(u.getTime()-l[1].time)*y>0;)c-=y,u.setDate(g-y);var $=Math.floor((c+l[0].day+6)/7),x=o?-$+1:$-1;return o&&l.reverse(),{range:[l[0].formatedDate,l[1].formatedDate],start:l[0],end:l[1],allDay:c,weeks:$,nthWeek:x,fweek:l[0].day,lweek:l[1].day}},a.prototype._getDateByWeeksAndDay=function(s,l,o){var c=this._getRangeInfo(o);if(s>c.weeks||s===0&&l<c.fweek||s===c.weeks&&l>c.lweek)return null;var u=(s-1)*7-c.fweek+l,d=new Date(c.start.time);return d.setDate(+c.start.d+u),this.getDateInfo(d)},a.create=function(s,l){var o=[];return s.eachComponent("calendar",function(c){var u=new a(c);o.push(u),c.coordinateSystem=u}),s.eachSeries(function(c){c.get("coordinateSystem")==="calendar"&&(c.coordinateSystem=o[c.get("calendarIndex")||0])}),o},a.dimensions=["time","value"],a}();function getCoordSys(a){var s=a.calendarModel,l=a.seriesModel,o=s?s.coordinateSystem:l?l.coordinateSystem:null;return o}function install$n(a){a.registerComponentModel(CalendarModel),a.registerComponentView(CalendarView),a.registerCoordinateSystem("calendar",Calendar$1)}function setKeyInfoToNewElOption(a,s){var l=a.existing;if(s.id=a.keyInfo.id,!s.type&&l&&(s.type=l.type),s.parentId==null){var o=s.parentOption;o?s.parentId=o.id:l&&(s.parentId=l.parentId)}s.parentOption=null}function isSetLoc(a,s){var l;return each$f(s,function(o){a[o]!=null&&a[o]!=="auto"&&(l=!0)}),l}function mergeNewElOptionToExist(a,s,l){var o=extend({},l),c=a[s],u=l.$action||"merge";u==="merge"?c?(merge(c,o,!0),mergeLayoutParam(c,o,{ignoreSize:!0}),copyLayoutParams(l,c),copyTransitionInfo(l,c),copyTransitionInfo(l,c,"shape"),copyTransitionInfo(l,c,"style"),copyTransitionInfo(l,c,"extra"),l.clipPath=c.clipPath):a[s]=o:u==="replace"?a[s]=o:u==="remove"&&c&&(a[s]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(a,s,l){if(l&&(!a[l]&&s[l]&&(a[l]={}),a=a[l],s=s[l]),!(!a||!s))for(var o=l?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,c=0;c<o.length;c++){var u=o[c];a[u]==null&&s[u]!=null&&(a[u]=s[u])}}function setLayoutInfoToExist(a,s){if(a&&(a.hv=s.hv=[isSetLoc(s,["left","right"]),isSetLoc(s,["top","bottom"])],a.type==="group")){var l=a,o=s;l.width==null&&(l.width=o.width=0),l.height==null&&(l.height=o.height=0)}}var GraphicComponentModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.preventAutoZ=!0,l}return s.prototype.mergeOption=function(l,o){var c=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,l,o),this.option.elements=c},s.prototype.optionUpdated=function(l,o){var c=this.option,u=(o?c:l).elements,d=c.elements=o?[]:c.elements,f=[];this._flatten(u,f,null);var g=mappingToExists(d,f,"normalMerge"),y=this._elOptionsToUpdate=[];each$f(g,function($,x){var N=$.newOption;N&&(y.push(N),setKeyInfoToNewElOption($,N),mergeNewElOptionToExist(d,x,N),setLayoutInfoToExist(d[x],N))},this),c.elements=filter(d,function($){return $&&delete $.$action,$!=null})},s.prototype._flatten=function(l,o,c){each$f(l,function(u){if(u){c&&(u.parentOption=c),o.push(u);var d=u.children;d&&d.length&&this._flatten(d,o,u),delete u.children}},this)},s.prototype.useElOptionsToUpdate=function(){var l=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,l},s.type="graphic",s.defaultOption={elements:[]},s}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(){this._elMap=createHashMap()},s.prototype.render=function(l,o,c){l!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=l,this._updateElements(l),this._relocate(l,c)},s.prototype._updateElements=function(l){var o=l.useElOptionsToUpdate();if(o){var c=this._elMap,u=this.group,d=l.get("z"),f=l.get("zlevel");each$f(o,function(g){var y=convertOptionIdName(g.id,null),$=y!=null?c.get(y):null,x=convertOptionIdName(g.parentId,null),N=x!=null?c.get(x):u,R=g.type,j=g.style;R==="text"&&j&&g.hv&&g.hv[1]&&(j.textVerticalAlign=j.textBaseline=j.verticalAlign=j.align=null);var ne=g.textContent,se=g.textConfig;if(j&&isEC4CompatibleStyle(j,R,!!se,!!ne)){var ce=convertFromEC4CompatibleStyle(j,R,!0);!se&&ce.textConfig&&(se=g.textConfig=ce.textConfig),!ne&&ce.textContent&&(ne=ce.textContent)}var fe=getCleanedElOption(g),ea=g.$action||"merge",ta=ea==="merge",na=ea==="replace";if(ta){var aa=!$,ia=$;aa?ia=createEl(y,N,g.type,c):(ia&&(inner$7(ia).isNew=!1),stopPreviousKeyframeAnimationAndRestore(ia)),ia&&(applyUpdateTransition(ia,fe,l,{isInit:aa}),updateCommonAttrs(ia,g,d,f))}else if(na){removeEl$1($,g,c,l);var sa=createEl(y,N,g.type,c);sa&&(applyUpdateTransition(sa,fe,l,{isInit:!0}),updateCommonAttrs(sa,g,d,f))}else ea==="remove"&&(updateLeaveTo($,g),removeEl$1($,g,c,l));var ra=c.get(y);if(ra&&ne)if(ta){var la=ra.getTextContent();la?la.attr(ne):ra.setTextContent(new ZRText(ne))}else na&&ra.setTextContent(new ZRText(ne));if(ra){var oa=g.clipPath;if(oa){var ca=oa.type,pa=void 0,aa=!1;if(ta){var ua=ra.getClipPath();aa=!ua||inner$7(ua).type!==ca,pa=aa?newEl(ca):ua}else na&&(aa=!0,pa=newEl(ca));ra.setClipPath(pa),applyUpdateTransition(pa,oa,l,{isInit:aa}),applyKeyframeAnimation(pa,oa.keyframeAnimation,l)}var da=inner$7(ra);ra.setTextConfig(se),da.option=g,setEventData(ra,l,g),setTooltipConfig({el:ra,componentModel:l,itemName:ra.name,itemTooltipOption:g.tooltip}),applyKeyframeAnimation(ra,g.keyframeAnimation,l)}})}},s.prototype._relocate=function(l,o){for(var c=l.option.elements,u=this.group,d=this._elMap,f=o.getWidth(),g=o.getHeight(),y=["x","y"],$=0;$<c.length;$++){var x=c[$],N=convertOptionIdName(x.id,null),R=N!=null?d.get(N):null;if(!(!R||!R.isGroup)){var j=R.parent,ne=j===u,se=inner$7(R),ce=inner$7(j);se.width=parsePercent(se.option.width,ne?f:ce.width)||0,se.height=parsePercent(se.option.height,ne?g:ce.height)||0}}for(var $=c.length-1;$>=0;$--){var x=c[$],N=convertOptionIdName(x.id,null),R=N!=null?d.get(N):null;if(R){var j=R.parent,ce=inner$7(j),fe=j===u?{width:f,height:g}:{width:ce.width,height:ce.height},ea={},ta=positionElement(R,x,fe,null,{hv:x.hv,boundingMode:x.bounding},ea);if(!inner$7(R).isNew&&ta){for(var na=x.transition,aa={},ia=0;ia<y.length;ia++){var sa=y[ia],ra=ea[sa];na&&(isTransitionAll(na)||indexOf(na,sa)>=0)?aa[sa]=ra:R[sa]=ra}updateProps$1(R,aa,l,0)}else R.attr(ea)}}},s.prototype._clear=function(){var l=this,o=this._elMap;o.each(function(c){removeEl$1(c,inner$7(c).option,o,l._lastGraphicModel)}),this._elMap=createHashMap()},s.prototype.dispose=function(){this._clear()},s.type="graphic",s}(ComponentView);function newEl(a){var s=hasOwn(nonShapeGraphicElements,a)?nonShapeGraphicElements[a]:getShapeClass(a),l=new s({});return inner$7(l).type=a,l}function createEl(a,s,l,o){var c=newEl(l);return s.add(c),o.set(a,c),inner$7(c).id=a,inner$7(c).isNew=!0,c}function removeEl$1(a,s,l,o){var c=a&&a.parent;c&&(a.type==="group"&&a.traverse(function(u){removeEl$1(u,s,l,o)}),applyLeaveTransition(a,s,o),l.removeKey(inner$7(a).id))}function updateCommonAttrs(a,s,l,o){a.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",o||0],["z",l||0],["z2",0]],function(c){var u=c[0];hasOwn(s,u)?a[u]=retrieve2(s[u],c[1]):a[u]==null&&(a[u]=c[1])}),each$f(keys(s),function(c){if(c.indexOf("on")===0){var u=s[c];a[c]=isFunction$2(u)?u:null}}),hasOwn(s,"draggable")&&(a.draggable=s.draggable),s.name!=null&&(a.name=s.name),s.id!=null&&(a.id=s.id)}function getCleanedElOption(a){return a=extend({},a),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(s){delete a[s]}),a}function setEventData(a,s,l){var o=getECData(a).eventData;!a.silent&&!a.ignore&&!o&&(o=getECData(a).eventData={componentType:"graphic",componentIndex:s.componentIndex,name:a.name}),o&&(o.info=l.info)}function install$m(a){a.registerComponentModel(GraphicComponentModel),a.registerComponentView(GraphicComponentView),a.registerPreprocessor(function(s){var l=s.graphic;isArray$3(l)?!l[0]||!l[0].elements?s.graphic=[{elements:l}]:s.graphic=[s.graphic[0]]:l&&!l.elements&&(s.graphic=[{elements:[l]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(a){var s=a.get("coordinateSystem");return indexOf(SERIES_COORDS,s)>=0}function getAxisMainType(a){return a+"Axis"}function findEffectedDataZooms(a,s){var l=createHashMap(),o=[],c=createHashMap();a.eachComponent({mainType:"dataZoom",query:s},function($){c.get($.uid)||f($)});var u;do u=!1,a.eachComponent("dataZoom",d);while(u);function d($){!c.get($.uid)&&g($)&&(f($),u=!0)}function f($){c.set($.uid,!0),o.push($),y($)}function g($){var x=!1;return $.eachTargetAxis(function(N,R){var j=l.get(N);j&&j[R]&&(x=!0)}),x}function y($){$.eachTargetAxis(function(x,N){(l.get(x)||l.set(x,[]))[N]=!0})}return o}function collectReferCoordSysModelInfo(a){var s=a.ecModel,l={infoList:[],infoMap:createHashMap()};return a.eachTargetAxis(function(o,c){var u=s.getComponent(getAxisMainType(o),c);if(u){var d=u.getCoordSysModel();if(d){var f=d.uid,g=l.infoMap.get(f);g||(g={model:d,axisModels:[]},l.infoList.push(g),l.infoMap.set(f,g)),g.axisModels.push(u)}}}),l}var DataZoomAxisInfo=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(s){this.indexMap[s]||(this.indexList.push(s),this.indexMap[s]=!0)},a}(),DataZoomModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._autoThrottle=!0,l._noTarget=!0,l._rangePropMode=["percent","percent"],l}return s.prototype.init=function(l,o,c){var u=retrieveRawOption(l);this.settledOption=u,this.mergeDefaultAndTheme(l,c),this._doInit(u)},s.prototype.mergeOption=function(l){var o=retrieveRawOption(l);merge(this.option,l,!0),merge(this.settledOption,o,!0),this._doInit(o)},s.prototype._doInit=function(l){var o=this.option;this._setDefaultThrottle(l),this._updateRangeUse(l);var c=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u,d){this._rangePropMode[d]==="value"&&(o[u[0]]=c[u[0]]=null)},this),this._resetTarget()},s.prototype._resetTarget=function(){var l=this.get("orient",!0),o=this._targetAxisInfoMap=createHashMap(),c=this._fillSpecifiedTargetAxis(o);c?this._orient=l||this._makeAutoOrientByTargetAxis():(this._orient=l||"horizontal",this._fillAutoTargetAxisByOrient(o,this._orient)),this._noTarget=!0,o.each(function(u){u.indexList.length&&(this._noTarget=!1)},this)},s.prototype._fillSpecifiedTargetAxis=function(l){var o=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(c){var u=this.getReferringComponents(getAxisMainType(c),MULTIPLE_REFERRING);if(u.specified){o=!0;var d=new DataZoomAxisInfo;each$f(u.models,function(f){d.add(f.componentIndex)}),l.set(c,d)}},this),o},s.prototype._fillAutoTargetAxisByOrient=function(l,o){var c=this.ecModel,u=!0;if(u){var d=o==="vertical"?"y":"x",f=c.findComponents({mainType:d+"Axis"});g(f,d)}if(u){var f=c.findComponents({mainType:"singleAxis",filter:function($){return $.get("orient",!0)===o}});g(f,"single")}function g(y,$){var x=y[0];if(x){var N=new DataZoomAxisInfo;if(N.add(x.componentIndex),l.set($,N),u=!1,$==="x"||$==="y"){var R=x.getReferringComponents("grid",SINGLE_REFERRING).models[0];R&&each$f(y,function(j){x.componentIndex!==j.componentIndex&&R===j.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&N.add(j.componentIndex)})}}}u&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(y){if(u){var $=c.findComponents({mainType:getAxisMainType(y),filter:function(N){return N.get("type",!0)==="category"}});if($[0]){var x=new DataZoomAxisInfo;x.add($[0].componentIndex),l.set(y,x),u=!1}}},this)},s.prototype._makeAutoOrientByTargetAxis=function(){var l;return this.eachTargetAxis(function(o){!l&&(l=o)},this),l==="y"?"vertical":"horizontal"},s.prototype._setDefaultThrottle=function(l){if(l.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var o=this.ecModel.option;this.option.throttle=o.animation&&o.animationDurationUpdate>0?100:20}},s.prototype._updateRangeUse=function(l){var o=this._rangePropMode,c=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(u,d){var f=l[u[0]]!=null,g=l[u[1]]!=null;f&&!g?o[d]="percent":!f&&g?o[d]="value":c?o[d]=c[d]:f&&(o[d]="percent")})},s.prototype.noTarget=function(){return this._noTarget},s.prototype.getFirstTargetAxisModel=function(){var l;return this.eachTargetAxis(function(o,c){l==null&&(l=this.ecModel.getComponent(getAxisMainType(o),c))},this),l},s.prototype.eachTargetAxis=function(l,o){this._targetAxisInfoMap.each(function(c,u){each$f(c.indexList,function(d){l.call(o,u,d)})})},s.prototype.getAxisProxy=function(l,o){var c=this.getAxisModel(l,o);if(c)return c.__dzAxisProxy},s.prototype.getAxisModel=function(l,o){var c=this._targetAxisInfoMap.get(l);if(c&&c.indexMap[o])return this.ecModel.getComponent(getAxisMainType(l),o)},s.prototype.setRawRange=function(l){var o=this.option,c=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(u){(l[u[0]]!=null||l[u[1]]!=null)&&(o[u[0]]=c[u[0]]=l[u[0]],o[u[1]]=c[u[1]]=l[u[1]])},this),this._updateRangeUse(l)},s.prototype.setCalculatedRange=function(l){var o=this.option;each$f(["start","startValue","end","endValue"],function(c){o[c]=l[c]})},s.prototype.getPercentRange=function(){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataPercentWindow()},s.prototype.getValueRange=function(l,o){if(l==null&&o==null){var c=this.findRepresentativeAxisProxy();if(c)return c.getDataValueWindow()}else return this.getAxisProxy(l,o).getDataValueWindow()},s.prototype.findRepresentativeAxisProxy=function(l){if(l)return l.__dzAxisProxy;for(var o,c=this._targetAxisInfoMap.keys(),u=0;u<c.length;u++)for(var d=c[u],f=this._targetAxisInfoMap.get(d),g=0;g<f.indexList.length;g++){var y=this.getAxisProxy(d,f.indexList[g]);if(y.hostedBy(this))return y;o||(o=y)}return o},s.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},s.prototype.getOrient=function(){return this._orient},s.type="dataZoom",s.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],s.defaultOption={z:4,filterMode:"filter",start:0,end:100},s}(ComponentModel);function retrieveRawOption(a){var s={};return each$f(["start","end","startValue","endValue","throttle"],function(l){a.hasOwnProperty(l)&&(s[l]=a[l])}),s}var SelectDataZoomModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="dataZoom.select",s}(DataZoomModel),DataZoomView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c,u){this.dataZoomModel=l,this.ecModel=o,this.api=c},s.type="dataZoom",s}(ComponentView),SelectDataZoomView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="dataZoom.select",s}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function a(s,l,o,c){this._dimName=s,this._axisIndex=l,this.ecModel=c,this._dataZoomModel=o}return a.prototype.hostedBy=function(s){return this._dataZoomModel===s},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var s=[];return this.ecModel.eachSeries(function(l){if(isCoordSupported(l)){var o=getAxisMainType(this._dimName),c=l.getReferringComponents(o,SINGLE_REFERRING).models[0];c&&this._axisIndex===c.componentIndex&&s.push(l)}},this),s},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},a.prototype.calculateDataWindow=function(s){var l=this._dataExtent,o=this.getAxisModel(),c=o.axis.scale,u=this._dataZoomModel.getRangePropMode(),d=[0,100],f=[],g=[],y;each$7(["start","end"],function(N,R){var j=s[N],ne=s[N+"Value"];u[R]==="percent"?(j==null&&(j=d[R]),ne=c.parse(linearMap$2(j,d,l))):(y=!0,ne=ne==null?l[R]:c.parse(ne),j=linearMap$2(ne,l,d)),g[R]=ne==null||isNaN(ne)?l[R]:ne,f[R]=j==null||isNaN(j)?d[R]:j}),asc$1(g),asc$1(f);var $=this._minMaxSpan;y?x(g,f,l,d,!1):x(f,g,d,l,!0);function x(N,R,j,ne,se){var ce=se?"Span":"ValueSpan";sliderMove(0,N,j,"all",$["min"+ce],$["max"+ce]);for(var fe=0;fe<2;fe++)R[fe]=linearMap$2(N[fe],j,ne,!0),se&&(R[fe]=c.parse(R[fe]))}return{valueWindow:g,percentWindow:f}},a.prototype.reset=function(s){if(s===this._dataZoomModel){var l=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,l),this._updateMinMaxSpan();var o=this.calculateDataWindow(s.settledOption);this._valueWindow=o.valueWindow,this._percentWindow=o.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(s,l){if(s!==this._dataZoomModel)return;var o=this._dimName,c=this.getTargetSeriesModels(),u=s.get("filterMode"),d=this._valueWindow;if(u==="none")return;each$7(c,function(g){var y=g.getData(),$=y.mapDimensionsAll(o);if($.length){if(u==="weakFilter"){var x=y.getStore(),N=map$1($,function(R){return y.getDimensionIndex(R)},y);y.filterSelf(function(R){for(var j,ne,se,ce=0;ce<$.length;ce++){var fe=x.get(N[ce],R),ea=!isNaN(fe),ta=fe<d[0],na=fe>d[1];if(ea&&!ta&&!na)return!0;ea&&(se=!0),ta&&(j=!0),na&&(ne=!0)}return se&&j&&ne})}else each$7($,function(R){if(u==="empty")g.setData(y=y.map(R,function(ne){return f(ne)?ne:NaN}));else{var j={};j[R]=d,y.selectRange(j)}});each$7($,function(R){y.setApproximateExtent(d,R)})}});function f(g){return g>=d[0]&&g<=d[1]}},a.prototype._updateMinMaxSpan=function(){var s=this._minMaxSpan={},l=this._dataZoomModel,o=this._dataExtent;each$7(["min","max"],function(c){var u=l.get(c+"Span"),d=l.get(c+"ValueSpan");d!=null&&(d=this.getAxisModel().axis.scale.parse(d)),d!=null?u=linearMap$2(o[0]+d,o,[0,100],!0):u!=null&&(d=linearMap$2(u,[0,100],o,!0)-o[0]),s[c+"Span"]=u,s[c+"ValueSpan"]=d},this)},a.prototype._setAxisModel=function(){var s=this.getAxisModel(),l=this._percentWindow,o=this._valueWindow;if(l){var c=getPixelPrecision(o,[0,500]);c=Math.min(c,20);var u=s.axis.scale.rawExtentInfo;l[0]!==0&&u.setDeterminedMinMax("min",+o[0].toFixed(c)),l[1]!==100&&u.setDeterminedMinMax("max",+o[1].toFixed(c)),u.freeze()}},a}();function calculateDataExtent(a,s,l){var o=[1/0,-1/0];each$7(l,function(d){unionAxisExtentFromData(o,d.getData(),s)});var c=a.getAxisModel(),u=ensureScaleRawExtentInfo(c.axis.scale,c,o).calculate();return[u.min,u.max]}var dataZoomProcessor={getTargetSeries:function(a){function s(c){a.eachComponent("dataZoom",function(u){u.eachTargetAxis(function(d,f){var g=a.getComponent(getAxisMainType(d),f);c(d,f,g,u)})})}s(function(c,u,d,f){d.__dzAxisProxy=null});var l=[];s(function(c,u,d,f){d.__dzAxisProxy||(d.__dzAxisProxy=new AxisProxy(c,u,f,a),l.push(d.__dzAxisProxy))});var o=createHashMap();return each$f(l,function(c){each$f(c.getTargetSeriesModels(),function(u){o.set(u.uid,u)})}),o},overallReset:function(a,s){a.eachComponent("dataZoom",function(l){l.eachTargetAxis(function(o,c){l.getAxisProxy(o,c).reset(l)}),l.eachTargetAxis(function(o,c){l.getAxisProxy(o,c).filterData(l,s)})}),a.eachComponent("dataZoom",function(l){var o=l.findRepresentativeAxisProxy();if(o){var c=o.getDataPercentWindow(),u=o.getDataValueWindow();l.setCalculatedRange({start:c[0],end:c[1],startValue:u[0],endValue:u[1]})}})}};function installDataZoomAction(a){a.registerAction("dataZoom",function(s,l){var o=findEffectedDataZooms(l,s);each$f(o,function(c){c.setRawRange({start:s.start,end:s.end,startValue:s.startValue,endValue:s.endValue})})})}var installed$1=!1;function installCommon$1(a){installed$1||(installed$1=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$l(a){a.registerComponentModel(SelectDataZoomModel),a.registerComponentView(SelectDataZoomView),installCommon$1(a)}var ToolboxFeature=function(){function a(){}return a}(),features={};function registerFeature(a,s){features[a]=s}function getFeature(a){return features[a]}var ToolboxModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var l=this.ecModel;each$f(this.option.feature,function(o,c){var u=getFeature(c);u&&(u.getDefaultOption&&(u.defaultOption=u.getDefaultOption(l)),merge(o,u.defaultOption))})},s.type="toolbox",s.layoutMode={type:"box",ignoreSize:!0},s.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},s}(ComponentModel);function layout(a,s,l){var o=s.getBoxLayoutParams(),c=s.get("padding"),u={width:l.getWidth(),height:l.getHeight()},d=getLayoutRect(o,u,c);box(s.get("orient"),a,s.get("itemGap"),d.width,d.height),positionElement(a,o,u,c)}function makeBackground(a,s){var l=normalizeCssArray(s.get("padding")),o=s.getItemStyle(["color","opacity"]);return o.fill=s.get("backgroundColor"),a=new Rect$2({shape:{x:a.x-l[3],y:a.y-l[0],width:a.width+l[1]+l[3],height:a.height+l[0]+l[2],r:s.get("borderRadius")},style:o,silent:!0,z2:-1}),a}var ToolboxView=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.render=function(l,o,c,u){var d=this.group;if(d.removeAll(),!l.get("show"))return;var f=+l.get("itemSize"),g=l.get("orient")==="vertical",y=l.get("feature")||{},$=this._features||(this._features={}),x=[];each$f(y,function(j,ne){x.push(ne)}),new DataDiffer(this._featureNames||[],x).add(N).update(N).remove(curry$1(N,null)).execute(),this._featureNames=x;function N(j,ne){var se=x[j],ce=x[ne],fe=y[se],ea=new Model(fe,l,l.ecModel),ta;if(u&&u.newTitle!=null&&u.featureName===se&&(fe.title=u.newTitle),se&&!ce){if(isUserFeatureName(se))ta={onclick:ea.option.onclick,featureName:se};else{var na=getFeature(se);if(!na)return;ta=new na}$[se]=ta}else if(ta=$[ce],!ta)return;ta.uid=getUID("toolbox-feature"),ta.model=ea,ta.ecModel=o,ta.api=c;var aa=ta instanceof ToolboxFeature;if(!se&&ce){aa&&ta.dispose&&ta.dispose(o,c);return}if(!ea.get("show")||aa&&ta.unusable){aa&&ta.remove&&ta.remove(o,c);return}R(ea,ta,se),ea.setIconStatus=function(ia,sa){var ra=this.option,la=this.iconPaths;ra.iconStatus=ra.iconStatus||{},ra.iconStatus[ia]=sa,la[ia]&&(sa==="emphasis"?enterEmphasis:leaveEmphasis)(la[ia])},ta instanceof ToolboxFeature&&ta.render&&ta.render(ea,o,c,u)}function R(j,ne,se){var ce=j.getModel("iconStyle"),fe=j.getModel(["emphasis","iconStyle"]),ea=ne instanceof ToolboxFeature&&ne.getIcons?ne.getIcons():j.get("icon"),ta=j.get("title")||{},na,aa;isString$2(ea)?(na={},na[se]=ea):na=ea,isString$2(ta)?(aa={},aa[se]=ta):aa=ta;var ia=j.iconPaths={};each$f(na,function(sa,ra){var la=createIcon(sa,{},{x:-f/2,y:-f/2,width:f,height:f});la.setStyle(ce.getItemStyle());var oa=la.ensureState("emphasis");oa.style=fe.getItemStyle();var ca=new ZRText({style:{text:aa[ra],align:fe.get("textAlign"),borderRadius:fe.get("textBorderRadius"),padding:fe.get("textPadding"),fill:null,font:getFont({fontStyle:fe.get("textFontStyle"),fontFamily:fe.get("textFontFamily"),fontSize:fe.get("textFontSize"),fontWeight:fe.get("textFontWeight")},o)},ignore:!0});la.setTextContent(ca),setTooltipConfig({el:la,componentModel:l,itemName:ra,formatterParamsExtra:{title:aa[ra]}}),la.__title=aa[ra],la.on("mouseover",function(){var pa=fe.getItemStyle(),ua=g?l.get("right")==null&&l.get("left")!=="right"?"right":"left":l.get("bottom")==null&&l.get("top")!=="bottom"?"bottom":"top";ca.setStyle({fill:fe.get("textFill")||pa.fill||pa.stroke||"#000",backgroundColor:fe.get("textBackgroundColor")}),la.setTextConfig({position:fe.get("textPosition")||ua}),ca.ignore=!l.get("showTitle"),c.enterEmphasis(this)}).on("mouseout",function(){j.get(["iconStatus",ra])!=="emphasis"&&c.leaveEmphasis(this),ca.hide()}),(j.get(["iconStatus",ra])==="emphasis"?enterEmphasis:leaveEmphasis)(la),d.add(la),la.on("click",bind$1(ne.onclick,ne,o,c,ra)),ia[ra]=la})}layout(d,l,c),d.add(makeBackground(d.getBoundingRect(),l)),g||d.eachChild(function(j){var ne=j.__title,se=j.ensureState("emphasis"),ce=se.textConfig||(se.textConfig={}),fe=j.getTextContent(),ea=fe&&fe.ensureState("emphasis");if(ea&&!isFunction$2(ea)&&ne){var ta=ea.style||(ea.style={}),na=getBoundingRect(ne,ZRText.makeFont(ta)),aa=j.x+d.x,ia=j.y+d.y+f,sa=!1;ia+na.height>c.getHeight()&&(ce.position="top",sa=!0);var ra=sa?-5-na.height:f+10;aa+na.width/2>c.getWidth()?(ce.position=["100%",ra],ta.align="right"):aa-na.width/2<0&&(ce.position=[0,ra],ta.align="left")}})},s.prototype.updateView=function(l,o,c,u){each$f(this._features,function(d){d instanceof ToolboxFeature&&d.updateView&&d.updateView(d.model,o,c,u)})},s.prototype.remove=function(l,o){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.remove&&c.remove(l,o)}),this.group.removeAll()},s.prototype.dispose=function(l,o){each$f(this._features,function(c){c instanceof ToolboxFeature&&c.dispose&&c.dispose(l,o)})},s.type="toolbox",s}(ComponentView);function isUserFeatureName(a){return a.indexOf("my")===0}var SaveAsImage=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.onclick=function(l,o){var c=this.model,u=c.get("name")||l.get("title.0.text")||"echarts",d=o.getZr().painter.getType()==="svg",f=d?"svg":c.get("type",!0)||"png",g=o.getConnectedDataURL({type:f,backgroundColor:c.get("backgroundColor",!0)||l.get("backgroundColor")||"#fff",connectedBackgroundColor:c.get("connectedBackgroundColor"),excludeComponents:c.get("excludeComponents"),pixelRatio:c.get("pixelRatio")}),y=env.browser;if(typeof MouseEvent=="function"&&(y.newEdge||!y.ie&&!y.edge)){var $=document.createElement("a");$.download=u+"."+f,$.target="_blank",$.href=g;var x=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});$.dispatchEvent(x)}else if(window.navigator.msSaveOrOpenBlob||d){var N=g.split(","),R=N[0].indexOf("base64")>-1,j=d?decodeURIComponent(N[1]):N[1];R&&(j=window.atob(j));var ne=u+"."+f;if(window.navigator.msSaveOrOpenBlob){for(var se=j.length,ce=new Uint8Array(se);se--;)ce[se]=j.charCodeAt(se);var fe=new Blob([ce]);window.navigator.msSaveOrOpenBlob(fe,ne)}else{var ea=document.createElement("iframe");document.body.appendChild(ea);var ta=ea.contentWindow,na=ta.document;na.open("image/svg+xml","replace"),na.write(j),na.close(),ta.focus(),na.execCommand("SaveAs",!0,ne),document.body.removeChild(ea)}}else{var aa=c.get("lang"),ia='<body style="margin:0;"><img src="'+g+'" style="max-width:100%;" title="'+(aa&&aa[0]||"")+'" /></body>',sa=window.open();sa.document.write(ia),sa.document.title=u}},s.getDefaultOption=function(l){var o={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:l.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:l.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return o},s}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.getIcons=function(){var l=this.model,o=l.get("icon"),c={};return each$f(l.get("type"),function(u){o[u]&&(c[u]=o[u])}),c},s.getDefaultOption=function(l){var o={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:l.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return o},s.prototype.onclick=function(l,o,c){var u=this.model,d=u.get(["seriesIndex",c]);if(seriesOptGenreator[c]){var f={series:[]},g=function(x){var N=x.subType,R=x.id,j=seriesOptGenreator[c](N,R,x,u);j&&(defaults(j,x.option),f.series.push(j));var ne=x.coordinateSystem;if(ne&&ne.type==="cartesian2d"&&(c==="line"||c==="bar")){var se=ne.getAxesByScale("ordinal")[0];if(se){var ce=se.dim,fe=ce+"Axis",ea=x.getReferringComponents(fe,SINGLE_REFERRING).models[0],ta=ea.componentIndex;f[fe]=f[fe]||[];for(var na=0;na<=ta;na++)f[fe][ta]=f[fe][ta]||{};f[fe][ta].boundaryGap=c==="bar"}}};each$f(radioTypes,function(x){indexOf(x,c)>=0&&each$f(x,function(N){u.setIconStatus(N,"normal")})}),u.setIconStatus(c,"emphasis"),l.eachComponent({mainType:"series",query:d==null?null:{seriesIndex:d}},g);var y,$=c;c==="stack"&&(y=merge({stack:u.option.title.tiled,tiled:u.option.title.stack},u.option.title),u.get(["iconStatus",c])!=="emphasis"&&($="tiled")),o.dispatchAction({type:"changeMagicType",currentType:$,newOption:f,newTitle:y,featureName:"magicType"})}},s}(ToolboxFeature),seriesOptGenreator={line:function(a,s,l,o){if(a==="bar")return merge({id:s,type:"line",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(a,s,l,o){if(a==="line")return merge({id:s,type:"bar",data:l.get("data"),stack:l.get("stack"),markPoint:l.get("markPoint"),markLine:l.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(a,s,l,o){var c=l.get("stack")===INNER_STACK_KEYWORD;if(a==="line"||a==="bar")return o.setIconStatus("stack",c?"normal":"emphasis"),merge({id:s,stack:c?"":INNER_STACK_KEYWORD},o.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,s){s.mergeOption(a.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(a){var s={},l=[],o=[];return a.eachRawSeries(function(c){var u=c.coordinateSystem;if(u&&(u.type==="cartesian2d"||u.type==="polar")){var d=u.getBaseAxis();if(d.type==="category"){var f=d.dim+"_"+d.index;s[f]||(s[f]={categoryAxis:d,valueAxis:u.getOtherAxis(d),series:[]},o.push({axisDim:d.dim,axisIndex:d.index})),s[f].series.push(c)}else l.push(c)}else l.push(c)}),{seriesGroupByCategoryAxis:s,other:l,meta:o}}function assembleSeriesWithCategoryAxis(a){var s=[];return each$f(a,function(l,o){var c=l.categoryAxis,u=l.valueAxis,d=u.dim,f=[" "].concat(map$1(l.series,function(R){return R.name})),g=[c.model.getCategories()];each$f(l.series,function(R){var j=R.getRawData();g.push(R.getRawData().mapArray(j.mapDimension(d),function(ne){return ne}))});for(var y=[f.join(ITEM_SPLITER)],$=0;$<g[0].length;$++){for(var x=[],N=0;N<g.length;N++)x.push(g[N][$]);y.push(x.join(ITEM_SPLITER))}s.push(y.join(`
`))}),s.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(a){return map$1(a,function(s){var l=s.getRawData(),o=[s.name],c=[];return l.each(l.dimensions,function(){for(var u=arguments.length,d=arguments[u-1],f=l.getName(d),g=0;g<u-1;g++)c[g]=arguments[g];o.push((f?f+ITEM_SPLITER:"")+c.join(ITEM_SPLITER))}),o.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(a){var s=groupSeries(a);return{value:filter([assembleSeriesWithCategoryAxis(s.seriesGroupByCategoryAxis),assembleOtherSeries(s.other)],function(l){return!!l.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:s.meta}}function trim(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(a){var s=a.slice(0,a.indexOf(`
`));if(s.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(a){for(var s=a.split(/\n+/g),l=trim(s.shift()).split(itemSplitRegex),o=[],c=map$1(l,function(g){return{name:g,data:[]}}),u=0;u<s.length;u++){var d=trim(s[u]).split(itemSplitRegex);o.push(d.shift());for(var f=0;f<d.length;f++)c[f]&&(c[f].data[u]=d[f])}return{series:c,categories:o}}function parseListContents(a){for(var s=a.split(/\n+/g),l=trim(s.shift()),o=[],c=0;c<s.length;c++){var u=trim(s[c]);if(u){var d=u.split(itemSplitRegex),f="",g=void 0,y=!1;isNaN(d[0])?(y=!0,f=d[0],d=d.slice(1),o[c]={name:f,value:[]},g=o[c].value):g=o[c]=[];for(var $=0;$<d.length;$++)g.push(+d[$]);g.length===1&&(y?o[c].value=g[0]:o[c]=g[0])}}return{name:l,data:o}}function parseContents(a,s){var l=a.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),o={series:[]};return each$f(l,function(c,u){if(isTSVFormat(c)){var d=parseTSVContents(c),f=s[u],g=f.axisDim+"Axis";f&&(o[g]=o[g]||[],o[g][f.axisIndex]={data:d.categories},o.series=o.series.concat(d.series))}else{var d=parseListContents(c);o.series.push(d)}}),o}var DataView=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.onclick=function(l,o){setTimeout(function(){o.dispatchAction({type:"hideTip"})});var c=o.getDom(),u=this.model;this._dom&&c.removeChild(this._dom);var d=document.createElement("div");d.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",d.style.backgroundColor=u.get("backgroundColor")||"#fff";var f=document.createElement("h4"),g=u.get("lang")||[];f.innerHTML=g[0]||u.get("title"),f.style.cssText="margin:10px 20px",f.style.color=u.get("textColor");var y=document.createElement("div"),$=document.createElement("textarea");y.style.cssText="overflow:auto";var x=u.get("optionToContent"),N=u.get("contentToOption"),R=getContentFromModel(l);if(isFunction$2(x)){var j=x(o.getOption());isString$2(j)?y.innerHTML=j:isDom(j)&&y.appendChild(j)}else{$.readOnly=u.get("readOnly");var ne=$.style;ne.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",ne.color=u.get("textColor"),ne.borderColor=u.get("textareaBorderColor"),ne.backgroundColor=u.get("textareaColor"),$.value=R.value,y.appendChild($)}var se=R.meta,ce=document.createElement("div");ce.style.cssText="position:absolute;bottom:5px;left:0;right:0";var fe="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",ea=document.createElement("div"),ta=document.createElement("div");fe+=";background-color:"+u.get("buttonColor"),fe+=";color:"+u.get("buttonTextColor");var na=this;function aa(){c.removeChild(d),na._dom=null}addEventListener(ea,"click",aa),addEventListener(ta,"click",function(){if(N==null&&x!=null||N!=null&&x==null){aa();return}var ia;try{isFunction$2(N)?ia=N(y,o.getOption()):ia=parseContents($.value,se)}catch(sa){throw aa(),new Error("Data view format error "+sa)}ia&&o.dispatchAction({type:"changeDataView",newOption:ia}),aa()}),ea.innerHTML=g[1],ta.innerHTML=g[2],ta.style.cssText=ea.style.cssText=fe,!u.get("readOnly")&&ce.appendChild(ta),ce.appendChild(ea),d.appendChild(f),d.appendChild(y),d.appendChild(ce),y.style.height=c.clientHeight-80+"px",c.appendChild(d),this._dom=d},s.prototype.remove=function(l,o){this._dom&&o.getDom().removeChild(this._dom)},s.prototype.dispose=function(l,o){this.remove(l,o)},s.getDefaultOption=function(l){var o={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:l.getLocaleModel().get(["toolbox","dataView","title"]),lang:l.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return o},s}(ToolboxFeature);function tryMergeDataOption(a,s){return map$1(a,function(l,o){var c=s&&s[o];if(isObject$5(c)&&!isArray$3(c)){var u=isObject$5(l)&&!isArray$3(l);u||(l={value:l});var d=c.name!=null&&l.name==null;return l=defaults(l,c),d&&delete l.name,l}else return l})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,s){var l=[];each$f(a.newOption.series,function(o){var c=s.getSeriesByName(o.name)[0];if(!c)l.push(extend({type:"scatter"},o));else{var u=c.get("data");l.push({name:o.name,data:tryMergeDataOption(o.data,u)})}}),s.mergeOption(defaults({series:l},a.newOption))});var each$6=each$f,inner$6=makeInner();function push(a,s){var l=getStoreSnapshots(a);each$6(s,function(o,c){for(var u=l.length-1;u>=0;u--){var d=l[u];if(d[c])break}if(u<0){var f=a.queryComponents({mainType:"dataZoom",subType:"select",id:c})[0];if(f){var g=f.getPercentRange();l[0][c]={dataZoomId:c,start:g[0],end:g[1]}}}}),l.push(s)}function pop(a){var s=getStoreSnapshots(a),l=s[s.length-1];s.length>1&&s.pop();var o={};return each$6(l,function(c,u){for(var d=s.length-1;d>=0;d--)if(c=s[d][u],c){o[u]=c;break}}),o}function clear(a){inner$6(a).snapshots=null}function count(a){return getStoreSnapshots(a).length}function getStoreSnapshots(a){var s=inner$6(a);return s.snapshots||(s.snapshots=[{}]),s.snapshots}var RestoreOption=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.onclick=function(l,o){clear(l),o.dispatchAction({type:"restore",from:this.uid})},s.getDefaultOption=function(l){var o={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:l.getLocaleModel().get(["toolbox","restore","title"])};return o},s}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,s){s.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function a(s,l,o){var c=this;this._targetInfoList=[];var u=parseFinder(l,s);each$f(targetInfoBuilders,function(d,f){(!o||!o.include||indexOf(o.include,f)>=0)&&d(u,c._targetInfoList)})}return a.prototype.setOutputRanges=function(s,l){return this.matchOutputRanges(s,l,function(o,c,u){if((o.coordRanges||(o.coordRanges=[])).push(c),!o.coordRange){o.coordRange=c;var d=coordConvert[o.brushType](0,u,c);o.__rangeOffset={offset:diffProcessor[o.brushType](d.values,o.range,[1,1]),xyMinMax:d.xyMinMax}}}),s},a.prototype.matchOutputRanges=function(s,l,o){each$f(s,function(c){var u=this.findTargetInfo(c,l);u&&u!==!0&&each$f(u.coordSyses,function(d){var f=coordConvert[c.brushType](1,d,c.range,!0);o(c,f.values,d,l)})},this)},a.prototype.setInputRanges=function(s,l){each$f(s,function(o){var c=this.findTargetInfo(o,l);if(o.range=o.range||[],c&&c!==!0){o.panelId=c.panelId;var u=coordConvert[o.brushType](0,c.coordSys,o.coordRange),d=o.__rangeOffset;o.range=d?diffProcessor[o.brushType](u.values,d.offset,getScales(u.xyMinMax,d.xyMinMax)):u.values}},this)},a.prototype.makePanelOpts=function(s,l){return map$1(this._targetInfoList,function(o){var c=o.getPanelRect();return{panelId:o.panelId,defaultBrushType:l?l(o):null,clipPath:makeRectPanelClipPath(c),isTargetByCursor:makeRectIsTargetByCursor(c,s,o.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(c)}})},a.prototype.controlSeries=function(s,l,o){var c=this.findTargetInfo(s,o);return c===!0||c&&indexOf(c.coordSyses,l.coordinateSystem)>=0},a.prototype.findTargetInfo=function(s,l){for(var o=this._targetInfoList,c=parseFinder(l,s),u=0;u<o.length;u++){var d=o[u],f=s.panelId;if(f){if(d.panelId===f)return d}else for(var g=0;g<targetInfoMatchers.length;g++)if(targetInfoMatchers[g](c,d))return d}return!0},a}();function formatMinMax(a){return a[0]>a[1]&&a.reverse(),a}function parseFinder(a,s){return parseFinder$1(a,s,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(a,s){var l=a.xAxisModels,o=a.yAxisModels,c=a.gridModels,u=createHashMap(),d={},f={};!l&&!o&&!c||(each$f(l,function(g){var y=g.axis.grid.model;u.set(y.id,y),d[y.id]=!0}),each$f(o,function(g){var y=g.axis.grid.model;u.set(y.id,y),f[y.id]=!0}),each$f(c,function(g){u.set(g.id,g),d[g.id]=!0,f[g.id]=!0}),u.each(function(g){var y=g.coordinateSystem,$=[];each$f(y.getCartesians(),function(x,N){(indexOf(l,x.getAxis("x").model)>=0||indexOf(o,x.getAxis("y").model)>=0)&&$.push(x)}),s.push({panelId:"grid--"+g.id,gridModel:g,coordSysModel:g,coordSys:$[0],coordSyses:$,getPanelRect:panelRectBuilders.grid,xAxisDeclared:d[g.id],yAxisDeclared:f[g.id]})}))},geo:function(a,s){each$f(a.geoModels,function(l){var o=l.coordinateSystem;s.push({panelId:"geo--"+l.id,geoModel:l,coordSysModel:l,coordSys:o,coordSyses:[o],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(a,s){var l=a.xAxisModel,o=a.yAxisModel,c=a.gridModel;return!c&&l&&(c=l.axis.grid.model),!c&&o&&(c=o.axis.grid.model),c&&c===s.gridModel},function(a,s){var l=a.geoModel;return l&&l===s.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,s=a.getBoundingRect().clone();return s.applyTransform(getTransform$1(a)),s}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(a,s,l,o){var c=a?s.pointToData([l[0][0],l[1][0]],o):s.dataToPoint([l[0][0],l[1][0]],o),u=a?s.pointToData([l[0][1],l[1][1]],o):s.dataToPoint([l[0][1],l[1][1]],o),d=[formatMinMax([c[0],u[0]]),formatMinMax([c[1],u[1]])];return{values:d,xyMinMax:d}},polygon:function(a,s,l,o){var c=[[1/0,-1/0],[1/0,-1/0]],u=map$1(l,function(d){var f=a?s.pointToData(d,o):s.dataToPoint(d,o);return c[0][0]=Math.min(c[0][0],f[0]),c[1][0]=Math.min(c[1][0],f[1]),c[0][1]=Math.max(c[0][1],f[0]),c[1][1]=Math.max(c[1][1],f[1]),f});return{values:u,xyMinMax:c}}};function axisConvert(a,s,l,o){var c=l.getAxis(["x","y"][a]),u=formatMinMax(map$1([0,1],function(f){return s?c.coordToData(c.toLocalCoord(o[f]),!0):c.toGlobalCoord(c.dataToCoord(o[f]))})),d=[];return d[a]=u,d[1-a]=[NaN,NaN],{values:u,xyMinMax:d}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(a,s,l){return[[a[0][0]-l[0]*s[0][0],a[0][1]-l[0]*s[0][1]],[a[1][0]-l[1]*s[1][0],a[1][1]-l[1]*s[1][1]]]},polygon:function(a,s,l){return map$1(a,function(o,c){return[o[0]-l[0]*s[c][0],o[1]-l[1]*s[c][1]]})}};function axisDiffProcessor(a,s,l,o){return[s[0]-o[a]*l[0],s[1]-o[a]*l[1]]}function getScales(a,s){var l=getSize(a),o=getSize(s),c=[l[0]/o[0],l[1]/o[1]];return isNaN(c[0])&&(c[0]=1),isNaN(c[1])&&(c[1]=1),c}function getSize(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.render=function(l,o,c,u){this._brushController||(this._brushController=new BrushController(c.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(l,o,this,u,c),updateBackBtnStatus(l,o)},s.prototype.onclick=function(l,o,c){handlers[c].call(this)},s.prototype.remove=function(l,o){this._brushController&&this._brushController.unmount()},s.prototype.dispose=function(l,o){this._brushController&&this._brushController.dispose()},s.prototype._onBrush=function(l){var o=l.areas;if(!l.isEnd||!o.length)return;var c={},u=this.ecModel;this._brushController.updateCovers([]);var d=new BrushTargetManager(makeAxisFinder(this.model),u,{include:["grid"]});d.matchOutputRanges(o,u,function(y,$,x){if(x.type==="cartesian2d"){var N=y.brushType;N==="rect"?(f("x",x,$[0]),f("y",x,$[1])):f({lineX:"x",lineY:"y"}[N],x,$)}}),push(u,c),this._dispatchZoomAction(c);function f(y,$,x){var N=$.getAxis(y),R=N.model,j=g(y,R,u),ne=j.findRepresentativeAxisProxy(R).getMinMaxSpan();(ne.minValueSpan!=null||ne.maxValueSpan!=null)&&(x=sliderMove(0,x.slice(),N.scale.getExtent(),0,ne.minValueSpan,ne.maxValueSpan)),j&&(c[j.id]={dataZoomId:j.id,startValue:x[0],endValue:x[1]})}function g(y,$,x){var N;return x.eachComponent({mainType:"dataZoom",subType:"select"},function(R){var j=R.getAxisModel(y,$.componentIndex);j&&(N=R)}),N}},s.prototype._dispatchZoomAction=function(l){var o=[];each$5(l,function(c,u){o.push(clone$4(c))}),o.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:o})},s.getDefaultOption=function(l){var o={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:l.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return o},s}(ToolboxFeature),handlers={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(a){var s={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return s.xAxisIndex==null&&s.xAxisId==null&&(s.xAxisIndex="all"),s.yAxisIndex==null&&s.yAxisId==null&&(s.yAxisIndex="all"),s}function updateBackBtnStatus(a,s){a.setIconStatus("back",count(s)>1?"emphasis":"normal")}function updateZoomBtnStatus(a,s,l,o,c){var u=l._isZoomActive;o&&o.type==="takeGlobalCursor"&&(u=o.key==="dataZoomSelect"?o.dataZoomSelectActive:!1),l._isZoomActive=u,a.setIconStatus("zoom",u?"emphasis":"normal");var d=new BrushTargetManager(makeAxisFinder(a),s,{include:["grid"]}),f=d.makePanelOpts(c,function(g){return g.xAxisDeclared&&!g.yAxisDeclared?"lineX":!g.xAxisDeclared&&g.yAxisDeclared?"lineY":"rect"});l._brushController.setPanels(f).enableBrush(u&&f.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(a){var s=a.getComponent("toolbox",0),l=["feature","dataZoom"];if(!s||s.get(l)==null)return;var o=s.getModel(l),c=[],u=makeAxisFinder(o),d=parseFinder$1(a,u);each$5(d.xAxisModels,function(g){return f(g,"xAxis","xAxisIndex")}),each$5(d.yAxisModels,function(g){return f(g,"yAxis","yAxisIndex")});function f(g,y,$){var x=g.componentIndex,N={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+y+x};N[$]=x,c.push(N)}return c});function install$k(a){a.registerComponentModel(ToolboxModel),a.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$l)}var TooltipModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="tooltip",s.dependencies=["axisPointer"],s.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},s}(ComponentModel);function shouldTooltipConfine(a){var s=a.get("confine");return s!=null?!!s:a.get("renderMode")==="richText"}function testStyle(a){if(env.domSupported){for(var s=document.documentElement.style,l=0,o=a.length;l<o;l++)if(a[l]in s)return a[l]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(a,s){if(!a)return s;s=toCamelCase(s,!0);var l=a.indexOf(s);return a=l===-1?s:"-"+a.slice(0,l)+"-"+s,a.toLowerCase()}function getComputedStyle$1(a,s){var l=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return l?l[s]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function assembleArrow(a,s,l){if(!isString$2(l)||l==="inside")return"";var o=a.get("backgroundColor"),c=a.get("borderWidth");s=convertToColorString(s);var u=mirrorPos(l),d=Math.max(Math.round(c)*1.5,6),f="",g=CSS_TRANSFORM_VENDOR+":",y;indexOf(["left","right"],u)>-1?(f+="top:50%",g+="translateY(-50%) rotate("+(y=u==="left"?-225:-45)+"deg)"):(f+="left:50%",g+="translateX(-50%) rotate("+(y=u==="top"?225:45)+"deg)");var $=y*Math.PI/180,x=d+c,N=x*Math.abs(Math.cos($))+x*Math.abs(Math.sin($)),R=Math.round(((N-Math.SQRT2*c)/2+Math.SQRT2*c-(N-x)/2)*100)/100;f+=";"+u+":-"+R+"px";var j=s+" solid "+c+"px;",ne=["position:absolute;width:"+d+"px;height:"+d+"px;z-index:-1;",f+";"+g+";","border-bottom:"+j,"border-right:"+j,"background-color:"+o+";"];return'<div style="'+ne.join("")+'"></div>'}function assembleTransition(a,s){var l="cubic-bezier(0.23,1,0.32,1)",o=" "+a/2+"s "+l,c="opacity"+o+",visibility"+o;return s||(o=" "+a+"s "+l,c+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+o:",left"+o+",top"+o),CSS_TRANSITION_VENDOR+":"+c}function assembleTransform(a,s,l){var o=a.toFixed(0)+"px",c=s.toFixed(0)+"px";if(!env.transformSupported)return l?"top:"+c+";left:"+o+";":[["top",c],["left",o]];var u=env.transform3dSupported,d="translate"+(u?"3d":"")+"("+o+","+c+(u?",0":"")+")";return l?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+d+";":[["top",0],["left",0],[TRANSFORM_VENDOR,d]]}function assembleFont(a){var s=[],l=a.get("fontSize"),o=a.getTextColor();o&&s.push("color:"+o),s.push("font:"+a.getFont()),l&&s.push("line-height:"+Math.round(l*3/2)+"px");var c=a.get("textShadowColor"),u=a.get("textShadowBlur")||0,d=a.get("textShadowOffsetX")||0,f=a.get("textShadowOffsetY")||0;return c&&u&&s.push("text-shadow:"+d+"px "+f+"px "+u+"px "+c),each$f(["decoration","align"],function(g){var y=a.get(g);y&&s.push("text-"+g+":"+y)}),s.join(";")}function assembleCssText(a,s,l){var o=[],c=a.get("transitionDuration"),u=a.get("backgroundColor"),d=a.get("shadowBlur"),f=a.get("shadowColor"),g=a.get("shadowOffsetX"),y=a.get("shadowOffsetY"),$=a.getModel("textStyle"),x=getPaddingFromTooltipModel(a,"html"),N=g+"px "+y+"px "+d+"px "+f;return o.push("box-shadow:"+N),s&&c&&o.push(assembleTransition(c,l)),u&&o.push("background-color:"+u),each$f(["width","color","radius"],function(R){var j="border-"+R,ne=toCamelCase(j),se=a.get(ne);se!=null&&o.push(j+":"+se+(R==="color"?"":"px"))}),o.push(assembleFont($)),x!=null&&o.push("padding:"+normalizeCssArray(x).join("px ")+"px"),o.join(";")+";"}function makeStyleCoord$1(a,s,l,o,c){var u=s&&s.painter;if(l){var d=u&&u.getViewportRoot();d&&transformLocalCoord(a,d,l,o,c)}else{a[0]=o,a[1]=c;var f=u&&u.getViewportRootOffset();f&&(a[0]+=f.offsetLeft,a[1]+=f.offsetTop)}a[2]=a[0]/s.getWidth(),a[3]=a[1]/s.getHeight()}var TooltipHTMLContent=function(){function a(s,l){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var c=this._zr=s.getZr(),u=l.appendTo,d=u&&(isString$2(u)?document.querySelector(u):isDom(u)?u:isFunction$2(u)&&u(s.getDom()));makeStyleCoord$1(this._styleCoord,c,d,s.getWidth()/2,s.getHeight()/2),(d||s.getDom()).appendChild(o),this._api=s,this._container=d;var f=this;o.onmouseenter=function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0},o.onmousemove=function(g){if(g=g||window.event,!f._enterable){var y=c.handler,$=c.painter.getViewportRoot();normalizeEvent($,g,!0),y.dispatch("mousemove",g)}},o.onmouseleave=function(){f._inContent=!1,f._enterable&&f._show&&f.hideLater(f._hideDelay)}}return a.prototype.update=function(s){if(!this._container){var l=this._api.getDom(),o=getComputedStyle$1(l,"position"),c=l.style;c.position!=="absolute"&&o!=="absolute"&&(c.position="relative")}var u=s.get("alwaysShowContent");u&&this._moveIfResized(),this._alwaysShowContent=u,this.el.className=s.get("className")||""},a.prototype.show=function(s,l){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el,c=o.style,u=this._styleCoord;o.innerHTML?c.cssText=gCssText+assembleCssText(s,!this._firstShow,this._longHide)+assembleTransform(u[0],u[1],!0)+("border-color:"+convertToColorString(l)+";")+(s.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):c.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(s,l,o,c,u){var d=this.el;if(s==null){d.innerHTML="";return}var f="";if(isString$2(u)&&o.get("trigger")==="item"&&!shouldTooltipConfine(o)&&(f=assembleArrow(o,c,u)),isString$2(s))d.innerHTML=s+f;else if(s){d.innerHTML="",isArray$3(s)||(s=[s]);for(var g=0;g<s.length;g++)isDom(s[g])&&s[g].parentNode!==d&&d.appendChild(s[g]);if(f&&d.childNodes.length){var y=document.createElement("div");y.innerHTML=f,d.appendChild(y)}}},a.prototype.setEnterable=function(s){this._enterable=s},a.prototype.getSize=function(){var s=this.el;return[s.offsetWidth,s.offsetHeight]},a.prototype.moveTo=function(s,l){var o=this._styleCoord;if(makeStyleCoord$1(o,this._zr,this._container,s,l),o[0]!=null&&o[1]!=null){var c=this.el.style,u=assembleTransform(o[0],o[1]);each$f(u,function(d){c[d[0]]=d[1]})}},a.prototype._moveIfResized=function(){var s=this._styleCoord[2],l=this._styleCoord[3];this.moveTo(s*this._zr.getWidth(),l*this._zr.getHeight())},a.prototype.hide=function(){var s=this,l=this.el.style;l.visibility="hidden",l.opacity="0",env.transform3dSupported&&(l.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return s._longHide=!0},500)},a.prototype.hideLater=function(s){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),s)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el.parentNode;s&&s.removeChild(this.el),this.el=this._container=null},a}(),TooltipRichContent=function(){function a(s){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=s.getZr(),makeStyleCoord(this._styleCoord,this._zr,s.getWidth()/2,s.getHeight()/2)}return a.prototype.update=function(s){var l=s.get("alwaysShowContent");l&&this._moveIfResized(),this._alwaysShowContent=l},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(s,l,o,c,u){var d=this;isObject$5(s)&&throwError(""),this.el&&this._zr.remove(this.el);var f=o.getModel("textStyle");this.el=new ZRText({style:{rich:l.richTextStyles,text:s,lineHeight:22,borderWidth:1,borderColor:c,textShadowColor:f.get("textShadowColor"),fill:o.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(o,"richText"),verticalAlign:"top",align:"left"},z:o.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(y){d.el.style[y]=o.get(y)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(y){d.el.style[y]=f.get(y)||0}),this._zr.add(this.el);var g=this;this.el.on("mouseover",function(){g._enterable&&(clearTimeout(g._hideTimeout),g._show=!0),g._inContent=!0}),this.el.on("mouseout",function(){g._enterable&&g._show&&g.hideLater(g._hideDelay),g._inContent=!1})},a.prototype.setEnterable=function(s){this._enterable=s},a.prototype.getSize=function(){var s=this.el,l=this.el.getBoundingRect(),o=calcShadowOuterSize(s.style);return[l.width+o.left+o.right,l.height+o.top+o.bottom]},a.prototype.moveTo=function(s,l){var o=this.el;if(o){var c=this._styleCoord;makeStyleCoord(c,this._zr,s,l),s=c[0],l=c[1];var u=o.style,d=mathMaxWith0(u.borderWidth||0),f=calcShadowOuterSize(u);o.x=s+d+f.left,o.y=l+d+f.top,o.markRedraw()}},a.prototype._moveIfResized=function(){var s=this._styleCoord[2],l=this._styleCoord[3];this.moveTo(s*this._zr.getWidth(),l*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(s){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(s?(this._hideDelay=s,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),s)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function mathMaxWith0(a){return Math.max(0,a)}function calcShadowOuterSize(a){var s=mathMaxWith0(a.shadowBlur||0),l=mathMaxWith0(a.shadowOffsetX||0),o=mathMaxWith0(a.shadowOffsetY||0);return{left:mathMaxWith0(s-l),right:mathMaxWith0(s+l),top:mathMaxWith0(s-o),bottom:mathMaxWith0(s+o)}}function makeStyleCoord(a,s,l,o){a[0]=l,a[1]=o,a[2]=a[0]/s.getWidth(),a[3]=a[1]/s.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o){if(!(env.node||!o.getDom())){var c=l.getComponent("tooltip"),u=this._renderMode=getTooltipRenderMode(c.get("renderMode"));this._tooltipContent=u==="richText"?new TooltipRichContent(o):new TooltipHTMLContent(o,{appendTo:c.get("appendToBody",!0)?"body":c.get("appendTo",!0)})}},s.prototype.render=function(l,o,c){if(!(env.node||!c.getDom())){this.group.removeAll(),this._tooltipModel=l,this._ecModel=o,this._api=c;var u=this._tooltipContent;u.update(l),u.setEnterable(l.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&l.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},s.prototype._initGlobalListener=function(){var l=this._tooltipModel,o=l.get("triggerOn");register("itemTooltip",this._api,bind$1(function(c,u,d){o!=="none"&&(o.indexOf(c)>=0?this._tryShow(u,d):c==="leave"&&this._hide(d))},this))},s.prototype._keepShow=function(){var l=this._tooltipModel,o=this._ecModel,c=this._api,u=l.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&u!=="none"&&u!=="click"){var d=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!c.isDisposed()&&d.manuallyShowTip(l,o,c,{x:d._lastX,y:d._lastY,dataByCoordSys:d._lastDataByCoordSys})})}},s.prototype.manuallyShowTip=function(l,o,c,u){if(!(u.from===this.uid||env.node||!c.getDom())){var d=makeDispatchAction(u,c);this._ticket="";var f=u.dataByCoordSys,g=findComponentReference(u,o,c);if(g){var y=g.el.getBoundingRect().clone();y.applyTransform(g.el.transform),this._tryShow({offsetX:y.x+y.width/2,offsetY:y.y+y.height/2,target:g.el,position:u.position,positionDefault:"bottom"},d)}else if(u.tooltip&&u.x!=null&&u.y!=null){var $=proxyRect;$.x=u.x,$.y=u.y,$.update(),getECData($).tooltipConfig={name:null,option:u.tooltip},this._tryShow({offsetX:u.x,offsetY:u.y,target:$},d)}else if(f)this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,dataByCoordSys:f,tooltipOption:u.tooltipOption},d);else if(u.seriesIndex!=null){if(this._manuallyAxisShowTip(l,o,c,u))return;var x=findPointFromSeries(u,o),N=x.point[0],R=x.point[1];N!=null&&R!=null&&this._tryShow({offsetX:N,offsetY:R,target:x.el,position:u.position,positionDefault:"bottom"},d)}else u.x!=null&&u.y!=null&&(c.dispatchAction({type:"updateAxisPointer",x:u.x,y:u.y}),this._tryShow({offsetX:u.x,offsetY:u.y,position:u.position,target:c.getZr().findHover(u.x,u.y).target},d))}},s.prototype.manuallyHideTip=function(l,o,c,u){var d=this._tooltipContent;this._tooltipModel&&d.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,u.from!==this.uid&&this._hide(makeDispatchAction(u,c))},s.prototype._manuallyAxisShowTip=function(l,o,c,u){var d=u.seriesIndex,f=u.dataIndex,g=o.getComponent("axisPointer").coordSysAxesInfo;if(!(d==null||f==null||g==null)){var y=o.getSeriesByIndex(d);if(y){var $=y.getData(),x=buildTooltipModel([$.getItemModel(f),y,(y.coordinateSystem||{}).model],this._tooltipModel);if(x.get("trigger")==="axis")return c.dispatchAction({type:"updateAxisPointer",seriesIndex:d,dataIndex:f,position:u.position}),!0}}},s.prototype._tryShow=function(l,o){var c=l.target,u=this._tooltipModel;if(u){this._lastX=l.offsetX,this._lastY=l.offsetY;var d=l.dataByCoordSys;if(d&&d.length)this._showAxisTooltip(d,l);else if(c){var f=getECData(c);if(f.ssrType==="legend")return;this._lastDataByCoordSys=null;var g,y;findEventDispatcher(c,function($){if(getECData($).dataIndex!=null)return g=$,!0;if(getECData($).tooltipConfig!=null)return y=$,!0},!0),g?this._showSeriesItemTooltip(l,g,o):y?this._showComponentItemTooltip(l,y,o):this._hide(o)}else this._lastDataByCoordSys=null,this._hide(o)}},s.prototype._showOrMove=function(l,o){var c=l.get("showDelay");o=bind$1(o,this),clearTimeout(this._showTimout),c>0?this._showTimout=setTimeout(o,c):o()},s.prototype._showAxisTooltip=function(l,o){var c=this._ecModel,u=this._tooltipModel,d=[o.offsetX,o.offsetY],f=buildTooltipModel([o.tooltipOption],u),g=this._renderMode,y=[],$=createTooltipMarkup("section",{blocks:[],noHeader:!0}),x=[],N=new TooltipMarkupStyleCreator;each$f(l,function(fe){each$f(fe.dataByAxis,function(ea){var ta=c.getComponent(ea.axisDim+"Axis",ea.axisIndex),na=ea.value;if(!(!ta||na==null)){var aa=getValueLabel(na,ta.axis,c,ea.seriesDataIndices,ea.valueLabelOpt),ia=createTooltipMarkup("section",{header:aa,noHeader:!trim$1(aa),sortBlocks:!0,blocks:[]});$.blocks.push(ia),each$f(ea.seriesDataIndices,function(sa){var ra=c.getSeriesByIndex(sa.seriesIndex),la=sa.dataIndexInside,oa=ra.getDataParams(la);if(!(oa.dataIndex<0)){oa.axisDim=ea.axisDim,oa.axisIndex=ea.axisIndex,oa.axisType=ea.axisType,oa.axisId=ea.axisId,oa.axisValue=getAxisRawValue(ta.axis,{value:na}),oa.axisValueLabel=aa,oa.marker=N.makeTooltipMarker("item",convertToColorString(oa.color),g);var ca=normalizeTooltipFormatResult(ra.formatTooltip(la,!0,null)),pa=ca.frag;if(pa){var ua=buildTooltipModel([ra],u).get("valueFormatter");ia.blocks.push(ua?extend({valueFormatter:ua},pa):pa)}ca.text&&x.push(ca.text),y.push(oa)}})}})}),$.blocks.reverse(),x.reverse();var R=o.position,j=f.get("order"),ne=buildTooltipMarkup($,N,g,j,c.get("useUTC"),f.get("textStyle"));ne&&x.unshift(ne);var se=g==="richText"?`

`:"<br/>",ce=x.join(se);this._showOrMove(f,function(){this._updateContentNotChangedOnAxis(l,y)?this._updatePosition(f,R,d[0],d[1],this._tooltipContent,y):this._showTooltipContent(f,ce,y,Math.random()+"",d[0],d[1],R,null,N)})},s.prototype._showSeriesItemTooltip=function(l,o,c){var u=this._ecModel,d=getECData(o),f=d.seriesIndex,g=u.getSeriesByIndex(f),y=d.dataModel||g,$=d.dataIndex,x=d.dataType,N=y.getData(x),R=this._renderMode,j=l.positionDefault,ne=buildTooltipModel([N.getItemModel($),y,g&&(g.coordinateSystem||{}).model],this._tooltipModel,j?{position:j}:null),se=ne.get("trigger");if(!(se!=null&&se!=="item")){var ce=y.getDataParams($,x),fe=new TooltipMarkupStyleCreator;ce.marker=fe.makeTooltipMarker("item",convertToColorString(ce.color),R);var ea=normalizeTooltipFormatResult(y.formatTooltip($,!1,x)),ta=ne.get("order"),na=ne.get("valueFormatter"),aa=ea.frag,ia=aa?buildTooltipMarkup(na?extend({valueFormatter:na},aa):aa,fe,R,ta,u.get("useUTC"),ne.get("textStyle")):ea.text,sa="item_"+y.name+"_"+$;this._showOrMove(ne,function(){this._showTooltipContent(ne,ia,ce,sa,l.offsetX,l.offsetY,l.position,l.target,fe)}),c({type:"showTip",dataIndexInside:$,dataIndex:N.getRawIndex($),seriesIndex:f,from:this.uid})}},s.prototype._showComponentItemTooltip=function(l,o,c){var u=this._renderMode==="html",d=getECData(o),f=d.tooltipConfig,g=f.option||{},y=g.encodeHTMLContent;if(isString$2(g)){var $=g;g={content:$,formatter:$},y=!0}y&&u&&g.content&&(g=clone$4(g),g.content=encodeHTML(g.content));var x=[g],N=this._ecModel.getComponent(d.componentMainType,d.componentIndex);N&&x.push(N),x.push({formatter:g.content});var R=l.positionDefault,j=buildTooltipModel(x,this._tooltipModel,R?{position:R}:null),ne=j.get("content"),se=Math.random()+"",ce=new TooltipMarkupStyleCreator;this._showOrMove(j,function(){var fe=clone$4(j.get("formatterParams")||{});this._showTooltipContent(j,ne,fe,se,l.offsetX,l.offsetY,l.position,o,ce)}),c({type:"showTip",from:this.uid})},s.prototype._showTooltipContent=function(l,o,c,u,d,f,g,y,$){if(this._ticket="",!(!l.get("showContent")||!l.get("show"))){var x=this._tooltipContent;x.setEnterable(l.get("enterable"));var N=l.get("formatter");g=g||l.get("position");var R=o,j=this._getNearestPoint([d,f],c,l.get("trigger"),l.get("borderColor")),ne=j.color;if(N)if(isString$2(N)){var se=l.ecModel.get("useUTC"),ce=isArray$3(c)?c[0]:c,fe=ce&&ce.axisType&&ce.axisType.indexOf("time")>=0;R=N,fe&&(R=format(ce.axisValue,R,se)),R=formatTpl(R,c,!0)}else if(isFunction$2(N)){var ea=bind$1(function(ta,na){ta===this._ticket&&(x.setContent(na,$,l,ne,g),this._updatePosition(l,g,d,f,x,c,y))},this);this._ticket=u,R=N(c,u,ea)}else R=N;x.setContent(R,$,l,ne,g),x.show(l,ne),this._updatePosition(l,g,d,f,x,c,y)}},s.prototype._getNearestPoint=function(l,o,c,u){if(c==="axis"||isArray$3(o))return{color:u||(this._renderMode==="html"?"#fff":"none")};if(!isArray$3(o))return{color:u||o.color||o.borderColor}},s.prototype._updatePosition=function(l,o,c,u,d,f,g){var y=this._api.getWidth(),$=this._api.getHeight();o=o||l.get("position");var x=d.getSize(),N=l.get("align"),R=l.get("verticalAlign"),j=g&&g.getBoundingRect().clone();if(g&&j.applyTransform(g.transform),isFunction$2(o)&&(o=o([c,u],f,d.el,j,{viewSize:[y,$],contentSize:x.slice()})),isArray$3(o))c=parsePercent(o[0],y),u=parsePercent(o[1],$);else if(isObject$5(o)){var ne=o;ne.width=x[0],ne.height=x[1];var se=getLayoutRect(ne,{width:y,height:$});c=se.x,u=se.y,N=null,R=null}else if(isString$2(o)&&g){var ce=calcTooltipPosition(o,j,x,l.get("borderWidth"));c=ce[0],u=ce[1]}else{var ce=refixTooltipPosition(c,u,d,y,$,N?null:20,R?null:20);c=ce[0],u=ce[1]}if(N&&(c-=isCenterAlign(N)?x[0]/2:N==="right"?x[0]:0),R&&(u-=isCenterAlign(R)?x[1]/2:R==="bottom"?x[1]:0),shouldTooltipConfine(l)){var ce=confineTooltipPosition(c,u,d,y,$);c=ce[0],u=ce[1]}d.moveTo(c,u)},s.prototype._updateContentNotChangedOnAxis=function(l,o){var c=this._lastDataByCoordSys,u=this._cbParamsList,d=!!c&&c.length===l.length;return d&&each$f(c,function(f,g){var y=f.dataByAxis||[],$=l[g]||{},x=$.dataByAxis||[];d=d&&y.length===x.length,d&&each$f(y,function(N,R){var j=x[R]||{},ne=N.seriesDataIndices||[],se=j.seriesDataIndices||[];d=d&&N.value===j.value&&N.axisType===j.axisType&&N.axisId===j.axisId&&ne.length===se.length,d&&each$f(ne,function(ce,fe){var ea=se[fe];d=d&&ce.seriesIndex===ea.seriesIndex&&ce.dataIndex===ea.dataIndex}),u&&each$f(N.seriesDataIndices,function(ce){var fe=ce.seriesIndex,ea=o[fe],ta=u[fe];ea&&ta&&ta.data!==ea.data&&(d=!1)})})}),this._lastDataByCoordSys=l,this._cbParamsList=o,!!d},s.prototype._hide=function(l){this._lastDataByCoordSys=null,l({type:"hideTip",from:this.uid})},s.prototype.dispose=function(l,o){env.node||!o.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",o))},s.type="tooltip",s}(ComponentView);function buildTooltipModel(a,s,l){var o=s.ecModel,c;l?(c=new Model(l,o,o),c=new Model(s.option,c,o)):c=s;for(var u=a.length-1;u>=0;u--){var d=a[u];d&&(d instanceof Model&&(d=d.get("tooltip",!0)),isString$2(d)&&(d={formatter:d}),d&&(c=new Model(d,c,o)))}return c}function makeDispatchAction(a,s){return a.dispatchAction||bind$1(s.dispatchAction,s)}function refixTooltipPosition(a,s,l,o,c,u,d){var f=l.getSize(),g=f[0],y=f[1];return u!=null&&(a+g+u+2>o?a-=g+u:a+=u),d!=null&&(s+y+d>c?s-=y+d:s+=d),[a,s]}function confineTooltipPosition(a,s,l,o,c){var u=l.getSize(),d=u[0],f=u[1];return a=Math.min(a+d,o)-d,s=Math.min(s+f,c)-f,a=Math.max(a,0),s=Math.max(s,0),[a,s]}function calcTooltipPosition(a,s,l,o){var c=l[0],u=l[1],d=Math.ceil(Math.SQRT2*o)+8,f=0,g=0,y=s.width,$=s.height;switch(a){case"inside":f=s.x+y/2-c/2,g=s.y+$/2-u/2;break;case"top":f=s.x+y/2-c/2,g=s.y-u-d;break;case"bottom":f=s.x+y/2-c/2,g=s.y+$+d;break;case"left":f=s.x-c-d,g=s.y+$/2-u/2;break;case"right":f=s.x+y+d,g=s.y+$/2-u/2}return[f,g]}function isCenterAlign(a){return a==="center"||a==="middle"}function findComponentReference(a,s,l){var o=preParseFinder(a).queryOptionMap,c=o.keys()[0];if(!(!c||c==="series")){var u=queryReferringComponents(s,c,o.get(c),{useDefault:!1,enableAll:!1,enableNone:!1}),d=u.models[0];if(d){var f=l.getViewOfComponentModel(d),g;if(f.group.traverse(function(y){var $=getECData(y).tooltipConfig;if($&&$.name===a.name)return g=y,!0}),g)return{componentMainType:c,componentIndex:d.componentIndex,el:g}}}}function install$j(a){use(install$r),a.registerComponentModel(TooltipModel),a.registerComponentView(TooltipView),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(a,s){var l=normalizeToArray(a?a.brush:[]);if(l.length){var o=[];each$f(l,function(g){var y=g.hasOwnProperty("toolbox")?g.toolbox:[];y instanceof Array&&(o=o.concat(y))});var c=a&&a.toolbox;isArray$3(c)&&(c=c[0]),c||(c={feature:{}},a.toolbox=[c]);var u=c.feature||(c.feature={}),d=u.brush||(u.brush={}),f=d.type||(d.type=[]);f.push.apply(f,o),removeDuplicate(f),s&&!f.length&&f.push.apply(f,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(a){var s={};each$f(a,function(l){s[l]=1}),a.length=0,each$f(s,function(l,o){a.push(o)})}var each$4=each$f;function hasKeys(a){if(a){for(var s in a)if(a.hasOwnProperty(s))return!0}}function createVisualMappings(a,s,l){var o={};return each$4(s,function(u){var d=o[u]=c();each$4(a[u],function(f,g){if(VisualMapping.isValidType(g)){var y={type:g,visual:f};l&&l(y,u),d[g]=new VisualMapping(y),g==="opacity"&&(y=clone$4(y),y.type="colorAlpha",d.__hidden.__alphaForOpacity=new VisualMapping(y))}})}),o;function c(){var u=function(){};u.prototype.__hidden=u.prototype;var d=new u;return d}}function replaceVisualOption(a,s,l){var o;each$f(l,function(c){s.hasOwnProperty(c)&&hasKeys(s[c])&&(o=!0)}),o&&each$f(l,function(c){s.hasOwnProperty(c)&&hasKeys(s[c])?a[c]=clone$4(s[c]):delete a[c]})}function applyVisual(a,s,l,o,c,u){var d={};each$f(a,function(x){var N=VisualMapping.prepareVisualTypes(s[x]);d[x]=N});var f;function g(x){return getItemVisualFromData(l,f,x)}function y(x,N){setItemVisualFromData(l,f,x,N)}l.each($);function $(x,N){f=x;var R=l.getRawDataItem(f);if(!(R&&R.visualMap===!1))for(var j=o.call(c,x),ne=s[j],se=d[j],ce=0,fe=se.length;ce<fe;ce++){var ea=se[ce];ne[ea]&&ne[ea].applyVisual(x,g,y)}}}function incrementalApplyVisual(a,s,l,o){var c={};return each$f(a,function(u){var d=VisualMapping.prepareVisualTypes(s[u]);c[u]=d}),{progress:function(d,f){var g;o!=null&&(g=f.getDimensionIndex(o));function y(na){return getItemVisualFromData(f,x,na)}function $(na,aa){setItemVisualFromData(f,x,na,aa)}for(var x,N=f.getStore();(x=d.next())!=null;){var R=f.getRawDataItem(x);if(!(R&&R.visualMap===!1))for(var j=o!=null?N.get(g,x):x,ne=l(j),se=s[ne],ce=c[ne],fe=0,ea=ce.length;fe<ea;fe++){var ta=ce[fe];se[ta]&&se[ta].applyVisual(j,y,$)}}}}}function makeBrushCommonSelectorForSeries(a){var s=a.brushType,l={point:function(o){return selector[s].point(o,l,a)},rect:function(o){return selector[s].rect(o,l,a)}};return l}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(a,s,l){return a&&l.boundingRect.contain(a[0],a[1])},rect:function(a,s,l){return a&&l.boundingRect.intersect(a)}},polygon:{point:function(a,s,l){return a&&l.boundingRect.contain(a[0],a[1])&&contain(l.range,a[0],a[1])},rect:function(a,s,l){var o=l.range;if(!a||o.length<=1)return!1;var c=a.x,u=a.y,d=a.width,f=a.height,g=o[0];if(contain(o,c,u)||contain(o,c+d,u)||contain(o,c,u+f)||contain(o,c+d,u+f)||BoundingRect.create(a).contain(g[0],g[1])||linePolygonIntersect(c,u,c+d,u,o)||linePolygonIntersect(c,u,c,u+f,o)||linePolygonIntersect(c+d,u,c+d,u+f,o)||linePolygonIntersect(c,u+f,c+d,u+f,o))return!0}}};function getLineSelectors(a){var s=["x","y"],l=["width","height"];return{point:function(o,c,u){if(o){var d=u.range,f=o[a];return inLineRange(f,d)}},rect:function(o,c,u){if(o){var d=u.range,f=[o[s[a]],o[s[a]]+o[l[a]]];return f[1]<f[0]&&f.reverse(),inLineRange(f[0],d)||inLineRange(f[1],d)||inLineRange(d[0],f)||inLineRange(d[1],f)}}}}function inLineRange(a,s){return s[0]<=a&&a<=s[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(a){a.eachComponent({mainType:"brush"},function(s){var l=s.brushTargetManager=new BrushTargetManager(s.option,a);l.setInputRanges(s.areas,a)})}function brushVisual(a,s,l){var o=[],c,u;a.eachComponent({mainType:"brush"},function(d){l&&l.type==="takeGlobalCursor"&&d.setBrushOption(l.key==="brush"?l.brushOption:{brushType:!1})}),layoutCovers(a),a.eachComponent({mainType:"brush"},function(d,f){var g={brushId:d.id,brushIndex:f,brushName:d.name,areas:clone$4(d.areas),selected:[]};o.push(g);var y=d.option,$=y.brushLink,x=[],N=[],R=[],j=!1;f||(c=y.throttleType,u=y.throttleDelay);var ne=map$1(d.areas,function(na){var aa=boundingRectBuilders[na.brushType],ia=defaults({boundingRect:aa?aa(na):void 0},na);return ia.selectors=makeBrushCommonSelectorForSeries(ia),ia}),se=createVisualMappings(d.option,STATE_LIST,function(na){na.mappingMethod="fixed"});isArray$3($)&&each$f($,function(na){x[na]=1});function ce(na){return $==="all"||!!x[na]}function fe(na){return!!na.length}a.eachSeries(function(na,aa){var ia=R[aa]=[];na.subType==="parallel"?ea(na,aa):ta(na,aa,ia)});function ea(na,aa){var ia=na.coordinateSystem;j=j||ia.hasAxisBrushed(),ce(aa)&&ia.eachActiveState(na.getData(),function(sa,ra){sa==="active"&&(N[ra]=1)})}function ta(na,aa,ia){if(!(!na.brushSelector||brushModelNotControll(d,aa))&&(each$f(ne,function(ra){d.brushTargetManager.controlSeries(ra,na,a)&&ia.push(ra),j=j||fe(ia)}),ce(aa)&&fe(ia))){var sa=na.getData();sa.each(function(ra){checkInRange(na,ia,sa,ra)&&(N[ra]=1)})}}a.eachSeries(function(na,aa){var ia={seriesId:na.id,seriesIndex:aa,seriesName:na.name,dataIndex:[]};g.selected.push(ia);var sa=R[aa],ra=na.getData(),la=ce(aa)?function(oa){return N[oa]?(ia.dataIndex.push(ra.getRawIndex(oa)),"inBrush"):"outOfBrush"}:function(oa){return checkInRange(na,sa,ra,oa)?(ia.dataIndex.push(ra.getRawIndex(oa)),"inBrush"):"outOfBrush"};(ce(aa)?j:fe(sa))&&applyVisual(STATE_LIST,se,ra,la)})}),dispatchAction$1(s,c,u,o,l)}function dispatchAction$1(a,s,l,o,c){if(c){var u=a.getZr();if(!u[DISPATCH_FLAG]){u[DISPATCH_METHOD]||(u[DISPATCH_METHOD]=doDispatch);var d=createOrUpdate(u,DISPATCH_METHOD,l,s);d(a,o)}}}function doDispatch(a,s){if(!a.isDisposed()){var l=a.getZr();l[DISPATCH_FLAG]=!0,a.dispatchAction({type:"brushSelect",batch:s}),l[DISPATCH_FLAG]=!1}}function checkInRange(a,s,l,o){for(var c=0,u=s.length;c<u;c++){var d=s[c];if(a.brushSelector(o,l,d.selectors,d))return!0}}function brushModelNotControll(a,s){var l=a.option.seriesIndex;return l!=null&&l!=="all"&&(isArray$3(l)?indexOf(l,s)<0:s!==l)}var boundingRectBuilders={rect:function(a){return getBoundingRectFromMinMax(a.range)},polygon:function(a){for(var s,l=a.range,o=0,c=l.length;o<c;o++){s=s||[[1/0,-1/0],[1/0,-1/0]];var u=l[o];u[0]<s[0][0]&&(s[0][0]=u[0]),u[0]>s[0][1]&&(s[0][1]=u[0]),u[1]<s[1][0]&&(s[1][0]=u[1]),u[1]>s[1][1]&&(s[1][1]=u[1])}return s&&getBoundingRectFromMinMax(s)}};function getBoundingRectFromMinMax(a){return new BoundingRect(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var BrushView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o){this.ecModel=l,this.api=o,this.model,(this._brushController=new BrushController(o.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},s.prototype.render=function(l,o,c,u){this.model=l,this._updateController(l,o,c,u)},s.prototype.updateTransform=function(l,o,c,u){layoutCovers(o),this._updateController(l,o,c,u)},s.prototype.updateVisual=function(l,o,c,u){this.updateTransform(l,o,c,u)},s.prototype.updateView=function(l,o,c,u){this._updateController(l,o,c,u)},s.prototype._updateController=function(l,o,c,u){(!u||u.$from!==l.id)&&this._brushController.setPanels(l.brushTargetManager.makePanelOpts(c)).enableBrush(l.brushOption).updateCovers(l.areas.slice())},s.prototype.dispose=function(){this._brushController.dispose()},s.prototype._onBrush=function(l){var o=this.model.id,c=this.model.brushTargetManager.setOutputRanges(l.areas,this.ecModel);(!l.isEnd||l.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:o,areas:clone$4(c),$from:o}),l.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:o,areas:clone$4(c),$from:o})},s.type="brush",s}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.areas=[],l.brushOption={},l}return s.prototype.optionUpdated=function(l,o){var c=this.option;!o&&replaceVisualOption(c,l,["inBrush","outOfBrush"]);var u=c.inBrush=c.inBrush||{};c.outOfBrush=c.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},u.hasOwnProperty("liftZ")||(u.liftZ=5)},s.prototype.setAreas=function(l){l&&(this.areas=map$1(l,function(o){return generateBrushOption(this.option,o)},this))},s.prototype.setBrushOption=function(l){this.brushOption=generateBrushOption(this.option,l),this.brushType=this.brushOption.brushType},s.type="brush",s.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],s.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},s}(ComponentModel);function generateBrushOption(a,s){return merge({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Model(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},s,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(a){__extends(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.render=function(l,o,c){var u,d,f;o.eachComponent({mainType:"brush"},function(g){u=g.brushType,d=g.brushOption.brushMode||"single",f=f||!!g.areas.length}),this._brushType=u,this._brushMode=d,each$f(l.get("type",!0),function(g){l.setIconStatus(g,(g==="keep"?d==="multiple":g==="clear"?f:g===u)?"emphasis":"normal")})},s.prototype.updateView=function(l,o,c){this.render(l,o,c)},s.prototype.getIcons=function(){var l=this.model,o=l.get("icon",!0),c={};return each$f(l.get("type",!0),function(u){o[u]&&(c[u]=o[u])}),c},s.prototype.onclick=function(l,o,c){var u=this._brushType,d=this._brushMode;c==="clear"?(o.dispatchAction({type:"axisAreaSelect",intervals:[]}),o.dispatchAction({type:"brush",command:"clear",areas:[]})):o.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:c==="keep"?u:u===c?!1:c,brushMode:c==="keep"?d==="multiple"?"single":"multiple":d}})},s.getDefaultOption=function(l){var o={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:l.getLocaleModel().get(["toolbox","brush","title"])};return o},s}(ToolboxFeature);function install$i(a){a.registerComponentView(BrushView),a.registerComponentModel(BrushModel),a.registerPreprocessor(brushPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,brushVisual),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(s,l){l.eachComponent({mainType:"brush",query:s},function(o){o.setAreas(s.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop),registerFeature("brush",BrushFeature)}var TitleModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.layoutMode={type:"box",ignoreSize:!0},l}return s.type="title",s.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},s}(ComponentModel),TitleView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.render=function(l,o,c){if(this.group.removeAll(),!!l.get("show")){var u=this.group,d=l.getModel("textStyle"),f=l.getModel("subtextStyle"),g=l.get("textAlign"),y=retrieve2(l.get("textBaseline"),l.get("textVerticalAlign")),$=new ZRText({style:createTextStyle(d,{text:l.get("text"),fill:d.getTextColor()},{disableBox:!0}),z2:10}),x=$.getBoundingRect(),N=l.get("subtext"),R=new ZRText({style:createTextStyle(f,{text:N,fill:f.getTextColor(),y:x.height+l.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),j=l.get("link"),ne=l.get("sublink"),se=l.get("triggerEvent",!0);$.silent=!j&&!se,R.silent=!ne&&!se,j&&$.on("click",function(){windowOpen(j,"_"+l.get("target"))}),ne&&R.on("click",function(){windowOpen(ne,"_"+l.get("subtarget"))}),getECData($).eventData=getECData(R).eventData=se?{componentType:"title",componentIndex:l.componentIndex}:null,u.add($),N&&u.add(R);var ce=u.getBoundingRect(),fe=l.getBoxLayoutParams();fe.width=ce.width,fe.height=ce.height;var ea=getLayoutRect(fe,{width:c.getWidth(),height:c.getHeight()},l.get("padding"));g||(g=l.get("left")||l.get("right"),g==="middle"&&(g="center"),g==="right"?ea.x+=ea.width:g==="center"&&(ea.x+=ea.width/2)),y||(y=l.get("top")||l.get("bottom"),y==="center"&&(y="middle"),y==="bottom"?ea.y+=ea.height:y==="middle"&&(ea.y+=ea.height/2),y=y||"top"),u.x=ea.x,u.y=ea.y,u.markRedraw();var ta={align:g,verticalAlign:y};$.setStyle(ta),R.setStyle(ta),ce=u.getBoundingRect();var na=ea.margin,aa=l.getItemStyle(["color","opacity"]);aa.fill=l.get("backgroundColor");var ia=new Rect$2({shape:{x:ce.x-na[3],y:ce.y-na[0],width:ce.width+na[1]+na[3],height:ce.height+na[0]+na[2],r:l.get("borderRadius")},style:aa,subPixelOptimize:!0,silent:!0});u.add(ia)}},s.type="title",s}(ComponentView);function install$h(a){a.registerComponentModel(TitleModel),a.registerComponentView(TitleView)}var TimelineModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.layoutMode="box",l}return s.prototype.init=function(l,o,c){this.mergeDefaultAndTheme(l,c),this._initData()},s.prototype.mergeOption=function(l){a.prototype.mergeOption.apply(this,arguments),this._initData()},s.prototype.setCurrentIndex=function(l){l==null&&(l=this.option.currentIndex);var o=this._data.count();this.option.loop?l=(l%o+o)%o:(l>=o&&(l=o-1),l<0&&(l=0)),this.option.currentIndex=l},s.prototype.getCurrentIndex=function(){return this.option.currentIndex},s.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},s.prototype.setPlayState=function(l){this.option.autoPlay=!!l},s.prototype.getPlayState=function(){return!!this.option.autoPlay},s.prototype._initData=function(){var l=this.option,o=l.data||[],c=l.axisType,u=this._names=[],d;c==="category"?(d=[],each$f(o,function(y,$){var x=convertOptionIdName(getDataItemValue(y),""),N;isObject$5(y)?(N=clone$4(y),N.value=$):N=$,d.push(N),u.push(x)})):d=o;var f={category:"ordinal",time:"time",value:"number"}[c]||"number",g=this._data=new SeriesData([{name:"value",type:f}],this);g.initData(d,u)},s.prototype.getData=function(){return this._data},s.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},s.type="timeline",s.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},s}(ComponentModel),SliderTimelineModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="timeline.slider",s.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),s}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="timeline",s}(ComponentView),TimelineAxis=function(a){__extends(s,a);function s(l,o,c,u){var d=a.call(this,l,o,c)||this;return d.type=u||"value",d}return s.prototype.getLabelModel=function(){return this.model.getModel("label")},s.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},s}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(l,o){this.api=o},s.prototype.render=function(l,o,c){if(this.model=l,this.api=c,this.ecModel=o,this.group.removeAll(),l.get("show",!0)){var u=this._layout(l,c),d=this._createGroup("_mainGroup"),f=this._createGroup("_labelGroup"),g=this._axis=this._createAxis(u,l);l.formatTooltip=function(y){var $=g.scale.getLabel({value:y});return createTooltipMarkup("nameValue",{noName:!0,value:$})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(y){this["_render"+y](u,d,g,l)},this),this._renderAxisLabel(u,f,g,l),this._position(u,l)}this._doPlayStop(),this._updateTicksStatus()},s.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},s.prototype.dispose=function(){this._clearTimer()},s.prototype._layout=function(l,o){var c=l.get(["label","position"]),u=l.get("orient"),d=getViewRect(l,o),f;c==null||c==="auto"?f=u==="horizontal"?d.y+d.height/2<o.getHeight()/2?"-":"+":d.x+d.width/2<o.getWidth()/2?"+":"-":isString$2(c)?f={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[u][c]:f=c;var g={horizontal:"center",vertical:f>=0||f==="+"?"left":"right"},y={horizontal:f>=0||f==="+"?"top":"bottom",vertical:"middle"},$={horizontal:0,vertical:PI/2},x=u==="vertical"?d.height:d.width,N=l.getModel("controlStyle"),R=N.get("show",!0),j=R?N.get("itemSize"):0,ne=R?N.get("itemGap"):0,se=j+ne,ce=l.get(["label","rotate"])||0;ce=ce*PI/180;var fe,ea,ta,na=N.get("position",!0),aa=R&&N.get("showPlayBtn",!0),ia=R&&N.get("showPrevBtn",!0),sa=R&&N.get("showNextBtn",!0),ra=0,la=x;na==="left"||na==="bottom"?(aa&&(fe=[0,0],ra+=se),ia&&(ea=[ra,0],ra+=se),sa&&(ta=[la-j,0],la-=se)):(aa&&(fe=[la-j,0],la-=se),ia&&(ea=[0,0],ra+=se),sa&&(ta=[la-j,0],la-=se));var oa=[ra,la];return l.get("inverse")&&oa.reverse(),{viewRect:d,mainLength:x,orient:u,rotation:$[u],labelRotation:ce,labelPosOpt:f,labelAlign:l.get(["label","align"])||g[u],labelBaseline:l.get(["label","verticalAlign"])||l.get(["label","baseline"])||y[u],playPosition:fe,prevBtnPosition:ea,nextBtnPosition:ta,axisExtent:oa,controlSize:j,controlGap:ne}},s.prototype._position=function(l,o){var c=this._mainGroup,u=this._labelGroup,d=l.viewRect;if(l.orient==="vertical"){var f=create$1(),g=d.x,y=d.y+d.height;translate(f,f,[-g,-y]),rotate(f,f,-PI/2),translate(f,f,[g,y]),d=d.clone(),d.applyTransform(f)}var $=fe(d),x=fe(c.getBoundingRect()),N=fe(u.getBoundingRect()),R=[c.x,c.y],j=[u.x,u.y];j[0]=R[0]=$[0][0];var ne=l.labelPosOpt;if(ne==null||isString$2(ne)){var se=ne==="+"?0:1;ea(R,x,$,1,se),ea(j,N,$,1,1-se)}else{var se=ne>=0?0:1;ea(R,x,$,1,se),j[1]=R[1]+ne}c.setPosition(R),u.setPosition(j),c.rotation=u.rotation=l.rotation,ce(c),ce(u);function ce(ta){ta.originX=$[0][0]-ta.x,ta.originY=$[1][0]-ta.y}function fe(ta){return[[ta.x,ta.x+ta.width],[ta.y,ta.y+ta.height]]}function ea(ta,na,aa,ia,sa){ta[ia]+=aa[ia][sa]-na[ia][sa]}},s.prototype._createAxis=function(l,o){var c=o.getData(),u=o.get("axisType"),d=createScaleByModel(o,u);d.getTicks=function(){return c.mapArray(["value"],function(y){return{value:y}})};var f=c.getDataExtent("value");d.setExtent(f[0],f[1]),d.calcNiceTicks();var g=new TimelineAxis("value",d,l.axisExtent,u);return g.model=o,g},s.prototype._createGroup=function(l){var o=this[l]=new Group$3;return this.group.add(o),o},s.prototype._renderAxisLine=function(l,o,c,u){var d=c.getExtent();if(u.get(["lineStyle","show"])){var f=new Line$1({shape:{x1:d[0],y1:0,x2:d[1],y2:0},style:extend({lineCap:"round"},u.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});o.add(f);var g=this._progressLine=new Line$1({shape:{x1:d[0],x2:this._currentPointer?this._currentPointer.x:d[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:f.style.lineWidth},u.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});o.add(g)}},s.prototype._renderAxisTick=function(l,o,c,u){var d=this,f=u.getData(),g=c.scale.getTicks();this._tickSymbols=[],each$f(g,function(y){var $=c.dataToCoord(y.value),x=f.getItemModel(y.value),N=x.getModel("itemStyle"),R=x.getModel(["emphasis","itemStyle"]),j=x.getModel(["progress","itemStyle"]),ne={x:$,y:0,onclick:bind$1(d._changeTimeline,d,y.value)},se=giveSymbol(x,N,o,ne);se.ensureState("emphasis").style=R.getItemStyle(),se.ensureState("progress").style=j.getItemStyle(),enableHoverEmphasis(se);var ce=getECData(se);x.get("tooltip")?(ce.dataIndex=y.value,ce.dataModel=u):ce.dataIndex=ce.dataModel=null,d._tickSymbols.push(se)})},s.prototype._renderAxisLabel=function(l,o,c,u){var d=this,f=c.getLabelModel();if(f.get("show")){var g=u.getData(),y=c.getViewLabels();this._tickLabels=[],each$f(y,function($){var x=$.tickValue,N=g.getItemModel(x),R=N.getModel("label"),j=N.getModel(["emphasis","label"]),ne=N.getModel(["progress","label"]),se=c.dataToCoord($.tickValue),ce=new ZRText({x:se,y:0,rotation:l.labelRotation-l.rotation,onclick:bind$1(d._changeTimeline,d,x),silent:!1,style:createTextStyle(R,{text:$.formattedLabel,align:l.labelAlign,verticalAlign:l.labelBaseline})});ce.ensureState("emphasis").style=createTextStyle(j),ce.ensureState("progress").style=createTextStyle(ne),o.add(ce),enableHoverEmphasis(ce),labelDataIndexStore(ce).dataIndex=x,d._tickLabels.push(ce)})}},s.prototype._renderControl=function(l,o,c,u){var d=l.controlSize,f=l.rotation,g=u.getModel("controlStyle").getItemStyle(),y=u.getModel(["emphasis","controlStyle"]).getItemStyle(),$=u.getPlayState(),x=u.get("inverse",!0);N(l.nextBtnPosition,"next",bind$1(this._changeTimeline,this,x?"-":"+")),N(l.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,x?"+":"-")),N(l.playPosition,$?"stop":"play",bind$1(this._handlePlayClick,this,!$),!0);function N(R,j,ne,se){if(R){var ce=parsePercent$1(retrieve2(u.get(["controlStyle",j+"BtnSize"]),d),d),fe=[0,-ce/2,ce,ce],ea=makeControlIcon(u,j+"Icon",fe,{x:R[0],y:R[1],originX:d/2,originY:0,rotation:se?-f:0,rectHover:!0,style:g,onclick:ne});ea.ensureState("emphasis").style=y,o.add(ea),enableHoverEmphasis(ea)}}},s.prototype._renderCurrentPointer=function(l,o,c,u){var d=u.getData(),f=u.getCurrentIndex(),g=d.getItemModel(f).getModel("checkpointStyle"),y=this,$={onCreate:function(x){x.draggable=!0,x.drift=bind$1(y._handlePointerDrag,y),x.ondragend=bind$1(y._handlePointerDragend,y),pointerMoveTo(x,y._progressLine,f,c,u,!0)},onUpdate:function(x){pointerMoveTo(x,y._progressLine,f,c,u)}};this._currentPointer=giveSymbol(g,g,this._mainGroup,{},this._currentPointer,$)},s.prototype._handlePlayClick=function(l){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:l,from:this.uid})},s.prototype._handlePointerDrag=function(l,o,c){this._clearTimer(),this._pointerChangeTimeline([c.offsetX,c.offsetY])},s.prototype._handlePointerDragend=function(l){this._pointerChangeTimeline([l.offsetX,l.offsetY],!0)},s.prototype._pointerChangeTimeline=function(l,o){var c=this._toAxisCoord(l)[0],u=this._axis,d=asc$2(u.getExtent().slice());c>d[1]&&(c=d[1]),c<d[0]&&(c=d[0]),this._currentPointer.x=c,this._currentPointer.markRedraw();var f=this._progressLine;f&&(f.shape.x2=c,f.dirty());var g=this._findNearestTick(c),y=this.model;(o||g!==y.getCurrentIndex()&&y.get("realtime"))&&this._changeTimeline(g)},s.prototype._doPlayStop=function(){var l=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var o=l.model;l._changeTimeline(o.getCurrentIndex()+(o.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},s.prototype._toAxisCoord=function(l){var o=this._mainGroup.getLocalTransform();return applyTransform(l,o,!0)},s.prototype._findNearestTick=function(l){var o=this.model.getData(),c=1/0,u,d=this._axis;return o.each(["value"],function(f,g){var y=d.dataToCoord(f),$=Math.abs(y-l);$<c&&(c=$,u=g)}),u},s.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},s.prototype._changeTimeline=function(l){var o=this.model.getCurrentIndex();l==="+"?l=o+1:l==="-"&&(l=o-1),this.api.dispatchAction({type:"timelineChange",currentIndex:l,from:this.uid})},s.prototype._updateTicksStatus=function(){var l=this.model.getCurrentIndex(),o=this._tickSymbols,c=this._tickLabels;if(o)for(var u=0;u<o.length;u++)o&&o[u]&&o[u].toggleState("progress",u<l);if(c)for(var u=0;u<c.length;u++)c&&c[u]&&c[u].toggleState("progress",labelDataIndexStore(c[u]).dataIndex<=l)},s.type="timeline.slider",s}(TimelineView);function createScaleByModel(a,s){if(s=s||a.get("type"),s)switch(s){case"category":return new OrdinalScale({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(a,s){return getLayoutRect(a.getBoxLayoutParams(),{width:s.getWidth(),height:s.getHeight()},a.get("padding"))}function makeControlIcon(a,s,l,o){var c=o.style,u=createIcon(a.get(["controlStyle",s]),o||{},new BoundingRect(l[0],l[1],l[2],l[3]));return c&&u.setStyle(c),u}function giveSymbol(a,s,l,o,c,u){var d=s.get("color");if(c)c.setColor(d),l.add(c),u&&u.onUpdate(c);else{var f=a.get("symbol");c=createSymbol$1(f,-1,-1,2,2,d),c.setStyle("strokeNoScale",!0),l.add(c),u&&u.onCreate(c)}var g=s.getItemStyle(["color"]);c.setStyle(g),o=merge({rectHover:!0,z2:100},o,!0);var y=normalizeSymbolSize(a.get("symbolSize"));o.scaleX=y[0]/2,o.scaleY=y[1]/2;var $=normalizeSymbolOffset(a.get("symbolOffset"),y);$&&(o.x=(o.x||0)+$[0],o.y=(o.y||0)+$[1]);var x=a.get("symbolRotate");return o.rotation=(x||0)*Math.PI/180||0,c.attr(o),c.updateTransform(),c}function pointerMoveTo(a,s,l,o,c,u){if(!a.dragging){var d=c.getModel("checkpointStyle"),f=o.dataToCoord(c.getData().get("value",l));if(u||!d.get("animation",!0))a.attr({x:f,y:0}),s&&s.attr({shape:{x2:f}});else{var g={duration:d.get("animationDuration",!0),easing:d.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:f,y:0},g),s&&s.animateTo({shape:{x2:f}},g)}}}function installTimelineAction(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(s,l,o){var c=l.getComponent("timeline");return c&&s.currentIndex!=null&&(c.setCurrentIndex(s.currentIndex),!c.get("loop",!0)&&c.isIndexMax()&&c.getPlayState()&&(c.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:s.from}))),l.resetOption("timeline",{replaceMerge:c.get("replaceMerge",!0)}),defaults({currentIndex:c.option.currentIndex},s)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(s,l){var o=l.getComponent("timeline");o&&s.playState!=null&&o.setPlayState(s.playState)})}function timelinePreprocessor(a){var s=a&&a.timeline;isArray$3(s)||(s=s?[s]:[]),each$f(s,function(l){l&&compatibleEC2(l)})}function compatibleEC2(a){var s=a.type,l={number:"value",time:"time"};if(l[s]&&(a.axisType=l[s],delete a.type),transferItem(a),has$1(a,"controlPosition")){var o=a.controlStyle||(a.controlStyle={});has$1(o,"position")||(o.position=a.controlPosition),o.position==="none"&&!has$1(o,"show")&&(o.show=!1,delete o.position),delete a.controlPosition}each$f(a.data||[],function(c){isObject$5(c)&&!isArray$3(c)&&(!has$1(c,"value")&&has$1(c,"name")&&(c.value=c.name),transferItem(c))})}function transferItem(a){var s=a.itemStyle||(a.itemStyle={}),l=s.emphasis||(s.emphasis={}),o=a.label||a.label||{},c=o.normal||(o.normal={}),u={normal:1,emphasis:1};each$f(o,function(d,f){!u[f]&&!has$1(c,f)&&(c[f]=d)}),l.label&&!has$1(o,"emphasis")&&(o.emphasis=l.label,delete l.label)}function has$1(a,s){return a.hasOwnProperty(s)}function install$g(a){a.registerComponentModel(SliderTimelineModel),a.registerComponentView(SliderTimelineView),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(a),a.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(a,s){if(!a)return!1;for(var l=isArray$3(a)?a:[a],o=0;o<l.length;o++)if(l[o]&&l[o][s])return!0;return!1}function fillLabel(a){defaultEmphasis(a,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.createdBySelf=!1,l}return s.prototype.init=function(l,o,c){this.mergeDefaultAndTheme(l,c),this._mergeOption(l,c,!1,!0)},s.prototype.isAnimationEnabled=function(){if(env.node)return!1;var l=this.__hostSeries;return this.getShallow("animation")&&l&&l.isAnimationEnabled()},s.prototype.mergeOption=function(l,o){this._mergeOption(l,o,!1,!1)},s.prototype._mergeOption=function(l,o,c,u){var d=this.mainType;c||o.eachSeries(function(f){var g=f.get(this.mainType,!0),y=inner$5(f)[d];if(!g||!g.data){inner$5(f)[d]=null;return}y?y._mergeOption(g,o,!0):(u&&fillLabel(g),each$f(g.data,function($){$ instanceof Array?(fillLabel($[0]),fillLabel($[1])):fillLabel($)}),y=this.createMarkerModelFromSeries(g,this,o),extend(y,{mainType:this.mainType,seriesIndex:f.seriesIndex,name:f.name,createdBySelf:!0}),y.__hostSeries=f),inner$5(f)[d]=y},this)},s.prototype.formatTooltip=function(l,o,c){var u=this.getData(),d=this.getRawValue(l),f=u.getName(l);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:f,value:d,noName:!f,noValue:d==null})]})},s.prototype.getData=function(){return this._data},s.prototype.setData=function(l){this._data=l},s.prototype.getDataParams=function(l,o){var c=DataFormatMixin.prototype.getDataParams.call(this,l,o),u=this.__hostSeries;return u&&(c.seriesId=u.id,c.seriesName=u.name,c.seriesType=u.subType),c},s.getMarkerModelFromSeries=function(l,o){return inner$5(l)[o]},s.type="marker",s.dependencies=["series","grid","polar","geo"],s}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.createMarkerModelFromSeries=function(l,o,c){return new s(l,o,c)},s.type="markPoint",s.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},s}(MarkerModel);function hasXOrY(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function hasXAndY(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function markerTypeCalculatorWithExtent(a,s,l,o,c,u){var d=[],f=isDimensionStacked(s,o),g=f?s.getCalculationInfo("stackResultDimension"):o,y=numCalculate(s,g,a),$=s.indicesOfNearest(g,y)[0];d[c]=s.get(l,$),d[u]=s.get(g,$);var x=s.get(o,$),N=getPrecision(s.get(o,$));return N=Math.min(N,20),N>=0&&(d[u]=+d[u].toFixed(N)),[d,x]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(a,s){if(s){var l=a.getData(),o=a.coordinateSystem,c=o&&o.dimensions;if(!hasXAndY(s)&&!isArray$3(s.coord)&&isArray$3(c)){var u=getAxisInfo(s,l,o,a);if(s=clone$4(s),s.type&&markerTypeCalculator[s.type]&&u.baseAxis&&u.valueAxis){var d=indexOf(c,u.baseAxis.dim),f=indexOf(c,u.valueAxis.dim),g=markerTypeCalculator[s.type](l,u.baseDataDim,u.valueDataDim,d,f);s.coord=g[0],s.value=g[1]}else s.coord=[s.xAxis!=null?s.xAxis:s.radiusAxis,s.yAxis!=null?s.yAxis:s.angleAxis]}if(s.coord==null||!isArray$3(c))s.coord=[];else for(var y=s.coord,$=0;$<2;$++)markerTypeCalculator[y[$]]&&(y[$]=numCalculate(l,l.mapDimension(c[$]),y[$]));return s}}function getAxisInfo(a,s,l,o){var c={};return a.valueIndex!=null||a.valueDim!=null?(c.valueDataDim=a.valueIndex!=null?s.getDimension(a.valueIndex):a.valueDim,c.valueAxis=l.getAxis(dataDimToCoordDim(o,c.valueDataDim)),c.baseAxis=l.getOtherAxis(c.valueAxis),c.baseDataDim=s.mapDimension(c.baseAxis.dim)):(c.baseAxis=o.getBaseAxis(),c.valueAxis=l.getOtherAxis(c.baseAxis),c.baseDataDim=s.mapDimension(c.baseAxis.dim),c.valueDataDim=s.mapDimension(c.valueAxis.dim)),c}function dataDimToCoordDim(a,s){var l=a.getData().getDimensionInfo(s);return l&&l.coordDim}function dataFilter(a,s){return a&&a.containData&&s.coord&&!hasXOrY(s)?a.containData(s.coord):!0}function zoneFilter(a,s,l){return a&&a.containZone&&s.coord&&l.coord&&!hasXOrY(s)&&!hasXOrY(l)?a.containZone(s.coord,l.coord):!0}function createMarkerDimValueGetter(a,s){return a?function(l,o,c,u){var d=u<2?l.coord&&l.coord[u]:l.value;return parseDataValue(d,s[u])}:function(l,o,c,u){return parseDataValue(l.value,s[u])}}function numCalculate(a,s,l){if(l==="average"){var o=0,c=0;return a.each(s,function(u,d){isNaN(u)||(o+=u,c++)}),o/c}else return l==="median"?a.getMedian(s):a.getDataExtent(s)[l==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.init=function(){this.markerGroupMap=createHashMap()},s.prototype.render=function(l,o,c){var u=this,d=this.markerGroupMap;d.each(function(f){inner$4(f).keep=!1}),o.eachSeries(function(f){var g=MarkerModel.getMarkerModelFromSeries(f,u.type);g&&u.renderSeries(f,g,o,c)}),d.each(function(f){!inner$4(f).keep&&u.group.remove(f.group)})},s.prototype.markKeep=function(l){inner$4(l).keep=!0},s.prototype.toggleBlurSeries=function(l,o){var c=this;each$f(l,function(u){var d=MarkerModel.getMarkerModelFromSeries(u,c.type);if(d){var f=d.getData();f.eachItemGraphicEl(function(g){g&&(o?enterBlur(g):leaveBlur(g))})}})},s.type="marker",s}(ComponentView);function updateMarkerLayout(a,s,l){var o=s.coordinateSystem;a.each(function(c){var u=a.getItemModel(c),d,f=parsePercent(u.get("x"),l.getWidth()),g=parsePercent(u.get("y"),l.getHeight());if(!isNaN(f)&&!isNaN(g))d=[f,g];else if(s.getMarkerPosition)d=s.getMarkerPosition(a.getValues(a.dimensions,c));else if(o){var y=a.get(o.dimensions[0],c),$=a.get(o.dimensions[1],c);d=o.dataToPoint([y,$])}isNaN(f)||(d[0]=f),isNaN(g)||(d[1]=g),a.setItemLayout(c,d)})}var MarkPointView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.updateTransform=function(l,o,c){o.eachSeries(function(u){var d=MarkerModel.getMarkerModelFromSeries(u,"markPoint");d&&(updateMarkerLayout(d.getData(),u,c),this.markerGroupMap.get(u.id).updateLayout())},this)},s.prototype.renderSeries=function(l,o,c,u){var d=l.coordinateSystem,f=l.id,g=l.getData(),y=this.markerGroupMap,$=y.get(f)||y.set(f,new SymbolDraw),x=createData(d,l,o);o.setData(x),updateMarkerLayout(o.getData(),l,u),x.each(function(N){var R=x.getItemModel(N),j=R.getShallow("symbol"),ne=R.getShallow("symbolSize"),se=R.getShallow("symbolRotate"),ce=R.getShallow("symbolOffset"),fe=R.getShallow("symbolKeepAspect");if(isFunction$2(j)||isFunction$2(ne)||isFunction$2(se)||isFunction$2(ce)){var ea=o.getRawValue(N),ta=o.getDataParams(N);isFunction$2(j)&&(j=j(ea,ta)),isFunction$2(ne)&&(ne=ne(ea,ta)),isFunction$2(se)&&(se=se(ea,ta)),isFunction$2(ce)&&(ce=ce(ea,ta))}var na=R.getModel("itemStyle").getItemStyle(),aa=getVisualFromData(g,"color");na.fill||(na.fill=aa),x.setItemVisual(N,{symbol:j,symbolSize:ne,symbolRotate:se,symbolOffset:ce,symbolKeepAspect:fe,style:na})}),$.updateData(x),this.group.add($.group),x.eachItemGraphicEl(function(N){N.traverse(function(R){getECData(R).dataModel=o})}),this.markKeep($),$.group.silent=o.get("silent")||l.get("silent")},s.type="markPoint",s}(MarkerView);function createData(a,s,l){var o;a?o=map$1(a&&a.dimensions,function(f){var g=s.getData().getDimensionInfo(s.getData().mapDimension(f))||{};return extend(extend({},g),{name:f,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var c=new SeriesData(o,l),u=map$1(l.get("data"),curry$1(dataTransform,s));a&&(u=filter(u,curry$1(dataFilter,a)));var d=createMarkerDimValueGetter(!!a,o);return c.initData(u,null,d),c}function install$f(a){a.registerComponentModel(MarkPointModel),a.registerComponentView(MarkPointView),a.registerPreprocessor(function(s){checkMarkerInSeries(s.series,"markPoint")&&(s.markPoint=s.markPoint||{})})}var MarkLineModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.createMarkerModelFromSeries=function(l,o,c){return new s(l,o,c)},s.type="markLine",s.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},s}(MarkerModel),inner$3=makeInner(),markLineTransform=function(a,s,l,o){var c=a.getData(),u;if(isArray$3(o))u=o;else{var d=o.type;if(d==="min"||d==="max"||d==="average"||d==="median"||o.xAxis!=null||o.yAxis!=null){var f=void 0,g=void 0;if(o.yAxis!=null||o.xAxis!=null)f=s.getAxis(o.yAxis!=null?"y":"x"),g=retrieve(o.yAxis,o.xAxis);else{var y=getAxisInfo(o,c,s,a);f=y.valueAxis;var $=getStackedDimension(c,y.valueDataDim);g=numCalculate(c,$,d)}var x=f.dim==="x"?0:1,N=1-x,R=clone$4(o),j={coord:[]};R.type=null,R.coord=[],R.coord[N]=-1/0,j.coord[N]=1/0;var ne=l.get("precision");ne>=0&&isNumber$2(g)&&(g=+g.toFixed(Math.min(ne,20))),R.coord[x]=j.coord[x]=g,u=[R,j,{type:d,valueIndex:o.valueIndex,value:g}]}else u=[]}var se=[dataTransform(a,u[0]),dataTransform(a,u[1]),extend({},u[2])];return se[2].type=se[2].type||null,merge(se[2],se[0]),merge(se[2],se[1]),se};function isInfinity$1(a){return!isNaN(a)&&!isFinite(a)}function ifMarkLineHasOnlyDim(a,s,l,o){var c=1-a,u=o.dimensions[a];return isInfinity$1(s[c])&&isInfinity$1(l[c])&&s[a]===l[a]&&o.getAxis(u).containData(s[a])}function markLineFilter(a,s){if(a.type==="cartesian2d"){var l=s[0].coord,o=s[1].coord;if(l&&o&&(ifMarkLineHasOnlyDim(1,l,o,a)||ifMarkLineHasOnlyDim(0,l,o,a)))return!0}return dataFilter(a,s[0])&&dataFilter(a,s[1])}function updateSingleMarkerEndLayout(a,s,l,o,c){var u=o.coordinateSystem,d=a.getItemModel(s),f,g=parsePercent(d.get("x"),c.getWidth()),y=parsePercent(d.get("y"),c.getHeight());if(!isNaN(g)&&!isNaN(y))f=[g,y];else{if(o.getMarkerPosition)f=o.getMarkerPosition(a.getValues(a.dimensions,s));else{var $=u.dimensions,x=a.get($[0],s),N=a.get($[1],s);f=u.dataToPoint([x,N])}if(isCoordinateSystemType(u,"cartesian2d")){var R=u.getAxis("x"),j=u.getAxis("y"),$=u.dimensions;isInfinity$1(a.get($[0],s))?f[0]=R.toGlobalCoord(R.getExtent()[l?0:1]):isInfinity$1(a.get($[1],s))&&(f[1]=j.toGlobalCoord(j.getExtent()[l?0:1]))}isNaN(g)||(f[0]=g),isNaN(y)||(f[1]=y)}a.setItemLayout(s,f)}var MarkLineView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.updateTransform=function(l,o,c){o.eachSeries(function(u){var d=MarkerModel.getMarkerModelFromSeries(u,"markLine");if(d){var f=d.getData(),g=inner$3(d).from,y=inner$3(d).to;g.each(function($){updateSingleMarkerEndLayout(g,$,!0,u,c),updateSingleMarkerEndLayout(y,$,!1,u,c)}),f.each(function($){f.setItemLayout($,[g.getItemLayout($),y.getItemLayout($)])}),this.markerGroupMap.get(u.id).updateLayout()}},this)},s.prototype.renderSeries=function(l,o,c,u){var d=l.coordinateSystem,f=l.id,g=l.getData(),y=this.markerGroupMap,$=y.get(f)||y.set(f,new LineDraw);this.group.add($.group);var x=createList$1(d,l,o),N=x.from,R=x.to,j=x.line;inner$3(o).from=N,inner$3(o).to=R,o.setData(j);var ne=o.get("symbol"),se=o.get("symbolSize"),ce=o.get("symbolRotate"),fe=o.get("symbolOffset");isArray$3(ne)||(ne=[ne,ne]),isArray$3(se)||(se=[se,se]),isArray$3(ce)||(ce=[ce,ce]),isArray$3(fe)||(fe=[fe,fe]),x.from.each(function(ta){ea(N,ta,!0),ea(R,ta,!1)}),j.each(function(ta){var na=j.getItemModel(ta).getModel("lineStyle").getLineStyle();j.setItemLayout(ta,[N.getItemLayout(ta),R.getItemLayout(ta)]),na.stroke==null&&(na.stroke=N.getItemVisual(ta,"style").fill),j.setItemVisual(ta,{fromSymbolKeepAspect:N.getItemVisual(ta,"symbolKeepAspect"),fromSymbolOffset:N.getItemVisual(ta,"symbolOffset"),fromSymbolRotate:N.getItemVisual(ta,"symbolRotate"),fromSymbolSize:N.getItemVisual(ta,"symbolSize"),fromSymbol:N.getItemVisual(ta,"symbol"),toSymbolKeepAspect:R.getItemVisual(ta,"symbolKeepAspect"),toSymbolOffset:R.getItemVisual(ta,"symbolOffset"),toSymbolRotate:R.getItemVisual(ta,"symbolRotate"),toSymbolSize:R.getItemVisual(ta,"symbolSize"),toSymbol:R.getItemVisual(ta,"symbol"),style:na})}),$.updateData(j),x.line.eachItemGraphicEl(function(ta){getECData(ta).dataModel=o,ta.traverse(function(na){getECData(na).dataModel=o})});function ea(ta,na,aa){var ia=ta.getItemModel(na);updateSingleMarkerEndLayout(ta,na,aa,l,u);var sa=ia.getModel("itemStyle").getItemStyle();sa.fill==null&&(sa.fill=getVisualFromData(g,"color")),ta.setItemVisual(na,{symbolKeepAspect:ia.get("symbolKeepAspect"),symbolOffset:retrieve2(ia.get("symbolOffset",!0),fe[aa?0:1]),symbolRotate:retrieve2(ia.get("symbolRotate",!0),ce[aa?0:1]),symbolSize:retrieve2(ia.get("symbolSize"),se[aa?0:1]),symbol:retrieve2(ia.get("symbol",!0),ne[aa?0:1]),style:sa})}this.markKeep($),$.group.silent=o.get("silent")||l.get("silent")},s.type="markLine",s}(MarkerView);function createList$1(a,s,l){var o;a?o=map$1(a&&a.dimensions,function(y){var $=s.getData().getDimensionInfo(s.getData().mapDimension(y))||{};return extend(extend({},$),{name:y,ordinalMeta:null})}):o=[{name:"value",type:"float"}];var c=new SeriesData(o,l),u=new SeriesData(o,l),d=new SeriesData([],l),f=map$1(l.get("data"),curry$1(markLineTransform,s,a,l));a&&(f=filter(f,curry$1(markLineFilter,a)));var g=createMarkerDimValueGetter(!!a,o);return c.initData(map$1(f,function(y){return y[0]}),null,g),u.initData(map$1(f,function(y){return y[1]}),null,g),d.initData(map$1(f,function(y){return y[2]})),d.hasItemOption=!0,{from:c,to:u,line:d}}function install$e(a){a.registerComponentModel(MarkLineModel),a.registerComponentView(MarkLineView),a.registerPreprocessor(function(s){checkMarkerInSeries(s.series,"markLine")&&(s.markLine=s.markLine||{})})}var MarkAreaModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.createMarkerModelFromSeries=function(l,o,c){return new s(l,o,c)},s.type="markArea",s.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},s}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(a,s,l,o){var c=o[0],u=o[1];if(!(!c||!u)){var d=dataTransform(a,c),f=dataTransform(a,u),g=d.coord,y=f.coord;g[0]=retrieve(g[0],-1/0),g[1]=retrieve(g[1],-1/0),y[0]=retrieve(y[0],1/0),y[1]=retrieve(y[1],1/0);var $=mergeAll([{},d,f]);return $.coord=[d.coord,f.coord],$.x0=d.x,$.y0=d.y,$.x1=f.x,$.y1=f.y,$}};function isInfinity(a){return!isNaN(a)&&!isFinite(a)}function ifMarkAreaHasOnlyDim(a,s,l,o){var c=1-a;return isInfinity(s[c])&&isInfinity(l[c])}function markAreaFilter(a,s){var l=s.coord[0],o=s.coord[1],c={coord:l,x:s.x0,y:s.y0},u={coord:o,x:s.x1,y:s.y1};return isCoordinateSystemType(a,"cartesian2d")?l&&o&&(ifMarkAreaHasOnlyDim(1,l,o)||ifMarkAreaHasOnlyDim(0,l,o))?!0:zoneFilter(a,c,u):dataFilter(a,c)||dataFilter(a,u)}function getSingleMarkerEndPoint(a,s,l,o,c){var u=o.coordinateSystem,d=a.getItemModel(s),f,g=parsePercent(d.get(l[0]),c.getWidth()),y=parsePercent(d.get(l[1]),c.getHeight());if(!isNaN(g)&&!isNaN(y))f=[g,y];else{if(o.getMarkerPosition){var $=a.getValues(["x0","y0"],s),x=a.getValues(["x1","y1"],s),N=u.clampData($),R=u.clampData(x),j=[];l[0]==="x0"?j[0]=N[0]>R[0]?x[0]:$[0]:j[0]=N[0]>R[0]?$[0]:x[0],l[1]==="y0"?j[1]=N[1]>R[1]?x[1]:$[1]:j[1]=N[1]>R[1]?$[1]:x[1],f=o.getMarkerPosition(j,l,!0)}else{var ne=a.get(l[0],s),se=a.get(l[1],s),ce=[ne,se];u.clampData&&u.clampData(ce,ce),f=u.dataToPoint(ce,!0)}if(isCoordinateSystemType(u,"cartesian2d")){var fe=u.getAxis("x"),ea=u.getAxis("y"),ne=a.get(l[0],s),se=a.get(l[1],s);isInfinity(ne)?f[0]=fe.toGlobalCoord(fe.getExtent()[l[0]==="x0"?0:1]):isInfinity(se)&&(f[1]=ea.toGlobalCoord(ea.getExtent()[l[1]==="y0"?0:1]))}isNaN(g)||(f[0]=g),isNaN(y)||(f[1]=y)}return f}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.updateTransform=function(l,o,c){o.eachSeries(function(u){var d=MarkerModel.getMarkerModelFromSeries(u,"markArea");if(d){var f=d.getData();f.each(function(g){var y=map$1(dimPermutations,function(x){return getSingleMarkerEndPoint(f,g,x,u,c)});f.setItemLayout(g,y);var $=f.getItemGraphicEl(g);$.setShape("points",y)})}},this)},s.prototype.renderSeries=function(l,o,c,u){var d=l.coordinateSystem,f=l.id,g=l.getData(),y=this.markerGroupMap,$=y.get(f)||y.set(f,{group:new Group$3});this.group.add($.group),this.markKeep($);var x=createList(d,l,o);o.setData(x),x.each(function(N){var R=map$1(dimPermutations,function(sa){return getSingleMarkerEndPoint(x,N,sa,l,u)}),j=d.getAxis("x").scale,ne=d.getAxis("y").scale,se=j.getExtent(),ce=ne.getExtent(),fe=[j.parse(x.get("x0",N)),j.parse(x.get("x1",N))],ea=[ne.parse(x.get("y0",N)),ne.parse(x.get("y1",N))];asc$2(fe),asc$2(ea);var ta=!(se[0]>fe[1]||se[1]<fe[0]||ce[0]>ea[1]||ce[1]<ea[0]),na=!ta;x.setItemLayout(N,{points:R,allClipped:na});var aa=x.getItemModel(N).getModel("itemStyle").getItemStyle(),ia=getVisualFromData(g,"color");aa.fill||(aa.fill=ia,isString$2(aa.fill)&&(aa.fill=modifyAlpha(aa.fill,.4))),aa.stroke||(aa.stroke=ia),x.setItemVisual(N,"style",aa)}),x.diff(inner$2($).data).add(function(N){var R=x.getItemLayout(N);if(!R.allClipped){var j=new Polygon({shape:{points:R.points}});x.setItemGraphicEl(N,j),$.group.add(j)}}).update(function(N,R){var j=inner$2($).data.getItemGraphicEl(R),ne=x.getItemLayout(N);ne.allClipped?j&&$.group.remove(j):(j?updateProps$1(j,{shape:{points:ne.points}},o,N):j=new Polygon({shape:{points:ne.points}}),x.setItemGraphicEl(N,j),$.group.add(j))}).remove(function(N){var R=inner$2($).data.getItemGraphicEl(N);$.group.remove(R)}).execute(),x.eachItemGraphicEl(function(N,R){var j=x.getItemModel(R),ne=x.getItemVisual(R,"style");N.useStyle(x.getItemVisual(R,"style")),setLabelStyle(N,getLabelStatesModels(j),{labelFetcher:o,labelDataIndex:R,defaultText:x.getName(R)||"",inheritColor:isString$2(ne.fill)?modifyAlpha(ne.fill,1):"#000"}),setStatesStylesFromModel(N,j),toggleHoverEmphasis(N,null,null,j.get(["emphasis","disabled"])),getECData(N).dataModel=o}),inner$2($).data=x,$.group.silent=o.get("silent")||l.get("silent")},s.type="markArea",s}(MarkerView);function createList(a,s,l){var o,c,u=["x0","y0","x1","y1"];if(a){var d=map$1(a&&a.dimensions,function(y){var $=s.getData(),x=$.getDimensionInfo($.mapDimension(y))||{};return extend(extend({},x),{name:y,ordinalMeta:null})});c=map$1(u,function(y,$){return{name:y,type:d[$%2].type}}),o=new SeriesData(c,l)}else c=[{name:"value",type:"float"}],o=new SeriesData(c,l);var f=map$1(l.get("data"),curry$1(markAreaTransform,s,a,l));a&&(f=filter(f,curry$1(markAreaFilter,a)));var g=a?function(y,$,x,N){var R=y.coord[Math.floor(N/2)][N%2];return parseDataValue(R,c[N])}:function(y,$,x,N){return parseDataValue(y.value,c[N])};return o.initData(f,null,g),o.hasItemOption=!0,o}function install$d(a){a.registerComponentModel(MarkAreaModel),a.registerComponentView(MarkAreaView),a.registerPreprocessor(function(s){checkMarkerInSeries(s.series,"markArea")&&(s.markArea=s.markArea||{})})}var getDefaultSelectorOptions=function(a,s){if(s==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(s==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.layoutMode={type:"box",ignoreSize:!0},l}return s.prototype.init=function(l,o,c){this.mergeDefaultAndTheme(l,c),l.selected=l.selected||{},this._updateSelector(l)},s.prototype.mergeOption=function(l,o){a.prototype.mergeOption.call(this,l,o),this._updateSelector(l)},s.prototype._updateSelector=function(l){var o=l.selector,c=this.ecModel;o===!0&&(o=l.selector=["all","inverse"]),isArray$3(o)&&each$f(o,function(u,d){isString$2(u)&&(u={type:u}),o[d]=merge(u,getDefaultSelectorOptions(c,u.type))})},s.prototype.optionUpdated=function(){this._updateData(this.ecModel);var l=this._data;if(l[0]&&this.get("selectedMode")==="single"){for(var o=!1,c=0;c<l.length;c++){var u=l[c].get("name");if(this.isSelected(u)){this.select(u),o=!0;break}}!o&&this.select(l[0].get("name"))}},s.prototype._updateData=function(l){var o=[],c=[];l.eachRawSeries(function(g){var y=g.name;c.push(y);var $;if(g.legendVisualProvider){var x=g.legendVisualProvider,N=x.getAllNames();l.isSeriesFiltered(g)||(c=c.concat(N)),N.length?o=o.concat(N):$=!0}else $=!0;$&&isNameSpecified(g)&&o.push(g.name)}),this._availableNames=c;var u=this.get("data")||o,d=createHashMap(),f=map$1(u,function(g){return(isString$2(g)||isNumber$2(g))&&(g={name:g}),d.get(g.name)?null:(d.set(g.name,!0),new Model(g,this,this.ecModel))},this);this._data=filter(f,function(g){return!!g})},s.prototype.getData=function(){return this._data},s.prototype.select=function(l){var o=this.option.selected,c=this.get("selectedMode");if(c==="single"){var u=this._data;each$f(u,function(d){o[d.get("name")]=!1})}o[l]=!0},s.prototype.unSelect=function(l){this.get("selectedMode")!=="single"&&(this.option.selected[l]=!1)},s.prototype.toggleSelected=function(l){var o=this.option.selected;o.hasOwnProperty(l)||(o[l]=!0),this[o[l]?"unSelect":"select"](l)},s.prototype.allSelect=function(){var l=this._data,o=this.option.selected;each$f(l,function(c){o[c.get("name",!0)]=!0})},s.prototype.inverseSelect=function(){var l=this._data,o=this.option.selected;each$f(l,function(c){var u=c.get("name",!0);o.hasOwnProperty(u)||(o[u]=!0),o[u]=!o[u]})},s.prototype.isSelected=function(l){var o=this.option.selected;return!(o.hasOwnProperty(l)&&!o[l])&&indexOf(this._availableNames,l)>=0},s.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},s.type="legend.plain",s.dependencies=["series"],s.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},s}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.newlineDisabled=!1,l}return s.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},s.prototype.getContentGroup=function(){return this._contentGroup},s.prototype.getSelectorGroup=function(){return this._selectorGroup},s.prototype.render=function(l,o,c){var u=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!l.get("show",!0)){var d=l.get("align"),f=l.get("orient");(!d||d==="auto")&&(d=l.get("left")==="right"&&f==="vertical"?"right":"left");var g=l.get("selector",!0),y=l.get("selectorPosition",!0);g&&(!y||y==="auto")&&(y=f==="horizontal"?"end":"start"),this.renderInner(d,l,o,c,g,f,y);var $=l.getBoxLayoutParams(),x={width:c.getWidth(),height:c.getHeight()},N=l.get("padding"),R=getLayoutRect($,x,N),j=this.layoutInner(l,d,R,u,g,y),ne=getLayoutRect(defaults({width:j.width,height:j.height},$),x,N);this.group.x=ne.x-j.x,this.group.y=ne.y-j.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(j,l))}},s.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},s.prototype.renderInner=function(l,o,c,u,d,f,g){var y=this.getContentGroup(),$=createHashMap(),x=o.get("selectedMode"),N=[];c.eachRawSeries(function(R){!R.get("legendHoverLink")&&N.push(R.id)}),each$3(o.getData(),function(R,j){var ne=R.get("name");if(!this.newlineDisabled&&(ne===""||ne===`
`)){var se=new Group$1;se.newline=!0,y.add(se);return}var ce=c.getSeriesByName(ne)[0];if(!$.get(ne))if(ce){var fe=ce.getData(),ea=fe.getVisual("legendLineStyle")||{},ta=fe.getVisual("legendIcon"),na=fe.getVisual("style"),aa=this._createItem(ce,ne,j,R,o,l,ea,na,ta,x,u);aa.on("click",curry(dispatchSelectAction,ne,null,u,N)).on("mouseover",curry(dispatchHighlightAction,ce.name,null,u,N)).on("mouseout",curry(dispatchDownplayAction,ce.name,null,u,N)),c.ssr&&aa.eachChild(function(ia){var sa=getECData(ia);sa.seriesIndex=ce.seriesIndex,sa.dataIndex=j,sa.ssrType="legend"}),$.set(ne,!0)}else c.eachRawSeries(function(ia){if(!$.get(ne)&&ia.legendVisualProvider){var sa=ia.legendVisualProvider;if(!sa.containName(ne))return;var ra=sa.indexOfName(ne),la=sa.getItemVisual(ra,"style"),oa=sa.getItemVisual(ra,"legendIcon"),ca=parse(la.fill);ca&&ca[3]===0&&(ca[3]=.2,la=extend(extend({},la),{fill:stringify(ca,"rgba")}));var pa=this._createItem(ia,ne,j,R,o,l,{},la,oa,x,u);pa.on("click",curry(dispatchSelectAction,null,ne,u,N)).on("mouseover",curry(dispatchHighlightAction,null,ne,u,N)).on("mouseout",curry(dispatchDownplayAction,null,ne,u,N)),c.ssr&&pa.eachChild(function(ua){var da=getECData(ua);da.seriesIndex=ia.seriesIndex,da.dataIndex=j,da.ssrType="legend"}),$.set(ne,!0)}},this)},this),d&&this._createSelector(d,o,u,f,g)},s.prototype._createSelector=function(l,o,c,u,d){var f=this.getSelectorGroup();each$3(l,function(y){var $=y.type,x=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){c.dispatchAction({type:$==="all"?"legendAllSelect":"legendInverseSelect"})}});f.add(x);var N=o.getModel("selectorLabel"),R=o.getModel(["emphasis","selectorLabel"]);setLabelStyle(x,{normal:N,emphasis:R},{defaultText:y.title}),enableHoverEmphasis(x)})},s.prototype._createItem=function(l,o,c,u,d,f,g,y,$,x,N){var R=l.visualDrawType,j=d.get("itemWidth"),ne=d.get("itemHeight"),se=d.isSelected(o),ce=u.get("symbolRotate"),fe=u.get("symbolKeepAspect"),ea=u.get("icon");$=ea||$||"roundRect";var ta=getLegendStyle($,u,g,y,R,se,N),na=new Group$1,aa=u.getModel("textStyle");if(isFunction$2(l.getLegendIcon)&&(!ea||ea==="inherit"))na.add(l.getLegendIcon({itemWidth:j,itemHeight:ne,icon:$,iconRotate:ce,itemStyle:ta.itemStyle,lineStyle:ta.lineStyle,symbolKeepAspect:fe}));else{var ia=ea==="inherit"&&l.getData().getVisual("symbol")?ce==="inherit"?l.getData().getVisual("symbolRotate"):ce:0;na.add(getDefaultLegendIcon({itemWidth:j,itemHeight:ne,icon:$,iconRotate:ia,itemStyle:ta.itemStyle,lineStyle:ta.lineStyle,symbolKeepAspect:fe}))}var sa=f==="left"?j+5:-5,ra=f,la=d.get("formatter"),oa=o;isString$2(la)&&la?oa=la.replace("{name}",o??""):isFunction$2(la)&&(oa=la(o));var ca=se?aa.getTextColor():u.get("inactiveColor");na.add(new ZRText({style:createTextStyle(aa,{text:oa,x:sa,y:ne/2,fill:ca,align:ra,verticalAlign:"middle"},{inheritColor:ca})}));var pa=new Rect$2({shape:na.getBoundingRect(),style:{fill:"transparent"}}),ua=u.getModel("tooltip");return ua.get("show")&&setTooltipConfig({el:pa,componentModel:d,itemName:o,itemTooltipOption:ua.option}),na.add(pa),na.eachChild(function(da){da.silent=!0}),pa.silent=!x,this.getContentGroup().add(na),enableHoverEmphasis(na),na.__legendDataIndex=c,na},s.prototype.layoutInner=function(l,o,c,u,d,f){var g=this.getContentGroup(),y=this.getSelectorGroup();box(l.get("orient"),g,l.get("itemGap"),c.width,c.height);var $=g.getBoundingRect(),x=[-$.x,-$.y];if(y.markRedraw(),g.markRedraw(),d){box("horizontal",y,l.get("selectorItemGap",!0));var N=y.getBoundingRect(),R=[-N.x,-N.y],j=l.get("selectorButtonGap",!0),ne=l.getOrient().index,se=ne===0?"width":"height",ce=ne===0?"height":"width",fe=ne===0?"y":"x";f==="end"?R[ne]+=$[se]+j:x[ne]+=N[se]+j,R[1-ne]+=$[ce]/2-N[ce]/2,y.x=R[0],y.y=R[1],g.x=x[0],g.y=x[1];var ea={x:0,y:0};return ea[se]=$[se]+j+N[se],ea[ce]=Math.max($[ce],N[ce]),ea[fe]=Math.min(0,N[fe]+R[1-ne]),ea}else return g.x=x[0],g.y=x[1],this.group.getBoundingRect()},s.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},s.type="legend.plain",s}(ComponentView);function getLegendStyle(a,s,l,o,c,u,d){function f(se,ce){se.lineWidth==="auto"&&(se.lineWidth=ce.lineWidth>0?2:0),each$3(se,function(fe,ea){se[ea]==="inherit"&&(se[ea]=ce[ea])})}var g=s.getModel("itemStyle"),y=g.getItemStyle(),$=a.lastIndexOf("empty",0)===0?"fill":"stroke",x=g.getShallow("decal");y.decal=!x||x==="inherit"?o.decal:createOrUpdatePatternFromDecal(x,d),y.fill==="inherit"&&(y.fill=o[c]),y.stroke==="inherit"&&(y.stroke=o[$]),y.opacity==="inherit"&&(y.opacity=(c==="fill"?o:l).opacity),f(y,o);var N=s.getModel("lineStyle"),R=N.getLineStyle();if(f(R,l),y.fill==="auto"&&(y.fill=o.fill),y.stroke==="auto"&&(y.stroke=o.fill),R.stroke==="auto"&&(R.stroke=o.fill),!u){var j=s.get("inactiveBorderWidth"),ne=y[$];y.lineWidth=j==="auto"?o.lineWidth>0&&ne?2:0:y.lineWidth,y.fill=s.get("inactiveColor"),y.stroke=s.get("inactiveBorderColor"),R.stroke=N.get("inactiveColor"),R.lineWidth=N.get("inactiveWidth")}return{itemStyle:y,lineStyle:R}}function getDefaultLegendIcon(a){var s=a.icon||"roundRect",l=createSymbol$1(s,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return l.setStyle(a.itemStyle),l.rotation=(a.iconRotate||0)*Math.PI/180,l.setOrigin([a.itemWidth/2,a.itemHeight/2]),s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l}function dispatchSelectAction(a,s,l,o){dispatchDownplayAction(a,s,l,o),l.dispatchAction({type:"legendToggleSelect",name:a??s}),dispatchHighlightAction(a,s,l,o)}function isUseHoverLayer(a){for(var s=a.getZr().storage.getDisplayList(),l,o=0,c=s.length;o<c&&!(l=s[o].states.emphasis);)o++;return l&&l.hoverLayer}function dispatchHighlightAction(a,s,l,o){isUseHoverLayer(l)||l.dispatchAction({type:"highlight",seriesName:a,name:s,excludeSeriesId:o})}function dispatchDownplayAction(a,s,l,o){isUseHoverLayer(l)||l.dispatchAction({type:"downplay",seriesName:a,name:s,excludeSeriesId:o})}function legendFilter(a){var s=a.findComponents({mainType:"legend"});s&&s.length&&a.filterSeries(function(l){for(var o=0;o<s.length;o++)if(!s[o].isSelected(l.name))return!1;return!0})}function legendSelectActionHandler(a,s,l){var o={},c=a==="toggleSelected",u;return l.eachComponent("legend",function(d){c&&u!=null?d[u?"select":"unSelect"](s.name):a==="allSelect"||a==="inverseSelect"?d[a]():(d[a](s.name),u=d.isSelected(s.name));var f=d.getData();each$f(f,function(g){var y=g.get("name");if(!(y===`
`||y==="")){var $=d.isSelected(y);o.hasOwnProperty(y)?o[y]=o[y]&&$:o[y]=$}})}),a==="allSelect"||a==="inverseSelect"?{selected:o}:{name:s.name,selected:o}}function installLegendAction(a){a.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),a.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),a.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$c(a){a.registerComponentModel(LegendModel),a.registerComponentView(LegendView),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),a.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(a)}var ScrollableLegendModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.setScrollDataIndex=function(l){this.option.scrollDataIndex=l},s.prototype.init=function(l,o,c){var u=getLayoutParams(l);a.prototype.init.call(this,l,o,c),mergeAndNormalizeLayoutParams(this,l,u)},s.prototype.mergeOption=function(l,o){a.prototype.mergeOption.call(this,l,o),mergeAndNormalizeLayoutParams(this,this.option,l)},s.type="legend.scroll",s.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),s}(LegendModel);function mergeAndNormalizeLayoutParams(a,s,l){var o=a.getOrient(),c=[1,1];c[o.index]=0,mergeLayoutParam(s,l,{type:"box",ignoreSize:!!c})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.newlineDisabled=!0,l._currentIndex=0,l}return s.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},s.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},s.prototype.renderInner=function(l,o,c,u,d,f,g){var y=this;a.prototype.renderInner.call(this,l,o,c,u,d,f,g);var $=this._controllerGroup,x=o.get("pageIconSize",!0),N=isArray$3(x)?x:[x,x];j("pagePrev",0);var R=o.getModel("pageTextStyle");$.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:R.getTextColor(),font:R.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),j("pageNext",1);function j(ne,se){var ce=ne+"DataIndex",fe=createIcon(o.get("pageIcons",!0)[o.getOrient().name][se],{onclick:bind$1(y._pageGo,y,ce,o,u)},{x:-N[0]/2,y:-N[1]/2,width:N[0],height:N[1]});fe.name=ne,$.add(fe)}},s.prototype.layoutInner=function(l,o,c,u,d,f){var g=this.getSelectorGroup(),y=l.getOrient().index,$=WH[y],x=XY[y],N=WH[1-y],R=XY[1-y];d&&box("horizontal",g,l.get("selectorItemGap",!0));var j=l.get("selectorButtonGap",!0),ne=g.getBoundingRect(),se=[-ne.x,-ne.y],ce=clone$4(c);d&&(ce[$]=c[$]-ne[$]-j);var fe=this._layoutContentAndController(l,u,ce,y,$,N,R,x);if(d){if(f==="end")se[y]+=fe[$]+j;else{var ea=ne[$]+j;se[y]-=ea,fe[x]-=ea}fe[$]+=ne[$]+j,se[1-y]+=fe[R]+fe[N]/2-ne[N]/2,fe[N]=Math.max(fe[N],ne[N]),fe[R]=Math.min(fe[R],ne[R]+se[1-y]),g.x=se[0],g.y=se[1],g.markRedraw()}return fe},s.prototype._layoutContentAndController=function(l,o,c,u,d,f,g,y){var $=this.getContentGroup(),x=this._containerGroup,N=this._controllerGroup;box(l.get("orient"),$,l.get("itemGap"),u?c.width:null,u?null:c.height),box("horizontal",N,l.get("pageButtonItemGap",!0));var R=$.getBoundingRect(),j=N.getBoundingRect(),ne=this._showController=R[d]>c[d],se=[-R.x,-R.y];o||(se[u]=$[y]);var ce=[0,0],fe=[-j.x,-j.y],ea=retrieve2(l.get("pageButtonGap",!0),l.get("itemGap",!0));if(ne){var ta=l.get("pageButtonPosition",!0);ta==="end"?fe[u]+=c[d]-j[d]:ce[u]+=j[d]+ea}fe[1-u]+=R[f]/2-j[f]/2,$.setPosition(se),x.setPosition(ce),N.setPosition(fe);var na={x:0,y:0};if(na[d]=ne?c[d]:R[d],na[f]=Math.max(R[f],j[f]),na[g]=Math.min(0,j[g]+fe[1-u]),x.__rectSize=c[d],ne){var aa={x:0,y:0};aa[d]=Math.max(c[d]-j[d]-ea,0),aa[f]=na[f],x.setClipPath(new Rect$2({shape:aa})),x.__rectSize=aa[d]}else N.eachChild(function(sa){sa.attr({invisible:!0,silent:!0})});var ia=this._getPageInfo(l);return ia.pageIndex!=null&&updateProps$1($,{x:ia.contentPosition[0],y:ia.contentPosition[1]},ne?l:null),this._updatePageInfoView(l,ia),na},s.prototype._pageGo=function(l,o,c){var u=this._getPageInfo(o)[l];u!=null&&c.dispatchAction({type:"legendScroll",scrollDataIndex:u,legendId:o.id})},s.prototype._updatePageInfoView=function(l,o){var c=this._controllerGroup;each$f(["pagePrev","pageNext"],function($){var x=$+"DataIndex",N=o[x]!=null,R=c.childOfName($);R&&(R.setStyle("fill",N?l.get("pageIconColor",!0):l.get("pageIconInactiveColor",!0)),R.cursor=N?"pointer":"default")});var u=c.childOfName("pageText"),d=l.get("pageFormatter"),f=o.pageIndex,g=f!=null?f+1:0,y=o.pageCount;u&&d&&u.setStyle("text",isString$2(d)?d.replace("{current}",g==null?"":g+"").replace("{total}",y==null?"":y+""):d({current:g,total:y}))},s.prototype._getPageInfo=function(l){var o=l.get("scrollDataIndex",!0),c=this.getContentGroup(),u=this._containerGroup.__rectSize,d=l.getOrient().index,f=WH[d],g=XY[d],y=this._findTargetItemIndex(o),$=c.children(),x=$[y],N=$.length,R=N?1:0,j={contentPosition:[c.x,c.y],pageCount:R,pageIndex:R-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!x)return j;var ne=ta(x);j.contentPosition[d]=-ne.s;for(var se=y+1,ce=ne,fe=ne,ea=null;se<=N;++se)ea=ta($[se]),(!ea&&fe.e>ce.s+u||ea&&!na(ea,ce.s))&&(fe.i>ce.i?ce=fe:ce=ea,ce&&(j.pageNextDataIndex==null&&(j.pageNextDataIndex=ce.i),++j.pageCount)),fe=ea;for(var se=y-1,ce=ne,fe=ne,ea=null;se>=-1;--se)ea=ta($[se]),(!ea||!na(fe,ea.s))&&ce.i<fe.i&&(fe=ce,j.pagePrevDataIndex==null&&(j.pagePrevDataIndex=ce.i),++j.pageCount,++j.pageIndex),ce=ea;return j;function ta(aa){if(aa){var ia=aa.getBoundingRect(),sa=ia[g]+aa[g];return{s:sa,e:sa+ia[f],i:aa.__legendDataIndex}}}function na(aa,ia){return aa.e>=ia&&aa.s<=ia+u}},s.prototype._findTargetItemIndex=function(l){if(!this._showController)return 0;var o,c=this.getContentGroup(),u;return c.eachChild(function(d,f){var g=d.__legendDataIndex;u==null&&g!=null&&(u=f),g===l&&(o=f)}),o??u},s.type="legend.scroll",s}(LegendView);function installScrollableLegendAction(a){a.registerAction("legendScroll","legendscroll",function(s,l){var o=s.scrollDataIndex;o!=null&&l.eachComponent({mainType:"legend",subType:"scroll",query:s},function(c){c.setScrollDataIndex(o)})})}function install$b(a){use(install$c),a.registerComponentModel(ScrollableLegendModel),a.registerComponentView(ScrollableLegendView),installScrollableLegendAction(a)}function install$a(a){use(install$c),use(install$b)}var InsideZoomModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="dataZoom.inside",s.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),s}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(a,s,l){inner$1(a).coordSysRecordMap.each(function(o){var c=o.dataZoomInfoMap.get(s.uid);c&&(c.getRange=l)})}function disposeCoordSysRecordIfNeeded(a,s){for(var l=inner$1(a).coordSysRecordMap,o=l.keys(),c=0;c<o.length;c++){var u=o[c],d=l.get(u),f=d.dataZoomInfoMap;if(f){var g=s.uid,y=f.get(g);y&&(f.removeKey(g),f.keys().length||disposeCoordSysRecord(l,d))}}}function disposeCoordSysRecord(a,s){if(s){a.removeKey(s.model.uid);var l=s.controller;l&&l.dispose()}}function createCoordSysRecord(a,s){var l={model:s,containsPoint:curry$1(containsPoint,s),dispatchAction:curry$1(dispatchAction,a),dataZoomInfoMap:null,controller:null},o=l.controller=new RoamController(a.getZr());return each$f(["pan","zoom","scrollMove"],function(c){o.on(c,function(u){var d=[];l.dataZoomInfoMap.each(function(f){if(u.isAvailableBehavior(f.model.option)){var g=(f.getRange||{})[c],y=g&&g(f.dzReferCoordSysInfo,l.model.mainType,l.controller,u);!f.model.get("disabled",!0)&&y&&d.push({dataZoomId:f.model.id,start:y[0],end:y[1]})}}),d.length&&l.dispatchAction(d)})}),l}function dispatchAction(a,s){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:s})}function containsPoint(a,s,l,o){return a.coordinateSystem.containPoint([l,o])}function mergeControllerParams(a){var s,l="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},c=!0;return a.each(function(u){var d=u.model,f=d.get("disabled",!0)?!1:d.get("zoomLock",!0)?"move":!0;o[l+f]>o[l+s]&&(s=f),c=c&&d.get("preventDefaultMouseMove",!0)}),{controlType:s,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!c}}}function installDataZoomRoamProcessor(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(s,l){var o=inner$1(l),c=o.coordSysRecordMap||(o.coordSysRecordMap=createHashMap());c.each(function(u){u.dataZoomInfoMap=null}),s.eachComponent({mainType:"dataZoom",subType:"inside"},function(u){var d=collectReferCoordSysModelInfo(u);each$f(d.infoList,function(f){var g=f.model.uid,y=c.get(g)||c.set(g,createCoordSysRecord(l,f.model)),$=y.dataZoomInfoMap||(y.dataZoomInfoMap=createHashMap());$.set(u.uid,{dzReferCoordSysInfo:f,model:u,getRange:null})})}),c.each(function(u){var d=u.controller,f,g=u.dataZoomInfoMap;if(g){var y=g.keys()[0];y!=null&&(f=g.get(y))}if(!f){disposeCoordSysRecord(c,u);return}var $=mergeControllerParams(g);d.enable($.controlType,$.opt),d.setPointerChecker(u.containsPoint),createOrUpdate(u,"dispatchAction",f.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="dataZoom.inside",l}return s.prototype.render=function(l,o,c){if(a.prototype.render.apply(this,arguments),l.noTarget()){this._clear();return}this.range=l.getPercentRange(),setViewInfoToCoordSysRecord(c,l,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},s.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},s.type="dataZoom.inside",s}(DataZoomView),getRangeHandlers={zoom:function(a,s,l,o){var c=this.range,u=c.slice(),d=a.axisModels[0];if(d){var f=getDirectionInfo[s](null,[o.originX,o.originY],d,l,a),g=(f.signal>0?f.pixelStart+f.pixelLength-f.pixel:f.pixel-f.pixelStart)/f.pixelLength*(u[1]-u[0])+u[0],y=Math.max(1/o.scale,0);u[0]=(u[0]-g)*y+g,u[1]=(u[1]-g)*y+g;var $=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,u,[0,100],0,$.minSpan,$.maxSpan),this.range=u,c[0]!==u[0]||c[1]!==u[1])return u}},pan:makeMover(function(a,s,l,o,c,u){var d=getDirectionInfo[o]([u.oldX,u.oldY],[u.newX,u.newY],s,c,l);return d.signal*(a[1]-a[0])*d.pixel/d.pixelLength}),scrollMove:makeMover(function(a,s,l,o,c,u){var d=getDirectionInfo[o]([0,0],[u.scrollDelta,u.scrollDelta],s,c,l);return d.signal*(a[1]-a[0])*u.scrollDelta})};function makeMover(a){return function(s,l,o,c){var u=this.range,d=u.slice(),f=s.axisModels[0];if(f){var g=a(d,f,s,l,o,c);if(sliderMove(g,d,[0,100],"all"),this.range=d,u[0]!==d[0]||u[1]!==d[1])return d}}}var getDirectionInfo={grid:function(a,s,l,o,c){var u=l.axis,d={},f=c.model.coordinateSystem.getRect();return a=a||[0,0],u.dim==="x"?(d.pixel=s[0]-a[0],d.pixelLength=f.width,d.pixelStart=f.x,d.signal=u.inverse?1:-1):(d.pixel=s[1]-a[1],d.pixelLength=f.height,d.pixelStart=f.y,d.signal=u.inverse?-1:1),d},polar:function(a,s,l,o,c){var u=l.axis,d={},f=c.model.coordinateSystem,g=f.getRadiusAxis().getExtent(),y=f.getAngleAxis().getExtent();return a=a?f.pointToCoord(a):[0,0],s=f.pointToCoord(s),l.mainType==="radiusAxis"?(d.pixel=s[0]-a[0],d.pixelLength=g[1]-g[0],d.pixelStart=g[0],d.signal=u.inverse?1:-1):(d.pixel=s[1]-a[1],d.pixelLength=y[1]-y[0],d.pixelStart=y[0],d.signal=u.inverse?-1:1),d},singleAxis:function(a,s,l,o,c){var u=l.axis,d=c.model.coordinateSystem.getRect(),f={};return a=a||[0,0],u.orient==="horizontal"?(f.pixel=s[0]-a[0],f.pixelLength=d.width,f.pixelStart=d.x,f.signal=u.inverse?1:-1):(f.pixel=s[1]-a[1],f.pixelLength=d.height,f.pixelStart=d.y,f.signal=u.inverse?-1:1),f}};function install$9(a){installCommon$1(a),a.registerComponentModel(InsideZoomModel),a.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(a)}var SliderZoomModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.type="dataZoom.slider",s.layoutMode="box",s.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),s}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._displayables={},l}return s.prototype.init=function(l,o){this.api=o,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},s.prototype.render=function(l,o,c,u){if(a.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",l.get("throttle"),"fixRate"),this._orient=l.getOrient(),l.get("show")===!1){this.group.removeAll();return}if(l.noTarget()){this._clear(),this.group.removeAll();return}(!u||u.type!=="dataZoom"||u.from!==this.uid)&&this._buildView(),this._updateView()},s.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},s.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var l=this.api.getZr();l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)},s.prototype._buildView=function(){var l=this.group;l.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var o=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),l.add(o),this._positionGroup()},s.prototype._resetLocation=function(){var l=this.dataZoomModel,o=this.api,c=l.get("brushSelect"),u=c?DEFAULT_MOVE_HANDLE_SIZE:0,d=this._findCoordRect(),f={width:o.getWidth(),height:o.getHeight()},g=this._orient===HORIZONTAL?{right:f.width-d.x-d.width,top:f.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-u,width:d.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:d.y,width:DEFAULT_FILLER_SIZE,height:d.height},y=getLayoutParams(l.option);each$f(["right","top","width","height"],function(x){y[x]==="ph"&&(y[x]=g[x])});var $=getLayoutRect(y,f);this._location={x:$.x,y:$.y},this._size=[$.width,$.height],this._orient===VERTICAL&&this._size.reverse()},s.prototype._positionGroup=function(){var l=this.group,o=this._location,c=this._orient,u=this.dataZoomModel.getFirstTargetAxisModel(),d=u&&u.get("inverse"),f=this._displayables.sliderGroup,g=(this._dataShadowInfo||{}).otherAxisInverse;f.attr(c===HORIZONTAL&&!d?{scaleY:g?1:-1,scaleX:1}:c===HORIZONTAL&&d?{scaleY:g?1:-1,scaleX:-1}:c===VERTICAL&&!d?{scaleY:g?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:g?-1:1,scaleX:-1,rotation:Math.PI/2});var y=l.getBoundingRect([f]);l.x=o.x-y.x,l.y=o.y-y.y,l.markRedraw()},s.prototype._getViewExtent=function(){return[0,this._size[0]]},s.prototype._renderBackground=function(){var l=this.dataZoomModel,o=this._size,c=this._displayables.sliderGroup,u=l.get("brushSelect");c.add(new Rect({silent:!0,shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:l.get("backgroundColor")},z2:-40}));var d=new Rect({shape:{x:0,y:0,width:o[0],height:o[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),f=this.api.getZr();u?(d.on("mousedown",this._onBrushStart,this),d.cursor="crosshair",f.on("mousemove",this._onBrush),f.on("mouseup",this._onBrushEnd)):(f.off("mousemove",this._onBrush),f.off("mouseup",this._onBrushEnd)),c.add(d)},s.prototype._renderDataShadow=function(){var l=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!l)return;var o=this._size,c=this._shadowSize||[],u=l.series,d=u.getRawData(),f=u.getShadowDim&&u.getShadowDim(),g=f&&d.getDimensionInfo(f)?u.getShadowDim():l.otherDim;if(g==null)return;var y=this._shadowPolygonPts,$=this._shadowPolylinePts;if(d!==this._shadowData||g!==this._shadowDim||o[0]!==c[0]||o[1]!==c[1]){var x=d.getDataExtent(g),N=(x[1]-x[0])*.3;x=[x[0]-N,x[1]+N];var R=[0,o[1]],j=[0,o[0]],ne=[[o[0],0],[0,0]],se=[],ce=j[1]/(d.count()-1),fe=0,ea=Math.round(d.count()/o[0]),ta;d.each([g],function(ra,la){if(ea>0&&la%ea){fe+=ce;return}var oa=ra==null||isNaN(ra)||ra==="",ca=oa?0:linearMap$2(ra,x,R,!0);oa&&!ta&&la?(ne.push([ne[ne.length-1][0],0]),se.push([se[se.length-1][0],0])):!oa&&ta&&(ne.push([fe,0]),se.push([fe,0])),ne.push([fe,ca]),se.push([fe,ca]),fe+=ce,ta=oa}),y=this._shadowPolygonPts=ne,$=this._shadowPolylinePts=se}this._shadowData=d,this._shadowDim=g,this._shadowSize=[o[0],o[1]];var na=this.dataZoomModel;function aa(ra){var la=na.getModel(ra?"selectedDataBackground":"dataBackground"),oa=new Group$3,ca=new Polygon({shape:{points:y},segmentIgnoreThreshold:1,style:la.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),pa=new Polyline$1({shape:{points:$},segmentIgnoreThreshold:1,style:la.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return oa.add(ca),oa.add(pa),oa}for(var ia=0;ia<3;ia++){var sa=aa(ia===1);this._displayables.sliderGroup.add(sa),this._displayables.dataShadowSegs.push(sa)}},s.prototype._prepareDataShadowInfo=function(){var l=this.dataZoomModel,o=l.get("showDataShadow");if(o!==!1){var c,u=this.ecModel;return l.eachTargetAxis(function(d,f){var g=l.getAxisProxy(d,f).getTargetSeriesModels();each$f(g,function(y){if(!c&&!(o!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,y.get("type"))<0)){var $=u.getComponent(getAxisMainType(d),f).axis,x=getOtherDim(d),N,R=y.coordinateSystem;x!=null&&R.getOtherAxis&&(N=R.getOtherAxis($).inverse),x=y.getData().mapDimension(x),c={thisAxis:$,series:y,thisDim:d,otherDim:x,otherAxisInverse:N}}},this)},this),c}},s.prototype._renderHandle=function(){var l=this.group,o=this._displayables,c=o.handles=[null,null],u=o.handleLabels=[null,null],d=this._displayables.sliderGroup,f=this._size,g=this.dataZoomModel,y=this.api,$=g.get("borderRadius")||0,x=g.get("brushSelect"),N=o.filler=new Rect({silent:x,style:{fill:g.get("fillerColor")},textConfig:{position:"inside"}});d.add(N),d.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:f[0],height:f[1],r:$},style:{stroke:g.get("dataBackgroundColor")||g.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(ea){var ta=g.get("handleIcon");!symbolBuildProxies[ta]&&ta.indexOf("path://")<0&&ta.indexOf("image://")<0&&(ta="path://"+ta);var na=createSymbol$1(ta,-1,0,2,2,null,!0);na.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,ea),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var aa=na.getBoundingRect(),ia=g.get("handleSize");this._handleHeight=parsePercent(ia,this._size[1]),this._handleWidth=aa.width/aa.height*this._handleHeight,na.setStyle(g.getModel("handleStyle").getItemStyle()),na.style.strokeNoScale=!0,na.rectHover=!0,na.ensureState("emphasis").style=g.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(na);var sa=g.get("handleColor");sa!=null&&(na.style.fill=sa),d.add(c[ea]=na);var ra=g.getModel("textStyle");l.add(u[ea]=new ZRText({silent:!0,invisible:!0,style:createTextStyle(ra,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:ra.getTextColor(),font:ra.getFont()}),z2:10}))},this);var R=N;if(x){var j=parsePercent(g.get("moveHandleSize"),f[1]),ne=o.moveHandle=new Rect$2({style:g.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:f[1]-.5,height:j}}),se=j*.8,ce=o.moveHandleIcon=createSymbol$1(g.get("moveHandleIcon"),-se/2,-se/2,se,se,"#fff",!0);ce.silent=!0,ce.y=f[1]+j/2-.5,ne.ensureState("emphasis").style=g.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var fe=Math.min(f[1]/2,Math.max(j,10));R=o.moveZone=new Rect$2({invisible:!0,shape:{y:f[1]-fe,height:j+fe}}),R.on("mouseover",function(){y.enterEmphasis(ne)}).on("mouseout",function(){y.leaveEmphasis(ne)}),d.add(ne),d.add(ce),d.add(R)}R.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},s.prototype._resetInterval=function(){var l=this._range=this.dataZoomModel.getPercentRange(),o=this._getViewExtent();this._handleEnds=[linearMap$2(l[0],[0,100],o,!0),linearMap$2(l[1],[0,100],o,!0)]},s.prototype._updateInterval=function(l,o){var c=this.dataZoomModel,u=this._handleEnds,d=this._getViewExtent(),f=c.findRepresentativeAxisProxy().getMinMaxSpan(),g=[0,100];sliderMove(o,u,d,c.get("zoomLock")?"all":l,f.minSpan!=null?linearMap$2(f.minSpan,g,d,!0):null,f.maxSpan!=null?linearMap$2(f.maxSpan,g,d,!0):null);var y=this._range,$=this._range=asc$2([linearMap$2(u[0],d,g,!0),linearMap$2(u[1],d,g,!0)]);return!y||y[0]!==$[0]||y[1]!==$[1]},s.prototype._updateView=function(l){var o=this._displayables,c=this._handleEnds,u=asc$2(c.slice()),d=this._size;each$f([0,1],function(R){var j=o.handles[R],ne=this._handleHeight;j.attr({scaleX:ne/2,scaleY:ne/2,x:c[R]+(R?-1:1),y:d[1]/2-ne/2})},this),o.filler.setShape({x:u[0],y:0,width:u[1]-u[0],height:d[1]});var f={x:u[0],width:u[1]-u[0]};o.moveHandle&&(o.moveHandle.setShape(f),o.moveZone.setShape(f),o.moveZone.getBoundingRect(),o.moveHandleIcon&&o.moveHandleIcon.attr("x",f.x+f.width/2));for(var g=o.dataShadowSegs,y=[0,u[0],u[1],d[0]],$=0;$<g.length;$++){var x=g[$],N=x.getClipPath();N||(N=new Rect$2,x.setClipPath(N)),N.setShape({x:y[$],y:0,width:y[$+1]-y[$],height:d[1]})}this._updateDataInfo(l)},s.prototype._updateDataInfo=function(l){var o=this.dataZoomModel,c=this._displayables,u=c.handleLabels,d=this._orient,f=["",""];if(o.get("showDetail")){var g=o.findRepresentativeAxisProxy();if(g){var y=g.getAxisModel().axis,$=this._range,x=l?g.calculateDataWindow({start:$[0],end:$[1]}).valueWindow:g.getDataValueWindow();f=[this._formatLabel(x[0],y),this._formatLabel(x[1],y)]}}var N=asc$2(this._handleEnds.slice());R.call(this,0),R.call(this,1);function R(j){var ne=getTransform$1(c.handles[j].parent,this.group),se=transformDirection(j===0?"right":"left",ne),ce=this._handleWidth/2+LABEL_GAP,fe=applyTransform([N[j]+(j===0?-ce:ce),this._size[1]/2],ne);u[j].setStyle({x:fe[0],y:fe[1],verticalAlign:d===HORIZONTAL?"middle":se,align:d===HORIZONTAL?se:"center",text:f[j]})}},s.prototype._formatLabel=function(l,o){var c=this.dataZoomModel,u=c.get("labelFormatter"),d=c.get("labelPrecision");(d==null||d==="auto")&&(d=o.getPixelPrecision());var f=l==null||isNaN(l)?"":o.type==="category"||o.type==="time"?o.scale.getLabel({value:Math.round(l)}):l.toFixed(Math.min(d,20));return isFunction$2(u)?u(l,f):isString$2(u)?u.replace("{value}",f):f},s.prototype._showDataInfo=function(l){l=this._dragging||l;var o=this._displayables,c=o.handleLabels;c[0].attr("invisible",!l),c[1].attr("invisible",!l),o.moveHandle&&this.api[l?"enterEmphasis":"leaveEmphasis"](o.moveHandle,1)},s.prototype._onDragMove=function(l,o,c,u){this._dragging=!0,stop(u.event);var d=this._displayables.sliderGroup.getLocalTransform(),f=applyTransform([o,c],d,!0),g=this._updateInterval(l,f[0]),y=this.dataZoomModel.get("realtime");this._updateView(!y),g&&y&&this._dispatchZoomAction(!0)},s.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var l=this.dataZoomModel.get("realtime");!l&&this._dispatchZoomAction(!1)},s.prototype._onClickPanel=function(l){var o=this._size,c=this._displayables.sliderGroup.transformCoordToLocal(l.offsetX,l.offsetY);if(!(c[0]<0||c[0]>o[0]||c[1]<0||c[1]>o[1])){var u=this._handleEnds,d=(u[0]+u[1])/2,f=this._updateInterval("all",c[0]-d);this._updateView(),f&&this._dispatchZoomAction(!1)}},s.prototype._onBrushStart=function(l){var o=l.offsetX,c=l.offsetY;this._brushStart=new Point(o,c),this._brushing=!0,this._brushStartTime=+new Date},s.prototype._onBrushEnd=function(l){if(this._brushing){var o=this._displayables.brushRect;if(this._brushing=!1,!!o){o.attr("ignore",!0);var c=o.shape,u=+new Date;if(!(u-this._brushStartTime<200&&Math.abs(c.width)<5)){var d=this._getViewExtent(),f=[0,100];this._range=asc$2([linearMap$2(c.x,d,f,!0),linearMap$2(c.x+c.width,d,f,!0)]),this._handleEnds=[c.x,c.x+c.width],this._updateView(),this._dispatchZoomAction(!1)}}}},s.prototype._onBrush=function(l){this._brushing&&(stop(l.event),this._updateBrushRect(l.offsetX,l.offsetY))},s.prototype._updateBrushRect=function(l,o){var c=this._displayables,u=this.dataZoomModel,d=c.brushRect;d||(d=c.brushRect=new Rect({silent:!0,style:u.getModel("brushStyle").getItemStyle()}),c.sliderGroup.add(d)),d.attr("ignore",!1);var f=this._brushStart,g=this._displayables.sliderGroup,y=g.transformCoordToLocal(l,o),$=g.transformCoordToLocal(f.x,f.y),x=this._size;y[0]=Math.max(Math.min(x[0],y[0]),0),d.setShape({x:$[0],y:0,width:y[0]-$[0],height:x[1]})},s.prototype._dispatchZoomAction=function(l){var o=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:l?REALTIME_ANIMATION_CONFIG:null,start:o[0],end:o[1]})},s.prototype._findCoordRect=function(){var l,o=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!l&&o.length){var c=o[0].model.coordinateSystem;l=c.getRect&&c.getRect()}if(!l){var u=this.api.getWidth(),d=this.api.getHeight();l={x:u*.2,y:d*.2,width:u*.6,height:d*.6}}return l},s.type="dataZoom.slider",s}(DataZoomView);function getOtherDim(a){var s={x:"y",y:"x",radius:"angle",angle:"radius"};return s[a]}function getCursor$1(a){return a==="vertical"?"ns-resize":"ew-resize"}function install$8(a){a.registerComponentModel(SliderZoomModel),a.registerComponentView(SliderZoomView),installCommon$1(a)}function install$7(a){use(install$9),use(install$8)}var visualDefault={get:function(a,s,l){var o=clone$4((defaultOption[a]||{})[s]);return l&&isArray$3(o)?o[o.length-1]:o}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray$2=isArray$3,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.stateList=["inRange","outOfRange"],l.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],l.layoutMode={type:"box",ignoreSize:!0},l.dataBound=[-1/0,1/0],l.targetVisuals={},l.controllerVisuals={},l}return s.prototype.init=function(l,o,c){this.mergeDefaultAndTheme(l,c)},s.prototype.optionUpdated=function(l,o){var c=this.option;!o&&replaceVisualOption(c,l,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},s.prototype.resetVisual=function(l){var o=this.stateList;l=bind$1(l,this),this.controllerVisuals=createVisualMappings(this.option.controller,o,l),this.targetVisuals=createVisualMappings(this.option.target,o,l)},s.prototype.getItemSymbol=function(){return null},s.prototype.getTargetSeriesIndices=function(){var l=this.option.seriesIndex,o=[];return l==null||l==="all"?this.ecModel.eachSeries(function(c,u){o.push(u)}):o=normalizeToArray(l),o},s.prototype.eachTargetSeries=function(l,o){each$f(this.getTargetSeriesIndices(),function(c){var u=this.ecModel.getSeriesByIndex(c);u&&l.call(o,u)},this)},s.prototype.isTargetSeries=function(l){var o=!1;return this.eachTargetSeries(function(c){c===l&&(o=!0)}),o},s.prototype.formatValueText=function(l,o,c){var u=this.option,d=u.precision,f=this.dataBound,g=u.formatter,y;c=c||["<",">"],isArray$3(l)&&(l=l.slice(),y=!0);var $=o?l:y?[x(l[0]),x(l[1])]:x(l);if(isString$2(g))return g.replace("{value}",y?$[0]:$).replace("{value2}",y?$[1]:$);if(isFunction$2(g))return y?g(l[0],l[1]):g(l);if(y)return l[0]===f[0]?c[0]+" "+$[1]:l[1]===f[1]?c[1]+" "+$[0]:$[0]+" - "+$[1];return $;function x(N){return N===f[0]?"min":N===f[1]?"max":(+N).toFixed(Math.min(d,20))}},s.prototype.resetExtent=function(){var l=this.option,o=asc([l.min,l.max]);this._dataExtent=o},s.prototype.getDataDimensionIndex=function(l){var o=this.option.dimension;if(o!=null)return l.getDimensionIndex(o);for(var c=l.dimensions,u=c.length-1;u>=0;u--){var d=c[u],f=l.getDimensionInfo(d);if(!f.isCalculationCoord)return f.storeDimIndex}},s.prototype.getExtent=function(){return this._dataExtent.slice()},s.prototype.completeVisualOption=function(){var l=this.ecModel,o=this.option,c={inRange:o.inRange,outOfRange:o.outOfRange},u=o.target||(o.target={}),d=o.controller||(o.controller={});merge(u,c),merge(d,c);var f=this.isCategory();g.call(this,u),g.call(this,d),y.call(this,u,"inRange","outOfRange"),$.call(this,d);function g(x){isArray$2(o.color)&&!x.inRange&&(x.inRange={color:o.color.slice().reverse()}),x.inRange=x.inRange||{color:l.get("gradientColor")}}function y(x,N,R){var j=x[N],ne=x[R];j&&!ne&&(ne=x[R]={},each$2(j,function(se,ce){if(VisualMapping.isValidType(ce)){var fe=visualDefault.get(ce,"inactive",f);fe!=null&&(ne[ce]=fe,ce==="color"&&!ne.hasOwnProperty("opacity")&&!ne.hasOwnProperty("colorAlpha")&&(ne.opacity=[0,0]))}}))}function $(x){var N=(x.inRange||{}).symbol||(x.outOfRange||{}).symbol,R=(x.inRange||{}).symbolSize||(x.outOfRange||{}).symbolSize,j=this.get("inactiveColor"),ne=this.getItemSymbol(),se=ne||"roundRect";each$2(this.stateList,function(ce){var fe=this.itemSize,ea=x[ce];ea||(ea=x[ce]={color:f?j:[j]}),ea.symbol==null&&(ea.symbol=N&&clone$4(N)||(f?se:[se])),ea.symbolSize==null&&(ea.symbolSize=R&&clone$4(R)||(f?fe[0]:[fe[0],fe[0]])),ea.symbol=mapVisual(ea.symbol,function(aa){return aa==="none"?se:aa});var ta=ea.symbolSize;if(ta!=null){var na=-1/0;eachVisual(ta,function(aa){aa>na&&(na=aa)}),ea.symbolSize=mapVisual(ta,function(aa){return linearMap$1(aa,[0,na],[0,fe[0]],!0)})}},this)}},s.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},s.prototype.isCategory=function(){return!!this.option.categories},s.prototype.setSelected=function(l){},s.prototype.getSelected=function(){return null},s.prototype.getValueState=function(l){return null},s.prototype.getVisualMeta=function(l){return null},s.type="visualMap",s.dependencies=["series"],s.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},s}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.optionUpdated=function(l,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(c){c.mappingMethod="linear",c.dataExtent=this.getExtent()}),this._resetRange()},s.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var l=this.itemSize;(l[0]==null||isNaN(l[0]))&&(l[0]=DEFAULT_BAR_BOUND[0]),(l[1]==null||isNaN(l[1]))&&(l[1]=DEFAULT_BAR_BOUND[1])},s.prototype._resetRange=function(){var l=this.getExtent(),o=this.option.range;!o||o.auto?(l.auto=1,this.option.range=l):isArray$3(o)&&(o[0]>o[1]&&o.reverse(),o[0]=Math.max(o[0],l[0]),o[1]=Math.min(o[1],l[1]))},s.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(l){var o=this.option.controller[l].symbolSize;o&&o[0]!==o[1]&&(o[0]=o[1]/3)},this)},s.prototype.setSelected=function(l){this.option.range=l.slice(),this._resetRange()},s.prototype.getSelected=function(){var l=this.getExtent(),o=asc$2((this.get("range")||[]).slice());return o[0]>l[1]&&(o[0]=l[1]),o[1]>l[1]&&(o[1]=l[1]),o[0]<l[0]&&(o[0]=l[0]),o[1]<l[0]&&(o[1]=l[0]),o},s.prototype.getValueState=function(l){var o=this.option.range,c=this.getExtent();return(o[0]<=c[0]||o[0]<=l)&&(o[1]>=c[1]||l<=o[1])?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(l){var o=[];return this.eachTargetSeries(function(c){var u=[],d=c.getData();d.each(this.getDataDimensionIndex(d),function(f,g){l[0]<=f&&f<=l[1]&&u.push(g)},this),o.push({seriesId:c.id,dataIndex:u})},this),o},s.prototype.getVisualMeta=function(l){var o=getColorStopValues(this,"outOfRange",this.getExtent()),c=getColorStopValues(this,"inRange",this.option.range.slice()),u=[];function d(R,j){u.push({value:R,color:l(R,j)})}for(var f=0,g=0,y=c.length,$=o.length;g<$&&(!c.length||o[g]<=c[0]);g++)o[g]<c[f]&&d(o[g],"outOfRange");for(var x=1;f<y;f++,x=0)x&&u.length&&d(c[f],"outOfRange"),d(c[f],"inRange");for(var x=1;g<$;g++)(!c.length||c[c.length-1]<o[g])&&(x&&(u.length&&d(u[u.length-1].value,"outOfRange"),x=0),d(o[g],"outOfRange"));var N=u.length;return{stops:u,outerColors:[N?u[0].color:"transparent",N?u[N-1].color:"transparent"]}},s.type="visualMap.continuous",s.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),s}(VisualMapModel);function getColorStopValues(a,s,l){if(l[0]===l[1])return l.slice();for(var o=200,c=(l[1]-l[0])/o,u=l[0],d=[],f=0;f<=o&&u<l[1];f++)d.push(u),u+=c;return d.push(l[1]),d}var VisualMapView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l.autoPositionValues={left:1,right:1,top:1,bottom:1},l}return s.prototype.init=function(l,o){this.ecModel=l,this.api=o},s.prototype.render=function(l,o,c,u){if(this.visualMapModel=l,l.get("show")===!1){this.group.removeAll();return}this.doRender(l,o,c,u)},s.prototype.renderBackground=function(l){var o=this.visualMapModel,c=normalizeCssArray(o.get("padding")||0),u=l.getBoundingRect();l.add(new Rect$2({z2:-1,silent:!0,shape:{x:u.x-c[3],y:u.y-c[0],width:u.width+c[3]+c[1],height:u.height+c[0]+c[2]},style:{fill:o.get("backgroundColor"),stroke:o.get("borderColor"),lineWidth:o.get("borderWidth")}}))},s.prototype.getControllerVisual=function(l,o,c){c=c||{};var u=c.forceState,d=this.visualMapModel,f={};if(o==="color"){var g=d.get("contentColor");f.color=g}function y(R){return f[R]}function $(R,j){f[R]=j}var x=d.controllerVisuals[u||d.getValueState(l)],N=VisualMapping.prepareVisualTypes(x);return each$f(N,function(R){var j=x[R];c.convertOpacityToAlpha&&R==="opacity"&&(R="colorAlpha",j=x.__alphaForOpacity),VisualMapping.dependsOn(R,o)&&j&&j.applyVisual(l,y,$)}),f[o]},s.prototype.positionGroup=function(l){var o=this.visualMapModel,c=this.api;positionElement(l,o.getBoxLayoutParams(),{width:c.getWidth(),height:c.getHeight()})},s.prototype.doRender=function(l,o,c,u){},s.type="visualMap",s}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(a,s,l){var o=a.option,c=o.align;if(c!=null&&c!=="auto")return c;for(var u={width:s.getWidth(),height:s.getHeight()},d=o.orient==="horizontal"?1:0,f=paramsSet[d],g=[0,null,10],y={},$=0;$<3;$++)y[paramsSet[1-d][$]]=g[$],y[f[$]]=$===2?l[0]:o[f[$]];var x=[["x","width",3],["y","height",0]][d],N=getLayoutRect(y,u,o.padding);return f[(N.margin[x[2]]||0)+N[x[0]]+N[x[1]]*.5<u[x[1]]*.5?0:1]}function makeHighDownBatch(a,s){return each$f(a||[],function(l){l.dataIndex!=null&&(l.dataIndexInside=l.dataIndex,l.dataIndex=null),l.highlightKey="visualMap"+(s?s.componentIndex:"")}),a}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._shapes={},l._dataInterval=[],l._handleEnds=[],l._hoverLinkDataIndices=[],l}return s.prototype.init=function(l,o){a.prototype.init.call(this,l,o),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},s.prototype.doRender=function(l,o,c,u){(!u||u.type!=="selectDataRange"||u.from!==this.uid)&&this._buildView()},s.prototype._buildView=function(){this.group.removeAll();var l=this.visualMapModel,o=this.group;this._orient=l.get("orient"),this._useHandle=l.get("calculable"),this._resetInterval(),this._renderBar(o);var c=l.get("text");this._renderEndsText(o,c,0),this._renderEndsText(o,c,1),this._updateView(!0),this.renderBackground(o),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(o)},s.prototype._renderEndsText=function(l,o,c){if(o){var u=o[1-c];u=u!=null?u+"":"";var d=this.visualMapModel,f=d.get("textGap"),g=d.itemSize,y=this._shapes.mainGroup,$=this._applyTransform([g[0]/2,c===0?-f:g[1]+f],y),x=this._applyTransform(c===0?"bottom":"top",y),N=this._orient,R=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle(R,{x:$[0],y:$[1],verticalAlign:N==="horizontal"?"middle":x,align:N==="horizontal"?x:"center",text:u})}))}},s.prototype._renderBar=function(l){var o=this.visualMapModel,c=this._shapes,u=o.itemSize,d=this._orient,f=this._useHandle,g=getItemAlign(o,this.api,u),y=c.mainGroup=this._createBarGroup(g),$=new Group$3;y.add($),$.add(c.outOfRange=createPolygon()),$.add(c.inRange=createPolygon(null,f?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),$.setClipPath(new Rect$2({shape:{x:0,y:0,width:u[0],height:u[1],r:3}}));var x=o.textStyleModel.getTextRect("国"),N=mathMax(x.width,x.height);f&&(c.handleThumbs=[],c.handleLabels=[],c.handleLabelPoints=[],this._createHandle(o,y,0,u,N,d),this._createHandle(o,y,1,u,N,d)),this._createIndicator(o,y,u,N,d),l.add(y)},s.prototype._createHandle=function(l,o,c,u,d,f){var g=bind$1(this._dragHandle,this,c,!1),y=bind$1(this._dragHandle,this,c,!0),$=parsePercent$1(l.get("handleSize"),u[0]),x=createSymbol$1(l.get("handleIcon"),-$/2,-$/2,$,$,null,!0),N=getCursor(this._orient);x.attr({cursor:N,draggable:!0,drift:g,ondragend:y,onmousemove:function(ce){stop(ce.event)}}),x.x=u[0]/2,x.useStyle(l.getModel("handleStyle").getItemStyle()),x.setStyle({strokeNoScale:!0,strokeFirst:!0}),x.style.lineWidth*=2,x.ensureState("emphasis").style=l.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(x,!0),o.add(x);var R=this.visualMapModel.textStyleModel,j=new ZRText({cursor:N,draggable:!0,drift:g,onmousemove:function(ce){stop(ce.event)},ondragend:y,style:createTextStyle(R,{x:0,y:0,text:""})});j.ensureState("blur").style={opacity:.1},j.stateTransition={duration:200},this.group.add(j);var ne=[$,0],se=this._shapes;se.handleThumbs[c]=x,se.handleLabelPoints[c]=ne,se.handleLabels[c]=j},s.prototype._createIndicator=function(l,o,c,u,d){var f=parsePercent$1(l.get("indicatorSize"),c[0]),g=createSymbol$1(l.get("indicatorIcon"),-f/2,-f/2,f,f,null,!0);g.attr({cursor:"move",invisible:!0,silent:!0,x:c[0]/2});var y=l.getModel("indicatorStyle").getItemStyle();if(g instanceof ZRImage){var $=g.style;g.useStyle(extend({image:$.image,x:$.x,y:$.y,width:$.width,height:$.height},y))}else g.useStyle(y);o.add(g);var x=this.visualMapModel.textStyleModel,N=new ZRText({silent:!0,invisible:!0,style:createTextStyle(x,{x:0,y:0,text:""})});this.group.add(N);var R=[(d==="horizontal"?u/2:HOVER_LINK_OUT)+c[0]/2,0],j=this._shapes;j.indicator=g,j.indicatorLabel=N,j.indicatorLabelPoint=R,this._firstShowIndicator=!0},s.prototype._dragHandle=function(l,o,c,u){if(this._useHandle){if(this._dragging=!o,!o){var d=this._applyTransform([c,u],this._shapes.mainGroup,!0);this._updateInterval(l,d[1]),this._hideIndicator(),this._updateView()}o===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),o?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[l],!1)}},s.prototype._resetInterval=function(){var l=this.visualMapModel,o=this._dataInterval=l.getSelected(),c=l.getExtent(),u=[0,l.itemSize[1]];this._handleEnds=[linearMap(o[0],c,u,!0),linearMap(o[1],c,u,!0)]},s.prototype._updateInterval=function(l,o){o=o||0;var c=this.visualMapModel,u=this._handleEnds,d=[0,c.itemSize[1]];sliderMove(o,u,d,l,0);var f=c.getExtent();this._dataInterval=[linearMap(u[0],d,f,!0),linearMap(u[1],d,f,!0)]},s.prototype._updateView=function(l){var o=this.visualMapModel,c=o.getExtent(),u=this._shapes,d=[0,o.itemSize[1]],f=l?d:this._handleEnds,g=this._createBarVisual(this._dataInterval,c,f,"inRange"),y=this._createBarVisual(c,c,d,"outOfRange");u.inRange.setStyle({fill:g.barColor}).setShape("points",g.barPoints),u.outOfRange.setStyle({fill:y.barColor}).setShape("points",y.barPoints),this._updateHandle(f,g)},s.prototype._createBarVisual=function(l,o,c,u){var d={forceState:u,convertOpacityToAlpha:!0},f=this._makeColorGradient(l,d),g=[this.getControllerVisual(l[0],"symbolSize",d),this.getControllerVisual(l[1],"symbolSize",d)],y=this._createBarPoints(c,g);return{barColor:new LinearGradient(0,0,0,1,f),barPoints:y,handlesColor:[f[0].color,f[f.length-1].color]}},s.prototype._makeColorGradient=function(l,o){var c=100,u=[],d=(l[1]-l[0])/c;u.push({color:this.getControllerVisual(l[0],"color",o),offset:0});for(var f=1;f<c;f++){var g=l[0]+d*f;if(g>l[1])break;u.push({color:this.getControllerVisual(g,"color",o),offset:f/c})}return u.push({color:this.getControllerVisual(l[1],"color",o),offset:1}),u},s.prototype._createBarPoints=function(l,o){var c=this.visualMapModel.itemSize;return[[c[0]-o[0],l[0]],[c[0],l[0]],[c[0],l[1]],[c[0]-o[1],l[1]]]},s.prototype._createBarGroup=function(l){var o=this._orient,c=this.visualMapModel.get("inverse");return new Group$3(o==="horizontal"&&!c?{scaleX:l==="bottom"?1:-1,rotation:Math.PI/2}:o==="horizontal"&&c?{scaleX:l==="bottom"?-1:1,rotation:-Math.PI/2}:o==="vertical"&&!c?{scaleX:l==="left"?1:-1,scaleY:-1}:{scaleX:l==="left"?1:-1})},s.prototype._updateHandle=function(l,o){if(this._useHandle){var c=this._shapes,u=this.visualMapModel,d=c.handleThumbs,f=c.handleLabels,g=u.itemSize,y=u.getExtent();each$1([0,1],function($){var x=d[$];x.setStyle("fill",o.handlesColor[$]),x.y=l[$];var N=linearMap(l[$],[0,g[1]],y,!0),R=this.getControllerVisual(N,"symbolSize");x.scaleX=x.scaleY=R/g[0],x.x=g[0]-R/2;var j=applyTransform(c.handleLabelPoints[$],getTransform$1(x,this.group));f[$].setStyle({x:j[0],y:j[1],text:u.formatValueText(this._dataInterval[$]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",c.mainGroup):"center"})},this)}},s.prototype._showIndicator=function(l,o,c,u){var d=this.visualMapModel,f=d.getExtent(),g=d.itemSize,y=[0,g[1]],$=this._shapes,x=$.indicator;if(x){x.attr("invisible",!1);var N={convertOpacityToAlpha:!0},R=this.getControllerVisual(l,"color",N),j=this.getControllerVisual(l,"symbolSize"),ne=linearMap(l,f,y,!0),se=g[0]-j/2,ce={x:x.x,y:x.y};x.y=ne,x.x=se;var fe=applyTransform($.indicatorLabelPoint,getTransform$1(x,this.group)),ea=$.indicatorLabel;ea.attr("invisible",!1);var ta=this._applyTransform("left",$.mainGroup),na=this._orient,aa=na==="horizontal";ea.setStyle({text:(c||"")+d.formatValueText(o),verticalAlign:aa?ta:"middle",align:aa?"center":ta});var ia={x:se,y:ne,style:{fill:R}},sa={style:{x:fe[0],y:fe[1]}};if(d.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var ra={duration:100,easing:"cubicInOut",additive:!0};x.x=ce.x,x.y=ce.y,x.animateTo(ia,ra),ea.animateTo(sa,ra)}else x.attr(ia),ea.attr(sa);this._firstShowIndicator=!1;var la=this._shapes.handleLabels;if(la)for(var oa=0;oa<la.length;oa++)this.api.enterBlur(la[oa])}},s.prototype._enableHoverLinkToSeries=function(){var l=this;this._shapes.mainGroup.on("mousemove",function(o){if(l._hovering=!0,!l._dragging){var c=l.visualMapModel.itemSize,u=l._applyTransform([o.offsetX,o.offsetY],l._shapes.mainGroup,!0,!0);u[1]=mathMin(mathMax(0,u[1]),c[1]),l._doHoverLinkToSeries(u[1],0<=u[0]&&u[0]<=c[0])}}).on("mouseout",function(){l._hovering=!1,!l._dragging&&l._clearHoverLinkToSeries()})},s.prototype._enableHoverLinkFromSeries=function(){var l=this.api.getZr();this.visualMapModel.option.hoverLink?(l.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),l.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},s.prototype._doHoverLinkToSeries=function(l,o){var c=this.visualMapModel,u=c.itemSize;if(c.option.hoverLink){var d=[0,u[1]],f=c.getExtent();l=mathMin(mathMax(d[0],l),d[1]);var g=getHalfHoverLinkSize(c,f,d),y=[l-g,l+g],$=linearMap(l,d,f,!0),x=[linearMap(y[0],d,f,!0),linearMap(y[1],d,f,!0)];y[0]<d[0]&&(x[0]=-1/0),y[1]>d[1]&&(x[1]=1/0),o&&(x[0]===-1/0?this._showIndicator($,x[1],"< ",g):x[1]===1/0?this._showIndicator($,x[0],"> ",g):this._showIndicator($,$,"≈ ",g));var N=this._hoverLinkDataIndices,R=[];(o||useHoverLinkOnHandle(c))&&(R=this._hoverLinkDataIndices=c.findTargetDataIndices(x));var j=compressBatches(N,R);this._dispatchHighDown("downplay",makeHighDownBatch(j[0],c)),this._dispatchHighDown("highlight",makeHighDownBatch(j[1],c))}},s.prototype._hoverLinkFromSeriesMouseOver=function(l){var o;if(findEventDispatcher(l.target,function(g){var y=getECData(g);if(y.dataIndex!=null)return o=y,!0},!0),!!o){var c=this.ecModel.getSeriesByIndex(o.seriesIndex),u=this.visualMapModel;if(u.isTargetSeries(c)){var d=c.getData(o.dataType),f=d.getStore().get(u.getDataDimensionIndex(d),o.dataIndex);isNaN(f)||this._showIndicator(f,f)}}},s.prototype._hideIndicator=function(){var l=this._shapes;l.indicator&&l.indicator.attr("invisible",!0),l.indicatorLabel&&l.indicatorLabel.attr("invisible",!0);var o=this._shapes.handleLabels;if(o)for(var c=0;c<o.length;c++)this.api.leaveBlur(o[c])},s.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var l=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(l,this.visualMapModel)),l.length=0},s.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var l=this.api.getZr();l.off("mouseover",this._hoverLinkFromSeriesMouseOver),l.off("mouseout",this._hideIndicator)},s.prototype._applyTransform=function(l,o,c,u){var d=getTransform$1(o,u?null:this.group);return isArray$3(l)?applyTransform(l,d,c):transformDirection(l,d,c)},s.prototype._dispatchHighDown=function(l,o){o&&o.length&&this.api.dispatchAction({type:l,batch:o})},s.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},s.type="visualMap.continuous",s}(VisualMapView);function createPolygon(a,s,l,o){return new Polygon({shape:{points:a},draggable:!!l,cursor:s,drift:l,onmousemove:function(c){stop(c.event)},ondragend:o})}function getHalfHoverLinkSize(a,s,l){var o=HOVER_LINK_SIZE/2,c=a.get("hoverLinkDataSize");return c&&(o=linearMap(c,s,l,!0)/2),o}function useHoverLinkOnHandle(a){var s=a.get("hoverLinkOnHandle");return!!(s??a.get("realtime"))}function getCursor(a){return a==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(a,s){s.eachComponent({mainType:"visualMap",query:a},function(l){l.setSelected(a.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(a,s){var l=[];return s.eachComponent("visualMap",function(o){var c=a.pipelineContext;!o.isTargetSeries(a)||c&&c.large||l.push(incrementalApplyVisual(o.stateList,o.targetVisuals,bind$1(o.getValueState,o),o.getDataDimensionIndex(a.getData())))}),l}},{createOnAllSeries:!0,reset:function(a,s){var l=a.getData(),o=[];s.eachComponent("visualMap",function(c){if(c.isTargetSeries(a)){var u=c.getVisualMeta(bind$1(getColorVisual,null,a,c))||{stops:[],outerColors:[]},d=c.getDataDimensionIndex(l);d>=0&&(u.dimension=d,o.push(u))}}),a.getData().setVisual("visualMeta",o)}}];function getColorVisual(a,s,l,o){for(var c=s.targetVisuals[o],u=VisualMapping.prepareVisualTypes(c),d={color:getVisualFromData(a.getData(),"color")},f=0,g=u.length;f<g;f++){var y=u[f],$=c[y==="opacity"?"__alphaForOpacity":y];$&&$.applyVisual(l,x,N)}return d.color;function x(R){return d[R]}function N(R,j){d[R]=j}}var each=each$f;function visualMapPreprocessor(a){var s=a&&a.visualMap;isArray$3(s)||(s=s?[s]:[]),each(s,function(l){if(l){has(l,"splitList")&&!has(l,"pieces")&&(l.pieces=l.splitList,delete l.splitList);var o=l.pieces;o&&isArray$3(o)&&each(o,function(c){isObject$5(c)&&(has(c,"start")&&!has(c,"min")&&(c.min=c.start),has(c,"end")&&!has(c,"max")&&(c.max=c.end))})}})}function has(a,s){return a&&a.hasOwnProperty&&a.hasOwnProperty(s)}var installed=!1;function installCommon(a){installed||(installed=!0,a.registerSubTypeDefaulter("visualMap",function(s){return!s.categories&&(!(s.pieces?s.pieces.length>0:s.splitNumber>0)||s.calculable)?"continuous":"piecewise"}),a.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(s){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,s)}),a.registerPreprocessor(visualMapPreprocessor))}function install$6(a){a.registerComponentModel(ContinuousModel),a.registerComponentView(ContinuousView),installCommon(a)}var PiecewiseModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l._pieceList=[],l}return s.prototype.optionUpdated=function(l,o){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var c=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(l,o);var u=this.option.categories;this.resetVisual(function(d,f){c==="categories"?(d.mappingMethod="category",d.categories=clone$4(u)):(d.dataExtent=this.getExtent(),d.mappingMethod="piecewise",d.pieceList=map$1(this._pieceList,function(g){return g=clone$4(g),f!=="inRange"&&(g.visual=null),g}))})},s.prototype.completeVisualOption=function(){var l=this.option,o={},c=VisualMapping.listVisualTypes(),u=this.isCategory();each$f(l.pieces,function(f){each$f(c,function(g){f.hasOwnProperty(g)&&(o[g]=1)})}),each$f(o,function(f,g){var y=!1;each$f(this.stateList,function($){y=y||d(l,$,g)||d(l.target,$,g)},this),!y&&each$f(this.stateList,function($){(l[$]||(l[$]={}))[g]=visualDefault.get(g,$==="inRange"?"active":"inactive",u)})},this);function d(f,g,y){return f&&f[g]&&f[g].hasOwnProperty(y)}a.prototype.completeVisualOption.apply(this,arguments)},s.prototype._resetSelected=function(l,o){var c=this.option,u=this._pieceList,d=(o?c:l).selected||{};if(c.selected=d,each$f(u,function(g,y){var $=this.getSelectedMapKey(g);d.hasOwnProperty($)||(d[$]=!0)},this),c.selectedMode==="single"){var f=!1;each$f(u,function(g,y){var $=this.getSelectedMapKey(g);d[$]&&(f?d[$]=!1:f=!0)},this)}},s.prototype.getItemSymbol=function(){return this.get("itemSymbol")},s.prototype.getSelectedMapKey=function(l){return this._mode==="categories"?l.value+"":l.index+""},s.prototype.getPieceList=function(){return this._pieceList},s.prototype._determineMode=function(){var l=this.option;return l.pieces&&l.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},s.prototype.setSelected=function(l){this.option.selected=clone$4(l)},s.prototype.getValueState=function(l){var o=VisualMapping.findPieceIndex(l,this._pieceList);return o!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[o])]?"inRange":"outOfRange"},s.prototype.findTargetDataIndices=function(l){var o=[],c=this._pieceList;return this.eachTargetSeries(function(u){var d=[],f=u.getData();f.each(this.getDataDimensionIndex(f),function(g,y){var $=VisualMapping.findPieceIndex(g,c);$===l&&d.push(y)},this),o.push({seriesId:u.id,dataIndex:d})},this),o},s.prototype.getRepresentValue=function(l){var o;if(this.isCategory())o=l.value;else if(l.value!=null)o=l.value;else{var c=l.interval||[];o=c[0]===-1/0&&c[1]===1/0?0:(c[0]+c[1])/2}return o},s.prototype.getVisualMeta=function(l){if(this.isCategory())return;var o=[],c=["",""],u=this;function d($,x){var N=u.getRepresentValue({interval:$});x||(x=u.getValueState(N));var R=l(N,x);$[0]===-1/0?c[0]=R:$[1]===1/0?c[1]=R:o.push({value:$[0],color:R},{value:$[1],color:R})}var f=this._pieceList.slice();if(!f.length)f.push({interval:[-1/0,1/0]});else{var g=f[0].interval[0];g!==-1/0&&f.unshift({interval:[-1/0,g]}),g=f[f.length-1].interval[1],g!==1/0&&f.push({interval:[g,1/0]})}var y=-1/0;return each$f(f,function($){var x=$.interval;x&&(x[0]>y&&d([y,x[0]],"outOfRange"),d(x.slice()),y=x[1])},this),{stops:o,outerColors:c}},s.type="visualMap.piecewise",s.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),s}(VisualMapModel),resetMethods={splitNumber:function(a){var s=this.option,l=Math.min(s.precision,20),o=this.getExtent(),c=s.splitNumber;c=Math.max(parseInt(c,10),1),s.splitNumber=c;for(var u=(o[1]-o[0])/c;+u.toFixed(l)!==u&&l<5;)l++;s.precision=l,u=+u.toFixed(l),s.minOpen&&a.push({interval:[-1/0,o[0]],close:[0,0]});for(var d=0,f=o[0];d<c;f+=u,d++){var g=d===c-1?o[1]:f+u;a.push({interval:[f,g],close:[1,1]})}s.maxOpen&&a.push({interval:[o[1],1/0],close:[0,0]}),reformIntervals(a),each$f(a,function(y,$){y.index=$,y.text=this.formatValueText(y.interval)},this)},categories:function(a){var s=this.option;each$f(s.categories,function(l){a.push({text:this.formatValueText(l,!0),value:l})},this),normalizeReverse(s,a)},pieces:function(a){var s=this.option;each$f(s.pieces,function(l,o){isObject$5(l)||(l={value:l});var c={text:"",index:o};if(l.label!=null&&(c.text=l.label),l.hasOwnProperty("value")){var u=c.value=l.value;c.interval=[u,u],c.close=[1,1]}else{for(var d=c.interval=[],f=c.close=[0,0],g=[1,0,1],y=[-1/0,1/0],$=[],x=0;x<2;x++){for(var N=[["gte","gt","min"],["lte","lt","max"]][x],R=0;R<3&&d[x]==null;R++)d[x]=l[N[R]],f[x]=g[R],$[x]=R===2;d[x]==null&&(d[x]=y[x])}$[0]&&d[1]===1/0&&(f[0]=0),$[1]&&d[0]===-1/0&&(f[1]=0),d[0]===d[1]&&f[0]&&f[1]&&(c.value=d[0])}c.visual=VisualMapping.retrieveVisuals(l),a.push(c)},this),normalizeReverse(s,a),reformIntervals(a),each$f(a,function(l){var o=l.close,c=[["<","≤"][o[1]],[">","≥"][o[0]]];l.text=l.text||this.formatValueText(l.value!=null?l.value:l.interval,!1,c)},this)}};function normalizeReverse(a,s){var l=a.inverse;(a.orient==="vertical"?!l:l)&&s.reverse()}var PiecewiseVisualMapView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type=s.type,l}return s.prototype.doRender=function(){var l=this.group;l.removeAll();var o=this.visualMapModel,c=o.get("textGap"),u=o.textStyleModel,d=u.getFont(),f=u.getTextColor(),g=this._getItemAlign(),y=o.itemSize,$=this._getViewData(),x=$.endsText,N=retrieve(o.get("showLabel",!0),!x);x&&this._renderEndsText(l,x[0],y,N,g),each$f($.viewPieceList,function(R){var j=R.piece,ne=new Group$3;ne.onclick=bind$1(this._onItemClick,this,j),this._enableHoverLink(ne,R.indexInModelPieceList);var se=o.getRepresentValue(j);if(this._createItemSymbol(ne,se,[0,0,y[0],y[1]]),N){var ce=this.visualMapModel.getValueState(se);ne.add(new ZRText({style:{x:g==="right"?-c:y[0]+c,y:y[1]/2,text:j.text,verticalAlign:"middle",align:g,font:d,fill:f,opacity:ce==="outOfRange"?.5:1}}))}l.add(ne)},this),x&&this._renderEndsText(l,x[1],y,N,g),box(o.get("orient"),l,o.get("itemGap")),this.renderBackground(l),this.positionGroup(l)},s.prototype._enableHoverLink=function(l,o){var c=this;l.on("mouseover",function(){return u("highlight")}).on("mouseout",function(){return u("downplay")});var u=function(d){var f=c.visualMapModel;f.option.hoverLink&&c.api.dispatchAction({type:d,batch:makeHighDownBatch(f.findTargetDataIndices(o),f)})}},s.prototype._getItemAlign=function(){var l=this.visualMapModel,o=l.option;if(o.orient==="vertical")return getItemAlign(l,this.api,l.itemSize);var c=o.align;return(!c||c==="auto")&&(c="left"),c},s.prototype._renderEndsText=function(l,o,c,u,d){if(o){var f=new Group$3,g=this.visualMapModel.textStyleModel;f.add(new ZRText({style:createTextStyle(g,{x:u?d==="right"?c[0]:0:c[0]/2,y:c[1]/2,verticalAlign:"middle",align:u?d:"center",text:o})})),l.add(f)}},s.prototype._getViewData=function(){var l=this.visualMapModel,o=map$1(l.getPieceList(),function(f,g){return{piece:f,indexInModelPieceList:g}}),c=l.get("text"),u=l.get("orient"),d=l.get("inverse");return(u==="horizontal"?d:!d)?o.reverse():c&&(c=c.slice().reverse()),{viewPieceList:o,endsText:c}},s.prototype._createItemSymbol=function(l,o,c){l.add(createSymbol$1(this.getControllerVisual(o,"symbol"),c[0],c[1],c[2],c[3],this.getControllerVisual(o,"color")))},s.prototype._onItemClick=function(l){var o=this.visualMapModel,c=o.option,u=c.selectedMode;if(u){var d=clone$4(c.selected),f=o.getSelectedMapKey(l);u==="single"||u===!0?(d[f]=!0,each$f(d,function(g,y){d[y]=y===f})):d[f]=!d[f],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:d})}},s.type="visualMap.piecewise",s}(VisualMapView);function install$5(a){a.registerComponentModel(PiecewiseModel),a.registerComponentView(PiecewiseVisualMapView),installCommon(a)}function install$4(a){use(install$6),use(install$5)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(a,s){var l=a.getModel("aria");if(!l.get("enabled"))return;var o=clone$4(DEFAULT_OPTION);merge(o.label,a.getLocaleModel().get("aria"),!1),merge(l.option,o,!1),c(),u();function c(){var y=l.getModel("decal"),$=y.get("show");if($){var x=createHashMap();a.eachSeries(function(N){if(!N.isColorBySeries()){var R=x.get(N.type);R||(R={},x.set(N.type,R)),inner(N).scope=R}}),a.eachRawSeries(function(N){if(a.isSeriesFiltered(N))return;if(isFunction$2(N.enableAriaDecal)){N.enableAriaDecal();return}var R=N.getData();if(N.isColorBySeries()){var fe=getDecalFromPalette(N.ecModel,N.name,decalPaletteScope,a.getSeriesCount()),ea=R.getVisual("decal");R.setVisual("decal",ta(ea,fe))}else{var j=N.getRawData(),ne={},se=inner(N).scope;R.each(function(na){var aa=R.getRawIndex(na);ne[aa]=na});var ce=j.count();j.each(function(na){var aa=ne[na],ia=j.getName(na)||na+"",sa=getDecalFromPalette(N.ecModel,ia,se,ce),ra=R.getItemVisual(aa,"decal");R.setItemVisual(aa,"decal",ta(ra,sa))})}function ta(na,aa){var ia=na?extend(extend({},aa),na):aa;return ia.dirty=!0,ia}})}}function u(){var y=s.getZr().dom;if(y){var $=a.getLocaleModel().get("aria"),x=l.getModel("label");if(x.option=defaults(x.option,$),!!x.get("enabled")){if(x.get("description")){y.setAttribute("aria-label",x.get("description"));return}var N=a.getSeriesCount(),R=x.get(["data","maxCount"])||10,j=x.get(["series","maxCount"])||10,ne=Math.min(N,j),se;if(!(N<1)){var ce=f();if(ce){var fe=x.get(["general","withTitle"]);se=d(fe,{title:ce})}else se=x.get(["general","withoutTitle"]);var ea=[],ta=N>1?x.get(["series","multiple","prefix"]):x.get(["series","single","prefix"]);se+=d(ta,{seriesCount:N}),a.eachSeries(function(sa,ra){if(ra<ne){var la=void 0,oa=sa.get("name"),ca=oa?"withName":"withoutName";la=N>1?x.get(["series","multiple",ca]):x.get(["series","single",ca]),la=d(la,{seriesId:sa.seriesIndex,seriesName:sa.get("name"),seriesType:g(sa.subType)});var pa=sa.getData();if(pa.count()>R){var ua=x.get(["data","partialData"]);la+=d(ua,{displayCnt:R})}else la+=x.get(["data","allData"]);for(var da=x.get(["data","separator","middle"]),ha=x.get(["data","separator","end"]),ga=[],fa=0;fa<pa.count();fa++)if(fa<R){var ma=pa.getName(fa),va=pa.getValues(fa),ka=x.get(["data",ma?"withName":"withoutName"]);ga.push(d(ka,{name:ma,value:va.join(da)}))}la+=ga.join(da)+ha,ea.push(la)}});var na=x.getModel(["series","multiple","separator"]),aa=na.get("middle"),ia=na.get("end");se+=ea.join(aa)+ia,y.setAttribute("aria-label",se)}}}}function d(y,$){if(!isString$2(y))return y;var x=y;return each$f($,function(N,R){x=x.replace(new RegExp("\\{\\s*"+R+"\\s*\\}","g"),N)}),x}function f(){var y=a.get("title");return y&&y.length&&(y=y[0]),y&&y.text}function g(y){var $=a.getLocaleModel().get(["series","typeNames"]);return $[y]||$.chart}}function ariaPreprocessor(a){if(!(!a||!a.aria)){var s=a.aria;s.show!=null&&(s.enabled=s.show),s.label=s.label||{},each$f(["description","general","series","data"],function(l){s[l]!=null&&(s.label[l]=s[l])})}}function install$3(a){a.registerPreprocessor(ariaPreprocessor),a.registerVisual(a.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function a(s){var l=this._condVal=isString$2(s)?new RegExp(s):isRegExp(s)?s:null;if(l==null){var o="";throwError(o)}}return a.prototype.evaluate=function(s){var l=typeof s;return isString$2(l)?this._condVal.test(s):isNumber$2(l)?this._condVal.test(s+""):!1},a}(),ConstConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),AndConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var s=this.children,l=0;l<s.length;l++)if(!s[l].evaluate())return!1;return!0},a}(),OrConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var s=this.children,l=0;l<s.length;l++)if(s[l].evaluate())return!0;return!1},a}(),NotConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),RelationalConditionInternal=function(){function a(){}return a.prototype.evaluate=function(){for(var s=!!this.valueParser,l=this.getValue,o=l(this.valueGetterParam),c=s?this.valueParser(o):null,u=0;u<this.subCondList.length;u++)if(!this.subCondList[u].evaluate(s?c:o))return!1;return!0},a}();function parseOption(a,s){if(a===!0||a===!1){var l=new ConstConditionInternal;return l.value=a,l}var o="";return isObjectNotArray(a)||throwError(o),a.and?parseAndOrOption("and",a,s):a.or?parseAndOrOption("or",a,s):a.not?parseNotOption(a,s):parseRelationalOption(a,s)}function parseAndOrOption(a,s,l){var o=s[a],c="";isArray$3(o)||throwError(c),o.length||throwError(c);var u=a==="and"?new AndConditionInternal:new OrConditionInternal;return u.children=map$1(o,function(d){return parseOption(d,l)}),u.children.length||throwError(c),u}function parseNotOption(a,s){var l=a.not,o="";isObjectNotArray(l)||throwError(o);var c=new NotConditionInternal;return c.child=parseOption(l,s),c.child||throwError(o),c}function parseRelationalOption(a,s){for(var l="",o=s.prepareGetValue(a),c=[],u=keys(a),d=a.parser,f=d?getRawValueParser(d):null,g=0;g<u.length;g++){var y=u[g];if(!(y==="parser"||s.valueGetterAttrMap.get(y))){var $=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,y)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[y]:y,x=a[y],N=f?f(x):x,R=createFilterComparator($,N)||$==="reg"&&new RegExpEvaluator(N);R||throwError(l),c.push(R)}}c.length||throwError(l);var j=new RelationalConditionInternal;return j.valueGetterParam=o,j.valueParser=f,j.getValue=s.getValue,j.subCondList=c,j}function isObjectNotArray(a){return isObject$5(a)&&!isArrayLike(a)}var ConditionalExpressionParsed=function(){function a(s,l){this._cond=parseOption(s,l)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function parseConditionalExpression(a,s){return new ConditionalExpressionParsed(a,s)}var filterTransform={type:"echarts:filter",transform:function(a){for(var s=a.upstream,l,o=parseConditionalExpression(a.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(f){var g="",y=f.dimension;hasOwn(f,"dimension")||throwError(g);var $=s.getDimensionInfo(y);return $||throwError(g),{dimIdx:$.index}},getValue:function(f){return s.retrieveValueFromItem(l,f.dimIdx)}}),c=[],u=0,d=s.count();u<d;u++)l=s.getRawDataItem(u),o.evaluate()&&c.push(l);return{data:c}}},sortTransform={type:"echarts:sort",transform:function(a){var s=a.upstream,l=a.config,o="",c=normalizeToArray(l);c.length||throwError(o);var u=[];each$f(c,function($){var x=$.dimension,N=$.order,R=$.parser,j=$.incomparable;if(x==null&&throwError(o),N!=="asc"&&N!=="desc"&&throwError(o),j&&j!=="min"&&j!=="max"){var ne="";throwError(ne)}if(N!=="asc"&&N!=="desc"){var se="";throwError(se)}var ce=s.getDimensionInfo(x);ce||throwError(o);var fe=R?getRawValueParser(R):null;R&&!fe&&throwError(o),u.push({dimIdx:ce.index,parser:fe,comparator:new SortOrderComparator(N,j)})});var d=s.sourceFormat;d!==SOURCE_FORMAT_ARRAY_ROWS&&d!==SOURCE_FORMAT_OBJECT_ROWS&&throwError(o);for(var f=[],g=0,y=s.count();g<y;g++)f.push(s.getRawDataItem(g));return f.sort(function($,x){for(var N=0;N<u.length;N++){var R=u[N],j=s.retrieveValueFromItem($,R.dimIdx),ne=s.retrieveValueFromItem(x,R.dimIdx);R.parser&&(j=R.parser(j),ne=R.parser(ne));var se=R.comparator.evaluate(j,ne);if(se!==0)return se}return 0}),{data:f}}};function install$2(a){a.registerTransform(filterTransform),a.registerTransform(sortTransform)}var DatasetModel=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="dataset",l}return s.prototype.init=function(l,o,c){a.prototype.init.call(this,l,o,c),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},s.prototype.mergeOption=function(l,o){a.prototype.mergeOption.call(this,l,o),disableTransformOptionMerge(this)},s.prototype.optionUpdated=function(){this._sourceManager.dirty()},s.prototype.getSourceManager=function(){return this._sourceManager},s.type="dataset",s.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},s}(ComponentModel),DatasetView=function(a){__extends(s,a);function s(){var l=a!==null&&a.apply(this,arguments)||this;return l.type="dataset",l}return s.type="dataset",s}(ComponentView);function install$1(a){a.registerComponentModel(DatasetModel),a.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(a,s){return Math.abs(a-s)<1e-5}function pathToBezierCurves(a){var s=a.data,l=a.len(),o=[],c,u=0,d=0,f=0,g=0;function y(pa,ua){c&&c.length>2&&o.push(c),c=[pa,ua]}function $(pa,ua,da,ha){aroundEqual(pa,da)&&aroundEqual(ua,ha)||c.push(pa,ua,da,ha,da,ha)}function x(pa,ua,da,ha,ga,fa){var ma=Math.abs(ua-pa),va=Math.tan(ma/4)*4/3,ka=ua<pa?-1:1,ya=Math.cos(pa),ba=Math.sin(pa),Ea=Math.cos(ua),Ca=Math.sin(ua),$a=ya*ga+da,Pa=ba*fa+ha,Da=Ea*ga+da,Ta=Ca*fa+ha,Ba=ga*va*ka,wa=fa*va*ka;c.push($a-Ba*ba,Pa+wa*ya,Da+Ba*Ca,Ta-wa*Ea,Da,Ta)}for(var N,R,j,ne,se=0;se<l;){var ce=s[se++],fe=se===1;switch(fe&&(u=s[se],d=s[se+1],f=u,g=d,(ce===CMD.L||ce===CMD.C||ce===CMD.Q)&&(c=[f,g])),ce){case CMD.M:u=f=s[se++],d=g=s[se++],y(f,g);break;case CMD.L:N=s[se++],R=s[se++],$(u,d,N,R),u=N,d=R;break;case CMD.C:c.push(s[se++],s[se++],s[se++],s[se++],u=s[se++],d=s[se++]);break;case CMD.Q:N=s[se++],R=s[se++],j=s[se++],ne=s[se++],c.push(u+2/3*(N-u),d+2/3*(R-d),j+2/3*(N-j),ne+2/3*(R-ne),j,ne),u=j,d=ne;break;case CMD.A:var ea=s[se++],ta=s[se++],na=s[se++],aa=s[se++],ia=s[se++],sa=s[se++]+ia;se+=1;var ra=!s[se++];N=Math.cos(ia)*na+ea,R=Math.sin(ia)*aa+ta,fe?(f=N,g=R,y(f,g)):$(u,d,N,R),u=Math.cos(sa)*na+ea,d=Math.sin(sa)*aa+ta;for(var la=(ra?-1:1)*Math.PI/2,oa=ia;ra?oa>sa:oa<sa;oa+=la){var ca=ra?Math.max(oa+la,sa):Math.min(oa+la,sa);x(oa,ca,ea,ta,na,aa)}break;case CMD.R:f=u=s[se++],g=d=s[se++],N=f+s[se++],R=g+s[se++],y(N,g),$(N,g,N,R),$(N,R,f,R),$(f,R,f,g),$(f,g,N,g);break;case CMD.Z:c&&$(u,d,f,g),u=f,d=g;break}}return c&&c.length>2&&o.push(c),o}function adpativeBezier(a,s,l,o,c,u,d,f,g,y){if(aroundEqual(a,l)&&aroundEqual(s,o)&&aroundEqual(c,d)&&aroundEqual(u,f)){g.push(d,f);return}var $=2/y,x=$*$,N=d-a,R=f-s,j=Math.sqrt(N*N+R*R);N/=j,R/=j;var ne=l-a,se=o-s,ce=c-d,fe=u-f,ea=ne*ne+se*se,ta=ce*ce+fe*fe;if(ea<x&&ta<x){g.push(d,f);return}var na=N*ne+R*se,aa=-N*ce-R*fe,ia=ea-na*na,sa=ta-aa*aa;if(ia<x&&na>=0&&sa<x&&aa>=0){g.push(d,f);return}var ra=[],la=[];cubicSubdivide(a,l,c,d,.5,ra),cubicSubdivide(s,o,u,f,.5,la),adpativeBezier(ra[0],la[0],ra[1],la[1],ra[2],la[2],ra[3],la[3],g,y),adpativeBezier(ra[4],la[4],ra[5],la[5],ra[6],la[6],ra[7],la[7],g,y)}function pathToPolygons(a,s){var l=pathToBezierCurves(a),o=[];s=s||1;for(var c=0;c<l.length;c++){var u=l[c],d=[],f=u[0],g=u[1];d.push(f,g);for(var y=2;y<u.length;){var $=u[y++],x=u[y++],N=u[y++],R=u[y++],j=u[y++],ne=u[y++];adpativeBezier(f,g,$,x,N,R,j,ne,d,s),f=j,g=ne}o.push(d)}return o}function getDividingGrids(a,s,l){var o=a[s],c=a[1-s],u=Math.abs(o/c),d=Math.ceil(Math.sqrt(u*l)),f=Math.floor(l/d);f===0&&(f=1,d=l);for(var g=[],y=0;y<d;y++)g.push(f);var $=d*f,x=l-$;if(x>0)for(var y=0;y<x;y++)g[y%d]+=1;return g}function divideSector(a,s,l){for(var o=a.r0,c=a.r,u=a.startAngle,d=a.endAngle,f=Math.abs(d-u),g=f*c,y=c-o,$=g>Math.abs(y),x=getDividingGrids([g,y],$?0:1,s),N=($?f:y)/x.length,R=0;R<x.length;R++)for(var j=($?y:f)/x[R],ne=0;ne<x[R];ne++){var se={};$?(se.startAngle=u+N*R,se.endAngle=u+N*(R+1),se.r0=o+j*ne,se.r=o+j*(ne+1)):(se.startAngle=u+j*ne,se.endAngle=u+j*(ne+1),se.r0=o+N*R,se.r=o+N*(R+1)),se.clockwise=a.clockwise,se.cx=a.cx,se.cy=a.cy,l.push(se)}}function divideRect(a,s,l){for(var o=a.width,c=a.height,u=o>c,d=getDividingGrids([o,c],u?0:1,s),f=u?"width":"height",g=u?"height":"width",y=u?"x":"y",$=u?"y":"x",x=a[f]/d.length,N=0;N<d.length;N++)for(var R=a[g]/d[N],j=0;j<d[N];j++){var ne={};ne[y]=N*x,ne[$]=j*R,ne[f]=x,ne[g]=R,ne.x+=a.x,ne.y+=a.y,l.push(ne)}}function crossProduct2d(a,s,l,o){return a*o-l*s}function lineLineIntersect(a,s,l,o,c,u,d,f){var g=l-a,y=o-s,$=d-c,x=f-u,N=crossProduct2d($,x,g,y);if(Math.abs(N)<1e-6)return null;var R=a-c,j=s-u,ne=crossProduct2d(R,j,$,x)/N;return ne<0||ne>1?null:new Point(ne*g+a,ne*y+s)}function projPtOnLine(a,s,l){var o=new Point;Point.sub(o,l,s),o.normalize();var c=new Point;Point.sub(c,a,s);var u=c.dot(o);return u}function addToPoly(a,s){var l=a[a.length-1];l&&l[0]===s[0]&&l[1]===s[1]||a.push(s)}function splitPolygonByLine(a,s,l){for(var o=a.length,c=[],u=0;u<o;u++){var d=a[u],f=a[(u+1)%o],g=lineLineIntersect(d[0],d[1],f[0],f[1],s.x,s.y,l.x,l.y);g&&c.push({projPt:projPtOnLine(g,s,l),pt:g,idx:u})}if(c.length<2)return[{points:a},{points:a}];c.sort(function(se,ce){return se.projPt-ce.projPt});var y=c[0],$=c[c.length-1];if($.idx<y.idx){var x=y;y=$,$=x}for(var N=[y.pt.x,y.pt.y],R=[$.pt.x,$.pt.y],j=[N],ne=[R],u=y.idx+1;u<=$.idx;u++)addToPoly(j,a[u].slice());addToPoly(j,R),addToPoly(j,N);for(var u=$.idx+1;u<=y.idx+o;u++)addToPoly(ne,a[u%o].slice());return addToPoly(ne,N),addToPoly(ne,R),[{points:j},{points:ne}]}function binaryDividePolygon(a){var s=a.points,l=[],o=[];fromPoints(s,l,o);var c=new BoundingRect(l[0],l[1],o[0]-l[0],o[1]-l[1]),u=c.width,d=c.height,f=c.x,g=c.y,y=new Point,$=new Point;return u>d?(y.x=$.x=f+u/2,y.y=g,$.y=g+d):(y.y=$.y=g+d/2,y.x=f,$.x=f+u),splitPolygonByLine(s,y,$)}function binaryDivideRecursive(a,s,l,o){if(l===1)o.push(s);else{var c=Math.floor(l/2),u=a(s);binaryDivideRecursive(a,u[0],c,o),binaryDivideRecursive(a,u[1],l-c,o)}return o}function clone(a,s){for(var l=[],o=0;o<s;o++)l.push(clonePath(a));return l}function copyPathProps(a,s){s.setStyle(a.style),s.z=a.z,s.z2=a.z2,s.zlevel=a.zlevel}function polygonConvert(a){for(var s=[],l=0;l<a.length;)s.push([a[l++],a[l++]]);return s}function split(a,s){var l=[],o=a.shape,c;switch(a.type){case"rect":divideRect(o,s,l),c=Rect$2;break;case"sector":divideSector(o,s,l),c=Sector;break;case"circle":divideSector({r0:0,r:o.r,startAngle:0,endAngle:Math.PI*2,cx:o.cx,cy:o.cy},s,l),c=Sector;break;default:var u=a.getComputedTransform(),d=u?Math.sqrt(Math.max(u[0]*u[0]+u[1]*u[1],u[2]*u[2]+u[3]*u[3])):1,f=map$1(pathToPolygons(a.getUpdatedPathProxy(),d),function(ce){return polygonConvert(ce)}),g=f.length;if(g===0)binaryDivideRecursive(binaryDividePolygon,{points:f[0]},s,l);else if(g===s)for(var y=0;y<g;y++)l.push({points:f[y]});else{var $=0,x=map$1(f,function(ce){var fe=[],ea=[];fromPoints(ce,fe,ea);var ta=(ea[1]-fe[1])*(ea[0]-fe[0]);return $+=ta,{poly:ce,area:ta}});x.sort(function(ce,fe){return fe.area-ce.area});for(var N=s,y=0;y<g;y++){var R=x[y];if(N<=0)break;var j=y===g-1?N:Math.ceil(R.area/$*s);j<0||(binaryDivideRecursive(binaryDividePolygon,{points:R.poly},j,l),N-=j)}}c=Polygon;break}if(!c)return clone(a,s);for(var ne=[],y=0;y<l.length;y++){var se=new c;se.setShape(l[y]),copyPathProps(a,se),ne.push(se)}return ne}function alignSubpath(a,s){var l=a.length,o=s.length;if(l===o)return[a,s];for(var c=[],u=[],d=l<o?a:s,f=Math.min(l,o),g=Math.abs(o-l)/6,y=(f-2)/6,$=Math.ceil(g/y)+1,x=[d[0],d[1]],N=g,R=2;R<f;){var j=d[R-2],ne=d[R-1],se=d[R++],ce=d[R++],fe=d[R++],ea=d[R++],ta=d[R++],na=d[R++];if(N<=0){x.push(se,ce,fe,ea,ta,na);continue}for(var aa=Math.min(N,$-1)+1,ia=1;ia<=aa;ia++){var sa=ia/aa;cubicSubdivide(j,se,fe,ta,sa,c),cubicSubdivide(ne,ce,ea,na,sa,u),j=c[3],ne=u[3],x.push(c[1],u[1],c[2],u[2],j,ne),se=c[5],ce=u[5],fe=c[6],ea=u[6]}N-=aa-1}return d===a?[x,s]:[a,x]}function createSubpath(a,s){for(var l=a.length,o=a[l-2],c=a[l-1],u=[],d=0;d<s.length;)u[d++]=o,u[d++]=c;return u}function alignBezierCurves(a,s){for(var l,o,c,u=[],d=[],f=0;f<Math.max(a.length,s.length);f++){var g=a[f],y=s[f],$=void 0,x=void 0;g?y?(l=alignSubpath(g,y),$=l[0],x=l[1],o=$,c=x):(x=createSubpath(c||g,g),$=g):($=createSubpath(o||y,y),x=y),u.push($),d.push(x)}return[u,d]}function centroid(a){for(var s=0,l=0,o=0,c=a.length,u=0,d=c-2;u<c;d=u,u+=2){var f=a[d],g=a[d+1],y=a[u],$=a[u+1],x=f*$-y*g;s+=x,l+=(f+y)*x,o+=(g+$)*x}return s===0?[a[0]||0,a[1]||0]:[l/s/3,o/s/3,s]}function findBestRingOffset(a,s,l,o){for(var c=(a.length-2)/6,u=1/0,d=0,f=a.length,g=f-2,y=0;y<c;y++){for(var $=y*6,x=0,N=0;N<f;N+=2){var R=N===0?$:($+N-2)%g+2,j=a[R]-l[0],ne=a[R+1]-l[1],se=s[N]-o[0],ce=s[N+1]-o[1],fe=se-j,ea=ce-ne;x+=fe*fe+ea*ea}x<u&&(u=x,d=y)}return d}function reverse(a){for(var s=[],l=a.length,o=0;o<l;o+=2)s[o]=a[l-o-2],s[o+1]=a[l-o-1];return s}function findBestMorphingRotation(a,s,l,o){for(var c=[],u,d=0;d<a.length;d++){var f=a[d],g=s[d],y=centroid(f),$=centroid(g);u==null&&(u=y[2]<0!=$[2]<0);var x=[],N=[],R=0,j=1/0,ne=[],se=f.length;u&&(f=reverse(f));for(var ce=findBestRingOffset(f,g,y,$)*6,fe=se-2,ea=0;ea<fe;ea+=2){var ta=(ce+ea)%fe+2;x[ea+2]=f[ta]-y[0],x[ea+3]=f[ta+1]-y[1]}x[0]=f[ce]-y[0],x[1]=f[ce+1]-y[1];for(var na=o/l,aa=-o/2;aa<=o/2;aa+=na){for(var ia=Math.sin(aa),sa=Math.cos(aa),ra=0,ea=0;ea<f.length;ea+=2){var la=x[ea],oa=x[ea+1],ca=g[ea]-$[0],pa=g[ea+1]-$[1],ua=ca*sa-pa*ia,da=ca*ia+pa*sa;ne[ea]=ua,ne[ea+1]=da;var ha=ua-la,ga=da-oa;ra+=ha*ha+ga*ga}if(ra<j){j=ra,R=aa;for(var fa=0;fa<ne.length;fa++)N[fa]=ne[fa]}}c.push({from:x,to:N,fromCp:y,toCp:$,rotation:-R})}return c}function isCombineMorphing(a){return a.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(a,s,l){var o=SAVED_METHOD_PREFIX+s,c=a[o]||a[s];a[o]||(a[o]=a[s]);var u=l.replace,d=l.after,f=l.before;a[s]=function(){var g=arguments,y;return f&&f.apply(this,g),u?y=u.apply(this,g):y=c.apply(this,g),d&&d.apply(this,g),y}}function restoreMethod(a,s){var l=SAVED_METHOD_PREFIX+s;a[l]&&(a[s]=a[l],a[l]=null)}function applyTransformOnBeziers(a,s){for(var l=0;l<a.length;l++)for(var o=a[l],c=0;c<o.length;){var u=o[c],d=o[c+1];o[c++]=s[0]*u+s[2]*d+s[4],o[c++]=s[1]*u+s[3]*d+s[5]}}function prepareMorphPath(a,s){var l=a.getUpdatedPathProxy(),o=s.getUpdatedPathProxy(),c=alignBezierCurves(pathToBezierCurves(l),pathToBezierCurves(o)),u=c[0],d=c[1],f=a.getComputedTransform(),g=s.getComputedTransform();function y(){this.transform=null}f&&applyTransformOnBeziers(u,f),g&&applyTransformOnBeziers(d,g),saveAndModifyMethod(s,"updateTransform",{replace:y}),s.transform=null;var $=findBestMorphingRotation(u,d,10,Math.PI),x=[];saveAndModifyMethod(s,"buildPath",{replace:function(N){for(var R=s.__morphT,j=1-R,ne=[],se=0;se<$.length;se++){var ce=$[se],fe=ce.from,ea=ce.to,ta=ce.rotation*R,na=ce.fromCp,aa=ce.toCp,ia=Math.sin(ta),sa=Math.cos(ta);lerp$1(ne,na,aa,R);for(var ra=0;ra<fe.length;ra+=2){var la=fe[ra],oa=fe[ra+1],ca=ea[ra],pa=ea[ra+1],ua=la*j+ca*R,da=oa*j+pa*R;x[ra]=ua*sa-da*ia+ne[0],x[ra+1]=ua*ia+da*sa+ne[1]}var ha=x[0],ga=x[1];N.moveTo(ha,ga);for(var ra=2;ra<fe.length;){var ca=x[ra++],pa=x[ra++],fa=x[ra++],ma=x[ra++],va=x[ra++],ka=x[ra++];ha===ca&&ga===pa&&fa===va&&ma===ka?N.lineTo(va,ka):N.bezierCurveTo(ca,pa,fa,ma,va,ka),ha=va,ga=ka}}}})}function morphPath(a,s,l){if(!a||!s)return s;var o=l.done,c=l.during;prepareMorphPath(a,s),s.__morphT=0;function u(){restoreMethod(s,"buildPath"),restoreMethod(s,"updateTransform"),s.__morphT=-1,s.createPathProxy(),s.dirtyShape()}return s.animateTo({__morphT:1},defaults({during:function(d){s.dirtyShape(),c&&c(d)},done:function(){u(),o&&o()}},l)),s}function hilbert(a,s,l,o,c,u){var d=16;a=c===l?0:Math.round(32767*(a-l)/(c-l)),s=u===o?0:Math.round(32767*(s-o)/(u-o));for(var f=0,g,y=(1<<d)/2;y>0;y/=2){var $=0,x=0;(a&y)>0&&($=1),(s&y)>0&&(x=1),f+=y*y*(3*$^x),x===0&&($===1&&(a=y-1-a,s=y-1-s),g=a,a=s,s=g)}return f}function sortPaths(a){var s=1/0,l=1/0,o=-1/0,c=-1/0,u=map$1(a,function(f){var g=f.getBoundingRect(),y=f.getComputedTransform(),$=g.x+g.width/2+(y?y[4]:0),x=g.y+g.height/2+(y?y[5]:0);return s=Math.min($,s),l=Math.min(x,l),o=Math.max($,o),c=Math.max(x,c),[$,x]}),d=map$1(u,function(f,g){return{cp:f,z:hilbert(f[0],f[1],s,l,o,c),path:a[g]}});return d.sort(function(f,g){return f.z-g.z}).map(function(f){return f.path})}function defaultDividePath(a){return split(a.path,a.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(a,s,l){var o=[];function c(na){for(var aa=0;aa<na.length;aa++){var ia=na[aa];isCombineMorphing(ia)?c(ia.childrenRef()):ia instanceof Path&&o.push(ia)}}c(a);var u=o.length;if(!u)return createEmptyReturn();var d=l.dividePath||defaultDividePath,f=d({path:s,count:u});if(f.length!==u)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();o=sortPaths(o),f=sortPaths(f);for(var g=l.done,y=l.during,$=l.individualDelay,x=new Transformable,N=0;N<u;N++){var R=o[N],j=f[N];j.parent=s,j.copyTransform(x),$||prepareMorphPath(R,j)}s.__isCombineMorphing=!0,s.childrenRef=function(){return f};function ne(na){for(var aa=0;aa<f.length;aa++)f[aa].addSelfToZr(na)}saveAndModifyMethod(s,"addSelfToZr",{after:function(na){ne(na)}}),saveAndModifyMethod(s,"removeSelfFromZr",{after:function(na){for(var aa=0;aa<f.length;aa++)f[aa].removeSelfFromZr(na)}});function se(){s.__isCombineMorphing=!1,s.__morphT=-1,s.childrenRef=null,restoreMethod(s,"addSelfToZr"),restoreMethod(s,"removeSelfFromZr")}var ce=f.length;if($)for(var fe=ce,ea=function(){fe--,fe===0&&(se(),g&&g())},N=0;N<ce;N++){var ta=$?defaults({delay:(l.delay||0)+$(N,ce,o[N],f[N]),done:ea},l):l;morphPath(o[N],f[N],ta)}else s.__morphT=0,s.animateTo({__morphT:1},defaults({during:function(na){for(var aa=0;aa<ce;aa++){var ia=f[aa];ia.__morphT=s.__morphT,ia.dirtyShape()}y&&y(na)},done:function(){se();for(var na=0;na<a.length;na++)restoreMethod(a[na],"updateTransform");g&&g()}},l));return s.__zr&&ne(s.__zr),{fromIndividuals:o,toIndividuals:f,count:ce}}function separateMorph(a,s,l){var o=s.length,c=[],u=l.dividePath||defaultDividePath;function d(R){for(var j=0;j<R.length;j++){var ne=R[j];isCombineMorphing(ne)?d(ne.childrenRef()):ne instanceof Path&&c.push(ne)}}if(isCombineMorphing(a)){d(a.childrenRef());var f=c.length;if(f<o)for(var g=0,y=f;y<o;y++)c.push(clonePath(c[g++%f]));c.length=o}else{c=u({path:a,count:o});for(var $=a.getComputedTransform(),y=0;y<c.length;y++)c[y].setLocalTransform($);if(c.length!==o)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}c=sortPaths(c),s=sortPaths(s);for(var x=l.individualDelay,y=0;y<o;y++){var N=x?defaults({delay:(l.delay||0)+x(y,o,c[y],s[y])},l):l;morphPath(c[y],s[y],N)}return{fromIndividuals:c,toIndividuals:s,count:s.length}}function isMultiple(a){return isArray$3(a[0])}function prepareMorphBatches(a,s){for(var l=[],o=a.length,c=0;c<o;c++)l.push({one:a[c],many:[]});for(var c=0;c<s.length;c++){var u=s[c].length,d=void 0;for(d=0;d<u;d++)l[d%o].many.push(s[c][d])}for(var f=0,c=o-1;c>=0;c--)if(!l[c].many.length){var g=l[f].many;if(g.length<=1)if(f)f=0;else return l;var u=g.length,y=Math.ceil(u/2);l[c].many=g.slice(y,u),l[f].many=g.slice(0,y),f++}return l}var pathDividers={clone:function(a){for(var s=[],l=1-Math.pow(1-a.path.style.opacity,1/a.count),o=0;o<a.count;o++){var c=clonePath(a.path);c.setStyle("opacity",l),s.push(c)}return s},split:null};function applyMorphAnimation(a,s,l,o,c,u){if(!a.length||!s.length)return;var d=getAnimationConfig("update",o,c);if(!(d&&d.duration>0))return;var f=o.getModel("universalTransition").get("delay"),g=Object.assign({setToFinal:!0},d),y,$;isMultiple(a)&&(y=a,$=s),isMultiple(s)&&(y=s,$=a);function x(ce,fe,ea,ta,na){var aa=ce.many,ia=ce.one;if(aa.length===1&&!na){var sa=fe?aa[0]:ia,ra=fe?ia:aa[0];if(isCombineMorphing(sa))x({many:[sa],one:ra},!0,ea,ta,!0);else{var la=f?defaults({delay:f(ea,ta)},g):g;morphPath(sa,ra,la),u(sa,ra,sa,ra,la)}}else for(var oa=defaults({dividePath:pathDividers[l],individualDelay:f&&function(ga,fa,ma,va){return f(ga+ea,ta)}},g),ca=fe?combineMorph(aa,ia,oa):separateMorph(ia,aa,oa),pa=ca.fromIndividuals,ua=ca.toIndividuals,da=pa.length,ha=0;ha<da;ha++){var la=f?defaults({delay:f(ha,da)},g):g;u(pa[ha],ua[ha],fe?aa[ha]:ce.one,fe?ce.one:aa[ha],la)}}for(var N=y?y===a:a.length>s.length,R=y?prepareMorphBatches($,y):prepareMorphBatches(N?s:a,[N?a:s]),j=0,ne=0;ne<R.length;ne++)j+=R[ne].many.length;for(var se=0,ne=0;ne<R.length;ne++)x(R[ne],N,se,j),se+=R[ne].many.length}function getPathList(a){if(!a)return[];if(isArray$3(a)){for(var s=[],l=0;l<a.length;l++)s.push(getPathList(a[l]));return s}var o=[];return a.traverse(function(c){c instanceof Path&&!c.disableMorphing&&!c.invisible&&!c.ignore&&o.push(c)}),o}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(a,s){for(var l=a.dimensions,o=0;o<l.length;o++){var c=a.getDimensionInfo(l[o]);if(c&&c.otherDims[s]===0)return l[o]}}function getValueByDimension(a,s,l){var o=a.getDimensionInfo(l),c=o&&o.ordinalMeta;if(o){var u=a.get(o.name,s);return c&&c.categories[u]||u+""}}function getGroupId(a,s,l,o){var c=o?"itemChildGroupId":"itemGroupId",u=getDimension(a,c);if(u){var d=getValueByDimension(a,s,u);return d}var f=a.getRawDataItem(s),g=o?"childGroupId":"groupId";if(f&&f[g])return f[g]+"";if(!o)return l||a.getId(s)}function flattenDataDiffItems(a){var s=[];return each$f(a,function(l){var o=l.data,c=l.dataGroupId;if(!(o.count()>DATA_COUNT_THRESHOLD))for(var u=o.getIndices(),d=0;d<u.length;d++)s.push({data:o,groupId:getGroupId(o,d,c,!1),childGroupId:getGroupId(o,d,c,!0),divide:l.divide,dataIndex:d})}),s}function fadeInElement(a,s,l){a.traverse(function(o){o instanceof Path&&initProps(o,{style:{opacity:0}},s,{dataIndex:l,isFrom:!0})})}function removeEl(a){if(a.parent){var s=a.getComputedTransform();a.setLocalTransform(s),a.parent.remove(a)}}function stopAnimation(a){a.stopAnimation(),a.isGroup&&a.traverse(function(s){s.stopAnimation()})}function animateElementStyles(a,s,l){var o=getAnimationConfig("update",l,s);o&&a.traverse(function(c){if(c instanceof Displayable){var u=getOldStyle(c);u&&c.animateFrom({style:u},o)}})}function isAllIdSame(a,s){var l=a.length;if(l!==s.length)return!1;for(var o=0;o<l;o++){var c=a[o],u=s[o];if(c.data.getId(c.dataIndex)!==u.data.getId(u.dataIndex))return!1}return!0}function transitionBetween(a,s,l){var o=flattenDataDiffItems(a),c=flattenDataDiffItems(s);function u(ea,ta,na,aa,ia){(na||ea)&&ta.animateFrom({style:na&&na!==ea?extend(extend({},na.style),ea.style):ea.style},ia)}var d=!1,f=TRANSITION_NONE,g=createHashMap(),y=createHashMap();o.forEach(function(ea){ea.groupId&&g.set(ea.groupId,!0),ea.childGroupId&&y.set(ea.childGroupId,!0)});for(var $=0;$<c.length;$++){var x=c[$].groupId;if(y.get(x)){f=TRANSITION_P2C;break}var N=c[$].childGroupId;if(N&&g.get(N)){f=TRANSITION_C2P;break}}function R(ea,ta){return function(na){var aa=na.data,ia=na.dataIndex;return ta?aa.getId(ia):ea?f===TRANSITION_P2C?na.childGroupId:na.groupId:f===TRANSITION_C2P?na.childGroupId:na.groupId}}var j=isAllIdSame(o,c),ne={};if(!j)for(var $=0;$<c.length;$++){var se=c[$],ce=se.data.getItemGraphicEl(se.dataIndex);ce&&(ne[ce.id]=!0)}function fe(ea,ta){var na=o[ta],aa=c[ea],ia=aa.data.hostModel,sa=na.data.getItemGraphicEl(na.dataIndex),ra=aa.data.getItemGraphicEl(aa.dataIndex);if(sa===ra){ra&&animateElementStyles(ra,aa.dataIndex,ia);return}sa&&ne[sa.id]||ra&&(stopAnimation(ra),sa?(stopAnimation(sa),removeEl(sa),d=!0,applyMorphAnimation(getPathList(sa),getPathList(ra),aa.divide,ia,ea,u)):fadeInElement(ra,ia,ea))}new DataDiffer(o,c,R(!0,j),R(!1,j),null,"multiple").update(fe).updateManyToOne(function(ea,ta){var na=c[ea],aa=na.data,ia=aa.hostModel,sa=aa.getItemGraphicEl(na.dataIndex),ra=filter(map$1(ta,function(la){return o[la].data.getItemGraphicEl(o[la].dataIndex)}),function(la){return la&&la!==sa&&!ne[la.id]});sa&&(stopAnimation(sa),ra.length?(each$f(ra,function(la){stopAnimation(la),removeEl(la)}),d=!0,applyMorphAnimation(getPathList(ra),getPathList(sa),na.divide,ia,ea,u)):fadeInElement(sa,ia,na.dataIndex))}).updateOneToMany(function(ea,ta){var na=o[ta],aa=na.data.getItemGraphicEl(na.dataIndex);if(!(aa&&ne[aa.id])){var ia=filter(map$1(ea,function(ra){return c[ra].data.getItemGraphicEl(c[ra].dataIndex)}),function(ra){return ra&&ra!==aa}),sa=c[ea[0]].data.hostModel;ia.length&&(each$f(ia,function(ra){return stopAnimation(ra)}),aa?(stopAnimation(aa),removeEl(aa),d=!0,applyMorphAnimation(getPathList(aa),getPathList(ia),na.divide,sa,ea[0],u)):each$f(ia,function(ra){return fadeInElement(ra,sa,ea[0])}))}}).updateManyToMany(function(ea,ta){new DataDiffer(ta,ea,function(na){return o[na].data.getId(o[na].dataIndex)},function(na){return c[na].data.getId(c[na].dataIndex)}).update(function(na,aa){fe(ea[na],ta[aa])}).execute()}).execute(),d&&each$f(s,function(ea){var ta=ea.data,na=ta.hostModel,aa=na&&l.getViewOfSeriesModel(na),ia=getAnimationConfig("update",na,0);aa&&na.isAnimationEnabled()&&ia&&ia.duration>0&&aa.group.traverse(function(sa){sa instanceof Path&&!sa.animators.length&&sa.animateFrom({style:{opacity:0}},ia)})})}function getSeriesTransitionKey(a){var s=a.getModel("universalTransition").get("seriesKey");return s||a.id}function convertArraySeriesKeyToString(a){return isArray$3(a)?a.sort().join(","):a}function getDivideShapeFromData(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(a,s){var l=createHashMap(),o=createHashMap(),c=createHashMap();return each$f(a.oldSeries,function(u,d){var f=a.oldDataGroupIds[d],g=a.oldData[d],y=getSeriesTransitionKey(u),$=convertArraySeriesKeyToString(y);o.set($,{dataGroupId:f,data:g}),isArray$3(y)&&each$f(y,function(x){c.set(x,{key:$,dataGroupId:f,data:g})})}),each$f(s.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var d=u.get("dataGroupId"),f=u.getData(),g=getSeriesTransitionKey(u),y=convertArraySeriesKeyToString(g),$=o.get(y);if($)l.set(y,{oldSeries:[{dataGroupId:$.dataGroupId,divide:getDivideShapeFromData($.data),data:$.data}],newSeries:[{dataGroupId:d,divide:getDivideShapeFromData(f),data:f}]});else if(isArray$3(g)){var x=[];each$f(g,function(j){var ne=o.get(j);ne.data&&x.push({dataGroupId:ne.dataGroupId,divide:getDivideShapeFromData(ne.data),data:ne.data})}),x.length&&l.set(y,{oldSeries:x,newSeries:[{dataGroupId:d,data:f,divide:getDivideShapeFromData(f)}]})}else{var N=c.get(g);if(N){var R=l.get(N.key);R||(R={oldSeries:[{dataGroupId:N.dataGroupId,data:N.data,divide:getDivideShapeFromData(N.data)}],newSeries:[]},l.set(N.key,R)),R.newSeries.push({dataGroupId:d,data:f,divide:getDivideShapeFromData(f)})}}}}),l}function querySeries(a,s){for(var l=0;l<a.length;l++){var o=s.seriesIndex!=null&&s.seriesIndex===a[l].seriesIndex||s.seriesId!=null&&s.seriesId===a[l].id;if(o)return l}}function transitionSeriesFromOpt(a,s,l,o){var c=[],u=[];each$f(normalizeToArray(a.from),function(d){var f=querySeries(s.oldSeries,d);f>=0&&c.push({dataGroupId:s.oldDataGroupIds[f],data:s.oldData[f],divide:getDivideShapeFromData(s.oldData[f]),groupIdDim:d.dimension})}),each$f(normalizeToArray(a.to),function(d){var f=querySeries(l.updatedSeries,d);if(f>=0){var g=l.updatedSeries[f].getData();u.push({dataGroupId:s.oldDataGroupIds[f],data:g,divide:getDivideShapeFromData(g),groupIdDim:d.dimension})}}),c.length>0&&u.length>0&&transitionBetween(c,u,o)}function installUniversalTransition(a){a.registerUpdateLifecycle("series:beforeupdate",function(s,l,o){each$f(normalizeToArray(o.seriesTransition),function(c){each$f(normalizeToArray(c.to),function(u){for(var d=o.updatedSeries,f=0;f<d.length;f++)(u.seriesIndex!=null&&u.seriesIndex===d[f].seriesIndex||u.seriesId!=null&&u.seriesId===d[f].id)&&(d[f][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(s,l,o){var c=getUniversalTransitionGlobalStore(l);if(c.oldSeries&&o.updatedSeries&&o.optionChanged){var u=o.seriesTransition;if(u)each$f(normalizeToArray(u),function(R){transitionSeriesFromOpt(R,c,o,l)});else{var d=findTransitionSeriesBatches(c,o);each$f(d.keys(),function(R){var j=d.get(R);transitionBetween(j.oldSeries,j.newSeries,l)})}each$f(o.updatedSeries,function(R){R[SERIES_UNIVERSAL_TRANSITION_PROP]&&(R[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var f=s.getSeries(),g=c.oldSeries=[],y=c.oldDataGroupIds=[],$=c.oldData=[],x=0;x<f.length;x++){var N=f[x].getData();N.count()<DATA_COUNT_THRESHOLD&&(g.push(f[x]),y.push(f[x].get("dataGroupId")),$.push(N))}})}use([install$S]);use([install$T]);use([install$R,install$Q,install$P,install$N,install$L,install$J,install$I,install$H,install$G,install$F,install$E,install$C,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s]);use(install$q);use(install$p);use(install$K);use(install$o);use(install$D);use(install$n);use(install$m);use(install$k);use(install$j);use(install$r);use(install$i);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$a);use(install$7);use(install$9);use(install$8);use(install$4);use(install$6);use(install$5);use(install$3);use(install$2);use(install$1);use(installUniversalTransition);use(installLabelLayout);const _hoisted_1$1A={id:"container2"},_sfc_main$3g=defineComponent({__name:"PeopleTimeEchart",setup(a){const s=defineClientComponent(()=>__vitePreload(()=>import("./index.Cl8LkLFd.js"),__vite__mapDeps([0,1]))),l=[100,95,95,95,90,80,70],o=[0,10,50,50,40,10,5],c=[0,5,5,5,5,5,5],u=[0,80,50,40,20,10,5],d=[0,5,10,20,30,30,20],f=reactive({grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},backgroundColor:"white",borderColor:"red",borderWidth:0,xAxis:[{type:"category",boundaryGap:!1,data:["1Year","2Year","3Year","4Year","5Year","6Year","7Year"]}],yAxis:[{type:"value"}],graphic:{type:"rect"},series:[{name:"学习",type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8,color:new LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 191, 0)"},{offset:1,color:"rgb(224, 62, 76)"}])},emphasis:{focus:"series"},data:l},{name:"游戏",type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8,color:new LinearGradient(0,0,0,1,[{offset:0,color:"rgb(255, 0, 135)"},{offset:1,color:"rgb(135, 0, 157)"}])},emphasis:{focus:"series"},data:o},{name:"音乐",type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8,color:new LinearGradient(0,0,0,1,[{offset:0,color:"rgb(55, 162, 255)"},{offset:1,color:"rgb(116, 21, 219)"}])},emphasis:{focus:"series"},data:c},{name:"编码",type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,areaStyle:{opacity:.8,color:new LinearGradient(0,0,0,1,[{offset:0,color:"rgb(0, 221, 255)"},{offset:1,color:"rgb(77, 119, 255)"}])},emphasis:{focus:"series"},data:u},{name:"游玩",type:"line",stack:"Total",smooth:!0,lineStyle:{width:0},showSymbol:!1,label:{show:!0,position:"top"},areaStyle:{opacity:.8,color:new LinearGradient(0,0,0,1,[{offset:0,color:"rgb(128, 255, 165)"},{offset:1,color:"rgb(1, 191, 236)"}])},emphasis:{focus:"series"},data:d}]});return(g,y)=>(openBlock(),createElementBlock("div",_hoisted_1$1A,[createVNode$1(unref(s),{option:f},null,8,["option"])]))}}),PeopleTimeEchart=_export_sfc$1(_sfc_main$3g,[["__scopeId","data-v-926afa0a"]]),_hoisted_1$1z={key:0,id:"container"},_hoisted_2$1b={style:{width:"100vw",height:"25vh","text-align":"center","margin-top":"2rem",display:"flex","flex-direction":"column","justify-content":"center","align-items":"center"}},_hoisted_3$14={class:"item",style:{"font-size":"0"}},_hoisted_4$l={style:{"font-size":"1.5rem","margin-top":"1rem",scale:"1"},class:"gsc gradient-text"},_sfc_main$3f=defineComponent({__name:"VHome",setup(a){const s=ref("Hello SCM !"),l=ref(),o=ref("  "),c=()=>{var g=new XMLHttpRequest;g.open("GET","https://v1.jinrishici.com/rensheng.txt",!0),g.onreadystatechange=function(){g.readyState===4&&g.status===200&&(o.value=`> ${g.responseText}`,anime({targets:".gsc",scale:[0,1],easing:"linear",duration:500}))},g.send()},u=()=>{const g=new Letterize({targets:".item"});let y=anime.timeline({targets:g.listAll,autoplay:!1,zIndex:2,width:"100vw",easing:"easeInOutExpo"});return y.add({opacity:[0,1],fontSize:"10rem",filter:["blur(10px)","blur(0px)"],easing:"linear",duration:1e3,delay:anime.stagger(200)},"-=1800"),y.finished.then(()=>{const $=anime({targets:".sphere",opacity:.7,duration:1e3,easing:"linear"});anime({targets:".blades",opacity:1,scale:[0,1],easing:"spring",duration:1e3,complete(x){c()}}),$.finished.then(()=>{l.value=anime({targets:".blades",rotate:360,loop:!0,easing:"linear",duration:2e3})})}),y},d=ref();onMounted(()=>{d.value=u(),d.value.play()});const f=()=>{d.value=null,l.value&&(l.value.pause(),l.value=null)};return onUnmounted(()=>{f()}),(g,y)=>(openBlock(),createElementBlock("div",_hoisted_1$1z,[y[0]||(y[0]=createStaticVNode('<div style="position:relative;" data-v-ec5b684e><div class="blades" style="opacity:0;scale:1;left:70px;z-index:1000;" data-v-ec5b684e><div class="blade" data-v-ec5b684e></div><div class="blade" data-v-ec5b684e></div><div class="blade" data-v-ec5b684e></div><div class="blade" data-v-ec5b684e></div><div class="blade" data-v-ec5b684e></div><div class="blade" data-v-ec5b684e></div></div></div>',1)),createVNode$1(PeopleTimeEchart,{style:{width:"45vw","aspect-ratio":"1"}}),createBaseVNode("div",_hoisted_2$1b,[createBaseVNode("div",_hoisted_3$14,toDisplayString(s.value),1),createBaseVNode("div",_hoisted_4$l,toDisplayString(o.value),1),createVNode$1(Sphere,{class:"sphere",style:{opacity:"0.2"}})])]))}}),VHome=_export_sfc$1(_sfc_main$3f,[["__scopeId","data-v-ec5b684e"]]),opt$1=Object.prototype.toString;function isArray$1(a){return opt$1.call(a)==="[object Array]"}function isNull(a){return opt$1.call(a)==="[object Null]"}function isBoolean$1(a){return opt$1.call(a)==="[object Boolean]"}function isObject$1(a){return opt$1.call(a)==="[object Object]"}const isPromise=a=>opt$1.call(a)==="[object Promise]";function isString$1(a){return opt$1.call(a)==="[object String]"}function isNumber$1(a){return opt$1.call(a)==="[object Number]"&&a===a}function isUndefined(a){return a===void 0}function isFunction$1(a){return typeof a=="function"}function isEmptyObject$1(a){return isObject$1(a)&&Object.keys(a).length===0}function isExist(a){return a||a===0}function isWindow(a){return a===window}const isComponentInstance=a=>a?.$!==void 0,isQuarter=a=>/\[Q]Q/.test(a);function isDayjs(a){return isObject$1(a)&&"$y"in a&&"$M"in a&&"$D"in a&&"$d"in a&&"$H"in a&&"$m"in a&&"$s"in a}const configProviderInjectionKey=Symbol("ArcoConfigProvider"),calendarLang={formatYear:"YYYY 年",formatMonth:"YYYY 年 MM 月",today:"今天",view:{month:"月",year:"年",week:"周",day:"日"},month:{long:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"},short:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"}},week:{long:{self:"周",monday:"周一",tuesday:"周二",wednesday:"周三",thursday:"周四",friday:"周五",saturday:"周六",sunday:"周日"},short:{self:"周",monday:"一",tuesday:"二",wednesday:"三",thursday:"四",friday:"五",saturday:"六",sunday:"日"}}},lang={locale:"zh-CN",empty:{description:"暂无数据"},drawer:{okText:"确定",cancelText:"取消"},popconfirm:{okText:"确定",cancelText:"取消"},modal:{okText:"确定",cancelText:"取消"},pagination:{goto:"前往",page:"页",countPerPage:"条/页",total:"共 {0} 条"},table:{okText:"确定",resetText:"重置"},upload:{start:"开始",cancel:"取消",delete:"删除",retry:"点击重试",buttonText:"点击上传",preview:"预览",drag:"点击或拖拽文件到此处上传",dragHover:"释放文件并开始上传",error:"上传失败"},calendar:calendarLang,datePicker:{view:calendarLang.view,month:calendarLang.month,week:calendarLang.week,placeholder:{date:"请选择日期",week:"请选择周",month:"请选择月份",year:"请选择年份",quarter:"请选择季度",time:"请选择时间"},rangePlaceholder:{date:["开始日期","结束日期"],week:["开始周","结束周"],month:["开始月份","结束月份"],year:["开始年份","结束年份"],quarter:["开始季度","结束季度"],time:["开始时间","结束时间"]},selectTime:"选择时间",today:"今天",now:"此刻",ok:"确定"},image:{loading:"加载中"},imagePreview:{fullScreen:"全屏",rotateRight:"向右旋转",rotateLeft:"向左旋转",zoomIn:"放大",zoomOut:"缩小",originalSize:"原始尺寸"},typography:{copied:"已复制",copy:"复制",expand:"展开",collapse:"折叠",edit:"编辑"},form:{validateMessages:{required:"#{field} 是必填项",type:{string:"#{field} 不是合法的文本类型",number:"#{field} 不是合法的数字类型",boolean:"#{field} 不是合法的布尔类型",array:"#{field} 不是合法的数组类型",object:"#{field} 不是合法的对象类型",url:"#{field} 不是合法的 url 地址",email:"#{field} 不是合法的邮箱地址",ip:"#{field} 不是合法的 IP 地址"},number:{min:"`#{value}` 小于最小值 `#{min}`",max:"`#{value}` 大于最大值 `#{max}`",equal:"`#{value}` 不等于 `#{equal}`",range:"`#{value}` 不在 `#{min} ~ #{max}` 范围内",positive:"`#{value}` 不是正数",negative:"`#{value}` 不是负数"},array:{length:"`#{field}` 个数不等于 #{length}",minLength:"`#{field}` 个数最少为 #{minLength}",maxLength:"`#{field}` 个数最多为 #{maxLength}",includes:"#{field} 不包含 #{includes}",deepEqual:"#{field} 不等于 #{deepEqual}",empty:"`#{field}` 不是空数组"},string:{minLength:"字符数最少为 #{minLength}",maxLength:"字符数最多为 #{maxLength}",length:"字符数必须是 #{length}",match:"`#{value}` 不符合模式 #{pattern}",uppercase:"`#{value}` 必须全大写",lowercase:"`#{value}` 必须全小写"},object:{deepEqual:"`#{field}` 不等于期望值",hasKeys:"`#{field}` 不包含必须字段",empty:"`#{field}` 不是对象"},boolean:{true:"期望是 `true`",false:"期望是 `false`"}}},colorPicker:{history:"最近使用颜色",preset:"系统预设颜色",empty:"暂无"}},LOCALE=ref("zh-CN"),I18N_MESSAGES=reactive({"zh-CN":lang}),addI18nMessages=(a,s)=>{for(const l of Object.keys(a))(!I18N_MESSAGES[l]||s?.overwrite)&&(I18N_MESSAGES[l]=a[l])},useLocale=a=>{if(!I18N_MESSAGES[a]){console.warn(`use ${a} failed! Please add ${a} first`);return}LOCALE.value=a},getLocale=()=>LOCALE.value,useI18n=()=>{const a=inject(configProviderInjectionKey,void 0),s=computed(()=>{var c;return(c=a?.locale)!=null?c:I18N_MESSAGES[LOCALE.value]}),l=computed(()=>s.value.locale);return{i18nMessage:s,locale:l,t:(c,...u)=>{const d=c.split(".");let f=s.value;for(const g of d){if(!f[g])return c;f=f[g]}return isString$1(f)&&u.length>0?f.replace(/{(\d+)}/g,(g,y)=>{var $;return($=u[y])!=null?$:g}):f}}};var __defProp$17=Object.defineProperty,__defProps$z=Object.defineProperties,__getOwnPropDescs$z=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$18=Object.getOwnPropertySymbols,__hasOwnProp$18=Object.prototype.hasOwnProperty,__propIsEnum$18=Object.prototype.propertyIsEnumerable,__defNormalProp$17=(a,s,l)=>s in a?__defProp$17(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$17=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$18.call(s,l)&&__defNormalProp$17(a,l,s[l]);if(__getOwnPropSymbols$18)for(var l of __getOwnPropSymbols$18(s))__propIsEnum$18.call(s,l)&&__defNormalProp$17(a,l,s[l]);return a},__spreadProps$z=(a,s)=>__defProps$z(a,__getOwnPropDescs$z(s));const COMPONENT_PREFIX="A",CLASS_PREFIX="arco",GLOBAL_CONFIG_NAME="$arco",getComponentPrefix=a=>{var s;return(s=a?.componentPrefix)!=null?s:COMPONENT_PREFIX},setGlobalConfig=(a,s)=>{var l;s&&s.classPrefix&&(a.config.globalProperties[GLOBAL_CONFIG_NAME]=__spreadProps$z(__spreadValues$17({},(l=a.config.globalProperties[GLOBAL_CONFIG_NAME])!=null?l:{}),{classPrefix:s.classPrefix}))},getPrefixCls=a=>{var s,l,o;const c=getCurrentInstance(),u=inject(configProviderInjectionKey,void 0),d=(o=(l=u?.prefixCls)!=null?l:(s=c?.appContext.config.globalProperties[GLOBAL_CONFIG_NAME])==null?void 0:s.classPrefix)!=null?o:CLASS_PREFIX;return a?`${d}-${a}`:d};var MapShim=function(){if(typeof Map<"u")return Map;function a(s,l){var o=-1;return s.some(function(c,u){return c[0]===l?(o=u,!0):!1}),o}return function(){function s(){this.__entries__=[]}return Object.defineProperty(s.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),s.prototype.get=function(l){var o=a(this.__entries__,l),c=this.__entries__[o];return c&&c[1]},s.prototype.set=function(l,o){var c=a(this.__entries__,l);~c?this.__entries__[c][1]=o:this.__entries__.push([l,o])},s.prototype.delete=function(l){var o=this.__entries__,c=a(o,l);~c&&o.splice(c,1)},s.prototype.has=function(l){return!!~a(this.__entries__,l)},s.prototype.clear=function(){this.__entries__.splice(0)},s.prototype.forEach=function(l,o){o===void 0&&(o=null);for(var c=0,u=this.__entries__;c<u.length;c++){var d=u[c];l.call(o,d[1],d[0])}},s}()}(),isBrowser=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle(a,s){var l=!1,o=!1,c=0;function u(){l&&(l=!1,a()),o&&f()}function d(){requestAnimationFrame$1(u)}function f(){var g=Date.now();if(l){if(g-c<trailingTimeout)return;o=!0}else l=!0,o=!1,setTimeout(d,s);c=g}return f}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function a(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return a.prototype.addObserver=function(s){~this.observers_.indexOf(s)||this.observers_.push(s),this.connected_||this.connect_()},a.prototype.removeObserver=function(s){var l=this.observers_,o=l.indexOf(s);~o&&l.splice(o,1),!l.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){var s=this.updateObservers_();s&&this.refresh()},a.prototype.updateObservers_=function(){var s=this.observers_.filter(function(l){return l.gatherActive(),l.hasActive()});return s.forEach(function(l){return l.broadcastActive()}),s.length>0},a.prototype.connect_=function(){!isBrowser||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},a.prototype.disconnect_=function(){!isBrowser||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},a.prototype.onTransitionEnd_=function(s){var l=s.propertyName,o=l===void 0?"":l,c=transitionKeys.some(function(u){return!!~o.indexOf(u)});c&&this.refresh()},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null,a}(),defineConfigurable=function(a,s){for(var l=0,o=Object.keys(s);l<o.length;l++){var c=o[l];Object.defineProperty(a,c,{value:s[c],enumerable:!1,writable:!1,configurable:!0})}return a},getWindowOf=function(a){var s=a&&a.ownerDocument&&a.ownerDocument.defaultView;return s||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(a){return parseFloat(a)||0}function getBordersSize(a){for(var s=[],l=1;l<arguments.length;l++)s[l-1]=arguments[l];return s.reduce(function(o,c){var u=a["border-"+c+"-width"];return o+toFloat(u)},0)}function getPaddings(a){for(var s=["top","right","bottom","left"],l={},o=0,c=s;o<c.length;o++){var u=c[o],d=a["padding-"+u];l[u]=toFloat(d)}return l}function getSVGContentRect(a){var s=a.getBBox();return createRectInit(0,0,s.width,s.height)}function getHTMLElementContentRect(a){var s=a.clientWidth,l=a.clientHeight;if(!s&&!l)return emptyRect;var o=getWindowOf(a).getComputedStyle(a),c=getPaddings(o),u=c.left+c.right,d=c.top+c.bottom,f=toFloat(o.width),g=toFloat(o.height);if(o.boxSizing==="border-box"&&(Math.round(f+u)!==s&&(f-=getBordersSize(o,"left","right")+u),Math.round(g+d)!==l&&(g-=getBordersSize(o,"top","bottom")+d)),!isDocumentElement(a)){var y=Math.round(f+u)-s,$=Math.round(g+d)-l;Math.abs(y)!==1&&(f-=y),Math.abs($)!==1&&(g-=$)}return createRectInit(c.left,c.top,f,g)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(a){return a instanceof getWindowOf(a).SVGGraphicsElement}:function(a){return a instanceof getWindowOf(a).SVGElement&&typeof a.getBBox=="function"}}();function isDocumentElement(a){return a===getWindowOf(a).document.documentElement}function getContentRect(a){return isBrowser?isSVGGraphicsElement(a)?getSVGContentRect(a):getHTMLElementContentRect(a):emptyRect}function createReadOnlyRect(a){var s=a.x,l=a.y,o=a.width,c=a.height,u=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,d=Object.create(u.prototype);return defineConfigurable(d,{x:s,y:l,width:o,height:c,top:l,right:s+o,bottom:c+l,left:s}),d}function createRectInit(a,s,l,o){return{x:a,y:s,width:l,height:o}}var ResizeObservation=function(){function a(s){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=s}return a.prototype.isActive=function(){var s=getContentRect(this.target);return this.contentRect_=s,s.width!==this.broadcastWidth||s.height!==this.broadcastHeight},a.prototype.broadcastRect=function(){var s=this.contentRect_;return this.broadcastWidth=s.width,this.broadcastHeight=s.height,s},a}(),ResizeObserverEntry=function(){function a(s,l){var o=createReadOnlyRect(l);defineConfigurable(this,{target:s,contentRect:o})}return a}(),ResizeObserverSPI=function(){function a(s,l,o){if(this.activeObservations_=[],this.observations_=new MapShim,typeof s!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=s,this.controller_=l,this.callbackCtx_=o}return a.prototype.observe=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof getWindowOf(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var l=this.observations_;l.has(s)||(l.set(s,new ResizeObservation(s)),this.controller_.addObserver(this),this.controller_.refresh())}},a.prototype.unobserve=function(s){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(s instanceof getWindowOf(s).Element))throw new TypeError('parameter 1 is not of type "Element".');var l=this.observations_;l.has(s)&&(l.delete(s),l.size||this.controller_.removeObserver(this))}},a.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},a.prototype.gatherActive=function(){var s=this;this.clearActive(),this.observations_.forEach(function(l){l.isActive()&&s.activeObservations_.push(l)})},a.prototype.broadcastActive=function(){if(this.hasActive()){var s=this.callbackCtx_,l=this.activeObservations_.map(function(o){return new ResizeObserverEntry(o.target,o.broadcastRect())});this.callback_.call(s,l,s),this.clearActive()}},a.prototype.clearActive=function(){this.activeObservations_.splice(0)},a.prototype.hasActive=function(){return this.activeObservations_.length>0},a}(),observers=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver$3=function(){function a(s){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var l=ResizeObserverController.getInstance(),o=new ResizeObserverSPI(s,l,this);observers.set(this,o)}return a}();["observe","unobserve","disconnect"].forEach(function(a){ResizeObserver$3.prototype[a]=function(){var s;return(s=observers.get(this))[a].apply(s,arguments)}});var index$1=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver$3}(),ShapeFlags;(function(a){a[a.ELEMENT=1]="ELEMENT",a[a.FUNCTIONAL_COMPONENT=2]="FUNCTIONAL_COMPONENT",a[a.STATEFUL_COMPONENT=4]="STATEFUL_COMPONENT",a[a.COMPONENT=6]="COMPONENT",a[a.TEXT_CHILDREN=8]="TEXT_CHILDREN",a[a.ARRAY_CHILDREN=16]="ARRAY_CHILDREN",a[a.SLOTS_CHILDREN=32]="SLOTS_CHILDREN",a[a.TELEPORT=64]="TELEPORT",a[a.SUSPENSE=128]="SUSPENSE",a[a.COMPONENT_SHOULD_KEEP_ALIVE=256]="COMPONENT_SHOULD_KEEP_ALIVE",a[a.COMPONENT_KEPT_ALIVE=512]="COMPONENT_KEPT_ALIVE"})(ShapeFlags||(ShapeFlags={}));var PatchFlags;(function(a){a[a.TEXT=1]="TEXT",a[a.CLASS=2]="CLASS",a[a.STYLE=4]="STYLE",a[a.PROPS=8]="PROPS",a[a.FULL_PROPS=16]="FULL_PROPS",a[a.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",a[a.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",a[a.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",a[a.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",a[a.NEED_PATCH=512]="NEED_PATCH",a[a.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",a[a.DEV_ROOT_FRAGMENT=2048]="DEV_ROOT_FRAGMENT",a[a.HOISTED=-1]="HOISTED",a[a.BAIL=-2]="BAIL"})(PatchFlags||(PatchFlags={}));const isElement=a=>!!(a&&a.shapeFlag&1),isComponent=(a,s)=>!!(a&&a.shapeFlag&6),isTextChildren=(a,s)=>!!(a&&a.shapeFlag&8),isArrayChildren=(a,s)=>!!(a&&a.shapeFlag&16),isSlotsChildren=(a,s)=>!!(a&&a.shapeFlag&32),getFirstComponent=a=>{var s,l;if(a)for(const o of a){if(isElement(o)||isComponent(o))return o;if(isArrayChildren(o,o.children)){const c=getFirstComponent(o.children);if(c)return c}else if(isSlotsChildren(o,o.children)){const c=(l=(s=o.children).default)==null?void 0:l.call(s);if(c){const u=getFirstComponent(c);if(u)return u}}else if(isArray$1(o)){const c=getFirstComponent(o);if(c)return c}}},isEmptyChildren=a=>{if(!a)return!0;for(const s of a)if(s.children)return!1;return!0},mergeFirstChild=(a,s)=>{if(a&&a.length>0)for(let l=0;l<a.length;l++){const o=a[l];if(isElement(o)||isComponent(o)){const u=isFunction$1(s)?s(o):s;return a[l]=cloneVNode(o,u,!0),!0}const c=getChildrenArray(o);if(c&&c.length>0&&mergeFirstChild(c,s))return!0}return!1},getChildrenArray=a=>{if(isArrayChildren(a,a.children))return a.children;if(isArray$1(a))return a},getFirstElementFromVNode=a=>{var s,l;if(isElement(a))return a.el;if(isComponent(a)){if(((s=a.el)==null?void 0:s.nodeType)===1)return a.el;if((l=a.component)!=null&&l.subTree){const o=getFirstElementFromVNode(a.component.subTree);if(o)return o}}else{const o=getChildrenArray(a);return getFirstElementFromChildren(o)}},getFirstElementFromChildren=a=>{if(a&&a.length>0)for(const s of a){const l=getFirstElementFromVNode(s);if(l)return l}},getAllElements=(a,s=!1)=>{var l,o;const c=[];for(const u of a??[])isElement(u)||isComponent(u)||s&&isTextChildren(u,u.children)?c.push(u):isArrayChildren(u,u.children)?c.push(...getAllElements(u.children,s)):isSlotsChildren(u,u.children)?c.push(...getAllElements((o=(l=u.children).default)==null?void 0:o.call(l),s)):isArray$1(u)&&c.push(...getAllElements(u,s));return c};function unFragment(a){function s(l){const o=[];return l.forEach(c=>{var u,d;isVNode(c)&&c.type===Fragment?isSlotsChildren(c,c.children)?o.push(...s(((d=(u=c.children).default)==null?void 0:d.call(u))||[])):isArrayChildren(c,c.children)?o.push(...s(c.children)):isString$1(c.children)&&o.push(c.children):o.push(c)}),o}return s(a)}const getSlotFunction=a=>{if(a)return isFunction$1(a)?a:()=>a},getComponentsFromVNode=(a,s)=>{var l;const o=[];if(isComponent(a,a.type))a.type.name===s?a.component&&o.push(a.component.uid):(l=a.component)!=null&&l.subTree&&o.push(...getComponentsFromVNode(a.component.subTree,s));else{const c=getChildrenArray(a);c&&o.push(...getComponentsFromChildren(c,s))}return o},getComponentsFromChildren=(a,s)=>{const l=[];if(a&&a.length>0)for(const o of a)l.push(...getComponentsFromVNode(o,s));return l};var ResizeObserver$2=defineComponent({name:"ResizeObserver",emits:["resize"],setup(a,{emit:s,slots:l}){let o;const c=ref(),u=computed(()=>isComponentInstance(c.value)?c.value.$el:c.value),d=g=>{g&&(o=new index$1(y=>{const $=y[0];s("resize",$)}),o.observe(g))},f=()=>{o&&(o.disconnect(),o=null)};return watch(u,g=>{o&&f(),g&&d(g)}),onMounted(()=>{u.value&&d(u.value)}),onUnmounted(()=>{f()}),()=>{var g,y;const $=getFirstComponent((y=(g=l.default)==null?void 0:g.call(l))!=null?y:[]);return $?cloneVNode($,{ref:c},!0):null}}});const target$1=typeof window>"u"?global:window,raf=target$1.requestAnimationFrame,caf=target$1.cancelAnimationFrame;function throttleByRaf(a){let s=0;const l=(...o)=>{s&&caf(s),s=raf(()=>{a(...o),s=0})};return l.cancel=()=>{caf(s),s=0},l}const NOOP=()=>{},getDocumentSize=()=>{const{body:a}=document,s=document.documentElement;let l;try{l=(window.top||window.self||window).document.body}catch{}return{height:Math.max(a.scrollHeight,a.offsetHeight,s.clientHeight,s.scrollHeight,s.offsetHeight,l?.scrollHeight||0,l?.clientHeight||0),width:Math.max(a.scrollWidth,a.offsetWidth,s.clientWidth,s.scrollWidth,s.offsetWidth,l?.scrollWidth||0,l?.clientWidth||0)}},isServerRendering=(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})(),on=isServerRendering?NOOP:(a,s,l,o=!1)=>{a.addEventListener(s,l,o)},off=isServerRendering?NOOP:(a,s,l,o=!1)=>{a.removeEventListener(s,l,o)},contains=(a,s)=>{if(!a||!s)return!1;let l=s;for(;l;){if(l===a)return!0;l=l.parentNode}return!1},getOverlay=a=>{const s=document.createElement("div");return s.setAttribute("class",`arco-overlay arco-overlay-${a}`),s},querySelector=(a,s)=>{var l;return isServerRendering?NOOP():(l=(s??document).querySelector(a))!=null?l:void 0},getElement=(a,s)=>{if(isString$1(a)){const l=a[0]==="#"?`[id='${a.slice(1)}']`:a;return querySelector(l,s)}return a},getRelativeRect=(a,s)=>{const l=a.getBoundingClientRect(),o=s.getBoundingClientRect();return{top:l.top-o.top,bottom:o.bottom-l.bottom,left:l.left-o.left,right:o.right-l.right,width:l.width,height:l.height}},isScroll=a=>a.tagName==="BODY"?document.documentElement.scrollHeight>window.innerHeight:a.scrollHeight>a.offsetHeight,getScrollBarWidth=a=>a.tagName==="BODY"?window.innerWidth-getDocumentSize().width:a.offsetWidth-a.clientWidth;var _export_sfc=(a,s)=>{for(const[l,o]of s)a[l]=o;return a},__defProp$16=Object.defineProperty,__getOwnPropSymbols$17=Object.getOwnPropertySymbols,__hasOwnProp$17=Object.prototype.hasOwnProperty,__propIsEnum$17=Object.prototype.propertyIsEnumerable,__defNormalProp$16=(a,s,l)=>s in a?__defProp$16(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$16=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$17.call(s,l)&&__defNormalProp$16(a,l,s[l]);if(__getOwnPropSymbols$17)for(var l of __getOwnPropSymbols$17(s))__propIsEnum$17.call(s,l)&&__defNormalProp$16(a,l,s[l]);return a};function getTargetRect(a){return isWindow(a)?{top:0,bottom:window.innerHeight}:a.getBoundingClientRect()}const _sfc_main$3e=defineComponent({name:"Affix",components:{ResizeObserver:ResizeObserver$2},props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},target:{type:[String,Object,Function]},targetContainer:{type:[String,Object,Function]}},emits:{change:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("affix"),{target:o,targetContainer:c}=toRefs(a),u=ref(),d=ref(),f=ref(!1),g=ref({}),y=ref({}),$=computed(()=>({[l]:f.value})),x=throttleByRaf(()=>{if(!u.value||!d.value)return;const{offsetTop:N,offsetBottom:R}=a,j=isUndefined(R)?"top":"bottom",ne=u.value.getBoundingClientRect(),se=getTargetRect(d.value);let ce=!1,fe={};const ea={width:`${u.value.offsetWidth}px`,height:`${u.value.offsetHeight}px`};j==="top"?(ce=ne.top-se.top<(N||0),fe=ce?{position:"fixed",top:`${se.top+(N||0)}px`}:{}):(ce=se.bottom-ne.bottom<(R||0),fe=ce?{position:"fixed",bottom:`${window.innerHeight-se.bottom+(R||0)}px`}:{}),ce!==f.value&&(f.value=ce,s("change",ce)),g.value=ea,y.value=__spreadValues$16(__spreadValues$16({},fe),ce?ea:{})});return onMounted(()=>{watchEffect(N=>{const R=o&&o.value!==window&&getElement(o.value)||window;d.value=R,R&&(on(R,"scroll",x),on(R,"resize",x),N(()=>{off(R,"scroll",x),off(R,"resize",x)}))}),watchEffect(N=>{if(!d.value)return;const R=c&&c.value!==window&&getElement(c.value)||window;R&&(on(R,"scroll",x),on(R,"resize",x),N(()=>{off(R,"scroll",x),off(R,"resize",x)}))})}),{wrapperRef:u,isFixed:f,classNames:$,placeholderStyles:g,fixedStyles:y,updatePositionThrottle:x}},methods:{updatePosition(){this.updatePositionThrottle()}}}),_hoisted_1$1y={ref:"wrapperRef"};function _sfc_render$30(a,s,l,o,c,u){const d=resolveComponent("ResizeObserver");return openBlock(),createBlock(d,{onResize:a.updatePositionThrottle},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1y,[a.isFixed?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle$1(a.placeholderStyles)},null,4)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(a.classNames),style:normalizeStyle$1(a.fixedStyles)},[createVNode$1(d,{onResize:a.updatePositionThrottle},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["onResize"])],6)],512)]),_:3},8,["onResize"])}var _Affix=_export_sfc(_sfc_main$3e,[["render",_sfc_render$30]]);const Affix=Object.assign(_Affix,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Affix.name,_Affix)}}),_sfc_main$3d=defineComponent({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup(){return{prefixCls:getPrefixCls("icon-hover")}}});function _sfc_render$2$(a,s,l,o,c,u){return openBlock(),createElementBlock("span",{class:normalizeClass([a.prefixCls,{[`${a.prefix}-icon-hover`]:a.prefix,[`${a.prefixCls}-size-${a.size}`]:a.size!=="medium",[`${a.prefixCls}-disabled`]:a.disabled}])},[renderSlot(a.$slots,"default")],2)}var IconHover=_export_sfc(_sfc_main$3d,[["render",_sfc_render$2$]]);const _sfc_main$3c=defineComponent({name:"IconClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-close`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1x=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$1a=createBaseVNode("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"},null,-1),_hoisted_3$13=[_hoisted_2$1a];function _sfc_render$2_(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$13,14,_hoisted_1$1x)}var _IconClose=_export_sfc(_sfc_main$3c,[["render",_sfc_render$2_]]);const IconClose=Object.assign(_IconClose,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconClose.name,_IconClose)}}),_sfc_main$3b=defineComponent({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-info-circle-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1w=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$19=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$12=[_hoisted_2$19];function _sfc_render$2Z(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$12,14,_hoisted_1$1w)}var _IconInfoCircleFill=_export_sfc(_sfc_main$3b,[["render",_sfc_render$2Z]]);const IconInfoCircleFill=Object.assign(_IconInfoCircleFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconInfoCircleFill.name,_IconInfoCircleFill)}}),_sfc_main$3a=defineComponent({name:"IconCheckCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-check-circle-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1v=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$18=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$11=[_hoisted_2$18];function _sfc_render$2Y(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$11,14,_hoisted_1$1v)}var _IconCheckCircleFill=_export_sfc(_sfc_main$3a,[["render",_sfc_render$2Y]]);const IconCheckCircleFill=Object.assign(_IconCheckCircleFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCheckCircleFill.name,_IconCheckCircleFill)}}),_sfc_main$39=defineComponent({name:"IconExclamationCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-exclamation-circle-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1u=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$17=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$10=[_hoisted_2$17];function _sfc_render$2X(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$10,14,_hoisted_1$1u)}var _IconExclamationCircleFill=_export_sfc(_sfc_main$39,[["render",_sfc_render$2X]]);const IconExclamationCircleFill=Object.assign(_IconExclamationCircleFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconExclamationCircleFill.name,_IconExclamationCircleFill)}}),_sfc_main$38=defineComponent({name:"IconCloseCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-close-circle-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1t=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$16=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$$=[_hoisted_2$16];function _sfc_render$2W(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$$,14,_hoisted_1$1t)}var _IconCloseCircleFill=_export_sfc(_sfc_main$38,[["render",_sfc_render$2W]]);const IconCloseCircleFill=Object.assign(_IconCloseCircleFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCloseCircleFill.name,_IconCloseCircleFill)}}),_sfc_main$37=defineComponent({name:"Alert",components:{IconHover,IconClose,IconInfoCircleFill,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},title:String,banner:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},emits:{close:a=>!0,afterClose:()=>!0},setup(a,{slots:s,emit:l}){const o=getPrefixCls("alert"),c=ref(!0),u=g=>{c.value=!1,l("close",g)},d=()=>{l("afterClose")},f=computed(()=>[o,`${o}-${a.type}`,{[`${o}-with-title`]:!!(a.title||s.title),[`${o}-banner`]:a.banner,[`${o}-center`]:a.center}]);return{prefixCls:o,cls:f,visible:c,handleClose:u,handleAfterLeave:d}}});function _sfc_render$2V(a,s,l,o,c,u){const d=resolveComponent("icon-info-circle-fill"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill"),$=resolveComponent("icon-close"),x=resolveComponent("icon-hover");return openBlock(),createBlock(Transition,{name:"zoom-in-top",onAfterLeave:a.handleAfterLeave},{default:withCtx(()=>[a.visible?(openBlock(),createElementBlock("div",{key:0,role:"alert",class:normalizeClass(a.cls)},[a.showIcon&&!(a.type==="normal"&&!a.$slots.icon)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon",{},()=>[a.type==="info"?(openBlock(),createBlock(d,{key:0})):a.type==="success"?(openBlock(),createBlock(f,{key:1})):a.type==="warning"?(openBlock(),createBlock(g,{key:2})):a.type==="error"?(openBlock(),createBlock(y,{key:3})):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-body`)},[a.title||a.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2)],2),a.$slots.action?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-action`)},[renderSlot(a.$slots,"action")],2)):createCommentVNode("v-if",!0),a.closable?(openBlock(),createElementBlock("div",{key:2,tabindex:"-1",role:"button","aria-label":"Close",class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...N)=>a.handleClose&&a.handleClose(...N))},[renderSlot(a.$slots,"close-element",{},()=>[createVNode$1(x,null,{default:withCtx(()=>[createVNode$1($)]),_:1})])],2)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)]),_:3},8,["onAfterLeave"])}var _Alert=_export_sfc(_sfc_main$37,[["render",_sfc_render$2V]]);const Alert=Object.assign(_Alert,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Alert.name,_Alert)}});function t(a){return typeof a=="object"&&a!=null&&a.nodeType===1}function e(a,s){return(!s||a!=="hidden")&&a!=="visible"&&a!=="clip"}function n(a,s){if(a.clientHeight<a.scrollHeight||a.clientWidth<a.scrollWidth){var l=getComputedStyle(a,null);return e(l.overflowY,s)||e(l.overflowX,s)||function(o){var c=function(u){if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}}(o);return!!c&&(c.clientHeight<o.scrollHeight||c.clientWidth<o.scrollWidth)}(a)}return!1}function r(a,s,l,o,c,u,d,f){return u<a&&d>s||u>a&&d<s?0:u<=a&&f<=l||d>=s&&f>=l?u-a-o:d>s&&f<l||u<a&&f>l?d-s+c:0}var i=function(a,s){var l=window,o=s.scrollMode,c=s.block,u=s.inline,d=s.boundary,f=s.skipOverflowHiddenElements,g=typeof d=="function"?d:function(Sa){return Sa!==d};if(!t(a))throw new TypeError("Invalid target");for(var y,$,x=document.scrollingElement||document.documentElement,N=[],R=a;t(R)&&g(R);){if((R=($=(y=R).parentElement)==null?y.getRootNode().host||null:$)===x){N.push(R);break}R!=null&&R===document.body&&n(R)&&!n(document.documentElement)||R!=null&&n(R,f)&&N.push(R)}for(var j=l.visualViewport?l.visualViewport.width:innerWidth,ne=l.visualViewport?l.visualViewport.height:innerHeight,se=window.scrollX||pageXOffset,ce=window.scrollY||pageYOffset,fe=a.getBoundingClientRect(),ea=fe.height,ta=fe.width,na=fe.top,aa=fe.right,ia=fe.bottom,sa=fe.left,ra=c==="start"||c==="nearest"?na:c==="end"?ia:na+ea/2,la=u==="center"?sa+ta/2:u==="end"?aa:sa,oa=[],ca=0;ca<N.length;ca++){var pa=N[ca],ua=pa.getBoundingClientRect(),da=ua.height,ha=ua.width,ga=ua.top,fa=ua.right,ma=ua.bottom,va=ua.left;if(o==="if-needed"&&na>=0&&sa>=0&&ia<=ne&&aa<=j&&na>=ga&&ia<=ma&&sa>=va&&aa<=fa)return oa;var ka=getComputedStyle(pa),ya=parseInt(ka.borderLeftWidth,10),ba=parseInt(ka.borderTopWidth,10),Ea=parseInt(ka.borderRightWidth,10),Ca=parseInt(ka.borderBottomWidth,10),$a=0,Pa=0,Da="offsetWidth"in pa?pa.offsetWidth-pa.clientWidth-ya-Ea:0,Ta="offsetHeight"in pa?pa.offsetHeight-pa.clientHeight-ba-Ca:0,Ba="offsetWidth"in pa?pa.offsetWidth===0?0:ha/pa.offsetWidth:0,wa="offsetHeight"in pa?pa.offsetHeight===0?0:da/pa.offsetHeight:0;if(x===pa)$a=c==="start"?ra:c==="end"?ra-ne:c==="nearest"?r(ce,ce+ne,ne,ba,Ca,ce+ra,ce+ra+ea,ea):ra-ne/2,Pa=u==="start"?la:u==="center"?la-j/2:u==="end"?la-j:r(se,se+j,j,ya,Ea,se+la,se+la+ta,ta),$a=Math.max(0,$a+ce),Pa=Math.max(0,Pa+se);else{$a=c==="start"?ra-ga-ba:c==="end"?ra-ma+Ca+Ta:c==="nearest"?r(ga,ma,da,ba,Ca+Ta,ra,ra+ea,ea):ra-(ga+da/2)+Ta/2,Pa=u==="start"?la-va-ya:u==="center"?la-(va+ha/2)+Da/2:u==="end"?la-fa+Ea+Da:r(va,fa,ha,ya,Ea+Da,la,la+ta,ta);var Oa=pa.scrollLeft,Aa=pa.scrollTop;ra+=Aa-($a=Math.max(0,Math.min(Aa+$a/wa,pa.scrollHeight-da/wa+Ta))),la+=Oa-(Pa=Math.max(0,Math.min(Oa+Pa/Ba,pa.scrollWidth-ha/Ba+Da)))}oa.push({el:pa,top:$a,left:Pa})}return oa},easeInBy=function(a){return function(s){return Math.pow(s,a)}},easeOutBy=function(a){return function(s){return 1-Math.abs(Math.pow(s-1,a))}},easeInOutBy=function(a){return function(s){return s<.5?easeInBy(a)(s*2)/2:easeOutBy(a)(s*2-1)/2+.5}},linear=function(a){return a},quadIn=easeInBy(2),quadOut=easeOutBy(2),quadInOut=easeInOutBy(2),cubicIn=easeInBy(3),cubicOut=easeOutBy(3),cubicInOut=easeInOutBy(3),quartIn=easeInBy(4),quartOut=easeOutBy(4),quartInOut=easeInOutBy(4),quintIn=easeInBy(5),quintOut=easeOutBy(5),quintInOut=easeInOutBy(5),sineIn=function(a){return 1+Math.sin(Math.PI/2*a-Math.PI/2)},sineOut=function(a){return Math.sin(Math.PI/2*a)},sineInOut=function(a){return(1+Math.sin(Math.PI*a-Math.PI/2))/2},bounceOut=function(a){var s=7.5625,l=2.75;return a<1/l?s*a*a:a<2/l?(a-=1.5/l,s*a*a+.75):a<2.5/l?(a-=2.25/l,s*a*a+.9375):(a-=2.625/l,s*a*a+.984375)},bounceIn=function(a){return 1-bounceOut(1-a)},bounceInOut=function(a){return a<.5?bounceIn(a*2)*.5:bounceOut(a*2-1)*.5+.5},easing=Object.freeze({linear,quadIn,quadOut,quadInOut,cubicIn,cubicOut,cubicInOut,quartIn,quartOut,quartInOut,quintIn,quintOut,quintInOut,sineIn,sineOut,sineInOut,bounceOut,bounceIn,bounceInOut}),Tween=function a(s){var l=s.from,o=s.to,c=s.duration,u=s.delay,d=s.easing,f=s.onStart,g=s.onUpdate,y=s.onFinish;for(var $ in l)o[$]===void 0&&(o[$]=l[$]);for(var x in o)l[x]===void 0&&(l[x]=o[x]);this.from=l,this.to=o,this.duration=c||500,this.delay=u||0,this.easing=d||"linear",this.onStart=f,this.onUpdate=g||function(){},this.onFinish=y,this.startTime=Date.now()+this.delay,this.started=!1,this.finished=!1,this.timer=null,this.keys={}};Tween.prototype.update=function a(){if(this.time=Date.now(),!(this.time<this.startTime)&&!this.finished){if(this.elapsed===this.duration){this.finished||(this.finished=!0,this.onFinish&&this.onFinish(this.keys));return}this.elapsed=this.time-this.startTime,this.elapsed=this.elapsed>this.duration?this.duration:this.elapsed;for(var s in this.to)this.keys[s]=this.from[s]+(this.to[s]-this.from[s])*easing[this.easing](this.elapsed/this.duration);this.started||(this.onStart&&this.onStart(this.keys),this.started=!0),this.onUpdate(this.keys)}};Tween.prototype.start=function a(){var s=this;this.startTime=Date.now()+this.delay;var l=function(){s.update(),s.timer=requestAnimationFrame(l),s.finished&&(cancelAnimationFrame(s.timer),s.timer=null)};l()};Tween.prototype.stop=function a(){cancelAnimationFrame(this.timer),this.timer=null};function slide(a,s,l){new Tween({from:{scrollTop:a.scrollTop},to:{scrollTop:s},easing:"quartOut",duration:300,onUpdate:c=>{a.scrollTop=c.scrollTop},onFinish:()=>{isFunction$1(l)&&l()}}).start()}const anchorInjectionKey=Symbol("ArcoAnchor"),BOUNDARY_POSITIONS=["start","end","center","nearest"],_sfc_main$36=defineComponent({name:"Anchor",props:{boundary:{type:[Number,String],default:"start",validator:a=>isNumber$1(a)||BOUNDARY_POSITIONS.includes(a)},lineLess:{type:Boolean,default:!1},scrollContainer:{type:[String,Object]},changeHash:{type:Boolean,default:!0},smooth:{type:Boolean,default:!0}},emits:{select:(a,s)=>!0,change:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("anchor"),o=ref(),c=ref(),u=reactive({}),d=ref(""),f=ref(!1),g=ref(),y=ref(),$=(na,aa)=>{na&&(u[na]=aa)},x=na=>{delete u[na]},N=(na,aa)=>{a.changeHash||na.preventDefault(),aa&&(R(aa),ne(aa)),s("select",aa,d.value)},R=na=>{try{const aa=getElement(na);if(!aa)return;let ia,sa=0;isNumber$1(a.boundary)?(ia="start",sa=a.boundary):ia=a.boundary;const ra=i(aa,{block:ia});if(!ra.length)return;const{el:la,top:oa}=ra[0],ca=oa-sa;slide(la,ca,()=>{f.value=!1}),f.value=!0}catch(aa){console.error(aa)}},j=throttleByRaf(()=>{if(f.value)return;const na=se();if(na&&na.id){const aa=`#${na.id}`;ne(aa)}}),ne=na=>{if(!u[na]&&o.value){const aa=getElement(`a[data-href='${na}']`,o.value);if(!aa)return;u[na]=aa}na!==d.value&&(d.value=na,nextTick(()=>{s("change",na)}))},se=()=>{if(!g.value||!y.value)return;const na=isNumber$1(a.boundary)?a.boundary:0,aa=y.value.getBoundingClientRect();for(const ia of Object.keys(u)){const sa=getElement(ia);if(sa){const{top:ra}=sa.getBoundingClientRect(),la=isWindow(g.value)?ra-na:ra-aa.top-na;if(la>=0&&la<=aa.height/2)return sa}}};watch(d,()=>{const na=u[d.value];!a.lineLess&&na&&c.value&&(c.value.style.top=`${na.offsetTop}px`)});const ce=()=>{g.value&&on(g.value,"scroll",j)},fe=()=>{g.value&&off(g.value,"scroll",j)},ea=()=>{a.scrollContainer?(g.value=isWindow(a.scrollContainer)?window:getElement(a.scrollContainer),y.value=isWindow(a.scrollContainer)?document.documentElement:getElement(a.scrollContainer)):(g.value=window,y.value=document.documentElement)};onMounted(()=>{ea();const na=decodeURIComponent(window.location.hash);na?(R(na),ne(na)):j(),ce()}),onBeforeUnmount(()=>{fe()}),provide(anchorInjectionKey,reactive({currentLink:d,addLink:$,removeLink:x,handleClick:N}));const ta=computed(()=>[l,{[`${l}-line-less`]:a.lineLess}]);return{prefixCls:l,cls:ta,anchorRef:o,lineSliderRef:c}}});function _sfc_render$2U(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{ref:"anchorRef",class:normalizeClass(a.cls)},[a.lineLess?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,ref:"lineSliderRef",class:normalizeClass(`${a.prefixCls}-line-slider`)},null,2)),createBaseVNode("ul",{class:normalizeClass(`${a.prefixCls}-list`)},[renderSlot(a.$slots,"default")],2)],2)}var _Anchor=_export_sfc(_sfc_main$36,[["render",_sfc_render$2U]]);const _sfc_main$35=defineComponent({name:"AnchorLink",props:{title:String,href:String},setup(a){const s=getPrefixCls("anchor"),l=`${s}-link`,o=ref(),c=inject(anchorInjectionKey,void 0);onMounted(()=>{a.href&&o.value&&c?.addLink(a.href,o.value)});const u=computed(()=>[`${l}-item`,{[`${l}-active`]:c?.currentLink===a.href}]);return{prefixCls:s,linkCls:l,cls:u,linkRef:o,handleClick:f=>c?.handleClick(f,a.href)}}}),_hoisted_1$1s=["href"];function _sfc_render$2T(a,s,l,o,c,u){return openBlock(),createElementBlock("li",{ref:"linkRef",class:normalizeClass(a.cls)},[createBaseVNode("a",{class:normalizeClass(a.linkCls),href:a.href,onClick:s[0]||(s[0]=(...d)=>a.handleClick&&a.handleClick(...d))},[renderSlot(a.$slots,"default",{},()=>[createTextVNode(toDisplayString(a.title),1)])],10,_hoisted_1$1s),a.$slots.sublist?(openBlock(),createElementBlock("ul",{key:0,class:normalizeClass(`${a.prefixCls}-sublist`)},[renderSlot(a.$slots,"sublist")],2)):createCommentVNode("v-if",!0)],2)}var AnchorLink=_export_sfc(_sfc_main$35,[["render",_sfc_render$2T]]);const Anchor=Object.assign(_Anchor,{Link:AnchorLink,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Anchor.name,_Anchor),a.component(l+AnchorLink.name,AnchorLink)}}),MESSAGE_TYPES=["info","success","warning","error"],INPUT_EVENTS=["onFocus","onFocusin","onFocusout","onBlur","onChange","onBeforeinput","onInput","onReset","onSubmit","onInvalid","onKeydown","onKeypress","onKeyup","onCopy","onCut","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onSelect","autocomplete","autofocus","maxlength","minlength","name","pattern","readonly","required"],_sfc_main$34=defineComponent({name:"IconLoading",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-loading`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1r=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$15=createBaseVNode("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"},null,-1),_hoisted_3$_=[_hoisted_2$15];function _sfc_render$2S(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$_,14,_hoisted_1$1r)}var _IconLoading=_export_sfc(_sfc_main$34,[["render",_sfc_render$2S]]);const IconLoading=Object.assign(_IconLoading,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconLoading.name,_IconLoading)}}),_sfc_main$33=defineComponent({name:"FeedbackIcon",components:{IconLoading,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill},props:{type:{type:String}},setup(a){const s=getPrefixCls("feedback-icon");return{cls:computed(()=>[s,`${s}-status-${a.type}`])}}});function _sfc_render$2R(a,s,l,o,c,u){const d=resolveComponent("icon-loading"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill");return openBlock(),createElementBlock("span",{class:normalizeClass(a.cls)},[a.type==="validating"?(openBlock(),createBlock(d,{key:0})):a.type==="success"?(openBlock(),createBlock(f,{key:1})):a.type==="warning"?(openBlock(),createBlock(g,{key:2})):a.type==="error"?(openBlock(),createBlock(y,{key:3})):createCommentVNode("v-if",!0)],2)}var FeedbackIcon=_export_sfc(_sfc_main$33,[["render",_sfc_render$2R]]);const Enter={key:"Enter",code:"Enter"},Backspace={key:"Backspace",code:"Backspace"},ArrowLeft={key:"ArrowLeft",code:"ArrowLeft"},ArrowRight={key:"ArrowRight",code:"ArrowRight"};var __defProp$15=Object.defineProperty,__getOwnPropSymbols$16=Object.getOwnPropertySymbols,__hasOwnProp$16=Object.prototype.hasOwnProperty,__propIsEnum$16=Object.prototype.propertyIsEnumerable,__defNormalProp$15=(a,s,l)=>s in a?__defProp$15(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$15=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$16.call(s,l)&&__defNormalProp$15(a,l,s[l]);if(__getOwnPropSymbols$16)for(var l of __getOwnPropSymbols$16(s))__propIsEnum$16.call(s,l)&&__defNormalProp$15(a,l,s[l]);return a};const omit=(a,s)=>{const l=__spreadValues$15({},a);for(const o of s)o in l&&delete l[o];return l};function pick(a,s){const l={};return s.forEach(o=>{const c=o;o in a&&(l[c]=a[c])}),l}const formItemInjectionKey=Symbol("ArcoFormItemContext"),formInjectionKey=Symbol("ArcoFormContext"),useFormItem=({size:a,disabled:s,error:l,uninject:o}={})=>{const c=o?{}:inject(formItemInjectionKey,{}),u=computed(()=>{var $;return($=a?.value)!=null?$:c.size}),d=computed(()=>s?.value||c.disabled),f=computed(()=>l?.value||c.error),g=toRef(c,"feedback"),y=toRef(c,"eventHandlers");return{formItemCtx:c,mergedSize:u,mergedDisabled:d,mergedError:f,feedback:g,eventHandlers:y}},useSize$1=(a,{defaultValue:s="medium"}={})=>{const l=inject(configProviderInjectionKey,void 0);return{mergedSize:computed(()=>{var c,u;return(u=(c=a?.value)!=null?c:l?.size)!=null?u:s})}};function useCursor(a){const s=ref();function l(){if(!a.value)return;const{selectionStart:c,selectionEnd:u,value:d}=a.value;if(c==null||u==null)return;const f=d.slice(0,Math.max(0,c)),g=d.slice(Math.max(0,u));s.value={selectionStart:c,selectionEnd:u,value:d,beforeTxt:f,afterTxt:g}}function o(){if(!a.value||!s.value)return;const{value:c}=a.value,{beforeTxt:u,afterTxt:d,selectionStart:f}=s.value;if(!u||!d||!f)return;let g=c.length;if(c.endsWith(d))g=c.length-d.length;else if(c.startsWith(u))g=u.length;else{const y=u[f-1],$=c.indexOf(y,f-1);$!==-1&&(g=$+1)}a.value.setSelectionRange(g,g)}return[l,o]}var __defProp$14=Object.defineProperty,__getOwnPropSymbols$15=Object.getOwnPropertySymbols,__hasOwnProp$15=Object.prototype.hasOwnProperty,__propIsEnum$15=Object.prototype.propertyIsEnumerable,__defNormalProp$14=(a,s,l)=>s in a?__defProp$14(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$14=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$15.call(s,l)&&__defNormalProp$14(a,l,s[l]);if(__getOwnPropSymbols$15)for(var l of __getOwnPropSymbols$15(s))__propIsEnum$15.call(s,l)&&__defNormalProp$14(a,l,s[l]);return a},_Input=defineComponent({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"}},emits:{"update:modelValue":a=>!0,input:(a,s)=>!0,change:(a,s)=>!0,pressEnter:a=>!0,clear:a=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s,slots:l,attrs:o}){const{size:c,disabled:u,error:d,modelValue:f}=toRefs(a),g=getPrefixCls("input"),y=ref(),{mergedSize:$,mergedDisabled:x,mergedError:N,feedback:R,eventHandlers:j}=useFormItem({size:c,disabled:u,error:d}),{mergedSize:ne}=useSize$1($),[se,ce]=useCursor(y),fe=ref(a.defaultValue),ea=computed(()=>{var Aa;return(Aa=a.modelValue)!=null?Aa:fe.value});watch(f,Aa=>{(isUndefined(Aa)||isNull(Aa))&&(fe.value="")});let ta=ea.value;const na=ref(!1),aa=computed(()=>a.allowClear&&!a.readonly&&!x.value&&!!ea.value),ia=ref(!1),sa=ref(""),ra=Aa=>{var Sa;return isFunction$1(a.wordLength)?a.wordLength(Aa):(Sa=Aa.length)!=null?Sa:0},la=computed(()=>ra(ea.value)),oa=computed(()=>N.value||!!(isObject$1(a.maxLength)&&a.maxLength.errorOnly&&la.value>pa.value)),ca=computed(()=>isObject$1(a.maxLength)&&!!a.maxLength.errorOnly),pa=computed(()=>isObject$1(a.maxLength)?a.maxLength.length:a.maxLength),ua=computed(()=>{const Aa=ra("a");return Math.floor(pa.value/Aa)}),da=Aa=>{var Sa,Fa;pa.value&&!ca.value&&ra(Aa)>pa.value&&(Aa=(Fa=(Sa=a.wordSlice)==null?void 0:Sa.call(a,Aa,pa.value))!=null?Fa:Aa.slice(0,ua.value)),fe.value=Aa,s("update:modelValue",Aa)},ha=Aa=>{y.value&&Aa.target!==y.value&&(Aa.preventDefault(),y.value.focus())},ga=(Aa,Sa)=>{var Fa,Ia;Aa!==ta&&(ta=Aa,s("change",Aa,Sa),(Ia=(Fa=j.value)==null?void 0:Fa.onChange)==null||Ia.call(Fa,Sa))},fa=Aa=>{var Sa,Fa;na.value=!0,ta=ea.value,s("focus",Aa),(Fa=(Sa=j.value)==null?void 0:Sa.onFocus)==null||Fa.call(Sa,Aa)},ma=Aa=>{var Sa,Fa;na.value=!1,ga(ea.value,Aa),s("blur",Aa),(Fa=(Sa=j.value)==null?void 0:Sa.onBlur)==null||Fa.call(Sa,Aa)},va=Aa=>{var Sa,Fa,Ia;const{value:Ga,selectionStart:Ya,selectionEnd:Va}=Aa.target;if(Aa.type==="compositionend"){if(ia.value=!1,sa.value="",pa.value&&!ca.value&&la.value>=pa.value&&ra(Ga)>pa.value&&Ya===Va){ka();return}da(Ga),s("input",Ga,Aa),(Fa=(Sa=j.value)==null?void 0:Sa.onInput)==null||Fa.call(Sa,Aa),ka()}else ia.value=!0,sa.value=ea.value+((Ia=Aa.data)!=null?Ia:"")},ka=()=>{se(),nextTick(()=>{y.value&&ea.value!==y.value.value&&(y.value.value=ea.value,ce())})},ya=Aa=>{var Sa,Fa;const{value:Ia}=Aa.target;if(!ia.value){if(pa.value&&!ca.value&&la.value>=pa.value&&ra(Ia)>pa.value&&Aa.inputType==="insertText"){ka();return}da(Ia),s("input",Ia,Aa),(Fa=(Sa=j.value)==null?void 0:Sa.onInput)==null||Fa.call(Sa,Aa),ka()}},ba=Aa=>{da(""),ga("",Aa),s("clear",Aa)},Ea=Aa=>{const Sa=Aa.key||Aa.code;!ia.value&&Sa===Enter.key&&(ga(ea.value,Aa),s("pressEnter",Aa))},Ca=computed(()=>[`${g}-outer`,`${g}-outer-size-${ne.value}`,{[`${g}-outer-has-suffix`]:!!l.suffix,[`${g}-outer-disabled`]:x.value}]),$a=computed(()=>[`${g}-wrapper`,{[`${g}-error`]:oa.value,[`${g}-disabled`]:x.value,[`${g}-focus`]:na.value}]),Pa=computed(()=>[g,`${g}-size-${ne.value}`]),Da=computed(()=>omit(o,INPUT_EVENTS)),Ta=computed(()=>pick(o,INPUT_EVENTS)),Ba=computed(()=>{const Aa=__spreadValues$14(__spreadValues$14({},Ta.value),a.inputAttrs);return oa.value&&(Aa["aria-invalid"]=!0),Aa}),wa=Aa=>{var Sa;return createVNode$1("span",mergeProps({class:$a.value,onMousedown:ha},Aa?void 0:Da.value),[l.prefix&&createVNode$1("span",{class:`${g}-prefix`},[l.prefix()]),createVNode$1("input",mergeProps({ref:y,class:Pa.value,value:ea.value,type:a.type,placeholder:a.placeholder,readonly:a.readonly,disabled:x.value,onInput:ya,onKeydown:Ea,onFocus:fa,onBlur:ma,onCompositionstart:va,onCompositionupdate:va,onCompositionend:va},Ba.value),null),aa.value&&createVNode$1(IconHover,{prefix:g,class:`${g}-clear-btn`,onClick:ba},{default:()=>[createVNode$1(IconClose,null,null)]}),(l.suffix||!!a.maxLength&&a.showWordLimit||!!R.value)&&createVNode$1("span",{class:[`${g}-suffix`,{[`${g}-suffix-has-feedback`]:R.value}]},[!!a.maxLength&&a.showWordLimit&&createVNode$1("span",{class:`${g}-word-limit`},[la.value,createTextVNode("/"),pa.value]),(Sa=l.suffix)==null?void 0:Sa.call(l),!!R.value&&createVNode$1(FeedbackIcon,{type:R.value},null)])])};return{inputRef:y,render:()=>l.prepend||l.append?createVNode$1("span",mergeProps({class:Ca.value},Da.value),[l.prepend&&createVNode$1("span",{class:`${g}-prepend`},[l.prepend()]),wa(!0),l.append&&createVNode$1("span",{class:`${g}-append`},[l.append()])]):wa()}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const _sfc_main$32=defineComponent({name:"IconSearch",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-search`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1q=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$14=createBaseVNode("path",{d:"M33.072 33.071c6.248-6.248 6.248-16.379 0-22.627-6.249-6.249-16.38-6.249-22.628 0-6.248 6.248-6.248 16.379 0 22.627 6.248 6.248 16.38 6.248 22.628 0Zm0 0 8.485 8.485"},null,-1),_hoisted_3$Z=[_hoisted_2$14];function _sfc_render$2Q(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$Z,14,_hoisted_1$1q)}var _IconSearch=_export_sfc(_sfc_main$32,[["render",_sfc_render$2Q]]);const IconSearch=Object.assign(_IconSearch,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconSearch.name,_IconSearch)}}),buttonGroupInjectionKey=Symbol("ArcoButtonGroup"),_sfc_main$31=defineComponent({name:"Button",components:{IconLoading},props:{type:{type:String},shape:{type:String},status:{type:String},size:{type:String},long:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean},htmlType:{type:String,default:"button"},href:String},emits:{click:a=>!0},setup(a,{emit:s}){const{size:l,disabled:o}=toRefs(a),c=getPrefixCls("btn"),u=inject(buttonGroupInjectionKey,void 0),d=computed(()=>{var R;return(R=l.value)!=null?R:u?.size}),f=computed(()=>!!(o.value||u?.disabled)),{mergedSize:g,mergedDisabled:y}=useFormItem({size:d,disabled:f}),{mergedSize:$}=useSize$1(g),x=computed(()=>{var R,j,ne,se,ce,fe;return[c,`${c}-${(j=(R=a.type)!=null?R:u?.type)!=null?j:"secondary"}`,`${c}-shape-${(se=(ne=a.shape)!=null?ne:u?.shape)!=null?se:"square"}`,`${c}-size-${$.value}`,`${c}-status-${(fe=(ce=a.status)!=null?ce:u?.status)!=null?fe:"normal"}`,{[`${c}-long`]:a.long,[`${c}-loading`]:a.loading,[`${c}-disabled`]:y.value,[`${c}-link`]:isString$1(a.href)}]});return{prefixCls:c,cls:x,mergedDisabled:y,handleClick:R=>{if(a.disabled||a.loading){R.preventDefault();return}s("click",R)}}}}),_hoisted_1$1p=["href"],_hoisted_2$13=["type","disabled"];function _sfc_render$2P(a,s,l,o,c,u){const d=resolveComponent("icon-loading");return a.href?(openBlock(),createElementBlock("a",{key:0,class:normalizeClass([a.cls,{[`${a.prefixCls}-only-icon`]:a.$slots.icon&&!a.$slots.default}]),href:a.mergedDisabled||a.loading?void 0:a.href,onClick:s[0]||(s[0]=(...f)=>a.handleClick&&a.handleClick(...f))},[a.loading||a.$slots.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[a.loading?(openBlock(),createBlock(d,{key:0,spin:"true"})):renderSlot(a.$slots,"icon",{key:1})],2)):createCommentVNode("v-if",!0),renderSlot(a.$slots,"default")],10,_hoisted_1$1p)):(openBlock(),createElementBlock("button",{key:1,class:normalizeClass([a.cls,{[`${a.prefixCls}-only-icon`]:a.$slots.icon&&!a.$slots.default}]),type:a.htmlType,disabled:a.mergedDisabled,onClick:s[1]||(s[1]=(...f)=>a.handleClick&&a.handleClick(...f))},[a.loading||a.$slots.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[a.loading?(openBlock(),createBlock(d,{key:0,spin:!0})):renderSlot(a.$slots,"icon",{key:1})],2)):createCommentVNode("v-if",!0),renderSlot(a.$slots,"default")],10,_hoisted_2$13))}var _Button=_export_sfc(_sfc_main$31,[["render",_sfc_render$2P]]);const _sfc_main$30=defineComponent({name:"ButtonGroup",props:{type:{type:String},status:{type:String},shape:{type:String},size:{type:String},disabled:{type:Boolean}},setup(a){const{type:s,size:l,status:o,disabled:c,shape:u}=toRefs(a),d=getPrefixCls("btn-group");return provide(buttonGroupInjectionKey,reactive({type:s,size:l,shape:u,status:o,disabled:c})),{prefixCls:d}}});function _sfc_render$2O(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[renderSlot(a.$slots,"default")],2)}var ButtonGroup=_export_sfc(_sfc_main$30,[["render",_sfc_render$2O]]);const Button=Object.assign(_Button,{Group:ButtonGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Button.name,_Button),a.component(l+ButtonGroup.name,ButtonGroup)}});var InputSearch=defineComponent({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{size:o}=toRefs(a),c=getPrefixCls("input-search"),{mergedSize:u}=useSize$1(o),d=ref(),f=x=>{d.value.inputRef&&s("search",d.value.inputRef.value,x)},g=()=>{var x;return createVNode$1(Fragment,null,[a.loading?createVNode$1(IconLoading,null,null):createVNode$1(IconHover,{onClick:f},{default:()=>[createVNode$1(IconSearch,null,null)]}),(x=l.suffix)==null?void 0:x.call(l)])},y=()=>{var x;let N={};return a.buttonText||l["button-default"]||l["button-icon"]?N={default:(x=l["button-default"])!=null?x:a.buttonText?()=>a.buttonText:void 0,icon:l["button-icon"]}:N={icon:()=>createVNode$1(IconSearch,null,null)},createVNode$1(Button,mergeProps({type:"primary",class:`${c}-btn`,disabled:a.disabled,size:u.value,loading:a.loading},a.buttonProps,{onClick:f}),N)};return{inputRef:d,render:()=>createVNode$1(_Input,{ref:d,class:c,size:u.value,disabled:a.disabled},{prepend:l.prepend,prefix:l.prefix,suffix:a.searchButton?l.suffix:g,append:a.searchButton?y:l.append})}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const _sfc_main$2$=defineComponent({name:"IconEye",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-eye`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1o=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$12=createBaseVNode("path",{"clip-rule":"evenodd",d:"M24 37c6.627 0 12.627-4.333 18-13-5.373-8.667-11.373-13-18-13-6.627 0-12.627 4.333-18 13 5.373 8.667 11.373 13 18 13Z"},null,-1),_hoisted_3$Y=createBaseVNode("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"},null,-1),_hoisted_4$k=[_hoisted_2$12,_hoisted_3$Y];function _sfc_render$2N(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$k,14,_hoisted_1$1o)}var _IconEye=_export_sfc(_sfc_main$2$,[["render",_sfc_render$2N]]);const IconEye=Object.assign(_IconEye,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconEye.name,_IconEye)}}),_sfc_main$2_=defineComponent({name:"IconEyeInvisible",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-eye-invisible`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1n=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$11=createBaseVNode("path",{d:"M14 14.5c-2.69 2-5.415 5.33-8 9.5 5.373 8.667 11.373 13 18 13 3.325 0 6.491-1.09 9.5-3.271M17.463 12.5C19 11 21.75 11 24 11c6.627 0 12.627 4.333 18 13-1.766 2.848-3.599 5.228-5.5 7.14"},null,-1),_hoisted_3$X=createBaseVNode("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM6.852 7.103l34.294 34.294"},null,-1),_hoisted_4$j=[_hoisted_2$11,_hoisted_3$X];function _sfc_render$2M(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$j,14,_hoisted_1$1n)}var _IconEyeInvisible=_export_sfc(_sfc_main$2_,[["render",_sfc_render$2M]]);const IconEyeInvisible=Object.assign(_IconEyeInvisible,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconEyeInvisible.name,_IconEyeInvisible)}});function useState(a){const s=ref(a);return[s,o=>{s.value=o}]}function useMergeState(a,s){const{value:l}=toRefs(s),[o,c]=useState(isUndefined(l.value)?a:l.value);return watch(l,d=>{isUndefined(d)&&c(void 0)}),[computed(()=>isUndefined(l.value)?o.value:l.value),c,o]}const _sfc_main$2Z=defineComponent({name:"InputPassword",components:{IconEye,IconEyeInvisible,AIconHover:IconHover,AInput:_Input},props:{visibility:{type:Boolean,default:void 0},defaultVisibility:{type:Boolean,default:!0},invisibleButton:{type:Boolean,default:!0}},emits:["visibility-change","update:visibility"],setup(a,{emit:s}){const{visibility:l,defaultVisibility:o}=toRefs(a),c=ref(),u=()=>{g(!d.value)},[d,f]=useMergeState(o.value,reactive({value:l})),g=y=>{y!==d.value&&(s("visibility-change",y),s("update:visibility",y),f(y))};return{inputRef:c,mergedVisible:d,handleInvisible:u}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}}});function _sfc_render$2L(a,s,l,o,c,u){const d=resolveComponent("icon-eye"),f=resolveComponent("icon-eye-invisible"),g=resolveComponent("a-icon-hover"),y=resolveComponent("a-input");return openBlock(),createBlock(y,{ref:"inputRef",type:a.mergedVisible?"password":"text"},createSlots({_:2},[a.$slots.prepend?{name:"prepend",fn:withCtx(()=>[renderSlot(a.$slots,"prepend")])}:void 0,a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0,a.invisibleButton||a.$slots.suffix?{name:"suffix",fn:withCtx(()=>[a.invisibleButton?(openBlock(),createBlock(g,{key:0,onClick:a.handleInvisible,onMousedown:s[0]||(s[0]=withModifiers(()=>{},["prevent"])),onMouseup:s[1]||(s[1]=withModifiers(()=>{},["prevent"]))},{default:withCtx(()=>[a.mergedVisible?(openBlock(),createBlock(f,{key:1})):(openBlock(),createBlock(d,{key:0}))]),_:1},8,["onClick"])):createCommentVNode("v-if",!0),renderSlot(a.$slots,"suffix")])}:void 0,a.$slots.append?{name:"append",fn:withCtx(()=>[renderSlot(a.$slots,"append")])}:void 0]),1032,["type"])}var InputPassword=_export_sfc(_sfc_main$2Z,[["render",_sfc_render$2L]]);const _sfc_main$2Y=defineComponent({name:"InputGroup",setup(){return{prefixCls:getPrefixCls("input-group")}}});function _sfc_render$2K(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[renderSlot(a.$slots,"default")],2)}var InputGroup=_export_sfc(_sfc_main$2Y,[["render",_sfc_render$2K]]);const Input=Object.assign(_Input,{Search:InputSearch,Password:InputPassword,Group:InputGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Input.name,_Input),a.component(l+InputGroup.name,InputGroup),a.component(l+InputSearch.name,InputSearch),a.component(l+InputPassword.name,InputPassword)}});var __defProp$13=Object.defineProperty,__getOwnPropSymbols$14=Object.getOwnPropertySymbols,__hasOwnProp$14=Object.prototype.hasOwnProperty,__propIsEnum$14=Object.prototype.propertyIsEnumerable,__defNormalProp$13=(a,s,l)=>s in a?__defProp$13(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$13=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$14.call(s,l)&&__defNormalProp$13(a,l,s[l]);if(__getOwnPropSymbols$14)for(var l of __getOwnPropSymbols$14(s))__propIsEnum$14.call(s,l)&&__defNormalProp$13(a,l,s[l]);return a};const getViewPortSize=()=>{const{height:a,width:s}=getDocumentSize();return{width:Math.min(s,window.innerWidth),height:Math.min(a,window.innerHeight)}},getElementScrollRect=(a,s)=>{var l,o;const c=a.getBoundingClientRect();return{top:c.top,bottom:c.bottom,left:c.left,right:c.right,scrollTop:c.top-s.top,scrollBottom:c.bottom-s.top,scrollLeft:c.left-s.left,scrollRight:c.right-s.left,width:(l=a.offsetWidth)!=null?l:a.clientWidth,height:(o=a.offsetHeight)!=null?o:a.clientHeight}},getBoundaryPosition=a=>{switch(a){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},changePosition=(a,s)=>{switch(s){case"top":switch(a){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return a}case"bottom":switch(a){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return a}case"left":switch(a){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return a}case"right":switch(a){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return a}default:return a}},getFitPosition=(a,s,{containerRect:l,triggerRect:o,popupRect:c,offset:u,translate:d})=>{const f=getBoundaryPosition(a),g=getViewPortSize(),y={top:l.top+s.top,bottom:g.height-(l.top+s.top+c.height),left:l.left+s.left,right:g.width-(l.left+s.left+c.width)};let $=a;if(f==="top"&&y.top<0)if(o.top>c.height)s.top=-l.top;else{const x=getPopupOffset("bottom",o,c,{offset:u,translate:d});g.height-(l.top+x.top+c.height)>0&&($=changePosition(a,"bottom"),s.top=x.top)}if(f==="bottom"&&y.bottom<0)if(g.height-o.bottom>c.height)s.top=-l.top+(g.height-c.height);else{const x=getPopupOffset("top",o,c,{offset:u,translate:d});l.top+x.top>0&&($=changePosition(a,"top"),s.top=x.top)}if(f==="left"&&y.left<0)if(o.left>c.width)s.left=-l.left;else{const x=getPopupOffset("right",o,c,{offset:u,translate:d});g.width-(l.left+x.left+c.width)>0&&($=changePosition(a,"right"),s.left=x.left)}if(f==="right"&&y.right<0)if(g.width-o.right>c.width)s.left=-l.left+(g.width-c.width);else{const x=getPopupOffset("left",o,c,{offset:u,translate:d});l.left+x.left>0&&($=changePosition(a,"left"),s.left=x.left)}return(f==="top"||f==="bottom")&&(y.left<0?s.left=-l.left:y.right<0&&(s.left=-l.left+(g.width-c.width))),(f==="left"||f==="right")&&(y.top<0?s.top=-l.top:y.bottom<0&&(s.top=-l.top+(g.height-c.height))),{popupPosition:s,position:$}},getPopupOffset=(a,s,l,{offset:o=0,translate:c=[0,0]}={})=>{var u;const d=(u=isArray$1(c)?c:c[a])!=null?u:[0,0];switch(a){case"top":return{left:s.scrollLeft+Math.round(s.width/2)-Math.round(l.width/2)+d[0],top:s.scrollTop-l.height-o+d[1]};case"tl":return{left:s.scrollLeft+d[0],top:s.scrollTop-l.height-o+d[1]};case"tr":return{left:s.scrollRight-l.width+d[0],top:s.scrollTop-l.height-o+d[1]};case"bottom":return{left:s.scrollLeft+Math.round(s.width/2)-Math.round(l.width/2)+d[0],top:s.scrollBottom+o+d[1]};case"bl":return{left:s.scrollLeft+d[0],top:s.scrollBottom+o+d[1]};case"br":return{left:s.scrollRight-l.width+d[0],top:s.scrollBottom+o+d[1]};case"left":return{left:s.scrollLeft-l.width-o+d[0],top:s.scrollTop+Math.round(s.height/2)-Math.round(l.height/2)+d[1]};case"lt":return{left:s.scrollLeft-l.width-o+d[0],top:s.scrollTop+d[1]};case"lb":return{left:s.scrollLeft-l.width-o+d[0],top:s.scrollBottom-l.height+d[1]};case"right":return{left:s.scrollRight+o+d[0],top:s.scrollTop+Math.round(s.height/2)-Math.round(l.height/2)+d[1]};case"rt":return{left:s.scrollRight+o+d[0],top:s.scrollTop+d[1]};case"rb":return{left:s.scrollRight+o+d[0],top:s.scrollBottom-l.height+d[1]};default:return{left:0,top:0}}},getTransformOrigin=a=>{let s="0";["top","bottom"].includes(a)?s="50%":["left","lt","lb","tr","br"].includes(a)&&(s="100%");let l="0";return["left","right"].includes(a)?l="50%":["top","tl","tr","lb","rb"].includes(a)&&(l="100%"),`${s} ${l}`},getPopupStyle=(a,s,l,o,{offset:c=0,translate:u=[0,0],customStyle:d={},autoFitPosition:f=!1}={})=>{let g=a,y=getPopupOffset(a,l,o,{offset:c,translate:u});if(f){const x=getFitPosition(a,y,{containerRect:s,popupRect:o,triggerRect:l,offset:c,translate:u});y=x.popupPosition,g=x.position}return{style:__spreadValues$13({left:`${y.left}px`,top:`${y.top}px`},d),position:g}},getArrowStyle=(a,s,l,{customStyle:o={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(a)){let u=Math.abs(s.scrollLeft+s.width/2-l.scrollLeft);return u>l.width-8&&(s.width>l.width?u=l.width/2:u=l.width-8),["top","tl","tr"].includes(a)?__spreadValues$13({left:`${u}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},o):__spreadValues$13({left:`${u}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)}let c=Math.abs(s.scrollTop+s.height/2-l.scrollTop);return c>l.height-8&&(s.height>l.height?c=l.height/2:c=l.height-8),["left","lt","lb"].includes(a)?__spreadValues$13({top:`${c}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},o):__spreadValues$13({top:`${c}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},o)},isScrollElement=a=>a.scrollHeight>a.offsetHeight||a.scrollWidth>a.offsetWidth,getScrollElements=a=>{var s;const l=[];let o=a;for(;o&&o!==document.documentElement;)isScrollElement(o)&&l.push(o),o=(s=o.parentElement)!=null?s:void 0;return l},useFirstElement=()=>{const a={},s=ref(),l=()=>{const o=getFirstElementFromChildren(a.value);o!==s.value&&(s.value=o)};return onMounted(()=>l()),onUpdated(()=>l()),{children:a,firstElement:s}};var ResizeObserver$1=defineComponent({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(a,{emit:s,slots:l}){const{children:o,firstElement:c}=useFirstElement();let u;const d=g=>{g&&(u=new index$1(y=>{const $=y[0];s("resize",$)}),u.observe(g))},f=()=>{u&&(u.disconnect(),u=null)};return watch(c,g=>{u&&f(),g&&d(g)}),onBeforeUnmount(()=>{u&&f()}),()=>{var g;return o.value=(g=l.default)==null?void 0:g.call(l),o.value}}});function usePickSlots(a,s){const l=ref(a[s]);return onUpdated(()=>{const o=a[s];l.value!==o&&(l.value=o)}),l}const triggerInjectionKey=Symbol("ArcoTrigger"),POPUP_BASE_Z_INDEX=1e3,MESSAGE_BASE_Z_INDEX=5e3,Z_INDEX_STEP=1;class PopupManager{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=s=>(s==="message"?Array.from(this.popupStack.message).pop()||MESSAGE_BASE_Z_INDEX:Array.from(this.popupStack.popup).pop()||POPUP_BASE_Z_INDEX)+Z_INDEX_STEP,this.add=s=>{const l=this.getNextZIndex(s);return this.popupStack[s].add(l),s==="dialog"&&this.popupStack.popup.add(l),l},this.delete=(s,l)=>{this.popupStack[l].delete(s),l==="dialog"&&this.popupStack.popup.delete(s)},this.isLastDialog=s=>this.popupStack.dialog.size>1?s===Array.from(this.popupStack.dialog).pop():!0}}const popupManager=new PopupManager;function usePopupManager(a,{visible:s,runOnMounted:l}={}){const o=ref(0),c=()=>{o.value=popupManager.add(a)},u=()=>{popupManager.delete(o.value,a)},d=()=>a==="dialog"?popupManager.isLastDialog(o.value):!1;return watch(()=>s?.value,f=>{f?c():u()},{immediate:!0}),l&&(onMounted(()=>{c()}),onBeforeUnmount(()=>{u()})),{zIndex:readonly(o),open:c,close:u,isLastDialog:d}}const useResizeObserver=({elementRef:a,onResize:s})=>{let l;return{createResizeObserver:()=>{a.value&&(l=new index$1(u=>{const d=u[0];isFunction$1(s)&&s(d)}),l.observe(a.value))},destroyResizeObserver:()=>{l&&(l.disconnect(),l=null)}}};var ClientOnly=defineComponent({name:"ClientOnly",setup(a,{slots:s}){const l=ref(!1);return onMounted(()=>l.value=!0),()=>{var o;return l.value?(o=s.default)==null?void 0:o.call(s):null}}});const useTeleportContainer=({popupContainer:a,visible:s,defaultContainer:l="body",documentContainer:o})=>{const c=ref(a.value),u=ref(),d=()=>{const f=getElement(a.value),g=f?a.value:l,y=f??(o?document.documentElement:getElement(l));g!==c.value&&(c.value=g),y!==u.value&&(u.value=y)};return onMounted(()=>d()),watch(s,f=>{c.value!==a.value&&f&&d()}),{teleportContainer:c,containerRef:u}};var __defProp$12=Object.defineProperty,__defProps$y=Object.defineProperties,__getOwnPropDescs$y=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$13=Object.getOwnPropertySymbols,__hasOwnProp$13=Object.prototype.hasOwnProperty,__propIsEnum$13=Object.prototype.propertyIsEnumerable,__defNormalProp$12=(a,s,l)=>s in a?__defProp$12(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$12=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$13.call(s,l)&&__defNormalProp$12(a,l,s[l]);if(__getOwnPropSymbols$13)for(var l of __getOwnPropSymbols$13(s))__propIsEnum$13.call(s,l)&&__defNormalProp$12(a,l,s[l]);return a},__spreadProps$y=(a,s)=>__defProps$y(a,__getOwnPropDescs$y(s));const TRIGGER_EVENTS=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var _Trigger=defineComponent({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},scrollToCloseDistance:{type:Number,default:0}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(a,{emit:s,slots:l,attrs:o}){const{popupContainer:c}=toRefs(a),u=getPrefixCls("trigger"),d=computed(()=>omit(o,TRIGGER_EVENTS)),f=inject(configProviderInjectionKey,void 0),g=computed(()=>[].concat(a.trigger)),y=new Set,$=inject(triggerInjectionKey,void 0),{children:x,firstElement:N}=useFirstElement(),R=ref(),j=ref(a.defaultPopupVisible),ne=ref(a.position),se=ref({}),ce=ref({}),fe=ref({}),ea=ref(),ta=ref({top:0,left:0});let na=null,aa=null;const ia=computed(()=>{var Na;return(Na=a.popupVisible)!=null?Na:j.value}),{teleportContainer:sa,containerRef:ra}=useTeleportContainer({popupContainer:c,visible:ia,documentContainer:!0}),{zIndex:la}=usePopupManager("popup",{visible:ia});let oa=0,ca=!1,pa=!1;const ua=()=>{oa&&(window.clearTimeout(oa),oa=0)},da=Na=>{if(a.alignPoint){const{pageX:za,pageY:an}=Na;ta.value={top:an,left:za}}},ha=()=>{if(!N.value||!R.value||!ra.value)return;const Na=ra.value.getBoundingClientRect(),za=a.alignPoint?{top:ta.value.top,bottom:ta.value.top,left:ta.value.left,right:ta.value.left,scrollTop:ta.value.top,scrollBottom:ta.value.top,scrollLeft:ta.value.left,scrollRight:ta.value.left,width:0,height:0}:getElementScrollRect(N.value,Na),an=()=>getElementScrollRect(R.value,Na),bn=an(),{style:En,position:Pn}=getPopupStyle(a.position,Na,za,bn,{offset:a.popupOffset,translate:a.popupTranslate,customStyle:a.popupStyle,autoFitPosition:a.autoFitPosition});a.autoFitTransformOrigin&&(ce.value={transformOrigin:getTransformOrigin(Pn)}),a.autoFitPopupMinWidth?En.minWidth=`${za.width}px`:a.autoFitPopupWidth&&(En.width=`${za.width}px`),ne.value!==Pn&&(ne.value=Pn),se.value=En,a.showArrow&&nextTick(()=>{fe.value=getArrowStyle(Pn,za,an(),{customStyle:a.arrowStyle})})},ga=(Na,za)=>{if(Na===ia.value&&oa===0)return;const an=()=>{j.value=Na,s("update:popupVisible",Na),s("popupVisibleChange",Na),Na&&nextTick(()=>{ha()})};Na||(na=null,aa=null),za?(ua(),Na!==ia.value&&(oa=window.setTimeout(an,za))):an()},fa=Na=>{var za;(za=o.onClick)==null||za.call(o,Na),!(a.disabled||ia.value&&!a.clickToClose)&&(g.value.includes("click")?(da(Na),ga(!ia.value)):g.value.includes("contextMenu")&&ia.value&&ga(!1))},ma=Na=>{var za;(za=o.onMouseenter)==null||za.call(o,Na),!(a.disabled||!g.value.includes("hover"))&&(da(Na),ga(!0,a.mouseEnterDelay))},va=Na=>{$?.onMouseenter(Na),ma(Na)},ka=Na=>{var za;(za=o.onMouseleave)==null||za.call(o,Na),!(a.disabled||!g.value.includes("hover"))&&ga(!1,a.mouseLeaveDelay)},ya=Na=>{$?.onMouseleave(Na),ka(Na)},ba=Na=>{var za;(za=o.onFocusin)==null||za.call(o,Na),!(a.disabled||!g.value.includes("focus"))&&ga(!0,a.focusDelay)},Ea=Na=>{var za;(za=o.onFocusout)==null||za.call(o,Na),!(a.disabled||!g.value.includes("focus"))&&a.blurToClose&&ga(!1)},Ca=Na=>{var za;(za=o.onContextmenu)==null||za.call(o,Na),!(a.disabled||!g.value.includes("contextMenu")||ia.value&&!a.clickToClose)&&(da(Na),ga(!ia.value),Na.preventDefault())};provide(triggerInjectionKey,reactive({onMouseenter:va,onMouseleave:ya,addChildRef:Na=>{y.add(Na),$?.addChildRef(Na)},removeChildRef:Na=>{y.delete(Na),$?.removeChildRef(Na)}}));const Da=()=>{off(document.documentElement,"mousedown",wa),ca=!1},Ta=usePickSlots(l,"content"),Ba=computed(()=>{var Na;return a.hideEmpty&&isEmptyChildren((Na=Ta.value)==null?void 0:Na.call(Ta))}),wa=Na=>{var za,an,bn;if(!((za=N.value)!=null&&za.contains(Na.target)||(an=R.value)!=null&&an.contains(Na.target))){for(const En of y)if((bn=En.value)!=null&&bn.contains(Na.target))return;Da(),ga(!1)}},Oa=(Na,za)=>{const[an,bn]=Na,{scrollTop:En,scrollLeft:Pn}=za;return Math.abs(En-an)>=a.scrollToCloseDistance||Math.abs(Pn-bn)>=a.scrollToCloseDistance},Aa=throttleByRaf(Na=>{if(ia.value)if(a.scrollToClose||f?.scrollToClose){const za=Na.target;na||(na=[za.scrollTop,za.scrollLeft]),Oa(na,za)?ga(!1):ha()}else ha()}),Sa=()=>{off(window,"scroll",Fa),pa=!1},Fa=throttleByRaf(Na=>{const za=Na.target.documentElement;aa||(aa=[za.scrollTop,za.scrollLeft]),Oa(aa,za)&&(ga(!1),Sa())}),Ia=()=>{ia.value&&ha()},Ga=()=>{Ia(),s("resize")},Ya=Na=>{a.preventFocus&&Na.preventDefault()};$?.addChildRef(R);const Va=computed(()=>ia.value?a.openedClass:void 0);let La;watch(ia,Na=>{if(a.clickOutsideToClose&&(!Na&&ca?Da():Na&&!ca&&(on(document.documentElement,"mousedown",wa),ca=!0)),(a.scrollToClose||f?.scrollToClose)&&(on(window,"scroll",Fa),pa=!0),a.updateAtScroll||f?.updateAtScroll){if(Na){La=getScrollElements(N.value);for(const za of La)za.addEventListener("scroll",Aa)}else if(La){for(const za of La)za.removeEventListener("scroll",Aa);La=void 0}}Na&&(pn.value=!0)}),watch(()=>[a.autoFitPopupWidth,a.autoFitPopupMinWidth],()=>{ia.value&&ha()});const{createResizeObserver:Za,destroyResizeObserver:rn}=useResizeObserver({elementRef:ra,onResize:Ia});onMounted(()=>{if(Za(),ia.value&&(ha(),a.clickOutsideToClose&&!ca&&(on(document.documentElement,"mousedown",wa),ca=!0),a.updateAtScroll||f?.updateAtScroll)){La=getScrollElements(N.value);for(const Na of La)Na.addEventListener("scroll",Aa)}}),onUpdated(()=>{ia.value&&ha()}),onDeactivated(()=>{ga(!1)}),onBeforeUnmount(()=>{if($?.removeChildRef(R),rn(),ca&&Da(),pa&&Sa(),La){for(const Na of La)Na.removeEventListener("scroll",Aa);La=void 0}});const pn=ref(ia.value),fn=ref(!1),mn=()=>{fn.value=!0},Dn=()=>{fn.value=!1,ia.value&&s("show")},Ra=()=>{fn.value=!1,ia.value||(pn.value=!1,s("hide"))};return()=>{var Na,za;return x.value=(za=(Na=l.default)==null?void 0:Na.call(l))!=null?za:[],mergeFirstChild(x.value,{class:Va.value,onClick:fa,onMouseenter:ma,onMouseleave:ka,onFocusin:ba,onFocusout:Ea,onContextmenu:Ca}),createVNode$1(Fragment,null,[a.autoFixPosition?createVNode$1(ResizeObserver$1,{onResize:Ga},{default:()=>[x.value]}):x.value,createVNode$1(ClientOnly,null,{default:()=>[createVNode$1(Teleport,{to:sa.value,disabled:!a.renderToBody},{default:()=>[(!a.unmountOnClose||ia.value||pn.value)&&!Ba.value&&createVNode$1(ResizeObserver$1,{onResize:Ia},{default:()=>[createVNode$1("div",mergeProps({ref:R,class:[`${u}-popup`,`${u}-position-${ne.value}`],style:__spreadProps$y(__spreadValues$12({},se.value),{zIndex:la.value,pointerEvents:fn.value?"none":"auto"}),"trigger-placement":ne.value,onMouseenter:va,onMouseleave:ya,onMousedown:Ya},d.value),[createVNode$1(Transition,{name:a.animationName,duration:a.duration,appear:!0,onBeforeEnter:mn,onAfterEnter:Dn,onBeforeLeave:mn,onAfterLeave:Ra},{default:()=>{var an;return[withDirectives(createVNode$1("div",{class:`${u}-popup-wrapper`,style:ce.value},[createVNode$1("div",{class:[`${u}-content`,a.contentClass],style:a.contentStyle},[(an=l.content)==null?void 0:an.call(l)]),a.showArrow&&createVNode$1("div",{ref:ea,class:[`${u}-arrow`,a.arrowClass],style:fe.value},null)]),[[vShow,ia.value]])]}})])]})]})]})])}}});const Trigger=Object.assign(_Trigger,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Trigger.name,_Trigger)}}),_sfc_main$2X=defineComponent({name:"IconEmpty",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-empty`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1m=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$10=createBaseVNode("path",{d:"M24 5v6m7 1 4-4m-18 4-4-4m28.5 22H28s-1 3-4 3-4-3-4-3H6.5M40 41H8a2 2 0 0 1-2-2v-8.46a2 2 0 0 1 .272-1.007l6.15-10.54A2 2 0 0 1 14.148 18H33.85a2 2 0 0 1 1.728.992l6.149 10.541A2 2 0 0 1 42 30.541V39a2 2 0 0 1-2 2Z"},null,-1),_hoisted_3$W=[_hoisted_2$10];function _sfc_render$2J(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$W,14,_hoisted_1$1m)}var _IconEmpty=_export_sfc(_sfc_main$2X,[["render",_sfc_render$2J]]);const IconEmpty=Object.assign(_IconEmpty,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconEmpty.name,_IconEmpty)}});var Empty$1=defineComponent({name:"Empty",inheritAttrs:!1,props:{description:String,imgSrc:String,inConfigProvider:{type:Boolean,default:!1}},setup(a,{slots:s,attrs:l}){const o=getPrefixCls("empty"),{t:c}=useI18n(),u=inject(configProviderInjectionKey,void 0);return()=>{var d,f,g,y;return!a.inConfigProvider&&u?.slots.empty&&!(s.image||a.imgSrc||a.description)?u.slots.empty({component:"empty"}):createVNode$1("div",mergeProps({class:o},l),[createVNode$1("div",{class:`${o}-image`},[(f=(d=s.image)==null?void 0:d.call(s))!=null?f:a.imgSrc?createVNode$1("img",{src:a.imgSrc,alt:a.description||"empty"},null):createVNode$1(IconEmpty,null,null)]),createVNode$1("div",{class:`${o}-description`},[(y=(g=s.default)==null?void 0:g.call(s))!=null?y:a.description||c("empty.description")])])}}});const Empty=Object.assign(Empty$1,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+Empty$1.name,Empty$1)}}),DOT_NUMBER=5;var DotLoading=defineComponent({name:"DotLoading",props:{size:{type:Number}},setup(a){const s=getPrefixCls("dot-loading");return()=>{const l=a.size?{width:`${a.size}px`,height:`${a.size}px`}:{};return createVNode$1("div",{class:s,style:{width:a.size?`${a.size*7}px`:void 0,height:a.size?`${a.size}px`:void 0}},[Array(DOT_NUMBER).fill(1).map((o,c)=>createVNode$1("div",{class:`${s}-item`,key:c,style:l},null))])}}}),_Spin=defineComponent({name:"Spin",props:{size:{type:Number},loading:Boolean,dot:Boolean,tip:String,hideIcon:{type:Boolean,default:!1}},setup(a,{slots:s}){const l=getPrefixCls("spin"),o=inject(configProviderInjectionKey,void 0),c=computed(()=>[l,{[`${l}-loading`]:a.loading,[`${l}-with-tip`]:a.tip&&!s.default}]),u=()=>{if(s.icon){const f=getFirstComponent(s.icon());if(f)return cloneVNode(f,{spin:!0})}return s.element?s.element():a.dot?createVNode$1(DotLoading,{size:a.size},null):o?.slots.loading?o.slots.loading():createVNode$1(IconLoading,{spin:!0,size:a.size},null)},d=()=>{var f,g,y;const $=a.size?{fontSize:`${a.size}px`}:void 0,x=!!((f=s.tip)!=null?f:a.tip);return createVNode$1(Fragment,null,[!a.hideIcon&&createVNode$1("div",{class:`${l}-icon`,style:$},[u()]),x&&createVNode$1("div",{class:`${l}-tip`},[(y=(g=s.tip)==null?void 0:g.call(s))!=null?y:a.tip])])};return()=>createVNode$1("div",{class:c.value},[s.default?createVNode$1(Fragment,null,[s.default(),a.loading&&createVNode$1("div",{class:`${l}-mask`},[createVNode$1("div",{class:`${l}-mask-icon`},[d()])])]):d()])}});const Spin=Object.assign(_Spin,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Spin.name,_Spin)}}),_sfc_main$2W=defineComponent({name:"Thumb",props:{data:{type:Object},direction:{type:String,default:"horizontal"},alwaysShow:{type:Boolean,default:!1},both:{type:Boolean,default:!1}},emits:["scroll"],setup(a,{emit:s}){const l=getPrefixCls("scrollbar"),o=ref(!1),c=ref(),u=ref(),d=computed(()=>a.direction==="horizontal"?{size:"width",direction:"left",offset:"offsetWidth",client:"clientX"}:{size:"height",direction:"top",offset:"offsetHeight",client:"clientY"}),f=ref(0),g=ref(!1),y=ref(0),$=computed(()=>{var fe,ea;return{[d.value.size]:`${(ea=(fe=a.data)==null?void 0:fe.thumbSize)!=null?ea:0}px`,[d.value.direction]:`${f.value}px`}}),x=fe=>{fe.preventDefault(),u.value&&(y.value=fe[d.value.client]-u.value.getBoundingClientRect()[d.value.direction],g.value=!0,on(window,"mousemove",j),on(window,"mouseup",ne),on(window,"contextmenu",ne))},N=fe=>{var ea,ta,na,aa;if(fe.preventDefault(),u.value){const ia=R(fe[d.value.client]>u.value.getBoundingClientRect()[d.value.direction]?f.value+((ta=(ea=a.data)==null?void 0:ea.thumbSize)!=null?ta:0):f.value-((aa=(na=a.data)==null?void 0:na.thumbSize)!=null?aa:0));ia!==f.value&&(f.value=ia,s("scroll",ia))}},R=fe=>fe<0?0:a.data&&fe>a.data.max?a.data.max:fe,j=fe=>{if(c.value&&u.value){const ea=R(fe[d.value.client]-c.value.getBoundingClientRect()[d.value.direction]-y.value);ea!==f.value&&(f.value=ea,s("scroll",ea))}},ne=()=>{g.value=!1,off(window,"mousemove",j),off(window,"mouseup",ne)},se=fe=>{g.value||(fe=R(fe),fe!==f.value&&(f.value=fe))},ce=computed(()=>[`${l}-thumb`,`${l}-thumb-direction-${a.direction}`,{[`${l}-thumb-dragging`]:g.value}]);return{visible:o,trackRef:c,thumbRef:u,prefixCls:l,thumbCls:ce,thumbStyle:$,handleThumbMouseDown:x,handleTrackClick:N,setOffset:se}}});function _sfc_render$2I(a,s,l,o,c,u){return openBlock(),createBlock(Transition,null,{default:withCtx(()=>[createBaseVNode("div",{ref:"trackRef",class:normalizeClass([`${a.prefixCls}-track`,`${a.prefixCls}-track-direction-${a.direction}`]),onMousedown:s[1]||(s[1]=withModifiers((...d)=>a.handleTrackClick&&a.handleTrackClick(...d),["self"]))},[createBaseVNode("div",{ref:"thumbRef",class:normalizeClass(a.thumbCls),style:normalizeStyle$1(a.thumbStyle),onMousedown:s[0]||(s[0]=(...d)=>a.handleThumbMouseDown&&a.handleThumbMouseDown(...d))},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-thumb-bar`)},null,2)],38)],34)]),_:1})}var Thumb=_export_sfc(_sfc_main$2W,[["render",_sfc_render$2I]]);const THUMB_MIN_SIZE=20,TRACK_SIZE=15,_sfc_main$2V=defineComponent({name:"Scrollbar",components:{ResizeObserver:ResizeObserver$1,Thumb},inheritAttrs:!1,props:{type:{type:String,default:"embed"},outerClass:[String,Object,Array],outerStyle:{type:[String,Object,Array]},hide:{type:Boolean,default:!1},disableHorizontal:{type:Boolean,default:!1},disableVertical:{type:Boolean,default:!1}},emits:{scroll:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("scrollbar"),o=ref(),c=ref(),u=ref(),d=ref(),f=ref(),g=ref(!1),y=ref(!1),$=computed(()=>g.value&&!a.disableHorizontal),x=computed(()=>y.value&&!a.disableVertical),N=ref(!1),R=()=>{var ta,na,aa,ia,sa,ra;if(o.value){const{clientWidth:la,clientHeight:oa,offsetWidth:ca,offsetHeight:pa,scrollWidth:ua,scrollHeight:da,scrollTop:ha,scrollLeft:ga}=o.value;g.value=ua>la,y.value=da>oa,N.value=$.value&&x.value;const fa=a.type==="embed"&&N.value?ca-TRACK_SIZE:ca,ma=a.type==="embed"&&N.value?pa-TRACK_SIZE:pa,va=Math.round(fa/Math.min(ua/la,fa/THUMB_MIN_SIZE)),ka=fa-va,ya=(ua-la)/ka,ba=Math.round(ma/Math.min(da/oa,ma/THUMB_MIN_SIZE)),Ea=ma-ba,Ca=(da-oa)/Ea;if(c.value={ratio:ya,thumbSize:va,max:ka},u.value={ratio:Ca,thumbSize:ba,max:Ea},ha>0){const $a=Math.round(ha/((na=(ta=u.value)==null?void 0:ta.ratio)!=null?na:1));(aa=f.value)==null||aa.setOffset($a)}if(ga>0){const $a=Math.round(ga/((sa=(ia=u.value)==null?void 0:ia.ratio)!=null?sa:1));(ra=d.value)==null||ra.setOffset($a)}}};onMounted(()=>{R()});const j=()=>{R()},ne=ta=>{var na,aa,ia,sa,ra,la;if(o.value){if($.value&&!a.disableHorizontal){const oa=Math.round(o.value.scrollLeft/((aa=(na=c.value)==null?void 0:na.ratio)!=null?aa:1));(ia=d.value)==null||ia.setOffset(oa)}if(x.value&&!a.disableVertical){const oa=Math.round(o.value.scrollTop/((ra=(sa=u.value)==null?void 0:sa.ratio)!=null?ra:1));(la=f.value)==null||la.setOffset(oa)}}s("scroll",ta)},se=ta=>{var na,aa;o.value&&o.value.scrollTo({left:ta*((aa=(na=c.value)==null?void 0:na.ratio)!=null?aa:1)})},ce=ta=>{var na,aa;o.value&&o.value.scrollTo({top:ta*((aa=(na=u.value)==null?void 0:na.ratio)!=null?aa:1)})},fe=computed(()=>{const ta={};return a.type==="track"&&($.value&&(ta.paddingBottom=`${TRACK_SIZE}px`),x.value&&(ta.paddingRight=`${TRACK_SIZE}px`)),[ta,a.outerStyle]}),ea=computed(()=>[`${l}`,`${l}-type-${a.type}`,{[`${l}-both`]:N.value},a.outerClass]);return{prefixCls:l,cls:ea,style:fe,containerRef:o,horizontalThumbRef:d,verticalThumbRef:f,horizontalData:c,verticalData:u,isBoth:N,hasHorizontalScrollbar:$,hasVerticalScrollbar:x,handleResize:j,handleScroll:ne,handleHorizontalScroll:se,handleVerticalScroll:ce}},methods:{scrollTo(a,s){var l,o;isObject$1(a)?(l=this.$refs.containerRef)==null||l.scrollTo(a):(a||s)&&((o=this.$refs.containerRef)==null||o.scrollTo(a,s))},scrollTop(a){var s;(s=this.$refs.containerRef)==null||s.scrollTo({top:a})},scrollLeft(a){var s;(s=this.$refs.containerRef)==null||s.scrollTo({left:a})}}});function _sfc_render$2H(a,s,l,o,c,u){const d=resolveComponent("ResizeObserver"),f=resolveComponent("thumb");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls),style:normalizeStyle$1(a.style)},[createVNode$1(d,{onResize:a.handleResize},{default:withCtx(()=>[createBaseVNode("div",mergeProps({ref:"containerRef",class:`${a.prefixCls}-container`},a.$attrs,{onScroll:s[0]||(s[0]=(...g)=>a.handleScroll&&a.handleScroll(...g))}),[createVNode$1(d,{onResize:a.handleResize},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["onResize"])],16)]),_:3},8,["onResize"]),!a.hide&&a.hasHorizontalScrollbar?(openBlock(),createBlock(f,{key:0,ref:"horizontalThumbRef",data:a.horizontalData,direction:"horizontal",both:a.isBoth,onScroll:a.handleHorizontalScroll},null,8,["data","both","onScroll"])):createCommentVNode("v-if",!0),!a.hide&&a.hasVerticalScrollbar?(openBlock(),createBlock(f,{key:1,ref:"verticalThumbRef",data:a.verticalData,direction:"vertical",both:a.isBoth,onScroll:a.handleVerticalScroll},null,8,["data","both","onScroll"])):createCommentVNode("v-if",!0)],6)}var _Scrollbar=_export_sfc(_sfc_main$2V,[["render",_sfc_render$2H]]);const Scrollbar=Object.assign(_Scrollbar,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Scrollbar.name,_Scrollbar)}}),useComponentRef=a=>{const s=ref(),l=()=>isComponentInstance(s.value)?s.value.$refs[a]:s.value,o=ref();return onMounted(()=>{o.value=l()}),watch([s],()=>{o.value=l()}),{componentRef:s,elementRef:o}};var __defProp$11=Object.defineProperty,__getOwnPropSymbols$12=Object.getOwnPropertySymbols,__hasOwnProp$12=Object.prototype.hasOwnProperty,__propIsEnum$12=Object.prototype.propertyIsEnumerable,__defNormalProp$11=(a,s,l)=>s in a?__defProp$11(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$11=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$12.call(s,l)&&__defNormalProp$11(a,l,s[l]);if(__getOwnPropSymbols$12)for(var l of __getOwnPropSymbols$12(s))__propIsEnum$12.call(s,l)&&__defNormalProp$11(a,l,s[l]);return a};const useScrollbar=a=>{const s=computed(()=>!!a.value),l=computed(()=>{if(a.value)return __spreadValues$11({type:"embed"},isBoolean$1(a.value)?void 0:a.value)});return{displayScrollbar:s,scrollbarProps:l}},_sfc_main$2U=defineComponent({name:"SelectDropdown",components:{ScrollbarComponent:Scrollbar,Empty,Spin},props:{loading:Boolean,empty:Boolean,virtualList:Boolean,bottomOffset:{type:Number,default:0},scrollbar:{type:[Boolean,Object],default:!0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1}},emits:["scroll","reachBottom"],setup(a,{emit:s,slots:l}){var o,c,u;const{scrollbar:d}=toRefs(a),f=getPrefixCls("select-dropdown"),g=inject(configProviderInjectionKey,void 0),y=(u=(c=g==null?void 0:(o=g.slots).empty)==null?void 0:c.call(o,{component:"select"}))==null?void 0:u[0],{componentRef:$,elementRef:x}=useComponentRef("containerRef"),{displayScrollbar:N,scrollbarProps:R}=useScrollbar(d),j=se=>{const{scrollTop:ce,scrollHeight:fe,offsetHeight:ea}=se.target;fe-(ce+ea)<=a.bottomOffset&&s("reachBottom",se),s("scroll",se)},ne=computed(()=>[f,{[`${f}-has-header`]:!!l.header,[`${f}-has-footer`]:!!l.footer}]);return{prefixCls:f,SelectEmpty:y,cls:ne,wrapperRef:x,wrapperComRef:$,handleScroll:j,displayScrollbar:N,scrollbarProps:R}}});function _sfc_render$2G(a,s,l,o,c,u){const d=resolveComponent("spin");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[a.$slots.header&&(!a.empty||a.showHeaderOnEmpty)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-header`)},[renderSlot(a.$slots,"header")],2)):createCommentVNode("v-if",!0),a.loading?(openBlock(),createBlock(d,{key:1,class:normalizeClass(`${a.prefixCls}-loading`)},null,8,["class"])):a.empty?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-empty`)},[renderSlot(a.$slots,"empty",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(a.SelectEmpty?a.SelectEmpty:"Empty")))])],2)):createCommentVNode("v-if",!0),a.virtualList&&!a.loading&&!a.empty?renderSlot(a.$slots,"virtual-list",{key:3}):createCommentVNode("v-if",!0),a.virtualList?createCommentVNode("v-if",!0):withDirectives((openBlock(),createBlock(resolveDynamicComponent(a.displayScrollbar?"ScrollbarComponent":"div"),mergeProps({key:4,ref:"wrapperComRef",class:`${a.prefixCls}-list-wrapper`},a.scrollbarProps,{onScroll:a.handleScroll}),{default:withCtx(()=>[createBaseVNode("ul",{class:normalizeClass(`${a.prefixCls}-list`)},[renderSlot(a.$slots,"default")],2)]),_:3},16,["class","onScroll"])),[[vShow,!a.loading&&!a.empty]]),a.$slots.footer&&(!a.empty||a.showFooterOnEmpty)?(openBlock(),createElementBlock("div",{key:5,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer")],2)):createCommentVNode("v-if",!0)],2)}var SelectDropdown=_export_sfc(_sfc_main$2U,[["render",_sfc_render$2G]]),IconCheck$1=defineComponent({name:"IconCheck",render(){return createVNode$1("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",width:"200",height:"200",fill:"currentColor"},[createVNode$1("path",{d:"M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z","p-id":"840"},null)])}});const checkboxGroupKey=Symbol("ArcoCheckboxGroup");var _Checkbox=defineComponent({name:"Checkbox",components:{IconCheck:IconCheck$1,IconHover},props:{modelValue:{type:[Boolean,Array],default:void 0},defaultChecked:{type:Boolean,default:!1},value:{type:[String,Number,Boolean]},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},uninjectGroupContext:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{disabled:o,modelValue:c}=toRefs(a),u=getPrefixCls("checkbox"),d=ref(),f=a.uninjectGroupContext?void 0:inject(checkboxGroupKey,void 0),g=f?.name==="ArcoCheckboxGroup",{mergedDisabled:y,eventHandlers:$}=useFormItem({disabled:o}),x=ref(a.defaultChecked),N=computed(()=>{var ta;return g?f?.computedValue:(ta=a.modelValue)!=null?ta:x.value}),R=computed(()=>{var ta;return isArray$1(N.value)?N.value.includes((ta=a.value)!=null?ta:!0):N.value}),j=computed(()=>f?.disabled||y?.value||!R.value&&f?.isMaxed),ne=ta=>{ta.stopPropagation()},se=ta=>{var na,aa,ia,sa;const{checked:ra}=ta.target;let la=ra;if(isArray$1(N.value)){const oa=new Set(N.value);ra?oa.add((na=a.value)!=null?na:!0):oa.delete((aa=a.value)!=null?aa:!0),la=Array.from(oa)}x.value=ra,g&&isArray$1(la)?f?.handleChange(la,ta):(s("update:modelValue",la),s("change",la,ta),(sa=(ia=$.value)==null?void 0:ia.onChange)==null||sa.call(ia,ta)),nextTick(()=>{d.value&&d.value.checked!==R.value&&(d.value.checked=R.value)})},ce=computed(()=>[u,{[`${u}-checked`]:R.value,[`${u}-indeterminate`]:a.indeterminate,[`${u}-disabled`]:j.value}]),fe=ta=>{var na,aa;(aa=(na=$.value)==null?void 0:na.onFocus)==null||aa.call(na,ta)},ea=ta=>{var na,aa;(aa=(na=$.value)==null?void 0:na.onBlur)==null||aa.call(na,ta)};return watch(c,ta=>{(isUndefined(ta)||isNull(ta))&&(x.value=!1)}),watch(N,ta=>{var na;let aa;isArray$1(ta)?aa=ta.includes((na=a.value)!=null?na:!0):aa=ta,x.value!==aa&&(x.value=aa),d.value&&d.value.checked!==aa&&(d.value.checked=aa)}),()=>{var ta,na,aa,ia;return createVNode$1("label",{"aria-disabled":j.value,class:ce.value},[createVNode$1("input",{ref:d,type:"checkbox",checked:R.value,value:a.value,class:`${u}-target`,disabled:j.value,onClick:ne,onChange:se,onFocus:fe,onBlur:ea},null),(ia=(aa=(na=l.checkbox)!=null?na:(ta=f?.slots)==null?void 0:ta.checkbox)==null?void 0:aa({checked:R.value,disabled:j.value}))!=null?ia:createVNode$1(IconHover,{class:`${u}-icon-hover`,disabled:j.value||R.value},{default:()=>[createVNode$1("div",{class:`${u}-icon`},[R.value&&createVNode$1(IconCheck$1,{class:`${u}-icon-check`},null)])]}),l.default&&createVNode$1("span",{class:`${u}-label`},[l.default()])])}}}),CheckboxGroup=defineComponent({name:"CheckboxGroup",props:{modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:()=>[]},max:{type:Number},options:{type:Array},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{disabled:o}=toRefs(a),c=getPrefixCls("checkbox-group"),{mergedDisabled:u,eventHandlers:d}=useFormItem({disabled:o}),f=ref(a.defaultValue),g=computed(()=>isArray$1(a.modelValue)?a.modelValue:f.value),y=computed(()=>a.max===void 0?!1:g.value.length>=a.max),$=computed(()=>{var j;return((j=a.options)!=null?j:[]).map(ne=>isString$1(ne)||isNumber$1(ne)?{label:ne,value:ne}:ne)});provide(checkboxGroupKey,reactive({name:"ArcoCheckboxGroup",computedValue:g,disabled:u,isMaxed:y,slots:l,handleChange:(j,ne)=>{var se,ce;f.value=j,s("update:modelValue",j),s("change",j,ne),(ce=(se=d.value)==null?void 0:se.onChange)==null||ce.call(se,ne)}}));const N=computed(()=>[c,`${c}-direction-${a.direction}`]);watch(()=>a.modelValue,j=>{isArray$1(j)?f.value=[...j]:f.value=[]});const R=()=>$.value.map(j=>{const ne=g.value.includes(j.value);return createVNode$1(_Checkbox,{key:j.value,value:j.value,disabled:j.disabled||!ne&&y.value,indeterminate:j.indeterminate,modelValue:ne},{default:()=>[l.label?l.label({data:j}):isFunction$1(j.label)?j.label():j.label]})});return()=>{var j;return createVNode$1("span",{class:N.value},[$.value.length>0?R():(j=l.default)==null?void 0:j.call(l)])}}});const Checkbox=Object.assign(_Checkbox,{Group:CheckboxGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Checkbox.name,_Checkbox),a.component(l+CheckboxGroup.name,CheckboxGroup)}}),selectInjectionKey=Symbol("ArcoSelectContext");var __defProp$10=Object.defineProperty,__defProps$x=Object.defineProperties,__getOwnPropDescs$x=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$11=Object.getOwnPropertySymbols,__hasOwnProp$11=Object.prototype.hasOwnProperty,__propIsEnum$11=Object.prototype.propertyIsEnumerable,__defNormalProp$10=(a,s,l)=>s in a?__defProp$10(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$10=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$11.call(s,l)&&__defNormalProp$10(a,l,s[l]);if(__getOwnPropSymbols$11)for(var l of __getOwnPropSymbols$11(s))__propIsEnum$11.call(s,l)&&__defNormalProp$10(a,l,s[l]);return a},__spreadProps$x=(a,s)=>__defProps$x(a,__getOwnPropDescs$x(s));const isGroupOption=a=>isObject$1(a)&&"isGroup"in a,isGroupOptionInfo=a=>isObject$1(a)&&"isGroup"in a,getValueString=(a,s="value")=>String(isObject$1(a)?a[s]:a),getKeyFromValue=(a,s="value")=>isObject$1(a)?`__arco__option__object__${a[s]}`:a||isNumber$1(a)||isString$1(a)||isBoolean$1(a)?`__arco__option__${typeof a}-${a}`:"",hasEmptyStringKey=a=>a.has("__arco__option__string-"),createOptionInfo=(a,{valueKey:s,fieldNames:l,origin:o,index:c=-1})=>{var u;if(isObject$1(a)){const f=a[l.value];return{raw:a,index:c,key:getKeyFromValue(f,s),origin:o,value:f,label:(u=a[l.label])!=null?u:getValueString(f,s),render:a[l.render],disabled:!!a[l.disabled],tagProps:a[l.tagProps]}}const d={value:a,label:String(a),disabled:!1};return __spreadValues$10({raw:d,index:c,key:getKeyFromValue(a,s),origin:o},d)},getOptionInfos$1=(a,{valueKey:s,fieldNames:l,origin:o,optionInfoMap:c})=>{var u;const d=[];for(const f of a)if(isGroupOption(f)){const g=getOptionInfos$1((u=f.options)!=null?u:[],{valueKey:s,fieldNames:l,origin:o,optionInfoMap:c});g.length>0&&d.push(__spreadProps$x(__spreadValues$10({},f),{key:`__arco__group__${f.label}`,options:g}))}else{const g=createOptionInfo(f,{valueKey:s,fieldNames:l,origin:o});d.push(g),c.get(g.key)||c.set(g.key,g)}return d},getValidOptions=(a,{inputValue:s,filterOption:l})=>{const o=c=>{var u;const d=[];for(const f of c)if(isGroupOptionInfo(f)){const g=o((u=f.options)!=null?u:[]);g.length>0&&d.push(__spreadProps$x(__spreadValues$10({},f),{options:g}))}else isValidOption(f,{inputValue:s,filterOption:l})&&d.push(f);return d};return o(a)},isValidOption=(a,{inputValue:s,filterOption:l})=>isFunction$1(l)?!s||l(s,a.raw):l?a.label.toLowerCase().includes((s??"").toLowerCase()):!0,isEqualObject=(a,s)=>{if(!a||!s||a.length!==s.length)return!1;for(const l of Object.keys(a))if(!isEqual$1(a[l],s[l]))return!1;return!0},isEqualArray=(a,s)=>{if(!a||!s)return!1;const{length:l}=a;if(l!==s.length)return!1;for(let o=0;o<l;o++)if(!isEqual$1(a[o],s[o]))return!1;return!0},isEqual$1=(a,s)=>{const l=Object.prototype.toString.call(a);return l!==Object.prototype.toString.call(s)?!1:l==="[object Object]"?isEqualObject(a,s):l==="[object Array]"?isEqualArray(a,s):l==="[object Function]"?a===s?!0:a.toString()===s.toString():a===s},_sfc_main$2T=defineComponent({name:"Option",components:{Checkbox},props:{value:{type:[String,Number,Boolean,Object],default:void 0},label:String,disabled:Boolean,tagProps:{type:Object},extra:{type:Object},index:{type:Number},internal:Boolean},setup(a){const{disabled:s,tagProps:l,index:o}=toRefs(a),c=getPrefixCls("select-option"),u=inject(selectInjectionKey,void 0),d=getCurrentInstance(),f=ref(),g=ref(l.value);watch(l,(aa,ia)=>{isEqual$1(aa,ia)||(g.value=aa)});const y=ref(""),$=computed(()=>{var aa,ia;return(ia=(aa=a.value)!=null?aa:a.label)!=null?ia:y.value}),x=computed(()=>{var aa;return(aa=a.label)!=null?aa:y.value}),N=computed(()=>getKeyFromValue($.value,u?.valueKey)),R=computed(()=>{var aa;return(aa=u?.component)!=null?aa:"li"}),j=()=>{var aa;if(!a.label&&f.value){const ia=(aa=f.value.textContent)!=null?aa:"";y.value!==ia&&(y.value=ia)}};onMounted(()=>j()),onUpdated(()=>j());const ne=computed(()=>{var aa;return(aa=u?.valueKeys.includes(N.value))!=null?aa:!1}),se=computed(()=>u?.activeKey===N.value);let ce=ref(!0);if(!a.internal){const aa=reactive({raw:{value:$,label:x,disabled:s,tagProps:g},ref:f,index:o,key:N,origin:"slot",value:$,label:x,disabled:s,tagProps:g});ce=computed(()=>isValidOption(aa,{inputValue:u?.inputValue,filterOption:u?.filterOption})),d&&u?.addSlotOptionInfo(d.uid,aa),onBeforeUnmount(()=>{d&&u?.removeSlotOptionInfo(d.uid)})}const fe=aa=>{a.disabled||u?.onSelect(N.value,aa)},ea=()=>{a.disabled||u?.setActiveKey(N.value)},ta=()=>{a.disabled||u?.setActiveKey()},na=computed(()=>[c,{[`${c}-disabled`]:a.disabled,[`${c}-selected`]:ne.value,[`${c}-active`]:se.value,[`${c}-multiple`]:u?.multiple}]);return{prefixCls:c,cls:na,selectCtx:u,itemRef:f,component:R,isSelected:ne,isValid:ce,handleClick:fe,handleMouseEnter:ea,handleMouseLeave:ta}}});function _sfc_render$2F(a,s,l,o,c,u){const d=resolveComponent("checkbox");return withDirectives((openBlock(),createBlock(resolveDynamicComponent(a.component),{ref:"itemRef",class:normalizeClass([a.cls,{[`${a.prefixCls}-has-suffix`]:!!a.$slots.suffix}]),onClick:a.handleClick,onMouseenter:a.handleMouseEnter,onMouseleave:a.handleMouseLeave},{default:withCtx(()=>[a.$slots.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon")],2)):createCommentVNode("v-if",!0),a.selectCtx&&a.selectCtx.multiple?(openBlock(),createBlock(d,{key:1,class:normalizeClass(`${a.prefixCls}-checkbox`),"model-value":a.isSelected,disabled:a.disabled,"uninject-group-context":""},{default:withCtx(()=>[renderSlot(a.$slots,"default",{},()=>[createTextVNode(toDisplayString(a.label),1)])]),_:3},8,["class","model-value","disabled"])):(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default",{},()=>[createTextVNode(toDisplayString(a.label),1)])],2)),a.$slots.suffix?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(`${a.prefixCls}-suffix`)},[renderSlot(a.$slots,"suffix")],2)):createCommentVNode("v-if",!0)]),_:3},8,["class","onClick","onMouseenter","onMouseleave"])),[[vShow,a.isValid]])}var Option=_export_sfc(_sfc_main$2T,[["render",_sfc_render$2F]]),__defProp$$=Object.defineProperty,__defProps$w=Object.defineProperties,__getOwnPropDescs$w=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$10=Object.getOwnPropertySymbols,__hasOwnProp$10=Object.prototype.hasOwnProperty,__propIsEnum$10=Object.prototype.propertyIsEnumerable,__defNormalProp$$=(a,s,l)=>s in a?__defProp$$(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$$=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$10.call(s,l)&&__defNormalProp$$(a,l,s[l]);if(__getOwnPropSymbols$10)for(var l of __getOwnPropSymbols$10(s))__propIsEnum$10.call(s,l)&&__defNormalProp$$(a,l,s[l]);return a},__spreadProps$w=(a,s)=>__defProps$w(a,__getOwnPropDescs$w(s));const DEFAULT_FIELD_NAMES$2={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"},useOptions=({options:a,extraOptions:s,inputValue:l,filterOption:o,showExtraOptions:c,valueKey:u,fieldNames:d})=>{const f=computed(()=>__spreadValues$$(__spreadValues$$({},DEFAULT_FIELD_NAMES$2),d?.value)),g=reactive(new Map),y=computed(()=>Array.from(g.values()).sort((ea,ta)=>isNumber$1(ea.index)&&isNumber$1(ta.index)?ea.index-ta.index:0)),$=computed(()=>{var ea,ta;const na=new Map;return{optionInfos:getOptionInfos$1((ea=a?.value)!=null?ea:[],{valueKey:(ta=u?.value)!=null?ta:"value",fieldNames:f.value,origin:"options",optionInfoMap:na}),optionInfoMap:na}}),x=computed(()=>{var ea,ta;const na=new Map;return{optionInfos:getOptionInfos$1((ea=s?.value)!=null?ea:[],{valueKey:(ta=u?.value)!=null?ta:"value",fieldNames:f.value,origin:"extraOptions",optionInfoMap:na}),optionInfoMap:na}}),N=reactive(new Map);watch([y,a??ref([]),s??ref([]),u??ref("value")],()=>{N.clear(),y.value.forEach((ea,ta)=>{N.set(ea.key,__spreadProps$w(__spreadValues$$({},ea),{index:ta}))}),$.value.optionInfoMap.forEach(ea=>{N.has(ea.key)||(ea.index=N.size,N.set(ea.key,ea))}),x.value.optionInfoMap.forEach(ea=>{N.has(ea.key)||(ea.index=N.size,N.set(ea.key,ea))})},{immediate:!0,deep:!0});const R=computed(()=>{var ea;const ta=getValidOptions($.value.optionInfos,{inputValue:l?.value,filterOption:o?.value});return((ea=c?.value)==null||ea)&&ta.push(...getValidOptions(x.value.optionInfos,{inputValue:l?.value,filterOption:o?.value})),ta}),j=computed(()=>Array.from(N.values()).filter(ea=>ea.origin==="extraOptions"&&c?.value===!1?!1:isValidOption(ea,{inputValue:l?.value,filterOption:o?.value}))),ne=computed(()=>j.value.filter(ea=>!ea.disabled).map(ea=>ea.key));return{validOptions:R,optionInfoMap:N,validOptionInfos:j,enabledOptionKeys:ne,getNextSlotOptionIndex:()=>g.size,addSlotOptionInfo:(ea,ta)=>{g.set(ea,ta)},removeSlotOptionInfo:ea=>{g.delete(ea)}}},KEYBOARD_KEY={ENTER:"Enter",ESC:"Escape",BACKSPACE:"Backspace",TAB:"Tab",SPACE:" ",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight"},stringifyCodeKey=a=>JSON.stringify({key:a.key,ctrl:!!a.ctrl,shift:!!a.shift,alt:!!a.alt,meta:!!a.meta}),getKeyDownHandler=a=>{const s={};return a.forEach((l,o)=>{const c=isString$1(o)?{key:o}:o;s[stringifyCodeKey(c)]=l}),l=>{const o=stringifyCodeKey({key:l.key,ctrl:l.ctrlKey,shift:l.shiftKey,alt:l.altKey,meta:l.metaKey}),c=s[o];c&&(l.stopPropagation(),c(l))}},useSelect=({multiple:a,options:s,extraOptions:l,inputValue:o,filterOption:c,showExtraOptions:u,component:d,valueKey:f,fieldNames:g,loading:y,popupVisible:$,valueKeys:x,dropdownRef:N,optionRefs:R,virtualListRef:j,onSelect:ne,onPopupVisibleChange:se,enterToOpen:ce=!0,defaultActiveFirstOption:fe})=>{const{validOptions:ea,optionInfoMap:ta,validOptionInfos:na,enabledOptionKeys:aa,getNextSlotOptionIndex:ia,addSlotOptionInfo:sa,removeSlotOptionInfo:ra}=useOptions({options:s,extraOptions:l,inputValue:o,filterOption:c,showExtraOptions:u,valueKey:f,fieldNames:g}),la=ref();watch(aa,da=>{(!la.value||!da.includes(la.value))&&(la.value=da[0])});const oa=da=>{la.value=da},ca=da=>{const ha=aa.value.length;if(ha===0)return;if(!la.value)return da==="down"?aa.value[0]:aa.value[ha-1];const ga=aa.value.indexOf(la.value),fa=(ha+ga+(da==="up"?-1:1))%ha;return aa.value[fa]},pa=da=>{var ha,ga;j?.value&&j.value.scrollTo({key:da});const fa=ta.get(da),ma=(ha=N?.value)==null?void 0:ha.wrapperRef,va=(ga=R?.value[da])!=null?ga:fa?.ref;if(!ma||!va||ma.scrollHeight===ma.offsetHeight)return;const ka=getRelativeRect(va,ma),ya=ma.scrollTop;ka.top<0?ma.scrollTo(0,ya+ka.top):ka.bottom<0&&ma.scrollTo(0,ya-ka.bottom)};watch($,da=>{var ha;if(da){const ga=x.value[x.value.length-1];let fa=(ha=fe?.value)==null||ha?aa.value[0]:void 0;aa.value.includes(ga)&&(fa=ga),fa!==la.value&&(la.value=fa),nextTick(()=>{la.value&&pa(la.value)})}});const ua=getKeyDownHandler(new Map([[KEYBOARD_KEY.ENTER,da=>{!y?.value&&!da.isComposing&&($.value?la.value&&(ne(la.value,da),da.preventDefault()):ce&&(se(!0),da.preventDefault()))}],[KEYBOARD_KEY.ESC,da=>{$.value&&(se(!1),da.preventDefault())}],[KEYBOARD_KEY.ARROW_DOWN,da=>{if($.value){const ha=ca("down");ha&&(la.value=ha,pa(ha)),da.preventDefault()}}],[KEYBOARD_KEY.ARROW_UP,da=>{if($.value){const ha=ca("up");ha&&(la.value=ha,pa(ha)),da.preventDefault()}}]]));return provide(selectInjectionKey,reactive({multiple:a,valueKey:f,inputValue:o,filterOption:c,component:d,valueKeys:x,activeKey:la,setActiveKey:oa,onSelect:ne,getNextSlotOptionIndex:ia,addSlotOptionInfo:sa,removeSlotOptionInfo:ra})),{validOptions:ea,optionInfoMap:ta,validOptionInfos:na,enabledOptionKeys:aa,activeKey:la,setActiveKey:oa,addSlotOptionInfo:sa,removeSlotOptionInfo:ra,getNextActiveKey:ca,scrollIntoView:pa,handleKeyDown:ua}},useSize=({dataKeys:a,contentRef:s,fixedSize:l,estimatedSize:o,buffer:c})=>{const u=ref(0),d=new Map,f=computed(()=>a.value.length),g=ref(0),y=computed(()=>{const ia=g.value+c.value*3;return ia>f.value?f.value:ia}),$=computed(()=>{const ia=f.value-c.value*3;return ia<0?0:ia}),x=ia=>{ia<0?g.value=0:ia>$.value?g.value=$.value:g.value=ia},N=ref(l.value),R=computed(()=>o.value!==30?o.value:u.value||o.value),j=(ia,sa)=>{d.set(ia,sa)},ne=ia=>{var sa;if(N.value)return R.value;const ra=a.value[ia];return(sa=d.get(ra))!=null?sa:R.value},se=ia=>d.has(ia);onMounted(()=>{const ia=Array.from(d.values()).reduce((sa,ra)=>sa+ra,0);ia>0&&(u.value=ia/d.size)});const ce=ia=>N.value?R.value*ia:fe(0,ia),fe=(ia,sa)=>{let ra=0;for(let la=ia;la<sa;la++)ra+=ne(la);return ra},ea=computed(()=>N.value?R.value*g.value:fe(0,g.value)),ta=ia=>{const sa=ia>=ea.value;let ra=Math.abs(ia-ea.value);const la=sa?g.value:g.value-1;let oa=0;for(;ra>0;)ra-=ne(la+oa),sa?oa++:oa--;return oa},na=ia=>{const sa=ta(ia),ra=g.value+sa-c.value;return ra<0?0:ra>$.value?$.value:ra},aa=computed(()=>N.value?R.value*(f.value-y.value):fe(y.value,f.value));return{frontPadding:ea,behindPadding:aa,start:g,end:y,getStartByScroll:na,setItemSize:j,hasItemSize:se,setStart:x,getScrollOffset:ce}};var VirtualListItem=defineComponent({name:"VirtualListItem",props:{hasItemSize:{type:Function,required:!0},setItemSize:{type:Function,required:!0}},setup(a,{slots:s}){var l;const o=(l=getCurrentInstance())==null?void 0:l.vnode.key,c=ref(),u=()=>{var d,f,g,y;const $=(f=(d=c.value)==null?void 0:d.$el)!=null?f:c.value,x=(y=(g=$?.getBoundingClientRect)==null?void 0:g.call($).height)!=null?y:$?.offsetHeight;x&&a.setItemSize(o,x)};return onMounted(()=>u()),onBeforeUnmount(()=>u()),()=>{var d;const f=getFirstComponent((d=s.default)==null?void 0:d.call(s));return f?cloneVNode(f,{ref:c},!0):null}}}),__defProp$_=Object.defineProperty,__getOwnPropSymbols$$=Object.getOwnPropertySymbols,__hasOwnProp$$=Object.prototype.hasOwnProperty,__propIsEnum$$=Object.prototype.propertyIsEnumerable,__defNormalProp$_=(a,s,l)=>s in a?__defProp$_(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$_=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$$.call(s,l)&&__defNormalProp$_(a,l,s[l]);if(__getOwnPropSymbols$$)for(var l of __getOwnPropSymbols$$(s))__propIsEnum$$.call(s,l)&&__defNormalProp$_(a,l,s[l]);return a};const _sfc_main$2S=defineComponent({name:"VirtualList",components:{VirtualListItem},props:{height:{type:[Number,String],default:200},data:{type:Array,default:()=>[]},threshold:{type:Number,default:0},itemKey:{type:String,default:"key"},fixedSize:{type:Boolean,default:!1},estimatedSize:{type:Number,default:30},buffer:{type:Number,default:10},component:{type:[String,Object],default:"div"},listAttrs:{type:Object},contentAttrs:{type:Object},paddingPosition:{type:String,default:"content"}},emits:{scroll:a=>!0,reachBottom:a=>!0},setup(a,{emit:s}){const{data:l,itemKey:o,fixedSize:c,estimatedSize:u,buffer:d,height:f}=toRefs(a),g=getPrefixCls("virtual-list"),y=computed(()=>isObject$1(a.component)?__spreadValues$_({container:"div",list:"div",content:"div"},a.component):{container:a.component,list:"div",content:"div"}),$=ref(),x=ref(),N=computed(()=>({height:isNumber$1(f.value)?`${f.value}px`:f.value,overflow:"auto"})),R=computed(()=>l.value.map((la,oa)=>{var ca;return(ca=la[o.value])!=null?ca:oa})),{frontPadding:j,behindPadding:ne,start:se,end:ce,getStartByScroll:fe,setItemSize:ea,hasItemSize:ta,setStart:na,getScrollOffset:aa}=useSize({dataKeys:R,contentRef:x,fixedSize:c,estimatedSize:u,buffer:d}),ia=computed(()=>a.threshold&&l.value.length<=a.threshold?l.value:l.value.slice(se.value,ce.value)),sa=la=>{const{scrollTop:oa,scrollHeight:ca,offsetHeight:pa}=la.target,ua=fe(oa);ua!==se.value&&(na(ua),nextTick(()=>{ra(oa)})),s("scroll",la),Math.floor(ca-(oa+pa))<=0&&s("reachBottom",la)},ra=la=>{var oa,ca;if($.value)if(isNumber$1(la))$.value.scrollTop=la;else{const pa=(ca=la.index)!=null?ca:R.value.indexOf((oa=la.key)!=null?oa:"");na(pa-d.value),$.value.scrollTop=aa(pa),nextTick(()=>{if($.value){const ua=aa(pa);ua!==$.value.scrollTop&&($.value.scrollTop=ua)}})}};return{prefixCls:g,containerRef:$,contentRef:x,frontPadding:j,currentList:ia,behindPadding:ne,onScroll:sa,setItemSize:ea,hasItemSize:ta,start:se,scrollTo:ra,style:N,mergedComponent:y}}});function _sfc_render$2E(a,s,l,o,c,u){const d=resolveComponent("VirtualListItem");return openBlock(),createBlock(resolveDynamicComponent(a.mergedComponent.container),{ref:"containerRef",class:normalizeClass(a.prefixCls),style:normalizeStyle$1(a.style),onScroll:a.onScroll},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(a.mergedComponent.list),mergeProps(a.listAttrs,{style:a.paddingPosition==="list"?{paddingTop:`${a.frontPadding}px`,paddingBottom:`${a.behindPadding}px`}:{}}),{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(a.mergedComponent.content),mergeProps({ref:"contentRef"},a.contentAttrs,{style:a.paddingPosition==="content"?{paddingTop:`${a.frontPadding}px`,paddingBottom:`${a.behindPadding}px`}:{}}),{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.currentList,(f,g)=>{var y;return openBlock(),createBlock(d,{key:(y=f[a.itemKey])!=null?y:a.start+g,"has-item-size":a.hasItemSize,"set-item-size":a.setItemSize},{default:withCtx(()=>[renderSlot(a.$slots,"item",{item:f,index:a.start+g})]),_:2},1032,["has-item-size","set-item-size"])}),128))]),_:3},16,["style"]))]),_:3},16,["style"]))]),_:3},8,["class","style","onScroll"])}var VirtualList=_export_sfc(_sfc_main$2S,[["render",_sfc_render$2E]]),_AutoComplete=defineComponent({name:"AutoComplete",inheritAttrs:!1,props:{modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},disabled:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},popupContainer:{type:[String,Object]},strict:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},triggerProps:{type:Object},allowClear:{type:Boolean,default:!1},virtualListProps:{type:Object}},emits:{"update:modelValue":a=>!0,change:a=>!0,search:a=>!0,select:a=>!0,clear:a=>!0,dropdownScroll:a=>!0,dropdownReachBottom:a=>!0},setup(a,{emit:s,attrs:l,slots:o}){const{modelValue:c}=toRefs(a),u=getPrefixCls("auto-complete"),{mergedDisabled:d,eventHandlers:f}=useFormItem({disabled:toRef(a,"disabled")}),g=ref(a.defaultValue),y=ref(),$=computed(()=>{var va;return(va=a.modelValue)!=null?va:g.value});watch(c,va=>{(isUndefined(va)||isNull(va))&&(g.value="")});const x=computed(()=>$.value?[getKeyFromValue($.value)]:[]),{data:N}=toRefs(a),R=ref(),j=ref({}),ne=ref(!1),se=computed(()=>ne.value&&ua.value.length>0),ce=ref(),fe=computed(()=>a.virtualListProps?"div":"li"),ea=va=>{ne.value=va},ta=(va,ka)=>{var ya;return!!((ya=ka.label)!=null&&ya.includes(va))},na=computed(()=>isFunction$1(a.filterOption)?a.filterOption:a.filterOption&&a.strict?ta:a.filterOption),aa=va=>{var ka,ya;g.value=va,s("update:modelValue",va),s("change",va),(ya=(ka=f.value)==null?void 0:ka.onChange)==null||ya.call(ka)},ia=va=>{var ka,ya;g.value="",s("update:modelValue",""),s("change",""),(ya=(ka=f.value)==null?void 0:ka.onChange)==null||ya.call(ka),s("clear",va)},sa=(va,ka)=>{var ya,ba;const Ea=(ya=pa.get(va))==null?void 0:ya.value;s("select",Ea),aa(Ea),(ba=y.value)==null||ba.blur()},ra=va=>{s("search",va),aa(va)},la=va=>{s("dropdownScroll",va)},oa=va=>{s("dropdownReachBottom",va)},{validOptions:ca,optionInfoMap:pa,validOptionInfos:ua,handleKeyDown:da}=useSelect({options:N,inputValue:$,filterOption:na,popupVisible:se,valueKeys:x,component:fe,dropdownRef:R,optionRefs:j,onSelect:sa,onPopupVisibleChange:ea}),ha=va=>{if(isFunction$1(o.option)&&va.value){const ka=pa.get(va.key),ya=o.option;return()=>ya({data:ka})}return()=>va.label},ga=va=>createVNode$1(Option,{ref:ka=>{ka?.$el&&(j.value[va.key]=ka.$el)},key:va.key,value:va.value,disabled:va.disabled,internal:!0},{default:ha(va)}),fa=()=>createVNode$1(SelectDropdown,{ref:R,class:`${u}-dropdown`,virtualList:!!a.virtualListProps,onScroll:la,onReachBottom:oa},{default:()=>[...ca.value.map(va=>ga(va))],"virtual-list":()=>createVNode$1(VirtualList,mergeProps(a.virtualListProps,{ref:ce,data:ca.value}),{item:({item:va})=>ga(va)}),footer:o.footer});return{inputRef:y,render:()=>createVNode$1(Trigger,mergeProps({trigger:"focus",position:"bl",animationName:"slide-dynamic-origin",autoFitTransformOrigin:!0,popupVisible:se.value,clickToClose:!1,preventFocus:!0,popupOffset:4,disabled:d.value,autoFitPopupWidth:!0},a.triggerProps,{onPopupVisibleChange:ea}),{default:()=>[createVNode$1(Input,mergeProps({ref:y},l,{allowClear:a.allowClear,modelValue:$.value,disabled:d.value,onInput:ra,onClear:ia,onKeydown:da}),o)],content:fa})}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const AutoComplete=Object.assign(_AutoComplete,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_AutoComplete.name,_AutoComplete)}}),useIndex=({itemRef:a,selector:s,index:l,parentClassName:o})=>{const c=ref(-1),u=computed(()=>{var y;return(y=l?.value)!=null?y:c.value}),d=ref(),f=()=>{var y,$,x;let N=($=(y=a.value)==null?void 0:y.parentElement)!=null?$:void 0;if(o)for(;N&&!N.className.includes(o);)N=(x=N.parentElement)!=null?x:void 0;return N},g=()=>{if(isUndefined(l?.value)&&d.value&&a.value){const y=Array.from(d.value.querySelectorAll(s)).indexOf(a.value);y!==c.value&&(c.value=y)}};return watch(a,()=>{a.value&&!d.value&&(d.value=f())}),onMounted(()=>{a.value&&(d.value=f()),g()}),onUpdated(()=>g()),{computedIndex:u}},avatarGroupInjectionKey=Symbol("ArcoAvatarGroup"),_sfc_main$2R=defineComponent({name:"IconImageClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-image-close`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1l=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$$=createStaticVNode('<path d="M41 26V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h17"></path><path d="m24 33 9-8.5V27s-2 1-3.5 2.5C27.841 31.159 27 33 27 33h-3Zm0 0-3.5-4.5L17 33h7Z"></path><path d="M20.5 28.5 17 33h7l-3.5-4.5ZM33 24.5 24 33h3s.841-1.841 2.5-3.5C31 28 33 27 33 27v-2.5Z" fill="currentColor" stroke="none"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M46 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-4.95-4.782 1.74 1.74-3.045 3.046 3.046 3.046-1.74 1.74-3.047-3.045-3.046 3.046-1.74-1.74 3.046-3.047-3.046-3.046 1.74-1.74 3.046 3.046 3.046-3.046Z" fill="currentColor" stroke="none"></path><path d="M17 15h-2v2h2v-2Z"></path>',5),_hoisted_7$1=[_hoisted_2$$];function _sfc_render$2D(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_7$1,14,_hoisted_1$1l)}var _IconImageClose=_export_sfc(_sfc_main$2R,[["render",_sfc_render$2D]]);const IconImageClose=Object.assign(_IconImageClose,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconImageClose.name,_IconImageClose)}});var __defProp$Z=Object.defineProperty,__getOwnPropSymbols$_=Object.getOwnPropertySymbols,__hasOwnProp$_=Object.prototype.hasOwnProperty,__propIsEnum$_=Object.prototype.propertyIsEnumerable,__defNormalProp$Z=(a,s,l)=>s in a?__defProp$Z(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$Z=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$_.call(s,l)&&__defNormalProp$Z(a,l,s[l]);if(__getOwnPropSymbols$_)for(var l of __getOwnPropSymbols$_(s))__propIsEnum$_.call(s,l)&&__defNormalProp$Z(a,l,s[l]);return a};const _sfc_main$2Q=defineComponent({name:"Avatar",components:{ResizeObserver:ResizeObserver$1,IconImageClose,IconLoading},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object},objectFit:{type:String}},emits:{click:a=>!0,error:()=>!0,load:()=>!0},setup(a,{slots:s,emit:l,attrs:o}){const{shape:c,size:u,autoFixFontSize:d,triggerType:f,triggerIconStyle:g}=toRefs(a),y=getPrefixCls("avatar"),$=inject(avatarGroupInjectionKey,void 0),x=ref(),N=ref(),R=computed(()=>{var ua;return(ua=$?.shape)!=null?ua:c.value}),j=computed(()=>{var ua;return(ua=$?.size)!=null?ua:u.value}),ne=computed(()=>{var ua;return(ua=$?.autoFixFontSize)!=null?ua:d.value}),se=ref(!1),ce=ref(!1),fe=ref(!0),ea=ref(!1),ta=$?useIndex({itemRef:x,selector:`.${y}`}).computedIndex:ref(-1),na=computed(()=>{var ua;const da=isNumber$1(j.value)?{width:`${j.value}px`,height:`${j.value}px`,fontSize:`${j.value/2}px`}:{};return $&&(da.zIndex=$.zIndexAscend?ta.value+1:$.total-ta.value,da.marginLeft=ta.value!==0?`-${((ua=j.value)!=null?ua:40)/4}px`:"0"),da}),aa=useTriggerIconStyle({triggerIconStyle:g?.value,inlineStyle:o.style,triggerType:f.value}),ia=()=>{!se.value&&!a.imageUrl&&nextTick(()=>{var ua;if(!N.value||!x.value)return;const da=N.value.clientWidth,ha=(ua=j.value)!=null?ua:x.value.offsetWidth,ga=ha/(da+8);ha&&ga<1&&(N.value.style.transform=`scale(${ga}) translateX(-50%)`),fe.value=!0})};onMounted(()=>{var ua;(ua=N.value)!=null&&ua.firstElementChild&&["IMG","PICTURE"].includes(N.value.firstElementChild.tagName)&&(se.value=!0),ne.value&&ia()}),watch(u,()=>{ne.value&&ia()});const sa=computed(()=>[y,`${y}-${R.value}`]),ra=computed(()=>se.value||a.imageUrl?`${y}-image`:`${y}-text`);return{prefixCls:y,itemRef:x,cls:sa,outerStyle:na,wrapperRef:N,wrapperCls:ra,computedTriggerIconStyle:aa,isImage:se,shouldLoad:fe,isLoaded:ea,hasError:ce,onClick:ua=>{l("click",ua)},handleResize:()=>{ne.value&&ia()},handleImgLoad:()=>{ea.value=!0,l("load")},handleImgError:()=>{ce.value=!0,l("error")}}}}),useTriggerIconStyle=({triggerType:a,inlineStyle:s={},triggerIconStyle:l={}})=>{let o={};return a==="button"&&(!l||l&&!l.color)&&s&&s.backgroundColor&&(o={color:s.backgroundColor}),__spreadValues$Z(__spreadValues$Z({},l),o)},_hoisted_1$1k=["src"];function _sfc_render$2C(a,s,l,o,c,u){const d=resolveComponent("IconImageClose"),f=resolveComponent("IconLoading"),g=resolveComponent("resize-observer");return openBlock(),createElementBlock("div",{ref:"itemRef",style:normalizeStyle$1(a.outerStyle),class:normalizeClass([a.cls,{[`${a.prefixCls}-with-trigger-icon`]:!!a.$slots["trigger-icon"]}]),onClick:s[2]||(s[2]=(...y)=>a.onClick&&a.onClick(...y))},[createVNode$1(g,{onResize:a.handleResize},{default:withCtx(()=>[createBaseVNode("span",{ref:"wrapperRef",class:normalizeClass(a.wrapperCls)},[a.imageUrl?(openBlock(),createElementBlock(Fragment,{key:0},[a.hasError?renderSlot(a.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-image-icon`)},[createVNode$1(d)],2)]):createCommentVNode("v-if",!0),!(a.hasError||!a.shouldLoad)&&!a.isLoaded?renderSlot(a.$slots,"default",{key:1},()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-image-icon`)},[createVNode$1(f)],2)]):createCommentVNode("v-if",!0),a.hasError||!a.shouldLoad?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("img",{key:2,src:a.imageUrl,style:normalizeStyle$1({width:a.size+"px",height:a.size+"px",objectFit:a.objectFit}),alt:"avatar",onLoad:s[0]||(s[0]=(...y)=>a.handleImgLoad&&a.handleImgLoad(...y)),onError:s[1]||(s[1]=(...y)=>a.handleImgError&&a.handleImgError(...y))},null,44,_hoisted_1$1k))],64)):renderSlot(a.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),a.$slots["trigger-icon"]?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-trigger-icon-${a.triggerType}`),style:normalizeStyle$1(a.computedTriggerIconStyle)},[renderSlot(a.$slots,"trigger-icon")],6)):createCommentVNode("v-if",!0)],6)}var _Avatar=_export_sfc(_sfc_main$2Q,[["render",_sfc_render$2C]]);const _sfc_main$2P=defineComponent({name:"Popover",components:{Trigger},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},title:String,content:String,trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"top"},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("popover"),o=ref(a.defaultPopupVisible),c=computed(()=>{var g;return(g=a.popupVisible)!=null?g:o.value}),u=g=>{o.value=g,s("update:popupVisible",g),s("popupVisibleChange",g)},d=computed(()=>[`${l}-popup-content`,a.contentClass]),f=computed(()=>[`${l}-popup-arrow`,a.arrowClass]);return{prefixCls:l,computedPopupVisible:c,contentCls:d,arrowCls:f,handlePopupVisibleChange:u}}});function _sfc_render$2B(a,s,l,o,c,u){const d=resolveComponent("trigger");return openBlock(),createBlock(d,{class:normalizeClass(a.prefixCls),trigger:a.trigger,position:a.position,"popup-visible":a.computedPopupVisible,"popup-offset":10,"content-class":a.contentCls,"content-style":a.contentStyle,"arrow-class":a.arrowCls,"arrow-style":a.arrowStyle,"show-arrow":"","popup-container":a.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"content",{},()=>[createTextVNode(toDisplayString(a.content),1)])],2)]),default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","trigger","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}var _Popover=_export_sfc(_sfc_main$2P,[["render",_sfc_render$2B]]);const Popover=Object.assign(_Popover,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Popover.name,_Popover)}}),AvatarGroup=defineComponent({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(a,{slots:s}){const{shape:l,size:o,autoFixFontSize:c,zIndexAscend:u}=toRefs(a),d=getPrefixCls("avatar-group"),f=ref(0);return provide(avatarGroupInjectionKey,reactive({shape:l,size:o,autoFixFontSize:c,zIndexAscend:u,total:f})),()=>{var g,y;const $=getAllElements((y=(g=s.default)==null?void 0:g.call(s))!=null?y:[]),x=a.maxCount>0?$.slice(0,a.maxCount):$,N=a.maxCount>0?$.slice(a.maxCount):[];return f.value!==$.length&&(f.value=$.length),createVNode$1("div",{class:d},[x,N.length>0&&createVNode$1(Popover,a.maxPopoverTriggerProps,{default:()=>[createVNode$1(_Avatar,{class:`${d}-max-count-avatar`,style:a.maxStyle},{default:()=>[createTextVNode("+"),N.length]})],content:()=>createVNode$1("div",null,[N])})])}}}),Avatar=Object.assign(_Avatar,{Group:AvatarGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Avatar.name,_Avatar),a.component(l+AvatarGroup.name,AvatarGroup)}}),_sfc_main$2O=defineComponent({name:"IconToTop",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-to-top`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1j=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$_=createBaseVNode("path",{d:"M43 7H5M24 20v23M24 13.96 30.453 21H17.546L24 13.96Zm.736-.804Z"},null,-1),_hoisted_3$V=createBaseVNode("path",{d:"m24 14-6 7h12l-6-7Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_4$i=[_hoisted_2$_,_hoisted_3$V];function _sfc_render$2A(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$i,14,_hoisted_1$1j)}var _IconToTop=_export_sfc(_sfc_main$2O,[["render",_sfc_render$2A]]);const IconToTop=Object.assign(_IconToTop,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconToTop.name,_IconToTop)}}),_sfc_main$2N=defineComponent({name:"BackTop",components:{IconToTop},props:{visibleHeight:{type:Number,default:200},targetContainer:{type:[String,Object]},easing:{type:String,default:"quartOut"},duration:{type:Number,default:200}},setup(a){const s=getPrefixCls("back-top"),l=ref(!1),o=ref(),c=!a.targetContainer,u=throttleByRaf(()=>{if(o.value){const{visibleHeight:g}=a,{scrollTop:y}=o.value;l.value=y>=g}}),d=g=>isString$1(g)?document.querySelector(g):g;return onMounted(()=>{o.value=c?document?.documentElement:d(a.targetContainer),o.value&&(on(c?window:o.value,"scroll",u),u())}),onUnmounted(()=>{u.cancel(),o.value&&off(c?window:o.value,"scroll",u)}),{prefixCls:s,visible:l,scrollToTop:()=>{if(o.value){const{scrollTop:g}=o.value;new Tween({from:{scrollTop:g},to:{scrollTop:0},easing:a.easing,duration:a.duration,onUpdate:$=>{o.value&&(o.value.scrollTop=$.scrollTop)}}).start()}}}}});function _sfc_render$2z(a,s,l,o,c,u){const d=resolveComponent("icon-to-top");return openBlock(),createBlock(Transition,{name:"fade-in"},{default:withCtx(()=>[a.visible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.prefixCls),onClick:s[0]||(s[0]=(...f)=>a.scrollToTop&&a.scrollToTop(...f))},[renderSlot(a.$slots,"default",{},()=>[createBaseVNode("button",{class:normalizeClass(`${a.prefixCls}-btn`)},[createVNode$1(d)],2)])],2)):createCommentVNode("v-if",!0)]),_:3})}var _BackTop=_export_sfc(_sfc_main$2N,[["render",_sfc_render$2z]]);const BackTop=Object.assign(_BackTop,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_BackTop.name,_BackTop)}});var __defProp$Y=Object.defineProperty,__getOwnPropSymbols$Z=Object.getOwnPropertySymbols,__hasOwnProp$Z=Object.prototype.hasOwnProperty,__propIsEnum$Z=Object.prototype.propertyIsEnumerable,__defNormalProp$Y=(a,s,l)=>s in a?__defProp$Y(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$Y=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$Z.call(s,l)&&__defNormalProp$Y(a,l,s[l]);if(__getOwnPropSymbols$Z)for(var l of __getOwnPropSymbols$Z(s))__propIsEnum$Z.call(s,l)&&__defNormalProp$Y(a,l,s[l]);return a};const COLORS=["red","orangered","orange","gold","lime","green","cyan","arcoblue","purple","pinkpurple","magenta","gray"],BADGE_STATUSES=["normal","processing","success","warning","danger"];var _Badge=defineComponent({name:"Badge",props:{text:{type:String},dot:{type:Boolean},dotStyle:{type:Object},maxCount:{type:Number,default:99},offset:{type:Array,default:()=>[]},color:{type:String},status:{type:String,validator:a=>BADGE_STATUSES.includes(a)},count:{type:Number}},setup(a,{slots:s}){const{status:l,color:o,dotStyle:c,offset:u,text:d,dot:f,maxCount:g,count:y}=toRefs(a),$=getPrefixCls("badge"),x=useWrapperClass($,l?.value,s?.default),N=computed(()=>{const j=__spreadValues$Y({},c?.value||{}),[ne,se]=u?.value||[];ne&&(j.marginRight=`${-ne}px`),se&&(j.marginTop=`${se}px`);const ce=!o?.value||COLORS.includes(o?.value)?{}:{backgroundColor:o.value};return{mergedStyle:__spreadValues$Y(__spreadValues$Y({},ce),j),computedDotStyle:j,computedColorStyle:ce}}),R=()=>{const j=d?.value,ne=o?.value,se=l?.value,ce=f?.value,fe=Number(y?.value),ea=y?.value!=null,{computedDotStyle:ta,mergedStyle:na}=N.value;return s.content?createVNode$1("span",{class:`${$}-custom-dot`,style:ta},[s.content()]):j&&!ne&&!se?createVNode$1("span",{class:`${$}-text`,style:ta},[j]):se||ne&&!ea?createVNode$1("span",{class:`${$}-status-wrapper`},[createVNode$1("span",{class:[`${$}-status-dot`,{[`${$}-status-${se}`]:se,[`${$}-color-${ne}`]:ne}],style:na},null),j&&createVNode$1("span",{class:`${$}-status-text`},[j])]):(ce||ne)&&fe>0?createVNode$1("span",{class:[`${$}-dot`,{[`${$}-color-${ne}`]:ne}],style:na},null):fe===0?null:createVNode$1("span",{class:`${$}-number`,style:na},[createVNode$1("span",null,[g.value&&fe>g.value?`${g.value}+`:fe])])};return()=>createVNode$1("span",{class:x.value},[s.default&&s.default(),R()])}});const useWrapperClass=(a,s,l)=>computed(()=>[a,{[`${a}-status`]:s,[`${a}-no-children`]:!l}]),Badge=Object.assign(_Badge,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Badge.name,_Badge)}}),breadcrumbInjectKey=Symbol("ArcoBreadcrumb"),_sfc_main$2M=defineComponent({name:"IconMore",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-more`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1i=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$Z=createBaseVNode("path",{d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$U=createBaseVNode("path",{d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z"},null,-1),_hoisted_4$h=[_hoisted_2$Z,_hoisted_3$U];function _sfc_render$2y(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$h,14,_hoisted_1$1i)}var _IconMore=_export_sfc(_sfc_main$2M,[["render",_sfc_render$2y]]);const IconMore=Object.assign(_IconMore,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconMore.name,_IconMore)}}),_sfc_main$2L=defineComponent({name:"IconDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-down`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1h=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$Y=createBaseVNode("path",{d:"M39.6 17.443 24.043 33 8.487 17.443"},null,-1),_hoisted_3$T=[_hoisted_2$Y];function _sfc_render$2x(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$T,14,_hoisted_1$1h)}var _IconDown=_export_sfc(_sfc_main$2L,[["render",_sfc_render$2x]]);const IconDown=Object.assign(_IconDown,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDown.name,_IconDown)}}),_sfc_main$2K=defineComponent({name:"IconObliqueLine",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-oblique-line`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1g=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$X=createBaseVNode("path",{d:"M29.506 6.502 18.493 41.498"},null,-1),_hoisted_3$S=[_hoisted_2$X];function _sfc_render$2w(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$S,14,_hoisted_1$1g)}var _IconObliqueLine=_export_sfc(_sfc_main$2K,[["render",_sfc_render$2w]]);const IconObliqueLine=Object.assign(_IconObliqueLine,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconObliqueLine.name,_IconObliqueLine)}}),dropdownInjectionKey=Symbol("ArcoDropdown"),_sfc_main$2J=defineComponent({name:"DropdownPanel",components:{Scrollbar,Empty},props:{loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},bottomOffset:{type:Number,default:0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]}},emits:["scroll","reachBottom"],setup(a,{emit:s,slots:l}){const o=getPrefixCls("dropdown"),c=inject(dropdownInjectionKey,{}),u=ref(),d=y=>{const{scrollTop:$,scrollHeight:x,offsetHeight:N}=y.target;x-($+N)<=a.bottomOffset&&s("reachBottom",y),s("scroll",y)},f=computed(()=>{if(isNumber$1(c.popupMaxHeight))return{maxHeight:`${c.popupMaxHeight}px`};if(!c.popupMaxHeight)return{maxHeight:"none",overflowY:"hidden"}}),g=computed(()=>[o,{[`${o}-has-footer`]:!!l.footer}]);return{prefixCls:o,cls:g,style:f,wrapperRef:u,handleScroll:d}}});function _sfc_render$2v(a,s,l,o,c,u){const d=resolveComponent("empty"),f=resolveComponent("Scrollbar");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[a.isEmpty?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-empty`)},[renderSlot(a.$slots,"empty",{},()=>[createVNode$1(d)])],2)):createCommentVNode("v-if",!0),createVNode$1(f,{ref:"wrapperRef",class:normalizeClass(`${a.prefixCls}-list-wrapper`),style:normalizeStyle$1(a.style),onScroll:a.handleScroll},{default:withCtx(()=>[createBaseVNode("ul",{class:normalizeClass(`${a.prefixCls}-list`)},[renderSlot(a.$slots,"default")],2)]),_:3},8,["class","style","onScroll"]),a.$slots.footer&&!a.isEmpty?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer")],2)):createCommentVNode("v-if",!0)],2)}var DropdownPanel=_export_sfc(_sfc_main$2J,[["render",_sfc_render$2v]]);const useTrigger=({popupVisible:a,defaultPopupVisible:s,emit:l})=>{var o;const c=ref((o=s?.value)!=null?o:!1),u=computed(()=>{var f;return(f=a?.value)!=null?f:c.value}),d=f=>{f!==u.value&&(c.value=f,l("update:popupVisible",f),l("popupVisibleChange",f))};return watch(u,f=>{c.value!==f&&(c.value=f)}),{computedPopupVisible:u,handlePopupVisibleChange:d}},_sfc_main$2I=defineComponent({name:"Dropdown",components:{Trigger,DropdownPanel},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"bottom"},popupContainer:{type:[String,Object]},popupMaxHeight:{type:[Boolean,Number],default:!0},hideOnSelect:{type:Boolean,default:!0}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0,select:(a,s)=>!0},setup(a,{emit:s}){const{defaultPopupVisible:l,popupVisible:o,popupMaxHeight:c}=toRefs(a),u=getPrefixCls("dropdown"),{computedPopupVisible:d,handlePopupVisibleChange:f}=useTrigger({defaultPopupVisible:l,popupVisible:o,emit:s});return provide(dropdownInjectionKey,reactive({popupMaxHeight:c,onOptionClick:(y,$)=>{s("select",y,$),a.hideOnSelect&&f(!1)}})),{prefixCls:u,computedPopupVisible:d,handlePopupVisibleChange:f}}});function _sfc_render$2u(a,s,l,o,c,u){const d=resolveComponent("DropdownPanel"),f=resolveComponent("Trigger");return openBlock(),createBlock(f,{"popup-visible":a.computedPopupVisible,"animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",trigger:a.trigger,position:a.position,"popup-offset":4,"popup-container":a.popupContainer,"opened-class":`${a.prefixCls}-open`,onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[createVNode$1(d,null,createSlots({default:withCtx(()=>[renderSlot(a.$slots,"content")]),_:2},[a.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(a.$slots,"footer")])}:void 0]),1024)]),default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["popup-visible","trigger","position","popup-container","opened-class","onPopupVisibleChange"])}var _Dropdown=_export_sfc(_sfc_main$2I,[["render",_sfc_render$2u]]);const _sfc_main$2H=defineComponent({name:"Doption",props:{value:{type:[String,Number,Object]},disabled:{type:Boolean,default:!1},active:Boolean,uninjectContext:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("dropdown-option"),o=ref(),c=computed(()=>{var g,y,$;return($=(y=a.value)!=null?y:(g=o.value)==null?void 0:g.textContent)!=null?$:void 0}),u=a.uninjectContext?void 0:inject(dropdownInjectionKey,void 0),d=g=>{a.disabled||(s("click",g),u?.onOptionClick(c.value,g))},f=computed(()=>[l,{[`${l}-disabled`]:a.disabled,[`${l}-active`]:a.active}]);return{prefixCls:l,cls:f,liRef:o,handleClick:d}}});function _sfc_render$2t(a,s,l,o,c,u){return openBlock(),createElementBlock("li",{ref:"liRef",class:normalizeClass([a.cls,{[`${a.prefixCls}-has-suffix`]:!!a.$slots.suffix}]),onClick:s[0]||(s[0]=(...d)=>a.handleClick&&a.handleClick(...d))},[a.$slots.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon")],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2),a.$slots.suffix?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-suffix`)},[renderSlot(a.$slots,"suffix")],2)):createCommentVNode("v-if",!0)],2)}var Doption=_export_sfc(_sfc_main$2H,[["render",_sfc_render$2t]]);const _sfc_main$2G=defineComponent({name:"Dgroup",props:{title:String},setup(){return{prefixCls:getPrefixCls("dropdown-group")}}});function _sfc_render$2s(a,s,l,o,c,u){return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("li",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2),renderSlot(a.$slots,"default")],64)}var Dgroup=_export_sfc(_sfc_main$2G,[["render",_sfc_render$2s]]);const _sfc_main$2F=defineComponent({name:"IconRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-right`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1f=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$W=createBaseVNode("path",{d:"m16 39.513 15.556-15.557L16 8.4"},null,-1),_hoisted_3$R=[_hoisted_2$W];function _sfc_render$2r(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$R,14,_hoisted_1$1f)}var _IconRight=_export_sfc(_sfc_main$2F,[["render",_sfc_render$2r]]);const IconRight=Object.assign(_IconRight,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconRight.name,_IconRight)}}),_sfc_main$2E=defineComponent({name:"Dsubmenu",components:{Trigger,DropdownPanel,DropdownOption:Doption,IconRight},props:{value:{type:[String,Number]},disabled:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"rt"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},optionProps:{type:Object}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0},setup(a,{emit:s}){const{defaultPopupVisible:l,popupVisible:o}=toRefs(a),c=getPrefixCls("dropdown"),{computedPopupVisible:u,handlePopupVisibleChange:d}=useTrigger({defaultPopupVisible:l,popupVisible:o,emit:s});return{prefixCls:c,computedPopupVisible:u,handlePopupVisibleChange:d}}});function _sfc_render$2q(a,s,l,o,c,u){const d=resolveComponent("IconRight"),f=resolveComponent("dropdown-option"),g=resolveComponent("dropdown-panel"),y=resolveComponent("Trigger");return openBlock(),createBlock(y,{"popup-visible":a.computedPopupVisible,trigger:a.trigger,position:a.position,disabled:a.disabled,"popup-offset":4,onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[createVNode$1(g,{class:normalizeClass(`${a.prefixCls}-submenu`)},createSlots({default:withCtx(()=>[renderSlot(a.$slots,"content")]),_:2},[a.$slots.footer?{name:"footer",fn:withCtx(()=>[renderSlot(a.$slots,"footer")])}:void 0]),1032,["class"])]),default:withCtx(()=>[createVNode$1(f,mergeProps(a.optionProps,{active:a.computedPopupVisible,"uninject-context":""}),createSlots({suffix:withCtx(()=>[renderSlot(a.$slots,"suffix",{},()=>[createVNode$1(d)])]),default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:2},[a.$slots.icon?{name:"icon",fn:withCtx(()=>[renderSlot(a.$slots,"icon")])}:void 0]),1040,["active"])]),_:3},8,["popup-visible","trigger","position","disabled","onPopupVisibleChange"])}var Dsubmenu=_export_sfc(_sfc_main$2E,[["render",_sfc_render$2q]]);const _sfc_main$2D=defineComponent({name:"DropdownButton",components:{IconMore,Button,ButtonGroup,Dropdown:_Dropdown},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"br"},popupContainer:{type:[String,Object]},disabled:{type:Boolean,default:!1},type:{type:String},size:{type:String},buttonProps:{type:Object},hideOnSelect:{type:Boolean,default:!0}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0,click:a=>!0,select:(a,s)=>!0},setup(a,{emit:s}){const{defaultPopupVisible:l,popupVisible:o}=toRefs(a),c=getPrefixCls("dropdown"),{computedPopupVisible:u,handlePopupVisibleChange:d}=useTrigger({defaultPopupVisible:l,popupVisible:o,emit:s});return{prefixCls:c,computedPopupVisible:u,handleClick:y=>{s("click",y)},handleSelect:(y,$)=>{s("select",y,$)},handlePopupVisibleChange:d}}});function _sfc_render$2p(a,s,l,o,c,u){const d=resolveComponent("Button"),f=resolveComponent("IconMore"),g=resolveComponent("Dropdown"),y=resolveComponent("ButtonGroup");return openBlock(),createBlock(y,null,{default:withCtx(()=>[createVNode$1(d,mergeProps({size:a.size,type:a.type,disabled:a.disabled},a.buttonProps,{onClick:a.handleClick}),{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},16,["size","type","disabled","onClick"]),createVNode$1(g,{"popup-visible":a.computedPopupVisible,trigger:a.trigger,position:a.position,"popup-container":a.popupContainer,"hide-on-select":a.hideOnSelect,onSelect:a.handleSelect,onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[renderSlot(a.$slots,"content")]),default:withCtx(()=>[createVNode$1(d,{size:a.size,type:a.type,disabled:a.disabled},{icon:withCtx(()=>[renderSlot(a.$slots,"icon",{popupVisible:a.computedPopupVisible},()=>[createVNode$1(f)])]),_:3},8,["size","type","disabled"])]),_:3},8,["popup-visible","trigger","position","popup-container","hide-on-select","onSelect","onPopupVisibleChange"])]),_:3})}var DropdownButton=_export_sfc(_sfc_main$2D,[["render",_sfc_render$2p]]);const Dropdown=Object.assign(_Dropdown,{Option:Doption,Group:Dgroup,Submenu:Dsubmenu,Button:DropdownButton,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Dropdown.name,_Dropdown),a.component(l+Doption.name,Doption),a.component(l+Dgroup.name,Dgroup),a.component(l+Dsubmenu.name,Dsubmenu),a.component(l+DropdownButton.name,DropdownButton)}});var BreadcrumbItem=defineComponent({name:"BreadcrumbItem",inheritAttrs:!1,props:{separator:{type:[String,Number]},droplist:{type:Array},dropdownProps:{type:Object},index:{type:Number,default:0}},setup(a,{slots:s,attrs:l}){const o=getPrefixCls("breadcrumb-item"),c=inject(breadcrumbInjectKey,void 0),u=ref(!1),d=computed(()=>!(c&&c.needHide&&a.index>1&&a.index<=c.total-c.maxCount)),f=computed(()=>c&&c.needHide?a.index===1:!1),g=computed(()=>c?a.index<c.total-1:!0),y=j=>{u.value=j},$=()=>{var j,ne,se,ce,fe,ea,ta;if(!g.value)return null;const na=(ta=(ea=(fe=(ne=(j=s.separator)==null?void 0:j.call(s))!=null?ne:a.separator)!=null?fe:(ce=c==null?void 0:(se=c.slots).separator)==null?void 0:ce.call(se))!=null?ea:c?.separator)!=null?ta:createVNode$1(IconObliqueLine,null,null);return createVNode$1("div",{"aria-hidden":"true",class:`${o}-separator`},[na])},x=()=>{var j,ne,se,ce;return createVNode$1("div",mergeProps({role:"listitem",class:[o,{[`${o}-with-dropdown`]:a.droplist||s.droplist}]},f.value?{"aria-label":"ellipses of breadcrumb items"}:void 0,l),[f.value?(se=(ne=c==null?void 0:(j=c.slots)["more-icon"])==null?void 0:ne.call(j))!=null?se:createVNode$1(IconMore,null,null):(ce=s.default)==null?void 0:ce.call(s),(a.droplist||s.droplist)&&createVNode$1("span",{"aria-hidden":!0,class:[`${o}-dropdown-icon`,{[`${o}-dropdown-icon-active`]:u.value}]},[createVNode$1(IconDown,null,null)])])},N=()=>{var j,ne,se;return(se=(j=s.droplist)==null?void 0:j.call(s))!=null?se:(ne=a.droplist)==null?void 0:ne.map(ce=>createVNode$1(Doption,{value:ce.path},{default:()=>[ce.label]}))},R=()=>createVNode$1(Dropdown,mergeProps({popupVisible:u.value,onPopupVisibleChange:y},a.dropdownProps),{default:()=>[x()],content:N});return()=>d.value?createVNode$1(Fragment,null,[s.droplist||a.droplist?R():x(),$()]):null}}),_Breadcrumb=defineComponent({name:"Breadcrumb",props:{maxCount:{type:Number,default:0},routes:{type:Array},separator:{type:[String,Number]},customUrl:{type:Function}},setup(a,{slots:s}){const{maxCount:l,separator:o,routes:c}=toRefs(a),u=getPrefixCls("breadcrumb"),d=ref(0),f=computed(()=>l.value>0&&d.value>l.value+1);provide(breadcrumbInjectKey,reactive({total:d,maxCount:l,separator:o,needHide:f,slots:s}));const g=(x,N,R)=>{var j,ne;if(N.indexOf(x)===N.length-1)return createVNode$1("span",null,[x.label]);const se=(ne=(j=a.customUrl)==null?void 0:j.call(a,R))!=null?ne:`#/${R.join("/").replace(/^\//,"")}`;return createVNode$1("a",{href:se},[x.label])},y=()=>{var x;if(!((x=c.value)!=null&&x.length))return null;d.value!==c.value.length&&(d.value=c.value.length);const N=[];return c.value.map((R,j,ne)=>{N.push((R.path||"").replace(/^\//,""));const se=[...N];return createVNode$1(BreadcrumbItem,{key:R.path||R.label,index:j,droplist:R.children},{default:()=>{var ce,fe;return[(fe=(ce=s["item-render"])==null?void 0:ce.call(s,{route:R,routes:ne,paths:se}))!=null?fe:g(R,ne,se)]}})})},$=()=>{var x,N;const R=getAllElements((N=(x=s.default)==null?void 0:x.call(s))!=null?N:[]);return d.value!==R.length&&(d.value=R.length),R.map((j,ne)=>{var se;return j.props=mergeProps((se=j.props)!=null?se:{},{index:ne}),j})};return()=>createVNode$1("div",{role:"list",class:u},[s.default?$():y()])}});const Breadcrumb=Object.assign(_Breadcrumb,{Item:BreadcrumbItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Breadcrumb.name,_Breadcrumb),a.component(l+BreadcrumbItem.name,BreadcrumbItem)}});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var dayjs_min={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){var l=1e3,o=6e4,c=36e5,u="millisecond",d="second",f="minute",g="hour",y="day",$="week",x="month",N="quarter",R="year",j="date",ne="Invalid Date",se=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ce=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,fe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(ua){var da=["th","st","nd","rd"],ha=ua%100;return"["+ua+(da[(ha-20)%10]||da[ha]||da[0])+"]"}},ea=function(ua,da,ha){var ga=String(ua);return!ga||ga.length>=da?ua:""+Array(da+1-ga.length).join(ha)+ua},ta={s:ea,z:function(ua){var da=-ua.utcOffset(),ha=Math.abs(da),ga=Math.floor(ha/60),fa=ha%60;return(da<=0?"+":"-")+ea(ga,2,"0")+":"+ea(fa,2,"0")},m:function ua(da,ha){if(da.date()<ha.date())return-ua(ha,da);var ga=12*(ha.year()-da.year())+(ha.month()-da.month()),fa=da.clone().add(ga,x),ma=ha-fa<0,va=da.clone().add(ga+(ma?-1:1),x);return+(-(ga+(ha-fa)/(ma?fa-va:va-fa))||0)},a:function(ua){return ua<0?Math.ceil(ua)||0:Math.floor(ua)},p:function(ua){return{M:x,y:R,w:$,d:y,D:j,h:g,m:f,s:d,ms:u,Q:N}[ua]||String(ua||"").toLowerCase().replace(/s$/,"")},u:function(ua){return ua===void 0}},na="en",aa={};aa[na]=fe;var ia="$isDayjsObject",sa=function(ua){return ua instanceof ca||!(!ua||!ua[ia])},ra=function ua(da,ha,ga){var fa;if(!da)return na;if(typeof da=="string"){var ma=da.toLowerCase();aa[ma]&&(fa=ma),ha&&(aa[ma]=ha,fa=ma);var va=da.split("-");if(!fa&&va.length>1)return ua(va[0])}else{var ka=da.name;aa[ka]=da,fa=ka}return!ga&&fa&&(na=fa),fa||!ga&&na},la=function(ua,da){if(sa(ua))return ua.clone();var ha=typeof da=="object"?da:{};return ha.date=ua,ha.args=arguments,new ca(ha)},oa=ta;oa.l=ra,oa.i=sa,oa.w=function(ua,da){return la(ua,{locale:da.$L,utc:da.$u,x:da.$x,$offset:da.$offset})};var ca=function(){function ua(ha){this.$L=ra(ha.locale,null,!0),this.parse(ha),this.$x=this.$x||ha.x||{},this[ia]=!0}var da=ua.prototype;return da.parse=function(ha){this.$d=function(ga){var fa=ga.date,ma=ga.utc;if(fa===null)return new Date(NaN);if(oa.u(fa))return new Date;if(fa instanceof Date)return new Date(fa);if(typeof fa=="string"&&!/Z$/i.test(fa)){var va=fa.match(se);if(va){var ka=va[2]-1||0,ya=(va[7]||"0").substring(0,3);return ma?new Date(Date.UTC(va[1],ka,va[3]||1,va[4]||0,va[5]||0,va[6]||0,ya)):new Date(va[1],ka,va[3]||1,va[4]||0,va[5]||0,va[6]||0,ya)}}return new Date(fa)}(ha),this.init()},da.init=function(){var ha=this.$d;this.$y=ha.getFullYear(),this.$M=ha.getMonth(),this.$D=ha.getDate(),this.$W=ha.getDay(),this.$H=ha.getHours(),this.$m=ha.getMinutes(),this.$s=ha.getSeconds(),this.$ms=ha.getMilliseconds()},da.$utils=function(){return oa},da.isValid=function(){return this.$d.toString()!==ne},da.isSame=function(ha,ga){var fa=la(ha);return this.startOf(ga)<=fa&&fa<=this.endOf(ga)},da.isAfter=function(ha,ga){return la(ha)<this.startOf(ga)},da.isBefore=function(ha,ga){return this.endOf(ga)<la(ha)},da.$g=function(ha,ga,fa){return oa.u(ha)?this[ga]:this.set(fa,ha)},da.unix=function(){return Math.floor(this.valueOf()/1e3)},da.valueOf=function(){return this.$d.getTime()},da.startOf=function(ha,ga){var fa=this,ma=!!oa.u(ga)||ga,va=oa.p(ha),ka=function(Ta,Ba){var wa=oa.w(fa.$u?Date.UTC(fa.$y,Ba,Ta):new Date(fa.$y,Ba,Ta),fa);return ma?wa:wa.endOf(y)},ya=function(Ta,Ba){return oa.w(fa.toDate()[Ta].apply(fa.toDate("s"),(ma?[0,0,0,0]:[23,59,59,999]).slice(Ba)),fa)},ba=this.$W,Ea=this.$M,Ca=this.$D,$a="set"+(this.$u?"UTC":"");switch(va){case R:return ma?ka(1,0):ka(31,11);case x:return ma?ka(1,Ea):ka(0,Ea+1);case $:var Pa=this.$locale().weekStart||0,Da=(ba<Pa?ba+7:ba)-Pa;return ka(ma?Ca-Da:Ca+(6-Da),Ea);case y:case j:return ya($a+"Hours",0);case g:return ya($a+"Minutes",1);case f:return ya($a+"Seconds",2);case d:return ya($a+"Milliseconds",3);default:return this.clone()}},da.endOf=function(ha){return this.startOf(ha,!1)},da.$set=function(ha,ga){var fa,ma=oa.p(ha),va="set"+(this.$u?"UTC":""),ka=(fa={},fa[y]=va+"Date",fa[j]=va+"Date",fa[x]=va+"Month",fa[R]=va+"FullYear",fa[g]=va+"Hours",fa[f]=va+"Minutes",fa[d]=va+"Seconds",fa[u]=va+"Milliseconds",fa)[ma],ya=ma===y?this.$D+(ga-this.$W):ga;if(ma===x||ma===R){var ba=this.clone().set(j,1);ba.$d[ka](ya),ba.init(),this.$d=ba.set(j,Math.min(this.$D,ba.daysInMonth())).$d}else ka&&this.$d[ka](ya);return this.init(),this},da.set=function(ha,ga){return this.clone().$set(ha,ga)},da.get=function(ha){return this[oa.p(ha)]()},da.add=function(ha,ga){var fa,ma=this;ha=Number(ha);var va=oa.p(ga),ka=function(Ea){var Ca=la(ma);return oa.w(Ca.date(Ca.date()+Math.round(Ea*ha)),ma)};if(va===x)return this.set(x,this.$M+ha);if(va===R)return this.set(R,this.$y+ha);if(va===y)return ka(1);if(va===$)return ka(7);var ya=(fa={},fa[f]=o,fa[g]=c,fa[d]=l,fa)[va]||1,ba=this.$d.getTime()+ha*ya;return oa.w(ba,this)},da.subtract=function(ha,ga){return this.add(-1*ha,ga)},da.format=function(ha){var ga=this,fa=this.$locale();if(!this.isValid())return fa.invalidDate||ne;var ma=ha||"YYYY-MM-DDTHH:mm:ssZ",va=oa.z(this),ka=this.$H,ya=this.$m,ba=this.$M,Ea=fa.weekdays,Ca=fa.months,$a=fa.meridiem,Pa=function(Ba,wa,Oa,Aa){return Ba&&(Ba[wa]||Ba(ga,ma))||Oa[wa].slice(0,Aa)},Da=function(Ba){return oa.s(ka%12||12,Ba,"0")},Ta=$a||function(Ba,wa,Oa){var Aa=Ba<12?"AM":"PM";return Oa?Aa.toLowerCase():Aa};return ma.replace(ce,function(Ba,wa){return wa||function(Oa){switch(Oa){case"YY":return String(ga.$y).slice(-2);case"YYYY":return oa.s(ga.$y,4,"0");case"M":return ba+1;case"MM":return oa.s(ba+1,2,"0");case"MMM":return Pa(fa.monthsShort,ba,Ca,3);case"MMMM":return Pa(Ca,ba);case"D":return ga.$D;case"DD":return oa.s(ga.$D,2,"0");case"d":return String(ga.$W);case"dd":return Pa(fa.weekdaysMin,ga.$W,Ea,2);case"ddd":return Pa(fa.weekdaysShort,ga.$W,Ea,3);case"dddd":return Ea[ga.$W];case"H":return String(ka);case"HH":return oa.s(ka,2,"0");case"h":return Da(1);case"hh":return Da(2);case"a":return Ta(ka,ya,!0);case"A":return Ta(ka,ya,!1);case"m":return String(ya);case"mm":return oa.s(ya,2,"0");case"s":return String(ga.$s);case"ss":return oa.s(ga.$s,2,"0");case"SSS":return oa.s(ga.$ms,3,"0");case"Z":return va}return null}(Ba)||va.replace(":","")})},da.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},da.diff=function(ha,ga,fa){var ma,va=this,ka=oa.p(ga),ya=la(ha),ba=(ya.utcOffset()-this.utcOffset())*o,Ea=this-ya,Ca=function(){return oa.m(va,ya)};switch(ka){case R:ma=Ca()/12;break;case x:ma=Ca();break;case N:ma=Ca()/3;break;case $:ma=(Ea-ba)/6048e5;break;case y:ma=(Ea-ba)/864e5;break;case g:ma=Ea/c;break;case f:ma=Ea/o;break;case d:ma=Ea/l;break;default:ma=Ea}return fa?ma:oa.a(ma)},da.daysInMonth=function(){return this.endOf(x).$D},da.$locale=function(){return aa[this.$L]},da.locale=function(ha,ga){if(!ha)return this.$L;var fa=this.clone(),ma=ra(ha,ga,!0);return ma&&(fa.$L=ma),fa},da.clone=function(){return oa.w(this.$d,this)},da.toDate=function(){return new Date(this.valueOf())},da.toJSON=function(){return this.isValid()?this.toISOString():null},da.toISOString=function(){return this.$d.toISOString()},da.toString=function(){return this.$d.toUTCString()},ua}(),pa=ca.prototype;return la.prototype=pa,[["$ms",u],["$s",d],["$m",f],["$H",g],["$W",y],["$M",x],["$y",R],["$D",j]].forEach(function(ua){pa[ua[1]]=function(da){return this.$g(da,ua[0],ua[1])}}),la.extend=function(ua,da){return ua.$i||(ua(da,ca,la),ua.$i=!0),la},la.locale=ra,la.isDayjs=sa,la.unix=function(ua){return la(1e3*ua)},la.en=aa[na],la.Ls=aa,la.p={},la})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const originDayjs=getDefaultExportFromCjs(dayjs_minExports);var customParseFormat$1={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){var l={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},o=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,c=/\d/,u=/\d\d/,d=/\d\d?/,f=/\d*[^-_:/,()\s\d]+/,g={},y=function(se){return(se=+se)+(se>68?1900:2e3)},$=function(se){return function(ce){this[se]=+ce}},x=[/[+-]\d\d:?(\d\d)?|Z/,function(se){(this.zone||(this.zone={})).offset=function(ce){if(!ce||ce==="Z")return 0;var fe=ce.match(/([+-]|\d\d)/g),ea=60*fe[1]+(+fe[2]||0);return ea===0?0:fe[0]==="+"?-ea:ea}(se)}],N=function(se){var ce=g[se];return ce&&(ce.indexOf?ce:ce.s.concat(ce.f))},R=function(se,ce){var fe,ea=g.meridiem;if(ea){for(var ta=1;ta<=24;ta+=1)if(se.indexOf(ea(ta,0,ce))>-1){fe=ta>12;break}}else fe=se===(ce?"pm":"PM");return fe},j={A:[f,function(se){this.afternoon=R(se,!1)}],a:[f,function(se){this.afternoon=R(se,!0)}],Q:[c,function(se){this.month=3*(se-1)+1}],S:[c,function(se){this.milliseconds=100*+se}],SS:[u,function(se){this.milliseconds=10*+se}],SSS:[/\d{3}/,function(se){this.milliseconds=+se}],s:[d,$("seconds")],ss:[d,$("seconds")],m:[d,$("minutes")],mm:[d,$("minutes")],H:[d,$("hours")],h:[d,$("hours")],HH:[d,$("hours")],hh:[d,$("hours")],D:[d,$("day")],DD:[u,$("day")],Do:[f,function(se){var ce=g.ordinal,fe=se.match(/\d+/);if(this.day=fe[0],ce)for(var ea=1;ea<=31;ea+=1)ce(ea).replace(/\[|\]/g,"")===se&&(this.day=ea)}],w:[d,$("week")],ww:[u,$("week")],M:[d,$("month")],MM:[u,$("month")],MMM:[f,function(se){var ce=N("months"),fe=(N("monthsShort")||ce.map(function(ea){return ea.slice(0,3)})).indexOf(se)+1;if(fe<1)throw new Error;this.month=fe%12||fe}],MMMM:[f,function(se){var ce=N("months").indexOf(se)+1;if(ce<1)throw new Error;this.month=ce%12||ce}],Y:[/[+-]?\d+/,$("year")],YY:[u,function(se){this.year=y(se)}],YYYY:[/\d{4}/,$("year")],Z:x,ZZ:x};function ne(se){var ce,fe;ce=se,fe=g&&g.formats;for(var ea=(se=ce.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(la,oa,ca){var pa=ca&&ca.toUpperCase();return oa||fe[ca]||l[ca]||fe[pa].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(ua,da,ha){return da||ha.slice(1)})})).match(o),ta=ea.length,na=0;na<ta;na+=1){var aa=ea[na],ia=j[aa],sa=ia&&ia[0],ra=ia&&ia[1];ea[na]=ra?{regex:sa,parser:ra}:aa.replace(/^\[|\]$/g,"")}return function(la){for(var oa={},ca=0,pa=0;ca<ta;ca+=1){var ua=ea[ca];if(typeof ua=="string")pa+=ua.length;else{var da=ua.regex,ha=ua.parser,ga=la.slice(pa),fa=da.exec(ga)[0];ha.call(oa,fa),la=la.replace(fa,"")}}return function(ma){var va=ma.afternoon;if(va!==void 0){var ka=ma.hours;va?ka<12&&(ma.hours+=12):ka===12&&(ma.hours=0),delete ma.afternoon}}(oa),oa}}return function(se,ce,fe){fe.p.customParseFormat=!0,se&&se.parseTwoDigitYear&&(y=se.parseTwoDigitYear);var ea=ce.prototype,ta=ea.parse;ea.parse=function(na){var aa=na.date,ia=na.utc,sa=na.args;this.$u=ia;var ra=sa[1];if(typeof ra=="string"){var la=sa[2]===!0,oa=sa[3]===!0,ca=la||oa,pa=sa[2];oa&&(pa=sa[2]),g=this.$locale(),!la&&pa&&(g=fe.Ls[pa]),this.$d=function(ga,fa,ma,va){try{if(["x","X"].indexOf(fa)>-1)return new Date((fa==="X"?1e3:1)*ga);var ka=ne(fa)(ga),ya=ka.year,ba=ka.month,Ea=ka.day,Ca=ka.hours,$a=ka.minutes,Pa=ka.seconds,Da=ka.milliseconds,Ta=ka.zone,Ba=ka.week,wa=new Date,Oa=Ea||(ya||ba?1:wa.getDate()),Aa=ya||wa.getFullYear(),Sa=0;ya&&!ba||(Sa=ba>0?ba-1:wa.getMonth());var Fa,Ia=Ca||0,Ga=$a||0,Ya=Pa||0,Va=Da||0;return Ta?new Date(Date.UTC(Aa,Sa,Oa,Ia,Ga,Ya,Va+60*Ta.offset*1e3)):ma?new Date(Date.UTC(Aa,Sa,Oa,Ia,Ga,Ya,Va)):(Fa=new Date(Aa,Sa,Oa,Ia,Ga,Ya,Va),Ba&&(Fa=va(Fa).week(Ba).toDate()),Fa)}catch{return new Date("")}}(aa,ra,ia,fe),this.init(),pa&&pa!==!0&&(this.$L=this.locale(pa).$L),ca&&aa!=this.format(ra)&&(this.$d=new Date("")),g={}}else if(ra instanceof Array)for(var ua=ra.length,da=1;da<=ua;da+=1){sa[1]=ra[da-1];var ha=fe.apply(this,sa);if(ha.isValid()){this.$d=ha.$d,this.$L=ha.$L,this.init();break}da===ua&&(this.$d=new Date(""))}else ta.call(this,na)}}})})(customParseFormat$1);var customParseFormatExports=customParseFormat$1.exports;const customParseFormat=getDefaultExportFromCjs(customParseFormatExports);var isBetween$1={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){return function(l,o,c){o.prototype.isBetween=function(u,d,f,g){var y=c(u),$=c(d),x=(g=g||"()")[0]==="(",N=g[1]===")";return(x?this.isAfter(y,f):!this.isBefore(y,f))&&(N?this.isBefore($,f):!this.isAfter($,f))||(x?this.isBefore(y,f):!this.isAfter(y,f))&&(N?this.isAfter($,f):!this.isBefore($,f))}}})})(isBetween$1);var isBetweenExports=isBetween$1.exports;const isBetween=getDefaultExportFromCjs(isBetweenExports);var weekOfYear$1={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){var l="week",o="year";return function(c,u,d){var f=u.prototype;f.week=function(g){if(g===void 0&&(g=null),g!==null)return this.add(7*(g-this.week()),"day");var y=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var $=d(this).startOf(o).add(1,o).date(y),x=d(this).endOf(l);if($.isBefore(x))return 1}var N=d(this).startOf(o).date(y).startOf(l).subtract(1,"millisecond"),R=this.diff(N,l,!0);return R<0?d(this).startOf("week").week():Math.ceil(R)},f.weeks=function(g){return g===void 0&&(g=null),this.week(g)}}})})(weekOfYear$1);var weekOfYearExports=weekOfYear$1.exports;const weekOfYear=getDefaultExportFromCjs(weekOfYearExports);var advancedFormat={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){return function(l,o){var c=o.prototype,u=c.format;c.format=function(d){var f=this,g=this.$locale();if(!this.isValid())return u.bind(this)(d);var y=this.$utils(),$=(d||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(x){switch(x){case"Q":return Math.ceil((f.$M+1)/3);case"Do":return g.ordinal(f.$D);case"gggg":return f.weekYear();case"GGGG":return f.isoWeekYear();case"wo":return g.ordinal(f.week(),"W");case"w":case"ww":return y.s(f.week(),x==="w"?1:2,"0");case"W":case"WW":return y.s(f.isoWeek(),x==="W"?1:2,"0");case"k":case"kk":return y.s(String(f.$H===0?24:f.$H),x==="k"?1:2,"0");case"X":return Math.floor(f.$d.getTime()/1e3);case"x":return f.$d.getTime();case"z":return"["+f.offsetName()+"]";case"zzz":return"["+f.offsetName("long")+"]";default:return x}});return u.bind(this)($)}}})})(advancedFormat);var advancedFormatExports=advancedFormat.exports;const AdvancedFormat=getDefaultExportFromCjs(advancedFormatExports);var weekYear$1={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){return function(l,o){o.prototype.weekYear=function(){var c=this.month(),u=this.week(),d=this.year();return u===1&&c===11?d+1:c===0&&u>=52?d-1:d}}})})(weekYear$1);var weekYearExports=weekYear$1.exports;const weekYear=getDefaultExportFromCjs(weekYearExports);var quarterOfYear={exports:{}};(function(a,s){(function(l,o){a.exports=o()})(commonjsGlobal,function(){var l="month",o="quarter";return function(c,u){var d=u.prototype;d.quarter=function(y){return this.$utils().u(y)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(y-1))};var f=d.add;d.add=function(y,$){return y=Number(y),this.$utils().p($)===o?this.add(3*y,l):f.bind(this)(y,$)};var g=d.startOf;d.startOf=function(y,$){var x=this.$utils(),N=!!x.u($)||$;if(x.p(y)===o){var R=this.quarter()-1;return N?this.month(3*R).startOf(l).startOf("day"):this.month(3*R+2).endOf(l).endOf("day")}return g.bind(this)(y,$)}}})})(quarterOfYear);var quarterOfYearExports=quarterOfYear.exports;const QuarterOfYear=getDefaultExportFromCjs(quarterOfYearExports);var zhCn={exports:{}};(function(a,s){(function(l,o){a.exports=o(dayjs_minExports)})(commonjsGlobal,function(l){function o(d){return d&&typeof d=="object"&&"default"in d?d:{default:d}}var c=o(l),u={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(d,f){return f==="W"?d+"周":d+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(d,f){var g=100*d+f;return g<600?"凌晨":g<900?"早上":g<1100?"上午":g<1300?"中午":g<1800?"下午":"晚上"}};return c.default.locale(u,null,!0),u})})(zhCn);var __defProp$X=Object.defineProperty,__defProps$v=Object.defineProperties,__getOwnPropDescs$v=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$Y=Object.getOwnPropertySymbols,__hasOwnProp$Y=Object.prototype.hasOwnProperty,__propIsEnum$Y=Object.prototype.propertyIsEnumerable,__defNormalProp$X=(a,s,l)=>s in a?__defProp$X(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$X=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$Y.call(s,l)&&__defNormalProp$X(a,l,s[l]);if(__getOwnPropSymbols$Y)for(var l of __getOwnPropSymbols$Y(s))__propIsEnum$Y.call(s,l)&&__defNormalProp$X(a,l,s[l]);return a},__spreadProps$v=(a,s)=>__defProps$v(a,__getOwnPropDescs$v(s));const overwriteIsDayjs=(a,s,l)=>{l=function(u,d){if(isDayjs(u))return u.clone();const f=typeof d=="object"?d:{};return f.date=u,f.args=arguments,new s(f)};const o=s.prototype,c=o.$utils;o.$utils=()=>{const u=c();return u.i=isDayjs,u},l.isDayjs=isDayjs};originDayjs.extend(overwriteIsDayjs);originDayjs.extend(customParseFormat);originDayjs.extend(isBetween);originDayjs.extend(weekOfYear);originDayjs.extend(AdvancedFormat);originDayjs.extend(weekYear);originDayjs.extend(QuarterOfYear);const dayjs=originDayjs,methods={add(a,s,l){return a.add(s,l)},subtract(a,s,l){return a.subtract(s,l)},startOf(a,s){return a.startOf(s)},startOfWeek(a,s){const l=a.day();let o=a.subtract(l-s,"day");return o.isAfter(a)&&(o=o.subtract(7,"day")),o},endOf(a,s){return a.endOf(s)},set(a,s,l){return a.set(s,l)},isSameWeek(a,s,l){const o=c=>{const u=c.day(),d=u-l+(u<l?7:0);return c.subtract(d,"day").week()};return o(a)===o(s)}};function getNow(){return dayjs()}function getSortedDayjsArray(a){return[...a].sort((s,l)=>s.valueOf()-l.valueOf())}function isValueChange(a,s){const l=(o,c)=>o===void 0&&c===void 0?!1:o&&!c||!o&&c?!0:o?.valueOf()!==c?.valueOf();return s===void 0&&a===void 0?!1:isArray$1(s)&&isArray$1(a)?l(s[0],a[0])||l(s[1],a[1]):!isArray$1(s)&&!isArray$1(a)?l(s,a):!0}function getDayjsValue(a,s){const l=c=>{const u=/(Q1)|(Q2)|(Q3)|(Q4)/,d={Q1:"01",Q2:"04",Q3:"07",Q4:"10"},[f]=u.exec(c);return c.replace(u,d[f])},o=c=>{if(c){if(typeof c=="string"){if(isQuarter(s))return dayjs(l(c),s.replace(/\[Q]Q/,"MM"));if(dayjs(c,s).isValid())return dayjs(c,s)}return dayjs(c)}};return isArray$1(a)?a.map(o):o(a)}function getDateValue$1(a){const s=l=>l?l.toDate():void 0;return isArray$1(a)?a.map(s):s(a)}function initializeDateLocale(a,s){dayjs.locale(__spreadProps$v(__spreadValues$X({},dayjs.Ls[a.toLocaleLowerCase()]),{weekStart:s}))}function pickDataAttributes(a){const s={};return a&&Object.keys(a).forEach(l=>{const o=String(l);o.indexOf("data-")===0&&(s[o]=a[o]),o.indexOf("aria-")===0&&(s[o]=a[o])}),s}function padStart(a,s,l=" "){const o=String(a),c=o.length<s?`${l}${o}`:o;return c.length<s?padStart(c,s,l):c}var Week=defineComponent({name:"Week",props:{mode:{type:String},dayStartOfWeek:{type:Number},isWeek:{type:Boolean},panel:{type:Boolean},value:{type:Object,required:!0},selectHandler:{type:Function},pageShowData:{type:Object,required:!0},pageData:{type:Array}},setup(a){const{dayStartOfWeek:s,isWeek:l,panel:o,mode:c}=toRefs(a),u=getPrefixCls("calendar-week-list"),{t:d}=useI18n(),f=["monday","tuesday","wednesday","thursday","friday","saturday"];return s.value===0?f.unshift("sunday"):f.push("sunday"),l.value&&f.unshift("self"),()=>createVNode$1("div",{class:u},[f.map(g=>createVNode$1("div",{class:`${u}-item`,key:g},[d(`calendar.week.${o.value||c.value==="year"?"short":"long"}.${g}`)]))])}});function getDateValue(a,s){if(a&&isArray$1(a))return a[s]}function useClassName({prefixCls:a,mergedValue:s,rangeValues:l,hoverRangeValues:o,panel:c,isSameTime:u,innerMode:d}){function f(g,y,$){return!y||!$?!1:u(g,y)||u(g,$)||g.isBetween(y,$,null,"[]")}return function(y,$){const x=getDateValue(l,0),N=getDateValue(l,1),R=getDateValue(o,0),j=getDateValue(o,1),ne=!y.isPrev&&!y.isNext,se=ne&&c,ce=se&&x&&u(y.time,x),fe=se&&N&&u(y.time,N),ea=R&&x&&R.isBefore(x),ta=N&&j&&j.isAfter(N),na=ea&&ce||ta&&fe;let aa=u(y.time,getNow());return!c&&d==="year"&&(aa=getNow().isSame(y.time,"date")),[`${a}-cell`,{[`${a}-cell-in-view`]:ne,[`${a}-cell-today`]:aa,[`${a}-cell-selected`]:s&&u(y.time,s),[`${a}-cell-range-start`]:ce,[`${a}-cell-range-end`]:fe,[`${a}-cell-in-range`]:se&&f(y.time,x,N),[`${a}-cell-in-range-near-hover`]:na,[`${a}-cell-hover-range-start`]:se&&R&&u(y.time,R),[`${a}-cell-hover-range-end`]:se&&j&&u(y.time,j),[`${a}-cell-hover-in-range`]:se&&f(y.time,R,j),[`${a}-cell-disabled`]:$}]}}var __defProp$W=Object.defineProperty,__defProps$u=Object.defineProperties,__getOwnPropDescs$u=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$X=Object.getOwnPropertySymbols,__hasOwnProp$X=Object.prototype.hasOwnProperty,__propIsEnum$X=Object.prototype.propertyIsEnumerable,__defNormalProp$W=(a,s,l)=>s in a?__defProp$W(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$W=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$X.call(s,l)&&__defNormalProp$W(a,l,s[l]);if(__getOwnPropSymbols$X)for(var l of __getOwnPropSymbols$X(s))__propIsEnum$X.call(s,l)&&__defNormalProp$W(a,l,s[l]);return a},__spreadProps$u=(a,s)=>__defProps$u(a,__getOwnPropDescs$u(s));const allDaysInOnePage=6*7,getReturn=a=>({year:a.year(),month:a.month()+1,date:a.date(),day:a.day(),time:a}),getTimeObj=a=>({start:getReturn(methods.startOf(a,"month")),end:getReturn(methods.endOf(a,"month")),days:a.daysInMonth()});function getAllDaysByTime(a,{dayStartOfWeek:s=0,isWeek:l}){const o=getTimeObj(a),c=Array(allDaysInOnePage).fill(null).map(()=>({})),u=s===0?o.start.day:(o.start.day||7)-1;c[u]=__spreadProps$u(__spreadValues$W({},o.start),{isCurrent:!0});for(let f=0;f<u;f++)c[u-f-1]=__spreadProps$u(__spreadValues$W({},getReturn(methods.subtract(o.start.time,f+1,"day"))),{isPrev:!0});for(let f=0;f<allDaysInOnePage-u-1;f++)c[u+f+1]=__spreadProps$u(__spreadValues$W({},getReturn(methods.add(o.start.time,f+1,"day"))),{isCurrent:f<o.days,isNext:f>=o.days-1});const d=Array(6).fill(null).map(()=>[]);for(let f=0;f<6;f++)if(d[f]=c.slice(f*7,7*(f+1)),l){const g=d[f][0].time,y=[...d[f]];d[f].unshift({weekRows:y,weekOfYear:g.week()})}return d}var Month=defineComponent({name:"Month",props:{cell:{type:Boolean},pageData:{type:Array},current:{type:Number},value:{type:Object,required:!0},selectHandler:{type:Function,required:!0},mode:{type:String},pageShowDate:{type:Object,required:!0},panel:{type:Boolean},dayStartOfWeek:{type:Number,required:!0},isWeek:{type:Boolean,required:!0}},setup(a,{slots:s}){const{pageData:l}=toRefs(a),o=getPrefixCls("calendar"),c=a.pageShowDate.year(),u=computed(()=>useClassName({prefixCls:o,mergedValue:a.value,panel:!1,innerMode:a.mode,rangeValues:[],hoverRangeValues:[],isSameTime:(g,y)=>g.isSame(y,"day")}));function d(g){return g.map((y,$)=>{var x;if(y.time){const N=()=>a.selectHandler(y.time,!1),R=a.isWeek?{onClick:N}:{},j=a.isWeek?{}:{onClick:N};return createVNode$1("div",mergeProps({key:$,class:u.value(y,!1)},R),[s.default?(x=s.default)==null?void 0:x.call(s,{year:y.year,month:y.month,date:y.date}):createVNode$1("div",mergeProps({class:`${o}-date`},j),[createVNode$1("div",{class:`${o}-date-value`},[a.panel?y.date:createVNode$1("div",{class:`${o}-date-circle`},[y.date])])])])}if("weekOfYear"in y){const N=a.value.year(),R=a.value.month()+1,j=a.value.week(),ne=a.value&&y.weekRows.find(se=>se.year===N&&se.month===R)&&j===y.weekOfYear;return createVNode$1("div",{key:$,class:[`${o}-cell`,`${o}-cell-week`,{[`${o}-cell-selected-week`]:ne,[`${o}-cell-in-range`]:ne}]},[createVNode$1("div",{class:`${o}-date`},[createVNode$1("div",{class:`${o}-date-value`},[y.weekOfYear])])])}return null})}let f=l.value;return typeof a.current=="number"&&(f=getAllDaysByTime(dayjs(`${c}-${padStart(a.current+1,2,"0")}-01`),{dayStartOfWeek:a.dayStartOfWeek,isWeek:a.isWeek})),()=>createVNode$1("div",{class:a.cell?`${o}-month-cell`:`${o}-month`},[createVNode$1(Week,{value:a.value,selectHandler:a.selectHandler,dayStartOfWeek:a.dayStartOfWeek,isWeek:a.isWeek,panel:a.panel,mode:a.mode,pageShowData:a.pageShowDate,pageData:a.pageData},null),createVNode$1("div",{class:`${o}-month-cell-body`},[f?.map((g,y)=>createVNode$1("div",{key:y,class:[`${o}-month-row`,{[`${o}-row-week`]:a.isWeek}]},[d(g)]))])])}}),__defProp$V=Object.defineProperty,__defProps$t=Object.defineProperties,__getOwnPropDescs$t=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$W=Object.getOwnPropertySymbols,__hasOwnProp$W=Object.prototype.hasOwnProperty,__propIsEnum$W=Object.prototype.propertyIsEnumerable,__defNormalProp$V=(a,s,l)=>s in a?__defProp$V(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$V=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$W.call(s,l)&&__defNormalProp$V(a,l,s[l]);if(__getOwnPropSymbols$W)for(var l of __getOwnPropSymbols$W(s))__propIsEnum$W.call(s,l)&&__defNormalProp$V(a,l,s[l]);return a},__spreadProps$t=(a,s)=>__defProps$t(a,__getOwnPropDescs$t(s));const MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"].map((a,s)=>({name:a,value:s})),monthGroup=Array(3);for(let a=0;a<3;a++)monthGroup[a]=MONTHS.slice(a*4,4*(a+1));const monthGroupPanel=Array(4);for(let a=0;a<4;a++)monthGroupPanel[a]=MONTHS.slice(a*3,3*(a+1));var Year=defineComponent({name:"Year",props:{mode:{type:String,required:!0},dayStartOfWeek:{type:Number,required:!0},value:{type:Object,required:!0},isWeek:{type:Boolean},panel:{type:Boolean,default:!1},pageShowData:{type:Object,required:!0},pageData:{type:Array},selectHandler:{type:Function,required:!0}},setup(a){const s=getPrefixCls("calendar"),l=computed(()=>useClassName({prefixCls:s,mergedValue:a.value,panel:!1,innerMode:a.mode,rangeValues:[],hoverRangeValues:[],isSameTime:(d,f)=>d.isSame(f,"month")})),{t:o}=useI18n(),c=computed(()=>a.pageShowData.year()),u=a.panel?monthGroupPanel:monthGroup;return()=>createVNode$1("div",{class:`${s}-year`},[u.map((d,f)=>createVNode$1("div",{class:`${s}-year-row`,key:f},[d.map(g=>{const y=dayjs(`${c.value}-${padStart(g.value+1,2,"0")}-01`),$=a.panel?{onClick:()=>a.selectHandler(y,!1)}:{};return createVNode$1("div",{key:g.value,class:l.value(__spreadProps$t(__spreadValues$V({},g),{time:y}),!1)},[a.panel?createVNode$1("div",mergeProps({class:`${s}-date`},$),[createVNode$1("div",{class:`${s}-date-value`},[o(`calendar.month.short.${g.name}`)])]):createVNode$1("div",{class:`${s}-month-with-days`},[createVNode$1("div",{class:`${s}-month-title`},[o(`calendar.month.long.${g.name}`)]),createVNode$1(Month,{pageShowDate:a.pageShowData,pageData:a.pageData,dayStartOfWeek:a.dayStartOfWeek,selectHandler:a.selectHandler,isWeek:a.isWeek,cell:!0,current:g.value,value:a.value,mode:a.mode},null)])])})]))])}});const useInput=({defaultValue:a,modelValue:s,emit:l,eventName:o="input",updateEventName:c="update:modelValue",eventHandlers:u})=>{var d;const f=ref(),g=ref((d=a?.value)!=null?d:""),y=ref(!1),$=ref(!1),x=ref("");let N;const R=computed(()=>{var aa;return(aa=s?.value)!=null?aa:g.value}),j=(aa,ia)=>{g.value=aa,l(c,aa),l(o,aa,ia)},ne=aa=>{const{value:ia}=aa.target;$.value||(j(ia,aa),nextTick(()=>{f.value&&R.value!==f.value.value&&(f.value.value=R.value)}))},se=aa=>{o==="input"&&R.value!==N&&(N=R.value,l("change",R.value,aa))},ce=aa=>{var ia;const{value:sa}=aa.target;aa.type==="compositionend"?($.value=!1,x.value="",j(sa,aa),nextTick(()=>{f.value&&R.value!==f.value.value&&(f.value.value=R.value)})):($.value=!0,x.value=R.value+((ia=aa.data)!=null?ia:""))},fe=aa=>{var ia,sa;y.value=!0,N=R.value,l("focus",aa),(sa=(ia=u?.value)==null?void 0:ia.onFocus)==null||sa.call(ia,aa)},ea=aa=>{var ia,sa;y.value=!1,l("blur",aa),(sa=(ia=u?.value)==null?void 0:ia.onBlur)==null||sa.call(ia,aa),se(aa)},ta=aa=>{const ia=aa.key||aa.code;!$.value&&ia===Enter.key&&(l("pressEnter",aa),se(aa))},na=aa=>{f.value&&aa.target!==f.value&&(aa.preventDefault(),f.value.focus())};return watch(R,aa=>{f.value&&aa!==f.value.value&&(f.value.value=aa)}),{inputRef:f,_value:g,_focused:y,isComposition:$,compositionValue:x,computedValue:R,handleInput:ne,handleComposition:ce,handleFocus:fe,handleBlur:ea,handleKeyDown:ta,handleMousedown:na}};var InputLabel=defineComponent({name:"InputLabel",inheritAttrs:!1,props:{modelValue:Object,inputValue:{type:String,default:""},enabledInput:Boolean,formatLabel:Function,placeholder:String,retainInputValue:Boolean,disabled:Boolean,baseCls:String,size:String,error:Boolean,focused:Boolean,uninjectFormItemContext:Boolean},emits:["update:inputValue","inputValueChange","focus","blur"],setup(a,{attrs:s,emit:l,slots:o}){var c;const{size:u,disabled:d,error:f,inputValue:g,uninjectFormItemContext:y}=toRefs(a),$=(c=a.baseCls)!=null?c:getPrefixCls("input-label"),{mergedSize:x,mergedDisabled:N,mergedError:R,eventHandlers:j}=useFormItem({size:u,disabled:d,error:f,uninject:y?.value}),{mergedSize:ne}=useSize$1(x),{inputRef:se,_focused:ce,computedValue:fe,handleInput:ea,handleComposition:ta,handleFocus:na,handleBlur:aa,handleMousedown:ia}=useInput({modelValue:g,emit:l,eventName:"inputValueChange",updateEventName:"update:inputValue",eventHandlers:j}),sa=computed(()=>{var ga;return(ga=a.focused)!=null?ga:ce.value}),ra=computed(()=>a.enabledInput&&ce.value||!a.modelValue),la=()=>{var ga,fa;return a.modelValue?(fa=(ga=a.formatLabel)==null?void 0:ga.call(a,a.modelValue))!=null?fa:a.modelValue.label:""},oa=computed(()=>a.enabledInput&&a.modelValue?la():a.placeholder),ca=()=>{var ga,fa;return a.modelValue?(fa=(ga=o.default)==null?void 0:ga.call(o,{data:a.modelValue}))!=null?fa:la():null},pa=computed(()=>[$,`${$}-size-${ne.value}`,{[`${$}-search`]:a.enabledInput,[`${$}-focus`]:sa.value,[`${$}-disabled`]:N.value,[`${$}-error`]:R.value}]),ua=computed(()=>omit(s,INPUT_EVENTS)),da=computed(()=>pick(s,INPUT_EVENTS));return{inputRef:se,render:()=>createVNode$1("span",mergeProps(ua.value,{class:pa.value,title:la(),onMousedown:ia}),[o.prefix&&createVNode$1("span",{class:`${$}-prefix`},[o.prefix()]),createVNode$1("input",mergeProps(da.value,{ref:se,class:[`${$}-input`,{[`${$}-input-hidden`]:!ra.value}],value:fe.value,readonly:!a.enabledInput,placeholder:oa.value,disabled:N.value,onInput:ea,onFocus:na,onBlur:aa,onCompositionstart:ta,onCompositionupdate:ta,onCompositionend:ta}),null),createVNode$1("span",{class:[`${$}-value`,{[`${$}-value-hidden`]:ra.value}]},[ca()]),o.suffix&&createVNode$1("span",{class:`${$}-suffix`},[o.suffix()])])}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}}),__defProp$U=Object.defineProperty,__getOwnPropSymbols$V=Object.getOwnPropertySymbols,__hasOwnProp$V=Object.prototype.hasOwnProperty,__propIsEnum$V=Object.prototype.propertyIsEnumerable,__defNormalProp$U=(a,s,l)=>s in a?__defProp$U(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$U=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$V.call(s,l)&&__defNormalProp$U(a,l,s[l]);if(__getOwnPropSymbols$V)for(var l of __getOwnPropSymbols$V(s))__propIsEnum$V.call(s,l)&&__defNormalProp$U(a,l,s[l]);return a};const getValueData=(a,s)=>{const l=[];for(const o of a)if(isObject$1(o))l.push({raw:o,value:o[s.value],label:o[s.label],closable:o[s.closable],tagProps:o[s.tagProps]});else if(a||isNumber$1(a)){const c={value:o,label:String(o),closable:!0};l.push(__spreadValues$U({raw:c},c))}return l},TAG_COLORS=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta","gray"],_sfc_main$2C=defineComponent({name:"Tag",components:{IconHover,IconClose,IconLoading},props:{color:{type:String},size:{type:String},bordered:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!0},nowrap:{type:Boolean,default:!1}},emits:{"update:visible":a=>!0,"update:checked":a=>!0,close:a=>!0,check:(a,s)=>!0},setup(a,{emit:s}){const{size:l}=toRefs(a),o=getPrefixCls("tag"),c=computed(()=>a.color&&TAG_COLORS.includes(a.color)),u=computed(()=>a.color&&!TAG_COLORS.includes(a.color)),d=ref(a.defaultVisible),f=ref(a.defaultChecked),g=computed(()=>{var se;return(se=a.visible)!=null?se:d.value}),y=computed(()=>{var se;return a.checkable?(se=a.checked)!=null?se:f.value:!0}),{mergedSize:$}=useSize$1(l),x=computed(()=>$.value==="mini"?"small":$.value),N=se=>{d.value=!1,s("update:visible",!1),s("close",se)},R=se=>{if(a.checkable){const ce=!y.value;f.value=ce,s("update:checked",ce),s("check",ce,se)}},j=computed(()=>[o,`${o}-size-${x.value}`,{[`${o}-loading`]:a.loading,[`${o}-hide`]:!g.value,[`${o}-${a.color}`]:c.value,[`${o}-bordered`]:a.bordered,[`${o}-checkable`]:a.checkable,[`${o}-checked`]:y.value,[`${o}-custom-color`]:u.value}]),ne=computed(()=>{if(u.value)return{backgroundColor:a.color}});return{prefixCls:o,cls:j,style:ne,computedVisible:g,computedChecked:y,handleClick:R,handleClose:N}}});function _sfc_render$2o(a,s,l,o,c,u){const d=resolveComponent("icon-close"),f=resolveComponent("icon-hover"),g=resolveComponent("icon-loading");return a.computedVisible?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(a.cls),style:normalizeStyle$1(a.style),onClick:s[0]||(s[0]=(...y)=>a.handleClick&&a.handleClick(...y))},[a.$slots.icon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon")],2)):createCommentVNode("v-if",!0),a.nowrap?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-text`)},[renderSlot(a.$slots,"default")],2)):renderSlot(a.$slots,"default",{key:2}),a.closable?(openBlock(),createBlock(f,{key:3,role:"button","aria-label":"Close",prefix:a.prefixCls,class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:withModifiers(a.handleClose,["stop"])},{default:withCtx(()=>[renderSlot(a.$slots,"close-icon",{},()=>[createVNode$1(d)])]),_:3},8,["prefix","class","onClick"])):createCommentVNode("v-if",!0),a.loading?(openBlock(),createElementBlock("span",{key:4,class:normalizeClass(`${a.prefixCls}-loading-icon`)},[createVNode$1(g)],2)):createCommentVNode("v-if",!0)],6)):createCommentVNode("v-if",!0)}var _Tag=_export_sfc(_sfc_main$2C,[["render",_sfc_render$2o]]);const Tag=Object.assign(_Tag,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Tag.name,_Tag)}});var __defProp$T=Object.defineProperty,__getOwnPropSymbols$U=Object.getOwnPropertySymbols,__hasOwnProp$U=Object.prototype.hasOwnProperty,__propIsEnum$U=Object.prototype.propertyIsEnumerable,__defNormalProp$T=(a,s,l)=>s in a?__defProp$T(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$T=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$U.call(s,l)&&__defNormalProp$T(a,l,s[l]);if(__getOwnPropSymbols$U)for(var l of __getOwnPropSymbols$U(s))__propIsEnum$U.call(s,l)&&__defNormalProp$T(a,l,s[l]);return a};const DEFAULT_FIELD_NAMES$1={value:"value",label:"label",closable:"closable",tagProps:"tagProps"};var _InputTag=defineComponent({name:"InputTag",inheritAttrs:!1,props:{modelValue:{type:Array},defaultValue:{type:Array,default:()=>[]},inputValue:String,defaultInputValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},size:{type:String},maxTagCount:{type:Number,default:0},retainInputValue:{type:[Boolean,Object],default:!1},formatTag:{type:Function},uniqueValue:{type:Boolean,default:!1},fieldNames:{type:Object},tagNowrap:{type:Boolean,default:!1},baseCls:String,focused:Boolean,disabledInput:Boolean,uninjectFormItemContext:Boolean},emits:{"update:modelValue":a=>!0,"update:inputValue":a=>!0,change:(a,s)=>!0,inputValueChange:(a,s)=>!0,pressEnter:(a,s)=>!0,remove:(a,s)=>!0,clear:a=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s,slots:l,attrs:o}){const{size:c,disabled:u,error:d,uninjectFormItemContext:f,modelValue:g}=toRefs(a),y=a.baseCls||getPrefixCls("input-tag"),$=ref(),x=ref(),{mergedSize:N,mergedDisabled:R,mergedError:j,feedback:ne,eventHandlers:se}=useFormItem({size:c,disabled:u,error:d,uninject:f?.value}),{mergedSize:ce}=useSize$1(N),fe=computed(()=>__spreadValues$T(__spreadValues$T({},DEFAULT_FIELD_NAMES$1),a.fieldNames)),ea=ref(!1),ta=ref(a.defaultValue),na=ref(a.defaultInputValue),aa=ref(!1),ia=ref(""),sa=computed(()=>isObject$1(a.retainInputValue)?__spreadValues$T({create:!1,blur:!1},a.retainInputValue):{create:a.retainInputValue,blur:a.retainInputValue}),ra=reactive({width:"12px"}),la=computed(()=>a.focused||ea.value),oa=(Sa,Fa)=>{na.value=Sa,s("update:inputValue",Sa),s("inputValueChange",Sa,Fa)},ca=Sa=>{var Fa;const{value:Ia}=Sa.target;Sa.type==="compositionend"?(aa.value=!1,ia.value="",oa(Ia,Sa),nextTick(()=>{$.value&&ua.value!==$.value.value&&($.value.value=ua.value)})):(aa.value=!0,ia.value=ua.value+((Fa=Sa.data)!=null?Fa:""))},pa=computed(()=>{var Sa;return(Sa=a.modelValue)!=null?Sa:ta.value}),ua=computed(()=>{var Sa;return(Sa=a.inputValue)!=null?Sa:na.value});watch(g,Sa=>{(isUndefined(Sa)||isNull(Sa))&&(ta.value=[])});const da=Sa=>{$.value&&Sa.target!==$.value&&(Sa.preventDefault(),$.value.focus())},ha=Sa=>{const{value:Fa}=Sa.target;aa.value||(oa(Fa,Sa),nextTick(()=>{$.value&&ua.value!==$.value.value&&($.value.value=ua.value)}))},ga=computed(()=>getValueData(pa.value,fe.value)),fa=computed(()=>{if(a.maxTagCount>0){const Sa=ga.value.length-a.maxTagCount;if(Sa>0){const Fa=ga.value.slice(0,a.maxTagCount),Ia={value:"__arco__more",label:`+${Sa}...`,closable:!1};return Fa.push(__spreadValues$T({raw:Ia},Ia)),Fa}}return ga.value}),ma=(Sa,Fa)=>{var Ia,Ga;ta.value=Sa,s("update:modelValue",Sa),s("change",Sa,Fa),(Ga=(Ia=se.value)==null?void 0:Ia.onChange)==null||Ga.call(Ia,Fa)},va=(Sa,Fa,Ia)=>{var Ga;const Ya=(Ga=pa.value)==null?void 0:Ga.filter((Va,La)=>La!==Fa);ma(Ya,Ia),s("remove",Sa,Ia)},ka=Sa=>{ma([],Sa),s("clear",Sa)},ya=computed(()=>!R.value&&!a.readonly&&a.allowClear&&!!pa.value.length),ba=Sa=>{var Fa;if(ua.value){if(Sa.preventDefault(),a.uniqueValue&&((Fa=pa.value)!=null&&Fa.includes(ua.value))){s("pressEnter",ua.value,Sa);return}const Ia=pa.value.concat(ua.value);ma(Ia,Sa),s("pressEnter",ua.value,Sa),sa.value.create||oa("",Sa)}},Ea=Sa=>{var Fa,Ia;ea.value=!0,s("focus",Sa),(Ia=(Fa=se.value)==null?void 0:Fa.onFocus)==null||Ia.call(Fa,Sa)},Ca=Sa=>{var Fa,Ia;ea.value=!1,!sa.value.blur&&ua.value&&oa("",Sa),s("blur",Sa),(Ia=(Fa=se.value)==null?void 0:Fa.onBlur)==null||Ia.call(Fa,Sa)},$a=()=>{for(let Sa=ga.value.length-1;Sa>=0;Sa--)if(ga.value[Sa].closable)return Sa;return-1},Pa=Sa=>{if(R.value||a.readonly)return;const Fa=Sa.key||Sa.code;if(!aa.value&&ua.value&&Fa===Enter.key&&ba(Sa),!aa.value&&fa.value.length>0&&!ua.value&&Fa===Backspace.key){const Ia=$a();Ia>=0&&va(ga.value[Ia].value,Ia,Sa)}},Da=Sa=>{Sa>12?ra.width=`${Sa}px`:ra.width="12px"};onMounted(()=>{x.value&&Da(x.value.offsetWidth)});const Ta=()=>{x.value&&Da(x.value.offsetWidth)};watch(ua,Sa=>{$.value&&!aa.value&&Sa!==$.value.value&&($.value.value=Sa)});const Ba=computed(()=>[y,`${y}-size-${ce.value}`,{[`${y}-disabled`]:R.value,[`${y}-disabled-input`]:a.disabledInput,[`${y}-error`]:j.value,[`${y}-focus`]:la.value,[`${y}-readonly`]:a.readonly,[`${y}-has-tag`]:fa.value.length>0,[`${y}-has-prefix`]:!!l.prefix,[`${y}-has-suffix`]:!!l.suffix||ya.value||ne.value,[`${y}-has-placeholder`]:!pa.value.length}]),wa=computed(()=>omit(o,INPUT_EVENTS)),Oa=computed(()=>pick(o,INPUT_EVENTS));return{inputRef:$,render:()=>{var Sa;return createVNode$1("span",mergeProps({class:Ba.value,onMousedown:da},wa.value),[createVNode$1(ResizeObserver$2,{onResize:Ta},{default:()=>[createVNode$1("span",{ref:x,class:`${y}-mirror`},[fa.value.length>0?ia.value||ua.value:ia.value||ua.value||a.placeholder])]}),l.prefix&&createVNode$1("span",{class:`${y}-prefix`},[l.prefix()]),createVNode$1(TransitionGroup,{tag:"span",name:"input-tag-zoom",class:[`${y}-inner`,{[`${y}-nowrap`]:a.tagNowrap}]},{default:()=>[fa.value.map((Fa,Ia)=>createVNode$1(Tag,mergeProps({key:`tag-${Fa.value}`,class:`${y}-tag`,closable:!R.value&&!a.readonly&&Fa.closable,visible:!0,nowrap:a.tagNowrap},Fa.tagProps,{onClose:Ga=>va(Fa.value,Ia,Ga)}),{default:()=>{var Ga,Ya,Va,La;return[(La=(Va=(Ga=l.tag)==null?void 0:Ga.call(l,{data:Fa.raw}))!=null?Va:(Ya=a.formatTag)==null?void 0:Ya.call(a,Fa.raw))!=null?La:Fa.label]}})),createVNode$1("input",mergeProps(Oa.value,{ref:$,key:"input-tag-input",class:`${y}-input`,style:ra,placeholder:fa.value.length===0?a.placeholder:void 0,disabled:R.value,readonly:a.readonly||a.disabledInput,onInput:ha,onKeydown:Pa,onFocus:Ea,onBlur:Ca,onCompositionstart:ca,onCompositionupdate:ca,onCompositionend:ca}),null)]}),ya.value&&createVNode$1(IconHover,{class:`${y}-clear-btn`,onClick:ka,onMousedown:Fa=>Fa.stopPropagation()},{default:()=>[createVNode$1(IconClose,null,null)]}),(l.suffix||!!ne.value)&&createVNode$1("span",{class:`${y}-suffix`},[(Sa=l.suffix)==null?void 0:Sa.call(l),!!ne.value&&createVNode$1(FeedbackIcon,{type:ne.value},null)])])}}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const InputTag=Object.assign(_InputTag,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_InputTag.name,_InputTag)}});var SelectView=defineComponent({name:"SelectView",props:{modelValue:{type:Array,required:!0},inputValue:String,placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},opened:{type:Boolean,default:!1},size:{type:String},bordered:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:a=>isArray$1(a.modelValue)},maxTagCount:{type:Number,default:0},tagNowrap:{type:Boolean,default:!1},retainInputValue:{type:Boolean,default:!1}},emits:["remove","clear","focus","blur"],setup(a,{emit:s,slots:l}){const{size:o,disabled:c,error:u}=toRefs(a),d=getPrefixCls("select-view"),{feedback:f,eventHandlers:g,mergedDisabled:y,mergedSize:$,mergedError:x}=useFormItem({size:o,disabled:c,error:u}),{mergedSize:N}=useSize$1($),{opened:R}=toRefs(a),j=ref(),ne=computed(()=>{var oa;return(oa=j.value)==null?void 0:oa.inputRef}),se=computed(()=>a.modelValue.length===0),ce=computed(()=>a.allowSearch||a.allowCreate),fe=computed(()=>a.allowClear&&!a.disabled&&!se.value),ea=oa=>{var ca,pa;s("focus",oa),(pa=(ca=g.value)==null?void 0:ca.onFocus)==null||pa.call(ca,oa)},ta=oa=>{var ca,pa;s("blur",oa),(pa=(ca=g.value)==null?void 0:ca.onBlur)==null||pa.call(ca,oa)},na=oa=>{s("remove",oa)},aa=oa=>{s("clear",oa)},ia=()=>{var oa,ca,pa,ua;return a.loading?(ca=(oa=l["loading-icon"])==null?void 0:oa.call(l))!=null?ca:createVNode$1(IconLoading,null,null):a.allowSearch&&a.opened?(ua=(pa=l["search-icon"])==null?void 0:pa.call(l))!=null?ua:createVNode$1(IconSearch,null,null):l["arrow-icon"]?l["arrow-icon"]():createVNode$1(IconDown,{class:`${d}-arrow-icon`},null)},sa=()=>createVNode$1(Fragment,null,[fe.value&&createVNode$1(IconHover,{class:`${d}-clear-btn`,onClick:aa,onMousedown:oa=>oa.stopPropagation()},{default:()=>[createVNode$1(IconClose,null,null)]}),createVNode$1("span",{class:`${d}-icon`},[ia()]),!!f.value&&createVNode$1(FeedbackIcon,{type:f.value},null)]);watch(R,oa=>{!oa&&ne.value&&ne.value.isSameNode(document.activeElement)&&ne.value.blur()});const ra=computed(()=>[`${d}-${a.multiple?"multiple":"single"}`,{[`${d}-opened`]:a.opened,[`${d}-borderless`]:!a.bordered}]);return{inputRef:ne,handleFocus:ea,handleBlur:ta,render:()=>a.multiple?createVNode$1(InputTag,{ref:j,baseCls:d,class:ra.value,modelValue:a.modelValue,inputValue:a.inputValue,focused:a.opened,placeholder:a.placeholder,disabled:y.value,size:N.value,error:x.value,maxTagCount:a.maxTagCount,disabledInput:!a.allowSearch&&!a.allowCreate,tagNowrap:a.tagNowrap,retainInputValue:!0,uninjectFormItemContext:!0,onRemove:na,onFocus:ea,onBlur:ta},{prefix:l.prefix,suffix:sa,tag:l.label}):createVNode$1(InputLabel,{ref:j,baseCls:d,class:ra.value,modelValue:a.modelValue[0],inputValue:a.inputValue,focused:a.opened,placeholder:a.placeholder,disabled:y.value,size:N.value,error:x.value,enabledInput:ce.value,uninjectFormItemContext:!0,onFocus:ea,onBlur:ta},{default:l.label,prefix:l.prefix,suffix:sa})}},methods:{focus(){this.inputRef&&this.inputRef.focus()},blur(){this.inputRef&&this.inputRef.blur()}},render(){return this.render()}});const _sfc_main$2B=defineComponent({name:"Optgroup",props:{label:{type:String}},setup(){return{prefixCls:getPrefixCls("select-group")}}});function _sfc_render$2n(a,s,l,o,c,u){return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("li",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"label",{},()=>[createTextVNode(toDisplayString(a.label),1)])],2),renderSlot(a.$slots,"default")],64)}var Optgroup=_export_sfc(_sfc_main$2B,[["render",_sfc_render$2n]]);const target=typeof window>"u"?global:window;function debounce(a,s){let l=0;return(...o)=>{l&&target.clearTimeout(l),l=target.setTimeout(()=>{l=0,a(...o)},s)}}var __defProp$S=Object.defineProperty,__defProps$s=Object.defineProperties,__getOwnPropDescs$s=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$T=Object.getOwnPropertySymbols,__hasOwnProp$T=Object.prototype.hasOwnProperty,__propIsEnum$T=Object.prototype.propertyIsEnumerable,__defNormalProp$S=(a,s,l)=>s in a?__defProp$S(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$S=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$T.call(s,l)&&__defNormalProp$S(a,l,s[l]);if(__getOwnPropSymbols$T)for(var l of __getOwnPropSymbols$T(s))__propIsEnum$T.call(s,l)&&__defNormalProp$S(a,l,s[l]);return a},__spreadProps$s=(a,s)=>__defProps$s(a,__getOwnPropDescs$s(s));function _isSlot$g(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}const DEFAULT_FIELD_NAMES={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"};var _Select=defineComponent({name:"Select",components:{Trigger,SelectView},inheritAttrs:!1,props:{multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Object,Array],default:a=>isUndefined(a.multiple)?"":[]},inputValue:{type:String},defaultInputValue:{type:String,default:""},size:{type:String},placeholder:String,loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowSearch:{type:[Boolean,Object],default:a=>!!a.multiple},allowCreate:{type:Boolean,default:!1},maxTagCount:{type:Number,default:0},popupContainer:{type:[String,Object]},bordered:{type:Boolean,default:!0},defaultActiveFirstOption:{type:Boolean,default:!0},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},unmountOnClose:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},options:{type:Array,default:()=>[]},virtualListProps:{type:Object},triggerProps:{type:Object},formatLabel:{type:Function},fallbackOption:{type:[Boolean,Function],default:!0},showExtraOptions:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},searchDelay:{type:Number,default:500},limit:{type:Number,default:0},fieldNames:{type:Object},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,"update:inputValue":a=>!0,"update:popupVisible":a=>!0,change:a=>!0,inputValueChange:a=>!0,popupVisibleChange:a=>!0,clear:a=>!0,remove:a=>!0,search:a=>!0,dropdownScroll:a=>!0,dropdownReachBottom:a=>!0,exceedLimit:(a,s)=>!0},setup(a,{slots:s,emit:l,attrs:o}){const{size:c,disabled:u,error:d,options:f,filterOption:g,valueKey:y,multiple:$,popupVisible:x,defaultPopupVisible:N,showExtraOptions:R,modelValue:j,fieldNames:ne,loading:se,defaultActiveFirstOption:ce}=toRefs(a),fe=getPrefixCls("select"),{mergedSize:ea,mergedDisabled:ta,mergedError:na,eventHandlers:aa}=useFormItem({size:c,disabled:u,error:d}),ia=computed(()=>a.virtualListProps?"div":"li"),sa=computed(()=>isObject$1(a.allowSearch)&&!!a.allowSearch.retainInputValue);computed(()=>{if(isFunction$1(a.formatLabel))return Ra=>{const Na=Ya.get(Ra.value);return a.formatLabel(Na)}});const ra=ref(),la=ref({}),oa=ref(),{computedPopupVisible:ca,handlePopupVisibleChange:pa}=useTrigger({popupVisible:x,defaultPopupVisible:N,emit:l}),ua=ref(a.defaultValue),da=computed(()=>{var Ra;const Na=(Ra=a.modelValue)!=null?Ra:ua.value;return(isArray$1(Na)?Na:Na||isNumber$1(Na)||isString$1(Na)||isBoolean$1(Na)?[Na]:[]).map(an=>({value:an,key:getKeyFromValue(an,a.valueKey)}))});watch(j,Ra=>{(isUndefined(Ra)||isNull(Ra))&&(ua.value=$.value?[]:Ra)});const ha=computed(()=>da.value.map(Ra=>Ra.key)),ga=computed(()=>__spreadValues$S(__spreadValues$S({},DEFAULT_FIELD_NAMES),ne?.value)),fa=ref(),ma=Ra=>{const Na={};return Ra.forEach(za=>{Na[za]=Ya.get(za)}),Na},va=Ra=>{fa.value=ma(Ra)},ka=Ra=>isFunction$1(a.fallbackOption)?a.fallbackOption(Ra):{[ga.value.value]:Ra,[ga.value.label]:String(isObject$1(Ra)?Ra[y?.value]:Ra)},ya=()=>{const Ra=[],Na=[];if(a.allowCreate||a.fallbackOption){for(const za of da.value)if(!Na.includes(za.key)&&za.value!==""){const an=Ya.get(za.key);(!an||an.origin==="extraOptions")&&(Ra.push(za),Na.push(za.key))}}if(a.allowCreate&&$a.value){const za=getKeyFromValue($a.value);if(!Na.includes(za)){const an=Ya.get(za);(!an||an.origin==="extraOptions")&&Ra.push({value:$a.value,key:za})}}return Ra},ba=ref([]),Ea=computed(()=>ba.value.map(Ra=>{var Na;let za=ka(Ra.value);const an=(Na=fa.value)==null?void 0:Na[Ra.key];return!isUndefined(an)&&!isEmptyObject$1(an)&&(za=__spreadValues$S(__spreadValues$S({},za),an)),za}));nextTick(()=>{watchEffect(()=>{var Ra;const Na=ya();if(Na.length!==ba.value.length)ba.value=Na;else if(Na.length>0){for(let za=0;za<Na.length;za++)if(Na[za].key!==((Ra=ba.value[za])==null?void 0:Ra.key)){ba.value=Na;break}}})});const Ca=ref(""),$a=computed(()=>{var Ra;return(Ra=a.inputValue)!=null?Ra:Ca.value});watch(ca,Ra=>{!Ra&&!sa.value&&$a.value&&Ta("")});const Pa=Ra=>{var Na,za;return a.multiple?Ra.map(an=>{var bn,En;return(En=(bn=Ya.get(an))==null?void 0:bn.value)!=null?En:""}):(za=(Na=Ya.get(Ra[0]))==null?void 0:Na.value)!=null?za:hasEmptyStringKey(Ya)?void 0:""},Da=Ra=>{var Na,za;const an=Pa(Ra);ua.value=an,l("update:modelValue",an),l("change",an),(za=(Na=aa.value)==null?void 0:Na.onChange)==null||za.call(Na),va(Ra)},Ta=Ra=>{Ca.value=Ra,l("update:inputValue",Ra),l("inputValueChange",Ra)},Ba=(Ra,Na)=>{if(a.multiple){if(ha.value.includes(Ra)){const za=ha.value.filter(an=>an!==Ra);Da(za)}else if(La.value.includes(Ra))if(a.limit>0&&ha.value.length>=a.limit){const za=Ya.get(Ra);l("exceedLimit",za?.value,Na)}else{const za=ha.value.concat(Ra);Da(za)}sa.value||Ta("")}else{if(Ra!==ha.value[0]&&Da([Ra]),sa.value){const za=Ya.get(Ra);za&&Ta(za.label)}pa(!1)}},wa=debounce(Ra=>{l("search",Ra)},a.searchDelay),Oa=Ra=>{Ra!==$a.value&&(ca.value||pa(!0),Ta(Ra),a.allowSearch&&wa(Ra))},Aa=Ra=>{const Na=Ya.get(Ra),za=ha.value.filter(an=>an!==Ra);Da(za),l("remove",Na?.value)},Sa=Ra=>{Ra?.stopPropagation();const Na=ha.value.filter(za=>{var an;return(an=Ya.get(za))==null?void 0:an.disabled});Da(Na),Ta(""),l("clear",Ra)},Fa=Ra=>{l("dropdownScroll",Ra)},Ia=Ra=>{l("dropdownReachBottom",Ra)},{validOptions:Ga,optionInfoMap:Ya,validOptionInfos:Va,enabledOptionKeys:La,handleKeyDown:Za}=useSelect({multiple:$,options:f,extraOptions:Ea,inputValue:$a,filterOption:g,showExtraOptions:R,component:ia,valueKey:y,fieldNames:ne,loading:se,popupVisible:ca,valueKeys:ha,dropdownRef:ra,optionRefs:la,virtualListRef:oa,defaultActiveFirstOption:ce,onSelect:Ba,onPopupVisibleChange:pa}),rn=computed(()=>{var Ra;const Na=[];for(const za of da.value){const an=Ya.get(za.key);an&&Na.push(__spreadProps$s(__spreadValues$S({},an),{value:za.key,label:(Ra=an?.label)!=null?Ra:String(isObject$1(za.value)?za.value[y?.value]:za.value),closable:!an?.disabled,tagProps:an?.tagProps}))}return Na}),pn=Ra=>{if(isFunction$1(s.option)){const Na=s.option;return()=>Na({data:Ra.raw})}return isFunction$1(Ra.render)?Ra.render:()=>Ra.label},fn=Ra=>{if(isGroupOptionInfo(Ra)){let Na;return createVNode$1(Optgroup,{key:Ra.key,label:Ra.label},_isSlot$g(Na=Ra.options.map(za=>fn(za)))?Na:{default:()=>[Na]})}return isValidOption(Ra,{inputValue:$a.value,filterOption:g?.value})?createVNode$1(Option,{ref:Na=>{Na?.$el&&(la.value[Ra.key]=Na.$el)},key:Ra.key,value:Ra.value,label:Ra.label,disabled:Ra.disabled,internal:!0},{default:pn(Ra)}):null},mn=()=>createVNode$1(SelectDropdown,{ref:ra,loading:a.loading,empty:Va.value.length===0,virtualList:!!a.virtualListProps,scrollbar:a.scrollbar,showHeaderOnEmpty:a.showHeaderOnEmpty,showFooterOnEmpty:a.showFooterOnEmpty,onScroll:Fa,onReachBottom:Ia},{default:()=>{var Ra,Na;return[...(Na=(Ra=s.default)==null?void 0:Ra.call(s))!=null?Na:[],...Ga.value.map(fn)]},"virtual-list":()=>createVNode$1(VirtualList,mergeProps(a.virtualListProps,{ref:oa,data:Ga.value}),{item:({item:Ra})=>fn(Ra)}),empty:s.empty,header:s.header,footer:s.footer}),Dn=({data:Ra})=>{var Na,za,an,bn;if((s.label||isFunction$1(a.formatLabel))&&Ra){const En=Ya.get(Ra.value);if(En?.raw)return(an=(Na=s.label)==null?void 0:Na.call(s,{data:En.raw}))!=null?an:(za=a.formatLabel)==null?void 0:za.call(a,En.raw)}return(bn=Ra?.label)!=null?bn:""};return()=>createVNode$1(Trigger,mergeProps({trigger:"click",position:"bl",popupOffset:4,animationName:"slide-dynamic-origin",hideEmpty:!0,preventFocus:!0,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:ta.value,popupVisible:ca.value,unmountOnClose:a.unmountOnClose,clickToClose:!(a.allowSearch||a.allowCreate),popupContainer:a.popupContainer,onPopupVisibleChange:pa},a.triggerProps),{default:()=>{var Ra,Na;return[(Na=(Ra=s.trigger)==null?void 0:Ra.call(s))!=null?Na:createVNode$1(SelectView,mergeProps({class:fe,modelValue:rn.value,inputValue:$a.value,multiple:a.multiple,disabled:ta.value,error:na.value,loading:a.loading,allowClear:a.allowClear,allowCreate:a.allowCreate,allowSearch:!!a.allowSearch,opened:ca.value,maxTagCount:a.maxTagCount,placeholder:a.placeholder,bordered:a.bordered,size:ea.value,tagNowrap:a.tagNowrap,onInputValueChange:Oa,onRemove:Aa,onClear:Sa,onKeydown:Za},o),{label:Dn,prefix:s.prefix,"arrow-icon":s["arrow-icon"],"loading-icon":s["loading-icon"],"search-icon":s["search-icon"]})]},content:mn})}});const Select=Object.assign(_Select,{Option,OptGroup:Optgroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Select.name,_Select),a.component(l+Option.name,Option),a.component(l+Optgroup.name,Optgroup)}}),radioGroupKey=Symbol("RadioGroup");var _Radio=defineComponent({name:"Radio",components:{IconHover},props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultChecked:{type:Boolean,default:!1},value:{type:[String,Number,Boolean],default:!0},type:{type:String,default:"radio"},disabled:{type:Boolean,default:!1},uninjectGroupContext:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const o=getPrefixCls("radio"),{modelValue:c}=toRefs(a),u=a.uninjectGroupContext?void 0:inject(radioGroupKey,void 0),{mergedDisabled:d,eventHandlers:f}=useFormItem({disabled:toRef(a,"disabled")}),g=ref(null),y=ref(a.defaultChecked),$=computed(()=>u?.name==="ArcoRadioGroup"),x=computed(()=>{var ta;return(ta=u?.type)!=null?ta:a.type}),N=computed(()=>u?.disabled||d.value),R=computed(()=>{var ta,na;return $.value?u?.value===((ta=a.value)!=null?ta:!0):isUndefined(a.modelValue)?y.value:a.modelValue===((na=a.value)!=null?na:!0)});watch(c,ta=>{(isUndefined(ta)||isNull(ta))&&(y.value=!1)}),watch(R,(ta,na)=>{ta!==na&&(y.value=ta,g.value&&(g.value.checked=ta))});const j=ta=>{var na,aa;(aa=(na=f.value)==null?void 0:na.onFocus)==null||aa.call(na,ta)},ne=ta=>{var na,aa;(aa=(na=f.value)==null?void 0:na.onBlur)==null||aa.call(na,ta)},se=ta=>{ta.stopPropagation()},ce=ta=>{var na,aa,ia,sa,ra;y.value=!0,$.value?u?.handleChange((na=a.value)!=null?na:!0,ta):(s("update:modelValue",(aa=a.value)!=null?aa:!0),s("change",(ia=a.value)!=null?ia:!0,ta),(ra=(sa=f.value)==null?void 0:sa.onChange)==null||ra.call(sa,ta)),nextTick(()=>{g.value&&g.value.checked!==R.value&&(g.value.checked=R.value)})},fe=computed(()=>[`${x.value==="button"?`${o}-button`:o}`,{[`${o}-checked`]:R.value,[`${o}-disabled`]:N.value}]),ea=()=>createVNode$1(Fragment,null,[createVNode$1(resolveComponent("icon-hover"),{class:`${o}-icon-hover`,disabled:N.value||R.value},{default:()=>[createVNode$1("span",{class:`${o}-icon`},null)]}),l.default&&createVNode$1("span",{class:`${o}-label`},[l.default()])]);return()=>{var ta,na,aa,ia;return createVNode$1("label",{class:fe.value},[createVNode$1("input",{ref:g,type:"radio",checked:R.value,value:a.value,class:`${o}-target`,disabled:N.value,onClick:se,onChange:ce,onFocus:j,onBlur:ne},null),x.value==="radio"?(ia=(aa=(na=l.radio)!=null?na:(ta=u?.slots)==null?void 0:ta.radio)==null?void 0:aa({checked:R.value,disabled:N.value}))!=null?ia:ea():createVNode$1("span",{class:`${o}-button-content`},[l.default&&l.default()])])}}}),RadioGroup=defineComponent({name:"RadioGroup",props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultValue:{type:[String,Number,Boolean],default:""},type:{type:String,default:"radio"},size:{type:String},options:{type:Array},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const o=getPrefixCls("radio-group"),{size:c,type:u,disabled:d,modelValue:f}=toRefs(a),{mergedDisabled:g,mergedSize:y,eventHandlers:$}=useFormItem({size:c,disabled:d}),{mergedSize:x}=useSize$1(y),N=ref(a.defaultValue),R=computed(()=>{var fe;return(fe=a.modelValue)!=null?fe:N.value}),j=computed(()=>{var fe;return((fe=a.options)!=null?fe:[]).map(ea=>isString$1(ea)||isNumber$1(ea)?{label:ea,value:ea}:ea)});provide(radioGroupKey,reactive({name:"ArcoRadioGroup",value:R,size:x,type:u,disabled:g,slots:l,handleChange:(fe,ea)=>{var ta,na;N.value=fe,s("update:modelValue",fe),s("change",fe,ea),(na=(ta=$.value)==null?void 0:ta.onChange)==null||na.call(ta,ea)}})),watch(R,fe=>{N.value!==fe&&(N.value=fe)}),watch(f,fe=>{(isUndefined(fe)||isNull(fe))&&(N.value="")});const se=computed(()=>[`${o}${a.type==="button"?"-button":""}`,`${o}-size-${x.value}`,`${o}-direction-${a.direction}`,{[`${o}-disabled`]:g.value}]),ce=()=>j.value.map(fe=>createVNode$1(_Radio,{key:fe.value,value:fe.value,disabled:fe.disabled,modelValue:R.value===fe.value},{default:()=>[l.label?l.label({data:fe}):isFunction$1(fe.label)?fe.label():fe.label]}));return()=>{var fe;return createVNode$1("span",{class:se.value},[j.value.length>0?ce():(fe=l.default)==null?void 0:fe.call(l)])}}});const Radio=Object.assign(_Radio,{Group:RadioGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Radio.name,_Radio),a.component(l+RadioGroup.name,RadioGroup)}}),_sfc_main$2A=defineComponent({name:"IconLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-left`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1e=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$V=createBaseVNode("path",{d:"M32 8.4 16.444 23.956 32 39.513"},null,-1),_hoisted_3$Q=[_hoisted_2$V];function _sfc_render$2m(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$Q,14,_hoisted_1$1e)}var _IconLeft=_export_sfc(_sfc_main$2A,[["render",_sfc_render$2m]]);const IconLeft=Object.assign(_IconLeft,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconLeft.name,_IconLeft)}});function _isSlot$f(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}function getPopupContainer(a){return a.parentElement}var Header=defineComponent({name:"Header",props:{mode:{type:String},dayStartOfWeek:{type:Number},isWeek:{type:Boolean},panel:{type:Boolean},modes:{type:Array},headerType:{type:String},pageShowData:{type:Object,required:!0},move:{type:Function,required:!0},onYearChange:{type:Function,required:!0},onMonthChange:{type:Function,required:!0},changePageShowDate:{type:Function,required:!0},onModeChange:{type:Function,required:!0},headerValueFormat:{type:String,required:!0}},emits:["yearChange","monthChange"],setup(a,{slots:s}){const l=getPrefixCls("calendar"),{t:o}=useI18n(),c=isArray$1(a.modes)?a.modes.map($=>({label:o(`datePicker.view.${$}`),value:$})):[],u=a.headerType==="select",d=computed(()=>a.pageShowData.year()),f=computed(()=>a.pageShowData.month()+1),g=computed(()=>{const $=[d.value];for(let x=1;x<=10;x++)$.unshift(d.value-x);for(let x=1;x<10;x++)$.push(d.value+x);return $}),y=[1,2,3,4,5,6,7,8,9,10,11,12];return()=>{let $;return createVNode$1("div",{class:`${l}-header`},[createVNode$1("div",{class:`${l}-header-left`},[u?createVNode$1(Fragment,null,[createVNode$1(Select,{size:"small",class:`${l}-header-value-year`,value:d,options:g.value,onChange:a.onYearChange,getPopupContainer},null),a.mode==="month"&&createVNode$1(Select,{size:"small",class:`${l}-header-value-month`,value:f,options:y,onChange:a.onMonthChange,getPopupContainer},null)]):createVNode$1(Fragment,null,[createVNode$1("div",{class:`${l}-header-icon`,role:"button",tabIndex:0,onClick:()=>a.changePageShowDate("prev",a.mode)},[createVNode$1(IconLeft,null,null)]),createVNode$1("div",{class:`${l}-header-value`},[s.default?s.default({year:d,month:f}):a.pageShowData.format(a.headerValueFormat)]),createVNode$1("div",{role:"button",tabIndex:0,class:`${l}-header-icon`,onClick:()=>a.changePageShowDate("next",a.mode)},[createVNode$1(IconRight,null,null)])]),createVNode$1(Button,{size:"small",onClick:()=>a.move(getNow())},_isSlot$f($=o("datePicker.today"))?$:{default:()=>[$]})]),createVNode$1("div",{class:`${l}-header-right`},[createVNode$1(Radio.Group,{size:"small",type:"button",options:c,onChange:a.onModeChange,modelValue:a.mode},null)])])}}});function getFormat(a,s){return a==="month"||a==="year"&&!s?"YYYY-MM-DD":"YYYY-MM"}var _Calendar=defineComponent({name:"Calendar",props:{modelValue:{type:Date,default:void 0},defaultValue:{type:Date},mode:{type:String},defaultMode:{type:String,default:"month"},modes:{type:Array,default:()=>["month","year"]},allowSelect:{type:Boolean,default:!0},panel:{type:Boolean,default:!1},panelWidth:{type:Number},panelTodayBtn:{type:Boolean,default:!1},dayStartOfWeek:{type:Number,default:0},isWeek:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:a=>!0,panelChange:a=>!0},setup(a,{emit:s,slots:l}){const{dayStartOfWeek:o,isWeek:c}=toRefs(a),u=getPrefixCls("calendar"),d=ref(a.defaultMode),{t:f}=useI18n(),g=computed(()=>a.mode?a.mode:d.value),y=getFormat(g.value,a.panel),$=ref(getDayjsValue(a.defaultValue||Date.now(),y)),x=computed(()=>a.modelValue?getDayjsValue(a.modelValue,y):$.value),N=ref(x.value||getNow()),R=computed(()=>getAllDaysByTime(N.value,{dayStartOfWeek:o.value,isWeek:c.value}));function j(sa){N.value=sa,s("panelChange",sa.toDate())}function ne(sa){$.value=sa,s("change",sa.toDate()),s("update:modelValue",sa.toDate()),j(sa)}function se(sa,ra=!1){ra||ne(sa)}let ce="";g.value==="month"?ce=f("calendar.formatMonth"):g.value==="year"&&(ce=f("calendar.formatYear"));function fe(sa,ra){sa==="prev"&&(N.value=methods.subtract(N.value,1,ra)),sa==="next"&&(N.value=methods.add(N.value,1,ra)),s("panelChange",N.value.toDate())}function ea(sa){const ra=methods.set(N.value,"year",sa);N.value=ra,s("panelChange",ra.toDate())}function ta(sa){const ra=methods.set(N.value,"month",sa-1);N.value=ra,s("panelChange",ra.toDate())}function na(sa){d.value=sa}const aa=computed(()=>[u,g.value==="month"?`${u}-mode-month`:`${u}-mode-year`,{[`${u}-panel`]:a.panel&&(g.value==="month"||g.value==="year")}]),ia=a.panel?{width:a.panelWidth}:{};return()=>createVNode$1("div",mergeProps({class:aa.value,style:ia},pickDataAttributes(a)),[createVNode$1(Header,{move:ne,headerValueFormat:ce,modes:a.modes,mode:g.value,pageShowData:N.value,dayStartOfWeek:a.dayStartOfWeek,isWeek:a.isWeek,onModeChange:na,onYearChange:ea,onMonthChange:ta,changePageShowDate:fe},{default:l.header}),g.value==="month"&&createVNode$1("div",{class:`${u}-body`},[createVNode$1(Month,{key:N.value.month(),pageData:R.value,value:x.value,mode:g.value,selectHandler:se,isWeek:a.isWeek,dayStartOfWeek:a.dayStartOfWeek,pageShowDate:N.value},{default:l.default})]),g.value==="year"&&createVNode$1("div",{class:`${u}-body`},[createVNode$1(Year,{key:N.value.year(),pageData:R.value,pageShowData:N.value,mode:g.value,isWeek:a.isWeek,value:x.value,dayStartOfWeek:a.dayStartOfWeek,selectHandler:se},null)]),a.panel&&a.panelTodayBtn&&createVNode$1("div",{class:`${u}-footer-btn-wrapper`},[f("today")])])}});const Calendar=Object.assign(_Calendar,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Calendar.name,_Calendar)}}),cardInjectionKey=Symbol("ArcoCard");var _Card=defineComponent({name:"Card",components:{Spin},props:{bordered:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},size:{type:String},headerStyle:{type:Object,default:()=>({})},bodyStyle:{type:Object,default:()=>({})},title:{type:String},extra:{type:String}},setup(a,{slots:s}){const l=getPrefixCls("card"),{size:o}=toRefs(a),{mergedSize:c}=useSize$1(o),u=computed(()=>c.value==="small"||c.value==="mini"?"small":"medium"),d=y=>{const $=getAllElements(y);return createVNode$1("div",{class:`${l}-actions`},[createVNode$1("div",{class:`${l}-actions-right`},[$.map((x,N)=>createVNode$1("span",{key:`action-${N}`,class:`${l}-actions-item`},[x]))])])},f=reactive({hasMeta:!1,hasGrid:!1,slots:s,renderActions:d});provide(cardInjectionKey,f);const g=computed(()=>[l,`${l}-size-${u.value}`,{[`${l}-loading`]:a.loading,[`${l}-bordered`]:a.bordered,[`${l}-hoverable`]:a.hoverable,[`${l}-contain-grid`]:f.hasGrid}]);return()=>{var y,$,x,N,R,j,ne;const se=!!((y=s.title)!=null?y:a.title),ce=!!(($=s.extra)!=null?$:a.extra);return createVNode$1("div",{class:g.value},[(se||ce)&&createVNode$1("div",{class:[`${l}-header`,{[`${l}-header-no-title`]:!se}],style:a.headerStyle},[se&&createVNode$1("div",{class:`${l}-header-title`},[(N=(x=s.title)==null?void 0:x.call(s))!=null?N:a.title]),ce&&createVNode$1("div",{class:`${l}-header-extra`},[(j=(R=s.extra)==null?void 0:R.call(s))!=null?j:a.extra])]),s.cover&&createVNode$1("div",{class:`${l}-cover`},[s.cover()]),createVNode$1("div",{class:`${l}-body`,style:a.bodyStyle},[a.loading?createVNode$1(Spin,null,null):(ne=s.default)==null?void 0:ne.call(s),s.actions&&!f.hasMeta&&d(s.actions())])])}}}),CardMeta=defineComponent({name:"CardMeta",props:{title:{type:String},description:{type:String}},setup(a,{slots:s}){const l=getPrefixCls("card-meta"),o=inject(cardInjectionKey);return onMounted(()=>{o&&(o.hasMeta=!0)}),()=>{var c,u,d,f,g,y;const $=!!((c=s.title)!=null?c:a.title),x=!!((u=s.description)!=null?u:a.description);return createVNode$1("div",{class:l},[($||x)&&createVNode$1("div",{class:`${l}-content`},[$&&createVNode$1("div",{class:`${l}-title`},[(f=(d=s.title)==null?void 0:d.call(s))!=null?f:a.title]),x&&createVNode$1("div",{class:`${l}-description`},[(y=(g=s.description)==null?void 0:g.call(s))!=null?y:a.description])]),(s.avatar||o?.slots.actions)&&createVNode$1("div",{class:[`${l}-footer `,{[`${l}-footer-only-actions`]:!s.avatar}]},[s.avatar&&createVNode$1("div",{class:`${l}-avatar`},[s.avatar()]),o&&o.slots.actions&&o.renderActions(o.slots.actions())])])}}});const _sfc_main$2z=defineComponent({name:"CardGrid",props:{hoverable:{type:Boolean,default:!1}},setup(a){const s=getPrefixCls("card-grid"),l=inject(cardInjectionKey);return onMounted(()=>{l&&(l.hasGrid=!0)}),{cls:computed(()=>[s,{[`${s}-hoverable`]:a.hoverable}])}}});function _sfc_render$2l(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[renderSlot(a.$slots,"default")],2)}var CardGrid=_export_sfc(_sfc_main$2z,[["render",_sfc_render$2l]]);const Card=Object.assign(_Card,{Meta:CardMeta,Grid:CardGrid,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Card.name,_Card),a.component(l+CardMeta.name,CardMeta),a.component(l+CardGrid.name,CardGrid)}}),_sfc_main$2y=defineComponent({name:"Indicator",props:{count:{type:Number,default:2},activeIndex:{type:Number,default:0},type:{type:String,default:"line"},position:{type:String,default:"bottom"},trigger:{type:String,default:"click"}},emits:["select"],setup(a,{emit:s}){const l=getPrefixCls("carousel-indicator"),o=f=>{var g;if(f.preventDefault(),a.type==="slider"){const y=f.offsetX,$=f.currentTarget.clientWidth;if(f.target===f.currentTarget){const x=Math.floor(y/$*a.count);x!==a.activeIndex&&s("select",x)}}else{const y=Number.parseInt((g=f.target.getAttribute("data-index"))!=null?g:"",10);!Number.isNaN(y)&&y!==a.activeIndex&&s("select",y)}},c=computed(()=>a.trigger==="click"?{onClick:o}:{onMouseover:o}),u=computed(()=>[`${l}`,`${l}-${a.type}`,`${l}-${a.position}`]),d=computed(()=>{const f=100/a.count;return{width:`${f}%`,left:`${a.activeIndex*f}%`}});return{prefixCls:l,eventHandlers:c,cls:u,sliderStyle:d}}}),_hoisted_1$1d=["data-index"];function _sfc_render$2k(a,s,l,o,c,u){return openBlock(),createElementBlock("div",mergeProps({class:a.cls},a.eventHandlers),[a.type==="slider"?(openBlock(),createElementBlock("span",{key:0,style:normalizeStyle$1(a.sliderStyle),class:normalizeClass([`${a.prefixCls}-item`,`${a.prefixCls}-item-active`])},null,6)):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(Array(a.count),(d,f)=>(openBlock(),createElementBlock("span",{key:f,"data-index":f,class:normalizeClass([`${a.prefixCls}-item`,{[`${a.prefixCls}-item-active`]:f===a.activeIndex}])},null,10,_hoisted_1$1d))),128))],16)}var CarouselIndicator=_export_sfc(_sfc_main$2y,[["render",_sfc_render$2k]]);const _sfc_main$2x=defineComponent({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-up`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1c=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$U=createBaseVNode("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),_hoisted_3$P=[_hoisted_2$U];function _sfc_render$2j(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$P,14,_hoisted_1$1c)}var _IconUp=_export_sfc(_sfc_main$2x,[["render",_sfc_render$2j]]);const IconUp=Object.assign(_IconUp,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconUp.name,_IconUp)}}),_sfc_main$2w=defineComponent({name:"Arrow",components:{IconUp,IconDown,IconLeft,IconRight},props:{direction:{type:String,default:"horizontal"},showArrow:{type:String,default:"always"}},emits:["previousClick","nextClick"],setup(a,{emit:s}){const l=getPrefixCls("carousel"),o=d=>{s("previousClick",d)},c=d=>{s("nextClick",d)},u=computed(()=>[`${l}-arrow`,{[`${l}-arrow-hover`]:a.showArrow==="hover"}]);return{prefixCls:l,cls:u,onPreviousClick:o,onNextClick:c}}});function _sfc_render$2i(a,s,l,o,c,u){const d=resolveComponent("IconLeft"),f=resolveComponent("IconUp"),g=resolveComponent("IconRight"),y=resolveComponent("IconDown");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-arrow-${a.direction==="vertical"?"top":"left"}`),onClick:s[0]||(s[0]=(...$)=>a.onPreviousClick&&a.onPreviousClick(...$))},[a.direction==="horizontal"?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1}))],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-arrow-${a.direction==="vertical"?"bottom":"right"}`),onClick:s[1]||(s[1]=(...$)=>a.onNextClick&&a.onNextClick(...$))},[a.direction==="horizontal"?(openBlock(),createBlock(g,{key:0})):(openBlock(),createBlock(y,{key:1}))],2)],2)}var CarouselArrow=_export_sfc(_sfc_main$2w,[["render",_sfc_render$2i]]);const carouselInjectionKey=Symbol("ArcoCarousel"),useChildrenComponents=a=>{const s={},l=ref([]),o=()=>{if(s.value){const c=getComponentsFromChildren(s.value,a);(c.length!==l.value.length||c.toString()!==l.value.toString())&&(l.value=c)}};return onMounted(()=>o()),onUpdated(()=>o()),{children:s,components:l}};var __defProp$R=Object.defineProperty,__getOwnPropSymbols$S=Object.getOwnPropertySymbols,__hasOwnProp$S=Object.prototype.hasOwnProperty,__propIsEnum$S=Object.prototype.propertyIsEnumerable,__defNormalProp$R=(a,s,l)=>s in a?__defProp$R(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$R=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$S.call(s,l)&&__defNormalProp$R(a,l,s[l]);if(__getOwnPropSymbols$S)for(var l of __getOwnPropSymbols$S(s))__propIsEnum$S.call(s,l)&&__defNormalProp$R(a,l,s[l]);return a};const DEFAULT_AUTO_PLAY={interval:3e3,hoverToPause:!0};function getValidIndex(a,s){const l=+a;return typeof l=="number"&&!Number.isNaN(l)?(l+s)%s:a}var _Carousel=defineComponent({name:"Carousel",props:{current:{type:Number},defaultCurrent:{type:Number,default:1},autoPlay:{type:[Boolean,Object],default:!1},moveSpeed:{type:Number,default:500},animationName:{type:String,default:"slide"},trigger:{type:String,default:"click"},direction:{type:String,default:"horizontal"},showArrow:{type:String,default:"always"},arrowClass:{type:String,default:""},indicatorType:{type:String,default:"dot"},indicatorPosition:{type:String,default:"bottom"},indicatorClass:{type:String,default:""},transitionTimingFunction:{type:String,default:"cubic-bezier(0.34, 0.69, 0.1, 1)"}},emits:{"update:current":a=>!0,change:(a,s,l)=>!0},setup(a,{emit:s,slots:l}){const{current:o,animationName:c,moveSpeed:u,transitionTimingFunction:d}=toRefs(a),f=getPrefixCls("carousel"),g=ref(!1),y=ref(),$=ref(),x=computed(()=>isObject$1(a.autoPlay)?__spreadValues$R(__spreadValues$R({},DEFAULT_AUTO_PLAY),a.autoPlay):a.autoPlay?DEFAULT_AUTO_PLAY:{});let N=0,R=0;const{children:j,components:ne}=useChildrenComponents("CarouselItem"),se=ref(a.defaultCurrent-1),ce=computed(()=>{const ua=ne.value.length,da=isNumber$1(o.value)?getValidIndex(o.value-1,ua):se.value,ha=getValidIndex(da-1,ua),ga=getValidIndex(da+1,ua);return{mergedIndex:da,mergedPrevIndex:ha,mergedNextIndex:ga}}),fe=reactive({items:ne,slideTo:ta,mergedIndexes:ce,previousIndex:y,animationName:c,slideDirection:$,transitionTimingFunction:d,moveSpeed:u});provide(carouselInjectionKey,fe);const ea=()=>{N&&window.clearInterval(N)};watchEffect(()=>{var ua;const{interval:da}=x.value||{},{mergedNextIndex:ha}=ce.value,ga=((ua=ne.value)==null?void 0:ua.length)>1&&!g.value&&!!da;ea(),ga&&(N=window.setInterval(()=>{ta({targetIndex:ha})},da))}),onBeforeUnmount(()=>{ea()});function ta({targetIndex:ua,isNegative:da=!1,isManual:ha=!1}){!R&&ua!==ce.value.mergedIndex&&(y.value=se.value,se.value=ua,$.value=da?"negative":"positive",R=window.setTimeout(()=>{R=0},u.value),s("update:current",se.value+1),s("change",se.value+1,y.value+1,ha))}const na=()=>ta({targetIndex:ce.value.mergedPrevIndex,isNegative:!0,isManual:!0}),aa=()=>ta({targetIndex:ce.value.mergedNextIndex,isManual:!0}),ia=ua=>ta({targetIndex:ua,isNegative:ua<ce.value.mergedIndex,isManual:!0}),sa=computed(()=>x.value.hoverToPause?{onMouseenter:()=>{g.value=!0},onMouseleave:()=>{g.value=!1}}:{}),ra=computed(()=>a.indicatorType!=="never"&&ne.value.length>1),la=computed(()=>a.showArrow!=="never"&&ne.value.length>1),oa=computed(()=>[f,`${f}-indicator-position-${a.indicatorPosition}`]),ca=computed(()=>[`${f}-${a.animationName}`,`${f}-${a.direction}`,{[`${f}-negative`]:$.value==="negative"}]),pa=computed(()=>[`${f}-indicator-wrapper`,`${f}-indicator-wrapper-${a.indicatorPosition}`]);return()=>{var ua;return j.value=(ua=l.default)==null?void 0:ua.call(l),createVNode$1("div",mergeProps({class:oa.value},sa.value),[createVNode$1("div",{class:ca.value},[j.value]),ra.value&&createVNode$1("div",{class:pa.value},[createVNode$1(CarouselIndicator,{class:a.indicatorClass,type:a.indicatorType,count:ne.value.length,activeIndex:ce.value.mergedIndex,position:a.indicatorPosition,trigger:a.trigger,onSelect:ia},null)]),la.value&&createVNode$1(CarouselArrow,{class:a.arrowClass,direction:a.direction,showArrow:a.showArrow,onPreviousClick:na,onNextClick:aa},null)])}}});const _sfc_main$2v=defineComponent({name:"CarouselItem",setup(){const a=getPrefixCls("carousel-item"),s=getCurrentInstance(),l=inject(carouselInjectionKey,{}),o=computed(()=>{var f,g,y;return(y=(g=l.items)==null?void 0:g.indexOf((f=s?.uid)!=null?f:-1))!=null?y:-1}),c=computed(()=>{var f;return((f=l.mergedIndexes)==null?void 0:f.mergedIndex)===o.value}),u=computed(()=>{const{previousIndex:f,animationName:g,slideDirection:y,mergedIndexes:$}=l;return{[`${a}-prev`]:o.value===$?.mergedPrevIndex,[`${a}-next`]:o.value===$?.mergedNextIndex,[`${a}-current`]:c.value,[`${a}-slide-in`]:g==="slide"&&y&&c.value,[`${a}-slide-out`]:g==="slide"&&y&&o.value===f}}),d=computed(()=>{const{transitionTimingFunction:f,moveSpeed:g}=l;return{transitionTimingFunction:f,transitionDuration:`${g}ms`,animationTimingFunction:f,animationDuration:`${g}ms`}});return{cls:u,animationStyle:d,isCurrent:c}}}),_hoisted_1$1b=["aria-hidden"];function _sfc_render$2h(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{"aria-hidden":!a.isCurrent,class:normalizeClass(a.cls),style:normalizeStyle$1(a.animationStyle)},[renderSlot(a.$slots,"default")],14,_hoisted_1$1b)}var CarouselItem=_export_sfc(_sfc_main$2v,[["render",_sfc_render$2h]]);const Carousel=Object.assign(_Carousel,{Item:CarouselItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Carousel.name,_Carousel),a.component(l+CarouselItem.name,CarouselItem)}}),getOptionInfos=(a,{optionMap:s,leafOptionMap:l,leafOptionSet:o,leafOptionValueMap:c,totalLevel:u,checkStrictly:d,enabledLazyLoad:f,lazyLoadOptions:g,valueKey:y,fieldNames:$})=>{let x=0;const N=(j,ne,se)=>{var ce;const fe=(ce=ne?.path)!=null?ce:[];return x=Math.max(x,se??1),j.map((ea,ta)=>{var na;const aa=ea[$.value],ia={raw:ea,value:aa,label:(na=ea[$.label])!=null?na:String(aa),disabled:!!ea[$.disabled],selectionDisabled:!1,render:ea[$.render],tagProps:ea[$.tagProps],isLeaf:ea[$.isLeaf],level:fe.length,index:ta,key:"",valueKey:String(isObject$1(aa)?aa[y.value]:aa),parent:ne,path:[],pathValue:[]},sa=fe.concat(ia),ra=[],la=sa.map(oa=>(ra.push(oa.value),oa.valueKey)).join("-");return ia.path=sa,ia.pathValue=ra,ia.key=la,ea[$.children]?(ia.isLeaf=!1,ia.children=N(ea[$.children],ia,(se??1)+1)):f&&!ia.isLeaf?(ia.isLeaf=!1,g[la]&&(ia.children=N(g[la],ia,(se??1)+1))):ia.isLeaf=!0,ia.children&&!ia.disabled&&(ia.totalLeafOptions=ia.children.reduce((oa,ca)=>isNumber$1(ca.totalLeafOptions)?oa+ca.totalLeafOptions:ca.disabled||ca.selectionDisabled?oa:oa+(ca.isLeaf?1:0),0),ia.totalLeafOptions===0&&!d.value&&(ia.selectionDisabled=!0)),s.set(ia.key,ia),(ia.isLeaf||d.value)&&(o.add(ia),l.set(ia.key,ia),c.has(ia.valueKey)||c.set(ia.valueKey,ia.key)),ia})},R=N(a);return u.value=x,R},getCheckedStatus=(a,s)=>{var l,o;let c=!1,u=!1;if(a.isLeaf)s?.has(a.key)&&(c=!0);else{const d=new RegExp(`^${a.key}(-|$)`),f=Array.from((l=s?.keys())!=null?l:[]).reduce((g,y)=>d.test(y)?g+1:g,0);f>0&&f>=((o=a.totalLeafOptions)!=null?o:1)?c=!0:f>0&&(u=!0)}return{checked:c,indeterminate:u}},getLeafOptionKeys=a=>{const s=[];if(a.isLeaf)s.push(a.key);else if(a.children)for(const l of a.children)s.push(...getLeafOptionKeys(l));return s},getLeafOptionInfos=a=>{const s=[];if(a.disabled||a.selectionDisabled)return s;if(a.isLeaf)s.push(a);else if(a.children)for(const l of a.children)s.push(...getLeafOptionInfos(l));return s},getValueKey=(a,{valueKey:s,leafOptionValueMap:l})=>{var o;if(isArray$1(a))return a.map(u=>isObject$1(u)?u[s]:u).join("-");const c=isObject$1(a)?a[s]:a;return(o=l.get(String(c)))!=null?o:String(c)},getValidValues=(a,{multiple:s,pathMode:l})=>isArray$1(a)?l&&!s&&a.length>0&&!isArray$1(a[0])?[a]:a:isUndefined(a)||isNull(a)||a===""?[]:[a],getOptionLabel=a=>a.path.map(s=>s.label).join(" / "),cascaderInjectionKey=Symbol("ArcoCascader");var CascaderOption=defineComponent({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(a){const s=getPrefixCls("cascader-option"),l=inject(cascaderInjectionKey,{}),o=ref(!1),c={},u=$=>{var x;if(isFunction$1(l.loadMore)&&!a.option.isLeaf){const{isLeaf:N,children:R,key:j}=a.option;!N&&!R&&(o.value=!0,new Promise(ne=>{var se;(se=l.loadMore)==null||se.call(l,a.option.raw,ne)}).then(ne=>{var se;o.value=!1,ne&&((se=l.addLazyLoadOptions)==null||se.call(l,ne,j))}))}(x=l.setSelectedPath)==null||x.call(l,a.option.key)};a.option.disabled||(c.onMouseenter=[()=>{var $;return($=l.setActiveKey)==null?void 0:$.call(l,a.option.key)}],c.onMouseleave=()=>{var $;return($=l.setActiveKey)==null?void 0:$.call(l)},c.onClick=[],l.expandTrigger==="hover"?c.onMouseenter.push($=>u()):c.onClick.push($=>u()),a.option.isLeaf&&!a.multiple&&c.onClick.push($=>{var x;u(),(x=l.onClickOption)==null||x.call(l,a.option)}));const d=computed(()=>[s,{[`${s}-active`]:a.active,[`${s}-disabled`]:a.option.disabled}]),f=computed(()=>{var $;return a.checkStrictly?{checked:($=l.valueMap)==null?void 0:$.has(a.option.key),indeterminate:!1}:getCheckedStatus(a.option,l.valueMap)}),g=()=>{var $,x,N;return a.pathLabel?(x=($=l?.formatLabel)==null?void 0:$.call(l,a.option.path.map(R=>R.raw)))!=null?x:getOptionLabel(a.option):(N=l.slots)!=null&&N.option?l.slots.option({data:a.option}):isFunction$1(a.option.render)?a.option.render():a.option.label},y=()=>o.value?createVNode$1(IconLoading,null,null):!a.searchOption&&!a.option.isLeaf?createVNode$1(IconRight,null,null):null;return()=>{var $;return createVNode$1("li",mergeProps({tabindex:"0",role:"menuitem","aria-disabled":a.option.disabled,"aria-haspopup":!a.option.isLeaf,"aria-expanded":!a.option.isLeaf&&a.active,title:a.option.label,class:d.value},c),[a.multiple&&createVNode$1(Checkbox,{modelValue:f.value.checked,indeterminate:f.value.indeterminate,disabled:a.option.disabled||a.option.selectionDisabled,uninjectGroupContext:!0,onChange:(x,N)=>{var R;N.stopPropagation(),u(),(R=l.onClickOption)==null||R.call(l,a.option,!f.value.checked)},onClick:x=>x.stopPropagation()},null),a.checkStrictly&&!a.multiple&&createVNode$1(Radio,{modelValue:($=l.valueMap)==null?void 0:$.has(a.option.key),disabled:a.option.disabled,uninjectGroupContext:!0,onChange:(x,N)=>{var R;N.stopPropagation(),u(),(R=l.onClickOption)==null||R.call(l,a.option,!0)},onClick:x=>x.stopPropagation()},null),createVNode$1("div",{class:`${s}-label`},[g(),y()])])}}}),CascaderColumn=defineComponent({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(a,{slots:s}){const l=getPrefixCls("cascader"),o=inject(configProviderInjectionKey,void 0),c=ref(),u=ref(!!a.virtualListProps),d=()=>{var f,g,y,$,x;return(x=($=(f=s.empty)==null?void 0:f.call(s))!=null?$:(y=o==null?void 0:(g=o.slots).empty)==null?void 0:y.call(g,{component:"cascader"}))!=null?x:createVNode$1(Empty,null,null)};return()=>{var f;return createVNode$1("div",{class:`${l}-panel-column`,style:{zIndex:a.totalLevel-a.level}},[a.column.length===0?createVNode$1(Scrollbar,{class:`${l}-column-content`},{default:()=>[createVNode$1("div",{class:`${l}-list-empty`},[d()])]}):u.value?createVNode$1(VirtualList,mergeProps({key:(f=a.column)==null?void 0:f.length},a.virtualListProps,{ref:c,data:a.column}),{item:({item:g})=>createVNode$1(CascaderOption,{key:g.key,option:g,active:a.selectedPath.includes(g.key)||g.key===a.activeKey,multiple:a.multiple,checkStrictly:a.checkStrictly},null)}):createVNode$1(Scrollbar,{class:`${l}-column-content`},{default:()=>[createVNode$1("ul",{role:"menu",class:[`${l}-list`,{[`${l}-list-multiple`]:!!a?.multiple,[`${l}-list-strictly`]:!!a?.checkStrictly}]},[a.column.map(g=>createVNode$1(CascaderOption,{key:g.key,option:g,active:a.selectedPath.includes(g.key)||g.key===a.activeKey,multiple:a.multiple,checkStrictly:a.checkStrictly},null))])]})])}}});function _isSlot$e(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var BaseCascaderPanel=defineComponent({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(a,{slots:s}){const l=getPrefixCls("cascader"),o=inject(configProviderInjectionKey,void 0),c=()=>{var d,f,g,y,$;return($=(y=(d=s.empty)==null?void 0:d.call(s))!=null?y:(g=o==null?void 0:(f=o.slots).empty)==null?void 0:g.call(f,{component:"cascader"}))!=null?$:createVNode$1(Empty,null,null)},u=()=>a.loading?createVNode$1("div",{key:"panel-column-loading",class:[`${l}-panel-column`,`${l}-panel-column-loading`]},[createVNode$1(Spin,null,null)]):a.displayColumns.length===0?createVNode$1("div",{key:"panel-column-empty",class:`${l}-panel-column`},[createVNode$1("div",{class:`${l}-list-empty`},[c()])]):a.displayColumns.map((d,f)=>createVNode$1(CascaderColumn,{key:`column-${f}`,column:d,level:f,selectedPath:a.selectedPath,activeKey:a.activeKey,totalLevel:a.totalLevel,multiple:a.multiple,checkStrictly:a.checkStrictly,virtualListProps:a.virtualListProps},null));return()=>{let d;return createVNode$1(TransitionGroup,{tag:"div",name:"cascader-slide",class:[`${l}-panel`,{[`${l}-dropdown-panel`]:a.dropdown}]},_isSlot$e(d=u())?d:{default:()=>[d]})}}});function _isSlot$d(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var CascaderSearchPanel=defineComponent({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(a,{slots:s}){const l=getPrefixCls("cascader"),o=inject(configProviderInjectionKey,void 0),c=()=>{var u,d,f,g,y;return a.loading?createVNode$1(Spin,null,null):a.options.length===0?createVNode$1("div",{class:`${l}-list-empty`},[(y=(g=(u=s.empty)==null?void 0:u.call(s))!=null?g:(f=o==null?void 0:(d=o.slots).empty)==null?void 0:f.call(d,{component:"cascader"}))!=null?y:createVNode$1(Empty,null,null)]):createVNode$1("ul",{role:"menu",class:[`${l}-list`,`${l}-search-list`,{[`${l}-list-multiple`]:a.multiple}]},[a.options.map($=>createVNode$1(CascaderOption,{key:$.key,class:`${l}-search-option`,option:$,active:$.key===a.activeKey,multiple:a.multiple,checkStrictly:a.checkStrictly,pathLabel:a.pathLabel,searchOption:!0},null))])};return()=>{let u;return createVNode$1(Scrollbar,{class:[`${l}-panel`,`${l}-search-panel`]},_isSlot$d(u=c())?u:{default:()=>[u]})}}});const useSelectedPath=(a,{optionMap:s,filteredLeafOptions:l,showSearchPanel:o,expandChild:c})=>{const u=ref(),d=computed(()=>{if(u.value)return s.get(u.value)}),f=ref([]),g=computed(()=>{const j=[a.value];for(const ne of f.value){const se=s.get(ne);se?.children&&j.push(se.children)}return j}),y=j=>{var ne;const se=N(j);f.value=(ne=se?.path.map(ce=>ce.key))!=null?ne:[]},$=j=>{u.value=j},x=computed(()=>{var j;return o?.value?l.value.filter(ne=>!ne.disabled):d.value&&d.value.parent?(j=d.value.parent.children)==null?void 0:j.filter(ne=>!ne.disabled):a.value.filter(ne=>!ne.disabled)}),N=j=>{let ne=j?s.get(j):void 0;if(c.value)for(;ne&&ne.children&&ne.children.length>0;)ne=ne.children[0];return ne};return{activeKey:u,activeOption:d,selectedPath:f,displayColumns:g,setActiveKey:$,setSelectedPath:y,getNextActiveNode:j=>{var ne,se,ce,fe,ea,ta,na;const aa=(se=(ne=x.value)==null?void 0:ne.length)!=null?se:0;if(u.value){const ia=(fe=(ce=x.value)==null?void 0:ce.findIndex(sa=>sa.key===u.value))!=null?fe:0;return j==="next"?(ea=x.value)==null?void 0:ea[(aa+ia+1)%aa]:(ta=x.value)==null?void 0:ta[(aa+ia-1)%aa]}return(na=x.value)==null?void 0:na[0]}}};var __defProp$Q=Object.defineProperty,__getOwnPropSymbols$R=Object.getOwnPropertySymbols,__hasOwnProp$R=Object.prototype.hasOwnProperty,__propIsEnum$R=Object.prototype.propertyIsEnumerable,__defNormalProp$Q=(a,s,l)=>s in a?__defProp$Q(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$Q=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$R.call(s,l)&&__defNormalProp$Q(a,l,s[l]);if(__getOwnPropSymbols$R)for(var l of __getOwnPropSymbols$R(s))__propIsEnum$R.call(s,l)&&__defNormalProp$Q(a,l,s[l]);return a};const _sfc_main$2u=defineComponent({name:"Cascader",components:{Trigger,SelectView,BaseCascaderPanel,CascaderSearchPanel},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:a=>a.multiple?[]:a.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:a=>!!a.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,"update:popupVisible":a=>!0,change:a=>!0,inputValueChange:a=>!0,clear:()=>!0,search:a=>!0,popupVisibleChange:a=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s,slots:l}){const{options:o,checkStrictly:c,loadMore:u,formatLabel:d,modelValue:f,disabled:g,valueKey:y,expandTrigger:$,expandChild:x,pathMode:N,multiple:R}=toRefs(a),j=ref(a.defaultValue),ne=ref(a.defaultInputValue),se=ref(a.defaultPopupVisible),{mergedDisabled:ce,eventHandlers:fe}=useFormItem({disabled:g});watch(f,Va=>{(isUndefined(Va)||isNull(Va))&&(j.value=a.multiple?[]:void 0)});const ea=ref([]),ta=ref(1),na=reactive(new Map),aa=reactive(new Map),ia=reactive(new Map),sa=reactive(new Set),ra=reactive({}),la=(Va,La)=>{ra[La]=Va},oa={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},ca=computed(()=>__spreadValues$Q(__spreadValues$Q({},oa),a.fieldNames));watch([o,ra,ca],([Va,La,Za])=>{na.clear(),aa.clear(),ia.clear(),sa.clear(),ea.value=getOptionInfos(Va??[],{enabledLazyLoad:!!a.loadMore,lazyLoadOptions:ra,optionMap:na,leafOptionSet:sa,leafOptionMap:aa,leafOptionValueMap:ia,totalLevel:ta,checkStrictly:c,valueKey:y,fieldNames:Za})},{immediate:!0,deep:!0});const pa=computed(()=>{var Va;const La=getValidValues((Va=a.modelValue)!=null?Va:j.value,{multiple:a.multiple,pathMode:a.pathMode});return new Map(La.map(Za=>[getValueKey(Za,{valueKey:a.valueKey,leafOptionValueMap:ia}),Za]))}),ua=computed(()=>{var Va;return(Va=a.inputValue)!=null?Va:ne.value}),da=computed(()=>{var Va;return(Va=a.popupVisible)!=null?Va:se.value}),ha=Va=>{var La;return Va?.toLocaleLowerCase().includes((La=ua.value)==null?void 0:La.toLocaleLowerCase())},ga=computed(()=>(a.checkStrictly?Array.from(na.values()):Array.from(sa)).filter(La=>{var Za;return isFunction$1(a.filterOption)?a.filterOption(ua.value,La.raw):a.checkStrictly?ha(La.label):(Za=La.path)==null?void 0:Za.find(rn=>ha(rn.label))})),fa=Va=>{var La,Za,rn;const pn=a.multiple?Va:(La=Va[0])!=null?La:"";Va.length===0&&(Fa(),Sa()),j.value=pn,s("update:modelValue",pn),s("change",pn),(rn=(Za=fe.value)==null?void 0:Za.onChange)==null||rn.call(Za)};watch([R,N],()=>{const Va=[];pa.value.forEach((La,Za)=>{const rn=aa.get(Za);rn&&Va.push(N.value?rn.pathValue:rn.value)}),fa(Va)});const ma=Va=>{da.value!==Va&&(se.value=Va,s("popupVisibleChange",Va))},va=Va=>{if(a.multiple){const La=aa.get(Va);if(La)ya(La,!1);else{const Za=[];pa.value.forEach((rn,pn)=>{pn!==Va&&Za.push(rn)}),fa(Za)}}},ka=Va=>{fa([a.pathMode?Va.pathValue:Va.value]),ma(!1)},ya=(Va,La)=>{if(La){const Za=a.checkStrictly?[Va]:getLeafOptionInfos(Va);fa([...pa.value.values(),...Za.filter(rn=>!pa.value.has(rn.key)).map(rn=>a.pathMode?rn.pathValue:rn.value)])}else{const Za=a.checkStrictly?[Va.key]:getLeafOptionKeys(Va),rn=[];pa.value.forEach((pn,fn)=>{Za.includes(fn)||rn.push(pn)}),fa(rn)}Ca("","optionChecked")},ba=(Va,La)=>{a.multiple?ya(Va,La??!0):ka(Va)},Ea=debounce(Va=>{s("search",Va)},a.searchDelay),Ca=(Va,La)=>{Va!==ua.value&&(La==="manual"&&!da.value&&(se.value=!0,s("popupVisibleChange",!0)),ne.value=Va,s("inputValueChange",Va),a.allowSearch&&Ea(Va))};watch(da,Va=>{if(Va){if(pa.value.size>0){const La=Array.from(pa.value.keys()),Za=La[La.length-1],rn=aa.get(Za);rn&&rn.key!==Ba.value&&(Fa(rn.key),Sa(rn.key))}}else pa.value.size===0&&(Fa(),Sa()),Ca("","optionListHide")});const $a=Va=>{if(Va.stopPropagation(),a.multiple){const La=[];pa.value.forEach((Za,rn)=>{const pn=aa.get(rn);pn?.disabled&&La.push(a.pathMode?pn.pathValue:pn.value)}),fa(La)}else fa([]);Ca("","manual"),s("clear")},Pa=computed(()=>a.allowSearch&&ua.value.length>0),Da=Va=>{s("focus",Va)},Ta=Va=>{s("blur",Va)},{activeKey:Ba,activeOption:wa,selectedPath:Oa,displayColumns:Aa,setActiveKey:Sa,setSelectedPath:Fa,getNextActiveNode:Ia}=useSelectedPath(ea,{optionMap:na,filteredLeafOptions:ga,showSearchPanel:Pa,expandChild:x});provide(cascaderInjectionKey,reactive({onClickOption:ba,setActiveKey:Sa,setSelectedPath:Fa,loadMore:u,expandTrigger:$,addLazyLoadOptions:la,formatLabel:d,slots:l,valueMap:pa}));const Ga=getKeyDownHandler(new Map([[KEYBOARD_KEY.ENTER,Va=>{if(da.value){if(wa.value){let La;a.checkStrictly||wa.value.isLeaf?La=!pa.value.has(wa.value.key):La=!getCheckedStatus(wa.value,pa.value).checked,Fa(wa.value.key),ba(wa.value,La)}}else ma(!0)}],[KEYBOARD_KEY.ESC,Va=>{ma(!1)}],[KEYBOARD_KEY.ARROW_DOWN,Va=>{Va.preventDefault();const La=Ia("next");Sa(La?.key)}],[KEYBOARD_KEY.ARROW_UP,Va=>{Va.preventDefault();const La=Ia("preview");Sa(La?.key)}],[KEYBOARD_KEY.ARROW_RIGHT,Va=>{var La,Za;Pa.value||(Va.preventDefault(),(La=wa.value)!=null&&La.children&&(Fa(wa.value.key),Sa((Za=wa.value.children[0])==null?void 0:Za.key)))}],[KEYBOARD_KEY.ARROW_LEFT,Va=>{var La;Pa.value||(Va.preventDefault(),(La=wa.value)!=null&&La.parent&&(Fa(wa.value.parent.key),Sa(wa.value.parent.key)))}]])),Ya=computed(()=>{const Va=[];return pa.value.forEach((La,Za)=>{var rn,pn;const fn=aa.get(Za);if(fn)Va.push({value:Za,label:(pn=(rn=a.formatLabel)==null?void 0:rn.call(a,fn.path.map(mn=>mn.raw)))!=null?pn:getOptionLabel(fn),closable:!fn.disabled,tagProps:fn.tagProps});else if(a.fallback){const mn=isFunction$1(a.fallback)?a.fallback(La):isArray$1(La)?La.join(" / "):String(La);Va.push({value:Za,label:mn,closable:!0})}}),Va});return{optionInfos:ea,filteredLeafOptions:ga,selectedPath:Oa,activeKey:Ba,displayColumns:Aa,computedInputValue:ua,computedPopupVisible:da,handleClear:$a,selectViewValue:Ya,handleInputValueChange:Ca,showSearchPanel:Pa,handlePopupVisibleChange:ma,handleFocus:Da,handleBlur:Ta,handleRemove:va,mergedDisabled:ce,handleKeyDown:Ga,totalLevel:ta}}});function _sfc_render$2g(a,s,l,o,c,u){const d=resolveComponent("select-view"),f=resolveComponent("cascader-search-panel"),g=resolveComponent("base-cascader-panel"),y=resolveComponent("trigger");return openBlock(),createBlock(y,mergeProps(a.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":a.computedPopupVisible,position:"bl",disabled:a.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":a.showSearchPanel,"popup-container":a.popupContainer,"prevent-focus":!0,"click-to-close":!a.allowSearch,onPopupVisibleChange:a.handlePopupVisibleChange}),{content:withCtx(()=>[a.showSearchPanel?(openBlock(),createBlock(f,{key:0,options:a.filteredLeafOptions,"active-key":a.activeKey,multiple:a.multiple,"check-strictly":a.checkStrictly,loading:a.loading,"path-label":!a.searchOptionOnlyLabel},createSlots({_:2},[a.$slots.empty?{name:"empty",fn:withCtx(()=>[renderSlot(a.$slots,"empty")])}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(openBlock(),createBlock(g,{key:1,"display-columns":a.displayColumns,"selected-path":a.selectedPath,"active-key":a.activeKey,multiple:a.multiple,"total-level":a.totalLevel,"check-strictly":a.checkStrictly,loading:a.loading,"virtual-list-props":a.virtualListProps,dropdown:""},createSlots({_:2},[a.$slots.empty?{name:"empty",fn:withCtx(()=>[renderSlot(a.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:withCtx(()=>[createVNode$1(d,mergeProps({"model-value":a.selectViewValue,"input-value":a.computedInputValue,disabled:a.mergedDisabled,error:a.error,multiple:a.multiple,"allow-clear":a.allowClear,"allow-search":a.allowSearch,size:a.size,opened:a.computedPopupVisible,placeholder:a.placeholder,loading:a.loading,"max-tag-count":a.maxTagCount,"tag-nowrap":a.tagNowrap},a.$attrs,{onInputValueChange:a.handleInputValueChange,onClear:a.handleClear,onFocus:a.handleFocus,onBlur:a.handleBlur,onRemove:a.handleRemove,onKeydown:a.handleKeyDown}),createSlots({_:2},[a.$slots.label?{name:"label",fn:withCtx($=>[renderSlot(a.$slots,"label",normalizeProps(guardReactiveProps($)))])}:void 0,a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0,a.$slots["arrow-icon"]?{name:"arrow-icon",fn:withCtx(()=>[renderSlot(a.$slots,"arrow-icon")])}:void 0,a.$slots["loading-icon"]?{name:"loading-icon",fn:withCtx(()=>[renderSlot(a.$slots,"loading-icon")])}:void 0,a.$slots["search-icon"]?{name:"search-icon",fn:withCtx(()=>[renderSlot(a.$slots,"search-icon")])}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","tag-nowrap","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var _Cascader=_export_sfc(_sfc_main$2u,[["render",_sfc_render$2g]]),__defProp$P=Object.defineProperty,__getOwnPropSymbols$Q=Object.getOwnPropertySymbols,__hasOwnProp$Q=Object.prototype.hasOwnProperty,__propIsEnum$Q=Object.prototype.propertyIsEnumerable,__defNormalProp$P=(a,s,l)=>s in a?__defProp$P(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$P=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$Q.call(s,l)&&__defNormalProp$P(a,l,s[l]);if(__getOwnPropSymbols$Q)for(var l of __getOwnPropSymbols$Q(s))__propIsEnum$Q.call(s,l)&&__defNormalProp$P(a,l,s[l]);return a};const _sfc_main$2t=defineComponent({name:"CascaderPanel",components:{BaseCascaderPanel},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:a=>a.multiple?[]:a.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:a=>!0},setup(a,{emit:s,slots:l}){const{options:o,checkStrictly:c,loadMore:u,modelValue:d,valueKey:f,expandChild:g,expandTrigger:y}=toRefs(a),$=ref(a.defaultValue);watch(d,ma=>{(isUndefined(ma)||isNull(ma))&&($.value=a.multiple?[]:void 0)});const x=ref([]),N=ref(1),R=reactive(new Map),j=reactive(new Map),ne=reactive(new Map),se=reactive(new Set),ce=reactive({}),fe=(ma,va)=>{ce[va]=ma},ea={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},ta=computed(()=>__spreadValues$P(__spreadValues$P({},ea),a.fieldNames));watch([o,ce,ta],([ma,va,ka])=>{R.clear(),j.clear(),ne.clear(),se.clear(),x.value=getOptionInfos(ma??[],{enabledLazyLoad:!!a.loadMore,lazyLoadOptions:va,optionMap:R,leafOptionSet:se,leafOptionMap:j,leafOptionValueMap:ne,totalLevel:N,checkStrictly:c,fieldNames:ka,valueKey:f})},{immediate:!0});const na=computed(()=>{var ma;const va=getValidValues((ma=a.modelValue)!=null?ma:$.value,{multiple:a.multiple,pathMode:a.pathMode});return new Map(va.map(ka=>[getValueKey(ka,{valueKey:a.valueKey,leafOptionValueMap:ne}),ka]))}),aa=computed(()=>a.checkStrictly?Array.from(R.values()):Array.from(se)),ia=ma=>{var va;const ka=a.multiple?ma:(va=ma[0])!=null?va:"";ma.length===0&&(ha(),da()),$.value=ka,s("update:modelValue",ka),s("change",ka)},sa=ma=>{ia([a.pathMode?ma.pathValue:ma.value])},ra=(ma,va)=>{if(va){const ka=a.checkStrictly?[ma]:getLeafOptionInfos(ma);ia([...na.value.values(),...ka.filter(ya=>!na.value.has(ya.key)).map(ya=>a.pathMode?ya.pathValue:ya.value)])}else{const ka=a.checkStrictly?[ma.key]:getLeafOptionKeys(ma),ya=[];na.value.forEach((ba,Ea)=>{ka.includes(Ea)||ya.push(ba)}),ia(ya)}},la=(ma,va)=>{a.multiple?ra(ma,va??!0):sa(ma)},{activeKey:oa,activeOption:ca,selectedPath:pa,displayColumns:ua,setActiveKey:da,setSelectedPath:ha,getNextActiveNode:ga}=useSelectedPath(x,{optionMap:R,filteredLeafOptions:aa,expandChild:g});provide(cascaderInjectionKey,reactive({onClickOption:la,setActiveKey:da,setSelectedPath:ha,loadMore:u,addLazyLoadOptions:fe,slots:l,valueMap:na,expandTrigger:y}));const fa=getKeyDownHandler(new Map([[KEYBOARD_KEY.ENTER,ma=>{if(ca.value){let va;a.checkStrictly||ca.value.isLeaf?va=!na.value.has(ca.value.key):va=!getCheckedStatus(ca.value,na.value).checked,ha(ca.value.key),la(ca.value,va)}}],[KEYBOARD_KEY.ARROW_DOWN,ma=>{ma.preventDefault();const va=ga("next");da(va?.key)}],[KEYBOARD_KEY.ARROW_UP,ma=>{ma.preventDefault();const va=ga("preview");da(va?.key)}],[KEYBOARD_KEY.ARROW_RIGHT,ma=>{var va,ka;ma.preventDefault(),(va=ca.value)!=null&&va.children&&(ha(ca.value.key),da((ka=ca.value.children[0])==null?void 0:ka.key))}],[KEYBOARD_KEY.ARROW_LEFT,ma=>{var va;ma.preventDefault(),(va=ca.value)!=null&&va.parent&&(ha(ca.value.parent.key),da(ca.value.parent.key))}]]));return{optionInfos:x,filteredLeafOptions:aa,selectedPath:pa,activeKey:oa,displayColumns:ua,handleKeyDown:fa,totalLevel:N}}});function _sfc_render$2f(a,s,l,o,c,u){const d=resolveComponent("base-cascader-panel");return openBlock(),createBlock(d,{"display-columns":a.displayColumns,"selected-path":a.selectedPath,"active-key":a.activeKey,multiple:a.multiple,"total-level":a.totalLevel,"check-strictly":a.checkStrictly,onKeydown:a.handleKeyDown},createSlots({_:2},[a.$slots.empty?{name:"empty",fn:withCtx(()=>[renderSlot(a.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var CascaderPanel=_export_sfc(_sfc_main$2t,[["render",_sfc_render$2f]]);const Cascader=Object.assign(_Cascader,{CascaderPanel,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Cascader.name,_Cascader),a.component(l+CascaderPanel.name,CascaderPanel)}}),collapseKey=Symbol("collapseCtx"),_sfc_main$2s=defineComponent({name:"Collapse",props:{activeKey:{type:Array,default:void 0},defaultActiveKey:{type:Array,default:()=>[]},accordion:{type:Boolean,default:!1},showExpandIcon:{type:Boolean,default:void 0},expandIconPosition:{type:String,default:"left"},bordered:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},emits:{"update:activeKey":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{expandIconPosition:o,destroyOnHide:c,showExpandIcon:u}=toRefs(a),d=getPrefixCls("collapse"),f=ref(a.defaultActiveKey),g=computed(()=>{var x;const N=(x=a.activeKey)!=null?x:f.value;return isArray$1(N)?N:[N]});provide(collapseKey,reactive({activeKeys:g,slots:l,showExpandIcon:u,expandIconPosition:o,destroyOnHide:c,handleClick:(x,N)=>{let R=[];if(a.accordion)g.value.includes(x)||(R=[x]),f.value=R;else{R=[...g.value];const j=R.indexOf(x);j>-1?R.splice(j,1):a.accordion?R=[x]:R.push(x),f.value=R}s("update:activeKey",R),s("change",R,N)}}));const $=computed(()=>[d,{[`${d}-borderless`]:!a.bordered}]);return{prefixCls:d,cls:$}}});function _sfc_render$2e(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[renderSlot(a.$slots,"default")],2)}var _Collapse=_export_sfc(_sfc_main$2s,[["render",_sfc_render$2e]]);const _sfc_main$2r=defineComponent({name:"IconCaretRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-caret-right`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$1a=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$T=createBaseVNode("path",{d:"M34.829 23.063c.6.48.6 1.394 0 1.874L17.949 38.44c-.785.629-1.949.07-1.949-.937V10.497c0-1.007 1.164-1.566 1.95-.937l16.879 13.503Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$O=[_hoisted_2$T];function _sfc_render$2d(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$O,14,_hoisted_1$1a)}var _IconCaretRight=_export_sfc(_sfc_main$2r,[["render",_sfc_render$2d]]);const IconCaretRight=Object.assign(_IconCaretRight,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCaretRight.name,_IconCaretRight)}}),_sfc_main$2q=defineComponent({name:"IconCaretLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-caret-left`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$19=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$S=createBaseVNode("path",{d:"M13.171 24.937a1.2 1.2 0 0 1 0-1.874L30.051 9.56c.785-.629 1.949-.07 1.949.937v27.006c0 1.006-1.164 1.566-1.95.937L13.171 24.937Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$N=[_hoisted_2$S];function _sfc_render$2c(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$N,14,_hoisted_1$19)}var _IconCaretLeft=_export_sfc(_sfc_main$2q,[["render",_sfc_render$2c]]);const IconCaretLeft=Object.assign(_IconCaretLeft,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCaretLeft.name,_IconCaretLeft)}});var CollapseItem=defineComponent({name:"CollapseItem",components:{IconHover,IconCaretRight,IconCaretLeft},props:{header:String,disabled:{type:Boolean,default:!1},showExpandIcon:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},setup(a,{slots:s}){var l;const o=getCurrentInstance(),c=getPrefixCls("collapse-item"),u=inject(collapseKey,{}),d=o&&isNumber$1(o?.vnode.key)?o.vnode.key:String((l=o?.vnode.key)!=null?l:""),f=computed(()=>{var ta;return(ta=u.activeKeys)==null?void 0:ta.includes(d)}),g=computed(()=>u.destroyOnHide||a.destroyOnHide),y=computed(()=>{var ta;return(ta=u?.showExpandIcon)!=null?ta:a.showExpandIcon}),$=ref(g.value?f.value:!0),x=computed(()=>{var ta;return(ta=u?.expandIconPosition)!=null?ta:"left"}),N=ta=>{var na;a.disabled||(na=u.handleClick)==null||na.call(u,d,ta)};watch(f,ta=>{ta&&!$.value&&($.value=!0)});const R={onEnter:ta=>{ta.style.height=`${ta.scrollHeight}px`},onAfterEnter:ta=>{ta.style.height="auto"},onBeforeLeave:ta=>{ta.style.height=`${ta.scrollHeight}px`},onLeave:ta=>{ta.style.height="0"},onAfterLeave:()=>{g.value&&($.value=!1)}},j=computed(()=>[c,{[`${c}-active`]:f.value}]),ne=computed(()=>[`${c}-header`,`${c}-header-${u?.expandIconPosition}`,{[`${c}-header-disabled`]:a.disabled}]),se=computed(()=>[{[`${c}-icon-right`]:u?.expandIconPosition==="right"}]),ce=computed(()=>[`${c}-content`,{[`${c}-content-expend`]:f.value}]),fe=()=>x.value==="right"?createVNode$1(resolveComponent("icon-caret-left"),{class:`${c}-expand-icon`},null):createVNode$1(resolveComponent("icon-caret-right"),{class:`${c}-expand-icon`},null),ea=()=>y.value&&createVNode$1(resolveComponent("icon-hover"),{prefix:c,class:se.value,disabled:a.disabled},{default:()=>{var ta,na,aa,ia;return[(ia=(aa=(na=s["expand-icon"])!=null?na:(ta=u?.slots)==null?void 0:ta["expand-icon"])==null?void 0:aa({active:f.value,disabled:a.disabled,position:x.value}))!=null?ia:fe()]}});return()=>{var ta,na,aa;return createVNode$1("div",{class:j.value},[createVNode$1("div",{role:"button","aria-disabled":a.disabled,"aria-expanded":f.value,tabindex:"0",class:ne.value,onClick:N},[ea(),createVNode$1("div",{class:`${c}-header-title`},[(na=(ta=s.header)==null?void 0:ta.call(s))!=null?na:a.header]),s.extra&&createVNode$1("div",{class:`${c}-header-extra`},[(aa=s.extra)==null?void 0:aa.call(s)])]),createVNode$1(Transition,mergeProps({name:"collapse-slider"},R),{default:()=>{var ia;return[withDirectives(createVNode$1("div",{role:"region",class:ce.value},[$.value&&createVNode$1("div",{ref:"contentBoxRef",class:`${c}-content-box`},[(ia=s.default)==null?void 0:ia.call(s)])]),[[vShow,f.value]])]}})])}}});const Collapse=Object.assign(_Collapse,{Item:CollapseItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Collapse.name,_Collapse),a.component(l+CollapseItem.name,CollapseItem)}}),colors=["#00B42A","#3C7EFF","#FF7D00","#F76965","#F7BA1E","#F5319D","#D91AD9","#9FDB1D","#FADC19","#722ED1","#3491FA","#7BE188","#93BEFF","#FFCF8B","#FBB0A7","#FCE996","#FB9DC7","#F08EE6","#DCF190","#FDFA94","#C396ED","#9FD4FD"];var __defProp$O=Object.defineProperty,__defProps$r=Object.defineProperties,__getOwnPropDescs$r=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$P=Object.getOwnPropertySymbols,__hasOwnProp$P=Object.prototype.hasOwnProperty,__propIsEnum$P=Object.prototype.propertyIsEnumerable,__defNormalProp$O=(a,s,l)=>s in a?__defProp$O(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$O=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$P.call(s,l)&&__defNormalProp$O(a,l,s[l]);if(__getOwnPropSymbols$P)for(var l of __getOwnPropSymbols$P(s))__propIsEnum$P.call(s,l)&&__defNormalProp$O(a,l,s[l]);return a},__spreadProps$r=(a,s)=>__defProps$r(a,__getOwnPropDescs$r(s));const hsvToRgb=(a,s,l)=>{const o=Math.floor(a*6),c=a*6-o,u=l*(1-s),d=l*(1-c*s),f=l*(1-(1-c)*s),g=o%6,y=[l,d,u,u,f,l][g],$=[f,l,l,d,u,u][g],x=[u,u,f,l,l,d][g];return{r:Math.round(y*255),g:Math.round($*255),b:Math.round(x*255)}},rgbToHsv=(a,s,l)=>{a/=255,s/=255,l/=255;const o=Math.max(a,s,l),c=Math.min(a,s,l);let u=0;const d=o,f=o-c,g=o===0?0:f/o;if(o===c)u=0;else{switch(o){case a:u=(s-l)/f+(s<l?6:0);break;case s:u=(l-a)/f+2;break;case l:u=(a-s)/f+4;break}u/=6}return{h:u,s:g,v:d}},CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT=`(?:${CSS_NUMBER})|(?:${CSS_INTEGER})`,PERMISSIVE_MATCH3=`[\\s|\\(]+(${CSS_UNIT})[,|\\s]+(${CSS_UNIT})[,|\\s]+(${CSS_UNIT})\\s*\\)?`,PERMISSIVE_MATCH4=`[\\s|\\(]+(${CSS_UNIT})[,|\\s]+(${CSS_UNIT})[,|\\s]+(${CSS_UNIT})[,|\\s]+(${CSS_UNIT})\\s*\\)?`,matchers={rgb:new RegExp(`rgb${PERMISSIVE_MATCH3}`),rgba:new RegExp(`rgba${PERMISSIVE_MATCH4}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},parseIntFromHex=a=>parseInt(a,16),convertHexToDecimal=a=>parseIntFromHex(a)/255,formatInputToRgb=a=>{let s=matchers.rgb.exec(a);return s?{r:parseInt(s[1],10),g:parseInt(s[2],10),b:parseInt(s[3],10)}:(s=matchers.rgba.exec(a),s?{r:parseInt(s[1],10),g:parseInt(s[2],10),b:parseInt(s[3],10),a:parseFloat(s[4])}:(s=matchers.hex8.exec(a),s?{r:parseIntFromHex(s[1]),g:parseIntFromHex(s[2]),b:parseIntFromHex(s[3]),a:convertHexToDecimal(s[4])}:(s=matchers.hex6.exec(a),s?{r:parseIntFromHex(s[1]),g:parseIntFromHex(s[2]),b:parseIntFromHex(s[3])}:(s=matchers.hex4.exec(a),s?{r:parseIntFromHex(s[1]+s[1]),g:parseIntFromHex(s[2]+s[2]),b:parseIntFromHex(s[3]+s[3]),a:convertHexToDecimal(s[4]+s[4])}:(s=matchers.hex3.exec(a),s?{r:parseIntFromHex(s[1]+s[1]),g:parseIntFromHex(s[2]+s[2]),b:parseIntFromHex(s[3]+s[3])}:!1)))))},formatInputToHSVA=a=>{var s;const l=formatInputToRgb(a);if(l){const o=rgbToHsv(l.r,l.g,l.b);return __spreadProps$r(__spreadValues$O({},o),{a:(s=l.a)!=null?s:1})}return{h:0,s:1,v:1,a:1}},hexToRgb=a=>{if(a=a.trim().toLowerCase(),a.length===0)return!1;let s=matchers.hex6.exec(a);return s?{r:parseIntFromHex(s[1]),g:parseIntFromHex(s[2]),b:parseIntFromHex(s[3])}:(s=matchers.hex3.exec(a),s?{r:parseIntFromHex(s[1]+s[1]),g:parseIntFromHex(s[2]+s[2]),b:parseIntFromHex(s[3]+s[3])}:!1)},rgbToHex=(a,s,l)=>[Math.round(a).toString(16).padStart(2,"0"),Math.round(s).toString(16).padStart(2,"0"),Math.round(l).toString(16).padStart(2,"0")].join("").toUpperCase(),rgbaToHex=(a,s,l,o)=>[Math.round(a).toString(16).padStart(2,"0"),Math.round(s).toString(16).padStart(2,"0"),Math.round(l).toString(16).padStart(2,"0"),Math.round(o*255).toString(16).padStart(2,"0")].join("").toUpperCase(),useControlBlock=({value:a,onChange:s})=>{const l=ref(!1),o=ref(),c=ref(),u=($,x)=>$<0?0:$>x?1:$/x,d=$=>{if(!o.value)return;const{clientX:x,clientY:N}=$,R=o.value.getBoundingClientRect(),j=[u(x-R.x,R.width),u(N-R.y,R.height)];(j[0]!==a[0]||j[1]!==a[1])&&s?.(j)},f=()=>{l.value=!1,window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",f),window.removeEventListener("contextmenu",f)},g=$=>{l.value=!0,d($),window.addEventListener("mousemove",y),window.addEventListener("mouseup",f),window.addEventListener("contextmenu",f)};function y($){$.preventDefault(),$.buttons>0?d($):f()}return{active:l,blockRef:o,handlerRef:c,onMouseDown:g}};var ControlBar=defineComponent({name:"ControlBar",props:{x:{type:Number,required:!0},color:{type:Object,required:!0},colorString:String,type:String,onChange:Function},setup(a){const s=getPrefixCls("color-picker"),l=computed(()=>a.color.rgb),{blockRef:o,handlerRef:c,onMouseDown:u}=useControlBlock({value:[a.x,0],onChange:f=>{var g;return(g=a.onChange)==null?void 0:g.call(a,f[0])}}),d=()=>createVNode$1("div",{ref:c,class:`${s}-handler`,style:{left:`${a.x*100}%`,color:a.colorString}},null);return()=>a.type==="alpha"?createVNode$1("div",{class:`${s}-control-bar-bg`},[createVNode$1("div",{ref:o,class:[`${s}-control-bar`,`${s}-control-bar-alpha`],style:{background:`linear-gradient(to right, rgba(0, 0, 0, 0), rgb(${l.value.r}, ${l.value.g}, ${l.value.b}))`},onMousedown:u},[d()])]):createVNode$1("div",{ref:o,class:[`${s}-control-bar`,`${s}-control-bar-hue`],onMousedown:u},[d()])}}),Palette=defineComponent({name:"Palette",props:{color:{type:Object,required:!0},onChange:Function},setup(a){const s=getPrefixCls("color-picker"),l=computed(()=>a.color.hsv),{blockRef:o,handlerRef:c,onMouseDown:u}=useControlBlock({value:[l.value.s,1-l.value.v],onChange:f=>{var g;return(g=a.onChange)==null?void 0:g.call(a,f[0],1-f[1])}}),d=computed(()=>{const f=hsvToRgb(l.value.h,1,1);return`rgb(${f.r}, ${f.g}, ${f.b})`});return()=>createVNode$1("div",{ref:o,class:`${s}-palette`,style:{backgroundColor:d.value},onMousedown:u},[createVNode$1("div",{ref:c,class:`${s}-handler`,style:{top:`${(1-l.value.v)*100}%`,left:`${l.value.s*100}%`}},null)])}});function strip(a,s){return s===void 0&&(s=15),+parseFloat(Number(a).toPrecision(s))}function digitLength(a){var s=a.toString().split(/[eE]/),l=(s[0].split(".")[1]||"").length-+(s[1]||0);return l>0?l:0}function float2Fixed(a){if(a.toString().indexOf("e")===-1)return Number(a.toString().replace(".",""));var s=digitLength(a);return s>0?strip(Number(a)*Math.pow(10,s)):Number(a)}function checkBoundary(a){_boundaryCheckingState&&(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)&&console.warn(a+" is beyond boundary when transfer to integer, the results may not be accurate")}function createOperation(a){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var o=s[0],c=s.slice(1);return c.reduce(function(u,d){return a(u,d)},o)}}var times=createOperation(function(a,s){var l=float2Fixed(a),o=float2Fixed(s),c=digitLength(a)+digitLength(s),u=l*o;return checkBoundary(u),u/Math.pow(10,c)}),plus=createOperation(function(a,s){var l=Math.pow(10,Math.max(digitLength(a),digitLength(s)));return(times(a,l)+times(s,l))/l}),minus=createOperation(function(a,s){var l=Math.pow(10,Math.max(digitLength(a),digitLength(s)));return(times(a,l)-times(s,l))/l}),divide=createOperation(function(a,s){var l=float2Fixed(a),o=float2Fixed(s);return checkBoundary(l),checkBoundary(o),times(l/o,strip(Math.pow(10,digitLength(s)-digitLength(a))))});function round(a,s){var l=Math.pow(10,s),o=divide(Math.round(Math.abs(times(a,l))),l);return a<0&&o!==0&&(o=times(o,-1)),o}var _boundaryCheckingState=!0;function enableBoundaryChecking(a){a===void 0&&(a=!0),_boundaryCheckingState=a}var index={strip,plus,minus,times,divide,round,digitLength,float2Fixed,enableBoundaryChecking};const _sfc_main$2p=defineComponent({name:"IconPlus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-plus`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$18=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$R=createBaseVNode("path",{d:"M5 24h38M24 5v38"},null,-1),_hoisted_3$M=[_hoisted_2$R];function _sfc_render$2b(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$M,14,_hoisted_1$18)}var _IconPlus=_export_sfc(_sfc_main$2p,[["render",_sfc_render$2b]]);const IconPlus=Object.assign(_IconPlus,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconPlus.name,_IconPlus)}}),_sfc_main$2o=defineComponent({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-minus`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$17=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$Q=createBaseVNode("path",{d:"M5 24h38"},null,-1),_hoisted_3$L=[_hoisted_2$Q];function _sfc_render$2a(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$L,14,_hoisted_1$17)}var _IconMinus=_export_sfc(_sfc_main$2o,[["render",_sfc_render$2a]]);const IconMinus=Object.assign(_IconMinus,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconMinus.name,_IconMinus)}});var __defProp$N=Object.defineProperty,__getOwnPropSymbols$O=Object.getOwnPropertySymbols,__hasOwnProp$O=Object.prototype.hasOwnProperty,__propIsEnum$O=Object.prototype.propertyIsEnumerable,__defNormalProp$N=(a,s,l)=>s in a?__defProp$N(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$N=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$O.call(s,l)&&__defNormalProp$N(a,l,s[l]);if(__getOwnPropSymbols$O)for(var l of __getOwnPropSymbols$O(s))__propIsEnum$O.call(s,l)&&__defNormalProp$N(a,l,s[l]);return a};const FIRST_DELAY=800,SPEED=150;index.enableBoundaryChecking(!1);var _InputNumber=defineComponent({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1},inputAttrs:{type:Object}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0,focus:a=>!0,blur:a=>!0,clear:a=>!0,input:(a,s,l)=>!0,keydown:a=>!0},setup(a,{emit:s,slots:l}){var o;const{size:c,disabled:u}=toRefs(a),d=getPrefixCls("input-number"),f=ref(),{mergedSize:g,mergedDisabled:y,eventHandlers:$}=useFormItem({size:c,disabled:u}),{mergedSize:x}=useSize$1(g),N=computed(()=>{if(isNumber$1(a.precision)){const ka=`${a.step}`.split(".")[1],ya=ka&&ka.length||0;return Math.max(ya,a.precision)}}),R=ka=>{var ya,ba;if(!isNumber$1(ka))return"";const Ea=N.value?ka.toFixed(N.value):String(ka);return(ba=(ya=a.formatter)==null?void 0:ya.call(a,Ea))!=null?ba:Ea},j=ref(R((o=a.modelValue)!=null?o:a.defaultValue)),ne=computed(()=>{var ka,ya;if(!j.value)return;const ba=Number((ya=(ka=a.parser)==null?void 0:ka.call(a,j.value))!=null?ya:j.value);return Number.isNaN(ba)?void 0:ba}),se=ref(isNumber$1(ne.value)&&ne.value<=a.min),ce=ref(isNumber$1(ne.value)&&ne.value>=a.max);let fe=0;const ea=()=>{fe&&(window.clearTimeout(fe),fe=0)},ta=ka=>{if(!isUndefined(ka))return isNumber$1(a.min)&&ka<a.min&&(ka=a.min),isNumber$1(a.max)&&ka>a.max&&(ka=a.max),isNumber$1(N.value)?index.round(ka,N.value):ka},na=ka=>{let ya=!1,ba=!1;isNumber$1(ka)&&(ka<=a.min&&(ya=!0),ka>=a.max&&(ba=!0)),ce.value!==ba&&(ce.value=ba),se.value!==ya&&(se.value=ya)},aa=()=>{const ka=ta(ne.value),ya=R(ka);(ka!==ne.value||j.value!==ya)&&(j.value=ya),s("update:modelValue",ka)};watch(()=>[a.max,a.min],()=>{aa(),na(ne.value)});const ia=(ka,ya)=>{if(y.value||ka==="plus"&&ce.value||ka==="minus"&&se.value)return;let ba;isNumber$1(ne.value)?ba=ta(index[ka](ne.value,a.step)):ba=a.min===-1/0?0:a.min,j.value=R(ba),na(ba),s("update:modelValue",ba),s("change",ba,ya)},sa=(ka,ya,ba=!1)=>{var Ea;ka.preventDefault(),(Ea=f.value)==null||Ea.focus(),ia(ya,ka),ba&&(fe=window.setTimeout(()=>ka.target.dispatchEvent(ka),fe?SPEED:FIRST_DELAY))},ra=(ka,ya)=>{var ba,Ea,Ca,$a;ka=ka.trim().replace(/。/g,"."),ka=(Ea=(ba=a.parser)==null?void 0:ba.call(a,ka))!=null?Ea:ka,(isNumber$1(Number(ka))||/^(\.|-)$/.test(ka))&&(j.value=($a=(Ca=a.formatter)==null?void 0:Ca.call(a,ka))!=null?$a:ka,na(ne.value),s("input",ne.value,j.value,ya),a.modelEvent==="input"&&(s("update:modelValue",ne.value),s("change",ne.value,ya)))},la=ka=>{s("focus",ka)},oa=(ka,ya)=>{ya instanceof MouseEvent&&!ka||(aa(),s("change",ne.value,ya))},ca=ka=>{s("blur",ka)},pa=ka=>{var ya,ba;j.value="",s("update:modelValue",void 0),s("change",void 0,ka),(ba=(ya=$.value)==null?void 0:ya.onChange)==null||ba.call(ya,ka),s("clear",ka)},ua=getKeyDownHandler(new Map([[KEYBOARD_KEY.ARROW_UP,ka=>{ka.preventDefault(),!a.readOnly&&ia("plus",ka)}],[KEYBOARD_KEY.ARROW_DOWN,ka=>{ka.preventDefault(),!a.readOnly&&ia("minus",ka)}]])),da=ka=>{s("keydown",ka),ka.defaultPrevented||ua(ka)};watch(()=>a.modelValue,ka=>{ka!==ne.value&&(j.value=R(ka),na(ka))});const ha=()=>{var ka,ya,ba;return a.readOnly?null:createVNode$1(Fragment,null,[l.suffix&&createVNode$1("div",{class:`${d}-suffix`},[(ka=l.suffix)==null?void 0:ka.call(l)]),createVNode$1("div",{class:`${d}-step`},[createVNode$1("button",{class:[`${d}-step-button`,{[`${d}-step-button-disabled`]:y.value||ce.value}],type:"button",tabindex:"-1",disabled:y.value||ce.value,onMousedown:Ea=>sa(Ea,"plus",!0),onMouseup:ea,onMouseleave:ea},[l.plus?(ya=l.plus)==null?void 0:ya.call(l):createVNode$1(IconUp,null,null)]),createVNode$1("button",{class:[`${d}-step-button`,{[`${d}-step-button-disabled`]:y.value||se.value}],type:"button",tabindex:"-1",disabled:y.value||se.value,onMousedown:Ea=>sa(Ea,"minus",!0),onMouseup:ea,onMouseleave:ea},[l.minus?(ba=l.minus)==null?void 0:ba.call(l):createVNode$1(IconDown,null,null)])])])},ga=computed(()=>[d,`${d}-mode-${a.mode}`,`${d}-size-${x.value}`,{[`${d}-readonly`]:a.readOnly}]),fa=()=>createVNode$1(Button,{size:x.value,tabindex:"-1",class:`${d}-step-button`,disabled:y.value||se.value,onMousedown:ka=>sa(ka,"minus",!0),onMouseup:ea,onMouseleave:ea},{icon:()=>createVNode$1(IconMinus,null,null)}),ma=()=>createVNode$1(Button,{size:x.value,tabindex:"-1",class:`${d}-step-button`,disabled:y.value||ce.value,onMousedown:ka=>sa(ka,"plus",!0),onMouseup:ea,onMouseleave:ea},{icon:()=>createVNode$1(IconPlus,null,null)});return{inputRef:f,render:()=>{const ka=a.mode==="embed"?{prepend:l.prepend,prefix:l.prefix,suffix:a.hideButton?l.suffix:ha,append:l.append}:{prepend:a.hideButton?l.prepend:fa,prefix:l.prefix,suffix:l.suffix,append:a.hideButton?l.append:ma};return createVNode$1(Input,{key:`__arco__${a.mode}`,ref:f,class:ga.value,type:"text",allowClear:a.allowClear,size:x.value,modelValue:j.value,placeholder:a.placeholder,disabled:y.value,readonly:a.readOnly,error:a.error,inputAttrs:__spreadValues$N({role:"spinbutton","aria-valuemax":a.max,"aria-valuemin":a.min,"aria-valuenow":j.value},a.inputAttrs),onInput:ra,onFocus:la,onBlur:ca,onClear:pa,onChange:oa,onKeydown:da},ka)}}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const InputNumber=Object.assign(_InputNumber,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_InputNumber.name,_InputNumber)}});var InputAlpha=defineComponent({name:"InputAlpha",props:{value:{type:Number,required:!0},disabled:Boolean,onChange:Function},setup(a){const s=getPrefixCls("color-picker");return()=>createVNode$1(InputNumber,{class:`${s}-input-alpha`,size:"mini",min:0,max:100,disabled:a.disabled,modelValue:Math.round(a.value*100),onChange:(l=100)=>{var o;return(o=a.onChange)==null?void 0:o.call(a,l/100)}},{suffix:()=>"%"})}}),__defProp$M=Object.defineProperty,__getOwnPropSymbols$N=Object.getOwnPropertySymbols,__hasOwnProp$N=Object.prototype.hasOwnProperty,__propIsEnum$N=Object.prototype.propertyIsEnumerable,__defNormalProp$M=(a,s,l)=>s in a?__defProp$M(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$M=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$N.call(s,l)&&__defNormalProp$M(a,l,s[l]);if(__getOwnPropSymbols$N)for(var l of __getOwnPropSymbols$N(s))__propIsEnum$N.call(s,l)&&__defNormalProp$M(a,l,s[l]);return a},InputRgb=defineComponent({name:"InputRgb",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},disabled:Boolean,disabledAlpha:Boolean,onHsvChange:Function,onAlphaChange:Function},setup(a){const s=getPrefixCls("color-picker"),{color:l}=toRefs(a),o=c=>{var u;const d=__spreadValues$M(__spreadValues$M({},l.value.rgb),c),f=rgbToHsv(d.r,d.g,d.b);(u=a.onHsvChange)==null||u.call(a,f)};return()=>createVNode$1(InputGroup,{class:`${s}-input-group`},{default:()=>[["r","g","b"].map(c=>createVNode$1(InputNumber,{key:c,size:"mini",min:0,max:255,disabled:a.disabled,modelValue:l.value.rgb[c],hideButton:!0,onChange:(u=0)=>o({[c]:u})},null)),!a.disabledAlpha&&createVNode$1(InputAlpha,{disabled:a.disabled,value:a.alpha,onChange:a.onAlphaChange},null)]})}}),InputHex=defineComponent({name:"InputHex",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},disabled:Boolean,disabledAlpha:Boolean,onHsvChange:Function,onAlphaChange:Function},setup(a){const s=getPrefixCls("color-picker"),{color:l}=toRefs(a),[o,c]=useState(l.value.hex),u=g=>{var y;const $=hexToRgb(g)||{r:255,g:0,b:0},x=rgbToHsv($.r,$.g,$.b);(y=a.onHsvChange)==null||y.call(a,x)},d=g=>{var y,$;const x=($=(y=g.match(/[a-fA-F0-9]*/g))==null?void 0:y.join(""))!=null?$:"";x!==l.value.hex&&u(x.toUpperCase())},f=g=>{if(!g.clipboardData)return;let y=g.clipboardData.getData("Text");y.startsWith("#")&&(y=y.slice(1)),d(y),g.preventDefault()};return watch(l,()=>{l.value.hex!==o.value&&c(l.value.hex)}),()=>createVNode$1(InputGroup,{class:`${s}-input-group`},{default:()=>[createVNode$1(Input,{class:`${s}-input-hex`,size:"mini",maxLength:6,disabled:a.disabled,modelValue:o.value,onInput:c,onChange:d,onBlur:()=>u,onPressEnter:()=>u,onPaste:f},{prefix:()=>"#"}),!a.disabledAlpha&&createVNode$1(InputAlpha,{disabled:a.disabled,value:a.alpha,onChange:a.onAlphaChange},null)]})}}),Panel$2=defineComponent({name:"Panel",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},colorString:String,disabled:Boolean,disabledAlpha:Boolean,showHistory:Boolean,showPreset:Boolean,format:String,historyColors:Array,presetColors:Array,onAlphaChange:Function,onHsvChange:Function},setup(a){const{t:s}=useI18n(),l=getPrefixCls("color-picker"),o=computed(()=>a.color.hsv),[c,u]=useState(a.format||"hex"),d=N=>{u(N)};ref(!1);const f=N=>{var R;const j=hexToRgb(N)||{r:255,g:0,b:0},ne=rgbToHsv(j.r,j.g,j.b);(R=a.onHsvChange)==null||R.call(a,ne)},g=()=>{const N={color:a.color,alpha:a.alpha,disabled:a.disabled,disabledAlpha:a.disabledAlpha,onHsvChange:a.onHsvChange,onAlphaChange:a.onAlphaChange};return c.value==="rgb"?createVNode$1(InputRgb,N,null):createVNode$1(InputHex,N,null)},y=N=>createVNode$1("div",{key:N,class:`${l}-color-block`,style:{backgroundColor:N},onClick:()=>f(N)},[createVNode$1("div",{class:`${l}-block`,style:{backgroundColor:N}},null)]),$=(N,R)=>createVNode$1("div",{class:`${l}-colors-section`},[createVNode$1("div",{class:`${l}-colors-text`},[N]),createVNode$1("div",{class:`${l}-colors-wrapper`},[R?.length?createVNode$1("div",{class:`${l}-colors-list`},[R.map(y)]):createVNode$1("span",{class:`${l}-colors-empty`},[s("colorPicker.empty")])])]),x=()=>a.showHistory||a.showPreset?createVNode$1("div",{class:`${l}-panel-colors`},[a.showHistory&&$(s("colorPicker.history"),a.historyColors),a.showPreset&&$(s("colorPicker.preset"),a.presetColors)]):null;return()=>createVNode$1("div",{class:{[`${l}-panel`]:!0,[`${l}-panel-disabled`]:a.disabled}},[createVNode$1(Palette,{color:a.color,onChange:(N,R)=>{var j;return(j=a.onHsvChange)==null?void 0:j.call(a,{h:o.value.h,s:N,v:R})}},null),createVNode$1("div",{class:`${l}-panel-control`},[createVNode$1("div",{class:`${l}-control-wrapper`},[createVNode$1("div",null,[createVNode$1(ControlBar,{type:"hue",x:o.value.h,color:a.color,colorString:a.colorString,onChange:N=>{var R;return(R=a.onHsvChange)==null?void 0:R.call(a,{h:N,s:o.value.s,v:o.value.v})}},null),!a.disabledAlpha&&createVNode$1(ControlBar,{type:"alpha",x:a.alpha,color:a.color,colorString:a.colorString,onChange:a.onAlphaChange},null)]),createVNode$1("div",{class:`${l}-preview`,style:{backgroundColor:a.colorString}},null)]),createVNode$1("div",{class:`${l}-input-wrapper`},[createVNode$1(Select,{class:`${l}-select`,size:"mini","trigger-props":{class:`${l}-select-popup`},options:[{value:"hex",label:"Hex"},{value:"rgb",label:"RGB"}],modelValue:c.value,onChange:d},null),createVNode$1("div",{class:`${l}-group-wrapper`},[g()])])]),x()])}}),_ColorPicker=defineComponent({name:"ColorPicker",props:{modelValue:String,defaultValue:{type:String},format:{type:String},size:{type:String,default:"medium"},showText:{type:Boolean,default:!1},showHistory:{type:Boolean,default:!1},showPreset:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledAlpha:{type:Boolean,default:!1},hideTrigger:{type:Boolean},triggerProps:{type:Object},historyColors:{type:Array},presetColors:{type:Array,default:()=>colors}},emits:{"update:modelValue":a=>!0,change:a=>!0,"popup-visible-change":(a,s)=>!0},setup(a,{emit:s,slots:l}){const o=getPrefixCls("color-picker"),c=computed(()=>{var fe;return(fe=a.modelValue)!=null?fe:a.defaultValue}),u=computed(()=>formatInputToHSVA(c.value||"")),[d,f]=useState(u.value.a),[g,y]=useState({h:u.value.h,s:u.value.s,v:u.value.v});watch(()=>u.value,fe=>{c.value!==N.value&&(f(fe.a),y({h:fe.h,s:fe.s,v:fe.v}))});const $=computed(()=>{const fe=hsvToRgb(g.value.h,g.value.s,g.value.v),ea=rgbToHex(fe.r,fe.g,fe.b);return{hsv:g.value,rgb:fe,hex:ea}}),x=computed(()=>{const{r:fe,g:ea,b:ta}=$.value.rgb;return`rgba(${fe}, ${ea}, ${ta}, ${d.value.toFixed(2)})`}),N=computed(()=>{const{r:fe,g:ea,b:ta}=$.value.rgb;return a.format==="rgb"?d.value<1&&!a.disabledAlpha?`rgba(${fe}, ${ea}, ${ta}, ${d.value.toFixed(2)})`:`rgb(${fe}, ${ea}, ${ta})`:d.value<1&&!a.disabledAlpha?`#${rgbaToHex(fe,ea,ta,d.value)}`:`#${rgbToHex(fe,ea,ta)}`});watch(N,fe=>{s("update:modelValue",fe),s("change",fe)});const R=fe=>{!a.disabled&&y(fe)},j=fe=>{!a.disabled&&f(fe)},ne=fe=>{s("popup-visible-change",fe,N.value)},se=()=>createVNode$1("div",{class:{[o]:!0,[`${o}-size-${a.size}`]:a.size,[`${o}-disabled`]:a.disabled}},[createVNode$1("div",{class:`${o}-preview`,style:{backgroundColor:N.value}},null),a.showText&&createVNode$1("div",{class:`${o}-value`},[N.value]),createVNode$1("input",{class:`${o}-input`,value:N.value,disabled:a.disabled},null)]),ce=()=>createVNode$1(Panel$2,{color:$.value,alpha:d.value,colorString:x.value,historyColors:a.historyColors,presetColors:a.presetColors,showHistory:a.showHistory,showPreset:a.showPreset,disabled:a.disabled,disabledAlpha:a.disabledAlpha,format:a.format,onHsvChange:R,onAlphaChange:j},null);return()=>a.hideTrigger?ce():createVNode$1(Trigger,mergeProps({trigger:"click",position:"bl",animationName:"slide-dynamic-origin",popupOffset:4,disabled:a.disabled,onPopupVisibleChange:ne},a.triggerProps),{default:()=>[l.default?l.default():se()],content:ce})}});const ColorPicker=Object.assign(_ColorPicker,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_ColorPicker.name,_ColorPicker)}});function hasPropOrSlot(a,s,l){return computed(()=>!!(a[l]||s[l]))}var __defProp$L=Object.defineProperty,__getOwnPropSymbols$M=Object.getOwnPropertySymbols,__hasOwnProp$M=Object.prototype.hasOwnProperty,__propIsEnum$M=Object.prototype.propertyIsEnumerable,__defNormalProp$L=(a,s,l)=>s in a?__defProp$L(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$L=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$M.call(s,l)&&__defNormalProp$L(a,l,s[l]);if(__getOwnPropSymbols$M)for(var l of __getOwnPropSymbols$M(s))__propIsEnum$M.call(s,l)&&__defNormalProp$L(a,l,s[l]);return a};const _sfc_main$2n=defineComponent({name:"Comment",props:{author:{type:String},avatar:{type:String},content:{type:String},datetime:{type:String},align:{type:[String,Object],default:"left"}},setup(a,{slots:s}){const l=getPrefixCls("comment"),[o,c,u,d]=["author","avatar","content","datetime"].map(g=>hasPropOrSlot(a,s,g)),f=computed(()=>{const{align:g}=a;return __spreadValues$L({},isString$1(g)?{datetime:g,actions:g}:g)});return{prefixCls:l,hasAuthor:o,hasAvatar:c,hasContent:u,hasDatetime:d,computedAlign:f}}}),_hoisted_1$16=["src"],_hoisted_2$P={key:0},_hoisted_3$K={key:0},_hoisted_4$g={key:0};function _sfc_render$29(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[a.hasAvatar?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-avatar`)},[a.avatar?(openBlock(),createElementBlock("img",{key:0,src:a.avatar,alt:"comment-avatar"},null,8,_hoisted_1$16)):renderSlot(a.$slots,"avatar",{key:1})],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-inner`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-inner-content`)},[a.hasAuthor||a.hasDatetime?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title ${a.prefixCls}-title-align-${a.computedAlign.datetime}`)},[a.hasAuthor?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-author`)},[a.author?(openBlock(),createElementBlock("span",_hoisted_2$P,toDisplayString(a.author),1)):renderSlot(a.$slots,"author",{key:1})],2)):createCommentVNode("v-if",!0),a.hasDatetime?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-datetime`)},[a.datetime?(openBlock(),createElementBlock("span",_hoisted_3$K,toDisplayString(a.datetime),1)):renderSlot(a.$slots,"datetime",{key:1})],2)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),a.hasContent?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-content`)},[a.content?(openBlock(),createElementBlock("span",_hoisted_4$g,toDisplayString(a.content),1)):renderSlot(a.$slots,"content",{key:1})],2)):createCommentVNode("v-if",!0),a.$slots.actions?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-actions ${a.prefixCls}-actions-align-${a.computedAlign.actions}`)},[renderSlot(a.$slots,"actions")],2)):createCommentVNode("v-if",!0)],2),a.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-inner-comment`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0)],2)],2)}var _Comment=_export_sfc(_sfc_main$2n,[["render",_sfc_render$29]]);const Comment=Object.assign(_Comment,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Comment.name,_Comment)}}),_sfc_main$2m=defineComponent({name:"ConfigProvider",props:{prefixCls:{type:String,default:"arco"},locale:{type:Object},size:{type:String},global:{type:Boolean,default:!1},updateAtScroll:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},exchangeTime:{type:Boolean,default:!0}},setup(a,{slots:s}){const{prefixCls:l,locale:o,size:c,updateAtScroll:u,scrollToClose:d,exchangeTime:f}=toRefs(a),g=reactive({slots:s,prefixCls:l,locale:o,size:c,updateAtScroll:u,scrollToClose:d,exchangeTime:f});if(a.global){const y=getCurrentInstance();y&&y.appContext.app.provide(configProviderInjectionKey,g)}else provide(configProviderInjectionKey,g)}});function _sfc_render$28(a,s,l,o,c,u){return renderSlot(a.$slots,"default")}var _ConfigProvider=_export_sfc(_sfc_main$2m,[["render",_sfc_render$28]]);const ConfigProvider=Object.assign(_ConfigProvider,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_ConfigProvider.name,_ConfigProvider)}});function usePickerState(a){const{modelValue:s,defaultValue:l,format:o}=toRefs(a),c=computed(()=>getDayjsValue(s.value,o.value)),u=computed(()=>getDayjsValue(l.value,o.value)),[d,f]=useState(isUndefined(c.value)?isUndefined(u.value)?void 0:u.value:c.value);return watch(c,()=>{isUndefined(c.value)&&f(void 0)}),{value:computed(()=>c.value||d.value),setValue:f}}const _sfc_main$2l=defineComponent({name:"DateInput",components:{IconHover,IconClose,FeedbackIcon},props:{size:{type:String},focused:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},error:{type:Boolean},allowClear:{type:Boolean},placeholder:{type:String},inputValue:{type:String},value:{type:Object},format:{type:[String,Function],required:!0}},emits:["clear","press-enter","change","blur"],setup(a,{emit:s,slots:l}){const{error:o,focused:c,disabled:u,size:d,value:f,format:g,inputValue:y}=toRefs(a),{mergedSize:$,mergedDisabled:x,mergedError:N,feedback:R}=useFormItem({size:d,disabled:u,error:o}),{mergedSize:j}=useSize$1($),ne=getPrefixCls("picker"),se=computed(()=>[ne,`${ne}-size-${j.value}`,{[`${ne}-focused`]:c.value,[`${ne}-disabled`]:x.value,[`${ne}-error`]:N.value,[`${ne}-has-prefix`]:l.prefix}]),ce=computed(()=>{if(y?.value)return y?.value;if(f?.value&&isDayjs(f.value))return isFunction$1(g.value)?g.value(f.value):f.value.format(g.value)}),fe=ref();return{feedback:R,prefixCls:ne,classNames:se,displayValue:ce,mergedDisabled:x,refInput:fe,onPressEnter(){s("press-enter")},onChange(ea){s("change",ea)},onClear(ea){s("clear",ea)},onBlur(ea){s("blur",ea)}}},methods:{focus(){this.refInput&&this.refInput.focus&&this.refInput.focus()},blur(){this.refInput&&this.refInput.blur&&this.refInput.blur()}}}),_hoisted_1$15=["disabled","placeholder","value"];function _sfc_render$27(a,s,l,o,c,u){const d=resolveComponent("IconClose"),f=resolveComponent("IconHover"),g=resolveComponent("FeedbackIcon");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-prefix`)},[renderSlot(a.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-input`)},[createBaseVNode("input",mergeProps({ref:"refInput",disabled:a.mergedDisabled,placeholder:a.placeholder,class:`${a.prefixCls}-start-time`,value:a.displayValue},a.readonly?{readonly:!0}:{},{onKeydown:s[0]||(s[0]=withKeys((...y)=>a.onPressEnter&&a.onPressEnter(...y),["enter"])),onInput:s[1]||(s[1]=(...y)=>a.onChange&&a.onChange(...y)),onBlur:s[2]||(s[2]=(...y)=>a.onBlur&&a.onBlur(...y))}),null,16,_hoisted_1$15)],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-suffix`)},[a.allowClear&&!a.mergedDisabled&&a.displayValue?(openBlock(),createBlock(f,{key:0,prefix:a.prefixCls,class:normalizeClass(`${a.prefixCls}-clear-icon`),onClick:a.onClear},{default:withCtx(()=>[createVNode$1(d)]),_:1},8,["prefix","class","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-suffix-icon`)},[renderSlot(a.$slots,"suffix-icon")],2),a.feedback?(openBlock(),createBlock(g,{key:1,type:a.feedback},null,8,["type"])):createCommentVNode("v-if",!0)],2)],2)}var DateInput=_export_sfc(_sfc_main$2l,[["render",_sfc_render$27]]);function getColumnsFromFormat(a){const s=["H","h","m","s","a","A"],l=[];let o=!1;return s.forEach(c=>{a.indexOf(c)!==-1&&(l.push(c),(c==="a"||c==="A")&&(o=!0))}),{list:l,use12Hours:o}}const scrollIds=new Map;function scrollTo(a,s,l){const o=scrollIds.get(a);isUndefined(o)||cancelAnimationFrame(o),l<=0&&(a.scrollTop=s),scrollIds.set(a,requestAnimationFrame(()=>{new Tween({from:{scrollTop:a.scrollTop},to:{scrollTop:s},duration:l,onUpdate:u=>{a.scrollTop=u.scrollTop}}).start()}))}function getFormattedValue(a,s){const l=o=>{if(isArray$1(o))return o.map(c=>l(c));if(!isUndefined(o))return o.format(s)};return l(a)}function isValidRangeValue$1(a){return isUndefined(a)?!0:isArray$1(a)?a.length===0||a.length===2&&isDayjs(a[0])&&isDayjs(a[1]):!1}function isValidInputValue(a,s){return a?typeof a=="string"&&dayjs(a,s).format(s)===a:!1}function isDisabledTime(a,{disabledHours:s,disabledMinutes:l,disabledSeconds:o}){if(!a)return!1;const c=a.hour(),u=a.minute(),d=a.second(),f=s?.()||[],g=l?.(c)||[],y=o?.(c,u)||[],$=(x,N)=>!isUndefined(x)&&N.includes(x);return $(c,f)||$(u,g)||$(d,y)}var RenderFunction=defineComponent({name:"RenderFunction",props:{renderFunc:{type:Function,required:!0}},render(){return this.renderFunc(this.$attrs)}});const PickerInjectionKey=Symbol("PickerInjectionKey");function useDatePickerTransform$1(){const{datePickerT:a}=inject(PickerInjectionKey)||{};return a||((s,...l)=>s)}const _sfc_main$2k=defineComponent({name:"PanelShortcuts",components:{Button,RenderFunction},props:{prefixCls:{type:String,required:!0},shortcuts:{type:Array,default:()=>[]},showNowBtn:{type:Boolean}},emits:["item-click","item-mouse-enter","item-mouse-leave","now-click"],setup(a,{emit:s}){return{datePickerT:useDatePickerTransform$1(),onItemClick:o=>{s("item-click",o)},onItemMouseEnter:o=>{s("item-mouse-enter",o)},onItemMouseLeave:o=>{s("item-mouse-leave",o)},onNowClick:()=>{s("now-click")},isFunction:isFunction$1}}});function _sfc_render$26(a,s,l,o,c,u){const d=resolveComponent("Button"),f=resolveComponent("RenderFunction");return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-shortcuts`)},[a.showNowBtn?(openBlock(),createBlock(d,{key:0,size:"mini",onClick:s[0]||(s[0]=()=>a.onNowClick())},{default:withCtx(()=>[createTextVNode(toDisplayString(a.datePickerT("datePicker.now")),1)]),_:1})):createCommentVNode("v-if",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.shortcuts,(g,y)=>(openBlock(),createBlock(d,{key:y,size:"mini",onClick:()=>a.onItemClick(g),onMouseenter:()=>a.onItemMouseEnter(g),onMouseleave:()=>a.onItemMouseLeave(g)},{default:withCtx(()=>[a.isFunction(g.label)?(openBlock(),createBlock(f,{key:0,"render-func":g.label},null,8,["render-func"])):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(g.label),1)],2112))]),_:2},1032,["onClick","onMouseenter","onMouseleave"]))),128))],2)}var PanelShortcuts=_export_sfc(_sfc_main$2k,[["render",_sfc_render$26]]);function newArray(a){return[...Array(a)]}function normalizeRangeValue(a){if(!isUndefined(a))return isArray$1(a)?a:[a,void 0]}function isCompleteRangeValue(a){return!!a&&isDayjs(a[0])&&isDayjs(a[1])}function isValidRangeValue(a){return isUndefined(a)||a.length===0||isCompleteRangeValue(a)}function mergeValueWithTime(a,s,l){const o=s||a;return(l||a).set("year",o.year()).set("month",o.month()).set("date",o.date())}const _sfc_main$2j=defineComponent({name:"IconDoubleLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-double-left`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$14=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$O=createBaseVNode("path",{d:"M36.857 9.9 22.715 24.042l14.142 14.142M25.544 9.9 11.402 24.042l14.142 14.142"},null,-1),_hoisted_3$J=[_hoisted_2$O];function _sfc_render$25(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$J,14,_hoisted_1$14)}var _IconDoubleLeft=_export_sfc(_sfc_main$2j,[["render",_sfc_render$25]]);const IconDoubleLeft=Object.assign(_IconDoubleLeft,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDoubleLeft.name,_IconDoubleLeft)}}),_sfc_main$2i=defineComponent({name:"IconDoubleRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-double-right`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$13=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$N=createBaseVNode("path",{d:"m11.143 38.1 14.142-14.142L11.143 9.816M22.456 38.1l14.142-14.142L22.456 9.816"},null,-1),_hoisted_3$I=[_hoisted_2$N];function _sfc_render$24(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$I,14,_hoisted_1$13)}var _IconDoubleRight=_export_sfc(_sfc_main$2i,[["render",_sfc_render$24]]);const IconDoubleRight=Object.assign(_IconDoubleRight,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDoubleRight.name,_IconDoubleRight)}}),_sfc_main$2h=defineComponent({name:"PanelHeader",components:{IconLeft,IconRight,IconDoubleLeft,IconDoubleRight,RenderFunction},props:{prefixCls:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:"date"},value:{type:Object},icons:{type:Object},onPrev:{type:Function},onSuperPrev:{type:Function},onNext:{type:Function},onSuperNext:{type:Function},onLabelClick:{type:Function}},emits:["label-click"],setup(a){return{showPrev:computed(()=>isFunction$1(a.onPrev)),showSuperPrev:computed(()=>isFunction$1(a.onSuperPrev)),showNext:computed(()=>isFunction$1(a.onNext)),showSuperNext:computed(()=>isFunction$1(a.onSuperNext)),year:computed(()=>["date","quarter","month","week"].includes(a.mode)&&a.value?a.value.format("YYYY"):""),month:computed(()=>["date","week"].includes(a.mode)&&a.value?a.value.format("MM"):""),getIconClassName:s=>[`${a.prefixCls}-header-icon`,{[`${a.prefixCls}-header-icon-hidden`]:!s}]}}}),_hoisted_1$12={key:1};function _sfc_render$23(a,s,l,o,c,u){const d=resolveComponent("RenderFunction"),f=resolveComponent("IconDoubleLeft"),g=resolveComponent("IconLeft"),y=resolveComponent("IconRight"),$=resolveComponent("IconDoubleRight");return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-header`)},[createBaseVNode("div",{class:normalizeClass(a.getIconClassName(a.showSuperPrev)),onClick:s[0]||(s[0]=(...x)=>a.onSuperPrev&&a.onSuperPrev(...x))},[a.showSuperPrev?(openBlock(),createElementBlock(Fragment,{key:0},[a.icons&&a.icons.prevDouble?(openBlock(),createBlock(d,{key:0,"render-func":a.icons&&a.icons.prevDouble},null,8,["render-func"])):(openBlock(),createBlock(f,{key:1}))],2112)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{class:normalizeClass(a.getIconClassName(a.showPrev)),onClick:s[1]||(s[1]=(...x)=>a.onPrev&&a.onPrev(...x))},[a.showPrev?(openBlock(),createElementBlock(Fragment,{key:0},[a.icons&&a.icons.prev?(openBlock(),createBlock(d,{key:0,"render-func":a.icons&&a.icons.prev},null,8,["render-func"])):(openBlock(),createBlock(g,{key:1}))],2112)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-header-title`)},[a.onLabelClick&&(a.year||a.month)?(openBlock(),createElementBlock(Fragment,{key:0},[a.year?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-header-label`),onClick:s[2]||(s[2]=()=>a.onLabelClick&&a.onLabelClick("year"))},toDisplayString(a.year),3)):createCommentVNode("v-if",!0),a.year&&a.month?(openBlock(),createElementBlock("span",_hoisted_1$12,"-")):createCommentVNode("v-if",!0),a.month?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(`${a.prefixCls}-header-label`),onClick:s[3]||(s[3]=()=>a.onLabelClick&&a.onLabelClick("month"))},toDisplayString(a.month),3)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(a.title),1)],2112))],2),createBaseVNode("div",{class:normalizeClass(a.getIconClassName(a.showNext)),onClick:s[4]||(s[4]=(...x)=>a.onNext&&a.onNext(...x))},[a.showNext?(openBlock(),createElementBlock(Fragment,{key:0},[a.icons&&a.icons.next?(openBlock(),createBlock(d,{key:0,"render-func":a.icons&&a.icons.next},null,8,["render-func"])):(openBlock(),createBlock(y,{key:1}))],2112)):createCommentVNode("v-if",!0)],2),createBaseVNode("div",{class:normalizeClass(a.getIconClassName(a.showSuperNext)),onClick:s[5]||(s[5]=(...x)=>a.onSuperNext&&a.onSuperNext(...x))},[a.showSuperNext?(openBlock(),createElementBlock(Fragment,{key:0},[a.icons&&a.icons.nextDouble?(openBlock(),createBlock(d,{key:0,"render-func":a.icons&&a.icons.nextDouble},null,8,["render-func"])):(openBlock(),createBlock($,{key:1}))],2112)):createCommentVNode("v-if",!0)],2)],2)}var PanelHeader=_export_sfc(_sfc_main$2h,[["render",_sfc_render$23]]);function useCellClassName(a){const{rangeValues:s}=toRefs(a),l=computed(()=>s?.value&&s.value.every(isDayjs)?getSortedDayjsArray(s.value):s?.value),o=computed(()=>{var u;return(u=l.value)==null?void 0:u[0]}),c=computed(()=>{var u;return(u=l.value)==null?void 0:u[1]});return{getCellClassName:(u,d)=>{const{value:f,isSameTime:g,mode:y,prefixCls:$}=a,x=!u.isPrev&&!u.isNext,N=f&&g(u.value,f);let R=g(u.value,getNow());y==="week"&&(R=getNow().isSame(u.value,"date"));const j=x&&o.value&&g(u.value,o.value),ne=x&&c.value&&g(u.value,c.value),se=x&&o.value&&c.value&&(j||ne||u.value.isBetween(o.value,c.value,null,"[]"));return[`${$}-cell`,{[`${$}-cell-in-view`]:x,[`${$}-cell-today`]:R,[`${$}-cell-selected`]:N,[`${$}-cell-range-start`]:j,[`${$}-cell-range-end`]:ne,[`${$}-cell-in-range`]:se,[`${$}-cell-disabled`]:d},u.classNames]}}}const _sfc_main$2g=defineComponent({name:"PanelBody",components:{RenderFunction},props:{prefixCls:{type:String,required:!0},rows:{type:Array,default:()=>[]},value:{type:Object},disabledDate:{type:Function},isSameTime:{type:Function,required:!0},mode:{type:String},rangeValues:{type:Array},dateRender:{type:Function}},emits:["cell-click","cell-mouse-enter"],setup(a,{emit:s}){const{prefixCls:l,value:o,disabledDate:c,isSameTime:u,mode:d,rangeValues:f}=toRefs(a),{getCellClassName:g}=useCellClassName(reactive({prefixCls:l,value:o,isSameTime:u,mode:d,rangeValues:f})),y=$=>!!(isFunction$1(c?.value)&&c?.value(getDateValue$1($.value)));return{isWeek:computed(()=>d?.value==="week"),getCellClassName:$=>{const x=y($);return g($,x)},onCellClick:$=>{y($)||s("cell-click",$)},onCellMouseEnter:$=>{y($)||s("cell-mouse-enter",$)},onCellMouseLeave:$=>{y($)||s("cell-mouse-enter",$)},getDateValue:getDateValue$1}}}),_hoisted_1$11=["onMouseenter","onMouseleave","onClick"];function _sfc_render$22(a,s,l,o,c,u){const d=resolveComponent("RenderFunction");return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-body`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.rows,(f,g)=>(openBlock(),createElementBlock("div",{key:g,class:normalizeClass([`${a.prefixCls}-row`,{[`${a.prefixCls}-row-week`]:a.isWeek}])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(f,(y,$)=>(openBlock(),createElementBlock(Fragment,null,[createCommentVNode(" 一年中的第几周，只在 week 模式下显示 "),a.isWeek&&$===0?(openBlock(),createElementBlock("div",{key:$,class:normalizeClass([`${a.prefixCls}-cell`,`${a.prefixCls}-cell-week`])},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-date`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-date-value`)},toDisplayString(y.label),3)],2)],2)):(openBlock(),createElementBlock("div",{key:$,class:normalizeClass(a.getCellClassName(y)),onMouseenter:()=>{a.onCellMouseEnter(y)},onMouseleave:()=>{a.onCellMouseLeave(y)},onClick:()=>{a.onCellClick(y)}},[a.dateRender?(openBlock(),createBlock(d,{key:0,"render-func":a.dateRender,date:a.getDateValue(y.value)},null,8,["render-func","date"])):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-date`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-date-value`)},toDisplayString(y.label),3)],2))],42,_hoisted_1$11))],64))),256))],2))),128))],2)}var PanelBody=_export_sfc(_sfc_main$2g,[["render",_sfc_render$22]]);const _sfc_main$2f=defineComponent({name:"PanelWeekList",props:{prefixCls:{type:String,required:!0},weekList:{type:Array,required:!0}},setup(){const a=useDatePickerTransform$1();return{labelList:computed(()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].map(l=>a(`datePicker.week.short.${l}`)))}}});function _sfc_render$21(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-week-list`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.weekList,d=>(openBlock(),createElementBlock("div",{key:d,class:normalizeClass(`${a.prefixCls}-week-list-item`)},toDisplayString(a.labelList[d]||""),3))),128))],2)}var PanelWeekList=_export_sfc(_sfc_main$2f,[["render",_sfc_render$21]]);const _sfc_main$2e=defineComponent({name:"TimePickerColumn",props:{prefixCls:{type:String,required:!0},list:{type:Array,required:!0},value:{type:[Number,String]},visible:{type:Boolean}},emits:["select"],setup(a,{emit:s}){const{visible:l,value:o}=toRefs(a),c=ref(new Map),u=ref();function d(f=!1){if(!u.value||isUndefined(o?.value)||!l?.value)return;const g=c.value.get(o.value);g&&scrollTo(u.value,g.offsetTop,f?100:0)}return watch([o,l],(f,[,g])=>{l.value!==g?nextTick(()=>{d()}):d(!0)}),onMounted(()=>{d()}),{refWrapper:u,refMap:c,onItemRef(f,g){c.value.set(g.value,f)},onItemClick(f){f.disabled||s("select",f.value)}}}}),_hoisted_1$10=["onClick"];function _sfc_render$20(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{ref:"refWrapper",class:normalizeClass(`${a.prefixCls}-column`)},[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.list,d=>(openBlock(),createElementBlock("li",{key:d.value,ref:f=>{a.onItemRef(f,d)},class:normalizeClass([`${a.prefixCls}-cell`,{[`${a.prefixCls}-cell-disabled`]:d.disabled,[`${a.prefixCls}-cell-selected`]:d.selected}]),onClick:()=>{a.onItemClick(d)}},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-cell-inner`)},toDisplayString(d.label),3)],10,_hoisted_1$10))),128))])],2)}var TimeColumn=_export_sfc(_sfc_main$2e,[["render",_sfc_render$20]]);function useTimeList(a){const{format:s,step:l,use12Hours:o,hideDisabledOptions:c,disabledHours:u,disabledMinutes:d,disabledSeconds:f,selectedHour:g,selectedMinute:y,selectedSecond:$,selectedAmpm:x,disabled:N}=toRefs(a),R=computed(()=>{var fe;const{hour:ea=1}=l?.value||{},ta=((fe=u?.value)==null?void 0:fe.call(u))||[];let na=[];for(let aa=0;aa<(o.value?12:24);aa+=ea)na.push(aa);return o.value&&(na[0]=12),c.value&&ta.length&&(na=na.filter(aa=>ta.indexOf(aa)<0)),na.map(aa=>({label:padStart(aa,2,"0"),value:aa,selected:g.value===aa,disabled:N?.value||ta.includes(aa)}))}),j=computed(()=>{var fe;const{minute:ea=1}=l?.value||{},ta=((fe=d?.value)==null?void 0:fe.call(d,g.value))||[];let na=[];for(let aa=0;aa<60;aa+=ea)na.push(aa);return c.value&&ta.length&&(na=na.filter(aa=>ta.indexOf(aa)<0)),na.map(aa=>({label:padStart(aa,2,"0"),value:aa,selected:y.value===aa,disabled:N?.value||ta.includes(aa)}))}),ne=computed(()=>{var fe;const{second:ea=1}=l?.value||{},ta=((fe=f?.value)==null?void 0:fe.call(f,g.value,y.value))||[];let na=[];for(let aa=0;aa<60;aa+=ea)na.push(aa);return c.value&&ta.length&&(na=na.filter(aa=>ta.indexOf(aa)<0)),na.map(aa=>({label:padStart(aa,2,"0"),value:aa,selected:$.value===aa,disabled:N?.value||ta.includes(aa)}))}),se=["am","pm"],ce=computed(()=>{const fe=getColumnsFromFormat(s.value).list.includes("A");return se.map(ea=>({label:fe?ea.toUpperCase():ea,value:ea,selected:x.value===ea,disabled:N?.value}))});return{hours:R,minutes:j,seconds:ne,ampmList:ce}}function useTimeFormat(a){const{format:s,use12Hours:l,defaultFormat:o}=toRefs(a),c=computed(()=>{let y=s?.value||o?.value;return(!y||!getColumnsFromFormat(y).list.length)&&(y=l?.value?"hh:mm:ss a":"HH:mm:ss"),y}),u=computed(()=>getColumnsFromFormat(c.value)),d=computed(()=>u.value.list),f=computed(()=>u.value.use12Hours),g=computed(()=>!!(l?.value||f.value));return{columns:d,use12Hours:g,format:c}}function useIsDisabledTime(a){const s=l=>isDisabledTime(l,{disabledHours:a.disabledHours,disabledMinutes:a.disabledMinutes,disabledSeconds:a.disabledSeconds});return l=>isArray$1(l)?l.some(o=>s(o)):s(l)}const _sfc_main$2d=defineComponent({name:"TimePickerPanel",components:{TimeColumn,Button},props:{value:{type:Object},visible:{type:Boolean},format:{type:String,default:"HH:mm:ss"},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},hideFooter:{type:Boolean},isRange:{type:Boolean},disabled:{type:Boolean}},emits:{select:a=>isDayjs(a),confirm:a=>isDayjs(a)},setup(a,{emit:s}){const{value:l,visible:o,format:c,step:u,use12Hours:d,hideDisabledOptions:f,disabledHours:g,disabledMinutes:y,disabledSeconds:$,disabled:x}=toRefs(a),N=getPrefixCls("timepicker"),{t:R}=useI18n(),{columns:j,use12Hours:ne,format:se}=useTimeFormat(reactive({format:c,use12Hours:d})),ce=ref(l?.value),fe=ha=>{ce.value=ha};watch([o,l],()=>{o.value&&fe(l?.value)});const ea=computed(()=>{var ha;const ga=(ha=ce.value)==null?void 0:ha.hour();return isUndefined(ga)||!ne.value?ga:ga>12?ga-12:ga===0?12:ga}),ta=computed(()=>{var ha;return(ha=ce.value)==null?void 0:ha.minute()}),na=computed(()=>{var ha;return(ha=ce.value)==null?void 0:ha.second()}),aa=computed(()=>{var ha;const ga=(ha=ce.value)==null?void 0:ha.hour();return!isUndefined(ga)&&ga>=12?"pm":"am"}),{hours:ia,minutes:sa,seconds:ra,ampmList:la}=useTimeList(reactive({format:se,step:u,use12Hours:ne,hideDisabledOptions:f,disabledHours:g,disabledMinutes:y,disabledSeconds:$,selectedHour:ea,selectedMinute:ta,selectedSecond:na,selectedAmpm:aa,disabled:x})),oa=useIsDisabledTime(reactive({disabledHours:g,disabledMinutes:y,disabledSeconds:$})),ca=computed(()=>oa(ce.value));function pa(ha){isUndefined(ha)||s("confirm",ha)}function ua(ha){fe(ha),s("select",ha)}function da(ha,ga="hour"){let fa;const ma=ea.value||"00",va=ta.value||"00",ka=na.value||"00",ya=aa.value||"am";switch(ga){case"hour":fa=`${ha}:${va}:${ka}`;break;case"minute":fa=`${ma}:${ha}:${ka}`;break;case"second":fa=`${ma}:${va}:${ha}`;break;case"ampm":fa=`${ma}:${va}:${ka} ${ha}`;break;default:fa="00:00:00"}let ba="HH:mm:ss";ne.value&&(ba="HH:mm:ss a",ga!=="ampm"&&(fa=`${fa} ${ya}`)),fa=dayjs(fa,ba),ua(fa)}return{prefixCls:N,t:R,hours:ia,minutes:sa,seconds:ra,ampmList:la,selectedValue:ce,selectedHour:ea,selectedMinute:ta,selectedSecond:na,selectedAmpm:aa,computedUse12Hours:ne,confirmBtnDisabled:ca,columns:j,onSelect:da,onSelectNow(){const ha=dayjs(new Date);ua(ha)},onConfirm(){pa(ce.value)}}}});function _sfc_render$1$(a,s,l,o,c,u){const d=resolveComponent("TimeColumn"),f=resolveComponent("Button");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(a.prefixCls)},[a.columns.includes("H")||a.columns.includes("h")?(openBlock(),createBlock(d,{key:0,value:a.selectedHour,list:a.hours,"prefix-cls":a.prefixCls,visible:a.visible,onSelect:s[0]||(s[0]=g=>{a.onSelect(g,"hour")})},null,8,["value","list","prefix-cls","visible"])):createCommentVNode("v-if",!0),a.columns.includes("m")?(openBlock(),createBlock(d,{key:1,value:a.selectedMinute,list:a.minutes,"prefix-cls":a.prefixCls,visible:a.visible,onSelect:s[1]||(s[1]=g=>{a.onSelect(g,"minute")})},null,8,["value","list","prefix-cls","visible"])):createCommentVNode("v-if",!0),a.columns.includes("s")?(openBlock(),createBlock(d,{key:2,value:a.selectedSecond,list:a.seconds,"prefix-cls":a.prefixCls,visible:a.visible,onSelect:s[2]||(s[2]=g=>{a.onSelect(g,"second")})},null,8,["value","list","prefix-cls","visible"])):createCommentVNode("v-if",!0),a.computedUse12Hours?(openBlock(),createBlock(d,{key:3,value:a.selectedAmpm,list:a.ampmList,"prefix-cls":a.prefixCls,visible:a.visible,onSelect:s[3]||(s[3]=g=>{a.onSelect(g,"ampm")})},null,8,["value","list","prefix-cls","visible"])):createCommentVNode("v-if",!0)],2),a.$slots["extra-footer"]?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-footer-extra-wrapper`)},[renderSlot(a.$slots,"extra-footer")],2)):createCommentVNode("v-if",!0),a.hideFooter?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-footer-btn-wrapper`)},[a.isRange?createCommentVNode("v-if",!0):(openBlock(),createBlock(f,{key:0,size:"mini",onClick:a.onSelectNow},{default:withCtx(()=>[createTextVNode(toDisplayString(a.t("datePicker.now")),1)]),_:1},8,["onClick"])),createVNode$1(f,{type:"primary",size:"mini",disabled:a.confirmBtnDisabled||!a.selectedValue,onClick:a.onConfirm},{default:withCtx(()=>[createTextVNode(toDisplayString(a.t("datePicker.ok")),1)]),_:1},8,["disabled","onClick"])],2))],64)}var Panel$1=_export_sfc(_sfc_main$2d,[["render",_sfc_render$1$]]);const _sfc_main$2c=defineComponent({name:"IconCalendar",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-calendar`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$$=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$M=createBaseVNode("path",{d:"M7 22h34M14 5v8m20-8v8M8 41h32a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v30a1 1 0 0 0 1 1Z"},null,-1),_hoisted_3$H=[_hoisted_2$M];function _sfc_render$1_(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$H,14,_hoisted_1$$)}var _IconCalendar=_export_sfc(_sfc_main$2c,[["render",_sfc_render$1_]]);const IconCalendar=Object.assign(_IconCalendar,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCalendar.name,_IconCalendar)}}),_sfc_main$2b=defineComponent({name:"IconClockCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-clock-circle`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$_=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$L=createBaseVNode("path",{d:"M24 14v10h9.5m8.5 0c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),_hoisted_3$G=[_hoisted_2$L];function _sfc_render$1Z(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$G,14,_hoisted_1$_)}var _IconClockCircle=_export_sfc(_sfc_main$2b,[["render",_sfc_render$1Z]]);const IconClockCircle=Object.assign(_IconClockCircle,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconClockCircle.name,_IconClockCircle)}});var __defProp$K=Object.defineProperty,__defProps$q=Object.defineProperties,__getOwnPropDescs$q=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$L=Object.getOwnPropertySymbols,__hasOwnProp$L=Object.prototype.hasOwnProperty,__propIsEnum$L=Object.prototype.propertyIsEnumerable,__defNormalProp$K=(a,s,l)=>s in a?__defProp$K(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$K=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$L.call(s,l)&&__defNormalProp$K(a,l,s[l]);if(__getOwnPropSymbols$L)for(var l of __getOwnPropSymbols$L(s))__propIsEnum$L.call(s,l)&&__defNormalProp$K(a,l,s[l]);return a},__spreadProps$q=(a,s)=>__defProps$q(a,__getOwnPropDescs$q(s));const ROW_COUNT$2=6,COL_COUNT$2=7,CELL_COUNT$2=ROW_COUNT$2*COL_COUNT$2;function getCellData(a){return{label:a.date(),value:a}}const _sfc_main$2a=defineComponent({name:"DatePanel",components:{PanelHeader,PanelBody,PanelWeekList,TimePanel:Panel$1,IconCalendar,IconClockCircle},props:{isRange:{type:Boolean},value:{type:Object},rangeValues:{type:Array},headerValue:{type:Object,required:!0},footerValue:{type:Object},timePickerValue:{type:Object},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},isSameTime:{type:Function},mode:{type:String,default:"date"},showTime:{type:Boolean},timePickerProps:{type:Object},currentView:{type:String},dateRender:{type:Function},disabled:{type:Boolean},onHeaderLabelClick:{type:Function}},emits:["select","time-picker-select","cell-mouse-enter","current-view-change","update:currentView"],setup(a,{emit:s}){const{isRange:l,headerValue:o,footerValue:c,dayStartOfWeek:u,isSameTime:d,mode:f,showTime:g,currentView:y,disabledTime:$}=toRefs(a),x=useDatePickerTransform$1(),N=computed(()=>f?.value==="week"),R=computed(()=>getPrefixCls(N.value?"panel-week":"panel-date")),j=getPrefixCls("picker"),[ne,se]=useMergeState("date",reactive({value:y})),ce=computed(()=>g.value&&l.value),fe=computed(()=>!g.value||!ce.value||ne.value==="date"),ea=computed(()=>g.value&&(!ce.value||ne.value==="time")),ta=computed(()=>[R.value,{[`${R.value}-with-view-tabs`]:ce.value}]),na=computed(()=>o.value.format("YYYY-MM")),aa=computed(()=>{var pa;return g.value&&((pa=$?.value)==null?void 0:pa.call($,getDateValue$1(c?.value||getNow())))||{}}),ia=computed(()=>{const pa=[0,1,2,3,4,5,6],ua=Math.max(u.value%7,0);return[...pa.slice(ua),...pa.slice(0,ua)]}),sa=computed(()=>{const pa=methods.startOf(o.value,"month"),ua=pa.day(),da=pa.daysInMonth(),ha=ia.value.indexOf(ua),ga=newArray(CELL_COUNT$2);for(let ma=0;ma<ga.length;ma++)ga[ma]=__spreadProps$q(__spreadValues$K({},getCellData(methods.add(pa,ma-ha,"day"))),{isPrev:ma<ha,isNext:ma>ha+da-1});return newArray(ROW_COUNT$2).map((ma,va)=>{const ka=ga.slice(va*COL_COUNT$2,(va+1)*COL_COUNT$2);if(N.value){const ya=ka[0].value;ka.unshift({label:ya.week(),value:ya})}return ka})}),ra=computed(()=>d?.value||((pa,ua)=>pa.isSame(ua,"day")));function la(pa){s("select",pa.value)}function oa(pa){s("time-picker-select",pa)}function ca(pa){s("cell-mouse-enter",pa.value)}return{prefixCls:R,classNames:ta,pickerPrefixCls:j,headerTitle:na,rows:sa,weekList:computed(()=>N.value?[-1,...ia.value]:ia.value),mergedIsSameTime:ra,disabledTimeProps:aa,onCellClick:la,onCellMouseEnter:ca,onTimePanelSelect:oa,showViewTabs:ce,showDateView:fe,showTimeView:ea,changeViewTo:pa=>{s("current-view-change",pa),s("update:currentView",pa),se(pa)},datePickerT:x}}});function _sfc_render$1Y(a,s,l,o,c,u){const d=resolveComponent("PanelHeader"),f=resolveComponent("PanelWeekList"),g=resolveComponent("PanelBody"),y=resolveComponent("TimePanel"),$=resolveComponent("IconCalendar"),x=resolveComponent("IconClockCircle");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.showDateView?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-inner`)},[createVNode$1(d,mergeProps(__spreadProps$q(__spreadValues$K({},a.headerOperations),{icons:a.headerIcons}),{"prefix-cls":a.pickerPrefixCls,title:a.headerTitle,mode:a.mode,value:a.headerValue,"on-label-click":a.onHeaderLabelClick}),null,16,["prefix-cls","title","mode","value","on-label-click"]),createVNode$1(f,{"prefix-cls":a.pickerPrefixCls,"week-list":a.weekList},null,8,["prefix-cls","week-list"]),createVNode$1(g,{mode:a.mode,"prefix-cls":a.pickerPrefixCls,rows:a.rows,value:a.isRange?void 0:a.value,"range-values":a.rangeValues,"disabled-date":a.disabledDate,"is-same-time":a.mergedIsSameTime,"date-render":a.dateRender,onCellClick:a.onCellClick,onCellMouseEnter:a.onCellMouseEnter},null,8,["mode","prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)):createCommentVNode("v-if",!0),a.showTimeView?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-timepicker`)},[createBaseVNode("header",{class:normalizeClass(`${a.prefixCls}-timepicker-title`)},toDisplayString(a.datePickerT("datePicker.selectTime")),3),createVNode$1(y,mergeProps(__spreadValues$K(__spreadValues$K({},a.timePickerProps),a.disabledTimeProps),{"hide-footer":"",value:a.value||a.isRange?a.timePickerValue:void 0,disabled:a.disabled,onSelect:a.onTimePanelSelect}),null,16,["value","disabled","onSelect"])],2)):createCommentVNode("v-if",!0),a.showViewTabs?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-footer`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-view-tabs`)},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-view-tab-pane`,{[`${a.prefixCls}-view-tab-pane-active`]:a.showDateView}]),onClick:s[0]||(s[0]=()=>a.changeViewTo("date"))},[createVNode$1($),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-view-tab-pane-text`)},toDisplayString(a.footerValue&&a.footerValue.format("YYYY-MM-DD")),3)],2),createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-view-tab-pane`,{[`${a.prefixCls}-view-tab-pane-active`]:a.showTimeView}]),onClick:s[1]||(s[1]=()=>a.changeViewTo("time"))},[createVNode$1(x),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-view-tab-pane-text`)},toDisplayString(a.timePickerValue&&a.timePickerValue.format("HH:mm:ss")),3)],2)],2)],2)):createCommentVNode("v-if",!0)],2)}var DatePanel=_export_sfc(_sfc_main$2a,[["render",_sfc_render$1Y]]);const _sfc_main$29=defineComponent({name:"WeekPanel",components:{DatePanel},props:{dayStartOfWeek:{type:Number,default:0}},emits:["select","cell-mouse-enter"],setup(a,{emit:s}){return useI18n(),{isSameTime:(o,c)=>methods.isSameWeek(o,c,a.dayStartOfWeek),onSelect:o=>{const c=methods.startOfWeek(o,a.dayStartOfWeek);s("select",c)},onCellMouseEnter:o=>{const c=methods.startOfWeek(o,a.dayStartOfWeek);s("cell-mouse-enter",c)}}}});function _sfc_render$1X(a,s,l,o,c,u){const d=resolveComponent("DatePanel");return openBlock(),createBlock(d,mergeProps(a.$attrs,{mode:"week","is-week":"","day-start-of-week":a.dayStartOfWeek,"is-same-time":a.isSameTime,onSelect:a.onSelect,onCellMouseEnter:a.onCellMouseEnter}),null,16,["day-start-of-week","is-same-time","onSelect","onCellMouseEnter"])}var WeekPanel=_export_sfc(_sfc_main$29,[["render",_sfc_render$1X]]),__defProp$J=Object.defineProperty,__defProps$p=Object.defineProperties,__getOwnPropDescs$p=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$K=Object.getOwnPropertySymbols,__hasOwnProp$K=Object.prototype.hasOwnProperty,__propIsEnum$K=Object.prototype.propertyIsEnumerable,__defNormalProp$J=(a,s,l)=>s in a?__defProp$J(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$J=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$K.call(s,l)&&__defNormalProp$J(a,l,s[l]);if(__getOwnPropSymbols$K)for(var l of __getOwnPropSymbols$K(s))__propIsEnum$K.call(s,l)&&__defNormalProp$J(a,l,s[l]);return a},__spreadProps$p=(a,s)=>__defProps$p(a,__getOwnPropDescs$p(s));const MONTH_LIST=["January","February","March","April","May","June","July","August","September","October","November","December"],CELL_COUNT$1=12,ROW_COUNT$1=4,COL_COUNT$1=3,_sfc_main$28=defineComponent({name:"MonthPanel",components:{PanelHeader,PanelBody},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function},onHeaderLabelClick:{type:Function},abbreviation:{type:Boolean,default:!0}},emits:["select","cell-mouse-enter"],setup(a,{emit:s}){const l=useDatePickerTransform$1(),{headerValue:o}=toRefs(a),c=computed(()=>getPrefixCls("panel-month")),u=getPrefixCls("picker"),d=computed(()=>o.value.format("YYYY")),f=computed(()=>{const x=o.value.year(),N=a.abbreviation?"short":"long",R=newArray(CELL_COUNT$1).map((ne,se)=>({label:l(`datePicker.month.${N}.${MONTH_LIST[se]}`),value:dayjs(`${x}-${se+1}`,"YYYY-M")}));return newArray(ROW_COUNT$1).map((ne,se)=>R.slice(se*COL_COUNT$1,(se+1)*COL_COUNT$1))}),g=(x,N)=>x.isSame(N,"month");function y(x){s("select",x.value)}function $(x){s("cell-mouse-enter",x.value)}return{prefixCls:c,pickerPrefixCls:u,headerTitle:d,rows:f,isSameTime:g,onCellClick:y,onCellMouseEnter:$}}});function _sfc_render$1W(a,s,l,o,c,u){const d=resolveComponent("PanelHeader"),f=resolveComponent("PanelBody");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-inner`)},[createVNode$1(d,mergeProps(__spreadProps$p(__spreadValues$J({},a.headerOperations),{icons:a.headerIcons}),{"prefix-cls":a.pickerPrefixCls,title:a.headerTitle,mode:"month",value:a.headerValue,"on-label-click":a.onHeaderLabelClick}),null,16,["prefix-cls","title","value","on-label-click"]),createVNode$1(f,{mode:"month","prefix-cls":a.pickerPrefixCls,rows:a.rows,value:a.value,"range-values":a.rangeValues,"disabled-date":a.disabledDate,"is-same-time":a.isSameTime,"date-render":a.dateRender,onCellClick:a.onCellClick,onCellMouseEnter:a.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var MonthPanel=_export_sfc(_sfc_main$28,[["render",_sfc_render$1W]]),__defProp$I=Object.defineProperty,__defProps$o=Object.defineProperties,__getOwnPropDescs$o=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$J=Object.getOwnPropertySymbols,__hasOwnProp$J=Object.prototype.hasOwnProperty,__propIsEnum$J=Object.prototype.propertyIsEnumerable,__defNormalProp$I=(a,s,l)=>s in a?__defProp$I(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$I=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$J.call(s,l)&&__defNormalProp$I(a,l,s[l]);if(__getOwnPropSymbols$J)for(var l of __getOwnPropSymbols$J(s))__propIsEnum$J.call(s,l)&&__defNormalProp$I(a,l,s[l]);return a},__spreadProps$o=(a,s)=>__defProps$o(a,__getOwnPropDescs$o(s));const ROW_COUNT=4,COL_COUNT=3,CELL_COUNT=ROW_COUNT*COL_COUNT,SPAN=10,_sfc_main$27=defineComponent({name:"YearPanel",components:{PanelHeader,PanelBody},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function}},emits:["select","cell-mouse-enter"],setup(a,{emit:s}){const{headerValue:l}=toRefs(a),o=computed(()=>getPrefixCls("panel-year")),c=getPrefixCls("picker"),u=computed(()=>{const $=Math.floor(l.value.year()/SPAN)*SPAN-1,x=newArray(CELL_COUNT).map((R,j)=>({label:$+j,value:dayjs(`${$+j}`,"YYYY"),isPrev:j<1,isNext:j>SPAN}));return newArray(ROW_COUNT).map((R,j)=>x.slice(j*COL_COUNT,(j+1)*COL_COUNT))}),d=computed(()=>`${u.value[0][1].label}-${u.value[ROW_COUNT-1][COL_COUNT-1].label}`),f=($,x)=>$.isSame(x,"year");function g($){s("select",$.value)}function y($){s("cell-mouse-enter",$.value)}return{prefixCls:o,pickerPrefixCls:c,headerTitle:d,rows:u,isSameTime:f,onCellClick:g,onCellMouseEnter:y}}});function _sfc_render$1V(a,s,l,o,c,u){const d=resolveComponent("PanelHeader"),f=resolveComponent("PanelBody");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-inner`)},[createVNode$1(d,mergeProps(__spreadProps$o(__spreadValues$I({},a.headerOperations),{icons:a.headerIcons}),{"prefix-cls":a.pickerPrefixCls,title:a.headerTitle}),null,16,["prefix-cls","title"]),createVNode$1(f,{mode:"year","prefix-cls":a.pickerPrefixCls,rows:a.rows,value:a.value,"range-values":a.rangeValues,"disabled-date":a.disabledDate,"is-same-time":a.isSameTime,"date-render":a.dateRender,onCellClick:a.onCellClick,onCellMouseEnter:a.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var YearPanel=_export_sfc(_sfc_main$27,[["render",_sfc_render$1V]]),__defProp$H=Object.defineProperty,__defProps$n=Object.defineProperties,__getOwnPropDescs$n=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$I=Object.getOwnPropertySymbols,__hasOwnProp$I=Object.prototype.hasOwnProperty,__propIsEnum$I=Object.prototype.propertyIsEnumerable,__defNormalProp$H=(a,s,l)=>s in a?__defProp$H(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$H=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$I.call(s,l)&&__defNormalProp$H(a,l,s[l]);if(__getOwnPropSymbols$I)for(var l of __getOwnPropSymbols$I(s))__propIsEnum$I.call(s,l)&&__defNormalProp$H(a,l,s[l]);return a},__spreadProps$n=(a,s)=>__defProps$n(a,__getOwnPropDescs$n(s));const _sfc_main$26=defineComponent({name:"QuarterPanel",components:{PanelHeader,PanelBody},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function},onHeaderLabelClick:{type:Function}},emits:["select","cell-mouse-enter"],setup(a,{emit:s}){const{headerValue:l}=toRefs(a),o=computed(()=>getPrefixCls("panel-quarter")),c=getPrefixCls("picker"),u=computed(()=>l.value.format("YYYY")),d=computed(()=>{const $=l.value.year();return[[1,2,3,4].map(x=>({label:`Q${x}`,value:dayjs(`${$}-${padStart((x-1)*3+1,2,"0")}-01`)}))]}),f=($,x)=>$.isSame(x,"month")||$.isSame(x,"year")&&Math.floor($.month()/3)===Math.floor(x.month()/3);function g($){s("select",$.value)}function y($){s("cell-mouse-enter",$.value)}return{prefixCls:o,pickerPrefixCls:c,headerTitle:u,rows:d,isSameTime:f,onCellClick:g,onCellMouseEnter:y}}});function _sfc_render$1U(a,s,l,o,c,u){const d=resolveComponent("PanelHeader"),f=resolveComponent("PanelBody");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-inner`)},[createVNode$1(d,mergeProps(__spreadProps$n(__spreadValues$H({},a.headerOperations),{icons:a.headerIcons}),{"prefix-cls":a.pickerPrefixCls,title:a.headerTitle,mode:"quarter",value:a.headerValue,"on-label-click":a.onHeaderLabelClick}),null,16,["prefix-cls","title","value","on-label-click"]),createVNode$1(f,{mode:"quarter","prefix-cls":a.pickerPrefixCls,rows:a.rows,value:a.value,"range-values":a.rangeValues,"disabled-date":a.disabledDate,"is-same-time":a.isSameTime,"date-render":a.dateRender,onCellClick:a.onCellClick,onCellMouseEnter:a.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var QuarterPanel=_export_sfc(_sfc_main$26,[["render",_sfc_render$1U]]);const _sfc_main$25=defineComponent({name:"IconLink",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-link`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$Z=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$K=createBaseVNode("path",{d:"m14.1 25.414-4.95 4.95a6 6 0 0 0 8.486 8.485l8.485-8.485a6 6 0 0 0 0-8.485m7.779.707 4.95-4.95a6 6 0 1 0-8.486-8.485l-8.485 8.485a6 6 0 0 0 0 8.485"},null,-1),_hoisted_3$F=[_hoisted_2$K];function _sfc_render$1T(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$F,14,_hoisted_1$Z)}var _IconLink=_export_sfc(_sfc_main$25,[["render",_sfc_render$1T]]);const IconLink=Object.assign(_IconLink,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconLink.name,_IconLink)}}),_sfc_main$24=defineComponent({name:"Link",components:{IconLink,IconLoading},props:{href:String,status:{type:String,default:"normal"},hoverable:{type:Boolean,default:!0},icon:Boolean,loading:Boolean,disabled:Boolean},emits:{click:a=>!0},setup(a,{slots:s,emit:l}){const o=getPrefixCls("link"),c=hasPropOrSlot(a,s,"icon"),u=f=>{if(a.disabled||a.loading){f.preventDefault();return}l("click",f)};return{cls:computed(()=>[o,`${o}-status-${a.status}`,{[`${o}-disabled`]:a.disabled,[`${o}-loading`]:a.loading,[`${o}-hoverless`]:!a.hoverable,[`${o}-with-icon`]:a.loading||c.value}]),prefixCls:o,showIcon:c,handleClick:u}}}),_hoisted_1$Y=["href"];function _sfc_render$1S(a,s,l,o,c,u){const d=resolveComponent("icon-loading"),f=resolveComponent("icon-link");return openBlock(),createElementBlock("a",{href:a.disabled?void 0:a.href,class:normalizeClass(a.cls),onClick:s[0]||(s[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[a.loading||a.showIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[a.loading?(openBlock(),createBlock(d,{key:0})):renderSlot(a.$slots,"icon",{key:1},()=>[createVNode$1(f)])],2)):createCommentVNode("v-if",!0),renderSlot(a.$slots,"default")],10,_hoisted_1$Y)}var _Link=_export_sfc(_sfc_main$24,[["render",_sfc_render$1S]]);const Link=Object.assign(_Link,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Link.name,_Link)}}),_sfc_main$23=defineComponent({name:"PanelFooter",components:{Link,Button},props:{prefixCls:{type:String,required:!0},showTodayBtn:{type:Boolean},showConfirmBtn:{type:Boolean},confirmBtnDisabled:{type:Boolean}},emits:["today-btn-click","confirm-btn-click"],setup(a,{emit:s}){return{datePickerT:useDatePickerTransform$1(),onTodayClick:()=>{s("today-btn-click")},onConfirmBtnClick:()=>{s("confirm-btn-click")}}}});function _sfc_render$1R(a,s,l,o,c,u){const d=resolveComponent("Link"),f=resolveComponent("Button");return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-footer`)},[a.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-footer-extra-wrapper`)},[renderSlot(a.$slots,"extra")],2)):createCommentVNode("v-if",!0),a.showTodayBtn?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-footer-now-wrapper`)},[createVNode$1(d,{onClick:a.onTodayClick},{default:withCtx(()=>[createTextVNode(toDisplayString(a.datePickerT("datePicker.today")),1)]),_:1},8,["onClick"])],2)):createCommentVNode("v-if",!0),a.$slots.btn||a.showConfirmBtn?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-footer-btn-wrapper`)},[renderSlot(a.$slots,"btn"),a.showConfirmBtn?(openBlock(),createBlock(f,{key:0,class:normalizeClass(`${a.prefixCls}-btn-confirm`),type:"primary",size:"mini",disabled:a.confirmBtnDisabled,onClick:a.onConfirmBtnClick},{default:withCtx(()=>[createTextVNode(toDisplayString(a.datePickerT("datePicker.ok")),1)]),_:1},8,["class","disabled","onClick"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],2)}var PanelFooter=_export_sfc(_sfc_main$23,[["render",_sfc_render$1R]]);function usePanelSpan(a){const{mode:s}=toRefs(a),l=computed(()=>({date:1,week:1,year:10*12,quarter:12,month:12})[s.value]),o=computed(()=>["year"].includes(s.value)?10*12:12);return{span:l,superSpan:o}}function useHeaderValue(a){const{mode:s,value:l,defaultValue:o,selectedValue:c,format:u,onChange:d}=toRefs(a),f=computed(()=>s?.value||"date"),{span:g,superSpan:y}=usePanelSpan(reactive({mode:f})),$=(na,aa)=>{const ia=f.value==="date"||f.value==="week"?"M":"y";return na.isSame(aa,ia)},x=computed(()=>getDayjsValue(l?.value,u.value)),N=computed(()=>getDayjsValue(o?.value,u.value)),R=ref(N.value||getNow()),j=computed(()=>x.value||R.value),ne=na=>{na&&(R.value=na)},se=(na,aa=!0)=>{var ia;na&&(aa&&!$(j.value,na)&&((ia=d?.value)==null||ia.call(d,na)),ne(na))};c?.value&&ne(c.value),watch(()=>c?.value,na=>{se(na)});function ce(){return c?.value||N.value||getNow()}function fe(na=!0){const aa=ce();na?se(aa):ne(aa)}const ea=computed(()=>g.value!==y.value),ta=computed(()=>({onSuperPrev:()=>{se(methods.subtract(j.value,y.value,"M"))},onPrev:ea.value?()=>{se(methods.subtract(j.value,g.value,"M"))}:void 0,onNext:ea.value?()=>{se(methods.add(j.value,g.value,"M"))}:void 0,onSuperNext:()=>{se(methods.add(j.value,y.value,"M"))}}));return{headerValue:j,setHeaderValue:se,headerOperations:ta,resetHeaderValue:fe,getDefaultLocalValue:ce}}const _sfc_main$22=defineComponent({name:"DatePikerPanel",components:{DatePanel,PanelShortcuts,PanelFooter,WeekPanel,MonthPanel,YearPanel,QuarterPanel,RenderFunction},props:{mode:{type:String},headerMode:{type:String},prefixCls:{type:String,required:!0},value:{type:Object},headerValue:{type:Object,required:!0},timePickerValue:{type:Object},showTime:{type:Boolean},showConfirmBtn:{type:Boolean},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},format:{type:String,required:!0},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},timePickerProps:{type:Object},extra:{type:Function},dateRender:{type:Function},hideTrigger:{type:Boolean},confirmBtnDisabled:{type:Boolean},showNowBtn:{type:Boolean},headerIcons:{type:Object,default:()=>({})},headerOperations:{type:Object},abbreviation:{type:Boolean}},emits:["cell-click","time-picker-select","shortcut-click","shortcut-mouse-enter","shortcut-mouse-leave","confirm","today-btn-click","header-label-click","header-select","month-header-click"],setup(a,{emit:s}){const{prefixCls:l,shortcuts:o,shortcutsPosition:c,format:u,value:d,disabledDate:f,hideTrigger:g,showNowBtn:y,dateRender:$,showConfirmBtn:x,headerValue:N,headerIcons:R,headerOperations:j,headerMode:ne}=toRefs(a),se=computed(()=>!!(o.value&&o.value.length)),ce=computed(()=>y.value&&x.value&&!se.value),fe=computed(()=>ce.value||se.value),ea=computed(()=>fe.value&&c.value==="left"),ta=computed(()=>fe.value&&c.value==="right"),na=computed(()=>fe.value&&c.value==="bottom"),aa=computed(()=>[`${l.value}-container`,{[`${l.value}-container-panel-only`]:g.value,[`${l.value}-container-shortcuts-placement-left`]:ea.value,[`${l.value}-container-shortcuts-placement-right`]:ta.value}]),ia=computed(()=>d?.value||getNow()),{headerValue:sa,setHeaderValue:ra,headerOperations:la}=useHeaderValue(reactive({mode:ne,format:u}));watch(N,Ea=>{ra(Ea)});function oa(Ea){const{value:Ca}=Ea;return getDayjsValue(isFunction$1(Ca)?Ca():Ca,Ea.format||u.value)}function ca(Ea){s("shortcut-click",oa(Ea),Ea)}function pa(Ea){s("shortcut-mouse-enter",oa(Ea))}function ua(Ea){s("shortcut-mouse-leave",oa(Ea))}function da(Ea){s("cell-click",Ea)}function ha(Ea){s("time-picker-select",Ea)}function ga(){s("today-btn-click",getNow())}function fa(){s("confirm")}function ma(Ea){s("header-label-click",Ea)}function va(Ea){s("header-select",Ea)}function ka(){s("month-header-click")}const ya=reactive({prefixCls:l,shortcuts:o,showNowBtn:ce,onItemClick:ca,onItemMouseEnter:pa,onItemMouseLeave:ua,onNowClick:ga}),ba=reactive({value:d,headerValue:N,headerIcons:R,headerOperations:j,disabledDate:f,dateRender:$,onSelect:da,onHeaderLabelClick:ma});return{classNames:aa,showShortcutsInLeft:ea,showShortcutsInRight:ta,showShortcutsInBottom:na,shortcutsProps:ya,commonPanelProps:ba,footerValue:ia,onTodayBtnClick:ga,onConfirmBtnClick:fa,onTimePickerSelect:ha,onHeaderPanelSelect:va,headerPanelHeaderValue:sa,headerPanelHeaderOperations:la,onMonthHeaderLabelClick:ka}}});function _sfc_render$1Q(a,s,l,o,c,u){const d=resolveComponent("PanelShortcuts"),f=resolveComponent("YearPanel"),g=resolveComponent("MonthPanel"),y=resolveComponent("WeekPanel"),$=resolveComponent("QuarterPanel"),x=resolveComponent("DatePanel"),N=resolveComponent("RenderFunction"),R=resolveComponent("PanelFooter");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.showShortcutsInLeft?(openBlock(),createBlock(d,normalizeProps(mergeProps({key:0},a.shortcutsProps)),null,16)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-panel-wrapper`)},[a.headerMode?(openBlock(),createElementBlock(Fragment,{key:0},[a.headerMode==="year"?(openBlock(),createBlock(f,{key:0,"header-value":a.headerPanelHeaderValue,"header-icons":a.headerIcons,"header-operations":a.headerPanelHeaderOperations,onSelect:a.onHeaderPanelSelect},null,8,["header-value","header-icons","header-operations","onSelect"])):a.headerMode==="month"?(openBlock(),createBlock(g,{key:1,"header-value":a.headerPanelHeaderValue,"header-icons":a.headerIcons,"header-operations":a.headerPanelHeaderOperations,abbreviation:a.abbreviation,onSelect:a.onHeaderPanelSelect,onHeaderLabelClick:a.onMonthHeaderLabelClick},null,8,["header-value","header-icons","header-operations","abbreviation","onSelect","onHeaderLabelClick"])):createCommentVNode("v-if",!0)],2112)):(openBlock(),createElementBlock(Fragment,{key:1},[a.mode==="week"?(openBlock(),createBlock(y,mergeProps({key:0},a.commonPanelProps,{"day-start-of-week":a.dayStartOfWeek}),null,16,["day-start-of-week"])):a.mode==="month"?(openBlock(),createBlock(g,mergeProps({key:1,abbreviation:a.abbreviation},a.commonPanelProps),null,16,["abbreviation"])):a.mode==="year"?(openBlock(),createBlock(f,normalizeProps(mergeProps({key:2},a.commonPanelProps)),null,16)):a.mode==="quarter"?(openBlock(),createBlock($,normalizeProps(mergeProps({key:3},a.commonPanelProps)),null,16)):(openBlock(),createBlock(x,mergeProps({key:4},a.commonPanelProps,{mode:"date","show-time":a.showTime,"time-picker-props":a.timePickerProps,"day-start-of-week":a.dayStartOfWeek,"footer-value":a.footerValue,"time-picker-value":a.timePickerValue,"disabled-time":a.disabledTime,onTimePickerSelect:a.onTimePickerSelect}),null,16,["show-time","time-picker-props","day-start-of-week","footer-value","time-picker-value","disabled-time","onTimePickerSelect"])),createVNode$1(R,{"prefix-cls":a.prefixCls,"show-today-btn":a.showNowBtn&&!(a.showConfirmBtn||a.showShortcutsInBottom),"show-confirm-btn":a.showConfirmBtn,"confirm-btn-disabled":a.confirmBtnDisabled,onTodayBtnClick:a.onTodayBtnClick,onConfirmBtnClick:a.onConfirmBtnClick},createSlots({_:2},[a.extra?{name:"extra",fn:withCtx(()=>[a.extra?(openBlock(),createBlock(N,{key:0,"render-func":a.extra},null,8,["render-func"])):createCommentVNode("v-if",!0)])}:void 0,a.showShortcutsInBottom?{name:"btn",fn:withCtx(()=>[createVNode$1(d,normalizeProps(guardReactiveProps(a.shortcutsProps)),null,16)])}:void 0]),1032,["prefix-cls","show-today-btn","show-confirm-btn","confirm-btn-disabled","onTodayBtnClick","onConfirmBtnClick"])],64))],2),a.showShortcutsInRight?(openBlock(),createBlock(d,normalizeProps(mergeProps({key:1},a.shortcutsProps)),null,16)):createCommentVNode("v-if",!0)],2)}var PickerPanel=_export_sfc(_sfc_main$22,[["render",_sfc_render$1Q]]);function getDefaultFormat(a="date",s=!1){switch(a){case"date":return s?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";case"week":return"gggg-wo";case"quarter":return"YYYY-[Q]Q";default:return"YYYY-MM-DD"}}function getDefaultValueFormat(a="date",s=!1){switch(a){case"date":return s?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";case"week":return"YYYY-MM-DD";case"quarter":return"YYYY-MM";default:return"YYYY-MM-DD"}}function useFormat(a){const{format:s,mode:l,showTime:o,valueFormat:c}=toRefs(a),u=computed(()=>!isFunction$1(s?.value)&&s?.value||getDefaultFormat(l?.value,o?.value)),d=computed(()=>c?.value||getDefaultValueFormat(l?.value,o?.value)),f=computed(()=>["timestamp","Date"].includes(d.value)?u.value:d.value);return{format:u,valueFormat:d,parseValueFormat:f}}function useIsDisabledDate(a){const{mode:s,showTime:l,disabledDate:o,disabledTime:c,isRange:u}=toRefs(a),d=computed(()=>s?.value==="date"&&l?.value),f=computed(()=>($,x)=>{if(!o?.value)return!1;const N=getDateValue$1($);return u?.value?o.value(N,x):o.value(N)}),g=($,x)=>(x?.()||[]).includes($),y=computed(()=>($,x)=>{if(!d.value||!c?.value)return!1;const N=getDateValue$1($),R=u?.value?c.value(N,x):c.value(N);return g($.hour(),R.disabledHours)||g($.minute(),R.disabledMinutes)||g($.second(),R.disabledSeconds)});return function(x,N){return x&&(f.value(x,N||"start")||y.value(x,N||"start"))}}const getValueByPath=(a,s)=>{if(!a||!s)return;s=s.replace(/\[(\w+)\]/g,".$1");const l=s.split(".");if(l.length===0)return;let o=a;for(let c=0;c<l.length;c++){if(!isObject$1(o)&&!isArray$1(o)||!l[c])return;if(c!==l.length-1)o=o[l[c]];else return o[l[c]]}},setValueByPath=(a,s,l,{addPath:o}={})=>{if(!a||!s)return;s=s.replace(/\[(\w+)\]/g,".$1");const c=s.split(".");if(c.length===0)return;let u=a;for(let d=0;d<c.length;d++){if(!isObject$1(u)&&!isArray$1(u)||!c[d])return;d!==c.length-1?(o&&isUndefined(u[c[d]])&&(u[c[d]]={}),u=u[c[d]]):u[c[d]]=l}};function useDatePickerTransform(a){const{locale:s}=toRefs(a),{locale:l,t:o}=useI18n();dayjs.locale(l.value.toLowerCase());const c=(u,...d)=>{const f=u.startsWith("datePicker.")?u.split(".").slice(1).join("."):u;return getValueByPath(s?.value||{},f)||o(u,...d)};return provide(PickerInjectionKey,{datePickerT:c}),c}function useTimePickerValue(a){const{timePickerProps:s,selectedValue:l}=toRefs(a),o=computed(()=>{var x;return(x=s?.value)==null?void 0:x.format}),c=computed(()=>{var x;return!!((x=s?.value)!=null&&x.use12Hours)}),{format:u}=useTimeFormat(reactive({format:o,use12Hours:c})),d=computed(()=>{var x;return getDayjsValue((x=s?.value)==null?void 0:x.defaultValue,u.value)}),f=()=>l?.value||d.value||getNow(),g=ref(f());function y(x){x&&(g.value=x)}function $(){g.value=f()}return watch(l,x=>{y(x)}),[g,y,$]}function getReturnValue(a,s){return s==="timestamp"?a.toDate().getTime():s==="Date"?a.toDate():a.format(s)}function useReturnValue(a){const{format:s}=toRefs(a);return l=>getReturnValue(l,s.value)}function getReturnRangeValue(a,s){return a.map(l=>l?getReturnValue(l,s):void 0)}var __defProp$G=Object.defineProperty,__defProps$m=Object.defineProperties,__getOwnPropDescs$m=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$H=Object.getOwnPropertySymbols,__hasOwnProp$H=Object.prototype.hasOwnProperty,__propIsEnum$H=Object.prototype.propertyIsEnumerable,__defNormalProp$G=(a,s,l)=>s in a?__defProp$G(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$G=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$H.call(s,l)&&__defNormalProp$G(a,l,s[l]);if(__getOwnPropSymbols$H)for(var l of __getOwnPropSymbols$H(s))__propIsEnum$H.call(s,l)&&__defNormalProp$G(a,l,s[l]);return a},__spreadProps$m=(a,s)=>__defProps$m(a,__getOwnPropDescs$m(s));const _sfc_main$21=defineComponent({name:"Picker",components:{DateInput,Trigger,PickerPanel,IconCalendar},inheritAttrs:!1,props:{locale:{type:Object},hideTrigger:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},size:{type:String},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean},placeholder:{type:String},disabled:{type:Boolean},disabledDate:{type:Function},disabledTime:{type:Function},pickerValue:{type:[Object,String,Number]},defaultPickerValue:{type:[Object,String,Number]},popupContainer:{type:[String,Object]},mode:{type:String,default:"date"},format:{type:[String,Function]},valueFormat:{type:String},previewShortcut:{type:Boolean,default:!0},showConfirmBtn:{type:Boolean},showTime:{type:Boolean},timePickerProps:{type:Object},showNowBtn:{type:Boolean,default:!0},dayStartOfWeek:{type:Number,default:0},modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},disabledInput:{type:Boolean,default:!1},abbreviation:{type:Boolean,default:!0}},emits:{change:(a,s,l)=>!0,"update:modelValue":a=>!0,select:(a,s,l)=>!0,"popup-visible-change":a=>!0,"update:popupVisible":a=>!0,ok:(a,s,l)=>!0,clear:()=>!0,"select-shortcut":a=>!0,"picker-value-change":(a,s,l)=>!0,"update:pickerValue":a=>!0},setup(a,{emit:s,slots:l}){const{mode:o,modelValue:c,defaultValue:u,format:d,valueFormat:f,placeholder:g,popupVisible:y,defaultPopupVisible:$,disabled:x,showTime:N,timePickerProps:R,disabledDate:j,disabledTime:ne,readonly:se,locale:ce,pickerValue:fe,defaultPickerValue:ea,dayStartOfWeek:ta,previewShortcut:na,showConfirmBtn:aa}=toRefs(a),{locale:ia}=useI18n();watchEffect(()=>{initializeDateLocale(ia.value,ta.value)});const{mergedDisabled:sa,eventHandlers:ra}=useFormItem({disabled:x}),la=useDatePickerTransform(reactive({locale:ce})),oa=getPrefixCls("picker"),ca=ref(),pa=computed(()=>g?.value||{date:la("datePicker.placeholder.date"),month:la("datePicker.placeholder.month"),year:la("datePicker.placeholder.year"),week:la("datePicker.placeholder.week"),quarter:la("datePicker.placeholder.quarter")}[o.value]||la("datePicker.placeholder.date")),{format:ua,valueFormat:da,parseValueFormat:ha}=useFormat(reactive({format:d,mode:o,showTime:N,valueFormat:f})),ga=computed(()=>d&&isFunction$1(d.value)?Ka=>{var cn;return(cn=d.value)==null?void 0:cn.call(d,getDateValue$1(Ka))}:ua.value),fa=useReturnValue(reactive({format:da})),ma=useIsDisabledDate(reactive({mode:o,disabledDate:j,disabledTime:ne,showTime:N})),va=computed(()=>N.value||aa.value),ka=computed(()=>va.value&&(!Ta.value||ma(Ta.value))),ya=computed(()=>o.value==="date"&&N.value),{value:ba,setValue:Ea}=usePickerState(reactive({modelValue:c,defaultValue:u,format:ha})),[Ca,$a]=useState(),[Pa,Da]=useState(),Ta=computed(()=>{var Ka;return(Ka=Ca.value)!=null?Ka:ba.value}),Ba=computed(()=>{var Ka,cn;return(cn=(Ka=Pa.value)!=null?Ka:Ca.value)!=null?cn:ba.value}),[wa,Oa]=useState(),[Aa,Sa]=useMergeState($.value,reactive({value:y})),Fa=Ka=>{Aa.value!==Ka&&(Sa(Ka),s("popup-visible-change",Ka),s("update:popupVisible",Ka))},{headerValue:Ia,setHeaderValue:Ga,headerOperations:Ya,resetHeaderValue:Va}=useHeaderValue(reactive({mode:o,value:fe,defaultValue:ea,selectedValue:Ba,format:ha,onChange:Ka=>{const cn=fa(Ka),_n=getFormattedValue(Ka,ha.value),Bn=getDateValue$1(Ka);s("picker-value-change",cn,Bn,_n),s("update:pickerValue",cn)}})),[La,,Za]=useTimePickerValue(reactive({timePickerProps:R,selectedValue:Ba})),rn=computed(()=>!se.value&&!isFunction$1(ga.value)),pn=ref();watch(Aa,Ka=>{$a(void 0),Da(void 0),pn.value=void 0,Ka&&(Va(),Za()),Ka||Oa(void 0)});function fn(Ka,cn){var _n,Bn;const Ln=Ka?fa(Ka):void 0,jn=getFormattedValue(Ka,ha.value),Yn=getDateValue$1(Ka);isValueChange(Ka,ba.value)&&(s("update:modelValue",Ln),s("change",Ln,Yn,jn),(Bn=(_n=ra.value)==null?void 0:_n.onChange)==null||Bn.call(_n)),cn&&s("ok",Ln,Yn,jn)}function mn(Ka,cn,_n){ma(Ka)||(fn(Ka,_n),Ea(Ka),$a(void 0),Da(void 0),Oa(void 0),pn.value=void 0,isBoolean$1(cn)&&Fa(cn))}function Dn(Ka,cn){if($a(Ka),Da(void 0),Oa(void 0),pn.value=void 0,cn){const _n=Ka?fa(Ka):void 0,Bn=getFormattedValue(Ka,ha.value),Ln=getDateValue$1(Ka);s("select",_n,Ln,Bn)}}function Ra(Ka){ca.value&&ca.value.focus&&ca.value.focus(Ka)}function Na(Ka,cn){return!ya.value&&!R.value?Ka:mergeValueWithTime(getNow(),Ka,cn)}function za(Ka){sa.value||Fa(Ka)}function an(Ka){Ka.stopPropagation(),mn(void 0),s("clear")}function bn(){var Ka,cn;(cn=(Ka=ra.value)==null?void 0:Ka.onBlur)==null||cn.call(Ka)}function En(Ka){Fa(!0);const cn=Ka.target.value;if(Oa(cn),!isValidInputValue(cn,ua.value))return;const _n=dayjs(cn,ua.value);ma(_n)||(va.value?Dn(_n):mn(_n,!0))}function Pn(){mn(Ba.value,!1)}function Wa(Ka){va.value?Dn(Ka,!0):mn(Ka,!1)}function Ua(Ka){const cn=Na(Ka,La.value);Wa(cn)}function Qa(Ka){const cn=Na(Ba.value||getNow(),Ka);Wa(cn)}function nn(){mn(Ba.value,!1,!0)}function ln(){a.disabledInput&&Ra()}let dn;onUnmounted(()=>{clearTimeout(dn)});function wn(Ka){clearTimeout(dn),Da(Ka),Oa(void 0)}function xn(){clearTimeout(dn),dn=setTimeout(()=>{Da(void 0)},100)}function Zn(Ka,cn){s("select-shortcut",cn),mn(Ka,!1)}function Kn(Ka){pn.value=Ka}function qn(){pn.value="year"}function Fn(Ka){let cn=Ia.value;if(cn=cn.set("year",Ka.year()),pn.value==="month"&&(cn=cn.set("month",Ka.month())),Ga(cn),o.value==="quarter"||o.value==="month"){pn.value=void 0;return}pn.value=pn.value==="year"?"month":void 0}const Un=computed(()=>__spreadProps$m(__spreadValues$G({format:ua.value},omit(R?.value||{},["defaultValue"])),{visible:Aa.value})),zn=computed(()=>__spreadProps$m(__spreadValues$G({},pick(a,["mode","shortcuts","shortcutsPosition","dayStartOfWeek","disabledDate","disabledTime","showTime","hideTrigger","abbreviation"])),{showNowBtn:a.showNowBtn&&o.value==="date",prefixCls:oa,format:ha.value,value:Ba.value,visible:Aa.value,showConfirmBtn:va.value,confirmBtnDisabled:ka.value,timePickerProps:Un.value,extra:l.extra,dateRender:l.cell,headerValue:Ia.value,headerIcons:{prev:l["icon-prev"],prevDouble:l["icon-prev-double"],next:l["icon-next"],nextDouble:l["icon-next-double"]},headerOperations:Ya.value,timePickerValue:La.value,headerMode:pn.value,onCellClick:Ua,onTimePickerSelect:Qa,onConfirm:nn,onShortcutClick:Zn,onShortcutMouseEnter:na.value?wn:void 0,onShortcutMouseLeave:na.value?xn:void 0,onTodayBtnClick:Wa,onHeaderLabelClick:Kn,onHeaderSelect:Fn,onMonthHeaderClick:qn}));return{prefixCls:oa,refInput:ca,panelProps:zn,panelValue:Ba,inputValue:wa,selectedValue:ba,inputFormat:ga,computedPlaceholder:pa,panelVisible:Aa,inputEditable:rn,needConfirm:va,mergedDisabled:sa,onPanelVisibleChange:za,onInputClear:an,onInputChange:En,onInputPressEnter:Pn,onInputBlur:bn,onPanelClick:ln}}});function _sfc_render$1P(a,s,l,o,c,u){const d=resolveComponent("IconCalendar"),f=resolveComponent("DateInput"),g=resolveComponent("PickerPanel"),y=resolveComponent("Trigger");return a.hideTrigger?(openBlock(),createBlock(g,normalizeProps(mergeProps({key:1},__spreadValues$G(__spreadValues$G({},a.$attrs),a.panelProps))),null,16)):(openBlock(),createBlock(y,mergeProps({key:0,trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,"popup-offset":4},a.triggerProps,{position:a.position,disabled:a.mergedDisabled||a.readonly,"prevent-focus":!0,"popup-visible":a.panelVisible,"unmount-on-close":a.unmountOnClose,"popup-container":a.popupContainer,onPopupVisibleChange:a.onPanelVisibleChange}),{content:withCtx(()=>[createVNode$1(g,mergeProps(a.panelProps,{onClick:a.onPanelClick}),null,16,["onClick"])]),default:withCtx(()=>[renderSlot(a.$slots,"default",{},()=>[createVNode$1(f,mergeProps(a.$attrs,{ref:"refInput",size:a.size,focused:a.panelVisible,visible:a.panelVisible,error:a.error,disabled:a.mergedDisabled,readonly:!a.inputEditable||a.disabledInput,"allow-clear":a.allowClear&&!a.readonly,placeholder:a.computedPlaceholder,"input-value":a.inputValue,value:a.needConfirm?a.panelValue:a.selectedValue,format:a.inputFormat,onClear:a.onInputClear,onChange:a.onInputChange,onPressEnter:a.onInputPressEnter,onBlur:a.onInputBlur}),createSlots({"suffix-icon":withCtx(()=>[renderSlot(a.$slots,"suffix-icon",{},()=>[createVNode$1(d)])]),_:2},[a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0]),1040,["size","focused","visible","error","disabled","readonly","allow-clear","placeholder","input-value","value","format","onClear","onChange","onPressEnter","onBlur"])])]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"]))}var Picker=_export_sfc(_sfc_main$21,[["render",_sfc_render$1P]]),_DatePicker=defineComponent({name:"DatePicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:[String,Function]},dayStartOfWeek:{type:Number,default:0},showTime:{type:Boolean},timePickerProps:{type:Object},disabled:{type:Boolean},disabledDate:{type:Function},disabledTime:{type:Function},showNowBtn:{type:Boolean,default:!0}},setup(a,{attrs:s,slots:l}){return()=>createVNode$1(Picker,mergeProps(a,s,{mode:"date"}),l)}}),WeekPicker=defineComponent({name:"WeekPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"gggg-wo"},valueFormat:{type:String,default:"YYYY-MM-DD"},dayStartOfWeek:{type:Number,default:0}},setup(a,{attrs:s,slots:l}){return()=>createVNode$1(Picker,mergeProps(a,s,{mode:"week"}),l)}}),MonthPicker=defineComponent({name:"MonthPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY-MM"}},setup(a,{attrs:s,slots:l}){return()=>createVNode$1(Picker,mergeProps(a,s,{mode:"month"}),l)}}),YearPicker=defineComponent({name:"YearPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY"}},setup(a,{attrs:s,slots:l}){return()=>createVNode$1(Picker,mergeProps(a,s,{mode:"year"}),l)}}),QuarterPicker=defineComponent({name:"QuarterPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY-[Q]Q"},valueFormat:{type:String,default:"YYYY-MM"}},setup(a,{attrs:s,slots:l}){return()=>createVNode$1(Picker,mergeProps(a,s,{mode:"quarter"}),l)}});function useRangePickerState(a){const{modelValue:s,defaultValue:l,format:o}=toRefs(a),c=computed(()=>getDayjsValue(normalizeRangeValue(s.value),o.value)),u=computed(()=>getDayjsValue(normalizeRangeValue(l.value),o.value)),[d,f]=useState(isUndefined(c.value)?isUndefined(u.value)?[]:u.value:c.value);return watch(c,()=>{isUndefined(c.value)&&f([])}),{value:computed(()=>c.value||d.value),setValue:f}}function useRangeHeaderValue(a){const{startHeaderMode:s,endHeaderMode:l,mode:o,value:c,defaultValue:u,selectedValue:d,format:f,onChange:g}=toRefs(a),y=computed(()=>["date","week"].includes(o.value)),$=computed(()=>y.value?"M":"y"),x=(Ca,$a)=>Ca.isSame($a,$.value),{span:N,superSpan:R}=usePanelSpan(reactive({mode:o})),j=computed(()=>s?.value||o.value),ne=computed(()=>l?.value||o.value),se=computed(()=>{var Ca;return(Ca=c.value)==null?void 0:Ca[0]}),ce=computed(()=>{var Ca;return(Ca=c.value)==null?void 0:Ca[1]}),fe=computed(()=>{var Ca;return(Ca=u.value)==null?void 0:Ca[0]}),ea=computed(()=>{var Ca;return(Ca=u.value)==null?void 0:Ca[1]}),ta=Ca=>{g?.value&&g.value(Ca)},{headerValue:na,setHeaderValue:aa,headerOperations:ia,getDefaultLocalValue:sa}=useHeaderValue(reactive({mode:j,value:se,defaultValue:fe,selectedValue:void 0,format:f,onChange:Ca=>{ta([Ca,ra.value])}})),{headerValue:ra,setHeaderValue:la,headerOperations:oa,getDefaultLocalValue:ca}=useHeaderValue(reactive({mode:ne,value:ce,defaultValue:ea,selectedValue:void 0,format:f,onChange:Ca=>{ta([na.value,Ca])}})),pa=Ca=>{const $a=x(na.value,Ca[0]),Pa=x(ra.value,Ca[1]);aa(Ca[0],!1),la(Ca[1],!1),(!$a||!Pa)&&g?.value&&g?.value(Ca)};function ua(Ca){let[$a,Pa]=getSortedDayjsArray(Ca);const Da=methods.add($a,N.value,"M");return Pa.isBefore(Da,$.value)&&(Pa=Da),[$a,Pa]}function da(){var Ca,$a;let Pa=(Ca=d.value)==null?void 0:Ca[0],Da=($a=d.value)==null?void 0:$a[1];return Pa&&Da&&([Pa,Da]=getSortedDayjsArray([Pa,Da])),[Pa,Da]}const[ha,ga]=da(),[fa,ma]=ua([ha||na.value,ga||ra.value]);aa(fa,!1),la(ma,!1);const va=()=>{const Ca=sa(),$a=ca();nextTick(()=>{const[Pa,Da]=da(),[Ta,Ba]=ua([Pa||Ca,Da||$a]);pa([Ta,Ba])})},ka=computed(()=>methods.add(na.value,N.value,"M").isBefore(ra.value,$.value)),ya=computed(()=>methods.add(na.value,R.value,"M").isBefore(ra.value,$.value)),ba=computed(()=>{const Ca=["onSuperPrev"];return y.value&&Ca.push("onPrev"),ka.value&&y&&Ca.push("onNext"),ya.value&&Ca.push("onSuperNext"),pick(ia.value,Ca)}),Ea=computed(()=>{const Ca=["onSuperNext"];return y.value&&Ca.push("onNext"),ka.value&&y.value&&Ca.push("onPrev"),ya.value&&Ca.push("onSuperPrev"),pick(oa.value,Ca)});return{startHeaderValue:na,endHeaderValue:ra,startHeaderOperations:ba,endHeaderOperations:Ea,setHeaderValue:pa,resetHeaderValue:va}}const _sfc_main$20=defineComponent({name:"DateInputRange",components:{IconHover,IconClose,FeedbackIcon},props:{size:{type:String},focused:{type:Boolean},focusedIndex:{type:Number},error:{type:Boolean},disabled:{type:[Boolean,Array],default:!1},readonly:{type:Boolean},allowClear:{type:Boolean},placeholder:{type:Array,default:()=>[]},inputValue:{type:Array},value:{type:Array,default:()=>[]},format:{type:[String,Function],required:!0}},emits:["focused-index-change","update:focusedIndex","change","clear","press-enter"],setup(a,{emit:s,slots:l}){const{error:o,focused:c,disabled:u,size:d,value:f,format:g,focusedIndex:y,inputValue:$}=toRefs(a),{mergedSize:x,mergedDisabled:N,mergedError:R,feedback:j}=useFormItem({size:d,error:o}),{mergedSize:ne}=useSize$1(x),se=ref(),ce=ref(),fe=ha=>N.value?N.value:isArray$1(u.value)?u.value[ha]:u.value,ea=computed(()=>fe(0)),ta=computed(()=>fe(1)),na=getPrefixCls("picker"),aa=computed(()=>[na,`${na}-range`,`${na}-size-${ne.value}`,{[`${na}-focused`]:c.value,[`${na}-disabled`]:ea.value&&ta.value,[`${na}-error`]:R.value,[`${na}-has-prefix`]:l.prefix}]);function ia(ha){return[`${na}-input`,{[`${na}-input-active`]:ha===y?.value}]}function sa(ha){var ga,fa;if($?.value)return(ga=$?.value)==null?void 0:ga[ha];const ma=(fa=f?.value)==null?void 0:fa[ha];if(ma&&isDayjs(ma))return isFunction$1(g.value)?g.value(ma):ma.format(g.value)}const ra=computed(()=>sa(0)),la=computed(()=>sa(1));function oa(ha){s("focused-index-change",ha),s("update:focusedIndex",ha)}function ca(ha){ha.stopPropagation(),s("change",ha)}function pa(){s("press-enter")}function ua(ha){ha.preventDefault()}function da(ha){s("clear",ha)}return{prefixCls:na,classNames:aa,refInput0:se,refInput1:ce,disabled0:ea,disabled1:ta,mergedDisabled:N,getDisabled:fe,getInputWrapClassName:ia,displayValue0:ra,displayValue1:la,changeFocusedInput:oa,onChange:ca,onPressEnter:pa,onPressTab:ua,onClear:da,feedback:j}},methods:{focus(a){const s=isNumber$1(a)?a:this.focusedIndex,l=s===0?this.refInput0:this.refInput1;!isUndefined(s)&&!this.getDisabled(s)&&l&&l.focus&&l.focus()},blur(){const a=this.focusedIndex===0?this.refInput0:this.refInput1;a&&a.blur&&a.blur()}}}),_hoisted_1$X=["disabled","placeholder","value"],_hoisted_2$J=createTextVNode(" - "),_hoisted_3$E=["disabled","placeholder","value"];function _sfc_render$1O(a,s,l,o,c,u){const d=resolveComponent("IconClose"),f=resolveComponent("IconHover"),g=resolveComponent("FeedbackIcon");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.$slots.prefix?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-prefix`)},[renderSlot(a.$slots,"prefix")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(a.getInputWrapClassName(0))},[createBaseVNode("input",mergeProps({ref:"refInput0",disabled:a.disabled0,placeholder:a.placeholder[0],value:a.displayValue0},a.readonly?{readonly:!0}:{},{onInput:s[0]||(s[0]=(...y)=>a.onChange&&a.onChange(...y)),onKeydown:[s[1]||(s[1]=withKeys((...y)=>a.onPressEnter&&a.onPressEnter(...y),["enter"])),s[2]||(s[2]=withKeys((...y)=>a.onPressTab&&a.onPressTab(...y),["tab"]))],onClick:s[3]||(s[3]=()=>a.changeFocusedInput(0))}),null,16,_hoisted_1$X)],2),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-separator`)},[renderSlot(a.$slots,"separator",{},()=>[_hoisted_2$J])],2),createBaseVNode("div",{class:normalizeClass(a.getInputWrapClassName(1))},[createBaseVNode("input",mergeProps({ref:"refInput1",disabled:a.disabled1,placeholder:a.placeholder[1],value:a.displayValue1},a.readonly?{readonly:!0}:{},{onInput:s[4]||(s[4]=(...y)=>a.onChange&&a.onChange(...y)),onKeydown:[s[5]||(s[5]=withKeys((...y)=>a.onPressEnter&&a.onPressEnter(...y),["enter"])),s[6]||(s[6]=withKeys((...y)=>a.onPressTab&&a.onPressTab(...y),["tab"]))],onClick:s[7]||(s[7]=()=>a.changeFocusedInput(1))}),null,16,_hoisted_3$E)],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-suffix`)},[a.allowClear&&!a.mergedDisabled&&a.value.length===2?(openBlock(),createBlock(f,{key:0,prefix:a.prefixCls,class:normalizeClass(`${a.prefixCls}-clear-icon`),onClick:a.onClear},{default:withCtx(()=>[createVNode$1(d)]),_:1},8,["prefix","class","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-suffix-icon`)},[renderSlot(a.$slots,"suffix-icon")],2),a.feedback?(openBlock(),createBlock(g,{key:1,type:a.feedback},null,8,["type"])):createCommentVNode("v-if",!0)],2)],2)}var DateRangeInput=_export_sfc(_sfc_main$20,[["render",_sfc_render$1O]]),__defProp$F=Object.defineProperty,__defProps$l=Object.defineProperties,__getOwnPropDescs$l=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$G=Object.getOwnPropertySymbols,__hasOwnProp$G=Object.prototype.hasOwnProperty,__propIsEnum$G=Object.prototype.propertyIsEnumerable,__defNormalProp$F=(a,s,l)=>s in a?__defProp$F(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$F=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$G.call(s,l)&&__defNormalProp$F(a,l,s[l]);if(__getOwnPropSymbols$G)for(var l of __getOwnPropSymbols$G(s))__propIsEnum$G.call(s,l)&&__defNormalProp$F(a,l,s[l]);return a},__spreadProps$l=(a,s)=>__defProps$l(a,__getOwnPropDescs$l(s));const _sfc_main$1$=defineComponent({name:"DateRangePikerPanel",components:{PanelShortcuts,PanelFooter,RenderFunction,DatePanel,WeekPanel,MonthPanel,YearPanel,QuarterPanel},props:{mode:{type:String,default:"date"},value:{type:Array,default:()=>[]},footerValue:{type:Array},timePickerValue:{type:Array},showTime:{type:Boolean},showConfirmBtn:{type:Boolean},prefixCls:{type:String,required:!0},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},format:{type:String,required:!0},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},timePickerProps:{type:Object},extra:{type:Function},dateRender:{type:Function},hideTrigger:{type:Boolean},startHeaderProps:{type:Object,default:()=>({})},endHeaderProps:{type:Object,default:()=>({})},confirmBtnDisabled:{type:Boolean},disabled:{type:Array,default:()=>[!1,!1]},visible:{type:Boolean},startHeaderMode:{type:String},endHeaderMode:{type:String},abbreviation:{type:Boolean}},emits:["cell-click","cell-mouse-enter","time-picker-select","shortcut-click","shortcut-mouse-enter","shortcut-mouse-leave","confirm","start-header-label-click","end-header-label-click","start-header-select","end-header-select"],setup(a,{emit:s}){const{prefixCls:l,shortcuts:o,shortcutsPosition:c,format:u,hideTrigger:d,value:f,disabledDate:g,disabledTime:y,startHeaderProps:$,endHeaderProps:x,dateRender:N,visible:R,startHeaderMode:j,endHeaderMode:ne}=toRefs(a),se=computed(()=>isArray$1(o.value)&&o.value.length),ce=computed(()=>[`${l.value}-range-container`,{[`${l.value}-range-container-panel-only`]:d.value,[`${l.value}-range-container-shortcuts-placement-left`]:se.value&&c.value==="left",[`${l.value}-range-container-shortcuts-placement-right`]:se.value&&c.value==="right"}]),fe=ref("date");watch(R,(ya,ba)=>{ya&&!ba&&(fe.value="date")});function ea(ya){return getDayjsValue(normalizeRangeValue(isFunction$1(ya.value)?ya.value():ya.value),ya.format||u.value)}function ta(ya){s("shortcut-click",ea(ya),ya)}function na(ya){s("shortcut-mouse-enter",ea(ya))}function aa(ya){s("shortcut-mouse-leave",ea(ya))}function ia(ya){s("cell-click",ya)}function sa(ya){s("cell-mouse-enter",ya)}function ra(){s("confirm")}function la(ya){s("time-picker-select",ya,"start")}function oa(ya){s("time-picker-select",ya,"end")}function ca(ya){s("start-header-label-click",ya)}function pa(ya){s("end-header-label-click",ya)}function ua(ya){s("start-header-select",ya)}function da(ya){s("end-header-select",ya)}function ha(ya){return isFunction$1(g?.value)?ba=>{var Ea;return((Ea=g?.value)==null?void 0:Ea.call(g,ba,ya===0?"start":"end"))||!1}:void 0}function ga(ya){return isFunction$1(y?.value)?ba=>{var Ea;return((Ea=y?.value)==null?void 0:Ea.call(y,ba,ya===0?"start":"end"))||!1}:void 0}function fa(ya){return isFunction$1(N?.value)?ba=>{var Ea;const Ca=__spreadProps$l(__spreadValues$F({},ba),{type:ya===0?"start":"end"});return(Ea=N?.value)==null?void 0:Ea.call(N,Ca)}:void 0}const ma=reactive({prefixCls:l,shortcuts:o,onItemClick:ta,onItemMouseEnter:na,onItemMouseLeave:aa}),va=computed(()=>__spreadProps$l(__spreadValues$F({},$.value),{rangeValues:f.value,disabledDate:ha(0),dateRender:fa(0),onSelect:j.value?ua:ia,onCellMouseEnter:sa,onHeaderLabelClick:ca})),ka=computed(()=>__spreadProps$l(__spreadValues$F({},x.value),{rangeValues:f.value,disabledDate:ha(1),dateRender:fa(1),onSelect:ne.value?da:ia,onCellMouseEnter:sa,onHeaderLabelClick:pa}));return{pick,classNames:ce,showShortcuts:se,shortcutsProps:ma,startPanelProps:va,endPanelProps:ka,getDisabledTimeFunc:ga,onConfirmBtnClick:ra,currentDateView:fe,onStartTimePickerSelect:la,onEndTimePickerSelect:oa,onStartHeaderPanelSelect:ua,onEndHeaderPanelSelect:da}}});function _sfc_render$1N(a,s,l,o,c,u){const d=resolveComponent("PanelShortcuts"),f=resolveComponent("YearPanel"),g=resolveComponent("MonthPanel"),y=resolveComponent("WeekPanel"),$=resolveComponent("QuarterPanel"),x=resolveComponent("DatePanel"),N=resolveComponent("RenderFunction"),R=resolveComponent("PanelFooter");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.showShortcuts&&a.shortcutsPosition==="left"?(openBlock(),createBlock(d,normalizeProps(mergeProps({key:0},a.shortcutsProps)),null,16)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-range-panel-wrapper`)},[createCommentVNode(" panel "),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-range`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-range-wrapper`)},[a.startHeaderMode||a.endHeaderMode?(openBlock(),createElementBlock(Fragment,{key:0},[a.startHeaderMode==="year"?(openBlock(),createBlock(f,normalizeProps(mergeProps({key:0},a.startPanelProps)),null,16)):createCommentVNode("v-if",!0),a.endHeaderMode==="year"?(openBlock(),createBlock(f,normalizeProps(mergeProps({key:1},a.endPanelProps)),null,16)):a.startHeaderMode==="month"?(openBlock(),createBlock(g,mergeProps({key:2},a.startPanelProps,{abbreviation:a.abbreviation}),null,16,["abbreviation"])):a.endHeaderMode==="month"?(openBlock(),createBlock(g,mergeProps({key:3},a.endPanelProps,{abbreviation:a.abbreviation}),null,16,["abbreviation"])):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" week "),a.mode==="week"?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode$1(y,mergeProps(a.startPanelProps,{"day-start-of-week":a.dayStartOfWeek}),null,16,["day-start-of-week"]),createVNode$1(y,mergeProps(a.endPanelProps,{"day-start-of-week":a.dayStartOfWeek}),null,16,["day-start-of-week"])],64)):a.mode==="month"?(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" month "),createVNode$1(g,mergeProps(a.startPanelProps,{abbreviation:a.abbreviation}),null,16,["abbreviation"]),createVNode$1(g,mergeProps(a.endPanelProps,{abbreviation:a.abbreviation}),null,16,["abbreviation"])],64)):a.mode==="year"?(openBlock(),createElementBlock(Fragment,{key:2},[createCommentVNode(" year "),createVNode$1(f,normalizeProps(guardReactiveProps(a.startPanelProps)),null,16),createVNode$1(f,normalizeProps(guardReactiveProps(a.endPanelProps)),null,16)],64)):a.mode==="quarter"?(openBlock(),createElementBlock(Fragment,{key:3},[createCommentVNode(" quarter "),createVNode$1($,normalizeProps(guardReactiveProps(a.startPanelProps)),null,16),createVNode$1($,normalizeProps(guardReactiveProps(a.endPanelProps)),null,16)],64)):(openBlock(),createElementBlock(Fragment,{key:4},[createCommentVNode(" date "),createVNode$1(x,mergeProps({currentView:a.currentDateView,"onUpdate:currentView":s[0]||(s[0]=j=>a.currentDateView=j)},a.startPanelProps,{"is-range":"",value:a.value&&a.value[0],"footer-value":a.footerValue&&a.footerValue[0],"time-picker-value":a.timePickerValue&&a.timePickerValue[0],"day-start-of-week":a.dayStartOfWeek,"show-time":a.showTime,"time-picker-props":a.timePickerProps,"disabled-time":a.getDisabledTimeFunc(0),disabled:a.disabled[0],onTimePickerSelect:a.onStartTimePickerSelect}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled","onTimePickerSelect"]),createVNode$1(x,mergeProps({currentView:a.currentDateView,"onUpdate:currentView":s[1]||(s[1]=j=>a.currentDateView=j)},a.endPanelProps,{"is-range":"",value:a.value&&a.value[1],"footer-value":a.footerValue&&a.footerValue[1],"time-picker-value":a.timePickerValue&&a.timePickerValue[1],"day-start-of-week":a.dayStartOfWeek,"show-time":a.showTime,"time-picker-props":a.timePickerProps,"disabled-time":a.getDisabledTimeFunc(1),disabled:a.disabled[1],onTimePickerSelect:a.onEndTimePickerSelect}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled","onTimePickerSelect"])],64))],2112))],2)],2),createCommentVNode(" footer "),createVNode$1(R,{"prefix-cls":a.prefixCls,"show-today-btn":!1,"show-confirm-btn":a.showConfirmBtn,"confirm-btn-disabled":a.confirmBtnDisabled,onConfirmBtnClick:a.onConfirmBtnClick},createSlots({_:2},[a.extra||a.$slots.extra?{name:"extra",fn:withCtx(()=>[a.$slots.extra?renderSlot(a.$slots,"extra",{key:0}):(openBlock(),createBlock(N,{key:1,"render-func":a.extra},null,8,["render-func"]))])}:void 0,a.showShortcuts&&a.shortcutsPosition==="bottom"?{name:"btn",fn:withCtx(()=>[createVNode$1(d,normalizeProps(guardReactiveProps(a.shortcutsProps)),null,16)])}:void 0]),1032,["prefix-cls","show-confirm-btn","confirm-btn-disabled","onConfirmBtnClick"])],2),a.showShortcuts&&a.shortcutsPosition==="right"?(openBlock(),createBlock(d,normalizeProps(mergeProps({key:1},a.shortcutsProps)),null,16)):createCommentVNode("v-if",!0)],2)}var RangePickerPanel=_export_sfc(_sfc_main$1$,[["render",_sfc_render$1N]]),__defProp$E=Object.defineProperty,__defProps$k=Object.defineProperties,__getOwnPropDescs$k=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$F=Object.getOwnPropertySymbols,__hasOwnProp$F=Object.prototype.hasOwnProperty,__propIsEnum$F=Object.prototype.propertyIsEnumerable,__defNormalProp$E=(a,s,l)=>s in a?__defProp$E(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$E=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$F.call(s,l)&&__defNormalProp$E(a,l,s[l]);if(__getOwnPropSymbols$F)for(var l of __getOwnPropSymbols$F(s))__propIsEnum$F.call(s,l)&&__defNormalProp$E(a,l,s[l]);return a},__spreadProps$k=(a,s)=>__defProps$k(a,__getOwnPropDescs$k(s));function useRangeTimePickerValue(a){const{timePickerProps:s,selectedValue:l}=toRefs(a),o=computed(()=>{var ce;return(ce=l?.value)==null?void 0:ce[0]}),c=computed(()=>{var ce;return(ce=l?.value)==null?void 0:ce[1]}),u=computed(()=>{var ce;return(ce=s?.value)==null?void 0:ce.defaultValue}),d=computed(()=>isArray$1(u.value)?__spreadProps$k(__spreadValues$E({},s?.value),{defaultValue:u.value[0]}):s?.value),f=computed(()=>isArray$1(u.value)?__spreadProps$k(__spreadValues$E({},s?.value),{defaultValue:u.value[1]}):s?.value),[g,y,$]=useTimePickerValue(reactive({timePickerProps:d,selectedValue:o})),[x,N,R]=useTimePickerValue(reactive({timePickerProps:f,selectedValue:c})),j=computed(()=>[g.value,x.value]);function ne(ce){ce&&(y(ce[0]),N(ce[1]))}function se(){$(),R()}return[j,ne,se]}var __defProp$D=Object.defineProperty,__defProps$j=Object.defineProperties,__getOwnPropDescs$j=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$E=Object.getOwnPropertySymbols,__hasOwnProp$E=Object.prototype.hasOwnProperty,__propIsEnum$E=Object.prototype.propertyIsEnumerable,__defNormalProp$D=(a,s,l)=>s in a?__defProp$D(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$D=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$E.call(s,l)&&__defNormalProp$D(a,l,s[l]);if(__getOwnPropSymbols$E)for(var l of __getOwnPropSymbols$E(s))__propIsEnum$E.call(s,l)&&__defNormalProp$D(a,l,s[l]);return a},__spreadProps$j=(a,s)=>__defProps$j(a,__getOwnPropDescs$j(s));const _sfc_main$1_=defineComponent({name:"RangePicker",components:{RangePickerPanel,DateRangeInput,Trigger,IconCalendar},inheritAttrs:!1,props:{mode:{type:String,default:"date"},modelValue:{type:Array},defaultValue:{type:Array},pickerValue:{type:Array},defaultPickerValue:{type:Array},disabled:{type:[Boolean,Array],default:!1},dayStartOfWeek:{type:Number,default:0},format:{type:String},valueFormat:{type:String},showTime:{type:Boolean},timePickerProps:{type:Object},placeholder:{type:Array},disabledDate:{type:Function},disabledTime:{type:Function},separator:{type:String},exchangeTime:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},locale:{type:Object},hideTrigger:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},size:{type:String},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},triggerProps:{type:Object},unmountOnClose:{type:Boolean},previewShortcut:{type:Boolean,default:!0},showConfirmBtn:{type:Boolean},disabledInput:{type:Boolean,default:!1},abbreviation:{type:Boolean,default:!0}},emits:{change:(a,s,l)=>!0,"update:modelValue":a=>!0,select:(a,s,l)=>!0,"popup-visible-change":a=>!0,"update:popupVisible":a=>!0,ok:(a,s,l)=>!0,clear:()=>!0,"select-shortcut":a=>!0,"picker-value-change":(a,s,l)=>!0,"update:pickerValue":a=>!0},setup(a,{emit:s,slots:l}){const{mode:o,showTime:c,format:u,modelValue:d,defaultValue:f,popupVisible:g,defaultPopupVisible:y,placeholder:$,timePickerProps:x,disabled:N,disabledDate:R,disabledTime:j,locale:ne,pickerValue:se,defaultPickerValue:ce,valueFormat:fe,size:ea,error:ta,dayStartOfWeek:na,exchangeTime:aa,previewShortcut:ia,showConfirmBtn:sa}=toRefs(a),{locale:ra}=useI18n(),la=inject(configProviderInjectionKey,void 0);watchEffect(()=>{initializeDateLocale(ra.value,na.value)});const oa=computed(()=>{var Ha;return!(!aa.value||!((Ha=la?.exchangeTime)==null||Ha))}),{mergedSize:ca,mergedDisabled:pa,mergedError:ua,eventHandlers:da}=useFormItem({size:ea,error:ta}),ha=useDatePickerTransform(reactive({locale:ne})),ga=getPrefixCls("picker"),fa=computed(()=>$?.value||{date:ha("datePicker.rangePlaceholder.date"),month:ha("datePicker.rangePlaceholder.month"),year:ha("datePicker.rangePlaceholder.year"),week:ha("datePicker.rangePlaceholder.week"),quarter:ha("datePicker.rangePlaceholder.quarter")}[o.value]||ha("datePicker.rangePlaceholder.date")),{format:ma,valueFormat:va,parseValueFormat:ka}=useFormat(reactive({mode:o,format:u,showTime:c,valueFormat:fe})),ya=computed(()=>{const Ha=N.value===!0||pa.value||isArray$1(N.value)&&N.value[0]===!0,Ja=N.value===!0||pa.value||isArray$1(N.value)&&N.value[1]===!0;return[Ha,Ja]}),ba=computed(()=>ya.value[0]&&ya.value[1]);function Ea(Ha=0){return ya.value[Ha]?Ha^1:Ha}const Ca=ref(),$a=ref(Ea()),Pa=computed(()=>{const Ha=$a.value,Ja=Ha^1;return ya.value[Ja]?Ha:Ja}),Da=computed(()=>ya.value[$a.value^1]),{value:Ta,setValue:Ba}=useRangePickerState(reactive({modelValue:d,defaultValue:f,format:ka})),[wa,Oa]=useState(),[Aa,Sa]=useState(),Fa=computed(()=>{var Ha;return(Ha=wa.value)!=null?Ha:Ta.value}),Ia=computed(()=>{var Ha,Ja;return(Ja=(Ha=Aa.value)!=null?Ha:wa.value)!=null?Ja:Ta.value}),[Ga,Ya]=useState(),Va=ref(),La=ref(),[Za,rn]=useMergeState(y.value,reactive({value:g})),pn=Ha=>{Za.value!==Ha&&(rn(Ha),s("popup-visible-change",Ha),s("update:popupVisible",Ha))},{startHeaderValue:fn,endHeaderValue:mn,startHeaderOperations:Dn,endHeaderOperations:Ra,resetHeaderValue:Na,setHeaderValue:za}=useRangeHeaderValue(reactive({mode:o,startHeaderMode:Va,endHeaderMode:La,value:se,defaultValue:ce,selectedValue:Ia,format:ka,onChange:Ha=>{const Ja=getReturnRangeValue(Ha,va.value),gn=getFormattedValue(Ha,ka.value),yn=getDateValue$1(Ha);s("picker-value-change",Ja,yn,gn),s("update:pickerValue",Ja)}}));function an(Ha){Va.value=Ha}function bn(Ha){La.value=Ha}function En(Ha){let Ja=fn.value;Ja=Ja.set("year",Ha.year()),Va.value==="month"&&(Ja=Ja.set("month",Ha.month())),za([Ja,mn.value]),Va.value=void 0}function Pn(Ha){let Ja=mn.value;Ja=Ja.set("year",Ha.year()),La.value==="month"&&(Ja=Ja.set("month",Ha.month())),za([fn.value,Ja]),La.value=void 0}const Wa=ref([Ia.value[0]||getNow(),Ia.value[1]||getNow()]);watch(Ia,()=>{const[Ha,Ja]=Ia.value;Wa.value[0]=Ha||Wa.value[0],Wa.value[1]=Ja||Wa.value[1]});const[Ua,Qa,nn]=useRangeTimePickerValue(reactive({timePickerProps:x,selectedValue:Ia})),ln=computed(()=>o.value==="date"&&c.value),dn=computed(()=>ln.value||x.value),wn=useIsDisabledDate(reactive({mode:o,isRange:!0,showTime:c,disabledDate:R,disabledTime:j})),xn=computed(()=>ln.value||sa.value),Zn=computed(()=>xn.value&&(!isCompleteRangeValue(Fa.value)||wn(Fa.value[0],"start")||wn(Fa.value[1],"end")));watch(Za,Ha=>{Va.value=void 0,La.value=void 0,Oa(void 0),Sa(void 0),Ha&&(Na(),nn(),$a.value=Ea($a.value),nextTick(()=>cn($a.value))),Ha||Ya(void 0)}),watch($a,()=>{a.disabledInput&&(cn($a.value),Ya(void 0))});function Kn(Ha,Ja){var gn,yn;const An=Ha?getReturnRangeValue(Ha,va.value):void 0,Tn=getFormattedValue(Ha,ka.value),Jn=getDateValue$1(Ha);isValueChange(Ha,Ta.value)&&(s("update:modelValue",An),s("change",An,Jn,Tn),(yn=(gn=da.value)==null?void 0:gn.onChange)==null||yn.call(gn)),Ja&&s("ok",An,Jn,Tn)}function qn(Ha){let Ja=getSortedDayjsArray(Ha);return dn.value&&!oa.value&&(Ja=[_n(Ja[0],Ha[0]),_n(Ja[1],Ha[1])]),Ja}function Fn(Ha,Ja,gn){if(wn(Ha?.[0],"start")||wn(Ha?.[1],"end"))return;let yn=Ha?[...Ha]:void 0;isCompleteRangeValue(yn)&&(yn=qn(yn)),Kn(yn,gn),Ba(yn||[]),Oa(void 0),Sa(void 0),Ya(void 0),Va.value=void 0,La.value=void 0,isBoolean$1(Ja)&&pn(Ja)}function Un(Ha){const Ja=getReturnRangeValue(Ha,va.value),gn=getFormattedValue(Ha,ka.value),yn=getDateValue$1(Ha);s("select",Ja,yn,gn)}function zn(Ha,Ja){const{emitSelect:gn=!1,updateHeader:yn=!1}=Ja||{};let An=[...Ha];isCompleteRangeValue(An)&&(An=qn(An)),Oa(An),Sa(void 0),Ya(void 0),Va.value=void 0,La.value=void 0,gn&&Un(An),yn&&Na()}function Ka(Ha,Ja){const{updateHeader:gn=!1}=Ja||{};Sa(Ha),Ya(void 0),gn&&Na()}function cn(Ha){Ca.value&&Ca.value.focus&&Ca.value.focus(Ha)}function _n(Ha,Ja){return dn.value?mergeValueWithTime(getNow(),Ha,Ja):Ha}function Bn(Ha){pn(Ha)}function Ln(Ha){if(wa.value&&Ia.value[Pa.value]&&(!xn.value||!isCompleteRangeValue(wa.value))){const Ja=[...Ia.value],gn=_n(Ha,Ua.value[$a.value]);Ja[$a.value]=gn,Ka(Ja)}}function jn(Ha=!1){return Da.value?[...Ta.value]:wa.value?Ha||!isCompleteRangeValue(wa.value)?[...wa.value]:[]:Ha?[...Ta.value]:[]}function Yn(Ha){const Ja=jn(),gn=_n(Ha,Ua.value[$a.value]);Ja[$a.value]=gn,Un(Ja),!xn.value&&isCompleteRangeValue(Ja)?Fn(Ja,!1):(zn(Ja),isCompleteRangeValue(Ja)?$a.value=0:$a.value=Pa.value)}function li(Ha,Ja){const gn=Ja==="start"?0:1,yn=_n(Ua.value[gn],Ha),An=[...Ua.value];An[gn]=yn,Qa(An);const Tn=jn(!0);Tn[gn]&&(Tn[gn]=yn,zn(Tn,{emitSelect:!0}))}let Hn;onUnmounted(()=>{clearTimeout(Hn)});function ai(Ha){clearTimeout(Hn),Ka(Ha,{updateHeader:!0})}function Vn(){clearTimeout(Hn),Hn=setTimeout(()=>{Sa(void 0),Ya(void 0),Na()},100)}function Wn(Ha,Ja){s("select-shortcut",Ja),Fn(Ha,!1)}function Gn(){Fn(Ia.value,!1,!0)}function oi(Ha){Ha.stopPropagation(),Fn(void 0),s("clear")}function pi(Ha){pn(!0);const Ja=Ha.target.value;if(!Ja){Ya(void 0);return}const gn=getFormattedValue(Ia.value,ma.value),yn=isArray$1(Ga.value)?[...Ga.value]:gn||[];if(yn[$a.value]=Ja,Ya(yn),!isValidInputValue(Ja,ma.value))return;const An=dayjs(Ja,ma.value);if(wn(An,$a.value===0?"start":"end"))return;const Tn=isArray$1(Ia.value)?[...Ia.value]:[];Tn[$a.value]=An,zn(Tn,{updateHeader:!0})}function ci(){isValidRangeValue(Ia.value)?Fn(Ia.value,!1):$a.value=Pa.value}const Cn=computed(()=>__spreadProps$j(__spreadValues$D({format:ma.value},omit(x?.value||{},["defaultValue"])),{visible:Za.value})),Xn=computed(()=>({prev:l["icon-prev"],prevDouble:l["icon-prev-double"],next:l["icon-next"],nextDouble:l["icon-next-double"]})),ui=reactive({headerValue:fn,headerOperations:Dn,headerIcons:Xn}),ni=reactive({headerValue:mn,headerOperations:Ra,headerIcons:Xn}),In=computed(()=>__spreadProps$j(__spreadValues$D({},pick(a,["mode","showTime","shortcuts","shortcutsPosition","dayStartOfWeek","disabledDate","disabledTime","hideTrigger","abbreviation"])),{prefixCls:ga,format:ka.value,value:Ia.value,showConfirmBtn:xn.value,confirmBtnDisabled:Zn.value,timePickerValue:Ua.value,timePickerProps:Cn.value,extra:l.extra,dateRender:l.cell,startHeaderProps:ui,endHeaderProps:ni,footerValue:Wa.value,disabled:ya.value,visible:Za.value,onCellClick:Yn,onCellMouseEnter:Ln,onShortcutClick:Wn,onShortcutMouseEnter:ia.value?ai:void 0,onShortcutMouseLeave:ia.value?Vn:void 0,onConfirm:Gn,onTimePickerSelect:li,startHeaderMode:Va.value,endHeaderMode:La.value,onStartHeaderLabelClick:an,onEndHeaderLabelClick:bn,onStartHeaderSelect:En,onEndHeaderSelect:Pn}));return{prefixCls:ga,refInput:Ca,computedFormat:ma,computedPlaceholder:fa,panelVisible:Za,panelValue:Ia,inputValue:Ga,focusedIndex:$a,triggerDisabled:ba,mergedSize:ca,mergedError:ua,onPanelVisibleChange:Bn,onInputClear:oi,onInputChange:pi,onInputPressEnter:ci,rangePanelProps:In}}});function _sfc_render$1M(a,s,l,o,c,u){const d=resolveComponent("IconCalendar"),f=resolveComponent("DateRangeInput"),g=resolveComponent("RangePickerPanel"),y=resolveComponent("Trigger");return a.hideTrigger?(openBlock(),createBlock(g,normalizeProps(mergeProps({key:1},__spreadValues$D(__spreadValues$D({},a.$attrs),a.rangePanelProps))),null,16)):(openBlock(),createBlock(y,mergeProps({key:0,trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,"popup-offset":4},a.triggerProps,{"unmount-on-close":a.unmountOnClose,position:a.position,disabled:a.triggerDisabled||a.readonly,"popup-visible":a.panelVisible,"popup-container":a.popupContainer,onPopupVisibleChange:a.onPanelVisibleChange}),{content:withCtx(()=>[createVNode$1(g,normalizeProps(guardReactiveProps(a.rangePanelProps)),null,16)]),default:withCtx(()=>[renderSlot(a.$slots,"default",{},()=>[createVNode$1(f,mergeProps({ref:"refInput"},a.$attrs,{focusedIndex:a.focusedIndex,"onUpdate:focusedIndex":s[0]||(s[0]=$=>a.focusedIndex=$),size:a.size,focused:a.panelVisible,visible:a.panelVisible,error:a.error,disabled:a.disabled,readonly:a.readonly||a.disabledInput,"allow-clear":a.allowClear&&!a.readonly,placeholder:a.computedPlaceholder,"input-value":a.inputValue,value:a.panelValue,format:a.computedFormat,onClear:a.onInputClear,onChange:a.onInputChange,onPressEnter:a.onInputPressEnter}),createSlots({"suffix-icon":withCtx(()=>[renderSlot(a.$slots,"suffix-icon",{},()=>[createVNode$1(d)])]),separator:withCtx(()=>[renderSlot(a.$slots,"separator",{},()=>[createTextVNode(toDisplayString(a.separator||"-"),1)])]),_:2},[a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0]),1040,["focusedIndex","size","focused","visible","error","disabled","readonly","allow-clear","placeholder","input-value","value","format","onClear","onChange","onPressEnter"])])]),_:3},16,["unmount-on-close","position","disabled","popup-visible","popup-container","onPopupVisibleChange"]))}var RangePicker=_export_sfc(_sfc_main$1_,[["render",_sfc_render$1M]]);const DatePicker=Object.assign(_DatePicker,{WeekPicker,MonthPicker,YearPicker,QuarterPicker,RangePicker,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_DatePicker.name,_DatePicker),a.component(l+YearPicker.name,YearPicker),a.component(l+QuarterPicker.name,QuarterPicker),a.component(l+MonthPicker.name,MonthPicker),a.component(l+WeekPicker.name,WeekPicker),a.component(l+RangePicker.name,RangePicker)}}),descriptionsInjectionKey=Symbol("ArcoDescriptions");var __defProp$C=Object.defineProperty,__defProps$i=Object.defineProperties,__getOwnPropDescs$i=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$D=Object.getOwnPropertySymbols,__hasOwnProp$D=Object.prototype.hasOwnProperty,__propIsEnum$D=Object.prototype.propertyIsEnumerable,__defNormalProp$C=(a,s,l)=>s in a?__defProp$C(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$C=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$D.call(s,l)&&__defNormalProp$C(a,l,s[l]);if(__getOwnPropSymbols$D)for(var l of __getOwnPropSymbols$D(s))__propIsEnum$D.call(s,l)&&__defNormalProp$C(a,l,s[l]);return a},__spreadProps$i=(a,s)=>__defProps$i(a,__getOwnPropDescs$i(s));const responsiveArray=["xxl","xl","lg","md","sm","xs"],responsiveMap={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};let subscribers=[],subUid=-1,screens={};const responsiveObserve={matchHandlers:{},dispatch(a,s){return screens=a,subscribers.length<1?!1:(subscribers.forEach(l=>{l.func(screens,s)}),!0)},subscribe(a){subscribers.length===0&&this.register();const s=(++subUid).toString();return subscribers.push({token:s,func:a}),a(screens,null),s},unsubscribe(a){subscribers=subscribers.filter(s=>s.token!==a),subscribers.length===0&&this.unregister()},unregister(){Object.keys(responsiveMap).forEach(a=>{const s=responsiveMap[a];if(!s)return;const l=this.matchHandlers[s];l&&l.mql&&l.listener&&(l.mql.removeEventListener?l.mql.removeEventListener("change",l.listener):l.mql.removeListener(l.listener))})},register(){Object.keys(responsiveMap).forEach(a=>{const s=responsiveMap[a];if(!s)return;const l=({matches:c})=>{this.dispatch(__spreadProps$i(__spreadValues$C({},screens),{[a]:c}),a)},o=window.matchMedia(s);o.addEventListener?o.addEventListener("change",l):o.addListener(l),this.matchHandlers[s]={mql:o,listener:l},l(o)})}};function isResponsiveValue(a){return isObject$1(a)}function useResponsiveState(a,s,l=!1){const o=ref({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),c=computed(()=>{let d=s;if(isResponsiveValue(a.value))for(let f=0;f<responsiveArray.length;f++){const g=responsiveArray[f];if((o.value[g]||g==="xs"&&l)&&a.value[g]!==void 0){d=a.value[g];break}}else d=a.value;return d});let u="";return onMounted(()=>{u=responsiveObserve.subscribe(d=>{isResponsiveValue(a.value)&&(o.value=d)})}),onUnmounted(()=>{u&&responsiveObserve.unsubscribe(u)}),c}var __defProp$B=Object.defineProperty,__getOwnPropSymbols$C=Object.getOwnPropertySymbols,__hasOwnProp$C=Object.prototype.hasOwnProperty,__propIsEnum$C=Object.prototype.propertyIsEnumerable,__defNormalProp$B=(a,s,l)=>s in a?__defProp$B(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$B=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$C.call(s,l)&&__defNormalProp$B(a,l,s[l]);if(__getOwnPropSymbols$C)for(var l of __getOwnPropSymbols$C(s))__propIsEnum$C.call(s,l)&&__defNormalProp$B(a,l,s[l]);return a};const getTotalSpan=a=>a?a.reduce((s,l)=>s+l.span,0):0;var _Descriptions=defineComponent({name:"Descriptions",props:{data:{type:Array,default:()=>[]},column:{type:[Number,Object],default:3},title:String,layout:{type:String,default:"horizontal"},align:{type:[String,Object],default:"left"},size:{type:String},bordered:{type:Boolean,default:!1},labelStyle:{type:Object},valueStyle:{type:Object},tableLayout:{type:String,default:"auto"}},setup(a,{slots:s}){const{column:l,size:o}=toRefs(a),c=getPrefixCls("descriptions"),{mergedSize:u}=useSize$1(o),d=useResponsiveState(l,3,!0),f=computed(()=>{var ra;return(ra=isObject$1(a.align)?a.align.label:a.align)!=null?ra:"left"}),g=computed(()=>{var ra;return(ra=isObject$1(a.align)?a.align.value:a.align)!=null?ra:"left"}),y=computed(()=>__spreadValues$B({textAlign:f.value},a.labelStyle)),$=computed(()=>__spreadValues$B({textAlign:g.value},a.valueStyle)),x=reactive(new Map),N=computed(()=>Array.from(x.values()).sort((ra,la)=>ra.index-la.index).map(ra=>ra.span));provide(descriptionsInjectionKey,reactive({addItem:(ra,la)=>{x.set(ra,la)},removeItem:ra=>{x.delete(ra)}}));const ne=ra=>{const la=[];if(ra.forEach((oa,ca)=>{var pa;const ua=Math.min((pa=isVNode(oa)?N.value[ca]:oa.span)!=null?pa:1,d.value),da=la[la.length-1],ha=getTotalSpan(da);ha===0||ha>=d.value?la.push([{data:oa,span:ua}]):da.push({data:oa,span:ua+ha>d.value?d.value-ha:ua})}),la.length){const oa=la[la.length-1],ca=getTotalSpan(oa);ca<d.value&&(oa[oa.length-1].span+=d.value-ca)}return la},se=computed(()=>{var ra;return ne((ra=a.data)!=null?ra:[])}),ce=(ra,la)=>{var oa,ca,pa,ua,da;return isVNode(ra)?isSlotsChildren(ra,ra.children)&&((ca=(oa=ra.children).label)==null?void 0:ca.call(oa))||((pa=ra.props)==null?void 0:pa.label):(da=(ua=s.label)==null?void 0:ua.call(s,{label:ra.label,index:la,data:ra}))!=null?da:isFunction$1(ra.label)?ra.label():ra.label},fe=(ra,la)=>{var oa,ca;return isVNode(ra)?ra:(ca=(oa=s.value)==null?void 0:oa.call(s,{value:ra.value,index:la,data:ra}))!=null?ca:isFunction$1(ra.value)?ra.value():ra.value},ea=ra=>createVNode$1(Fragment,null,[createVNode$1("tr",{class:`${c}-row`},[ra.map((la,oa)=>createVNode$1("td",{key:`label-${oa}`,class:[`${c}-item-label`,`${c}-item-label-block`],style:y.value,colspan:la.span},[ce(la.data,oa)]))]),createVNode$1("tr",{class:`${c}-row`},[ra.map((la,oa)=>createVNode$1("td",{key:`value-${oa}`,class:[`${c}-item-value`,`${c}-item-value-block`],style:$.value,colspan:la.span},[fe(la.data,oa)]))])]),ta=(ra,la)=>createVNode$1("tr",{class:`${c}-row`,key:`tr-${la}`},[ra.map(oa=>createVNode$1(Fragment,null,[createVNode$1("td",{class:[`${c}-item-label`,`${c}-item-label-block`],style:y.value},[ce(oa.data,la)]),createVNode$1("td",{class:[`${c}-item-value`,`${c}-item-value-block`],style:$.value,colspan:oa.span*2-1},[fe(oa.data,la)])]))]),na=(ra,la)=>createVNode$1("tr",{class:`${c}-row`,key:`inline-${la}`},[ra.map((oa,ca)=>createVNode$1("td",{key:`item-${ca}`,class:`${c}-item`,colspan:oa.span},[createVNode$1("div",{class:[`${c}-item-label`,`${c}-item-label-inline`],style:y.value},[ce(oa.data,ca)]),createVNode$1("div",{class:[`${c}-item-value`,`${c}-item-value-inline`],style:$.value},[fe(oa.data,ca)])]))]),aa=(ra,la)=>["inline-horizontal","inline-vertical"].includes(a.layout)?na(ra,la):a.layout==="vertical"?ea(ra):ta(ra,la),ia=computed(()=>[c,`${c}-layout-${a.layout}`,`${c}-size-${u.value}`,{[`${c}-border`]:a.bordered},{[`${c}-table-layout-fixed`]:a.tableLayout==="fixed"}]),sa=()=>{var ra,la;const oa=(la=(ra=s.title)==null?void 0:ra.call(s))!=null?la:a.title;return oa?createVNode$1("div",{class:`${c}-title`},[oa]):null};return()=>{const ra=s.default?ne(getAllElements(s.default())):se.value;return createVNode$1("div",{class:ia.value},[sa(),createVNode$1("div",{class:`${c}-body`},[createVNode$1("table",{class:`${c}-table`},[createVNode$1("tbody",null,[ra.map((la,oa)=>aa(la,oa))])])])])}}});const _sfc_main$1Z=defineComponent({name:"DescriptionsItem",props:{span:{type:Number,default:1},label:String},setup(a){var s;const{span:l}=toRefs(a),o=getPrefixCls("descriptions"),c=inject(descriptionsInjectionKey,{}),u=getCurrentInstance(),d=ref(),{computedIndex:f}=useIndex({itemRef:d,selector:`.${o}-item-value`,parentClassName:`${o}-table`}),g=reactive({index:f.value,span:l.value});u?.uid&&((s=c.addItem)==null||s.call(c,u.uid,g));const y=()=>{var $;const x=(($=u?.proxy)==null?void 0:$.$el).parentElement;x&&x!==d.value&&(d.value=x)};return onMounted(()=>y()),onUpdated(()=>y()),onBeforeUnmount(()=>{var $;u?.uid&&(($=c.removeItem)==null||$.call(c,u.uid))}),{prefixCls:o}}});function _sfc_render$1L(a,s,l,o,c,u){return renderSlot(a.$slots,"default")}var DescriptionsItem=_export_sfc(_sfc_main$1Z,[["render",_sfc_render$1L]]);const Descriptions=Object.assign(_Descriptions,{DescriptionsItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Descriptions.name,_Descriptions),a.component(l+DescriptionsItem.name,DescriptionsItem)}});var _Divider=defineComponent({name:"Divider",props:{direction:{type:String,default:"horizontal"},orientation:{type:String,default:"center"},type:{type:String},size:{type:Number},margin:{type:[Number,String]}},setup(a,{slots:s}){const l=getPrefixCls("divider"),o=computed(()=>a.direction==="horizontal"),c=computed(()=>{const u={};if(a.size&&(u[o.value?"border-bottom-width":"border-left-width"]=isNumber$1(a.size)?`${a.size}px`:a.size),a.type&&(u[o.value?"border-bottom-style":"border-left-style"]=a.type),!isUndefined(a.margin)){const d=isNumber$1(a.margin)?`${a.margin}px`:a.margin;u.margin=o.value?`${d} 0`:`0 ${d}`}return u});return()=>{var u;const d=(u=s.default)==null?void 0:u.call(s),f=[l,`${l}-${a.direction}`,{[`${l}-with-text`]:d}];return createVNode$1("div",{role:"separator",class:f,style:c.value},[d&&a.direction==="horizontal"&&createVNode$1("span",{class:[`${l}-text`,`${l}-text-${a.orientation}`]},[d])])}}});const Divider=Object.assign(_Divider,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Divider.name,_Divider)}}),useOverflow=a=>{const s=ref(!1),l={overflow:"",width:"",boxSizing:""};return{setOverflowHidden:()=>{if(a.value){const u=a.value;if(!s.value&&u.style.overflow!=="hidden"){const d=getScrollBarWidth(u);(d>0||isScroll(u))&&(l.overflow=u.style.overflow,l.width=u.style.width,l.boxSizing=u.style.boxSizing,u.style.overflow="hidden",u.style.width=`${u.offsetWidth-d}px`,u.style.boxSizing="border-box",s.value=!0)}}},resetOverflow:()=>{if(a.value&&s.value){const u=a.value;u.style.overflow=l.overflow,u.style.width=l.width,u.style.boxSizing=l.boxSizing,s.value=!1}}}};var __defProp$A=Object.defineProperty,__getOwnPropSymbols$B=Object.getOwnPropertySymbols,__hasOwnProp$B=Object.prototype.hasOwnProperty,__propIsEnum$B=Object.prototype.propertyIsEnumerable,__defNormalProp$A=(a,s,l)=>s in a?__defProp$A(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$A=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$B.call(s,l)&&__defNormalProp$A(a,l,s[l]);if(__getOwnPropSymbols$B)for(var l of __getOwnPropSymbols$B(s))__propIsEnum$B.call(s,l)&&__defNormalProp$A(a,l,s[l]);return a};const DRAWER_PLACEMENTS=["top","right","bottom","left"],_sfc_main$1Y=defineComponent({name:"Drawer",components:{ClientOnly,ArcoButton:Button,IconHover,IconClose},inheritAttrs:!1,props:{visible:{type:Boolean,default:!1},defaultVisible:{type:Boolean,default:!1},placement:{type:String,default:"right",validator:a=>DRAWER_PLACEMENTS.includes(a)},title:String,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},unmountOnClose:Boolean,width:{type:[Number,String],default:250},height:{type:[Number,String],default:250},popupContainer:{type:[String,Object],default:"body"},drawerStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1}},emits:{"update:visible":a=>!0,ok:a=>!0,cancel:a=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(a,{emit:s}){const{popupContainer:l}=toRefs(a),o=getPrefixCls("drawer"),{t:c}=useI18n(),u=ref(a.defaultVisible),d=computed(()=>{var pa;return(pa=a.visible)!=null?pa:u.value}),f=ref(!1),g=computed(()=>a.okLoading||f.value),{teleportContainer:y,containerRef:$}=useTeleportContainer({popupContainer:l,visible:d}),x=ref(d.value);let N=!1;const R=pa=>{a.escToClose&&pa.key===KEYBOARD_KEY.ESC&&ce()&&aa(pa)},j=()=>{a.escToClose&&!N&&(N=!0,on(document.documentElement,"keydown",R))},ne=()=>{N&&(N=!1,off(document.documentElement,"keydown",R))},{zIndex:se,isLastDialog:ce}=usePopupManager("dialog",{visible:d}),fe=computed(()=>$?.value===document.body);let ea=0;const ta=()=>{ea++,f.value&&(f.value=!1),u.value=!1,s("update:visible",!1)},na=async pa=>{const ua=ea,da=await new Promise(async ha=>{var ga;if(isFunction$1(a.onBeforeOk)){let fa=a.onBeforeOk((ma=!0)=>ha(ma));if((isPromise(fa)||!isBoolean$1(fa))&&(f.value=!0),isPromise(fa))try{fa=(ga=await fa)!=null?ga:!0}catch{fa=!1}isBoolean$1(fa)&&ha(fa)}else ha(!0)});ua===ea&&(da?(s("ok",pa),ta()):f.value&&(f.value=!1))},aa=pa=>{var ua;let da=!0;isFunction$1(a.onBeforeCancel)&&(da=(ua=a.onBeforeCancel())!=null?ua:!1),da&&(s("cancel",pa),ta())},ia=pa=>{a.maskClosable&&aa(pa)},sa=()=>{d.value&&s("open")},ra=()=>{d.value||(x.value=!1,oa(),s("close"))},{setOverflowHidden:la,resetOverflow:oa}=useOverflow($);onMounted(()=>{d.value&&(x.value=!0,la(),j())}),onBeforeUnmount(()=>{oa(),ne()}),watch(d,pa=>{u.value!==pa&&(u.value=pa),pa?(s("beforeOpen"),x.value=!0,la(),j()):(s("beforeClose"),ne())});const ca=computed(()=>{var pa;const ua=__spreadValues$A({[a.placement]:0},(pa=a.drawerStyle)!=null?pa:{});return["right","left"].includes(a.placement)?ua.width=isNumber$1(a.width)?`${a.width}px`:a.width:ua.height=isNumber$1(a.height)?`${a.height}px`:a.height,ua});return{prefixCls:o,style:ca,t:c,mounted:x,computedVisible:d,mergedOkLoading:g,zIndex:se,handleOk:na,handleCancel:aa,handleOpen:sa,handleClose:ra,handleMask:ia,isFixed:fe,teleportContainer:y}}});function _sfc_render$1K(a,s,l,o,c,u){const d=resolveComponent("icon-close"),f=resolveComponent("icon-hover"),g=resolveComponent("arco-button"),y=resolveComponent("client-only");return openBlock(),createBlock(y,null,{default:withCtx(()=>[(openBlock(),createBlock(Teleport,{to:a.teleportContainer,disabled:!a.renderToBody},[!a.unmountOnClose||a.computedVisible||a.mounted?withDirectives((openBlock(),createElementBlock("div",mergeProps({key:0,class:`${a.prefixCls}-container`,style:a.isFixed?{zIndex:a.zIndex}:{zIndex:"inherit",position:"absolute"}},a.$attrs),[createVNode$1(Transition,{name:"fade-drawer",appear:""},{default:withCtx(()=>[a.mask?withDirectives((openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-mask`),onClick:s[0]||(s[0]=(...$)=>a.handleMask&&a.handleMask(...$))},null,2)),[[vShow,a.computedVisible]]):createCommentVNode("v-if",!0)]),_:1}),createVNode$1(Transition,{name:`slide-${a.placement}-drawer`,appear:"",onAfterEnter:a.handleOpen,onAfterLeave:a.handleClose},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass(a.prefixCls),style:normalizeStyle$1(a.style)},[a.header?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-header`)},[renderSlot(a.$slots,"header",{},()=>[a.$slots.title||a.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),a.closable?(openBlock(),createElementBlock("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[1]||(s[1]=(...$)=>a.handleCancel&&a.handleCancel(...$))},[createVNode$1(f,null,{default:withCtx(()=>[createVNode$1(d)]),_:1})],2)):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-body`)},[renderSlot(a.$slots,"default")],2),a.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer",{},()=>[a.hideCancel?createCommentVNode("v-if",!0):(openBlock(),createBlock(g,mergeProps({key:0},a.cancelButtonProps,{onClick:a.handleCancel}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.cancelText||a.t("drawer.cancelText")),1)]),_:1},16,["onClick"])),createVNode$1(g,mergeProps({type:"primary",loading:a.mergedOkLoading},a.okButtonProps,{onClick:a.handleOk}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.okText||a.t("drawer.okText")),1)]),_:1},16,["loading","onClick"])])],2)):createCommentVNode("v-if",!0)],6),[[vShow,a.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],16)),[[vShow,a.computedVisible||a.mounted]]):createCommentVNode("v-if",!0)],8,["to","disabled"]))]),_:3})}var _Drawer=_export_sfc(_sfc_main$1Y,[["render",_sfc_render$1K]]),__defProp$z=Object.defineProperty,__getOwnPropSymbols$A=Object.getOwnPropertySymbols,__hasOwnProp$A=Object.prototype.hasOwnProperty,__propIsEnum$A=Object.prototype.propertyIsEnumerable,__defNormalProp$z=(a,s,l)=>s in a?__defProp$z(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$z=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$A.call(s,l)&&__defNormalProp$z(a,l,s[l]);if(__getOwnPropSymbols$A)for(var l of __getOwnPropSymbols$A(s))__propIsEnum$A.call(s,l)&&__defNormalProp$z(a,l,s[l]);return a};const open$1=(a,s)=>{let l=getOverlay("drawer");const o=()=>{y.component&&(y.component.props.visible=!1),isFunction$1(a.onOk)&&a.onOk()},c=()=>{y.component&&(y.component.props.visible=!1),isFunction$1(a.onCancel)&&a.onCancel()},u=async()=>{await nextTick(),l&&(render$1(null,l),document.body.removeChild(l)),l=null,isFunction$1(a.onClose)&&a.onClose()},d=()=>{y.component&&(y.component.props.visible=!1)},f=$=>{y.component&&Object.entries($).forEach(([x,N])=>{y.component.props[x]=N})},y=createVNode$1(_Drawer,__spreadValues$z(__spreadValues$z(__spreadValues$z({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:o,onCancel:c,onClose:u}),omit(a,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{header:typeof a.header=="boolean"?a.header:void 0,footer:typeof a.footer=="boolean"?a.footer:void 0}),{default:getSlotFunction(a.content),header:typeof a.header!="boolean"?getSlotFunction(a.header):void 0,title:getSlotFunction(a.title),footer:typeof a.footer!="boolean"?getSlotFunction(a.footer):void 0});return(s??Drawer._context)&&(y.appContext=s??Drawer._context),render$1(y,l),document.body.appendChild(l),{close:d,update:f}},Drawer=Object.assign(_Drawer,{open:open$1,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Drawer.name,_Drawer);const o={open:(c,u=a._context)=>open$1(c,u)};a.config.globalProperties.$drawer=o},_context:null});function isOptionsObject(a){return a===Object(a)&&Object.keys(a).length!==0}function defaultBehavior(a,s){s===void 0&&(s="auto");var l="scrollBehavior"in document.body.style;a.forEach(function(o){var c=o.el,u=o.top,d=o.left;c.scroll&&l?c.scroll({top:u,left:d,behavior:s}):(c.scrollTop=u,c.scrollLeft=d)})}function getOptions(a){return a===!1?{block:"end",inline:"nearest"}:isOptionsObject(a)?a:{block:"start",inline:"nearest"}}function scrollIntoView(a,s){var l=a.isConnected||a.ownerDocument.documentElement.contains(a);if(isOptionsObject(s)&&typeof s.behavior=="function")return s.behavior(l?i(a,s):[]);if(l){var o=getOptions(s);return defaultBehavior(i(a,o),o.behavior)}}const VALIDATE_STATUSES=["success","warning","error","validating"],getFinalValidateStatus=a=>{let s="";for(const l of Object.keys(a)){const o=a[l];o&&(!s||VALIDATE_STATUSES.indexOf(o)>VALIDATE_STATUSES.indexOf(s))&&(s=a[l])}return s},getFinalValidateMessage=a=>{const s=[];for(const l of Object.keys(a)){const o=a[l];o&&s.push(o)}return s},getFormElementId=(a,s)=>{const l=s.replace(/[[.]/g,"_").replace(/\]/g,"");return a?`${a}-${l}`:`${l}`};var __defProp$y=Object.defineProperty,__getOwnPropSymbols$z=Object.getOwnPropertySymbols,__hasOwnProp$z=Object.prototype.hasOwnProperty,__propIsEnum$z=Object.prototype.propertyIsEnumerable,__defNormalProp$y=(a,s,l)=>s in a?__defProp$y(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$y=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$z.call(s,l)&&__defNormalProp$y(a,l,s[l]);if(__getOwnPropSymbols$z)for(var l of __getOwnPropSymbols$z(s))__propIsEnum$z.call(s,l)&&__defNormalProp$y(a,l,s[l]);return a};const _sfc_main$1X=defineComponent({name:"Form",props:{model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},size:{type:String},labelColProps:{type:Object,default:()=>({span:5,offset:0})},wrapperColProps:{type:Object,default:()=>({span:19,offset:0})},labelColStyle:Object,wrapperColStyle:Object,labelAlign:{type:String,default:"right"},disabled:{type:Boolean,default:void 0},rules:{type:Object},autoLabelWidth:{type:Boolean,default:!1},id:{type:String},scrollToFirstError:{type:Boolean,default:!1}},emits:{submit:(a,s)=>!0,submitSuccess:(a,s)=>!0,submitFailed:(a,s)=>!0},setup(a,{emit:s}){const l=getPrefixCls("form"),o=ref(),{id:c,model:u,layout:d,disabled:f,labelAlign:g,labelColProps:y,wrapperColProps:$,labelColStyle:x,wrapperColStyle:N,size:R,rules:j}=toRefs(a),{mergedSize:ne}=useSize$1(R),se=computed(()=>a.layout==="horizontal"&&a.autoLabelWidth),ce=[],fe=[],ea=reactive({}),ta=computed(()=>Math.max(...Object.values(ea))),na=fa=>{fa&&fa.field&&ce.push(fa)},aa=fa=>{fa&&fa.field&&ce.splice(ce.indexOf(fa),1)},ia=fa=>{ce.forEach(ma=>{fa[ma.field]&&ma.setField(fa[ma.field])})},sa=(fa,ma)=>{ma&&ea[ma]!==fa&&(ea[ma]=fa)},ra=fa=>{fa&&delete ea[fa]},la=fa=>{const ma=fa?[].concat(fa):[];ce.forEach(va=>{(ma.length===0||ma.includes(va.field))&&va.resetField()})},oa=fa=>{const ma=fa?[].concat(fa):[];ce.forEach(va=>{(ma.length===0||ma.includes(va.field))&&va.clearValidate()})},ca=(fa,ma)=>{const ka=(o.value||document.body).querySelector(`#${getFormElementId(a.id,fa)}`);ka&&scrollIntoView(ka,__spreadValues$y({behavior:"smooth",block:"nearest",scrollMode:"if-needed"},ma))},pa=fa=>{const ma=isBoolean$1(a.scrollToFirstError)?void 0:a.scrollToFirstError;ca(fa,ma)},ua=fa=>{const ma=[];return ce.forEach(va=>{ma.push(va.validate())}),Promise.all(ma).then(va=>{const ka={};let ya=!1;return va.forEach(ba=>{ba&&(ya=!0,ka[ba.field]=ba)}),ya&&a.scrollToFirstError&&pa(Object.keys(ka)[0]),isFunction$1(fa)&&fa(ya?ka:void 0),ya?ka:void 0})},da=(fa,ma)=>{const va=[];for(const ka of ce)(isArray$1(fa)&&fa.includes(ka.field)||fa===ka.field)&&va.push(ka.validate());return Promise.all(va).then(ka=>{const ya={};let ba=!1;return ka.forEach(Ea=>{Ea&&(ba=!0,ya[Ea.field]=Ea)}),ba&&a.scrollToFirstError&&pa(Object.keys(ya)[0]),isFunction$1(ma)&&ma(ba?ya:void 0),ba?ya:void 0})},ha=fa=>{const ma=[];ce.forEach(va=>{ma.push(va.validate())}),Promise.all(ma).then(va=>{const ka={};let ya=!1;va.forEach(ba=>{ba&&(ya=!0,ka[ba.field]=ba)}),ya?(a.scrollToFirstError&&pa(Object.keys(ka)[0]),s("submitFailed",{values:u.value,errors:ka},fa)):s("submitSuccess",u.value,fa),s("submit",{values:u.value,errors:ya?ka:void 0},fa)})};return provide(formInjectionKey,reactive({id:c,layout:d,disabled:f,labelAlign:g,labelColProps:y,wrapperColProps:$,labelColStyle:x,wrapperColStyle:N,model:u,size:ne,rules:j,fields:ce,touchedFields:fe,addField:na,removeField:aa,validateField:da,setLabelWidth:sa,removeLabelWidth:ra,maxLabelWidth:ta,autoLabelWidth:se})),{cls:computed(()=>[l,`${l}-layout-${a.layout}`,`${l}-size-${ne.value}`,{[`${l}-auto-label-width`]:a.autoLabelWidth}]),formRef:o,handleSubmit:ha,innerValidate:ua,innerValidateField:da,innerResetFields:la,innerClearValidate:oa,innerSetFields:ia,innerScrollToField:ca}},methods:{validate(a){return this.innerValidate(a)},validateField(a,s){return this.innerValidateField(a,s)},resetFields(a){return this.innerResetFields(a)},clearValidate(a){return this.innerClearValidate(a)},setFields(a){return this.innerSetFields(a)},scrollToField(a){return this.innerScrollToField(a)}}});function _sfc_render$1J(a,s,l,o,c,u){return openBlock(),createElementBlock("form",{ref:"formRef",class:normalizeClass(a.cls),onSubmit:s[0]||(s[0]=withModifiers((...d)=>a.handleSubmit&&a.handleSubmit(...d),["prevent"]))},[renderSlot(a.$slots,"default")],34)}var _Form=_export_sfc(_sfc_main$1X,[["render",_sfc_render$1J]]),opt=Object.prototype.toString;function isArray(a){return opt.call(a)==="[object Array]"}function isObject(a){return opt.call(a)==="[object Object]"}function isString(a){return opt.call(a)==="[object String]"}function isNumber(a){return opt.call(a)==="[object Number]"&&a===a}function isBoolean(a){return opt.call(a)==="[object Boolean]"}function isFunction(a){return opt.call(a)==="[object Function]"}function isEmptyObject(a){return isObject(a)&&Object.keys(a).length===0}function isEmptyValue(a){return a==null||a===""}function isEmptyArray(a){return isArray(a)&&!a.length}var isEqual=function(a,s){if(typeof a!="object"||typeof s!="object")return a===s;if(isFunction(a)&&isFunction(s))return a===s||a.toString()===s.toString();if(Object.keys(a).length!==Object.keys(s).length)return!1;for(var l in a){var o=isEqual(a[l],s[l]);if(!o)return!1}return!0},mergeTemplate=function(a,s){var l=Object.assign({},a);return Object.keys(s||{}).forEach(function(o){var c=l[o],u=s?.[o];l[o]=isObject(c)?Object.assign(Object.assign({},c),u):u||c}),l},getTemplate=function(a,s){for(var l=s.split("."),o=a,c=0;c<l.length;c++)if(o=o&&o[l[c]],o===void 0)return o;return o},defaultTypeTemplate="#{field} is not a #{type} type",defaultValidateLocale={required:"#{field} is required",type:{ip:defaultTypeTemplate,email:defaultTypeTemplate,url:defaultTypeTemplate,string:defaultTypeTemplate,number:defaultTypeTemplate,array:defaultTypeTemplate,object:defaultTypeTemplate,boolean:defaultTypeTemplate},number:{min:"`#{value}` is not greater than `#{min}`",max:"`#{value}` is not less than `#{max}`",equal:"`#{value}` is not equal to `#{equal}`",range:"`#{value}` is not in range `#{min} ~ #{max}`",positive:"`#{value}` is not a positive number",negative:"`#{value}` is not a negative number"},string:{maxLength:"#{field} cannot be longer than #{maxLength} characters",minLength:"#{field} must be at least #{minLength} characters",length:"#{field} must be exactly #{length} characters",match:"`#{value}` does not match pattern #{pattern}",uppercase:"`#{value}` must be all uppercase",lowercase:"`#{value}` must be all lowercased"},array:{length:"#{field} must be exactly #{length} in length",minLength:"#{field} cannot be less than #{minLength} in length",maxLength:"#{field} cannot be greater than #{maxLength} in length",includes:"#{field} is not includes #{includes}",deepEqual:"#{field} is not deep equal with #{deepEqual}",empty:"#{field} is not an empty array"},object:{deepEqual:"#{field} is not deep equal to expected value",hasKeys:"#{field} does not contain required fields",empty:"#{field} is not an empty object"},boolean:{true:"Expect true but got `#{value}`",false:"Expect false but got `#{value}`"}},Base$1=function a(s,l){var o=this;this.getValidateMsg=function(c,u){u===void 0&&(u={});var d=Object.assign(Object.assign({},u),{value:o.obj,field:o.field,type:o.type}),f=getTemplate(o.validateMessages,c);return isFunction(f)?f(d):isString(f)?f.replace(/\#\{.+?\}/g,function(g){var y=g.slice(2,-1);if(y in d){if(isObject(d[y])||isArray(d[y]))try{return JSON.stringify(d[y])}catch{return d[y]}return String(d[y])}return g}):f},isObject(l)&&isString(s)&&l.trim?this.obj=s.trim():isObject(l)&&l.ignoreEmptyString&&s===""?this.obj=void 0:this.obj=s,this.message=l.message,this.type=l.type,this.error=null,this.field=l.field||l.type,this.validateMessages=mergeTemplate(defaultValidateLocale,l.validateMessages)},prototypeAccessors={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};prototypeAccessors.not.get=function(){return this._not=!this._not,this};prototypeAccessors.isRequired.get=function(){if(isEmptyValue(this.obj)||isEmptyArray(this.obj)){var a=this.getValidateMsg("required");this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||(isObject(a)?a:(this._not?"[NOT MODE]:":"")+a)}}return this};prototypeAccessors.end.get=function(){return this.error};Base$1.prototype.addError=function a(s){!this.error&&s&&(this.error={value:this.obj,type:this.type,message:this.message||(isObject(s)?s:(this._not?"[NOT MODE]:":"")+s)})};Base$1.prototype.validate=function a(s,l){var o=this._not?s:!s;return o&&this.addError(l),this};Base$1.prototype.collect=function a(s){s&&s(this.error)};Object.defineProperties(Base$1.prototype,prototypeAccessors);var StringValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"string"})),this.validate(c&&c.strict?isString(this.obj):!0,this.getValidateMsg("type.string"))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={uppercase:{configurable:!0},lowercase:{configurable:!0}};return s.prototype.maxLength=function(c){return this.obj?this.validate(this.obj.length<=c,this.getValidateMsg("string.maxLength",{maxLength:c})):this},s.prototype.minLength=function(c){return this.obj?this.validate(this.obj.length>=c,this.getValidateMsg("string.minLength",{minLength:c})):this},s.prototype.length=function(c){return this.obj?this.validate(this.obj.length===c,this.getValidateMsg("string.length",{length:c})):this},s.prototype.match=function(c){var u=c instanceof RegExp;return u&&(c.lastIndex=0),this.validate(this.obj===void 0||u&&c.test(this.obj),this.getValidateMsg("string.match",{pattern:c}))},l.uppercase.get=function(){return this.obj?this.validate(this.obj.toUpperCase()===this.obj,this.getValidateMsg("string.uppercase")):this},l.lowercase.get=function(){return this.obj?this.validate(this.obj.toLowerCase()===this.obj,this.getValidateMsg("string.lowercase")):this},Object.defineProperties(s.prototype,l),s}(Base$1),NumberValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"number"})),this.validate(c&&c.strict?isNumber(this.obj):!0,this.getValidateMsg("type.number"))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={positive:{configurable:!0},negative:{configurable:!0}};return s.prototype.min=function(c){return isEmptyValue(this.obj)?this:this.validate(this.obj>=c,this.getValidateMsg("number.min",{min:c}))},s.prototype.max=function(c){return isEmptyValue(this.obj)?this:this.validate(this.obj<=c,this.getValidateMsg("number.max",{max:c}))},s.prototype.equal=function(c){return isEmptyValue(this.obj)?this:this.validate(this.obj===c,this.getValidateMsg("number.equal",{equal:c}))},s.prototype.range=function(c,u){return isEmptyValue(this.obj)?this:this.validate(this.obj>=c&&this.obj<=u,this.getValidateMsg("number.range",{min:c,max:u}))},l.positive.get=function(){return isEmptyValue(this.obj)?this:this.validate(this.obj>0,this.getValidateMsg("number.positive"))},l.negative.get=function(){return isEmptyValue(this.obj)?this:this.validate(this.obj<0,this.getValidateMsg("number.negative"))},Object.defineProperties(s.prototype,l),s}(Base$1),ArrayValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"array"})),this.validate(c&&c.strict?isArray(this.obj):!0,this.getValidateMsg("type.array",{value:this.obj,type:this.type}))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={empty:{configurable:!0}};return s.prototype.length=function(c){return this.obj?this.validate(this.obj.length===c,this.getValidateMsg("array.length",{value:this.obj,length:c})):this},s.prototype.minLength=function(c){return this.obj?this.validate(this.obj.length>=c,this.getValidateMsg("array.minLength",{value:this.obj,minLength:c})):this},s.prototype.maxLength=function(c){return this.obj?this.validate(this.obj.length<=c,this.getValidateMsg("array.maxLength",{value:this.obj,maxLength:c})):this},s.prototype.includes=function(c){var u=this;return this.obj?this.validate(c.every(function(d){return u.obj.indexOf(d)!==-1}),this.getValidateMsg("array.includes",{value:this.obj,includes:c})):this},s.prototype.deepEqual=function(c){return this.obj?this.validate(isEqual(this.obj,c),this.getValidateMsg("array.deepEqual",{value:this.obj,deepEqual:c})):this},l.empty.get=function(){return this.validate(isEmptyArray(this.obj),this.getValidateMsg("array.empty",{value:this.obj}))},Object.defineProperties(s.prototype,l),s}(Base$1),ObjectValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"object"})),this.validate(c&&c.strict?isObject(this.obj):!0,this.getValidateMsg("type.object"))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={empty:{configurable:!0}};return s.prototype.deepEqual=function(c){return this.obj?this.validate(isEqual(this.obj,c),this.getValidateMsg("object.deepEqual",{deepEqual:c})):this},s.prototype.hasKeys=function(c){var u=this;return this.obj?this.validate(c.every(function(d){return u.obj[d]}),this.getValidateMsg("object.hasKeys",{keys:c})):this},l.empty.get=function(){return this.validate(isEmptyObject(this.obj),this.getValidateMsg("object.empty"))},Object.defineProperties(s.prototype,l),s}(Base$1),BooleanValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"boolean"})),this.validate(c&&c.strict?isBoolean(this.obj):!0,this.getValidateMsg("type.boolean"))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={true:{configurable:!0},false:{configurable:!0}};return l.true.get=function(){return this.validate(this.obj===!0,this.getValidateMsg("boolean.true"))},l.false.get=function(){return this.validate(this.obj===!1,this.getValidateMsg("boolean.false"))},Object.defineProperties(s.prototype,l),s}(Base$1),regexEmail=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,regexUrl=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),regexIp=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,TypeValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"type"}))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return l.email.get=function(){return this.type="email",this.validate(this.obj===void 0||regexEmail.test(this.obj),this.getValidateMsg("type.email"))},l.url.get=function(){return this.type="url",this.validate(this.obj===void 0||regexUrl.test(this.obj),this.getValidateMsg("type.url"))},l.ip.get=function(){return this.type="ip",this.validate(this.obj===void 0||regexIp.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(s.prototype,l),s}(Base$1),CustomValidator=function(a){function s(o,c){a.call(this,o,Object.assign(Object.assign({},c),{type:"custom"}))}a&&(s.__proto__=a),s.prototype=Object.create(a&&a.prototype),s.prototype.constructor=s;var l={validate:{configurable:!0}};return l.validate.get=function(){var o=this;return function(c,u){var d;if(c)return d=c(o.obj,o.addError.bind(o)),d&&d.then?(u&&d.then(function(){u&&u(o.error)},function(f){console.error(f)}),[d,o]):(u&&u(o.error),o.error)}},Object.defineProperties(s.prototype,l),s}(Base$1),BValidate=function(a,s){return new Validate(a,Object.assign({field:"value"},s))};BValidate.globalConfig={};BValidate.setGlobalConfig=function(a){BValidate.globalConfig=a||{}};var Validate=function a(s,l){var o=BValidate.globalConfig,c=Object.assign(Object.assign(Object.assign({},o),l),{validateMessages:mergeTemplate(o.validateMessages,l.validateMessages)});this.string=new StringValidator(s,c),this.number=new NumberValidator(s,c),this.array=new ArrayValidator(s,c),this.object=new ObjectValidator(s,c),this.boolean=new BooleanValidator(s,c),this.type=new TypeValidator(s,c),this.custom=new CustomValidator(s,c)},Schema=function a(s,l){l===void 0&&(l={}),this.schema=s,this.options=l};Schema.prototype.messages=function a(s){this.options=Object.assign(Object.assign({},this.options),{validateMessages:mergeTemplate(this.options.validateMessages,s)})};Schema.prototype.validate=function a(s,l){var o=this;if(!isObject(s))return;var c=[],u=null;function d(f,g){u||(u={}),(!u[f]||g.requiredError)&&(u[f]=g)}this.schema&&Object.keys(this.schema).forEach(function(f){if(isArray(o.schema[f]))for(var g=function(x){var N=o.schema[f][x],R=N.type,j=N.message;if(!R&&!N.validator)throw"You must specify a type to field "+f+"!";var ne=Object.assign(Object.assign({},o.options),{message:j,field:f});"ignoreEmptyString"in N&&(ne.ignoreEmptyString=N.ignoreEmptyString),"strict"in N&&(ne.strict=N.strict);var se=new Validate(s[f],ne),ce=se.type[R]||null;if(!ce)if(N.validator){ce=se.custom.validate(N.validator),Object.prototype.toString.call(ce)==="[object Array]"&&ce[0].then?c.push({function:ce[0],_this:ce[1],key:f}):ce&&d(f,ce);return}else ce=se[R];if(Object.keys(N).forEach(function(fe){N.required&&(ce=ce.isRequired),fe!=="message"&&ce[fe]&&N[fe]&&typeof ce[fe]=="object"&&(ce=ce[fe]),ce[fe]&&N[fe]!==void 0&&typeof ce[fe]=="function"&&(ce=ce[fe](N[fe]))}),ce.collect(function(fe){fe&&d(f,fe)}),u)return"break"},y=0;y<o.schema[f].length;y++){var $=g(y);if($==="break")break}}),c.length>0?Promise.all(c.map(function(f){return f.function})).then(function(){c.forEach(function(f){f._this.error&&d(f.key,f._this.error)}),l&&l(u)}):l&&l(u)};const RowContextInjectionKey=Symbol("RowContextInjectionKey"),GridContextInjectionKey=Symbol("GridContextInjectionKey"),GridDataCollectorInjectionKey=Symbol("GridDataCollectorInjectionKey"),_sfc_main$1W=defineComponent({name:"Row",props:{gutter:{type:[Number,Object,Array],default:0},justify:{type:String,default:"start"},align:{type:String,default:"start"},div:{type:Boolean},wrap:{type:Boolean,default:!0}},setup(a){const{gutter:s,align:l,justify:o,div:c,wrap:u}=toRefs(a),d=getPrefixCls("row"),f=computed(()=>({[`${d}`]:!c.value,[`${d}-nowrap`]:!u.value,[`${d}-align-${l.value}`]:l.value,[`${d}-justify-${o.value}`]:o.value})),g=computed(()=>Array.isArray(s.value)?s.value[0]:s.value),y=computed(()=>Array.isArray(s.value)?s.value[1]:0),$=useResponsiveState(g,0),x=useResponsiveState(y,0),N=computed(()=>{const j={};if(($.value||x.value)&&!c.value){const ne=-$.value/2,se=-x.value/2;ne&&(j.marginLeft=`${ne}px`,j.marginRight=`${ne}px`),se&&(j.marginTop=`${se}px`,j.marginBottom=`${se}px`)}return j}),R=computed(()=>[$.value,x.value]);return provide(RowContextInjectionKey,reactive({gutter:R,div:c})),{classNames:f,styles:N}}});function _sfc_render$1I(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames),style:normalizeStyle$1(a.styles)},[renderSlot(a.$slots,"default")],6)}var Row=_export_sfc(_sfc_main$1W,[["render",_sfc_render$1I]]);function useResponsiveValue(a){return computed(()=>{const{val:l,key:o,xs:c,sm:u,md:d,lg:f,xl:g,xxl:y}=a.value;if(!c&&!u&&!d&&!f&&!g&&!y)return l;const $={};return responsiveArray.forEach(x=>{const N=a.value[x];isNumber$1(N)?$[x]=N:isObject$1(N)&&isNumber$1(N[o])&&($[x]=N[o])}),$})}var __defProp$x=Object.defineProperty,__getOwnPropSymbols$y=Object.getOwnPropertySymbols,__hasOwnProp$y=Object.prototype.hasOwnProperty,__propIsEnum$y=Object.prototype.propertyIsEnumerable,__defNormalProp$x=(a,s,l)=>s in a?__defProp$x(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$x=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$y.call(s,l)&&__defNormalProp$x(a,l,s[l]);if(__getOwnPropSymbols$y)for(var l of __getOwnPropSymbols$y(s))__propIsEnum$y.call(s,l)&&__defNormalProp$x(a,l,s[l]);return a};function getAllowableFlexValue(a){if(isString$1(a)&&(["initial","auto","none"].includes(a)||/^\d+$/.test(a))||isNumber$1(a))return a;if(isString$1(a)&&/^\d+(px|em|rem|%)$/.test(a))return`0 0 ${a}`}const _sfc_main$1V=defineComponent({name:"Col",props:{span:{type:Number,default:24},offset:{type:Number},order:{type:Number},xs:{type:[Number,Object]},sm:{type:[Number,Object]},md:{type:[Number,Object]},lg:{type:[Number,Object]},xl:{type:[Number,Object]},xxl:{type:[Number,Object]},flex:{type:[Number,String]}},setup(a){const s=getPrefixCls("col"),l=inject(RowContextInjectionKey,{}),o=computed(()=>getAllowableFlexValue(a.flex)),c=computed(()=>{const{div:x}=l,{span:N,offset:R,order:j,xs:ne,sm:se,md:ce,lg:fe,xl:ea,xxl:ta}=a,na={[`${s}`]:!x,[`${s}-order-${j}`]:j,[`${s}-${N}`]:!x&&!ne&&!se&&!ce&&!fe&&!ea&&!ta,[`${s}-offset-${R}`]:R&&R>0},aa={xs:ne,sm:se,md:ce,lg:fe,xl:ea,xxl:ta};return Object.keys(aa).forEach(ia=>{const sa=aa[ia];sa&&isNumber$1(sa)?na[`${s}-${ia}-${sa}`]=!0:sa&&isObject$1(sa)&&(na[`${s}-${ia}-${sa.span}`]=sa.span,na[`${s}-${ia}-offset-${sa.offset}`]=sa.offset,na[`${s}-${ia}-order-${sa.order}`]=sa.order)}),na}),u=computed(()=>o.value?s:c.value),d=computed(()=>{const{gutter:x,div:N}=l,R={};if(Array.isArray(x)&&!N){const j=x[0]&&x[0]/2||0,ne=x[1]&&x[1]/2||0;j&&(R.paddingLeft=`${j}px`,R.paddingRight=`${j}px`),ne&&(R.paddingTop=`${ne}px`,R.paddingBottom=`${ne}px`)}return R}),f=computed(()=>o.value?{flex:o.value}:{}),g=computed(()=>pick(a,responsiveArray)),y=useResponsiveValue(computed(()=>__spreadValues$x({val:a.span,key:"span"},g.value))),$=useResponsiveState(y,24,!0);return{visible:computed(()=>!!$.value),classNames:u,styles:computed(()=>__spreadValues$x(__spreadValues$x({},d.value),f.value))}}});function _sfc_render$1H(a,s,l,o,c,u){return a.visible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.classNames),style:normalizeStyle$1(a.styles)},[renderSlot(a.$slots,"default")],6)):createCommentVNode("v-if",!0)}var Col=_export_sfc(_sfc_main$1V,[["render",_sfc_render$1H]]);function resolveItemData(a,s){var l,o;const c=(l=s.span)!=null?l:1,u=(o=s.offset)!=null?o:0,d=Math.min(u,a);return{span:Math.min(d>0?c+u:c,a),offset:d,suffix:"suffix"in s?s.suffix!==!1:!1}}function setItemVisible({cols:a,collapsed:s,collapsedRows:l,itemDataList:o}){let c=!1,u=[];function d(f){return Math.ceil(f/a)>l}if(s){let f=0;for(let g=0;g<o.length;g++)o[g].suffix&&(f+=o[g].span,u.push(g));if(!d(f)){let g=0;for(;g<o.length;){const y=o[g];if(!y.suffix){if(f+=y.span,d(f))break;u.push(g)}g++}}c=o.some((g,y)=>!g.suffix&&!u.includes(y))}else u=o.map((f,g)=>g);return{overflow:c,displayIndexList:u}}const _sfc_main$1U=defineComponent({name:"Grid",props:{cols:{type:[Number,Object],default:24},rowGap:{type:[Number,Object],default:0},colGap:{type:[Number,Object],default:0},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}},setup(a){const{cols:s,rowGap:l,colGap:o,collapsedRows:c,collapsed:u}=toRefs(a),d=useResponsiveState(s,24),f=useResponsiveState(o,0),g=useResponsiveState(l,0),y=getPrefixCls("grid"),$=computed(()=>[y]),x=computed(()=>[{gap:`${g.value}px ${f.value}px`,"grid-template-columns":`repeat(${d.value}, minmax(0px, 1fr))`}]),N=reactive(new Map),R=computed(()=>{const ne=[];for(const[se,ce]of N.entries())ne[se]=ce;return ne}),j=reactive({overflow:!1,displayIndexList:[],cols:d.value,colGap:f.value});return watchEffect(()=>{j.cols=d.value,j.colGap=f.value}),watchEffect(()=>{const ne=setItemVisible({cols:d.value,collapsed:u.value,collapsedRows:c.value,itemDataList:R.value});j.overflow=ne.overflow,j.displayIndexList=ne.displayIndexList}),provide(GridContextInjectionKey,j),provide(GridDataCollectorInjectionKey,{collectItemData(ne,se){N.set(ne,se)},removeItemData(ne){N.delete(ne)}}),{classNames:$,style:x}}});function _sfc_render$1G(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames),style:normalizeStyle$1(a.style)},[renderSlot(a.$slots,"default")],6)}var _Grid=_export_sfc(_sfc_main$1U,[["render",_sfc_render$1G]]),__defProp$w=Object.defineProperty,__defProps$h=Object.defineProperties,__getOwnPropDescs$h=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$x=Object.getOwnPropertySymbols,__hasOwnProp$x=Object.prototype.hasOwnProperty,__propIsEnum$x=Object.prototype.propertyIsEnumerable,__defNormalProp$w=(a,s,l)=>s in a?__defProp$w(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$w=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$x.call(s,l)&&__defNormalProp$w(a,l,s[l]);if(__getOwnPropSymbols$x)for(var l of __getOwnPropSymbols$x(s))__propIsEnum$x.call(s,l)&&__defNormalProp$w(a,l,s[l]);return a},__spreadProps$h=(a,s)=>__defProps$h(a,__getOwnPropDescs$h(s));const _sfc_main$1T=defineComponent({name:"GridItem",props:{span:{type:[Number,Object],default:1},offset:{type:[Number,Object],default:0},suffix:{type:Boolean,default:!1}},setup(a){const s=getPrefixCls("grid-item"),l=ref(),{computedIndex:o}=useIndex({itemRef:l,selector:`.${s}`}),c=inject(GridContextInjectionKey,{overflow:!1,displayIndexList:[],cols:24,colGap:0}),u=inject(GridDataCollectorInjectionKey),d=computed(()=>{var se;return(se=c?.displayIndexList)==null?void 0:se.includes(o.value)}),{span:f,offset:g}=toRefs(a),y=useResponsiveState(f,1),$=useResponsiveState(g,0),x=computed(()=>resolveItemData(c.cols,__spreadProps$h(__spreadValues$w({},a),{span:y.value,offset:$.value}))),N=computed(()=>[s]),R=computed(()=>{const{offset:se,span:ce}=x.value,{colGap:fe}=c;return se>0?{"margin-left":`calc((${`(100% - ${fe*(ce-1)}px) / ${ce}`} * ${se}) + ${fe*se}px)`}:{}}),j=computed(()=>{const{suffix:se,span:ce}=x.value,{cols:fe}=c;return se?`${fe-ce+1}`:`span ${ce}`}),ne=computed(()=>{const{span:se}=x.value;return l.value?[{"grid-column":`${j.value} / span ${se}`},R.value,!d.value||se===0?{display:"none"}:{}]:[]});return watchEffect(()=>{o.value!==-1&&u?.collectItemData(o.value,x.value)}),onUnmounted(()=>{o.value!==-1&&u?.removeItemData(o.value)}),{classNames:N,style:ne,domRef:l,overflow:computed(()=>c.overflow)}}});function _sfc_render$1F(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{ref:"domRef",class:normalizeClass(a.classNames),style:normalizeStyle$1(a.style)},[renderSlot(a.$slots,"default",{overflow:a.overflow})],6)}var GridItem=_export_sfc(_sfc_main$1T,[["render",_sfc_render$1F]]);const Grid=Object.assign(_Grid,{Row,Col,Item:GridItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+Row.name,Row),a.component(l+Col.name,Col),a.component(l+_Grid.name,_Grid),a.component(l+GridItem.name,GridItem)}});var __defProp$v=Object.defineProperty,__getOwnPropSymbols$w=Object.getOwnPropertySymbols,__hasOwnProp$w=Object.prototype.hasOwnProperty,__propIsEnum$w=Object.prototype.propertyIsEnumerable,__defNormalProp$v=(a,s,l)=>s in a?__defProp$v(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$v=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$w.call(s,l)&&__defNormalProp$v(a,l,s[l]);if(__getOwnPropSymbols$w)for(var l of __getOwnPropSymbols$w(s))__propIsEnum$w.call(s,l)&&__defNormalProp$v(a,l,s[l]);return a};const _sfc_main$1S=defineComponent({name:"Tooltip",components:{Trigger},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},content:String,position:{type:String,default:"top"},mini:{type:Boolean,default:!1},backgroundColor:{type:String},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("tooltip"),o=ref(a.defaultPopupVisible),c=computed(()=>{var $;return($=a.popupVisible)!=null?$:o.value}),u=$=>{o.value=$,s("update:popupVisible",$),s("popupVisibleChange",$)},d=computed(()=>[`${l}-content`,a.contentClass,{[`${l}-mini`]:a.mini}]),f=computed(()=>{if(a.backgroundColor||a.contentStyle)return __spreadValues$v({backgroundColor:a.backgroundColor},a.contentStyle)}),g=computed(()=>[`${l}-popup-arrow`,a.arrowClass]),y=computed(()=>{if(a.backgroundColor||a.arrowStyle)return __spreadValues$v({backgroundColor:a.backgroundColor},a.arrowStyle)});return{prefixCls:l,computedPopupVisible:c,contentCls:d,computedContentStyle:f,arrowCls:g,computedArrowStyle:y,handlePopupVisibleChange:u}}});function _sfc_render$1E(a,s,l,o,c,u){const d=resolveComponent("Trigger");return openBlock(),createBlock(d,{class:normalizeClass(a.prefixCls),trigger:"hover",position:a.position,"popup-visible":a.computedPopupVisible,"popup-offset":10,"show-arrow":"","content-class":a.contentCls,"content-style":a.computedContentStyle,"arrow-class":a.arrowCls,"arrow-style":a.computedArrowStyle,"popup-container":a.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",role:"tooltip",onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[renderSlot(a.$slots,"content",{},()=>[createTextVNode(toDisplayString(a.content),1)])]),default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}var _Tooltip=_export_sfc(_sfc_main$1S,[["render",_sfc_render$1E]]);const Tooltip=Object.assign(_Tooltip,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Tooltip.name,_Tooltip)}}),_sfc_main$1R=defineComponent({name:"IconQuestionCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-question-circle`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$W=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$I=createBaseVNode("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),_hoisted_3$D=createBaseVNode("path",{d:"M24.006 31v4.008m0-6.008L24 28c0-3 3-4 4.78-6.402C30.558 19.195 28.288 15 23.987 15c-4.014 0-5.382 2.548-5.388 4.514v.465"},null,-1),_hoisted_4$f=[_hoisted_2$I,_hoisted_3$D];function _sfc_render$1D(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$f,14,_hoisted_1$W)}var _IconQuestionCircle=_export_sfc(_sfc_main$1R,[["render",_sfc_render$1D]]);const IconQuestionCircle=Object.assign(_IconQuestionCircle,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconQuestionCircle.name,_IconQuestionCircle)}}),_sfc_main$1Q=defineComponent({name:"FormItemLabel",components:{ResizeObserver:ResizeObserver$1,Tooltip,IconQuestionCircle},props:{required:{type:Boolean,default:!1},showColon:{type:Boolean,default:!1},component:{type:String,default:"label"},asteriskPosition:{type:String,default:"start"},tooltip:{type:String},attrs:Object},setup(){const a=getPrefixCls("form-item-label"),s=inject(formInjectionKey,void 0),l=getCurrentInstance(),o=ref(),c=()=>{o.value&&isNumber$1(o.value.offsetWidth)&&s?.setLabelWidth(o.value.offsetWidth,l?.uid)};return onMounted(()=>{o.value&&isNumber$1(o.value.offsetWidth)&&s?.setLabelWidth(o.value.offsetWidth,l?.uid)}),onBeforeUnmount(()=>{s?.removeLabelWidth(l?.uid)}),{prefixCls:a,labelRef:o,handleResize:c}}}),_hoisted_1$V=createBaseVNode("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[createBaseVNode("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),_hoisted_2$H=[_hoisted_1$V],_hoisted_3$C=createBaseVNode("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[createBaseVNode("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),_hoisted_4$e=[_hoisted_3$C];function _sfc_render$1C(a,s,l,o,c,u){const d=resolveComponent("icon-question-circle"),f=resolveComponent("Tooltip"),g=resolveComponent("ResizeObserver");return openBlock(),createBlock(g,{onResize:a.handleResize},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(a.component),mergeProps({ref:"labelRef",class:a.prefixCls},a.attrs),{default:withCtx(()=>[a.required&&a.asteriskPosition==="start"?(openBlock(),createElementBlock("strong",{key:0,class:normalizeClass(`${a.prefixCls}-required-symbol`)},_hoisted_2$H,2)):createCommentVNode("v-if",!0),renderSlot(a.$slots,"default"),a.tooltip?(openBlock(),createBlock(f,{key:1,content:a.tooltip},{default:withCtx(()=>[createVNode$1(d,{class:normalizeClass(`${a.prefixCls}-tooltip`)},null,8,["class"])]),_:1},8,["content"])):createCommentVNode("v-if",!0),a.required&&a.asteriskPosition==="end"?(openBlock(),createElementBlock("strong",{key:2,class:normalizeClass(`${a.prefixCls}-required-symbol`)},_hoisted_4$e,2)):createCommentVNode("v-if",!0),createTextVNode(" "+toDisplayString(a.showColon?":":""),1)]),_:3},16,["class"]))]),_:3},8,["onResize"])}var FormItemLabel=_export_sfc(_sfc_main$1Q,[["render",_sfc_render$1C]]);const _sfc_main$1P=defineComponent({name:"FormItemMessage",props:{error:{type:Array,default:()=>[]},help:String},setup(){return{prefixCls:getPrefixCls("form-item-message")}}});function _sfc_render$1B(a,s,l,o,c,u){return a.error.length>0?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(a.error,d=>(openBlock(),createBlock(Transition,{key:d,name:"form-blink",appear:""},{default:withCtx(()=>[createBaseVNode("div",{role:"alert",class:normalizeClass([a.prefixCls])},toDisplayString(d),3)]),_:2},1024))),128)):a.help||a.$slots.help?(openBlock(),createBlock(Transition,{key:1,name:"form-blink",appear:""},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([a.prefixCls,`${a.prefixCls}-help`])},[renderSlot(a.$slots,"help",{},()=>[createTextVNode(toDisplayString(a.help),1)])],2)]),_:3})):createCommentVNode("v-if",!0)}var FormItemMessage=_export_sfc(_sfc_main$1P,[["render",_sfc_render$1B]]),__defProp$u=Object.defineProperty,__getOwnPropSymbols$v=Object.getOwnPropertySymbols,__hasOwnProp$v=Object.prototype.hasOwnProperty,__propIsEnum$v=Object.prototype.propertyIsEnumerable,__defNormalProp$u=(a,s,l)=>s in a?__defProp$u(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$u=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$v.call(s,l)&&__defNormalProp$u(a,l,s[l]);if(__getOwnPropSymbols$v)for(var l of __getOwnPropSymbols$v(s))__propIsEnum$v.call(s,l)&&__defNormalProp$u(a,l,s[l]);return a},__objRest$1=(a,s)=>{var l={};for(var o in a)__hasOwnProp$v.call(a,o)&&s.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&__getOwnPropSymbols$v)for(var o of __getOwnPropSymbols$v(a))s.indexOf(o)<0&&__propIsEnum$v.call(a,o)&&(l[o]=a[o]);return l};const _sfc_main$1O=defineComponent({name:"FormItem",components:{ArcoRow:Row,ArcoCol:Col,FormItemLabel,FormItemMessage},props:{field:{type:String,default:""},label:String,tooltip:{type:String},showColon:{type:Boolean,default:!1},noStyle:{type:Boolean,default:!1},disabled:{type:Boolean,default:void 0},help:String,extra:String,required:{type:Boolean,default:!1},asteriskPosition:{type:String,default:"start"},rules:{type:[Object,Array]},validateStatus:{type:String},validateTrigger:{type:[String,Array],default:"change"},labelColProps:Object,wrapperColProps:Object,hideLabel:{type:Boolean,default:!1},hideAsterisk:{type:Boolean,default:!1},labelColStyle:Object,wrapperColStyle:Object,rowProps:Object,rowClass:[String,Array,Object],contentClass:[String,Array,Object],contentFlex:{type:Boolean,default:!0},mergeProps:{type:[Boolean,Function],default:!0},labelColFlex:{type:[Number,String]},feedback:{type:Boolean,default:!1},labelComponent:{type:String,default:"label"},labelAttrs:Object},setup(a){const s=getPrefixCls("form-item"),{field:l}=toRefs(a),o=inject(formInjectionKey,{}),{autoLabelWidth:c,layout:u}=toRefs(o),{i18nMessage:d}=useI18n(),f=computed(()=>{var va;const ka=__spreadValues$u({},(va=a.labelColProps)!=null?va:o.labelColProps);return a.labelColFlex?ka.flex=a.labelColFlex:o.autoLabelWidth&&(ka.flex=`${o.maxLabelWidth}px`),ka}),g=computed(()=>{var va;const ka=__spreadValues$u({},(va=a.wrapperColProps)!=null?va:o.wrapperColProps);return l.value&&(ka.id=getFormElementId(o.id,l.value)),(a.labelColFlex||o.autoLabelWidth)&&(ka.flex="auto"),ka}),y=computed(()=>{var va;return(va=a.labelColStyle)!=null?va:o.labelColStyle}),$=computed(()=>{var va;return(va=a.wrapperColStyle)!=null?va:o.wrapperColStyle}),x=getValueByPath(o.model,a.field),N=reactive({}),R=reactive({}),j=computed(()=>getFinalValidateStatus(N)),ne=computed(()=>getFinalValidateMessage(R)),se=ref(!1),ce=computed(()=>getValueByPath(o.model,a.field)),fe=computed(()=>{var va;return!!((va=a.disabled)!=null?va:o?.disabled)}),ea=computed(()=>{var va;return(va=a.validateStatus)!=null?va:j.value}),ta=computed(()=>ea.value==="error"),na=computed(()=>{var va,ka,ya;const ba=[].concat((ya=(ka=a.rules)!=null?ka:(va=o?.rules)==null?void 0:va[a.field])!=null?ya:[]),Ea=ba.some(Ca=>Ca.required);return a.required&&!Ea?[{required:!0}].concat(ba):ba}),aa=computed(()=>na.value.some(va=>va.required)),ia=a.noStyle?inject(formItemInjectionKey,void 0):void 0,sa=(va,{status:ka,message:ya})=>{N[va]=ka,R[va]=ya,a.noStyle&&ia?.updateValidateState(va,{status:ka,message:ya})},ra=computed(()=>a.feedback&&ea.value?ea.value:void 0),la=()=>{var va;if(se.value)return Promise.resolve();const ka=na.value;if(!l.value||ka.length===0)return j.value&&pa(),Promise.resolve();const ya=l.value,ba=ce.value;sa(ya,{status:"",message:""});const Ea=new Schema({[ya]:ka.map(Ca=>{var $a=__objRest$1(Ca,[]);return!$a.type&&!$a.validator&&($a.type="string"),$a})},{ignoreEmptyString:!0,validateMessages:(va=d.value.form)==null?void 0:va.validateMessages});return new Promise(Ca=>{Ea.validate({[ya]:ba},$a=>{var Pa;const Da=!!$a?.[ya];sa(ya,{status:Da?"error":"",message:(Pa=$a?.[ya].message)!=null?Pa:""});const Ta=Da?{label:a.label,field:l.value,value:$a[ya].value,type:$a[ya].type,isRequiredError:!!$a[ya].requiredError,message:$a[ya].message}:void 0;Ca(Ta)})})},oa=computed(()=>[].concat(a.validateTrigger)),ca=computed(()=>oa.value.reduce((va,ka)=>{switch(ka){case"change":return va.onChange=()=>{la()},va;case"input":return va.onInput=()=>{nextTick(()=>{la()})},va;case"focus":return va.onFocus=()=>{la()},va;case"blur":return va.onBlur=()=>{la()},va;default:return va}},{}));provide(formItemInjectionKey,reactive({eventHandlers:ca,size:o&&toRef(o,"size"),disabled:fe,error:ta,feedback:ra,updateValidateState:sa}));const pa=()=>{l.value&&sa(l.value,{status:"",message:""})},ha=reactive({field:l,disabled:fe,error:ta,validate:la,clearValidate:pa,resetField:()=>{pa(),se.value=!0,o?.model&&l.value&&setValueByPath(o.model,l.value,x),nextTick(()=>{se.value=!1})},setField:va=>{var ka,ya;l.value&&(se.value=!0,"value"in va&&o?.model&&l.value&&setValueByPath(o.model,l.value,va.value),(va.status||va.message)&&sa(l.value,{status:(ka=va.status)!=null?ka:"",message:(ya=va.message)!=null?ya:""}),nextTick(()=>{se.value=!1}))}});onMounted(()=>{var va;ha.field&&((va=o.addField)==null||va.call(o,ha))}),onBeforeUnmount(()=>{var va;ha.field&&((va=o.removeField)==null||va.call(o,ha))});const ga=computed(()=>[s,`${s}-layout-${o.layout}`,{[`${s}-error`]:ta.value,[`${s}-status-${ea.value}`]:!!ea.value},a.rowClass]),fa=computed(()=>[`${s}-label-col`,{[`${s}-label-col-left`]:o.labelAlign==="left",[`${s}-label-col-flex`]:o.autoLabelWidth||a.labelColFlex}]),ma=computed(()=>[`${s}-wrapper-col`,{[`${s}-wrapper-col-flex`]:!g.value}]);return{prefixCls:s,cls:ga,isRequired:aa,isError:ta,finalMessage:ne,mergedLabelCol:f,mergedWrapperCol:g,labelColCls:fa,autoLabelWidth:c,layout:u,mergedLabelStyle:y,wrapperColCls:ma,mergedWrapperStyle:$}}});function _sfc_render$1A(a,s,l,o,c,u){var d;const f=resolveComponent("FormItemLabel"),g=resolveComponent("ArcoCol"),y=resolveComponent("FormItemMessage"),$=resolveComponent("ArcoRow");return a.noStyle?renderSlot(a.$slots,"default",{key:0}):(openBlock(),createBlock($,mergeProps({key:1,class:[a.cls,{[`${a.prefixCls}-has-help`]:!!((d=a.$slots.help)!=null?d:a.help)}],wrap:!(a.labelColFlex||a.autoLabelWidth),div:a.layout!=="horizontal"||a.hideLabel},a.rowProps),{default:withCtx(()=>[a.hideLabel?createCommentVNode("v-if",!0):(openBlock(),createBlock(g,mergeProps({key:0,class:a.labelColCls,style:a.mergedLabelStyle},a.mergedLabelCol),{default:withCtx(()=>[createVNode$1(f,{required:a.hideAsterisk?!1:a.isRequired,"show-colon":a.showColon,"asterisk-position":a.asteriskPosition,component:a.labelComponent,attrs:a.labelAttrs,tooltip:a.tooltip},{default:withCtx(()=>[a.$slots.label||a.label?renderSlot(a.$slots,"label",{key:0},()=>[createTextVNode(toDisplayString(a.label),1)]):createCommentVNode("v-if",!0)]),_:3},8,["required","show-colon","asterisk-position","component","attrs","tooltip"])]),_:3},16,["class","style"])),createVNode$1(g,mergeProps({class:a.wrapperColCls,style:a.mergedWrapperStyle},a.mergedWrapperCol),{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content-wrapper`)},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-content`,{[`${a.prefixCls}-content-flex`]:a.contentFlex},a.contentClass])},[renderSlot(a.$slots,"default")],2)],2),a.isError||a.$slots.help||a.help?(openBlock(),createBlock(y,{key:0,error:a.finalMessage,help:a.help},createSlots({_:2},[a.$slots.help?{name:"help",fn:withCtx(()=>[renderSlot(a.$slots,"help")])}:void 0]),1032,["error","help"])):createCommentVNode("v-if",!0),a.$slots.extra||a.extra?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-extra`)},[renderSlot(a.$slots,"extra",{},()=>[createTextVNode(toDisplayString(a.extra),1)])],2)):createCommentVNode("v-if",!0)]),_:3},16,["class","style"])]),_:3},16,["class","wrap","div"]))}var FormItem=_export_sfc(_sfc_main$1O,[["render",_sfc_render$1A]]);const Form=Object.assign(_Form,{Item:FormItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Form.name,_Form),a.component(l+FormItem.name,FormItem)}}),_sfc_main$1N=defineComponent({name:"Icon",props:{type:String,size:[Number,String],rotate:Number,spin:Boolean},setup(a){const s=getPrefixCls("icon"),l=computed(()=>{const c={};return a.size&&(c.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(c.transform=`rotate(${a.rotate}deg)`),c});return{cls:computed(()=>[s,{[`${s}-loading`]:a.spin},a.type]),innerStyle:l}}});function _sfc_render$1z(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),fill:"currentColor"},[renderSlot(a.$slots,"default")],6)}var _Icon=_export_sfc(_sfc_main$1N,[["render",_sfc_render$1z]]);function _isSlot$c(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}const scriptUrlCache=[],addFromIconFontCn=a=>{const{src:s,extraProps:l={}}=a;if(!isServerRendering&&s?.length&&!scriptUrlCache.includes(s)){const o=document.createElement("script");o.setAttribute("src",s),o.setAttribute("data-namespace",s),scriptUrlCache.push(s),document.body.appendChild(o)}return defineComponent({name:"IconFont",props:{type:String,size:[Number,String],rotate:Number,spin:Boolean},setup(o,{slots:c}){return()=>{var u;const d=o.type?createVNode$1("use",{"xlink:href":`#${o.type}`},null):(u=c.default)==null?void 0:u.call(c);return createVNode$1(_Icon,mergeProps(o,l),_isSlot$c(d)?d:{default:()=>[d]})}}})},Icon=Object.assign(_Icon,{addFromIconFontCn,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Icon.name,_Icon)}}),_sfc_main$1M=defineComponent({name:"ImageFooter",props:{title:{type:String},description:{type:String}},setup(){return{prefixCls:getPrefixCls("image-footer")}}}),_hoisted_1$U=["title"],_hoisted_2$G=["title"];function _sfc_render$1y(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[a.title||a.description?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-caption`)},[a.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-caption-title`),title:a.title},toDisplayString(a.title),11,_hoisted_1$U)):createCommentVNode("v-if",!0),a.description?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-caption-description`),title:a.description},toDisplayString(a.description),11,_hoisted_2$G)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),a.$slots.extra?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-extra`)},[renderSlot(a.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2)}var ImageFooter=_export_sfc(_sfc_main$1M,[["render",_sfc_render$1y]]);const _sfc_main$1L=defineComponent({name:"ImagePreviewArrow",components:{IconLeft,IconRight},props:{onPrev:{type:Function},onNext:{type:Function}},setup(){return{prefixCls:getPrefixCls("image-preview-arrow")}}});function _sfc_render$1x(a,s,l,o,c,u){const d=resolveComponent("icon-left"),f=resolveComponent("icon-right");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-left`,{[`${a.prefixCls}-disabled`]:!a.onPrev}]),onClick:s[0]||(s[0]=g=>{g.preventDefault(),a.onPrev&&a.onPrev()})},[createVNode$1(d)],2),createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-right`,{[`${a.prefixCls}-disabled`]:!a.onNext}]),onClick:s[1]||(s[1]=g=>{g.preventDefault(),a.onNext&&a.onNext()})},[createVNode$1(f)],2)],2)}var PreviewArrow=_export_sfc(_sfc_main$1L,[["render",_sfc_render$1x]]);function _isSlot$b(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var ImagePreviewAction=defineComponent({name:"ImagePreviewAction",components:{Tooltip},inheritAttrs:!1,props:{name:{type:String},disabled:{type:Boolean}},setup(a,{slots:s,attrs:l}){const o=getPrefixCls("image-preview-toolbar-action");return()=>{var c;const{name:u,disabled:d}=a,f=(c=s.default)==null?void 0:c.call(s);if(!f||!f.length)return null;const g=createVNode$1("div",mergeProps({class:[`${o}`,{[`${o}-disabled`]:d}],onMousedown:y=>{y.preventDefault()}},l),[createVNode$1("span",{class:`${o}-content`},[f])]);return u?createVNode$1(Tooltip,{class:`${o}-tooltip`,content:u},_isSlot$b(g)?g:{default:()=>[g]}):g}}}),_sfc_main$1K=defineComponent({name:"ImagePreviewToolbar",components:{RenderFunction,PreviewAction:ImagePreviewAction},props:{actions:{type:Array,default:()=>[]},actionsLayout:{type:Array,default:()=>[]}},setup(a){const{actions:s,actionsLayout:l}=toRefs(a),o=getPrefixCls("image-preview-toolbar"),c=computed(()=>{const u=new Set(l.value),d=g=>u.has(g.key);return s.value.filter(d).sort((g,y)=>{const $=l.value.indexOf(g.key),x=l.value.indexOf(y.key);return $>x?1:-1})});return{prefixCls:o,resultActions:c}}});function _sfc_render$1w(a,s,l,o,c,u){const d=resolveComponent("RenderFunction"),f=resolveComponent("PreviewAction");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.resultActions,g=>(openBlock(),createBlock(f,{key:g.key,name:g.name,disabled:g.disabled,onClick:g.onClick},{default:withCtx(()=>[createVNode$1(d,{"render-func":g.content},null,8,["render-func"])]),_:2},1032,["name","disabled","onClick"]))),128)),renderSlot(a.$slots,"default")],2)}var PreviewToolbar=_export_sfc(_sfc_main$1K,[["render",_sfc_render$1w]]);function useImageLoadStatus(a){const s=ref("beforeLoad"),l=computed(()=>s.value==="beforeLoad"),o=computed(()=>s.value==="loading"),c=computed(()=>s.value==="error"),u=computed(()=>s.value==="loaded");return{status:s,isBeforeLoad:l,isLoading:o,isError:c,isLoaded:u,setLoadStatus:d=>{s.value=d}}}function getFixTranslate(a,s,l,o,c){let u=l,d=o;return l&&(a.width>s.width?u=0:(s.left>a.left&&(u-=Math.abs(a.left-s.left)/c),s.right<a.right&&(u+=Math.abs(a.right-s.right)/c))),o&&(a.height>s.height?d=0:(s.top>a.top&&(d-=Math.abs(a.top-s.top)/c),s.bottom<a.bottom&&(d+=Math.abs(a.bottom-s.bottom)/c))),[u,d]}function useImageDrag(a){const{wrapperEl:s,imageEl:l,scale:o}=toRefs(a),c=ref([0,0]),u=ref(!1);let d=0,f=0,g=[0,0];const y=()=>{if(!s.value||!l.value)return;const j=s.value.getBoundingClientRect(),ne=l.value.getBoundingClientRect(),[se,ce]=getFixTranslate(j,ne,c.value[0],c.value[1],o.value);(se!==c.value[0]||ce!==c.value[1])&&(c.value=[se,ce])},$=j=>{j.preventDefault&&j.preventDefault();const ne=g[0]+(j.pageX-d)/o.value,se=g[1]+(j.pageY-f)/o.value;c.value=[ne,se]},x=j=>{j.preventDefault&&j.preventDefault(),u.value=!1,y(),R()},N=j=>{j.target===j.currentTarget&&(j.preventDefault&&j.preventDefault(),u.value=!0,d=j.pageX,f=j.pageY,g=[...c.value],on(window,"mousemove",$,!1),on(window,"mouseup",x,!1))};function R(){off(window,"mousemove",$,!1),off(window,"mouseup",x,!1)}return watchEffect(j=>{l.value&&on(l.value,"mousedown",N),j(()=>{l.value&&off(l.value,"mousedown",N),R()})}),watch([o],()=>{nextTick(()=>y())}),{translate:c,moving:u,resetTranslate(){c.value=[0,0]}}}const _sfc_main$1J=defineComponent({name:"IconZoomOut",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-zoom-out`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$T=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$F=createBaseVNode("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15"},null,-1),_hoisted_3$B=[_hoisted_2$F];function _sfc_render$1v(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$B,14,_hoisted_1$T)}var _IconZoomOut=_export_sfc(_sfc_main$1J,[["render",_sfc_render$1v]]);const IconZoomOut=Object.assign(_IconZoomOut,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconZoomOut.name,_IconZoomOut)}}),_sfc_main$1I=defineComponent({name:"IconZoomIn",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-zoom-in`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$S=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$E=createBaseVNode("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15m7 7V15"},null,-1),_hoisted_3$A=[_hoisted_2$E];function _sfc_render$1u(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$A,14,_hoisted_1$S)}var _IconZoomIn=_export_sfc(_sfc_main$1I,[["render",_sfc_render$1u]]);const IconZoomIn=Object.assign(_IconZoomIn,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconZoomIn.name,_IconZoomIn)}}),_sfc_main$1H=defineComponent({name:"IconFullscreen",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-fullscreen`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$R=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$D=createBaseVNode("path",{d:"M42 17V9a1 1 0 0 0-1-1h-8M6 17V9a1 1 0 0 1 1-1h8m27 23v8a1 1 0 0 1-1 1h-8M6 31v8a1 1 0 0 0 1 1h8"},null,-1),_hoisted_3$z=[_hoisted_2$D];function _sfc_render$1t(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$z,14,_hoisted_1$R)}var _IconFullscreen=_export_sfc(_sfc_main$1H,[["render",_sfc_render$1t]]);const IconFullscreen=Object.assign(_IconFullscreen,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFullscreen.name,_IconFullscreen)}}),_sfc_main$1G=defineComponent({name:"IconRotateLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-rotate-left`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$Q=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$C=createBaseVNode("path",{d:"M10 22a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H11a1 1 0 0 1-1-1V22ZM23 11h11a6 6 0 0 1 6 6v6M22.5 12.893 19.587 11 22.5 9.107v3.786Z"},null,-1),_hoisted_3$y=[_hoisted_2$C];function _sfc_render$1s(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$y,14,_hoisted_1$Q)}var _IconRotateLeft=_export_sfc(_sfc_main$1G,[["render",_sfc_render$1s]]);const IconRotateLeft=Object.assign(_IconRotateLeft,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconRotateLeft.name,_IconRotateLeft)}}),_sfc_main$1F=defineComponent({name:"IconRotateRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-rotate-right`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$P=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$B=createBaseVNode("path",{d:"M38 22a1 1 0 0 0-1-1H17a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V22ZM25 11H14a6 6 0 0 0-6 6v6M25.5 12.893 28.413 11 25.5 9.107v3.786Z"},null,-1),_hoisted_3$x=[_hoisted_2$B];function _sfc_render$1r(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$x,14,_hoisted_1$P)}var _IconRotateRight=_export_sfc(_sfc_main$1F,[["render",_sfc_render$1r]]);const IconRotateRight=Object.assign(_IconRotateRight,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconRotateRight.name,_IconRotateRight)}}),_sfc_main$1E=defineComponent({name:"IconOriginalSize",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-original-size`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$O=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$A=createBaseVNode("path",{d:"m5.5 11.5 5-2.5h1v32M34 11.5 39 9h1v32"},null,-1),_hoisted_3$w=createBaseVNode("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_4$d=createBaseVNode("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z"},null,-1),_hoisted_5$6=[_hoisted_2$A,_hoisted_3$w,_hoisted_4$d];function _sfc_render$1q(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_5$6,14,_hoisted_1$O)}var _IconOriginalSize=_export_sfc(_sfc_main$1E,[["render",_sfc_render$1q]]);const IconOriginalSize=Object.assign(_IconOriginalSize,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconOriginalSize.name,_IconOriginalSize)}});function usePopupOverflowHidden(a){const{container:s,hidden:l}=toRefs(a);let o=!1,c={};const u=g=>g.tagName==="BODY"?window.innerWidth-(document.body.clientWidth||document.documentElement.clientWidth):g.offsetWidth-g.clientWidth,d=()=>{if(s.value&&s.value.style.overflow!=="hidden"){const g=s.value.style;o=!0;const y=u(s.value);y&&(c.width=g.width,s.value.style.width=`calc(${s.value.style.width||"100%"} - ${y}px)`),c.overflow=g.overflow,s.value.style.overflow="hidden"}},f=()=>{if(s.value&&o){const g=c;Object.keys(g).forEach(y=>{s.value.style[y]=g[y]})}o=!1,c={}};return watchEffect(g=>{l.value?d():f(),g(()=>{f()})}),[f,d]}function usePopupContainer(a,s){const{popupContainer:l}=toRefs(s);return computed(()=>(isString$1(l.value)?querySelector(l.value):l.value)||a)}const scaleAttr=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map(a=>+(a/100).toFixed(2)),minScale=scaleAttr[0],maxScale=scaleAttr[scaleAttr.length-1];function getScale(a=1,s="zoomIn"){let l=scaleAttr.indexOf(a);return l===-1&&(l=findClosestIndex(a)),s==="zoomIn"?l===scaleAttr.length-1?a:scaleAttr[l+1]:l===0?a:scaleAttr[l-1]}function getScaleByRate(a,s=1.1,l="zoomIn"){const o=l==="zoomIn"?s:1/s,c=Number.parseFloat((a*o).toFixed(3));return Math.min(maxScale,Math.max(minScale,c))}function findClosestIndex(a){let s=scaleAttr.length-1;for(let l=0;l<scaleAttr.length;l++){const o=scaleAttr[l];if(a===o){s=l;break}if(a<o){const c=scaleAttr[l-1];s=c===void 0||Math.abs(c-a)<=Math.abs(o-a)?l-1:l;break}}return s}var __defProp$t=Object.defineProperty,__getOwnPropSymbols$u=Object.getOwnPropertySymbols,__hasOwnProp$u=Object.prototype.hasOwnProperty,__propIsEnum$u=Object.prototype.propertyIsEnumerable,__defNormalProp$t=(a,s,l)=>s in a?__defProp$t(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$t=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$u.call(s,l)&&__defNormalProp$t(a,l,s[l]);if(__getOwnPropSymbols$u)for(var l of __getOwnPropSymbols$u(s))__propIsEnum$u.call(s,l)&&__defNormalProp$t(a,l,s[l]);return a};const ROTATE_STEP=90;var _sfc_main$1D=defineComponent({name:"ImagePreview",components:{PreviewArrow,PreviewToolbar,IconLoading,IconClose},props:{renderToBody:{type:Boolean,default:!0},src:{type:String},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[Object,String]},inGroup:{type:Boolean,default:!1},groupArrowProps:{type:Object,default:()=>({})},escToClose:{type:Boolean,default:!0},wheelZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},defaultScale:{type:Number,default:1},zoomRate:{type:Number,default:1.1}},emits:["close","update:visible"],setup(a,{emit:s}){const{t:l}=useI18n(),{src:o,popupContainer:c,visible:u,defaultVisible:d,maskClosable:f,actionsLayout:g,defaultScale:y,zoomRate:$}=toRefs(a),x=ref(),N=ref(),R=getPrefixCls("image-preview"),[j,ne]=useMergeState(d.value,reactive({value:u})),se=computed(()=>[R,{[`${R}-hide`]:!j.value}]),ce=usePopupContainer(document.body,reactive({popupContainer:c})),fe=computed(()=>ce.value===document.body),{zIndex:ea}=usePopupManager("dialog",{visible:j}),ta=computed(()=>{const Ta=fe.value?{zIndex:ea.value,position:"fixed"}:{zIndex:"inherit",position:"absolute"};return __spreadValues$t({},Ta)}),{isLoading:na,isLoaded:aa,setLoadStatus:ia}=useImageLoadStatus(),sa=ref(0),ra=ref(y.value),{translate:la,moving:oa,resetTranslate:ca}=useImageDrag(reactive({wrapperEl:x,imageEl:N,visible:j,scale:ra})),pa=ref(!1);let ua=null;const da=()=>{!pa.value&&(pa.value=!0),ua&&clearTimeout(ua),ua=setTimeout(()=>{pa.value=!1},1e3)};usePopupOverflowHidden(reactive({container:ce,hidden:j}));function ha(){sa.value=0,ra.value=y.value,ca()}const ga=Ta=>g.value.includes(Ta),fa=Ta=>{switch(Ta.stopPropagation(),Ta.preventDefault(),Ta.key){case KEYBOARD_KEY.ESC:a.escToClose&&ba();break;case KEYBOARD_KEY.ARROW_LEFT:a.groupArrowProps.onPrev&&a.groupArrowProps.onPrev();break;case KEYBOARD_KEY.ARROW_RIGHT:a.groupArrowProps.onNext&&a.groupArrowProps.onNext();break;case KEYBOARD_KEY.ARROW_UP:ga("zoomIn")&&Da("zoomIn");break;case KEYBOARD_KEY.ARROW_DOWN:ga("zoomOut")&&Da("zoomOut");break;case KEYBOARD_KEY.SPACE:ga("originalSize")&&Ca(1);break}},ma=throttleByRaf(Ta=>{if(Ta.preventDefault(),Ta.stopPropagation(),!a.wheelZoom)return;const wa=(Ta.deltaY||Ta.deltaX)>0?"zoomOut":"zoomIn",Oa=getScaleByRate(ra.value,$.value,wa);Ca(Oa)});let va=!1;const ka=()=>{nextTick(()=>{var Ta;(Ta=x?.value)==null||Ta.focus()}),a.keyboard&&!va&&(va=!0,on(ce.value,"keydown",fa))},ya=()=>{va&&(va=!1,off(ce.value,"keydown",fa))};watch([o,j],()=>{j.value?(ha(),ia("loading"),ka()):ya()});function ba(){j.value&&(s("close"),s("update:visible",!1),ne(!1))}function Ea(Ta){var Ba;(Ba=x?.value)==null||Ba.focus(),f.value&&Ta.target===Ta.currentTarget&&ba()}function Ca(Ta){ra.value!==Ta&&(ra.value=Ta,da())}function $a(){const Ta=x.value.getBoundingClientRect(),Ba=N.value.getBoundingClientRect(),wa=Ta.height/(Ba.height/ra.value),Oa=Ta.width/(Ba.width/ra.value),Aa=Math.max(wa,Oa);Ca(Aa)}function Pa(Ta){const wa=Ta==="clockwise"?(sa.value+ROTATE_STEP)%360:sa.value===0?360-ROTATE_STEP:sa.value-ROTATE_STEP;sa.value=wa}function Da(Ta){const Ba=getScale(ra.value,Ta);Ca(Ba)}return onBeforeUnmount(()=>{ya()}),{prefixCls:R,classNames:se,container:ce,wrapperStyles:ta,scale:ra,translate:la,rotate:sa,moving:oa,mergedVisible:j,isLoading:na,isLoaded:aa,scaleValueVisible:pa,refWrapper:x,refImage:N,onWheel:ma,onMaskClick:Ea,onCloseClick:ba,onImgLoad(){ia("loaded")},onImgError(){ia("error")},actions:computed(()=>[{key:"fullScreen",name:l("imagePreview.fullScreen"),content:()=>h$1(IconFullscreen),onClick:()=>$a()},{key:"rotateRight",name:l("imagePreview.rotateRight"),content:()=>h$1(IconRotateRight),onClick:()=>Pa("clockwise")},{key:"rotateLeft",name:l("imagePreview.rotateLeft"),content:()=>h$1(IconRotateLeft),onClick:()=>Pa("counterclockwise")},{key:"zoomIn",name:l("imagePreview.zoomIn"),content:()=>h$1(IconZoomIn),onClick:()=>Da("zoomIn"),disabled:ra.value===maxScale},{key:"zoomOut",name:l("imagePreview.zoomOut"),content:()=>h$1(IconZoomOut),onClick:()=>Da("zoomOut"),disabled:ra.value===minScale},{key:"originalSize",name:l("imagePreview.originalSize"),content:()=>h$1(IconOriginalSize),onClick:()=>Ca(1)}])}}});const _hoisted_1$N=["src"];function _sfc_render$1p(a,s,l,o,c,u){const d=resolveComponent("IconLoading"),f=resolveComponent("PreviewToolbar"),g=resolveComponent("IconClose"),y=resolveComponent("PreviewArrow");return openBlock(),createBlock(Teleport,{to:a.container,disabled:!a.renderToBody},[createBaseVNode("div",{class:normalizeClass(a.classNames),style:normalizeStyle$1(a.wrapperStyles)},[createVNode$1(Transition,{name:"image-fade",onBeforeEnter:s[0]||(s[0]=$=>$.parentElement&&($.parentElement.style.display="block")),onAfterLeave:s[1]||(s[1]=$=>$.parentElement&&($.parentElement.style.display=""))},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-mask`)},null,2),[[vShow,a.mergedVisible]])]),_:1}),a.mergedVisible?(openBlock(),createElementBlock("div",{key:0,ref:"refWrapper",tabindex:"0",class:normalizeClass(`${a.prefixCls}-wrapper`),onClick:s[6]||(s[6]=(...$)=>a.onMaskClick&&a.onMaskClick(...$)),onWheel:s[7]||(s[7]=withModifiers((...$)=>a.onWheel&&a.onWheel(...$),["prevent","stop"]))},[createCommentVNode(" img "),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-img-container`),style:normalizeStyle$1({transform:`scale(${a.scale}, ${a.scale})`}),onClick:s[4]||(s[4]=(...$)=>a.onMaskClick&&a.onMaskClick(...$))},[(openBlock(),createElementBlock("img",{ref:"refImage",key:a.src,src:a.src,class:normalizeClass([`${a.prefixCls}-img`,{[`${a.prefixCls}-img-moving`]:a.moving}]),style:normalizeStyle$1({transform:`translate(${a.translate[0]}px, ${a.translate[1]}px) rotate(${a.rotate}deg)`}),onLoad:s[2]||(s[2]=(...$)=>a.onImgLoad&&a.onImgLoad(...$)),onError:s[3]||(s[3]=(...$)=>a.onImgError&&a.onImgError(...$))},null,46,_hoisted_1$N))],6),createCommentVNode(" loading "),a.isLoading?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-loading`)},[createVNode$1(d)],2)):createCommentVNode("v-if",!0),createCommentVNode(" scale value "),createVNode$1(Transition,{name:"image-fade"},{default:withCtx(()=>[a.scaleValueVisible?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-scale-value`)},toDisplayString((a.scale*100).toFixed(0))+"% ",3)):createCommentVNode("v-if",!0)]),_:1}),createCommentVNode(" toolbar "),a.isLoaded&&a.actionsLayout.length?(openBlock(),createBlock(f,{key:1,actions:a.actions,"actions-layout":a.actionsLayout},{default:withCtx(()=>[renderSlot(a.$slots,"actions")]),_:3},8,["actions","actions-layout"])):createCommentVNode("v-if",!0),createCommentVNode(" close btn "),a.closable?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[5]||(s[5]=(...$)=>a.onCloseClick&&a.onCloseClick(...$))},[createVNode$1(g)],2)):createCommentVNode("v-if",!0),createCommentVNode(" group arrow "),a.inGroup?(openBlock(),createBlock(y,normalizeProps(mergeProps({key:3},a.groupArrowProps)),null,16)):createCommentVNode("v-if",!0)],34)):createCommentVNode("v-if",!0)],6)],8,["to","disabled"])}var ImagePreview=_export_sfc(_sfc_main$1D,[["render",_sfc_render$1p]]);function normalizeImageSizeProp(a){if(isUndefined(a))return;if(!isNumber$1(a)&&/^\d+(%)$/.test(a))return a;const s=parseInt(a,10);return isNumber$1(s)?`${s}px`:void 0}const PreviewGroupInjectionKey=Symbol("PreviewGroupInjectionKey");var __defProp$s=Object.defineProperty,__getOwnPropSymbols$t=Object.getOwnPropertySymbols,__hasOwnProp$t=Object.prototype.hasOwnProperty,__propIsEnum$t=Object.prototype.propertyIsEnumerable,__defNormalProp$s=(a,s,l)=>s in a?__defProp$s(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$s=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$t.call(s,l)&&__defNormalProp$s(a,l,s[l]);if(__getOwnPropSymbols$t)for(var l of __getOwnPropSymbols$t(s))__propIsEnum$t.call(s,l)&&__defNormalProp$s(a,l,s[l]);return a};let uuid=0;const _sfc_main$1C=defineComponent({name:"Image",components:{IconImageClose,IconLoading,ImageFooter,ImagePreview},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},src:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},title:{type:String},description:{type:String},fit:{type:String},alt:{type:String},hideFooter:{type:[Boolean,String],default:!1},footerPosition:{type:String,default:"inner"},showLoader:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},previewVisible:{type:Boolean,default:void 0},defaultPreviewVisible:{type:Boolean,default:!1},previewProps:{type:Object},footerClass:{type:[String,Array,Object]}},emits:["preview-visible-change","update:previewVisible"],setup(a,{attrs:s,slots:l,emit:o}){const{t:c}=useI18n(),{height:u,width:d,hideFooter:f,title:g,description:y,src:$,footerPosition:x,defaultPreviewVisible:N,previewVisible:R,preview:j,previewProps:ne}=toRefs(a),se=inject(PreviewGroupInjectionKey,void 0),ce=getPrefixCls("image"),fe=ref(),{isLoaded:ea,isError:ta,isLoading:na,setLoadStatus:aa}=useImageLoadStatus(),ia=computed(()=>({width:normalizeImageSizeProp(d?.value),height:normalizeImageSizeProp(u?.value)})),sa=computed(()=>a.fit?{objectFit:a.fit}:{}),ra=computed(()=>[`${ce}`,{[`${ce}-loading`]:na.value,[`${ce}-loading-error`]:ta.value,[`${ce}-with-footer-inner`]:ea&&oa&&x.value==="inner",[`${ce}-with-footer-outer`]:ea&&oa&&x.value==="outer"},s.class]),la=computed(()=>[ia.value,s.style]),oa=computed(()=>g?.value||y?.value||l.extra?isBoolean$1(f.value)?!f.value&&ea.value:f.value==="never":!1),ca=computed(()=>omit(s,["class","style"])),[pa,ua]=useMergeState(N.value,reactive({value:R})),da=computed(()=>!se?.preview&&j.value);watchEffect(()=>{isServerRendering||!fe.value||(fe.value.src=$?.value,aa("loading"))});const ha=uuid++;watchEffect(ka=>{var ya,ba,Ea;const Ca=(Ea=se?.registerImageUrl)==null?void 0:Ea.call(se,ha,((ba=(ya=ne?.value)==null?void 0:ya.src)!=null?ba:$?.value)||"",j.value);ka(()=>{Ca?.()})});function ga(){aa("loaded")}function fa(){aa("error")}function ma(){j.value&&(se?.preview?se.preview(ha):(o("preview-visible-change",!0),ua(!0)))}function va(){o("preview-visible-change",!1),ua(!1)}return{t:c,refImg:fe,prefixCls:ce,wrapperClassNames:ra,wrapperStyles:la,showFooter:oa,imgProps:ca,imgStyle:ia,isLoaded:ea,isError:ta,isLoading:na,mergedPreviewVisible:pa,mergePreview:da,onImgLoaded:ga,onImgLoadError:fa,onImgClick:ma,onPreviewClose:va,fitStyle:sa}}}),_hoisted_1$M=["title","alt"];function _sfc_render$1o(a,s,l,o,c,u){const d=resolveComponent("IconImageClose"),f=resolveComponent("IconLoading"),g=resolveComponent("ImageFooter"),y=resolveComponent("ImagePreview");return openBlock(),createElementBlock("div",{class:normalizeClass(a.wrapperClassNames),style:normalizeStyle$1(a.wrapperStyles)},[createBaseVNode("img",mergeProps({ref:"refImg",class:`${a.prefixCls}-img`},a.imgProps,{style:__spreadValues$s(__spreadValues$s({},a.imgStyle),a.fitStyle),title:a.title,alt:a.alt,onLoad:s[0]||(s[0]=(...$)=>a.onImgLoaded&&a.onImgLoaded(...$)),onError:s[1]||(s[1]=(...$)=>a.onImgLoadError&&a.onImgLoadError(...$)),onClick:s[2]||(s[2]=(...$)=>a.onImgClick&&a.onImgClick(...$))}),null,16,_hoisted_1$M),a.isLoaded?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-overlay`)},[a.isError?renderSlot(a.$slots,"error",{key:0},()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-error`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-error-icon`)},[renderSlot(a.$slots,"error-icon",{},()=>[createVNode$1(d)])],2),a.alt||a.description?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-error-alt`)},toDisplayString(a.alt||a.description),3)):createCommentVNode("v-if",!0)],2)]):createCommentVNode("v-if",!0),a.isLoading&&(a.showLoader||a.$slots.loader)?renderSlot(a.$slots,"loader",{key:1},()=>[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-loader`])},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-loader-spin`)},[createVNode$1(f),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-loader-spin-text`)},toDisplayString(a.t("image.loading")),3)],2)],2)]):createCommentVNode("v-if",!0)],2)),a.showFooter?(openBlock(),createBlock(g,{key:1,class:normalizeClass(a.footerClass),"prefix-cls":a.prefixCls,title:a.title,description:a.description},createSlots({_:2},[a.$slots.extra?{name:"extra",fn:withCtx(()=>[renderSlot(a.$slots,"extra")])}:void 0]),1032,["class","prefix-cls","title","description"])):createCommentVNode("v-if",!0),a.isLoaded&&a.mergePreview?(openBlock(),createBlock(y,mergeProps({key:2,src:a.src},a.previewProps,{visible:a.mergedPreviewVisible,"render-to-body":a.renderToBody,onClose:a.onPreviewClose}),{actions:withCtx(()=>[renderSlot(a.$slots,"preview-actions")]),_:3},16,["src","visible","render-to-body","onClose"])):createCommentVNode("v-if",!0)],6)}var _Image=_export_sfc(_sfc_main$1C,[["render",_sfc_render$1o]]),_sfc_main$1B=defineComponent({name:"ImagePreviewGroup",components:{ImagePreview},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},srcList:{type:Array},current:{type:Number},defaultCurrent:{type:Number,default:0},infinite:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[String,Object]}},emits:["change","update:current","visible-change","update:visible"],setup(a,{emit:s}){const{srcList:l,visible:o,defaultVisible:c,current:u,defaultCurrent:d,infinite:f}=toRefs(a),[g,y]=useMergeState(c.value,reactive({value:o})),$=la=>{la!==g.value&&(s("visible-change",la),s("update:visible",la),y(la))},x=computed(()=>new Map(isArray$1(l?.value)?l?.value.map((la,oa)=>[oa,{url:la,canPreview:!0}]):[])),N=ref(new Map(x.value||[])),R=computed(()=>Array.from(N.value.keys())),j=computed(()=>R.value.length);function ne(la,oa,ca){return x.value.has(la)||N.value.set(la,{url:oa,canPreview:ca}),function(){x.value.has(la)||N.value.delete(la)}}watch(x,()=>{N.value=new Map(x.value||[])});const[se,ce]=useMergeState(d.value,reactive({value:u})),fe=la=>{la!==se.value&&(s("change",la),s("update:current",la),ce(la))},ea=computed(()=>R.value[se.value]),ta=la=>{const oa=R.value.indexOf(la);oa!==se.value&&fe(oa)},na=computed(()=>{var la;return(la=N.value.get(ea.value))==null?void 0:la.url});provide(PreviewGroupInjectionKey,reactive({registerImageUrl:ne,preview:la=>{$(!0),ta(la)}}));const aa=computed(()=>{const la=(ca,pa)=>{var ua;for(let da=ca;da<=pa;da++){const ha=R.value[da];if((ua=N.value.get(ha))!=null&&ua.canPreview)return da}},oa=la(se.value+1,j.value-1);return isUndefined(oa)&&f.value?la(0,se.value-1):oa}),ia=computed(()=>{const la=(ca,pa)=>{var ua;for(let da=ca;da>=pa;da--){const ha=R.value[da];if((ua=N.value.get(ha))!=null&&ua.canPreview)return da}},oa=la(se.value-1,0);return isUndefined(oa)&&f.value?la(j.value-1,se.value+1):oa}),sa=computed(()=>isUndefined(ia.value)?void 0:()=>{!isUndefined(ia.value)&&fe(ia.value)}),ra=computed(()=>isUndefined(aa.value)?void 0:()=>{!isUndefined(aa.value)&&fe(aa.value)});return{mergedVisible:g,currentUrl:na,prevIndex:ia,nextIndex:aa,onClose(){$(!1)},groupArrowProps:reactive({onPrev:sa,onNext:ra})}}}),__defProp$r=Object.defineProperty,__defProps$g=Object.defineProperties,__getOwnPropDescs$g=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$s=Object.getOwnPropertySymbols,__hasOwnProp$s=Object.prototype.hasOwnProperty,__propIsEnum$s=Object.prototype.propertyIsEnumerable,__defNormalProp$r=(a,s,l)=>s in a?__defProp$r(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$r=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$s.call(s,l)&&__defNormalProp$r(a,l,s[l]);if(__getOwnPropSymbols$s)for(var l of __getOwnPropSymbols$s(s))__propIsEnum$s.call(s,l)&&__defNormalProp$r(a,l,s[l]);return a},__spreadProps$g=(a,s)=>__defProps$g(a,__getOwnPropDescs$g(s));function _sfc_render$1n(a,s,l,o,c,u){const d=resolveComponent("ImagePreview");return openBlock(),createElementBlock(Fragment,null,[renderSlot(a.$slots,"default"),createVNode$1(d,mergeProps(__spreadProps$g(__spreadValues$r({},a.$attrs),{groupArrowProps:a.groupArrowProps}),{"in-group":"",src:a.currentUrl,visible:a.mergedVisible,"mask-closable":a.maskClosable,closable:a.closable,"actions-layout":a.actionsLayout,"popup-container":a.popupContainer,"render-to-body":a.renderToBody,onClose:a.onClose}),createSlots({_:2},[a.$slots.actions?{name:"actions",fn:withCtx(()=>[renderSlot(a.$slots,"actions",{url:a.currentUrl})])}:void 0]),1040,["src","visible","mask-closable","closable","actions-layout","popup-container","render-to-body","onClose"])],64)}var ImagePreviewGroup=_export_sfc(_sfc_main$1B,[["render",_sfc_render$1n]]);const Image$1=Object.assign(_Image,{Preview:ImagePreview,PreviewGroup:ImagePreviewGroup,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Image.name,_Image),a.component(l+ImagePreview.name,ImagePreview),a.component(l+ImagePreviewGroup.name,ImagePreviewGroup),a.component(l+ImagePreviewAction.name,ImagePreviewAction)}}),LayoutSiderInjectionKey=Symbol("LayoutSiderInjectionKey"),SiderInjectionKey=Symbol("SiderInjectionKey");var _sfc_main$1A=defineComponent({name:"Layout",props:{hasSider:{type:Boolean}},setup(a){const s=ref([]),l=getPrefixCls("layout"),o=computed(()=>[l,{[`${l}-has-sider`]:a.hasSider||s.value.length}]);return provide(LayoutSiderInjectionKey,{onSiderMount:c=>s.value.push(c),onSiderUnMount:c=>{s.value=s.value.filter(u=>u!==c)}}),{classNames:o}}});function _sfc_render$1m(a,s,l,o,c,u){return openBlock(),createElementBlock("section",{class:normalizeClass(a.classNames)},[renderSlot(a.$slots,"default")],2)}var _Layout=_export_sfc(_sfc_main$1A,[["render",_sfc_render$1m]]);const _sfc_main$1z=defineComponent({name:"LayoutHeader",setup(){return{classNames:[getPrefixCls("layout-header")]}}});function _sfc_render$1l(a,s,l,o,c,u){return openBlock(),createElementBlock("header",{class:normalizeClass(a.classNames)},[renderSlot(a.$slots,"default")],2)}var LayoutHeader=_export_sfc(_sfc_main$1z,[["render",_sfc_render$1l]]);const _sfc_main$1y=defineComponent({name:"LayoutContent",setup(){return{classNames:[getPrefixCls("layout-content")]}}});function _sfc_render$1k(a,s,l,o,c,u){return openBlock(),createElementBlock("main",{class:normalizeClass(a.classNames)},[renderSlot(a.$slots,"default")],2)}var LayoutContent=_export_sfc(_sfc_main$1y,[["render",_sfc_render$1k]]);const _sfc_main$1x=defineComponent({name:"LayoutFooter",setup(){return{classNames:[getPrefixCls("layout-footer")]}}});function _sfc_render$1j(a,s,l,o,c,u){return openBlock(),createElementBlock("footer",{class:normalizeClass(a.classNames)},[renderSlot(a.$slots,"default")],2)}var LayoutFooter=_export_sfc(_sfc_main$1x,[["render",_sfc_render$1j]]);const _sfc_main$1w=defineComponent({name:"IconDragDot",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-drag-dot`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$L=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$z=createBaseVNode("path",{d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$v=createBaseVNode("path",{d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z"},null,-1),_hoisted_4$c=[_hoisted_2$z,_hoisted_3$v];function _sfc_render$1i(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$c,14,_hoisted_1$L)}var _IconDragDot=_export_sfc(_sfc_main$1w,[["render",_sfc_render$1i]]);const IconDragDot=Object.assign(_IconDragDot,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDragDot.name,_IconDragDot)}}),_sfc_main$1v=defineComponent({name:"IconDragDotVertical",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-drag-dot-vertical`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$K=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$y=createBaseVNode("path",{d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$u=createBaseVNode("path",{d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z"},null,-1),_hoisted_4$b=[_hoisted_2$y,_hoisted_3$u];function _sfc_render$1h(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$b,14,_hoisted_1$K)}var _IconDragDotVertical=_export_sfc(_sfc_main$1v,[["render",_sfc_render$1h]]);const IconDragDotVertical=Object.assign(_IconDragDotVertical,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDragDotVertical.name,_IconDragDotVertical)}});var _sfc_main$1u=defineComponent({name:"ResizeTrigger",components:{ResizeObserver:ResizeObserver$2,IconDragDot,IconDragDotVertical},props:{prefixCls:{type:String,required:!0},direction:{type:String,default:"horizontal"}},emits:["resize"],setup(a,{emit:s}){const{direction:l,prefixCls:o}=toRefs(a),c=computed(()=>l?.value==="horizontal");return{classNames:computed(()=>[o.value,{[`${o.value}-horizontal`]:c.value,[`${o.value}-vertical`]:!c.value}]),onResize:f=>{s("resize",f)},isHorizontal:c}}});function _sfc_render$1g(a,s,l,o,c,u){const d=resolveComponent("IconDragDot"),f=resolveComponent("IconDragDotVertical"),g=resolveComponent("ResizeObserver");return openBlock(),createBlock(g,{onResize:a.onResize},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(a.classNames)},[createCommentVNode(" @slot 自定义内容 "),renderSlot(a.$slots,"default",{},()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-icon-wrapper`)},[createCommentVNode(" @slot 自定义 icon "),renderSlot(a.$slots,"icon",{},()=>[a.isHorizontal?(openBlock(),createBlock(d,{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},null,8,["class"])):(openBlock(),createBlock(f,{key:1,class:normalizeClass(`${a.prefixCls}-icon`)},null,8,["class"]))])],2)])],2)]),_:3},8,["onResize"])}var ResizeTrigger=_export_sfc(_sfc_main$1u,[["render",_sfc_render$1g]]),__defProp$q=Object.defineProperty,__getOwnPropSymbols$r=Object.getOwnPropertySymbols,__hasOwnProp$r=Object.prototype.hasOwnProperty,__propIsEnum$r=Object.prototype.propertyIsEnumerable,__defNormalProp$q=(a,s,l)=>s in a?__defProp$q(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$q=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$r.call(s,l)&&__defNormalProp$q(a,l,s[l]);if(__getOwnPropSymbols$r)for(var l of __getOwnPropSymbols$r(s))__propIsEnum$r.call(s,l)&&__defNormalProp$q(a,l,s[l]);return a};const DIRECTION_LEFT="left",DIRECTION_RIGHT="right",DIRECTION_TOP="top",DIRECTION_BOTTOM="bottom",allDirections=[DIRECTION_LEFT,DIRECTION_RIGHT,DIRECTION_TOP,DIRECTION_BOTTOM];function getRealSize(a,s){if(a===0)return 0;const l=a-s;return l<=0?0:l}function isHorizontal(a){return[DIRECTION_TOP,DIRECTION_BOTTOM].indexOf(a)>-1}const _sfc_main$1t=defineComponent({name:"ResizeBox",components:{ResizeTrigger},inheritAttrs:!1,props:{width:{type:Number},height:{type:Number},component:{type:String,default:"div"},directions:{type:Array,default:()=>["right"]}},emits:{"update:width":a=>!0,"update:height":a=>!0,movingStart:a=>!0,moving:(a,s)=>!0,movingEnd:a=>!0},setup(a,{emit:s}){const{height:l,width:o,directions:c}=toRefs(a),[u,d]=useMergeState(null,reactive({value:o})),[f,g]=useMergeState(null,reactive({value:l})),y=ref(),$=reactive({}),x=getPrefixCls("resizebox"),N=computed(()=>[x]),R=computed(()=>__spreadValues$q(__spreadValues$q(__spreadValues$q({},isNumber$1(u.value)?{width:`${u.value}px`}:{}),isNumber$1(f.value)?{height:`${f.value}px`}:{}),$)),j=computed(()=>c.value.filter(ta=>allDirections.includes(ta))),ne={direction:"",startPageX:0,startPageY:0,startWidth:0,startHeight:0,moving:!1,padding:{left:0,right:0,top:0,bottom:0}};function se(ta){if(!ne.moving)return;const{startPageX:na,startPageY:aa,startWidth:ia,startHeight:sa,direction:ra}=ne;let la=ia,oa=sa;const ca=ta.pageX-na,pa=ta.pageY-aa;switch(ra){case DIRECTION_LEFT:la=ia-ca,d(la),s("update:width",la);break;case DIRECTION_RIGHT:la=ia+ca,d(la),s("update:width",la);break;case DIRECTION_TOP:oa=sa-pa,g(oa),s("update:height",oa);break;case DIRECTION_BOTTOM:oa=sa+pa,g(oa),s("update:height",oa);break}s("moving",{width:la,height:oa},ta)}function ce(ta){ne.moving=!1,off(window,"mousemove",se),off(window,"mouseup",ce),off(window,"contextmenu",ce),document.body.style.cursor="default",s("movingEnd",ta)}function fe(ta,na){var aa,ia;s("movingStart",na),ne.moving=!0,ne.startPageX=na.pageX,ne.startPageY=na.pageY,ne.direction=ta;const{top:sa,left:ra,right:la,bottom:oa}=ne.padding;ne.startWidth=getRealSize(((aa=y.value)==null?void 0:aa.clientWidth)||0,ra+la),ne.startHeight=getRealSize(((ia=y.value)==null?void 0:ia.clientHeight)||0,sa+oa),on(window,"mousemove",se),on(window,"mouseup",ce),on(window,"contextmenu",ce),document.body.style.cursor=isHorizontal(ta)?"row-resize":"col-resize"}function ea(ta,na){const{width:aa,height:ia}=na.contentRect,sa=isHorizontal(ta)?ia:aa;ne.padding[ta]=sa,$[`padding-${ta}`]=`${sa}px`}return{prefixCls:x,classNames:N,styles:R,wrapperRef:y,onMoveStart:fe,isHorizontal,allowDirections:j,onTiggerResize:ea}}});function _sfc_render$1f(a,s,l,o,c,u){const d=resolveComponent("ResizeTrigger");return openBlock(),createBlock(resolveDynamicComponent(a.component),mergeProps({ref:"wrapperRef",class:a.classNames},a.$attrs,{style:a.styles}),{default:withCtx(()=>[renderSlot(a.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.allowDirections,f=>(openBlock(),createBlock(d,{key:f,"prefix-cls":`${a.prefixCls}-trigger`,class:normalizeClass(`${a.prefixCls}-direction-${f}`),direction:a.isHorizontal(f)?"horizontal":"vertical",onMousedown:g=>{a.onMoveStart(f,g)},onResize:g=>{a.onTiggerResize(f,g)}},createSlots({default:withCtx(()=>[a.$slots["resize-trigger"]?renderSlot(a.$slots,"resize-trigger",{key:0,direction:f}):createCommentVNode("v-if",!0)]),_:2},[a.$slots["resize-trigger-icon"]?{name:"icon",fn:withCtx(()=>[renderSlot(a.$slots,"resize-trigger-icon",{direction:f})])}:void 0]),1032,["prefix-cls","class","direction","onMousedown","onResize"]))),128))]),_:3},16,["class","style"])}var _ResizeBox=_export_sfc(_sfc_main$1t,[["render",_sfc_render$1f]]);const ResizeBox=Object.assign(_ResizeBox,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_ResizeBox.name,_ResizeBox)}});function useResponsive(a,s){const l=computed(()=>isRef(a)?a.value:a);let o="";onMounted(()=>{o=responsiveObserve.subscribe((c,u)=>{l.value&&(!u||u===l.value)&&s(!!c[l.value])})}),onUnmounted(()=>{o&&responsiveObserve.unsubscribe(o)})}const generateId$1=(()=>{let a=0;return(s="")=>(a+=1,`${s}${a}`)})();var _sfc_main$1s=defineComponent({name:"LayoutSider",components:{IconLeft,IconRight,ResizeBox},props:{theme:{type:String,default:"light"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean},collapsible:{type:Boolean},width:{type:Number,default:200},collapsedWidth:{type:Number,default:48},reverseArrow:{type:Boolean},breakpoint:{type:String},resizeDirections:{type:Array,default:void 0},hideTrigger:{type:Boolean}},emits:["collapse","update:collapsed","breakpoint"],setup(a,{emit:s}){const{theme:l,collapsed:o,defaultCollapsed:c,collapsible:u,hideTrigger:d,breakpoint:f,collapsedWidth:g,resizeDirections:y}=toRefs(a),[$,x]=useMergeState(c.value,reactive({value:o})),N=computed(()=>y.value?"ResizeBox":"div"),R=computed(()=>u.value&&!d.value),j=getPrefixCls("layout-sider"),ne=computed(()=>[j,{[`${j}-light`]:l.value==="light",[`${j}-has-trigger`]:R.value,[`${j}-collapsed`]:o.value}]),se=computed(()=>{const{width:na,collapsedWidth:aa}=a,ia=$.value?aa:na;return isNumber$1(ia)?`${ia}px`:String(ia)}),ce=computed(()=>[`${j}-trigger`,{[`${j}-trigger-light`]:l.value==="light"}]),fe=()=>{const na=!$.value;x(na),s("update:collapsed",na),s("collapse",na,"clickTrigger")};useResponsive(f,na=>{const aa=!na;aa!==$.value&&(x(aa),s("update:collapsed",aa),s("collapse",aa,"responsive"),s("breakpoint",aa))});const ea=generateId$1("__arco_layout_sider"),ta=inject(LayoutSiderInjectionKey,void 0);return onMounted(()=>{var na;(na=ta?.onSiderMount)==null||na.call(ta,ea)}),onUnmounted(()=>{var na;(na=ta?.onSiderUnMount)==null||na.call(ta,ea)}),provide(SiderInjectionKey,reactive({theme:l,collapsed:$,collapsedWidth:g})),{componentTag:N,prefixCls:j,classNames:ne,triggerClassNames:ce,localCollapsed:$,siderWidth:se,showTrigger:R,toggleTrigger:fe}}});const _hoisted_1$J={key:0},_hoisted_2$x={key:1};function _sfc_render$1e(a,s,l,o,c,u){const d=resolveComponent("IconLeft"),f=resolveComponent("IconRight");return openBlock(),createBlock(resolveDynamicComponent(a.componentTag),mergeProps({class:a.classNames,style:{width:a.siderWidth}},a.resizeDirections?{directions:a.resizeDirections}:{}),{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-children`)},[renderSlot(a.$slots,"default")],2),a.showTrigger?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.triggerClassNames),style:normalizeStyle$1({width:a.siderWidth}),onClick:s[0]||(s[0]=(...g)=>a.toggleTrigger&&a.toggleTrigger(...g))},[renderSlot(a.$slots,"trigger",{collapsed:a.localCollapsed},()=>[a.reverseArrow?(openBlock(),createElementBlock("div",_hoisted_2$x,[a.localCollapsed?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1}))])):(openBlock(),createElementBlock("div",_hoisted_1$J,[a.localCollapsed?(openBlock(),createBlock(f,{key:1})):(openBlock(),createBlock(d,{key:0}))]))])],6)):createCommentVNode("v-if",!0)]),_:3},16,["class","style"])}var LayoutSider=_export_sfc(_sfc_main$1s,[["render",_sfc_render$1e]]);const Layout=Object.assign(_Layout,{Header:LayoutHeader,Content:LayoutContent,Footer:LayoutFooter,Sider:LayoutSider,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Layout.name,_Layout),a.component(l+LayoutHeader.name,LayoutHeader),a.component(l+LayoutContent.name,LayoutContent),a.component(l+LayoutFooter.name,LayoutFooter),a.component(l+LayoutSider.name,LayoutSider)}}),_sfc_main$1r=defineComponent({name:"Pager",props:{pageNumber:{type:Number},current:{type:Number},disabled:{type:Boolean,default:!1},style:{type:Object},activeStyle:{type:Object}},emits:["click"],setup(a,{emit:s}){const l=getPrefixCls("pagination-item"),o=computed(()=>a.current===a.pageNumber),c=f=>{a.disabled||s("click",a.pageNumber,f)},u=computed(()=>[l,{[`${l}-active`]:o.value}]),d=computed(()=>o.value?a.activeStyle:a.style);return{prefixCls:l,cls:u,mergedStyle:d,handleClick:c}}});function _sfc_render$1d(a,s,l,o,c,u){return openBlock(),createElementBlock("li",{class:normalizeClass(a.cls),style:normalizeStyle$1(a.mergedStyle),onClick:s[0]||(s[0]=(...d)=>a.handleClick&&a.handleClick(...d))},[renderSlot(a.$slots,"default",{page:a.pageNumber},()=>[createTextVNode(toDisplayString(a.pageNumber),1)])],6)}var Pager=_export_sfc(_sfc_main$1r,[["render",_sfc_render$1d]]);const getLegalPage=(a,{min:s,max:l})=>a<s?s:a>l?l:a,_sfc_main$1q=defineComponent({name:"StepPager",components:{IconLeft,IconRight},props:{pages:{type:Number,required:!0},current:{type:Number,required:!0},type:{type:String,required:!0},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!1}},emits:["click"],setup(a,{emit:s}){const l=getPrefixCls("pagination-item"),o=a.type==="next",c=computed(()=>a.disabled?a.disabled:!a.pages||o&&a.current===a.pages?!0:!o&&a.current<=1),u=computed(()=>getLegalPage(a.current+(o?1:-1),{min:1,max:a.pages})),d=g=>{c.value||s("click",u.value)},f=computed(()=>[l,`${l}-${a.type}`,{[`${l}-disabled`]:c.value}]);return{prefixCls:l,cls:f,isNext:o,handleClick:d}}});function _sfc_render$1c(a,s,l,o,c,u){const d=resolveComponent("icon-right"),f=resolveComponent("icon-left");return openBlock(),createBlock(resolveDynamicComponent(a.simple?"span":"li"),{class:normalizeClass(a.cls),onClick:a.handleClick},{default:withCtx(()=>[renderSlot(a.$slots,"default",{type:a.isNext?"next":"previous"},()=>[a.isNext?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1}))])]),_:3},8,["class","onClick"])}var StepPager=_export_sfc(_sfc_main$1q,[["render",_sfc_render$1c]]);const _sfc_main$1p=defineComponent({name:"EllipsisPager",components:{IconMore},props:{current:{type:Number,required:!0},step:{type:Number,default:5},pages:{type:Number,required:!0}},emits:["click"],setup(a,{emit:s}){const l=getPrefixCls("pagination-item"),o=computed(()=>getLegalPage(a.current+a.step,{min:1,max:a.pages})),c=d=>{s("click",o.value)},u=computed(()=>[l,`${l}-ellipsis`]);return{prefixCls:l,cls:u,handleClick:c}}});function _sfc_render$1b(a,s,l,o,c,u){const d=resolveComponent("icon-more");return openBlock(),createElementBlock("li",{class:normalizeClass(a.cls),onClick:s[0]||(s[0]=(...f)=>a.handleClick&&a.handleClick(...f))},[renderSlot(a.$slots,"default",{},()=>[createVNode$1(d)])],2)}var EllipsisPager=_export_sfc(_sfc_main$1p,[["render",_sfc_render$1b]]);const _sfc_main$1o=defineComponent({name:"PageJumper",components:{InputNumber},props:{current:{type:Number,required:!0},simple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},pages:{type:Number,required:!0},size:{type:String},onChange:{type:Function}},emits:["change"],setup(a,{emit:s}){const l=getPrefixCls("pagination-jumper"),{t:o}=useI18n(),c=ref(a.simple?a.current:void 0),u=g=>{const y=parseInt(g.toString(),10);return Number.isNaN(y)?void 0:String(y)},d=g=>{s("change",c.value),nextTick(()=>{a.simple||(c.value=void 0)})};watch(()=>a.current,g=>{a.simple&&g!==c.value&&(c.value=g)});const f=computed(()=>[l,{[`${l}-simple`]:a.simple}]);return{prefixCls:l,cls:f,t:o,inputValue:c,handleChange:d,handleFormatter:u}}});function _sfc_render$1a(a,s,l,o,c,u){const d=resolveComponent("input-number");return openBlock(),createElementBlock("span",{class:normalizeClass(a.cls)},[a.simple?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([`${a.prefixCls}-prepend`,`${a.prefixCls}-text-goto`])},[renderSlot(a.$slots,"jumper-prepend",{},()=>[createTextVNode(toDisplayString(a.t("pagination.goto")),1)])],2)),createVNode$1(d,{modelValue:a.inputValue,"onUpdate:modelValue":s[0]||(s[0]=f=>a.inputValue=f),class:normalizeClass(`${a.prefixCls}-input`),min:1,max:a.pages,size:a.size,disabled:a.disabled,"hide-button":"",formatter:a.handleFormatter,onChange:a.handleChange},null,8,["modelValue","class","max","size","disabled","formatter","onChange"]),a.$slots["jumper-append"]?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-append`)},[renderSlot(a.$slots,"jumper-append")],2)):createCommentVNode("v-if",!0),a.simple?(openBlock(),createElementBlock(Fragment,{key:2},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-separator`)},"/",2),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-total-page`)},toDisplayString(a.pages),3)],64)):createCommentVNode("v-if",!0)],2)}var PageJumper=_export_sfc(_sfc_main$1o,[["render",_sfc_render$1a]]);const _sfc_main$1n=defineComponent({name:"PageOptions",components:{ArcoSelect:Select},props:{sizeOptions:{type:Array,required:!0},pageSize:Number,disabled:Boolean,size:{type:String},onChange:{type:Function},selectProps:{type:Object}},emits:["change"],setup(a,{emit:s}){const l=getPrefixCls("pagination-options"),{t:o}=useI18n(),c=computed(()=>a.sizeOptions.map(d=>({value:d,label:`${d} ${o("pagination.countPerPage")}`})));return{prefixCls:l,options:c,handleChange:d=>{s("change",d)}}}});function _sfc_render$19(a,s,l,o,c,u){const d=resolveComponent("arco-select");return openBlock(),createElementBlock("span",{class:normalizeClass(a.prefixCls)},[createVNode$1(d,mergeProps({"model-value":a.pageSize,options:a.options,size:a.size,disabled:a.disabled},a.selectProps,{onChange:a.handleChange}),null,16,["model-value","options","size","disabled","onChange"])],2)}var PageOptions=_export_sfc(_sfc_main$1n,[["render",_sfc_render$19]]),_Pagination=defineComponent({name:"Pagination",props:{total:{type:Number,required:!0},current:Number,defaultCurrent:{type:Number,default:1},pageSize:Number,defaultPageSize:{type:Number,default:10},disabled:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1},showJumper:{type:Boolean,default:!1},showPageSize:{type:Boolean,default:!1},pageSizeOptions:{type:Array,default:()=>[10,20,30,40,50]},pageSizeProps:{type:Object},size:{type:String},pageItemStyle:{type:Object},activePageItemStyle:{type:Object},baseSize:{type:Number,default:6},bufferSize:{type:Number,default:2},autoAdjust:{type:Boolean,default:!0}},emits:{"update:current":a=>!0,"update:pageSize":a=>!0,change:a=>!0,pageSizeChange:a=>!0},setup(a,{emit:s,slots:l}){const o=getPrefixCls("pagination"),{t:c}=useI18n(),{disabled:u,pageItemStyle:d,activePageItemStyle:f,size:g}=toRefs(a),{mergedSize:y}=useSize$1(g),$=ref(a.defaultCurrent),x=ref(a.defaultPageSize),N=computed(()=>{var aa;return(aa=a.current)!=null?aa:$.value}),R=computed(()=>{var aa;return(aa=a.pageSize)!=null?aa:x.value}),j=computed(()=>Math.ceil(a.total/R.value)),ne=aa=>{aa!==N.value&&isNumber$1(aa)&&!a.disabled&&($.value=aa,s("update:current",aa),s("change",aa))},se=aa=>{x.value=aa,s("update:pageSize",aa),s("pageSizeChange",aa)},ce=reactive({current:N,pages:j,disabled:u,style:d,activeStyle:f,onClick:ne}),fe=(aa,ia={})=>aa==="more"?createVNode$1(EllipsisPager,mergeProps(ia,ce),{default:l["page-item-ellipsis"]}):aa==="previous"?createVNode$1(StepPager,mergeProps({type:"previous"},ia,ce),{default:l["page-item-step"]}):aa==="next"?createVNode$1(StepPager,mergeProps({type:"next"},ia,ce),{default:l["page-item-step"]}):createVNode$1(Pager,mergeProps(ia,ce),{default:l["page-item"]}),ea=computed(()=>{const aa=[];if(j.value<a.baseSize+a.bufferSize*2)for(let ia=1;ia<=j.value;ia++)aa.push(fe("page",{key:ia,pageNumber:ia}));else{let ia=1,sa=j.value,ra=!1,la=!1;N.value>2+a.bufferSize&&(ra=!0,ia=Math.min(N.value-a.bufferSize,j.value-2*a.bufferSize)),N.value<j.value-(a.bufferSize+1)&&(la=!0,sa=Math.max(N.value+a.bufferSize,2*a.bufferSize+1)),ra&&(aa.push(fe("page",{key:1,pageNumber:1})),aa.push(fe("more",{key:"left-ellipsis-pager",step:-(a.bufferSize*2+1)})));for(let oa=ia;oa<=sa;oa++)aa.push(fe("page",{key:oa,pageNumber:oa}));la&&(aa.push(fe("more",{key:"right-ellipsis-pager",step:a.bufferSize*2+1})),aa.push(fe("page",{key:j.value,pageNumber:j.value})))}return aa}),ta=()=>a.simple?createVNode$1("span",{class:`${o}-simple`},[fe("previous",{simple:!0}),createVNode$1(PageJumper,{disabled:a.disabled,current:N.value,size:y.value,pages:j.value,simple:!0,onChange:ne},null),fe("next",{simple:!0})]):createVNode$1("ul",{class:`${o}-list`},[fe("previous",{simple:!0}),ea.value,a.showMore&&fe("more",{key:"more",step:a.bufferSize*2+1}),fe("next",{simple:!0})]);watch(R,(aa,ia)=>{if(a.autoAdjust&&aa!==ia&&N.value>1){const sa=ia*(N.value-1)+1,ra=Math.ceil(sa/aa);ra!==N.value&&($.value=ra,s("update:current",ra),s("change",ra))}}),watch(j,(aa,ia)=>{if(a.autoAdjust&&aa!==ia&&N.value>1&&N.value>aa){const sa=Math.max(aa,1);$.value=sa,s("update:current",sa),s("change",sa)}});const na=computed(()=>[o,`${o}-size-${y.value}`,{[`${o}-simple`]:a.simple,[`${o}-disabled`]:a.disabled}]);return()=>{var aa,ia;return a.hideOnSinglePage&&j.value<=1?null:createVNode$1("div",{class:na.value},[a.showTotal&&createVNode$1("span",{class:`${o}-total`},[(ia=(aa=l.total)==null?void 0:aa.call(l,{total:a.total}))!=null?ia:c("pagination.total",a.total)]),ta(),a.showPageSize&&createVNode$1(PageOptions,{disabled:a.disabled,sizeOptions:a.pageSizeOptions,pageSize:R.value,size:y.value,onChange:se,selectProps:a.pageSizeProps},null),!a.simple&&a.showJumper&&createVNode$1(PageJumper,{disabled:a.disabled,current:N.value,pages:j.value,size:y.value,onChange:ne},{"jumper-prepend":l["jumper-prepend"],"jumper-append":l["jumper-append"]})])}}});const Pagination=Object.assign(_Pagination,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Pagination.name,_Pagination)}}),usePagination$1=(a,{emit:s})=>{var l,o;const c=ref(isObject$1(a.paginationProps)&&(l=a.paginationProps.defaultCurrent)!=null?l:1),u=ref(isObject$1(a.paginationProps)&&(o=a.paginationProps.defaultPageSize)!=null?o:10),d=computed(()=>{var $;return isObject$1(a.paginationProps)&&($=a.paginationProps.current)!=null?$:c.value}),f=computed(()=>{var $;return isObject$1(a.paginationProps)&&($=a.paginationProps.pageSize)!=null?$:u.value});return{current:d,pageSize:f,handlePageChange:$=>{c.value=$,s("pageChange",$)},handlePageSizeChange:$=>{u.value=$,s("pageSizeChange",$)}}};function _isSlot$a(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var _List=defineComponent({name:"List",props:{data:{type:Array},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},split:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},paginationProps:{type:Object},gridProps:{type:Object},maxHeight:{type:[String,Number],default:0},bottomOffset:{type:Number,default:0},virtualListProps:{type:Object},scrollbar:{type:[Object,Boolean],default:!0}},emits:{scroll:()=>!0,reachBottom:()=>!0,pageChange:a=>!0,pageSizeChange:a=>!0},setup(a,{emit:s,slots:l}){const{scrollbar:o}=toRefs(a),c=getPrefixCls("list"),u=inject(configProviderInjectionKey,void 0),{componentRef:d,elementRef:f}=useComponentRef("containerRef"),g=computed(()=>a.virtualListProps),{displayScrollbar:y,scrollbarProps:$}=useScrollbar(o);let x=0;const N=ua=>{const{scrollTop:da,scrollHeight:ha,offsetHeight:ga}=ua.target,fa=Math.floor(ha-(da+ga));da>x&&fa<=a.bottomOffset&&s("reachBottom"),s("scroll"),x=da};onMounted(()=>{if(f.value){const{scrollTop:ua,scrollHeight:da,offsetHeight:ha}=f.value;da<=ua+ha&&s("reachBottom")}});const{current:R,pageSize:j,handlePageChange:ne,handlePageSizeChange:se}=usePagination$1(a,{emit:s}),ce=ua=>{if(!a.paginationProps)return ua;if(a.paginationProps&&ua.length>j.value){const da=(R.value-1)*j.value;return ua.slice(da,da+j.value)}return ua},fe=ua=>{let da;if(!a.gridProps)return null;const ha=ce(ua);if(a.gridProps.span){const ga=[],fa=24/a.gridProps.span;for(let ma=0;ma<ha.length;ma+=fa){let va;const ka=ma+fa,ya=Math.floor(ma/fa);ga.push(createVNode$1(Grid.Row,{key:ya,class:`${c}-row`,gutter:a.gridProps.gutter},_isSlot$a(va=ha.slice(ma,ka).map((ba,Ea)=>{var Ca;return createVNode$1(Grid.Col,{key:`${ya}-${Ea}`,class:`${c}-col`,span:(Ca=a.gridProps)==null?void 0:Ca.span},{default:()=>{var $a;return[isVNode(ba)?ba:($a=l.item)==null?void 0:$a.call(l,{item:ba,index:Ea})]}})}))?va:{default:()=>[va]}))}return ga}return createVNode$1(Grid.Row,{class:`${c}-row`,gutter:a.gridProps.gutter},_isSlot$a(da=ha.map((ga,fa)=>createVNode$1(Grid.Col,mergeProps({key:fa,class:`${c}-col`},omit(a.gridProps,["gutter"])),{default:()=>{var ma;return[isVNode(ga)?ga:(ma=l.item)==null?void 0:ma.call(l,{item:ga,index:fa})]}})))?da:{default:()=>[da]})},ea=ua=>ce(ua).map((ha,ga)=>{var fa;return isVNode(ha)?ha:(fa=l.item)==null?void 0:fa.call(l,{item:ha,index:ga})}),ta=()=>{const ua=l.default?getAllElements(l.default()):a.data;return ua&&ua.length>0?a.gridProps?fe(ua):ea(ua):ca()},na=()=>{if(!a.paginationProps)return null;const ua=omit(a.paginationProps,["current","pageSize","defaultCurrent","defaultPageSize"]);return createVNode$1(Pagination,mergeProps({class:`${c}-pagination`},ua,{current:R.value,pageSize:j.value,onChange:ne,onPageSizeChange:se}),null)},aa=computed(()=>[c,`${c}-${a.size}`,{[`${c}-bordered`]:a.bordered,[`${c}-split`]:a.split,[`${c}-hover`]:a.hoverable}]),ia=computed(()=>{if(a.maxHeight)return{maxHeight:isNumber$1(a.maxHeight)?`${a.maxHeight}px`:a.maxHeight,overflowY:"auto"}}),sa=computed(()=>[`${c}-content`,{[`${c}-virtual`]:g.value}]),ra=ref(),la=()=>{var ua;const da=ce((ua=a.data)!=null?ua:[]);return da.length?createVNode$1(VirtualList,mergeProps({ref:ra,class:sa.value,data:da},a.virtualListProps,{onScroll:N}),{item:({item:ha,index:ga})=>{var fa;return(fa=l.item)==null?void 0:fa.call(l,{item:ha,index:ga})}}):ca()},oa=()=>l["scroll-loading"]?createVNode$1("div",{class:[`${c}-item`,`${c}-scroll-loading`]},[l["scroll-loading"]()]):null,ca=()=>{var ua,da,ha,ga,fa;return l["scroll-loading"]?null:(fa=(ga=(ua=l.empty)==null?void 0:ua.call(l))!=null?ga:(ha=u==null?void 0:(da=u.slots).empty)==null?void 0:ha.call(da,{component:"list"}))!=null?fa:createVNode$1(Empty,null,null)};return{virtualListRef:ra,render:()=>{const ua=y.value?Scrollbar:"div";return createVNode$1("div",{class:`${c}-wrapper`},[createVNode$1(Spin,{class:`${c}-spin`,loading:a.loading},{default:()=>[createVNode$1(ua,mergeProps({ref:d,class:aa.value,style:ia.value},$.value,{onScroll:N}),{default:()=>[createVNode$1("div",{class:`${c}-content-wrapper`},[l.header&&createVNode$1("div",{class:`${c}-header`},[l.header()]),g.value&&!a.gridProps?createVNode$1(Fragment,null,[la(),oa()]):createVNode$1("div",{role:"list",class:sa.value},[ta(),oa()]),l.footer&&createVNode$1("div",{class:`${c}-footer`},[l.footer()])])]}),na()]})])}}},methods:{scrollIntoView(a){this.virtualListRef&&this.virtualListRef.scrollTo(a)}},render(){return this.render()}}),ListItem=defineComponent({name:"ListItem",props:{actionLayout:{type:String,default:"horizontal"}},setup(a,{slots:s}){const l=getPrefixCls("list-item"),o=()=>{var c;const u=(c=s.actions)==null?void 0:c.call(s);return!u||!u.length?null:createVNode$1("ul",{class:`${l}-action`},[u.map((d,f)=>createVNode$1("li",{key:`${l}-action-${f}`},[d]))])};return()=>{var c,u;return createVNode$1("div",{role:"listitem",class:l},[createVNode$1("div",{class:`${l}-main`},[(c=s.meta)==null?void 0:c.call(s),createVNode$1("div",{class:`${l}-content`},[(u=s.default)==null?void 0:u.call(s)]),a.actionLayout==="vertical"&&o()]),a.actionLayout==="horizontal"&&o(),s.extra&&createVNode$1("div",{class:`${l}-extra`},[s.extra()])])}}});const _sfc_main$1m=defineComponent({name:"ListItemMeta",props:{title:String,description:String},setup(a,{slots:s}){const l=getPrefixCls("list-item-meta"),o=!!(a.title||a.description||s.title||s.description);return{prefixCls:l,hasContent:o}}});function _sfc_render$18(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[a.$slots.avatar?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-avatar`)},[renderSlot(a.$slots,"avatar")],2)):createCommentVNode("v-if",!0),a.hasContent?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-content`)},[a.$slots.title||a.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),a.$slots.description||a.description?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-description`)},[renderSlot(a.$slots,"description",{},()=>[createTextVNode(toDisplayString(a.description),1)])],2)):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0)],2)}var ListItemMeta=_export_sfc(_sfc_main$1m,[["render",_sfc_render$18]]);const List=Object.assign(_List,{Item:Object.assign(ListItem,{Meta:ListItemMeta}),install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_List.name,_List),a.component(l+ListItem.name,ListItem),a.component(l+ListItemMeta.name,ListItemMeta)}}),sizeStyles=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],getSizeStyles=a=>{const s={};return sizeStyles.forEach(l=>{s[l]=a.getPropertyValue(l)}),s},_sfc_main$1l=defineComponent({name:"Textarea",components:{ResizeObserver:ResizeObserver$2,IconHover,IconClose},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":a=>!0,input:(a,s)=>!0,change:(a,s)=>!0,clear:a=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s,attrs:l}){const{disabled:o,error:c,modelValue:u}=toRefs(a),d=getPrefixCls("textarea"),{mergedDisabled:f,mergedError:g,eventHandlers:y}=useFormItem({disabled:o,error:c}),$=ref(),x=ref(),N=ref(),R=ref(),j=ref(a.defaultValue),ne=computed(()=>{var Aa;return(Aa=u.value)!=null?Aa:j.value}),[se,ce]=useCursor($);watch(u,Aa=>{(isUndefined(Aa)||isNull(Aa))&&(j.value="")});const fe=computed(()=>isObject$1(a.maxLength)&&!!a.maxLength.errorOnly),ea=computed(()=>isObject$1(a.maxLength)?a.maxLength.length:a.maxLength),ta=Aa=>{var Sa;return isFunction$1(a.wordLength)?a.wordLength(Aa):(Sa=Aa.length)!=null?Sa:0},na=computed(()=>ta(ne.value)),aa=computed(()=>g.value||!!(ea.value&&fe.value&&na.value>ea.value)),ia=ref(!1),sa=ref(!1),ra=computed(()=>a.allowClear&&!f.value&&ne.value),la=ref(!1),oa=ref(""),ca=()=>{se(),nextTick(()=>{$.value&&ne.value!==$.value.value&&($.value.value=ne.value,ce())})},pa=(Aa,Sa=!0)=>{var Fa,Ia;ea.value&&!fe.value&&ta(Aa)>ea.value&&(Aa=(Ia=(Fa=a.wordSlice)==null?void 0:Fa.call(a,Aa,ea.value))!=null?Ia:Aa.slice(0,ea.value)),j.value=Aa,Sa&&s("update:modelValue",Aa),ca()};let ua=ne.value;const da=(Aa,Sa)=>{var Fa,Ia;Aa!==ua&&(ua=Aa,s("change",Aa,Sa),(Ia=(Fa=y.value)==null?void 0:Fa.onChange)==null||Ia.call(Fa,Sa))},ha=Aa=>{var Sa,Fa;sa.value=!0,ua=ne.value,s("focus",Aa),(Fa=(Sa=y.value)==null?void 0:Sa.onFocus)==null||Fa.call(Sa,Aa)},ga=Aa=>{var Sa,Fa;sa.value=!1,s("blur",Aa),(Fa=(Sa=y.value)==null?void 0:Sa.onBlur)==null||Fa.call(Sa,Aa),da(ne.value,Aa)},fa=Aa=>{var Sa,Fa;const{value:Ia}=Aa.target;if(Aa.type==="compositionend"){if(la.value=!1,oa.value="",ea.value&&!fe.value&&ne.value.length>=ea.value&&ta(Ia)>ea.value){ca();return}s("input",Ia,Aa),pa(Ia),(Fa=(Sa=y.value)==null?void 0:Sa.onInput)==null||Fa.call(Sa,Aa)}else la.value=!0},ma=Aa=>{var Sa,Fa;const{value:Ia}=Aa.target;if(la.value)oa.value=Ia;else{if(ea.value&&!fe.value&&ne.value.length>=ea.value&&ta(Ia)>ea.value&&Aa.inputType==="insertText"){ca();return}s("input",Ia,Aa),pa(Ia),(Fa=(Sa=y.value)==null?void 0:Sa.onInput)==null||Fa.call(Sa,Aa)}},va=Aa=>{pa(""),da("",Aa),s("clear",Aa)};watch(u,Aa=>{Aa!==ne.value&&pa(Aa??"",!1)});const ka=Aa=>omit(l,INPUT_EVENTS),ya=Aa=>pick(l,INPUT_EVENTS),ba=computed(()=>[`${d}-wrapper`,{[`${d}-focus`]:sa.value,[`${d}-disabled`]:f.value,[`${d}-error`]:aa.value,[`${d}-scroll`]:ia.value}]);let Ea;const Ca=ref(0),$a=ref(0),Pa=computed(()=>!isObject$1(a.autoSize)||!a.autoSize.minRows?0:a.autoSize.minRows*Ca.value+$a.value),Da=computed(()=>!isObject$1(a.autoSize)||!a.autoSize.maxRows?0:a.autoSize.maxRows*Ca.value+$a.value),Ta=()=>{const Aa=getSizeStyles(Ea);Ca.value=Number.parseInt(Aa["line-height"]||0,10),$a.value=Number.parseInt(Aa["border-width"]||0,10)*2+Number.parseInt(Aa["padding-top"]||0,10)+Number.parseInt(Aa["padding-bottom"]||0,10),R.value=Aa,nextTick(()=>{var Sa;const Fa=(Sa=N.value)==null?void 0:Sa.offsetHeight;let Ia=Fa??0,Ga="hidden";Pa.value&&Ia<Pa.value&&(Ia=Pa.value),Da.value&&Ia>Da.value&&(Ia=Da.value,Ga="auto"),x.value={height:`${Ia}px`,resize:"none",overflow:Ga}})};onMounted(()=>{$.value&&(Ea=window.getComputedStyle($.value),a.autoSize&&Ta()),Oa()});const Ba=()=>{a.autoSize&&N.value&&Ta(),Oa()},wa=Aa=>{$.value&&Aa.target!==$.value&&(Aa.preventDefault(),$.value.focus())},Oa=()=>{$.value&&($.value.scrollHeight>$.value.offsetHeight?ia.value||(ia.value=!0):ia.value&&(ia.value=!1))};return watch(ne,()=>{a.autoSize&&N.value&&Ta(),Oa()}),{prefixCls:d,wrapperCls:ba,textareaRef:$,textareaStyle:x,mirrorRef:N,mirrorStyle:R,computedValue:ne,showClearBtn:ra,valueLength:na,computedMaxLength:ea,mergedDisabled:f,getWrapperAttrs:ka,getTextareaAttrs:ya,handleInput:ma,handleFocus:ha,handleBlur:ga,handleComposition:fa,handleClear:va,handleResize:Ba,handleMousedown:wa}},methods:{focus(){var a;(a=this.$refs.textareaRef)==null||a.focus()},blur(){var a;(a=this.$refs.textareaRef)==null||a.blur()}}}),_hoisted_1$I=["disabled","value","placeholder"];function _sfc_render$17(a,s,l,o,c,u){const d=resolveComponent("resize-observer"),f=resolveComponent("icon-close"),g=resolveComponent("icon-hover");return openBlock(),createElementBlock("div",mergeProps(a.getWrapperAttrs(a.$attrs),{class:a.wrapperCls,onMousedown:s[7]||(s[7]=(...y)=>a.handleMousedown&&a.handleMousedown(...y))}),[a.autoSize?(openBlock(),createElementBlock("div",{key:0,ref:"mirrorRef",class:normalizeClass(`${a.prefixCls}-mirror`),style:normalizeStyle$1(a.mirrorStyle)},toDisplayString(`${a.computedValue}
`),7)):createCommentVNode("v-if",!0),createVNode$1(d,{onResize:a.handleResize},{default:withCtx(()=>[createBaseVNode("textarea",mergeProps({ref:"textareaRef"},a.getTextareaAttrs(a.$attrs),{disabled:a.mergedDisabled,class:a.prefixCls,style:a.textareaStyle,value:a.computedValue,placeholder:a.placeholder,onInput:s[0]||(s[0]=(...y)=>a.handleInput&&a.handleInput(...y)),onFocus:s[1]||(s[1]=(...y)=>a.handleFocus&&a.handleFocus(...y)),onBlur:s[2]||(s[2]=(...y)=>a.handleBlur&&a.handleBlur(...y)),onCompositionstart:s[3]||(s[3]=(...y)=>a.handleComposition&&a.handleComposition(...y)),onCompositionupdate:s[4]||(s[4]=(...y)=>a.handleComposition&&a.handleComposition(...y)),onCompositionend:s[5]||(s[5]=(...y)=>a.handleComposition&&a.handleComposition(...y))}),null,16,_hoisted_1$I)]),_:1},8,["onResize"]),renderSlot(a.$slots,"suffix"),a.computedMaxLength&&a.showWordLimit?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-word-limit`)},toDisplayString(a.valueLength)+"/"+toDisplayString(a.computedMaxLength),3)):createCommentVNode("v-if",!0),a.showClearBtn?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-clear-btn`),onClick:s[6]||(s[6]=(...y)=>a.handleClear&&a.handleClear(...y))},[createVNode$1(g,null,{default:withCtx(()=>[createVNode$1(f)]),_:1})],2)):createCommentVNode("v-if",!0)],16)}var _Textarea=_export_sfc(_sfc_main$1l,[["render",_sfc_render$17]]);const Textarea=Object.assign(_Textarea,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Textarea.name,_Textarea)}}),getTextBeforeSelection=a=>{const{value:s,selectionStart:l}=a;return s.slice(0,l)},getLastMeasureIndex=(a,s)=>[].concat(s).reduce((o,c)=>{const u=a.lastIndexOf(c);return u>o.location?{location:u,prefix:c}:o},{location:-1,prefix:""}),isValidSearch=(a,s)=>!s||!a.includes(s);var __defProp$p=Object.defineProperty,__getOwnPropSymbols$q=Object.getOwnPropertySymbols,__hasOwnProp$q=Object.prototype.hasOwnProperty,__propIsEnum$q=Object.prototype.propertyIsEnumerable,__defNormalProp$p=(a,s,l)=>s in a?__defProp$p(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$p=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$q.call(s,l)&&__defNormalProp$p(a,l,s[l]);if(__getOwnPropSymbols$q)for(var l of __getOwnPropSymbols$q(s))__propIsEnum$q.call(s,l)&&__defNormalProp$p(a,l,s[l]);return a};function _isSlot$9(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var _Mention=defineComponent({name:"Mention",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},data:{type:Array,default:()=>[]},prefix:{type:[String,Array],default:"@"},split:{type:String,default:" "},type:{type:String,default:"input"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1}},emits:{"update:modelValue":a=>!0,change:a=>!0,search:(a,s)=>!0,select:a=>!0,clear:a=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s,attrs:l,slots:o}){const c=getPrefixCls("mention");let u;const{mergedDisabled:d,eventHandlers:f}=useFormItem({disabled:toRef(a,"disabled")}),{data:g,modelValue:y}=toRefs(a),$=ref(),x=ref({}),N=ref(a.defaultValue),R=computed(()=>{var ba;return(ba=a.modelValue)!=null?ba:N.value});watch(y,ba=>{(isUndefined(ba)||isNull(ba))&&(N.value="")});const j=computed(()=>R.value?[getKeyFromValue(R.value)]:[]),ne=ref({measuring:!1,location:-1,prefix:"",text:""}),se=()=>{ne.value={measuring:!1,location:-1,prefix:"",text:""}},ce=ref(),fe=computed(()=>ne.value.text),ea=ref(!0),ta=(ba,Ea)=>{var Ca,$a;const Pa=getTextBeforeSelection(Ea.target),Da=getLastMeasureIndex(Pa,a.prefix);if(Da.location>-1){const Ta=Pa.slice(Da.location+Da.prefix.length);isValidSearch(Ta,a.split)?(aa.value=!0,ne.value=__spreadValues$p({measuring:!0,text:Ta},Da),s("search",Ta,Da.prefix)):ne.value.location>-1&&se()}else ne.value.location>-1&&se();N.value=ba,s("update:modelValue",ba),s("change",ba),($a=(Ca=f.value)==null?void 0:Ca.onChange)==null||$a.call(Ca)},na=ba=>{var Ea,Ca;N.value="",s("update:modelValue",""),s("change",""),(Ca=(Ea=f.value)==null?void 0:Ea.onChange)==null||Ca.call(Ea),s("clear",ba)},aa=ref(!1),ia=computed(()=>aa.value&&ne.value.measuring&&pa.value.length>0),sa=()=>{da.value=getSizeStyles(u)},ra=ba=>{aa.value=ba},la=(ba,Ea)=>{var Ca,$a,Pa;const{value:Da}=(Ca=ca.get(ba))!=null?Ca:{},Ta=ne.value.location,Ba=ne.value.location+ne.value.text.length;let wa=N.value.slice(0,Ta),Oa=N.value.slice(Ba+1);wa+=!wa||wa.endsWith(a.split)||wa.endsWith(`
`)?"":a.split,Oa=(!Oa||Oa.startsWith(a.split)||Oa.startsWith(`
`)?"":a.split)+Oa;const Aa=`${ne.value.prefix}${Da}`,Sa=`${wa}${Aa}${Oa}`;N.value=Sa,s("select",Da),s("update:modelValue",Sa),s("change",Sa),se(),(Pa=($a=f.value)==null?void 0:$a.onChange)==null||Pa.call($a)},{validOptions:oa,optionInfoMap:ca,validOptionInfos:pa,handleKeyDown:ua}=useSelect({options:g,inputValue:fe,filterOption:ea,popupVisible:ia,valueKeys:j,dropdownRef:$,optionRefs:x,onSelect:la,onPopupVisibleChange:ra,enterToOpen:!1}),da=ref();onMounted(()=>{var ba;a.type==="textarea"&&((ba=ce.value)!=null&&ba.textareaRef)&&(u=window.getComputedStyle(ce.value.textareaRef),da.value=getSizeStyles(u))});const ha=ba=>{if(isFunction$1(o.option)&&ba.value){const Ea=ca.get(ba.key),Ca=o.option;return()=>Ca({data:Ea})}return()=>ba.label},ga=ba=>createVNode$1(Option,{ref:Ea=>{Ea?.$el&&(x.value[ba.key]=Ea.$el)},key:ba.key,value:ba.value,disabled:ba.disabled,internal:!0},{default:ha(ba)}),fa=()=>{let ba;return createVNode$1(SelectDropdown,{ref:$},_isSlot$9(ba=oa.value.map(Ea=>ga(Ea)))?ba:{default:()=>[ba]})},ma=ref();watch(ia,ba=>{a.type==="textarea"&&ba&&nextTick(()=>{var Ea,Ca;(Ea=ce.value)!=null&&Ea.textareaRef&&ce.value.textareaRef.scrollTop>0&&((Ca=ma.value)==null||Ca.scrollTo(0,ce.value.textareaRef.scrollTop))})});const va=ba=>{s("focus",ba)},ka=ba=>{s("blur",ba)};return{inputRef:ce,render:()=>{var ba;return a.type==="textarea"?createVNode$1("div",{class:c},[createVNode$1(ResizeObserver$2,{onResize:sa},{default:()=>[createVNode$1(Textarea,mergeProps(l,{ref:ce,allowClear:a.allowClear,modelValue:R.value,disabled:d.value,onInput:ta,onClear:na,onFocus:va,onBlur:ka,onKeydown:ua}),null)]}),ne.value.measuring&&pa.value.length>0&&createVNode$1("div",{ref:ma,style:da.value,class:`${c}-measure`},[(ba=R.value)==null?void 0:ba.slice(0,ne.value.location),createVNode$1(Trigger,{trigger:"focus",position:"bl",popupOffset:4,preventFocus:!0,popupVisible:ia.value,clickToClose:!1,onPopupVisibleChange:ra},{default:()=>[createVNode$1("span",null,[createTextVNode("@")])],content:fa})])]):createVNode$1(Trigger,{trigger:"focus",position:"bl",animationName:"slide-dynamic-origin",popupOffset:4,preventFocus:!0,popupVisible:ia.value,clickToClose:!1,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:d.value,onPopupVisibleChange:ra},{default:()=>[createVNode$1(Input,mergeProps(l,{ref:ce,allowClear:a.allowClear,modelValue:R.value,disabled:d.value,onInput:ta,onClear:na,onFocus:va,onBlur:ka,onKeydown:ua}),o)],content:fa})}}},methods:{focus(){var a;(a=this.inputRef)==null||a.focus()},blur(){var a;(a=this.inputRef)==null||a.blur()}},render(){return this.render()}});const Mention=Object.assign(_Mention,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Mention.name,_Mention)}}),MenuInjectionKey=Symbol("MenuInjectionKey"),LevelInjectionKey=Symbol("LevelInjectionKey"),DataCollectorInjectionKey=Symbol("DataCollectorInjectionKey"),_sfc_main$1k=defineComponent({name:"IconMenuFold",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-menu-fold`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$H=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$w=createBaseVNode("path",{d:"M42 11H6M42 24H22M42 37H6M13.66 26.912l-4.82-3.118 4.82-3.118v6.236Z"},null,-1),_hoisted_3$t=[_hoisted_2$w];function _sfc_render$16(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$t,14,_hoisted_1$H)}var _IconMenuFold=_export_sfc(_sfc_main$1k,[["render",_sfc_render$16]]);const IconMenuFold=Object.assign(_IconMenuFold,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconMenuFold.name,_IconMenuFold)}}),_sfc_main$1j=defineComponent({name:"IconMenuUnfold",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-menu-unfold`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$G=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$v=createBaseVNode("path",{d:"M6 11h36M22 24h20M6 37h36M8 20.882 12.819 24 8 27.118v-6.236Z"},null,-1),_hoisted_3$s=[_hoisted_2$v];function _sfc_render$15(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$s,14,_hoisted_1$G)}var _IconMenuUnfold=_export_sfc(_sfc_main$1j,[["render",_sfc_render$15]]);const IconMenuUnfold=Object.assign(_IconMenuUnfold,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconMenuUnfold.name,_IconMenuUnfold)}});function provideLevel(a){const s=computed(()=>isRef(a)?a.value:a);provide(LevelInjectionKey,reactive({level:s}))}function useLevel(a){const{provideNextLevel:s}=a||{},l=inject(LevelInjectionKey),o=computed(()=>l?.level||1);if(s){const c=computed(()=>o.value+1);provideLevel(c)}return{level:o}}function getKeys$1(a,s){const l=[],o=c=>{c.forEach(u=>{s(u)&&l.push(u.key),u.children&&o(u.children)})};return o(a),l}function useMenuDataCollectorContext(a=!1){return a?void 0:inject(DataCollectorInjectionKey)}function useMenuDataCollector(a){const{key:s,type:l}=a,o=ref([]),c=useMenuDataCollectorContext(l==="menu");return provide(DataCollectorInjectionKey,{collectSubMenu(d,f,g=!1){const y={key:d,children:f};if(g){const $=o.value.find(x=>x.key===d);$?$.children=f:o.value.push(y)}else o.value=[...o.value,y];g&&(l==="popupMenu"?c?.reportMenuData(o.value):l==="subMenu"&&!isUndefined(d)&&c?.collectSubMenu(d,o.value,!0))},removeSubMenu(d){o.value=o.value.filter(f=>f.key!==d)},collectMenuItem(d){o.value.push({key:d})},removeMenuItem(d){o.value=o.value.filter(f=>f.key!==d)},reportMenuData(d){o.value=d,l==="subMenu"&&!isUndefined(s)&&c?.collectSubMenu(s,o.value,!0)}}),l==="subMenu"&&!isUndefined(s)?(onMounted(()=>{c?.collectSubMenu(s,o.value)}),onUnmounted(()=>{c?.removeSubMenu(s)})):l==="popupMenu"&&onMounted(()=>{c?.reportMenuData(o.value)}),{menuData:o,subMenuKeys:computed(()=>getKeys$1(o.value,d=>!!d.children)),menuItemKeys:computed(()=>getKeys$1(o.value,d=>!d.children))}}function getPath(a,s){const l=[],o=c=>{for(let u=0;u<c.length;u++){const d=c[u];if(d.key===s)return!0;if(d.children){if(l.push(d.key),o(d.children))return!0;l.pop()}}return!1};return o(a),l}function isSameKeys(a,s){return a.length!==s.length?!1:a.toString()===s.toString()}function useMenuOpenState(a){const{modelValue:s,defaultValue:l,autoOpen:o,autoOpenSelected:c,subMenuKeys:u,selectedKeys:d,menuData:f,accordion:g}=toRefs(a),y=ref(isUndefined(s.value)?isUndefined(l.value)?[]:l.value:s.value),$=j=>{y.value=j};watch(s,()=>{isUndefined(s.value)&&$([])});let x=[];onMounted(()=>{x=[...u.value];let j=[];if(o.value&&(j=g.value?u.value.slice(0,1):[...u.value]),c.value){const ne=d.value.map(se=>getPath(f.value,se));ne.length&&(!o.value||g.value)&&(j=g.value?ne[0]:[...new Set([].concat(...ne))])}j.length&&$(j)});let N=!1;watch(u,(j,ne=[])=>{if(N||!isSameKeys(j,x)){const se=R.value.filter(ce=>j.includes(ce));if(o.value){const ce=j.filter(fe=>!ne.includes(fe));se.push(...ce)}$(g.value?se.slice(0,1):se)}N=!0});const R=computed(()=>s.value||y.value);return{openKeys:R,localOpenKeys:y,setOpenKeys:$,open(j,ne){let se=[];return R.value.indexOf(j)>-1?g.value&&ne===1?se=[]:se=R.value.filter(ce=>ce!==j):g.value&&ne===1?se=[j]:se=R.value.concat([j]),$(se),se}}}const _sfc_main$1i=defineComponent({name:"BaseMenu",components:{IconMenuFold,IconMenuUnfold},inheritAttrs:!1,props:{style:{type:Object},theme:{type:String,default:"light"},mode:{type:String,default:"vertical"},levelIndent:{type:Number},autoOpen:{type:Boolean},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean},collapsedWidth:{type:Number},accordion:{type:Boolean},autoScrollIntoView:{type:Boolean},showCollapseButton:{type:Boolean},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array,default:()=>[]},openKeys:{type:Array},defaultOpenKeys:{type:Array,default:()=>[]},scrollConfig:{type:Object},triggerProps:{type:Object},tooltipProps:{type:Object},autoOpenSelected:{type:Boolean},breakpoint:{type:String},popupMaxHeight:{type:[Boolean,Number],default:!0},prefixCls:{type:String},inTrigger:{type:Boolean},siderCollapsed:{type:Boolean},isRoot:{type:Boolean}},emits:["update:collapsed","update:selectedKeys","update:openKeys","collapse","menu-item-click","sub-menu-click"],setup(a,{emit:s,slots:l}){const{style:o,mode:c,theme:u,levelIndent:d,accordion:f,showCollapseButton:g,scrollConfig:y,autoScrollIntoView:$,collapsedWidth:x,autoOpen:N,collapsed:R,defaultCollapsed:j,selectedKeys:ne,defaultSelectedKeys:se,openKeys:ce,defaultOpenKeys:fe,triggerProps:ea,tooltipProps:ta,autoOpenSelected:na,breakpoint:aa,popupMaxHeight:ia,prefixCls:sa,inTrigger:ra,siderCollapsed:la,isRoot:oa}=toRefs(a),{subMenuKeys:ca,menuData:pa}=useMenuDataCollector({type:oa.value?"menu":"popupMenu"}),[ua,da]=useMergeState(se.value,reactive({value:ne})),{openKeys:ha,setOpenKeys:ga,open:fa}=useMenuOpenState(reactive({modelValue:ce,defaultValue:fe,autoOpen:N,autoOpenSelected:na,selectedKeys:ua,subMenuKeys:ca,menuData:pa,accordion:f})),[ma,va]=useMergeState(j.value,reactive({value:R})),ka=computed(()=>la.value||ma.value||c.value==="popButton"),ya=computed(()=>["horizontal","popButton"].indexOf(c.value)<0&&!ra.value&&g.value),ba=(wa,Oa)=>{wa!==ma.value&&(va(wa),s("update:collapsed",wa),s("collapse",wa,Oa))},Ea=()=>{ba(!ma.value,"clickTrigger")};useResponsive(aa,wa=>{ba(!wa,"responsive")});const Ca=computed(()=>sa?.value||getPrefixCls("menu")),$a=computed(()=>[Ca.value,`${Ca.value}-${u?.value}`,{[`${Ca.value}-horizontal`]:c.value==="horizontal",[`${Ca.value}-vertical`]:c.value!=="horizontal",[`${Ca.value}-collapsed`]:ka.value,[`${Ca.value}-pop`]:c.value==="pop"||ka.value,[`${Ca.value}-pop-button`]:c.value==="popButton"}]),Pa=computed(()=>{const wa=isNumber$1(x.value)?`${x.value}px`:void 0,Oa=isObject$1(o.value)?o.value:void 0,Aa=ka.value?wa:Oa?.width;return[Oa?omit(Oa,["width"]):o.value,{width:Aa}]}),Da=usePickSlots(l,"expand-icon-down"),Ta=usePickSlots(l,"expand-icon-right"),Ba=reactive({theme:u,mode:c,levelIndent:d,autoScrollIntoView:$,selectedKeys:ua,openKeys:ha,prefixCls:Ca,scrollConfig:y,inTrigger:ra,collapsed:ka,triggerProps:ea,tooltipProps:ta,popupMaxHeight:ia,expandIconDown:Da,expandIconRight:Ta,onMenuItemClick:wa=>{da([wa]),s("update:selectedKeys",[wa]),s("menu-item-click",wa)},onSubMenuClick:(wa,Oa)=>{const Aa=fa(wa,Oa);ga(Aa),s("update:openKeys",Aa),s("sub-menu-click",wa,Aa)}});return provide(MenuInjectionKey,Ba),provideLevel(1),{computedPrefixCls:Ca,classNames:$a,computedStyle:Pa,computedCollapsed:ka,computedHasCollapseButton:ya,onCollapseBtnClick:Ea}}});function _sfc_render$14(a,s,l,o,c,u){const d=resolveComponent("IconMenuUnfold"),f=resolveComponent("IconMenuFold");return openBlock(),createElementBlock("div",mergeProps({class:a.classNames},a.$attrs,{style:a.computedStyle}),[createBaseVNode("div",{class:normalizeClass(`${a.computedPrefixCls}-inner`)},[renderSlot(a.$slots,"default")],2),a.computedHasCollapseButton?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.computedPrefixCls}-collapse-button`),onClick:s[0]||(s[0]=(...g)=>a.onCollapseBtnClick&&a.onCollapseBtnClick(...g))},[renderSlot(a.$slots,"collapse-icon",{collapsed:a.computedCollapsed},()=>[a.computedCollapsed?(openBlock(),createBlock(d,{key:0})):(openBlock(),createBlock(f,{key:1}))])],2)):createCommentVNode("v-if",!0)],16)}var BaseMenu=_export_sfc(_sfc_main$1i,[["render",_sfc_render$14]]);function getStyle$1(a,s){if(!a||!s)return null;let l=s;l==="float"&&(l="cssFloat");try{if(document.defaultView){const o=document.defaultView.getComputedStyle(a,"");return a.style[l]||o?o[l]:""}}catch{return a.style[l]}return null}function useMenuContext(){return inject(MenuInjectionKey)||{}}const generateId=(()=>{let a=0;return(s="")=>(a+=1,`${s}${a}`)})();function useMenu(){const a=getCurrentInstance();return{key:computed(()=>a?.vnode.key||generateId("__arco_menu"))}}const _sfc_main$1h=defineComponent({name:"MenuIndent",props:{level:{type:Number,default:1}},setup(){const a=getPrefixCls("menu"),s=useMenuContext();return{prefixCls:a,levelIndent:toRef(s,"levelIndent")}}});function _sfc_render$13(a,s,l,o,c,u){return a.level>1?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-indent-list`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.level-1,d=>(openBlock(),createElementBlock("span",{key:d,class:normalizeClass(`${a.prefixCls}-indent`),style:normalizeStyle$1(`width: ${a.levelIndent}px`)},null,6))),128))],2)):createCommentVNode("v-if",!0)}var MenuIndent=_export_sfc(_sfc_main$1h,[["render",_sfc_render$13]]);const _sfc_main$1g=defineComponent({name:"ExpandTransition",setup(){return{onBeforeEnter(a){a.style.height="0"},onEnter(a){a.style.height=`${a.scrollHeight}px`},onAfterEnter(a){a.style.height=""},onBeforeLeave(a){a.style.height=`${a.scrollHeight}px`},onLeave(a){a.style.height="0"},onAfterLeave(a){a.style.height=""}}}});function _sfc_render$12(a,s,l,o,c,u){return openBlock(),createBlock(Transition,{onBeforeEnter:a.onBeforeEnter,onEnter:a.onEnter,onAfterEnter:a.onAfterEnter,onBeforeLeave:a.onBeforeLeave,onLeave:a.onLeave,onAfterLeave:a.onAfterLeave},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])}var ExpandTransition$1=_export_sfc(_sfc_main$1g,[["render",_sfc_render$12]]);const _sfc_main$1f=defineComponent({name:"SubMenuInline",components:{MenuIndent,ExpandTransition:ExpandTransition$1},props:{title:{type:String},isChildrenSelected:{type:Boolean}},setup(a){const{key:s}=useMenu(),{level:l}=useLevel({provideNextLevel:!0}),o=useMenuContext(),c=computed(()=>o.prefixCls),u=computed(()=>`${c.value}-inline`),d=computed(()=>[u.value]),f=computed(()=>a.isChildrenSelected),g=computed(()=>(o.openKeys||[]).indexOf(s.value)>-1);return{prefixCls:u,menuPrefixCls:c,classNames:d,level:l,isSelected:f,isOpen:g,onHeaderClick:()=>{o.onSubMenuClick&&o.onSubMenuClick(s.value,l.value)}}}});function _sfc_render$11(a,s,l,o,c,u){const d=resolveComponent("MenuIndent"),f=resolveComponent("ExpandTransition");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-header`,{[`${a.menuPrefixCls}-selected`]:a.isSelected,[`${a.menuPrefixCls}-has-icon`]:a.$slots.icon}]),onClick:s[0]||(s[0]=(...g)=>a.onHeaderClick&&a.onHeaderClick(...g))},[createVNode$1(d,{level:a.level},null,8,["level"]),a.$slots.icon?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(`${a.menuPrefixCls}-icon`)},[renderSlot(a.$slots,"icon")],2),createBaseVNode("span",{class:normalizeClass(`${a.menuPrefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)],64)):renderSlot(a.$slots,"title",{key:1},()=>[createTextVNode(toDisplayString(a.title),1)]),createBaseVNode("span",{class:normalizeClass([`${a.menuPrefixCls}-icon-suffix`,{"is-open":a.isOpen}])},[renderSlot(a.$slots,"expand-icon-down")],2)],2),createVNode$1(f,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2),[[vShow,a.isOpen]])]),_:3})],2)}var SubMenuInline=_export_sfc(_sfc_main$1f,[["render",_sfc_render$11]]);const _sfc_main$1e=defineComponent({name:"SubMenuPop",components:{Menu:BaseMenu,Trigger,MenuIndent,RenderFunction},inheritAttrs:!1,props:{title:{type:String},selectable:{type:Boolean},isChildrenSelected:{type:Boolean},popupMaxHeight:{type:[Boolean,Number],default:void 0}},setup(a){const{key:s}=useMenu(),{level:l}=useLevel(),{selectable:o,isChildrenSelected:c,popupMaxHeight:u}=toRefs(a),d=useMenuContext(),{onSubMenuClick:f,onMenuItemClick:g}=d,y=computed(()=>d.prefixCls),$=computed(()=>d.mode),x=computed(()=>d.selectedKeys||[]),N=computed(()=>`${y.value}-pop`),R=computed(()=>o.value&&x.value.includes(s.value)||c.value),j=computed(()=>[`${N.value}`,`${N.value}-header`,{[`${y.value}-selected`]:R.value}]),ne=computed(()=>$.value==="horizontal"&&!d.inTrigger),se=ref(!1),ce=na=>{se.value=na},fe=getPrefixCls("trigger"),ea=computed(()=>{var na;return[`${N.value}-trigger`,{[`${N.value}-trigger-dark`]:d.theme==="dark"},(na=d.triggerProps)==null?void 0:na.class]}),ta=computed(()=>omit(d.triggerProps||{},["class"]));return{menuPrefixCls:y,mode:$,level:l,classNames:j,isSelected:R,selectedKeys:x,needPopOnBottom:ne,popVisible:se,triggerPrefixCls:fe,triggerClassNames:ea,triggerProps:ta,menuContext:d,popupMenuStyles:computed(()=>{var na;const aa=(na=u.value)!=null?na:d.popupMaxHeight;return isNumber$1(aa)?{maxHeight:`${aa}px`}:aa?{}:{maxHeight:"unset"}}),onClick:()=>{f&&f(s.value,l.value),o.value&&g&&g(s.value)},onMenuItemClick:na=>{g&&g(na),ce(!1)},onVisibleChange:na=>{ce(na)}}}});function _sfc_render$10(a,s,l,o,c,u){const d=resolveComponent("MenuIndent"),f=resolveComponent("RenderFunction"),g=resolveComponent("Menu"),y=resolveComponent("Trigger");return openBlock(),createBlock(y,mergeProps({trigger:"hover",class:a.triggerClassNames,position:a.needPopOnBottom?"bl":"rt","show-arrow":"","animation-class":"fade-in","mouse-enter-delay":50,"mouse-leave-delay":50,"popup-offset":4,"auto-fit-popup-min-width":!0,duration:100},a.triggerProps,{"unmount-on-close":!1,"popup-visible":a.popVisible,onPopupVisibleChange:a.onVisibleChange}),{content:withCtx(()=>[createVNode$1(g,{"in-trigger":"","prefix-cls":`${a.triggerPrefixCls}-menu`,"selected-keys":a.selectedKeys,theme:a.menuContext.theme,"trigger-props":a.menuContext.triggerProps,style:normalizeStyle$1(a.popupMenuStyles),onMenuItemClick:a.onMenuItemClick},createSlots({default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:2},[a.menuContext.expandIconDown?{name:"expand-icon-down",fn:withCtx(()=>[createVNode$1(f,{"render-func":a.menuContext.expandIconDown},null,8,["render-func"])])}:void 0,a.menuContext.expandIconRight?{name:"expand-icon-right",fn:withCtx(()=>[createVNode$1(f,{"render-func":a.menuContext.expandIconRight},null,8,["render-func"])])}:void 0]),1032,["prefix-cls","selected-keys","theme","trigger-props","style","onMenuItemClick"])]),default:withCtx(()=>[createBaseVNode("div",mergeProps({class:[a.classNames,{[`${a.menuPrefixCls}-has-icon`]:a.$slots.icon}],"aria-haspopup":"true"},a.$attrs,{onClick:s[0]||(s[0]=(...$)=>a.onClick&&a.onClick(...$))}),[createCommentVNode(" header "),createVNode$1(d,{level:a.level},null,8,["level"]),a.$slots.icon?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(`${a.menuPrefixCls}-icon`)},[renderSlot(a.$slots,"icon")],2),createBaseVNode("span",{class:normalizeClass(`${a.menuPrefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)],64)):renderSlot(a.$slots,"title",{key:1},()=>[createTextVNode(toDisplayString(a.title),1)]),createCommentVNode(" suffix "),createBaseVNode("span",{class:normalizeClass(`${a.menuPrefixCls}-icon-suffix`)},[a.needPopOnBottom?renderSlot(a.$slots,"expand-icon-down",{key:0}):renderSlot(a.$slots,"expand-icon-right",{key:1})],2),a.isSelected&&a.mode==="horizontal"?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.menuPrefixCls}-selected-label`)},null,2)):createCommentVNode("v-if",!0)],16)]),_:3},16,["class","position","popup-visible","onPopupVisibleChange"])}var SubMenuPop=_export_sfc(_sfc_main$1e,[["render",_sfc_render$10]]),__defProp$o=Object.defineProperty,__defProps$f=Object.defineProperties,__getOwnPropDescs$f=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$p=Object.getOwnPropertySymbols,__hasOwnProp$p=Object.prototype.hasOwnProperty,__propIsEnum$p=Object.prototype.propertyIsEnumerable,__defNormalProp$o=(a,s,l)=>s in a?__defProp$o(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$o=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$p.call(s,l)&&__defNormalProp$o(a,l,s[l]);if(__getOwnPropSymbols$p)for(var l of __getOwnPropSymbols$p(s))__propIsEnum$p.call(s,l)&&__defNormalProp$o(a,l,s[l]);return a},__spreadProps$f=(a,s)=>__defProps$f(a,__getOwnPropDescs$f(s)),SubMenu=defineComponent({name:"SubMenu",props:{title:{type:String},selectable:{type:Boolean},popup:{type:[Boolean,Function],default:!1},popupMaxHeight:{type:[Boolean,Number],default:void 0}},setup(a,{attrs:s}){const{key:l}=useMenu(),{level:o}=useLevel(),{popup:c}=toRefs(a),u=useMenuContext(),d=computed(()=>{const{mode:$,collapsed:x,inTrigger:N}=u;return!!(typeof c.value=="function"?c.value(o.value):c.value)||x||N||$!=="vertical"}),{subMenuKeys:f,menuItemKeys:g}=useMenuDataCollector({key:l.value,type:"subMenu"}),y=computed(()=>{const $=u.selectedKeys||[],x=N=>{for(let R=0;R<$.length;R++){const j=$[R];if(N.includes(j))return!0}return!1};return x(f.value)||x(g.value)});return{subMenuKeys:f,menuItemKeys:g,isChildrenSelected:y,props:a,attrs:s,computedKey:l,computedPopup:d,expandIconDown:toRef(u,"expandIconDown"),expandIconRight:toRef(u,"expandIconRight")}},render(){const{props:a,attrs:s,computedKey:l,computedPopup:o,expandIconDown:c,expandIconRight:u,isChildrenSelected:d}=this,f=__spreadProps$f(__spreadValues$o({},this.$slots),{"expand-icon-down":this.$slots["expand-icon-down"]||c||(()=>[createVNode$1(IconDown,null,null)]),"expand-icon-right":this.$slots["expand-icon-right"]||u||(()=>[createVNode$1(IconRight,null,null)])});return o?createVNode$1(SubMenuPop,mergeProps({key:l,title:a.title,selectable:a.selectable,isChildrenSelected:d,popupMaxHeight:a.popupMaxHeight},s),f):createVNode$1(SubMenuInline,mergeProps({key:l,title:a.title,isChildrenSelected:d},s),f)}});const OVERFLOW_THRESHOLD=10;function getNodeWidth(a){return a&&+a.getBoundingClientRect().width.toFixed(2)}function translatePxToNumber(a){const s=Number(a.replace("px",""));return Number.isNaN(s)?0:s}var OverflowWrap=defineComponent({name:"MenuOverflowWrap",setup(a,{slots:s}){const o=`${useMenuContext().prefixCls}-overflow`,c=`${o}-sub-menu`,u=`${o}-hidden-menu-item`,d=`${o}-sub-menu-mirror`,f=ref(),g=ref(null),y=ref();function $(){const x=f.value,N=getNodeWidth(x),R=[].slice.call(x.children);let j=0,ne=0,se=0;for(let ce=0;ce<R.length;ce++){const fe=R[ce],ea=fe.className.split(" "),ta=ea.indexOf(c)>-1,na=ea.indexOf(d)>-1;if(ta)continue;const aa=getNodeWidth(fe)+translatePxToNumber(getStyle$1(fe,"marginLeft"))+translatePxToNumber(getStyle$1(fe,"marginRight"));if(na){se=aa;continue}if(ne+=aa,ne+se+OVERFLOW_THRESHOLD>N){g.value=j-1;return}j++}g.value=null}return onMounted(()=>{$(),y.value=new index$1(x=>{x.forEach($)}),f.value&&y.value.observe(f.value)}),onUnmounted(()=>{y.value&&y.value.disconnect()}),()=>{const x=(R,j)=>{const{isMirror:ne=!1,props:se={}}=j||{};return createVNode$1(SubMenu,mergeProps({key:`__arco-menu-overflow-sub-menu${ne?"-mirror":""}`,class:ne?d:c},se),{title:()=>createVNode$1("span",null,[createTextVNode("...")]),default:()=>R})},N=()=>{var R;const j=((R=s.default)==null?void 0:R.call(s))||[],ne=unFragment(j);let se=null;const ce=x(null,{isMirror:!0}),fe=ne.map((ea,ta)=>{const na=cloneVNode(ea,g.value!==null&&ta>g.value?{class:u}:{class:""});if(g.value!==null&&ta===g.value+1){const aa=ne.slice(ta).map(ia=>cloneVNode(ia));se=x(aa)}return na});return[ce,...fe,se]};return createVNode$1("div",{class:`${o}-wrap`,ref:f},[N()])}}}),__defProp$n=Object.defineProperty,__defProps$e=Object.defineProperties,__getOwnPropDescs$e=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$o=Object.getOwnPropertySymbols,__hasOwnProp$o=Object.prototype.hasOwnProperty,__propIsEnum$o=Object.prototype.propertyIsEnumerable,__defNormalProp$n=(a,s,l)=>s in a?__defProp$n(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$n=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$o.call(s,l)&&__defNormalProp$n(a,l,s[l]);if(__getOwnPropSymbols$o)for(var l of __getOwnPropSymbols$o(s))__propIsEnum$o.call(s,l)&&__defNormalProp$n(a,l,s[l]);return a},__spreadProps$e=(a,s)=>__defProps$e(a,__getOwnPropDescs$e(s)),_Menu=defineComponent({name:"Menu",components:{BaseMenu},inheritAttrs:!1,props:{theme:{type:String},mode:{type:String,default:"vertical"}},setup(a,{attrs:s,slots:l}){const{theme:o,mode:c}=toRefs(a),u=inject(SiderInjectionKey,void 0),d=computed(()=>u?.collapsed||!1),f=computed(()=>o?.value||u?.theme||"light");return provide(MenuInjectionKey,void 0),provide(LevelInjectionKey,void 0),()=>createVNode$1(BaseMenu,mergeProps(a,s,{theme:f.value,inTrigger:!1,siderCollapsed:d.value,isRoot:!0}),__spreadProps$e(__spreadValues$n({},l),{default:c.value==="horizontal"&&l.default?()=>createVNode$1(OverflowWrap,null,{default:()=>{var g;return[(g=l.default)==null?void 0:g.call(l)]}}):l.default}))}}),__defProp$m=Object.defineProperty,__getOwnPropSymbols$n=Object.getOwnPropertySymbols,__hasOwnProp$n=Object.prototype.hasOwnProperty,__propIsEnum$n=Object.prototype.propertyIsEnumerable,__defNormalProp$m=(a,s,l)=>s in a?__defProp$m(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$m=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$n.call(s,l)&&__defNormalProp$m(a,l,s[l]);if(__getOwnPropSymbols$n)for(var l of __getOwnPropSymbols$n(s))__propIsEnum$n.call(s,l)&&__defNormalProp$m(a,l,s[l]);return a},MenuItem=defineComponent({name:"MenuItem",inheritAttrs:!1,props:{disabled:{type:Boolean,default:!1}},emits:["click"],setup(a,{emit:s}){const{key:l}=useMenu(),{level:o}=useLevel(),c=useMenuContext(),u=ref(),d=computed(()=>(c.selectedKeys||[]).indexOf(l.value)>-1),f=useMenuDataCollectorContext();onMounted(()=>{f?.collectMenuItem(l.value)}),onUnmounted(()=>{f?.removeMenuItem(l.value)});function g(){c.autoScrollIntoView&&u.value&&d.value&&scrollIntoView(u.value,__spreadValues$m({behavior:"smooth",block:"nearest",scrollMode:"if-needed",boundary:document.documentElement},c.scrollConfig||{}))}let y;return onMounted(()=>{y=setTimeout(()=>{g()},500)}),onUnmounted(()=>{clearTimeout(y)}),watch([d],()=>{g()}),{menuContext:c,level:o,isSelected:d,refItemElement:u,onClick($){a.disabled||(c.onMenuItemClick&&c.onMenuItemClick(l.value),s("click",$))}}},render(){var a,s;const{level:l,menuContext:o,disabled:c,isSelected:u,onClick:d}=this,{prefixCls:f,collapsed:g,inTrigger:y,mode:$,tooltipProps:x}=o,N=g&&!y&&l===1,R=$==="vertical"&&l>1,j=((s=(a=this.$slots).default)==null?void 0:s.call(a))||[],ne=R&&!y&&!g,se=this.$slots.icon&&this.$slots.icon(),ce=[ne&&createVNode$1(MenuIndent,{level:l},null),se&&createVNode$1("span",{class:`${f}-icon`},[se]),ne||se?createVNode$1("span",{class:[`${f}-item-inner`,{[`${f}-title`]:se}]},[j]):j].filter(Boolean),fe=createVNode$1("div",mergeProps({ref:"refItemElement",class:[`${f}-item`,{[`${f}-disabled`]:c,[`${f}-selected`]:u,[`${f}-has-icon`]:se}]},this.$attrs,{onClick:d}),[ce,u&&$==="horizontal"&&createVNode$1("div",{class:`${f}-selected-label`},null)]);if(N){const ea=[`${f}-item-tooltip`,x?.class];return createVNode$1(Tooltip,mergeProps({trigger:"hover",position:"right",class:ea},omit(x||{},["class"])),{default:()=>fe,content:()=>j})}return fe}});const _sfc_main$1d=defineComponent({name:"MenuItemGroup",components:{MenuIndent},props:{title:{type:String}},setup(){const{level:a}=useLevel(),s=computed(()=>a.value===1?a.value+1:a.value);provideLevel(s);const l=useMenuContext(),o=computed(()=>l.prefixCls),c=computed(()=>[`${o.value}-group`]);return{prefixCls:o,classNames:c,level:a}}});function _sfc_render$$(a,s,l,o,c,u){const d=resolveComponent("MenuIndent");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-group-title`)},[createVNode$1(d,{level:a.level},null,8,["level"]),renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2),renderSlot(a.$slots,"default")],2)}var MenuItemGroup=_export_sfc(_sfc_main$1d,[["render",_sfc_render$$]]);const Menu=Object.assign(_Menu,{Item:MenuItem,ItemGroup:MenuItemGroup,SubMenu,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Menu.name,_Menu),a.component(l+MenuItem.name,MenuItem),a.component(l+MenuItemGroup.name,MenuItemGroup),a.component(l+SubMenu.name,SubMenu)}}),_sfc_main$1c=defineComponent({name:"Message",components:{AIconHover:IconHover,IconInfoCircleFill,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill,IconClose,IconLoading},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(a,{emit:s}){const l=getPrefixCls("message");let o=0;const c=()=>{s("close")},u=()=>{a.duration>0&&(o=window.setTimeout(c,a.duration))},d=()=>{o&&(window.clearTimeout(o),o=0)};return onMounted(()=>{u()}),onUpdated(()=>{a.resetOnUpdate&&(d(),u())}),onUnmounted(()=>{d()}),{handleMouseEnter:()=>{a.resetOnHover&&d()},handleMouseLeave:()=>{a.resetOnHover&&u()},prefixCls:l,handleClose:c}}});function _sfc_render$_(a,s,l,o,c,u){const d=resolveComponent("icon-info-circle-fill"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill"),$=resolveComponent("icon-loading"),x=resolveComponent("icon-close"),N=resolveComponent("a-icon-hover");return openBlock(),createElementBlock("li",{role:"alert",class:normalizeClass([a.prefixCls,`${a.prefixCls}-${a.type}`,{[`${a.prefixCls}-closable`]:a.closable}]),onMouseenter:s[1]||(s[1]=(...R)=>a.handleMouseEnter&&a.handleMouseEnter(...R)),onMouseleave:s[2]||(s[2]=(...R)=>a.handleMouseLeave&&a.handleMouseLeave(...R))},[a.showIcon&&!(a.type==="normal"&&!a.$slots.icon)?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon",{},()=>[a.type==="info"?(openBlock(),createBlock(d,{key:0})):a.type==="success"?(openBlock(),createBlock(f,{key:1})):a.type==="warning"?(openBlock(),createBlock(g,{key:2})):a.type==="error"?(openBlock(),createBlock(y,{key:3})):a.type==="loading"?(openBlock(),createBlock($,{key:4})):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2),a.closable?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...R)=>a.handleClose&&a.handleClose(...R))},[createVNode$1(N,null,{default:withCtx(()=>[createVNode$1(x)]),_:1})],2)):createCommentVNode("v-if",!0)],34)}var Message$1=_export_sfc(_sfc_main$1c,[["render",_sfc_render$_]]);function _isSlot$8(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var MessageList=defineComponent({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(a,s){const l=getPrefixCls("message-list"),{zIndex:o}=usePopupManager("message",{runOnMounted:!0});return()=>{let c;return createVNode$1(TransitionGroup,{class:[l,`${l}-${a.position}`],name:"fade-message",tag:"ul",style:{zIndex:o.value},onAfterLeave:()=>s.emit("afterClose")},_isSlot$8(c=a.messages.map(u=>{const d={default:getSlotFunction(u.content),icon:getSlotFunction(u.icon)};return createVNode$1(Message$1,{key:u.id,type:u.type,duration:u.duration,closable:u.closable,resetOnUpdate:u.resetOnUpdate,resetOnHover:u.resetOnHover,onClose:()=>s.emit("close",u.id)},d)}))?c:{default:()=>[c]})}}}),__defProp$l=Object.defineProperty,__defProps$d=Object.defineProperties,__getOwnPropDescs$d=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$l=(a,s,l)=>s in a?__defProp$l(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$l=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$m.call(s,l)&&__defNormalProp$l(a,l,s[l]);if(__getOwnPropSymbols$m)for(var l of __getOwnPropSymbols$m(s))__propIsEnum$m.call(s,l)&&__defNormalProp$l(a,l,s[l]);return a},__spreadProps$d=(a,s)=>__defProps$d(a,__getOwnPropDescs$d(s));class MessageManger{constructor(s,l){this.messageCount=0,this.add=u=>{var d;this.messageCount++;const f=(d=u.id)!=null?d:`__arco_message_${this.messageCount}`;if(this.messageIds.has(f))return this.update(f,u);const g=reactive(__spreadValues$l({id:f},u));return this.messages.value.push(g),this.messageIds.add(f),{close:()=>this.remove(f)}},this.update=(u,d)=>{for(let f=0;f<this.messages.value.length;f++)if(this.messages.value[f].id===u){const g=!isUndefined(d.duration);Object.assign(this.messages.value[f],__spreadProps$d(__spreadValues$l({},d),{id:u,resetOnUpdate:g}));break}return{close:()=>this.remove(u)}},this.remove=u=>{for(let d=0;d<this.messages.value.length;d++){const f=this.messages.value[d];if(f.id===u){isFunction$1(f.onClose)&&f.onClose(u),this.messages.value.splice(d,1),this.messageIds.delete(u);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(render$1(null,this.container),document.body.removeChild(this.container),this.container=null,messageInstance[this.position]=void 0)};const{position:o="top"}=s;this.container=getOverlay("message"),this.messageIds=new Set,this.messages=ref([]),this.position=o;const c=createVNode$1(MessageList,{messages:this.messages.value,position:o,onClose:this.remove,onAfterClose:this.destroy});(l??Message._context)&&(c.appContext=l??Message._context),render$1(c,this.container),document.body.appendChild(this.container)}}const messageInstance={},types=[...MESSAGE_TYPES,"loading","normal"],message=types.reduce((a,s)=>(a[s]=(l,o)=>{isString$1(l)&&(l={content:l});const c=__spreadValues$l({type:s},l),{position:u="top"}=c;return messageInstance[u]||(messageInstance[u]=new MessageManger(c,o)),messageInstance[u].add(c)},a),{});message.clear=a=>{var s;a?(s=messageInstance[a])==null||s.clear():Object.values(messageInstance).forEach(l=>l?.clear())};const Message=__spreadProps$d(__spreadValues$l({},message),{install:a=>{const s={clear:message.clear};for(const l of types)s[l]=(o,c=a._context)=>message[l](o,c);a.config.globalProperties.$message=s},_context:null}),useDraggable$1=({modalRef:a,wrapperRef:s,draggable:l,alignCenter:o})=>{const c=ref(!1),u=ref([0,0]),d=ref([0,0]),f=ref(),g=ref([0,0]),y=ref([0,0]),$=()=>{var j,ne,se;if(s.value&&a.value){const{top:ce,left:fe}=s.value.getBoundingClientRect(),{clientWidth:ea,clientHeight:ta}=s.value,{top:na,left:aa,width:ia,height:sa}=a.value.getBoundingClientRect(),ra=o.value?0:(j=a.value)==null?void 0:j.offsetTop,la=aa-fe,oa=na-ce-ra;(la!==((ne=d.value)==null?void 0:ne[0])||oa!==((se=d.value)==null?void 0:se[1]))&&(d.value=[la,oa]);const ca=ea>ia?ea-ia:0,pa=ta>sa?ta-sa-ra:0;(ca!==y.value[0]||pa!==y.value[1])&&(y.value=[ca,pa]),ra&&(g.value=[0,0-ra])}},x=j=>{l.value&&(j.preventDefault(),c.value=!0,$(),u.value=[j.x,j.y],on(window,"mousemove",N),on(window,"mouseup",R),on(window,"contextmenu",R))},N=j=>{if(c.value){const ne=j.x-u.value[0],se=j.y-u.value[1];let ce=d.value[0]+ne,fe=d.value[1]+se;ce<g.value[0]&&(ce=g.value[0]),ce>y.value[0]&&(ce=y.value[0]),fe<g.value[1]&&(fe=g.value[1]),fe>y.value[1]&&(fe=y.value[1]),f.value=[ce,fe]}},R=()=>{c.value=!1,off(window,"mousemove",N),off(window,"mouseup",R)};return{position:f,handleMoveDown:x}};var __defProp$k=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(a,s,l)=>s in a?__defProp$k(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$k=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$l.call(s,l)&&__defNormalProp$k(a,l,s[l]);if(__getOwnPropSymbols$l)for(var l of __getOwnPropSymbols$l(s))__propIsEnum$l.call(s,l)&&__defNormalProp$k(a,l,s[l]);return a},_sfc_main$1b=defineComponent({name:"Modal",components:{ClientOnly,ArcoButton:Button,IconHover,IconClose,IconInfoCircleFill,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill},inheritAttrs:!1,props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{type:[Number,String]},top:{type:[Number,String]},mask:{type:Boolean,default:!0},title:{type:String},titleAlign:{type:String,default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:Boolean,maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},simple:{type:Boolean,default:a=>a.notice},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{type:[String,Object],default:"body"},maskStyle:{type:Object},modalClass:{type:[String,Array]},modalStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{type:String,default:a=>a.fullscreen?"fade-in-standard":"fade-modal"},modalAnimationName:{type:String,default:a=>a.fullscreen?"zoom-in":"zoom-modal"},bodyClass:{type:[String,Array]},bodyStyle:{type:[String,Object,Array]},messageType:{type:String},hideTitle:{type:Boolean,default:!1}},emits:{"update:visible":a=>!0,ok:a=>!0,cancel:a=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(a,{emit:s}){const{fullscreen:l,popupContainer:o,alignCenter:c}=toRefs(a),u=getPrefixCls("modal"),{t:d}=useI18n(),f=ref(),g=ref(),y=ref(a.defaultVisible),$=computed(()=>{var Ca;return(Ca=a.visible)!=null?Ca:y.value}),x=ref(!1),N=computed(()=>a.okLoading||x.value),R=computed(()=>a.draggable&&!a.fullscreen),{teleportContainer:j,containerRef:ne}=useTeleportContainer({popupContainer:o,visible:$}),se=ref($.value),ce=computed(()=>a.okText||d("modal.okText")),fe=computed(()=>a.cancelText||d("modal.cancelText")),{zIndex:ea,isLastDialog:ta}=usePopupManager("dialog",{visible:$});let na=!1;const aa=Ca=>{a.escToClose&&Ca.key===KEYBOARD_KEY.ESC&&ta()&&ua(Ca)},ia=()=>{a.escToClose&&!na&&(na=!0,on(document.documentElement,"keydown",aa))},sa=()=>{na=!1,off(document.documentElement,"keydown",aa)};let ra=0;const{position:la,handleMoveDown:oa}=useDraggable$1({wrapperRef:f,modalRef:g,draggable:R,alignCenter:c}),ca=()=>{ra++,x.value&&(x.value=!1),y.value=!1,s("update:visible",!1)},pa=async Ca=>{const $a=ra,Pa=await new Promise(async Da=>{var Ta;if(isFunction$1(a.onBeforeOk)){let Ba=a.onBeforeOk((wa=!0)=>Da(wa));if((isPromise(Ba)||!isBoolean$1(Ba))&&(x.value=!0),isPromise(Ba))try{Ba=(Ta=await Ba)!=null?Ta:!0}catch{Ba=!1}isBoolean$1(Ba)&&Da(Ba)}else Da(!0)});$a===ra&&(Pa?(s("ok",Ca),ca()):x.value&&(x.value=!1))},ua=Ca=>{var $a;let Pa=!0;isFunction$1(a.onBeforeCancel)&&(Pa=($a=a.onBeforeCancel())!=null?$a:!1),Pa&&(s("cancel",Ca),ca())},da=ref(!1),ha=Ca=>{Ca.target===f.value&&(da.value=!0)},ga=Ca=>{a.mask&&a.maskClosable&&da.value&&ua(Ca)},fa=()=>{$.value&&(!contains(f.value,document.activeElement)&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),s("open"))},ma=()=>{$.value||(R.value&&(la.value=void 0),se.value=!1,ka(),s("close"))},{setOverflowHidden:va,resetOverflow:ka}=useOverflow(ne);onMounted(()=>{ne.value=getElement(a.popupContainer),$.value&&(va(),a.escToClose&&ia())}),onBeforeUnmount(()=>{ka(),sa()}),watch($,Ca=>{y.value!==Ca&&(y.value=Ca),Ca?(s("beforeOpen"),se.value=!0,da.value=!1,va(),ia()):(s("beforeClose"),sa())}),watch(l,()=>{la.value&&(la.value=void 0)});const ya=computed(()=>[`${u}-wrapper`,{[`${u}-wrapper-align-center`]:a.alignCenter&&!a.fullscreen,[`${u}-wrapper-moved`]:!!la.value}]),ba=computed(()=>[`${u}`,a.modalClass,{[`${u}-simple`]:a.simple,[`${u}-draggable`]:R.value,[`${u}-fullscreen`]:a.fullscreen}]),Ea=computed(()=>{var Ca;const $a=__spreadValues$k({},(Ca=a.modalStyle)!=null?Ca:{});return a.width&&!a.fullscreen&&($a.width=isNumber$1(a.width)?`${a.width}px`:a.width),!a.alignCenter&&a.top&&($a.top=isNumber$1(a.top)?`${a.top}px`:a.top),la.value&&($a.transform=`translate(${la.value[0]}px, ${la.value[1]}px)`),$a});return{prefixCls:u,mounted:se,computedVisible:$,containerRef:ne,wrapperRef:f,mergedModalStyle:Ea,okDisplayText:ce,cancelDisplayText:fe,zIndex:ea,handleOk:pa,handleCancel:ua,handleMaskClick:ga,handleMaskMouseDown:ha,handleOpen:fa,handleClose:ma,mergedOkLoading:N,modalRef:g,wrapperCls:ya,modalCls:ba,teleportContainer:j,handleMoveDown:oa}}});function _sfc_render$Z(a,s,l,o,c,u){const d=resolveComponent("icon-info-circle-fill"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill"),$=resolveComponent("icon-close"),x=resolveComponent("icon-hover"),N=resolveComponent("arco-button"),R=resolveComponent("client-only");return openBlock(),createBlock(R,null,{default:withCtx(()=>[(openBlock(),createBlock(Teleport,{to:a.teleportContainer,disabled:!a.renderToBody},[!a.unmountOnClose||a.computedVisible||a.mounted?withDirectives((openBlock(),createElementBlock("div",mergeProps({key:0,class:`${a.prefixCls}-container`,style:{zIndex:a.zIndex}},a.$attrs),[createVNode$1(Transition,{name:a.maskAnimationName,appear:""},{default:withCtx(()=>[a.mask?withDirectives((openBlock(),createElementBlock("div",{key:0,ref:"maskRef",class:normalizeClass(`${a.prefixCls}-mask`),style:normalizeStyle$1(a.maskStyle)},null,6)),[[vShow,a.computedVisible]]):createCommentVNode("v-if",!0)]),_:1},8,["name"]),createBaseVNode("div",{ref:"wrapperRef",class:normalizeClass(a.wrapperCls),onClick:s[2]||(s[2]=withModifiers((...j)=>a.handleMaskClick&&a.handleMaskClick(...j),["self"])),onMousedown:s[3]||(s[3]=withModifiers((...j)=>a.handleMaskMouseDown&&a.handleMaskMouseDown(...j),["self"]))},[createVNode$1(Transition,{name:a.modalAnimationName,appear:"",onAfterEnter:a.handleOpen,onAfterLeave:a.handleClose},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{ref:"modalRef",class:normalizeClass(a.modalCls),style:normalizeStyle$1(a.mergedModalStyle)},[!a.hideTitle&&(a.$slots.title||a.title||a.closable)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-header`),onMousedown:s[1]||(s[1]=(...j)=>a.handleMoveDown&&a.handleMoveDown(...j))},[a.$slots.title||a.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([`${a.prefixCls}-title`,`${a.prefixCls}-title-align-${a.titleAlign}`])},[a.messageType?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title-icon`)},[a.messageType==="info"?(openBlock(),createBlock(d,{key:0})):createCommentVNode("v-if",!0),a.messageType==="success"?(openBlock(),createBlock(f,{key:1})):createCommentVNode("v-if",!0),a.messageType==="warning"?(openBlock(),createBlock(g,{key:2})):createCommentVNode("v-if",!0),a.messageType==="error"?(openBlock(),createBlock(y,{key:3})):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),!a.simple&&a.closable?(openBlock(),createElementBlock("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...j)=>a.handleCancel&&a.handleCancel(...j))},[createVNode$1(x,null,{default:withCtx(()=>[createVNode$1($)]),_:1})],2)):createCommentVNode("v-if",!0)],34)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-body`,a.bodyClass]),style:normalizeStyle$1(a.bodyStyle)},[renderSlot(a.$slots,"default")],6),a.footer?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer",{},()=>[a.hideCancel?createCommentVNode("v-if",!0):(openBlock(),createBlock(N,mergeProps({key:0},a.cancelButtonProps,{onClick:a.handleCancel}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.cancelDisplayText),1)]),_:1},16,["onClick"])),createVNode$1(N,mergeProps({type:"primary"},a.okButtonProps,{loading:a.mergedOkLoading,onClick:a.handleOk}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.okDisplayText),1)]),_:1},16,["loading","onClick"])])],2)):createCommentVNode("v-if",!0)],6),[[vShow,a.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],34)],16)),[[vShow,a.computedVisible||a.mounted]]):createCommentVNode("v-if",!0)],8,["to","disabled"]))]),_:3})}var _Modal=_export_sfc(_sfc_main$1b,[["render",_sfc_render$Z]]),__defProp$j=Object.defineProperty,__defProps$c=Object.defineProperties,__getOwnPropDescs$c=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(a,s,l)=>s in a?__defProp$j(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$j=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$k.call(s,l)&&__defNormalProp$j(a,l,s[l]);if(__getOwnPropSymbols$k)for(var l of __getOwnPropSymbols$k(s))__propIsEnum$k.call(s,l)&&__defNormalProp$j(a,l,s[l]);return a},__spreadProps$c=(a,s)=>__defProps$c(a,__getOwnPropDescs$c(s));const open=(a,s)=>{let l=getOverlay("modal");const o=()=>{y.component&&(y.component.props.visible=!1),isFunction$1(a.onOk)&&a.onOk()},c=()=>{y.component&&(y.component.props.visible=!1),isFunction$1(a.onCancel)&&a.onCancel()},u=async()=>{await nextTick(),l&&(render$1(null,l),document.body.removeChild(l)),l=null,isFunction$1(a.onClose)&&a.onClose()},d=()=>{y.component&&(y.component.props.visible=!1)},f=$=>{y.component&&Object.entries($).forEach(([x,N])=>{y.component.props[x]=N})},y=createVNode$1(_Modal,__spreadValues$j(__spreadValues$j(__spreadValues$j({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:o,onCancel:c,onClose:u}),omit(a,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{footer:typeof a.footer=="boolean"?a.footer:void 0}),{default:getSlotFunction(a.content),title:getSlotFunction(a.title),footer:typeof a.footer!="boolean"?getSlotFunction(a.footer):void 0});return(s??Modal._context)&&(y.appContext=s??Modal._context),render$1(y,l),document.body.appendChild(l),{close:d,update:f}},modal=__spreadValues$j({open,confirm:(a,s)=>{const l=__spreadValues$j({simple:!0,messageType:"warning"},a);return open(l,s)}},MESSAGE_TYPES.reduce((a,s)=>(a[s]=(l,o)=>{const c=__spreadValues$j({simple:!0,hideCancel:!0,messageType:s},l);return open(c,o)},a),{})),Modal=Object.assign(_Modal,__spreadProps$c(__spreadValues$j({},modal),{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Modal.name,_Modal);const o={};for(const c of Object.keys(modal))o[c]=(u,d=a._context)=>modal[c](u,d);a.config.globalProperties.$modal=o},_context:null})),toKebabCase=a=>a.replace(/\B([A-Z])/g,"-$1").toLowerCase(),_sfc_main$1a=defineComponent({name:"Notification",components:{AIconHover:IconHover,IconInfoCircleFill,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill,IconClose},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1}},emits:["close"],setup(a,s){const l=getPrefixCls("notification");let o=0;const c=()=>{s.emit("close")};return onMounted(()=>{a.duration>0&&(o=window.setTimeout(c,a.duration))}),onUpdated(()=>{a.resetOnUpdate&&(o&&(window.clearTimeout(o),o=0),a.duration>0&&(o=window.setTimeout(c,a.duration)))}),onUnmounted(()=>{o&&window.clearTimeout(o)}),{prefixCls:l,handleClose:c}}});function _sfc_render$Y(a,s,l,o,c,u){const d=resolveComponent("icon-info-circle-fill"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill"),$=resolveComponent("icon-close"),x=resolveComponent("a-icon-hover");return openBlock(),createElementBlock("li",{role:"alert",class:normalizeClass([a.prefixCls,`${a.prefixCls}-${a.type}`,{[`${a.prefixCls}-closable`]:a.closable}])},[a.showIcon?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-left`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon",{},()=>[a.type==="info"?(openBlock(),createBlock(d,{key:0})):a.type==="success"?(openBlock(),createBlock(f,{key:1})):a.type==="warning"?(openBlock(),createBlock(g,{key:2})):a.type==="error"?(openBlock(),createBlock(y,{key:3})):createCommentVNode("v-if",!0)])],2)],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-right`)},[a.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0),a.$slots.content?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"content")],2)):createCommentVNode("v-if",!0),a.$slots.footer?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer")],2)):createCommentVNode("v-if",!0)],2),a.closable?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:s[0]||(s[0]=(...N)=>a.handleClose&&a.handleClose(...N))},[renderSlot(a.$slots,"closeIconElement",{},()=>[createVNode$1(x,null,{default:withCtx(()=>[renderSlot(a.$slots,"closeIcon",{},()=>[createVNode$1($)])]),_:3})])],2)):createCommentVNode("v-if",!0)],2)}var Notification$1=_export_sfc(_sfc_main$1a,[["render",_sfc_render$Y]]);const NOTIFICATION_POSITION=["topLeft","topRight","bottomLeft","bottomRight"];function _isSlot$7(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var NotificationList=defineComponent({name:"NotificationList",props:{notifications:{type:Array,default:()=>[]},position:{type:String,default:"topRight",validator:a=>NOTIFICATION_POSITION.includes(a)}},emits:["close","afterClose"],setup(a,s){const l=getPrefixCls("notification-list"),o=toKebabCase(a.position),{zIndex:c}=usePopupManager("message",{runOnMounted:!0}),u=a.position.includes("Right");return()=>{let d;return createVNode$1(TransitionGroup,{class:[l,`${l}-${o}`],style:{zIndex:c.value},name:`slide-${u?"right":"left"}-notification`,onAfterLeave:()=>s.emit("afterClose"),tag:"ul"},_isSlot$7(d=a.notifications.map(f=>{const g={default:getSlotFunction(f.title),content:getSlotFunction(f.content),icon:getSlotFunction(f.icon),footer:getSlotFunction(f.footer),closeIcon:getSlotFunction(f.closeIcon),closeIconElement:getSlotFunction(f.closeIconElement)};return createVNode$1(Notification$1,{key:f.id,type:f.type,style:f.style,class:f.class,duration:f.duration,closable:f.closable,showIcon:f.showIcon,resetOnUpdate:f.resetOnUpdate,onClose:()=>s.emit("close",f.id)},g)}))?d:{default:()=>[d]})}}}),__defProp$i=Object.defineProperty,__defProps$b=Object.defineProperties,__getOwnPropDescs$b=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$j=Object.getOwnPropertySymbols,__hasOwnProp$j=Object.prototype.hasOwnProperty,__propIsEnum$j=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(a,s,l)=>s in a?__defProp$i(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$i=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$j.call(s,l)&&__defNormalProp$i(a,l,s[l]);if(__getOwnPropSymbols$j)for(var l of __getOwnPropSymbols$j(s))__propIsEnum$j.call(s,l)&&__defNormalProp$i(a,l,s[l]);return a},__spreadProps$b=(a,s)=>__defProps$b(a,__getOwnPropDescs$b(s));class NotificationManger{constructor(s,l){this.notificationCount=0,this.add=u=>{var d;this.notificationCount++;const f=(d=u.id)!=null?d:`__arco_notification_${this.notificationCount}`;if(this.notificationIds.has(f))return this.update(f,u);const g=reactive(__spreadValues$i({id:f},u));return this.notifications.value.push(g),this.notificationIds.add(f),{close:()=>this.remove(f)}},this.update=(u,d)=>{for(let f=0;f<this.notifications.value.length;f++)if(this.notifications.value[f].id===u){const g=!isUndefined(d.duration);Object.assign(this.notifications.value[f],__spreadProps$b(__spreadValues$i({},d),{id:u,resetOnUpdate:g}));break}return{close:()=>this.remove(u)}},this.remove=u=>{for(let d=0;d<this.notifications.value.length;d++){const f=this.notifications.value[d];if(f.id===u){isFunction$1(f.onClose)&&f.onClose(u),this.notifications.value.splice(d,1),this.notificationIds.delete(u);break}}},this.clear=()=>{this.notifications.value.splice(0)},this.destroy=()=>{this.notifications.value.length===0&&this.container&&(render$1(null,this.container),document.body.removeChild(this.container),this.container=null,notificationInstance[this.position]=void 0)};const{position:o="topRight"}=s;this.container=getOverlay("notification"),this.notificationIds=new Set,this.notifications=ref([]),this.position=o;const c=createVNode$1(NotificationList,{notifications:this.notifications.value,position:o,onClose:this.remove,onAfterClose:this.destroy});(l??Notification._context)&&(c.appContext=l??Notification._context),render$1(c,this.container),document.body.appendChild(this.container)}}const notificationInstance={},notification=MESSAGE_TYPES.reduce((a,s)=>(a[s]=(l,o)=>{isString$1(l)&&(l={content:l});const c=__spreadValues$i({type:s},l),{position:u="topRight"}=c;return notificationInstance[u]||(notificationInstance[u]=new NotificationManger(c,o)),notificationInstance[u].add(c)},a),{});notification.remove=a=>{a&&Object.values(notificationInstance).forEach(s=>s?.remove(a))};notification.clear=a=>{var s;a?(s=notificationInstance[a])==null||s.clear():Object.values(notificationInstance).forEach(l=>l?.clear())};const Notification=__spreadProps$b(__spreadValues$i({},notification),{install:a=>{const s={clear:notification.clear};for(const l of MESSAGE_TYPES)s[l]=(o,c=a._context)=>notification[l](o,c);a.config.globalProperties.$notification=s},_context:null}),_sfc_main$19=defineComponent({name:"PageHeader",components:{AIconHover:IconHover,IconLeft},props:{title:String,subtitle:String,showBack:{type:Boolean,default:!0}},emits:["back"],setup(a,{emit:s,slots:l}){const o=getPrefixCls("page-header"),c=d=>{s("back",d)},u=computed(()=>[o,{[`${o}-with-breadcrumb`]:!!l.breadcrumb,[`${o}-with-content`]:!!l.default}]);return{prefixCls:o,cls:u,handleBack:c}}});function _sfc_render$X(a,s,l,o,c,u){const d=resolveComponent("icon-left"),f=resolveComponent("a-icon-hover");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-wrapper`)},[a.$slots.breadcrumb?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-breadcrumb`)},[renderSlot(a.$slots,"breadcrumb")],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-header`)},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-main`)},[a.showBack?(openBlock(),createBlock(f,{key:0,class:normalizeClass(`${a.prefixCls}-back-btn`),prefix:a.prefixCls,onClick:a.handleBack},{default:withCtx(()=>[renderSlot(a.$slots,"back-icon",{},()=>[createVNode$1(d)])]),_:3},8,["class","prefix","onClick"])):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2),a.$slots.subtitle||a.subtitle?(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-divider`)},null,2)):createCommentVNode("v-if",!0),a.$slots.subtitle||a.subtitle?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass(`${a.prefixCls}-subtitle`)},[renderSlot(a.$slots,"subtitle",{},()=>[createTextVNode(toDisplayString(a.subtitle),1)])],2)):createCommentVNode("v-if",!0)],2),a.$slots.extra?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-extra`)},[renderSlot(a.$slots,"extra")],2)):createCommentVNode("v-if",!0)],2)],2),a.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0)],2)}var _PageHeader=_export_sfc(_sfc_main$19,[["render",_sfc_render$X]]);const PageHeader=Object.assign(_PageHeader,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_PageHeader.name,_PageHeader)}}),_sfc_main$18=defineComponent({name:"Popconfirm",components:{ArcoButton:Button,Trigger,IconInfoCircleFill,IconCheckCircleFill,IconExclamationCircleFill,IconCloseCircleFill},props:{content:String,position:{type:String,default:"top"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},type:{type:String,default:"info"},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]},onBeforeOk:{type:Function},onBeforeCancel:{type:Function}},emits:{"update:popupVisible":a=>!0,popupVisibleChange:a=>!0,ok:()=>!0,cancel:()=>!0},setup(a,{emit:s}){const l=getPrefixCls("popconfirm"),{t:o}=useI18n(),c=ref(a.defaultPopupVisible),u=computed(()=>{var ne;return(ne=a.popupVisible)!=null?ne:c.value}),d=ref(!1),f=computed(()=>a.okLoading||d.value);let g=0;const y=()=>{g++,d.value&&(d.value=!1),c.value=!1,s("update:popupVisible",!1),s("popupVisibleChange",!1)},$=ne=>{ne?(c.value=ne,s("update:popupVisible",ne),s("popupVisibleChange",ne)):y()},x=async()=>{const ne=g,se=await new Promise(async ce=>{var fe;if(isFunction$1(a.onBeforeOk)){let ea=a.onBeforeOk((ta=!0)=>ce(ta));if((isPromise(ea)||!isBoolean$1(ea))&&(d.value=!0),isPromise(ea))try{ea=(fe=await ea)!=null?fe:!0}catch{ea=!1}isBoolean$1(ea)&&ce(ea)}else ce(!0)});ne===g&&(se?(s("ok"),y()):d.value&&(d.value=!1))},N=()=>{var ne;let se=!0;isFunction$1(a.onBeforeCancel)&&(se=(ne=a.onBeforeCancel())!=null?ne:!1),se&&(s("cancel"),y())},R=computed(()=>[`${l}-popup-content`,a.contentClass]),j=computed(()=>[`${l}-popup-arrow`,a.arrowClass]);return{prefixCls:l,contentCls:R,arrowCls:j,computedPopupVisible:u,mergedOkLoading:f,handlePopupVisibleChange:$,handleOk:x,handleCancel:N,t:o}}});function _sfc_render$W(a,s,l,o,c,u){const d=resolveComponent("icon-info-circle-fill"),f=resolveComponent("icon-check-circle-fill"),g=resolveComponent("icon-exclamation-circle-fill"),y=resolveComponent("icon-close-circle-fill"),$=resolveComponent("arco-button"),x=resolveComponent("trigger");return openBlock(),createBlock(x,{class:normalizeClass(a.prefixCls),trigger:"click",position:a.position,"show-arrow":"","popup-visible":a.computedPopupVisible,"popup-offset":10,"popup-container":a.popupContainer,"content-class":a.contentCls,"content-style":a.contentStyle,"arrow-class":a.arrowCls,"arrow-style":a.arrowStyle,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:a.handlePopupVisibleChange},{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-body`)},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-icon`)},[renderSlot(a.$slots,"icon",{},()=>[a.type==="info"?(openBlock(),createBlock(d,{key:0})):a.type==="success"?(openBlock(),createBlock(f,{key:1})):a.type==="warning"?(openBlock(),createBlock(g,{key:2})):a.type==="error"?(openBlock(),createBlock(y,{key:3})):createCommentVNode("v-if",!0)])],2),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"content",{},()=>[createTextVNode(toDisplayString(a.content),1)])],2)],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-footer`)},[createVNode$1($,mergeProps({size:"mini"},a.cancelButtonProps,{onClick:a.handleCancel}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.cancelText||a.t("popconfirm.cancelText")),1)]),_:1},16,["onClick"]),createVNode$1($,mergeProps({type:"primary",size:"mini"},a.okButtonProps,{loading:a.mergedOkLoading,onClick:a.handleOk}),{default:withCtx(()=>[createTextVNode(toDisplayString(a.okText||a.t("popconfirm.okText")),1)]),_:1},16,["loading","onClick"])],2)]),default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["class","position","popup-visible","popup-container","content-class","content-style","arrow-class","arrow-style","onPopupVisibleChange"])}var _Popconfirm=_export_sfc(_sfc_main$18,[["render",_sfc_render$W]]);const Popconfirm=Object.assign(_Popconfirm,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Popconfirm.name,_Popconfirm)}});var __defProp$h=Object.defineProperty,__getOwnPropSymbols$i=Object.getOwnPropertySymbols,__hasOwnProp$i=Object.prototype.hasOwnProperty,__propIsEnum$i=Object.prototype.propertyIsEnumerable,__defNormalProp$h=(a,s,l)=>s in a?__defProp$h(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$h=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$i.call(s,l)&&__defNormalProp$h(a,l,s[l]);if(__getOwnPropSymbols$i)for(var l of __getOwnPropSymbols$i(s))__propIsEnum$i.call(s,l)&&__defNormalProp$h(a,l,s[l]);return a};const DEFAULT_STROKE_WIDTH$1={small:3,medium:4,large:8},getBackground=a=>{if(a)return isObject$1(a)?{backgroundImage:`linear-gradient(to right, ${Object.keys(a).map(l=>`${a[l]} ${l}`).join(",")})`}:{backgroundColor:a}},_sfc_main$17=defineComponent({name:"ProgressLine",components:{IconExclamationCircleFill},props:{percent:{type:Number,default:0},animation:{type:Boolean,default:!1},size:{type:String,default:"medium"},strokeWidth:{type:Number,default:4},width:{type:[Number,String],default:"100%"},color:{type:[String,Object],default:void 0},trackColor:String,formatText:{type:Function,default:void 0},status:{type:String},showText:Boolean},setup(a){const s=getPrefixCls("progress-line"),l=computed(()=>a.strokeWidth!==4?a.strokeWidth:DEFAULT_STROKE_WIDTH$1[a.size]),o=computed(()=>`${index.times(a.percent,100)}%`),c=computed(()=>({width:a.width,height:`${l.value}px`,backgroundColor:a.trackColor})),u=computed(()=>__spreadValues$h({width:`${a.percent*100}%`},getBackground(a.color)));return{prefixCls:s,style:c,barStyle:u,text:o}}}),_hoisted_1$F=["aria-valuenow"];function _sfc_render$V(a,s,l,o,c,u){const d=resolveComponent("icon-exclamation-circle-fill");return openBlock(),createElementBlock("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":a.percent,class:normalizeClass(`${a.prefixCls}-wrapper`)},[createBaseVNode("div",{class:normalizeClass(a.prefixCls),style:normalizeStyle$1(a.style)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-bar-buffer`)},null,2),createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-bar`]),style:normalizeStyle$1(a.barStyle)},null,6)],6),a.showText?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-text`)},[renderSlot(a.$slots,"text",{percent:a.percent},()=>[createTextVNode(toDisplayString(a.text)+" ",1),a.status==="danger"?(openBlock(),createBlock(d,{key:0})):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0)],10,_hoisted_1$F)}var ProgressLine=_export_sfc(_sfc_main$17,[["render",_sfc_render$V]]);const _sfc_main$16=defineComponent({name:"IconExclamation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-exclamation`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$E=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$u=createBaseVNode("path",{d:"M23 9h2v21h-2z"},null,-1),_hoisted_3$r=createBaseVNode("path",{fill:"currentColor",stroke:"none",d:"M23 9h2v21h-2z"},null,-1),_hoisted_4$a=createBaseVNode("path",{d:"M23 37h2v2h-2z"},null,-1),_hoisted_5$5=createBaseVNode("path",{fill:"currentColor",stroke:"none",d:"M23 37h2v2h-2z"},null,-1),_hoisted_6$3=[_hoisted_2$u,_hoisted_3$r,_hoisted_4$a,_hoisted_5$5];function _sfc_render$U(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_6$3,14,_hoisted_1$E)}var _IconExclamation=_export_sfc(_sfc_main$16,[["render",_sfc_render$U]]);const IconExclamation=Object.assign(_IconExclamation,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconExclamation.name,_IconExclamation)}}),_sfc_main$15=defineComponent({name:"IconCheck",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-check`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$D=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$t=createBaseVNode("path",{d:"M41.678 11.05 19.05 33.678 6.322 20.95"},null,-1),_hoisted_3$q=[_hoisted_2$t];function _sfc_render$T(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$q,14,_hoisted_1$D)}var _IconCheck=_export_sfc(_sfc_main$15,[["render",_sfc_render$T]]);const IconCheck=Object.assign(_IconCheck,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCheck.name,_IconCheck)}});let __ARCO_PROGRESS_SEED=0;const DEFAULT_WIDTH={mini:16,small:48,medium:64,large:80},DEFAULT_STROKE_WIDTH={mini:4,small:3,medium:4,large:4},_sfc_main$14=defineComponent({name:"ProgressCircle",components:{IconExclamation,IconCheck},props:{percent:{type:Number,default:0},type:{type:String},size:{type:String,default:"medium"},strokeWidth:{type:Number},width:{type:Number,default:void 0},color:{type:[String,Object],default:void 0},trackColor:String,status:{type:String,default:void 0},showText:{type:Boolean,default:!0},pathStrokeWidth:{type:Number}},setup(a){const s=getPrefixCls("progress-circle"),l=isObject$1(a.color),o=computed(()=>{var x;return(x=a.width)!=null?x:DEFAULT_WIDTH[a.size]}),c=computed(()=>{var x;return(x=a.strokeWidth)!=null?x:a.size==="mini"?o.value/2:DEFAULT_STROKE_WIDTH[a.size]}),u=computed(()=>{var x;return(x=a.pathStrokeWidth)!=null?x:a.size==="mini"?c.value:Math.max(2,c.value-2)}),d=computed(()=>(o.value-c.value)/2),f=computed(()=>Math.PI*2*d.value),g=computed(()=>o.value/2),y=computed(()=>(__ARCO_PROGRESS_SEED+=1,`${s}-linear-gradient-${__ARCO_PROGRESS_SEED}`)),$=computed(()=>`${index.times(a.percent,100)}%`);return{prefixCls:s,isLinearGradient:l,radius:d,text:$,perimeter:f,center:g,mergedWidth:o,mergedStrokeWidth:c,mergedPathStrokeWidth:u,linearGradientId:y}}}),_hoisted_1$C=["aria-valuenow"],_hoisted_2$s=["viewBox"],_hoisted_3$p={key:0},_hoisted_4$9=["id"],_hoisted_5$4=["offset","stop-color"],_hoisted_6$2=["cx","cy","r","stroke-width"],_hoisted_7=["cx","cy","r","stroke-width"];function _sfc_render$S(a,s,l,o,c,u){const d=resolveComponent("icon-check"),f=resolveComponent("icon-exclamation");return openBlock(),createElementBlock("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":a.percent,class:normalizeClass(`${a.prefixCls}-wrapper`),style:normalizeStyle$1({width:`${a.mergedWidth}px`,height:`${a.mergedWidth}px`})},[a.type==="circle"&&a.size==="mini"&&a.status==="success"?(openBlock(),createBlock(d,{key:0,style:normalizeStyle$1({fontSize:a.mergedWidth-2,color:a.color})},null,8,["style"])):(openBlock(),createElementBlock("svg",{key:1,viewBox:`0 0 ${a.mergedWidth} ${a.mergedWidth}`,class:normalizeClass(`${a.prefixCls}-svg`)},[a.isLinearGradient?(openBlock(),createElementBlock("defs",_hoisted_3$p,[createBaseVNode("linearGradient",{id:a.linearGradientId,x1:"0",y1:"1",x2:"0",y2:"0"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(a.color),g=>(openBlock(),createElementBlock("stop",{key:g,offset:g,"stop-color":a.color[g]},null,8,_hoisted_5$4))),128))],8,_hoisted_4$9)])):createCommentVNode("v-if",!0),createBaseVNode("circle",{class:normalizeClass(`${a.prefixCls}-bg`),fill:"none",cx:a.center,cy:a.center,r:a.radius,"stroke-width":a.mergedPathStrokeWidth,style:normalizeStyle$1({stroke:a.trackColor})},null,14,_hoisted_6$2),createBaseVNode("circle",{class:normalizeClass(`${a.prefixCls}-bar`),fill:"none",cx:a.center,cy:a.center,r:a.radius,"stroke-width":a.mergedStrokeWidth,style:normalizeStyle$1({stroke:a.isLinearGradient?`url(#${a.linearGradientId})`:a.color,strokeDasharray:a.perimeter,strokeDashoffset:(a.percent>=1?0:1-a.percent)*a.perimeter})},null,14,_hoisted_7)],10,_hoisted_2$s)),a.showText&&a.size!=="mini"?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-text`)},[renderSlot(a.$slots,"text",{percent:a.percent},()=>[a.status==="danger"?(openBlock(),createBlock(f,{key:0})):a.status==="success"?(openBlock(),createBlock(d,{key:1})):(openBlock(),createElementBlock(Fragment,{key:2},[createTextVNode(toDisplayString(a.text),1)],2112))])],2)):createCommentVNode("v-if",!0)],14,_hoisted_1$C)}var ProgressCircle=_export_sfc(_sfc_main$14,[["render",_sfc_render$S]]);const _sfc_main$13=defineComponent({name:"ProgressSteps",components:{IconExclamationCircleFill},props:{steps:{type:Number,default:0},percent:{type:Number,default:0},size:{type:String},color:{type:[String,Object],default:void 0},trackColor:String,strokeWidth:{type:Number},status:{type:String,default:void 0},showText:{type:Boolean,default:!0}},setup(a){const s=getPrefixCls("progress-steps"),l=computed(()=>{var u;return((u=a.strokeWidth)!=null?u:a.size==="small")?8:4}),o=computed(()=>[...Array(a.steps)].map((u,d)=>a.percent>0&&a.percent>1/a.steps*d)),c=computed(()=>`${index.times(a.percent,100)}%`);return{prefixCls:s,stepList:o,mergedStrokeWidth:l,text:c}}}),_hoisted_1$B=["aria-valuenow"];function _sfc_render$R(a,s,l,o,c,u){const d=resolveComponent("icon-exclamation-circle-fill");return openBlock(),createElementBlock("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":a.percent,class:normalizeClass(`${a.prefixCls}-wrapper`)},[createBaseVNode("div",{class:normalizeClass(a.prefixCls),style:normalizeStyle$1({height:`${a.mergedStrokeWidth}px`})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.stepList,(f,g)=>(openBlock(),createElementBlock("div",{key:g,class:normalizeClass([`${a.prefixCls}-item`,{[`${a.prefixCls}-item-active`]:f}]),style:normalizeStyle$1({backgroundColor:f?a.color:a.trackColor})},null,6))),128))],6),a.showText?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-text`)},[renderSlot(a.$slots,"text",{percent:a.percent},()=>[createTextVNode(toDisplayString(a.text)+" ",1),a.status==="danger"?(openBlock(),createBlock(d,{key:0})):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0)],10,_hoisted_1$B)}var ProgressSteps=_export_sfc(_sfc_main$13,[["render",_sfc_render$R]]);const _sfc_main$12=defineComponent({name:"Progress",components:{ProgressLine,ProgressCircle,ProgressSteps},props:{type:{type:String,default:"line"},size:{type:String},percent:{type:Number,default:0},steps:{type:Number,default:0},animation:{type:Boolean,default:!1},strokeWidth:{type:Number},width:{type:[Number,String]},color:{type:[String,Object]},trackColor:String,bufferColor:{type:[String,Object]},showText:{type:Boolean,default:!0},status:{type:String}},setup(a){const s=getPrefixCls("progress"),{size:l}=toRefs(a),o=computed(()=>a.steps>0?"steps":a.type),c=computed(()=>a.status||(a.percent>=1?"success":"normal")),{mergedSize:u}=useSize$1(l);return{cls:computed(()=>[s,`${s}-type-${o.value}`,`${s}-size-${u.value}`,`${s}-status-${c.value}`]),computedStatus:c,mergedSize:u}}});function _sfc_render$Q(a,s,l,o,c,u){const d=resolveComponent("progress-steps"),f=resolveComponent("progress-line"),g=resolveComponent("progress-circle");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[a.steps>0?(openBlock(),createBlock(d,{key:0,"stroke-width":a.strokeWidth,percent:a.percent,color:a.color,"track-color":a.trackColor,width:a.width,steps:a.steps,size:a.mergedSize,"show-text":a.showText},createSlots({_:2},[a.$slots.text?{name:"text",fn:withCtx(y=>[renderSlot(a.$slots,"text",normalizeProps(guardReactiveProps(y)))])}:void 0]),1032,["stroke-width","percent","color","track-color","width","steps","size","show-text"])):a.type==="line"&&a.mergedSize!=="mini"?(openBlock(),createBlock(f,{key:1,"stroke-width":a.strokeWidth,animation:a.animation,percent:a.percent,color:a.color,"track-color":a.trackColor,size:a.mergedSize,"buffer-color":a.bufferColor,width:a.width,"show-text":a.showText,status:a.computedStatus},createSlots({_:2},[a.$slots.text?{name:"text",fn:withCtx(y=>[renderSlot(a.$slots,"text",normalizeProps(guardReactiveProps(y)))])}:void 0]),1032,["stroke-width","animation","percent","color","track-color","size","buffer-color","width","show-text","status"])):(openBlock(),createBlock(g,{key:2,type:a.type,"stroke-width":a.type==="line"?a.strokeWidth||4:a.strokeWidth,"path-stroke-width":a.type==="line"?a.strokeWidth||4:a.strokeWidth,width:a.width,percent:a.percent,color:a.color,"track-color":a.trackColor,size:a.mergedSize,"show-text":a.showText,status:a.computedStatus},createSlots({_:2},[a.$slots.text?{name:"text",fn:withCtx(y=>[renderSlot(a.$slots,"text",normalizeProps(guardReactiveProps(y)))])}:void 0]),1032,["type","stroke-width","path-stroke-width","width","percent","color","track-color","size","show-text","status"]))],2)}var _Progress=_export_sfc(_sfc_main$12,[["render",_sfc_render$Q]]);const Progress=Object.assign(_Progress,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Progress.name,_Progress)}}),_sfc_main$11=defineComponent({name:"IconStarFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-star-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$A=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$r=createBaseVNode("path",{d:"M22.683 5.415c.568-1.043 2.065-1.043 2.634 0l5.507 10.098a1.5 1.5 0 0 0 1.04.756l11.306 2.117c1.168.219 1.63 1.642.814 2.505l-7.902 8.359a1.5 1.5 0 0 0-.397 1.223l1.48 11.407c.153 1.177-1.058 2.057-2.131 1.548l-10.391-4.933a1.5 1.5 0 0 0-1.287 0l-10.39 4.933c-1.073.51-2.284-.37-2.131-1.548l1.48-11.407a1.5 1.5 0 0 0-.398-1.223L4.015 20.89c-.816-.863-.353-2.286.814-2.505l11.306-2.117a1.5 1.5 0 0 0 1.04-.756l5.508-10.098Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$o=[_hoisted_2$r];function _sfc_render$P(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$o,14,_hoisted_1$A)}var _IconStarFill=_export_sfc(_sfc_main$11,[["render",_sfc_render$P]]);const IconStarFill=Object.assign(_IconStarFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconStarFill.name,_IconStarFill)}}),_sfc_main$10=defineComponent({name:"IconFaceMehFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-face-meh-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$z=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$q=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.321-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25ZM15.999 30a2 2 0 0 1 2-2h12a2 2 0 1 1 0 4H18a2 2 0 0 1-2-2Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$n=[_hoisted_2$q];function _sfc_render$O(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$n,14,_hoisted_1$z)}var _IconFaceMehFill=_export_sfc(_sfc_main$10,[["render",_sfc_render$O]]);const IconFaceMehFill=Object.assign(_IconFaceMehFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFaceMehFill.name,_IconFaceMehFill)}}),_sfc_main$$=defineComponent({name:"IconFaceSmileFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-face-smile-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$y=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$p=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.321-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-.355 9.953a1.91 1.91 0 0 1 2.694.177 6.66 6.66 0 0 0 5.026 2.279c1.918 0 3.7-.81 4.961-2.206a1.91 1.91 0 0 1 2.834 2.558 10.476 10.476 0 0 1-7.795 3.466 10.477 10.477 0 0 1-7.897-3.58 1.91 1.91 0 0 1 .177-2.694Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$m=[_hoisted_2$p];function _sfc_render$N(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$m,14,_hoisted_1$y)}var _IconFaceSmileFill=_export_sfc(_sfc_main$$,[["render",_sfc_render$N]]);const IconFaceSmileFill=Object.assign(_IconFaceSmileFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFaceSmileFill.name,_IconFaceSmileFill)}}),_sfc_main$_=defineComponent({name:"IconFaceFrownFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-face-frown-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$x=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$o=createBaseVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.322-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25ZM31.68 32.88a1.91 1.91 0 0 1-2.694-.176 6.66 6.66 0 0 0-5.026-2.28c-1.918 0-3.701.81-4.962 2.207a1.91 1.91 0 0 1-2.834-2.559 10.476 10.476 0 0 1 7.796-3.465c3.063 0 5.916 1.321 7.896 3.58a1.909 1.909 0 0 1-.176 2.693Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$l=[_hoisted_2$o];function _sfc_render$M(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$l,14,_hoisted_1$x)}var _IconFaceFrownFill=_export_sfc(_sfc_main$_,[["render",_sfc_render$M]]);const IconFaceFrownFill=Object.assign(_IconFaceFrownFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFaceFrownFill.name,_IconFaceFrownFill)}});var _Rate=defineComponent({name:"Rate",props:{count:{type:Number,default:5},modelValue:{type:Number,default:void 0},defaultValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},grading:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:[String,Object]}},emits:{"update:modelValue":a=>!0,change:a=>!0,hoverChange:a=>!0},setup(a,{emit:s,slots:l}){const{modelValue:o}=toRefs(a),c=getPrefixCls("rate"),{mergedDisabled:u,eventHandlers:d}=useFormItem({disabled:toRef(a,"disabled")}),f=ref(a.defaultValue),g=ref(!1);watch(o,sa=>{(isUndefined(sa)||isNull(sa))&&(f.value=0)});const y=ref(0),$=computed(()=>{var sa;return(sa=a.modelValue)!=null?sa:f.value}),x=computed(()=>{const sa=a.allowHalf?index.times(index.round(index.divide($.value,.5),0),.5):Math.round($.value);return y.value||sa}),N=computed(()=>u.value||a.readonly),R=computed(()=>[...Array(a.grading?5:a.count)]),j=computed(()=>{var sa;if(isString$1(a.color))return R.value.map(()=>a.color);if(isObject$1(a.color)){const ra=Object.keys(a.color).map(oa=>Number(oa)).sort((oa,ca)=>ca-oa);let la=(sa=ra.pop())!=null?sa:R.value.length;return R.value.map((oa,ca)=>{var pa;return ca+1>la&&(la=(pa=ra.pop())!=null?pa:la),a.color[String(la)]})}}),ne=()=>{y.value&&(y.value=0,s("hoverChange",0))},se=(sa,ra)=>{const la=ra&&a.allowHalf?sa+.5:sa+1;la!==y.value&&(y.value=la,s("hoverChange",la))},ce=(sa,ra)=>{var la,oa,ca,pa;const ua=ra&&a.allowHalf?sa+.5:sa+1;g.value=!0,ua!==$.value?(f.value=ua,s("update:modelValue",ua),s("change",ua),(oa=(la=d.value)==null?void 0:la.onChange)==null||oa.call(la)):a.allowClear&&(f.value=0,s("update:modelValue",0),s("change",0),(pa=(ca=d.value)==null?void 0:ca.onChange)==null||pa.call(ca))},fe=sa=>{g.value&&sa+1>=$.value-1&&(g.value=!1)},ea=(sa,ra)=>sa>ra?createVNode$1(IconFaceMehFill,null,null):ra<=2?createVNode$1(IconFaceFrownFill,null,null):ra<=3?createVNode$1(IconFaceMehFill,null,null):createVNode$1(IconFaceSmileFill,null,null),ta=(sa,ra=!1)=>({role:"radio","aria-checked":sa+(ra?.5:1)<=$.value,"aria-setsize":R.value.length,"aria-posinset":sa+(ra?.5:1)}),na=sa=>a.grading?ea(sa,x.value):l.character?l.character({index:sa}):createVNode$1(IconStarFill,null,null),aa=sa=>{const ra=N.value?{}:{onMouseenter:()=>se(sa,!0),onClick:()=>ce(sa,!0)},la=N.value?{}:{onMouseenter:()=>se(sa,!1),onClick:()=>ce(sa,!1)},oa=g.value?{animationDelay:`${50*sa}ms`}:void 0,ca=Math.ceil(x.value)-1,pa=j.value&&a.allowHalf&&sa+.5===x.value?{color:j.value[ca]}:void 0,ua=j.value&&sa+1<=x.value?{color:j.value[ca]}:void 0,da=[`${c}-character`,{[`${c}-character-half`]:a.allowHalf&&sa+.5===x.value,[`${c}-character-full`]:sa+1<=x.value,[`${c}-character-scale`]:g.value&&sa+1<$.value}];return createVNode$1("div",mergeProps({class:da,style:oa},a.allowHalf?void 0:ta(sa),{onAnimationend:()=>fe(sa)}),[createVNode$1("div",mergeProps({class:`${c}-character-left`,style:pa},ra,a.allowHalf?ta(sa,!0):void 0),[na(sa)]),createVNode$1("div",mergeProps({class:`${c}-character-right`,style:ua},la,a.allowHalf?ta(sa):void 0),[na(sa)])])},ia=computed(()=>[c,{[`${c}-readonly`]:a.readonly,[`${c}-disabled`]:u.value}]);return()=>createVNode$1("div",{class:ia.value,onMouseleave:ne},[R.value.map((sa,ra)=>aa(ra))])}});const Rate=Object.assign(_Rate,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Rate.name,_Rate)}}),_sfc_main$Z=defineComponent({name:"IconInfo",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-info`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$w=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$n=createBaseVNode("path",{d:"M25 39h-2V18h2z"},null,-1),_hoisted_3$k=createBaseVNode("path",{fill:"currentColor",stroke:"none",d:"M25 39h-2V18h2z"},null,-1),_hoisted_4$8=createBaseVNode("path",{d:"M25 11h-2V9h2z"},null,-1),_hoisted_5$3=createBaseVNode("path",{fill:"currentColor",stroke:"none",d:"M25 11h-2V9h2z"},null,-1),_hoisted_6$1=[_hoisted_2$n,_hoisted_3$k,_hoisted_4$8,_hoisted_5$3];function _sfc_render$L(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_6$1,14,_hoisted_1$w)}var _IconInfo=_export_sfc(_sfc_main$Z,[["render",_sfc_render$L]]);const IconInfo=Object.assign(_IconInfo,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconInfo.name,_IconInfo)}});var ResultForbidden=defineComponent({name:"ResultForbidden",render(){return createVNode$1("svg",{viewBox:"0 0 213 213",height:"100%",width:"100%",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2}},[createVNode$1("g",{transform:"matrix(1,0,0,1,-871.485,-445.62)"},[createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(1,0,0,1,-75.2684,-87.3801)"},[createVNode$1("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:{fill:"rgb(235, 238, 246)"}},null)]),createVNode$1("g",{transform:"matrix(1,0,0,1,246.523,295.575)"},[createVNode$1("g",{transform:"matrix(0.316667,0,0,0.316667,277.545,71.0298)"},[createVNode$1("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),createVNode$1("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),createVNode$1("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[createVNode$1("g",{transform:"matrix(1,0,0,1,-6,-6)"},[createVNode$1("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),createVNode$1("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[createVNode$1("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(0.182997,0.105653,-0.494902,0.285732,814.161,66.3087)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),createVNode$1("g",{transform:"matrix(0.316667,0,0,0.316667,237.301,94.2647)"},[createVNode$1("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),createVNode$1("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),createVNode$1("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[createVNode$1("g",{transform:"matrix(1,0,0,1,-6,-6)"},[createVNode$1("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),createVNode$1("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[createVNode$1("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(0.474953,0,0,0.474953,538.938,8.95289)"},[createVNode$1("g",{transform:"matrix(0.180615,0.104278,-0.973879,0.562269,790.347,286.159)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),createVNode$1("g",{transform:"matrix(0.473356,0,0,0.473356,294.481,129.741)"},[createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(0.1761,-0.101671,1.73518e-16,1.22207,442.564,7.31508)"},[createVNode$1("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(0.0922781,0.0532768,2.03964e-16,2.20569,405.236,-248.842)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),createVNode$1("g",{transform:"matrix(0.147541,-0.0851831,1.52371e-16,1.23446,454.294,-3.8127)"},[createVNode$1("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(51, 51, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.0921286,0.0531905,-0.126106,0.0728076,474.688,603.724)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)])])]),createVNode$1("g",{transform:"matrix(0.473356,0,0,0.473356,192.621,188.549)"},[createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(0.1761,-0.101671,1.73518e-16,1.22207,442.564,7.31508)"},[createVNode$1("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(0.0922781,0.0532768,2.03964e-16,2.20569,405.236,-248.842)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),createVNode$1("g",{transform:"matrix(0.147541,-0.0851831,1.52371e-16,1.23446,454.294,-3.8127)"},[createVNode$1("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(51, 51, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.0921286,0.0531905,-0.126106,0.0728076,474.688,603.724)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)])])]),createVNode$1("g",{transform:"matrix(0.668111,0,0,0.668111,-123.979,-49.2109)"},[createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,974.758,729.412)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,42.5091,1294.14)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,-1.52814,0.882275,1593.11,461.746)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)]),createVNode$1("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,49.4442,1298.14)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(51, 51, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,753.056,857.412)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,898.874,529.479)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,930.12,511.44)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,961.365,493.4)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,992.61,475.361)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1023.86,457.321)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1056.25,438.617)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1085.74,421.589)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(0.668111,0,0,0.668111,-123.979,-91.97)"},[createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,974.758,729.412)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,42.5091,1294.14)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,-1.52814,0.882275,1593.11,461.746)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)]),createVNode$1("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,49.4442,1298.14)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(51, 51, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,753.056,857.412)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,898.874,529.479)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,930.12,511.44)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,961.365,493.4)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,992.61,475.361)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1023.86,457.321)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1056.25,438.617)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1085.74,421.589)"},[createVNode$1("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(0.701585,5.16096e-35,-5.16096e-35,0.701585,-546.219,-21.3487)"},[createVNode$1("g",{transform:"matrix(0.558202,-0.322278,0,0.882275,1033.27,615.815)"},[createVNode$1("path",{d:"M855.598,410.446C855.598,407.244 852.515,404.643 848.718,404.643L663.891,404.643C660.094,404.643 657.012,407.244 657.012,410.446L657.012,543.92C657.012,547.123 660.094,549.723 663.891,549.723L848.718,549.723C852.515,549.723 855.598,547.123 855.598,543.92L855.598,410.446Z",style:{fill:"white"}},null)]),createVNode$1("g",{transform:"matrix(0.558202,-0.322278,0,0.882275,1035.25,616.977)"},[createVNode$1("path",{d:"M855.598,410.446C855.598,407.244 852.515,404.643 848.718,404.643L663.891,404.643C660.094,404.643 657.012,407.244 657.012,410.446L657.012,543.92C657.012,547.123 660.094,549.723 663.891,549.723L848.718,549.723C852.515,549.723 855.598,547.123 855.598,543.92L855.598,410.446Z",style:{fill:"white"}},null)]),createVNode$1("g",{transform:"matrix(1,0,0,1,418.673,507.243)"},[createVNode$1("path",{d:"M1088.34,192.063C1089.79,191.209 1090.78,191.821 1090.78,191.821L1092.71,192.944C1092.71,192.944 1092.29,192.721 1091.7,192.763C1090.99,192.813 1090.34,193.215 1090.34,193.215C1090.34,193.215 1088.85,192.362 1088.34,192.063Z",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(1,0,0,1,235.984,-39.1315)"},[createVNode$1("path",{d:"M1164.02,805.247C1164.05,802.517 1165.64,799.379 1167.67,798.118L1169.67,799.272C1167.58,800.648 1166.09,803.702 1166.02,806.402L1164.02,805.247Z",style:{fill:"url(#_Linear1)"}},null)]),createVNode$1("g",{transform:"matrix(0.396683,0,0,0.396683,1000.22,516.921)"},[createVNode$1("path",{d:"M1011.2,933.14C1009.31,932.075 1008.05,929.696 1007.83,926.324L1012.87,929.235C1012.87,929.235 1012.96,930.191 1013.04,930.698C1013.16,931.427 1013.42,932.344 1013.62,932.845C1013.79,933.255 1014.59,935.155 1016.22,936.046C1015.83,935.781 1011.19,933.139 1011.19,933.139L1011.2,933.14Z",style:{fill:"rgb(238, 238, 238)"}},null)]),createVNode$1("g",{transform:"matrix(0.253614,-0.146424,4.87691e-17,0.338152,1209.98,830.02)"},[createVNode$1("circle",{cx:"975.681",cy:"316.681",r:"113.681",style:{fill:"rgb(245, 63, 63)"}},null),createVNode$1("g",{transform:"matrix(1.08844,0,0,0.61677,-99.9184,125.436)"},[createVNode$1("path",{d:"M1062,297.556C1062,296.697 1061.61,296 1061.12,296L915.882,296C915.395,296 915,296.697 915,297.556L915,333.356C915,334.215 915.395,334.912 915.882,334.912L1061.12,334.912C1061.61,334.912 1062,334.215 1062,333.356L1062,297.556Z",style:{fill:"white"}},null)])]),createVNode$1("g",{transform:"matrix(5.57947,-3.22131,0.306277,0.176829,-6260.71,4938.32)"},[createVNode$1("rect",{x:"1335.54",y:"694.688",width:"18.525",height:"6.511",style:{fill:"rgb(248, 248, 248)"}},null)]),createVNode$1("g",{transform:"matrix(0.10726,0.0619268,-1.83335e-14,18.1609,1256.76,-11932.8)"},[createVNode$1("rect",{x:"1335.54",y:"694.688",width:"18.525",height:"6.511",style:{fill:"rgb(238, 238, 238)"}},null)])])]),createVNode$1("g",{transform:"matrix(0.316667,0,0,0.316667,269.139,37.8829)"},[createVNode$1("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),createVNode$1("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),createVNode$1("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[createVNode$1("g",{transform:"matrix(1,0,0,1,-6,-6)"},[createVNode$1("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),createVNode$1("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[createVNode$1("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])])])])]),createVNode$1("defs",null,[createVNode$1("linearGradient",{id:"_Linear1",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(-2.64571,4.04098,-4.04098,-2.64571,1167.67,799.269)"},[createVNode$1("stop",{offset:"0",style:{stopColor:"rgb(248, 248, 248)",stopOpacity:1}},null),createVNode$1("stop",{offset:"1",style:{stopColor:"rgb(248, 248, 248)",stopOpacity:1}},null)])])])}}),ResultNotFound=defineComponent({name:"ResultNotFound",render(){return createVNode$1("svg",{width:"100%",height:"100%",viewBox:"0 0 213 213",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2}},[createVNode$1("g",{transform:"matrix(1,0,0,1,-1241.95,-445.62)"},[createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(1,0,0,1,295.2,-87.3801)"},[createVNode$1("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:{fill:"rgb(235, 238, 246)"}},null)]),createVNode$1("g",{transform:"matrix(0.38223,0,0,0.38223,1126.12,238.549)"},[createVNode$1("g",{transform:"matrix(0.566536,0.327089,-1.28774,0.74348,763.4,317.171)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),createVNode$1("g",{transform:"matrix(0.29595,0.170867,-0.91077,0.525833,873.797,588.624)"},[createVNode$1("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),createVNode$1("g",{transform:"matrix(1,0,0,1,275,-15)"},[createVNode$1("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),createVNode$1("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[createVNode$1("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(1,0,0,1,183.952,-67.5665)"},[createVNode$1("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),createVNode$1("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[createVNode$1("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(1,0,0,1,414,-95.2517)"},[createVNode$1("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),createVNode$1("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[createVNode$1("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",{transform:"matrix(1,0,0,1,322.952,-147.818)"},[createVNode$1("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),createVNode$1("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[createVNode$1("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(1.42334,-0.821763,1.11271,0.642426,-1439.64,459.621)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(1.40786,-0.812831,6.60237e-16,1.99081,-2052.17,-84.7286)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(1.26159,-0.728382,5.91642e-16,1.78397,-1774.67,11.2303)"},[createVNode$1("path",{d:"M1950.29,1194.38C1950.29,1193.37 1949.41,1192.54 1948.34,1192.54L1846.01,1192.54C1844.93,1192.54 1844.06,1193.37 1844.06,1194.38L1844.06,1282.7C1844.06,1283.72 1844.93,1284.54 1846.01,1284.54L1948.34,1284.54C1949.41,1284.54 1950.29,1283.72 1950.29,1282.7L1950.29,1194.38Z",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(1.2198,-0.704254,5.72043e-16,1.72488,-1697.6,37.2103)"},[createVNode$1("path",{d:"M1950.29,1194.38C1950.29,1193.37 1949.41,1192.54 1948.34,1192.54L1846.01,1192.54C1844.93,1192.54 1844.06,1193.37 1844.06,1194.38L1844.06,1282.7C1844.06,1283.72 1844.93,1284.54 1846.01,1284.54L1948.34,1284.54C1949.41,1284.54 1950.29,1283.72 1950.29,1282.7L1950.29,1194.38Z",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.707187,0.408295,9.06119e-17,1.54833,-733.949,683.612)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.64553,-0.950049,1.17482,0.678285,-1632.45,473.879)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(0.74666,0.431085,2.3583e-17,0.135259,-816.63,57.1397)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.64553,-0.950049,1.17482,0.678285,-1632.45,473.879)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,354.191)"},[createVNode$1("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),createVNode$1("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),createVNode$1("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,309.191)"},[createVNode$1("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),createVNode$1("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),createVNode$1("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,263.931)"},[createVNode$1("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),createVNode$1("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),createVNode$1("path",{d:"M555.753,832.474L555.753,921.408L630.693,878.141L630.693,789.207L555.753,832.474Z",style:{fillOpacity:.1}},null),createVNode$1("g",{transform:"matrix(0.750082,0,0,0.750082,236.431,272.852)"},[createVNode$1("g",{transform:"matrix(1.64553,-0.950049,1.14552,0.661368,-1606.78,467.933)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),createVNode$1("g",{transform:"matrix(1.54477,-0.891873,1.05847,0.611108,-1456.84,490.734)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(1.27607,-0.736739,0.751435,0.433841,-970.952,617.519)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.62765,-0.939723,1.42156e-16,0.5,-2476.81,1893.62)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(1.62765,-0.939723,1.42156e-16,0.5,-2476.81,1893.62)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.728038,0.420333,3.52595e-17,0.377589,-790.978,151.274)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2726.83,1873.38)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),createVNode$1("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),createVNode$1("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[createVNode$1("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),createVNode$1("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[createVNode$1("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),createVNode$1("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[createVNode$1("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])])]),createVNode$1("g",{transform:"matrix(1.62765,-0.939723,4.80984e-17,0.173913,-2468.81,2307.87)"},[createVNode$1("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)])]),createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(0.479077,0.276595,-0.564376,0.325843,598.357,-129.986)"},[createVNode$1("path",{d:"M1776.14,1326C1776.14,1321.19 1772.15,1317.28 1767.24,1317.28L1684.37,1317.28C1679.46,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.46,1404.46 1684.37,1404.46L1767.24,1404.46C1772.15,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z",style:{fill:"white"}},null)]),createVNode$1("g",{transform:"matrix(2.61622,0,0,2.61622,-2305.73,162.161)"},[createVNode$1("g",{transform:"matrix(1.09915,-0.634597,1.26919,0.73277,-299.167,-62.4615)"},[createVNode$1("ellipse",{cx:"412.719",cy:"770.575",rx:"6.303",ry:"5.459",style:{fill:"rgb(255, 125, 0)"}},null)]),createVNode$1("g",{transform:"matrix(0.238212,-0.137532,0.178659,0.103149,875.064,207.93)"},[createVNode$1("text",{x:"413.474px",y:"892.067px",style:{fontFamily:"NunitoSans-Bold, Nunito Sans",fontWeight:700,fontSize:41.569,fill:"white"}},[createTextVNode("?")])])])])])])])])}}),ResultServerError=defineComponent({name:"ResultServerError",render(){return createVNode$1("svg",{width:"100%",height:"100%",viewBox:"0 0 213 213",style:"fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2;"},[createVNode$1("g",{transform:"matrix(1,0,0,1,-483.054,-445.448)"},[createVNode$1("g",null,[createVNode$1("g",{transform:"matrix(1,0,0,1,-463.699,-87.5516)"},[createVNode$1("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:"fill: rgb(235, 238, 246);"},null)]),createVNode$1("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,260.021)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill-opacity: 0.1;"},null)]),createVNode$1("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,218.845)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,238.807)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,257.804)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,329.956)"},[createVNode$1("clipPath",{id:"_clip1"},[createVNode$1("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip1)"},[createVNode$1("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,269.266)"},[createVNode$1("use",{href:"#_Image2",x:"50.54",y:"112.301",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,265.448)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,268.45)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,271.452)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,124.262)"},[createVNode$1("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,420.796)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,419.062)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,417.329)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,415.595)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,413.862)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,196.542)"},[createVNode$1("clipPath",{id:"_clip3"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip3)"},[createVNode$1("g",{transform:"matrix(1.30028,1.12608,-2.25216,1.95042,68.2716,1030.07)"},[createVNode$1("use",{href:"#_Image4",x:"50.54",y:"56.312",width:"112.406px",height:"64.897px",transform:"matrix(0.99474,0,0,0.998422,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,216.764)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,235.762)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,307.652)"},[createVNode$1("clipPath",{id:"_clip5"},[createVNode$1("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip5)"},[createVNode$1("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,321.266)"},[createVNode$1("use",{href:"#_Image2",x:"50.54",y:"89.692",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,243.144)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,246.146)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,249.149)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,101.958)"},[createVNode$1("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,398.492)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,396.759)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,395.025)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,393.292)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,391.558)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,171.832)"},[createVNode$1("clipPath",{id:"_clip6"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip6)"},[createVNode$1("g",{transform:"matrix(1.30028,1.12608,-2.25216,1.95042,12.6215,1078.27)"},[createVNode$1("use",{href:"#_Image7",x:"50.54",y:"31.563",width:"112.406px",height:"64.897px",transform:"matrix(0.99474,0,0,0.998422,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,192.055)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,211.052)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,282.943)"},[createVNode$1("clipPath",{id:"_clip8"},[createVNode$1("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip8)"},[createVNode$1("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,378.876)"},[createVNode$1("use",{href:"#_Image2",x:"50.54",y:"64.644",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,218.434)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,221.437)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,224.439)"},[createVNode$1("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,77.2484)"},[createVNode$1("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,373.782)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,372.049)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,370.316)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,368.582)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,366.849)"},[createVNode$1("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),createVNode$1("g",{transform:"matrix(0.365442,-0.210988,0.421976,0.243628,28.7259,185.45)"},[createVNode$1("clipPath",{id:"_clip9"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip9)"},[createVNode$1("g",{transform:"matrix(1.36821,1.1849,-2.36981,2.05231,5.46929,1071.93)"},[createVNode$1("use",{href:"#_Image10",x:"53.151",y:"30.14",width:"106.825px",height:"61.676px",transform:"matrix(0.998367,0,0,0.994768,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.365442,-0.210988,0.421976,0.243628,28.7259,183.729)"},[createVNode$1("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:'fill: url("#_Linear11");'},null)]),createVNode$1("g",{transform:"matrix(0.407622,0,0,0.407622,47.38,278)"},[createVNode$1("clipPath",{id:"_clip12"},[createVNode$1("path",{d:"M1461.07,554.317C1461.07,556.747 1459.6,559.067 1456.6,560.8L1342.04,626.943C1335.41,630.767 1323.83,630.287 1316.18,625.871L1205.33,561.871C1201.14,559.456 1199,556.361 1199,553.426L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,554.317Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip12)"},[createVNode$1("g",{transform:"matrix(2.45325,-0,-0,2.45325,1068.82,410.793)"},[createVNode$1("use",{href:"#_Image13",x:"53.151",y:"58.978",width:"106.825px",height:"33.517px",transform:"matrix(0.998367,0,0,0.985808,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.371452,-0.214458,2.38096e-17,0.495269,-19.3677,248.256)"},[createVNode$1("clipPath",{id:"_clip14"},[createVNode$1("path",{d:"M1776.14,1326C1776.14,1321.19 1772.23,1317.28 1767.42,1317.28L1684.19,1317.28C1679.38,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.38,1404.46 1684.19,1404.46L1767.42,1404.46C1772.23,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z"},null)]),createVNode$1("g",{"clip-path":"url(#_clip14)"},[createVNode$1("g",{transform:"matrix(2.69214,1.16573,-1.29422e-16,2.0191,1352.59,983.841)"},[createVNode$1("use",{href:"#_Image15",x:"121.882",y:"76.034",width:"37.393px",height:"61.803px",transform:"matrix(0.984021,0,0,0.996825,0,0)"},null)])])]),createVNode$1("g",{transform:"matrix(0.371452,-0.214458,2.38096e-17,0.495269,-15.0786,249.972)"},[createVNode$1("path",{d:"M1776.14,1326C1776.14,1321.19 1772.23,1317.28 1767.42,1317.28L1684.19,1317.28C1679.38,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.38,1404.46 1684.19,1404.46L1767.42,1404.46C1772.23,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z",style:"fill: white; stop-opacity: 0.9;"},null)]),createVNode$1("g",{transform:"matrix(0.220199,-0.127132,1.41145e-17,0.293599,339.708,327.53)"},[createVNode$1("path",{d:"M1306.5,1286.73C1307.09,1285.72 1308.6,1285.48 1310.36,1286.12C1312.13,1286.76 1313.84,1288.16 1314.73,1289.7C1326.44,1309.98 1355.4,1360.15 1363.73,1374.57C1364.33,1375.61 1364.49,1376.61 1364.18,1377.35C1363.87,1378.09 1363.11,1378.5 1362.07,1378.5C1346.41,1378.5 1288.17,1378.5 1264.07,1378.5C1262.42,1378.5 1260.37,1377.48 1258.9,1375.94C1257.44,1374.41 1256.88,1372.67 1257.5,1371.6C1268.1,1353.25 1296.8,1303.53 1306.5,1286.73Z"},null)]),createVNode$1("g",{transform:"matrix(0.254264,-0.1468,1.22235e-17,0.254264,329.57,364.144)"},[createVNode$1("text",{x:"1170.88px",y:"1451.42px",style:'font-family: NunitoSans-Bold, "Nunito Sans"; font-weight: 700; font-size: 41.569px; fill: white; fill-opacity: 0.9;'},[createTextVNode("!")])])])]),createVNode$1("defs",null,[createVNode$1("image",{id:"_Image2",width:"113px",height:"47px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAvCAYAAADU+iVXAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABVUlEQVR4nO2aQRKCMAxFxUN4O+9/DNw4CoiTliZN8vPfQlm00ykvP3aQ5fFc11sjy/L+/nx8r3ffm7Fn845jz+aJa23XOJvfs9Zh7NBawv3YrSGtdbj+x10egkFzpRrNt+SSxMgbqkiZJCJDiQDoSmSfdYFJ3JD18GMmcXhDTHUzNZIIXhA1JIJDib0MptqiKbhKzHqQiAaT6IlSFVIiAJQIACUGpLfLhpfIw49Ml8T2v4/JTPySyIJQI3w7JTIYEp2fong3FXWJ3huqCEYSNUlYhZRoyaSCoEQAKHESlqF0kZj9NBgNJhEASgSAEgNx9WfCTmLxpygzYRIBmCORsTIlXxJZED/kk0h+KC1x9E2FKG86qEkMsh8/HG9A6SSGYqAIKDEinUIpUSDDYXiqxAw3JCNMIgDXJTIWYdBJIvukK2ynARit4XASUZ6izCScRFWKCH0BfLM84oTw1Z8AAAAASUVORK5CYII="},null),createVNode$1("image",{id:"_Image4",width:"113px",height:"65px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABBCAYAAADmBEt9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAASeElEQVR4nN2d6ZbcNpKFL5cs9UN1W5bntWxr6XmsWTzLQ7mSJDA/gh/iApWyLalUy+AcnypVJkEAsd24EaQn/T8Yb9+XKknrOuk4pOM4tCyLpkkqpWpZJu170TzPKqVoWWZJUq3Sbx+m6VkX/wjjVW/gH7/sdZ5nTacc5lkqJT6rtWqaJtVaVUrRNE26XGbd3+9alkW1Vi3LrFKq/uvj/KrP4dUu/t3HWkupmuepWVspIcjrddc8z1qWWcdRTusLwc3z3Cz1OA5dLouOo+o4Dv3vv15e5Xm8ukX//eetTtOkdV20bWFVkrQsk+ZZOo74Xq3SNMVPqXextYal1lq1rrNqlfb90LrGXP/5/nW52Fez2B8/1FpPiSxLLLsUaV2lfZdKiZiHkHCtuFWPj/73cvpfLDQseNJxvB43++IX+cOvR5WkZQkBbdsh4uCySNtWWkxEuLVKx1HOuLecFjdp3/NnWiYKUbSuAXiOIwR8HIf+55/riz+jF73Anz7VWkq4RSkEI+m0Fun+ftflsra/r+usfY/fATVY3DzP2ratCe3Nm7UhWawv3KzO69PtllJetDBf5MJ++hRHWWu4QCkOm1h4HH2agJuVpHme2ufHUXS5zLpeQ1B8Ns9zu2ZdU3gAJdwxFh3zxjUv0cW+qAX9+KFWhMV/Urg6kCUWcxzpRvlsmno3ehwBVhDKcWRMZQ6uQ4D7HsgI1MrcDIT/koT5IhaC28T17fuudV0bWAmhTJ0QpN56ti1cq4MXSR1wiWv6+ChJ12ukGpJaunG5rJpnad9rm+NyWVRKgqiXQhQ8+yI87pEicDQIRApAg3US60gvPPYhbBceqYTH17DEo8VLSVqWTFGmKdKOZVm0LDKlqIaEQ+GeO798tpu/fV/qPE+nCwwLiwNVi1FhCaUJIFxbury7uxAiwrled0k6Dz6F78J2FgcBk2qs66J9T/QrpRt2MoH7RX6ZXuO/Py3Pcp5PftMffj0qdBeHF4AlXJwU4ETSGavUMSsAD1AlqYDHvut1P61y6QRPMg/g2bbSudnJvCNCgmsFQKEE8Z2p+1x6Hi72SW/47mPk6/u+txwNa4vfpw4hYi3Lok7AHBiHCfjArTr6ZE4Sfr+W+aVAqQgVpUCJJBQq1kas7FFxAqTLZdK//fx0wnySG/3LP2sl1uEKU4uX9r1Siu7uliYwhHwctR0y1zmz4gwO80gp3OM4dHe3NqIAy3R36kjX4yvVj31P4OR0HYJluPVOk/Qfv35/YX7XG/z4IVSVQ8d11lp1ucydsNxlLsukbQth4zLnWQ8sA85zWZYm7LCiiFEp7J6O477rOul6TU5VUpdHjgJmL4QDKiGxzmSP3OqJ8d+Tj/0uE//w61EBI57jSWldUk+hxWc9OR1Wk+4WYWNNaD2jlNKsxdMOEnZJ7dC3bTcFmZpQSimNzXHl81ok7tndvAOlW8KXvl9u+eiTAlyoIozuB4DhrAt/w6qkdL3kb1Jymli0xzSH/Vi153QcLqmJX0t6c70erTqyrusfKhPEggOjmGvqANAIxNZ10r//8rhW+WiTkTI4iCDuOGAZ+U8osXWddH+/twMn5iEIeFEswasRkroir49l4cDVhM/Bcshc44LwCkcKZD6tfW75JHN6jRJlQnld+NzzOB4vJfnmSd59rHWMTwEkFh3HeDBxDVaIwB1JjlxofhZCj0pG7bQ9508rIH+bJq6JU/eaYsybaczd3dJVRXCZpajVLhEMua2j5VueIeZxAqNXnlrrNwvzqy/+6VP1s+6Sdnpd/LAYxJ1lWbTv+2mpc8ekeOz5XJINkPEknbSABN/dIfFrniddr9uZm65tPudsGS4gLyqzX9ZTSgIq9iipoWfQKyGm1qyDxn2+DcV+1YU/faqVxbEZL8Iy3AURV0Z2Bgjv8aPW2iyJgbDcejk4YiCQnwEH6gpGuuHxknV5GAApe+rhjBIM0Zs362dJAwTM2uNzNWAnPQRtX1Py+qILEJ4kXS6Tfv89ER6D2ITLjEPpSWjiCL8DXvhezrO0eIhuJILNQ6IqUUqS2lJAfikQKWi01tq5enJBXKQn/SiK57LO3XrvDvdxZgfSAC+xbXvjat3K2a+fyZe42L/0RfI94sO+H11S7ptzwDFCbQcKHuTTitVZhR+g/x13u+/HGaPWJtBucwZOGNQXmddjl9cYr9fjjIlzQ6EolO9vjIHM4Yo65o6+L1CuK76j2b+SlvzhF959rBWEySY9r/IWBxeapJsxgs9gP9y6cHlj99q+9zwow8tRzIFr4l4jqHJkPOaAzOFzOnjy3z3ZZw73HJwRQM/PZZzLz5bwdH+/6e7ucirDnxeiP/shqPN63U1rMo5J6nI/YgiaD9IbUahX19mwI1dHp+6SRvDgBzIWbaHvIu7VB4dIHCwly09es8TF46JZH6AJl4i18H2KyMuS83tbpSvXuk4nKs70ybGBnwWe4XPx8sEf//7zVtd17YAKNJgjPrSNSjqCy5bBjBmx+FyUC5IxghyPM1w75nMIxF0v6yVmjqzQmJT7YaKYYdUJtCQ1ZaKjwNMPZ4ig+dwlxv6mdi2CJm0ZvYafnYcg1jNWSto/3r4v9ZZms/HRlTjKQ0ggMQcCXhPctiwZObr0+7iC8D0npEHCgBuGu0f+/ebN2oTh1ZFQjhAUwvBiMMriB+kpTwi1z1P9++wF0OSAB4HggpkDz+WKFF6uV2z3fljm5IgTM0ZjRqQ2ukKPDSzO3aa7orHhyGONI8FsR8wD8Prfus5dh/donX4PDjYtZ+q8ixecHUl6l/jIf8LYcOC33Dnu2lOQEEAqsKPymPchNnDBj/2yDnwmmnK9h2WEzLhWhifcnvDimm5B5xH0eFwZEah/lw2wMdryuX6sMKTVBnrl87E7oFZ1uagDHPZIDuzC2/eoF+57368z5pPUTDGMUaHhjdnPSNXhacbvO4BrBoNWQEthUQ7NXSNCcHHQYSnxtzjgZFxG7eU+6S5n0856WmJfaOXacKHTef/ZWJ4ERB4BYv0xN4IJ96fu4CC5Y/299W7b3pRx33cdx9GUwKszpFnpVQL8ZQpTT4XILvTLJWuRtVZdLuvpcY4GchAg3wnsQdf7fLJiZ7nucoleTvpViEfRbLurlKJ9P0R9zjcQ2l5PTcxDpIgaLjc/QFvRqlLKqWW90gSY6asBbNoJ5/QYcd3lMneQnYNIIAQhjkLoTAVK21+eQWrF5bI2yO9rZB8BpNxT8GwITExt3kuKpmcPJft+nCEj8QHnOU2TLpelU7JQdhR60gzHSWCPw4kvRNse6Cpb58NNhN/3+MXNp4lmpfk8uIxzjiyzWiCt63JuPONcBPjpVCSaoJhrOQ+otPgUrj3dZ+ynnGWp0lkTQMsbo6KaklYFmYBFuXsOoKS2/rT+uSl74Ae8SQhynjPnDYusZwpVTmFmTJXCC4T7zHXFd0u754zv9aQ6hJDawE1i0nrGtNHNzp3Gx3dDMwJKT6ebqJ2WpSstLb5SPkLYcbhrs66Ma7W7p1sdG5+mqeV2d3f5eFsp0UcKp5nxWuf9lnbYXjCutbbQwz7dK3C4t/7tqBdwlLhj7lgkUheUi/RlXRMLtNDkQuDQ2EwejE6Txh0Gyrpe9xYj0MrrdWtaFDeSKcbcDrBPvp2P7BXBlQPrgtlY16nrYNu2ox22K1Ek7rV5m5hD5uZAxulmM16lN7hcLlpXd9mJavEarBe37fGbGOasUn/mx2mpkPJHM6DoWCgNaHEPSZoxSQIrpr8sKcTQjocVgiAFKPMEyPnb3y7NbXiciU7qkTlJITT/PmM5STaQNzn4Oo6qbStdyoOg2XgSErWzOD+MzHOnM/bXbn2wOl4uC1DUK7S7PI/5/MTL8W/iIvdGwblH/7SXt3hSgMjcc/7twzQFsKhnHOu7zxws3mIWvM/kONRATghy7jbM4XBAaDNaz+/ExQQ2vav0DjMs7+5ubRZfStWbN+tpFRmTwhVu56GGJUfYANpHQTs9TD1jYW3MET2trCNqolCEEXe3bX8Q23wsy3KS9tNZ2chqTICsuB8MkbNEefY6UfCUjA09oeR+TjPBRDhMJj/yZHesQLjvHvnDyHcOcz+525HKg3DgQBB23BNSvafFXPHCivdWe/T0BCKBkEDO5wfrMZ690k7iBLfv2+/Nnih3ZZqVzV6eQ2ca1VOfyAVlpYPuAXf6w69HRTDOSUJ1OUODK4VJyUCftUQqERRnnTz3p47CctON4Ipo9/BnIjzPQ3mc2+WQ6d9hH5DiHJz37XDIsf5UNhTTFQY35uuE4QqFedgoxVhX6f4+FS7z2KPjSsdaLGSF9Afc6Tho+B0tKm6Q7A6jTzN6rXRqzVGVL9gZDRTBm4wkDe0cbm09COO7zsZwyM6lIhj3QOMenT1yxiisI1MtUD50JHO612B/sz04RGbg/UCu3G6lnytJfVaIDIhxKUtPvmkHFH6QuLVbLfmOEhGCF0bd/2MJY/u+Wyqbj8/yIFAsn+9WYXp0b27NiQbVXR/INSx726L+xx5w3azLH/Rx78Y8biBO03nnwB/VFP9UiFI+N4/b+1wNzA8AV0Tux8K8y8sJdCeV4T1HlwPmwn07F+oCxI17DB3LQAyvdXa51/A01Gjld3fe/9P3lUaumUqO1/E+G+ZBuM6fEo+lv9Zw/JeEyHj7vtSE6KW5tlhYDwhwB+5SvGDsKYs3XAVK7J+7cMDi7i0P0d9Tk4/Lcf3Y+uCIGqGS81FZGEEE8SnnDJxwf7+1RN2TeI+3faGgXzfM0RiyvqRb/IuEyPAne/0gvGbn8XAM0qNFjMjSEaWDFag7Ns3fYo5wYR5fODzosh6mZ58se0iXP3VKABd8qyls7FCgQoM38aIwrvXubhXPjYT1hiAvl+WrWhe/SoiMdx9r3ba9FYcdsPATq0MLSV04SEeCoE93yxyAIzxHjMsy6XpNAQaAWdr3cYNYqb/ACEXyZzWSe+1flcKAfPBWjFt9SCPwGoGUdyIg/K99Q8c3CVFK4DPmiuNz8xRzqbGND7k4MMFyvJHJEWBel+4JZcLaoarI/WLusWUkrdJDgIMdVybAjyNp0iLQqgvM+2K5npqkM1ff+qDNNwuRwZNQkiO51OQR+IyFUM+r+mfk+2Ymb5kYXVm3MQMitxDo+HQVa/Jiredmjh79+35fqvUoknce4GkgSEopj/as/6MJkfH2faluhYAF75qT+ke66TDzxByXOLpD4qbnpWPq4vkWvUDjsxOOHhGw9w8FNTbdtGLefeO4AKtjnW6hxHvW+tiPhD+6EBkgWafi0NxMqLMxV1JzO/nSvRDMSGUx3NW5sBwZ8293Y2Mvq6PbsbKQCHlurNDIEI05rOefTliU8n3eTPXdhCipPXQDqPEOs/FgsB7i3mGMgLfCe46aaDIZfY9rntLwaJv0UHnGFAIheC+QP3rnDE78VKsNEoOdTqz1+76Q4bsKkfHjh3z8jYP2eIF78u4zb8N482bV/X0++CllY7ET0t7z6k1bWA6oOL4TPz2mpkt/yBG7O7/VsXeLbXqqF/w9iRAZvCk4qyL9YUk9HUZMcsAwHhYgyHNCrMU5Tql3dQjM06Jb77FhjZ97xM4JArzIND3tO1OfVIgM3tntVsWIikc0JXkJa3y2A+33vM+tydkbKd359Rrm+rlccryPs0kjIxPr7b2HpCd/KdGzCFGKlCRLTA9fTuSVhs/1nYIo/ZAdaY6v9fL6IDVLYh41O3JcrIoOB2I3aQgx1K99ited3BrPJkSGv0k/QU1SXaBIJwPGOOYpRyLTqfs+sdObgD1l8WqL1yoldUwQXgHhS8//xsVnFyLjxw+13mJn/O1Okk5O9eGrouuNup2/+MgRqZeaHAzxXQTtL2tAOUh7njru/dG40QHyPOO3D9ME6EGAPUUWLvH337cmJBJorwyEi0xrTlaIZuVDNCtfr4fot6EXKB9Xyw6+7FxLxXopApRekCX6ePexVtzc+MZhSc1KnEgAzUpZb/SHVp3IdvLZLXPsOhgrM4/Bc36P8eIW5IP/9wWW5+S354hSz6z4+25IJ2BzmCuuiZ+AFn9x4EiKv5QX1N4aL3ZhPqDwvN/H63vENqe6kgbrCXAHObcq+k504w1eovX5eNGL8/GPX4KJBpXi4oh/lLrGd7tRdIUsx7L89SjEv/EFuS9deIxXsUgf8LF9p3a+o3TsO3UOk1eQSLQY5iulqXpIz58yfOl4VYv14awPeZ0XpEnE+Y7Hwuw4ry33k16f8BivctE+/H8/5IBkfLmfv2Wf3NIF/ZKBy5+NV7twH2OVRPJH1fp3vsG0IMTnevn6Y47/AxX1K5XSf237AAAAAElFTkSuQmCC"},null),createVNode$1("image",{id:"_Image7",width:"113px",height:"65px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABBCAYAAADmBEt9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAMrklEQVR4nOVdW2LbNhAcUD5Xkl4scXqxpr0XiX7AQwwGu7Rj2RLV7o8lknjtc3YBygX/Afr2XOu2bQCAZVkAALVWlFJQClAr9mvLUrBt7R4A/Hp++fDA9NAL+PpjqwBQSkF9kVQkOBIFx2vLUlDr4wvyYSf/7blJghanglFLc9q2DZfLgnXddqvl9X/+vDwkPx5u0l9/bFWtTf+q8Hidwt22DaWUXYCtj3H5bPNolvkwk2Xc05hHcjep1yk8Fy4tksSmfH5ZCv768RjCPP0k3W3ysxKFtSwLaq0vAGYZXC2vtefHmKn9Lkv7TKt+BKs89QT/+FnrtnVECYwghuRukfcpOL1N4fgzrZ/umgHsbvfsVnnKiX35vlYFHUpMJQAMwMQtqpSCdV3x9HTBujbXSUUAZmVQa876A84ZL081oS/f1+qAQwGLusx+vz/rSNUtbk5FZvccpSuOdmut+PvnchrenWIidJvAKJRIaPpZY6B+Z/6nAlBrisjjp4KezKWfRZB3n8QfP2tlKuBWAHS0SMZqOFSAwu+R1QA9sVdhupA5riNapUjY946Xdxv823OtHnfIFGp+lv+pZSiaZH/e1gVIlmseCXRBk1SBFO26i6fA7xUvbz4oS2UABoaua699ZjFK25CJ/NzajukBgMmNerzUNuyD1Rw2U6XR/ihAzhu4D/C56YDM+QAMDMqScrUiYMzjiDjVmjT2aTLvlhtZLeOvI9RufWWyRCUt9906Xt5kIFpf5uaUKarlR0jUy2p+X2Nh62+2bi3faaxz1JoBInf1nr/WWm9Sj/3UAb7+2KrHo6hC4gJ0kAOMwMSf0RwwSgu8isNrDpSU1KIVBY9zX+Rz9xAaP3n/My3zUzrWOqdbhLpGPqMuFMhjkGu8pxZRKuE5H0ljYFaC0z60b8ZNutllAbatC1PdcxurPftZgvzwTnWDFuhJdSlzHFOozudGsHBsxeMYc5xiHxm6jdyx11mVojHVkt2zaJ/6+aOF+WGdffm+7hu0zrB9sCC2ULiRNUUF6fa5l9H0GjCX4nRsF9BRPsj2kVC8fyofx88KC5/lYq/uhPt7zni6FFoetZaCjQU2okPgWBBqtXrfXbczmP2qmz7a5oqAVwR6Mkv1Zz3eXpuWvLux7jBwog7bIyKTNaboEjQ+7ZMUl+RQnvdVYTKE6S48AiD6LOepwMmVTfs6Qsw+P1/XNVb5roaa7wFjzIqAgloHidaoRyUiVOruz9MOIE4ZpoVapcfben9ODpAyC9M+dc1UWmCuDGnb9wjztxqo65wXNqcNUVDXeBmdc4kWqsKLQBL78zIcx6U71aMZfa6xW86uOeKOarU6R3fZ6n2y3Bj4vcrPmx789lyrx7QsH9OFXC4F6xqnGBHo0aqJCihzpa+hV33OEWpk/ZGFkJWeh0YVI953ZSU+UIGyzeVSQDDvHgF4m2UePsAiNRmoNUXX9NcOIDkTyJhs0R782/PxZzLAtZ3XNYXxeKhMzRivfbW1XlKX/1oakn3XsVyxXtslSW+q61QNjayv1oqnp+VlMnGVxRnnwEKFQAaocFQx9BkHPWSIV1OyfUUfb2KQeRnPL13wJHWrkedyZY3auSfKrHK6mIEW7YyTd2txbVbw0vuL9/1GxvXPtG510W3xs6X4wtXyiJo9Trml6jo1vqqCaHvOVcd1AWdgz/FFBu6cTx4v9y9R3BsZO2uPCkM1Xl1vhvwi16j967PKKP0cxTMFFC4k9umxl8r2lvlmTPa4TXIBet+RG414wvbqrVhcL9xZ10Hcuo6OO0QD8/MoiNnqdIKZ4pB8AY4ql4VKNQ0zzU3XGrlgjdk6F80ds3VxHd6vto3G8fyTc4x2ftimlLYRXfx9Bg/+RxoRAYMIYUX3IxfdJz6fOHPGt+8Yis9jSjDHnAzRcj56cDg686NziEALKQNdLhQKg89oKVHvR25+2BPVCXECOvkuVGWyl7fmZF7jUCljfNB2nem8P277aIzhuG0BdJ0ag0bm6PEKlQX7dNR6uSwTCGLb7gEU0I0xMFJQzoHt13Xb16BEdE8Z1NpPOyiPW1/kbVOUJy6+MaUMGuaW1jvE3hlJNYptIhfZJ6CId0aL/XhEmdqy7yjuRrlnmz+ZU3amKVCJ5sO+lZlRESFCvbyuSuHgiXzkGN3tLnt7kuIN9zBPFIpqfktkL4NAI4TlVRXVDk6ScYBMIXEBbMt9RUd8ruVdaGXoT4Wsa1ENZ36nCkjk7IwZ4/Wcv+l1pVHZ66R4kZtuAtKxxudU4I7qSylYdHK8p9pNBvRFjh3rgtpkutvRwTtYKnJPraYrQ3OF82I5R3V1zlB3b02Rln1MjtUtYi4ucA0zSi7Wd//chD4K0EOClyL7sx2YqWA7Nhnz4a7kbdyFDSh9jxMx7MYuMHdZFAQnNrYru4A4MQBD+SqD8XroieMrc3Ujms9qfFXLJwP6urcpduv8KVi9766xucMYuLkSjC61DoqrMX/Mr0fF7Ir24k5ZBxy1I/bxbn1uGRHkBub9ui60Lnx+VjfJ/hXWKyR3N6fITZmpcZ9/+wszfc9ThcM41ePQnMwreFJBUYk0DXIBdtc5sGxYp7r+plTtu26PLb+eS9Fis1pes6hZc2gFZEhHq8s+GLWTWtMtaazAaL9kJEmhvgZ7R6M9PleJf8uLhVe48ilq1O+cqwqBHqqHmrIrjzJdleNy6crl6+acPZy4B+S6xnl2DzEAOH7gyywKWrzyoaiwI7h8OyY6/qBWM2rtnJvRerLjGGOs7Qm0H0T2Z9RiIytRiqzHrU7bRWiXbfnXT+dpH17A8KOd6g32io1PmoVvAFjX1VxbXAgYAUpvq2hQ6WhfLXc5M9DxcSOXFjGabfW6CjUqcGTz8XU3IY3u1wERkKc4vn72rWN6IXxWvRfSQngWrFWjfTG+aPZ2lFtFWsrJ6zjqLbQUxTFG1DimGmq97hK1LRALVj2HMz1atyuok3o8XU+0qZ5tFKdCJOm7EzqZyGqUGdGiIgaxjbpMzS3VYltfnEd3tRq7FOFqnOHzylivZWZzzcKB3su8hc5TQ4saQOQu3WCOdvpfFSLQD0VlKCsThPrvvtjxJRqPmd6nMydihraL4mAkkGynnVbrrjD6q3OLGD8x+6AvnyObv+W1uTcJkcSd/sjslZFR3Iqq+srQ6Liiotr2fY4vc/yMT75pm+hsaCk9pXDhZ3E5U+bIUx3FPi+8v2U3X+m3hEji9pW6uKOJRxpHxmg88A1gXfDR+ZouiDnuaLw8iu0TY4LrPjb78L5UOTxsRHxQPr3nDOq7hEjyHwaKDjpFsTJzJZGL3Cdaeo7Fw1fRM1FKQWUBxkIC73Hu0Y8zeExrfcRbVUcuNVN4Heu9h4ivEiLQUawDhkAOALRgsEzxTZ9xrScz94kbkFGA47sb6g5Lab+q0Sw9Pi7ZxxjzP68kqTVyHvxOPmTHULgPClz/YurVQiTpu/fDAAkQcMa6Fkcbq15XVQFGxwd53wGIx0udBxAXFzxdorJkz+kcVMBt7e3vR73r/2FCJPm7GRkgIJGpwJhAq9D8tJ3qicdHLbpHqNaF6CAt3hQe88kIWPn61KXrXwAf/uLphwuR5O/mAzEIUe1u17XwO8Y1t1rdQPb+dQwlzw0jhJmVHCNAlYGkTMCf8U7/pwkRGH+XDRhztAhgROhTBaUC8SqNWjzHygBTlgY4ZejV+1aX6aiT1x7uTWGn6PW3iMmkjBEeWzLk6y7TyWObu9YobrZ2CEt3fN7jfa23+TWNmwiRpL9dE0HwaOdbGeIC6e44P2LpVSG3IHePfiSQlBUAVNDX5nvvpZsKkURhZpYF5AXpKN3gcx6TFDkeKU0Elvg3eukGiBWOz9/6t2zuIkRgfFknQoJRhUaL4wo6nDKAEVWAvBzom9aRq492VIDrXhS9hu4mRJL+LKaDE1IE+9vz84azu9hIgBHAigCOWqgKj6+j8dr/9rfdnHzLi+Qul9eAectHD3rpfbf43maOi442gX5kg5vcFOZZfmUx/mXYO5AyRC3MXWP0mbLUE3BKUWrCds1ix+OPHLe3WXC5XNL53ptOMxElLaz7ybUsufadBY9/fu4mugZgf7vZx6SQz/hvF043ISX/Mdsoz9QYmCX8fMYL0hEqzXLWM1me02knpuRbXsC8tdM+x7vmWmrrQh/P7mgMVGU4A3B5jU49OaXX/i8Gy3N+iizKEbPKkVvsma1P6SEmqeRVH2U8CwGa/wHjXqG++KPWrHniGePeET3UZJX05VhgLouR/H526uxWdc7PoIectBJ/a8B3872yoxvHwHxu51EFCPwHhAjMv/gBzNUYIP5duEeJe0f0L+D749HrhKeLAAAAAElFTkSuQmCC"},null),createVNode$1("image",{id:"_Image10",width:"107px",height:"62px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAA+CAYAAAAs/OVIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAgAElEQVR4nN2dWa8saXaWn5jnzMjMPZ5T1V3tsrGR+TNIvjAgC+y2uw22bIONzB/gBgkEAowZJbiBCyR+CzdIIHDX0Gfvs4fMjHmO+LhYEbGrrabdQw2nCKl0ztlDROQ3rPWu933XVxpf0+vn/0CpplEAeJ7G83MBQByHmCaczzVx7GEYMI7QtjAMA/f/1tK+yvf+Wa6v5Yt/4+8olWU5YRgCYJoawyATZxgargtVBZoGZVlhWRamaeJ5Gl0HRVFx/I/B1+6zf61e+Ju/o1TXDTw/P3N7e4NhQN8rbFujaUY0TSMMdU6nhjh2GUfoezBN+a/rIM9LLi8DHh8LNpuQj/+l9rUZg6/Fi17+eq00TaNpGjabDZ6noesyEY4jk2BZUBQKTdPQNIgiyHMYx4lpmnh+fiaKIq6vAz799MxmsyEMDboOlOJrMWnv9Au++s6gLMvgeDxzc7Pj+Tnn4iICIElqLMvCMAxcV2MYoOtGdF0HoOs6NhuH47HAMAw8z0PXIQyhruHx8cwHH+zo+2Wi4aN/8W5P2Dv7cq+/OyrL0jFNAQhl2RIEDtMEwzDRNA2GYWCaJrZtcDwm7PcxVdXQdR37/Ya2HTFNg7bt6LqOi4uQpoEggGGQnFYUA45jzvcdiWOD//GP3s1Je+de6uf/QKkkqXFdlzDUyLKR/d7g+bmfJ0Yjy+T7fd8DEAQ2AIYhIbGqGkzTpCxLttstcSwTrhSk6YjrGuS5THZZllxcxOg6uK6EzjiWifzv//DdmrR35mVuf6tXlmUyTYqqqthuAwxDBm0YBCBoGjw9CURXSrHbRUyT/P4wTLiujq5DWY4YhsHbt2/58MMbHh4KXr8OOZ8nlFJM04TnWVRVh67r6LqO7+u8fZsQxzGGAUVREwTeO5XL3okX+cU/VCpNe7quw3VdbNtgmmQnBAGkqYSq5+czV1e7dVeM40gQuOuEdV2P61r0vXzBsnSaRnZkVVVomkbXdWiaxmazwTDk44+jQinFOI64rkXXCbLUdZ0ggKendwPqf6Uv8Oo7gxrHkf3eJk0FHBiGhmVJ2Hp6EmBR1xPavMCTJMGyLDRNIwgC6rpmHEeUUmy3EXXdst87VBV4HhTFhOPo1PVAFJn0Pei63B9kxyoFeS45sW1Hmqbh/fcD2lZ28+Njxe2tT5Iovv+n+lc2Zl/Jg3e/lisAwzC4ufFmiK0wTY2qahnHEd/3sSxBba7rMk0Tr14FVJUMcF0LPO86uWffy78fH1s8z1mfVVWyC+PYommgrjtc10bXwbbh+bnC932qqsLzPDRNI0kSwjDEtk0sS+6tafJf3yt8X+N//ZMvPzx+qQ/8xt9RCgR1WZZBVTW4rouuQ123dF3H9XXE+dxydeXQdTIxaTphWfoKApJEQMfpNLLdSsh8fq4YxxHLstjvXepaQmieK6JIo65hGGRBLGiwaWQyHcdhGAa2W4tpetl1SVLiui5ZlrHb7VBKYRgamw0cjyN3/8b8UsdP/7IedPG3KrXdwjQp2ralLGvC0GW3g+0WqqqawxlomsbxOFCWE30vNVPT9HSdoq5hszE4HgeCwJjBwIRpmrx+HXFx4ZIkHY4jfGDXdYyj1FKGIbTU+TzO7MbIxYVLHGsMw0Cej+i6TFLfw/vvB2y3Bo7jEEl5R5YVvH3bSH77lUe1/Rup+rLG8AtfGX/p7yk1jpAkFWHoM00CsR1HcsfjY0UQ+KRpNoceHcOQHVUUijjWqCqYJil6o8jANOGTTxLeey+maaDrJrquw/Nc2rbDcWyKouT6OkDTIMvkPkmi2Gw0jsduDXv7vUNZQlEUbLchj49HXr8+rCVA27YEQYBpmozjOIdUeHrqmaYJy7IA2G71L7w++8Ju/kt/pFTfQ12P9H2PruvEsY1SMlF3dxWvXvlkGWw28uGVUvi+jWHA8SiDl+cVjiM5KAyNleuzrIVOGpkmgeS2bWOazPBdBvPyUn738VFyl6ZpuK5J3yssS8P3hfRdCuhpUniexjRBUXQz+2GsTMeSv2ybmd3vsW2ZsGGQ+PlFhcfPPQxef7tVv/zHStU1pGlNFBlEkQtInkjTjrKE/d7n/r7G8+D+vp4LXpthgKoaiaKQYVDouo6maWy3BgB13VPXik8+OdO2LUmSsNtZTJNwgAtpOwwDYejQNHA6DTPMt+j7nr5XpGmK5wlQUUrAjiwkYebbVhFFNk3ToJSE7+MxZxwnum7g/v5MVUEUWXRdTxDAdmuQ5znv/231hYTGz3WyXn93VI5j07ZwOiV4nkdZKrKsZr+3CUPwfZtxhDzvKYqC47HB9z0MQxJ/FMlAx7Hcs65r+r7n8bECIAyteSJCuk6K2rKUwfZ9naIYaBrwfY++l/DbdR1RFOA4cH3tsdlInfX01OD7EpYNQ547DLKDhmGgaRS+73M+SyE+DAOapnE4mDNDUtP3cHtr0XWQJAPvvy9F9eavJ+qD3/18J+1z2a7X324VgOMI7XM6nQHQdZ3NZoNlCYL63vdSXr3aUlUSMmzboGl6qqpis9lgmhpJkq/E636vkabQdVIUN00/k7fQNBJa27YlDP0VtpumCcjAWpZFGOqkac9mYzEMzEVuz25nUZbQNO2aj2zbRinZdZeX8VqTLXVf0wwYhuxw09RwHAmhris5tW0VYaiRJBLSlVJ4nkPTdDz8e+dnHuuf6Qa7X8vV9XWIZcFHHyVzYbrFdfWVfTif1YzIRnY7n7aVAQCJ/a4Lb9/mRFFEXdd4nkdVCejoup793sKy4HhU6LrIH6dTwqtXMVk24Lom4whFUc7PD9E0Zgguz7ZtG8PQqKqGvu85HCK6DsqyxDRNHMdZ0eMCfJoG+n7g6srk6UlykYANH5CclSQ1tm0TBAZv30qxHscBXSclwgI3TFNy3c/K6v/Uv3z567WKY3fl4ZqmIQhc6rrjcLDpe3h4SLm93a4F7MIqZJmiLEssS0Ka7/szoRry9JQTx4KTpwnqull3y7ID0jTl9es9b9+m2LaNZVl0XUcY+tR1y/W1gIqylHukqYSxzSZkHBXDMNC27TyJBpZlcDolXF7GaJrsEAmJA77vEYbyzn3fs9lImJ8m+bfr2uu7Sn6THRVFPmEoIGgYhIGxLA3DgP/9T3+6SfuJc1b0187qm7+j1OWly/lcs9sJlHYchywrVz2p72G/3zIM8nt5Ln+ezwNxrKGUwjRN4jjgcNB4770Qz4M4juYBG5gmNSNEk67r6Pue3c7A9/05pAXYto1tm/PPQRg6HI8jeS7vUNcdnucRxyF9/8L5tW3LdmvTdR2GARcXMVXVUxQdti1j+eqVx/Pzcf3sSikeHzMA0jRlu7Vpmo7n5xOmCRcXLlHkYZomeV5xOo0YhnCURVHg+/JOr74zqJvf7H7ifPZjz/B7vz0ppdScrF2Uku3dNPIhNE2jqiouLnzGUVZaWUrN07YdFxf2al4ZRzgeG4Zh4OYm5OGhJAwDxlF4vDR9get5nrPbCdooipKLi4Dz+QWGT9PEdmtTlhNBoK9C4kIPCZID3xdC+HAwub+v5h1lEQQ6SdLOSHSYw6KEsK57uUfbdrNtwMJx5BllKWHQ9405Cgzouo5t63TdRBjKwjVNuL8v8TyPpmnWksVxZPw++ZMfb6f9hTvrw99X6hf+rlJZlqFpGp7nkqYVVdXx9JSTpikguSeKfE6nBtuWiYoim74fmKaJuoaHh448Z4buAufrGrbbYKaREspSapv9XuqbwyGmKEpME3zfp2nkd7MsI45Ntlt7DrM6x2PFOC6c4Uhd9+i6TPLjY8luZ/LxxwkAlmWRpum8++p5UGWH6jo8PCSM40RZ1ozjRBjKLpSwquj7kcPBmxeMLEDPM2fKC8JQ5/4+pSwVaarYbAKqShbhQoVlWU/X9T821P+Rk/X6u6MaR6mPvvWtLbouRSSI4HdzExGGIaapMY4yQI7j8OmnCZqmEUWsVX8Uwc2NvSZw4flcum6kbUf6njnW27RtS9+/cHSO49A0I0GgMU2KcYT9fr8O0jAMdB3Ytk3XQZoKEnVdi6YZub2VcFmWsNvFXF0Jcbvb7ajrnutr2bmbjYZl6bQt3N7GGIbOxYXH4aBTliK1TJP8XF3XGIY8p+tk8ppmxLYtzueGuoY43hIEkqvO52z+2W7O5xVKKW5vLTQNfu73lFpQ9f/r+qHbz/qr9+rDD28YBkE8mqZxdeVyd1dwcRFi27K6hmHAcSzOZwESDw9iD3McDaUkPrvuwihIQnYcG8+TuibLFK6rkeeyC7tOVNokEUjteQ6nk8j1SskOCYIAXRdEeDjEKyNSVeJyenqS+s5xnJmyknDrui5RZFJVijzP2W43lGU112cOeV6x3/v0vYTMtoXHxwTf99ls7DXcPzw88OrVDUVRYds24zhS1zWHQzwvnhc5x/MEUCyFN8i96/olvC6k8v19MpcvOn3/w0niH/hC+KsntdvtZugrDPM4KrZbjTyXAZYQJ1SNhBjxN3zwQcgwvEB1WTUuZSmUU1EU7HbbFY3VdU0cb6iqBt93KQqB63kuyO2zxpcoivB9g2GQiX96+qym5dP3gmIOB5OyhCQRm5llQV1PxLHO42OzcodRZK8KdJIUKKUIw5BhGFZRU9O0dZJlMQitFcfCzJ9O9fw9bd79gnYXrWwcX+ist28rdjt//nvLdisLqSwlFwpQkXquqiRvRpF8/7NKtQbwwe8q5TiQpsJzaZo8XOCo1AwgyEoEQgPL0lY+7XxOuLqKSdMa3xcXkePA8VgzTRPX18G6A85ncRgdjx2bjXCFCwgYBlkMS6gcR7i/zzFNk7Zt8TyP16+FQioKIV89z8OyjHWVlqXcbwm/4ziuueLy0uajj8SGJpKIQ12rVb8KQ4u2lR0kphsHTRP+b7+3yHN5pmVZc8h2sW1517Zd0GdDXYvzStd1HMdhuzXWiWzbkTA0SFPR1dq2xzAM0jTl1asdZTlhmjrjqKjrGsdx1l2m/ZV/oFSWsdq08lyI1ft7QTq6rs+eBYHowj4M+L6JbcPp1BEENlUlrECWTUSRzt1dShxvGQZRgPu+ZxxHwtADpPa5vAxnmkaK4jiGLBPpQrg84Qo9j3kXy4TI7pYdGwQGeS6DWZby/U8/TbBtmzj2ybKGsizZ7/fzhLtkmTwvyzJev96QptOsWcV0nZhwltJCPBpwPqdcX285nSo2G5++V+tOdBydthXH1cWFT1lKydE0DTc3AooELcoY6LrOMAwcDj739xJql5C6eBkXt1YQyOe2bdAXo6Ss4oq6btcJCQKDYRjYbAzGcVFoayzLpK7HWSey6Hvh7N68STEMna4Tri7LcnRdRylFENhEkYemycDHcbjunu02IgzhdJrWWmgphA1DVm2ajmgavHmT8NFHKboutU6evyT+/V5W99VVjO/7KAW+73I4HCjLcg1pcRyhlMJxnBnF6ViWhW0LMXt5abHbCdAR24Di8nJLnvdcXvqcz1I0TtOEbctkmqbObuevoXu71TkcfO7uCqZJFGZRqxtcVxaSbcN778WM40iWZRiGweOj3PvqKp69IRIeTRP0slQUxTCHPmf2IahVCGya5geS7n7vMU0KxzE4nxsBJJaEy/1+S98PZFm91jGyKwUxDQNkWUWeN2voEGGx43zu15eWUKtTlt2cv8A0DYZhJIoibm+3WBYcDvsZTWmczx2nk8T2cZQoIQ0JPZoGFxfhCsuXLOB5Ds/PFedzRRAEPD1l1LWi70VLMwyDIBB4Lova4ulJgIXjaBwODsMgu2ah0IZBFnRdy9d3u5CybHFdjdOp5fXreJVXJMf3OI6DrutEkcyBUswLRyPLJpSSn9Vlpk08T1ZKkkiCD8OQtpU/01TY5b6XxBqGGk0zcHUl3ogXWM3skHWpqgrXdbm8NGYxUQrNqyufw8FlGCR+L+Kd48ifu91uDpkTrmtTVR1ZVmNZsNsJrVUUE3kOux3c3QmYsSwLz5OFs4Tn8znFdS2mSdgNIWtllSdJQt+PRJE/85Adt7cbgkCjKCRP931P2/Zst3A+J2ga3Nz4aJpGWfZzflQURTtrW6IMbLfbWcHuOR4z4tjh8VGose9//8zpVJGm/ZyrRYv7xjdC7u8lH55OCXUNd3fZLP0IwNEOf7NUC+sgtY7krDRlVVOXLg2ZWBddXxjnabV3Lbxd3/c0TUMcx0SRwfEoqElW3UCWZWw2G+LY4nwWVsC2rRni9mRZNsvoIUEgFb5hvDAiS/ja7eDP/uzFmqaU4vra4/m5m8OnQd/3DMMw+wJ9np6eME0TTdP45jdjigKyTJiFKNLpe1nBS+gRH7wiy7LZpxjT98PMZBjc3yfz38MZlhtomoyLMBmSb9++fSF8FyI7z8Woo2lSpvR9z8VFyPlcz5KRLOZpmnAcWYjaYlNumn71zJ1OJ25uLgHW9plFUZWXkUnbbGQwxxEeH4/s93tsW3ZQmopJMgjg7dty5vVi6loMKotnT9fh+VlI1CU0+v4LU11VkqzP5zOO43A4hOS5wF0pxGVAl8vztJmz9DidxEL25k1BEAT4vsbxWBFF/uqL3++1Wf4QdTkIRErx/UUsbZmmadbHBmzbZBgkVzXNsOZWXWeWbsY53ztUVTfbDTxc18B1hRsVf6KzSi+uK97EIPDRdXn2w0M1q+sueT4DE8PQGQaF686zp2lcXFzQNBLrP/nkiK7LRNV1MwuELuM4znWCmgFDPPsbsjlceLRtP/Nr2oy+cm5uXA4Hjb4fqev2MywFc64oSJKONFWzu0m6R0zTxHVdDEPYk9Oppm3VHIYbDEPD8zSSRMwsAqV7qkpCeRRpFMU452XZBV3XkSSyQNpWEQQWx2NOlhXzTh7nWs6b84hJ28rAdd1EURQ4juSoMISuU+vC6bppLTeapqHrFEky4jgmwzBg26xCZ9PA7a1ocraQ+Fxe+nPBrdjvLbZbV+imzUabfd6KoijQdY3NxqIoGl6/PpDn1Sp9C3qCKDJ4fj6jaRrPz+lniladp6eMqoI4lrpFaKBOaoa7isfHgSgy2G4lmb56FVOWzDkkpKoqTFOjrru5PnN49WqLpmmzaRMuLz0cR4jc3c7j6em4vuP1tWha2+2WPJe6pyjAsowZaUqxfH3tEMfw+Jiy2Whz2PJo23ZGlwKSzueUNE1xXbBtsQbYtr7SW+M48sknCXGsURTFHLrElp1l2Spquq4xRzB3DrkTRTFwPCYkiXCIadpxPIr14fY2mEsIyX9rdfxLf6RUUYjOdHkZkiQtUeTMiGrAssw11CxajoQRk/N5XF9sAQy7nb+WBOKulXadZcX7vkWaVtzc+PNASjhI08U2JtJ/HFsoBff36YzCHJqmYZomwjCc2fF+VYa3W5MkEfV5yVXDMHBxIS7d+fVoGoH+oiZL7ghDef5CChyPJZtNQBiymkvzfFhFUssyOZ3OxHFMWZa8ehXy8CAOYc/z8H2Dh4eE29uYtoWm6fA8e65XpUYUEfOFohJ0LX+vKvn5PBf79g/QTe/99qQ8TyPP+1WgE1len7sw1JwIhR5ZFFnPg48/lmTfdWrt/kiShIuLA1mWc3sbUVXC6d3cxNS18ILCM76Ic54nAzkMwp6/fSsTKsWyTHKSlPK+7wWzfCE5482bZGYWIjYbE8OA+/uCOA5n4CBq89L8YNs2fd/jeR5ZlnF1teV0KmeNzJpRsZhKNxuDspR8soAe8XgkXFzEFIV0W3adjIfY7xr2e5eqkp/b72NcVxbMxx9L4f76tc+bNxXTNHE4hLMFrub62qMsf1Bd/qFE7vW3W3VxYfPxx0LNyPaVVhmxNBe4rsswDFxfuzw8CL8nu47ZFqZxPhc4joPrWivddDxWbLc+VSXU1uKB2O8NkkTNZpiXnxeXVMnNTUCWiXVZdkU2W6xNsixnv49WC/WnnyazsBnSNOJxf3jIuLraoGmQJC23tw53d/Le0/RS4I6jLELDWDzwNZuNmG+macIw9BURGoZBXQuYEZpKJsX3fS4v7bWrsusk5IHoc9/85pb7e6lFw9CmbcX+JjRagW3bP9Sz8SNFL/dXHtXFxcUqyi3EbpIk3N7ueHrKORwimuZlGxuGwPrvfe8tH3xwQ1VJK87iim0aOJ/Pcy2i43mQJB2WZeE4Ur9EkbUW0GHoE8fw/Cwf1vd1hmGRRl6oLN+3aZqBvu8JAo9xlETvuhpFIQtjATFSZE6z1yOY/YUG9/fC9KephOyFXpP7QFGM+L6B5wlhLbltWkGI9IcpLi+liBZ7tlBISdICzKDE4fY2pCggzwt0Xef2VqLHjxIif6Se1fzXK+37f6prCyEq6rA228BEjxKI3X8GlS3o5oY8l0Q8lyFzp2GBaZr0fc/5nJDnQrhO08T5XHJxYVHXiq6bCAIfzxOzzOEgWlBRDKRpObMZxsyE27guM1vt0TQdbdtSVRVVNVKW5QyH09nvLjWk7/trC1CaCqMxjmr2lKjZONNiGHB3dyYM5et3dxVBoLHdujiOQxx7zAgeXdf45JNqNd90XUdVKaLImZVpcfem6UTX9VxdhbP/Uf2FivGPLevf/lavxnEkihzqesRxDLpOGOKlvgBmuf1Fspa6TAq9um6wLIu2bbm99TmdFh5Q53xOef16uxLBDw/CpARBgKaJ1CCrmzVESn0npGwQQJL0lGXJbhdTltXqbNrv/dVSIMy/7Ib9XuPTTyWnWZaE8PNZdvMwCPQW86m1cppZJnJHUfT0fc9+768O3cfHdmbahWfsOmZILwtFhFoBFVnWcnHhkKYTb/618WPNw0/ssvm531OqqiRUSfErjMF2a/P0VHB9HfL8XHN15VFVUFXtHJqCub5Y6jl4eCjm5jkhYpcicRzVGtocB56f61lM1ElTETiXGL+gvsUDcn29o20FvLx9K/1dWSbhCiCOPaZJNDEhdh1cV6Np1ErcfvjhjtNJ7h2GPlXVEIYuWVZxOPgUxThbD2TXAytRvKgLi3NqYdilTpTnOI5GXf/kXSg/tRXt6jcatds5ZNlAGJorKmuaht3OpW2XLvh+RjpCej495VxeRiRJQxRJu8/xWLDbhZzPBVEkMdOy4HyWMytAEr4UlQZl2a4OJSmUDYpCWArD0EnTjJubzbxYRNJYitRhGNjtIvJcdjvIbhP/vRhy7u7On+EoRzzPJQzh6amZuU/xMmZZtxpbF5/7QjjbtsEwCHBoW1G5bdvm+tr6qXuVf2aX6F/++0rJJEnyrSoRJIXYlGTq+xZdJ6v9fK7mVWYTRfDmjfzMxYXFRx+d125GOadCm3WrmosLj/NZtLOuU7MPQpiCpTkhihzKsl9lGYA4Nueww9pDLMYWKcLD0FgprbaVRSCuX52yrFYuse97osinqgRJns/LCTYiNEoXypY0TWeUKnLI5aXH83OzaoOf/quf3uj5udinf/mPpWPk6Unif5IUvP9+SJqKRLEgSduWvJAkFXHs0zQCl/v+Bbm1LatAB5Kg5XvCNhgGPD2p2e+3AB9h3S3LWOX052epa8TTCHd3+SxDBKv7Vu4riK8opEl8IV2X0LrbidD58HAmiiK6ruPmxl89KEFgzfodlKUYXZUS/tTz3PUZn0en5OfamvLeb09KQp5BnktCXpqzP2tpLsuSzSbkdEpm352P677UJGUpk1nXUowuRPLiUxgGGYAsm6jrmv0+4HgsOBzEzHN/L+1Ci1IQRUIoPz8LUfvmzRO6rnN9fZhbTyXnSDuQuy6WIDBWqJ9lEqIti1VvWkJ9WU6cz2cuLw+AfEbZ6Qb/8x9/fj1bX0gf0TJpfd8Thu6aH3xfEJthGGuN9fwsSXwcpZAWL4bi+fmZ/X6PruszMdtyOATkeT9bzPrZhLOjLKVoXgjZaRKJ4nQ68fr1AcuSfKfrOufzmffe2895pCaKPBwH8nyakZzk0JubkDwXXUuUXmHcXfflqIdPPz3yC79w4O5OdpGgYvHfT9Pnf8TQF9ZMd/UbjdpuRQZ4eKhm+O3N/cPdipSyLOP997eMI5zP3bqq+75fm+kuLvx1hy6QuG1lwNp2YrvV5w5IxX4vH0kpePtWlOzt1uXhQSxqfd/zjW9IiO77ic1G5/m54fLS5XTqubiw1ibyYZAdE8/9R8LMmPT9uDq0ttvt6nHf7Xy67sd32P6k1xfepvr6u6NaTCdNs8j0+io3RJGF6wqt1PfM9ZI0iKdpznYrTQrL15cmiO3W5XgsaNuWq6vDLOP0q74kjXVyFBC85MHbW4ePP5b7iggou35RbTVNI4417u7KuRbzSVOZvLIUoFOWi7G0WwXEsvziz8r40rrNlxNklILj8cirV4f1WATTlB2T5xO+r5PnPYeDWL/O5wTDMNhsIoZhXLs0tltr3lmsNdrzsyjbck9Rt4W81Wcm5AWJ1nWL4zgrk7H0MS8uX8mfPZ5n0bbjeqCKlCbe7NUQ0+oXtZP+/PWln+Xw4e8rlSQyQHVdz40A1mxFlhDXdf0s95ukqdRlZSmtPldX+zUkLpY1zxPTpijHclLNe+8Fs2AquXMxhcqgO6sBaJFFhkHAzCITXV+Hs/dBmPoFVb55I7LK0qZ0+k/hlzaGX8mhJT//B0qlabNyi0tH4vEo0FfafWRGgsBeqaCyHFe/uFILdA6wLI00FWu1uGuFSLVtGVzf9/E8a0Wjcp6FPnNzFlUFed4xTRP7vYvrwsODyDHLwsiyksMhIE2lFnv77+z/vw8t+fNX+Ksntd/vVmtY2/azVGHjujLgi4zuOA6bjRTJYfiieS1HNeS5eBjKUsBM0zR861s7zmcpxstSjKnzQWozky8F/HYr/vqlt3ix4rVtSxQFNE1HGNqUZf+VTNJyfWmHlvywq/gve+2TP9E0yQ8DRVGsO0aI4A7ft9ak//QkHpCPPz7PTW/Mztd+1paa+SxcjziOOZ/FmZTn3Xw24dLoPc4yy4jvC7sh8jucTvIOeZ6vB0q6rs3/+Wea9lVOFLwjp6It1y/+oTzw8moAAAHYSURBVFJl+cJOLBrZZmOQ52IWTVOxQ4vxJVhdUkqJoadtWyzL4nDw1zZWOWjEnk+gfhH6kkSOrNM0+V3fd9fifQE9bQvf++df/jlNP+x6J17is9f1t1slsNtc/eJRFK2+jEWUXPyMy0Eii31rYfhBmtsk1y07zqTr5J6CEB36fmS3M+beXykZyrKmbVvy/7x7p8bnnXqZz17f/B2lmqabpXRhuhf6yLZt8jxns9ng+8I6LKzC6TSujLznuSuh7Hketm3MLMo4d+2LMzjPO4ZhmPWp7Tt7Vu47+VKfvV59Z1B1Xa/Iz/etGVio9biE5aihpVuy7wWG17XkvcPB5u4un21rW5qmY7ezubtL567MkGmSXPlV56Ufdb2zL/bZ6+Y3O+W6FmXZrAJfFFkUxbDmryhyZxVYWAyhgnyaZlxNKLe3Huezms0uL4eN/CRN2F/l9c6/4GevX/ojpapKitMX1gPyXDjA5WyLxUMoNmWXzcbg8bFkuw3WBkA5zvXLPzPwZ7m+Ni/62Wv5/5Asx4W7rs3pJK2rV1fB3GB9nifKo22Fxlr8hVXV8vgf3K/dZ//avfBnr8tfr9UC1a+u/PXM9udnYc+zbPH+vfx/Sx4eHuj/2+3X8nP/X8+jjAy2QdiEAAAAAElFTkSuQmCC"},null),createVNode$1("linearGradient",{id:"_Linear11",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(-118.47,-106.79,210.785,-180.125,69.2121,1372.7)"},[createVNode$1("stop",{offset:"0",style:"stop-color: rgb(64, 128, 255); stop-opacity: 1;"},null),createVNode$1("stop",{offset:"1",style:"stop-color: rgb(64, 128, 255); stop-opacity: 1;"},null)]),createVNode$1("image",{id:"_Image13",width:"107px",height:"34px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAiCAYAAABY6CeoAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABFElEQVRoge2aQRKDMAhFmx6it/P+x7Ab64xOmaAG8vnwFnWhiOGFOG3TPsu6vpS0djpuH61zXoz5F3s6r4rRxipiftddeUbp3t18QozEu3/JfdSzgCy5VWpTWcVYSlaPqcvDEUpZQPUdCqUsSAbMoJIViJIVCBNZrO+MHtbjrs4KRMkKBJUs9uXXTxZ7JR2g6ix27sly6BIxReIOHdpZWevoNe68y2DAmTVXFmDBAB9pJ29nBYRCln5jgkVyv1QUsrIAJyvtvg1F7iGykF/KlniPG66zKDCyWLI2IqwOJSsQz2URbqZEpTorEDCypn6xnciVYT+SlbS+08Zt01lJfv7xBmYZLPpgy6p/pA9gyxIArKMLXxexLNiBCThLAAAAAElFTkSuQmCC"},null),createVNode$1("image",{id:"_Image15",width:"38px",height:"62px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAA+CAYAAABHuGlYAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGaElEQVRogcVZSWLjOAwsblIu+oD+/zZ/YC4di8sc7IKLsJzJdCdpXGxLXIACUADpgL8oIYR9jKG/wd/hL+m080uMEb33pwHpR9UBkFLaU7ptW0rBGAOKGgAsy/KjiO3Aw105Z4wx0FpDSgmtNVPqer0if7c2Oee91oqUEsYY5rZaK5ZlQYwRx3HY+J+IsSmOQghPqKhwTO8dIYRvU8yU0kzzEmPEGGNSiGO/Ovh3ABtwQ4UI5ZxRSjEFKBprYwyUUtB7v6H3hQqhlGIb1loRY0RKCcdxIKWE3rshUkqZYsvLHykWQthjjJZZGtwqpRS01ia3MaZCCKi1cj2MMZBS+n1XhhB2brKuK2qtj/hIyeJHkVEypft678g5I+c8uf53FNsBbLoJF6RwU800kirjinM18HXcpxULIewANi5KyDWT1nWd3KquXZbF5tGVmq2qXO/9UzG2f/SSyK3rivf395e1T5/TmBAClmXB+/u7AnBD+7NK5fwoEiE822OM7d7lnBFjtIwlmkSMga97hBBelqRdraTf1SIvnsm1/gEwVBgCfMfPpwQ6UWgj0XGQxgrfeUWJFIO7tYacs20WYzRDPbqkDcZs790U25dl2ai9xoKK+V+oQFEhspzvWZ4kC2DKTK6tCRBjjDtd4RVZlgVvb2/T4lqMj+Ow9yRaRU/Xi/E5nIkUjWLMpZSQxhibn8C6dhyHlRZa6Ru73jtKKbYgDeBmWor8PN2LLmf8JdyLrsKrlV7hp+XeRa01G+/jjaj4hGE49N6ngm/vVakQgqU1N9c2uPc+pTdLjyqpn7qOFz6PMU48RjBsVcaHr/hqPZVZ13XKMn3v+U4zmiWKhur6mpm994diDDwN2BDCxD80wD9TZWqttimfE1lPQYyndV2n32OMW4xp6jI7vGi80CqSr48PRZGGkttSShO/sV9b19XHcjSkmEWKmP5mcKsiipaXs/hjCFCUO1ncASDFGLdXmxJBjRFFk4VbfxNVpRi6h/F2tgfBoRdiaw3LshifeCGPsW3hQsCj/lER5T1SCN3nWd76rhehk0IIGxVQC7iAh3xZlmksUVQC1eMaS5gqRve/OoXXWm/Br0jwANFas3aFStFNuomlt7iZ2aeErUox8Espxp9U1GomgJ0WTec6l23+HcvIWWPIHoytkM7lfYWi7ue21hBZ/9TiUsqUPWcMT746U6rWOvVnOvdVJaAYjeScNwYorSeFeDL0LO838W5WQ/S7ZZ4klc/4eL1eLViZsrVW8z39f9a2eKR8u8Mg93NpZGsNx3FMBxTzEoDt7KCqCcFNtTNVK1+dK1trljxKEWyVfDfLLM05I7Fz1c191tVarbPwLlXOMjecKKWbMtEo/s6s945IjWutBq1apxbpUR94JAkX00Kv8aSuZDZynWVZTCltNs2VHikN/DP+okvOEsCHA68BPFLa3XoujZqFKlqctRx5BfQsSI7iHACWeeoySmvt6eDDsmaIeSF18PbPu5ZjtCroe7+mP01pS+T3tZM4G7uzWGCvpNZpdhExZqx2ptpRKPX47oJoszMG7j2/xoIqx8DU1oYLcxwTxbfkPl5jjFN4MAP53p8nIsmV15G+9yICXIyKcNHjOKY5KjqXY6kc6yzXbK0ZkjFGhFLKzoH2UG75xIIP6xzT3X8HHg3B2TGOzabe+/PiblOfn8UEn3MToqnI6R0GjfOJoOXNcx7r552CLmmMsem1NjdX7uGiSqa6IUWPa2eZzoOtntBVeu8XAP8AuF1D5ZytmKoVFH/0OpNX79St/lMo5uLnJdzvUzXwpk5SiFTpwlv9qnfXYm8F+jHPEPJiaUR21gzTf8fUytba1E2Qw/TcSdECzaS6U8sTShPS/MKOk27T9FXxqKirSBetNby9veHXr182XrL0Q4UokVdInnO0vj1Zc+ciJUV2HloVXON4+axSAJDJ2F4Bn+p6tD9rhbkGkZee//JR0rySlHPelLfOWhUqqH966gFFKYRz7p+fRuhJsRDCaWtNJf1JiJvqkf6E4y6999Ns+6xkbVtIE2enZ0XKX4VzPP5HDP2XGI8B81W5lhTlOZYiV3YuY4w/QshLVJeR/TVOBA0TF49fhpJKptXaT/mSoZlLRa/X67coRAkAdt+OnP2ZLvKtClEy8Bz4L5T6EYUoU2utqGm9+2mlAMz/vunfxHda+HGFKP8C6wW6ett+DK8AAAAASUVORK5CYII="},null)])])}});const RESULT_STATUS=["info","success","warning","error","403","404","500",null],_sfc_main$Y=defineComponent({name:"Result",components:{IconInfo,IconCheck,IconExclamation,IconClose,ResultForbidden,ResultNotFound,ResultServerError},props:{status:{type:String,default:"info",validator:a=>RESULT_STATUS.includes(a)},title:String,subtitle:String},setup(){return{prefixCls:getPrefixCls("result")}}});function _sfc_render$K(a,s,l,o,c,u){const d=resolveComponent("icon-info"),f=resolveComponent("icon-check"),g=resolveComponent("icon-exclamation"),y=resolveComponent("icon-close"),$=resolveComponent("result-forbidden"),x=resolveComponent("result-not-found"),N=resolveComponent("result-server-error");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-icon`,{[`${a.prefixCls}-icon-${a.status}`]:a.status,[`${a.prefixCls}-icon-custom`]:a.status===null}])},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-icon-tip`)},[renderSlot(a.$slots,"icon",{},()=>[a.status==="info"?(openBlock(),createBlock(d,{key:0})):a.status==="success"?(openBlock(),createBlock(f,{key:1})):a.status==="warning"?(openBlock(),createBlock(g,{key:2})):a.status==="error"?(openBlock(),createBlock(y,{key:3})):a.status==="403"?(openBlock(),createBlock($,{key:4})):a.status==="404"?(openBlock(),createBlock(x,{key:5})):a.status==="500"?(openBlock(),createBlock(N,{key:6})):createCommentVNode("v-if",!0)])],2)],2),a.title||a.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),a.subtitle||a.$slots.subtitle?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-subtitle`)},[renderSlot(a.$slots,"subtitle",{},()=>[createTextVNode(toDisplayString(a.subtitle),1)])],2)):createCommentVNode("v-if",!0),a.$slots.extra?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(`${a.prefixCls}-extra`)},[renderSlot(a.$slots,"extra")],2)):createCommentVNode("v-if",!0),a.$slots.default?(openBlock(),createElementBlock("div",{key:3,class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0)],2)}var _Result=_export_sfc(_sfc_main$Y,[["render",_sfc_render$K]]);const Result=Object.assign(_Result,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Result.name,_Result)}}),_sfc_main$X=defineComponent({name:"Skeleton",props:{loading:{type:Boolean,default:!0},animation:{type:Boolean,default:!1}},setup(a){const s=getPrefixCls("skeleton"),l=computed(()=>[s,{[`${s}-animation`]:a.animation}]);return{prefixCls:s,cls:l}}});function _sfc_render$J(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[a.loading?renderSlot(a.$slots,"default",{key:0}):renderSlot(a.$slots,"content",{key:1})],2)}var _Skeleton=_export_sfc(_sfc_main$X,[["render",_sfc_render$J]]);const _sfc_main$W=defineComponent({name:"SkeletonLine",props:{rows:{type:Number,default:1},widths:{type:Array,default:()=>[]},lineHeight:{type:Number,default:20},lineSpacing:{type:Number,default:15}},setup(a){const s=getPrefixCls("skeleton-line"),l=[];for(let o=0;o<a.rows;o++){const c={};isNumber$1(a.widths[o])?c.width=`${a.widths[o]}px`:isString$1(a.widths[o])&&(c.width=String(a.widths[o])),c.height=`${a.lineHeight}px`,o>0&&(c.marginTop=`${a.lineSpacing}px`),l.push(c)}return{prefixCls:s,lines:l}}});function _sfc_render$I(a,s,l,o,c,u){return openBlock(!0),createElementBlock(Fragment,null,renderList(a.lines,(d,f)=>(openBlock(),createElementBlock("ul",{key:f,class:normalizeClass(a.prefixCls)},[createBaseVNode("li",{class:normalizeClass(`${a.prefixCls}-row`),style:normalizeStyle$1(d)},null,6)],2))),128)}var SkeletonLine=_export_sfc(_sfc_main$W,[["render",_sfc_render$I]]);const _sfc_main$V=defineComponent({name:"SkeletonShape",props:{shape:{type:String,default:"square"},size:{type:String,default:"medium"}},setup(a){const s=getPrefixCls("skeleton-shape"),l=computed(()=>[s,`${s}-${a.shape}`,`${s}-${a.size}`]);return{prefixCls:s,cls:l}}});function _sfc_render$H(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},null,2)}var SkeletonShape=_export_sfc(_sfc_main$V,[["render",_sfc_render$H]]);const Skeleton=Object.assign(_Skeleton,{Line:SkeletonLine,Shape:SkeletonShape,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Skeleton.name,_Skeleton),a.component(l+SkeletonLine.name,SkeletonLine),a.component(l+SkeletonShape.name,SkeletonShape)}}),_sfc_main$U=defineComponent({name:"SliderButton",components:{Tooltip},inheritAttrs:!1,props:{direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},formatTooltip:{type:Function},value:[String,Number],tooltipPosition:{type:String},showTooltip:{type:Boolean,default:!0}},emits:["movestart","moving","moveend"],setup(a,{emit:s}){const l=getPrefixCls("slider-btn"),o=ref(!1),c=x=>{a.disabled||(x.preventDefault(),o.value=!0,on(window,"mousemove",u),on(window,"mouseup",d),on(window,"contextmenu",d),s("movestart"))},u=x=>{s("moving",x.clientX,x.clientY)},d=()=>{o.value=!1,off(window,"mousemove",u),off(window,"mouseup",d),s("moveend")},f=computed(()=>[l]),g=computed(()=>{var x;return((x=a.tooltipPosition)!=null?x:a.direction==="vertical")?"right":"top"}),y=computed(()=>{var x,N;return(N=(x=a.formatTooltip)==null?void 0:x.call(a,a.value))!=null?N:`${a.value}`}),$=computed(()=>a.showTooltip?o.value?!0:void 0:!1);return{prefixCls:l,cls:f,tooltipContent:y,mergedTooltipPosition:g,popupVisible:$,handleMouseDown:c}}}),_hoisted_1$v=["aria-disabled","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"];function _sfc_render$G(a,s,l,o,c,u){const d=resolveComponent("tooltip");return openBlock(),createBlock(d,{"popup-visible":a.popupVisible,position:a.mergedTooltipPosition,content:a.tooltipContent},{default:withCtx(()=>[createBaseVNode("div",mergeProps(a.$attrs,{tabindex:"0",role:"slider","aria-disabled":a.disabled,"aria-valuemax":a.max,"aria-valuemin":a.min,"aria-valuenow":a.value,"aria-valuetext":a.tooltipContent,class:a.cls,onMousedown:s[0]||(s[0]=(...f)=>a.handleMouseDown&&a.handleMouseDown(...f)),onClick:s[1]||(s[1]=withModifiers(()=>{},["stop"]))}),null,16,_hoisted_1$v)]),_:1},8,["popup-visible","position","content"])}var SliderButton=_export_sfc(_sfc_main$U,[["render",_sfc_render$G]]);const getOffsetPercent=(a,[s,l])=>{const o=Math.max((a-s)/(l-s),0);return`${index.round(o*100,2)}%`},getPositionStyle=(a,s)=>s==="vertical"?{bottom:a}:{left:a},_sfc_main$T=defineComponent({name:"SliderDots",props:{data:{type:Array,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(a){return{prefixCls:getPrefixCls("slider"),getStyle:o=>getPositionStyle(getOffsetPercent(o,[a.min,a.max]),a.direction)}}});function _sfc_render$F(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-dots`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.data,(d,f)=>(openBlock(),createElementBlock("div",{key:f,class:normalizeClass(`${a.prefixCls}-dot-wrapper`),style:normalizeStyle$1(a.getStyle(d.key))},[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-dot`,{[`${a.prefixCls}-dot-active`]:d.isActive}])},null,2)],6))),128))],2)}var SliderDots=_export_sfc(_sfc_main$T,[["render",_sfc_render$F]]);const _sfc_main$S=defineComponent({name:"SliderMarks",props:{data:{type:Array,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(a){return{prefixCls:getPrefixCls("slider"),getStyle:o=>getPositionStyle(getOffsetPercent(o,[a.min,a.max]),a.direction)}}});function _sfc_render$E(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-marks`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.data,(d,f)=>(openBlock(),createElementBlock("div",{key:f,"aria-hidden":"true",class:normalizeClass(`${a.prefixCls}-mark`),style:normalizeStyle$1(a.getStyle(d.key))},toDisplayString(d.content),7))),128))],2)}var SliderMarks=_export_sfc(_sfc_main$S,[["render",_sfc_render$E]]);const _sfc_main$R=defineComponent({name:"SliderTicks",props:{value:{type:Array,required:!0},step:{type:Number,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(a){const s=getPrefixCls("slider"),l=computed(()=>{const c=[],u=Math.floor((a.max-a.min)/a.step);for(let d=0;d<=u;d++){const f=index.plus(d*a.step,a.min);f<=a.min||f>=a.max||c.push({key:f,isActive:f>=a.value[0]&&f<=a.value[1]})}return c});return{prefixCls:s,steps:l,getStyle:c=>getPositionStyle(getOffsetPercent(c,[a.min,a.max]),a.direction)}}});function _sfc_render$D(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-ticks`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.steps,(d,f)=>(openBlock(),createElementBlock("div",{key:f,class:normalizeClass([`${a.prefixCls}-tick`,{[`${a.prefixCls}-tick-active`]:d.isActive}]),style:normalizeStyle$1(a.getStyle(d.key))},null,6))),128))],2)}var SliderTicks=_export_sfc(_sfc_main$R,[["render",_sfc_render$D]]);const _sfc_main$Q=defineComponent({name:"SliderInput",components:{InputNumber},props:{modelValue:{type:Array,required:!0},min:{type:Number},max:{type:Number},step:{type:Number},disabled:{type:Boolean},range:{type:Boolean}},emits:["startChange","endChange"],setup(a,{emit:s}){return{prefixCls:getPrefixCls("slider")}}});function _sfc_render$C(a,s,l,o,c,u){const d=resolveComponent("input-number");return openBlock(),createElementBlock("div",{class:normalizeClass(`${a.prefixCls}-input`)},[a.range?(openBlock(),createElementBlock(Fragment,{key:0},[createVNode$1(d,{min:a.min,max:a.max,step:a.step,disabled:a.disabled,"model-value":a.modelValue[0],"hide-button":"",onChange:s[0]||(s[0]=f=>a.$emit("startChange",f))},null,8,["min","max","step","disabled","model-value"]),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-input-hyphens`)},null,2)],64)):createCommentVNode("v-if",!0),createVNode$1(d,{min:a.min,max:a.max,step:a.step,disabled:a.disabled,"model-value":a.modelValue[1],"hide-button":"",onChange:s[1]||(s[1]=f=>a.$emit("endChange",f))},null,8,["min","max","step","disabled","model-value"])],2)}var SliderInput=_export_sfc(_sfc_main$Q,[["render",_sfc_render$C]]);const _sfc_main$P=defineComponent({name:"Slider",components:{SliderButton,SliderDots,SliderMarks,SliderTicks,SliderInput},props:{modelValue:{type:[Number,Array],default:void 0},defaultValue:{type:[Number,Array],default:0},step:{type:Number,default:1},min:{type:Number,default:0},marks:{type:Object},max:{type:Number,default:100},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},showTicks:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},range:{type:Boolean,default:!1},formatTooltip:{type:Function},showTooltip:{type:Boolean,default:!0}},emits:{"update:modelValue":a=>!0,change:a=>!0},setup(a,{emit:s}){const{modelValue:l}=toRefs(a),o=getPrefixCls("slider"),{mergedDisabled:c,eventHandlers:u}=useFormItem({disabled:toRef(a,"disabled")}),d=ref(null),f=ref(),g=a.modelValue?a.modelValue:a.defaultValue,y=ref(isArray$1(g)?g[0]:0),$=ref(isArray$1(g)?g[1]:g);watch(l,oa=>{var ca,pa,ua,da,ha;isArray$1(oa)?(y.value=(pa=(ca=oa[0])!=null?ca:a.min)!=null?pa:0,$.value=(da=(ua=oa[1])!=null?ua:a.min)!=null?da:0):$.value=(ha=oa??a.min)!=null?ha:0});const x=()=>{var oa,ca;a.range?(s("update:modelValue",[y.value,$.value]),s("change",[y.value,$.value])):(s("update:modelValue",$.value),s("change",$.value)),(ca=(oa=u.value)==null?void 0:oa.onChange)==null||ca.call(oa)},N=oa=>{oa=oa??a.min,y.value=oa,x()},R=oa=>{oa=oa??a.min,$.value=oa,x()},j=computed(()=>{var oa,ca,pa;return a.range?isArray$1(a.modelValue)?a.modelValue:[y.value,(oa=a.modelValue)!=null?oa:$.value]:isUndefined(a.modelValue)?[y.value,$.value]:isArray$1(a.modelValue)?[(ca=a.min)!=null?ca:0,a.modelValue[1]]:[(pa=a.min)!=null?pa:0,a.modelValue]}),ne=computed(()=>Object.keys(a.marks||{}).map(oa=>{var ca;const pa=Number(oa);return{key:pa,content:(ca=a.marks)==null?void 0:ca[pa],isActive:pa>=j.value[0]&&pa<=j.value[1]}})),se=oa=>getPositionStyle(getOffsetPercent(oa,[a.min,a.max]),a.direction),ce=ref(!1),fe=()=>{ce.value=!0,d.value&&(f.value=d.value.getBoundingClientRect())};function ea(oa,ca){if(!f.value)return 0;const{left:pa,top:ua,width:da,height:ha}=f.value,ga=a.direction==="horizontal"?da:ha,fa=ga*a.step/(a.max-a.min);let ma=a.direction==="horizontal"?oa-pa:ua+ha-ca;ma<0&&(ma=0),ma>ga&&(ma=ga);const va=Math.round(ma/fa);return index.plus(a.min,index.times(va,a.step))}const ta=(oa,ca)=>{$.value=ea(oa,ca),x()},na=oa=>{if(c.value)return;const{clientX:ca,clientY:pa}=oa;d.value&&(f.value=d.value.getBoundingClientRect()),$.value=ea(ca,pa),x()};function aa([oa,ca]){return oa>ca&&([oa,ca]=[ca,oa]),a.direction==="vertical"?{bottom:getOffsetPercent(oa,[a.min,a.max]),top:getOffsetPercent(a.max+a.min-ca,[a.min,a.max])}:{left:getOffsetPercent(oa,[a.min,a.max]),right:getOffsetPercent(a.max+a.min-ca,[a.min,a.max])}}const ia=(oa,ca)=>{y.value=ea(oa,ca),x()},sa=()=>{ce.value=!1},ra=computed(()=>[o,{[`${o}-vertical`]:a.direction==="vertical",[`${o}-with-marks`]:!!a.marks}]),la=computed(()=>[`${o}-track`,{[`${o}-track-disabled`]:c.value,[`${o}-track-vertical`]:a.direction==="vertical"}]);return{prefixCls:o,cls:ra,trackCls:la,trackRef:d,computedValue:j,mergedDisabled:c,markList:ne,getBtnStyle:se,getBarStyle:aa,handleClick:na,handleMoveStart:fe,handleEndMoving:ta,handleMoveEnd:sa,handleStartMoving:ia,handleStartChange:N,handleEndChange:R}}});function _sfc_render$B(a,s,l,o,c,u){const d=resolveComponent("slider-ticks"),f=resolveComponent("slider-dots"),g=resolveComponent("slider-marks"),y=resolveComponent("slider-button"),$=resolveComponent("slider-input");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[createBaseVNode("div",{ref:"trackRef",class:normalizeClass(a.trackCls),onClick:s[0]||(s[0]=(...x)=>a.handleClick&&a.handleClick(...x))},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-bar`),style:normalizeStyle$1(a.getBarStyle(a.computedValue))},null,6),a.showTicks?(openBlock(),createBlock(d,{key:0,value:a.computedValue,step:a.step,min:a.min,max:a.max,direction:a.direction},null,8,["value","step","min","max","direction"])):createCommentVNode("v-if",!0),a.marks?(openBlock(),createBlock(f,{key:1,data:a.markList,min:a.min,max:a.max,direction:a.direction},null,8,["data","min","max","direction"])):createCommentVNode("v-if",!0),a.marks?(openBlock(),createBlock(g,{key:2,data:a.markList,min:a.min,max:a.max,direction:a.direction},null,8,["data","min","max","direction"])):createCommentVNode("v-if",!0),a.range?(openBlock(),createBlock(y,{key:3,style:normalizeStyle$1(a.getBtnStyle(a.computedValue[0])),value:a.computedValue[0],direction:a.direction,disabled:a.mergedDisabled,min:a.min,max:a.max,"format-tooltip":a.formatTooltip,"show-tooltip":a.showTooltip,onMovestart:a.handleMoveStart,onMoving:a.handleStartMoving,onMoveend:a.handleMoveEnd},null,8,["style","value","direction","disabled","min","max","format-tooltip","show-tooltip","onMovestart","onMoving","onMoveend"])):createCommentVNode("v-if",!0),createVNode$1(y,{style:normalizeStyle$1(a.getBtnStyle(a.computedValue[1])),value:a.computedValue[1],direction:a.direction,disabled:a.mergedDisabled,min:a.min,max:a.max,"format-tooltip":a.formatTooltip,"show-tooltip":a.showTooltip,onMovestart:a.handleMoveStart,onMoving:a.handleEndMoving,onMoveend:a.handleMoveEnd},null,8,["style","value","direction","disabled","min","max","format-tooltip","show-tooltip","onMovestart","onMoving","onMoveend"])],2),a.showInput?(openBlock(),createBlock($,{key:0,"model-value":a.computedValue,min:a.min,max:a.max,step:a.step,range:a.range,disabled:a.disabled,onStartChange:a.handleStartChange,onEndChange:a.handleEndChange},null,8,["model-value","min","max","step","range","disabled","onStartChange","onEndChange"])):createCommentVNode("v-if",!0)],2)}var _Slider=_export_sfc(_sfc_main$P,[["render",_sfc_render$B]]);const Slider=Object.assign(_Slider,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Slider.name,_Slider)}});var _Space=defineComponent({name:"Space",props:{align:{type:String},direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:"small"},wrap:{type:Boolean},fill:{type:Boolean}},setup(a,{slots:s}){const l=getPrefixCls("space"),o=computed(()=>{var f;return(f=a.align)!=null?f:a.direction==="horizontal"?"center":""}),c=computed(()=>[l,{[`${l}-${a.direction}`]:a.direction,[`${l}-align-${o.value}`]:o.value,[`${l}-wrap`]:a.wrap,[`${l}-fill`]:a.fill}]);function u(f){if(isNumber$1(f))return f;switch(f){case"mini":return 4;case"small":return 8;case"medium":return 16;case"large":return 24;default:return 8}}const d=f=>{const g={},y=`${u(isArray$1(a.size)?a.size[0]:a.size)}px`,$=`${u(isArray$1(a.size)?a.size[1]:a.size)}px`;return f?a.wrap?{marginBottom:$}:{}:(a.direction==="horizontal"&&(g.marginRight=y),(a.direction==="vertical"||a.wrap)&&(g.marginBottom=$),g)};return()=>{var f;const g=getAllElements((f=s.default)==null?void 0:f.call(s),!0).filter(y=>y.type!==Comment$1);return createVNode$1("div",{class:c.value},[g.map((y,$)=>{var x,N;const R=s.split&&$>0;return createVNode$1(Fragment,{key:(x=y.key)!=null?x:`item-${$}`},[R&&createVNode$1("div",{class:`${l}-item-split`,style:d(!1)},[(N=s.split)==null?void 0:N.call(s)]),createVNode$1("div",{class:`${l}-item`,style:d($===g.length-1)},[y])])})])}}});const Space=Object.assign(_Space,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Space.name,_Space)}});function getSizeConfig(a){const s=isString$1(a)?parseFloat(a):a;let l="";return isNumber$1(a)||String(s)===a?l=s>1?"px":"%":l="px",{size:s,unit:l,isPx:l==="px"}}function getPxSize({size:a,defaultSize:s,containerSize:l}){const o=getSizeConfig(a??s);return o.isPx?o.size:o.size*l}function px2percent(a,s){return parseFloat(a)/parseFloat(s)}const _sfc_main$O=defineComponent({name:"Split",components:{ResizeTrigger},props:{component:{type:String,default:"div"},direction:{type:String,default:"horizontal"},size:{type:[Number,String],default:void 0},defaultSize:{type:[Number,String],default:.5},min:{type:[Number,String]},max:{type:[Number,String]},disabled:{type:Boolean,default:!1}},emits:{moveStart:a=>!0,moving:a=>!0,moveEnd:a=>!0,"update:size":a=>!0},setup(a,{emit:s}){const{direction:l,size:o,defaultSize:c,min:u,max:d}=toRefs(a),f=ref(0),g=ref(),y=getPrefixCls("split"),[$,x]=useMergeState(c.value,reactive({value:o})),N=computed(()=>getSizeConfig($.value)),R=computed(()=>l.value==="horizontal"),j=computed(()=>[y,{[`${y}-horizontal`]:R.value,[`${y}-vertical`]:!R.value}]),ne=computed(()=>{const{size:ra,unit:la,isPx:oa}=N.value;return{flex:`0 0 calc(${oa?ra:ra*100}${la} - ${f.value/2}px)`}}),se={startPageX:0,startPageY:0,startContainerSize:0,startSize:0};async function ce(){const ra=()=>{var la,oa;return R.value?(la=g.value)==null?void 0:la.clientWidth:((oa=g.value)==null?void 0:oa.clientHeight)||0};return(!g.value||ra())&&await nextTick(),ra()}function fe(ra,la){if(!la)return;const oa=N.value.isPx?`${ra}px`:px2percent(ra,la);$.value!==oa&&(x(oa),s("update:size",oa))}function ea(ra,la){const oa=getPxSize({size:ra,containerSize:la}),ca=getPxSize({size:u.value,defaultSize:"0px",containerSize:la}),pa=getPxSize({size:d.value,defaultSize:`${la}px`,containerSize:la});let ua=oa;return ua=Math.max(ua,ca),ua=Math.min(ua,pa),ua}function ta({startContainerSize:ra,startSize:la,startPosition:oa,endPosition:ca}){const pa=getPxSize({size:la,containerSize:ra});return ea(`${pa+(ca-oa)}px`,ra)}function na(ra){s("moving",ra);const la=R.value?ta({startContainerSize:se.startContainerSize,startSize:se.startSize,startPosition:se.startPageX,endPosition:ra.pageX}):ta({startContainerSize:se.startContainerSize,startSize:se.startSize,startPosition:se.startPageY,endPosition:ra.pageY});fe(la,se.startContainerSize)}function aa(ra){off(window,"mousemove",na),off(window,"mouseup",aa),off(window,"contextmenu",aa),document.body.style.cursor="default",s("moveEnd",ra)}async function ia(ra){s("moveStart",ra),se.startPageX=ra.pageX,se.startPageY=ra.pageY,se.startContainerSize=await ce(),se.startSize=$.value,on(window,"mousemove",na),on(window,"mouseup",aa),on(window,"contextmenu",aa),document.body.style.cursor=R.value?"col-resize":"row-resize"}function sa(ra){const{width:la,height:oa}=ra.contentRect;f.value=R.value?la:oa}return onMounted(async()=>{const ra=await ce(),la=ea($.value,ra);fe(la,ra)}),{prefixCls:y,classNames:j,isHorizontal:R,wrapperRef:g,onMoveStart:ia,onTriggerResize:sa,firstPaneStyles:ne}}});function _sfc_render$A(a,s,l,o,c,u){const d=resolveComponent("ResizeTrigger");return openBlock(),createBlock(resolveDynamicComponent(a.component),{ref:"wrapperRef",class:normalizeClass(a.classNames)},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-pane`,`${a.prefixCls}-pane-first`]),style:normalizeStyle$1(a.firstPaneStyles)},[renderSlot(a.$slots,"first")],6),a.disabled?createCommentVNode("v-if",!0):(openBlock(),createBlock(d,{key:0,"prefix-cls":`${a.prefixCls}-trigger`,direction:a.isHorizontal?"vertical":"horizontal",onMousedown:a.onMoveStart,onResize:a.onTriggerResize},{default:withCtx(()=>[renderSlot(a.$slots,"resize-trigger")]),icon:withCtx(()=>[renderSlot(a.$slots,"resize-trigger-icon")]),_:3},8,["prefix-cls","direction","onMousedown","onResize"])),createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-pane`,`${a.prefixCls}-pane-second`])},[renderSlot(a.$slots,"second")],2)]),_:3},8,["class"])}var _Split=_export_sfc(_sfc_main$O,[["render",_sfc_render$A]]);const Split=Object.assign(_Split,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Split.name,_Split)}}),_sfc_main$N=defineComponent({name:"Statistic",props:{title:String,value:{type:[Number,Object]},format:{type:String,default:"HH:mm:ss"},extra:String,start:{type:Boolean,default:!0},precision:{type:Number,default:0},separator:String,showGroupSeparator:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},animationDuration:{type:Number,default:2e3},valueFrom:{type:Number,default:void 0},placeholder:{type:String},valueStyle:{type:Object}},setup(a){var s;const l=getPrefixCls("statistic"),o=computed(()=>isNumber$1(a.value)?a.value:0),c=ref((s=a.valueFrom)!=null?s:a.value),u=ref(null),{value:d}=toRefs(a),f=computed(()=>isUndefined(a.value)),g=($=(N=>(N=a.valueFrom)!=null?N:0)(),x=o.value)=>{var N;$!==x&&(u.value=new Tween({from:{value:$},to:{value:x},duration:a.animationDuration,easing:"quartOut",onUpdate:R=>{c.value=R.value},onFinish:()=>{c.value=x}}),(N=u.value)==null||N.start())},y=computed(()=>{let $=c.value;if(isNumber$1($)){isNumber$1(a.precision)&&($=index.round($,a.precision).toFixed(a.precision));const x=String($).split("."),N=a.showGroupSeparator?Number(x[0]).toLocaleString("en-US"):x[0],R=x[1];return{isNumber:!0,integer:N,decimal:R}}return a.format&&($=originDayjs($).format(a.format)),{isNumber:!1,value:$}});return onMounted(()=>{a.animation&&a.start&&g()}),watch(()=>a.start,$=>{$&&a.animation&&!u.value&&g()}),watch(d,$=>{var x;u.value&&((x=u.value)==null||x.stop(),u.value=null),c.value=$,a.animation&&a.start&&g()}),{prefixCls:l,showPlaceholder:f,formatValue:y}}}),_hoisted_1$u={key:0};function _sfc_render$z(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[a.title||a.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-value`),style:normalizeStyle$1(a.valueStyle)},[a.showPlaceholder?(openBlock(),createElementBlock("span",_hoisted_1$u,toDisplayString(a.placeholder),1)):(openBlock(),createElementBlock(Fragment,{key:1},[a.$slots.prefix?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-prefix`)},[renderSlot(a.$slots,"prefix")],2)):createCommentVNode("v-if",!0),a.formatValue.isNumber?(openBlock(),createElementBlock(Fragment,{key:1},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-value-integer`)},toDisplayString(a.formatValue.integer),3),a.formatValue.decimal?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-value-decimal`)}," ."+toDisplayString(a.formatValue.decimal),3)):createCommentVNode("v-if",!0)],64)):(openBlock(),createElementBlock(Fragment,{key:2},[createTextVNode(toDisplayString(a.formatValue.value),1)],2112)),a.$slots.suffix?(openBlock(),createElementBlock("span",{key:3,class:normalizeClass(`${a.prefixCls}-suffix`)},[renderSlot(a.$slots,"suffix")],2)):createCommentVNode("v-if",!0)],64))],6),a.extra||a.$slots.extra?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-extra`)},[renderSlot(a.$slots,"extra",{},()=>[createTextVNode(toDisplayString(a.extra),1)])],2)):createCommentVNode("v-if",!0)],2)],2)}var _Statistic=_export_sfc(_sfc_main$N,[["render",_sfc_render$z]]);const units=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function getDateString(a,s){let l=a;return units.reduce((o,[c,u])=>{if(o.indexOf(c)!==-1){const d=Math.floor(l/u);return l-=d*u,o.replace(new RegExp(`${c}+`,"g"),f=>{const g=f.length;return String(d).padStart(g,"0")})}return o},s)}const _sfc_main$M=defineComponent({name:"Countdown",props:{title:String,value:{type:Number,default:()=>Date.now()+3e5},now:{type:Number,default:()=>Date.now()},format:{type:String,default:"HH:mm:ss"},start:{type:Boolean,default:!0},valueStyle:{type:Object}},emits:{finish:()=>!0},setup(a,{emit:s}){const l=getPrefixCls("statistic"),{start:o,value:c,now:u,format:d}=toRefs(a),f=ref(getDateString(Math.max(originDayjs(a.value).diff(originDayjs(a.now),"millisecond"),0),a.format));watch([c,u,d],()=>{const x=getDateString(Math.max(originDayjs(a.value).diff(originDayjs(a.now),"millisecond"),0),a.format);x!==f.value&&(f.value=x)});const g=ref(0),y=()=>{g.value&&(window.clearInterval(g.value),g.value=0)},$=()=>{originDayjs(a.value).valueOf()<Date.now()||(g.value=window.setInterval(()=>{const x=originDayjs(a.value).diff(originDayjs(),"millisecond");x<=0&&(y(),s("finish")),f.value=getDateString(Math.max(x,0),a.format)},1e3/30))};return onMounted(()=>{a.start&&$()}),onBeforeUnmount(()=>{y()}),watch(o,x=>{x&&!g.value&&$()}),{prefixCls:l,displayValue:f}}});function _sfc_render$y(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass([`${a.prefixCls}`,`${a.prefixCls}-countdown`])},[a.title||a.$slots.title?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"title",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-value`),style:normalizeStyle$1(a.valueStyle)},toDisplayString(a.displayValue),7)],2)],2)}var Countdown=_export_sfc(_sfc_main$M,[["render",_sfc_render$y]]);const Statistic=Object.assign(_Statistic,{Countdown,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Statistic.name,_Statistic),a.component(l+Countdown.name,Countdown)}}),stepsInjectionKey=Symbol("ArcoSteps"),_sfc_main$L=defineComponent({name:"Steps",props:{type:{type:String,default:"default"},direction:{type:String,default:"horizontal"},labelPlacement:{type:String,default:"horizontal"},current:{type:Number,default:void 0},defaultCurrent:{type:Number,default:1},status:{type:String,default:"process"},lineLess:{type:Boolean,default:!1},small:{type:Boolean,default:!1},changeable:{type:Boolean,default:!1}},emits:{"update:current":a=>!0,change:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{type:o,lineLess:c}=toRefs(a),u=getPrefixCls("steps"),d=ref(a.defaultCurrent),f=computed(()=>{var ce;return(ce=a.current)!=null?ce:d.value}),g=computed(()=>["navigation","arrow"].includes(a.type)?"horizontal":a.direction),y=computed(()=>a.type==="dot"?g.value==="vertical"?"horizontal":"vertical":a.type==="navigation"?"horizontal":a.labelPlacement),$=ce=>ce<f.value?"finish":ce>f.value?"wait":a.status,x=(ce,fe)=>{a.changeable&&(d.value=ce,s("update:current",ce),s("change",ce,fe))},N=reactive(new Map),R=computed(()=>Array.from(N.values()).filter(ce=>ce.status==="error").map(ce=>ce.step)),j=(ce,fe)=>{N.set(ce,fe)},ne=ce=>{N.delete(ce)},se=computed(()=>[u,`${u}-${g.value}`,`${u}-label-${y.value}`,`${u}-mode-${o.value}`,{[`${u}-changeable`]:a.changeable,[`${u}-size-small`]:a.small&&a.type!=="dot",[`${u}-line-less`]:c.value}]);return provide(stepsInjectionKey,reactive({type:o,direction:g,labelPlacement:y,lineLess:c,current:f,errorSteps:R,getStatus:$,addItem:j,removeItem:ne,onClick:x,parentCls:u})),{cls:se}}});function _sfc_render$x(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[renderSlot(a.$slots,"default")],2)}var _Steps=_export_sfc(_sfc_main$L,[["render",_sfc_render$x]]);const _sfc_main$K=defineComponent({name:"Step",components:{IconCheck,IconClose},props:{title:String,description:String,status:{type:String},disabled:{type:Boolean,default:!1}},setup(a){const s=getPrefixCls("steps-item"),l=getCurrentInstance(),o=getPrefixCls("steps-icon"),c=inject(stepsInjectionKey,void 0),u=computed(()=>{var j;return(j=c?.type)!=null?j:"default"}),d=ref(),{computedIndex:f}=useIndex({itemRef:d,selector:`.${s}`,parentClassName:c?.parentCls}),g=computed(()=>f.value+1),y=computed(()=>{var j,ne;return(ne=(j=a.status)!=null?j:c?.getStatus(g.value))!=null?ne:"process"}),$=computed(()=>{var j;return(j=c?.errorSteps.includes(g.value+1))!=null?j:!1});l&&c?.addItem(l.uid,reactive({step:g,status:y})),onBeforeUnmount(()=>{l&&c?.removeItem(l.uid)});const x=computed(()=>!c?.lineLess&&(c?.labelPlacement==="vertical"||c?.direction==="vertical")),N=j=>{a.disabled||c?.onClick(g.value,j)},R=computed(()=>[s,`${s}-${y.value}`,{[`${s}-active`]:g.value===c?.current,[`${s}-next-error`]:$.value,[`${s}-disabled`]:a.disabled}]);return{prefixCls:s,iconCls:o,cls:R,itemRef:d,showTail:x,stepNumber:g,computedStatus:y,type:u,handleClick:N}}});function _sfc_render$w(a,s,l,o,c,u){const d=resolveComponent("icon-check"),f=resolveComponent("icon-close");return openBlock(),createElementBlock("div",{ref:"itemRef",class:normalizeClass(a.cls),onClick:s[0]||(s[0]=(...g)=>a.handleClick&&a.handleClick(...g))},[a.showTail?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-tail`)},null,2)):createCommentVNode("v-if",!0),a.type!=="arrow"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-node`)},[renderSlot(a.$slots,"node",{step:a.stepNumber,status:a.computedStatus},()=>[a.type!=="dot"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.iconCls)},[renderSlot(a.$slots,"icon",{step:a.stepNumber,status:a.computedStatus},()=>[a.computedStatus==="finish"?(openBlock(),createBlock(d,{key:0})):a.computedStatus==="error"?(openBlock(),createBlock(f,{key:1})):(openBlock(),createElementBlock(Fragment,{key:2},[createTextVNode(toDisplayString(a.stepNumber),1)],2112))])],2)):createCommentVNode("v-if",!0)])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content`)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"default",{},()=>[createTextVNode(toDisplayString(a.title),1)])],2),a.description||a.$slots.description?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-description`)},[renderSlot(a.$slots,"description",{},()=>[createTextVNode(toDisplayString(a.description),1)])],2)):createCommentVNode("v-if",!0)],2)],2)}var Step=_export_sfc(_sfc_main$K,[["render",_sfc_render$w]]);const Steps=Object.assign(_Steps,{Step,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Steps.name,_Steps),a.component(l+Step.name,Step)}}),_sfc_main$J=defineComponent({name:"Switch",components:{IconLoading},props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultChecked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},type:{type:String,default:"circle"},size:{type:String},checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},beforeChange:{type:Function},checkedText:{type:String},uncheckedText:{type:String}},emits:{"update:modelValue":a=>!0,change:(a,s)=>!0,focus:a=>!0,blur:a=>!0},setup(a,{emit:s}){const{disabled:l,size:o,modelValue:c}=toRefs(a),u=getPrefixCls("switch"),{mergedSize:d}=useSize$1(o),{mergedDisabled:f,mergedSize:g,eventHandlers:y}=useFormItem({disabled:l,size:d}),$=ref(a.defaultChecked?a.checkedValue:a.uncheckedValue),x=computed(()=>{var ta;return((ta=a.modelValue)!=null?ta:$.value)===a.checkedValue}),N=ref(!1),R=computed(()=>N.value||a.loading),j=(ta,na)=>{var aa,ia;$.value=ta?a.checkedValue:a.uncheckedValue,s("update:modelValue",$.value),s("change",$.value,na),(ia=(aa=y.value)==null?void 0:aa.onChange)==null||ia.call(aa,na)},ne=async ta=>{if(R.value||f.value)return;const na=!x.value,aa=na?a.checkedValue:a.uncheckedValue,ia=a.beforeChange;if(isFunction$1(ia)){N.value=!0;try{const sa=await ia(aa);(sa??!0)&&j(na,ta)}finally{N.value=!1}}else j(na,ta)},se=ta=>{var na,aa;s("focus",ta),(aa=(na=y.value)==null?void 0:na.onFocus)==null||aa.call(na,ta)},ce=ta=>{var na,aa;s("blur",ta),(aa=(na=y.value)==null?void 0:na.onBlur)==null||aa.call(na,ta)};watch(c,ta=>{(isUndefined(ta)||isNull(ta))&&($.value=a.uncheckedValue)});const fe=computed(()=>[u,`${u}-type-${a.type}`,{[`${u}-small`]:g.value==="small"||g.value==="mini",[`${u}-checked`]:x.value,[`${u}-disabled`]:f.value,[`${u}-loading`]:R.value,[`${u}-custom-color`]:a.type==="line"&&(a.checkedColor||a.uncheckedColor)}]),ea=computed(()=>{if(x.value&&a.checkedColor)return a.type==="line"?{"--custom-color":a.checkedColor}:{backgroundColor:a.checkedColor};if(!x.value&&a.uncheckedColor)return a.type==="line"?{"--custom-color":a.uncheckedColor}:{backgroundColor:a.uncheckedColor}});return{prefixCls:u,cls:fe,mergedDisabled:f,buttonStyle:ea,computedCheck:x,computedLoading:R,handleClick:ne,handleFocus:se,handleBlur:ce}}}),_hoisted_1$t=["aria-checked","disabled"];function _sfc_render$v(a,s,l,o,c,u){const d=resolveComponent("icon-loading");return openBlock(),createElementBlock("button",{type:"button",role:"switch","aria-checked":a.computedCheck,class:normalizeClass(a.cls),style:normalizeStyle$1(a.buttonStyle),disabled:a.mergedDisabled,onClick:s[0]||(s[0]=(...f)=>a.handleClick&&a.handleClick(...f)),onFocus:s[1]||(s[1]=(...f)=>a.handleFocus&&a.handleFocus(...f)),onBlur:s[2]||(s[2]=(...f)=>a.handleBlur&&a.handleBlur(...f))},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-handle`)},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-handle-icon`)},[a.computedLoading?(openBlock(),createBlock(d,{key:0})):(openBlock(),createElementBlock(Fragment,{key:1},[a.computedCheck?renderSlot(a.$slots,"checked-icon",{key:0}):renderSlot(a.$slots,"unchecked-icon",{key:1})],2112))],2)],2),createCommentVNode("  prettier-ignore  "),a.type!=="line"&&a.size!=="small"&&(a.$slots.checked||a.checkedText||a.$slots.unchecked||a.uncheckedText)?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-text-holder`)},[a.computedCheck?renderSlot(a.$slots,"checked",{key:0},()=>[createTextVNode(toDisplayString(a.checkedText),1)]):renderSlot(a.$slots,"unchecked",{key:1},()=>[createTextVNode(toDisplayString(a.uncheckedText),1)])],2),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-text`)},[a.computedCheck?renderSlot(a.$slots,"checked",{key:0},()=>[createTextVNode(toDisplayString(a.checkedText),1)]):renderSlot(a.$slots,"unchecked",{key:1},()=>[createTextVNode(toDisplayString(a.uncheckedText),1)])],2)],64)):createCommentVNode("v-if",!0)],46,_hoisted_1$t)}var _Switch=_export_sfc(_sfc_main$J,[["render",_sfc_render$v]]);const Switch=Object.assign(_Switch,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Switch.name,_Switch)}});var __defProp$g=Object.defineProperty,__defProps$a=Object.defineProperties,__getOwnPropDescs$a=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$h=Object.getOwnPropertySymbols,__hasOwnProp$h=Object.prototype.hasOwnProperty,__propIsEnum$h=Object.prototype.propertyIsEnumerable,__defNormalProp$g=(a,s,l)=>s in a?__defProp$g(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$g=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$h.call(s,l)&&__defNormalProp$g(a,l,s[l]);if(__getOwnPropSymbols$h)for(var l of __getOwnPropSymbols$h(s))__propIsEnum$h.call(s,l)&&__defNormalProp$g(a,l,s[l]);return a},__spreadProps$a=(a,s)=>__defProps$a(a,__getOwnPropDescs$a(s));const getDataColumnsNumber=a=>{let s=0;const l=o=>{if(isArray$1(o)&&o.length>0)for(const c of o)c.children?l(c.children):s+=1};return l(a),s},getTotalHeaderRows=a=>{let s=0;if(isArray$1(a)&&a.length>0){s=1;for(const l of a)if(l.children){const o=getTotalHeaderRows(l.children);o>0&&(s=Math.max(s,o+1))}}return s},setParentFixed=(a,s)=>{let{parent:l}=a;for(;l;)l.fixed===s&&(s==="left"?l.isLastLeftFixed=!0:l.isFirstRightFixed=!0),l=l.parent},getGroupColumns=(a,s,l)=>{const o=getTotalHeaderRows(a);s.clear();const c=[],u=[...Array(o)].map(()=>[]);let d,f;const g=(y,{level:$=0,parent:x,fixed:N}={})=>{var R;for(const j of y){const ne=__spreadProps$a(__spreadValues$g({},j),{parent:x});if(isArray$1(ne.children)){const se=getDataColumnsNumber(ne.children);se>1&&(ne.colSpan=se),u[$].push(ne),g(ne.children,{level:$+1,parent:ne,fixed:ne.fixed})}else{const se=o-$;se>1&&(ne.rowSpan=se),(N||ne.fixed)&&(ne.fixed=(R=ne.fixed)!=null?R:N,ne.fixed==="left"?d=c.length:isUndefined(f)&&(f=c.length)),(isUndefined(ne.dataIndex)||isNull(ne.dataIndex))&&(ne.dataIndex=`__arco_data_index_${c.length}`),l[ne.dataIndex]&&(ne._resizeWidth=l[ne.dataIndex]),s.set(ne.dataIndex,ne),c.push(ne),u[$].push(ne)}}};return g(a),isUndefined(d)||(c[d].isLastLeftFixed=!0,setParentFixed(c[d],"left")),isUndefined(f)||(c[f].isFirstRightFixed=!0,setParentFixed(c[f],"right")),{dataColumns:c,groupColumns:u}},getOperationColumnIndex=(a,s)=>{for(let l=0;l<a.length;l++)if(a[l].name===s)return l;return-1},getOperationFixedNumber=(a,s)=>{var l;const o=getOperationColumnIndex(s,a.name);if(o<=0)return 0;let c=0;const u=s.slice(0,o);for(const d of u)c+=(l=d.width)!=null?l:0;return c},getFirstDataColumn=a=>a.children&&a.children.length>0?getFirstDataColumn(a.children[0]):a,getLastDataColumn=a=>a.children&&a.children.length>0?getFirstDataColumn(a.children[a.children.length-1]):a,getFixedNumber=(a,{dataColumns:s,operations:l})=>{var o,c,u;let d=0;if(a.fixed==="left"){for(const y of l)d+=(o=y.width)!=null?o:40;const g=getFirstDataColumn(a);for(const y of s){if(g.dataIndex===y.dataIndex)break;d+=(u=(c=y._resizeWidth)!=null?c:y.width)!=null?u:0}return d}const f=getLastDataColumn(a);for(let g=s.length-1;g>0;g--){const y=s[g];if(f.dataIndex===y.dataIndex)break;y.fixed==="right"&&(d+=y.width)}return d},getOperationFixedCls=(a,s)=>s.fixed?[`${a}-col-fixed-left`,{[`${a}-col-fixed-left-last`]:s.isLastLeftFixed}]:[],getFixedCls=(a,s)=>s.fixed==="left"?[`${a}-col-fixed-left`,{[`${a}-col-fixed-left-last`]:s.isLastLeftFixed}]:s.fixed==="right"?[`${a}-col-fixed-right`,{[`${a}-col-fixed-right-first`]:s.isFirstRightFixed}]:[],getStyle=(a,{dataColumns:s,operations:l})=>{if(a.fixed){const o=`${getFixedNumber(a,{dataColumns:s,operations:l})}px`;return a.fixed==="left"?{left:o}:{right:o}}return{}},getOperationStyle=(a,s)=>a.fixed?{left:`${getOperationFixedNumber(a,s)}px`}:{};function mapArrayWithChildren(a){return a.map(s=>{const l=__spreadValues$g({},s);return l.children&&(l.children=mapArrayWithChildren(l.children)),l})}function mapRawTableData(a){return a.map(s=>{const l=s.raw;return s.children&&l.children&&(l.children=mapRawTableData(s.children)),s.raw})}const getLeafKeys=a=>{const s=[];if(a.children)for(const l of a.children)l.isLeaf?s.push(l.key):s.push(...getLeafKeys(l));return s},getSelectionStatus=(a,s)=>{let l=!1,o=!1;const c=s.filter(u=>a.includes(u));return c.length>0&&(c.length>=s.length?l=!0:o=!0),{checked:l,indeterminate:o}},union=(a,s,l=!1)=>l?a.filter(o=>!s.includes(o)):Array.from(new Set(a.concat(s))),getReverse=a=>{const s=[];for(let l=0;l<a.length;l++)s[l]=a[a.length-1-l];return s},useRowSelection=({selectedKeys:a,defaultSelectedKeys:s,rowSelection:l,currentAllRowKeys:o,currentAllEnabledRowKeys:c,emit:u})=>{var d,f,g;const y=computed(()=>{var ea;return((ea=l.value)==null?void 0:ea.type)==="radio"}),$=ref((g=(f=s.value)!=null?f:(d=l.value)==null?void 0:d.defaultSelectedRowKeys)!=null?g:[]),x=computed(()=>{var ea,ta,na;return(na=(ta=a.value)!=null?ta:(ea=l.value)==null?void 0:ea.selectedRowKeys)!=null?na:$.value}),N=computed(()=>x.value.filter(ea=>o.value.includes(ea)));return{isRadio:y,selectedRowKeys:x,currentSelectedRowKeys:N,handleSelectAll:ea=>{const ta=union(x.value,c.value,!ea);$.value=ta,u("selectAll",ea),u("selectionChange",ta),u("update:selectedKeys",ta)},handleSelect:(ea,ta)=>{const na=y.value?[ta.key]:union(x.value,[ta.key],!ea);$.value=na,u("select",na,ta.key,ta.raw),u("selectionChange",na),u("update:selectedKeys",na)},handleSelectAllLeafs:(ea,ta)=>{const na=union(x.value,getLeafKeys(ea),!ta);$.value=na,u("select",na,ea.key,ea.raw),u("selectionChange",na),u("update:selectedKeys",na)},select:(ea,ta=!0)=>{const na=[].concat(ea),aa=y.value?na:union(x.value,na,!ta);$.value=aa,u("selectionChange",aa),u("update:selectedKeys",aa)},selectAll:(ea=!0)=>{const ta=union(x.value,c.value,!ea);$.value=ta,u("selectionChange",ta),u("update:selectedKeys",ta)},clearSelected:()=>{$.value=[],u("selectionChange",[]),u("update:selectedKeys",[])}}},useExpand=({expandedKeys:a,defaultExpandedKeys:s,defaultExpandAllRows:l,expandable:o,allRowKeys:c,emit:u})=>{const f=ref((()=>{var N,R;return s.value?s.value:(N=o.value)!=null&&N.defaultExpandedRowKeys?o.value.defaultExpandedRowKeys:l.value||(R=o.value)!=null&&R.defaultExpandAllRows?[...c.value]:[]})()),g=computed(()=>{var N,R,j;return(j=(R=a.value)!=null?R:(N=o.value)==null?void 0:N.expandedRowKeys)!=null?j:f.value});return{expandedRowKeys:g,handleExpand:(N,R)=>{const ne=g.value.includes(N)?g.value.filter(se=>N!==se):g.value.concat(N);f.value=ne,u("expand",N,R),u("expandedChange",ne),u("update:expandedKeys",ne)},expand:(N,R=!0)=>{const j=[].concat(N),ne=R?g.value.concat(j):g.value.filter(se=>!j.includes(se));f.value=ne,u("expandedChange",ne),u("update:expandedKeys",ne)},expandAll:(N=!0)=>{const R=N?[...c.value]:[];f.value=R,u("expandedChange",R),u("update:expandedKeys",R)}}},usePagination=(a,s)=>{var l,o;const c=ref(isObject$1(a.pagination)&&(l=a.pagination.defaultCurrent)!=null?l:1),u=ref(isObject$1(a.pagination)&&(o=a.pagination.defaultPageSize)!=null?o:10),d=computed(()=>{var $;return isObject$1(a.pagination)&&($=a.pagination.pageSize)!=null?$:u.value});return{page:computed(()=>{var $;return isObject$1(a.pagination)&&($=a.pagination.current)!=null?$:c.value}),pageSize:d,handlePageChange:$=>{c.value=$,s("pageChange",$)},handlePageSizeChange:$=>{u.value=$,s("pageSizeChange",$)}}},_sfc_main$I=defineComponent({name:"ColGroup",props:{dataColumns:{type:Array,required:!0},operations:{type:Array,required:!0},columnWidth:{type:Object}},setup(){return{fixedWidth:(s,l)=>{if(s){const o=Math.max(s,l||0);return{width:`${s}px`,minWidth:`${o}px`,maxWidth:`${s}px`}}if(l)return{minWidth:`${l}px`}}}}});function _sfc_render$u(a,s,l,o,c,u){return openBlock(),createElementBlock("colgroup",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.operations,d=>(openBlock(),createElementBlock("col",{key:`arco-col-${d.name}`,class:normalizeClass(`arco-table-${d.name}-col`),style:normalizeStyle$1(a.fixedWidth(d.width))},null,6))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.dataColumns,d=>(openBlock(),createElementBlock("col",{key:`arco-col-${d.dataIndex}`,style:normalizeStyle$1(a.fixedWidth(a.columnWidth&&d.dataIndex&&a.columnWidth[d.dataIndex]||d.width,d.minWidth))},null,4))),128))])}var ColGroup=_export_sfc(_sfc_main$I,[["render",_sfc_render$u]]),Thead=defineComponent({name:"Thead",setup(a,{slots:s}){return()=>{var l,o;return createVNode$1((o=(l=s.thead)==null?void 0:l.call(s)[0])!=null?o:"thead",null,{default:s.default})}}}),Tbody=defineComponent({name:"Tbody",setup(a,{slots:s}){return()=>{var l,o;return createVNode$1((o=(l=s.tbody)==null?void 0:l.call(s)[0])!=null?o:"tbody",null,{default:s.default})}}}),Tr=defineComponent({name:"Tr",props:{expand:{type:Boolean},empty:{type:Boolean},checked:{type:Boolean},rowIndex:Number,record:{type:Object,default:()=>({})}},setup(a,{slots:s}){const l=getPrefixCls("table"),o=computed(()=>[`${l}-tr`,{[`${l}-tr-expand`]:a.expand,[`${l}-tr-empty`]:a.empty,[`${l}-tr-checked`]:a.checked}]);return()=>{var c,u,d;return createVNode$1((d=(u=s.tr)==null?void 0:u.call(s,{rowIndex:a.rowIndex,record:(c=a.record)==null?void 0:c.raw})[0])!=null?d:"tr",{class:o.value},{default:s.default})}}});const _sfc_main$H=defineComponent({name:"IconCaretDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-caret-down`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$s=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$m=createBaseVNode("path",{d:"M24.938 34.829a1.2 1.2 0 0 1-1.875 0L9.56 17.949c-.628-.785-.069-1.949.937-1.949h27.007c1.006 0 1.565 1.164.937 1.95L24.937 34.829Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$j=[_hoisted_2$m];function _sfc_render$t(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$j,14,_hoisted_1$s)}var _IconCaretDown=_export_sfc(_sfc_main$H,[["render",_sfc_render$t]]);const IconCaretDown=Object.assign(_IconCaretDown,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCaretDown.name,_IconCaretDown)}}),_sfc_main$G=defineComponent({name:"IconCaretUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-caret-up`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$r=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$l=createBaseVNode("path",{d:"M23.063 13.171a1.2 1.2 0 0 1 1.875 0l13.503 16.88c.628.785.069 1.949-.937 1.949H10.497c-1.006 0-1.565-1.164-.937-1.95l13.503-16.879Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$i=[_hoisted_2$l];function _sfc_render$s(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$i,14,_hoisted_1$r)}var _IconCaretUp=_export_sfc(_sfc_main$G,[["render",_sfc_render$s]]);const IconCaretUp=Object.assign(_IconCaretUp,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCaretUp.name,_IconCaretUp)}}),_sfc_main$F=defineComponent({name:"IconFilter",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-filter`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$q=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$k=createBaseVNode("path",{d:"M30 42V22.549a1 1 0 0 1 .463-.844l10.074-6.41A1 1 0 0 0 41 14.45V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v6.451a1 1 0 0 0 .463.844l10.074 6.41a1 1 0 0 1 .463.844V37"},null,-1),_hoisted_3$h=[_hoisted_2$k];function _sfc_render$r(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$h,14,_hoisted_1$q)}var _IconFilter=_export_sfc(_sfc_main$F,[["render",_sfc_render$r]]);const IconFilter=Object.assign(_IconFilter,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFilter.name,_IconFilter)}}),useColumnSorter=({column:a,tableCtx:s})=>{const l=computed(()=>{var y;if(a.value.dataIndex&&a.value.dataIndex===((y=s.sorter)==null?void 0:y.field))return s.sorter.direction}),o=computed(()=>{var y,$,x;return(x=($=(y=a.value)==null?void 0:y.sortable)==null?void 0:$.sortDirections)!=null?x:[]}),c=computed(()=>o.value.length>0),u=computed(()=>o.value.includes("ascend")),d=computed(()=>o.value.includes("descend")),f=computed(()=>{var y,$;return l.value?l.value===o.value[0]&&($=o.value[1])!=null?$:"":(y=o.value[0])!=null?y:""});return{sortOrder:l,hasSorter:c,hasAscendBtn:u,hasDescendBtn:d,nextSortOrder:f,handleClickSorter:y=>{var $;a.value.dataIndex&&(($=s.onSorterChange)==null||$.call(s,a.value.dataIndex,f.value,y))}}},useColumnFilter=({column:a,tableCtx:s})=>{const l=computed(()=>{var R;return a.value.dataIndex&&((R=s.filters)!=null&&R[a.value.dataIndex])?s.filters[a.value.dataIndex]:[]}),o=ref(!1),c=computed(()=>l.value.length>0),u=computed(()=>{var R;return!!((R=a.value.filterable)!=null&&R.multiple)}),d=ref(l.value);watch(l,R=>{isArray$1(R)&&String(R)!==String(d.value)&&(d.value=R)});const f=R=>{o.value=R},g=R=>{d.value=R};return{filterPopupVisible:o,isFilterActive:c,isMultipleFilter:u,columnFilterValue:d,handleFilterPopupVisibleChange:f,setFilterValue:g,handleCheckboxFilterChange:R=>{g(R)},handleRadioFilterChange:R=>{g([R])},handleFilterConfirm:R=>{var j;a.value.dataIndex&&((j=s.onFilterChange)==null||j.call(s,a.value.dataIndex,d.value,R)),f(!1)},handleFilterReset:R=>{var j;g([]),a.value.dataIndex&&((j=s.onFilterChange)==null||j.call(s,a.value.dataIndex,d.value,R)),f(!1)}}},tableInjectionKey=Symbol("ArcoTable"),tableColumnInjectionKey=Symbol("ArcoTableColumn");function _isSlot$6(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var AutoTooltip=defineComponent({name:"AutoTooltip",inheritAttrs:!1,props:{tooltipProps:{type:Object}},setup(a,{attrs:s,slots:l}){const o=getPrefixCls("auto-tooltip"),c=ref(),u=ref(),d=ref(""),f=ref(!1),g=()=>{if(c.value&&u.value){const N=u.value.offsetWidth>c.value.offsetWidth;N!==f.value&&(f.value=N)}},y=()=>{var N;(N=u.value)!=null&&N.textContent&&u.value.textContent!==d.value&&(d.value=u.value.textContent)},$=()=>{y(),g()};onMounted(()=>{y(),g()}),onUpdated(()=>{y(),g()});const x=()=>createVNode$1("span",mergeProps({ref:c,class:o},s),[createVNode$1(ResizeObserver$1,{onResize:$},{default:()=>{var N;return[createVNode$1("span",{ref:u,class:`${o}-content`},[(N=l.default)==null?void 0:N.call(l)])]}})]);return()=>{let N;if(f.value){let R;return createVNode$1(Tooltip,mergeProps({content:d.value,onResize:$},a.tooltipProps),_isSlot$6(R=x())?R:{default:()=>[R]})}return createVNode$1(ResizeObserver$1,{onResize:$},_isSlot$6(N=x())?N:{default:()=>[N]})}}}),__defProp$f=Object.defineProperty,__getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__defNormalProp$f=(a,s,l)=>s in a?__defProp$f(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$f=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$g.call(s,l)&&__defNormalProp$f(a,l,s[l]);if(__getOwnPropSymbols$g)for(var l of __getOwnPropSymbols$g(s))__propIsEnum$g.call(s,l)&&__defNormalProp$f(a,l,s[l]);return a};function _isSlot$5(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var Th=defineComponent({name:"Th",props:{column:{type:Object,default:()=>({})},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},resizable:Boolean},setup(a,{slots:s}){const{column:l}=toRefs(a),o=getPrefixCls("table"),{t:c}=useI18n(),u=inject(tableInjectionKey,{}),d=computed(()=>{var ga;return((ga=a.column)==null?void 0:ga.dataIndex)&&u.resizingColumn===a.column.dataIndex}),f=computed(()=>{var ga;if(isObject$1((ga=a.column)==null?void 0:ga.tooltip))return a.column.tooltip}),g=computed(()=>{var ga;return(ga=a.column)!=null&&ga.filterable&&isBoolean$1(a.column.filterable.alignLeft)?a.column.filterable.alignLeft:u.filterIconAlignLeft}),{sortOrder:y,hasSorter:$,hasAscendBtn:x,hasDescendBtn:N,nextSortOrder:R,handleClickSorter:j}=useColumnSorter({column:l,tableCtx:u}),{filterPopupVisible:ne,isFilterActive:se,isMultipleFilter:ce,columnFilterValue:fe,handleFilterPopupVisibleChange:ea,setFilterValue:ta,handleCheckboxFilterChange:na,handleRadioFilterChange:aa,handleFilterConfirm:ia,handleFilterReset:sa}=useColumnFilter({column:l,tableCtx:u}),ra=()=>{var ga,fa,ma,va,ka;let ya,ba;const{filterable:Ea}=a.column;return(ga=a.column.slots)!=null&&ga["filter-content"]?(fa=a.column.slots)==null?void 0:fa["filter-content"]({filterValue:fe.value,setFilterValue:ta,handleFilterConfirm:ia,handleFilterReset:sa}):Ea?.slotName?(va=(ma=u?.slots)==null?void 0:ma[Ea?.slotName])==null?void 0:va.call(ma,{filterValue:fe.value,setFilterValue:ta,handleFilterConfirm:ia,handleFilterReset:sa}):Ea?.renderContent?Ea.renderContent({filterValue:fe.value,setFilterValue:ta,handleFilterConfirm:ia,handleFilterReset:sa}):createVNode$1("div",{class:`${o}-filters-content`},[createVNode$1("ul",{class:`${o}-filters-list`},[(ka=Ea?.filters)==null?void 0:ka.map((Ca,$a)=>{var Pa;return createVNode$1("li",{class:`${o}-filters-item`,key:$a},[ce.value?createVNode$1(Checkbox,{value:Ca.value,modelValue:fe.value,uninjectGroupContext:!0,onChange:na},{default:()=>[Ca.text]}):createVNode$1(Radio,{value:Ca.value,modelValue:(Pa=fe.value[0])!=null?Pa:"",uninjectGroupContext:!0,onChange:aa},{default:()=>[Ca.text]})])})]),createVNode$1("div",{class:`${o}-filters-bottom`},[createVNode$1(Button,{size:"mini",onClick:sa},_isSlot$5(ya=c("table.resetText"))?ya:{default:()=>[ya]}),createVNode$1(Button,{type:"primary",size:"mini",onClick:ia},_isSlot$5(ba=c("table.okText"))?ba:{default:()=>[ba]})])])},la=()=>{const{filterable:ga}=a.column;return ga?createVNode$1(Trigger,mergeProps({popupVisible:ne.value,trigger:"click",autoFitPosition:!0,popupOffset:g.value?4:0,onPopupVisibleChange:ea},ga.triggerProps),{default:()=>[createVNode$1(IconHover,{class:[`${o}-filters`,{[`${o}-filters-active`]:se.value,[`${o}-filters-open`]:ne.value,[`${o}-filters-align-left`]:g.value}],disabled:!g.value,onClick:fa=>fa.stopPropagation()},{default:()=>{var fa,ma,va,ka,ya;return[(ya=(ka=(ma=(fa=a.column.slots)==null?void 0:fa["filter-icon"])==null?void 0:ma.call(fa))!=null?ka:(va=ga.icon)==null?void 0:va.call(ga))!=null?ya:createVNode$1(IconFilter,null,null)]}})],content:ra}):null},oa=computed(()=>{var ga,fa;const ma=[`${o}-cell`,`${o}-cell-align-${(fa=(ga=a.column)==null?void 0:ga.align)!=null?fa:a.column.children?"center":"left"}`];return $.value&&ma.push(`${o}-cell-with-sorter`,{[`${o}-cell-next-ascend`]:R.value==="ascend",[`${o}-cell-next-descend`]:R.value==="descend"}),g.value&&ma.push(`${o}-cell-with-filter`),ma}),ca=()=>{var ga,fa,ma,va,ka,ya;return s.default?s.default():(ga=a.column)!=null&&ga.titleSlotName&&((fa=u.slots)!=null&&fa[a.column.titleSlotName])?(va=(ma=u.slots)[a.column.titleSlotName])==null?void 0:va.call(ma,{column:a.column}):(ya=(ka=a.column)==null?void 0:ka.slots)!=null&&ya.title?a.column.slots.title():isFunction$1(a.column.title)?a.column.title():a.column.title},pa=()=>{var ga,fa,ma;let va;return createVNode$1("span",{class:oa.value,onClick:$.value?j:void 0},[(ga=a.column)!=null&&ga.ellipsis&&((fa=a.column)!=null&&fa.tooltip)?createVNode$1(AutoTooltip,{class:`${o}-th-title`,tooltipProps:f.value},_isSlot$5(va=ca())?va:{default:()=>[va]}):createVNode$1("span",{class:[`${o}-th-title`,{[`${o}-text-ellipsis`]:(ma=a.column)==null?void 0:ma.ellipsis}]},[ca()]),$.value&&createVNode$1("span",{class:`${o}-sorter`},[x.value&&createVNode$1("div",{class:[`${o}-sorter-icon`,{[`${o}-sorter-icon-active`]:y.value==="ascend"}]},[createVNode$1(IconCaretUp,null,null)]),N.value&&createVNode$1("div",{class:[`${o}-sorter-icon`,{[`${o}-sorter-icon-active`]:y.value==="descend"}]},[createVNode$1(IconCaretDown,null,null)])]),g.value&&la()])},ua=computed(()=>{var ga,fa;return __spreadValues$f(__spreadValues$f(__spreadValues$f({},getStyle(a.column,{dataColumns:a.dataColumns,operations:a.operations})),(ga=a.column)==null?void 0:ga.cellStyle),(fa=a.column)==null?void 0:fa.headerCellStyle)}),da=computed(()=>{var ga,fa;return[`${o}-th`,{[`${o}-col-sorted`]:!!y.value,[`${o}-th-resizing`]:d.value},...getFixedCls(o,a.column),(ga=a.column)==null?void 0:ga.cellClass,(fa=a.column)==null?void 0:fa.headerCellClass]}),ha=ga=>{var fa,ma,va;(fa=a.column)!=null&&fa.dataIndex&&((va=u.onThMouseDown)==null||va.call(u,(ma=a.column)==null?void 0:ma.dataIndex,ga))};return()=>{var ga,fa,ma,va;const ka=(ga=a.column.colSpan)!=null?ga:1,ya=(fa=a.column.rowSpan)!=null?fa:1;return createVNode$1((va=(ma=s.th)==null?void 0:ma.call(s,{column:a.column})[0])!=null?va:"th",{class:da.value,style:ua.value,colspan:ka>1?ka:void 0,rowspan:ya>1?ya:void 0},{default:()=>[pa(),!g.value&&la(),a.resizable&&createVNode$1("span",{class:`${o}-column-handle`,onMousedown:ha},null)]})}}}),__defProp$e=Object.defineProperty,__getOwnPropSymbols$f=Object.getOwnPropertySymbols,__hasOwnProp$f=Object.prototype.hasOwnProperty,__propIsEnum$f=Object.prototype.propertyIsEnumerable,__defNormalProp$e=(a,s,l)=>s in a?__defProp$e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$e=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$f.call(s,l)&&__defNormalProp$e(a,l,s[l]);if(__getOwnPropSymbols$f)for(var l of __getOwnPropSymbols$f(s))__propIsEnum$f.call(s,l)&&__defNormalProp$e(a,l,s[l]);return a};function _isSlot$4(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var Td=defineComponent({name:"Td",props:{rowIndex:Number,record:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})},type:{type:String,default:"normal"},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},isFixedExpand:{type:Boolean,default:!1},containerWidth:{type:Number},showExpandBtn:{type:Boolean,default:!1},indentSize:{type:Number,default:0},renderExpandBtn:{type:Function},summary:{type:Boolean,default:!1}},setup(a,{slots:s}){const l=getPrefixCls("table"),o=computed(()=>{var se;if(isObject$1((se=a.column)==null?void 0:se.tooltip))return a.column.tooltip}),c=computed(()=>{var se,ce;return((se=a.column)==null?void 0:se.dataIndex)&&((ce=x.sorter)==null?void 0:ce.field)===a.column.dataIndex}),u=computed(()=>{var se;return((se=a.column)==null?void 0:se.dataIndex)&&x.resizingColumn===a.column.dataIndex}),d=()=>{var se,ce,fe,ea,ta,na;return a.summary?isFunction$1((se=a.column)==null?void 0:se.summaryCellClass)?a.column.summaryCellClass((ce=a.record)==null?void 0:ce.raw):(fe=a.column)==null?void 0:fe.summaryCellClass:isFunction$1((ea=a.column)==null?void 0:ea.bodyCellClass)?a.column.bodyCellClass((ta=a.record)==null?void 0:ta.raw):(na=a.column)==null?void 0:na.bodyCellClass},f=computed(()=>{var se;return[`${l}-td`,{[`${l}-col-sorted`]:c.value,[`${l}-td-resizing`]:u.value},...getFixedCls(l,a.column),(se=a.column)==null?void 0:se.cellClass,d()]}),g=()=>{var se,ce,fe,ea,ta,na;return a.summary?isFunction$1((se=a.column)==null?void 0:se.summaryCellStyle)?a.column.summaryCellStyle((ce=a.record)==null?void 0:ce.raw):(fe=a.column)==null?void 0:fe.summaryCellStyle:isFunction$1((ea=a.column)==null?void 0:ea.bodyCellStyle)?a.column.bodyCellStyle((ta=a.record)==null?void 0:ta.raw):(na=a.column)==null?void 0:na.bodyCellStyle},y=computed(()=>{var se;const ce=getStyle(a.column,{dataColumns:a.dataColumns,operations:a.operations}),fe=g();return __spreadValues$e(__spreadValues$e(__spreadValues$e({},ce),(se=a.column)==null?void 0:se.cellStyle),fe)}),$=computed(()=>{if(a.isFixedExpand&&a.containerWidth)return{width:`${a.containerWidth}px`}}),x=inject(tableInjectionKey,{}),N=()=>{var se,ce,fe,ea,ta,na,aa,ia;if(s.default)return s.default();const sa={record:(se=a.record)==null?void 0:se.raw,column:a.column,rowIndex:(ce=a.rowIndex)!=null?ce:-1};return s.cell?s.cell(sa):(fe=a.column.slots)!=null&&fe.cell?a.column.slots.cell(sa):a.column.render?a.column.render(sa):a.column.slotName&&((ea=x.slots)!=null&&ea[a.column.slotName])?(na=(ta=x.slots)[a.column.slotName])==null?void 0:na.call(ta,sa):String((ia=getValueByPath((aa=a.record)==null?void 0:aa.raw,a.column.dataIndex))!=null?ia:"")},R=ref(!1),j=se=>{var ce,fe;isFunction$1(x.loadMore)&&!((ce=a.record)!=null&&ce.isLeaf)&&!((fe=a.record)!=null&&fe.children)&&(R.value=!0,new Promise(ea=>{var ta;(ta=x.loadMore)==null||ta.call(x,a.record.raw,ea)}).then(ea=>{var ta;(ta=x.addLazyLoadData)==null||ta.call(x,ea,a.record),R.value=!1})),se.stopPropagation()},ne=()=>{var se,ce,fe,ea,ta,na;let aa;return createVNode$1("span",{class:[`${l}-cell`,`${l}-cell-align-${(ce=(se=a.column)==null?void 0:se.align)!=null?ce:"left"}`,{[`${l}-cell-fixed-expand`]:a.isFixedExpand,[`${l}-cell-expand-icon`]:a.showExpandBtn}],style:$.value},[a.indentSize>0&&createVNode$1("span",{style:{paddingLeft:`${a.indentSize}px`}},null),a.showExpandBtn&&createVNode$1("span",{class:`${l}-cell-inline-icon`,onClick:j},[R.value?createVNode$1(IconLoading,null,null):(fe=a.renderExpandBtn)==null?void 0:fe.call(a,a.record,!1)]),(ea=a.column)!=null&&ea.ellipsis&&((ta=a.column)!=null&&ta.tooltip)?createVNode$1(AutoTooltip,{class:`${l}-td-content`,tooltipProps:o.value},_isSlot$4(aa=N())?aa:{default:()=>[aa]}):createVNode$1("span",{class:[`${l}-td-content`,{[`${l}-text-ellipsis`]:(na=a.column)==null?void 0:na.ellipsis}]},[N()])])};return()=>{var se,ce,fe,ea;return createVNode$1((ea=(fe=s.td)==null?void 0:fe.call(s,{record:(se=a.record)==null?void 0:se.raw,column:a.column,rowIndex:(ce=a.rowIndex)!=null?ce:-1})[0])!=null?ea:"td",{class:f.value,style:y.value,rowspan:a.rowSpan>1?a.rowSpan:void 0,colspan:a.colSpan>1?a.colSpan:void 0},{default:()=>[ne()]})}}}),OperationTh=defineComponent({name:"OperationTh",props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},rowSpan:{type:Number,default:1},selectAll:{type:Boolean,default:!1}},setup(a){const s=getPrefixCls("table"),l=inject(tableInjectionKey,{}),o=computed(()=>{var f,g,y,$;let x=!1,N=!1;const j=((g=(f=l.currentSelectedRowKeys)==null?void 0:f.filter(se=>{var ce,fe;return(fe=(ce=l.currentAllEnabledRowKeys)==null?void 0:ce.includes(se))!=null?fe:!0}))!=null?g:[]).length,ne=($=(y=l.currentAllEnabledRowKeys)==null?void 0:y.length)!=null?$:0;return j>0&&(j>=ne?x=!0:N=!0),{checked:x,indeterminate:N}}),c=()=>a.selectAll?createVNode$1(Checkbox,{modelValue:o.value.checked,indeterminate:o.value.indeterminate,uninjectGroupContext:!0,onChange:f=>{var g;(g=l.onSelectAll)==null||g.call(l,f)}},{default:isFunction$1(a.operationColumn.title)?a.operationColumn.title():a.operationColumn.title}):a.operationColumn.title?isFunction$1(a.operationColumn.title)?a.operationColumn.title():a.operationColumn.title:null,u=computed(()=>getOperationStyle(a.operationColumn,a.operations)),d=computed(()=>[`${s}-th`,`${s}-operation`,{[`${s}-checkbox`]:a.selectAll},...getOperationFixedCls(s,a.operationColumn)]);return()=>createVNode$1("th",{class:d.value,style:u.value,rowspan:a.rowSpan>1?a.rowSpan:void 0},[createVNode$1("span",{class:`${s}-cell`},[c()])])}}),OperationTd=defineComponent({name:"OperationTd",components:{Checkbox,Radio,IconPlus,IconMinus},props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},record:{type:Object,required:!0},hasExpand:{type:Boolean,default:!1},selectedRowKeys:{type:Array},renderExpandBtn:{type:Function},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},summary:{type:Boolean,default:!1}},emits:["select"],setup(a,{emit:s,slots:l}){const o=getPrefixCls("table"),c=inject(tableInjectionKey,{}),u=computed(()=>getOperationStyle(a.operationColumn,a.operations)),d=computed(()=>[`${o}-td`,`${o}-operation`,{[`${o}-checkbox`]:a.operationColumn.name==="selection-checkbox",[`${o}-radio`]:a.operationColumn.name==="selection-radio",[`${o}-expand`]:a.operationColumn.name==="expand",[`${o}-drag-handle`]:a.operationColumn.name==="drag-handle"},...getOperationFixedCls(o,a.operationColumn)]),f=computed(()=>getLeafKeys(a.record)),g=computed(()=>{var $;return getSelectionStatus(($=c.currentSelectedRowKeys)!=null?$:[],f.value)}),y=()=>{var $,x,N,R,j,ne;if(a.summary)return null;if(a.operationColumn.render)return a.operationColumn.render(a.record.raw);if(a.operationColumn.name==="selection-checkbox"){const se=a.record.key;return!c.checkStrictly&&!a.record.isLeaf?createVNode$1(Checkbox,{modelValue:g.value.checked,indeterminate:g.value.indeterminate,disabled:!!a.record.disabled,uninjectGroupContext:!0,onChange:ce=>{var fe;return(fe=c.onSelectAllLeafs)==null?void 0:fe.call(c,a.record,ce)},onClick:ce=>ce.stopPropagation()},null):createVNode$1(Checkbox,{modelValue:(x=($=a.selectedRowKeys)==null?void 0:$.includes(se))!=null?x:!1,disabled:!!a.record.disabled,uninjectGroupContext:!0,onChange:ce=>{var fe;return(fe=c.onSelect)==null?void 0:fe.call(c,ce,a.record)},onClick:ce=>ce.stopPropagation()},null)}if(a.operationColumn.name==="selection-radio"){const se=a.record.key;return createVNode$1(Radio,{modelValue:(R=(N=a.selectedRowKeys)==null?void 0:N.includes(se))!=null?R:!1,disabled:!!a.record.disabled,uninjectGroupContext:!0,onChange:ce=>{var fe;return(fe=c.onSelect)==null?void 0:fe.call(c,ce,a.record)},onClick:ce=>ce.stopPropagation()},null)}return a.operationColumn.name==="expand"?a.hasExpand&&a.renderExpandBtn?a.renderExpandBtn(a.record):null:a.operationColumn.name==="drag-handle"?(ne=(j=l["drag-handle-icon"])==null?void 0:j.call(l))!=null?ne:createVNode$1(IconDragDotVertical,null,null):null};return()=>createVNode$1("td",{class:d.value,style:u.value,rowspan:a.rowSpan>1?a.rowSpan:void 0,colspan:a.colSpan>1?a.colSpan:void 0},[createVNode$1("span",{class:`${o}-cell`},[y()])])}});const useDrag=a=>{const s=computed(()=>{if(a.value)return a.value.type==="handle"?"handle":"row"}),l=reactive({dragging:!1,sourceKey:"",sourcePath:[],targetPath:[],data:{}}),o=()=>{l.dragging=!1,l.sourceKey="",l.sourcePath=[],l.targetPath=[],l.data={}};return{dragType:s,dragState:l,handleDragStart:($,x,N,R)=>{if($.dataTransfer&&($.dataTransfer.effectAllowed="move",$.target&&$.target.tagName==="TD")){const{parentElement:j}=$.target;j&&j.tagName==="TR"&&$.dataTransfer.setDragImage(j,0,0)}l.dragging=!0,l.sourceKey=x,l.sourcePath=N,l.targetPath=[...N],l.data=R},handleDragEnter:($,x)=>{$.dataTransfer&&($.dataTransfer.dropEffect="move"),l.targetPath.toString()!==x.toString()&&(l.targetPath=x),$.preventDefault()},handleDragLeave:$=>{},handleDragover:$=>{$.dataTransfer&&($.dataTransfer.dropEffect="move"),$.preventDefault()},handleDragEnd:$=>{var x;((x=$.dataTransfer)==null?void 0:x.dropEffect)==="none"&&o()},handleDrop:$=>{o(),$.preventDefault()}}},useColumnResize=(a,s)=>{const l=ref(""),o=reactive({}),c=(f,g)=>{g.preventDefault(),l.value=f,on(window,"mousemove",d),on(window,"mouseup",u),on(window,"contextmenu",u)},u=()=>{l.value="",off(window,"mousemove",d),off(window,"mouseup",u),off(window,"contextmenu",u)},d=f=>{const g=a.value[l.value];if(g){const{clientX:y}=f,{x:$}=g.getBoundingClientRect();let x=Math.ceil(y-$);x<40&&(x=40),o[l.value]=x,s("columnResize",l.value,x)}};return{resizingColumn:l,columnWidth:o,handleThMouseDown:c,handleThMouseUp:u}},useFilter=({columns:a,onFilterChange:s})=>{const l=ref(getDefaultFilters(a.value));watch(a,d=>{const f=getDefaultFilters(d);isEqual$1(f,l.value)||(l.value=f)});const o=computed(()=>{var d,f;const g={};for(const y of a.value)if(y.dataIndex){const $=(f=(d=y.filterable)==null?void 0:d.filteredValue)!=null?f:l.value[y.dataIndex];$&&(g[y.dataIndex]=$)}return g});return{_filters:l,computedFilters:o,resetFilters:d=>{var f;const g=d?[].concat(d):[],y={};for(const $ of a.value)if($.dataIndex&&$.filterable&&(g.length===0||g.includes($.dataIndex))){const x=(f=$.filterable.defaultFilteredValue)!=null?f:[];y[$.dataIndex]=x,s($.dataIndex,x)}l.value=y},clearFilters:d=>{const f=d?[].concat(d):[],g={};for(const y of a.value)if(y.dataIndex&&y.filterable&&(f.length===0||f.includes(y.dataIndex))){const $=[];g[y.dataIndex]=$,s(y.dataIndex,$)}l.value=g}}},getDefaultFilters=a=>{var s;const l={};for(const o of a)o.dataIndex&&((s=o.filterable)!=null&&s.defaultFilteredValue)&&(l[o.dataIndex]=o.filterable.defaultFilteredValue);return l},useSorter=({columns:a,onSorterChange:s})=>{const l=ref(getDefaultSorter(a.value));watch(a,d=>{const f=getDefaultSorter(d);isEqual$1(f,l.value)||(l.value=f)});const o=computed(()=>{var d;for(const f of a.value)if(f.dataIndex&&f.sortable){const g=isString$1(f.sortable.sortOrder)?f.sortable.sortOrder:((d=l.value)==null?void 0:d.field)===f.dataIndex?l.value.direction:"";if(g)return{field:f.dataIndex,direction:g}}});return{_sorter:l,computedSorter:o,resetSorters:()=>{var d;let f;for(const g of a.value)g.dataIndex&&g.sortable&&(!f&&g.sortable.defaultSortOrder&&(f={field:g.dataIndex,direction:g.sortable.defaultSortOrder}),s(g.dataIndex,(d=g.sortable.defaultSortOrder)!=null?d:""));l.value=f},clearSorters:()=>{for(const d of a.value)d.dataIndex&&d.sortable&&s(d.dataIndex,"")}}},getDefaultSorter=a=>{var s;for(const l of a)if(l.dataIndex&&((s=l.sortable)!=null&&s.defaultSortOrder))return{field:l.dataIndex,direction:l.sortable.defaultSortOrder}},useSpan=({spanMethod:a,data:s,columns:l})=>{const o=(f,g)=>{f?.forEach((y,$)=>{var x;y.hasSubtree&&((x=y.children)!=null&&x.length)&&o(y.children||[],g),l.value.forEach((N,R)=>{var j,ne;const{rowspan:se=1,colspan:ce=1}=(ne=(j=a.value)==null?void 0:j.call(a,{record:y.raw,column:N,rowIndex:$,columnIndex:R}))!=null?ne:{};(se>1||ce>1)&&(g[`${$}-${R}-${y.key}`]=[se,ce],Array.from({length:se}).forEach((fe,ea)=>{var ta;if($+ea<f.length){const{key:na}=(ta=f[$+ea])!=null?ta:{};Array.from({length:ce}).forEach((aa,ia)=>{R+ia<l.value.length&&`${$}-${R}-${y.key}`!=`${$+ea}-${R+ia}-${na}`&&(c.value[`${$+ea}-${R+ia}-${na}`]=[0,0])})}}))})})};let c=ref({});const u=computed(()=>{const f={};return c.value={},a.value&&o(s.value,f),f}),d=computed(()=>{const f=[];for(const g of Object.keys(c.value))f.push(g);return f});return{tableSpan:u,removedCells:d}};var __defProp$d=Object.defineProperty,__defProps$9=Object.defineProperties,__getOwnPropDescs$9=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$e=Object.getOwnPropertySymbols,__hasOwnProp$e=Object.prototype.hasOwnProperty,__propIsEnum$e=Object.prototype.propertyIsEnumerable,__defNormalProp$d=(a,s,l)=>s in a?__defProp$d(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$d=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$e.call(s,l)&&__defNormalProp$d(a,l,s[l]);if(__getOwnPropSymbols$e)for(var l of __getOwnPropSymbols$e(s))__propIsEnum$e.call(s,l)&&__defNormalProp$d(a,l,s[l]);return a},__spreadProps$9=(a,s)=>__defProps$9(a,__getOwnPropDescs$9(s));function _isSlot$3(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}const DEFAULT_BORDERED={wrapper:!0,cell:!1,headerCell:!1,bodyCell:!1};var _Table=defineComponent({name:"Table",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},bordered:{type:[Boolean,Object],default:!0},hoverable:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},size:{type:String,default:()=>{var a,s;return(s=(a=inject(configProviderInjectionKey,void 0))==null?void 0:a.size)!=null?s:"large"}},tableLayoutFixed:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},rowSelection:{type:Object},expandable:{type:Object},scroll:{type:Object},pagination:{type:[Boolean,Object],default:!0},pagePosition:{type:String,default:"br"},indentSize:{type:Number,default:16},rowKey:{type:String,default:"key"},showHeader:{type:Boolean,default:!0},virtualListProps:{type:Object},spanMethod:{type:Function},spanAll:{type:Boolean,default:!1},components:{type:Object},loadMore:{type:Function},filterIconAlignLeft:{type:Boolean,default:!1},hideExpandButtonOnEmpty:{type:Boolean,default:!1},rowClass:{type:[String,Array,Object,Function]},draggable:{type:Object},rowNumber:{type:[Boolean,Object]},columnResizable:{type:Boolean},summary:{type:[Boolean,Function]},summaryText:{type:String,default:"Summary"},summarySpanMethod:{type:Function},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},expandedKeys:{type:Array},defaultExpandedKeys:{type:Array},defaultExpandAllRows:{type:Boolean,default:!1},stickyHeader:{type:[Boolean,Number],default:!1},scrollbar:{type:[Object,Boolean],default:!0},showEmptyTree:{type:Boolean,default:!1}},emits:{"update:selectedKeys":a=>!0,"update:expandedKeys":a=>!0,expand:(a,s)=>!0,expandedChange:a=>!0,select:(a,s,l)=>!0,selectAll:a=>!0,selectionChange:a=>!0,sorterChange:(a,s)=>!0,filterChange:(a,s)=>!0,pageChange:a=>!0,pageSizeChange:a=>!0,change:(a,s,l)=>!0,cellMouseEnter:(a,s,l)=>!0,cellMouseLeave:(a,s,l)=>!0,cellClick:(a,s,l)=>!0,rowClick:(a,s)=>!0,headerClick:(a,s)=>!0,columnResize:(a,s)=>!0,rowDblclick:(a,s)=>!0,cellDblclick:(a,s,l)=>!0,rowContextmenu:(a,s)=>!0,cellContextmenu:(a,s,l)=>!0},setup(a,{emit:s,slots:l}){const{columns:o,rowKey:c,rowSelection:u,expandable:d,loadMore:f,filterIconAlignLeft:g,selectedKeys:y,defaultSelectedKeys:$,expandedKeys:x,defaultExpandedKeys:N,defaultExpandAllRows:R,spanMethod:j,draggable:ne,summarySpanMethod:se,scrollbar:ce,showEmptyTree:fe}=toRefs(a),ea=getPrefixCls("table"),ta=inject(configProviderInjectionKey,void 0),na=computed(()=>isObject$1(a.bordered)?__spreadValues$d(__spreadValues$d({},DEFAULT_BORDERED),a.bordered):__spreadProps$9(__spreadValues$d({},DEFAULT_BORDERED),{wrapper:a.bordered})),{children:aa,components:ia}=useChildrenComponents("TableColumn"),sa=computed(()=>{var xa,Ma;return(Ma=(xa=u.value)==null?void 0:xa.checkStrictly)!=null?Ma:!0}),{displayScrollbar:ra,scrollbarProps:la}=useScrollbar(ce),oa=computed(()=>{var xa,Ma,ja,qa;const Xa=!!((xa=a.scroll)!=null&&xa.x||(Ma=a.scroll)!=null&&Ma.minWidth),tn=!!((ja=a.scroll)!=null&&ja.y||(qa=a.scroll)!=null&&qa.maxHeight);return{x:Xa,y:tn}}),ca=ref(),pa=ref({}),{componentRef:ua,elementRef:da}=useComponentRef("containerRef"),{componentRef:ha,elementRef:ga}=useComponentRef("containerRef"),{componentRef:fa,elementRef:ma}=useComponentRef("viewportRef"),{componentRef:va,elementRef:ka}=useComponentRef("containerRef"),ya=computed(()=>ba.value?si.value?ma.value:ga.value:da.value),ba=computed(()=>oa.value.y||a.stickyHeader||si.value||oa.value.x&&Cn.value.length===0),Ea=reactive(new Map),Ca=ref();watch([ia,Ea],([xa,Ma])=>{if(xa.length>0){const ja=[];xa.forEach(qa=>{const Xa=Ma.get(qa);Xa&&ja.push(Xa)}),Ca.value=ja}else Ca.value=void 0});const $a=new Map,Pa=ref([]),Da=ref([]),{resizingColumn:Ta,columnWidth:Ba,handleThMouseDown:wa}=useColumnResize(pa,s);watch([o,Ca,Ba],([xa,Ma])=>{var ja;const qa=getGroupColumns((ja=Ma??xa)!=null?ja:[],$a,Ba);Pa.value=qa.dataColumns,Da.value=qa.groupColumns},{immediate:!0,deep:!0});const Oa=computed(()=>["tl","top","tr"].includes(a.pagePosition)),Aa=ref(!1),Sa=ref(!1),Fa=ref(!1);watchEffect(()=>{var xa,Ma,ja;let qa=!1,Xa=!1,tn=!1;((xa=a.rowSelection)!=null&&xa.fixed||(Ma=a.expandable)!=null&&Ma.fixed||(ja=a.draggable)!=null&&ja.fixed)&&(qa=!0);for(const un of Pa.value)un.fixed==="left"?(qa=!0,tn=!0):un.fixed==="right"&&(Xa=!0);qa!==Aa.value&&(Aa.value=qa),Xa!==Sa.value&&(Sa.value=Xa),tn!==Fa.value&&(Fa.value=tn)});const Ia=computed(()=>{for(const xa of Pa.value)if(xa.ellipsis)return!0;return!1}),Ga=xa=>{const Ma={type:xa,page:Wn.value,pageSize:Gn.value,sorter:mn.value,filters:Za.value,dragTarget:xa==="drag"?cn.data:void 0};s("change",Xn.value,Ma,Vn.value)},Ya=(xa,Ma)=>{La.value=__spreadProps$9(__spreadValues$d({},Za.value),{[xa]:Ma}),s("filterChange",xa,Ma),Ga("filter")},Va=(xa,Ma)=>{fn.value=Ma?{field:xa,direction:Ma}:void 0,s("sorterChange",xa,Ma),Ga("sorter")},{_filters:La,computedFilters:Za,resetFilters:rn,clearFilters:pn}=useFilter({columns:Pa,onFilterChange:Ya}),{_sorter:fn,computedSorter:mn,resetSorters:Dn,clearSorters:Ra}=useSorter({columns:Pa,onSorterChange:Va}),Na=new Set,za=computed(()=>{const xa=[];Na.clear();const Ma=ja=>{if(isArray$1(ja)&&ja.length>0)for(const qa of ja)xa.push(qa[c.value]),qa.disabled&&Na.add(qa[c.value]),qa.children&&Ma(qa.children)};return Ma(a.data),xa}),an=computed(()=>{const xa=[],Ma=ja=>{for(const qa of ja)xa.push(qa.key),qa.children&&Ma(qa.children)};return Ma(Cn.value),xa}),bn=computed(()=>{const xa=[],Ma=ja=>{for(const qa of ja)qa.disabled||xa.push(qa.key),qa.children&&Ma(qa.children)};return Ma(Cn.value),xa}),{isRadio:En,selectedRowKeys:Pn,currentSelectedRowKeys:Wa,handleSelect:Ua,handleSelectAllLeafs:Qa,handleSelectAll:nn,select:ln,selectAll:dn,clearSelected:wn}=useRowSelection({selectedKeys:y,defaultSelectedKeys:$,rowSelection:u,currentAllRowKeys:an,currentAllEnabledRowKeys:bn,emit:s}),{expandedRowKeys:xn,handleExpand:Zn,expand:Kn,expandAll:qn}=useExpand({expandedKeys:x,defaultExpandedKeys:N,defaultExpandAllRows:R,expandable:d,allRowKeys:za,emit:s}),Fn=reactive({}),Un=(xa,Ma)=>{xa&&(Fn[Ma.key]=xa)},zn=xa=>{var Ma,ja;for(const qa of Object.keys(Za.value)){const Xa=Za.value[qa],tn=$a.get(qa);if(tn&&((Ma=tn.filterable)!=null&&Ma.filter)&&Xa.length>0){const un=(ja=tn.filterable)==null?void 0:ja.filter(Xa,xa.raw);if(!un)return un}}return!0},{dragType:Ka,dragState:cn,handleDragStart:_n,handleDragEnter:Bn,handleDragLeave:Ln,handleDragover:jn,handleDragEnd:Yn,handleDrop:li}=useDrag(ne),Hn=computed(()=>{var xa;const Ma=ja=>{const qa=[];for(const Xa of ja){const tn={raw:Xa,key:Xa[a.rowKey],disabled:Xa.disabled,expand:Xa.expand,isLeaf:Xa.isLeaf};Xa.children?(tn.isLeaf=!1,tn.children=Ma(Xa.children)):a.loadMore&&!Xa.isLeaf?(tn.isLeaf=!1,Fn[tn.key]&&(tn.children=Ma(Fn[tn.key]))):tn.isLeaf=!0,tn.hasSubtree=!!(tn.children?!a.hideExpandButtonOnEmpty||tn.children.length>0:a.loadMore&&!tn.isLeaf),qa.push(tn)}return qa};return Ma((xa=a.data)!=null?xa:[])}),ai=computed(()=>{const xa=Ma=>Ma.filter(ja=>zn(ja)?(ja.children&&(ja.children=xa(ja.children)),!0):!1);return Object.keys(Za.value).length>0?xa(Hn.value):Hn.value}),Vn=computed(()=>{var xa,Ma,ja;const qa=mapArrayWithChildren(ai.value);if(qa.length>0){if((xa=mn.value)!=null&&xa.field){const un=$a.get(mn.value.field);if(un&&((Ma=un.sortable)==null?void 0:Ma.sorter)!==!0){const{field:hn,direction:kn}=mn.value;qa.sort((Sn,Rn)=>{var Mn;const fi=getValueByPath(Sn.raw,hn),vn=getValueByPath(Rn.raw,hn);if((Mn=un.sortable)!=null&&Mn.sorter&&isFunction$1(un.sortable.sorter))return un.sortable.sorter(Sn.raw,Rn.raw,{dataIndex:hn,direction:kn});const Nn=fi>vn?1:-1;return kn==="descend"?-Nn:Nn})}}const{sourcePath:Xa,targetPath:tn}=cn;if(cn.dragging&&tn.length&&tn.toString()!==Xa.toString()&&Xa.length===tn.length&&Xa.slice(0,-1).toString()===tn.slice(0,-1).toString()){let un=qa;for(let hn=0;hn<Xa.length;hn++){const kn=Xa[hn];if(hn>=Xa.length-1){const Rn=un[kn],Mn=tn[hn];Mn>kn?(un.splice(Mn+1,0,Rn),un.splice(kn,1)):(un.splice(Mn,0,Rn),un.splice(kn+1,1))}else un=(ja=un[kn].children)!=null?ja:[]}}}return qa}),{page:Wn,pageSize:Gn,handlePageChange:oi,handlePageSizeChange:pi}=usePagination(a,s),ci=computed(()=>{var xa,Ma;return(Ma=(xa=u.value)==null?void 0:xa.onlyCurrent)!=null?Ma:!1});watch(Wn,(xa,Ma)=>{xa!==Ma&&ci.value&&wn()});const Cn=computed(()=>a.pagination&&Vn.value.length>Gn.value?Vn.value.slice((Wn.value-1)*Gn.value,Wn.value*Gn.value):Vn.value),Xn=computed(()=>mapRawTableData(Cn.value)),ui=()=>Pa.value.reduce((xa,Ma,ja)=>{if(Ma.dataIndex)if(ja===0)setValueByPath(xa,Ma.dataIndex,a.summaryText,{addPath:!0});else{let qa=0,Xa=!1;Cn.value.forEach(tn=>{if(Ma.dataIndex){const un=getValueByPath(tn.raw,Ma.dataIndex);isNumber$1(un)?qa+=un:!isUndefined(un)&&!isNull(un)&&(Xa=!0)}}),setValueByPath(xa,Ma.dataIndex,Xa?"":qa,{addPath:!0})}return xa},{}),ni=xa=>xa&&xa.length>0?xa.map(Ma=>({raw:Ma,key:Ma[a.rowKey]})):[],In=computed(()=>a.summary?isFunction$1(a.summary)?ni(a.summary({columns:Pa.value,data:Xn.value})):ni([ui()]):[]),Ha=ref(0),Ja=ref(!0),gn=ref(!0),yn=()=>{let xa=!0,Ma=!0;const ja=ya.value;ja&&(xa=Ha.value===0,Ma=Math.ceil(Ha.value+ja.offsetWidth)>=ja.scrollWidth),xa!==Ja.value&&(Ja.value=xa),Ma!==gn.value&&(gn.value=Ma)},An=()=>Ja.value&&gn.value?`${ea}-scroll-position-both`:Ja.value?`${ea}-scroll-position-left`:gn.value?`${ea}-scroll-position-right`:`${ea}-scroll-position-middle`,Tn=()=>{const xa=[];return Aa.value&&xa.push(`${ea}-has-fixed-col-left`),Sa.value&&xa.push(`${ea}-has-fixed-col-right`),xa},Jn=xa=>{xa.target.scrollLeft!==Ha.value&&(Ha.value=xa.target.scrollLeft),yn()},ki=xa=>{Jn(xa);const{scrollLeft:Ma}=xa.target;ka.value&&(ka.value.scrollLeft=Ma),ca.value&&(ca.value.scrollLeft=Ma)},yi=(xa,Ma)=>{s("rowClick",xa.raw,Ma)},Ri=(xa,Ma)=>{s("rowDblclick",xa.raw,Ma)},zi=(xa,Ma)=>{s("rowContextmenu",xa.raw,Ma)},bi=(xa,Ma,ja)=>{s("cellClick",xa.raw,Ma,ja)},Ei=debounce((xa,Ma,ja)=>{s("cellMouseEnter",xa.raw,Ma,ja)},30),_i=debounce((xa,Ma,ja)=>{s("cellMouseLeave",xa.raw,Ma,ja)},30),Ci=(xa,Ma,ja)=>{s("cellDblclick",xa.raw,Ma,ja)},Si=(xa,Ma,ja)=>{s("cellContextmenu",xa.raw,Ma,ja)},ji=(xa,Ma)=>{s("headerClick",xa,Ma)},$n=computed(()=>{var xa,Ma;const ja=[],qa=Aa.value||Sa.value;let Xa,tn,un;((xa=a.draggable)==null?void 0:xa.type)==="handle"&&(Xa={name:"drag-handle",title:a.draggable.title,width:a.draggable.width,fixed:a.draggable.fixed||qa},ja.push(Xa)),a.expandable&&(tn={name:"expand",title:a.expandable.title,width:a.expandable.width,fixed:a.expandable.fixed||qa},ja.push(tn)),a.rowSelection&&(un={name:a.rowSelection.type==="radio"?"selection-radio":"selection-checkbox",title:a.rowSelection.title,width:a.rowSelection.width,fixed:a.rowSelection.fixed||qa},ja.push(un)),!Fa.value&&ja.length>0&&ja[ja.length-1].fixed&&(ja[ja.length-1].isLastLeftFixed=!0);const hn=(Ma=a.components)==null?void 0:Ma.operations;return isFunction$1(hn)?hn({dragHandle:Xa,expand:tn,selection:un}):ja}),Hi=computed(()=>{var xa,Ma,ja,qa;if(oa.value.x){const Xa={width:isNumber$1((xa=a.scroll)==null?void 0:xa.x)?`${(Ma=a.scroll)==null?void 0:Ma.x}px`:(ja=a.scroll)==null?void 0:ja.x};return(qa=a.scroll)!=null&&qa.minWidth&&(Xa.minWidth=isNumber$1(a.scroll.minWidth)?`${a.scroll.minWidth}px`:a.scroll.minWidth),Xa}}),ii=computed(()=>{var xa,Ma,ja,qa;if(oa.value.x&&Cn.value.length>0){const Xa={width:isNumber$1((xa=a.scroll)==null?void 0:xa.x)?`${(Ma=a.scroll)==null?void 0:Ma.x}px`:(ja=a.scroll)==null?void 0:ja.x};return(qa=a.scroll)!=null&&qa.minWidth&&(Xa.minWidth=isNumber$1(a.scroll.minWidth)?`${a.scroll.minWidth}px`:a.scroll.minWidth),Xa}});provide(tableInjectionKey,reactive({loadMore:f,addLazyLoadData:Un,slots:l,sorter:mn,filters:Za,filterIconAlignLeft:g,resizingColumn:Ta,checkStrictly:sa,currentAllEnabledRowKeys:bn,currentSelectedRowKeys:Wa,addColumn:(xa,Ma)=>{Ea.set(xa,Ma)},removeColumn:xa=>{Ea.delete(xa)},onSelectAll:nn,onSelect:Ua,onSelectAllLeafs:Qa,onSorterChange:Va,onFilterChange:Ya,onThMouseDown:wa}));const $i=computed(()=>[ea,`${ea}-size-${a.size}`,{[`${ea}-border`]:na.value.wrapper,[`${ea}-border-cell`]:na.value.cell,[`${ea}-border-header-cell`]:!na.value.cell&&na.value.headerCell,[`${ea}-border-body-cell`]:!na.value.cell&&na.value.bodyCell,[`${ea}-stripe`]:a.stripe,[`${ea}-hover`]:a.hoverable,[`${ea}-dragging`]:cn.dragging,[`${ea}-type-selection`]:!!a.rowSelection,[`${ea}-empty`]:a.data&&Cn.value.length===0,[`${ea}-layout-fixed`]:a.tableLayoutFixed||oa.value.x||ba.value||Ia.value}]),Wi=computed(()=>[`${ea}-pagination`,{[`${ea}-pagination-left`]:a.pagePosition==="tl"||a.pagePosition==="bl",[`${ea}-pagination-center`]:a.pagePosition==="top"||a.pagePosition==="bottom",[`${ea}-pagination-right`]:a.pagePosition==="tr"||a.pagePosition==="br",[`${ea}-pagination-top`]:Oa.value}]),Gi=computed(()=>{const xa=Tn();return oa.value.x&&xa.push(An()),ba.value&&xa.push(`${ea}-scroll-y`),xa}),si=computed(()=>!!a.virtualListProps),di=ref({}),wi=()=>{const xa={};for(const Ma of Object.keys(pa.value))xa[Ma]=pa.value[Ma].offsetWidth;di.value=xa},Qn=ref(!1),Ai=()=>ga.value?ga.value.offsetWidth>ga.value.clientWidth:!1,qi=()=>{const xa=Ai();Qn.value!==xa&&(Qn.value=xa),yn(),wi()};onMounted(()=>{Qn.value=Ai(),wi()});const Ui=computed(()=>isObject$1(a.loading)?a.loading:{loading:a.loading}),xi=()=>createVNode$1(Tr,{empty:!0},{default:()=>[createVNode$1(Td,{colSpan:Pa.value.length+$n.value.length},{default:()=>{var xa,Ma,ja,qa,Xa;return[(Xa=(qa=(xa=l.empty)==null?void 0:xa.call(l))!=null?qa:(ja=ta==null?void 0:(Ma=ta.slots).empty)==null?void 0:ja.call(Ma,{component:"table"}))!=null?Xa:createVNode$1(Empty,null,null)]}})]}),Yi=xa=>{var Ma;if(xa.expand)return isFunction$1(xa.expand)?xa.expand():xa.expand;if(l["expand-row"])return l["expand-row"]({record:xa.raw});if((Ma=a.expandable)!=null&&Ma.expandedRowRender)return a.expandable.expandedRowRender(xa.raw)},Pi=computed(()=>[].concat($n.value,Pa.value)),Zi=computed(()=>a.spanAll?Pi.value:Pa.value),{tableSpan:Di,removedCells:Fi}=useSpan({spanMethod:j,data:Cn,columns:Zi}),{tableSpan:Ti,removedCells:Bi}=useSpan({spanMethod:se,data:In,columns:Pi}),ri=xa=>{if(!(!si.value||!xa||!di.value[xa]))return{width:`${di.value[xa]}px`}},Ki=(xa,Ma)=>createVNode$1(Tr,{key:`table-summary-${Ma}`,class:[`${ea}-tr-summary`,isFunction$1(a.rowClass)?a.rowClass(xa.raw,Ma):a.rowClass],onClick:ja=>yi(xa,ja)},{default:()=>[$n.value.map((ja,qa)=>{var Xa;const tn=`${Ma}-${qa}-${xa.key}`,[un,hn]=(Xa=Ti.value[tn])!=null?Xa:[1,1];if(Bi.value.includes(tn))return null;const kn=ri(ja.name);return createVNode$1(OperationTd,{style:kn,operationColumn:ja,operations:$n.value,record:xa,rowSpan:un,colSpan:hn,summary:!0},null)}),Pa.value.map((ja,qa)=>{var Xa;const tn=`${Ma}-${$n.value.length+qa}-${xa.key}`,[un,hn]=(Xa=Ti.value[tn])!=null?Xa:[1,1];if(Bi.value.includes(tn))return null;const kn=ri(ja.dataIndex);return createVNode$1(Td,{key:`td-${tn}`,style:kn,rowIndex:Ma,record:xa,column:ja,operations:$n.value,dataColumns:Pa.value,rowSpan:un,colSpan:hn,summary:!0,onClick:Sn=>bi(xa,ja,Sn),onDblclick:Sn=>Ci(xa,ja,Sn),onMouseenter:Sn=>Ei(xa,ja,Sn),onMouseleave:Sn=>_i(xa,ja,Sn),onContextmenu:Sn=>Si(xa,ja,Sn)},{td:l.td,cell:l["summary-cell"]})})],tr:l.tr}),Ii=()=>In.value&&In.value.length>0?createVNode$1("tfoot",null,[In.value.map((xa,Ma)=>Ki(xa,Ma))]):null,Ni=(xa,Ma=!0)=>{var ja,qa,Xa,tn,un;const hn=xa.key,kn=xn.value.includes(hn);return createVNode$1("button",{type:"button",class:`${ea}-expand-btn`,onClick:Sn=>{Zn(hn,xa.raw),Ma&&Sn.stopPropagation()}},[(un=(tn=(ja=l["expand-icon"])==null?void 0:ja.call(l,{expanded:kn,record:xa.raw}))!=null?tn:(Xa=(qa=a.expandable)==null?void 0:qa.icon)==null?void 0:Xa.call(qa,kn,xa.raw))!=null?un:kn?createVNode$1(IconMinus,null,null):createVNode$1(IconPlus,null,null)])},Xi=(xa,{indentSize:Ma,indexPath:ja,allowDrag:qa,expandContent:Xa})=>{var tn,un;if(xa.hasSubtree)return((tn=xa.children)==null?void 0:tn.length)===0&&fe.value?xi():(un=xa.children)==null?void 0:un.map((hn,kn)=>hi(hn,kn,{indentSize:Ma,indexPath:ja,allowDrag:qa}));if(Xa){const hn=ya.value;return createVNode$1(Tr,{key:`${xa.key}-expand`,expand:!0},{default:()=>[createVNode$1(Td,{isFixedExpand:Aa.value||Sa.value,containerWidth:hn?.clientWidth,colSpan:Pa.value.length+$n.value.length},_isSlot$3(Xa)?Xa:{default:()=>[Xa]})]})}return null},hi=(xa,Ma,{indentSize:ja=0,indexPath:qa,allowDrag:Xa=!0}={})=>{var tn;const un=xa.key,hn=(qa??[]).concat(Ma),kn=Yi(xa),Sn=xn.value.includes(un),Rn=cn.sourceKey===xa.key,Mn=Ka.value?{draggable:Xa,onDragstart:vn=>{Xa&&_n(vn,xa.key,hn,xa.raw)},onDragend:vn=>{Xa&&Yn(vn)}}:{},fi=Ka.value?{onDragenter:vn=>{Xa&&Bn(vn,hn)},onDragover:vn=>{Xa&&jn(vn)},onDrop:vn=>{Xa&&(Ga("drag"),li(vn))}}:{};return createVNode$1(Fragment,null,[createVNode$1(Tr,mergeProps({key:un,class:[{[`${ea}-tr-draggable`]:Ka.value==="row",[`${ea}-tr-drag`]:Rn},isFunction$1(a.rowClass)?a.rowClass(xa.raw,Ma):a.rowClass],rowIndex:Ma,record:xa,checked:a.rowSelection&&((tn=Pn.value)==null?void 0:tn.includes(un)),onClick:vn=>yi(xa,vn),onDblclick:vn=>Ri(xa,vn),onContextmenu:vn=>zi(xa,vn)},Ka.value==="row"?Mn:{},fi),{default:()=>[$n.value.map((vn,Nn)=>{var ei;const ti=`${Ma}-${Nn}-${xa.key}`,[gi,vi]=a.spanAll?(ei=Di.value[ti])!=null?ei:[1,1]:[1,1];if(a.spanAll&&Fi.value.includes(ti))return null;const mi=ri(vn.name);return createVNode$1(OperationTd,mergeProps({key:`operation-td-${Nn}`,style:mi,operationColumn:vn,operations:$n.value,record:xa,hasExpand:!!kn,selectedRowKeys:Wa.value,rowSpan:gi,colSpan:vi,renderExpandBtn:Ni},Ka.value==="handle"?Mn:{}),{"drag-handle-icon":l["drag-handle-icon"]})}),Pa.value.map((vn,Nn)=>{var ei;const ti=`${Ma}-${a.spanAll?$n.value.length+Nn:Nn}-${xa.key}`,[gi,vi]=(ei=Di.value[ti])!=null?ei:[1,1];if(Fi.value.includes(ti))return null;const mi=Nn===0?{showExpandBtn:xa.hasSubtree,indentSize:xa.hasSubtree?ja-20:ja}:{},er=ri(vn.dataIndex);return createVNode$1(Td,mergeProps({key:`td-${Nn}`,style:er,rowIndex:Ma,record:xa,column:vn,operations:$n.value,dataColumns:Pa.value,rowSpan:gi,renderExpandBtn:Ni,colSpan:vi},mi,{onClick:On=>bi(xa,vn,On),onDblclick:On=>Ci(xa,vn,On),onMouseenter:On=>Ei(xa,vn,On),onMouseleave:On=>_i(xa,vn,On),onContextmenu:On=>Si(xa,vn,On)}),{td:l.td})})],tr:l.tr}),Sn&&Xi(xa,{indentSize:ja+a.indentSize,indexPath:hn,allowDrag:Xa&&!Rn,expandContent:kn})])},Mi=()=>{const xa=Cn.value.some(Ma=>!!Ma.hasSubtree);return createVNode$1(Tbody,null,{default:()=>[Cn.value.length>0?Cn.value.map((Ma,ja)=>hi(Ma,ja,{indentSize:xa?20:0})):xi()],tbody:l.tbody})},Oi=()=>createVNode$1(Thead,null,{default:()=>[Da.value.map((xa,Ma)=>createVNode$1(Tr,{key:`header-row-${Ma}`},{default:()=>[Ma===0&&$n.value.map((ja,qa)=>{var Xa;return createVNode$1(OperationTh,{key:`operation-th-${qa}`,ref:tn=>{tn?.$el&&ja.name&&(pa.value[ja.name]=tn.$el)},operationColumn:ja,operations:$n.value,selectAll:!!(ja.name==="selection-checkbox"&&((Xa=a.rowSelection)!=null&&Xa.showCheckedAll)),rowSpan:Da.value.length},null)}),xa.map((ja,qa)=>{const Xa=a.columnResizable&&!!ja.dataIndex&&qa<xa.length-1;return createVNode$1(Th,{key:`th-${qa}`,ref:tn=>{tn?.$el&&ja.dataIndex&&(pa.value[ja.dataIndex]=tn.$el)},column:ja,operations:$n.value,dataColumns:Pa.value,resizable:Xa,onClick:tn=>ji(ja,tn)},{th:l.th})})]}))],thead:l.thead}),Ji=()=>{var xa,Ma;if(ba.value){const ja=isNumber$1(a.stickyHeader)?`${a.stickyHeader}px`:void 0,qa=[(xa=la.value)==null?void 0:xa.outerClass];a.stickyHeader&&qa.push(`${ea}-header-sticky`);const Xa=__spreadValues$d({top:ja},(Ma=la.value)==null?void 0:Ma.outerStyle),tn=ra.value?Scrollbar:"div";return createVNode$1(Fragment,null,[a.showHeader&&createVNode$1(tn,mergeProps({ref:va,class:[`${ea}-header`,{[`${ea}-header-sticky`]:a.stickyHeader&&!ra.value}],style:{overflowY:Qn.value?"scroll":void 0,top:ra.value?void 0:ja}},ce.value?__spreadProps$9(__spreadValues$d({hide:Cn.value.length!==0,disableVertical:!0},la.value),{outerClass:qa,outerStyle:Xa}):void 0),{default:()=>[createVNode$1("table",{class:`${ea}-element`,style:Hi.value,cellpadding:0,cellspacing:0},[createVNode$1(ColGroup,{dataColumns:Pa.value,operations:$n.value,columnWidth:Ba},null),Oi()])]}),createVNode$1(ResizeObserver$2,{onResize:qi},{default:()=>{var un,hn;return[si.value&&Cn.value.length?createVNode$1(VirtualList,mergeProps({ref:kn=>{kn?.$el&&(ga.value=kn.$el)},class:`${ea}-body`,data:Cn.value,itemKey:"_key",component:{list:"table",content:"tbody"},listAttrs:{class:`${ea}-element`,style:ii.value},paddingPosition:"list",height:"auto"},a.virtualListProps,{onScroll:ki}),{item:({item:kn,index:Sn})=>hi(kn,Sn)}):createVNode$1(tn,mergeProps({ref:ha,class:`${ea}-body`,style:{maxHeight:isNumber$1((un=a.scroll)==null?void 0:un.y)?`${(hn=a.scroll)==null?void 0:hn.y}px`:"100%"}},ce.value?__spreadValues$d({outerStyle:{display:"flex",minHeight:"0"}},la.value):void 0,{onScroll:ki}),{default:()=>[createVNode$1("table",{class:`${ea}-element`,style:ii.value,cellpadding:0,cellspacing:0},[Cn.value.length!==0&&createVNode$1(ColGroup,{dataColumns:Pa.value,operations:$n.value,columnWidth:Ba},null),Mi()])]})]}}),In.value&&In.value.length>0&&createVNode$1("div",{ref:ca,class:`${ea}-tfoot`,style:{overflowY:Qn.value?"scroll":"hidden"}},[createVNode$1("table",{class:`${ea}-element`,style:ii.value,cellpadding:0,cellspacing:0},[createVNode$1(ColGroup,{dataColumns:Pa.value,operations:$n.value,columnWidth:Ba},null),Ii()])])])}return createVNode$1(ResizeObserver$2,{onResize:()=>yn()},{default:()=>[createVNode$1("table",{class:`${ea}-element`,cellpadding:0,cellspacing:0,style:ii.value},[createVNode$1(ColGroup,{dataColumns:Pa.value,operations:$n.value,columnWidth:Ba},null),a.showHeader&&Oi(),Mi(),In.value&&In.value.length>0&&Ii()])]})},Li=xa=>{var Ma;const ja=(Ma=a.scroll)!=null&&Ma.maxHeight?{maxHeight:a.scroll.maxHeight}:void 0,qa=ra.value?Scrollbar:"div";return createVNode$1(Fragment,null,[createVNode$1("div",{class:[`${ea}-container`,Gi.value]},[createVNode$1(qa,mergeProps({ref:ua,class:[`${ea}-content`,{[`${ea}-content-scroll-x`]:!ba.value}],style:ja},ce.value?__spreadValues$d({outerStyle:{height:"100%"}},la.value):void 0,{onScroll:Jn}),{default:()=>[xa?createVNode$1("table",{class:`${ea}-element`,cellpadding:0,cellspacing:0},[xa()]):Ji()]})]),l.footer&&createVNode$1("div",{class:`${ea}-footer`},[l.footer()])])},Vi=()=>{var xa,Ma;const ja=isObject$1(a.pagination)?omit(a.pagination,["current","pageSize","defaultCurrent","defaultPageSize"]):{};return createVNode$1("div",{class:Wi.value},[(xa=l["pagination-left"])==null?void 0:xa.call(l),createVNode$1(Pagination,mergeProps({total:ai.value.length,current:Wn.value,pageSize:Gn.value,onChange:qa=>{oi(qa),Ga("pagination")},onPageSizeChange:qa=>{pi(qa),Ga("pagination")}},ja),null),(Ma=l["pagination-right"])==null?void 0:Ma.call(l)])},Qi=computed(()=>{var xa,Ma;if(isString$1((xa=a.scroll)==null?void 0:xa.y))return{height:(Ma=a.scroll)==null?void 0:Ma.y}});return{render:()=>{var xa;return l.default?createVNode$1("div",{class:$i.value},[Li(l.default)]):(aa.value=(xa=l.columns)==null?void 0:xa.call(l),createVNode$1("div",{class:$i.value,style:Qi.value},[aa.value,createVNode$1(Spin,Ui.value,{default:()=>[a.pagination!==!1&&(Cn.value.length>0||Vn.value.length>0)&&Oa.value&&Vi(),Li(),a.pagination!==!1&&(Cn.value.length>0||Vn.value.length>0)&&!Oa.value&&Vi()]})]))},selfExpand:Kn,selfExpandAll:qn,selfSelect:ln,selfSelectAll:dn,selfResetFilters:rn,selfClearFilters:pn,selfResetSorters:Dn,selfClearSorters:Ra}},methods:{selectAll(a){return this.selfSelectAll(a)},select(a,s){return this.selfSelect(a,s)},expandAll(a){return this.selfExpandAll(a)},expand(a,s){return this.selfExpand(a,s)},resetFilters(a){return this.selfResetFilters(a)},clearFilters(a){return this.selfClearFilters(a)},resetSorters(){return this.selfResetSorters()},clearSorters(){return this.selfClearSorters()}},render(){return this.render()}});const usePureProp=(a,s)=>{const l=toRef(a,s),o=ref(l.value);return watch(l,(c,u)=>{isEqual$1(c,u)||(o.value=c)}),o};var TableColumn=defineComponent({name:"TableColumn",props:{dataIndex:String,title:String,width:Number,minWidth:Number,align:{type:String},fixed:{type:String},ellipsis:{type:Boolean,default:!1},sortable:{type:Object,default:void 0},filterable:{type:Object,default:void 0},cellClass:{type:[String,Array,Object]},headerCellClass:{type:[String,Array,Object]},bodyCellClass:{type:[String,Array,Object,Function]},summaryCellClass:{type:[String,Array,Object,Function]},cellStyle:{type:Object},headerCellStyle:{type:Object},bodyCellStyle:{type:[Object,Function]},summaryCellStyle:{type:[Object,Function]},index:{type:Number},tooltip:{type:[Boolean,Object],default:!1}},setup(a,{slots:s}){var l;const{dataIndex:o,title:c,width:u,align:d,fixed:f,ellipsis:g,index:y,minWidth:$}=toRefs(a),x=usePureProp(a,"sortable"),N=usePureProp(a,"filterable"),R=usePureProp(a,"cellClass"),j=usePureProp(a,"headerCellClass"),ne=usePureProp(a,"bodyCellClass"),se=usePureProp(a,"summaryCellClass"),ce=usePureProp(a,"cellStyle"),fe=usePureProp(a,"headerCellStyle"),ea=usePureProp(a,"bodyCellStyle"),ta=usePureProp(a,"summaryCellStyle"),na=usePureProp(a,"tooltip"),aa=getCurrentInstance(),ia=inject(tableInjectionKey,{}),sa=inject(tableColumnInjectionKey,void 0),{children:ra,components:la}=useChildrenComponents("TableColumn"),oa=reactive(new Map);provide(tableColumnInjectionKey,{addChild:(ha,ga)=>{oa.set(ha,ga)},removeChild:ha=>{oa.delete(ha)}});const ua=ref();watch([la,oa],([ha,ga])=>{if(ha.length>0){const fa=[];ha.forEach(ma=>{const va=ga.get(ma);va&&fa.push(va)}),ua.value=fa}else ua.value=void 0});const da=reactive({dataIndex:o,title:c,width:u,minWidth:$,align:d,fixed:f,ellipsis:g,sortable:x,filterable:N,cellClass:R,headerCellClass:j,bodyCellClass:ne,summaryCellClass:se,cellStyle:ce,headerCellStyle:fe,bodyCellStyle:ea,summaryCellStyle:ta,index:y,tooltip:na,children:ua,slots:s});return aa&&(sa?sa.addChild(aa.uid,da):(l=ia.addColumn)==null||l.call(ia,aa.uid,da)),onBeforeUnmount(()=>{var ha;aa&&(sa?sa.removeChild(aa.uid):(ha=ia.removeColumn)==null||ha.call(ia,aa.uid))}),()=>{var ha;return ra.value=(ha=s.default)==null?void 0:ha.call(s),ra.value}}});const Table=Object.assign(_Table,{Thead,Tbody,Tr,Th,Td,Column:TableColumn,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Table.name,_Table),a.component(l+Thead.name,Thead),a.component(l+Tbody.name,Tbody),a.component(l+Tr.name,Tr),a.component(l+Th.name,Th),a.component(l+Td.name,Td),a.component(l+TableColumn.name,TableColumn)}}),getTabListStyle=({direction:a,type:s,offset:l})=>a==="vertical"?{transform:`translateY(${-l}px)`}:{transform:`translateX(${-l}px)`},tabsInjectionKey=Symbol("ArcoTabs"),_sfc_main$E=defineComponent({name:"TabsTab",components:{IconHover,IconClose},props:{tab:{type:Object,required:!0},active:Boolean,editable:Boolean},emits:["click","delete"],setup(a,{emit:s}){const l=getPrefixCls("tabs-tab"),o=inject(tabsInjectionKey,{}),c=y=>{a.tab.disabled||s("click",a.tab.key,y)},u=y=>{y.key==="Enter"&&c(y)},d=computed(()=>Object.assign(o.trigger==="click"?{onClick:c}:{onMouseover:c},{onKeydown:u})),f=y=>{a.tab.disabled||s("delete",a.tab.key,y)},g=computed(()=>[l,{[`${l}-active`]:a.active,[`${l}-closable`]:a.editable&&a.tab.closable,[`${l}-disabled`]:a.tab.disabled}]);return{prefixCls:l,cls:g,eventHandlers:d,handleDelete:f}}});function _sfc_render$q(a,s,l,o,c,u){const d=resolveComponent("icon-close"),f=resolveComponent("icon-hover");return openBlock(),createElementBlock("div",mergeProps({tabindex:"0",class:a.cls},a.eventHandlers),[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-title`)},[renderSlot(a.$slots,"default")],2),a.editable&&a.tab.closable?(openBlock(),createBlock(f,{key:0,class:normalizeClass(`${a.prefixCls}-close-btn`),onClick:withModifiers(a.handleDelete,["stop"])},{default:withCtx(()=>[createVNode$1(d)]),_:1},8,["class","onClick"])):createCommentVNode("v-if",!0)],16)}var TabsTab=_export_sfc(_sfc_main$E,[["render",_sfc_render$q]]);function _isSlot$2(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var TabsButton=defineComponent({name:"TabsButton",props:{type:{type:String,default:"next"},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},onClick:{type:Function}},emits:["click"],setup(a,{emit:s}){const l=getPrefixCls("tabs-nav-button"),o=d=>{a.disabled||s("click",a.type,d)},c=()=>a.direction==="horizontal"?a.type==="next"?createVNode$1(IconRight,null,null):createVNode$1(IconLeft,null,null):a.type==="next"?createVNode$1(IconDown,null,null):createVNode$1(IconUp,null,null),u=computed(()=>[l,{[`${l}-disabled`]:a.disabled,[`${l}-left`]:a.direction==="horizontal"&&a.type==="previous",[`${l}-right`]:a.direction==="horizontal"&&a.type==="next",[`${l}-up`]:a.direction==="vertical"&&a.type==="previous",[`${l}-down`]:a.direction==="vertical"&&a.type==="next"}]);return()=>{let d;return createVNode$1("div",{class:u.value,onClick:o},[createVNode$1(IconHover,{disabled:a.disabled},_isSlot$2(d=c())?d:{default:()=>[d]})])}}});const _sfc_main$D=defineComponent({name:"TabsNavInk",props:{activeTabRef:{type:Object},direction:{type:String},disabled:Boolean,animation:Boolean},setup(a){const{activeTabRef:s}=toRefs(a),l=getPrefixCls("tabs-nav-ink"),o=ref(0),c=ref(0),u=computed(()=>a.direction==="vertical"?{top:`${o.value}px`,height:`${c.value}px`}:{left:`${o.value}px`,width:`${c.value}px`}),d=()=>{if(s.value){const g=a.direction==="vertical"?s.value.offsetTop:s.value.offsetLeft,y=a.direction==="vertical"?s.value.offsetHeight:s.value.offsetWidth;(g!==o.value||y!==c.value)&&(o.value=g,c.value=y)}};onMounted(()=>{nextTick(()=>d())}),onUpdated(()=>{d()});const f=computed(()=>[l,{[`${l}-animation`]:a.animation,[`${l}-disabled`]:a.disabled}]);return{prefixCls:l,cls:f,style:u}}});function _sfc_render$p(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls),style:normalizeStyle$1(a.style)},null,6)}var TabsNavInk=_export_sfc(_sfc_main$D,[["render",_sfc_render$p]]),TabsNav=defineComponent({name:"TabsNav",props:{tabs:{type:Array,required:!0},direction:{type:String,required:!0},type:{type:String,required:!0},activeKey:{type:[String,Number]},activeIndex:{type:Number,required:!0},position:{type:String,required:!0},size:{type:String,required:!0},showAddButton:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},animation:{type:Boolean,required:!0},headerPadding:{type:Boolean,default:!0}},emits:["click","add","delete"],setup(a,{emit:s,slots:l}){const{tabs:o,activeKey:c,activeIndex:u,direction:d}=toRefs(a),f=getPrefixCls("tabs-nav"),g=ref(),y=ref(),$=ref({}),x=computed(()=>{if(!isUndefined(c.value))return $.value[c.value]}),N=ref(),R=computed(()=>a.editable&&["line","card","card-gutter"].includes(a.type)),j=ref(!1),ne=ref(0),se=ref(0),ce=ref([]),fe=ref(0),ea=()=>{var va,ka,ya;return(ya=d.value==="vertical"?(va=g.value)==null?void 0:va.offsetHeight:(ka=g.value)==null?void 0:ka.offsetWidth)!=null?ya:0},ta=()=>!y.value||!g.value?0:d.value==="vertical"?y.value.offsetHeight-g.value.offsetHeight:y.value.offsetWidth-g.value.offsetWidth,na=()=>o.value.map(va=>{const ka=$.value[va.key];return d.value==="vertical"?ka.offsetTop+ka.offsetHeight:ka.offsetLeft+ka.offsetWidth}),aa=()=>{j.value=ia(),j.value?(ne.value=ea(),se.value=ta(),ce.value=na(),fe.value>se.value&&(fe.value=se.value)):fe.value=0},ia=()=>g.value&&y.value?a.direction==="vertical"?y.value.offsetHeight>g.value.offsetHeight:y.value.offsetWidth>g.value.offsetWidth:!1,sa=va=>{var ka;return((ka=ce.value[va-1])!=null?ka:0)>=fe.value&&ce.value[va]<=fe.value+ne.value},ra=va=>g.value?va==="previous"?fe.value-ne.value:fe.value+ne.value:0,la=va=>!g.value||!y.value||va<0?0:va>se.value?se.value:va,oa=(va,ka)=>{s("click",va,ka)},ca=(va,ka)=>{s("delete",va,ka)},pa=va=>{fe.value=la(ra(va))},ua=()=>{aa(),N.value&&N.value.$forceUpdate()};watch(o,()=>{nextTick(()=>{aa()})}),watch(u,(va,ka)=>{nextTick(()=>{var ya;if(j.value)if(va>=ka){const ba=va<ce.value.length-1?va+1:va;sa(ba)||(fe.value=ce.value[ba]-ne.value)}else{const ba=va>0?va-1:va;sa(ba)||(fe.value=(ya=ce.value[ba-1])!=null?ya:0)}})}),onMounted(()=>{aa()});const da=()=>!R.value||!a.showAddButton?null:createVNode$1("div",{class:`${f}-add-btn`,onClick:va=>s("add",va)},[createVNode$1(IconHover,null,{default:()=>[createVNode$1(IconPlus,null,null)]})]),ha=computed(()=>[f,`${f}-${a.direction}`,`${f}-${a.position}`,`${f}-size-${a.size}`,`${f}-type-${a.type}`]),ga=computed(()=>[`${f}-tab-list`,{[`${f}-tab-list-no-padding`]:!a.headerPadding&&["line","text"].includes(a.type)&&a.direction==="horizontal"}]),fa=computed(()=>getTabListStyle({direction:a.direction,type:a.type,offset:fe.value})),ma=computed(()=>[`${f}-tab`,{[`${f}-tab-scroll`]:j.value}]);return()=>{var va;return createVNode$1("div",{class:ha.value},[j.value&&createVNode$1(TabsButton,{type:"previous",direction:a.direction,disabled:fe.value<=0,onClick:pa},null),createVNode$1(ResizeObserver$2,{onResize:()=>aa()},{default:()=>[createVNode$1("div",{class:ma.value,ref:g},[createVNode$1(ResizeObserver$2,{onResize:ua},{default:()=>[createVNode$1("div",{ref:y,class:ga.value,style:fa.value},[a.tabs.map((ka,ya)=>createVNode$1(TabsTab,{key:ka.key,ref:ba=>{ba?.$el&&($.value[ka.key]=ba.$el)},active:ka.key===c.value,tab:ka,editable:a.editable,onClick:oa,onDelete:ca},{default:()=>{var ba,Ea,Ca;return[(Ca=(Ea=(ba=ka.slots).title)==null?void 0:Ea.call(ba))!=null?Ca:ka.title]}})),a.type==="line"&&x.value&&createVNode$1(TabsNavInk,{ref:N,activeTabRef:x.value,direction:a.direction,disabled:!1,animation:a.animation},null)])]}),!j.value&&da()])]}),j.value&&createVNode$1(TabsButton,{type:"next",direction:a.direction,disabled:fe.value>=se.value,onClick:pa},null),createVNode$1("div",{class:`${f}-extra`},[j.value&&da(),(va=l.extra)==null?void 0:va.call(l)])])}}}),_Tabs=defineComponent({name:"Tabs",props:{activeKey:{type:[String,Number],default:void 0},defaultActiveKey:{type:[String,Number],default:void 0},position:{type:String,default:"top"},size:{type:String},type:{type:String,default:"line"},direction:{type:String,default:"horizontal"},editable:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!1},destroyOnHide:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},headerPadding:{type:Boolean,default:!0},autoSwitch:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1},trigger:{type:String,default:"click"}},emits:{"update:activeKey":a=>!0,change:a=>!0,tabClick:(a,s)=>!0,add:a=>!0,delete:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{size:o,lazyLoad:c,destroyOnHide:u,trigger:d}=toRefs(a),f=getPrefixCls("tabs"),{mergedSize:g}=useSize$1(o),y=computed(()=>a.direction==="vertical"?"left":a.position),$=computed(()=>["left","right"].includes(y.value)?"vertical":"horizontal"),{children:x,components:N}=useChildrenComponents("TabPane"),R=reactive(new Map),j=computed(()=>{const oa=[];return N.value.forEach(ca=>{const pa=R.get(ca);pa&&oa.push(pa)}),oa}),ne=computed(()=>j.value.map(oa=>oa.key)),se=(oa,ca)=>{R.set(oa,ca)},ce=oa=>{R.delete(oa)},fe=ref(a.defaultActiveKey),ea=computed(()=>{var oa;const ca=(oa=a.activeKey)!=null?oa:fe.value;return isUndefined(ca)?ne.value[0]:ca}),ta=computed(()=>{const oa=ne.value.indexOf(ea.value);return oa===-1?0:oa});provide(tabsInjectionKey,reactive({lazyLoad:c,destroyOnHide:u,activeKey:ea,addItem:se,removeItem:ce,trigger:d}));const na=oa=>{oa!==ea.value&&(fe.value=oa,s("update:activeKey",oa),s("change",oa))},aa=(oa,ca)=>{na(oa),s("tabClick",oa,ca)},ia=oa=>{s("add",oa),a.autoSwitch&&nextTick(()=>{const ca=ne.value[ne.value.length-1];na(ca)})},sa=(oa,ca)=>{s("delete",oa,ca)},ra=()=>createVNode$1("div",{class:[`${f}-content`,{[`${f}-content-hide`]:a.hideContent}]},[createVNode$1("div",{class:[`${f}-content-list`,{[`${f}-content-animation`]:a.animation}],style:{marginLeft:`-${ta.value*100}%`}},[x.value])]),la=computed(()=>[f,`${f}-${$.value}`,`${f}-${y.value}`,`${f}-type-${a.type}`,`${f}-size-${g.value}`,{[`${f}-justify`]:a.justify}]);return()=>{var oa;return x.value=(oa=l.default)==null?void 0:oa.call(l),createVNode$1("div",{class:la.value},[y.value==="bottom"&&ra(),createVNode$1(TabsNav,{tabs:j.value,activeKey:ea.value,activeIndex:ta.value,direction:$.value,position:y.value,editable:a.editable,animation:a.animation,showAddButton:a.showAddButton,headerPadding:a.headerPadding,size:g.value,type:a.type,onClick:aa,onAdd:ia,onDelete:sa},{extra:l.extra}),y.value!=="bottom"&&ra()])}}}),__defProp$c=Object.defineProperty,__getOwnPropSymbols$d=Object.getOwnPropertySymbols,__hasOwnProp$d=Object.prototype.hasOwnProperty,__propIsEnum$d=Object.prototype.propertyIsEnumerable,__defNormalProp$c=(a,s,l)=>s in a?__defProp$c(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$c=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$d.call(s,l)&&__defNormalProp$c(a,l,s[l]);if(__getOwnPropSymbols$d)for(var l of __getOwnPropSymbols$d(s))__propIsEnum$d.call(s,l)&&__defNormalProp$c(a,l,s[l]);return a};const _sfc_main$C=defineComponent({name:"TabPane",props:{title:String,disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},setup(a,{slots:s}){var l;const{title:o,disabled:c,closable:u}=toRefs(a),d=getCurrentInstance(),f=getPrefixCls("tabs"),g=inject(tabsInjectionKey,{}),y=ref(),$=computed(()=>d?.vnode.key),x=computed(()=>$.value===g.activeKey),N=ref(g.lazyLoad?x.value:!0),R=reactive({key:$,title:o,disabled:c,closable:u,slots:s});return d?.uid&&((l=g.addItem)==null||l.call(g,d.uid,R)),onBeforeUnmount(()=>{var j;d?.uid&&((j=g.removeItem)==null||j.call(g,d.uid))}),watch(x,j=>{j?N.value||(N.value=!0):(a.destroyOnHide||g.destroyOnHide)&&(N.value=!1)}),onUpdated(()=>{R.slots=__spreadValues$c({},s)}),{prefixCls:f,active:x,itemRef:y,mounted:N}}});function _sfc_render$o(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{ref:"itemRef",class:normalizeClass([`${a.prefixCls}-content-item`,{[`${a.prefixCls}-content-item-active`]:a.active}])},[a.mounted?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-pane`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0)],2)}var TabPane=_export_sfc(_sfc_main$C,[["render",_sfc_render$o]]);const Tabs=Object.assign(_Tabs,{TabPane,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Tabs.name,_Tabs),a.component(l+TabPane.name,TabPane)}});function useTimeState(a){const{modelValue:s,defaultValue:l,format:o,isRange:c}=toRefs(a);function u(){return c.value?[]:void 0}function d(se){if(!isUndefined(se))return c.value?isArray$1(se)?se:[se,void 0]:se}const f=computed(()=>{const se=d(s.value);return getDayjsValue(se,o.value)}),g=computed(()=>{const se=d(l.value);return getDayjsValue(se,o.value)}),[y,$]=useState(isUndefined(f.value)?isUndefined(g.value)?u():g.value:f.value);watch(f,()=>{isUndefined(f.value)&&$(u())});const x=computed(()=>f.value||y.value),[N,R]=useState(x.value);watch([x],()=>{R(x.value)});const[j,ne]=useState();return watch([N],()=>{ne(void 0)}),{computedValue:x,panelValue:N,inputValue:j,setValue:$,setPanelValue:R,setInputValue:ne}}var __defProp$b=Object.defineProperty,__defProps$8=Object.defineProperties,__getOwnPropDescs$8=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$c=Object.getOwnPropertySymbols,__hasOwnProp$c=Object.prototype.hasOwnProperty,__propIsEnum$c=Object.prototype.propertyIsEnumerable,__defNormalProp$b=(a,s,l)=>s in a?__defProp$b(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$b=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$c.call(s,l)&&__defNormalProp$b(a,l,s[l]);if(__getOwnPropSymbols$c)for(var l of __getOwnPropSymbols$c(s))__propIsEnum$c.call(s,l)&&__defNormalProp$b(a,l,s[l]);return a},__spreadProps$8=(a,s)=>__defProps$8(a,__getOwnPropDescs$8(s)),RangePanel=defineComponent({name:"TimePickerRangePanel",components:{Panel:Panel$1},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(a,{emit:s}){const{value:l,displayIndex:o}=toRefs(a),c=ref(o.value);watch(o,()=>{c.value=o.value});const u=computed(()=>l?.value?l.value[c.value]:void 0);function d(g){const y=isUndefined(l)||isUndefined(l?.value)?[]:[...l.value];y[c.value]=g,s("select",y)}function f(){if(isValidRangeValue$1(l?.value))s("confirm",l?.value);else{const g=(c.value+1)%2;c.value=g,s("display-index-change",g),s("update:displayIndex",g)}}return{displayValue:u,onSelect:d,onConfirm:f}},render(){const a=__spreadProps$8(__spreadValues$b({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return createVNode$1(Panel$1,a,this.$slots)}}),__defProp$a=Object.defineProperty,__getOwnPropSymbols$b=Object.getOwnPropertySymbols,__hasOwnProp$b=Object.prototype.hasOwnProperty,__propIsEnum$b=Object.prototype.propertyIsEnumerable,__defNormalProp$a=(a,s,l)=>s in a?__defProp$a(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$a=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$b.call(s,l)&&__defNormalProp$a(a,l,s[l]);if(__getOwnPropSymbols$b)for(var l of __getOwnPropSymbols$b(s))__propIsEnum$b.call(s,l)&&__defNormalProp$a(a,l,s[l]);return a};const _sfc_main$B=defineComponent({name:"TimePicker",components:{Trigger,DateInput,DateRangeInput,Panel:Panel$1,RangePanel,IconClockCircle},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:[String,Array]},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(a,s)=>!0,"update:modelValue":a=>!0,select:(a,s)=>!0,clear:()=>!0,"popup-visible-change":a=>!0,"update:popupVisible":a=>!0},setup(a,{emit:s}){const{type:l,format:o,use12Hours:c,modelValue:u,defaultValue:d,popupVisible:f,defaultPopupVisible:g,disabled:y,placeholder:$,disableConfirm:x,disabledHours:N,disabledMinutes:R,disabledSeconds:j}=toRefs(a),{mergedDisabled:ne,eventHandlers:se}=useFormItem({disabled:y}),ce=computed(()=>l.value==="time-range"),fe=getPrefixCls("timepicker"),ea=ref(),{format:ta,use12Hours:na}=useTimeFormat(reactive({format:o,use12Hours:c})),{computedValue:aa,panelValue:ia,inputValue:sa,setValue:ra,setPanelValue:la,setInputValue:oa}=useTimeState(reactive({modelValue:u,defaultValue:d,isRange:ce,format:ta})),[ca,pa]=useMergeState(g.value,reactive({value:f})),ua=Sa=>{Sa!==ca.value&&(pa(Sa),s("popup-visible-change",Sa),s("update:popupVisible",Sa))},{t:da}=useI18n(),[ha,ga]=useState(0),fa=computed(()=>{const Sa=$?.value;return ce.value?isUndefined(Sa)?da("datePicker.rangePlaceholder.time"):isArray$1(Sa)?Sa:[Sa,Sa]:isUndefined(Sa)?da("datePicker.placeholder.time"):Sa}),ma=useIsDisabledTime(reactive({disabledHours:N,disabledMinutes:R,disabledSeconds:j}));function va(Sa){var Fa,Ia;if(isValueChange(Sa,aa.value)){const Ga=getFormattedValue(Sa,ta.value),Ya=getDateValue$1(Sa);s("update:modelValue",Ga),s("change",Ga,Ya),(Ia=(Fa=se.value)==null?void 0:Fa.onChange)==null||Ia.call(Fa)}}function ka(Sa,Fa){if(ma(Sa))return;let Ia=Sa;if(isArray$1(Sa)){const Ga=dayjs();Ia=Sa.map(Ya=>(Ya&&(Ya=Ya.year(Ga.year()),Ya=Ya.month(Ga.month()),Ya=Ya.date(Ga.date())),Ya)),isValidRangeValue$1(Ia)&&(Ia=getSortedDayjsArray(Ia)),Ia?.length===0&&(Ia=void 0)}va(Ia),ra(Ia),Fa!==ca.value&&ua(Fa)}function ya(Sa,Fa){la(Sa),Fa!==ca.value&&ua(Fa)}function ba(Sa){ea.value&&ea.value.focus&&ea.value.focus(Sa)}function Ea(Sa){ne.value||(ua(Sa),Sa&&nextTick(()=>{ba(ha.value)}))}function Ca(Sa){const Fa=getFormattedValue(Sa,ta.value),Ia=getDateValue$1(Sa);s("select",Fa,Ia),x.value&&(!ce.value||isValidRangeValue$1(Sa))?ka(Sa,!0):(ya(Sa,!0),oa(void 0))}function $a(Sa){ka(Sa,!1)}function Pa(){ka(ia.value||aa.value,!1)}function Da(){if(isValidRangeValue$1(ia.value))ka(ia.value,!1);else{const Sa=(ha.value+1)%2;ga(Sa),ba(Sa)}}function Ta(Sa){ua(!0);const Fa=Sa.target.value;if(oa(Fa),!isValidInputValue(Fa,ta.value))return;const Ia=dayjs(Fa,ta.value);ma(Ia)||(x.value?ka(Ia,!0):ya(Ia,!0))}function Ba(Sa){ua(!0);const Fa=Sa.target.value,Ia=isArray$1(sa.value)?[...sa.value]:isArray$1(ia.value)&&getFormattedValue(ia.value,ta.value)||[];if(Ia[ha.value]=Fa,oa(Ia),!isValidInputValue(Fa,ta.value))return;const Ga=dayjs(Fa,ta.value);if(ma(Ga))return;const Ya=isArray$1(ia.value)?[...ia.value]:[];Ya[ha.value]=Ga,x.value&&isValidRangeValue$1(Ya)?ka(Ya,!0):ya(Ya,!0)}function wa(Sa){Sa.stopPropagation(),la(void 0),ka(void 0,ce.value)}watch(ca,(Sa,Fa)=>{Sa!==Fa&&la(aa.value),Sa||oa(void 0)});const Oa=computed(()=>ce.value?{focusedIndex:ha.value,onFocusedIndexChange:Sa=>{ga(Sa)},onChange:Ba,onPressEnter:Da}:{onChange:Ta,onPressEnter:Pa}),Aa=computed(()=>ce.value?{displayIndex:ha.value,onDisplayIndexChange:Sa=>{ga(Sa),ba(Sa)}}:{});return{refInput:ea,isRange:ce,prefixCls:fe,panelVisible:ca,focusedInputIndex:ha,computedPlaceholder:fa,panelValue:ia,inputValue:sa,computedFormat:ta,computedUse12Hours:na,inputProps:Oa,panelProps:Aa,mergedDisabled:ne,onPanelVisibleChange:Ea,onInputClear:wa,onPanelSelect:Ca,onPanelConfirm:$a,onPanelClick:()=>{ba(ha.value)}}}});function _sfc_render$n(a,s,l,o,c,u){const d=resolveComponent("IconClockCircle"),f=resolveComponent("Trigger");return openBlock(),createBlock(f,mergeProps({trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:a.position,disabled:a.mergedDisabled||a.readonly,"popup-offset":4,"popup-visible":a.panelVisible,"prevent-focus":!0,"unmount-on-close":a.unmountOnClose,"popup-container":a.popupContainer},__spreadValues$a({},a.triggerProps),{onPopupVisibleChange:a.onPanelVisibleChange}),{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-container`),onClick:s[0]||(s[0]=(...g)=>a.onPanelClick&&a.onPanelClick(...g))},[(openBlock(),createBlock(resolveDynamicComponent(a.isRange?"RangePanel":"Panel"),mergeProps(a.panelProps,{value:a.panelValue,visible:a.panelVisible,format:a.computedFormat,"use12-hours":a.computedUse12Hours,step:a.step,"disabled-hours":a.disabledHours,"disabled-minutes":a.disabledMinutes,"disabled-seconds":a.disabledSeconds,"hide-disabled-options":a.hideDisabledOptions,"hide-footer":a.disableConfirm,onSelect:a.onPanelSelect,onConfirm:a.onPanelConfirm}),createSlots({_:2},[a.$slots.extra?{name:"extra-footer",fn:withCtx(()=>[renderSlot(a.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(a.isRange?"DateRangeInput":"DateInput"),mergeProps(__spreadValues$a(__spreadValues$a({},a.$attrs),a.inputProps),{ref:"refInput","input-value":a.inputValue,value:a.panelValue,size:a.size,focused:a.panelVisible,format:a.computedFormat,visible:a.panelVisible,disabled:a.mergedDisabled,error:a.error,readonly:a.readonly,editable:!a.readonly,"allow-clear":a.allowClear&&!a.readonly,placeholder:a.computedPlaceholder,onClear:a.onInputClear}),createSlots({"suffix-icon":withCtx(()=>[renderSlot(a.$slots,"suffix-icon",{},()=>[createVNode$1(d)])]),_:2},[a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","readonly","editable","allow-clear","placeholder","onClear"]))]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var _TimePicker=_export_sfc(_sfc_main$B,[["render",_sfc_render$n]]);const TimePicker=Object.assign(_TimePicker,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_TimePicker.name,_TimePicker)}}),timelineInjectionKey=Symbol("ArcoTimeline");var __defProp$9=Object.defineProperty,__getOwnPropSymbols$a=Object.getOwnPropertySymbols,__hasOwnProp$a=Object.prototype.hasOwnProperty,__propIsEnum$a=Object.prototype.propertyIsEnumerable,__defNormalProp$9=(a,s,l)=>s in a?__defProp$9(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$9=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$a.call(s,l)&&__defNormalProp$9(a,l,s[l]);if(__getOwnPropSymbols$a)for(var l of __getOwnPropSymbols$a(s))__propIsEnum$a.call(s,l)&&__defNormalProp$9(a,l,s[l]);return a};const getDefaultPosition=(a,s,l,o)=>{let c=["left","right"];l==="horizontal"&&(c=["top","bottom"]);const u=s==="alternate"?o||c[a%2]:s;return c.indexOf(u)>-1?u:c[0]},_sfc_main$A=defineComponent({name:"TimelineItem",props:{dotColor:{type:String},dotType:{type:String,default:"solid"},lineType:{type:String,default:"solid"},lineColor:{type:String},label:{type:String},position:{type:String}},setup(a){const s=getPrefixCls("timeline-item"),l=getCurrentInstance(),o=inject(timelineInjectionKey,{}),c=computed(()=>{var N,R,j;return(j=(R=o.items)==null?void 0:R.indexOf((N=l?.uid)!=null?N:-1))!=null?j:-1}),u=computed(()=>{var N;return(N=o?.direction)!=null?N:"vertical"}),d=computed(()=>{var N;return(N=o?.labelPosition)!=null?N:"same"}),f=computed(()=>{const{items:N=[],reverse:R,labelPosition:j,mode:ne="left"}=o,se=u.value,ce=getDefaultPosition(c.value,ne,se,a.position);return[s,{[`${s}-${se}-${ce}`]:se,[`${s}-label-${j}`]:j,[`${s}-last`]:c.value===(R===!0?0:N.length-1)}]}),g=computed(()=>[`${s}-dot-line`,`${s}-dot-line-is-${u.value}`]),y=computed(()=>{const{direction:N}=o||{};return __spreadValues$9({[N==="horizontal"?"borderTopStyle":"borderLeftStyle"]:a.lineType},a.lineColor?{borderColor:a.lineColor}:{})}),$=computed(()=>[`${s}-dot`,`${s}-dot-${a.dotType}`]),x=computed(()=>({[a.dotType==="solid"?"backgroundColor":"borderColor"]:a.dotColor}));return{cls:f,dotLineCls:g,dotTypeCls:$,prefixCls:s,computedDotLineStyle:y,computedDotStyle:x,labelPosition:d}}});function _sfc_render$m(a,s,l,o,c,u){return openBlock(),createElementBlock("div",{role:"listitem",class:normalizeClass(a.cls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-dot-wrapper`)},[createBaseVNode("div",{class:normalizeClass(a.dotLineCls),style:normalizeStyle$1(a.computedDotLineStyle)},null,6),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-dot-content`)},[a.$slots.dot?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-dot-custom`)},[renderSlot(a.$slots,"dot")],2)):(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(a.dotTypeCls),style:normalizeStyle$1(a.computedDotStyle)},null,6))],2)],2),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-content-wrapper`)},[a.$slots.default?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-content`)},[renderSlot(a.$slots,"default")],2)):createCommentVNode("v-if",!0),a.labelPosition!=="relative"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(`${a.prefixCls}-label`)},[a.$slots.label?renderSlot(a.$slots,"label",{key:0}):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(a.label),1)],2112))],2)):createCommentVNode("v-if",!0)],2),a.labelPosition==="relative"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-label`)},[a.$slots.label?renderSlot(a.$slots,"label",{key:0}):(openBlock(),createElementBlock(Fragment,{key:1},[createTextVNode(toDisplayString(a.label),1)],2112))],2)):createCommentVNode("v-if",!0)],2)}var TimelineItem=_export_sfc(_sfc_main$A,[["render",_sfc_render$m]]),_Timeline=defineComponent({name:"Timeline",components:{Item:TimelineItem,Spin},props:{reverse:{type:Boolean},direction:{type:String,default:"vertical"},mode:{type:String,default:"left"},pending:{type:[Boolean,String]},labelPosition:{type:String,default:"same"}},setup(a,{slots:s}){const l=getPrefixCls("timeline"),o=computed(()=>a.pending||s.pending),{children:c,components:u}=useChildrenComponents("TimelineItem"),{reverse:d,direction:f,labelPosition:g,mode:y}=toRefs(a),$=reactive({items:u,direction:f,reverse:d,labelPosition:g,mode:y});provide(timelineInjectionKey,$);const x=computed(()=>[l,`${l}-${a.mode}`,`${l}-direction-${a.direction}`,{[`${l}-is-reverse`]:a.reverse}]);return()=>{var N,R;return o.value?c.value=(N=s.default)==null?void 0:N.call(s).concat(createVNode$1(TimelineItem,{lineType:"dashed"},{default:()=>[a.pending!==!0&&createVNode$1("div",null,[a.pending])],dot:()=>{var j,ne;return(ne=(j=s.dot)==null?void 0:j.call(s))!=null?ne:createVNode$1(Spin,{size:12},null)}})):c.value=(R=s.default)==null?void 0:R.call(s),createVNode$1("div",{role:"list",class:x.value},[c.value])}}});const Timeline=Object.assign(_Timeline,{Item:TimelineItem,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Timeline.name,_Timeline),a.component(l+TimelineItem.name,TimelineItem)}}),_sfc_main$z=defineComponent({name:"IconDelete",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-delete`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$p=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$j=createBaseVNode("path",{d:"M5 11h5.5m0 0v29a1 1 0 0 0 1 1h25a1 1 0 0 0 1-1V11m-27 0H16m21.5 0H43m-5.5 0H32m-16 0V7h16v4m-16 0h16M20 18v15m8-15v15"},null,-1),_hoisted_3$g=[_hoisted_2$j];function _sfc_render$l(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$g,14,_hoisted_1$p)}var _IconDelete=_export_sfc(_sfc_main$z,[["render",_sfc_render$l]]);const IconDelete=Object.assign(_IconDelete,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconDelete.name,_IconDelete)}}),transferInjectionKey=Symbol("ArcoTransfer");var TransferListItem=defineComponent({name:"TransferListItem",props:{type:{type:String},data:{type:Object,required:!0},allowClear:{type:Boolean},disabled:{type:Boolean},draggable:{type:Boolean},simple:Boolean},setup(a){const s=getPrefixCls("transfer-list-item"),l=inject(transferInjectionKey,void 0),o=()=>{a.simple&&!a.disabled&&l?.moveTo([a.data.value],a.type==="target"?"source":"target")},c=computed(()=>[s,{[`${s}-disabled`]:a.disabled,[`${s}-draggable`]:a.draggable}]),u=()=>{l?.moveTo([a.data.value],"source")};return()=>{var d,f,g;return createVNode$1("div",{class:c.value,onClick:o},[a.allowClear||a.simple?createVNode$1("span",{class:`${s}-content`},[(g=(f=l==null?void 0:(d=l.slots).item)==null?void 0:f.call(d,{label:a.data.label,value:a.data.value}))!=null?g:a.data.label]):createVNode$1(Checkbox,{class:[`${s}-content`,`${s}-checkbox`],modelValue:l?.selected,value:a.data.value,onChange:y=>l?.onSelect(y),uninjectGroupContext:!0,disabled:a.disabled},{default:()=>{var y,$,x;return[(x=($=l==null?void 0:(y=l.slots).item)==null?void 0:$.call(y,{label:a.data.label,value:a.data.value}))!=null?x:a.data.label]}}),a.allowClear&&!a.disabled&&createVNode$1(IconHover,{class:`${s}-remove-btn`,onClick:u},{default:()=>[createVNode$1(IconClose,null,null)]})])}}});const _sfc_main$y=defineComponent({name:"TransferView",components:{Empty:Empty$1,Checkbox,IconHover,IconDelete,InputSearch:Input.Search,List,TransferListItem,Scrollbar},props:{type:{type:String},dataInfo:{type:Object,required:!0},title:String,data:{type:Array,required:!0},disabled:Boolean,allowClear:Boolean,selected:{type:Array,required:!0},showSearch:Boolean,showSelectAll:Boolean,simple:Boolean,inputSearchProps:{type:Object}},emits:["search"],setup(a,{emit:s}){const l=getPrefixCls("transfer-view"),o=ref(""),c=inject(transferInjectionKey,void 0),u=computed(()=>a.dataInfo.selected.length),d=computed(()=>a.dataInfo.data.length),f=computed(()=>a.dataInfo.selected.length>0&&a.dataInfo.selected.length===a.dataInfo.allValidValues.length),g=computed(()=>a.dataInfo.selected.length>0&&a.dataInfo.selected.length<a.dataInfo.allValidValues.length),y=R=>{R?c?.onSelect([...a.selected,...a.dataInfo.allValidValues]):c?.onSelect(a.selected.filter(j=>!a.dataInfo.allValidValues.includes(j)))},$=computed(()=>a.dataInfo.data.filter(R=>o.value?R.label.includes(o.value):!0));return{prefixCls:l,filteredData:$,filter:o,checked:f,indeterminate:g,countSelected:u,countRendered:d,handleSelectAllChange:y,handleSearch:R=>{s("search",R,a.type)},handleClear:()=>{c?.moveTo(a.dataInfo.allValidValues,"source")},transferCtx:c}}});function _sfc_render$k(a,s,l,o,c,u){const d=resolveComponent("checkbox"),f=resolveComponent("icon-delete"),g=resolveComponent("icon-hover"),y=resolveComponent("input-search"),$=resolveComponent("transfer-list-item"),x=resolveComponent("list"),N=resolveComponent("Scrollbar"),R=resolveComponent("Empty");return openBlock(),createElementBlock("div",{class:normalizeClass(a.prefixCls)},[createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-header`)},[renderSlot(a.$slots,"title",{countTotal:a.dataInfo.data.length,countSelected:a.dataInfo.selected.length,searchValue:a.filter,checked:a.checked,indeterminate:a.indeterminate,onSelectAllChange:a.handleSelectAllChange,onClear:a.handleClear},()=>[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-header-title`)},[a.allowClear||a.simple||!a.showSelectAll?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(`${a.prefixCls}-header-title-simple`)},toDisplayString(a.title),3)):(openBlock(),createBlock(d,{key:1,"model-value":a.checked,indeterminate:a.indeterminate,disabled:a.disabled,"uninject-group-context":"",onChange:a.handleSelectAllChange},{default:withCtx(()=>[createTextVNode(toDisplayString(a.title),1)]),_:1},8,["model-value","indeterminate","disabled","onChange"]))],2),a.allowClear?(openBlock(),createBlock(g,{key:0,disabled:a.disabled,class:normalizeClass(`${a.prefixCls}-header-clear-btn`),onClick:a.handleClear},{default:withCtx(()=>[createVNode$1(f)]),_:1},8,["disabled","class","onClick"])):a.simple?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${a.prefixCls}-header-count`)},toDisplayString(a.dataInfo.selected.length)+" / "+toDisplayString(a.dataInfo.data.length),3))])],2),a.showSearch?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-search`)},[createVNode$1(y,mergeProps({modelValue:a.filter,"onUpdate:modelValue":s[0]||(s[0]=j=>a.filter=j),disabled:a.disabled},a.inputSearchProps,{onChange:a.handleSearch}),null,16,["modelValue","disabled","onChange"])],2)):createCommentVNode("v-if",!0),createBaseVNode("div",{class:normalizeClass(`${a.prefixCls}-body`)},[a.filteredData.length>0?(openBlock(),createBlock(N,{key:0},{default:withCtx(()=>{var j,ne;return[renderSlot(a.$slots,"default",{data:a.filteredData,selectedKeys:(j=a.transferCtx)==null?void 0:j.selected,onSelect:(ne=a.transferCtx)==null?void 0:ne.onSelect},()=>[createVNode$1(x,{class:normalizeClass(`${a.prefixCls}-list`),bordered:!1,scrollbar:!1},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.filteredData,se=>(openBlock(),createBlock($,{key:se.value,type:a.type,data:se,simple:a.simple,"allow-clear":a.allowClear,disabled:a.disabled||se.disabled},null,8,["type","data","simple","allow-clear","disabled"]))),128))]),_:1},8,["class"])])]}),_:3})):(openBlock(),createBlock(R,{key:1,class:normalizeClass(`${a.prefixCls}-empty`)},null,8,["class"]))],2)],2)}var TransferView=_export_sfc(_sfc_main$y,[["render",_sfc_render$k]]);const _sfc_main$x=defineComponent({name:"Transfer",components:{ArcoButton:Button,TransferView,IconLeft,IconRight},props:{data:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:()=>[]},selected:{type:Array,default:void 0},defaultSelected:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},oneWay:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},showSelectAll:{type:Boolean,default:!0},title:{type:Array,default:()=>["Source","Target"]},sourceInputSearchProps:{type:Object},targetInputSearchProps:{type:Object}},emits:{"update:modelValue":a=>!0,"update:selected":a=>!0,change:a=>!0,select:a=>!0,search:(a,s)=>!0},setup(a,{emit:s,slots:l}){const{mergedDisabled:o,eventHandlers:c}=useFormItem({disabled:toRef(a,"disabled")}),u=getPrefixCls("transfer"),d=ref(a.defaultValue),f=computed(()=>{var fe;return(fe=a.modelValue)!=null?fe:d.value}),g=ref(a.defaultSelected),y=computed(()=>{var fe;return(fe=a.selected)!=null?fe:g.value}),$=computed(()=>{var fe;return(fe=a.title)==null?void 0:fe[0]}),x=computed(()=>{var fe;return(fe=a.title)==null?void 0:fe[1]}),N=computed(()=>{const fe={data:[],allValidValues:[],selected:[],validSelected:[]},ea={data:[],allValidValues:[],selected:[],validSelected:[]};for(const ta of a.data)f.value.includes(ta.value)?(ea.data.push(ta),ta.disabled||ea.allValidValues.push(ta.value),y.value.includes(ta.value)&&(ea.selected.push(ta.value),ta.disabled||ea.validSelected.push(ta.value))):(fe.data.push(ta),ta.disabled||fe.allValidValues.push(ta.value),y.value.includes(ta.value)&&(fe.selected.push(ta.value),ta.disabled||fe.validSelected.push(ta.value)));return{sourceInfo:fe,targetInfo:ea}}),R=(fe,ea)=>{s("search",fe,ea)},j=(fe,ea)=>{var ta,na;const aa=ea==="target"?[...f.value,...fe]:f.value.filter(ia=>!fe.includes(ia));se(N.value[ea==="target"?"targetInfo":"sourceInfo"].selected),d.value=aa,s("update:modelValue",aa),s("change",aa),(na=(ta=c.value)==null?void 0:ta.onChange)==null||na.call(ta)},ne=fe=>{const ea=fe==="target"?N.value.sourceInfo.validSelected:N.value.targetInfo.validSelected;j(ea,fe)},se=fe=>{g.value=fe,s("update:selected",fe),s("select",fe)};provide(transferInjectionKey,reactive({selected:y,slots:l,moveTo:j,onSelect:se}));const ce=computed(()=>[u,{[`${u}-simple`]:a.simple,[`${u}-disabled`]:o.value}]);return{prefixCls:u,cls:ce,dataInfo:N,computedSelected:y,mergedDisabled:o,sourceTitle:$,targetTitle:x,handleClick:ne,handleSearch:R}}});function _sfc_render$j(a,s,l,o,c,u){const d=resolveComponent("transfer-view"),f=resolveComponent("icon-right"),g=resolveComponent("arco-button"),y=resolveComponent("icon-left");return openBlock(),createElementBlock("div",{class:normalizeClass(a.cls)},[createVNode$1(d,{type:"source",class:normalizeClass(`${a.prefixCls}-view-source`),title:a.sourceTitle,"data-info":a.dataInfo.sourceInfo,data:a.dataInfo.sourceInfo.data,disabled:a.mergedDisabled,selected:a.computedSelected,"show-search":a.showSearch,"show-select-all":a.showSelectAll,simple:a.simple,"input-search-props":a.sourceInputSearchProps,onSearch:a.handleSearch},createSlots({_:2},[a.$slots.source?{name:"default",fn:withCtx($=>[renderSlot(a.$slots,"source",normalizeProps(guardReactiveProps($)))])}:void 0,a.$slots["source-title"]?{name:"title",fn:withCtx($=>[renderSlot(a.$slots,"source-title",normalizeProps(guardReactiveProps($)))])}:void 0]),1032,["class","title","data-info","data","disabled","selected","show-search","show-select-all","simple","input-search-props","onSearch"]),a.simple?createCommentVNode("v-if",!0):(openBlock(),createElementBlock("div",{key:0,class:normalizeClass([`${a.prefixCls}-operations`])},[createVNode$1(g,{tabindex:"-1","aria-label":"Move selected right",size:"small",shape:"round",disabled:a.dataInfo.sourceInfo.validSelected.length===0,onClick:s[0]||(s[0]=$=>a.handleClick("target"))},{icon:withCtx(()=>[renderSlot(a.$slots,"to-target-icon",{},()=>[createVNode$1(f)])]),_:3},8,["disabled"]),a.oneWay?createCommentVNode("v-if",!0):(openBlock(),createBlock(g,{key:0,tabindex:"-1","aria-label":"Move selected left",size:"small",shape:"round",disabled:a.dataInfo.targetInfo.validSelected.length===0,onClick:s[1]||(s[1]=$=>a.handleClick("source"))},{icon:withCtx(()=>[renderSlot(a.$slots,"to-source-icon",{},()=>[createVNode$1(y)])]),_:3},8,["disabled"]))],2)),createVNode$1(d,{type:"target",class:normalizeClass(`${a.prefixCls}-view-target`),title:a.targetTitle,"data-info":a.dataInfo.targetInfo,data:a.dataInfo.targetInfo.data,disabled:a.mergedDisabled,selected:a.computedSelected,"allow-clear":a.oneWay,"show-search":a.showSearch,"show-select-all":a.showSelectAll,simple:a.simple,"input-search-props":a.targetInputSearchProps,onSearch:a.handleSearch},createSlots({_:2},[a.$slots.target?{name:"default",fn:withCtx($=>[renderSlot(a.$slots,"target",normalizeProps(guardReactiveProps($)))])}:void 0,a.$slots["target-title"]?{name:"title",fn:withCtx($=>[renderSlot(a.$slots,"target-title",normalizeProps(guardReactiveProps($)))])}:void 0]),1032,["class","title","data-info","data","disabled","selected","allow-clear","show-search","show-select-all","simple","input-search-props","onSearch"])],2)}var _Transfer=_export_sfc(_sfc_main$x,[["render",_sfc_render$j]]);const Transfer=Object.assign(_Transfer,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Transfer.name,_Transfer)}}),TreeInjectionKey=Symbol("TreeInjectionKey");function getFlattenTreeData(a){const s=[];function l(o){o&&o.forEach(c=>{s.push(c),l(c.children)})}return l(a),s}function getKey2TreeNode(a){const s=new Map;return a.forEach(l=>{s.set(l.key,l)}),s}function isNodeSelectable(a){return a.selectable&&!a.disabled}function isNodeExpandable(a){return!a.isLeaf&&a.children}function isLeafNode(a){return isBoolean$1(a.isLeaf)?a.isLeaf:!a.children}function SetAdd(a){return Set.prototype.add.bind(a)}function SetDelete(a){return Set.prototype.delete.bind(a)}function isNodeCheckable(a){return a.disabled||a.disableCheckbox?!1:!!a.checkable}function getChildrenKeys(a){var s;const l=[];return(s=a.children)==null||s.forEach(o=>{isNodeCheckable(o)&&l.push(o.key,...getChildrenKeys(o))}),l}function updateParent(a){var s;const{node:l,checkedKeySet:o,indeterminateKeySet:c}=a;let u=l.parent;for(;u;){if(isNodeCheckable(u)){const d=u.key,f=((s=u.children)==null?void 0:s.filter(isNodeCheckable))||[];let g=0;const y=f.length;f.some(({key:$})=>{if(o.has($))g+=1;else if(c.has($))return g+=.5,!0;return!1}),g&&g!==y?c.add(d):c.delete(d),g&&g===y?o.add(d):o.delete(d)}u=u.parent}}function getCheckedStateByCheck(a){const{node:s,checked:l,checkedKeys:o,indeterminateKeys:c,checkStrictly:u=!1}=a,{key:d}=s,f=new Set(o),g=new Set(c);if(l?f.add(d):f.delete(d),g.delete(d),!u){const y=getChildrenKeys(s);l?y.forEach(SetAdd(f)):y.forEach(SetDelete(f)),y.forEach(SetDelete(g)),updateParent({node:s,checkedKeySet:f,indeterminateKeySet:g})}return[[...f],[...g]]}function getCheckedStateByInitKeys(a){const{initCheckedKeys:s,key2TreeNode:l,checkStrictly:o,onlyCheckLeaf:c}=a,u=new Set,d=new Set,f=new Set;return o?s.forEach(SetAdd(u)):s.forEach(g=>{var y;const $=l.get(g);if(!$||d.has(g)||c&&((y=$.children)!=null&&y.length))return;const x=getChildrenKeys($);x.forEach(SetAdd(d)),x.forEach(SetDelete(f)),u.add(g),f.delete(g),updateParent({node:$,checkedKeySet:u,indeterminateKeySet:f})}),[[...u,...d],[...f]]}function useTreeContext(){return inject(TreeInjectionKey)||{}}const _sfc_main$w=defineComponent({name:"IconFile",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-file`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$o=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$i=createBaseVNode("path",{d:"M16 21h16m-16 8h10m11 13H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),_hoisted_3$f=[_hoisted_2$i];function _sfc_render$i(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$f,14,_hoisted_1$o)}var _IconFile=_export_sfc(_sfc_main$w,[["render",_sfc_render$i]]);const IconFile=Object.assign(_IconFile,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFile.name,_IconFile)}});var _sfc_main$v=defineComponent({name:"TreeNodeSwitcher",components:{IconLoading,RenderFunction},props:{prefixCls:String,loading:Boolean,showLine:Boolean,treeNodeData:{type:Object},icons:{type:Object},nodeStatus:{type:Object}},emits:["click"],setup(a,{slots:s,emit:l}){const{icons:o,nodeStatus:c,treeNodeData:u}=toRefs(a),d=useTreeContext(),f=usePickSlots(s,"switcher-icon"),g=usePickSlots(s,"loading-icon");return{getSwitcherIcon:()=>{var y,$,x;const N=($=(y=o?.value)==null?void 0:y.switcherIcon)!=null?$:f.value;return N?N(c.value):(x=d.switcherIcon)==null?void 0:x.call(d,u.value,c.value)},getLoadingIcon:()=>{var y,$,x;const N=($=(y=o?.value)==null?void 0:y.loadingIcon)!=null?$:g.value;return N?N(c.value):(x=d.loadingIcon)==null?void 0:x.call(d,u.value,c.value)},onClick(y){l("click",y)}}},render(){var a,s,l;const{prefixCls:o,getSwitcherIcon:c,getLoadingIcon:u,onClick:d,nodeStatus:f={},loading:g,showLine:y}=this,{expanded:$,isLeaf:x}=f;if(g)return(a=u())!=null?a:h$1(IconLoading);let N=null,R=!1;if(x)y&&(N=(l=c())!=null?l:h$1(IconFile));else{const ne=y?h$1("span",{class:`${o}-${$?"minus":"plus"}-icon`}):h$1(IconCaretDown);N=(s=c())!=null?s:ne,R=!y}if(!N)return null;const j=h$1("span",{class:`${o}-switcher-icon`,onClick:d},N);return R?h$1(IconHover,{class:`${o}-icon-hover`},()=>j):j}}),__defProp$8=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$9=Object.getOwnPropertySymbols,__hasOwnProp$9=Object.prototype.hasOwnProperty,__propIsEnum$9=Object.prototype.propertyIsEnumerable,__defNormalProp$8=(a,s,l)=>s in a?__defProp$8(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$8=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$9.call(s,l)&&__defNormalProp$8(a,l,s[l]);if(__getOwnPropSymbols$9)for(var l of __getOwnPropSymbols$9(s))__propIsEnum$9.call(s,l)&&__defNormalProp$8(a,l,s[l]);return a},__spreadProps$7=(a,s)=>__defProps$7(a,__getOwnPropDescs$7(s));const generateKey=(()=>{let a=0;return()=>(a+=1,`__arco_tree${a}`)})();function getBoolean(a,s){return!!(isUndefined(a)?s:a)}function mapObject(a,s){const l=__spreadValues$8({},a);return s&&Object.keys(s).forEach(c=>{const u=s[c];u!==c&&(l[c]=a[u],delete l[u])}),l}function getEnableResult({subEnable:a,superEnable:s,isLeaf:l,treeNodeData:o,level:c}){return isUndefined(a)?isFunction$1(s)?s(o,{isLeaf:l,level:c}):s??!1:a}function generateNode(a){var s,l;const{treeNodeData:o,parentNode:c,isTail:u=!0,treeProps:d}=a,{fieldNames:f}=d||{},g=mapObject(o,f),y=d.loadMore?!!g.isLeaf:!((s=g.children)!=null&&s.length),$=c?c.level+1:0,x=__spreadProps$7(__spreadValues$8({},omit(g,["children"])),{key:(l=g.key)!=null?l:generateKey(),selectable:getEnableResult({subEnable:g.selectable,superEnable:d?.selectable,isLeaf:y,level:$,treeNodeData:o}),disabled:!!g.disabled,disableCheckbox:!!g.disableCheckbox,checkable:getEnableResult({subEnable:g.checkable,superEnable:d?.checkable,isLeaf:y,level:$,treeNodeData:o}),isLeaf:y,isTail:u,blockNode:!!d?.blockNode,showLine:!!d?.showLine,level:$,lineless:c?[...c.lineless,c.isTail]:[],draggable:getBoolean(g.draggable,d?.draggable)});return __spreadProps$7(__spreadValues$8({},x),{treeNodeProps:x,treeNodeData:o,parent:c,parentKey:c?.key,pathParentKeys:c?[...c.pathParentKeys,c.key]:[]})}function generateTreeData(a,s){function l(o,c){if(!o)return;const{fieldNames:u}=s,d=[];return o.forEach((f,g)=>{const y=generateNode({treeNodeData:f,treeProps:s,parentNode:c,isTail:g===o.length-1});y.children=l(f[u?.children||"children"],y),d.push(y)}),d}return l(a)}function useNodeKey(){const a=getCurrentInstance(),s=()=>{var o;return(o=a?.vnode.key)!=null?o:generateKey()},l=ref(s());return onUpdated(()=>{l.value=s()}),l}function useDraggable(a){const{key:s,refTitle:l}=toRefs(a),o=useTreeContext(),c=ref(!1),u=ref(!1),d=ref(!1),f=ref(0),g=throttleByRaf(y=>{if(!l.value)return;const $=l.value.getBoundingClientRect(),x=window.pageYOffset+$.top,{pageY:N}=y,R=$.height/4,j=N-x;f.value=j<R?-1:j<$.height-R?0:1,d.value=o.allowDrop?o.allowDrop(s.value,f.value):!0});return{isDragOver:c,isDragging:u,isAllowDrop:d,dropPosition:f,setDragStatus(y,$){switch(y){case"dragStart":u.value=!0,f.value=0,o.onDragStart&&o.onDragStart(s.value,$);break;case"dragEnd":u.value=!1,c.value=!1,f.value=0,g.cancel(),o.onDragEnd&&o.onDragEnd(s.value,$);break;case"dragOver":c.value=!0,g($),o.onDragOver&&o.onDragOver(s.value,$);break;case"dragLeave":c.value=!1,f.value=0,g.cancel(),o.onDragLeave&&o.onDragLeave(s.value,$);break;case"drop":o.onDrop&&o.onDrop(s.value,f.value,$),c.value=!1,f.value=0,g.cancel();break}}}}function toArray(a){return isArray$1(a)?a:[a]}const _sfc_main$u=defineComponent({name:"BaseTreeNode",components:{NodeSwitcher:_sfc_main$v,Checkbox,RenderFunction,IconDragDotVertical},props:{title:{type:String},selectable:{type:Boolean},disabled:{type:Boolean},disableCheckbox:{type:Boolean},checkable:{type:Boolean},draggable:{type:Boolean},isLeaf:{type:Boolean},icon:{type:Function},switcherIcon:{type:Function},loadingIcon:{type:Function},dragIcon:{type:Function},isTail:{type:Boolean},blockNode:{type:Boolean},showLine:{type:Boolean},level:{type:Number,default:0},lineless:{type:Array,default:()=>[]}},setup(a){const s=useNodeKey(),l=getPrefixCls("tree-node"),o=useTreeContext(),c=computed(()=>{var ga;return(ga=o.key2TreeNode)==null?void 0:ga.get(s.value)}),u=computed(()=>c.value.treeNodeData),d=computed(()=>c.value.children),f=computed(()=>{var ga;const fa=(ga=o.treeProps)==null?void 0:ga.actionOnNodeClick;return fa?toArray(fa):[]}),{isLeaf:g,isTail:y,selectable:$,disabled:x,disableCheckbox:N,draggable:R}=toRefs(a),j=computed(()=>{var ga;return[`${l}`,{[`${l}-selected`]:sa.value,[`${l}-is-leaf`]:g.value,[`${l}-is-tail`]:y.value,[`${l}-expanded`]:ra.value,[`${l}-disabled-selectable`]:!$.value&&!((ga=o.treeProps)!=null&&ga.disableSelectActionOnly),[`${l}-disabled`]:x.value}]}),ne=ref(),{isDragOver:se,isDragging:ce,isAllowDrop:fe,dropPosition:ea,setDragStatus:ta}=useDraggable(reactive({key:s,refTitle:ne})),na=computed(()=>[`${l}-title`,{[`${l}-title-draggable`]:R.value,[`${l}-title-gap-top`]:se.value&&fe.value&&ea.value<0,[`${l}-title-gap-bottom`]:se.value&&fe.value&&ea.value>0,[`${l}-title-highlight`]:!ce.value&&se.value&&fe.value&&ea.value===0,[`${l}-title-dragging`]:ce.value,[`${l}-title-block`]:c.value.blockNode}]),aa=computed(()=>{var ga,fa;return(fa=(ga=o.checkedKeys)==null?void 0:ga.includes)==null?void 0:fa.call(ga,s.value)}),ia=computed(()=>{var ga,fa;return(fa=(ga=o.indeterminateKeys)==null?void 0:ga.includes)==null?void 0:fa.call(ga,s.value)}),sa=computed(()=>{var ga,fa;return(fa=(ga=o.selectedKeys)==null?void 0:ga.includes)==null?void 0:fa.call(ga,s.value)}),ra=computed(()=>{var ga,fa;return(fa=(ga=o.expandedKeys)==null?void 0:ga.includes)==null?void 0:fa.call(ga,s.value)}),la=computed(()=>{var ga,fa;return(fa=(ga=o.loadingKeys)==null?void 0:ga.includes)==null?void 0:fa.call(ga,s.value)}),oa=computed(()=>o.dragIcon),ca=computed(()=>o.nodeIcon);function pa(ga){var fa,ma;g.value||(!((fa=d.value)!=null&&fa.length)&&isFunction$1(o.onLoadMore)?o.onLoadMore(s.value):(ma=o?.onExpand)==null||ma.call(o,!ra.value,s.value,ga))}const ua=reactive({loading:la,checked:aa,selected:sa,indeterminate:ia,expanded:ra,isLeaf:g}),da=computed(()=>o.nodeTitle?()=>{var ga;return(ga=o.nodeTitle)==null?void 0:ga.call(o,u.value,ua)}:void 0),ha=computed(()=>o.nodeExtra?()=>{var ga;return(ga=o.nodeExtra)==null?void 0:ga.call(o,u.value,ua)}:void 0);return{nodekey:s,refTitle:ne,prefixCls:l,classNames:j,titleClassNames:na,indeterminate:ia,checked:aa,expanded:ra,selected:sa,treeTitle:da,treeNodeData:u,loading:la,treeDragIcon:oa,treeNodeIcon:ca,extra:ha,nodeStatus:ua,onCheckboxChange(ga,fa){var ma;N.value||x.value||(ma=o.onCheck)==null||ma.call(o,ga,s.value,fa)},onTitleClick(ga){var fa;f.value.includes("expand")&&pa(ga),!(!$.value||x.value)&&((fa=o.onSelect)==null||fa.call(o,s.value,ga))},onSwitcherClick:pa,onDragStart(ga){var fa;if(R.value){ga.stopPropagation(),ta("dragStart",ga);try{(fa=ga.dataTransfer)==null||fa.setData("text/plain","")}catch{}}},onDragEnd(ga){R.value&&(ga.stopPropagation(),ta("dragEnd",ga))},onDragOver(ga){R&&(ga.stopPropagation(),ga.preventDefault(),ta("dragOver",ga))},onDragLeave(ga){R.value&&(ga.stopPropagation(),ta("dragLeave",ga))},onDrop(ga){!R.value||!fe.value||(ga.stopPropagation(),ga.preventDefault(),ta("drop",ga))}}}}),_hoisted_1$n=["data-level","data-key"],_hoisted_2$h=["draggable"];function _sfc_render$h(a,s,l,o,c,u){const d=resolveComponent("NodeSwitcher"),f=resolveComponent("Checkbox"),g=resolveComponent("RenderFunction"),y=resolveComponent("IconDragDotVertical");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames),"data-level":a.level,"data-key":a.nodekey},[createCommentVNode(" 缩进 "),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-indent`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.level,$=>(openBlock(),createElementBlock("span",{key:$,class:normalizeClass([`${a.prefixCls}-indent-block`,{[`${a.prefixCls}-indent-block-lineless`]:a.lineless[$-1]}])},null,2))),128))],2),createCommentVNode(" switcher "),createBaseVNode("span",{class:normalizeClass([`${a.prefixCls}-switcher`,{[`${a.prefixCls}-switcher-expanded`]:a.expanded}])},[createVNode$1(d,{"prefix-cls":a.prefixCls,loading:a.loading,"show-line":a.showLine,"tree-node-data":a.treeNodeData,icons:{switcherIcon:a.switcherIcon,loadingIcon:a.loadingIcon},"node-status":a.nodeStatus,onClick:a.onSwitcherClick},createSlots({_:2},[a.$slots["switcher-icon"]?{name:"switcher-icon",fn:withCtx(()=>[createCommentVNode(" @slot 定制 switcher 图标，会覆盖 Tree 的配置 "),renderSlot(a.$slots,"switcher-icon")])}:void 0,a.$slots["loading-icon"]?{name:"loading-icon",fn:withCtx(()=>[createCommentVNode(" @slot 定制 loading 图标，会覆盖 Tree 的配置 "),renderSlot(a.$slots,"loading-icon")])}:void 0]),1032,["prefix-cls","loading","show-line","tree-node-data","icons","node-status","onClick"])],2),createCommentVNode(" checkbox "),a.checkable?(openBlock(),createBlock(f,{key:0,disabled:a.disableCheckbox||a.disabled,"model-value":a.checked,indeterminate:a.indeterminate,"uninject-group-context":"",onChange:a.onCheckboxChange},null,8,["disabled","model-value","indeterminate","onChange"])):createCommentVNode("v-if",!0),createCommentVNode(" 内容 "),createBaseVNode("span",{ref:"refTitle",class:normalizeClass(a.titleClassNames),draggable:a.draggable,onDragstart:s[0]||(s[0]=(...$)=>a.onDragStart&&a.onDragStart(...$)),onDragend:s[1]||(s[1]=(...$)=>a.onDragEnd&&a.onDragEnd(...$)),onDragover:s[2]||(s[2]=(...$)=>a.onDragOver&&a.onDragOver(...$)),onDragleave:s[3]||(s[3]=(...$)=>a.onDragLeave&&a.onDragLeave(...$)),onDrop:s[4]||(s[4]=(...$)=>a.onDrop&&a.onDrop(...$)),onClick:s[5]||(s[5]=(...$)=>a.onTitleClick&&a.onTitleClick(...$))},[a.$slots.icon||a.icon||a.treeNodeIcon?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass([`${a.prefixCls}-icon`,`${a.prefixCls}-custom-icon`])},[createCommentVNode(" 节点图标 "),a.$slots.icon?renderSlot(a.$slots,"icon",normalizeProps(mergeProps({key:0},a.nodeStatus))):a.icon?(openBlock(),createBlock(g,mergeProps({key:1,"render-func":a.icon},a.nodeStatus),null,16,["render-func"])):a.treeNodeIcon?(openBlock(),createBlock(g,mergeProps({key:2,"render-func":a.treeNodeIcon,node:a.treeNodeData},a.nodeStatus),null,16,["render-func","node"])):createCommentVNode("v-if",!0)],2)):createCommentVNode("v-if",!0),createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-title-text`)},[a.treeTitle?(openBlock(),createBlock(g,{key:0,"render-func":a.treeTitle},null,8,["render-func"])):(openBlock(),createElementBlock(Fragment,{key:1},[createCommentVNode(" 标题，treeTitle 优先级高于节点的 title "),renderSlot(a.$slots,"title",{title:a.title},()=>[createTextVNode(toDisplayString(a.title),1)])],2112)),a.draggable?(openBlock(),createElementBlock("span",{key:2,class:normalizeClass([`${a.prefixCls}-icon`,`${a.prefixCls}-drag-icon`])},[createCommentVNode(" 拖拽图标 "),a.$slots["drag-icon"]?renderSlot(a.$slots,"drag-icon",normalizeProps(mergeProps({key:0},a.nodeStatus))):a.dragIcon?(openBlock(),createBlock(g,mergeProps({key:1,"render-func":a.dragIcon},a.nodeStatus),null,16,["render-func"])):a.treeDragIcon?(openBlock(),createBlock(g,mergeProps({key:2,"render-func":a.treeDragIcon,node:a.treeNodeData},a.nodeStatus),null,16,["render-func","node"])):(openBlock(),createBlock(y,{key:3}))],2)):createCommentVNode("v-if",!0)],2)],42,_hoisted_2$h),createCommentVNode(" 额外 "),a.extra?(openBlock(),createBlock(g,{key:1,"render-func":a.extra},null,8,["render-func"])):createCommentVNode("v-if",!0)],10,_hoisted_1$n)}var BaseTreeNode=_export_sfc(_sfc_main$u,[["render",_sfc_render$h]]);const _sfc_main$t=defineComponent({name:"ExpandTransition",props:{expanded:Boolean},emits:["end"],setup(a,{emit:s}){return{onEnter(l){const o=`${l.scrollHeight}px`;l.style.height=a.expanded?"0":o,l.offsetHeight,l.style.height=a.expanded?o:"0"},onAfterEnter(l){l.style.height=a.expanded?"":"0",s("end")},onBeforeLeave(l){l.style.display="none"}}}});function _sfc_render$g(a,s,l,o,c,u){return openBlock(),createBlock(Transition,{onEnter:a.onEnter,onAfterEnter:a.onAfterEnter,onBeforeLeave:a.onBeforeLeave},{default:withCtx(()=>[renderSlot(a.$slots,"default")]),_:3},8,["onEnter","onAfterEnter","onBeforeLeave"])}var ExpandTransition=_export_sfc(_sfc_main$t,[["render",_sfc_render$g]]);const _sfc_main$s=defineComponent({name:"TransitionNodeList",components:{ExpandTransition,BaseTreeNode},props:{nodeKey:{type:[String,Number],required:!0}},setup(a){const l=[`${getPrefixCls("tree")}-node-list`],o=useTreeContext(),{nodeKey:c}=toRefs(a),u=computed(()=>{var g,y;return(y=(g=o.expandedKeys)==null?void 0:g.includes)==null?void 0:y.call(g,c.value)}),d=computed(()=>{var g;const y=new Set(o.expandedKeys||[]),$=(g=o.flattenTreeData)==null?void 0:g.filter(x=>{var N,R;return(N=x.pathParentKeys)!=null&&N.includes(c.value)?!o.filterTreeNode||((R=o.filterTreeNode)==null?void 0:R.call(o,x.treeNodeData)):!1});return $?.filter(x=>{var N;if(u.value)return(N=x.pathParentKeys)==null?void 0:N.every(j=>y.has(j));const R=x.pathParentKeys.indexOf(c.value);return x.pathParentKeys.slice(R+1).every(j=>y.has(j))})}),f=computed(()=>{var g,y;return((g=o.currentExpandKeys)==null?void 0:g.includes(c.value))&&((y=d.value)==null?void 0:y.length)});return{classNames:l,visibleNodeList:d,show:f,expanded:u,onTransitionEnd(){var g;(g=o.onExpandEnd)==null||g.call(o,c.value)}}}});function _sfc_render$f(a,s,l,o,c,u){const d=resolveComponent("BaseTreeNode"),f=resolveComponent("ExpandTransition");return openBlock(),createBlock(f,{expanded:a.expanded,onEnd:a.onTransitionEnd},{default:withCtx(()=>[a.show?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(a.classNames)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.visibleNodeList,g=>(openBlock(),createBlock(d,mergeProps({key:g.key},g.treeNodeProps),null,16))),128))],2)):createCommentVNode("v-if",!0)]),_:1},8,["expanded","onEnd"])}var TransitionNodeList=_export_sfc(_sfc_main$s,[["render",_sfc_render$f]]),__defProp$7=Object.defineProperty,__getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__defNormalProp$7=(a,s,l)=>s in a?__defProp$7(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$7=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$8.call(s,l)&&__defNormalProp$7(a,l,s[l]);if(__getOwnPropSymbols$8)for(var l of __getOwnPropSymbols$8(s))__propIsEnum$8.call(s,l)&&__defNormalProp$7(a,l,s[l]);return a},TreeNode=defineComponent({name:"TreeNode",inheritAttrs:!1,props:__spreadValues$7({},BaseTreeNode.props),setup(a,{slots:s,attrs:l}){const o=useNodeKey();return()=>createVNode$1(Fragment,null,[createVNode$1(BaseTreeNode,mergeProps(a,l,{key:o.value}),s),createVNode$1(TransitionNodeList,{key:o.value,nodeKey:o.value},null)])}});function useCheckedState(a){const{defaultCheckedKeys:s,checkedKeys:l,key2TreeNode:o,checkStrictly:c,halfCheckedKeys:u,onlyCheckLeaf:d}=toRefs(a),f=ref(!1),g=ref([]),y=ref([]),$=ref(),x=ref(),N=j=>getCheckedStateByInitKeys({initCheckedKeys:j,key2TreeNode:o.value,checkStrictly:c.value,onlyCheckLeaf:d.value}),R=j=>{const ne=N(j);[g.value,y.value]=ne};return R(l.value||s?.value||[]),watchEffect(()=>{l.value?[$.value,x.value]=N(l.value):f.value&&($.value=void 0,x.value=void 0,g.value=[],y.value=[]),f.value||(f.value=!0)}),{checkedKeys:computed(()=>$.value||g.value),indeterminateKeys:computed(()=>c.value&&u.value?u.value:x.value||y.value),setCheckedState(j,ne,se=!1){return se?R(j):(g.value=j,y.value=ne),[g.value,y.value]}}}function useTreeData(a){const{treeData:s,fieldNames:l,selectable:o,showLine:c,blockNode:u,checkable:d,loadMore:f,draggable:g}=toRefs(a),y=ref([]);watchEffect(()=>{var N,R;y.value=generateTreeData(s.value||[],{selectable:(N=o?.value)!=null?N:!1,showLine:!!c?.value,blockNode:!!u?.value,checkable:(R=d?.value)!=null?R:!1,fieldNames:l?.value,loadMore:!!f?.value,draggable:!!g?.value})});const $=computed(()=>getFlattenTreeData(y.value)),x=computed(()=>getKey2TreeNode($.value));return{treeData:y,flattenTreeData:$,key2TreeNode:x}}const _sfc_main$r=defineComponent({name:"Tree",components:{VirtualList,TreeNode},props:{size:{type:String,default:"medium"},blockNode:{type:Boolean},defaultExpandAll:{type:Boolean,default:!0},multiple:{type:Boolean},checkable:{type:[Boolean,String,Function],default:!1},selectable:{type:[Boolean,Function],default:!0},checkStrictly:{type:Boolean},checkedStrategy:{type:String,default:"all"},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:Array},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},data:{type:Array,default:()=>[]},fieldNames:{type:Object},showLine:{type:Boolean},loadMore:{type:Function},draggable:{type:Boolean},allowDrop:{type:Function},filterTreeNode:{type:Function},searchValue:{type:String,default:""},virtualListProps:{type:Object},defaultExpandSelected:{type:Boolean},defaultExpandChecked:{type:Boolean},autoExpandParent:{type:Boolean,default:!0},halfCheckedKeys:{type:Array},onlyCheckLeaf:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},actionOnNodeClick:{type:String},disableSelectActionOnly:{type:Boolean,default:!1}},emits:{select:(a,s)=>!0,"update:selectedKeys":a=>!0,check:(a,s)=>!0,"update:checkedKeys":a=>!0,"update:halfCheckedKeys":a=>!0,expand:(a,s)=>!0,"update:expandedKeys":a=>!0,dragStart:(a,s)=>!0,dragEnd:(a,s)=>!0,dragOver:(a,s)=>!0,dragLeave:(a,s)=>!0,drop:a=>!0},setup(a,{emit:s,slots:l}){const{data:o,showLine:c,multiple:u,loadMore:d,checkStrictly:f,checkedKeys:g,defaultCheckedKeys:y,selectedKeys:$,defaultSelectedKeys:x,expandedKeys:N,defaultExpandedKeys:R,checkedStrategy:j,selectable:ne,checkable:se,blockNode:ce,fieldNames:fe,size:ea,defaultExpandAll:ta,filterTreeNode:na,draggable:aa,allowDrop:ia,defaultExpandSelected:sa,defaultExpandChecked:ra,autoExpandParent:la,halfCheckedKeys:oa,onlyCheckLeaf:ca,animation:pa}=toRefs(a),ua=getPrefixCls("tree"),da=computed(()=>[`${ua}`,{[`${ua}-checkable`]:se.value,[`${ua}-show-line`]:c.value},`${ua}-size-${ea.value}`]),ha=usePickSlots(l,"switcher-icon"),ga=usePickSlots(l,"loading-icon"),fa=usePickSlots(l,"drag-icon"),ma=usePickSlots(l,"icon"),va=usePickSlots(l,"title"),ka=usePickSlots(l,"extra"),{treeData:ya,flattenTreeData:ba,key2TreeNode:Ea}=useTreeData(reactive({treeData:o,selectable:ne,showLine:c,blockNode:ce,checkable:se,fieldNames:fe,loadMore:d,draggable:aa})),{checkedKeys:Ca,indeterminateKeys:$a,setCheckedState:Pa}=useCheckedState(reactive({defaultCheckedKeys:y,checkedKeys:g,checkStrictly:f,key2TreeNode:Ea,halfCheckedKeys:oa,onlyCheckLeaf:ca})),[Da,Ta]=useMergeState(x?.value||[],reactive({value:$})),Ba=ref([]),wa=ref();function Oa(){if(R?.value){const Wa=new Set([]);return R.value.forEach(Ua=>{if(Wa.has(Ua))return;const Qa=Ea.value.get(Ua);Qa&&[...la.value?Qa.pathParentKeys:[],Ua].forEach(nn=>Wa.add(nn))}),[...Wa]}if(ta.value)return ba.value.filter(Wa=>Wa.children&&Wa.children.length).map(Wa=>Wa.key);if(sa.value||ra.value){const Wa=new Set([]),Ua=Qa=>{Qa.forEach(nn=>{const ln=Ea.value.get(nn);ln&&(ln.pathParentKeys||[]).forEach(dn=>Wa.add(dn))})};return sa.value&&Ua(Da.value),ra.value&&Ua(Ca.value),[...Wa]}return[]}const[Aa,Sa]=useMergeState(Oa(),reactive({value:N})),Fa=ref([]),Ia=computed(()=>{const Wa=new Set(Aa.value),Ua=new Set(Fa.value);return ba.value.filter(Qa=>{var nn;if(!(!na||!na.value||na?.value(Qa.treeNodeData)))return!1;const dn=isUndefined(Qa.parentKey),wn=(nn=Qa.pathParentKeys)==null?void 0:nn.every(xn=>Wa.has(xn)&&!Ua.has(xn));return dn||wn})});function Ga(Wa,Ua=j.value){let Qa=[...Wa];return Ua==="parent"?Qa=Wa.filter(nn=>{const ln=Ea.value.get(nn);return ln&&!(!isUndefined(ln.parentKey)&&Wa.includes(ln.parentKey))}):Ua==="child"&&(Qa=Wa.filter(nn=>{var ln,dn;return!((dn=(ln=Ea.value.get(nn))==null?void 0:ln.children)!=null&&dn.length)})),Qa}function Ya(Wa){return Wa.map(Ua=>{var Qa;return((Qa=Ea.value.get(Ua))==null?void 0:Qa.treeNodeData)||void 0}).filter(Boolean)}function Va(Wa){const{targetKey:Ua,targetChecked:Qa,newCheckedKeys:nn,newIndeterminateKeys:ln,event:dn}=Wa,wn=Ua?Ea.value.get(Ua):void 0,xn=Ga(nn);s("update:checkedKeys",xn),s("update:halfCheckedKeys",ln),s("check",xn,{checked:Qa,node:wn?.treeNodeData,checkedNodes:Ya(xn),halfCheckedKeys:ln,halfCheckedNodes:Ya(ln),e:dn})}function La(Wa){const{targetKey:Ua,targetSelected:Qa,newSelectedKeys:nn,event:ln}=Wa,dn=Ua?Ea.value.get(Ua):void 0;s("update:selectedKeys",nn),s("select",nn,{selected:Qa,node:dn?.treeNodeData,selectedNodes:Ya(nn),e:ln})}function Za(Wa){const{targetKey:Ua,targetExpanded:Qa,newExpandedKeys:nn,event:ln}=Wa,dn=Ua?Ea.value.get(Ua):void 0;s("expand",nn,{expanded:Qa,node:dn?.treeNodeData,expandedNodes:Ya(nn),e:ln}),s("update:expandedKeys",nn)}function rn(Wa){const[Ua,Qa]=Pa(Wa,[],!0);Va({newCheckedKeys:Ua,newIndeterminateKeys:Qa})}function pn(Wa){let Ua=Wa;!u.value&&Wa.length>1&&(Ua=[Wa[0]]),Ta(Ua),La({newSelectedKeys:Ua})}function fn(Wa){Fa.value=[],Sa(Wa),Za({newExpandedKeys:Wa})}function mn(Wa,Ua,Qa){if(!Wa.length)return;let nn=[...Ca.value],ln=[...$a.value];Wa.forEach(dn=>{const wn=Ea.value.get(dn);wn&&([nn,ln]=getCheckedStateByCheck({node:wn,checked:Ua,checkedKeys:[...nn],indeterminateKeys:[...ln],checkStrictly:f.value}))}),Pa(nn,ln),Va({targetKey:Qa,targetChecked:isUndefined(Qa)?void 0:Ua,newCheckedKeys:nn,newIndeterminateKeys:ln})}function Dn(Wa,Ua,Qa){if(!Wa.length)return;let nn;if(u.value){const ln=new Set(Da.value);Wa.forEach(dn=>{Ua?ln.add(dn):ln.delete(dn)}),nn=[...ln]}else nn=Ua?[Wa[0]]:[];Ta(nn),La({targetKey:Qa,targetSelected:isUndefined(Qa)?void 0:Ua,newSelectedKeys:nn})}function Ra(Wa,Ua,Qa){const nn=new Set(Aa.value);Wa.forEach(dn=>{Ua?nn.add(dn):nn.delete(dn),bn(dn)});const ln=[...nn];Sa(ln),Za({targetKey:Qa,targetExpanded:isUndefined(Qa)?void 0:Ua,newExpandedKeys:ln})}function Na(Wa,Ua,Qa){const nn=Ea.value.get(Ua);if(!nn)return;const[ln,dn]=getCheckedStateByCheck({node:nn,checked:Wa,checkedKeys:Ca.value,indeterminateKeys:$a.value,checkStrictly:f.value});Pa(ln,dn),Va({targetKey:Ua,targetChecked:Wa,newCheckedKeys:ln,newIndeterminateKeys:dn,event:Qa})}function za(Wa,Ua){if(!Ea.value.get(Wa))return;let nn,ln;if(u.value){const dn=new Set(Da.value);ln=!dn.has(Wa),ln?dn.add(Wa):dn.delete(Wa),nn=[...dn]}else ln=!0,nn=[Wa];Ta(nn),La({targetKey:Wa,targetSelected:ln,newSelectedKeys:nn,event:Ua})}function an(Wa,Ua,Qa){if(Fa.value.includes(Ua)||!Ea.value.get(Ua))return;const ln=new Set(Aa.value);Wa?ln.add(Ua):ln.delete(Ua);const dn=[...ln];Sa(dn),pa.value&&Fa.value.push(Ua),Za({targetKey:Ua,targetExpanded:Wa,newExpandedKeys:dn,event:Qa})}function bn(Wa){const Ua=Fa.value.indexOf(Wa);Fa.value.splice(Ua,1)}const En=computed(()=>d?.value?async Wa=>{if(!isFunction$1(d.value))return;const Ua=Ea.value.get(Wa);if(!Ua)return;const{treeNodeData:Qa}=Ua;Ba.value=[...new Set([...Ba.value,Wa])];try{await d.value(Qa),Ba.value=Ba.value.filter(nn=>nn!==Wa),an(!0,Wa),Ca.value.includes(Wa)&&Na(!0,Wa)}catch(nn){Ba.value=Ba.value.filter(ln=>ln!==Wa),console.error("[tree]load data error: ",nn)}}:void 0),Pn=reactive({treeProps:a,switcherIcon:ha,loadingIcon:ga,dragIcon:fa,nodeIcon:ma,nodeTitle:va,nodeExtra:ka,treeData:ya,flattenTreeData:ba,key2TreeNode:Ea,checkedKeys:Ca,indeterminateKeys:$a,selectedKeys:Da,expandedKeys:Aa,loadingKeys:Ba,currentExpandKeys:Fa,onLoadMore:En,filterTreeNode:na,onCheck:Na,onSelect:za,onExpand:an,onExpandEnd:bn,allowDrop(Wa,Ua){const Qa=Ea.value.get(Wa);return Qa&&isFunction$1(ia.value)?!!ia.value({dropNode:Qa.treeNodeData,dropPosition:Ua}):!0},onDragStart(Wa,Ua){const Qa=Ea.value.get(Wa);wa.value=Qa,Qa&&s("dragStart",Ua,Qa.treeNodeData)},onDragEnd(Wa,Ua){const Qa=Ea.value.get(Wa);wa.value=void 0,Qa&&s("dragEnd",Ua,Qa.treeNodeData)},onDragOver(Wa,Ua){const Qa=Ea.value.get(Wa);Qa&&s("dragOver",Ua,Qa.treeNodeData)},onDragLeave(Wa,Ua){const Qa=Ea.value.get(Wa);Qa&&s("dragLeave",Ua,Qa.treeNodeData)},onDrop(Wa,Ua,Qa){const nn=Ea.value.get(Wa);wa.value&&nn&&!(nn.key===wa.value.key||nn.pathParentKeys.includes(wa.value.key||""))&&s("drop",{e:Qa,dragNode:wa.value.treeNodeData,dropNode:nn.treeNodeData,dropPosition:Ua})}});return provide(TreeInjectionKey,Pn),{classNames:da,visibleTreeNodeList:Ia,treeContext:Pn,virtualListRef:ref(),computedSelectedKeys:Da,computedExpandedKeys:Aa,computedCheckedKeys:Ca,computedIndeterminateKeys:$a,getPublicCheckedKeys:Ga,getNodes:Ya,internalCheckNodes:mn,internalSetCheckedKeys:rn,internalSelectNodes:Dn,internalSetSelectedKeys:pn,internalExpandNodes:Ra,internalSetExpandedKeys:fn}},methods:{toggleCheck(a,s){const{key2TreeNode:l,onCheck:o,checkedKeys:c}=this.treeContext,u=!c.includes(a),d=l.get(a);d&&isNodeCheckable(d)&&o(u,a,s)},scrollIntoView(a){this.virtualListRef&&this.virtualListRef.scrollTo(a)},getSelectedNodes(){return this.getNodes(this.computedSelectedKeys)},getCheckedNodes(a={}){const{checkedStrategy:s,includeHalfChecked:l}=a,o=this.getPublicCheckedKeys(this.computedCheckedKeys,s);return[...this.getNodes(o),...l?this.getHalfCheckedNodes():[]]},getHalfCheckedNodes(){return this.getNodes(this.computedIndeterminateKeys)},getExpandedNodes(){return this.getNodes(this.computedExpandedKeys)},checkAll(a=!0){const{key2TreeNode:s}=this.treeContext,l=a?[...s.keys()].filter(o=>{const c=s.get(o);return c&&isNodeCheckable(c)}):[];this.internalSetCheckedKeys(l)},checkNode(a,s=!0,l=!1){const{checkStrictly:o,treeContext:c}=this,{key2TreeNode:u}=c,d=isArray$1(a),f=(d?a:[a]).filter(g=>{const y=u.get(g);return y&&isNodeCheckable(y)&&(o||!l||isLeafNode(y))});this.internalCheckNodes(f,s,d?void 0:a)},selectAll(a=!0){const{key2TreeNode:s}=this.treeContext,l=a?[...s.keys()].filter(o=>{const c=s.get(o);return c&&isNodeSelectable(c)}):[];this.internalSetSelectedKeys(l)},selectNode(a,s=!0){const{key2TreeNode:l}=this.treeContext,o=isArray$1(a),c=(o?a:[a]).filter(u=>{const d=l.get(u);return d&&isNodeSelectable(d)});this.internalSelectNodes(c,s,o?void 0:a)},expandAll(a=!0){const{key2TreeNode:s}=this.treeContext,l=a?[...s.keys()].filter(o=>{const c=s.get(o);return c&&isNodeExpandable(c)}):[];this.internalSetExpandedKeys(l)},expandNode(a,s=!0){const{key2TreeNode:l}=this.treeContext,o=isArray$1(a),c=(o?a:[a]).filter(u=>{const d=l.get(u);return d&&isNodeExpandable(d)});this.internalExpandNodes(c,s,o?void 0:a)}}});function _sfc_render$e(a,s,l,o,c,u){const d=resolveComponent("TreeNode"),f=resolveComponent("VirtualList");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[a.virtualListProps?(openBlock(),createBlock(f,mergeProps({key:0,ref:"virtualListRef"},a.virtualListProps,{data:a.visibleTreeNodeList}),{item:withCtx(({item:g})=>[createVNode$1(d,mergeProps({key:`${a.searchValue}-${g.key}`},g.treeNodeProps),null,16)]),_:1},16,["data"])):(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(a.visibleTreeNodeList,g=>(openBlock(),createBlock(d,mergeProps({key:g.key},g.treeNodeProps),null,16))),128))],2)}var _Tree=_export_sfc(_sfc_main$r,[["render",_sfc_render$e]]);const Tree=Object.assign(_Tree,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Tree.name,_Tree)}}),_sfc_main$q=defineComponent({name:"Typography",setup(){return{classNames:[getPrefixCls("typography")]}}});function _sfc_render$d(a,s,l,o,c,u){return openBlock(),createElementBlock("article",{class:normalizeClass(a.classNames)},[renderSlot(a.$slots,"default")],2)}var _Typography=_export_sfc(_sfc_main$q,[["render",_sfc_render$d]]);const _sfc_main$p=defineComponent({name:"TypographyEditContent",components:{Input},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(a,{emit:s}){const o=[`${getPrefixCls("typography")}-edit-content`],c=ref();function u(f){s("update:text",f),s("change",f)}function d(){s("end")}return onMounted(()=>{if(!c.value||!c.value.$el)return;const f=c.value.$el.querySelector("input");if(!f)return;f.focus&&f.focus();const{length:g}=f.value;f.setSelectionRange(g,g)}),{classNames:o,inputRef:c,onBlur:d,onChange:u,onEnd:d}}});function _sfc_render$c(a,s,l,o,c,u){const d=resolveComponent("Input");return openBlock(),createElementBlock("div",{class:normalizeClass(a.classNames)},[createVNode$1(d,{ref:"inputRef","auto-size":"","model-value":a.text,onBlur:a.onBlur,onInput:a.onChange,onKeydown:withKeys(a.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var EditContent=_export_sfc(_sfc_main$p,[["render",_sfc_render$c]]);const _sfc_main$o=defineComponent({name:"IconCopy",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-copy`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$m=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$g=createBaseVNode("path",{d:"M20 6h18a2 2 0 0 1 2 2v22M8 16v24c0 1.105.891 2 1.996 2h20.007A1.99 1.99 0 0 0 32 40.008V15.997A1.997 1.997 0 0 0 30 14H10a2 2 0 0 0-2 2Z"},null,-1),_hoisted_3$e=[_hoisted_2$g];function _sfc_render$b(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$e,14,_hoisted_1$m)}var _IconCopy=_export_sfc(_sfc_main$o,[["render",_sfc_render$b]]);const IconCopy=Object.assign(_IconCopy,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconCopy.name,_IconCopy)}}),_sfc_main$n=defineComponent({name:"IconEdit",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-edit`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$l=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$f=createBaseVNode("path",{d:"m30.48 19.038 5.733-5.734a1 1 0 0 0 0-1.414l-5.586-5.586a1 1 0 0 0-1.414 0l-5.734 5.734m7 7L15.763 33.754a1 1 0 0 1-.59.286l-6.048.708a1 1 0 0 1-1.113-1.069l.477-6.31a1 1 0 0 1 .29-.631l14.7-14.7m7 7-7-7M6 42h36"},null,-1),_hoisted_3$d=[_hoisted_2$f];function _sfc_render$a(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$d,14,_hoisted_1$l)}var _IconEdit=_export_sfc(_sfc_main$n,[["render",_sfc_render$a]]);const IconEdit=Object.assign(_IconEdit,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconEdit.name,_IconEdit)}}),_sfc_main$m=defineComponent({name:"TypographyOperations",components:{Tooltip,IconCheckCircleFill,IconCopy,IconEdit},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(a,{emit:s}){const l=getPrefixCls("typography"),o=computed(()=>a.forceRenderExpand||a.expandable&&a.isEllipsis),{t:c}=useI18n();return{prefixCls:l,showExpand:o,t:c,onEditClick(){s("edit")},onCopyClick(){s("copy")},onExpandClick(){s("expand")}}}});function _sfc_render$9(a,s,l,o,c,u){const d=resolveComponent("IconEdit"),f=resolveComponent("Tooltip"),g=resolveComponent("IconCheckCircleFill"),y=resolveComponent("IconCopy");return openBlock(),createElementBlock(Fragment,null,[a.editable?(openBlock(),createBlock(f,mergeProps({key:0,content:a.t("typography.edit")},a.editTooltipProps),{default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass(`${a.prefixCls}-operation-edit`),onClick:s[0]||(s[0]=withModifiers((...$)=>a.onEditClick&&a.onEditClick(...$),["stop"]))},[createVNode$1(d)],2)]),_:1},16,["content"])):createCommentVNode("v-if",!0),a.copyable?(openBlock(),createBlock(f,normalizeProps(mergeProps({key:1},a.copyTooltipProps)),{content:withCtx(()=>[renderSlot(a.$slots,"copy-tooltip",{copied:a.isCopied},()=>[createTextVNode(toDisplayString(a.isCopied?a.t("typography.copied"):a.t("typography.copy")),1)])]),default:withCtx(()=>[createBaseVNode("span",{class:normalizeClass({[`${a.prefixCls}-operation-copied`]:a.isCopied,[`${a.prefixCls}-operation-copy`]:!a.isCopied}),onClick:s[1]||(s[1]=withModifiers((...$)=>a.onCopyClick&&a.onCopyClick(...$),["stop"]))},[renderSlot(a.$slots,"copy-icon",{copied:a.isCopied},()=>[a.isCopied?(openBlock(),createBlock(g,{key:0})):(openBlock(),createBlock(y,{key:1}))])],2)]),_:3},16)):createCommentVNode("v-if",!0),a.showExpand?(openBlock(),createElementBlock("a",{key:2,class:normalizeClass(`${a.prefixCls}-operation-expand`),onClick:s[2]||(s[2]=withModifiers((...$)=>a.onExpandClick&&a.onExpandClick(...$),["stop"]))},[renderSlot(a.$slots,"expand-node",{expanded:a.expanded},()=>[createTextVNode(toDisplayString(a.expanded?a.t("typography.collapse"):a.t("typography.expand")),1)])],2)):createCommentVNode("v-if",!0)],64)}var Operations=_export_sfc(_sfc_main$m,[["render",_sfc_render$9]]);let ellipsisContainer;function styleToString$1(a){return Array.prototype.slice.apply(a).map(l=>`${l}: ${a.getPropertyValue(l)};`).join("")}function pxToNumber(a){if(!a)return 0;const s=a.match(/^\d*(\.\d*)?/);return s?Number(s[0]):0}var measure=(a,s,l,o)=>{ellipsisContainer||(ellipsisContainer=document.createElement("div"),document.body.appendChild(ellipsisContainer));const{rows:c,suffix:u,ellipsisStr:d}=s,f=window.getComputedStyle(a),g=styleToString$1(f),y=pxToNumber(f.lineHeight),$=Math.round(y*c+pxToNumber(f.paddingTop)+pxToNumber(f.paddingBottom));ellipsisContainer.setAttribute("style",g),ellipsisContainer.setAttribute("aria-hidden","true"),ellipsisContainer.style.height="auto",ellipsisContainer.style.minHeight="auto",ellipsisContainer.style.maxHeight="auto",ellipsisContainer.style.position="fixed",ellipsisContainer.style.left="0",ellipsisContainer.style.top="-99999999px",ellipsisContainer.style.zIndex="-200",ellipsisContainer.style.whiteSpace="normal";const x=createApp({render(){return createVNode$1("span",null,[l])}});x.mount(ellipsisContainer);const N=Array.prototype.slice.apply(ellipsisContainer.childNodes[0].cloneNode(!0).childNodes);x.unmount(),ellipsisContainer.innerHTML="";const R=document.createTextNode(`${d}${u}`);ellipsisContainer.appendChild(R),N.forEach(ce=>{ellipsisContainer.appendChild(ce)});const j=document.createTextNode(o);ellipsisContainer.insertBefore(j,R);function ne(){return ellipsisContainer.offsetHeight<=$}if(ne())return{ellipsis:!1,text:o};function se(ce,fe=0,ea=o.length,ta=0){const na=Math.floor((fe+ea)/2),aa=o.slice(0,na);if(ce.textContent=aa,fe>=ea-1)for(let ia=ea;ia>=fe;ia-=1){const sa=o.slice(0,ia);if(ce.textContent=sa,ne()||!sa)return}ne()?se(ce,na,ea,na):se(ce,fe,na,ta)}return se(j),{text:j.textContent,ellipsis:!0}};const clipboard=async a=>{var s;if((s=navigator.clipboard)!=null&&s.writeText)try{await navigator.clipboard.writeText(a);return}catch(u){console.error(u??new DOMException("The request is not allowed","NotAllowedError"))}const l=document.createElement("span");l.textContent=a,l.style.whiteSpace="pre",document.body.appendChild(l);const o=window.getSelection(),c=window.document.createRange();o?.removeAllRanges(),c.selectNode(l),o?.addRange(c);try{window.document.execCommand("copy")}catch(u){console.error(`execCommand Error: ${u}`)}o?.removeAllRanges(),window.document.body.removeChild(l)};let container;function getInnerText(a){if(!a)return"";container||(container=document.createElement("div"),container.setAttribute("aria-hidden","true"),document.body.appendChild(container));const s=createApp({render(){return createVNode$1("div",null,[a])}});s.mount(container);const l=container.innerText;return s.unmount(),l}var __defProp$6=Object.defineProperty,__defProps$6=Object.defineProperties,__getOwnPropDescs$6=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$7=Object.getOwnPropertySymbols,__hasOwnProp$7=Object.prototype.hasOwnProperty,__propIsEnum$7=Object.prototype.propertyIsEnumerable,__defNormalProp$6=(a,s,l)=>s in a?__defProp$6(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$6=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$7.call(s,l)&&__defNormalProp$6(a,l,s[l]);if(__getOwnPropSymbols$7)for(var l of __getOwnPropSymbols$7(s))__propIsEnum$7.call(s,l)&&__defNormalProp$6(a,l,s[l]);return a},__spreadProps$6=(a,s)=>__defProps$6(a,__getOwnPropDescs$6(s));function _isSlot$1(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}function getComponentTags(a){const{bold:s,mark:l,underline:o,delete:c,code:u}=a,d=[];return s&&d.push("b"),o&&d.push("u"),c&&d.push("del"),u&&d.push("code"),l&&d.push("mark"),d}function Wrap(a,s){const{mark:l}=a,o=getComponentTags(a),c=isObject$1(l)&&l.color?{backgroundColor:l.color}:{};return o.reduce((u,d)=>createVNode$1(d,d==="mark"?{style:c}:{},_isSlot$1(u)?u:{default:()=>[u]}),s)}function normalizeEllipsisConfig(a){const s=!!a.showTooltip,l=isObject$1(a.showTooltip)&&a.showTooltip.type==="popover"?Popover:Tooltip,o=isObject$1(a.showTooltip)&&a.showTooltip.props||{};return __spreadProps$6(__spreadValues$6({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},omit(a,["showTooltip"])),{showTooltip:s,TooltipComponent:l,tooltipProps:o})}var Base=defineComponent({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:a=>!0,"update:editText":a=>!0,editEnd:()=>!0,"update:editing":a=>!0,copy:a=>!0,ellipsis:a=>!0,expand:a=>!0},setup(a,{slots:s,emit:l,attrs:o}){const{editing:c,defaultEditing:u,ellipsis:d,copyable:f,editable:g,copyText:y,editText:$,copyDelay:x,component:N}=toRefs(a),R=getPrefixCls("typography"),j=computed(()=>[R,{[`${R}-${a.type}`]:a.type,[`${R}-disabled`]:a.disabled}]),ne=ref(),se=ref(""),[ce,fe]=useMergeState(u.value,reactive({value:c})),ea=computed(()=>g.value&&ce.value);function ta(){l("update:editing",!0),l("editStart"),fe(!0)}function na(Ca){l("update:editText",Ca),l("change",Ca)}function aa(){ce.value&&(l("update:editing",!1),l("editEnd"),fe(!1))}const ia=ref(!1);let sa=null;function ra(){var Ca;const $a=(Ca=y.value)!=null?Ca:se.value;clipboard($a||""),ia.value=!0,l("copy",$a),sa=setTimeout(()=>{ia.value=!1},x.value)}onUnmounted(()=>{sa&&clearTimeout(sa),sa=null});const la=ref(!1),oa=ref(!1),ca=ref(""),pa=computed(()=>normalizeEllipsisConfig(isObject$1(d.value)&&d.value||{}));let ua=null;function da(){const Ca=!oa.value;oa.value=Ca,l("expand",Ca)}function ha(Ca=!1){return pa.value.css?createVNode$1(Operations,{editable:g.value,copyable:f.value,expandable:pa.value.expandable,isCopied:ia.value,isEllipsis:ya.value,expanded:oa.value,forceRenderExpand:Ca||oa.value,editTooltipProps:a.editTooltipProps,copyTooltipProps:a.copyTooltipProps,onEdit:ta,onCopy:ra,onExpand:da},{"copy-tooltip":s["copy-tooltip"],"copy-icon":s["copy-icon"],"expand-node":s["expand-node"]}):createVNode$1(Operations,{editable:g.value,copyable:f.value,expandable:pa.value.expandable,isCopied:ia.value,isEllipsis:la.value,expanded:oa.value,forceRenderExpand:Ca,editTooltipProps:a.editTooltipProps,copyTooltipProps:a.copyTooltipProps,onEdit:ta,onCopy:ra,onExpand:da},{"copy-tooltip":s["copy-tooltip"],"copy-icon":s["copy-icon"],"expand-node":s["expand-node"]})}function ga(){if(!ne.value)return;const{ellipsis:Ca,text:$a}=measure(ne.value,pa.value,ha(!!pa.value.expandable),se.value);la.value!==Ca&&(la.value=Ca,pa.value.css||l("ellipsis",Ca)),ca.value!==$a&&(ca.value=$a||"")}function fa(){d.value&&!oa.value&&(caf(ua),ua=raf(()=>{ga()}))}onUnmounted(()=>{caf(ua)}),watch(()=>pa.value.rows,()=>{fa()}),watch(d,Ca=>{Ca?fa():la.value=!1});let ma=[];const va=()=>{if(d.value||f.value||g.value){const Ca=getInnerText(ma);Ca!==se.value&&(se.value=Ca,fa())}};onMounted(va),onUpdated(va);const ka=ref(),ya=ref(!1),ba=()=>{if(ne.value&&ka.value){const Ca=ka.value.offsetHeight>ne.value.offsetHeight;Ca!==ya.value&&(ya.value=Ca,l("ellipsis",Ca))}},Ea=computed(()=>oa.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":pa.value.rows,"-webkit-box-orient":"vertical"});return()=>{var Ca,$a;if(ma=((Ca=s.default)==null?void 0:Ca.call(s))||[],ea.value){const Ia=($a=$.value)!=null?$a:se.value;return createVNode$1(EditContent,{text:Ia,onChange:Ga=>{Ga!==Ia&&na(Ga)},onEnd:aa},null)}const{suffix:Pa,ellipsisStr:Da,showTooltip:Ta,tooltipProps:Ba,TooltipComponent:wa}=pa.value,Oa=la.value&&!oa.value,Aa=Oa&&!Ta?{title:se.value}:{},Sa=N.value;if(pa.value.css){const Ia=Wrap(a,ma),Ga=createVNode$1(Sa,mergeProps({class:j.value,ref:ne,style:Ea.value},Aa,o),{default:()=>[createVNode$1("span",{ref:ka},[Ia])]});return ya.value?createVNode$1(wa,mergeProps(Ba,{onResize:()=>ba()}),{default:()=>[Ga],content:()=>se.value}):createVNode$1(ResizeObserver$2,{onResize:()=>{ba()}},_isSlot$1(Ga)?Ga:{default:()=>[Ga]})}const Fa=Wrap(a,Oa?ca.value:ma);return createVNode$1(ResizeObserver$2,{onResize:()=>fa()},{default:()=>[createVNode$1(Sa,mergeProps({class:j.value,ref:ne},Aa,o),{default:()=>[Oa&&Ta?createVNode$1(wa,Ba,{default:()=>[createVNode$1("span",null,[Fa])],content:()=>se.value}):Fa,Oa?Da:null,Pa,ha()]})]})}}}),TypographyParagraph=defineComponent({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(a){const{blockquote:s,spacing:l}=toRefs(a),o=getPrefixCls("typography"),c=computed(()=>s?.value?"blockquote":"div"),u=computed(()=>[{[`${o}-spacing-close`]:l?.value==="close"}]);return{component:c,classNames:u}},render(){const{component:a,classNames:s}=this;return createVNode$1(Base,mergeProps({class:s},this.$attrs,{component:a}),this.$slots)}}),TypographyTitle=defineComponent({name:"TypographyTitle",inheritAttrs:!1,props:{heading:{type:Number,default:1}},setup(a){const{heading:s}=toRefs(a);return{component:computed(()=>`h${s?.value}`)}},render(){const{component:a}=this;return createVNode$1(Base,mergeProps(this.$attrs,{component:a}),this.$slots)}}),TypographyText=defineComponent({name:"TypographyText",inheritAttrs:!1,props:{ellipsis:{type:[Boolean,Object],default:!1}},setup(a){const{ellipsis:s}=toRefs(a);return{component:computed(()=>s?.value?"div":"span")}},render(){const{ellipsis:a,component:s}=this;return createVNode$1(Base,mergeProps(this.$attrs,{ellipsis:a,component:s}),this.$slots)}});const Typography=Object.assign(_Typography,{Paragraph:TypographyParagraph,Title:TypographyTitle,Text:TypographyText,install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Typography.name,_Typography),a.component(l+TypographyParagraph.name,TypographyParagraph),a.component(l+TypographyTitle.name,TypographyTitle),a.component(l+TypographyText.name,TypographyText)}}),getResponse=a=>{const s=a.responseText||a.response;if(!s)return;const l=a.getResponseHeader("Content-Type");if(l&&l.includes("json"))try{return JSON.parse(s)}catch{return s}return s},getProgressStatus=a=>{switch(a){case"done":return"success";case"error":return"danger";default:return"normal"}},getValue=(a,s)=>isFunction$1(a)?a(s):a,uploadRequest=({fileItem:a,action:s,name:l,data:o,headers:c={},withCredentials:u=!1,onProgress:d=NOOP,onSuccess:f=NOOP,onError:g=NOOP})=>{const y=getValue(l,a)||"file",$=getValue(o,a),x=new XMLHttpRequest;u&&(x.withCredentials=!0),x.upload.onprogress=R=>{const j=R.total>0?index.round(R.loaded/R.total,2):0;d(j,R)},x.onerror=function(j){g(j)},x.onload=()=>{if(x.status<200||x.status>=300){g(getResponse(x));return}f(getResponse(x))};const N=new FormData;if($)for(const R of Object.keys($))N.append(R,$[R]);a.file&&N.append(y,a.file),x.open("post",s??"",!0);for(const R of Object.keys(c))x.setRequestHeader(R,c[R]);return x.send(N),{abort(){x.abort()}}},isAcceptFile=(a,s)=>{if(s&&a){const l=isArray$1(s)?s:s.split(",").map(c=>c.trim()).filter(c=>c),o=(a.name.indexOf(".")>-1?`.${a.name.split(".").pop()}`:"").toLowerCase();return l.some(c=>{const u=c&&c.toLowerCase(),d=(a.type||"").toLowerCase(),f=d.split("/")[0];if(u===d||`${f}${o.replace(".","/")}`===u||/^\*(\/\*)?$/.test(u))return!0;if(/\/\*/.test(u))return d.replace(/\/.*$/,"")===u.replace(/\/.*$/,"");if(/\..*/.test(u)){let g=[u];return(u===".jpg"||u===".jpeg")&&(g=[".jpg",".jpeg"]),g.indexOf(o)>-1}return!1})}return!!a},loopDirectory=(a,s,l)=>{const o=[];let c=0;const u=()=>{!c&&l(o)},d=f=>{if(c+=1,f?.isFile){f.file(g=>{c-=1,isAcceptFile(g,s)&&(Object.defineProperty(g,"webkitRelativePath",{value:f.fullPath.replace(/^\//,"")}),o.push(g)),u()});return}if(f?.isDirectory){const g=f.createReader();let y=!1;const $=()=>{g.readEntries(x=>{y||(c-=1,y=!0),x.length===0?u():($(),x.forEach(d))})};$();return}c-=1,u()};[].slice.call(a).forEach(f=>f.webkitGetAsEntry&&d(f.webkitGetAsEntry()))},isImage=a=>{var s;return(s=a.type)==null?void 0:s.includes("image")},getFiles=(a,s)=>{if(!a)return[];const l=Array.from(a);return s?l.filter(o=>isAcceptFile(o,s)):l},_sfc_main$l=defineComponent({name:"IconUpload",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-upload`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$k=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$e=createBaseVNode("path",{d:"M14.93 17.071 24.001 8l9.071 9.071m-9.07 16.071v-25M40 35v6H8v-6"},null,-1),_hoisted_3$c=[_hoisted_2$e];function _sfc_render$8(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$c,14,_hoisted_1$k)}var _IconUpload=_export_sfc(_sfc_main$l,[["render",_sfc_render$8]]);const IconUpload=Object.assign(_IconUpload,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconUpload.name,_IconUpload)}});var UploadButton=defineComponent({name:"UploadButton",props:{disabled:{type:Boolean,default:!1},directory:{type:Boolean,default:!1},accept:String,listType:{type:String},tip:String,draggable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},uploadFiles:{type:Function,required:!0},hide:Boolean,onButtonClick:{type:Function}},setup(a,{slots:s}){const l=getPrefixCls("upload"),{t:o}=useI18n(),c=ref(!1),u=ref(null),d=ref(null),f=ref(0),g=se=>{se==="subtract"?f.value-=1:se==="add"?f.value+=1:se==="reset"&&(f.value=0)},y=se=>{if(!a.disabled){if(isFunction$1(a.onButtonClick)){const ce=a.onButtonClick(se);if(isPromise(ce)){ce.then(fe=>{a.uploadFiles(getFiles(fe))});return}}u.value&&u.value.click()}},$=se=>{const ce=se.target;ce.files&&a.uploadFiles(getFiles(ce.files)),ce.value=""},x=se=>{var ce,fe;if(se.preventDefault(),c.value=!1,g("reset"),!a.disabled)if(a.directory&&((ce=se.dataTransfer)!=null&&ce.items))loopDirectory(se.dataTransfer.items,a.accept,ea=>{a.uploadFiles(ea)});else{const ea=getFiles((fe=se.dataTransfer)==null?void 0:fe.files,a.accept);a.uploadFiles(a.multiple?ea:ea.slice(0,1))}},N=se=>{se.preventDefault(),g("subtract"),f.value===0&&(c.value=!1,g("reset"))},R=se=>{se.preventDefault(),!a.disabled&&!c.value&&(c.value=!0)},j=()=>s.default?createVNode$1("span",null,[s.default()]):a.listType==="picture-card"?createVNode$1("div",{class:`${l}-picture-card`},[createVNode$1("div",{class:`${l}-picture-card-text`},[createVNode$1(IconPlus,null,null)]),a.tip&&createVNode$1("div",{class:`${l}-tip`},[a.tip])]):a.draggable?createVNode$1("div",{class:[`${l}-drag`,{[`${l}-drag-active`]:c.value}]},[createVNode$1("div",null,[createVNode$1(IconPlus,null,null)]),createVNode$1("div",{class:`${l}-drag-text`},[c.value?o("upload.dragHover"):o("upload.drag")]),a.tip&&createVNode$1("div",{class:`${l}-tip`},[a.tip])]):createVNode$1(Button,{type:"primary",disabled:a.disabled},{default:()=>[o("upload.buttonText")],icon:()=>createVNode$1(IconUpload,null,null)}),ne=computed(()=>[l,{[`${l}-type-picture-card`]:a.listType==="picture-card",[`${l}-draggable`]:a.draggable,[`${l}-disabled`]:a.disabled,[`${l}-hide`]:a.hide}]);return()=>createVNode$1("span",{ref:d,class:ne.value,onClick:y,onDragenter:()=>{g("add")},onDrop:x,onDragover:R,onDragleave:N},[createVNode$1("input",mergeProps({ref:u,type:"file",style:{display:"none"},disabled:a.disabled,accept:a.accept,multiple:a.multiple},a.directory?{webkitdirectory:"webkitdirectory"}:{},{onChange:$}),null),j()])}});const _sfc_main$k=defineComponent({name:"IconPause",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-pause`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$j=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$d=createBaseVNode("path",{d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),_hoisted_3$b=createBaseVNode("path",{fill:"currentColor",stroke:"none",d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),_hoisted_4$7=[_hoisted_2$d,_hoisted_3$b];function _sfc_render$7(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$7,14,_hoisted_1$j)}var _IconPause=_export_sfc(_sfc_main$k,[["render",_sfc_render$7]]);const IconPause=Object.assign(_IconPause,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconPause.name,_IconPause)}}),_sfc_main$j=defineComponent({name:"IconPlayArrowFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-play-arrow-fill`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$i=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$c=createBaseVNode("path",{d:"M17.533 10.974a1 1 0 0 0-1.537.844v24.356a1 1 0 0 0 1.537.844L36.67 24.84a1 1 0 0 0 0-1.688L17.533 10.974Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_3$a=[_hoisted_2$c];function _sfc_render$6(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$a,14,_hoisted_1$i)}var _IconPlayArrowFill=_export_sfc(_sfc_main$j,[["render",_sfc_render$6]]);const IconPlayArrowFill=Object.assign(_IconPlayArrowFill,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconPlayArrowFill.name,_IconPlayArrowFill)}}),uploadInjectionKey=Symbol("ArcoUpload");var UploadProgress=defineComponent({name:"UploadProgress",props:{file:{type:Object,required:!0},listType:{type:String,required:!0}},setup(a){const s=getPrefixCls("upload-progress"),{t:l}=useI18n(),o=inject(uploadInjectionKey,void 0),c=()=>{var d,f,g,y,$,x,N,R,j,ne,se;return a.file.status==="error"?createVNode$1("span",{class:[o?.iconCls,`${o?.iconCls}-upload`],onClick:()=>o?.onUpload(a.file)},[o?.showRetryButton&&(($=(f=o==null?void 0:(d=o.slots)["retry-icon"])==null?void 0:f.call(d))!=null?$:(y=(g=o?.customIcon)==null?void 0:g.retryIcon)!=null&&y.call(g))||a.listType==="picture-card"?createVNode$1(IconUpload,null,null):l("upload.retry")]):a.file.status==="done"?createVNode$1("span",{class:[o?.iconCls,`${o?.iconCls}-success`]},[(se=(ne=(N=o==null?void 0:(x=o.slots)["success-icon"])==null?void 0:N.call(x))!=null?ne:(j=(R=o?.customIcon)==null?void 0:R.successIcon)==null?void 0:j.call(R))!=null?se:createVNode$1(IconCheck,null,null)]):a.file.status==="init"?createVNode$1(Tooltip,{content:l("upload.start")},{default:()=>{var ce,fe,ea,ta,na,aa;return[createVNode$1("span",{class:[o?.iconCls,`${o?.iconCls}-start`],onClick:()=>o?.onUpload(a.file)},[(aa=(na=(fe=o==null?void 0:(ce=o.slots)["start-icon"])==null?void 0:fe.call(ce))!=null?na:(ta=(ea=o?.customIcon)==null?void 0:ea.startIcon)==null?void 0:ta.call(ea))!=null?aa:createVNode$1(IconPlayArrowFill,null,null)])]}}):o?.showCancelButton&&createVNode$1(Tooltip,{content:l("upload.cancel")},{default:()=>{var ce,fe,ea,ta,na,aa;return[createVNode$1("span",{class:[o?.iconCls,`${o?.iconCls}-cancel`],onClick:()=>o?.onAbort(a.file)},[(aa=(na=(fe=o==null?void 0:(ce=o.slots)["cancel-icon"])==null?void 0:fe.call(ce))!=null?na:(ta=(ea=o?.customIcon)==null?void 0:ea.cancelIcon)==null?void 0:ta.call(ea))!=null?aa:createVNode$1(IconPause,null,null)])]}})},u=()=>{var d;if(["init","uploading"].includes((d=a.file.status)!=null?d:"")){const f=getProgressStatus(a.file.status);return createVNode$1(Progress,{type:"circle",size:"mini",showText:!1,status:f,percent:a.file.percent},null)}return null};return()=>createVNode$1("span",{class:s},[u(),c()])}});const _sfc_main$i=defineComponent({name:"IconFilePdf",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-file-pdf`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$h=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$b=createBaseVNode("path",{d:"M11 42h26a2 2 0 0 0 2-2V13.828a2 2 0 0 0-.586-1.414l-5.828-5.828A2 2 0 0 0 31.172 6H11a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2Z"},null,-1),_hoisted_3$9=createBaseVNode("path",{d:"M22.305 21.028c.874 1.939 3.506 6.265 4.903 8.055 1.747 2.237 3.494 2.685 4.368 2.237.873-.447 1.21-4.548-7.425-2.685-7.523 1.623-7.424 3.58-6.988 4.476.728 1.193 2.522 2.627 5.678-6.266C25.699 18.79 24.489 17 23.277 17c-1.409 0-2.538.805-.972 4.028Z"},null,-1),_hoisted_4$6=[_hoisted_2$b,_hoisted_3$9];function _sfc_render$5(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$6,14,_hoisted_1$h)}var _IconFilePdf=_export_sfc(_sfc_main$i,[["render",_sfc_render$5]]);const IconFilePdf=Object.assign(_IconFilePdf,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFilePdf.name,_IconFilePdf)}}),_sfc_main$h=defineComponent({name:"IconFileImage",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-file-image`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$g=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$a=createBaseVNode("path",{d:"m26 33 5-6v6h-5Zm0 0-3-4-4 4h7Zm11 9H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2ZM17 19h1v1h-1v-1Z"},null,-1),_hoisted_3$8=[_hoisted_2$a];function _sfc_render$4(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_3$8,14,_hoisted_1$g)}var _IconFileImage=_export_sfc(_sfc_main$h,[["render",_sfc_render$4]]);const IconFileImage=Object.assign(_IconFileImage,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFileImage.name,_IconFileImage)}}),_sfc_main$g=defineComponent({name:"IconFileVideo",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-file-video`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$f=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$9=createBaseVNode("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),_hoisted_3$7=createBaseVNode("path",{d:"M22 27.796v-6l5 3-5 3Z"},null,-1),_hoisted_4$5=[_hoisted_2$9,_hoisted_3$7];function _sfc_render$3(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_4$5,14,_hoisted_1$f)}var _IconFileVideo=_export_sfc(_sfc_main$g,[["render",_sfc_render$3]]);const IconFileVideo=Object.assign(_IconFileVideo,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFileVideo.name,_IconFileVideo)}}),_sfc_main$f=defineComponent({name:"IconFileAudio",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:a=>["butt","round","square"].includes(a)},strokeLinejoin:{type:String,default:"miter",validator:a=>["arcs","bevel","miter","miter-clip","round"].includes(a)},rotate:Number,spin:Boolean},emits:{click:a=>!0},setup(a,{emit:s}){const l=getPrefixCls("icon"),o=computed(()=>[l,`${l}-file-audio`,{[`${l}-spin`]:a.spin}]),c=computed(()=>{const d={};return a.size&&(d.fontSize=isNumber$1(a.size)?`${a.size}px`:a.size),a.rotate&&(d.transform=`rotate(${a.rotate}deg)`),d});return{cls:o,innerStyle:c,onClick:d=>{s("click",d)}}}}),_hoisted_1$e=["stroke-width","stroke-linecap","stroke-linejoin"],_hoisted_2$8=createBaseVNode("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),_hoisted_3$6=createBaseVNode("path",{d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor",stroke:"none"},null,-1),_hoisted_4$4=createBaseVNode("path",{d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm0 0-.951-12.363a.5.5 0 0 1 .58-.532L30 18"},null,-1),_hoisted_5$2=[_hoisted_2$8,_hoisted_3$6,_hoisted_4$4];function _sfc_render$2(a,s,l,o,c,u){return openBlock(),createElementBlock("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:normalizeClass(a.cls),style:normalizeStyle$1(a.innerStyle),"stroke-width":a.strokeWidth,"stroke-linecap":a.strokeLinecap,"stroke-linejoin":a.strokeLinejoin,onClick:s[0]||(s[0]=(...d)=>a.onClick&&a.onClick(...d))},_hoisted_5$2,14,_hoisted_1$e)}var _IconFileAudio=_export_sfc(_sfc_main$f,[["render",_sfc_render$2]]);const IconFileAudio=Object.assign(_IconFileAudio,{install:(a,s)=>{var l;const o=(l=s?.iconPrefix)!=null?l:"";a.component(o+_IconFileAudio.name,_IconFileAudio)}});var UploadListItem=defineComponent({name:"UploadListItem",props:{file:{type:Object,required:!0},listType:{type:String,required:!0}},setup(a){const l=`${getPrefixCls("upload-list")}-item`,{t:o}=useI18n(),c=inject(uploadInjectionKey,void 0),u=()=>{var d,f;let g="";if(a.file.file&&a.file.file.type)g=a.file.file.type;else{const y=(f=(d=a.file.name)==null?void 0:d.split(".")[1])!=null?f:"";["png","jpg","jpeg","bmp","gif","webp"].includes(y)?g="image":["mp4","m2v","mkv","m4v","mov"].includes(y)?g="video":["mp3","wav","wmv","m4a","acc","flac"].includes(y)&&(g="audio")}return g.includes("image")?createVNode$1(IconFileImage,null,null):g.includes("pdf")?createVNode$1(IconFilePdf,null,null):g.includes("audio")?createVNode$1(IconFileAudio,null,null):g.includes("video")?createVNode$1(IconFileVideo,null,null):createVNode$1(IconFile,null,null)};return()=>{var d,f,g,y,$,x,N,R,j,ne,se,ce,fe,ea,ta,na,aa,ia,sa,ra,la,oa,ca;return createVNode$1("div",{class:[l,`${l}-${a.file.status}`]},[createVNode$1("div",{class:`${l}-content`},[c?.listType==="picture"&&createVNode$1("span",{class:`${l}-thumbnail`},[(g=(f=c==null?void 0:(d=c.slots).image)==null?void 0:f.call(d,{fileItem:a.file}))!=null?g:createVNode$1("img",mergeProps({src:a.file.url,alt:a.file.name},c?.imageLoading?{loading:c.imageLoading}:void 0),null)]),createVNode$1("div",{class:`${l}-name`},[c?.listType==="text"&&createVNode$1("span",{class:`${l}-file-icon`},[(j=(R=($=c==null?void 0:(y=c.slots)["file-icon"])==null?void 0:$.call(y,{fileItem:a.file}))!=null?R:(N=(x=c?.customIcon)==null?void 0:x.fileIcon)==null?void 0:N.call(x,a.file))!=null?j:u()]),c?.showLink&&a.file.url?createVNode$1("a",mergeProps({class:`${l}-name-link`,target:"_blank",href:a.file.url},c?.download?{download:a.file.name}:void 0),[(ta=(ea=(se=c==null?void 0:(ne=c.slots)["file-name"])==null?void 0:se.call(ne,{fileItem:a.file}))!=null?ea:(fe=(ce=c?.customIcon)==null?void 0:ce.fileName)==null?void 0:fe.call(ce,a.file))!=null?ta:a.file.name]):createVNode$1("span",{class:`${l}-name-text`,onClick:()=>c?.onPreview(a.file)},[(la=(ra=(aa=c==null?void 0:(na=c.slots)["file-name"])==null?void 0:aa.call(na,{fileItem:a.file}))!=null?ra:(sa=(ia=c?.customIcon)==null?void 0:ia.fileName)==null?void 0:sa.call(ia,a.file))!=null?la:a.file.name]),a.file.status==="error"&&createVNode$1(Tooltip,{content:o("upload.error")},{default:()=>{var pa,ua,da,ha,ga,fa;return[createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-error`]},[(fa=(ga=(ua=c==null?void 0:(pa=c.slots)["error-icon"])==null?void 0:ua.call(pa))!=null?ga:(ha=(da=c?.customIcon)==null?void 0:da.errorIcon)==null?void 0:ha.call(da))!=null?fa:createVNode$1(IconExclamationCircleFill,null,null)])]}})]),createVNode$1(UploadProgress,{file:a.file,listType:a.listType},null)]),c?.showRemoveButton&&createVNode$1("span",{class:`${l}-operation`},[createVNode$1(IconHover,{onClick:()=>{var pa;return(pa=c?.onRemove)==null?void 0:pa.call(c,a.file)}},{default:()=>{var pa,ua,da,ha,ga,fa;return[createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-remove`]},[(fa=(ga=(ua=c==null?void 0:(pa=c.slots)["remove-icon"])==null?void 0:ua.call(pa))!=null?ga:(ha=(da=c?.customIcon)==null?void 0:da.removeIcon)==null?void 0:ha.call(da))!=null?fa:createVNode$1(IconDelete,null,null)])]}})]),(ca=c==null?void 0:(oa=c.slots)["extra-button"])==null?void 0:ca.call(oa,{fileItem:a.file})])}}}),UploadPictureItem=defineComponent({name:"UploadPictureItem",props:{file:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup(a){const l=`${getPrefixCls("upload-list")}-picture`,o=computed(()=>[l,{[`${l}-status-error`]:a.file.status==="error"}]),c=inject(uploadInjectionKey,void 0),u=()=>{var d,f,g,y,$,x,N,R,j,ne,se,ce,fe,ea,ta,na,aa,ia,sa,ra,la,oa,ca,pa,ua,da,ha,ga,fa;return a.file.status==="uploading"?createVNode$1(UploadProgress,{file:a.file,listType:"picture-card"},null):createVNode$1(Fragment,null,[(g=(f=c==null?void 0:(d=c.slots).image)==null?void 0:f.call(d,{fileItem:a.file}))!=null?g:createVNode$1("img",mergeProps({src:a.file.url,alt:a.file.name},c?.imageLoading?{loading:c.imageLoading}:void 0),null),createVNode$1("div",{class:`${l}-mask`},[a.file.status==="error"&&c?.showCancelButton&&createVNode$1("div",{class:`${l}-error-tip`},[createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-error`]},[(j=(R=($=c==null?void 0:(y=c.slots)["error-icon"])==null?void 0:$.call(y))!=null?R:(N=(x=c?.customIcon)==null?void 0:x.errorIcon)==null?void 0:N.call(x))!=null?j:createVNode$1(IconImageClose,null,null)])]),createVNode$1("div",{class:`${l}-operation`},[a.file.status!=="error"&&c?.showPreviewButton&&createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-preview`],onClick:()=>c?.onPreview(a.file)},[(ta=(ea=(se=c==null?void 0:(ne=c.slots)["preview-icon"])==null?void 0:se.call(ne))!=null?ea:(fe=(ce=c?.customIcon)==null?void 0:ce.previewIcon)==null?void 0:fe.call(ce))!=null?ta:createVNode$1(IconEye,null,null)]),["init","error"].includes(a.file.status)&&c?.showRetryButton&&createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-upload`],onClick:()=>c?.onUpload(a.file)},[(la=(ra=(aa=c==null?void 0:(na=c.slots)["retry-icon"])==null?void 0:aa.call(na))!=null?ra:(sa=(ia=c?.customIcon)==null?void 0:ia.retryIcon)==null?void 0:sa.call(ia))!=null?la:createVNode$1(IconUpload,null,null)]),!c?.disabled&&c?.showRemoveButton&&createVNode$1("span",{class:[c?.iconCls,`${c?.iconCls}-remove`],onClick:()=>c?.onRemove(a.file)},[(ha=(da=(ca=c==null?void 0:(oa=c.slots)["remove-icon"])==null?void 0:ca.call(oa))!=null?da:(ua=(pa=c?.customIcon)==null?void 0:pa.removeIcon)==null?void 0:ua.call(pa))!=null?ha:createVNode$1(IconDelete,null,null)]),(fa=c==null?void 0:(ga=c.slots)["extra-button"])==null?void 0:fa.call(ga,a.file)])])])};return()=>createVNode$1("span",{class:o.value},[u()])}}),UploadList=defineComponent({name:"UploadList",components:{UploadListItem,UploadPictureItem},props:{fileList:{type:Array,required:!0},listType:{type:String,required:!0}},setup(a,{slots:s}){const l=getPrefixCls("upload"),o=computed(()=>[`${l}-list`,`${l}-list-type-${a.listType}`]),c=(u,d)=>isFunction$1(s["upload-item"])?s["upload-item"]({fileItem:u,index:d}):a.listType==="picture-card"?createVNode$1(UploadPictureItem,{file:u,key:`item-${d}`},null):createVNode$1(UploadListItem,{file:u,listType:a.listType,key:`item-${d}`},null);return()=>createVNode$1(TransitionGroup,{tag:"div",class:o.value},{default:()=>{var u;return[...a.fileList.map((d,f)=>c(d,f)),a.listType==="picture-card"&&((u=s["upload-button"])==null?void 0:u.call(s))]}})}}),__defProp$5=Object.defineProperty,__defProps$5=Object.defineProperties,__getOwnPropDescs$5=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__defNormalProp$5=(a,s,l)=>s in a?__defProp$5(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$5=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$6.call(s,l)&&__defNormalProp$5(a,l,s[l]);if(__getOwnPropSymbols$6)for(var l of __getOwnPropSymbols$6(s))__propIsEnum$6.call(s,l)&&__defNormalProp$5(a,l,s[l]);return a},__spreadProps$5=(a,s)=>__defProps$5(a,__getOwnPropDescs$5(s)),_Upload=defineComponent({name:"Upload",props:{fileList:{type:Array,default:void 0},defaultFileList:{type:Array,default:()=>[]},accept:String,action:String,disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},directory:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tip:String,headers:{type:Object},data:{type:[Object,Function]},name:{type:[String,Function]},withCredentials:{type:Boolean,default:!1},customRequest:{type:Function},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showRetryButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},showUploadButton:{type:[Boolean,Object],default:!0},showPreviewButton:{type:Boolean,default:!0},download:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},imageLoading:{type:String},listType:{type:String,default:"text"},responseUrlKey:{type:[String,Function]},customIcon:{type:Object},imagePreview:{type:Boolean,default:!1},onBeforeUpload:{type:Function},onBeforeRemove:{type:Function},onButtonClick:{type:Function}},emits:{"update:fileList":a=>!0,exceedLimit:(a,s)=>!0,change:(a,s)=>!0,progress:(a,s)=>!0,preview:a=>!0,success:a=>!0,error:a=>!0},setup(a,{emit:s,slots:l}){const{fileList:o,disabled:c,listType:u,customIcon:d,showRetryButton:f,showCancelButton:g,showRemoveButton:y,showPreviewButton:$,imageLoading:x,download:N,showLink:R}=toRefs(a),j=getPrefixCls("upload"),{mergedDisabled:ne,eventHandlers:se}=useFormItem({disabled:c}),ce=ref([]),fe=new Map,ea=new Map,ta=computed(()=>a.limit>0&&ce.value.length>=a.limit),na=Ea=>{fe.clear();const Ca=Ea?.map(($a,Pa)=>{var Da,Ta,Ba;const wa=(Da=$a.status)!=null?Da:"done",Oa=reactive(__spreadProps$5(__spreadValues$5({},$a),{uid:(Ta=$a.uid)!=null?Ta:`${Date.now()}${Pa}`,status:wa,percent:(Ba=$a.percent)!=null?Ba:["error","init"].indexOf(wa)>-1?0:1}));return fe.set(Oa.uid,Oa),Oa});ce.value=Ca??[]};na(a.defaultFileList),watch(o,Ea=>{Ea&&na(Ea)},{immediate:!0,deep:!0});const aa=Ea=>{var Ca,$a;s("update:fileList",ce.value),s("change",ce.value,Ea),($a=(Ca=se.value)==null?void 0:Ca.onChange)==null||$a.call(Ca)},ia=(Ea,Ca)=>{for(const $a of ce.value)if($a.uid===Ea){$a.file=Ca,aa($a);break}},sa=Ea=>{const Ca=(Ba,wa)=>{const Oa=fe.get(Ea.uid);Oa&&(Oa.status="uploading",Oa.percent=Ba,s("progress",Oa,wa),aa(Oa))},$a=Ba=>{const wa=fe.get(Ea.uid);wa&&(wa.status="done",wa.percent=1,wa.response=Ba,a.responseUrlKey&&(isFunction$1(a.responseUrlKey)?wa.url=a.responseUrlKey(wa):Ba[a.responseUrlKey]&&(wa.url=Ba[a.responseUrlKey])),ea.delete(wa.uid),s("success",wa),aa(wa))},Pa=Ba=>{const wa=fe.get(Ea.uid);wa&&(wa.status="error",wa.percent=0,wa.response=Ba,ea.delete(wa.uid),s("error",wa),aa(wa))},Da={fileItem:Ea,action:a.action,name:a.name,data:a.data,headers:a.headers,withCredentials:a.withCredentials,onProgress:Ca,onSuccess:$a,onError:Pa};Ea.status="uploading",Ea.percent=0;const Ta=isFunction$1(a.customRequest)?a.customRequest(Da):uploadRequest(Da);ea.set(Ea.uid,Ta),aa(Ea)},ra=Ea=>{var Ca;const $a=ea.get(Ea.uid);if($a){(Ca=$a.abort)==null||Ca.call($a),ea.delete(Ea.uid);const Pa=fe.get(Ea.uid);Pa&&(Pa.status="error",Pa.percent=0,aa(Pa))}},la=Ea=>{if(Ea){const Ca=fe.get(Ea.uid);Ca&&sa(Ca)}else for(const Ca of ce.value)Ca.status==="init"&&sa(Ca)},oa=async(Ea,Ca)=>{const $a=`${Date.now()}-${Ca}`,Pa=isImage(Ea)?URL.createObjectURL(Ea):void 0,Da=reactive({uid:$a,file:Ea,url:Pa,name:Ea.name,status:"init",percent:0});fe.set($a,Da),ce.value=[...ce.value,Da],aa(Da),a.autoUpload&&sa(Da)},ca=Ea=>{if(a.limit>0&&ce.value.length+Ea.length>a.limit){s("exceedLimit",ce.value,Ea);return}for(let Ca=0;Ca<Ea.length;Ca++){const $a=Ea[Ca];isFunction$1(a.onBeforeUpload)?Promise.resolve(a.onBeforeUpload($a)).then(Pa=>{Pa&&oa(isBoolean$1(Pa)?$a:Pa,Ca)}).catch(Pa=>{console.error(Pa)}):oa($a,Ca)}},pa=Ea=>{ce.value=ce.value.filter(Ca=>Ca.uid!==Ea.uid),aa(Ea)},ua=Ea=>{isFunction$1(a.onBeforeRemove)?Promise.resolve(a.onBeforeRemove(Ea)).then(Ca=>{Ca&&pa(Ea)}).catch(Ca=>{console.error(Ca)}):pa(Ea)},da=Ea=>{if(a.imagePreview&&Ea.url){const Ca=ya.value.indexOf(Ea.url);Ca>-1&&(ma.value=Ca,fa.value=!0)}s("preview",Ea)};provide(uploadInjectionKey,reactive({disabled:ne,listType:u,iconCls:`${j}-icon`,showRemoveButton:y,showRetryButton:f,showCancelButton:g,showPreviewButton:$,showLink:R,imageLoading:x,download:N,customIcon:d,slots:l,onUpload:sa,onAbort:ra,onRemove:ua,onPreview:da}));const ha=computed(()=>{if(a.accept)return a.accept;if(a.listType==="picture"||a.listType==="picture-card")return"image/*"}),ga=()=>{const Ea=createVNode$1(UploadButton,{key:"arco-upload-button",disabled:ne.value,draggable:a.draggable,listType:a.listType,uploadFiles:ca,multiple:a.multiple,directory:a.directory,tip:a.tip,hide:!a.showUploadButton||ta.value&&!(isObject$1(a.showUploadButton)&&a.showUploadButton.showOnExceedLimit),accept:ha.value,onButtonClick:a.onButtonClick},{default:l["upload-button"]});return a.tip&&a.listType!=="picture-card"&&!a.draggable?createVNode$1("span",null,[Ea,createVNode$1("div",{class:`${j}-tip`},[a.tip])]):Ea},fa=ref(!1),ma=ref(0),va=Ea=>{ma.value=Ea},ka=Ea=>{fa.value=Ea},ya=computed(()=>ce.value.filter(Ea=>!!Ea.url).map(Ea=>Ea.url));return{prefixCls:j,render:()=>a.showFileList?createVNode$1("div",{class:[`${j}-wrapper`,`${j}-wrapper-type-${a.listType}`]},[a.imagePreview&&ya.value.length>0&&createVNode$1(ImagePreviewGroup,{srcList:ya.value,visible:fa.value,current:ma.value,onChange:va,onVisibleChange:ka},null),a.listType!=="picture-card"&&a.showUploadButton&&ga(),createVNode$1(UploadList,{fileList:ce.value,listType:a.listType},{"upload-button":ga,"upload-item":l["upload-item"]})]):a.showUploadButton&&ga(),innerSubmit:la,innerAbort:ra,innerUpdateFile:ia,innerUpload:ca}},methods:{submit(a){return this.innerSubmit(a)},abort(a){return this.innerAbort(a)},updateFile(a,s){return this.innerUpdateFile(a,s)},upload(a){return this.innerUpload(a)}},render(){return this.render()}});const Upload=Object.assign(_Upload,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Upload.name,_Upload)}});var _OverflowList=defineComponent({name:"OverflowList",props:{min:{type:Number,default:0},margin:{type:Number,default:8},from:{type:String,default:"end"}},emits:{change:a=>!0},setup(a,{emit:s,slots:l}){const o=getPrefixCls("overflow-list"),c=ref(),u=ref(),d=ref(),f={},g=[],y=ref(0),$=ref(0),x=computed(()=>$.value>0),N=ref(0),R=computed(()=>a.from==="start");watch(y,(se,ce)=>{$.value>0&&($.value+=se-ce,$.value<0&&($.value=0))}),watch($,se=>{s("change",se)});const j=()=>{var se,ce,fe;if(c.value&&f.value&&d.value){const ea=d.value.offsetWidth;if(ea>1&&($.value===0||ea<N.value))return;for(let ia=0;ia<f.value.length;ia++){const sa=f.value[ia].el;sa&&sa.offsetWidth&&(g[ia]=sa.offsetWidth+a.margin)}let ta=c.value.clientWidth-((ce=(se=u.value)==null?void 0:se.offsetWidth)!=null?ce:0)-(R.value?a.margin:0);const na=R.value?getReverse(g):g;let aa=0;for(let ia=0;ia<na.length;ia++){const sa=(fe=na[ia])!=null?fe:0;if(sa<ta-1)ta-=sa,aa+=1;else{N.value=sa;break}}aa<a.min&&a.min<y.value&&(aa=a.min),$.value!==y.value-aa&&($.value=y.value-aa)}};watch(x,()=>j(),{flush:"post"}),onMounted(()=>{d.value&&d.value.offsetWidth<1&&j()});const ne=()=>{var se,ce;const fe=R.value?{marginRight:`${a.margin}px`}:void 0;return createVNode$1("div",{ref:u,class:`${o}-overflow`,style:fe},[(ce=(se=l.overflow)==null?void 0:se.call(l,{number:$.value}))!=null?ce:createVNode$1(Tag,null,{default:()=>[createTextVNode("+"),$.value]})])};return()=>{var se,ce;f.value=getAllElements((se=l.default)==null?void 0:se.call(l)),y.value!==f.value.length&&(y.value=f.value.length,g.length=y.value);let fe=f.value;$.value>0&&(fe=R.value?f.value.slice($.value):f.value.slice(0,-$.value));const ea=$.value===0||R.value?fe.length-1:fe.length;for(let ta=0;ta<ea;ta++)fe[ta].props=mergeProps((ce=fe[ta].props)!=null?ce:{},{style:{marginRight:`${a.margin}px`}});return createVNode$1("div",{ref:c,class:o},[R.value&&$.value>0&&ne(),fe,!R.value&&$.value>0&&ne(),createVNode$1(ResizeObserver$1,{onResize:j},{default:()=>[createVNode$1("div",{ref:d,class:`${o}-spacer`},null)]})])}}});const OverflowList=Object.assign(_OverflowList,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_OverflowList.name,_OverflowList)}});var _VerificationCode=defineComponent({name:"VerificationCode",props:{modelValue:String,defaultValue:{type:String,default:""},length:{type:Number,default:6},size:{type:String},disabled:Boolean,masked:Boolean,readonly:Boolean,error:{type:Boolean,default:!1},separator:{type:Function},formatter:{type:Function}},emits:{"update:modelValue":a=>!0,change:a=>!0,finish:a=>!0,input:(a,s,l)=>!0},setup(a,{emit:s}){const l=getPrefixCls("verification-code"),o=getPrefixCls("input"),c=ref([]),u=computed(()=>{var se;return(se=a.modelValue)!=null?se:a.defaultValue}),d=computed(()=>a.masked?"password":"text"),f=computed(()=>[o,{[`${o}-size-${a.size}`]:a.size}]),g=computed(()=>{const se=String(u.value).split("");return new Array(a.length).fill("").map((ce,fe)=>isExist(se[fe])?String(se[fe]):"")}),y=ref(g.value);watch(u,()=>{y.value=g.value});const $=()=>{const se=y.value.join("").trim();s("update:modelValue",se),s("change",se),se.length===a.length&&s("finish",se),N()},x=se=>c?.value[se].focus(),N=se=>{if(!(isExist(se)&&y.value[se])){for(let ce=0;ce<y.value.length;ce++)if(!y.value[ce]){x(ce);break}}},R=(se,ce)=>{se.preventDefault();const{clipboardData:fe}=se,ea=fe?.getData("text");ea&&(ea.split("").forEach((ta,na)=>{if(!(ce+na>=a.length)){if(isFunction$1(a.formatter)){const aa=a.formatter(ta,ce+na,y.value.join(""));if(aa===!1){ce-=1;return}isString$1(aa)&&(ta=aa.charAt(0))}y.value[ce+na]=ta}}),$())},j=(se,ce)=>{const fe=ce.code||ce.key;fe===Backspace.code&&!y.value[se]?(ce.preventDefault(),y.value[Math.max(se-1,0)]="",$()):fe===ArrowLeft.code&&se>0?(ce.preventDefault(),x(se-1)):fe===ArrowRight.code&&y.value[se]&&se<a.length-1&&(ce.preventDefault(),x(se+1))},ne=(se,ce,fe)=>{let ea=(ce||"").trim().charAt(ce.length-1);if(s("input",ea,se,fe),isFunction$1(a.formatter)){const ta=a.formatter(ea,se,y.value.join(""));if(ta===!1)return;isString$1(ta)&&(ea=ta.charAt(0))}y.value[se]=ea,$()};return()=>createVNode$1("div",{class:l},[y.value.map((se,ce)=>{var fe;return createVNode$1(Fragment,null,[createVNode$1(Input,{key:ce,ref:ea=>c.value[ce]=ea,type:d.value,class:f.value,modelValue:se,size:a.size,error:a.error,disabled:a.disabled,readonly:a.readonly,onFocus:()=>N(ce),onInput:(ea,ta)=>ne(ce,ea,ta),onKeydown:ea=>j(ce,ea),onPaste:ea=>R(ea,ce)},null),(fe=a.separator)==null?void 0:fe.call(a,ce,se)])})])}});const VerificationCode=Object.assign(_VerificationCode,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_VerificationCode.name,_VerificationCode)}});var __getOwnPropSymbols$5=Object.getOwnPropertySymbols,__hasOwnProp$5=Object.prototype.hasOwnProperty,__propIsEnum$5=Object.prototype.propertyIsEnumerable,__objRest=(a,s)=>{var l={};for(var o in a)__hasOwnProp$5.call(a,o)&&s.indexOf(o)<0&&(l[o]=a[o]);if(a!=null&&__getOwnPropSymbols$5)for(var o of __getOwnPropSymbols$5(a))s.indexOf(o)<0&&__propIsEnum$5.call(a,o)&&(l[o]=a[o]);return l};const defaultWindow=typeof window<"u"?window:void 0;function unrefElement(a){var s;const l=unref(a);return(s=l?.$el)!=null?s:l}function tryOnScopeDispose(a){return getCurrentScope()?(onScopeDispose(a),!0):!1}function useMutationObserver(a,s,l={}){const o=l,{window:c=defaultWindow}=o,u=__objRest(o,["window"]),d=c&&"MutationObserver"in c;let f;const g=()=>{f&&(f.disconnect(),f=void 0)},y=watch(()=>unrefElement(a),x=>{g(),d&&c&&x&&(f=new MutationObserver(s),f.observe(x,u))},{immediate:!0}),$=()=>{g(),y()};return tryOnScopeDispose($),{isSupported:d,stop:$}}const THEME_TOKEN="arco-theme",Theme={Dark:"dark",Light:"light"},useTheme=a=>{const s=ref(Theme.Light),l=c=>{s.value=c},o=c=>c.getAttribute(THEME_TOKEN)===Theme.Dark?Theme.Dark:Theme.Light;return useMutationObserver(document.body,c=>{for(const u of c)if(u.type==="attributes"&&u.attributeName===THEME_TOKEN){l(o(u.target)),a?.();break}},{attributes:!0,attributeFilter:[THEME_TOKEN],subtree:!1,childList:!1,characterData:!1}),l(o(document.body)),{theme:s,setTheme:l}};function camelToKebab(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function styleToString(a){return Object.entries(a).map(([s,l])=>`${camelToKebab(s)}:${l}`).join(";")}function canvasToGray(a){const s=a.getContext("2d");if(!s)return;const l=s.getImageData(0,0,a.width,a.height),{data:o}=l;for(let c=0;c<o.length;c+=4){const u=(o[c]+o[c+1]+o[c+2])/3;o[c]=u,o[c+1]=u,o[c+2]=u}s.putImageData(l,0,0)}var __defProp$4=Object.defineProperty,__defProps$4=Object.defineProperties,__getOwnPropDescs$4=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$4=Object.getOwnPropertySymbols,__hasOwnProp$4=Object.prototype.hasOwnProperty,__propIsEnum$4=Object.prototype.propertyIsEnumerable,__defNormalProp$4=(a,s,l)=>s in a?__defProp$4(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$4=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$4.call(s,l)&&__defNormalProp$4(a,l,s[l]);if(__getOwnPropSymbols$4)for(var l of __getOwnPropSymbols$4(s))__propIsEnum$4.call(s,l)&&__defNormalProp$4(a,l,s[l]);return a},__spreadProps$4=(a,s)=>__defProps$4(a,__getOwnPropDescs$4(s)),_Watermark=defineComponent({name:"Watermark",props:{content:{type:[String,Array]},image:{type:String},width:{type:Number},height:{type:Number},gap:{type:Array,default:()=>[90,90]},offset:{type:Array},rotate:{type:Number,default:-22},font:{type:Object},zIndex:{type:Number,default:6},alpha:{type:Number,default:1},antiTamper:{type:Boolean,default:!0},grayscale:{type:Boolean,default:!1},repeat:{type:Boolean,default:!0},staggered:{type:Boolean,default:!0}},setup(a,{slots:s,attrs:l}){const{width:o,height:c,image:u,rotate:d,alpha:f,repeat:g,grayscale:y}=toRefs(a),$=getPrefixCls("watermark"),x=window.devicePixelRatio||1,N=shallowRef(),R=ref(new Map),j=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.fontSize)!=null?va:16}),ne=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.fontWeight)!=null?va:"normal"}),se=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.fontStyle)!=null?va:"normal"}),ce=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.fontFamily)!=null?va:"sans-serif"}),fe=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.textAlign)!=null?va:"center"}),ea=computed(()=>isArray$1(a.content)?a.content:[a.content]),ta=computed(()=>{var ma,va;return(va=(ma=a.font)==null?void 0:ma.color)!=null?va:fa.value==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.15)"}),na=computed(()=>{var ma,va;return(va=(ma=a.gap)==null?void 0:ma[0])!=null?va:90}),aa=computed(()=>{var ma,va;return(va=(ma=a.gap)==null?void 0:ma[1])!=null?va:90}),ia=computed(()=>na.value/2),sa=computed(()=>aa.value/2),ra=computed(()=>{var ma,va;return(va=(ma=a.offset)==null?void 0:ma[0])!=null?va:ia.value}),la=computed(()=>{var ma,va;return(va=(ma=a.offset)==null?void 0:ma[1])!=null?va:sa.value}),oa=computed(()=>{var ma;const va=ra.value-ia.value,ka=la.value-sa.value;return{position:"absolute",left:va>0?`${va}px`:0,top:ka>0?`${ka}px`:0,width:va>0?`calc(100% - ${va}px)`:"100%",height:ka>0?`calc(100% - ${ka}px)`:"100%",pointerEvents:"none",backgroundRepeat:a.repeat?"repeat":"no-repeat",backgroundPosition:`${va>0?0:va}px ${ka>0?0:ka}px`,zIndex:(ma=a.zIndex)!=null?ma:6}}),ca=computed(()=>a.repeat&&a.staggered),pa=(ma,va)=>{var ka;if(N.value){const ya=R.value.get(N.value);ya&&(N.value.contains(ya)&&N.value.removeChild(ya),R.value.delete(N.value));const ba=document.createElement("div");ba.setAttribute("style",styleToString(__spreadProps$4(__spreadValues$4({},oa.value),{backgroundImage:`url('${ma}')`,backgroundSize:`${va}px`}))),(ka=N.value)==null||ka.append(ba),R.value.set(N.value,ba)}},ua=ma=>{var va,ka;let ya=120,ba=28;if(!u.value&&ma.measureText){ma.font=`${j.value}px ${ce.value}`;const Ea=ea.value.map(Ca=>ma.measureText(Ca).width);ya=Math.ceil(Math.max(...Ea)),ba=j.value*ea.value.length+(ea.value.length-1)*3}return[(va=o.value)!=null?va:ya,(ka=c.value)!=null?ka:ba]},da=()=>{var ma;const va=document.createElement("canvas"),ka=va.getContext("2d");if(!ka)return;const[ya,ba]=ua(ka),Ea=ya*x,Ca=ba*x,$a=(na.value+ya)*x,Pa=(aa.value+ba)*x,Da=na.value/2*x,Ta=aa.value/2*x,Ba=$a/2,wa=Pa/2,Oa=ca.value?2:1,Aa=(na.value+ya)*Oa;va.width=$a*Oa,va.height=Pa*Oa,ka.globalAlpha=f.value,ka.save(),ka.translate(Ba,wa),ka.rotate(Math.PI/180*d.value),ka.translate(-Ba,-wa);const Sa=()=>{ka.restore(),ca.value&&ka.drawImage(va,0,0,$a,Pa,$a,Pa,$a,Pa),y.value&&canvasToGray(va),pa(va.toDataURL(),Aa)};if(u.value){const Fa=new Image;Fa.onload=()=>{ka.drawImage(Fa,Da,Ta,Ea,Ca),Sa()},Fa.crossOrigin="anonymous",Fa.referrerPolicy="no-referrer",Fa.src=u.value}else{const Fa=Number(j.value)*x;ka.font=`${se.value} normal ${ne.value} ${Fa}px/${ba}px ${ce.value}`,ka.fillStyle=ta.value,ka.textAlign=fe.value,ka.textBaseline="top",ka.translate(Ea/2,0),(ma=ea.value)==null||ma.forEach((Ia,Ga)=>{ka.fillText(Ia??"",Da,Ta+Ga*(Fa+3*x))}),Sa()}},ha=ma=>Array.from(R.value.values()).includes(ma),ga=ma=>{if(a.antiTamper)for(const va of ma){const ka=Array.from(va.removedNodes).some(ba=>ha(ba)),ya=va.type==="attributes"&&ha(va.target);if(ka||ya){da();break}}},{theme:fa}=useTheme(da);return onMounted(()=>{da(),useMutationObserver(N.value,ga,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}),watch(a,da,{deep:!0,flush:"post"}),()=>{var ma;return createVNode$1("div",mergeProps({ref:N,class:$,style:{position:"relative",overflow:"hidden"}},l),[(ma=s.default)==null?void 0:ma.call(s)])}}});const Watermark=Object.assign(_Watermark,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_Watermark.name,_Watermark)}});var __defProp$3=Object.defineProperty,__defProps$3=Object.defineProperties,__getOwnPropDescs$3=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$3=Object.getOwnPropertySymbols,__hasOwnProp$3=Object.prototype.hasOwnProperty,__propIsEnum$3=Object.prototype.propertyIsEnumerable,__defNormalProp$3=(a,s,l)=>s in a?__defProp$3(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$3=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$3.call(s,l)&&__defNormalProp$3(a,l,s[l]);if(__getOwnPropSymbols$3)for(var l of __getOwnPropSymbols$3(s))__propIsEnum$3.call(s,l)&&__defNormalProp$3(a,l,s[l]);return a},__spreadProps$3=(a,s)=>__defProps$3(a,__getOwnPropDescs$3(s));function _isSlot(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!isVNode(a)}var Panel=defineComponent({name:"TreeSelectPanel",components:{Tree},props:{treeProps:{type:Object,default:()=>({})},selectedKeys:{type:Array},showCheckable:{type:Boolean},treeSlots:{type:Object,default:()=>({})},scrollbar:{type:[Boolean,Object],default:!0}},emits:["change"],setup(a,{emit:s}){const{showCheckable:l,selectedKeys:o,treeProps:c,scrollbar:u}=toRefs(a),{displayScrollbar:d,scrollbarProps:f}=useScrollbar(u),g=getPrefixCls("tree-select"),y=ref(),$=computed(()=>__spreadProps$3(__spreadValues$3({},c.value),{disableSelectActionOnly:!0,checkedKeys:l.value?o.value:[],selectedKeys:l.value?[]:o.value})),x=(j,ne)=>{var se,ce;l.value?(ce=(se=y.value)==null?void 0:se.toggleCheck)==null||ce.call(se,j[0],ne):s("change",j)},N=j=>{s("change",j)},R=()=>createVNode$1(Tree,mergeProps({ref:y},$.value,{onSelect:x,onCheck:N}),a.treeSlots);return()=>{if(d.value){let j;return createVNode$1(Scrollbar,mergeProps({class:`${g}-tree-wrapper`},f.value),_isSlot(j=R())?j:{default:()=>[j]})}return createVNode$1("div",{class:`${g}-tree-wrapper`},[R()])}}}),__defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(a,s,l)=>s in a?__defProp$2(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$2=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$2.call(s,l)&&__defNormalProp$2(a,l,s[l]);if(__getOwnPropSymbols$2)for(var l of __getOwnPropSymbols$2(s))__propIsEnum$2.call(s,l)&&__defNormalProp$2(a,l,s[l]);return a},__spreadProps$2=(a,s)=>__defProps$2(a,__getOwnPropDescs$2(s));function isLabelValue(a){return isObject$1(a)}function isValidKey(a){return a!=null&&a!==""}function getKey(a){return isLabelValue(a)?a.value:a}function getLabel(a){return isLabelValue(a)?a.label:void 0}function isValidValue(a){const s=getKey(a);return isValidKey(s)}function getKeys(a){return a.map(getKey).filter(isValidKey)}function useSelectedState(a){var s;const{defaultValue:l,modelValue:o,key2TreeNode:c,multiple:u,treeCheckable:d,fallbackOption:f,fieldNames:g}=toRefs(a);function y(ta){const na=(isArray$1(ta)?ta:[ta]).filter(isValidValue);return u?.value||d?.value?na:na.slice(0,1)}function $(ta,na){const aa=[],ia=ta?ta.filter(isValidValue):[];if(ia.length){const sa=new Map;na?.forEach(ra=>{sa.set(ra.value,ra)}),ia.forEach(ra=>{var la,oa,ca,pa,ua;const da=getKey(ra),ha=sa.get(da),ga=c.value.get(da);let fa=null;const ma=((la=g?.value)==null?void 0:la.title)||"title";if(!ga){const va=isFunction$1(f?.value)?f?.value(da):f?.value;if(va===!1)return;isObject$1(va)&&(fa=va)}aa.push(__spreadProps$2(__spreadValues$2(__spreadValues$2({},isLabelValue(ra)?ra:{}),ha||{}),{value:da,label:(ua=(pa=(ca=(oa=getLabel(ra))!=null?oa:ga?.title)!=null?ca:ha?.label)!=null?pa:fa?.[ma])!=null?ua:da}))})}return aa}const x=ref(),N=ref();watchEffect(()=>{var ta;const na=o?.value!==void 0,aa=y((ta=o?.value)!=null?ta:[]),ia=getKeys(aa);N.value=na?$(ia,$(aa)):void 0,x.value=na?ia:void 0});const R=y((s=l?.value)!=null?s:[]),j=getKeys(R),ne=$(j,$(R)),se=ref(j||[]),ce=ref(ne);watch(se,()=>{ce.value=$(se.value,ne)}),watch([x,N],([ta,na])=>{se.value=ta||[],ce.value=na||[]});const fe=computed(()=>{var ta;return(ta=x.value)!=null?ta:se.value}),ea=computed(()=>{var ta;return(ta=N.value)!=null?ta:ce.value});return{selectedKeys:fe,selectedValue:ea,setLocalSelectedKeys(ta){se.value=ta},localSelectedKeys:se,localSelectedValue:ce}}function useFilterTreeNode(a){const{searchValue:s,flattenTreeData:l,filterMethod:o,disableFilter:c,fieldNames:u}=toRefs(a),d=computed(()=>{var j;return((j=u.value)==null?void 0:j.key)||"key"}),f=(j,ne)=>{const se=ne[d.value];return!isUndefined(se)&&String(se).indexOf(j)>-1},g=computed(()=>o?.value||f),y=ref(),$=computed(()=>!!s.value),x=computed(()=>!c?.value&&$.value&&y.value&&y.value.size===0),N=computed(()=>c?.value?void 0:j=>{var ne,se;if(!$.value)return!0;const ce=j[d.value];return(se=(ne=y.value)==null?void 0:ne.has(ce||""))!=null?se:!1}),R=debounce((j,ne)=>{const se=j.filter(fe=>g.value(ne,fe.treeNodeData)),ce=new Set;se.forEach(fe=>{ce.add(fe.key),fe.pathParentKeys.forEach(ea=>{ce.add(ea)})}),y.value=ce},100);return watchEffect(()=>{c?.value?y.value=void 0:R(l.value,s.value)}),{isEmptyFilterResult:x,filterTreeNode:N}}function pickSubCompSlots(a,s){const l=`${s}-slot-`;return Object.keys(a).reduce((c,u)=>{if(u.startsWith(l)){const d=u.slice(l.length);d&&(c[d]=a[u])}return c},{})}var __defProp$1=Object.defineProperty,__defProps$1=Object.defineProperties,__getOwnPropDescs$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(a,s,l)=>s in a?__defProp$1(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues$1=(a,s)=>{for(var l in s||(s={}))__hasOwnProp$1.call(s,l)&&__defNormalProp$1(a,l,s[l]);if(__getOwnPropSymbols$1)for(var l of __getOwnPropSymbols$1(s))__propIsEnum$1.call(s,l)&&__defNormalProp$1(a,l,s[l]);return a},__spreadProps$1=(a,s)=>__defProps$1(a,__getOwnPropDescs$1(s));const _sfc_main$e=defineComponent({name:"TreeSelect",components:{Trigger,SelectView,Panel,Empty,Spin},inheritAttrs:!1,props:{disabled:{type:Boolean},loading:{type:Boolean},error:{type:Boolean},size:{type:String},border:{type:Boolean,default:!0},allowSearch:{type:[Boolean,Object],default:a=>!!a.multiple},allowClear:{type:Boolean},placeholder:{type:String},maxTagCount:{type:Number},multiple:{type:Boolean},defaultValue:{type:[String,Number,Array,Object]},modelValue:{type:[String,Number,Array,Object]},fieldNames:{type:Object},data:{type:Array,default:()=>[]},labelInValue:{type:Boolean},treeCheckable:{type:Boolean},treeCheckStrictly:{type:Boolean},treeCheckedStrategy:{type:String,default:"all"},treeProps:{type:Object},triggerProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},dropdownStyle:{type:Object},dropdownClassName:{type:[String,Array]},filterTreeNode:{type:Function},loadMore:{type:Function},disableFilter:{type:Boolean},popupContainer:{type:[String,Object]},fallbackOption:{type:[Boolean,Function],default:!0},selectable:{type:[Boolean,String,Function],default:!0},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1},inputValue:{type:String},defaultInputValue:{type:String,default:""}},emits:{change:a=>!0,"update:modelValue":a=>!0,"update:inputValue":a=>!0,"popup-visible-change":a=>!0,"update:popupVisible":a=>!0,search:a=>!0,clear:()=>!0,inputValueChange:a=>!0},setup(a,{emit:s,slots:l}){var o,c,u;const{defaultValue:d,modelValue:f,multiple:g,popupVisible:y,defaultPopupVisible:$,treeCheckable:x,treeCheckStrictly:N,data:R,fieldNames:j,disabled:ne,labelInValue:se,filterTreeNode:ce,disableFilter:fe,dropdownStyle:ea,treeProps:ta,fallbackOption:na,selectable:aa,dropdownClassName:ia}=toRefs(a),{mergedDisabled:sa,eventHandlers:ra}=useFormItem({disabled:ne}),la=getPrefixCls("tree-select"),oa=inject(configProviderInjectionKey,void 0),ca=(u=(c=oa==null?void 0:(o=oa.slots).empty)==null?void 0:c.call(o,{component:"tree-select"}))==null?void 0:u[0],pa=computed(()=>g.value||x.value),ua=(La,Za)=>{var rn;return aa.value==="leaf"?Za.isLeaf:isFunction$1(aa.value)?aa.value(La,Za):(rn=aa.value)!=null?rn:!1},da=computed(()=>x.value?ua:!1),ha=computed(()=>isObject$1(a.allowSearch)&&!!a.allowSearch.retainInputValue),{flattenTreeData:ga,key2TreeNode:fa}=useTreeData(reactive({treeData:R,fieldNames:j,selectable:ua,checkable:da})),{selectedKeys:ma,selectedValue:va,setLocalSelectedKeys:ka,localSelectedKeys:ya,localSelectedValue:ba}=useSelectedState(reactive({defaultValue:d,modelValue:f,key2TreeNode:fa,multiple:g,treeCheckable:x,treeCheckStrictly:N,fallbackOption:na,fieldNames:j}));function Ea(La){return x.value?isNodeCheckable(La):isNodeSelectable(La)}const Ca=computed(()=>isUndefined(va.value)?[]:pa.value&&!sa.value?va.value.map(La=>{const Za=fa.value.get(La.value);return __spreadProps$1(__spreadValues$1({},La),{closable:!Za||Ea(Za)})}):va.value),$a=La=>{ka(La),nextTick(()=>{var Za,rn;const pn=(se.value?ba.value:ya.value)||[],fn=pa.value?pn:pn[0];s("update:modelValue",fn),s("change",fn),(rn=(Za=ra.value)==null?void 0:Za.onChange)==null||rn.call(Za)})},Pa=ref(a.defaultInputValue),Da=computed(()=>{var La;return(La=a.inputValue)!=null?La:Pa.value}),Ta=La=>{Pa.value=La,s("update:inputValue",La),s("inputValueChange",La)},Ba=La=>{La!==Da.value&&(Aa(!0),Ta(La),a.allowSearch&&s("search",La))},[wa,Oa]=useMergeState($.value,reactive({value:y})),Aa=La=>{La!==wa.value&&(Oa(La),s("popup-visible-change",La),s("update:popupVisible",La)),La||Ga.value&&Ga.value.blur&&Ga.value.blur()},{isEmptyFilterResult:Sa,filterTreeNode:Fa}=useFilterTreeNode(reactive({searchValue:Da,flattenTreeData:ga,filterMethod:ce,disableFilter:fe,fieldNames:j})),Ia=computed(()=>!ga.value.length||Sa.value),Ga=ref(),Ya=computed(()=>{var La;return[ea?.value||{},(La=ta?.value)!=null&&La.virtualListProps?{"max-height":"unset"}:{}]});return{refSelectView:Ga,prefixCls:la,TreeSelectEmpty:ca,selectedValue:va,selectedKeys:ma,mergedDisabled:sa,searchValue:Da,panelVisible:wa,isEmpty:Ia,computedFilterTreeNode:Fa,isMultiple:pa,selectViewValue:Ca,computedDropdownStyle:Ya,onSearchValueChange:Ba,onSelectChange(La){$a(La),!ha.value&&Da.value&&Ta(""),pa.value||Aa(!1)},onVisibleChange:Aa,onInnerClear(){$a([]),s("clear")},pickSubCompSlots,isSelectable:ua,isCheckable:da,onBlur:()=>{!ha.value&&Da.value&&Ta("")},onItemRemove(La){if(sa.value)return;const Za=fa.value.get(La);if(x.value&&Za){if(Ea(Za)){const[rn]=getCheckedStateByCheck({node:Za,checked:!1,checkedKeys:ma.value,indeterminateKeys:[],checkStrictly:N.value});$a(rn)}}else{const rn=ma.value.filter(pn=>pn!==La);$a(rn)}}}}});function _sfc_render$1(a,s,l,o,c,u){const d=resolveComponent("SelectView"),f=resolveComponent("Spin"),g=resolveComponent("Panel"),y=resolveComponent("Trigger");return openBlock(),createBlock(y,mergeProps({class:`${a.prefixCls}-trigger`,"auto-fit-popup-min-width":"",trigger:"click",position:"bl","popup-offset":4,"animation-name":"slide-dynamic-origin","prevent-focus":!0},a.triggerProps,{disabled:a.mergedDisabled,"popup-visible":a.panelVisible,"popup-container":a.popupContainer,"click-to-close":!a.allowSearch,"auto-fit-transform-origin":"",onPopupVisibleChange:a.onVisibleChange}),{content:withCtx(()=>[createBaseVNode("div",{class:normalizeClass([`${a.prefixCls}-popup`,{[`${a.prefixCls}-has-header`]:!!a.$slots.header,[`${a.prefixCls}-has-footer`]:!!a.$slots.footer},a.dropdownClassName]),style:normalizeStyle$1(a.computedDropdownStyle)},[a.$slots.header&&(!a.isEmpty||a.showHeaderOnEmpty)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${a.prefixCls}-header`)},[renderSlot(a.$slots,"header")],2)):createCommentVNode("v-if",!0),a.loading?renderSlot(a.$slots,"loader",{key:1},()=>[createVNode$1(f)]):a.isEmpty?renderSlot(a.$slots,"empty",{key:2},()=>[(openBlock(),createBlock(resolveDynamicComponent(a.TreeSelectEmpty?a.TreeSelectEmpty:"Empty")))]):(openBlock(),createBlock(g,{key:3,"selected-keys":a.selectedKeys,"show-checkable":a.treeCheckable,scrollbar:a.scrollbar,"tree-props":__spreadProps$1(__spreadValues$1({actionOnNodeClick:a.selectable==="leaf"?"expand":void 0,blockNode:!0},a.treeProps),{data:a.data,checkStrictly:a.treeCheckStrictly,checkedStrategy:a.treeCheckedStrategy,fieldNames:a.fieldNames,multiple:a.multiple,loadMore:a.loadMore,filterTreeNode:a.computedFilterTreeNode,size:a.size,checkable:a.isCheckable,selectable:a.isSelectable,searchValue:a.searchValue}),"tree-slots":a.pickSubCompSlots(a.$slots,"tree"),onChange:a.onSelectChange},null,8,["selected-keys","show-checkable","scrollbar","tree-props","tree-slots","onChange"])),a.$slots.footer&&(!a.isEmpty||a.showFooterOnEmpty)?(openBlock(),createElementBlock("div",{key:4,class:normalizeClass(`${a.prefixCls}-footer`)},[renderSlot(a.$slots,"footer")],2)):createCommentVNode("v-if",!0)],6)]),default:withCtx(()=>[renderSlot(a.$slots,"trigger",{},()=>[createVNode$1(d,mergeProps({ref:"refSelectView","model-value":a.selectViewValue,"input-value":a.searchValue,"allow-search":!!a.allowSearch,"allow-clear":a.allowClear,loading:a.loading,size:a.size,"max-tag-count":a.maxTagCount,disabled:a.mergedDisabled,opened:a.panelVisible,error:a.error,bordered:a.border,placeholder:a.placeholder,multiple:a.isMultiple},a.$attrs,{onInputValueChange:a.onSearchValueChange,onClear:a.onInnerClear,onRemove:a.onItemRemove,onBlur:a.onBlur}),createSlots({_:2},[a.$slots.prefix?{name:"prefix",fn:withCtx(()=>[renderSlot(a.$slots,"prefix")])}:void 0,a.$slots.label?{name:"label",fn:withCtx($=>[renderSlot(a.$slots,"label",normalizeProps(guardReactiveProps($)))])}:void 0]),1040,["model-value","input-value","allow-search","allow-clear","loading","size","max-tag-count","disabled","opened","error","bordered","placeholder","multiple","onInputValueChange","onClear","onRemove","onBlur"])])]),_:3},16,["class","disabled","popup-visible","popup-container","click-to-close","onPopupVisibleChange"])}var _TreeSelect=_export_sfc(_sfc_main$e,[["render",_sfc_render$1]]);const TreeSelect=Object.assign(_TreeSelect,{install:(a,s)=>{setGlobalConfig(a,s);const l=getComponentPrefix(s);a.component(l+_TreeSelect.name,_TreeSelect)}});var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(a,s,l)=>s in a?__defProp(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,__spreadValues=(a,s)=>{for(var l in s||(s={}))__hasOwnProp.call(s,l)&&__defNormalProp(a,l,s[l]);if(__getOwnPropSymbols)for(var l of __getOwnPropSymbols(s))__propIsEnum.call(s,l)&&__defNormalProp(a,l,s[l]);return a},__spreadProps=(a,s)=>__defProps(a,__getOwnPropDescs(s));const components={Button,Link,Typography,Divider,Grid,Layout,Space,Avatar,Badge,Calendar,Card,Carousel,Collapse,Comment,ColorPicker,Descriptions,Empty,Image:Image$1,Scrollbar,List,Popover,Statistic,Table,Tabs,Tag,Timeline,Tooltip,AutoComplete,Cascader,Checkbox,DatePicker,Form,Input,InputNumber,InputTag,Mention,Radio,Rate,Select,Slider,Switch,Textarea,TimePicker,Transfer,Tree,Upload,TreeSelect,Alert,Drawer,Message,Modal,Notification,Popconfirm,Progress,Result,Spin,Skeleton,Breadcrumb,Dropdown,Menu,PageHeader,Pagination,Steps,Affix,Anchor,BackTop,ConfigProvider,ResizeBox,Trigger,Split,Icon,OverflowList,Watermark,VerificationCode},install=(a,s)=>{for(const l of Object.keys(components))a.use(components[l],s)},ArcoVue=__spreadProps(__spreadValues({},components),{Alter:Alert,AnchorLink,AvatarGroup,BreadcrumbItem,ButtonGroup,Calendar,CardMeta,CardGrid,CarouselItem,CascaderPanel,CheckboxGroup,CollapseItem,DescriptionsItem,WeekPicker,MonthPicker,YearPicker,QuarterPicker,RangePicker,Doption,Dgroup,Dsubmenu,DropdownButton,FormItem,Row,Col,GridItem,ImagePreview,ImagePreviewAction,ImagePreviewGroup,InputGroup,InputSearch,InputPassword,LayoutHeader,LayoutContent,LayoutFooter,LayoutSider,ListItem,ListItemMeta,MenuItem,MenuItemGroup,SubMenu,RadioGroup,Option,Optgroup,SkeletonLine,SkeletonShape,Countdown,Step,Thead,Td,Th,Tr,Tbody,TableColumn,TabPane,TimelineItem,TypographyParagraph,TypographyTitle,TypographyText,install,addI18nMessages,useLocale,getLocale,useFormItem}),_hoisted_1$d={id:"container"},_hoisted_2$7={class:"animation-wrapper"},_hoisted_3$5={class:"stagger-visualizer"},_hoisted_4$3={class:"dots-wrapper"},_sfc_main$d=defineComponent({__name:"StaggerTemplate",setup(a){useCssVars(f=>({"0f057f1e":l.value,81706454:o.value}));const{isDark:s}=useData$1();ref(["#373734","#242423","#0D0D0C"]);const l=ref(s?"##1b1a1f":"white"),o=ref("linear-gradient(180deg, #FFFFFF 8%, #373734 100%)");watchEffect(()=>{s.value?(o.value="linear-gradient(180deg, #373734 8%, #1b1a1f 100%)",l.value="#1b1a1f"):(o.value="linear-gradient(180deg, #FFFFFF 8%, #D3CDC6 100%)",l.value="white")});let c=(f,g)=>{var y=null;function $(){y&&clearTimeout(y),anime.set(f,{scale:1});var x=0,N=f.parentNode,R=f.offsetWidth-x,j=N.offsetWidth,ne=j/R;y=setTimeout(()=>anime.set(f,{scale:ne}),10)}$(),window.addEventListener("resize",$)},u=()=>{var f=document.querySelector(".stagger-visualizer");f.querySelector(".dots-wrapper"),document.createDocumentFragment();var g=[20,10],y=55,$=g[0]*g[1],x;c(f);var N=anime.random(0,$-1),R=0;anime.set(".stagger-visualizer .cursor",{translateX:anime.stagger(-y,{grid:g,from:N,axis:"x"}),translateY:anime.stagger(-y,{grid:g,from:N,axis:"y"}),translateZ:0,scale:1.5});let j=()=>{x&&x.pause(),R=anime.random(0,$-1),x=anime.timeline({easing:"easeInOutQuad",complete:j}).add({targets:".stagger-visualizer .cursor",keyframes:[{scale:.75,duration:120},{scale:2.5,duration:220},{scale:1.5,duration:450}],duration:300}).add({targets:".stagger-visualizer .dot",backgroundColor:"white",keyframes:[{translateX:anime.stagger("-2px",{grid:g,from:N,axis:"x"}),translateY:anime.stagger("-2px",{grid:g,from:N,axis:"y"}),duration:100},{translateX:anime.stagger("4px",{grid:g,from:N,axis:"x"}),translateY:anime.stagger("4px",{grid:g,from:N,axis:"y"}),scale:anime.stagger([2.6,1],{grid:g,from:N}),duration:225},{translateX:0,translateY:0,scale:1,duration:1200}],delay:anime.stagger(80,{grid:g,from:N})},30).add({targets:".stagger-visualizer .cursor",translateX:{value:anime.stagger(-y,{grid:g,from:R,axis:"x"})},translateY:{value:anime.stagger(-y,{grid:g,from:R,axis:"y"})},scale:1.5,easing:"cubicBezier(.075, .2, .165, 1)"},"-=800"),N=R};return{play:j,stop:()=>{x&&x.pause(),x=null}}},d=ref();return onMounted(()=>{d.value=u(),d.value.play()}),onUnmounted(()=>{d.value&&(d.value.stop(),d.value=null)}),(f,g)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$5,[g[0]||(g[0]=createBaseVNode("div",{class:"cursor",style:{color:"red"}},null,-1)),createBaseVNode("div",_hoisted_4$3,[(openBlock(),createElementBlock(Fragment,null,renderList(200,y=>createBaseVNode("div",{class:"dot",key:y})),64))])])])]))}}),StaggerTemplate=_export_sfc$1(_sfc_main$d,[["__scopeId","data-v-205f6596"]]),_hoisted_1$c={id:"container"},_hoisted_2$6={class:"stagger_text",style:{"z-index":"2"}},_hoisted_3$4={style:{"text-align":"left"}},_sfc_main$c=defineComponent({__name:"Style2",setup(a,{expose:s}){const l=ref("transform: translate(0rem,100px);opacity: 0"),o=ref("transform: translate(-20rem,100px);opacity: 0"),c=ref(),u=()=>{let g=anime.timeline({easing:"linear",duration:300,autoplay:!1});return g.add({targets:".loop_role_dev",translateY:-100,opacity:1}),g.add({targets:".loop_role_dev",translateY:-200,delay(y,$,x){return 3e3},opacity:{value:0,duration:200}}),g.add({targets:".loop_role_play",translateY:-100,opacity:1},"-=100"),g},d=()=>{c.value?c.value.play():(c.value=u(),c.value.play(),c.value.finished.then(()=>{}))};onMounted(()=>{d()});const f=()=>{c.value&&(c.value.pause(),c.value=null)};return onUnmounted(()=>{f()}),s({startTextAnimated:d}),(g,y)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",_hoisted_3$4,[createVNode$1(unref(Space),{size:0},{default:withCtx(()=>[y[1]||(y[1]=createBaseVNode("div",{class:"text"},"爱折腾",-1)),createVNode$1(unref(Space),{size:0},{default:withCtx(()=>[y[0]||(y[0]=createBaseVNode("div",{class:"text"}," 的 ",-1)),createBaseVNode("div",{class:"text loop_role_text loop_role_dev",style:normalizeStyle$1(l.value)}," 独立开发者 ",4),createBaseVNode("div",{class:"text loop_role_text loop_role_play",style:normalizeStyle$1(o.value)}," 未来任他画 ",4)]),_:1})]),_:1}),y[2]||(y[2]=createBaseVNode("div",{class:"text"},"永远享受创造精彩的东西",-1))])]),y[3]||(y[3]=createBaseVNode("div",{class:"stagger_bg",style:{"z-index":"1"}},null,-1)),createVNode$1(StaggerTemplate,{class:"stagger",style:{width:"100vw",height:"calc(100vh - var(--vp-nav-height))",position:"relative"}})]))}}),Style2=_export_sfc$1(_sfc_main$c,[["__scopeId","data-v-10a724ba"]]),_hoisted_1$b={class:"cssbuttons-io"},_hoisted_2$5={href:"post/java/"},_sfc_main$b={__name:"BannerBtn4",props:{title:{type:String,default:"Code"},link:{type:String,default:"post/java/"}},setup(a){return(s,l)=>(openBlock(),createElementBlock("button",_hoisted_1$b,[createBaseVNode("span",null,[l[0]||(l[0]=createBaseVNode("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M0 0h24v24H0z",fill:"none"}),createBaseVNode("path",{d:"M24 12l-5.657 5.657-1.414-1.414L21.172 12l-4.243-4.243 1.414-1.414L24 12zM2.828 12l4.243 4.243-1.414 1.414L0 12l5.657-5.657L7.07 7.757 2.828 12zm6.96 9H7.66l6.552-18h2.128L9.788 21z",fill:"currentColor"})],-1)),createBaseVNode("a",_hoisted_2$5,toDisplayString(a.title),1)])]))}},BannerBtn4=_export_sfc$1(_sfc_main$b,[["__scopeId","data-v-78a76dbb"]]),_sfc_main$a={},_hoisted_1$a={id:"mac-window"};function _sfc_render(a,s){return openBlock(),createElementBlock("div",_hoisted_1$a,s[0]||(s[0]=[createBaseVNode("div",{class:"mac-window-bg"},null,-1),createBaseVNode("div",{class:"window"},[createBaseVNode("div",{class:"screen"})],-1)]))}const MacWindow=_export_sfc$1(_sfc_main$a,[["render",_sfc_render],["__scopeId","data-v-b7383705"]]),_hoisted_1$9={class:"big_home"},_hoisted_2$4={class:"home",style:{}},_hoisted_3$3={class:"move",style:{flex:"1",height:"100%",display:"flex","justify-content":"flex-start","align-items":"center"}},_hoisted_4$2={style:{flex:"1",height:"100%",display:"flex","justify-content":"flex-end","align-items":"center"}},_hoisted_5$1={class:"xiamian"},_sfc_main$9=defineComponent({__name:"FirstBanner",setup(a){useData$1();const s=l=>{window.open(l,"_blank")};return onMounted(()=>{}),onUnmounted(()=>{}),(l,o)=>{const c=resolveComponent("a-typography-text"),u=resolveComponent("a-avatar"),d=resolveComponent("a-avatar-group"),f=resolveComponent("a-space"),g=resolveComponent("a-typography-title");return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",{class:"logo",style:{cursor:"pointer"},onClick:o[0]||(o[0]=y=>s("https://java.springlearn.cn"))},"个人博客站"),createBaseVNode("div",_hoisted_2$4,[createBaseVNode("div",_hoisted_3$3,[createVNode$1(f,{direction:"vertical",style:{"margin-top":"-5vw"},size:"medium"},{default:withCtx(()=>[o[13]||(o[13]=createBaseVNode("h1",{style:{"font-size":"3.5rem",color:"#3d3f45","font-weight":"bold"}}," Devs 西魏陶渊明 ",-1)),createVNode$1(c,null,{default:withCtx(()=>o[7]||(o[7]=[createTextVNode(" 用于帮助收集、整理和管理日常生活、工作中的各种信息。一个存储笔记的地方。 ")])),_:1}),createVNode$1(f,null,{default:withCtx(()=>[createVNode$1(d,null,{default:withCtx(()=>[createVNode$1(u,{"image-url":"https://g.csdnimg.cn/static/logo/favicon32.ico"},{default:withCtx(()=>o[8]||(o[8]=[createTextVNode("CSDN ")])),_:1}),createVNode$1(u,{style:{backgroundColor:"#ffffff"},"image-url":"https://img.alicdn.com/tfs/TB1_ZXuNcfpK1RjSZFOXXa6nFXa-32-32.ico"},{default:withCtx(()=>o[9]||(o[9]=[createTextVNode("阿里云博客专家 ")])),_:1}),createVNode$1(u,{style:{backgroundColor:"#ffffff"},"image-url":"https://p1.itc.cn/images01/20231015/7ea0bc9819fd4546a32067f2da0fccdd.jpeg","object-fit":"cover"},{default:withCtx(()=>o[10]||(o[10]=[createTextVNode("华为云享专家 ")])),_:1}),createVNode$1(u,{"image-url":"https://sf3-cdn-tos.douyinstatic.com/obj/eden-cn/uhbfnupkbps/toutiao_favicon.ico","object-fit":"cover"},{default:withCtx(()=>o[11]||(o[11]=[createTextVNode("头条 ")])),_:1})]),_:1}),o[12]||(o[12]=createTextVNode(" 活跃媒体平台 "))]),_:1}),createVNode$1(f,null,{default:withCtx(()=>[createVNode$1(BannerBtn4,{onClick:o[1]||(o[1]=y=>s("/post/java/"))})]),_:1})]),_:1})]),createBaseVNode("div",_hoisted_4$2,[createVNode$1(MacWindow)])]),createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",{class:"rk",onClick:o[2]||(o[2]=y=>s("/post/guide/"))},[createVNode$1(u,{size:48,shape:"square",style:{"background-color":"#4e4e4e"}},{default:withCtx(()=>o[14]||(o[14]=[createTextVNode(" JS ")])),_:1}),createVNode$1(g,{heading:6},{default:withCtx(()=>o[15]||(o[15]=[createBaseVNode("a",{href:"/post/guide/"},[createBaseVNode("span",{class:"rk_title"},"前台技术")],-1)])),_:1}),createVNode$1(c,{type:"secondary"},{default:withCtx(()=>o[16]||(o[16]=[createTextVNode(" 聚焦前端开发新趋势，探讨UI设计、交互体验与性能优化的最佳实践。 ")])),_:1})]),createBaseVNode("div",{class:"rk",onClick:o[3]||(o[3]=y=>s("/post/java/"))},[createVNode$1(u,{size:48,shape:"square",style:{"background-color":"#ff3d40"}},{default:withCtx(()=>o[17]||(o[17]=[createTextVNode(" Java ")])),_:1}),createVNode$1(g,{heading:6},{default:withCtx(()=>o[18]||(o[18]=[createBaseVNode("a",{href:"/post/java/"},[createBaseVNode("span",{class:"rk_title"},"后台技术")],-1)])),_:1}),createVNode$1(c,{type:"secondary"},{default:withCtx(()=>o[19]||(o[19]=[createTextVNode(" 深入解析服务器端开发，涵盖API设计、数据库管理与高并发架构的技术要点。 ")])),_:1})]),createBaseVNode("div",{class:"rk",onClick:o[4]||(o[4]=y=>s("/post/python/"))},[createVNode$1(u,{size:48,shape:"square",style:{"background-color":"#414347"},"image-url":unref(withBase)("py.png")},{default:withCtx(()=>o[20]||(o[20]=[createTextVNode(" Python ")])),_:1},8,["image-url"]),createVNode$1(g,{heading:6},{default:withCtx(()=>o[21]||(o[21]=[createBaseVNode("a",{href:"/post/python/"},[createBaseVNode("span",{class:"rk_title"},"数据处理")],-1)])),_:1}),createVNode$1(c,{type:"secondary"},{default:withCtx(()=>o[22]||(o[22]=[createTextVNode(" 数据清洗技巧，实现数据高效分析与应用。 ")])),_:1})]),createBaseVNode("div",{class:"rk",onClick:o[5]||(o[5]=y=>s("/post/ai/"))},[createVNode$1(u,{size:48,shape:"square",style:{"background-color":"#e1b62e"}},{default:withCtx(()=>o[23]||(o[23]=[createTextVNode(" AI ")])),_:1}),createVNode$1(g,{heading:6},{default:withCtx(()=>o[24]||(o[24]=[createBaseVNode("a",{href:"/post/ai/"},[createBaseVNode("span",{class:"rk_title"},"AI笔记")],-1)])),_:1}),createVNode$1(c,{type:"secondary"},{default:withCtx(()=>o[25]||(o[25]=[createTextVNode(" 聚焦人工智能算法、机器学习模型及其实际应用场景，探索AI技术前沿。 ")])),_:1})]),createBaseVNode("div",{class:"rk",onClick:o[6]||(o[6]=y=>s("/post/design/"))},[createVNode$1(u,{size:48,shape:"square",imageUrl:unref(withBase)("js.png")},null,8,["imageUrl"]),createVNode$1(g,{heading:6},{default:withCtx(()=>o[26]||(o[26]=[createBaseVNode("a",{href:"/post/design/"},[createBaseVNode("span",{class:"rk_title"},"生活随笔")],-1)])),_:1}),createVNode$1(c,{type:"secondary"},{default:withCtx(()=>o[27]||(o[27]=[createTextVNode(" 分享日常所见所感，记录生活点滴，思考人生趣事与成长感悟。 ")])),_:1})])])])}}}),FirstBanner=_export_sfc$1(_sfc_main$9,[["__scopeId","data-v-d9b32f5b"]]),_hoisted_1$8={class:"blog_desc"},_sfc_main$8=defineComponent({__name:"BlogCard",props:{img:{type:String,default:""},title:{type:String,default:""},link:{type:String,default:""},desc:{type:String,default:""}},setup(a){const s=l=>{window.open(l,"_blank")};return(l,o)=>{const c=resolveComponent("a-typography-title"),u=resolveComponent("a-typography-text"),d=resolveComponent("a-grid-item");return openBlock(),createBlock(d,{class:"blog",key:a.title},{default:withCtx(()=>[createBaseVNode("div",{class:"blog_img",style:normalizeStyle$1({backgroundImage:"url("+a.img+")"})},null,4),createBaseVNode("div",{class:"blog_title",onClick:o[0]||(o[0]=f=>s(a.link))},[createVNode$1(c,{heading:6},{default:withCtx(()=>[createTextVNode(toDisplayString(a.title),1)]),_:1})]),createBaseVNode("div",_hoisted_1$8,[createVNode$1(u,{type:"secondary",ellipsis:{row:2,showTooltip:!0}},{default:withCtx(()=>[createTextVNode(toDisplayString(a.desc),1)]),_:1})])]),_:1})}}}),BlogCard=_export_sfc$1(_sfc_main$8,[["__scopeId","data-v-4d4a15af"]]),_hoisted_1$7={class:"skillWrapper"},_sfc_main$7=defineComponent({__name:"Blogs",setup(a){const s=[{img:"https://img.springlearn.cn/blog/1c861b137fedd470229042b05bc85d97.png",title:"《Spring专题系列》",link:"/post/java/spring/core01.html#一、前言",desc:"spring 是 java 开发者,永远绕不开的结。是非常值得开发者来学习的,面对如此庞大的框架, 我们的学习一定要找到一个切入点, 这样学习效率才会更高。"},{img:"https://img.springlearn.cn/blog/learn_1649514858000.png",title:"《Mybatis专题系列》",link:"/post/java/mybatis/环境搭建.html",desc:"ORM映射框架,我们学习mybatis这一个就够了,万变不离其宗,主要是思想。当学习完这个系列, 你将不仅仅会用他来写业务代码, 更可以进行二次开发和扩展。"},{img:"https://img.springlearn.cn/blog/learn_1597068628000.png",title:"《Dubbo源码学习系列》",link:"/post/java/dubbo/Dubbo源码解析之客户端Consumer.html#一、启动一个客户端consumer",desc:"dubbo 是一款Java RPC框架, 我们可以从中窥视到网络通信的魅力。当复杂的dubbo 都学会了，还会害怕，SpringCloud生态吗? 轻松拿捏他。"},{img:"https://img.springlearn.cn/blog/learn_1654183539000.png",title:"《Jvm调优系列》",link:"/post/project/jvm/JVM.html",desc:"大促调优,大促压测,jvm调优如果还不会,怎么敢称为Java高级工程师呢? 你距离高级工程师可能只差这篇文章和大促的实战的经验。"},{img:"https://img.springlearn.cn/blog/learn_1600400853000.png",title:"从零到1开发网络通信框架",link:"/post/project/mojito/第01篇:手写JavaRPC框架之思路分析.html#一、前言",desc:"分布式定时任务,我们学着一个就够用了,还是那句话思路决定出路。elastic都会了,xxljob你还会害怕吗?"},{img:"https://img.springlearn.cn/blog/e010189ef21411b8ce92f06342f65dd3.png",title:"《Java必会工具系列》",link:"/post/java/tools/bytecode/APT.html",desc:"工欲善其事必先利其器,本系列中所列举的工具框架,在你日后的业务开发中,或是在框架轮子的开发中,都一定会发挥作用。"}];return(l,o)=>{const c=resolveComponent("a-typography-title"),u=resolveComponent("a-grid");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",null,[createVNode$1(c,{heading:2},{default:withCtx(()=>o[0]||(o[0]=[createTextVNode(" 技术专题")])),_:1})]),createVNode$1(u,{cols:{xs:1,sm:2,md:3,lg:4,xl:4,xxl:4},"col-gap":24},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(s,(d,f)=>createVNode$1(BlogCard,{key:f,title:d.title,img:d.img,desc:d.desc,link:d.link},null,8,["title","img","desc","link"])),64))]),_:1})])}}}),Blogs=_export_sfc$1(_sfc_main$7,[["__scopeId","data-v-430871f5"]]),_hoisted_1$6={class:"auto-color-text"},_hoisted_2$3={class:"heading"},_sfc_main$6=defineComponent({__name:"BusinessCard",props:{index:{type:Number,default:0},img:{type:String,default:""},title:{type:String,default:""},link:{type:String,default:""},desc:{type:String,default:""}},setup(a){const s=[["#00bcd4","#5deaff"],["#ff7b7b","#ffa5a5"],["#4285f4","#7aadff"],["#ff9500","#ffc266"]],l=o=>{window.open(o,"_blank")};return(o,c)=>{const u=resolveComponent("a-grid-item");return openBlock(),createBlock(u,{class:"card12",key:a.title},{default:withCtx(()=>[createBaseVNode("div",{class:"card-image",style:normalizeStyle$1({background:"linear-gradient(45deg, "+s[a.index%4][0]+","+s[a.index%4][1]+")"})},[createBaseVNode("span",_hoisted_1$6,toDisplayString(a.title),1)],4),createBaseVNode("div",{class:"category",onClick:c[0]||(c[0]=d=>l(a.link))},toDisplayString(a.title),1),createBaseVNode("div",_hoisted_2$3,[createTextVNode(toDisplayString(a.desc)+" ",1),c[1]||(c[1]=createBaseVNode("div",{class:"author"},[createTextVNode(" By "),createBaseVNode("span",{class:"name"},"西魏陶渊明"),createTextVNode(" 1 year ago ")],-1))])]),_:1})}}}),BusinessCard=_export_sfc$1(_sfc_main$6,[["__scopeId","data-v-667eb1df"]]),_hoisted_1$5={class:"skillWrapper"},_sfc_main$5=defineComponent({__name:"BusinessBlogs",setup(a){const s=[{img:"https://img.springlearn.cn/blog/1c861b137fedd470229042b05bc85d97.png",title:"企业报表线上化",link:"/post/scm/finance/report.html",desc:"中级"},{img:"https://img.springlearn.cn/blog/learn_1649514858000.png",title:"从零到1搭建业财一体",link:"/post/scm/introduce/业财一体.html",desc:""},{img:"https://img.springlearn.cn/blog/learn_1597068628000.png",title:"采购系统建设",link:"/post/scm/",desc:""},{img:"https://img.springlearn.cn/blog/learn_1654183539000.png",title:"商货品建设",link:"/post/scm/",desc:""},{img:"https://img.springlearn.cn/blog/bc0392fd430c6ed9465a5b2400ef5288.png",title:"仓库管理系统",link:"/post/scm/",desc:""},{img:"https://img.springlearn.cn/blog/e010189ef21411b8ce92f06342f65dd3.png",title:"库存系统建设",link:"/post/scm/",desc:""},{img:"",title:"财务系统建设",link:"/post/scm/",desc:""}];return(l,o)=>{const c=resolveComponent("a-typography-title"),u=resolveComponent("a-grid");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",null,[createVNode$1(c,{heading:2},{default:withCtx(()=>o[0]||(o[0]=[createTextVNode(" 业财一体建设")])),_:1})]),createVNode$1(u,{cols:{xs:1,sm:2,md:3,lg:4,xl:4,xxl:4},"col-gap":24,"row-gap":12},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(s,(d,f)=>createVNode$1(BusinessCard,{key:f,index:f,title:d.title,img:d.img,desc:d.desc,link:d.link},null,8,["index","title","img","desc","link"])),64))]),_:1})])}}}),BusinessBlogs=_export_sfc$1(_sfc_main$5,[["__scopeId","data-v-c99ff7f1"]]),_hoisted_1$4={id:"footer"},_hoisted_2$2={style:{display:"flex","flex-direction":"column",width:"100%","justify-content":"center","align-items":"center"}},_hoisted_3$2={style:{"text-align":"center"}},_hoisted_4$1={style:{width:"100%","text-align":"center"}},_sfc_main$4={__name:"Footer",setup(a){const s=[{title:"陈随易",link:"https://me.yicode.tech/"},{title:"Vue3 编译原理揭秘",link:"https://vue-compiler.iamouyang.cn/"}];return(l,o)=>{const c=resolveComponent("a-typography-title"),u=resolveComponent("a-typography-text"),d=resolveComponent("a-col"),f=resolveComponent("a-row"),g=resolveComponent("a-divider");return openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createVNode$1(c,{heading:5},{default:withCtx(()=>o[0]||(o[0]=[createTextVNode(" 友情链接")])),_:1}),createVNode$1(u,{type:"secondary"},{default:withCtx(()=>o[1]||(o[1]=[createTextVNode(" 只要坚持不懈，嘲笑你的人，迟早会被你笑死。 ")])),_:1})]),createBaseVNode("div",_hoisted_4$1,[createVNode$1(f,{class:"grid-demo",justify:"center"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(s,(y,$)=>createVNode$1(d,{span:4,key:$},{default:withCtx(()=>[createBaseVNode("div",null,toDisplayString(y.title),1)]),_:2},1024)),64))]),_:1})])]),createVNode$1(g),o[2]||(o[2]=createBaseVNode("div",{style:{bottom:"0",width:"100vw","text-align":"center"}}," 只要坚持不懈，嘲笑你的人，迟早会被你笑死。 本站总访问量26895次 本站访客数23589人次 Copyright © 2024 西魏陶渊明 ",-1))])}}},Footer=_export_sfc$1(_sfc_main$4,[["__scopeId","data-v-244c7fc3"]]),_hoisted_1$3={id:"knowledges"},_hoisted_2$1=["href"],_hoisted_3$1={style:{display:"flex","flex-direction":"row","align-items":"center"}},_sfc_main$3={__name:"Knowledges",setup(a){const{theme:s}=useData$1(),l=ref(),o=ref(),c=["#4d4d4d","#fe3d40","#e1b62e","#4673c6"],u=f=>c[f%4],d=f=>typeof f=="string"&&f.length>=2?f.slice(0,2):f;return onMounted(()=>{o.value=s.value.nav[5],l.value=s.value.nav[5]}),(f,g)=>{const y=resolveComponent("a-typography-title"),$=resolveComponent("a-space"),x=resolveComponent("a-avatar"),N=resolveComponent("a-grid-item"),R=resolveComponent("a-grid");return openBlock(),createElementBlock("div",_hoisted_1$3,[(openBlock(!0),createElementBlock(Fragment,null,renderList(l.value?.items,(j,ne)=>(openBlock(),createElementBlock("div",{key:ne},[createBaseVNode("div",null,[createVNode$1($,{align:"baseline"},{default:withCtx(()=>[createVNode$1(y,{heading:3},{default:withCtx(()=>[createTextVNode(toDisplayString(j.text),1)]),_:2},1024)]),_:2},1024)]),createVNode$1(R,{cols:{xs:1,sm:2,md:3,lg:4,xl:4,xxl:4},"col-gap":24,"row-gap":12},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(j.items,(se,ce)=>(openBlock(),createBlock(N,{class:"lib",key:se.text},{default:withCtx(()=>[createBaseVNode("a",{href:se.link,target:"_blank"},[createBaseVNode("div",_hoisted_3$1,[createVNode$1(x,{shape:"square",style:normalizeStyle$1({backgroundColor:u(ce),verticalAlign:"middle"})},{default:withCtx(()=>[createTextVNode(toDisplayString(d(se.text)),1)]),_:2},1032,["style"]),createVNode$1(y,{heading:6,style:{"margin-left":"5px","margin-bottom":"20px"}},{default:withCtx(()=>[createTextVNode(toDisplayString(se.text.toUpperCase()),1)]),_:2},1024)]),createBaseVNode("div",null,toDisplayString(se.desc||se.title),1)],8,_hoisted_2$1)]),_:2},1024))),128))]),_:2},1024)]))),128))])}}},Knowledges=_export_sfc$1(_sfc_main$3,[["__scopeId","data-v-af4a6840"]]),_hoisted_1$2={id:"container",class:"custom-scrollbar"},_hoisted_2={class:"section"},_hoisted_3={class:"section"},_hoisted_4={class:"section"},_hoisted_5={class:"section",style:{height:"auto"}},_hoisted_6={style:{width:"100vw",padding:"0 0",bottom:"0"}},_sfc_main$2=defineComponent({__name:"NewHome2",setup(a){ref(),ref();function s(o){const c=window.scrollY;o.style.top=`${c}px`;const u=(Math.random()-.5)*200,d=Math.min(Math.max(50+u,0),window.innerWidth-50);o.style.left=`${d}px`}const l=()=>{const o=document.getElementById("ball");window.addEventListener("scroll",()=>{s(o)}),window.addEventListener("resize",()=>{s(o)}),window.addEventListener("click",function(c){const u=(Math.random()-.5)*100,d=Math.min(Math.max(c.clientX+u,0),window.innerWidth-50);o.style.left=`${d}px`;const f=c.clientY+window.scrollY;o.style.top=`${f}px`})};return onMounted(()=>{l()}),onUnmounted(()=>{}),(o,c)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[c[0]||(c[0]=createBaseVNode("div",{id:"ball"},null,-1)),createBaseVNode("div",_hoisted_2,[createVNode$1(FirstBanner)]),createBaseVNode("div",_hoisted_3,[createVNode$1(Blogs)]),createBaseVNode("div",_hoisted_4,[createVNode$1(BusinessBlogs)]),createBaseVNode("div",_hoisted_5,[createVNode$1(Knowledges)]),createBaseVNode("div",_hoisted_6,[createVNode$1(Footer)])]))}}),NewHome2=_export_sfc$1(_sfc_main$2,[["__scopeId","data-v-48023a19"]]);function de(a){return getCurrentScope()?(onScopeDispose(a),!0):!1}function E(a){return typeof a=="function"?a():unref(a)}const ge=typeof window<"u",ve=a=>a!=null,m=()=>{};function S(a){var s;const l=E(a);return(s=l?.$el)!=null?s:l}const be=ge?window:void 0;function pe(){const a=ref(!1);return getCurrentInstance()&&onMounted(()=>{a.value=!0}),a}function xe(a){const s=pe();return computed(()=>(s.value,!!a()))}function ye(a,s,l={}){const{root:o,rootMargin:c="0px",threshold:u=.1,window:d=be,immediate:f=!0}=l,g=xe(()=>d&&"IntersectionObserver"in d),y=computed(()=>{const j=E(a);return(Array.isArray(j)?j:[j]).map(S).filter(ve)});let $=m;const x=ref(f),N=g.value?watch(()=>[y.value,S(o),x.value],([j,ne])=>{if($(),!x.value||!j.length)return;const se=new IntersectionObserver(s,{root:S(ne),rootMargin:c,threshold:u});j.forEach(ce=>ce&&se.observe(ce)),$=()=>{se.disconnect(),$=m}},{immediate:f,flush:"post"}):m,R=()=>{$(),N(),x.value=!1};return de(R),{isSupported:g,isActive:x,pause(){$(),x.value=!1},resume(){x.value=!0},stop:R}}const me=defineComponent({emit:["update:active"],props:{active:{type:Number,default:null},id:{type:String,required:!0},index:{type:Number,required:!0},updateHistory:{type:Boolean,default:!1}},setup(a,{slots:s,emit:l}){const o=ref(null),c=ref(!1);return ye(o,([{isIntersecting:u}])=>{c.value=u,u&&(l("update:active",a.index),a.updateHistory&&window.history.replaceState({},"",`#${a.id}`))}),()=>h$1(s.default()[0],{id:a.id,ref:o,class:{"is-active":c.value}})}});var Se=typeof global=="object"&&global&&global.Object===Object&&global;const Ce=Se;var Oe=typeof self=="object"&&self&&self.Object===Object&&self,he=Ce||Oe||Function("return this")();const $e=he;var Ae=$e.Symbol;const b=Ae;var _=Object.prototype,Re=_.hasOwnProperty,je=_.toString,p=b?b.toStringTag:void 0;function Ne(a){var s=Re.call(a,p),l=a[p];try{a[p]=void 0;var o=!0}catch{}var c=je.call(a);return o&&(s?a[p]=l:delete a[p]),c}var Te=Object.prototype,we=Te.toString;function Ue(a){return we.call(a)}var Me="[object Null]",Ie="[object Undefined]",T=b?b.toStringTag:void 0;function ke(a){return a==null?a===void 0?Ie:Me:T&&T in Object(a)?Ne(a):Ue(a)}function ze(a){return a!=null&&typeof a=="object"}var Ee="[object Symbol]";function _e(a){return typeof a=="symbol"||ze(a)&&ke(a)==Ee}function Le(a,s){for(var l=-1,o=a==null?0:a.length,c=Array(o);++l<o;)c[l]=s(a[l],l,a);return c}var De=Array.isArray;const He=De;var Ze=1/0,w=b?b.prototype:void 0,U=w?w.toString:void 0;function L(a){if(typeof a=="string")return a;if(He(a))return Le(a,L)+"";if(_e(a))return U?U.call(a):"";var s=a+"";return s=="0"&&1/a==-Ze?"-0":s}function A(a){return a==null?"":L(a)}function Pe(a,s,l){var o=-1,c=a.length;s<0&&(s=-s>c?0:c+s),l=l>c?c:l,l<0&&(l+=c),c=s>l?0:l-s>>>0,s>>>=0;for(var u=Array(c);++o<c;)u[o]=a[o+s];return u}function Ve(a,s,l){var o=a.length;return l=l===void 0?o:l,!s&&l>=o?a:Pe(a,s,l)}var We="\\ud800-\\udfff",Ge="\\u0300-\\u036f",Be="\\ufe20-\\ufe2f",Fe="\\u20d0-\\u20ff",qe=Ge+Be+Fe,Je="\\ufe0e\\ufe0f",Ke="\\u200d",Ye=RegExp("["+Ke+We+qe+Je+"]");function D(a){return Ye.test(a)}function Qe(a){return a.split("")}var H="\\ud800-\\udfff",Xe="\\u0300-\\u036f",et="\\ufe20-\\ufe2f",tt="\\u20d0-\\u20ff",ut=Xe+et+tt,at="\\ufe0e\\ufe0f",rt="["+H+"]",O="["+ut+"]",h="\\ud83c[\\udffb-\\udfff]",nt="(?:"+O+"|"+h+")",Z="[^"+H+"]",P="(?:\\ud83c[\\udde6-\\uddff]){2}",V="[\\ud800-\\udbff][\\udc00-\\udfff]",ot="\\u200d",W=nt+"?",G="["+at+"]?",it="(?:"+ot+"(?:"+[Z,P,V].join("|")+")"+G+W+")*",st=G+W+it,ft="(?:"+[Z+O+"?",O,P,V,rt].join("|")+")",lt=RegExp(h+"(?="+h+")|"+ft+st,"g");function ct(a){return a.match(lt)||[]}function dt(a){return D(a)?ct(a):Qe(a)}function gt(a){return function(s){s=A(s);var l=D(s)?dt(s):void 0,o=l?l[0]:s.charAt(0),c=l?Ve(l,1).join(""):s.slice(1);return o[a]()+c}}var vt=gt("toUpperCase");const bt=vt;function pt(a,s,l,o){var c=-1,u=a==null?0:a.length;for(o;++c<u;)l=s(l,a[c],c,a);return l}function xt(a){return function(s){return a?.[s]}}var yt={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mt=xt(yt);const St=mt;var Ct=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ot="\\u0300-\\u036f",ht="\\ufe20-\\ufe2f",$t="\\u20d0-\\u20ff",At=Ot+ht+$t,Rt="["+At+"]",jt=RegExp(Rt,"g");function Nt(a){return a=A(a),a&&a.replace(Ct,St).replace(jt,"")}var Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function wt(a){return a.match(Tt)||[]}var Ut=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Mt(a){return Ut.test(a)}var B="\\ud800-\\udfff",It="\\u0300-\\u036f",kt="\\ufe20-\\ufe2f",zt="\\u20d0-\\u20ff",Et=It+kt+zt,F="\\u2700-\\u27bf",q="a-z\\xdf-\\xf6\\xf8-\\xff",_t="\\xac\\xb1\\xd7\\xf7",Lt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Dt="\\u2000-\\u206f",Ht=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",J="A-Z\\xc0-\\xd6\\xd8-\\xde",Zt="\\ufe0e\\ufe0f",K=_t+Lt+Dt+Ht,Y="['’]",M="["+K+"]",Pt="["+Et+"]",Q="\\d+",Vt="["+F+"]",X="["+q+"]",ee="[^"+B+K+Q+F+q+J+"]",Wt="\\ud83c[\\udffb-\\udfff]",Gt="(?:"+Pt+"|"+Wt+")",Bt="[^"+B+"]",te="(?:\\ud83c[\\udde6-\\uddff]){2}",ue="[\\ud800-\\udbff][\\udc00-\\udfff]",v="["+J+"]",Ft="\\u200d",I="(?:"+X+"|"+ee+")",qt="(?:"+v+"|"+ee+")",k="(?:"+Y+"(?:d|ll|m|re|s|t|ve))?",z="(?:"+Y+"(?:D|LL|M|RE|S|T|VE))?",ae=Gt+"?",re="["+Zt+"]?",Jt="(?:"+Ft+"(?:"+[Bt,te,ue].join("|")+")"+re+ae+")*",Kt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qt=re+ae+Jt,Xt="(?:"+[Vt,te,ue].join("|")+")"+Qt,eu=RegExp([v+"?"+X+"+"+k+"(?="+[M,v,"$"].join("|")+")",qt+"+"+z+"(?="+[M,v+I,"$"].join("|")+")",v+"?"+I+"+"+k,v+"+"+z,Yt,Kt,Q,Xt].join("|"),"g");function tu(a){return a.match(eu)||[]}function uu(a,s,l){return a=A(a),s=s,s===void 0?Mt(a)?tu(a):wt(a):a.match(s)||[]}var au="['’]",ru=RegExp(au,"g");function nu(a){return function(s){return pt(uu(Nt(s).replace(ru,"")),a,"")}}var ou=nu(function(a,s,l){return a+(l?" ":"")+bt(s)});const iu=ou,su=defineComponent({props:{active:{type:Number,required:!0},dotClass:{type:String,default:""},dotInnerClass:{type:String,default:""},pages:{type:Number,default:0},pageKeys:{type:Array,required:!0},disableClasses:{type:Boolean,default:!1}},emit:["update:active"],setup(a,{emit:s}){const l=computed(()=>Array.from(Array(a.pages)).map((o,c)=>h$1("a",{"aria-label":"Go to "+iu(a.pageKeys[c]),class:[a.dotClass,{"vue3-fullpage__navigation-dot":!a.disableClasses,"is-active":a.active===c}],onClick:()=>s("update:active",c)},[h$1("div",{class:[{"vue3-fullpage__navigation-dot-inner":!a.disableClasses},a.dotInnerClass]})])));return()=>h$1("div",{class:{"vue3-fullpage__navigation":!a.disableClasses}},l.value)}}),fu=(a,s,{active:l})=>{const o=a(),c=[];return{pages:o.map((u,d)=>{var f;const g=((f=u?.props)==null?void 0:f.id)??`${s.prefix}${d+1}`;return c.push(g),h$1(me,{id:g,class:[!s.disableClasses&&"vue3-fullpage__page",s.pageClass],key:g,index:d,active:l.value,updateHistory:s.updateHistory,"onUpdate:active":y=>l.value=y},{default:()=>u})}),keys:c}},cu=defineComponent({props:{disableClasses:{type:Boolean,default:!1},navigationSize:{type:[String,Number],default:"1rem"},navigationGap:{type:String,default:"0.5rem"},navigationColour:{type:String,default:"currentColor"},navigationOpacityOuter:{type:[Number,String],default:.2},navigationOpacityOuterHover:{type:[Number,String],default:.3},navigationOpacityOuterActive:{type:[Number,String],default:.4},activeColour:{type:String,default:"crimson"},updateHistory:{type:Boolean,default:!1},prefix:{type:String,default:"page-"},hideNavigation:{type:Boolean,default:!1},tag:{type:String,default:"div"},pageClass:{type:String,default:""},navigationClass:{type:String,default:""},navigationDotClass:{type:String,default:""},navigationDotInnerClass:{type:String,default:""},modelValue:{type:Number,default:0}},emits:["update:modelValue","page-enter","page-leave"],setup(a,{slots:s,emit:l}){const o=ref(a.modelValue?a.modelValue-1:0),{pages:c,keys:u}=fu(s.default,a,{active:o});watch(()=>a.modelValue,g=>o.value=g?g-1:0),watch(o,(g,y)=>{l("update:modelValue",g+1),(y||y===0)&&l("page-leave",y+1),l("page-enter",g+1)});const d=g=>{o.value=g;const y=c[g].key;document.querySelector(`#${y}`).scrollIntoView({behavior:"smooth"})},f=computed(()=>typeof a.navigationSize=="number"||/\D/.test(a.navigationSize)===!1?`${a.navigationSize}px`:a.navigationSize);return()=>h$1(a.tag,{class:[!a.disableClasses&&"vue3-fullpage__wrapper"],style:{"--v3fp-total-pages":c.length,"--v3fp-active-page":o.value+1,"--v3fp-navigation-gap":a.navigationGap,"--v3fp-navigation-colour":a.navigationColour,"--v3fp-navigation-size":f.value,"--v3fp-navigation-colour--active":a.activeColour,"--v3fp-navigation-opacity--outer":a.navigationOpacityOuter,"--v3fp-navigation-opacity--outer__hover":a.navigationOpacityOuterHover,"--v3fp-navigation-opacity--outer__active":a.navigationOpacityOuterActive}},[...c,!a.hideNavigation&&h$1(su,{class:a.navigationClass,dotClass:a.navigationDotClass,dotInnerClass:a.navigationDotInnerClass,disableClasses:a.disableClasses,pages:c.length,pageKeys:u,active:o.value,"onUpdate:active":d})])}}),data=JSON.parse(`[{"title":"Models","url":"/post/ai/Models.html","excerpt":"","category":"大模型","date":{"time":null,"string":"Invalid Date"}},{"title":"大模型","url":"/post/ai/RAG.html","excerpt":"","category":"RAG","date":{"time":null,"string":"Invalid Date"}},{"title":"机器学习","url":"/post/ai/gradio.html","excerpt":"","category":"Gradio","date":{"time":null,"string":"Invalid Date"}},{"title":"提示词","url":"/post/ai/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"提示词案例","url":"/post/ai/优秀案例.html","excerpt":"","category":"优秀案例","date":{"time":null,"string":"Invalid Date"}},{"title":"提示词的重要","url":"/post/ai/基本概念.html","excerpt":"","category":"提示工程简介","date":{"time":null,"string":"Invalid Date"}},{"title":"提示词示例","url":"/post/ai/提示词示例.html","excerpt":"","category":"提示工程简介","date":{"time":null,"string":"Invalid Date"}},{"title":"Java代码规范全部奉上","url":"/post/design/Java代码规范全部奉上.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1598165820000.png\\" alt=\\"\\"></p>\\n<blockquote>\\n<p>写代码就像写文章, 好的代码就像好的文章,结构严谨,构思清晰。写代码就像写文章, 一不留神就成流水账，为避免这种情况作为软件开发工程师，重要的是设计而不是实现。</p>\\n</blockquote>\\n<p><strong>在一个团队中,由于不同经验的开发导致编程风格可能会出现非常混乱的情况,从而导致开发成本上升。难以维护。所以代码规范就显得异常重要了。</strong></p>\\n<p>本篇文章就是给出编程命名的建议,仅供参考,但是其目的是为了统一规范,提高编程能力,降低开发成本,减少代码维护成本。</p>\\n<p>契约精神: 做到有法可依，有章可循。</p>\\n<h2 id=\\"一、类命名\\" tabindex=\\"-1\\">一、类命名 <a class=\\"header-anchor\\" href=\\"#一、类命名\\" aria-label=\\"Permalink to &quot;一、类命名&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-抽象类\\" tabindex=\\"-1\\">1. 抽象类 <a class=\\"header-anchor\\" href=\\"#_1-抽象类\\" aria-label=\\"Permalink to &quot;1. 抽象类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>适用的设计模式为模板模式。抽象是自下往上的设计。由具体实现推断出抽象方法。建议以Abstract开头。</p>\\n<p>| 建议 | 示例 |\\n|</p>\\n","date":{"time":null,"string":"Invalid Date"}},{"title":"没有规矩不成方圆","url":"/post/design/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"领导风格","url":"/post/design/method/leader-style.html","excerpt":"","category":"方法论","date":{"time":null,"string":"Invalid Date"}},{"title":"如何学会复盘","url":"/post/design/method/如何学会复盘.html","excerpt":"","category":"方法论","date":{"time":null,"string":"Invalid Date"}},{"title":"沟通模型","url":"/post/design/method/沟通模型.html","excerpt":"<h1 id=\\"_10个沟通表达模型\\" tabindex=\\"-1\\">10个沟通表达模型 <a class=\\"header-anchor\\" href=\\"#_10个沟通表达模型\\" aria-label=\\"Permalink to &quot;10个沟通表达模型&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>说话条理，开口重点。</p>\\n<p>| 模型           | 适用场景           | 模板话术                                                   |\\n|</p>\\n","category":"方法论","date":{"time":null,"string":"Invalid Date"}},{"title":"自媒体的思考","url":"/post/design/redbook/rebook.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"中文文档写作规范","url":"/post/design/中文文档写作规范.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">中文技术文档的写作规范。</p>\\n<p>本篇文章参考与阮一峰大佬的网络日志, 总结比较细致。非常具有借鉴意义, 欢迎大家进行学习。</p>\\n<ul>\\n<li>文章参考地址: <a href=\\"https://github.com/ruanyf/document-style-guide\\" target=\\"_blank\\" rel=\\"noreferrer\\">阮一峰的网络日志</a></li>\\n</ul>\\n</div>\\n<h1 id=\\"目录\\" tabindex=\\"-1\\">目录 <a class=\\"header-anchor\\" href=\\"#目录\\" aria-label=\\"Permalink to &quot;目录&quot;\\">&ZeroWidthSpace;</a></h1>\\n<ol>\\n<li><a href=\\"#一、标题\\">标题</a></li>\\n<li><a href=\\"#二、文本\\">文本</a></li>\\n<li><a href=\\"#三、段落\\">段落</a></li>\\n<li><a href=\\"#四、数值\\">数值</a></li>\\n<li><a href=\\"#五、标点符号\\">标点符号</a></li>\\n<li><a href=\\"#六、文档体系\\">文档体系</a></li>\\n<li><a href=\\"#七、参考链接\\">参考链接</a></li>\\n</ol>\\n<h2 id=\\"一、标题\\" tabindex=\\"-1\\">一、标题 <a class=\\"header-anchor\\" href=\\"#一、标题\\" aria-label=\\"Permalink to &quot;一、标题&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"层级\\" tabindex=\\"-1\\">层级 <a class=\\"header-anchor\\" href=\\"#层级\\" aria-label=\\"Permalink to &quot;层级&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>标题分为四级。</p>\\n<ul>\\n<li>一级标题：文章的标题</li>\\n<li>二级标题：文章主要部分的大标题</li>\\n<li>三级标题：二级标题下面一级的小标题</li>\\n<li>四级标题：三级标题下面某一方面的小标题</li>\\n</ul>\\n<p>下面是示例。</p>\\n<div class=\\"language-markdown vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">markdown</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\"># 一级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">## 二级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 三级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">#### 四级标题</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><h3 id=\\"原则\\" tabindex=\\"-1\\">原则 <a class=\\"header-anchor\\" href=\\"#原则\\" aria-label=\\"Permalink to &quot;原则&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）一级标题下，不能直接出现三级标题。</p>\\n<p>示例：下面的文章结构，缺少二级标题。</p>\\n<div class=\\"language-markdown vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">markdown</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\"># 一级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 三级标题</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（2）标题要避免孤立编号（即同级标题只有一个）。</p>\\n<p>示例：下面的文章结构，<code>二级标题 A</code>只包含一个三级标题，完全可以省略<code>三级标题 A</code>。</p>\\n<div class=\\"language-markdown vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">markdown</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">## 二级标题 A</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 三级标题 A</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">## 二级标题 B</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>（3）下级标题不重复上一级标题的名字。</p>\\n<p>示例：下面的文章结构，二级标题与下属的三级标题同名，建议避免。</p>\\n<div class=\\"language-markdown vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">markdown</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">## 概述</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 概述</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（4）谨慎使用四级标题，尽量避免出现，保持层级的简单，防止出现过于复杂的章节。</p>\\n<p>如果三级标题下有并列性的内容，建议只使用项目列表（Item list）。</p>\\n<p>示例：下面的结构二要好于结构一。后者适用的场景，主要是较长篇幅的内容。</p>\\n<div class=\\"language-markdown vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">markdown</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">结构一</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 三级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">#### 四级标题 A</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">#### 四级标题 B</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">#### 四级标题 C</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">结构二</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">### 三级标题</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">**（1）A**</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">**（2）B**</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8;--shiki-light-font-weight:bold;--shiki-dark-font-weight:bold\\">**（3）C**</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br></div></div><h2 id=\\"二、文本\\" tabindex=\\"-1\\">二、文本 <a class=\\"header-anchor\\" href=\\"#二、文本\\" aria-label=\\"Permalink to &quot;二、文本&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"字间距\\" tabindex=\\"-1\\">字间距 <a class=\\"header-anchor\\" href=\\"#字间距\\" aria-label=\\"Permalink to &quot;字间距&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）全角中文字符与半角英文字符之间，应有一个半角空格。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：本文介绍如何快速启动Windows系统。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：本文介绍如何快速启动 Windows 系统。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（2）全角中文字符与半角阿拉伯数字之间，有没有半角空格都可，但必须保证风格统一，不能两种风格混杂。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>正确：2011年5月15日，我订购了5台笔记本电脑与10台平板电脑。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：2011 年 5 月 15 日，我订购了 5 台笔记本电脑与 10 台平板电脑。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>半角的百分号，视同阿拉伯数字。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>正确：今年我国经济增长率是6.5%。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：今年我国经济增长率是 6.5%。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（3）英文单位若不翻译，单位前的阿拉伯数字与单位间不留空格。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：一部容量为 16 GB 的智能手机</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：一部容量为 16GB 的智能手机</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（4）半角英文字符和半角阿拉伯数字，与全角标点符号之间不留空格。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：他的电脑是 MacBook Air 。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：他的电脑是 MacBook Air。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"句子\\" tabindex=\\"-1\\">句子 <a class=\\"header-anchor\\" href=\\"#句子\\" aria-label=\\"Permalink to &quot;句子&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）避免使用长句。</p>\\n<p>不包含任何标点符号的单个句子，或者以逗号分隔的句子构件，长度尽量保持在 20 个字以内；20～29 个字的句子，可以接受；30～39 个字的句子，语义必须明确，才能接受；多于 40 个字的句子，任何情况下都不能接受。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：本产品适用于从由一台服务器进行动作控制的单一节点结构到由多台服务器进行动作控制的并行处理程序结构等多种体系结构。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：本产品适用于多种体系结构。无论是由一台服务器（单一节点结构），还是由多台服务器（并行处理结构）进行动作控制，均可以使用本产品。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>逗号分割的长句，总长度不应该超过 100 字或者正文的 3 行。</p>\\n<p>（2）尽量使用简单句和并列句，避免使用复合句。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>并列句：他昨天生病了，没有参加会议。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>复合句：那个昨天生病的人没有参加会议。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（3）同样一个意思，尽量使用肯定句表达，不使用否定句表达。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：请确认没有接通装置的电源。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：请确认装置的电源已关闭。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（4）避免使用双重否定句。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：没有删除权限的用户，不能删除此文件。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：用户必须拥有删除权限，才能删除此文件。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"写作风格\\" tabindex=\\"-1\\">写作风格 <a class=\\"header-anchor\\" href=\\"#写作风格\\" aria-label=\\"Permalink to &quot;写作风格&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）尽量不使用被动语态，改为使用主动语态。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：假如此软件尚未被安装，</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：假如尚未安装这个软件，</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（2）不使用非正式的语言风格。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：Lady Gaga 的演唱会真是酷毙了，从没看过这么给力的表演！！！</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：无法参加本次活动，我深感遗憾。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（3）不使用冷僻、生造或者文言文的词语，而要使用现代汉语的常用表达方式。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：这是唯二的快速启动的方法。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：这是仅有的两种快速启动的方法。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（4）用对“的”、“地”、“得”。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>她露出了开心的笑容。</span></span>\\n<span class=\\"line\\"><span>（形容词＋的＋名词）</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>她开心地笑了。</span></span>\\n<span class=\\"line\\"><span>（副词＋地＋动词）</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>她笑得很开心。</span></span>\\n<span class=\\"line\\"><span>（动词＋得＋副词）</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><p>（5）使用代词时（比如“其”、“该”、“此”、“这”等词），必须明确指代的内容，保证只有一个含义。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：从管理系统可以监视中继系统和受其直接控制的分配系统。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：从管理系统可以监视两个系统：中继系统和受中继系统直接控制的分配系统。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（6）名词前不要使用过多的形容词。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：此设备的使用必须在接受过本公司举办的正式的设备培训的技师的指导下进行。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：此设备必须在技师的指导下使用，且指导技师必须接受过由本公司举办的正式设备培训。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"英文处理\\" tabindex=\\"-1\\">英文处理 <a class=\\"header-anchor\\" href=\\"#英文处理\\" aria-label=\\"Permalink to &quot;英文处理&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）英文原文如果使用了复数形式，翻译成中文时，应该将其还原为单数形式。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>英文：⋯information stored in random access memory (RAMs)⋯</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>中文：……存储在随机存取存储器（RAM）里的信息……</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（2）外文缩写可以使用半角圆点(<code>.</code>)表示缩写。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>U.S.A.</span></span>\\n<span class=\\"line\\"><span>Apple, Inc.</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>（3）表示中文时，英文省略号（<code>⋯</code>）应改为中文省略号（<code>……</code>）。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>英文：5 minutes later⋯</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>中文：5 分钟过去了……</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（4）英文书名或电影名改用中文表达时，双引号应改为书名号。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>英文：He published an article entitled \\"The Future of the Aviation\\".</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>中文：他发表了一篇名为《航空业的未来》的文章。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（5）第一次出现英文词汇时，在括号中给出中文标注。此后再次出现时，直接使用英文缩写即可。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>IOC（International Olympic Committee，国际奥林匹克委员会）。这样定义后，便可以直接使用“IOC”了。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>（6）专有名词中每个词第一个字母均应大写，非专有名词则不需要大写。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>“American Association of Physicists in Medicine”（美国医学物理学家协会）是专有名词，需要大写。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>“online transaction processing”（在线事务处理）不是专有名词，不应大写。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h2 id=\\"三、段落\\" tabindex=\\"-1\\">三、段落 <a class=\\"header-anchor\\" href=\\"#三、段落\\" aria-label=\\"Permalink to &quot;三、段落&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"原则-1\\" tabindex=\\"-1\\">原则 <a class=\\"header-anchor\\" href=\\"#原则-1\\" aria-label=\\"Permalink to &quot;原则&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>一个段落只能有一个主题，或一个中心句子。</li>\\n<li>段落的中心句子放在段首，对全段内容进行概述。后面陈述的句子为核心句服务。</li>\\n<li>一个段落的长度不能超过七行，最佳段落长度小于等于四行。</li>\\n<li>段落的句子语气要使用陈述和肯定语气，避免使用感叹语气。</li>\\n<li>段落之间使用一个空行隔开。</li>\\n<li>段落开头不要留出空白字符。</li>\\n</ul>\\n<h3 id=\\"引用\\" tabindex=\\"-1\\">引用 <a class=\\"header-anchor\\" href=\\"#引用\\" aria-label=\\"Permalink to &quot;引用&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>引用第三方内容时，应注明出处。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>One man’s constant is another man’s variable. — Alan Perlis</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>如果是全篇转载，请在全文开头显著位置注明作者和出处，并链接至原文。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>本文转载自 WikiQuote</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>使用外部图片时，必须在图片下方或文末标明来源。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>本文部分图片来自 Wikipedia</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h2 id=\\"四、数值\\" tabindex=\\"-1\\">四、数值 <a class=\\"header-anchor\\" href=\\"#四、数值\\" aria-label=\\"Permalink to &quot;四、数值&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"半角数字\\" tabindex=\\"-1\\">半角数字 <a class=\\"header-anchor\\" href=\\"#半角数字\\" aria-label=\\"Permalink to &quot;半角数字&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>阿拉伯数字一律使用半角形式，不得使用全角形式。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误： 这件商品的价格是１０００元。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确： 这件商品的价格是 1000 元。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"千分号\\" tabindex=\\"-1\\">千分号 <a class=\\"header-anchor\\" href=\\"#千分号\\" aria-label=\\"Permalink to &quot;千分号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>数值为千位以上，应添加千分号（半角逗号）。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>XXX 公司的实收资本为 ￥1,258,000 人民币。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>对于 4 位以下的数值，千分号是选用的，比如<code>1000</code>和<code>1,000</code>都可以接受。对于 4 位以上的数值，千分号是必须的。</p>\\n<h3 id=\\"货币\\" tabindex=\\"-1\\">货币 <a class=\\"header-anchor\\" href=\\"#货币\\" aria-label=\\"Permalink to &quot;货币&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>货币应为阿拉伯数字，并在数字前写出货币符号，或在数字后写出货币中文名称。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>$1,000</span></span>\\n<span class=\\"line\\"><span>1,000 美元</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>英文的货币名称，建议参考国际标准 <a href=\\"https://en.wikipedia.org/wiki/ISO_4217\\" target=\\"_blank\\" rel=\\"noreferrer\\">ISO 4217</a>。</p>\\n<h3 id=\\"数值范围\\" tabindex=\\"-1\\">数值范围 <a class=\\"header-anchor\\" href=\\"#数值范围\\" aria-label=\\"Permalink to &quot;数值范围&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>表示数值范围时，用<code>～</code>或<code>——</code>连接。参见《标点符号》一节的“连接号”部分。</p>\\n<p>带有单位或百分号时，两个数字建议都要加上单位或百分号。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>132kg～234kg</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>67%～89%</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"变化程度的表示法\\" tabindex=\\"-1\\">变化程度的表示法 <a class=\\"header-anchor\\" href=\\"#变化程度的表示法\\" aria-label=\\"Permalink to &quot;变化程度的表示法&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>数字的增加要使用“增加了”、“增加到”。“了”表示增量，“到”表示定量。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>增加到过去的两倍</span></span>\\n<span class=\\"line\\"><span>（过去为一，现在为二）</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>增加了两倍</span></span>\\n<span class=\\"line\\"><span>（过去为一，现在为三）</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>数字的减少要使用“降低了”、“降低到”。“了”表示增量，“到”表示定量。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>降低到百分之八十</span></span>\\n<span class=\\"line\\"><span>（定额是一百，现在是八十）</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>降低了百分之八十</span></span>\\n<span class=\\"line\\"><span>（原来是一百，现在是二十）</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>不能用“降低 N 倍”或“减少 N 倍”的表示法，要用“降低百分之几”或“减少百分之几”。因为减少（或降低）一倍表示数值原来为一百，现在等于零。</p>\\n<h2 id=\\"五、标点符号\\" tabindex=\\"-1\\">五、标点符号 <a class=\\"header-anchor\\" href=\\"#五、标点符号\\" aria-label=\\"Permalink to &quot;五、标点符号&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"原则-2\\" tabindex=\\"-1\\">原则 <a class=\\"header-anchor\\" href=\\"#原则-2\\" aria-label=\\"Permalink to &quot;原则&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）中文语句的标点符号，均应该采取全角符号，这样可以与全角文字保持视觉的一致。</p>\\n<p>（2）如果整句为英文，则该句使用英文/半角标点。</p>\\n<p>（3）句号、问号、叹号、逗号、顿号、分号和冒号不得出现在一行之首。</p>\\n<h3 id=\\"句号\\" tabindex=\\"-1\\">句号 <a class=\\"header-anchor\\" href=\\"#句号\\" aria-label=\\"Permalink to &quot;句号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）中文语句的结尾处应该用全角句号（<code>。</code>）。</p>\\n<p>（2）句子末尾用括号加注时，句号应在括号之外。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：关于文件的输出，请参照第 1.3 节（见第 26 页。）</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：关于文件的输出，请参照第 1.3 节（见第 26 页）。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h3 id=\\"逗号\\" tabindex=\\"-1\\">逗号 <a class=\\"header-anchor\\" href=\\"#逗号\\" aria-label=\\"Permalink to &quot;逗号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）逗号（<code>，</code>）表示句子内部的一般性停顿。</p>\\n<p>（2）注意避免“一逗到底”，即整个段落除了结尾，全部停顿都使用逗号。</p>\\n<h3 id=\\"顿号\\" tabindex=\\"-1\\">顿号 <a class=\\"header-anchor\\" href=\\"#顿号\\" aria-label=\\"Permalink to &quot;顿号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）句子内部的并列词，应该用全角顿号(<code>、</code>) 分隔，而不用逗号，即使并列词是英语也是如此。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>错误：我最欣赏的科技公司有 Google, Facebook, 腾讯, 阿里和百度等。</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>正确：我最欣赏的科技公司有 Google、Facebook、腾讯、阿里和百度等。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>（2）英文句子中，并列词语之间使用半角逗号（<code>,</code>）分隔。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>例句：Microsoft Office includes Word, Excel, PowerPoint, Outlook and other components.</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h3 id=\\"分号\\" tabindex=\\"-1\\">分号 <a class=\\"header-anchor\\" href=\\"#分号\\" aria-label=\\"Permalink to &quot;分号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）分号（<code>；</code>）表示复句内部并列分句之间的停顿。</p>\\n<h3 id=\\"引号\\" tabindex=\\"-1\\">引号 <a class=\\"header-anchor\\" href=\\"#引号\\" aria-label=\\"Permalink to &quot;引号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）引用时，应该使用全角双引号（<code>“ ”</code>），注意前后双引号不同。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>例句：许多人都认为客户服务的核心是“友好”和“专业”。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>（2）引号里面还要用引号时，外面一层用双引号，里面一层用单引号（<code>‘ ’</code>），注意前后单引号不同。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>例句：鲍勃解释道：“我要放音乐，可萨利说，‘不行！’。”</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h3 id=\\"括号\\" tabindex=\\"-1\\">括号 <a class=\\"header-anchor\\" href=\\"#括号\\" aria-label=\\"Permalink to &quot;括号&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>（1）补充说明时，使用全角圆括号（<code>（）</code>），括号前后不加空格。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>例句：请确认所有的连接（电缆和接插件）均安装牢固。</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>（2）几种括号的中英文名称。</p>\\n<p>|       |             英文            |   中文 |\\n|</p>\\n","date":{"time":null,"string":"Invalid Date"}},{"title":"六大原则 & 23种设计模式","url":"/post/design/六脉神剑.html","excerpt":"","category":"设计&规范","date":{"time":null,"string":"Invalid Date"}},{"title":"勤劳致富","url":"/post/design/勤劳不能致富.html","excerpt":"","category":"牛马人生","date":{"time":null,"string":"Invalid Date"}},{"title":"年终总结汇报大纲","url":"/post/design/年终总结汇报大纲.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"软实力之沟通篇","url":"/post/design/沟通软实力.html","excerpt":"","category":"牛马人生","date":{"time":null,"string":"Invalid Date"}},{"title":"谬误","url":"/post/design/逻辑谬论.html","excerpt":"","category":"逻辑学","date":{"time":null,"string":"Invalid Date"}},{"title":"领域驱动模型的思考与认知","url":"/post/design/领域驱动模型的思考与认知.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"CSS动画","url":"/post/guide/css/CSS动画.html","excerpt":"","category":"CSS","date":{"time":null,"string":"Invalid Date"}},{"title":"IntersectionObserver","url":"/post/guide/css/IntersectionObserver.html","excerpt":"","category":"CSS","date":{"time":null,"string":"Invalid Date"}},{"title":"Eslint和 Prettier使用","url":"/post/guide/eslint-plugin.html","excerpt":"","category":"Plugins","date":{"time":null,"string":"Invalid Date"}},{"title":"WebStorm Plugins","url":"/post/guide/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"CommonJs和ECMAScript","url":"/post/guide/javascript/ESM.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"Animejs示例","url":"/post/guide/javascript/animejs-demo.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"animejs","url":"/post/guide/javascript/animejs.html","excerpt":"<blockquote></blockquote>\\n<h1 id=\\"animejs\\" tabindex=\\"-1\\">animejs <a class=\\"header-anchor\\" href=\\"#animejs\\" aria-label=\\"Permalink to &quot;animejs&quot;\\">&ZeroWidthSpace;</a></h1>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>平替 gsap,语法更简单。重点是免费。</p>\\n<p>animejs 对比 gsap 它的文档是非常清晰的，这里笔记就是为了学习。使用中可以直接看官方文档。\\n<a href=\\"https://animejs.com/\\" target=\\"_blank\\" rel=\\"noreferrer\\">animejs官网</a>\\n<a href=\\"https://github.com/juliangarnier/anime/\\" target=\\"_blank\\" rel=\\"noreferrer\\">文档</a></p>\\n</div>\\n<h2 id=\\"常见的一些变形\\" tabindex=\\"-1\\">常见的一些变形 <a class=\\"header-anchor\\" href=\\"#常见的一些变形\\" aria-label=\\"Permalink to &quot;常见的一些变形&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><code>anime.js</code> 支持许多常见的 CSS 属性动画，允许你通过 JavaScript 更加灵活地控制动画效果。以下是 <code>anime.js</code> 支持的一些常见 CSS 动画属性：</p>\\n<h3 id=\\"支持的-css-属性\\" tabindex=\\"-1\\">支持的 CSS 属性 <a class=\\"header-anchor\\" href=\\"#支持的-css-属性\\" aria-label=\\"Permalink to &quot;支持的 CSS 属性&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>| 属性名          | 说明                                 |\\n|</p>\\n","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"createDocumentFragment","url":"/post/guide/javascript/createDocumentFragment.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"gsap plugin","url":"/post/guide/javascript/gsap-plugin.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"gsap","url":"/post/guide/javascript/gsap.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"NetSuite Script脚本类型","url":"/post/guide/javascript/netsuiteScript.html","excerpt":"","category":"NetSuite","date":{"time":null,"string":"Invalid Date"}},{"title":"package.json","url":"/post/guide/javascript/package.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"requestAnimationFrame","url":"/post/guide/javascript/requestAnimationFrame.html","excerpt":"","category":"JavaScript","date":{"time":null,"string":"Invalid Date"}},{"title":"Monorepo","url":"/post/guide/monnrepo/","excerpt":"","category":"Monorepo","date":{"time":null,"string":"Invalid Date"}},{"title":"what monorepo?","url":"/post/guide/monnrepo/monorepo.html","excerpt":"","category":"Monorepo","date":{"time":null,"string":"Invalid Date"}},{"title":"Vite 从零搭建项目","url":"/post/guide/plugin.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"typescript配置说明","url":"/post/guide/ts-config-issue.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"泛型函数","url":"/post/guide/typescript/generics-function.html","excerpt":"","category":"TypeScript","date":{"time":null,"string":"Invalid Date"}},{"title":"泛型用法","url":"/post/guide/typescript/generics.html","excerpt":"","category":"TypeScript","date":{"time":null,"string":"Invalid Date"}},{"title":"tsconfig.json","url":"/post/guide/typescript/tsconfig.html","excerpt":"","category":"TypeScript","date":{"time":null,"string":"Invalid Date"}},{"title":"uni-app-api","url":"/post/guide/uniapp/common.html","excerpt":"<h1 id=\\"uni-app\\" tabindex=\\"-1\\">uni-app <a class=\\"header-anchor\\" href=\\"#uni-app\\" aria-label=\\"Permalink to &quot;uni-app&quot;\\">&ZeroWidthSpace;</a></h1>\\n<h2 id=\\"全局事件\\" tabindex=\\"-1\\">全局事件 <a class=\\"header-anchor\\" href=\\"#全局事件\\" aria-label=\\"Permalink to &quot;全局事件&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><a href=\\"https://zh.uniapp.dcloud.io/api/application.html\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://zh.uniapp.dcloud.io/api/application.html</a></p>\\n<h3 id=\\"uni-onappshow\\" tabindex=\\"-1\\">uni.onAppShow <a class=\\"header-anchor\\" href=\\"#uni-onappshow\\" aria-label=\\"Permalink to &quot;uni.onAppShow&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>应用切前台事件的回调函数</p>\\n<h3 id=\\"uni-onapphide\\" tabindex=\\"-1\\">uni.onAppHide <a class=\\"header-anchor\\" href=\\"#uni-onapphide\\" aria-label=\\"Permalink to &quot;uni.onAppHide&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>应用切后台事件的回调函数。该事件与 App.onHide 的回调参数一致。</p>\\n<h2 id=\\"路由\\" tabindex=\\"-1\\">路由 <a class=\\"header-anchor\\" href=\\"#路由\\" aria-label=\\"Permalink to &quot;路由&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><a href=\\"https://zh.uniapp.dcloud.io/api/router.html#navigateto\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://zh.uniapp.dcloud.io/api/router.html#navigateto</a></p>\\n<h3 id=\\"uni-navigateto\\" tabindex=\\"-1\\">uni.navigateTo <a class=\\"header-anchor\\" href=\\"#uni-navigateto\\" aria-label=\\"Permalink to &quot;uni.navigateTo&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>定义：保留当前页面，跳转到应用内的某个页面，使用uni.navigateBack可以返回到原页面。</p>\\n<p>| 参数 | 类型 | 必填 | 默认值 | 说明 | 平台差异说明 |\\n|</p>\\n","category":"uni-app","date":{"time":null,"string":"Invalid Date"}},{"title":"uni-app","url":"/post/guide/uniapp/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Vite 插件","url":"/post/guide/vite-plugin.html","excerpt":"","category":"Plugins","date":{"time":null,"string":"Invalid Date"}},{"title":"My Plugin","url":"/post/guide/vitepress/vitepress-plugin.html","excerpt":"<h1 id=\\"my-plugin\\" tabindex=\\"-1\\">My Plugin <a class=\\"header-anchor\\" href=\\"#my-plugin\\" aria-label=\\"Permalink to &quot;My Plugin&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>vitepress 使用 vite 构建的，所以我们可以根据 <a href=\\"https://www.vitejs.net/guide/api-plugin.html#config\\" target=\\"_blank\\" rel=\\"noreferrer\\">vite</a> 的插件来实现。</p>\\n<h2 id=\\"vitepluginautosidebar\\" tabindex=\\"-1\\">VitePluginAutoSidebar <a class=\\"header-anchor\\" href=\\"#vitepluginautosidebar\\" aria-label=\\"Permalink to &quot;VitePluginAutoSidebar&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>自动构建侧边栏，如本页面侧边栏。</p>\\n<ul>\\n<li>侧边栏发生变化自动重启</li>\\n<li>文章发生变化不自动重启，提高速度。</li>\\n</ul>\\n<h3 id=\\"使用方法\\" tabindex=\\"-1\\">使用方法 <a class=\\"header-anchor\\" href=\\"#使用方法\\" aria-label=\\"Permalink to &quot;使用方法&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>category: 侧边栏目录</li>\\n</ul>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div>","category":"VitePress","date":{"time":null,"string":"Invalid Date"}},{"title":"SSR","url":"/post/guide/vitepress/vitepress-ssr.html","excerpt":"","category":"VitePress","date":{"time":null,"string":"Invalid Date"}},{"title":"VueUse键盘绑定","url":"/post/guide/vue/VueUse键盘绑定.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"vite打包环境","url":"/post/guide/vue/vite打包环境.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"WebStorm Plugins","url":"/post/guide/web-storm-plugins.html","excerpt":"","category":"Code Editor","date":{"time":null,"string":"Invalid Date"}},{"title":"web-types","url":"/post/guide/web-storm.html","excerpt":"","category":"Code Editor","date":{"time":null,"string":"Invalid Date"}},{"title":"Java并发包队列之BlockingQueue","url":"/post/java/BlockingQueue.html","excerpt":"<h2 id=\\"一、什么是blockingqueue\\" tabindex=\\"-1\\">一、什么是BlockingQueue <a class=\\"header-anchor\\" href=\\"#一、什么是blockingqueue\\" aria-label=\\"Permalink to &quot;一、什么是BlockingQueue&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>BlockingQueue即阻塞队列，从阻塞这个词可以看出，在某些情况下对阻塞队列的访问可能会造成阻塞。被阻塞的情况主要有如下两种：</p>\\n<ol>\\n<li>当队列满了的时候进行入队列操作</li>\\n<li>当队列空了的时候进行出队列操作\\n因此，当一个线程试图对一个已经满了的队列进行入队列操作时，它将会被阻塞，除非有另一个线程做了出队列操作；同样，当一个线程试图对一个空队列进行出队列操作时，它将会被阻塞，除非有另一个线程进行了入队列操作。</li>\\n</ol>\\n<h2 id=\\"二、blockingqueue的用法\\" tabindex=\\"-1\\">二、BlockingQueue的用法 <a class=\\"header-anchor\\" href=\\"#二、blockingqueue的用法\\" aria-label=\\"Permalink to &quot;二、BlockingQueue的用法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>阻塞队列主要用在生产者/消费者的场景，下面这幅图展示了一个线程生产、一个线程消费的场景：</p>\\n<p><img src=\\"http://img.blog.csdn.net/20150929153140497\\" alt=\\"\\"></p>\\n<p>负责生产的线程不断的制造新对象并插入到阻塞队列中，直到达到这个队列的上限值。队列达到上限值之后生产线程将会被阻塞，直到消费的线程对这个队列进行消费。同理，负责消费的线程不断的从队列中消费对象，直到这个队列为空，当队列为空时，消费线程将会被阻塞，除非队列中有新的对象被插入。</p>\\n<h2 id=\\"三、blockingqueue接口中的方法\\" tabindex=\\"-1\\">三、BlockingQueue接口中的方法 <a class=\\"header-anchor\\" href=\\"#三、blockingqueue接口中的方法\\" aria-label=\\"Permalink to &quot;三、BlockingQueue接口中的方法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>阻塞队列一共有四套方法分别用来进行insert、remove和examine，当每套方法对应的操作不能马上执行时会有不同的反应，下面这个表格就分类列出了这些方法：\\n| -       | Throws Exception | Special Value | Blocks | Times Out                   |\\n|</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"没有条件创造条件Condition","url":"/post/java/Condition.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<p><a href=\\"https://blog.csdn.net/a1439775520/article/details/98471610\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.csdn.net/a1439775520/article/details/98471610</a></p>\\n<p>Condition 是为了调换 Object 中的 wait()\\n和notify().</p>\\n<p>|API|Object|Condition|\\n|:</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"性能优化之@Contended减少伪共享","url":"/post/java/Contended.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"倒计锁 CountDownLatch","url":"/post/java/CountDownLatch.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"循环锁屏障 CyclicBarrier","url":"/post/java/CyclicBarrier.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"面试再也不怕被HashMap欺负了","url":"/post/java/HashMap.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1596467333000.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<blockquote>\\n<p>HashMap是我们在日常开发中经常使用的一个结合类型,同时也是面试时候最好提问的集合类型,在这里进行整理\\n一起学习,进步。</p>\\n</blockquote>\\n<h2 id=\\"一、数据结构\\" tabindex=\\"-1\\">一、数据结构 <a class=\\"header-anchor\\" href=\\"#一、数据结构\\" aria-label=\\"Permalink to &quot;一、数据结构&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>先说两种数据结构, 不用怕, 如果要对付面试只要了解就行了。不用手写实现, 同时也因为已经有人帮我写好,所以开发中我们只要用就行。</p>\\n<h3 id=\\"_1-二叉树\\" tabindex=\\"-1\\">1. 二叉树 <a class=\\"header-anchor\\" href=\\"#_1-二叉树\\" aria-label=\\"Permalink to &quot;1. 二叉树&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><a href=\\"https://www.cs.usfca.edu/~galles/visualization/BST.html\\" target=\\"_blank\\" rel=\\"noreferrer\\">动画展示二叉树</a></p>\\n<p>本来是一个相对平衡的二叉树(当前数据 &gt; 根节点 ？ 从右边插入 : 从左边插入)。\\n<img src=\\"https://img.springlearn.cn/blog/learn_1596522740000.png\\" alt=\\"\\">\\n但是由于在使用的过程中的删除,慢慢的变成了一个瘸腿。此时树的高度越高,数据越多,导致查询叶子\\n的耗时越长。\\n<img src=\\"https://img.springlearn.cn/blog/learn_1596522608000.png\\" alt=\\"\\"></p>\\n<p>于是乎人们在这个数据结构的基础上,研究出新的结构,就是下面的红黑树。</p>\\n<h3 id=\\"_2-红黑树\\" tabindex=\\"-1\\">2. 红黑树 <a class=\\"header-anchor\\" href=\\"#_2-红黑树\\" aria-label=\\"Permalink to &quot;2. 红黑树&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><a href=\\"https://www.cs.usfca.edu/~galles/visualization/RedBlack.html\\" target=\\"_blank\\" rel=\\"noreferrer\\">动画展示红黑树</a></p>\\n<p>依次插入7 5 3 2 4 6 8 9 12 11 17 13 14 16</p>\\n<p>很明显我们可以看出红黑树比二叉树相对比较平衡。\\n<img src=\\"https://img.springlearn.cn/blog/learn_1596523217000.png\\" alt=\\"\\"></p>\\n<p>在对比一下二叉树</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596523318000.png\\" alt=\\"\\"></p>\\n<p>好了关于数据结构的知识就说这么多,可以通过图就能知道这两种数据结构情况了。因为数据结构不是我们本篇研究的点。\\n所以就提这么多。</p>\\n<h2 id=\\"二、源码分析\\" tabindex=\\"-1\\">二、源码分析 <a class=\\"header-anchor\\" href=\\"#二、源码分析\\" aria-label=\\"Permalink to &quot;二、源码分析&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>HashMap 实现了 Map 接口,JDK1.7由 数组 + 链表实现， 1.8后由 数组 + 链表 + 红黑树实现</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596527068000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_1-put的源码分析\\" tabindex=\\"-1\\">1. put的源码分析 <a class=\\"header-anchor\\" href=\\"#_1-put的源码分析\\" aria-label=\\"Permalink to &quot;1. put的源码分析&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>HashMap中声明的常量信息,注意看。下面源码中会提到。</p>\\n<p>|变量|含义|\\n|</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Java管理扩展","url":"/post/java/JMX.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1590919227000.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<p><strong>JMX（Java Management Extensions，即Java管理扩展）是一个为应用程序、设备、系统等植入管理功能的框架。JMX可以跨越一系列异构操作系统平台、系统体系结构和网络传输协议，灵活的开发无缝集成的系统、网络和服务管理应用。</strong></p>\\n<p>前面是对JMX的介绍，那么JMX在我们日常的开发过程中，有什么实际的意义呢? 相信很多做Java开发的同学都使用过JDK自带的 jconsole 或者 jvisualvm 监控过JVM的运行情况，但不知道有没有留意过它们会有一个MBean的功能/标签，通过MBean可以看到在JVM中运行的组件的一些属性和操作。下面小编就通过一个SpringBoot应用来一探究竟。并教会你如何自定义扩展。</p>\\n<h2 id=\\"一、实际意义\\" tabindex=\\"-1\\">一、实际意义 <a class=\\"header-anchor\\" href=\\"#一、实际意义\\" aria-label=\\"Permalink to &quot;一、实际意义&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-启动一个springboot应用\\" tabindex=\\"-1\\">1. 启动一个SpringBoot应用 <a class=\\"header-anchor\\" href=\\"#_1-启动一个springboot应用\\" aria-label=\\"Permalink to &quot;1. 启动一个SpringBoot应用&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>下面我们以SpringBoot应用为例子，启动一个SpringBoot项目。端口是 <code>8080</code></p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1590921574000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_2-命令行打开jconsole\\" tabindex=\\"-1\\">2. 命令行打开Jconsole <a class=\\"header-anchor\\" href=\\"#_2-命令行打开jconsole\\" aria-label=\\"Permalink to &quot;2. 命令行打开Jconsole&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1590921682000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_3-连接前面的应用\\" tabindex=\\"-1\\">3. 连接前面的应用 <a class=\\"header-anchor\\" href=\\"#_3-连接前面的应用\\" aria-label=\\"Permalink to &quot;3. 连接前面的应用&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtkkzi1bj30p00ku761.jpg\\" alt=\\"image-20200531184151871\\"></p>\\n<p>选中MBean标签,然后可以看到一个SpringApplication的类。shutdown是服务下线。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1590921783000.png\\" alt=\\"\\"></p>\\n<p>当我们点击了shutdown方法后,应用就会自动的关闭了。导致Jconsole连接丢失\\n<img src=\\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtpwfbbqj30oy0i2gof.jpg\\" alt=\\"image-20200531184702204\\"></p>\\n<p>getProperty方法是获取应用中的配置信息。如图我们获取redis的相关信息。可以看到返回值是Spring应用中我们定义的值\\n6379</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1590921918000.png\\" alt=\\"\\"></p>\\n<p><img src=\\"https://tva1.sinaimg.cn/large/007S8ZIlly1gfbtoo8x1yj30lc07imy6.jpg\\" alt=\\"image-20200531184553346\\"></p>\\n<p>那么其实这个能力就是利用JMX提供的接口来实现的。下面我们通过分析SpringBoot中的源码来看他是如何实现的。</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Java异常体系","url":"/post/java/Java异常体系.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"读写锁 ReadWriteLock","url":"/post/java/ReadWriteLock.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"重入锁 ReentrantLock","url":"/post/java/ReentrantLock.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"SPI服务发现机制","url":"/post/java/SPI.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"信号量 Semaphore","url":"/post/java/Semaphore.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"dubbo 客户端调用流程","url":"/post/java/dubbo/Dubbo源码解析之客户端Consumer.html","excerpt":"","category":"Dubbo","date":{"time":null,"string":"Invalid Date"}},{"title":"dubbo 服务端注册流程","url":"/post/java/dubbo/Dubbo源码解析之服务端Provider.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/aa3147663675b9b5692915030cf264b9.png\\" alt=\\"\\"></p>\\n<h2 id=\\"一、启动一个服务端provider\\" tabindex=\\"-1\\">一、启动一个服务端Provider <a class=\\"header-anchor\\" href=\\"#一、启动一个服务端provider\\" aria-label=\\"Permalink to &quot;一、启动一个服务端Provider&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-定义一个接口和实现\\" tabindex=\\"-1\\">1. 定义一个接口和实现 <a class=\\"header-anchor\\" href=\\"#_1-定义一个接口和实现\\" aria-label=\\"Permalink to &quot;1. 定义一个接口和实现&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> say</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">message</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserServiceImpl</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> say</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">message</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"say:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> message);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><h3 id=\\"_2-本地服务注册到zk\\" tabindex=\\"-1\\">2. 本地服务注册到zk <a class=\\"header-anchor\\" href=\\"#_2-本地服务注册到zk\\" aria-label=\\"Permalink to &quot;2. 本地服务注册到zk&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Tester</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> providerTest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //1. 服务方要把UserService方法提供给外面调用</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        UserService userService </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserServiceImpl</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //2. 应用配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ApplicationConfig app </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ApplicationConfig</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        app.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"providerTest\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //3. 指定一个注册中心</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        RegistryConfig registry </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RegistryConfig</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        registry.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setAddress</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"zookeeper://127.0.0.1:2181\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //4. 指定协议类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ProtocolConfig protocol </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ProtocolConfig</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        protocol.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"dubbo\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        protocol.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setPort</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">8012</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        protocol.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setThreads</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">200</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 服务提供者暴露服务配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ServiceConfig&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">UserService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> service </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ServiceConfig&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">UserService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>(); </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 此实例很重，封装了与注册中心的连接，请自行缓存，否则可能造成内存和连接泄漏</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setApplication</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(app);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setRegistry</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(registry); </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 多个注册中心可以用setRegistries()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setProtocol</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(protocol); </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 多个协议可以用setProtocols()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setInterface</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(UserService.class);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setRef</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userService);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setVersion</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"1.0.0\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 暴露及注册服务</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //dubbo://192.168.1.9:8012/code.UserService?anyhost=true&#x26;application=providerTest&#x26;dubbo=2.5.3&#x26;interface=code.UserService&#x26;methods=say&#x26;pid=46787&#x26;revision=1.0.0&#x26;side=provider&#x26;threads=200&#x26;timestamp=1597048727957&#x26;version=1.0.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        service.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">export</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br></div></div><h3 id=\\"_3-分析原理\\" tabindex=\\"-1\\">3. 分析原理 <a class=\\"header-anchor\\" href=\\"#_3-分析原理\\" aria-label=\\"Permalink to &quot;3. 分析原理&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><strong>这里只是分析下大概原理,给各位童靴先带来带你感受,实际步骤后面分析源码时候再细说</strong></p>\\n<p>在进行分析之前我们思考一下,当我们不使用RPC框架和SpringCloud的时候,如果我们要调用其他第三方的服务时候,我们会怎么处理呢?</p>\\n<p>通过下面这中方式每次调用时候构建一个HTTP的请求。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Tester</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> sayRequest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">message</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        OkHttpClient client </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> OkHttpClient</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Request request </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Request.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">Builder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">url</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"http://第三方服务的接口地址?message\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">message)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">addHeader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Cache-Control\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"no-cache\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        client.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newCall</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(request).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">execute</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();    </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[]</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">        sayRequest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"你好\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br></div></div><p>使用后我们就可以像调用本地方法一样来调用远程接口了? 那么Dubbo是如何实现的呢? 其实就是在底层帮我们做了类似于http的通信\\n而通过api的方式屏蔽了底层。让我们直接将调用本地方法一样调用远程方法。</p>\\n<h4 id=\\"关键词一-通信协议\\" tabindex=\\"-1\\">关键词一:通信协议 <a class=\\"header-anchor\\" href=\\"#关键词一-通信协议\\" aria-label=\\"Permalink to &quot;关键词一:通信协议&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>dubbo默认不是基于HTTP,而是基于dubbo自定义的协议。因为jdk自带的socket api不太友好,所以dubbo底层是使用netty类做通信的\\n说白了这个协议和http类似都是基于tcp协议从而进行封装,不同点就是数据格式不同。\\n如下我们自定义了一个协议来读取tcp连接中数据。</p>\\n<p>下面代码不是重点,重点知道协议就是,约定从tcp连接中读取数据的方式和方法。比如约定了读的第一个字节是协议类型,第二个是序列化类型,第三个是报文数据长度,第四个就是具体的报文数据。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 主要依据:</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 数据有</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 协议类型(1位) + 序列化类型(1位) + 报文大小(4位) + 数据报文组成(N位)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * *******************************************************************************</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div>","category":"Dubbo","date":{"time":null,"string":"Invalid Date"}},{"title":"dubbo适配Spring原理","url":"/post/java/dubbo/dubbo整合spring的两种实现原理.html","excerpt":"","category":"Dubbo","date":{"time":null,"string":"Invalid Date"}},{"title":"JVM钩子hooks函数","url":"/post/java/hooks函数.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Java","url":"/post/java/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Elastic-Job源码解析(一)之与Spring完美整合","url":"/post/java/jobs/Elastic-Job源码解析(一)之与Spring完美整合.html","excerpt":"","category":"Elastic-Job","date":{"time":null,"string":"Invalid Date"}},{"title":"Elastic-Job源码解析(三)之分片定时任务执行","url":"/post/java/jobs/Elastic-Job源码解析(三)之分片定时任务执行.html","excerpt":"","category":"Elastic-Job","date":{"time":null,"string":"Invalid Date"}},{"title":"第13篇:Mybatis权限插件设计","url":"/post/java/mybatis/AuthPlugin.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第11篇:Mybatis查询限制插件设计","url":"/post/java/mybatis/LimitPlugin.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第04篇:Mybatis代理对象生成","url":"/post/java/mybatis/Mapper代理对象创建.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第14篇:Mybatis中反射工具","url":"/post/java/mybatis/MetaObject.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第15篇:Mybatis中打印Sql信息","url":"/post/java/mybatis/Mybatissql日志打印.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第06篇:Mybatis缓存设计","url":"/post/java/mybatis/Mybatis一级二级缓存设计.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第05篇:Mybatis的SQL执行流程分析","url":"/post/java/mybatis/Mybatis执行流程分析.html","excerpt":"<PageBanner/><h2 id=\\"一、前言\\" tabindex=\\"-1\\">一、前言 <a class=\\"header-anchor\\" href=\\"#一、前言\\" aria-label=\\"Permalink to &quot;一、前言&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>前面我们知道了Mybatis是如何进行代理的, 但是最终 <code>PlainMethodInvoker</code> 中是如何将参数转组装成Sql,并执行处理Sql返回值的地方还都没看到。本篇我们就带着如下三个问题开始我们的探索吧。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649427915000.png\\" alt=\\"\\"></p>\\n<p>本篇内容因为涉及跟jdbc的知识,如果对这部分内容有点遗忘,请先<a href=\\"./环境搭建.html\\">JDBC知识复习</a>，另本篇内容知识点较多,目录较复杂,建议根据文字结合\\n代码在实践的过程中一起学习。最好也可以自己debug一下。会收获更大。做好准备现在发车。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649428750000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"二、流程分析\\" tabindex=\\"-1\\">二、流程分析 <a class=\\"header-anchor\\" href=\\"#二、流程分析\\" aria-label=\\"Permalink to &quot;二、流程分析&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_2-1-sql是如何组装参数的\\" tabindex=\\"-1\\">2.1 Sql是如何组装参数的? <a class=\\"header-anchor\\" href=\\"#_2-1-sql是如何组装参数的\\" aria-label=\\"Permalink to &quot;2.1 Sql是如何组装参数的?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649428892000.png\\" alt=\\"\\"></p>\\n<p>在组装参数之前我们先来提一个小问题,sql的类型是如何判断的。sql类型有增删该查。\\n除了查询会有结果集外，其他三种都是返回更新行数。他们对应的处理逻辑也是不一样的。\\n我们要先弄清这个问题。</p>\\n<h3 id=\\"_2-1-1-sql类型如何判断\\" tabindex=\\"-1\\">2.1.1 sql类型如何判断? <a class=\\"header-anchor\\" href=\\"#_2-1-1-sql类型如何判断\\" aria-label=\\"Permalink to &quot;2.1.1 sql类型如何判断?&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>我们知道sql的类型是可以通过关键字来判断的,如select/update/delete/insert。那么在Mybatis中哪里能输入sql呢?\\n一种有2种方式。</p>\\n<ol>\\n<li>在Mapper.xml中直接编写sql，如下示例。</li>\\n</ol>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;?</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">xml</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"1.0\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> encoding</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"UTF-8\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">?></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;!</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DOCTYPE</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> mapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> PUBLIC \\"-//mybatis.org//DTD Mapper 3.0//EN\\" \\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\\"></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">mapper</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> namespace</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"orm.example.dal.mapper.TUserMapper\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">delete</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"deleteByPrimaryKey\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> parameterType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"java.lang.String\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        delete from T_USER</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        where token_id = #{tokenId,jdbcType=CHAR}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">delete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">insert</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"insert\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> parameterType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"orm.example.dal.model.TUser\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        insert into T_USER (token_id, uid, name)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        values (#{tokenId,jdbcType=CHAR}, #{uid,jdbcType=INTEGER}, #{name,jdbcType=CHAR})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">insert</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">update</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"updateByPrimaryKey\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> parameterType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"orm.example.dal.model.TUser\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        update T_USER</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        set uid = #{uid,jdbcType=INTEGER},</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        name = #{name,jdbcType=CHAR}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        where token_id = #{tokenId,jdbcType=CHAR}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">update</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">select</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"selectAll\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> resultMap</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"BaseResultMap\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        select token_id, uid, name</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        from T_USER</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">select</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">mapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br></div></div><ol start=\\"2\\">\\n<li>在Mapper类中使用注解编写sql</li>\\n</ol>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> TUserMapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Select</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where id = #{id}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    TUser </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">selectById</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Long </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><p>这些sql信息都保存在 MappedStatement。在PlainMethodInvoker通过SqlCommand进行调用。</p>\\n<ul>\\n<li>line(9) 最终通过type = ms.getSqlCommandType() 获取sql的类型</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">SqlCommand sqlCommand </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlCommand</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(config, mapperInterface, method);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 构造参数中找MappedStatement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlCommand</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Configuration configuration, Class</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;?></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mapperInterface, Method method) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String methodName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> declaringClass </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getDeclaringClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      MappedStatement ms </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> resolveMappedStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapperInterface, methodName, declaringClass,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          configuration);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      type </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ms.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlCommandType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}          </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 寻找方法是接口全路径名.方法名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> MappedStatement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">resolveMappedStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String statementId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mapperInterface.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\".\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodName;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">hasStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(statementId)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br></div></div><p>那么MappedStatement中的SqlCommandType是如何获取的呢?</p>\\n<h3 id=\\"_2-1-1-1-xml文件方式\\" tabindex=\\"-1\\">2.1.1.1 xml文件方式 <a class=\\"header-anchor\\" href=\\"#_2-1-1-1-xml文件方式\\" aria-label=\\"Permalink to &quot;2.1.1.1 xml文件方式&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>解析xml标签来实现</p>\\n<p>XMLMapperBuilder#parseStatementNode</p>\\n<ul>\\n<li>line(11) 通过标签来映射成指定的类型SqlCommandType</li>\\n</ul>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">public class XMLStatementBuilder extends BaseBuilder {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> public void parseStatementNode() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String id = context.getStringAttribute(\\"id\\");</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String databaseId = context.getStringAttribute(\\"databaseId\\");</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    if (!databaseIdMatchesCurrent(id, databaseId, this.requiredDatabaseId)) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      return;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String nodeName = context.getNode().getNodeName();</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlCommandType sqlCommandType = SqlCommandType.valueOf(nodeName.toUpperCase(Locale.ENGLISH));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">public enum SqlCommandType {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  UNKNOWN, INSERT, UPDATE, DELETE, SELECT, FLUSH</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br></div></div><h3 id=\\"_2-1-1-2-注解方式\\" tabindex=\\"-1\\">2.1.1.2 注解方式 <a class=\\"header-anchor\\" href=\\"#_2-1-1-2-注解方式\\" aria-label=\\"Permalink to &quot;2.1.1.2 注解方式&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>一定是解析注解方法 AnnotationWrapper。将不同的注解解析成SqlCommandType。如下伪代码。通过解析方法上的注解,判断注解类型,来确定sql的类型。\\nMapperAnnotationBuilder#getAnnotationWrapper(method, true, statementAnnotationTypes)</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AnnotationWrapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Annotation annotation;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String databaseId;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType sqlCommandType;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    AnnotationWrapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Annotation </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">annotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> annotation;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Select) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((Select) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.SELECT;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Update) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((Update) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.UPDATE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Insert) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((Insert) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.INSERT;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Delete) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((Delete) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.DELETE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SelectProvider) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((SelectProvider) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.SELECT;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> UpdateProvider) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((UpdateProvider) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.UPDATE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> InsertProvider) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((InsertProvider) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.INSERT;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> DeleteProvider) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((DeleteProvider) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.DELETE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        sqlCommandType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlCommandType.UNKNOWN;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Options) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((Options) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (annotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SelectKey) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ((SelectKey) annotation).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">databaseId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          databaseId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Annotation </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getAnnotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> annotation;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlCommandType </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlCommandType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlCommandType;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br></div></div><p>到这里我们知道了sql类型是如何区分出来的，既然能区分出来，就知道如何去执行sql了。\\n是不是很简单? 当然看的话很简单，但是如何让你自己来找，你能找到吗? 所以建议在阅读的时候\\n要自己去源码中找找。</p>\\n<h3 id=\\"_2-1-2-sql参数如何组装\\" tabindex=\\"-1\\">2.1.2 sql参数如何组装? <a class=\\"header-anchor\\" href=\\"#_2-1-2-sql参数如何组装\\" aria-label=\\"Permalink to &quot;2.1.2 sql参数如何组装?&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>在mybatis中有两种处理sql参数的地方,第一种是<code>#{}</code> 占位符，第二种是<code>\${}</code> 变量符。这两种都是处理参数的方式。那说到这里,不得不提的就是sql注入的黑客技术。\\nsql注入就是就是利用了变量符。将我们原来的sql进行恶意的修改。举一个例子。下面根据用户id和用户密码查询用户信息。</p>\\n<p><code>select * from t_user as u where u.pass = \${user_pass} and u.id = \${user_id}</code></p>\\n<p>那么如何在不知道密码只有用户id的情况下查询到用户信息呢? 我们只需要将sql转换成下面这样即可。</p>\\n<p><code>select * from t_user as u where u.pass = '' or 1 = 1 and u.id = \${user_id}</code></p>\\n<p>那mybatis允许我们这样做吗? 允许，如果我们使用的是 <code>\${}</code> 变量符,那么mybatis只是将参数和变量符进行替换。你输入的参数可能也会被当成sql去执行了。如下代码示例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> T4UserMapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 获取用户信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> uid</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     用户id</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> tokenId</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> token</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@return</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> TUser</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Select</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where token_id = \${token_id} and uid = \${uid}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    TUser </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryUserById</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Param</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"uid\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) Long </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">uid</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Param</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"token_id\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">tokenId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Test</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> sql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 读取配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        InputStream mapperInputStream </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Thread.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">currentThread</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getContextClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResourceAsStream</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"example05/mybatisConfig.xml\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成SqlSession工厂,SqlSession从名字上看就是,跟数据库交互的会话信息,负责将sql提交到数据库进行执行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSessionFactory sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionFactoryBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapperInputStream, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"development\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 获取Mybatis配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Configuration configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSession sqlSession </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">openSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // debug</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        T4UserMapper mapper </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(T4UserMapper.class, sqlSession);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 模拟sql注入</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryUserById</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"0 or 1 = 1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}    </span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Setting autocommit to </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> on JDBC </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Connection</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> [com.mysql.cj.jdbc.ConnectionImpl@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">62ddbd7e</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  Preparing</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> select </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> from t_user where token_id </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> or </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> and uid </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 37</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Parameters</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;==</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Columns</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> uid, name, token_id</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;==</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Row</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 37</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, 无天, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">60</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;==</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      Total</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">TUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(tokenId</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, uid</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, name</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">无天)</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br></div></div><p>要想避免这样的问题,我们只需要将<code>\${}</code> 变量符,都替换成<code>#{}</code> 占位符就好了。那么Mybatis只会将你的参数当做是参数处理，不会当做是sql执行。如下代码示例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> T4UserMapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 获取用户信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> uid</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     用户id</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> tokenId</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> token</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@return</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> TUser</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Select</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where token_id = #{token_id} and uid = #{uid}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    TUser </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryUserById</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Param</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"uid\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) Long </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">uid</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Param</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"token_id\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">tokenId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Test</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> sql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 读取配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        InputStream mapperInputStream </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Thread.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">currentThread</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getContextClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResourceAsStream</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"example05/mybatisConfig.xml\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成SqlSession工厂,SqlSession从名字上看就是,跟数据库交互的会话信息,负责将sql提交到数据库进行执行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSessionFactory sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionFactoryBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapperInputStream, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"development\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 获取Mybatis配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Configuration configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSession sqlSession </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">openSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // debug</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        T4UserMapper mapper </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMapper</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(T4UserMapper.class, sqlSession);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 模拟sql注入 => null</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryUserById</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"0 or 1 = 1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}  </span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Created connection </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">798981583.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Setting autocommit to </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> on JDBC </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Connection</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> [com.mysql.cj.jdbc.ConnectionImpl@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">2f9f7dcf</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  Preparing</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> select </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> from t_user where token_id </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> and uid </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ?</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Parameters</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> or </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String), </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Long)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;==</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      Total</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">null</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br></div></div><p>以上演示代码可以在 <code>com.test.example05.SqlParseTest</code>中找到。那么无论是变量符还是占位符，其实都是sql组装,下面我们正式开始学习。</p>\\n<p>==同样我们先提两个问题==</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649510242000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_2-1-2-1-方法参数如何来解析\\" tabindex=\\"-1\\">2.1.2.1 方法参数如何来解析 <a class=\\"header-anchor\\" href=\\"#_2-1-2-1-方法参数如何来解析\\" aria-label=\\"Permalink to &quot;2.1.2.1 方法参数如何来解析&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649510559000.png\\" alt=\\"\\"></p>\\n<p>关键代码就在MapperMethod的execute的入参 Object [] args;\\n关于参数的处理都在这里处理了。MethodSignature#convertArgsToSqlCommandParam。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperMethod</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">execute</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSession </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">sqlSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Object result;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    switch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (command.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      case</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> INSERT</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Object param </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">convertArgsToSqlCommandParam</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(args);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        result </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> rowCountResult</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSession.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">insert</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(command.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), param));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        break</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      case</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> UPDATE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Object param </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">convertArgsToSqlCommandParam</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(args);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        result </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> rowCountResult</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSession.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">update</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(command.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), param));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        break</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      case</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> DELETE</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Object param </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">convertArgsToSqlCommandParam</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(args);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        result </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> rowCountResult</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSession.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">delete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(command.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), param));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        break</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ....  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> result;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br></div></div><div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">convertArgsToSqlCommandParam</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] args) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> paramNameResolver.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getNamedParams</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(args);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><p>参数会被解析成什么样呢? 关键代码就在这里。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getNamedParams</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] args) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    final</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> paramCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> names.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 没有参数直接返回</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (args </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> paramCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">hasParamAnnotation </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x26;&#x26;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> paramCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 没有注解只有一个参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      Object value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> args[names.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">firstKey</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()];</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> wrapToMapIfCollection</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(value, useActualParamName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> names.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Map&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> param </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ParamMap&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // names key = 参数下标 value = @Param里面的值</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      for</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (Map.Entry&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> entry </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> names.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">entrySet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // key = @Param里面的值,value = args[index] 真实数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        param.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(entry.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getValue</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), args[entry.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKey</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成param1,参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String genericParamName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> GENERIC_NAME_PREFIX </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // ensure not to overwrite parameter named with @Param</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">names.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">containsValue</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(genericParamName)) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          param.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(genericParamName, args[entry.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKey</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        i</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">++</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> param;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br></div></div><p>我们直接说结论,如果方法签名中使用了@Param注解结论,则占位符中的参数名就是注解的值。如果没有注解在就是arg+参数的位置.</p>\\n<p><code>com.test.example04.MethodSignatureTest</code></p>\\n<table tokenId=\\"1,\\" name=\\"孙悟空,\\" param1=\\"1,\\" param2=\\"孙悟空\\">\\n<thead>\\n<tr>\\n<th style=\\"text-align:left\\">参数类型</th>\\n<th style=\\"text-align:left\\">方法签名</th>\\n<th style=\\"text-align:left\\">参数值</th>\\n<th style=\\"text-align:left\\">结果</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td style=\\"text-align:left\\">解析单参数不带@Param</td>\\n<td style=\\"text-align:left\\">TUser queryUserByName(String name)</td>\\n<td style=\\"text-align:left\\">methodSignature.convertArgsToSqlCommandParam(new Object[]{&quot;孙悟空&quot;})</td>\\n<td style=\\"text-align:left\\">孙悟空</td>\\n</tr>\\n<tr userId=\\"1,\\" param1=\\"1\\">\\n<td style=\\"text-align:left\\">解析单参数带@Param</td>\\n<td style=\\"text-align:left\\">TUser queryUserById(@Param(&quot;userId&quot;) Long id)</td>\\n<td style=\\"text-align:left\\">methodSignature.convertArgsToSqlCommandParam(new Object[]{1L})</td>\\n<td style=\\"text-align:left\\"></td>\\n</tr>\\n<tr arg0=\\"1,\\" arg1=\\"孙悟空,\\" param1=\\"1,\\" param2=\\"孙悟空\\">\\n<td style=\\"text-align:left\\">解析多参数不带@Param</td>\\n<td style=\\"text-align:left\\">TUser queryUserByTokenId(Long tokenId,String name)</td>\\n<td style=\\"text-align:left\\">methodSignature.convertArgsToSqlCommandParam(new Object[]{1L, &quot;孙悟空&quot;})</td>\\n<td style=\\"text-align:left\\"></td>\\n</tr>\\n<tr>\\n<td style=\\"text-align:left\\">解析多参数带@Param</td>\\n<td style=\\"text-align:left\\">TUser queryUserByTokenId(@Param(&quot;tokenId&quot;) Long tokenId, @Param(&quot;name&quot;) String name)</td>\\n<td style=\\"text-align:left\\">methodSignature.convertArgsToSqlCommandParam(new Object[]{1L, &quot;孙悟空&quot;})</td>\\n<td style=\\"text-align:left\\"></td>\\n</tr>\\n</tbody>\\n</table>\\n<p>如果项目编译中设置了编译后保存参数名，那么可以获取代码中编写的参数名。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649512062000.png\\" alt=\\"\\"></p>\\n<p>好了到这里我们知道方法的参数最终都会被Mybatis重新解析,解析后的结果可以看以上的表格。主要就是为拼装参数提前准备数据。下面我们看sql信息最终是如何最终组装的吧。</p>\\n<h3 id=\\"_2-1-2-2-方法参数组装\\" tabindex=\\"-1\\">2.1.2.2 方法参数组装 <a class=\\"header-anchor\\" href=\\"#_2-1-2-2-方法参数组装\\" aria-label=\\"Permalink to &quot;2.1.2.2 方法参数组装&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649512620000.png\\" alt=\\"\\"></p>\\n<p>这里我们思考一下，变量符应该是动态sql,在调用jdbc时候应该是下面的例子。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> PreparedStatement preparedStatement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where token_id = 0 or 1 = 1 and uid = 37\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>那么我们就寻找哪里有这样的代码。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649514573000.png\\" alt=\\"\\"></p>\\n<p>PreparedStatementHandler#instantiateStatement.</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  protected</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Statement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">instantiateStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Connection connection) throws SQLException {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String sql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> boundSql.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKeyGenerator</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Jdbc3KeyGenerator) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] keyColumnNames </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKeyColumns</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (keyColumnNames </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sql, PreparedStatement.RETURN_GENERATED_KEYS);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sql, keyColumnNames);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResultSetType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ResultSetType.DEFAULT) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sql);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sql, mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResultSetType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getValue</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), ResultSet.CONCUR_READ_ONLY);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br></div></div><p>关键的代码就在这里静态sql,直接从MappedStatement#getBoundSql(Object parameterObject)#getSql()获取组装后的代码。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649514858000.png\\" alt=\\"\\"></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> &#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">E</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> List</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">E</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> doQuery</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql) throws SQLException {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Statement stmt </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    try</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      Configuration configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ms.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      StatementHandler handler </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newStatementHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(wrapper, ms, parameter, rowBounds, resultHandler, boundSql);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      stmt </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> prepareStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(handler, ms.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getStatementLog</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> handler.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">query</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(stmt, resultHandler);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">finally</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">      closeStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(stmt);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 这里parameterObject就是前面对方法参数的解析返回值。通过mappedStatement.getBoundSql(parameterObject)组装静态sql</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  protected</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> PreparedStatementHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Executor executor, MappedStatement mappedStatement, Object parameterObject, RowBounds rowBounds, ResultHandler resultHandler, BoundSql boundSql) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.executor </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> executor;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.mappedStatement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mappedStatement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.rowBounds </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> rowBounds;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.typeHandlerRegistry </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTypeHandlerRegistry</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.objectFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getObjectFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (boundSql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) { </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// issue #435, get the key before calculating the statement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">      generateKeys</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameterObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      boundSql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBoundSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameterObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.boundSql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> boundSql;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.parameterHandler </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newParameterHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mappedStatement, parameterObject, boundSql);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.resultSetHandler </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newResultSetHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executor, mappedStatement, rowBounds, parameterHandler, resultHandler, boundSql);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br></div></div><p>好了，到这里我们就知道静态sql是哪里组装的了。关键点就在BoundSql这个类是如何构建的。我们以注解方式举例。</p>\\n<p>在构建MappedStatement的时候,MapperBuilderAssistant#parse会解析Mapper类所有的方法,获取方法上的注解,生成Sql的信息。\\n判断sql类型,如果是\${}变量符,Sql资源就是DynamicSqlSource动态Sql。如果是#{}占位符就是RawSqlSource会将占位符替换成<code>?</code>,同时生成ParameterMapping信息\\n用于方法执行时候使用PreparedStatement去set参数信息。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649520231000.png\\" alt=\\"\\"></p>\\n<p>下面我们以示例中的代码来看下BoundSql中究竟有什么信息。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649520894000.png\\" alt=\\"\\"></p>\\n<p>那么对于第一种DynamicSqlSource动态sql,参数信息是如何组装的呢?</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DynamicSqlSource</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Configuration configuration;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlNode rootSqlNode;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DynamicSqlSource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Configuration </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">configuration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, SqlNode </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">rootSqlNode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.rootSqlNode </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> rootSqlNode;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BoundSql </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBoundSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parameterObject</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    DynamicContext context </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DynamicContext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration, parameterObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 处理sql中如果有&#x3C;if>&#x3C;where>&#x3C;Trim>等自带标签的情况,同时处理将变量符提供换成真正的参数。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    rootSqlNode.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">apply</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(context);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当执行完上面的流程变量符就被替换成真正的参数了。下面在看是否同时也包含了#{}占位符,如果包含就替换成?</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 在调换成?的同时新增一个ParameterMapping对象</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSourceBuilder sqlSourceParser </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSourceBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> parameterType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object.class </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterObject.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSource sqlSource </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSourceParser.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">parse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(context.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), parameterType, context.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBindings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    BoundSql boundSql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSource.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBoundSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameterObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    context.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBindings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">forEach</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(boundSql</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">::</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">setAdditionalParameter);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> boundSql;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br></div></div><p>核心的方法就是变量符替换,下面直接将核心的代码展示出来。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> dynamicSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() throws Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 读取配置信息(为什么路径前不用加/,因为是相对路径。maven编译后的资源文件和class文件都是在一个包下,所以不用加/就是当前包目录)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        InputStream mapperInputStream </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Thread.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">currentThread</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getContextClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResourceAsStream</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"example05/mybatisConfig.xml\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成SqlSession工厂,SqlSession从名字上看就是,跟数据库交互的会话信息,负责将sql提交到数据库进行执行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSessionFactory sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionFactoryBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapperInputStream, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"development\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 获取Mybatis配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Configuration configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成动态Sql</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        TextSqlNode textSqlNode </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> TextSqlNode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where token_id = \${token_id} and uid = \${uid}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        DynamicSqlSource dynamicSqlSource </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DynamicSqlSource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration, textSqlNode);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 装参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        MapperMethod.ParamMap&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> paramMap </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> MapperMethod.ParamMap&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        paramMap.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"uid\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        paramMap.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"token_id\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"0 or 1 = 1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        BoundSql boundSql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> dynamicSqlSource.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBoundSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(paramMap);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(boundSql.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> dynamicSql2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 读取配置信息(为什么路径前不用加/,因为是相对路径。maven编译后的资源文件和class文件都是在一个包下,所以不用加/就是当前包目录)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        InputStream mapperInputStream </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Thread.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">currentThread</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getContextClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResourceAsStream</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"example05/mybatisConfig.xml\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成SqlSession工厂,SqlSession从名字上看就是,跟数据库交互的会话信息,负责将sql提交到数据库进行执行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        SqlSessionFactory sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionFactoryBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mapperInputStream, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"development\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 获取Mybatis配置信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Configuration configuration </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConfiguration</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 装参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        MapperMethod.ParamMap&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> paramMap </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> MapperMethod.ParamMap&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        paramMap.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"uid\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">37L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        paramMap.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"token_id\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"0 or 1 = 1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        DynamicContext context </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DynamicContext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration, paramMap);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 生成动态Sql</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        TextSqlNode textSqlNode </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> TextSqlNode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select * from t_user where token_id = \${token_id} and uid = \${uid}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        textSqlNode.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">apply</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(context);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(context.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br></div></div><p>好了，我们知道动态sql其实就是\${}，变量符号替换。\\n下面我们看静态sql是如何处理占位符的吧。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649523284000.png\\" alt=\\"\\"></p>\\n<p>前面我们说了静态sql,在初始化时候就会将占位符替换成? 同时生成一个ParameterMapping对象,然后在执行sql时候通过PreparedStatement进行set参数信息。\\n那么我们先看占位符如何替换成?的吧。实现逻辑其实就在RawSqlSource的构造方法中。</p>\\n<ul>\\n<li>line(1-5) 在Mybatis初始化时候,会生成RawSqlSource。在构造中去调换占位符</li>\\n<li>line(8-19) 占位符替换的实现方式,最终生成StaticSqlSource</li>\\n<li>line(22-28) 占位符返回?的同时,生成一个ParameterMapping对象</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RawSqlSource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Configuration configuration, String sql, Class</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;?></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterType) {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSourceBuilder sqlSourceParser </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSourceBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> clazz </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object.class </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterType;</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    sqlSource </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSourceParser.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">parse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sql, clazz, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> HashMap&#x3C;>());</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// sql = select * from t_user where token_id = #{token_id} and uid = #{uid}</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSource </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">parse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String originalSql, Class</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;?></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterType, Map</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">String, Object</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> additionalParameters) {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ParameterMappingTokenHandler handler </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ParameterMappingTokenHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration, parameterType, additionalParameters);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 对</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    GenericTokenParser parser </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> GenericTokenParser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"#{\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, handler);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String sql;</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isShrinkWhitespacesInSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      sql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parser.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">parse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">removeExtraWhitespaces</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(originalSql));</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      sql </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parser.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">parse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(originalSql);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> StaticSqlSource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(configuration, sql, handler.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getParameterMappings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> // 会将占位符号#{token_id}替换成 ？同时生成一个ParameterMapping对象。</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ParameterMappingTokenHandler</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BaseBuilder</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> TokenHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // content = token_id</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">handleToken</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">content</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      parameterMappings.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">add</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">buildParameterMapping</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(content));</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"?\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br></div></div><p>到这里占位符的解析已经很清楚了。BoundSql中的数据我们也知道了，我们直接看参数组装的逻辑吧。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1649524815000.png\\" alt=\\"\\"></p>\\n<ol>\\n<li>从boundSql中获取占位符信息。</li>\\n<li>根据占位符获取参数信息</li>\\n<li>根据参数类型确定使用那个TypeHandler，如果都没有指定就用UnknownTypeHandler</li>\\n<li>UnknownTypeHandler会根据参数的类型，从默认配置中找到要用的类型,如果是Long类型就是PreparedStatement#setLong，如果是String类型就是PreparedStatement#setString</li>\\n</ol>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> DefaultParameterHandler</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ParameterHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setParameters</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(PreparedStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">ps</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ErrorContext.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">instance</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">activity</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"setting parameters\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(mappedStatement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getParameterMap</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">ParameterMapping</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> parameterMappings </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> boundSql.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getParameterMappings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (parameterMappings </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      for</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">; i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMappings.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(); i</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">++</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ParameterMapping parameterMapping </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMappings.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (parameterMapping.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ParameterMode.OUT) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          Object value;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          String propertyName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMapping.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getProperty</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">          if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (boundSql.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">hasAdditionalParameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(propertyName)) { </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// issue #448 ask first for additional params</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> boundSql.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getAdditionalParameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(propertyName);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (parameterObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (typeHandlerRegistry.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">hasTypeHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameterObject.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterObject;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            MetaObject metaObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newMetaObject</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameterObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaObject.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getValue</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(propertyName);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          TypeHandler typeHandler </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMapping.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTypeHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          JdbcType jdbcType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMapping.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getJdbcType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">          if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (value </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> &#x26;&#x26;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> jdbcType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            jdbcType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> configuration.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getJdbcTypeForNull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">          try</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            typeHandler.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setParameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ps, i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, value, jdbcType);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">catch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (TypeException | SQLException </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">e</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            throw</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> TypeException</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Could not set parameters for mapping: \\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameterMapping </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\". Cause: \\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> e, e);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">          }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br></div></div><p>好了到这里我们就搞清楚Mybatis中的参数是如何组装的了。 以及Jdbc是如何执行sql的了。\\n这部分内容比较复杂，仅仅通过看是看不明白的，建议根据文中的代码自己走一边。加深理解。</p>\\n<p>下面我们看Mybatis是如何处理返回值的吧。</p>\\n<h2 id=\\"_2-2-sql结果集是如何转换方法返回值的\\" tabindex=\\"-1\\">2.2 Sql结果集是如何转换方法返回值的? <a class=\\"header-anchor\\" href=\\"#_2-2-sql结果集是如何转换方法返回值的\\" aria-label=\\"Permalink to &quot;2.2 Sql结果集是如何转换方法返回值的?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我们重新回到PreparedStatementHandler中跟数据库打交道的地方,当PreparedStatement#execute发送sql给数据库后,最终处理结果集的类是\\nResultHandler，下面我们就围绕这个类做分析。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> &#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">E</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> List</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">E</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> query</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Statement statement, ResultHandler resultHandler) throws SQLException {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    PreparedStatement ps </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (PreparedStatement) statement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ps.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">execute</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> resultSetHandler.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">handleResultSets</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ps);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><p>ResultSetHandler,我们看接口定义,处理结果集就在这里了。我们再来看实现。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ResultSetHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">handleResultSets</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Statement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">stmt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> Cursor&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">handleCursorResultSets</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Statement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">stmt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> handleOutputParameters</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(CallableStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">cs</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><p>默认的实现DefaultResultSetHandler。Mybatis实现较为复杂，我们一开始可能看不懂。我们先用原生的jdbc来自己实现一边。\\n然后脑子里有一个思路，然后在根据思路来看DefaultResultSetHandler的实现吧。</p>\\n<h3 id=\\"_2-2-1-jdbc提供的结果处理api\\" tabindex=\\"-1\\">2.2.1 JDBC提供的结果处理API <a class=\\"header-anchor\\" href=\\"#_2-2-1-jdbc提供的结果处理api\\" aria-label=\\"Permalink to &quot;2.2.1 JDBC提供的结果处理API&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>思路是statement执行完后会返回结果集ResultSet。\\n结果集包含了返回的数据及这些数据对应的字段信息。\\n然后拿到这些字段信息分别从结果集中获取数据。下面的代码如果明白了，我们就去看Mybatis中的源码</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> resultMetaData</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() throws Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        String dbUrl </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"jdbc:mysql://127.0.0.1:3306/test\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        String user </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"root\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        String pass </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"123456\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 1. 获取数据库连接</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Connection connection </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> DriverManager.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConnection</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(dbUrl, user, pass);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Statement statement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> connection.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">createStatement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 2. 执行sql语句获取结果集</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ResultSet resultSet </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> statement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">executeQuery</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"select uid,name,token_id as tokenId from T_User\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 3. 从结果集中，获取数据库返回的数据列名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ResultSetMetaData metaData </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> resultSet.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMetaData</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> columnCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 所有的列名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> columnNames </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 列名对应的java类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Map&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>> column2JavaTypeAsMap </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> HashMap&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        for</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">; i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> columnCount; i</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">++</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"是否自增:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isAutoIncrement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段名:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段别名:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnLabel</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"MySql字段类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnTypeName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // Java 类的完全限定名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Java字段类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnClassName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // 获取指定列的指定列大小。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段长度:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getPrecision</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段保留小数位:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getScale</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"字段属于的表名:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTableName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"是否可为空:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isNullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // 这里使用别名,如果没有别名的情况,别名跟字段名是一样的。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            columnNames.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">add</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnLabel</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            column2JavaTypeAsMap.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnLabel</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i), Class.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">forName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(metaData.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getColumnClassName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i)));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> row </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        while</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (resultSet.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br></div></div>","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第07篇:Mybatis缓存装饰器","url":"/post/java/mybatis/Mybatis缓存设计.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1648571408000.png\\" alt=\\"\\"></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>MyBatis 对缓存的设计是非常巧妙的。花样很多,但却不是真的花样。因为<code>Mybatis</code>只是对 <code>Map</code>数据结构的封装, 但是却实现了很多挺好用的能力。\\n如果单单从设计模式上的角度来,其实就是典型的装饰器模式, 装饰器模式其实并不难,所以我们不讲设计模式, 本篇文章我们来看看<code>Mybatils</code> 缓存设计巧妙的点。</p>\\n</div>\\n<p><a href=\\"https://mybatis.net.cn/sqlmap-xml.html#cache\\" target=\\"_blank\\" rel=\\"noreferrer\\">官方文档</a></p>\\n<p>下面通过简单的代码review来分析下这11个缓存类设计的巧妙点。（因为是对博客重构,历史图片就没有补充,图上只有10个,请讲究下）</p>\\n","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第12篇:Mybatis分页插件设计","url":"/post/java/mybatis/PagePlugin.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"Mybatis","url":"/post/java/mybatis/README.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"第09篇:Spring处理Mybatis事务","url":"/post/java/mybatis/Spring事务整合.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>本篇文章是对Mybatis知识点的一个扩展,主要一起来研究下Spring是如何来管理事务的。顺便再多聊一点其他的知识点,在学习的过程中主要带着以下问题来进行有目的的学习\\n然后最终来回答下面这些问题。</p>\\n</div>\\n<ol>\\n<li>Mybatis是如何整合进Spring中的\\n<ul>\\n<li>Spring如何知道哪些接口是Mapper接口的?</li>\\n<li>Mapper接口是如何变成Spring Bean的？</li>\\n</ul>\\n</li>\\n<li>Spring在哪里声明的SqlSession的实现逻辑？</li>\\n<li>Spring中声明式事务的实现方式是怎样的？</li>\\n<li>Spring中如何处理嵌套事务的？</li>\\n<li>Spring中事务的传播方式是如何实现的？</li>\\n</ol>\\n<p><a href=\\"https://cloud.tencent.com/developer/article/1497631\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://cloud.tencent.com/developer/article/1497631</a></p>\\n<h2 id=\\"一、如何整合进spring中的\\" tabindex=\\"-1\\">一、如何整合进Spring中的 <a class=\\"header-anchor\\" href=\\"#一、如何整合进spring中的\\" aria-label=\\"Permalink to &quot;一、如何整合进Spring中的&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>默认大家对Spring都比较了解了,这里只说结果。都知道接口是不能被实例化的,那么接口是如何成为Bean的呢?</p>\\n<h2 id=\\"_1-1-如何知道哪些是mybatis的接口呢\\" tabindex=\\"-1\\">1.1 如何知道哪些是Mybatis的接口呢? <a class=\\"header-anchor\\" href=\\"#_1-1-如何知道哪些是mybatis的接口呢\\" aria-label=\\"Permalink to &quot;1.1 如何知道哪些是Mybatis的接口呢?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li><code>@MapperScan</code> Spring中在配置类上加上这个注解。根据源码能看到还导入了<code>MapperScannerRegistrar</code></li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Retention</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(RetentionPolicy.RUNTIME)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Target</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ElementType.TYPE)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Documented</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Import</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MapperScannerRegistrar.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Repeatable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MapperScans.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">interface</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> MapperScan</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperScannerRegistrar</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ImportBeanDefinitionRegistrar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">ResourceLoaderAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><p><code>MapperScannerRegistrar</code> 会在配置类解析时候拿到<code>MapperScan</code>注解信息,并解析里面的参数。生成一个 <code>MapperScannerConfigurer</code> 信息。\\n从源码中能看到Mybatis的很多配置信息,都会被注入到<code>MapperScannerConfigurer</code>中。</p>\\n<p><img src=\\"https://img.springlearn.cn/learn_4b3a9611962ebf20587584574ecb05ec.png\\" alt=\\"img.png\\"></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperScannerConfigurer</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanDefinitionRegistryPostProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">ApplicationContextAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">BeanNameAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>实现自BeanDefinitionRegistryPostProcessor会前置,拿到MapperScan中的basePackage,最终通过<code>ClassPathMapperScanner</code>扫描并添加到\\n<code>BeanDefinitionRegistry</code>中。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655086500000.png\\" alt=\\"\\"></p>\\n<p>到这里这种方式就能知道哪些是Mybatis中的Mapper接口了。</p>\\n<p>还有第二种方式当发现Spring容器中没有<code>MapperScannerConfigurer</code>。会自动注入一个</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655086934000.png\\" alt=\\"\\"></p>\\n<p>会直接指定哪些类被Mapper修饰,就将他生成Bean。\\n<img src=\\"https://img.springlearn.cn/blog/learn_1655087073000.png\\" alt=\\"\\"></p>\\n<p>好了，到这里就知道如何来确定那些接口是要生成Mybatis接口的了。下面看下个问题。</p>\\n<h2 id=\\"_1-2-mapper接口是如何变成spring-bean的\\" tabindex=\\"-1\\">1.2 Mapper接口是如何变成Spring Bean的？ <a class=\\"header-anchor\\" href=\\"#_1-2-mapper接口是如何变成spring-bean的\\" aria-label=\\"Permalink to &quot;1.2 Mapper接口是如何变成Spring Bean的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>接口是不能被实例化的，但是在Spring中如何想让接口实例化就可以使用 <a href=\\"./../spring/FactoryBean接口实例化.html\\">FactoryBean</a> + 动态代理的方式，实现接口类的实例化。</p>\\n<ul>\\n<li>首先利用 ClassPathBeanDefinitionScanner 找到符合规则的类生成 BeanDefinition。</li>\\n<li>给 BeanDefinition 指定BeanClass,执行 FactoryBean 是 <code>MapperFactoryBean</code></li>\\n</ul>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655087975000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"二、spring在哪里声明的sqlsession的实现逻辑\\" tabindex=\\"-1\\">二、Spring在哪里声明的SqlSession的实现逻辑？ <a class=\\"header-anchor\\" href=\\"#二、spring在哪里声明的sqlsession的实现逻辑\\" aria-label=\\"Permalink to &quot;二、Spring在哪里声明的SqlSession的实现逻辑？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>通过Mybatis的学习知道SqlSession一共有2个包装类。SqlSessionManager和SqlSessionTemplate。那么SqlSession是在哪里指定用哪个的呢?\\n答案就在 <code>MapperFactoryBean</code></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperFactoryBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionDaoSupport</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> FactoryBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSessionTemplate sqlSessionTemplate;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">     public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setSqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">sqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">       if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">         this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> createSqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSessionFactory);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">       }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SuppressWarnings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"WeakerAccess\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">     protected</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSessionTemplate </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">createSqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">sqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">       return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSessionFactory);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br></div></div><h2 id=\\"三、spring中声明式事务的实现方式是怎样的\\" tabindex=\\"-1\\">三、Spring中声明式事务的实现方式是怎样的 <a class=\\"header-anchor\\" href=\\"#三、spring中声明式事务的实现方式是怎样的\\" aria-label=\\"Permalink to &quot;三、Spring中声明式事务的实现方式是怎样的&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>看了Mybatis中事务这一章节,知道如果使用了SqlSessionTemplate,那么事务的权限就外包给了Spring。那么Spring中事务怎么处理的呢?\\n终于进入正题了。Spring中提供两种事务的能力。</p>\\n<ul>\\n<li>声明式事务</li>\\n<li>编程式事务</li>\\n</ul>\\n<h2 id=\\"_3-1-声明式事务\\" tabindex=\\"-1\\">3.1 声明式事务 <a class=\\"header-anchor\\" href=\\"#_3-1-声明式事务\\" aria-label=\\"Permalink to &quot;3.1 声明式事务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>使用 <code>Transactional</code> 修饰方法，其主要实现是使用切面实现。</p>\\n<ul>\\n<li><code>TransactionAspectSupport#invokeWithinTransaction</code>。拦截方法。获取事务管理器。</li>\\n</ul>\\n<p>这里我们先来思考下,通过前面的学习知道事务的最底层实现是jdbc驱动来实现的。</p>\\n<p><img src=\\"https://img.springlearn.cn/learn_d3cd2ff5e89f6dbfffff18289043304e.png\\" alt=\\"\\"></p>\\n<p>那么切面中要想实现，就必须保证切面中的线程执行的数据库操作，一定是同一个<code>SqlSession</code>这样才能在方法正常执行时候做commit，异常时候做rollback操作。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655099097000.png\\" alt=\\"\\"></p>\\n<p>那我们看下他是如何保证切面中的数据库操作一定是同一个SqlSession的吧。这部分逻辑就在 <code>SqlSessionTemplate</code> 中。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655099774000.png\\" alt=\\"\\"></p>\\n<ul>\\n<li>获取当前线程是否已经有SqlSession了，如果有就直接使用，这样就保证在切面中的事务用的是同一个事务了。</li>\\n</ul>\\n<h2 id=\\"_3-2-编程式事务\\" tabindex=\\"-1\\">3.2 编程式事务 <a class=\\"header-anchor\\" href=\\"#_3-2-编程式事务\\" aria-label=\\"Permalink to &quot;3.2 编程式事务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li><code>TransactionTemplate#execute</code></li>\\n</ul>\\n<p>编程是事务需要实现者自己来管理事务的，Spring提供的扩展接口类是 <code>CallbackPreferringPlatformTransactionManager</code>。如果发现容器中默认的事务管理类是这个\\n就直接调动全局的这个事务管理方法。如果不是就自己来处理。这种设计的好处是,事务管理器既可以做关系型数据库的事务管理,也可以满足一些特定场景的事务控制(eg: 给Kafka的逻辑做一个事务管理)。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655100730000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"四、spring中如何处理嵌套事务的\\" tabindex=\\"-1\\">四、Spring中如何处理嵌套事务的？ <a class=\\"header-anchor\\" href=\\"#四、spring中如何处理嵌套事务的\\" aria-label=\\"Permalink to &quot;四、Spring中如何处理嵌套事务的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>什么是嵌套事务,举一个伪代码的例子。下面 <code>saveUser</code> 代码中有2个Mapper。但是有几个SqlSession呢?</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">UserMapper userMapper;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">RegistroyMapper registoryMapper;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Transactional</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">rollbackFor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {Throwable.class, RuntimeException.class, ExecutionException.class})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(User user){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   userMapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(user);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Transactional</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">rollbackFor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {Throwable.class, RuntimeException.class, ExecutionException.class})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> saveUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userName,Strign password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   User user </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> registoryMapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">regis</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userName,password);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">   save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(user);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br></div></div><p>通过上面的学习我们了解到如果是Spring来管理的事务是一个线程对应一个SqlSession。所以说上面伪代码中的两个Mapper\\n其实是用的同一个SqlSession,这样才能保证是在同一个事务中。核心代码逻辑就在这里 <code>SqlSessionUtils#getSqlSession</code>。\\n从Spring中的事务管理器中获取 <code>SqlSession</code>。是否使用同一个事务，外包给Spring容器去托管。这就给Spring提供了很多可以发挥的空间。\\n比如说传播机制等。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSession </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory sessionFactory, ExecutorType executorType,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      PersistenceExceptionTranslator exceptionTranslator) {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    notNull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory, NO_SQL_SESSION_FACTORY_SPECIFIED);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    notNull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType, NO_EXECUTOR_TYPE_SPECIFIED);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSessionHolder holder </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (SqlSessionHolder) TransactionSynchronizationManager.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSession session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> sessionHolder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType, holder);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> session;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    LOGGER.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">debug</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"Creating a new SqlSession\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">openSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    registerSessionHolder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory, executorType, exceptionTranslator, session);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> session;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br></div></div><h2 id=\\"五、spring中事务的传播方式是如何实现的\\" tabindex=\\"-1\\">五、Spring中事务的传播方式是如何实现的？ <a class=\\"header-anchor\\" href=\\"#五、spring中事务的传播方式是如何实现的\\" aria-label=\\"Permalink to &quot;五、Spring中事务的传播方式是如何实现的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>| 传播方式                                  | 说明                                                         | 常用 |\\n|</p>\\n","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第08篇:Mybatis事务处理","url":"/post/java/mybatis/事务的实现方案.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第10篇:Mybatis的插件设计分析","url":"/post/java/mybatis/插件分析.html","excerpt":"<PageBanner/><p>参考文档: <a href=\\"https://mybatis.org/mybatis-3/zh/configuration.html#plugins\\" target=\\"_blank\\" rel=\\"noreferrer\\">官方文档</a></p>\\n<h2 id=\\"一、-插件设计介绍\\" tabindex=\\"-1\\">一、 插件设计介绍 <a class=\\"header-anchor\\" href=\\"#一、-插件设计介绍\\" aria-label=\\"Permalink to &quot;一、 插件设计介绍&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Mybatis 中的插件都是通过代理方式来实现的,通过拦截执行器中指定的方法来达到改变核心执行代码的方式。举一个列子,查询方法核心都是通过 Executor来进行sql执行的。那么我们就可以通过拦截下面的方法来改变核心代码。基本原理就是这样,下面我们在来看 Mybatis 是如何处理插件。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Executor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  ResultHandler NO_RESULT_HANDLER </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  int</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> update</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MappedStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">ms</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">query</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MappedStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">ms</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, RowBounds </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">rowBounds</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, ResultHandler </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">resultHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, CacheKey </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">cacheKey</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, BoundSql </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">boundSql</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">query</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MappedStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">ms</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, RowBounds </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">rowBounds</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, ResultHandler </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">resultHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> Cursor&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">E</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryCursor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MappedStatement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">ms</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parameter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, RowBounds </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">rowBounds</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SQLException;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  ...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br></div></div><p><img src=\\"https://img-blog.csdnimg.cn/20191224102308710.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01lc3NhZ2VfbHg=,size_16,color_FFFFFF,t_70\\" alt=\\"在这里插入图片描述\\"></p>\\n<p>| 名称                | 类型 | 描述                                            |\\n|</p>\\n","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第03篇:Mybatis核心类详细介绍","url":"/post/java/mybatis/核心类介绍.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第01篇:Mybatis学习之环境搭建","url":"/post/java/mybatis/环境搭建.html","excerpt":"<PageBanner/><h2 id=\\"一、环境搭建\\" tabindex=\\"-1\\">一、环境搭建 <a class=\\"header-anchor\\" href=\\"#一、环境搭建\\" aria-label=\\"Permalink to &quot;一、环境搭建&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-1-数据库脚本\\" tabindex=\\"-1\\">1.1 数据库脚本 <a class=\\"header-anchor\\" href=\\"#_1-1-数据库脚本\\" aria-label=\\"Permalink to &quot;1.1 数据库脚本&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-sql vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">sql</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SET</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NAMES utf8;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SET</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> FOREIGN_KEY_CHECKS </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">--</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div>","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"第02篇:Mybatis配置文件解析","url":"/post/java/mybatis/配置文件解析.html","excerpt":"","category":"Mybatis","date":{"time":null,"string":"Invalid Date"}},{"title":"AOP 使用指南","url":"/post/java/spring/AOP.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1593954110000.png\\" alt=\\"\\"></p>\\n<PageBanner/><p><a href=\\"https://github.com/lxchinesszz/spring-learning\\" target=\\"_blank\\" rel=\\"noreferrer\\"><img src=\\"https://img.shields.io/badge/%E6%BA%90%E7%A0%81-AOP-green\\" alt=\\"\\"></a></p>\\n","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring EL表达式使用指南","url":"/post/java/spring/EL.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring Boot Endpoint监控端点扩展","url":"/post/java/spring/Endpoint监控端点扩展.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>什么是端点? 端点就是SpringBoot通过web或者jmx的方式向外部暴露应用的信息,或者上下文的信息。SpringCloud-Admin就是根据此技术来进行实现的。他们用到的技术就是@Endpoint，而不是通过自己@GetMapping之类进行实现的。下面小编就带大家一起来学习端点的使用。学会本文后在利用前面我们讲过的autoconfigure的自动化配置后，你就可以开发更高级的SpringBoot应用(非业务系统)。本教程将带你从业务系统开发者转变为研发系统开发者。</p>\\n</div>\\n<p>用过SpringBoot的同学可能知道，SpringBoot有很多监控端点,比如当我们引入健康监控组件</p>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>org.springframework.boot&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>spring-boot-starter-actuator&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>2.6.7&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>系统就会自动暴露出许多,web端口供外部调用，获取应用的信息，或者上下文的信息。</p>\\n<p><img src=\\"https://img.springlearn.cn/learn_010cf865b5c13bd4a2c855dbf383a81d.jpg\\" alt=\\"image-20190308191019856\\"></p>\\n<h2 id=\\"一、如何定义端点\\" tabindex=\\"-1\\">一、如何定义端点 <a class=\\"header-anchor\\" href=\\"#一、如何定义端点\\" aria-label=\\"Permalink to &quot;一、如何定义端点&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>可以使用<code>@Endpoint</code>,<code>@WebEndpoint</code>,<code>@JmxEndpoint</code>,或者<code>EndpointWebExtension</code>来实现HTTP方式的端点,可以是传统SpringMVC也可以是最新的<code>Spring WebFlux</code></p>\\n<ul>\\n<li>\\n<p><code>@Endpoint</code>相当于<code>@WebEndpoint</code>和<code>@JmxEndpoint</code>的整合。web和jmx方式都支持</p>\\n</li>\\n<li>\\n<p><code>@WebEndpoint</code> 只会生成web的方式的端点监控</p>\\n</li>\\n</ul>\\n<p><img src=\\"https://img.springlearn.cn/learn_b2c367712133b4affaf175b38eaad3cc.jpg\\" alt=\\"image-20190308190517126\\"></p>\\n<ul>\\n<li><code>JmxEndpoint</code> 只会生成Jmx的方式监控</li>\\n</ul>\\n<p><img src=\\"https://img.springlearn.cn/learn_6490cd4917d5633fbbe9b205eb191dde.jpg\\" alt=\\"image-20190308183731989\\"></p>\\n<p>| Operation          | HTTP method |\\n|</p>\\n","category":"SpringBoot","date":{"time":null,"string":"Invalid Date"}},{"title":"FactoryBean接口实例化","url":"/post/java/spring/FactoryBean接口实例化.html","excerpt":"","category":"Spring","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring事务管理器Hooks","url":"/post/java/spring/Spring事务管理器.html","excerpt":"","category":"Spring","date":{"time":null,"string":"Invalid Date"}},{"title":"动态绑定配置","url":"/post/java/spring/Spring动态绑定配置.html","excerpt":"","category":"Spring","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring声明式事务的实现方案?","url":"/post/java/spring/Spring声明式事务的实现方案.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>本篇文章是对Mybatis知识点的一个扩展,主要一起来研究下Spring是如何来管理事务的。顺便再多聊一点其他的知识点,在学习的过程中主要带着以下问题来进行有目的的学习\\n然后最终来回答下面这些问题。</p>\\n</div>\\n<ol>\\n<li>Mybatis是如何整合进Spring中的\\n<ul>\\n<li>Spring如何知道哪些接口是Mapper接口的?</li>\\n<li>Mapper接口是如何变成Spring Bean的？</li>\\n</ul>\\n</li>\\n<li>Spring在哪里声明的SqlSession的实现逻辑？</li>\\n<li>Spring中声明式事务的实现方式是怎样的？</li>\\n<li>Spring中如何处理嵌套事务的？</li>\\n<li>Spring中事务的传播方式是如何实现的？</li>\\n</ol>\\n<p><a href=\\"https://cloud.tencent.com/developer/article/1497631\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://cloud.tencent.com/developer/article/1497631</a></p>\\n<h2 id=\\"一、如何整合进spring中的\\" tabindex=\\"-1\\">一、如何整合进Spring中的 <a class=\\"header-anchor\\" href=\\"#一、如何整合进spring中的\\" aria-label=\\"Permalink to &quot;一、如何整合进Spring中的&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>默认大家对Spring都比较了解了,这里只说结果。都知道接口是不能被实例化的,那么接口是如何成为Bean的呢?</p>\\n<h2 id=\\"_1-1-如何知道哪些是mybatis的接口呢\\" tabindex=\\"-1\\">1.1 如何知道哪些是Mybatis的接口呢? <a class=\\"header-anchor\\" href=\\"#_1-1-如何知道哪些是mybatis的接口呢\\" aria-label=\\"Permalink to &quot;1.1 如何知道哪些是Mybatis的接口呢?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li><code>@MapperScan</code> Spring中在配置类上加上这个注解。根据源码能看到还导入了<code>MapperScannerRegistrar</code></li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Retention</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(RetentionPolicy.RUNTIME)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Target</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ElementType.TYPE)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Documented</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Import</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MapperScannerRegistrar.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Repeatable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(MapperScans.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">interface</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> MapperScan</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperScannerRegistrar</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ImportBeanDefinitionRegistrar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">ResourceLoaderAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><p><code>MapperScannerRegistrar</code> 会在配置类解析时候拿到<code>MapperScan</code>注解信息,并解析里面的参数。生成一个 <code>MapperScannerConfigurer</code> 信息。\\n从源码中能看到Mybatis的很多配置信息,都会被注入到<code>MapperScannerConfigurer</code>中。</p>\\n<p><img src=\\"https://img.springlearn.cn/learn_4b3a9611962ebf20587584574ecb05ec.png\\" alt=\\"img.png\\"></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperScannerConfigurer</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanDefinitionRegistryPostProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">ApplicationContextAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">BeanNameAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>实现自BeanDefinitionRegistryPostProcessor会前置,拿到MapperScan中的basePackage,最终通过<code>ClassPathMapperScanner</code>扫描并添加到\\n<code>BeanDefinitionRegistry</code>中。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655086500000.png\\" alt=\\"\\"></p>\\n<p>到这里这种方式就能知道哪些是Mybatis中的Mapper接口了。</p>\\n<p>还有第二种方式当发现Spring容器中没有<code>MapperScannerConfigurer</code>。会自动注入一个</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655086934000.png\\" alt=\\"\\"></p>\\n<p>会直接指定哪些类被Mapper修饰,就将他生成Bean。\\n<img src=\\"https://img.springlearn.cn/blog/learn_1655087073000.png\\" alt=\\"\\"></p>\\n<p>好了，到这里就知道如何来确定那些接口是要生成Mybatis接口的了。下面看下个问题。</p>\\n<h2 id=\\"_1-2-mapper接口是如何变成spring-bean的\\" tabindex=\\"-1\\">1.2 Mapper接口是如何变成Spring Bean的？ <a class=\\"header-anchor\\" href=\\"#_1-2-mapper接口是如何变成spring-bean的\\" aria-label=\\"Permalink to &quot;1.2 Mapper接口是如何变成Spring Bean的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>接口是不能被实例化的，但是在Spring中如何想让接口实例化就可以使用 <a href=\\"./FactoryBean接口实例化.html\\">FactoryBean</a> + 动态代理的方式，实现接口类的实例化。</p>\\n<ul>\\n<li>首先利用 ClassPathBeanDefinitionScanner 找到符合规则的类生成 BeanDefinition。</li>\\n<li>给 BeanDefinition 指定BeanClass,执行 FactoryBean 是 <code>MapperFactoryBean</code></li>\\n</ul>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655087975000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"二、spring在哪里声明的sqlsession的实现逻辑\\" tabindex=\\"-1\\">二、Spring在哪里声明的SqlSession的实现逻辑？ <a class=\\"header-anchor\\" href=\\"#二、spring在哪里声明的sqlsession的实现逻辑\\" aria-label=\\"Permalink to &quot;二、Spring在哪里声明的SqlSession的实现逻辑？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>通过Mybatis的学习知道SqlSession一共有2个包装类。SqlSessionManager和SqlSessionTemplate。那么SqlSession是在哪里指定用哪个的呢?\\n答案就在 <code>MapperFactoryBean</code></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MapperFactoryBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionDaoSupport</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> FactoryBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSessionTemplate sqlSessionTemplate;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">     public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setSqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">sqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">       if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> ||</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sqlSessionFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">         this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.sqlSessionTemplate </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> createSqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSessionFactory);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">       }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SuppressWarnings</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"WeakerAccess\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">     protected</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSessionTemplate </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">createSqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">sqlSessionFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">       return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SqlSessionTemplate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sqlSessionFactory);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br></div></div><h2 id=\\"三、spring中声明式事务的实现方式是怎样的\\" tabindex=\\"-1\\">三、Spring中声明式事务的实现方式是怎样的 <a class=\\"header-anchor\\" href=\\"#三、spring中声明式事务的实现方式是怎样的\\" aria-label=\\"Permalink to &quot;三、Spring中声明式事务的实现方式是怎样的&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>看了Mybatis中事务这一章节,知道如果使用了SqlSessionTemplate,那么事务的权限就外包给了Spring。那么Spring中事务怎么处理的呢?\\n终于进入正题了。Spring中提供两种事务的能力。</p>\\n<ul>\\n<li>声明式事务</li>\\n<li>编程式事务</li>\\n</ul>\\n<h2 id=\\"_3-1-声明式事务\\" tabindex=\\"-1\\">3.1 声明式事务 <a class=\\"header-anchor\\" href=\\"#_3-1-声明式事务\\" aria-label=\\"Permalink to &quot;3.1 声明式事务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>使用 <code>Transactional</code> 修饰方法，其主要实现是使用切面实现。</p>\\n<ul>\\n<li><code>TransactionAspectSupport#invokeWithinTransaction</code>。拦截方法。获取事务管理器。</li>\\n</ul>\\n<p>这里我们先来思考下,通过前面的学习知道事务的最底层实现是jdbc驱动来实现的。</p>\\n<p><img src=\\"https://img.springlearn.cn/learn_d3cd2ff5e89f6dbfffff18289043304e.png\\" alt=\\"\\"></p>\\n<p>那么切面中要想实现，就必须保证切面中的线程执行的数据库操作，一定是同一个<code>SqlSession</code>这样才能在方法正常执行时候做commit，异常时候做rollback操作。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655099097000.png\\" alt=\\"\\"></p>\\n<p>那我们看下他是如何保证切面中的数据库操作一定是同一个SqlSession的吧。这部分逻辑就在 <code>SqlSessionTemplate</code> 中。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655099774000.png\\" alt=\\"\\"></p>\\n<ul>\\n<li>获取当前线程是否已经有SqlSession了，如果有就直接使用，这样就保证在切面中的事务用的是同一个事务了。</li>\\n</ul>\\n<h2 id=\\"_3-2-编程式事务\\" tabindex=\\"-1\\">3.2 编程式事务 <a class=\\"header-anchor\\" href=\\"#_3-2-编程式事务\\" aria-label=\\"Permalink to &quot;3.2 编程式事务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li><code>TransactionTemplate#execute</code></li>\\n</ul>\\n<p>编程是事务需要实现者自己来管理事务的，Spring提供的扩展接口类是 <code>CallbackPreferringPlatformTransactionManager</code>。如果发现容器中默认的事务管理类是这个\\n就直接调动全局的这个事务管理方法。如果不是就自己来处理。这种设计的好处是,事务管理器既可以做关系型数据库的事务管理,也可以满足一些特定场景的事务控制(eg: 给Kafka的逻辑做一个事务管理)。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1655100730000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"四、spring中如何处理嵌套事务的\\" tabindex=\\"-1\\">四、Spring中如何处理嵌套事务的？ <a class=\\"header-anchor\\" href=\\"#四、spring中如何处理嵌套事务的\\" aria-label=\\"Permalink to &quot;四、Spring中如何处理嵌套事务的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>什么是嵌套事务,举一个伪代码的例子。下面 <code>saveUser</code> 代码中有2个Mapper。但是有几个SqlSession呢?</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">UserMapper userMapper;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">RegistroyMapper registoryMapper;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Transactional</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">rollbackFor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {Throwable.class, RuntimeException.class, ExecutionException.class})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(User user){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   userMapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(user);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Transactional</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">rollbackFor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {Throwable.class, RuntimeException.class, ExecutionException.class})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> saveUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userName,Strign password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">   User user </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> registoryMapper.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">regis</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userName,password);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">   save</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(user);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br></div></div><p>通过上面的学习我们了解到如果是Spring来管理的事务是一个线程对应一个SqlSession。所以说上面伪代码中的两个Mapper\\n其实是用的同一个SqlSession,这样才能保证是在同一个事务中。核心代码逻辑就在这里 <code>SqlSessionUtils#getSqlSession</code>。\\n从Spring中的事务管理器中获取 <code>SqlSession</code>。是否使用同一个事务，外包给Spring容器去托管。这就给Spring提供了很多可以发挥的空间。\\n比如说传播机制等。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SqlSession </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSqlSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SqlSessionFactory sessionFactory, ExecutorType executorType,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      PersistenceExceptionTranslator exceptionTranslator) {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    notNull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory, NO_SQL_SESSION_FACTORY_SPECIFIED);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    notNull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType, NO_EXECUTOR_TYPE_SPECIFIED);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSessionHolder holder </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (SqlSessionHolder) TransactionSynchronizationManager.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getResource</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SqlSession session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> sessionHolder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType, holder);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> session;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    LOGGER.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">debug</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"Creating a new SqlSession\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    session </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> sessionFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">openSession</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(executorType);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">    registerSessionHolder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(sessionFactory, executorType, exceptionTranslator, session);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> session;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br></div></div><h2 id=\\"五、spring中事务的传播方式是如何实现的\\" tabindex=\\"-1\\">五、Spring中事务的传播方式是如何实现的？ <a class=\\"header-anchor\\" href=\\"#五、spring中事务的传播方式是如何实现的\\" aria-label=\\"Permalink to &quot;五、Spring中事务的传播方式是如何实现的？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>| 传播方式                                  | 说明                                                         | 常用 |\\n|</p>\\n","category":"SpringBoot","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring循环依赖","url":"/post/java/spring/Spring循环依赖.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1647108921000.png\\" alt=\\"\\"></p>\\n<p><strong>作者: 八阿哥的剑</strong></p>\\n<p><em>博客: <a href=\\"https://springlearn.cn\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://springlearn.cn</a></em></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">一日一句毒鸡汤</p>\\n<p>问世间钱为何物，只叫人生死相许。！😄</p>\\n</div>\\n<p>写文章不容易，如果感觉还行，请点个关注，点关注不迷路。</p>\\n<h2 id=\\"一、什么是循环依赖\\" tabindex=\\"-1\\">一、什么是循环依赖 <a class=\\"header-anchor\\" href=\\"#一、什么是循环依赖\\" aria-label=\\"Permalink to &quot;一、什么是循环依赖&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>这种简单的问题，直接伪代码吧。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Service</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> B b;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Service</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> A a;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br></div></div><p>我中有你，你中有我。</p>\\n<h2 id=\\"二、解决循环依赖思路\\" tabindex=\\"-1\\">二、解决循环依赖思路 <a class=\\"header-anchor\\" href=\\"#二、解决循环依赖思路\\" aria-label=\\"Permalink to &quot;二、解决循环依赖思路&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>思路其实非常简单还是用伪代码来说明</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">A a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">B b </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">a.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setB</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(b);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">b.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setA</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(a);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><p>思路就是这么简单，先分别把A和B给实例化。\\n这时候实例化的A和B仅仅是完成了实例化,内部的属性其实都没有。\\n只有当执行了3、4行才算正常完成。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">A a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">B b </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">a.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setB</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(b);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">b.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setA</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(a);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><p>通过上面的代码我们总结下，要想实现循环注入。首先要满足第一个条件。</p>\\n<ol>\\n<li><strong>能被实例化</strong></li>\\n</ol>\\n<ul>\\n<li>有空构造</li>\\n<li>或有构造且构造参数满足能被实例化。</li>\\n</ul>\\n<p>好了，知道这点就成了，相信让你来实现循环注入，应该也可以了吧。其实就这么简单 ?</p>\\n<p>那我们来看Spring如何来实现的。相信看完你就头大了。但是没关系，基本原理你已经知道了。\\n带着这个思路来看Spring的源码就简单了。</p>\\n<h2 id=\\"三、spring如何解决循环依赖\\" tabindex=\\"-1\\">三、Spring如何解决循环依赖 <a class=\\"header-anchor\\" href=\\"#三、spring如何解决循环依赖\\" aria-label=\\"Permalink to &quot;三、Spring如何解决循环依赖&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>首先我们要知道Spring中的bean, 有两种形式。</p>\\n<ul>\\n<li>第一种是单例。所谓单例就是容器中这个类，只会存在一个实例。不管你调用了多少次 <code>getBean(String beanName)</code> 返回的都是一个实例(因为每次都从缓存中获取的实例)。</li>\\n<li>第二种是原型。所谓原型就是容器中这个类，没有缓存。每次都是新建一个Bean。</li>\\n</ul>\\n<p>在这里我们思考下，如果要你来实现循环注入，以上两种模式。你能用那一个?\\n要想实现循环注入，即这个Bean必须要有一个缓存的地方。不然每次都是创建，虽然能完成实例化，但是实例化后，需要注入的 <code>bean</code> 无法实现注入，就会陷入死循环。</p>\\n<p>这里第二个必要因素就出来了。</p>\\n<p>==2. 必须要是单例==</p>\\n<p>好了，知道这么多我们开始看源码吧。</p>\\n<h3 id=\\"_3-1-spring中创建bean的步骤\\" tabindex=\\"-1\\">3.1 Spring中创建Bean的步骤 <a class=\\"header-anchor\\" href=\\"#_3-1-spring中创建bean的步骤\\" aria-label=\\"Permalink to &quot;3.1 Spring中创建Bean的步骤&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>实例化，createBeanInstance，就是new了个对象。</li>\\n<li>属性注入，populateBean， 就是 set 一些属性值。</li>\\n<li>初始化，initializeBean，执行一些 aware 接口中的方法，initMethod，AOP代理等</li>\\n</ul>\\n<h3 id=\\"_3-2-循环依赖三层缓存\\" tabindex=\\"-1\\">3.2 循环依赖三层缓存 <a class=\\"header-anchor\\" href=\\"#_3-2-循环依赖三层缓存\\" aria-label=\\"Permalink to &quot;3.2 循环依赖三层缓存&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>注意看细节，每个缓存的数据类型是什么? 后面要考。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647104251000.png\\" alt=\\"\\"></p>\\n<ul>\\n<li>一级缓存 <code>Map&lt;String, Object&gt; singletonObjects </code>\\n<ul>\\n<li>如果等于空，或者当前单例正在创建中(即只完成了实例化)。就从二级缓存中获取。</li>\\n</ul>\\n</li>\\n<li>二级缓存 <code>Map&lt;String, Object&gt; earlySingletonObjects</code>\\n<ul>\\n<li>如果等于空，就从三级缓存中获取。</li>\\n</ul>\\n</li>\\n<li>三级缓存 <code>Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories</code>\\n<ul>\\n<li>创建Bean的一个工厂，允许容器中定义特殊的，生成Bean的方法。使用 <code>addSingletonFactory</code></li>\\n</ul>\\n</li>\\n</ul>\\n<p>其实要想实现循环依赖只用2个缓存就行。三级缓存的意义是为了完成某些功能。至于什么功能呢? 这里先不说后面看流程。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">protected</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSingleton</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String beanName, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> allowEarlyReference) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\tObject singletonObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.singletonObjects.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName);</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\tif</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (singletonObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> &#x26;&#x26;</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isSingletonCurrentlyInCreation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName)) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\tsynchronized</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.singletonObjects) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\tsingletonObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.earlySingletonObjects.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\t\\tif</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (singletonObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">==</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> &#x26;&#x26;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> allowEarlyReference) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\t\\tObjectFactory&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> singletonFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.singletonFactories.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\t\\t\\tif</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (singletonFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">!=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\t\\t\\tsingletonObject </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> singletonFactory.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getObject</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">\\t\\t\\t\\t\\t\\tthis</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.earlySingletonObjects.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">put</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName, singletonObject);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">\\t\\t\\t\\t\\t\\tthis</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.singletonFactories.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">remove</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\t\\t}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\t}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\treturn</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> singletonObject;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br></div></div><p>好我们知道有这两个缓存就继续往下看源码。当 <code>getSingleton</code> 是 <code>null</code>。继续往下走。其他源码就跳过了，不是本篇的主要内容，我们只看\\n解决循环依赖的核心代码。</p>\\n<ul>\\n<li>doCreateBean#createBeanInstance 先实现实例化。</li>\\n<li>当前bean是单例,不会添加到二级缓存，直接就添加到三级缓存中,注意这里不是添加的Bean，而是生成Bean的工厂方法 <code>ObjectFactory(#getEarlyBeanReference)</code>。</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t   boolean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> earlySingletonExposure </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (mbd.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isSingleton</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x26;&#x26;</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.allowCircularReferences </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x26;&#x26;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">\\t\\t\\t\\tisSingletonCurrentlyInCreation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\tif</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (earlySingletonExposure) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\tif</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (logger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isTraceEnabled</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t\\tlogger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">trace</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Eagerly caching bean '\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> beanName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">+</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\t\\t\\t\\t\\t\\t\\"' to allow for resolving potential circular references\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t\\t}</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">\\t\\t\\taddSingletonFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName, () </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> getEarlyBeanReference</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(beanName, mbd, bean));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t\\t}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><ul>\\n<li>doCreateBean#populateBean 实现属性注入</li>\\n</ul>\\n<p>以上面的代码的例子，A创建时候被加入到了三级缓存中，然后继续执行 <code>populateBean</code>。发现要依赖B。然后依次从缓存中\\n来找这个A。最终在三级缓存中读取到了B。然后实现注入。这里三级缓存中的 <code>Bean</code>。 有可能只是完成了 <code>new</code>。但是容器\\n不管，先完成循环注入。至于注入的东西是否是完全品还是半成品不关心，因为都是单例所以，后面在注入属性也没关系。\\n这里我们知道单例的用处了吧。试想一下，如果不是单例模式，而是原型模式。那么bean就必须是完全品，不然就陷入了死循环。</p>\\n<p>下面我们还用伪代码的方式再来说一篇实现思路。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// createBeanInstance先实例化，然后加入到三级缓存中</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">A a </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// a在执行populateBean的时候，发现要注入属性B，于是就使用getBean。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// getBean(b) 执行createBeanInstance先实例化</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">B b </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 然后加入到三级缓存中，b在执行populateBean注入属性值的时候。发现也依赖了A。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 然后从缓存中找到办成品A。于是乎B的注入就完成，然后再执行B的init方法。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">b.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setA</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(a);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// B完成后,则返回到A的populateBean也注入了B。然后在执行A的init方法</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">a.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">setB</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(b);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><p>到这里就完成了循环注入，这里有点绕，小编画了一个图，大家跟着序号来看，然后好好理解下。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647104949000.png\\" alt=\\"\\"></p>\\n<p>通过这个图其实我们能发现一个问题。B此时从三级缓存中拿到的A是一个半成品的A。\\n假如B在执行初始化方法的时候,依赖A的populateBean注入的属性。那么此时一定会拿不到的。\\n下面写点伪代码，说一下这个问题。</p>\\n<h3 id=\\"_3-3-发现点问题\\" tabindex=\\"-1\\">3.3 发现点问题 <a class=\\"header-anchor\\" href=\\"#_3-3-发现点问题\\" aria-label=\\"Permalink to &quot;3.3 发现点问题&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"_3-3-1-半成品问题-1\\" tabindex=\\"-1\\">3.3.1 半成品问题-1 <a class=\\"header-anchor\\" href=\\"#_3-3-1-半成品问题-1\\" aria-label=\\"Permalink to &quot;3.3.1 半成品问题-1&quot;\\">&ZeroWidthSpace;</a></h4>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> B b;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Value</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"\${a.name}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String name;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> name;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> afterPropertiesSet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"A:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> b);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> A a;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> afterPropertiesSet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"B:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br></div></div><p><img src=\\"https://img.springlearn.cn/blog/learn_1647105136000.png\\" alt=\\"\\"></p>\\n<p>通过上图我们知道B会先执行初始化，而这里B的初始化 ==(图例8)== 会依赖A的参数注入 ==(图例4)== 。而B在执行初始化的时候。A(图例4没有完全完成注入)并没有完成属性注入。\\n那么我们此时在拿到A的getName一定是空的。</p>\\n<p><strong>以上代码执行就是:</strong></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">B</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">null</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">A</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">com.example.demo.B@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">38aa816f</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><h4 id=\\"_3-3-2-半成品问题-2\\" tabindex=\\"-1\\">3.3.2 半成品问题-2 <a class=\\"header-anchor\\" href=\\"#_3-3-2-半成品问题-2\\" aria-label=\\"Permalink to &quot;3.3.2 半成品问题-2&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>A的BeanPostProcessor没有执行,那么假如我们想要对A进行方法代理。B在执行初始化的时候,调用A的 <code>getName</code>。会成功代理上吗?</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> A</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> B b;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String name </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"孙悟空\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> name;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> afterPropertiesSet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"A:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> b);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> B</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> InitializingBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> A a;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> afterPropertiesSet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"B:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Aspect</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AopConfig</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 精确匹配类名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Pointcut</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"within(A)\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> matchClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Before</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"matchClass()\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> beforeMatchClassName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br></div></div>","category":"Spring","date":{"time":null,"string":"Invalid Date"}},{"title":"Web接口资源是如何保存起来的?","url":"/post/java/spring/Web接口资源是如何保存起来的.html","excerpt":"","category":"SpringBoot","date":{"time":null,"string":"Invalid Date"}},{"title":"第01篇:搞定Spring容器管理","url":"/post/java/spring/core01.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/b8f74de10af99991e3fc73632eeeb190.png\\" alt=\\"\\"></p>\\n<p><strong>公众号</strong>: 西魏陶渊明<br/>\\n<strong>CSDN</strong>: <a href=\\"https://springlearn.blog.csdn.net/?type=blog\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://springlearn.blog.csdn.net</a><br/></p>\\n<blockquote>\\n<p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p>\\n</blockquote>\\n<p><img src=\\"https://img.springlearn.cn/blog/8f3392b9badb093f9e1a6472b4a98487.gif\\" alt=\\"\\"></p>\\n<p>@[TOC]</p>\\n<h2 id=\\"一、前言\\" tabindex=\\"-1\\">一、前言 <a class=\\"header-anchor\\" href=\\"#一、前言\\" aria-label=\\"Permalink to &quot;一、前言&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/1c861b137fedd470229042b05bc85d97.png\\" alt=\\"\\"></p>\\n<p><code>Spring</code> 是 <code>java</code> 开发者,永远绕不开的结。<code>Spring</code> 是非常值得开发者来学习的, 以目前 <code>Spring</code> 在 <code>java</code> 领域的统治性地位, 可以说学 <code>java</code> 就是在学 <code>Spring</code>。但是作为新入门的开发人员,甚至说是有一定工作经验的同学,面对如此庞大的框架,都不一定是充分掌握了所有的知识点。因为大多数人的学习,都不是系统的学习,都是片面的。以经验为主。本系列专题的主要目的就是,一起系统的来学习一下Spring这个框架, 以一个六年经验的老鸟的视角里,来重学Spring。通过直接阅读 Spring的官方文档来获取一手知识。</p>\\n<p>因为内容较多,建议收藏学习。</p>\\n<h2 id=\\"二、beanfactory-工厂\\" tabindex=\\"-1\\">二、BeanFactory 工厂 <a class=\\"header-anchor\\" href=\\"#二、beanfactory-工厂\\" aria-label=\\"Permalink to &quot;二、BeanFactory 工厂&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/0d795a24e1b06ffc172762ae82e18241.png\\" alt=\\"\\"></p>\\n<h2 id=\\"_2-1-什么是bean\\" tabindex=\\"-1\\">2.1 什么是Bean ? <a class=\\"header-anchor\\" href=\\"#_2-1-什么是bean\\" aria-label=\\"Permalink to &quot;2.1 什么是Bean ?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>平时我们来创建对象, 一般都是 new。如果这个对象里有一个属性, 那么就需要我来进行set,赋值。但是如果要有10个属性呢? 你也要自己来赋值吗? 那不累死个人嘛。Spring的解决方案就是, 这么重的活, 开发者不用关心了，都交给我来处理吧。那么Spring是如何来处理的呢? 对,就是<code>BeanFactory</code>,Spring通过 BeanFactory的方式帮实现对象的实例化。那么所有被Spring管理的对象,我们就可以理解成Bean对象。</p>\\n<p>凡是有属性和方法的对象都是Bean对象,凡是被Spring管理的Bean对象就是Spring Bean对象。</p>\\n<h2 id=\\"_2-2-如何使用bean工厂\\" tabindex=\\"-1\\">2.2 如何使用Bean工厂 <a class=\\"header-anchor\\" href=\\"#_2-2-如何使用bean工厂\\" aria-label=\\"Permalink to &quot;2.2 如何使用Bean工厂&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li>方式一直接使用代码自动注入</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SpringIocTest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Autowired</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeanFactory beanFactory;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><ul>\\n<li>方式二使用BeanFactoryAware注入</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> SpringIocTest</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanFactoryAware</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeanFactory beanFactory;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setBeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(BeanFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.beanFactory </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> beanFactory;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><h2 id=\\"_2-3-beanfactory的体系\\" tabindex=\\"-1\\">2.3 BeanFactory的体系 <a class=\\"header-anchor\\" href=\\"#_2-3-beanfactory的体系\\" aria-label=\\"Permalink to &quot;2.3 BeanFactory的体系&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>在 <code>Spring</code> 中 <code>BeanFactory</code> 是一个非常重要的组件, 要想搞清楚 <code>Spring</code>, 一定要先搞清楚 <code>BeanFactory</code>\\n的体系,这里我们详细来解释下 BeanFactory的体系。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/13a8f0f36ab6b4da0b1e678c5365ef4e.png\\" alt=\\"\\"></p>\\n<p>看这张图,密密麻麻的都是,但是我们不要担心,实际我们不用关心这么多。大部分人都是因为看到了这里,给劝退了, 下面给大家精简一下。希望对你有所帮助。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/2e34a842a68200398d70b8d6c0283c17.png\\" alt=\\"\\"></p>\\n<p>我们只关心上面这张图就好了，但是看类还是比较多，为什么呢? 因为Spring定义BeanFactory接口比较细，每个接口的维度都很细维度。但是我们能看到最底层的实现,是实现了所有接口的功能。下面我们以此来解释每个接口的功能。来窥探一下Spring中BeanFactory的体系。非常的全，建议大家可以收藏一下，没必要死记硬背。如果不理解的话，背下来也没有什么的用。</p>\\n<p>下面分享，希望对大家有点用。</p>\\n<h3 id=\\"_2-3-1-beanfactory\\" tabindex=\\"-1\\">2.3.1 BeanFactory <a class=\\"header-anchor\\" href=\\"#_2-3-1-beanfactory\\" aria-label=\\"Permalink to &quot;2.3.1 BeanFactory&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>最顶层的接口，提供了根据Bean名称获取Bean的最基础的能力。详细可以看下面的注释说明。接口没有任何实现,只是做定义。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 如果要获取FactoryBean,那么要的Bean的名称前加 &#x26;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tString FACTORY_BEAN_PREFIX </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"&#x26;\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据名称获取实例,如果没有就抛异常,结果是Object类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tObject </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 跟前者一样,不同是结果是泛型类型,会自动帮我们转换类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> T </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 允许指定显式构造函数参数,很少会用</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tObject </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object... </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取Bean实例,如果找到了多个类型,则会报错</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> T </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取实例,并显式构造函数参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> T </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object... </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取Bean的生成对象,这里并不是直接获取了Bean的实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> ObjectProvider&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanProvider</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 跟前者大同小异</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> ObjectProvider&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanProvider</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ResolvableType </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 判断是否保存这个名字的实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> containsBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 判断是否单例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isSingleton</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 判断是否是原型模式</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isPrototype</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// bean名称和类型是否匹配</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isTypeMatch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, ResolvableType </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">typeToMatch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// bean名称和类型是否匹配</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isTypeMatch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">typeToMatch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取名称的类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tClass&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据名称获取类型,FactoryBean比较特殊,allowFactoryBeanIn   // it是说,是否也要算FactoryBean,一般情况用true</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tClass&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> allowFactoryBeanInit</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// bean声明的别名，如果没有则为空数组</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getAliases</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br><span class=\\"line-number\\">53</span><br></div></div><h3 id=\\"_2-3-2-hierarchicalbeanfactory\\" tabindex=\\"-1\\">2.3.2 HierarchicalBeanFactory <a class=\\"header-anchor\\" href=\\"#_2-3-2-hierarchicalbeanfactory\\" aria-label=\\"Permalink to &quot;2.3.2 HierarchicalBeanFactory&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><strong>Hierarchical翻译:</strong> 分层</p>\\n<p>HierarchicalBeanFactory的意思是具有层次关系,这个BeanFactory可以创建一个BeanFactory,那么是否可以根据这个BeanFactory知道是谁创建他的呢? 这个接口就是干这个事情的。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> HierarchicalBeanFactory</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回当前工厂的父工厂</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tBeanFactory </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getParentBeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回当工厂是否包含这个bean,不从父工厂中去获取</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> containsLocalBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><h3 id=\\"_2-3-3-listablebeanfactory\\" tabindex=\\"-1\\">2.3.3 ListableBeanFactory <a class=\\"header-anchor\\" href=\\"#_2-3-3-listablebeanfactory\\" aria-label=\\"Permalink to &quot;2.3.3 ListableBeanFactory&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>一个接口可能会有多个实现,每个实现都是一个Bean。所以根据一个类型可能会获取多个Bean的实例。</li>\\n<li>一个工厂会有很多的Bean,能不能一下获取工厂所有的Bean呢?</li>\\n</ul>\\n<p>这个工厂名字定义的很有意思，Listable, List 所以大多接口是返回集合。你不信,你看下面展示。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ListableBeanFactory</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 是否包含BeanDefinition,BeanDefinition是bean实例化的基   // 本信息。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> containsBeanDefinition</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取BeanDefinition的数量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> getBeanDefinitionCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取BeanDefinition的名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanDefinitionNames</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型,获取这个类型的所有Bean的名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanNamesForType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ResolvableType </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取bean的名称,包含非单例的,允许初始化</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanNamesForType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ResolvableType </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> includeNonSingletons</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> allowEagerInit</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型,获取这个类型的所有Bean的名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanNamesForType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取bean的名称,包含非单例的,允许初始化</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanNamesForType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> includeNonSingletons</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> allowEagerInit</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取Bean的字典,key是名称 value是实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> Map&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeansOfType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 根据类型获取Bean的字典(包含非单例),key是名称 value是实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> Map&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeansOfType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">type</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> includeNonSingletons</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> allowEagerInit</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\tthrows</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取被当前注解修饰的Bean的名称,只获取名称不实例化,支持注解派   // 生的方式</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanNamesForAnnotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> Annotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">annotationType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取被该注解修饰的bean，key是名称,value是实例。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tMap&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeansWithAnnotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> Annotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">annotationType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeansException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取当前名称Bean的,当前注解的信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">A</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> Annotation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> A </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">findAnnotationOnBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">A</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">annotationType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\t\\t\\tthrows</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br></div></div><h3 id=\\"_2-3-4-configurablebeanfactory\\" tabindex=\\"-1\\">2.3.4 ConfigurableBeanFactory <a class=\\"header-anchor\\" href=\\"#_2-3-4-configurablebeanfactory\\" aria-label=\\"Permalink to &quot;2.3.4 ConfigurableBeanFactory&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>这个工厂，是最容易看出他的用途的，名字一个看就是跟配置相关的。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ConfigurableBeanFactory</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> HierarchicalBeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">SingletonBeanRegistry</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 单例:一个容器只都存在实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tString SCOPE_SINGLETON </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"singleton\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 原型:每次getBean一次生成一个实例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tString SCOPE_PROTOTYPE </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"prototype\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置他的父工厂</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setParentBeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(BeanFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">parentBeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> IllegalStateException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置类加载器以用于加载 bean 类。默认是线程上下文类加载器。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setBeanClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ClassLoader </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回此工厂的类加载器以加载 bean 类</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tClassLoader </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 指定用于类型匹配目的的临时 ClassLoader。默认为无</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setTempClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ClassLoader </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">tempClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取临时的类加载器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tClassLoader </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTempClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置是否缓存 bean 元数据，例如给定的 bean 定义（以合并方式）和解析的 bean 类。默认开启。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setCacheBeanMetadata</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> cacheBeanMetadata</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回是否缓存 bean 元数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isCacheBeanMetadata</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// bean 定义值中的表达式指定解析策略。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 默认是 StandardBeanExpressionResolver。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setBeanExpressionResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeanExpressionResolver </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">resolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取解析类型 StandardBeanExpressionResolver</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tBeanExpressionResolver </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getBeanExpressionResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置转换层统一的API,后面有专门章节说这个体系。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setConversionService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ConversionService </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">conversionService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取转换API</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tConversionService </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getConversionService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 给工厂添加一个属性设置的注册器,实际用的不多,但是有必要去了解,后面也会介绍</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> addPropertyEditorRegistrar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(PropertyEditorRegistrar </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">registrar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 为给定类型的所有属性注册给定的自定义属性编辑器。在工厂配置期间调用。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> registerCustomEditor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">requiredType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> PropertyEditor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">propertyEditorClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// BeanFactory 中注册的自定义编辑器初始化给定的 PropertyEditorRegistry</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> copyRegisteredEditorsTo</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(PropertyEditorRegistry </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">registry</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置类型转换器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setTypeConverter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(TypeConverter </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">typeConverter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取类型转换器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tTypeConverter </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTypeConverter</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 添加字符串解析器。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> addEmbeddedValueResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(StringValueResolver </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">valueResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 是否有字符串解析器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> hasEmbeddedValueResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 解析数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tString </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">resolveEmbeddedValue</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">value</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 添加一个新的 BeanPostProcessor，它将应用于此工厂创建的 bean。在工厂配置期间调用。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 非系统定义的处理器，都可以使用Order进行排序</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 这是一个非常重要的Bean处理器</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> addBeanPostProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(BeanPostProcessor </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanPostProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 处理器的个人</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> getBeanPostProcessorCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 注册由给定 Scope 实现支持的给定范围</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 这里稍微解释下什么是Scope,就比如Session内有效或者是Request内有效</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> registerScope</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">scopeName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Scope </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">scope</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回所有当前注册范围的名称,不会公开诸如“singleton”和“prototype”之类的内置作用域</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getRegisteredScopeNames</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取域的域对象</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Nullable</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tScope </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getRegisteredScope</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">scopeName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 提供与该工厂相关的安全访问控制上下文。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tAccessControlContext </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getAccessControlContext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 拷贝当Bean工厂的配置</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> copyConfigurationFrom</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ConfigurableBeanFactory </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">otherFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 给bean注册一个别名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> registerAlias</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">alias</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> BeanDefinitionStoreException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 解析在此工厂中注册的所有别名目标名称和别名，并将给定的 StringValueResolver 应用于它们。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> resolveAliases</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(StringValueResolver </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">valueResolver</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回给定 bean 名称的合并 BeanDefinition，如有必要，将子 bean 定义与其父合并。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tBeanDefinition </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMergedBeanDefinition</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 是否是FactoryBean</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isFactoryBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoSuchBeanDefinitionException;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 设置当前Bean正在创建中。仅供容器内部会使用。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setCurrentlyInCreation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> inCreation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 当前Bean是否创建中</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tboolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> isCurrentlyInCreation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 为给定的 bean 注册一个依赖 bean</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> registerDependentBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">dependentBeanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 返回依赖于指定 bean 的所有 bean 的名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getDependentBeans</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 获取当前Bean依赖的Bean</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getDependenciesForBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 销毁bean</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> destroyBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanInstance</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 销毁当前目标作用域中的指定作用域bean（如果有）</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> destroyScopedBean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">beanName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 销毁单例</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tvoid</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> destroySingletons</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br><span class=\\"line-number\\">53</span><br><span class=\\"line-number\\">54</span><br><span class=\\"line-number\\">55</span><br><span class=\\"line-number\\">56</span><br><span class=\\"line-number\\">57</span><br><span class=\\"line-number\\">58</span><br><span class=\\"line-number\\">59</span><br><span class=\\"line-number\\">60</span><br><span class=\\"line-number\\">61</span><br><span class=\\"line-number\\">62</span><br><span class=\\"line-number\\">63</span><br><span class=\\"line-number\\">64</span><br><span class=\\"line-number\\">65</span><br><span class=\\"line-number\\">66</span><br><span class=\\"line-number\\">67</span><br><span class=\\"line-number\\">68</span><br><span class=\\"line-number\\">69</span><br><span class=\\"line-number\\">70</span><br><span class=\\"line-number\\">71</span><br><span class=\\"line-number\\">72</span><br><span class=\\"line-number\\">73</span><br><span class=\\"line-number\\">74</span><br><span class=\\"line-number\\">75</span><br><span class=\\"line-number\\">76</span><br><span class=\\"line-number\\">77</span><br><span class=\\"line-number\\">78</span><br><span class=\\"line-number\\">79</span><br><span class=\\"line-number\\">80</span><br><span class=\\"line-number\\">81</span><br><span class=\\"line-number\\">82</span><br><span class=\\"line-number\\">83</span><br><span class=\\"line-number\\">84</span><br><span class=\\"line-number\\">85</span><br><span class=\\"line-number\\">86</span><br><span class=\\"line-number\\">87</span><br><span class=\\"line-number\\">88</span><br><span class=\\"line-number\\">89</span><br><span class=\\"line-number\\">90</span><br><span class=\\"line-number\\">91</span><br><span class=\\"line-number\\">92</span><br><span class=\\"line-number\\">93</span><br><span class=\\"line-number\\">94</span><br><span class=\\"line-number\\">95</span><br><span class=\\"line-number\\">96</span><br><span class=\\"line-number\\">97</span><br><span class=\\"line-number\\">98</span><br><span class=\\"line-number\\">99</span><br><span class=\\"line-number\\">100</span><br><span class=\\"line-number\\">101</span><br><span class=\\"line-number\\">102</span><br><span class=\\"line-number\\">103</span><br><span class=\\"line-number\\">104</span><br><span class=\\"line-number\\">105</span><br><span class=\\"line-number\\">106</span><br><span class=\\"line-number\\">107</span><br><span class=\\"line-number\\">108</span><br><span class=\\"line-number\\">109</span><br><span class=\\"line-number\\">110</span><br><span class=\\"line-number\\">111</span><br><span class=\\"line-number\\">112</span><br><span class=\\"line-number\\">113</span><br><span class=\\"line-number\\">114</span><br><span class=\\"line-number\\">115</span><br><span class=\\"line-number\\">116</span><br><span class=\\"line-number\\">117</span><br><span class=\\"line-number\\">118</span><br><span class=\\"line-number\\">119</span><br><span class=\\"line-number\\">120</span><br><span class=\\"line-number\\">121</span><br><span class=\\"line-number\\">122</span><br><span class=\\"line-number\\">123</span><br><span class=\\"line-number\\">124</span><br><span class=\\"line-number\\">125</span><br><span class=\\"line-number\\">126</span><br><span class=\\"line-number\\">127</span><br><span class=\\"line-number\\">128</span><br><span class=\\"line-number\\">129</span><br><span class=\\"line-number\\">130</span><br><span class=\\"line-number\\">131</span><br><span class=\\"line-number\\">132</span><br><span class=\\"line-number\\">133</span><br></div></div><h3 id=\\"_2-3-5-autowirecapablebeanfactory\\" tabindex=\\"-1\\">2.3.5 AutowireCapableBeanFactory <a class=\\"header-anchor\\" href=\\"#_2-3-5-autowirecapablebeanfactory\\" aria-label=\\"Permalink to &quot;2.3.5 AutowireCapableBeanFactory&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>Autowire是不是看着很熟,提供自动注入的方法。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AutowireCapableBeanFactory</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> BeanFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 不需要自动装配</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AUTOWIRE_NO </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 表示按名称自动装配 bean 属性的常量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AUTOWIRE_BY_NAME </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 按照类型来自动装配</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AUTOWIRE_BY_TYPE </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 指示自动装配可以满足的最贪婪构造函数的常量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AUTOWIRE_CONSTRUCTOR </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 3</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t//</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Deprecated</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">\\tint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AUTOWIRE_AUTODETECT </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t// 5.1 才有的。初始化现有 bean 实例时的“原始实例”约定的后缀：附加到完全限定的 bean 类名，例如“com.mypackage.MyClass.ORIGINAL”，以强制返回给定的实例，即没有代理等。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\tString ORIGINAL_INSTANCE_SUFFIX </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\".ORIGINAL\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t//</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br></div></div>","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第02篇:解耦就用Event","url":"/post/java/spring/core02.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/b8f74de10af99991e3fc73632eeeb190.png\\" alt=\\"\\"></p>\\n<p><strong>公众号</strong>: 西魏陶渊明<br/>\\n<strong>CSDN</strong>: <a href=\\"https://springlearn.blog.csdn.net/?type=blog\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://springlearn.blog.csdn.net</a><br/></p>\\n<blockquote>\\n<p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p>\\n</blockquote>\\n<p><img src=\\"https://img.springlearn.cn/blog/8f3392b9badb093f9e1a6472b4a98487.gif\\" alt=\\"\\"></p>\\n<h2 id=\\"一、前言\\" tabindex=\\"-1\\">一、前言 <a class=\\"header-anchor\\" href=\\"#一、前言\\" aria-label=\\"Permalink to &quot;一、前言&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>消息常用做解耦,这句话这样讲,可能大家没有什么体感。下面我们举一个实际开发中的例子,可能会更加帮助大家来理解。现在我们有这么一个系统。用户登录系统, 来完成产品下面给我们提的需求任务。通过完成任务的形式,来发现问题,最后再来解决问题。</p>\\n<h2 id=\\"_1-1-自动签到\\" tabindex=\\"-1\\">1.1 自动签到 <a class=\\"header-anchor\\" href=\\"#_1-1-自动签到\\" aria-label=\\"Permalink to &quot;1.1 自动签到&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>有一天,产品提了一个需求。在用户登录时候,要帮用户自动签到。于是我们代码这样写。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userId,String password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 登录成功处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">doLogin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password)){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 用户签到</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userSign</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ture;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><h2 id=\\"_1-2-满七天赠送金币\\" tabindex=\\"-1\\">1.2 满七天赠送金币 <a class=\\"header-anchor\\" href=\\"#_1-2-满七天赠送金币\\" aria-label=\\"Permalink to &quot;1.2 满七天赠送金币&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/bda67cac5aaf2b523d84529b5b66e0a3.png\\" alt=\\"\\"></p>\\n<p>后来为了提高用户对APP的粘性,产品提了一个需求,当用户连续登录7天,可以增送金币。</p>\\n<p>ps: 这样看起来代码还行,但是需要知道的是,这只是伪代码,实际可能非常复杂。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userId,String password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 登录成功处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">doLogin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password)){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 用户签到</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userSign</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 查询用户登录次数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> queryUserSignCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 连续登录7天,赠送7个金币</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 7</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">       sendGiftToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">7L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ture;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br></div></div><h2 id=\\"_1-3-自动领取徽章\\" tabindex=\\"-1\\">1.3 自动领取徽章 <a class=\\"header-anchor\\" href=\\"#_1-3-自动领取徽章\\" aria-label=\\"Permalink to &quot;1.3 自动领取徽章&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>后台有一天产品又说,当用户连续登录了14天,自动领取徽章。哎这个怎么有点像CSDN呢?</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/525752144d5e3fe54c375a6ac355e9c4.png\\" alt=\\"\\"></p>\\n<p>soga...</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userId,String password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 登录成功处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">doLogin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password)){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 用户签到</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userSign</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 查询用户登录次数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> queryUserSignCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 连续登录7天,赠送7个金币</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 7</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">       sendGiftToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">7L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 14</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">       // 连续登录14天,自动发放徽章</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">       sendBadgeToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ture;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br></div></div><p>这里我们思考一下,我们明明是一个用户登录系统,为什么还要给用户发礼品,关心用户签到? 这不是应该是\\n营销团队关心的事情吗? login就是一个登录方法,为什么代码越写越多了? 于是乎我们开始进行第一次解耦了。将签到和赠送礼品的逻辑都拆解出营销的模块。</p>\\n<h2 id=\\"_1-4-营销业务解耦\\" tabindex=\\"-1\\">1.4 营销业务解耦 <a class=\\"header-anchor\\" href=\\"#_1-4-营销业务解耦\\" aria-label=\\"Permalink to &quot;1.4 营销业务解耦&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>将原本属于用户营销的业务解耦到一个模块或者是拆解出微服务。于是乎代码就是这样,\\n以后再有用户营销的业务,终于不用写在用户登录的方法里面了。login(...)。应该能坚持几个月了吧。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserMarketingService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> userMarketing</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">userId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 用户签到</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userSign</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 查询用户登录次数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> queryUserSignCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 连续登录7天,赠送7个金币</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 7</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">         sendGiftToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">7L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 14</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">         // 连续登录14天,自动发放徽章</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">         sendBadgeToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userId,String password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 登录成功处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">doLogin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password)){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    userMarketingService.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userMarketing</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ture;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 营销处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserMarketingListener</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ApplicationListener</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">UserLoginEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onApplicationEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(UserLoginEvent </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">event</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // 用户签到</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      Long userId </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> event.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">userSign</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 查询用户登录次数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> queryUserSignCount</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">      // 连续登录7天,赠送7个金币</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 7</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">         sendGiftToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">7L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(signCount </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 14</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">         // 连续登录14天,自动发放徽章</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">         sendBadgeToUser</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 风控处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserSafeRiskListener</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> implements</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ApplicationListener</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">UserLoginEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onApplicationEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(UserLoginEvent </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">event</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">       // 处理风控业务</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br><span class=\\"line-number\\">53</span><br><span class=\\"line-number\\">54</span><br><span class=\\"line-number\\">55</span><br></div></div><h2 id=\\"_1-5-用户登录风控升级\\" tabindex=\\"-1\\">1.5 用户登录风控升级 <a class=\\"header-anchor\\" href=\\"#_1-5-用户登录风控升级\\" aria-label=\\"Permalink to &quot;1.5 用户登录风控升级&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>用户登录终于跟营销解耦,现在又来了新的挑战,随着我们APP的用户的增长,用户的数据安全越来越重要了。这个时候我们开始搭建了我们的风险控制部门。</p>\\n<ul>\\n<li>解决这些风险问题: 用户密码盗用,异地登录,频繁换设备登录等造成的安全措施。</li>\\n</ul>\\n<p>产品提了一个新的需求,在登录的时候,将用户信息发送给风控部门进行检查,一旦检测部通过,自动下线,冻结用户账号。</p>\\n<p>于是乎我们又要开始动我们的login方法了。像这种情况还有很多很多,都需要再我们登录成功的时候,去处理一些信息。但是我们分析下,我们还有其他办法吗?</p>\\n<p>当然有就是<strong>通过事件去解耦</strong>。我们只定义一个登录成功事件,谁想关心登录成功,想做点事情,就去订阅这个事件就行了。一劳永逸。登录就只干登录的事情就行了。谁想干什么事情,谁就自己去订阅。如下代码示例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 定义登录事件</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserLoginEvent</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ApplicationEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 登录用户</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    User loginUser;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 用户登录成功或者失败</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    boolean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> loginFlag;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserLoginEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(User </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">boolean</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> loginFlag</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(login);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.loginUser </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> login;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.loginFlag </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> loginFlag;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> login</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String userId,String password){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">  // 登录成功处理逻辑</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">doLogin</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userId,password)){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    applicationEventPublisher.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">publishEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserLoginEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(userInfo,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">true</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">))</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ture;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 登录失败发送失败事件</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    applicationEventPublisher.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">publishEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> UserLoginEvent</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">true</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">))</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> false</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br></div></div><p>好了，前戏我们铺垫完了，下面来学习Spring中给我们提供的事件管理机制。</p>\\n<h2 id=\\"二、内置标准事件\\" tabindex=\\"-1\\">二、内置标准事件 <a class=\\"header-anchor\\" href=\\"#二、内置标准事件\\" aria-label=\\"Permalink to &quot;二、内置标准事件&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/037d4f8eea977e42efbfc5e225b0183e.png\\" alt=\\"\\"></p>\\n<p>什么是内置的标准事件? 其实就是Spring中自定义的事件,告诉你当前容器的状态,允许你做点自己的事情。\\n哎? 这不也是解耦吗?</p>\\n<p>这部分内容前面已经说过了。</p>\\n<p>| 事件                         | 解释                                                         |\\n| :</p>\\n","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第03篇:Validation参数校验","url":"/post/java/spring/core03.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第04篇:Resources资源文件","url":"/post/java/spring/core04.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第05篇:SpEL强大的表达式语言","url":"/post/java/spring/core05.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第06篇:AOP面向切面编程","url":"/post/java/spring/core06.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/b8f74de10af99991e3fc73632eeeb190.png\\" alt=\\"\\"></p>\\n<p><strong>公众号</strong>: 西魏陶渊明<br/>\\n<strong>CSDN</strong>: <a href=\\"https://springlearn.blog.csdn.net/?type=blog\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://springlearn.blog.csdn.net</a><br/></p>\\n<blockquote>\\n<p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p>\\n</blockquote>\\n<p><img src=\\"https://img.springlearn.cn/blog/8f3392b9badb093f9e1a6472b4a98487.gif\\" alt=\\"\\"></p>\\n<h2 id=\\"一、前言\\" tabindex=\\"-1\\">一、前言 <a class=\\"header-anchor\\" href=\\"#一、前言\\" aria-label=\\"Permalink to &quot;一、前言&quot;\\">&ZeroWidthSpace;</a></h2>\\n<blockquote>\\n<p>面向切面编程 (AOP) 通过提供另一种思考程序结构的方式来补充面向对象编程 (OOP)。</p>\\n</blockquote>\\n<p>OOP 中模块化的关键单元是类，而 AOP 中模块化的单元是切面。切面支持跨多种类型和对象的关注点（例如事务管理）的模块化。（这种关注点在 AOP 文献中通常被称为“横切”关注点。）</p>\\n<p>Spring 的关键组件之一是 AOP 框架。虽然 Spring IoC 容器不依赖 AOP（这意味着如果您不想使用 AOP，则无需使用 AOP），AOP 补充了 Spring IoC 以提供非常强大的中间件解决方案。</p>\\n<p>AOP 在 Spring Framework 中用于：</p>\\n<ol>\\n<li>提供声明式事务管理。（TransactionalRepositoryProxyPostProcessor#postProcess）</li>\\n<li>让用户实现自定义切面，用 AOP 补充他们对 OOP 的使用。\\n<ul>\\n<li>常用于接口日志打印</li>\\n<li>或是基于接口的权限校验、数据预处理等操作</li>\\n</ul>\\n</li>\\n</ol>\\n<p>下面我们就学习下spring中aop的用法, 不用死记硬背, 了解收藏, 遇到会用即可。</p>\\n<h2 id=\\"二、aop的概念\\" tabindex=\\"-1\\">二、AOP的概念 <a class=\\"header-anchor\\" href=\\"#二、aop的概念\\" aria-label=\\"Permalink to &quot;二、AOP的概念&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_2-1-aspect-切面\\" tabindex=\\"-1\\">2.1 Aspect 切面 <a class=\\"header-anchor\\" href=\\"#_2-1-aspect-切面\\" aria-label=\\"Permalink to &quot;2.1 Aspect 切面&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Aspect: 方面、切面,如果说oop是看整体,那么aop就是看一个面。</p>\\n<p>Spring 提供两种使用方法,1是基于注解方式, 2是基于配置方式。</p>\\n<h3 id=\\"_2-1-1-注解方式\\" tabindex=\\"-1\\">2.1.1 注解方式 <a class=\\"header-anchor\\" href=\\"#_2-1-1-注解方式\\" aria-label=\\"Permalink to &quot;2.1.1 注解方式&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>Spring会从被@Aspect修饰的类中读取切面信息,为符合条件的对象生成代理类。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Aspect</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> NotVeryUsefulAspect</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><h3 id=\\"_2-1-2-xml方式\\" tabindex=\\"-1\\">2.1.2 xml方式 <a class=\\"header-anchor\\" href=\\"#_2-1-2-xml方式\\" aria-label=\\"Permalink to &quot;2.1.2 xml方式&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">aop:config</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">aop:aspect</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"myAspect\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ref</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"aBean\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        ...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">aop:aspect</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">aop:config</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">bean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> id</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"aBean\\"</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> class</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"...\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">bean</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><p>因为目前使用SpringBoot的较多,使用配置的方式的比较少,本文也只介绍使用注解方式。如果想了解xml配置方式,可以参考官方文档。</p>\\n<h2 id=\\"_2-2-join-point-连接点\\" tabindex=\\"-1\\">2.2 Join point 连接点 <a class=\\"header-anchor\\" href=\\"#_2-2-join-point-连接点\\" aria-label=\\"Permalink to &quot;2.2 Join point 连接点&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Join point(连接点)：程序执行过程中的一个点，例如方法的执行或异常的处理。在 Spring AOP 中，一个连接点总是代表一个方法执行。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/e05790e9d53efc94f952730851f7f669.png\\" alt=\\"\\"></p>\\n<ul>\\n<li>JoinPoint 基类方法，可以获取如下信息。</li>\\n<li>ProceedingJoinPoint 公开proceed(..)方法，以支持@AJ方面的around通知</li>\\n</ul>\\n<p>我们可以通过连接点来获取当前执行的方法的信息,具体如下。</p>\\n<h3 id=\\"_2-2-1-接口声明\\" tabindex=\\"-1\\">2.2.1 接口声明 <a class=\\"header-anchor\\" href=\\"#_2-2-1-接口声明\\" aria-label=\\"Permalink to &quot;2.2.1 接口声明&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> JoinPoint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当前执行的切面,或者说是拦截的方法</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 连接点的缩写字符串表示形式。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toShortString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 连接点的扩展字符串表示形式。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toLongString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 返回当前正在执行的对象。这将始终与@this切入点指示符匹配的对象相同。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 除非您特别需要这种反射访问，否则您应该使用this切入点指示符来获取该对象，</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 以获得更好的静态类型和性能。 当当前没有可用的执行对象时返回null。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 这包括在静态上下文中出现的所有连接点。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当前正在执行的对象(如果不可用则为空——例如静态上下文)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getThis</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 返回目标对象。这将始终与目标切入点指示符匹配的对象相同。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getTarget</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 这个连接点上的参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getArgs</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 连接的执行方法签名,可以获取到执行的方法</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Signature </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSignature</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 源代码信息，比如获取执行的行，列，文件名。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    SourceLocation </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSourceLocation</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当前的拦击的类型。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 封装此连接点的静态部分的对象。</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    StaticPart </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getStaticPart</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br></div></div><h3 id=\\"_2-2-2-实践\\" tabindex=\\"-1\\">2.2.2 实践 <a class=\\"header-anchor\\" href=\\"#_2-2-2-实践\\" aria-label=\\"Permalink to &quot;2.2.2 实践&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AopDemoService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> say</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"AopDemoService Say:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> name);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Aspect</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Component</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AspectManager</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Before</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">value</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> =</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"within(AopDemoService)\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> beforeArgs</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(JoinPoint </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">joinPoint</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"拦截器逻辑</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br></div></div>","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第07篇:Converter SPI类型转换","url":"/post/java/spring/core07.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第08篇:Data Binding类型绑定","url":"/post/java/spring/core08.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第09篇:MessageSource国际化","url":"/post/java/spring/core09.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第10篇:Spring Webflux","url":"/post/java/spring/core10.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"第09篇:Formatter 格式转换","url":"/post/java/spring/core11.html","excerpt":"","category":"Spring Framework","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring 启蒙","url":"/post/java/spring/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Spring-retry重试组件","url":"/post/java/spring/spring-retry.html","excerpt":"","category":"Spring","date":{"time":null,"string":"Invalid Date"}},{"title":"MVCC机制","url":"/post/java/sql/MVCC.html","excerpt":"","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"Mysql优化示例","url":"/post/java/sql/SQL优化示例.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<h2 id=\\"创建表\\" tabindex=\\"-1\\">创建表 <a class=\\"header-anchor\\" href=\\"#创建表\\" aria-label=\\"Permalink to &quot;创建表&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-sql vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">sql</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">use</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> test;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">create</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> table</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> test03</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a1 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a2 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a3 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> a4 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">alter</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> table</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> test03 </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">add</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> index</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> idx_a1_a2_a3_a4(a1,a2,a3,a4);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div>","date":{"time":null,"string":"Invalid Date"}},{"title":"SQL索引性能优化","url":"/post/java/sql/SQL索引性能优化.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<h1 id=\\"建表\\" tabindex=\\"-1\\">建表 <a class=\\"header-anchor\\" href=\\"#建表\\" aria-label=\\"Permalink to &quot;建表&quot;\\">&ZeroWidthSpace;</a></h1>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>// 建表</span></span>\\n<span class=\\"line\\"><span>CREATE TABLE IF NOT EXISTS staffs(</span></span>\\n<span class=\\"line\\"><span>    id INT PRIMARY KEY AUTO_INCREMENT,</span></span>\\n<span class=\\"line\\"><span>    name VARCHAR(24) NOT NULL DEFAULT \\"\\" COMMENT'姓名',</span></span>\\n<span class=\\"line\\"><span>    age INT NOT NULL DEFAULT 0 COMMENT'年龄',</span></span>\\n<span class=\\"line\\"><span>    pos VARCHAR(20) NOT NULL DEFAULT \\"\\" COMMENT'职位',</span></span>\\n<span class=\\"line\\"><span>    add_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT'入职事件'</span></span>\\n<span class=\\"line\\"><span>) CHARSET utf8 COMMENT'员工记录表';</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>// 插入数据</span></span>\\n<span class=\\"line\\"><span>INSERT INTO \`test\`.\`staffs\` (\`name\`, \`age\`, \`pos\`, \`add_time\`) VALUES ('z3', 22, 'manager', now());</span></span>\\n<span class=\\"line\\"><span>INSERT INTO \`test\`.\`staffs\` (\`name\`, \`age\`, \`pos\`, \`add_time\`) VALUES ('July', 23, 'dev', now());</span></span>\\n<span class=\\"line\\"><span>INSERT INTO \`test\`.\`staffs\` (\`name\`, \`age\`, \`pos\`, \`add_time\`) VALUES ('2000', 23, 'dev', now());</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>// 建立复合索引（即一个索引包含多个字段）</span></span>\\n<span class=\\"line\\"><span>ALTER TABLE staffs ADD INDEX idx_staffs_nameAgePos(name, age, pos);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br></div></div>","date":{"time":null,"string":"Invalid Date"}},{"title":"SQL锁机制","url":"/post/java/sql/SQL锁机制.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<h2 id=\\"一、场景模拟\\" tabindex=\\"-1\\">一、场景模拟 <a class=\\"header-anchor\\" href=\\"#一、场景模拟\\" aria-label=\\"Permalink to &quot;一、场景模拟&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-sql vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">sql</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">create</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> table</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> shop</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  id </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">4</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">primary key</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  name</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">20</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> '衣服'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">  status</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">20</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> '可售'</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)engine </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> innodb </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> charset</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">utf8;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">insert into</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> shop  </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">values</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">'衣服'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">'可售'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>mysql> select * from shop;</span></span>\\n<span class=\\"line\\"><span>+</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div>","date":{"time":null,"string":"Invalid Date"}},{"title":"explain调优","url":"/post/java/sql/explain.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<blockquote>\\n<p>这篇文章主要讲 explain 如何使用，还有 explain 各种参数概念，之后会讲优化</p>\\n</blockquote>\\n<h1 id=\\"一、explain-用法\\" tabindex=\\"-1\\">一、Explain 用法 <a class=\\"header-anchor\\" href=\\"#一、explain-用法\\" aria-label=\\"Permalink to &quot;一、Explain 用法&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>explain模拟Mysql优化器是如何执行SQL查询语句的，从而知道Mysql是如何处理你的SQL语句的。分析你的查询语句或是表结构的性能瓶颈。</p>\\n<p><strong>语法</strong>：<code>Explain + SQL 语句;</code></p>\\n<p>如：<code>Explain select * from user;</code> 会生成如下 SQL 分析结果，下面详细对每个字段进行详解</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351159000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"_1-id\\" tabindex=\\"-1\\">1. id <a class=\\"header-anchor\\" href=\\"#_1-id\\" aria-label=\\"Permalink to &quot;1. id&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>是一组数字，代表多个表之间的查询顺序，或者包含子句查询语句中的顺序，id 总共分为三种情况，依次详解</p>\\n<h3 id=\\"id相同\\" tabindex=\\"-1\\">id相同 <a class=\\"header-anchor\\" href=\\"#id相同\\" aria-label=\\"Permalink to &quot;id相同&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>id相同，执行顺序由上至下\\n<img src=\\"https://img.springlearn.cn/blog/learn_1596351240000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"id不同\\" tabindex=\\"-1\\">id不同 <a class=\\"header-anchor\\" href=\\"#id不同\\" aria-label=\\"Permalink to &quot;id不同&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>id 不同，如果是子查询，id 号会递增，id 值越大优先级越高，越先被执行</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351303000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"id相同和不同\\" tabindex=\\"-1\\">id相同和不同 <a class=\\"header-anchor\\" href=\\"#id相同和不同\\" aria-label=\\"Permalink to &quot;id相同和不同&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>id 相同和不同的情况同时存在</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351331000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"_2-select-type\\" tabindex=\\"-1\\">2. select_type <a class=\\"header-anchor\\" href=\\"#_2-select-type\\" aria-label=\\"Permalink to &quot;2. select_type&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>select_type 包含以下几种值</p>\\n<p><code>simple</code>、<code>primary</code>、<code>subquery</code>、<code>derived</code>、<code>union</code>、<code>union result</code></p>\\n<h3 id=\\"simple\\" tabindex=\\"-1\\">simple <a class=\\"header-anchor\\" href=\\"#simple\\" aria-label=\\"Permalink to &quot;simple&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>简单的 <code>select</code> 查询，查询中不包含子查询或者 <code>union</code> 查询</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351522000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"primary\\" tabindex=\\"-1\\">primary <a class=\\"header-anchor\\" href=\\"#primary\\" aria-label=\\"Permalink to &quot;primary&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>如果 SQL 语句中包含任何子查询，那么子查询的最外层会被标记为 <code>primary</code></p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351575000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"subquery\\" tabindex=\\"-1\\">subquery <a class=\\"header-anchor\\" href=\\"#subquery\\" aria-label=\\"Permalink to &quot;subquery&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>在 <code>select</code> 或者 <code>where</code> 里包含了子查询，那么子查询就会被标记为 <code>subQquery</code>，同三.二同时出现</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351651000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"derived\\" tabindex=\\"-1\\">derived <a class=\\"header-anchor\\" href=\\"#derived\\" aria-label=\\"Permalink to &quot;derived&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>在 <code>from</code> 中包含的一个子查询，会被标记为衍生查询，会把查询结果放到一个临时表中</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351720000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"union-union-result\\" tabindex=\\"-1\\">union / union result <a class=\\"header-anchor\\" href=\\"#union-union-result\\" aria-label=\\"Permalink to &quot;union / union result&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>如果有两个 <code>select</code> 查询语句，他们之间用 <code>union</code> 连起来查询，那么第二个 <code>select</code> 会被标记为 <code>union</code>，<code>union</code> 的结果被标记为 <code>union result</code>。它的 id 是为 null 的</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596351779000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"_3-table\\" tabindex=\\"-1\\">3. table <a class=\\"header-anchor\\" href=\\"#_3-table\\" aria-label=\\"Permalink to &quot;3. table&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>表示这一行的数据是哪张表的数据</p>\\n<h2 id=\\"_4-type\\" tabindex=\\"-1\\">4. type <a class=\\"header-anchor\\" href=\\"#_4-type\\" aria-label=\\"Permalink to &quot;4. type&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>type 是代表 MySQL 使用了哪种索引类型，不同的索引类型的查询效率也是不一样的，type 大致有以下种类。\\n越往上性能越高。</p>\\n<p>| Type类型 | 说明                                              |\\n|</p>\\n","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"Join大法","url":"/post/java/sql/join.html","excerpt":"","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"MySQL","url":"/post/java/sql/事务.html","excerpt":"","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"如何找到垃圾SQL语句,你知道这些方式吗？","url":"/post/java/sql/垃圾SQL.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<blockquote>\\n<p>这篇文章主要是讲如何找到需要优化的SQL语句，即找到查询速度非常慢的SQL语句。</p>\\n</blockquote>\\n<h1 id=\\"一、慢查询日志\\" tabindex=\\"-1\\">一、慢查询日志 <a class=\\"header-anchor\\" href=\\"#一、慢查询日志\\" aria-label=\\"Permalink to &quot;一、慢查询日志&quot;\\">&ZeroWidthSpace;</a></h1>\\n<h2 id=\\"_1-何为慢查询日志\\" tabindex=\\"-1\\">1. 何为慢查询日志 <a class=\\"header-anchor\\" href=\\"#_1-何为慢查询日志\\" aria-label=\\"Permalink to &quot;1. 何为慢查询日志&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li>慢查询日志是MySQL提供的一种日志记录，它用来记录查询响应时间超过阀值的SQL语句</li>\\n<li>这个时间阀值通过参数 <code>long_query_time</code> 设置，如果SQL语句查询时间大于这个值，则会被记录到慢查询日志中，这个值默认是10秒</li>\\n<li>MySQL默认不开启慢查询日志，在需要调优的时候可以手动开启，但是多少会对数据库性能有点影响</li>\\n</ul>\\n<h2 id=\\"_2-如何开启慢查询日志\\" tabindex=\\"-1\\">2. 如何开启慢查询日志 <a class=\\"header-anchor\\" href=\\"#_2-如何开启慢查询日志\\" aria-label=\\"Permalink to &quot;2. 如何开启慢查询日志&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>查看是否开启了慢查询日志</p>\\n<p><code>SHOW VARIABLES LIKE '%slow_query_log%'</code></p>\\n<p>用命令方式开启慢查询日志，但是重启MySQL后此设置会失效</p>\\n<p><code>set global slow_query_log = 1</code></p>\\n<p>永久生效开启方式可以在my.cnf里进行配置，在<code>mysqld</code>下新增以下两个参数，重启MySQL即可生效</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>slow_query_log=1</span></span>\\n<span class=\\"line\\"><span>slow_query_log_file=日志文件存储路径</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><h2 id=\\"_3-慢查询时间阀值\\" tabindex=\\"-1\\">3. 慢查询时间阀值 <a class=\\"header-anchor\\" href=\\"#_3-慢查询时间阀值\\" aria-label=\\"Permalink to &quot;3. 慢查询时间阀值&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>查看慢查询时间阀值</p>\\n<p><code>SHOW VARIABLES LIKE 'long_query_time%';</code></p>\\n<p>修改慢查询时间阀值</p>\\n<p><code>set global long_query_time=3;</code></p>\\n<p>修改后的时间阀值生效</p>\\n<p><code>需要重新连接或者新开一个回话才能看到修改值。</code></p>\\n<p>在MySQL配置文件中修改时间阀值</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[mysqld]下配置</span></span>\\n<span class=\\"line\\"><span>slow_query_log=1</span></span>\\n<span class=\\"line\\"><span>slow_query_log_file=日志文件存储路径</span></span>\\n<span class=\\"line\\"><span>long_query_time=3</span></span>\\n<span class=\\"line\\"><span>log_output=FILE</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><h1 id=\\"二、慢查询日志分析工具\\" tabindex=\\"-1\\">二、慢查询日志分析工具 <a class=\\"header-anchor\\" href=\\"#二、慢查询日志分析工具\\" aria-label=\\"Permalink to &quot;二、慢查询日志分析工具&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>慢查询日志可能会数据量非常大，那么我们如何快速找到需要优化的SQL语句呢，这个神奇诞生了，它就是mysqldumpshow。</p>\\n<h2 id=\\"_1-mysqldumpslow-help语法\\" tabindex=\\"-1\\">1. mysqldumpslow --help语法 <a class=\\"header-anchor\\" href=\\"#_1-mysqldumpslow-help语法\\" aria-label=\\"Permalink to &quot;1. mysqldumpslow --help语法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1596350361000.png\\" alt=\\"\\"></p>\\n<p>通过mysqldumpslow --help可知这个命令是由三部分组成：mysqldumpslow <code>[日志查找选项] [日志文件存储位置]</code>。</p>\\n<h2 id=\\"_2-日志查找选项\\" tabindex=\\"-1\\">2. 日志查找选项 <a class=\\"header-anchor\\" href=\\"#_2-日志查找选项\\" aria-label=\\"Permalink to &quot;2. 日志查找选项&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li>s：是表示按何种方式排序</li>\\n</ul>\\n<p>| 选项 | 说明                                                |\\n|</p>\\n","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"海量数据模拟","url":"/post/java/sql/海量数据模拟.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<h2 id=\\"一、创建表\\" tabindex=\\"-1\\">一、创建表 <a class=\\"header-anchor\\" href=\\"#一、创建表\\" aria-label=\\"Permalink to &quot;一、创建表&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-sql vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">sql</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">create</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> table</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> dept</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> dno </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">5</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">primary key</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> dname </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">20</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> ''</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> loc </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">30</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> ''</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) engine </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">innodb </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> charset</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">utf8;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">create</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> table</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> emp</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> eid </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">5</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">primary key</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ename </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">20</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> ''</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> job </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">varchar</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">20</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> ''</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> deptno </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">5</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">not null</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> default</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) engine </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">innodb </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">default</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  charset</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">utf8;</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br></div></div><h2 id=\\"二、存储函数插入海量数量\\" tabindex=\\"-1\\">二、存储函数插入海量数量 <a class=\\"header-anchor\\" href=\\"#二、存储函数插入海量数量\\" aria-label=\\"Permalink to &quot;二、存储函数插入海量数量&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>存储过程无return,存储函数有。</p>\\n<h3 id=\\"_1-创建存储函数生成id和name\\" tabindex=\\"-1\\">1. 创建存储函数生成id和name <a class=\\"header-anchor\\" href=\\"#_1-创建存储函数生成id和name\\" aria-label=\\"Permalink to &quot;1. 创建存储函数生成id和name&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>name随机字符串</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>delimiter $</span></span>\\n<span class=\\"line\\"><span>create function randstring(n int) returns varchar(255)</span></span>\\n<span class=\\"line\\"><span>begin </span></span>\\n<span class=\\"line\\"><span>    declare all_str varchar(100) default 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';</span></span>\\n<span class=\\"line\\"><span>    declare return_str varchar(255) default '';</span></span>\\n<span class=\\"line\\"><span>    declare i int default 0;</span></span>\\n<span class=\\"line\\"><span>    while i &#x3C;n</span></span>\\n<span class=\\"line\\"><span>    do</span></span>\\n<span class=\\"line\\"><span>        set return_str = concat(return_str,substring(all_str,rand()*52,1));</span></span>\\n<span class=\\"line\\"><span>        set i = i+1;</span></span>\\n<span class=\\"line\\"><span>    end while;    </span></span>\\n<span class=\\"line\\"><span>    return return_str;</span></span>\\n<span class=\\"line\\"><span>end $</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br></div></div><p><code>ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable)</code></p>\\n<p>如果开启了慢慢查询日志,在开启存储函数就会冲突,解决办法1就是管理慢日志查询。</p>\\n<p>解决办法2:</p>\\n<p><code>show variables like '%log_bin_trust_function_creators%';</code></p>\\n<p><code>set global log_bin_trust_function_creators=1;</code></p>\\n<p>id随机数</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>delimiter $</span></span>\\n<span class=\\"line\\"><span>create function rand_num()returns int(5)</span></span>\\n<span class=\\"line\\"><span>begin</span></span>\\n<span class=\\"line\\"><span>    declare i int default 0;</span></span>\\n<span class=\\"line\\"><span>    set i = floor(rand() * 100);</span></span>\\n<span class=\\"line\\"><span>    return i;</span></span>\\n<span class=\\"line\\"><span>end $;</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><h3 id=\\"_2-通过存储过程插入海量数据emp\\" tabindex=\\"-1\\">2. 通过存储过程插入海量数据emp <a class=\\"header-anchor\\" href=\\"#_2-通过存储过程插入海量数据emp\\" aria-label=\\"Permalink to &quot;2. 通过存储过程插入海量数据emp&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>create procedure insert_emp(in eid_start int(10),in data_times int(10))</span></span>\\n<span class=\\"line\\"><span>begin</span></span>\\n<span class=\\"line\\"><span>    declare i int default 0;</span></span>\\n<span class=\\"line\\"><span>    set autocommit = 0;</span></span>\\n<span class=\\"line\\"><span>    repeat</span></span>\\n<span class=\\"line\\"><span>        insert into emp values(eid_start + i,randstring(5),'other',rand_num());</span></span>\\n<span class=\\"line\\"><span>        set i = i + 1;</span></span>\\n<span class=\\"line\\"><span>        until i = data_times</span></span>\\n<span class=\\"line\\"><span>    end repeat;   </span></span>\\n<span class=\\"line\\"><span>    commit;</span></span>\\n<span class=\\"line\\"><span>end $;</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br></div></div><h3 id=\\"_2-通过存储过程插入海量数据dept\\" tabindex=\\"-1\\">2. 通过存储过程插入海量数据dept <a class=\\"header-anchor\\" href=\\"#_2-通过存储过程插入海量数据dept\\" aria-label=\\"Permalink to &quot;2. 通过存储过程插入海量数据dept&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>create procedure insert_dept(in dno_start int(10),in data_times int(10))</span></span>\\n<span class=\\"line\\"><span>begin</span></span>\\n<span class=\\"line\\"><span>    declare i int default 0;</span></span>\\n<span class=\\"line\\"><span>    set autocommit = 0;</span></span>\\n<span class=\\"line\\"><span>    repeat</span></span>\\n<span class=\\"line\\"><span>        insert into dept values(dno_start+i,randstring(6),randstring(8));</span></span>\\n<span class=\\"line\\"><span>        set i = i + 1;</span></span>\\n<span class=\\"line\\"><span>        until i = data_times</span></span>\\n<span class=\\"line\\"><span>    end repeat;</span></span>\\n<span class=\\"line\\"><span>commit;</span></span>\\n<span class=\\"line\\"><span>end$</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br></div></div><h3 id=\\"_3-插入海量数据\\" tabindex=\\"-1\\">3. 插入海量数据 <a class=\\"header-anchor\\" href=\\"#_3-插入海量数据\\" aria-label=\\"Permalink to &quot;3. 插入海量数据&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><code>delimiter ;</code>分割符改回原来</p>\\n<p>员工表插入80w条数据\\n<code>call insert_emp(1000,800000);</code>\\n部门表插入30条数据\\n<code>call insert_dept(10,30);</code></p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>mysql> select count(1) from emp;</span></span>\\n<span class=\\"line\\"><span>+</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div>","category":"SQL优化","date":{"time":null,"string":"Invalid Date"}},{"title":"synchronized锁升级","url":"/post/java/synchronized.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Arthas（阿尔萨斯） 能为你做什么","url":"/post/java/tools/arthas/README.html","excerpt":"","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"基础命令","url":"/post/java/tools/arthas/base-cli.html","excerpt":"<h2 id=\\"一、启动arthas\\" tabindex=\\"-1\\">一、启动Arthas <a class=\\"header-anchor\\" href=\\"#一、启动arthas\\" aria-label=\\"Permalink to &quot;一、启动Arthas&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>curl -O https://arthas.aliyun.com/arthas-boot.jar</span></span>\\n<span class=\\"line\\"><span>java -jar arthas-boot.jar</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>启动命令 <code>java -jar arthas-boot.jar</code></p>\\n<h2 id=\\"二、选择进程\\" tabindex=\\"-1\\">二、选择进程 <a class=\\"header-anchor\\" href=\\"#二、选择进程\\" aria-label=\\"Permalink to &quot;二、选择进程&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647178107000.png\\" alt=\\"\\"></p>\\n<p>直接选择我们要监控的进程，输入3进入</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[INFO] Attach process 28667 success.</span></span>\\n<span class=\\"line\\"><span>[INFO] arthas-client connect 127.0.0.1 3658</span></span>\\n<span class=\\"line\\"><span>  ,</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div>","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"class/classloader相关","url":"/post/java/tools/arthas/class-cli.html","excerpt":"<h2 id=\\"一、启动arthas\\" tabindex=\\"-1\\">一、启动Arthas <a class=\\"header-anchor\\" href=\\"#一、启动arthas\\" aria-label=\\"Permalink to &quot;一、启动Arthas&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>curl -O https://arthas.aliyun.com/arthas-boot.jar</span></span>\\n<span class=\\"line\\"><span>java -jar arthas-boot.jar</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>启动命令 <code>java -jar arthas-boot.jar</code></p>\\n<h2 id=\\"二、选择进程\\" tabindex=\\"-1\\">二、选择进程 <a class=\\"header-anchor\\" href=\\"#二、选择进程\\" aria-label=\\"Permalink to &quot;二、选择进程&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647178107000.png\\" alt=\\"\\"></p>\\n<p>直接选择我们要监控的进程，输入3进入</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[INFO] Attach process 28667 success.</span></span>\\n<span class=\\"line\\"><span>[INFO] arthas-client connect 127.0.0.1 3658</span></span>\\n<span class=\\"line\\"><span>  ,</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div>","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"JVM相关命令","url":"/post/java/tools/arthas/jvm-cli.html","excerpt":"<h2 id=\\"一、启动arthas\\" tabindex=\\"-1\\">一、启动Arthas <a class=\\"header-anchor\\" href=\\"#一、启动arthas\\" aria-label=\\"Permalink to &quot;一、启动Arthas&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>curl -O https://arthas.aliyun.com/arthas-boot.jar</span></span>\\n<span class=\\"line\\"><span>java -jar arthas-boot.jar</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>启动命令 <code>java -jar arthas-boot.jar</code></p>\\n<h2 id=\\"二、选择进程\\" tabindex=\\"-1\\">二、选择进程 <a class=\\"header-anchor\\" href=\\"#二、选择进程\\" aria-label=\\"Permalink to &quot;二、选择进程&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647178107000.png\\" alt=\\"\\"></p>\\n<p>直接选择我们要监控的进程，输入3进入</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[INFO] Attach process 28667 success.</span></span>\\n<span class=\\"line\\"><span>[INFO] arthas-client connect 127.0.0.1 3658</span></span>\\n<span class=\\"line\\"><span>  ,</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div>","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"基础教程","url":"/post/java/tools/arthas/learn.html","excerpt":"<h2 id=\\"一、启动arthas\\" tabindex=\\"-1\\">一、启动Arthas <a class=\\"header-anchor\\" href=\\"#一、启动arthas\\" aria-label=\\"Permalink to &quot;一、启动Arthas&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>curl -O https://arthas.aliyun.com/arthas-boot.jar</span></span>\\n<span class=\\"line\\"><span>java -jar arthas-boot.jar</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>启动命令 <code>java -jar arthas-boot.jar</code></p>\\n<h2 id=\\"二、选择进程\\" tabindex=\\"-1\\">二、选择进程 <a class=\\"header-anchor\\" href=\\"#二、选择进程\\" aria-label=\\"Permalink to &quot;二、选择进程&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647178107000.png\\" alt=\\"\\"></p>\\n<p>直接选择我们要监控的进程，输入3进入</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[INFO] Attach process 28667 success.</span></span>\\n<span class=\\"line\\"><span>[INFO] arthas-client connect 127.0.0.1 3658</span></span>\\n<span class=\\"line\\"><span>  ,</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div>","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"monitor/watch/trace相关","url":"/post/java/tools/arthas/watch-cli.html","excerpt":"<h2 id=\\"一、启动arthas\\" tabindex=\\"-1\\">一、启动Arthas <a class=\\"header-anchor\\" href=\\"#一、启动arthas\\" aria-label=\\"Permalink to &quot;一、启动Arthas&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>curl -O https://arthas.aliyun.com/arthas-boot.jar</span></span>\\n<span class=\\"line\\"><span>java -jar arthas-boot.jar</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><p>启动命令 <code>java -jar arthas-boot.jar</code></p>\\n<h2 id=\\"二、选择进程\\" tabindex=\\"-1\\">二、选择进程 <a class=\\"header-anchor\\" href=\\"#二、选择进程\\" aria-label=\\"Permalink to &quot;二、选择进程&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1647178107000.png\\" alt=\\"\\"></p>\\n<p>直接选择我们要监控的进程，输入3进入</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>[INFO] Attach process 28667 success.</span></span>\\n<span class=\\"line\\"><span>[INFO] arthas-client connect 127.0.0.1 3658</span></span>\\n<span class=\\"line\\"><span>  ,</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div>","category":"Arthas","date":{"time":null,"string":"Invalid Date"}},{"title":"APT技术","url":"/post/java/tools/bytecode/APT.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/0d7181f253655683928c302f20fe7c1d.png\\" alt=\\"\\"></p>\\n<h2 id=\\"一、什么是apt\\" tabindex=\\"-1\\">一、什么是APT <a class=\\"header-anchor\\" href=\\"#一、什么是apt\\" aria-label=\\"Permalink to &quot;一、什么是APT&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><code>APT(Annotation Processing Tool)</code> 注解处理器，是 <code>javac</code> 的一个工具，他可以在源码生成class的时候,处理Java语法树。\\n我们用他可以干什么呢?</p>\\n<ol>\\n<li>lombok的原理,在编译期修改字节码,生成 <code>get</code> 和 <code>set</code> 方法。</li>\\n</ol>\\n<p>本文我们就使用APT技术, 来自动生成get和set方法</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/3c2d07c5116dd320a8a27439c6270cf2.png\\" alt=\\"\\"></p>\\n<p><a href=\\"https://github.com/lxchinesszz/MyLombok.git\\" target=\\"_blank\\" rel=\\"noreferrer\\">源码地址</a></p>\\n<p>感兴趣的可以了解一下,不用害怕,尤其是2.6到2.7目录，不需要看到这个API就害怕。也不用死记硬背。了解就好。\\n正经人是不会用这个生成字节码的,字节码生成我们有很多好用的工具。</p>\\n<ul>\\n<li><a href=\\"./../bytecode/Javassist.html\\">Javassist</a></li>\\n</ul>\\n<p>或者是 <code>javapoet</code></p>\\n<h2 id=\\"二、实战演示\\" tabindex=\\"-1\\">二、实战演示 <a class=\\"header-anchor\\" href=\\"#二、实战演示\\" aria-label=\\"Permalink to &quot;二、实战演示&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_2-1-定义处理器\\" tabindex=\\"-1\\">2.1 定义处理器 <a class=\\"header-anchor\\" href=\\"#_2-1-定义处理器\\" aria-label=\\"Permalink to &quot;2.1 定义处理器&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>继承 <code>AbstractProcessor</code></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">AutoService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Processor.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SupportedAnnotationTypes</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">({</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"cn.lxchinesszz.MyData\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"cn.lxchinesszz.MyGetter\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"cn.lxchinesszz.MySetter\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">})</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// 这个注解处理器是处理哪个注解的</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">@</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SupportedSourceVersion</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(SourceVersion.RELEASE_8)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MyLombokProcessor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AbstractProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> synchronized</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> init</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ProcessingEnvironment </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">processingEnvironment</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {}</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> process</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Set&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> TypeElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">set</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, RoundEnvironment </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">roundEnv</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br></div></div><ul>\\n<li>@AutoService 谷歌提供的SPI工具。当使用这个注解会自定生成Java SPI文件, 当然如果不想用谷歌的工具,我们也可以自己来写配置文件</li>\\n</ul>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>├── classes</span></span>\\n<span class=\\"line\\"><span>│   ├── META-INF</span></span>\\n<span class=\\"line\\"><span>│   │   └── services</span></span>\\n<span class=\\"line\\"><span>│   │       └── javax.annotation.processing.Processor</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><ul>\\n<li>@SupportedAnnotationTypes({&quot;cn.lxchinesszz.MyData&quot;,&quot;cn.lxchinesszz.MyGetter&quot;,&quot;cn.lxchinesszz.MySetter&quot;})</li>\\n</ul>\\n<p>支持的注解类型</p>\\n<ul>\\n<li>@SupportedSourceVersion(SourceVersion.RELEASE_8)</li>\\n</ul>\\n<p>支持的源码类型</p>\\n<h2 id=\\"_2-2-element-体系\\" tabindex=\\"-1\\">2.2 Element 体系 <a class=\\"header-anchor\\" href=\\"#_2-2-element-体系\\" aria-label=\\"Permalink to &quot;2.2 Element 体系&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li><code>roundEnv.getElementsAnnotatedWith(MyData.class)</code> 可以获取被该注解修饰的类或者字段或者方法。</li>\\n</ul>\\n<p>下面我们看下 <code>Element</code> 的类型。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/ca3e47d8d1707db1afb001febfd70c5a.png\\" alt=\\"\\"></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> User</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{ </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// TypeElement</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String name; </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// VariableElement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Interge age; </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// VariableElement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(){ </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// ExecutableElement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.name;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> setName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">( </span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">// ExecutableElement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">name</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> // VariableElement</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    ){</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.name </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> name;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br></div></div><p>如何知道Element 的类型呢。</p>\\n<ul>\\n<li><code>Element#getKind</code></li>\\n</ul>\\n<p><img src=\\"https://img.springlearn.cn/blog/df6b6e790bcc452c9e9552ddca4e1969.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_2-2-1-获取字段信息\\" tabindex=\\"-1\\">2.2.1 获取字段信息 <a class=\\"header-anchor\\" href=\\"#_2-2-1-获取字段信息\\" aria-label=\\"Permalink to &quot;2.2.1 获取字段信息&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>这里我们先自定义一个字段类型来获取基础信息,来学习 <code>Element</code></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> FieldElement</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ModifierElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 字段名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String fieldName;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 字段类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> fieldType;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 资源原始类型</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> VariableElement fieldElement;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 基本类型提示</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String remark;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 字段所属类</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> TypeElement classElement;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> FieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(String </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">fieldName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, VariableElement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">fieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(fieldElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.fieldName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldName;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.fieldElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.classElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (TypeElement) fieldElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getEnclosingElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        try</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">isPrimitive</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                fieldType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.remark </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"基本类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">asType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.fieldType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">forName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(fieldElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">asType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">catch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ClassNotFoundException </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">e</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // 如果还报错说明是一个泛型 根据泛型类型来进行处理 fieldElement.asType()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // DeclaredType    Set&#x3C;String></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // WildcardType</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            //    ?</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            //    ? extends Number</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            //    ? super T</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">            this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.fieldType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object.class;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br></div></div><ul>\\n<li>首先先判断是字段类型</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">   public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> FieldElement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toFiledElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Element enclosedElement) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.FIELD.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            VariableElement fieldElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (VariableElement) enclosedElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            Name simpleName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSimpleName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> FieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(simpleName.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), fieldElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            throw</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RuntimeException</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"enclosedElement 不是字段类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><h3 id=\\"_2-2-1-获取方法信息\\" tabindex=\\"-1\\">2.2.1 获取方法信息 <a class=\\"header-anchor\\" href=\\"#_2-2-1-获取方法信息\\" aria-label=\\"Permalink to &quot;2.2.1 获取方法信息&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>方法包括方法参数和返回值,这里我们自定义一个方法参数。</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MethodElement</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ModifierElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 方法参数名</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String methodName;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 返回值</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> returnType;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 方法原始信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ExecutableElement methodElement;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 方法参数</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> methodParamElements;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ExecutableElement </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">methodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">methodParamElements</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(methodElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.methodName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSimpleName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        try</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            TypeMirror returnTypeMirror </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getReturnType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (returnTypeMirror </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">instanceof</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> NoType) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.returnType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Void.TYPE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.returnType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Class.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">forName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(methodElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getReturnType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">catch</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ClassNotFoundException </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">e</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">            this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.returnType </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Void.TYPE;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.methodElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.methodParamElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodParamElements;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br></div></div><ul>\\n<li>生成方法</li>\\n</ul>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> MethodParamElement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toMethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Element enclosedElement) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.PARAMETER.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            VariableElement fieldElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (VariableElement) enclosedElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            Name simpleName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSimpleName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(simpleName.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), fieldElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            throw</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RuntimeException</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"enclosedElement 不是字段类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> MethodElement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toMethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Element enclosedElement) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.METHOD.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            ExecutableElement methodElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ExecutableElement) enclosedElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> VariableElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> parameters </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getParameters</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> paramElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            for</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (VariableElement parameter </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> parameters) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                paramElements.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">add</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toMethodParamElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(parameter));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(methodElement, paramElements);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            throw</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RuntimeException</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"enclosedElement 不是方法类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br></div></div><h3 id=\\"_2-2-2-获取类信息\\" tabindex=\\"-1\\">2.2.2 获取类信息 <a class=\\"header-anchor\\" href=\\"#_2-2-2-获取类信息\\" aria-label=\\"Permalink to &quot;2.2.2 获取类信息&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>类信息包括字段和方法</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ClassElement</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ModifierElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 类名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String className;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 包名称</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String packageName;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 类原始信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> TypeElement classElement;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 字段信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">FieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> fieldElements;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 方法信息</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> methodElements;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ClassElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Element </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">enclosedElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">FieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">fieldElements</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">methodElements</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.classElement </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (TypeElement) enclosedElement;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.fieldElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> fieldElements;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.methodElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> methodElements;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.className </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> classElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSimpleName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.packageName </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> classElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getQualifiedName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">replaceAll</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">\\\\\\\\</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">.\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> classElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getSimpleName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toString</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br></div></div><p>生成类信息</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ClassElement </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toClassElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Element enclosedElement) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.CLASS.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> Element</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> enclosedElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElement.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getEnclosedElements</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">FieldElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> fieldElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">MethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> methodElements </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        for</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (Element element </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">:</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElements) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.FIELD.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(element.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                fieldElements.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">add</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toFiledElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(element));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (ElementKind.METHOD.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(element.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getKind</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                methodElements.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">add</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toMethodElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(element));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ClassElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(enclosedElement, fieldElements, methodElements);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        throw</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RuntimeException</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"enclosedElement 不是字段类型:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> enclosedElement);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br></div></div><h2 id=\\"_2-3-日志打印\\" tabindex=\\"-1\\">2.3 日志打印 <a class=\\"header-anchor\\" href=\\"#_2-3-日志打印\\" aria-label=\\"Permalink to &quot;2.3 日志打印&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>APT方法中日志的打印,要使用工具。在初始化方法中获取消息打印实例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MyLombokProcessor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AbstractProcessor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Messager message;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">     @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> synchronized</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> init</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(ProcessingEnvironment </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">processingEnvironment</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">        super</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">init</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(processingEnvironment);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        message </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> processingEnvironment.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMessager</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> boolean</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> process</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Set&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> TypeElement</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">set</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, RoundEnvironment </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">roundEnv</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        //\\t扫描所有被@MyData注解的元素</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        processingEnv.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getMessager</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">printMessage</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(NOTE, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br></div></div>","category":"字节码增强","date":{"time":null,"string":"Invalid Date"}},{"title":"Javassist","url":"/post/java/tools/bytecode/Javassist.html","excerpt":"","category":"字节码增强","date":{"time":null,"string":"Invalid Date"}},{"title":"Disruptor高性能队列","url":"/post/java/tools/disruptor/Disruptor.html","excerpt":"","category":"Disruptor","date":{"time":null,"string":"Invalid Date"}},{"title":"Druid SQL解析","url":"/post/java/tools/druid/SQL解析.html","excerpt":"","category":"SQL解析","date":{"time":null,"string":"Invalid Date"}},{"title":"Guava核心库专题","url":"/post/java/tools/guava/README.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Guava-cache","url":"/post/java/tools/guava/guava-cache.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1588264022000.png\\" alt=\\"\\"></p>\\n<p><strong>本篇主要是本地缓存代码实战，提供业务中常用的本地缓存使用代码片段(直接跳过看标题五)</strong></p>\\n<div class=\\"info custom-block\\"><p class=\\"custom-block-title\\">写在前面</p>\\n<p>常在业务系统中做开发,不会点高级知识点,有点不好意思了。在业务系统中，提高系统响应速度，提供系统高并发能力，其实方向很简单，三个方向,六个字而已: <strong>缓存降级限流。</strong>\\n当然这是在排除代码质量非常差的情况，如果代码质量很差，都是while循环和高内存占用，那么其实再怎么做都于事无补。除非你有一个马云爸爸，性能不够，机器来凑嘛。阿里云前来支持(1000台机器够了吗?)</p>\\n</div>\\n<p><img src=\\"https://cdn.nlark.com/yuque/0/2020/png/182855/1588128723239-12cbd329-ab03-4e8c-86be-fd63da9cb39f.png?x-oss-process=image%2Fresize%2Cw_1492\\" alt=\\"\\"></p>\\n<h2 id=\\"一、什么是guava-cache\\" tabindex=\\"-1\\">一、什么是Guava Cache <a class=\\"header-anchor\\" href=\\"#一、什么是guava-cache\\" aria-label=\\"Permalink to &quot;一、什么是Guava Cache&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>&#x3C;dependency></span></span>\\n<span class=\\"line\\"><span>    &#x3C;groupId>com.google.guava&#x3C;/groupId></span></span>\\n<span class=\\"line\\"><span>    &#x3C;artifactId>guava&#x3C;/artifactId></span></span>\\n<span class=\\"line\\"><span>    &#x3C;version>29.0-jre&#x3C;/version></span></span>\\n<span class=\\"line\\"><span>&#x3C;/dependency></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>其实就是Google提供的一个开发工具包,里面有很多好用的Java开工具,比如我们本文将的Cache缓存能力。\\n说到缓存,每个业务系统中现在都会用到缓存,常用的缓存数据库就是Redis和Memcache,这两款kv数据库最常用的场景就是当缓存使用，极其适合在微服务架构下做缓存使用。速度是极高的，但是跟本地缓存来比，还是算慢的，毕竟本地缓存其实就相当于一个Map集合，本地缓存获取没有网络IO。但是最大的缺点是每台服务器的本地缓存是不能共享的。所以如果要用分布式缓存就可以跳过了。因为本文将的本地缓存使用。</p>\\n<p>说到底其实缓存我们就可以理解为是一个Map集合，不过生产中我们不能用Map来做缓存，除非是缓存的数据只有一点点一点点。否则如果数据量瞬时或者数据积累量很大，很容易就直接就把Map撑爆。导致内存溢出,服务宕机下线风险。 所以我们必须要对Map做控制。</p>\\n<ol>\\n<li>控制数据量大小</li>\\n<li>控制数据生命周期</li>\\n<li>如果能做些数据命中率统计更好了</li>\\n</ol>\\n<p>对，以上就是Guava Cache已经为我们做好的能力了。我们只用使用就可以了</p>\\n<h2 id=\\"二、什么场景适合缓存\\" tabindex=\\"-1\\">二、什么场景适合缓存 <a class=\\"header-anchor\\" href=\\"#二、什么场景适合缓存\\" aria-label=\\"Permalink to &quot;二、什么场景适合缓存&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>不长更新的数据都可以使用缓存，只要我们定时去刷新缓存获取最新的数据就可以了。\\n注意: 凡是使用GuavaCache的地方都可以使用RedisCache,但是使用RedisCache的地方不一定可以使用GuavaCache。因为前面我们也说了Guava是本地缓存，不支持多服务器数据共享,如果要共享缓存数据直接用Redis是更好的选择。</p>\\n<h2 id=\\"三、使用本地缓存-高并发会把机器打爆\\" tabindex=\\"-1\\">三、使用本地缓存,高并发会把机器打爆 <a class=\\"header-anchor\\" href=\\"#三、使用本地缓存-高并发会把机器打爆\\" aria-label=\\"Permalink to &quot;三、使用本地缓存,高并发会把机器打爆&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>这个担心是逻辑思考的必然,使用缓存主要是提高系统响应效率的,如果用不过把机器搞爆就不好了。所以这种担心很有必要，但是只要弄清楚没参数或者它的实现原理就不用担心了。4和5是快速入门即代码片段，直接根据代码去做不会有问题。</p>\\n<h2 id=\\"四、快速入门api\\" tabindex=\\"-1\\">四、快速入门API <a class=\\"header-anchor\\" href=\\"#四、快速入门api\\" aria-label=\\"Permalink to &quot;四、快速入门API&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>CacheBuilder</p>\\n<p>| 属性             | 作用             | 例子                                 |\\n|</p>\\n","category":"Guava","date":{"time":null,"string":"Invalid Date"}},{"title":"Guava-Map","url":"/post/java/tools/guava/guava-map.html","excerpt":"","category":"Guava","date":{"time":null,"string":"Invalid Date"}},{"title":"Guava-retry重试组件","url":"/post/java/tools/guava/guava-retry.html","excerpt":"<h2 id=\\"一、简介\\" tabindex=\\"-1\\">一、简介 <a class=\\"header-anchor\\" href=\\"#一、简介\\" aria-label=\\"Permalink to &quot;一、简介&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"info custom-block\\"><p class=\\"custom-block-title\\">Guava-retry</p>\\n<p>Guava 是一组来自 Google 的核心 Java 库，其中包括新的集合类型（例如 multimap 和 multiset）、不可变集合、图形库以及用于并发、I/O、散列、缓存、原语、字符串等的实用程序！它广泛用于 Google\\n内部的大多数 Java 项目，也被许多其他公司广泛使用。</p>\\n<p>API 非常的简单，我们可以非常轻松的使用，来封装成我们业务中自己的组件。</p>\\n</div>\\n<h2 id=\\"二、依赖\\" tabindex=\\"-1\\">二、依赖 <a class=\\"header-anchor\\" href=\\"#二、依赖\\" aria-label=\\"Permalink to &quot;二、依赖&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>com.github.rholder&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>guava-retrying&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>2.0.0&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><h2 id=\\"三、使用\\" tabindex=\\"-1\\">三、使用 <a class=\\"header-anchor\\" href=\\"#三、使用\\" aria-label=\\"Permalink to &quot;三、使用&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_3-1-指定异常\\" tabindex=\\"-1\\">3.1 指定异常 <a class=\\"header-anchor\\" href=\\"#_3-1-指定异常\\" aria-label=\\"Permalink to &quot;3.1 指定异常&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>配置如果发生了 <code>Exception</code> 异常进行重试</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Retryer&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">User</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> retry </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> RetryerBuilder.</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">User</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //发生ConnectException异常时重试</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">retryIfExceptionOfType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Exception.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //重试的等待策略 初始等待1s，每次递增1s。如：第一次1s，第二次2s，第三次3s，以此类推...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">withWaitStrategy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(WaitStrategies.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">incrementingWait</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.SECONDS, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.SECONDS))</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //重试3次后停止</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">withStopStrategy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(StopStrategies.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">stopAfterAttempt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">3</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><h3 id=\\"_3-2-重试策略\\" tabindex=\\"-1\\">3.2 重试策略 <a class=\\"header-anchor\\" href=\\"#_3-2-重试策略\\" aria-label=\\"Permalink to &quot;3.2 重试策略&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>WaitStrategy 重试策略</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    Retryer&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">User</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> retry </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> RetryerBuilder.</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">User</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newBuilder</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //发生ConnectException异常时重试</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">retryIfExceptionOfType</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Exception.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //重试的等待策略 初始等待1s，每次递增1s。如：第一次1s，第二次2s，第三次3s，以此类推...</span></span>\\n<span class=\\"line highlighted\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">withWaitStrategy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(WaitStrategies.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">incrementingWait</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.SECONDS, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.SECONDS))</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                //重试3次后停止</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">withStopStrategy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(StopStrategies.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">stopAfterAttempt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">3</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">build</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><p>| 策略             | 使用方法                                                     | 说明                                                         |\\n|</p>\\n","category":"Guava","date":{"time":null,"string":"Invalid Date"}},{"title":"Get新技能,Java实现文件监控","url":"/post/java/tools/java-watch-file.html","excerpt":"","category":"文件监控","date":{"time":null,"string":"Invalid Date"}},{"title":"JMH基准测试","url":"/post/java/tools/jmh/README.html","excerpt":"","category":"JMH","date":{"time":null,"string":"Invalid Date"}},{"title":"Java Object 内存布局","url":"/post/java/tools/jol/README.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"apache-commons 池化技术","url":"/post/java/tools/pool2/README.html","excerpt":"","category":"池化技术","date":{"time":null,"string":"Invalid Date"}},{"title":"字符串常量池","url":"/post/java/tools/pool2/字符串常量池.html","excerpt":"","category":"池化技术","date":{"time":null,"string":"Invalid Date"}},{"title":"Reactive 反应式编程","url":"/post/java/tools/reactor/README.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">反应式编程</p>\\n<p>reactive 是一种新的编程思想, 如同名字一样, 反应式编程。而Reactor 是一个工具包，类似于\\nSpring一样。这点我们可以直接在Spring的官网上可以看到。本篇基于小编自己的学习进行总结。</p>\\n</div>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1651411884000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"一、提出问题\\" tabindex=\\"-1\\">一、提出问题 <a class=\\"header-anchor\\" href=\\"#一、提出问题\\" aria-label=\\"Permalink to &quot;一、提出问题&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>目前来说反应式编程在Java行业其实不是很流行, 其原因1在于传统的编程模型已经根深蒂固。虽然阻塞但是其实对于业务开发\\n并不是一个很大的痛点。其2新的编程思想具有学习成本，但是又不是特别的痛，所以没有引起关注。下面我们来带着问题来学习吧。</p>\\n<h2 id=\\"_1-1-什么是反应式编程\\" tabindex=\\"-1\\">1.1 什么是反应式编程? <a class=\\"header-anchor\\" href=\\"#_1-1-什么是反应式编程\\" aria-label=\\"Permalink to &quot;1.1 什么是反应式编程?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>哎，可能因为都是从外国翻译过来的缘故，总喜欢翻译写高大上，且晦涩难懂的文字进行描述，搞得大多数程序猿一头雾水。但是没办法，\\n谁让你不主动去学习原文，而要吃一些大牛的二手翻译资料呢。所以我们就要最这些二手资料进行重读，并且深入思考，来总结出自己的理解。\\n小编理解，所谓反应式编程，简单来说就是基于事件编程，由事件去驱动。比如我们servlet api，传统的方式servlet 线程是阻塞线程，\\n如果方法没有执行完成，那么servlet线程会一直在阻塞等待。从而会导致不能接受更多的外部请求。而如果要使用反应式编程</p>\\n<h2 id=\\"_1-2-反应式编程中背压指得是什么\\" tabindex=\\"-1\\">1.2 反应式编程中背压指得是什么? <a class=\\"header-anchor\\" href=\\"#_1-2-反应式编程中背压指得是什么\\" aria-label=\\"Permalink to &quot;1.2 反应式编程中背压指得是什么?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我也不知道为什么称背压，如果单从这个词汇来说，想死都想不通。什么鬼玩意呀。现在我们忽略这个sb的词汇。直接来说他的含义。\\n要想搞明白这个，先知道事件驱动是如何设计的。首先有一个事件发送者，和一个事件处理者。传统的方式是事件处理者被动的来接受\\n事件发送者，发起的事件，并进行处理，而在reactor中，事件的处理者不仅可以被动的接受，同时也支持主动的拉去事件。于是这种\\n能力被称为背压。在高大上的解释就是，这能实现组件之间的弹性。</p>\\n<h2 id=\\"_1-3-反应式编程好处是什么\\" tabindex=\\"-1\\">1.3 反应式编程好处是什么? <a class=\\"header-anchor\\" href=\\"#_1-3-反应式编程好处是什么\\" aria-label=\\"Permalink to &quot;1.3 反应式编程好处是什么?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我们直接看官网的说明，然后进行白话翻译。</p>\\n<blockquote>\\n<p>Reactive systems better utilize modern processors. Also, the inclusion of back-pressure in reactive programming\\nensures better resilience between decoupled components.</p>\\n</blockquote>\\n<p>直白点就是可以充分的利用其cpu多核多线程的处理能力, 另外背压的能力,使组件知道当前的负载,动态的确定自己还能接受的任务数量,称之为弹性。</p>\\n<h2 id=\\"二、reactor-核心类\\" tabindex=\\"-1\\">二、Reactor 核心类 <a class=\\"header-anchor\\" href=\\"#二、reactor-核心类\\" aria-label=\\"Permalink to &quot;二、Reactor 核心类&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>这种编程思想其实还是值得学习的，因为基于事件来驱动，确实可以充分的利用其cpu多核多线程的处理能力。充分压榨cpu的能力。\\n其实我们在很多地方都能看到类似的设计思想。eg: RxJava, Netty。\\n下面我们就学习下如何使用吧。</p>\\n<h2 id=\\"_2-1-publisher-发布者\\" tabindex=\\"-1\\">2.1 Publisher 发布者 <a class=\\"header-anchor\\" href=\\"#_2-1-publisher-发布者\\" aria-label=\\"Permalink to &quot;2.1 Publisher 发布者&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>发布者只有一个接口,提供订阅能力。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Publisher</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 绑定一个订阅者</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> super</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><h2 id=\\"_2-2-subscriber-订阅者\\" tabindex=\\"-1\\">2.2 Subscriber 订阅者 <a class=\\"header-anchor\\" href=\\"#_2-2-subscriber-订阅者\\" aria-label=\\"Permalink to &quot;2.2 Subscriber 订阅者&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>订阅者主要处理发布者发布的信息</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Subscriber</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 确定订阅关系</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 处理数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(T </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 错误处理</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当事件处理完时触发</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><h2 id=\\"_2-3-subscription-订阅关系\\" tabindex=\\"-1\\">2.3 Subscription 订阅关系 <a class=\\"header-anchor\\" href=\\"#_2-3-subscription-订阅关系\\" aria-label=\\"Permalink to &quot;2.3 Subscription 订阅关系&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>订阅关系，可以取消订阅，通知可以实现拉去能力。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Subscription</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 获取指定数量的数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">long</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> n</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 取消订阅关系</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> cancel</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><h2 id=\\"_2-4-sink-数据池\\" tabindex=\\"-1\\">2.4 Sink 数据池 <a class=\\"header-anchor\\" href=\\"#_2-4-sink-数据池\\" aria-label=\\"Permalink to &quot;2.4 Sink 数据池&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Sink#next会将数据放入池中，由Sink缓存或直接发送给订阅者。</p>\\n<p>Mono和Flux分别提供了create和generate的方法,用来绑定事件发射器 Sink。开发者可以利用Sink来\\n生产事件数据，然后发送给订阅者。</p>\\n<h2 id=\\"三、事件模式\\" tabindex=\\"-1\\">三、事件模式 <a class=\\"header-anchor\\" href=\\"#三、事件模式\\" aria-label=\\"Permalink to &quot;三、事件模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Push推模式，PUSH_PULL混合模式</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">enum</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> CreateMode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">\\tPUSH_ONLY</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">PUSH_PULL</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h2 id=\\"_3-1-pull-模式\\" tabindex=\\"-1\\">3.1 Pull 模式 <a class=\\"header-anchor\\" href=\\"#_3-1-pull-模式\\" aria-label=\\"Permalink to &quot;3.1 Pull 模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>generate 方法适用于拉去模式，当订阅者调用Subscription#request,则从Sink#next生产一条数据。\\n如下两个代码示例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Pull模式 Integer.MAX_VALUE\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">generate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">SynchronousSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                })</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                // 默认获取 request(Integer.MAX_VALUE)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(integer </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Pull:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Pull模式 request调用一次,则调用Sink生产一次\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPullTwo</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">generate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">SynchronousSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                })</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    Subscription subscription;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> count;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> s;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                        // 订阅时候,生产1条数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Integer </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        count</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">++</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                        // 在处理1次，当第二次处理时候,就不拉数据了</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                            this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"onError\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"onComplete\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>处理:3</span></span>\\n<span class=\\"line\\"><span>处理:1</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><h2 id=\\"_3-2-push-模式\\" tabindex=\\"-1\\">3.2 Push 模式 <a class=\\"header-anchor\\" href=\\"#_3-2-push-模式\\" aria-label=\\"Permalink to &quot;3.2 Push 模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>发布者主动推动数据,跟Pull的区别是。他不会随着,订阅者调用Subscription#request,而从Sink#next生产一条数据。\\n只有订阅时候Subscription#request,Sink只会执行一次</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Push模式\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPush</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">create</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">FluxSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>() {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            Subscription subscription;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> s;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SneakyThrows</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Integer </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理失败\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理完成\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>处理:9</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h2 id=\\"四、事件驱动的好处\\" tabindex=\\"-1\\">四、事件驱动的好处 <a class=\\"header-anchor\\" href=\\"#四、事件驱动的好处\\" aria-label=\\"Permalink to &quot;四、事件驱动的好处&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>反应式编程的好处, 主要是编程思想的不同, 抓住关键点非阻塞+事件驱动。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>StopWatch '耗时统计': running time = 2070915374 ns</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div>","date":{"time":null,"string":"Invalid Date"}},{"title":"Reactive 反应式编程","url":"/post/java/tools/reactor/webflux.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">反应式编程</p>\\n<p>reactive 是一种新的编程思想, 如同名字一样, 反应式编程。而Reactor 是一个工具包，类似于\\nSpring一样。这点我们可以直接在Spring的官网上可以看到。本篇基于小编自己的学习进行总结。</p>\\n</div>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1651411884000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"一、提出问题\\" tabindex=\\"-1\\">一、提出问题 <a class=\\"header-anchor\\" href=\\"#一、提出问题\\" aria-label=\\"Permalink to &quot;一、提出问题&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>目前来说反应式编程在Java行业其实不是很流行, 其原因1在于传统的编程模型已经根深蒂固。虽然阻塞但是其实对于业务开发\\n并不是一个很大的痛点。其2新的编程思想具有学习成本，但是又不是特别的痛，所以没有引起关注。下面我们来带着问题来学习吧。</p>\\n<h2 id=\\"_1-1-什么是反应式编程\\" tabindex=\\"-1\\">1.1 什么是反应式编程? <a class=\\"header-anchor\\" href=\\"#_1-1-什么是反应式编程\\" aria-label=\\"Permalink to &quot;1.1 什么是反应式编程?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>哎，可能因为都是从外国翻译过来的缘故，总喜欢翻译写高大上，且晦涩难懂的文字进行描述，搞得大多数程序猿一头雾水。但是没办法，\\n谁让你不主动去学习原文，而要吃一些大牛的二手翻译资料呢。所以我们就要最这些二手资料进行重读，并且深入思考，来总结出自己的理解。\\n小编理解，所谓反应式编程，简单来说就是基于事件编程，由事件去驱动。比如我们servlet api，传统的方式servlet 线程是阻塞线程，\\n如果方法没有执行完成，那么servlet线程会一直在阻塞等待。从而会导致不能接受更多的外部请求。而如果要使用反应式编程</p>\\n<h2 id=\\"_1-2-反应式编程中背压指得是什么\\" tabindex=\\"-1\\">1.2 反应式编程中背压指得是什么? <a class=\\"header-anchor\\" href=\\"#_1-2-反应式编程中背压指得是什么\\" aria-label=\\"Permalink to &quot;1.2 反应式编程中背压指得是什么?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我也不知道为什么称背压，如果单从这个词汇来说，想死都想不通。什么鬼玩意呀。现在我们忽略这个sb的词汇。直接来说他的含义。\\n要想搞明白这个，先知道事件驱动是如何设计的。首先有一个事件发送者，和一个事件处理者。传统的方式是事件处理者被动的来接受\\n事件发送者，发起的事件，并进行处理，而在reactor中，事件的处理者不仅可以被动的接受，同时也支持主动的拉去事件。于是这种\\n能力被称为背压。在高大上的解释就是，这能实现组件之间的弹性。</p>\\n<h2 id=\\"_1-3-反应式编程好处是什么\\" tabindex=\\"-1\\">1.3 反应式编程好处是什么? <a class=\\"header-anchor\\" href=\\"#_1-3-反应式编程好处是什么\\" aria-label=\\"Permalink to &quot;1.3 反应式编程好处是什么?&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我们直接看官网的说明，然后进行白话翻译。</p>\\n<blockquote>\\n<p>Reactive systems better utilize modern processors. Also, the inclusion of back-pressure in reactive programming\\nensures better resilience between decoupled components.</p>\\n</blockquote>\\n<p>直白点就是可以充分的利用其cpu多核多线程的处理能力, 另外背压的能力,使组件知道当前的负载,动态的确定自己还能接受的任务数量,称之为弹性。</p>\\n<h2 id=\\"二、reactor-核心类\\" tabindex=\\"-1\\">二、Reactor 核心类 <a class=\\"header-anchor\\" href=\\"#二、reactor-核心类\\" aria-label=\\"Permalink to &quot;二、Reactor 核心类&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>这种编程思想其实还是值得学习的，因为基于事件来驱动，确实可以充分的利用其cpu多核多线程的处理能力。充分压榨cpu的能力。\\n其实我们在很多地方都能看到类似的设计思想。eg: RxJava, Netty。\\n下面我们就学习下如何使用吧。</p>\\n<h2 id=\\"_2-1-publisher-发布者\\" tabindex=\\"-1\\">2.1 Publisher 发布者 <a class=\\"header-anchor\\" href=\\"#_2-1-publisher-发布者\\" aria-label=\\"Permalink to &quot;2.1 Publisher 发布者&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>发布者只有一个接口,提供订阅能力。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Publisher</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 绑定一个订阅者</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">?</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> super</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><h2 id=\\"_2-2-subscriber-订阅者\\" tabindex=\\"-1\\">2.2 Subscriber 订阅者 <a class=\\"header-anchor\\" href=\\"#_2-2-subscriber-订阅者\\" aria-label=\\"Permalink to &quot;2.2 Subscriber 订阅者&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>订阅者主要处理发布者发布的信息</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Subscriber</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">T</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 确定订阅关系</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 处理数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(T </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 错误处理</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 当事件处理完时触发</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><h2 id=\\"_2-3-subscription-订阅关系\\" tabindex=\\"-1\\">2.3 Subscription 订阅关系 <a class=\\"header-anchor\\" href=\\"#_2-3-subscription-订阅关系\\" aria-label=\\"Permalink to &quot;2.3 Subscription 订阅关系&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>订阅关系，可以取消订阅，通知可以实现拉去能力。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Subscription</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 获取指定数量的数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">long</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> n</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    // 取消订阅关系</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> cancel</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><h2 id=\\"_2-4-sink-数据池\\" tabindex=\\"-1\\">2.4 Sink 数据池 <a class=\\"header-anchor\\" href=\\"#_2-4-sink-数据池\\" aria-label=\\"Permalink to &quot;2.4 Sink 数据池&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Sink#next会将数据放入池中，由Sink缓存或直接发送给订阅者。</p>\\n<p>Mono和Flux分别提供了create和generate的方法,用来绑定事件发射器 Sink。开发者可以利用Sink来\\n生产事件数据，然后发送给订阅者。</p>\\n<h2 id=\\"三、事件模式\\" tabindex=\\"-1\\">三、事件模式 <a class=\\"header-anchor\\" href=\\"#三、事件模式\\" aria-label=\\"Permalink to &quot;三、事件模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>Push推模式，PUSH_PULL混合模式</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">enum</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> CreateMode</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">\\tPUSH_ONLY</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">PUSH_PULL</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h2 id=\\"_3-1-pull-模式\\" tabindex=\\"-1\\">3.1 Pull 模式 <a class=\\"header-anchor\\" href=\\"#_3-1-pull-模式\\" aria-label=\\"Permalink to &quot;3.1 Pull 模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>generate 方法适用于拉去模式，当订阅者调用Subscription#request,则从Sink#next生产一条数据。\\n如下两个代码示例。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Pull模式 Integer.MAX_VALUE\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPull</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">generate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">SynchronousSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                })</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                // 默认获取 request(Integer.MAX_VALUE)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(integer </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Pull:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Pull模式 request调用一次,则调用Sink生产一次\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPullTwo</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">generate</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">SynchronousSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                })</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    Subscription subscription;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> count;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> s;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                        // 订阅时候,生产1条数据</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                        this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Integer </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        count</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">++</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                        // 在处理1次，当第二次处理时候,就不拉数据了</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                            this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"onError\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"onComplete\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>处理:3</span></span>\\n<span class=\\"line\\"><span>处理:1</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div><h2 id=\\"_3-2-push-模式\\" tabindex=\\"-1\\">3.2 Push 模式 <a class=\\"header-anchor\\" href=\\"#_3-2-push-模式\\" aria-label=\\"Permalink to &quot;3.2 Push 模式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>发布者主动推动数据,跟Pull的区别是。他不会随着,订阅者调用Subscription#request,而从Sink#next生产一条数据。\\n只有订阅时候Subscription#request,Sink只会执行一次</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"Flux Push模式\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> testFluxPush</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Flux.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">create</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((Consumer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">FluxSink</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Integer</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) sink </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> k </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) (Math.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">*</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> 10</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            sink.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">next</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(k);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }).</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">subscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Subscriber&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>() {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            Subscription subscription;</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onSubscribe</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Subscription </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">s</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> s;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">.subscription.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">request</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">SneakyThrows</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onNext</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Integer </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">integer</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理:\\"</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> +</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> integer);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onError</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Throwable </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">t</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理失败\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> onComplete</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"处理完成\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>处理:9</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h2 id=\\"四、事件驱动的好处\\" tabindex=\\"-1\\">四、事件驱动的好处 <a class=\\"header-anchor\\" href=\\"#四、事件驱动的好处\\" aria-label=\\"Permalink to &quot;四、事件驱动的好处&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>反应式编程的好处, 主要是编程思想的不同, 抓住关键点非阻塞+事件驱动。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>StopWatch '耗时统计': running time = 2070915374 ns</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div>","category":"反应式编程","date":{"time":null,"string":"Invalid Date"}},{"title":"Java泛型体系知识学习","url":"/post/java/tools/reflections/Java泛型.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"反射框架Reflections","url":"/post/java/tools/reflections/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Lambda函数式编程","url":"/post/java/函数式编程.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<blockquote>\\n<p>Java8所有的新特性基本基于函数式编程的思想，函数式编程给Java带来了注入了新鲜的活力。\\n函数式编程其实并不是很难，小编在学习函数式编程时候刚开始一头雾水，最后仔细观察就发现了其中的小窍门，读了本篇文章如果还没有掌握，就算我输了</p>\\n</blockquote>\\n<h1 id=\\"函数式编程\\" tabindex=\\"-1\\">函数式编程 <a class=\\"header-anchor\\" href=\\"#函数式编程\\" aria-label=\\"Permalink to &quot;函数式编程&quot;\\">&ZeroWidthSpace;</a></h1>\\n<h2 id=\\"一、lambda表达式\\" tabindex=\\"-1\\">一、Lambda表达式 <a class=\\"header-anchor\\" href=\\"#一、lambda表达式\\" aria-label=\\"Permalink to &quot;一、Lambda表达式&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><strong>注意</strong>: 以下方法都可以使用表达式来进行缩写</p>\\n<p>我们来看Java中如何来定义一个方法</p>\\n<h3 id=\\"_1-语法\\" tabindex=\\"-1\\">1. 语法 <a class=\\"header-anchor\\" href=\\"#_1-语法\\" aria-label=\\"Permalink to &quot;1. 语法&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><code>()-&gt;{}</code></p>\\n<p>其中小括号里面可以放入参，大括号就是方法体，里面也允许有返回值。</p>\\n<p><strong>当方法体中只有返回值而没有其他语句时候，大括号和 <code>return</code> 关键字都可以省略不写。</strong></p>\\n<h3 id=\\"_2-方法引用\\" tabindex=\\"-1\\">2. 方法引用 <a class=\\"header-anchor\\" href=\\"#_2-方法引用\\" aria-label=\\"Permalink to &quot;2. 方法引用&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><em>只要用.引用不报错的，都可以将.换成:</em></p>\\n<p>| 类型                      | 语法                           |\\n|</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"分布式服务","url":"/post/java/分布式/README.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"Zookeeper实践","url":"/post/java/分布式/zookeeper.html","excerpt":"<h2 id=\\"一、zookeeper介绍\\" tabindex=\\"-1\\">一、Zookeeper介绍 <a class=\\"header-anchor\\" href=\\"#一、zookeeper介绍\\" aria-label=\\"Permalink to &quot;一、Zookeeper介绍&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_1-1-配置管理\\" tabindex=\\"-1\\">1.1 配置管理 <a class=\\"header-anchor\\" href=\\"#_1-1-配置管理\\" aria-label=\\"Permalink to &quot;1.1 配置管理&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>在我们的应用中除了代码外，还有一些就是各种配置。比如数据库连接等。一般我们都是使用配置文件的方式，在代码中引入这些配置文件。但是当我们只有一种配置，只有一台服务器，并且不经常修改的时候，使用配置文件是一个很好的做法，但是如果我们配置非常多，有很多服务器都需要这个配置，而且还可能是动态的话使用配置文件就不是个好主意了。这个时候往往需要寻找一种集中管理配置的方法，我们在这个集中的地方修改了配置，所有对这个配置感兴趣的都可以获得变更。比如我们可以把配置放在数据库里，然后所有需要配置的服务都去这个数据库读取配置。</p>\\n<h2 id=\\"_1-2-名字服务\\" tabindex=\\"-1\\">1.2 名字服务 <a class=\\"header-anchor\\" href=\\"#_1-2-名字服务\\" aria-label=\\"Permalink to &quot;1.2 名字服务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>名字服务这个就很好理解了。比如为了通过网络访问一个系统，我们得知道对方的IP地址，但是IP地址对人非常不友好，这个时候我们就需要使用域名来访问。但是计算机是不能是别域名的。怎么办呢？如果我们每台机器里都备有一份域名到IP地址的映射，这个倒是能解决一部分问题，但是如果域名对应的IP发生变化了又该怎么办呢？于是我们有了DNS这个东西。我们只需要访问一个大家熟知的(known)的点，它就会告诉你这个域名对应的IP是什么。在我们的应用中也会存在很多这类问题，特别是在我们的服务特别多的时候，如果我们在本地保存服务的地址的时候将非常不方便，但是如果我们只需要访问一个大家都熟知的访问点，这里提供统一的入口，那么维护起来将方便得多了。\\n分布式锁</p>\\n<h2 id=\\"_1-3-集群管理\\" tabindex=\\"-1\\">1.3 集群管理 <a class=\\"header-anchor\\" href=\\"#_1-3-集群管理\\" aria-label=\\"Permalink to &quot;1.3 集群管理&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>在分布式的集群中，经常会由于各种原因，比如硬件故障，软件故障，网络问题，有些节点会进进出出。有新的节点加入进来，也有老的节点退出集群。这个时候，集群中其他机器需要感知到这种变化，然后根据这种变化做出对应的决策。比如我们是一个分布式存储系统，有一个中央控制节点负责存储的分配，当有新的存储进来的时候我们要根据现在集群目前的状态来分配存储节点。这个时候我们就需要动态感知到集群目前的状态。还有，比如一个分布式的SOA架构中，服务是一个集群提供的，当消费者访问某个服务时，就需要采用某种机制发现现在有哪些节点可以提供该服务(这也称之为服务发现，比如Alibaba开源的SOA框架Dubbo就采用了Zookeeper作为服务发现的底层机制)。还有开源的Kafka队列就采用了Zookeeper作为Cosnumer的上下线管理。</p>\\n<h2 id=\\"二、本地安装运行\\" tabindex=\\"-1\\">二、本地安装运行 <a class=\\"header-anchor\\" href=\\"#二、本地安装运行\\" aria-label=\\"Permalink to &quot;二、本地安装运行&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_2-1-mac环境部署\\" tabindex=\\"-1\\">2.1 Mac环境部署 <a class=\\"header-anchor\\" href=\\"#_2-1-mac环境部署\\" aria-label=\\"Permalink to &quot;2.1 Mac环境部署&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>// 查询</span></span>\\n<span class=\\"line\\"><span>brew search zookeeper</span></span>\\n<span class=\\"line\\"><span>// 安装</span></span>\\n<span class=\\"line\\"><span>brew install zookeeper</span></span>\\n<span class=\\"line\\"><span>// 运行</span></span>\\n<span class=\\"line\\"><span>brew services start zookeeper</span></span>\\n<span class=\\"line\\"><span>// 运行成功了</span></span>\\n<span class=\\"line\\"><span>==> Successfully started \`zookeeper\` (label: homebrew.mxcl.zookeeper)</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br></div></div><h2 id=\\"_2-2-windows环境部署\\" tabindex=\\"-1\\">2.2 Windows环境部署 <a class=\\"header-anchor\\" href=\\"#_2-2-windows环境部署\\" aria-label=\\"Permalink to &quot;2.2 Windows环境部署&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ol>\\n<li><a href=\\"http://mirror.bit.edu.cn/apache/zookeeper/zookeeper-3.4.12/\\" target=\\"_blank\\" rel=\\"noreferrer\\">下载安装包</a></li>\\n<li>运行 <code>启动zkServer.sh  | zkServer.cmd</code></li>\\n</ol>\\n<h2 id=\\"三、项目实践\\" tabindex=\\"-1\\">三、项目实践 <a class=\\"header-anchor\\" href=\\"#三、项目实践\\" aria-label=\\"Permalink to &quot;三、项目实践&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_3-1-引入依赖\\" tabindex=\\"-1\\">3.1 引入依赖 <a class=\\"header-anchor\\" href=\\"#_3-1-引入依赖\\" aria-label=\\"Permalink to &quot;3.1 引入依赖&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-xml vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">xml</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        &#x3C;!-- 对zookeeper的底层api的一些封装 --></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>org.apache.curator&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>curator-framework&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>2.12.0&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        &#x3C;!-- 提供一些客户端的操作，例如重试策略等 --></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>org.apache.curator&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>curator-client&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>2.13.0&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        &#x3C;!-- 封装了一些高级特性，如：Cache事件监听、选举、分布式锁、分布式计数器、分布式Barrier等 --></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>org.apache.curator&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">groupId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>curator-recipes&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">artifactId</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            &#x3C;</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>2.12.0&#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">version</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        &#x3C;/</span><span style=\\"--shiki-light:#22863A;--shiki-dark:#85E89D\\">dependency</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">></span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br></div></div><h2 id=\\"_3-2-curator-api\\" tabindex=\\"-1\\">3.2 Curator API <a class=\\"header-anchor\\" href=\\"#_3-2-curator-api\\" aria-label=\\"Permalink to &quot;3.2 Curator API&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"info custom-block\\"><p class=\\"custom-block-title\\">INFO</p>\\n<p>Curator是Netflix公司开源的一套zookeeper客户端框架，解决了很多Zookeeper客户端非常底层的细节开发工作，包括连接重连、反复注册Watcher和NodeExistsException异常等等。Patrixck Hunt（Zookeeper）以一句“Guava is to Java that Curator to Zookeeper”给Curator予高度评价。</p>\\n</div>\\n<p>==Curator包含了几个包：==</p>\\n<ul>\\n<li>curator-framework：对zookeeper的底层api的一些封装</li>\\n<li>curator-client：提供一些客户端的操作，例如重试策略等</li>\\n<li>curator-recipes：封装了一些高级特性，如：Cache事件监听、选举、分布式锁、分布式计数器、分布式Barrier等</li>\\n</ul>\\n<h3 id=\\"_3-2-1-创建会话\\" tabindex=\\"-1\\">3.2.1 创建会话 <a class=\\"header-anchor\\" href=\\"#_3-2-1-创建会话\\" aria-label=\\"Permalink to &quot;3.2.1 创建会话&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>1.使用静态工程方法创建客户端</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>RetryPolicy retryPolicy = new ExponentialBackoffRetry(1000, 3);</span></span>\\n<span class=\\"line\\"><span>CuratorFramework client =</span></span>\\n<span class=\\"line\\"><span>CuratorFrameworkFactory.newClient(</span></span>\\n<span class=\\"line\\"><span>                        connectionInfo,</span></span>\\n<span class=\\"line\\"><span>                        5000,</span></span>\\n<span class=\\"line\\"><span>                        3000,</span></span>\\n<span class=\\"line\\"><span>                        retryPolicy);</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><p><strong>newClient静态工厂方法包含四个主要参数：</strong></p>\\n<p>参数名 | 说明</p>\\n","category":"Zookeeper","date":{"time":null,"string":"Invalid Date"}},{"title":"第10篇:分布式事务处理","url":"/post/java/分布式/分布式事务处理.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第07篇:分布式服务熔断","url":"/post/java/分布式/分布式服务熔断.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第08篇:分布式服务网关","url":"/post/java/分布式/分布式服务网关.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第03篇:分布式服务调用","url":"/post/java/分布式/分布式服务调用.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第05篇:分布式服务降级","url":"/post/java/分布式/分布式服务降级.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第06篇:分布式服务限流","url":"/post/java/分布式/分布式服务限流.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第01篇:分布式注册中心","url":"/post/java/分布式/分布式注册中心.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第02篇:分布式负载均衡","url":"/post/java/分布式/分布式负载均衡.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1652886627000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"一、什么叫负载均衡\\" tabindex=\\"-1\\">一、什么叫负载均衡 <a class=\\"header-anchor\\" href=\\"#一、什么叫负载均衡\\" aria-label=\\"Permalink to &quot;一、什么叫负载均衡&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>什么叫<code>负载均衡</code>, 所谓负载。先可以理解为当流量请求到某一个微服务应用, 则这么微服务应用就承受了负载。</p>\\n<p><code>什么叫均衡</code>如下图，浏览器发送了3次请求,后台有2个节点的微服务应用。但是每次都请求在某一台。而另外一台一直空闲没有流量。这种情况就是不均衡的。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1652839006000.png\\" alt=\\"\\"></p>\\n<p>已上图为例，实际情况可能并不一定是一次请求，也可能是<code>一次任务的调用</code>。但是不论实际情况是什么, 负载均衡就是要解决一个事情，就是<code>让流量均衡的分布</code>。<code>防止服务器过载运行</code>产生故障。</p>\\n<h2 id=\\"二、常见解决思路\\" tabindex=\\"-1\\">二、常见解决思路 <a class=\\"header-anchor\\" href=\\"#二、常见解决思路\\" aria-label=\\"Permalink to &quot;二、常见解决思路&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>所谓负载均衡就是从一个集服务器集合中，找到一个最适合的服务器。去进行操作处理。所以首先我们先定义一个服务器集合。\\n然后我们再通过常见的算法去进行挑选。</p>\\n<p><code>List&lt;String&gt; services;</code></p>\\n<h2 id=\\"_2-1-随机算法\\" tabindex=\\"-1\\">2.1 随机算法 <a class=\\"header-anchor\\" href=\\"#_2-1-随机算法\\" aria-label=\\"Permalink to &quot;2.1 随机算法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(List</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">String</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Random random </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] addressArr </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toArray</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // random</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> addressArr[random.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">nextInt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())];</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><h2 id=\\"_2-2-轮训算法\\" tabindex=\\"-1\\">2.2 轮训算法 <a class=\\"header-anchor\\" href=\\"#_2-2-轮训算法\\" aria-label=\\"Permalink to &quot;2.2 轮训算法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RoundBalanceTest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> services </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Arrays.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">asList</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service2\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service3\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        XxlBalanceTest.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">manyRoute</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // 请求次数,取模。serviceKey 可以更细粒度的控制轮训</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            ColorConsole.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">colorPrintln</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"轮训负载({}):{}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, i, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">round</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(services));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AtomicInteger atomicInteger </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AtomicInteger</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">round</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">services</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Integer.MAX_VALUE) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">set</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">incrementAndGet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] toArray </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toArray</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> toArray[count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">%</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> toArray.length];</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br></div></div><h2 id=\\"_2-3-加权算法\\" tabindex=\\"-1\\">2.3 加权算法 <a class=\\"header-anchor\\" href=\\"#_2-3-加权算法\\" aria-label=\\"Permalink to &quot;2.3 加权算法&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>加权算法的有很多的变异算法, 可以通过配置的方式，也可以通过某种策略动态的给每台服务器进行加权，从而来提高被轮训到的次数。\\n这里说两种网上常见的实现。</p>\\n<h3 id=\\"_2-3-1-简单加权算法\\" tabindex=\\"-1\\">2.3.1 简单加权算法 <a class=\\"header-anchor\\" href=\\"#_2-3-1-简单加权算法\\" aria-label=\\"Permalink to &quot;2.3.1 简单加权算法&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>一个简单暴力的加权算法,如下图。按照权重，重新构建集合。然后再将集合进行取模轮训即可。即可实现一个最简单\\n的加权算法。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1652884737000.png\\" alt=\\"\\"></p>\\n<p>代码实现也是比较简单的,如下代码。</p>\\n<div class=\\"language-txt vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">txt</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>public class WeightBalanceTest {</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    private static class Server {</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        private String host;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        private Integer port;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        public Server(String host, Integer port) {</span></span>\\n<span class=\\"line\\"><span>            this.host = host;</span></span>\\n<span class=\\"line\\"><span>            this.port = port;</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        @Override</span></span>\\n<span class=\\"line\\"><span>        public String toString() {</span></span>\\n<span class=\\"line\\"><span>            return \\"Server{\\" +</span></span>\\n<span class=\\"line\\"><span>                    \\"host='\\" + host + '\\\\'' +</span></span>\\n<span class=\\"line\\"><span>                    \\", port=\\" + port +</span></span>\\n<span class=\\"line\\"><span>                    '}';</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    private static final AtomicInteger atomicInteger = new AtomicInteger();</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    public static Server round(List&#x3C;Server> services) {</span></span>\\n<span class=\\"line\\"><span>        int count = atomicInteger.get();</span></span>\\n<span class=\\"line\\"><span>        if (count >= Integer.MAX_VALUE) {</span></span>\\n<span class=\\"line\\"><span>            atomicInteger.set(0);</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>        atomicInteger.incrementAndGet();</span></span>\\n<span class=\\"line\\"><span>        Server[] toArray = services.toArray(new Server[0]);</span></span>\\n<span class=\\"line\\"><span>        return toArray[count % toArray.length];</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    public static void main(String[] args) {</span></span>\\n<span class=\\"line\\"><span>        Map&#x3C;Server, Integer> confWeight = new HashMap&#x3C;>();</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 80), 2);</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 81), 3);</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 82), 5);</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        List&#x3C;Server> servers = new ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span>        for (Map.Entry&#x3C;Server, Integer> entity : confWeight.entrySet()) {</span></span>\\n<span class=\\"line\\"><span>            Server server = entity.getKey();</span></span>\\n<span class=\\"line\\"><span>            Integer weight = entity.getValue();</span></span>\\n<span class=\\"line\\"><span>            for (int i = 0; i &#x3C; weight; i++) {</span></span>\\n<span class=\\"line\\"><span>                servers.add(server);</span></span>\\n<span class=\\"line\\"><span>            }</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>        Loops.loop(10, i -> {</span></span>\\n<span class=\\"line\\"><span>            ColorConsole.colorPrintln(\\"第{}次,权重轮训{}\\", i, round(servers));</span></span>\\n<span class=\\"line\\"><span>        });</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br><span class=\\"line-number\\">53</span><br><span class=\\"line-number\\">54</span><br></div></div><div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>第0次,权重轮训Server{host='127.0.0.1', port=80}  </span></span>\\n<span class=\\"line\\"><span>第1次,权重轮训Server{host='127.0.0.1', port=80}  </span></span>\\n<span class=\\"line\\"><span>第2次,权重轮训Server{host='127.0.0.1', port=82}  </span></span>\\n<span class=\\"line\\"><span>第3次,权重轮训Server{host='127.0.0.1', port=82}  </span></span>\\n<span class=\\"line\\"><span>第4次,权重轮训Server{host='127.0.0.1', port=82}  </span></span>\\n<span class=\\"line\\"><span>第5次,权重轮训Server{host='127.0.0.1', port=82}  </span></span>\\n<span class=\\"line\\"><span>第6次,权重轮训Server{host='127.0.0.1', port=82}  </span></span>\\n<span class=\\"line\\"><span>第7次,权重轮训Server{host='127.0.0.1', port=81}  </span></span>\\n<span class=\\"line\\"><span>第8次,权重轮训Server{host='127.0.0.1', port=81}  </span></span>\\n<span class=\\"line\\"><span>第9次,权重轮训Server{host='127.0.0.1', port=81}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br></div></div><p>但这样还是不均匀的, 相同的ip可能被连续的访问到其实就没有做到负载均衡。</p>\\n<h3 id=\\"_2-3-2-平滑加权算法\\" tabindex=\\"-1\\">2.3.2 平滑加权算法 <a class=\\"header-anchor\\" href=\\"#_2-3-2-平滑加权算法\\" aria-label=\\"Permalink to &quot;2.3.2 平滑加权算法&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>主要解决上面那种不平滑的方案。这种方案是由<a href=\\"https://github.com/phusion/nginx/commit/27e94984486058d73157038f7950a0a36ecc6e35\\" target=\\"_blank\\" rel=\\"noreferrer\\">nginx</a>提出来的。\\n算法的数学原理。</p>\\n<ul>\\n<li>最大权重，减总权重</li>\\n<li>当前权重加上原权重</li>\\n</ul>\\n<p>如下权重变化。</p>\\n<p>| 轮数 | 选择前的当前权重 | 选择节点 | 选择后的当前权重 |\\n|</p>\\n","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第04篇:分布式配置中心","url":"/post/java/分布式/分布式配置中心.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"第09篇:分布式链路追踪","url":"/post/java/分布式/分布式链路追踪.html","excerpt":"","category":"分布式","date":{"time":null,"string":"Invalid Date"}},{"title":"分布式锁","url":"/post/java/分布式锁.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"线程安全之原子操作","url":"/post/java/原子操作.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/learn_1589361031000.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<p><strong>原子特性: 原子是最小的粒子,不可再分</strong></p>\\n<p>这并不是一个化学课,而是巧妙的借用了化学上的一个概念,即原子是最小的粒子,不可再分;原子操作也是不能再分的操作;\\n为了能把这个讲明白,下文基本都是大白话,其实Java本来并不是很难,而是总有一些人喜欢把简单的概念给复杂化。小编不喜欢\\n那种说辞,所以尽量简单易懂。如有问题,欢迎提出问题。共同交流进步,最后谢谢你的阅读。</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Java四大引用","url":"/post/java/四大引用.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<h1 id=\\"一、概念\\" tabindex=\\"-1\\">一、概念 <a class=\\"header-anchor\\" href=\\"#一、概念\\" aria-label=\\"Permalink to &quot;一、概念&quot;\\">&ZeroWidthSpace;</a></h1>\\n<h2 id=\\"_1-强引用\\" tabindex=\\"-1\\">1. 强引用 <a class=\\"header-anchor\\" href=\\"#_1-强引用\\" aria-label=\\"Permalink to &quot;1. 强引用&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>new 对象并指向引用变量的都是强引用,开发中大部分都是强引用。对于强引用,JVM宁愿报错<code>OutOfMemoryError</code>错误,是程序异常终止,\\n也不会回收强引用来解决内存, 对这类情况,可以通过赋值强引用对象=null,从而被JVM回收。\\n但是一般我们在方法中定义的强引用,会存在方法栈中,当方法运行完,退出,此时方法中的强引用也会因为引用数为0,从而被回收。</p>\\n<h2 id=\\"_2-软引用\\" tabindex=\\"-1\\">2. 软引用 <a class=\\"header-anchor\\" href=\\"#_2-软引用\\" aria-label=\\"Permalink to &quot;2. 软引用&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>在内存充足情况下,GC不会回收软引用对象,如果内存空间不足了,才会回收这些对象的内存。也正因为这个特性,所以软引用经常用作缓存对象使用。</p>\\n<h2 id=\\"_3-弱引用\\" tabindex=\\"-1\\">3. 弱引用 <a class=\\"header-anchor\\" href=\\"#_3-弱引用\\" aria-label=\\"Permalink to &quot;3. 弱引用&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>任意GC都会清理掉软引用对象,弱引用是最容易记的,任何的GC动作都会将弱引用对象给回收掉。</p>\\n<h2 id=\\"_4-虚引用\\" tabindex=\\"-1\\">4. 虚引用 <a class=\\"header-anchor\\" href=\\"#_4-虚引用\\" aria-label=\\"Permalink to &quot;4. 虚引用&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>和其他三个不一样,这个不对生命周期,有影响,而是当要回收时候,加入到Queue队列中</p>\\n<h1 id=\\"二、在jdk中的体现\\" tabindex=\\"-1\\">二、在JDK中的体现 <a class=\\"header-anchor\\" href=\\"#二、在jdk中的体现\\" aria-label=\\"Permalink to &quot;二、在JDK中的体现&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>| 类               | 引用说明                | 用途                   | 生存时间                | 被垃圾回收时间   |\\n|</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"委派双亲之类加载器","url":"/post/java/委派双亲之类加载器.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"成熟的线程要懂得拒绝","url":"/post/java/拒绝策略.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"线程安全感","url":"/post/java/线程安全.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"开个工厂造线程","url":"/post/java/线程工厂.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"线程池扫盲","url":"/post/java/线程池.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png\\" alt=\\"\\"></p>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">西魏陶渊明</p>\\n<p>莫笑少年江湖梦，谁不少年梦江湖</p>\\n</div>\\n<div class=\\"tip custom-block github-alert\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>本篇文章通读时间大概3分钟,希望在三分钟内的讲解，对你有所帮助，\\n一定要认真看并思考，好了。废话不多数，直接上干货,本节内容我们讲\\n的是Java的线程池,在讲之前我们首先看一下有哪些线程池，这些线程池\\n我们不过多讲解,因为我们的关注点是他们是如何实现的,和其运行的原理。</p>\\n</div>\\n<h1 id=\\"一、常用线程池列表\\" tabindex=\\"-1\\">一、常用线程池列表 <a class=\\"header-anchor\\" href=\\"#一、常用线程池列表\\" aria-label=\\"Permalink to &quot;一、常用线程池列表&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>这部分内容,只是帮助你回顾一下线程池的知识，大家重点看方法内的实现</p>\\n<p>1、构造一个固定线程数目的线程池，配置的corePoolSize与maximumPoolSize大小相同，同时使用了一个无界LinkedBlockingQueue存放阻塞任务，因此多余的任务将存在再阻塞队列，不会由RejectedExecutionHandler处理</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ExecutorService </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newFixedThreadPool</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> nThreads) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ThreadPoolExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(nThreads, nThreads,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                                      0L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.MILLISECONDS,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                                      new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> LinkedBlockingQueue&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Runnable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>2、构造一个缓冲功能的线程池，配置corePoolSize=0，maximumPoolSize=Integer.MAX_VALUE，keepAliveTime=60s,以及一个无容量的阻塞队列 SynchronousQueue，因此任务提交之后，将会创建新的线程执行；线程空闲超过60s将会销毁</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ExecutorService </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newCachedThreadPool</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ThreadPoolExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Integer.MAX_VALUE,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                                      60L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.SECONDS,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                                      new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> SynchronousQueue&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Runnable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><p>3、构造一个只支持一个线程的线程池，配置corePoolSize=maximumPoolSize=1，无界阻塞队列LinkedBlockingQueue；保证任务由一个线程串行执行</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ExecutorService </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newSingleThreadExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> FinalizableDelegatedExecutorService</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            (</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ThreadPoolExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">                                    0L</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, TimeUnit.MILLISECONDS,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                                    new</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> LinkedBlockingQueue&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Runnable</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">>()));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><p>4、构造有定时功能的线程池，配置corePoolSize，无界延迟阻塞队列DelayedWorkQueue；有意思的是：maximumPoolSize=Integer.MAX_VALUE，由于DelayedWorkQueue是无界队列，所以这个值是没有意义的</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * Creates a thread pool that can schedule commands to run after a</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * given delay, or to execute periodically.</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> corePoolSize</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> the number of threads to keep in the pool,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * even if they are idle</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@return</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> a newly created scheduled thread pool</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@throws</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> IllegalArgumentException</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> if {@code corePoolSize &#x3C; 0}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> ScheduledExecutorService </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newScheduledThreadPool</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> corePoolSize) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ScheduledThreadPoolExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(corePoolSize);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br></div></div><h1 id=\\"二、threadpoolexecutor\\" tabindex=\\"-1\\">二、ThreadPoolExecutor <a class=\\"header-anchor\\" href=\\"#二、threadpoolexecutor\\" aria-label=\\"Permalink to &quot;二、ThreadPoolExecutor&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>相信大家从上面的众多线程池中都已经看到了这个类,因为上面的线程池底层的构造都是由这个类创建的,</p>\\n<p>那么我们就开始研究这个类</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">/**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@since</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 1.5</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@author</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> Doug Lea</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ThreadPoolExecutor</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> extends</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AbstractExecutorService</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">\\t...</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><p>首先看一下构造方法，关于注释一定要好好看，每个参数都理解了，那么你就弄懂了</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">/**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> corePoolSize</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 核心线程池大小</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> maximumPoolSize</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 线程池最大容量</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> keepAliveTime</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 线程池空闲时，线程存活时间</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> unit</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 时间单位</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> workQueue</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 工作队列</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">\\t * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@param</span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\"> threadFactory</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> 线程工厂</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@throws</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> IllegalArgumentException</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> if one of the following holds:&#x3C;br></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *         {@code corePoolSize &#x3C; 0}&#x3C;br></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *         {@code keepAliveTime &#x3C; 0}&#x3C;br></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *         {@code maximumPoolSize &#x3C;= 0}&#x3C;br></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     *         {@code maximumPoolSize &#x3C; corePoolSize}</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@throws</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> NullPointerException</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> if {@code workQueue} is null</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">      public</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ThreadPoolExecutor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> corePoolSize,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                                 int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> maximumPoolSize,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                                 long</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> keepAliveTime,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                                 TimeUnit unit,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                                 BlockingQueue</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">Runnable</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> workQueue,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                                 ThreadFactory threadFactory) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">           this</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                threadFactory, defaultHandler);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">       }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br></div></div><h1 id=\\"三、构造参数详解\\" tabindex=\\"-1\\">三、构造参数详解 <a class=\\"header-anchor\\" href=\\"#三、构造参数详解\\" aria-label=\\"Permalink to &quot;三、构造参数详解&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>| 参数            | 说明                                                         |\\n|</p>\\n","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"线程状态","url":"/post/java/线程的工作状态.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"给线程归归类","url":"/post/java/线程组.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"多线程之线程隔离","url":"/post/java/线程隔离.html","excerpt":"","category":"Java进阶","date":{"time":null,"string":"Invalid Date"}},{"title":"Redis缓存穿透雪崩问题","url":"/post/java/高并发/Redis缓存穿透雪崩问题.html","excerpt":"","category":"缓存","date":{"time":null,"string":"Invalid Date"}},{"title":"一致性hash问题","url":"/post/java/高并发/一致性hash问题.html","excerpt":"","category":"缓存","date":{"time":null,"string":"Invalid Date"}},{"title":"阿里云的Servrless","url":"/post/other/aliservless.html","excerpt":"","category":"其他","date":{"time":null,"string":"Invalid Date"}},{"title":"八阿哥的剑","url":"/post/other/bug.html","excerpt":"","category":"其他","date":{"time":null,"string":"Invalid Date"}},{"title":"其他","url":"/post/other/","excerpt":"","category":"其他","date":{"time":null,"string":"Invalid Date"}},{"title":"程序猿到底有没有必要买一台阿里云服务器","url":"/post/other/程序猿到底有没有必要买一台阿里云服务器.html","excerpt":"","category":"其他","date":{"time":null,"string":"Invalid Date"}},{"title":"Alfred-workflow-js","url":"/post/project/alfred/alfred-worflow-js.html","excerpt":"","category":"Alfred Plugin","date":{"time":null,"string":"Invalid Date"}},{"title":"Alfred添加工作流","url":"/post/project/alfred/create-alfred.html","excerpt":"","category":"Alfred Plugin","date":{"time":null,"string":"Invalid Date"}},{"title":"Mac 效率工具必备神器Alfred插件开发","url":"/post/project/alfred/效率工具必备神器Alfred插件开发.html","excerpt":"","category":"Alfred Plugin","date":{"time":null,"string":"Invalid Date"}},{"title":"项目","url":"/post/project/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"快速安装","url":"/post/project/jmvn/introduction-install.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"工具介绍","url":"/post/project/jmvn/introduction.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"数据模型导出","url":"/post/project/jmvn/jmvn-export.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"创建项目","url":"/post/project/jmvn/jmvn-init.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"数据模型安装","url":"/post/project/jmvn/jmvn-install.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"插件开发","url":"/post/project/jmvn/jmvn-plugin.html","excerpt":"","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"基于命令行的Java脚手架","url":"/post/project/jmvn/基于命令行的Java脚手架.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">jmvn</p>\\n<p>现阶段SpringBoot + Maven多模块是构建Java后台项目的标准格式，但是Maven多模块和成熟的Java项目结构搭建起来也是比较费力的。\\n对于一个老鸟来说可能需要5分钟,但是对于一个小白或者是非专业认识,可能需要更长的时间。\\n这里提供一个命令行交互式的构建工具，希望能解决这种简单重复的工作。\\njmvn就是为了解决这问题诞生的, 一个快速构建Maven多模块应用的构建工具 <a href=\\"https://github.com/lxchinesszz/mvn-cli\\" target=\\"_blank\\" rel=\\"noreferrer\\"><img src=\\"https://img.shields.io/badge/-jmvn-green?style=for-the-badge&amp;logo=appveyor\\" alt=\\"\\"></a>\\n它不仅能提供快速构建项目的能力，同时也能快速的安装数据模型生成Java对象,同时也可能快速导出数据库表结构信息，生成表结构文档。</p>\\n</div>\\n<h2 id=\\"背景-目标\\" tabindex=\\"-1\\">背景 &amp; 目标 <a class=\\"header-anchor\\" href=\\"#背景-目标\\" aria-label=\\"Permalink to &quot;背景 &amp; 目标&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>目标打造一个简单好用的 Java 服务脚手架工具，让任何没有开发经验的同学都能快速构建一个可以运行的项目</p>\\n<p>工具围绕几个方面进行开发, 力求在以下方面提高开发的工作效率, 同时同过脚手架的方式从一开始就统一下项目结构和模型。</p>\\n<ul>\\n<li>深度定制 (定制公司标准的项目结构)</li>\\n<li>快速构建标准的Maven多模块服务</li>\\n<li>支持数据库模型快速安装 (一次配置终生使用, 多快好省)</li>\\n<li>数据库模型文档一键导出 (每次表结构变更, 快速导出最新表文档)</li>\\n</ul>\\n<h2 id=\\"一、介绍-introduce\\" tabindex=\\"-1\\">一、介绍 | Introduce <a class=\\"header-anchor\\" href=\\"#一、介绍-introduce\\" aria-label=\\"Permalink to &quot;一、介绍 | Introduce&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>快速构建支持SpringBoot的Maven多模块应用,启动及快速打包部署</p>\\n<ul>\\n<li>支持Maven多模块构建、</li>\\n<li>数据库模型安装、</li>\\n<li>数据库模型导出),</li>\\n<li>统一项目规范,</li>\\n<li>提高工作效率,</li>\\n<li>可进行深度定制。</li>\\n</ul>\\n<h2 id=\\"二、快速安装-fast-installation\\" tabindex=\\"-1\\">二、快速安装 | Fast installation <a class=\\"header-anchor\\" href=\\"#二、快速安装-fast-installation\\" aria-label=\\"Permalink to &quot;二、快速安装 | Fast installation&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_2-1-node环境安装\\" tabindex=\\"-1\\">2.1 Node环境安装 <a class=\\"header-anchor\\" href=\\"#_2-1-node环境安装\\" aria-label=\\"Permalink to &quot;2.1 Node环境安装&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"vp-code-group vp-adaptive-theme\\"><div class=\\"tabs\\"><input type=\\"radio\\" name=\\"group-wOEHi\\" id=\\"tab-n2MYPEh\\" checked=\\"checked\\"><label for=\\"tab-n2MYPEh\\">txt</label><input type=\\"radio\\" name=\\"group-wOEHi\\" id=\\"tab-EiSLOmt\\" ><label for=\\"tab-EiSLOmt\\">txt</label></div><div class=\\"blocks\\">\\n<p>::: code-group-item Window</p>\\n<div class=\\"language- vp-adaptive-theme active line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>https://nodejs.org/dist/v14.15.5/node-v14.15.5-x64.msi</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>:::</p>\\n<p>::: code-group-item Mac:active</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>https://nodejs.org/dist/v15.9.0/node-v15.9.0.pkg</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><p>:::</p>\\n</div></div>\\n<h2 id=\\"_2-2-安装\\" tabindex=\\"-1\\">2.2 安装 <a class=\\"header-anchor\\" href=\\"#_2-2-安装\\" aria-label=\\"Permalink to &quot;2.2 安装&quot;\\">&ZeroWidthSpace;</a></h2>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>➜ npm i jmvn -g</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br></div></div><h2 id=\\"三、功能介绍\\" tabindex=\\"-1\\">三、功能介绍 <a class=\\"header-anchor\\" href=\\"#三、功能介绍\\" aria-label=\\"Permalink to &quot;三、功能介绍&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h2 id=\\"_3-1-快速构建-to-quickly-build\\" tabindex=\\"-1\\">3.1 快速构建 | To quickly build <a class=\\"header-anchor\\" href=\\"#_3-1-快速构建-to-quickly-build\\" aria-label=\\"Permalink to &quot;3.1 快速构建 | To quickly build&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650116393000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_3-1-1-命令行构建项目-command-line-build\\" tabindex=\\"-1\\">3.1.1 命令行构建项目 | Command line build <a class=\\"header-anchor\\" href=\\"#_3-1-1-命令行构建项目-command-line-build\\" aria-label=\\"Permalink to &quot;3.1.1 命令行构建项目 | Command line build&quot;\\">&ZeroWidthSpace;</a></h3>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>ℹ Build:shop/shop-web/src/main/java/com/github/shop/web/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-web/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-web/src/main/java/com/github/shop/web/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks webPath:shop/shop-web/src/main/java/com/github/shop/web/</span></span>\\n<span class=\\"line\\"><span>✔ Build: Add SpringBoot Config:shop/shop-web/src/main/resources/application.yml</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-service/src/main/java/com/github/shop/service/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-service/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-service/src/main/java/com/github/shop/service/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks servicePath:shop/shop-service/src/main/java/com/github/shop/service/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-domain/src/main/java/com/github/shop/domain/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-domain/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-domain/src/main/java/com/github/shop/domain/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks domainPath:shop/shop-domain/src/main/java/com/github/shop/domain/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-dal/src/main/java/com/github/shop/dal/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-dal/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-dal/src/main/java/com/github/shop/dal/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks dalPath:shop/shop-dal/src/main/java/com/github/shop/dal/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-integration/src/main/java/com/github/shop/integration/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-integration/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-integration/src/main/java/com/github/shop/integration/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks integrationPath:shop/shop-integration/src/main/java/com/github/shop/integration/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-config/src/main/java/com/github/shop/config/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-config/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-config/src/main/java/com/github/shop/config/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks configPath:shop/shop-config/src/main/java/com/github/shop/config/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-common/src/main/java/com/github/shop/common/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-common/src/main/resources/</span></span>\\n<span class=\\"line\\"><span>ℹ Build:shop/shop-common/src/main/java/com/github/shop/common/</span></span>\\n<span class=\\"line\\"><span>ℹ MavenHooks commonPath:shop/shop-common/src/main/java/com/github/shop/common/</span></span>\\n<span class=\\"line\\"><span>✔ GitIgnore before</span></span>\\n<span class=\\"line\\"><span>   __  ____   ___  __    _______   ____</span></span>\\n<span class=\\"line\\"><span>  /  |/  / | / / |/ /___/ ___/ /  /  _/</span></span>\\n<span class=\\"line\\"><span> / /|_/ /| |/ /    /___/ /__/ /___/ /</span></span>\\n<span class=\\"line\\"><span>/_/  /_/ |___/_/|_/    \\\\___/____/___/  Application shop Build Success</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>✔ 🚀 JMVN CLI v1.0.6</span></span>\\n<span class=\\"line\\"><span>┌────────┬────────┬──────────┬────────────────┬──────────────────────────────────────┬────────┐</span></span>\\n<span class=\\"line\\"><span>│ 项目名 │ 作者   │ 项目版本 │ SpringBoot版本 │ 描述                                 │ 端口号 │</span></span>\\n<span class=\\"line\\"><span>├────────┼────────┼──────────┼────────────────┼──────────────────────────────────────┼────────┤</span></span>\\n<span class=\\"line\\"><span>│ shop   │ 周杰伦 │ 1.0.0    │ 0.5.1-RELEASE  │ 一个基于SpringBoot的商城项目后台服务 │ 10086  │</span></span>\\n<span class=\\"line\\"><span>└────────┴────────┴──────────┴────────────────┴──────────────────────────────────────┴────────┘</span></span>\\n<span class=\\"line\\"><span>✔ GitIgnore invoke</span></span>\\n<span class=\\"line\\"><span>✔ GitIgnore after</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br></div></div><h2 id=\\"_3-2-安装数据库库模型-install-the-database-library-model\\" tabindex=\\"-1\\">3.2 安装数据库库模型 | Install the database library model <a class=\\"header-anchor\\" href=\\"#_3-2-安装数据库库模型-install-the-database-library-model\\" aria-label=\\"Permalink to &quot;3.2 安装数据库库模型 | Install the database library model&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_3-2-1-配置安装信息-configure-installation-information\\" tabindex=\\"-1\\">3.2.1 配置安装信息 | Configure installation information# <a class=\\"header-anchor\\" href=\\"#_3-2-1-配置安装信息-configure-installation-information\\" aria-label=\\"Permalink to &quot;3.2.1 配置安装信息 | Configure installation information#&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>配置项目开发数据库地址</li>\\n<li>配置模型命名规则及安装目录</li>\\n</ul>\\n<div class=\\"language-json vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">json</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">  \\"dbConfig\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    \\"host\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"10.*.*.121\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    \\"user\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"o*test\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    \\"password\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"9G****RZ\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">    \\"database\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"***\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  },</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">  \\"models\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: [</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      \\"suffix\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"DO\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      \\"tableName\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: [</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">        \\"w_order\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">,</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">        \\"w_push_order\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">      ],</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">      \\"path\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">: </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"scm-dao/src/main/java/com/idanchuang/scm/dao/entity/Do\\"</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">  ]</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br></div></div><h3 id=\\"_3-2-2-执行命令-execute-the-command\\" tabindex=\\"-1\\">3.2.2 执行命令 | Execute the command <a class=\\"header-anchor\\" href=\\"#_3-2-2-执行命令-execute-the-command\\" aria-label=\\"Permalink to &quot;3.2.2 执行命令 | Execute the command&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650116518000.png\\" alt=\\"\\"></p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>➜ jmvn</span></span>\\n<span class=\\"line\\"><span>JMVN CLI v1.0.6</span></span>\\n<span class=\\"line\\"><span>Usage: jmvn [options] [command]</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>快速构建支持SpringBoot的Maven多模块应用</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>Options:</span></span>\\n<span class=\\"line\\"><span>  -V, --version        output the version number</span></span>\\n<span class=\\"line\\"><span>  -h, --help           display help for command</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>Commands:</span></span>\\n<span class=\\"line\\"><span>  init                 创建一个新的Maven多模块项目</span></span>\\n<span class=\\"line\\"><span>  install|i [options]  安装数据模型</span></span>\\n<span class=\\"line\\"><span>  export [options]     导出数据模型 (支持命令行模式 &#x26; 交互模式)</span></span>\\n<span class=\\"line\\"><span>  help [command]       display help for command</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br></div></div><h2 id=\\"_3-3-导出数据模型文档-export-data-model-documents\\" tabindex=\\"-1\\">3.3 导出数据模型文档 | Export data model documents <a class=\\"header-anchor\\" href=\\"#_3-3-导出数据模型文档-export-data-model-documents\\" aria-label=\\"Permalink to &quot;3.3 导出数据模型文档 | Export data model documents&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>为了方便我们写技术文档, 支持直接导出成 markdown 格式文档。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650116581000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"四、发布记录-release-record\\" tabindex=\\"-1\\">四、发布记录 | Release record <a class=\\"header-anchor\\" href=\\"#四、发布记录-release-record\\" aria-label=\\"Permalink to &quot;四、发布记录 | Release record&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><strong>1.0.1</strong></p>\\n<p>构建服务\\n支持注册命令</p>\\n<p><strong>1.0.2</strong></p>\\n<p>代码精简及优化\\n版本检测及升级</p>\\n<p><strong>1.0.3</strong></p>\\n<p>fix端口号映射问题</p>\\n<p><strong>1.0.4</strong></p>\\n<p>优化版本检测,在网络差场景的用户体验</p>\\n<h2 id=\\"五、定制-custom\\" tabindex=\\"-1\\">五、定制 | Custom <a class=\\"header-anchor\\" href=\\"#五、定制-custom\\" aria-label=\\"Permalink to &quot;五、定制 | Custom&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>为了达到深度定制的能力, 你所看到的一切都是可配置的。在模块每一层创建的同时也提供了钩子方法。允许你在钩子节点去做定制开发 。\\n<strong><a href=\\"https://github.com/lxchinesszz/mvn-cli/blob/master/action/MavenHooks.js\\" target=\\"_blank\\" rel=\\"noreferrer\\">MavenHooks.js</a></strong></p>\\n<p>欢迎感兴趣的小伙伴一起参与开发, 🚀 <code>call me！</code></p>\\n<p>微信: <code>lxchinesszz</code>\\n邮箱: <code>lxchinesszz@163.com</code></p>\\n<h2 id=\\"六、扩展知识-expand-the-knowledge\\" tabindex=\\"-1\\">六、扩展知识 | Expand the knowledge <a class=\\"header-anchor\\" href=\\"#六、扩展知识-expand-the-knowledge\\" aria-label=\\"Permalink to &quot;六、扩展知识 | Expand the knowledge&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>项目结构设计支持配置, 在配置前请确定你的编程方法论和价值观。以下文档仅供参考。也是当前工具所保持的价值观。</p>\\n<h2 id=\\"_6-1-分层命名-hierarchical-naming\\" tabindex=\\"-1\\">6.1 分层命名 | Hierarchical naming <a class=\\"header-anchor\\" href=\\"#_6-1-分层命名-hierarchical-naming\\" aria-label=\\"Permalink to &quot;6.1 分层命名 | Hierarchical naming&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650116968000.png\\" alt=\\"\\">\\n明确业务分层架构，定义领取模型, 编程不迷茫</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650116958000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"_6-2-数据模型规范-data-model-specification\\" tabindex=\\"-1\\">6.2 数据模型规范 | Data model specification <a class=\\"header-anchor\\" href=\\"#_6-2-数据模型规范-data-model-specification\\" aria-label=\\"Permalink to &quot;6.2 数据模型规范 | Data model specification&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650117078000.png\\" alt=\\"\\">\\n迪米特法则: 不要和陌生人说话,数据模型之间保持最少的了解 迪米特法则: 不要和陌生人说话,数据模型之间保持最少的了</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1650117093000.png\\" alt=\\"\\"></p>\\n<h2 id=\\"七、插件开发-plug-in-development\\" tabindex=\\"-1\\">七、插件开发 | Plug-in development <a class=\\"header-anchor\\" href=\\"#七、插件开发-plug-in-development\\" aria-label=\\"Permalink to &quot;七、插件开发 | Plug-in development&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>脚手架工具会将在每个 Maven Module 创建过程中去发出不同对应的事件, 插件开发者可以不同的事件类型来开发插件。</p>\\n<h2 id=\\"_7-1-事件类型-the-event-type\\" tabindex=\\"-1\\">7.1 事件类型 | The event type <a class=\\"header-anchor\\" href=\\"#_7-1-事件类型-the-event-type\\" aria-label=\\"Permalink to &quot;7.1 事件类型 | The event type&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>| 事件类型     | 事件说明     | 环境信息                                   |\\n|</p>\\n","category":"JMVN","date":{"time":null,"string":"Invalid Date"}},{"title":"JVM内存模型","url":"/post/project/jvm/JVM.html","excerpt":"","category":"JVM","date":{"time":null,"string":"Invalid Date"}},{"title":"JVM参数配置说明","url":"/post/project/jvm/JVM参数配置说明.html","excerpt":"<p><a href=\\"https://help.aliyun.com/document_detail/193455.html\\" target=\\"_blank\\" rel=\\"noreferrer\\">参考地址</a></p>\\n<h2 id=\\"一、内存容量调优参数\\" tabindex=\\"-1\\">一、内存容量调优参数 <a class=\\"header-anchor\\" href=\\"#一、内存容量调优参数\\" aria-label=\\"Permalink to &quot;一、内存容量调优参数&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1654141304000.png\\" alt=\\"\\"></p>\\n<p>| 配置参数                     | 说明                                   | 示例                                                         |\\n| :</p>\\n","category":"JVM","date":{"time":null,"string":"Invalid Date"}},{"title":"JVM调优","url":"/post/project/jvm/JVM调优.html","excerpt":"<p><a href=\\"https://github.com/lxchinesszz/learn-example/blob/master/learn-jvm/src/test/java/learn/jvm\\" target=\\"_blank\\" rel=\\"noreferrer\\">示例代码地址</a></p>\\n<h2 id=\\"一、jvm内存介绍\\" tabindex=\\"-1\\">一、JVM内存介绍 <a class=\\"header-anchor\\" href=\\"#一、jvm内存介绍\\" aria-label=\\"Permalink to &quot;一、JVM内存介绍&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>我们在学习JVM的内存管理的时候,我们的思维要跳出Java的局限。我们要这么理解。我们写的Java代码，是运行在JVM上的。\\n如果让你来实现JVM那么。你会怎么处理呢?</p>\\n<ul>\\n<li>公共部分(堆heap)\\n<ul>\\n<li><code>Class字节码</code>是公共的,是共享的,所有线程都要认识字节码。</li>\\n<li><code>new的对象</code>是公共的,也是共享的,所有线程要都能认识这些实例对象,能读取到实例的数据。</li>\\n</ul>\\n</li>\\n<li>私有部分 (栈stock)\\n<ul>\\n<li>Java中每个线程的执行中的代码，及代码中的局部变量等信息是私有的。每个线程之间都要维护一份。</li>\\n<li>JVM虚拟栈和本地方法栈。</li>\\n<li>代码是怎么执行的,当然是一行一行执行。那么这一行一行的代码是放在哪里的呢? 是放在栈里面的。Java代码是在JVM来执行的。\\n所以这个栈，我们称为<code>JVM虚拟栈</code>。</li>\\n<li>JVM中有些方法是调用其他语言实现的, 会使用<code>本地方法栈</code>。</li>\\n<li>那么谁来读取栈里面的数据,来出栈执行呢? 这叫做<code>PC寄存区</code>。</li>\\n</ul>\\n</li>\\n</ul>\\n<h2 id=\\"_1-1-堆空间\\" tabindex=\\"-1\\">1.1 堆空间 <a class=\\"header-anchor\\" href=\\"#_1-1-堆空间\\" aria-label=\\"Permalink to &quot;1.1 堆空间&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><a href=\\"/post/project/jvm/JVM参数配置说明.html\\">JVM参数配置说明</a></p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1654183539000.png\\" alt=\\"\\"></p>\\n<h3 id=\\"_1-1-1-堆上信息\\" tabindex=\\"-1\\">1.1.1 堆上信息 <a class=\\"header-anchor\\" href=\\"#_1-1-1-堆上信息\\" aria-label=\\"Permalink to &quot;1.1.1 堆上信息&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1654188805000.png\\" alt=\\"\\"></p>\\n<p><code>new</code> 出来的对象都在堆上。当堆的内存不足，会触发gc。<a href=\\"/\\">GC策略</a>。</p>\\n<h3 id=\\"_1-1-2-堆的相关配置\\" tabindex=\\"-1\\">1.1.2 堆的相关配置 <a class=\\"header-anchor\\" href=\\"#_1-1-2-堆的相关配置\\" aria-label=\\"Permalink to &quot;1.1.2 堆的相关配置&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>| 配置参数                         | 说明                        | 示例                                                                                                                                                                             |\\n|:</p>\\n","category":"JVM","date":{"time":null,"string":"Invalid Date"}},{"title":"HTTP协议使用示例","url":"/post/project/mojito/HTTP协议使用示例.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"RPC协议使用示例","url":"/post/project/mojito/RPC协议使用示例.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"Mojito介绍","url":"/post/project/mojito/","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"Protocol协议篇设计思路","url":"/post/project/mojito/协议.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"如何设计一款通信层框架","url":"/post/project/mojito/如何设计一款通信层框架.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"第01篇:手写JavaRPC框架之思路分析","url":"/post/project/mojito/第01篇:手写JavaRPC框架之思路分析.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"第02篇:手写JavaRPC框架之设计思路","url":"/post/project/mojito/第02篇:手写JavaRPC框架之设计思路.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"第03篇:手写JavaRPC框架之搞定序列化","url":"/post/project/mojito/第03篇:手写JavaRPC框架之搞定序列化.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"第04篇:手写JavaRPC框架之搞定网络通信","url":"/post/project/mojito/第04篇:手写JavaRPC框架之搞定网络通信.html","excerpt":"","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"第05篇:手写JavaRPC框架之执行层思路","url":"/post/project/mojito/第05篇:手写JavaRPC框架之执行层思路.html","excerpt":"<p><img src=\\"https://img.springlearn.cn/blog/d0e05f0a0f96e2399aefe0e8fe00e23c.png\\" alt=\\"\\"></p>\\n<p><strong>作者:</strong> 西魏陶渊明</p>\\n<p><strong>博客:</strong> <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<blockquote>\\n<p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p>\\n</blockquote>\\n<p><img src=\\"https://img.springlearn.cn/blog/8f3392b9badb093f9e1a6472b4a98487.gif\\" alt=\\"\\"></p>\\n<h2 id=\\"一、思路分析\\" tabindex=\\"-1\\">一、思路分析 <a class=\\"header-anchor\\" href=\\"#一、思路分析\\" aria-label=\\"Permalink to &quot;一、思路分析&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><img src=\\"https://img.springlearn.cn/blog/fe6f42fd58fad7a1ca190f66c730405b.png\\" alt=\\"\\"></p>\\n<p>通过前四篇文章的一起 Coding, 我们已经完成了 30%的工作,即完成了一个通信层的搭建。在不依赖任何 web 容器的情况下,可以实现服务之间的通信工作。就像下面这样。</p>\\n<p><strong>客户端&amp;服务端通信</strong></p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">    /**</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">@author</span><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"> liuxin</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 个人博客：https://java.springlearn.cn</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 公众号：西魏陶渊明  ｛关注获取学习源码｝</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     * 2022/8/11 23:12</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">     */</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"构建服务端【阻塞方式】\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> server</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() throws Exception {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">       Mojito.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">server</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(RpcRequest.class, RpcResponse.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">                // 业务层,读取请求对象,返回结果</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">businessHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">((channelContext, request) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RpcResponse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">create</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">start</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">666</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Test</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">DisplayName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"构建客户端【同步方式】\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> clientSync</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() throws Exception{</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Client&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">RpcRequest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">RpcResponse</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> client </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Mojito.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">client</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(RpcRequest.class, RpcResponse.class)</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                .</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">connect</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"127.0.0.1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">6666</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(client.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">send</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RpcRequest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">()));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br></div></div><p>这只是完成了通信, 就好比,两台服务器之间建立了沟通管道,但是究竟怎么用这个管道呢? 如何将客户端的请求参数发送到服务端的服务器上执行结果,并返回给客户端呢? 这就是本篇文章要讨论的话题。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/70b0a4323f80010510da069e00929af9.png\\" alt=\\"\\"></p>\\n<p>暂且我们把这一层叫做 RPC 执行层吧。按照老套路,在真正开始 Coding 之前,我们先梳理一下逻辑,画一个最基础的图。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/e159fc7ffa56083fdbb9b81048b9c5ee.png\\" alt=\\"\\"></p>\\n<ul>\\n<li>左边客户端一个方法, 有 4 个服务端的实现。</li>\\n<li>右边某个服务端有一个具体的实现。</li>\\n</ul>\\n<p>左边客户端的接口,通过代理的方式,将客户端的参数通过网络管道传输给某台服务端的本地进行执行。执行后获取结果,返回给客户端的调用方。而这些都是通过代理的方式实现的,所以开发者就好像调用本地方法一样。实现一次远程方法的调用。</p>\\n<p>以上是最最基础的远程调用的过程,但是如果就这的话就太基础了,下面我们会在这个基础上去做更多的事情。</p>\\n<h3 id=\\"_1-1-客户端实现思路\\" tabindex=\\"-1\\">1.1 客户端实现思路 <a class=\\"header-anchor\\" href=\\"#_1-1-客户端实现思路\\" aria-label=\\"Permalink to &quot;1.1 客户端实现思路&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>RPC 服务,服务端会给客户端提供一个 API 包,这个包里面没有具体的实现,但是客户端能直接进行调用。学习 Java 的都知道接口是不能实例化的,但是为什么服务端给我们的 API,我们能直接调用呢? 当然是代理了。所以我们要学的第一个东西,就是学会代理。</p>\\n<ol>\\n<li>使用代理实现接口的实例化。【代理是我们必须要掌握的】</li>\\n</ol>\\n<p>但是代理层里面怎么做呢?</p>\\n<ol start=\\"2\\">\\n<li>代理层将要调用的远程类和当前的客户端的参数,进行封装,然后通过通信层发送给服务端进行直接,然后拿到结果返回。这里面可能就设计到异步转同步的问题,但是没关系我们通信层直接就提供了实现。</li>\\n</ol>\\n<p>以上就是客户端最基础的功能了。但是我们不满足于此, 市面上 RPC 框架有的功能,我们也要有。比如那些呢?\\n负载均衡、容错策略、事件广播我们也要有。那么他们究竟怎么做的呢?</p>\\n<ol start=\\"3\\">\\n<li>\\n<p>负载均衡,我们看上面客户端的图,会发现这个服务有 4 个实现 [<code>172.168.10.1</code>,<code>172.168.10.2</code>,<code>172.168.10.3</code>,<code>172.168.10.4</code>],说明服务端可能是集群部署的。那么既然有 4 个实例,我们就不能尽管这，一个 ip 进行进行调用,那么如何尽量让每个实例都能收到请求呢? 这就是负载均衡。</p>\\n</li>\\n<li>\\n<p>容错策略,当我们调用一台实例出错了,直接报错? 还是重试一下请求？或者是换一个实例在请求呢? 这就是容错策略。甚至我们还可以实现一个熔断器。</p>\\n</li>\\n</ol>\\n<p><img src=\\"https://img.springlearn.cn/blog/9d8ac7a0fcfb51c2951a93a86f7a3961.png\\" alt=\\"\\"></p>\\n<p>这里不会设计也没关系,我们会抄,哦,不对是借鉴。以下是dubbo的容错策略。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/ba911f5f18960a64e512665ffa0f09e0.png\\" alt=\\"\\"></p>\\n<ol start=\\"5\\">\\n<li>既然客户端有这个服务的所有实例信息,那么是不是不仅可以进行点对点的请求，还是能进行广播呢。\\n如下右图,同一个请求,如果发现是广播模式,就不在负载均衡的选其中的一个进行执行,而是每个都进行通知。</li>\\n</ol>\\n<p><img src=\\"https://img.springlearn.cn/blog/bf08e6ff0fd9428f810b39174b8c51ed.png\\" alt=\\"\\"></p>\\n<p>这五点就是客户端要具备的基础能力。除此之外客户端还要有断线重连, 自动剔除无效的链接的功能。极端情况也还要考虑当注册中心也挂了,无法找到服务端地址的场景,本地是不是也要维护一个服务连接的注册表。</p>\\n<h3 id=\\"_1-2-服务端实现思路\\" tabindex=\\"-1\\">1.2 服务端实现思路 <a class=\\"header-anchor\\" href=\\"#_1-2-服务端实现思路\\" aria-label=\\"Permalink to &quot;1.2 服务端实现思路&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>服务端我们就可以参考 Web 容器的思路，比如 Servle 如何处理请求呢? http 过来就是一个 url,如何匹配到要执行的方法的呢?</p>\\n<ol>\\n<li>服务启动将 API 实现保存到 Map 接口中。</li>\\n<li>服务收到请求,Dispatch 根据请求信息从 map 中获取执行器。</li>\\n<li>通过反射获取执行结果,返回给调用方。</li>\\n</ol>\\n<p><img src=\\"https://img.springlearn.cn/blog/cb8c0658eee15b5b8a5790fa5bb621ef.png\\" alt=\\"\\"></p>\\n<p>同时将自己的信息注册到注册中心,让客户端能注册中心发现自己。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/3ec7c0abdc42dd28e81a1d48a9ec41dc.png\\" alt=\\"\\"></p>\\n<p>好了我们实现代码的大概思路就是这些,后面我们会一步一会去实现上面我们所说的功能。下面我们来看下\\n如果要实现上面的思路,还需要那些技术储备和软实力吧。</p>\\n<h2 id=\\"二、技术储备\\" tabindex=\\"-1\\">二、技术储备 <a class=\\"header-anchor\\" href=\\"#二、技术储备\\" aria-label=\\"Permalink to &quot;二、技术储备&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>要实现上面的想法,究竟需要哪些技术储备呢? 最基础的就是代理了。除此之外还要有架构设计能力。</p>\\n<h3 id=\\"_2-1-代理模式\\" tabindex=\\"-1\\">2.1 代理模式 <a class=\\"header-anchor\\" href=\\"#_2-1-代理模式\\" aria-label=\\"Permalink to &quot;2.1 代理模式&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>上面我们所说的负载均衡，容错策略，广播都要在代理中实现。</p>\\n<h4 id=\\"_2-1-1-jdk-代理\\" tabindex=\\"-1\\">2.1.1 JDK 代理 <a class=\\"header-anchor\\" href=\\"#_2-1-1-jdk-代理\\" aria-label=\\"Permalink to &quot;2.1.1 JDK 代理&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>JDK 代理必须要实现接口,第二个参数是接口数组,第三个参数是<code>InvocationHandler</code>。属于比较基础的内容。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> ProxyFactory</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> interface</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> User</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        User user </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (User) Proxy.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">newProxyInstance</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Thread.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">currentThread</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getContextClassLoader</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(), </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> Class</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[]{User.class}, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> InvocationHandler</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">invoke</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">proxy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Method </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">method</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Throwable {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"queryName\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    return</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"Jay\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(user.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br></div></div><h4 id=\\"_2-1-2-cglib-代理\\" tabindex=\\"-1\\">2.1.2 Cglib 代理 <a class=\\"header-anchor\\" href=\\"#_2-1-2-cglib-代理\\" aria-label=\\"Permalink to &quot;2.1.2 Cglib 代理&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>Cglib 代理,代理类不用有接口。</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Person</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            return</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"jay\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] args) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Person person </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (Person) Enhancer.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">create</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Person.class, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> MethodInterceptor</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Override</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">            public</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Object </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">intercept</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(Object </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">o</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, Method </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">method</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Object</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">objects</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, MethodProxy </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">methodProxy</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">throws</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Throwable {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (method.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">getName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">().</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">equals</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"queryName\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    return</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\"> \\"代理:Jay\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                } </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">else</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">                    return</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\"> null</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">;</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">                }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(person.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">queryName</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">());</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br></div></div><h3 id=\\"_2-2-负载均衡策略\\" tabindex=\\"-1\\">2.2 负载均衡策略 <a class=\\"header-anchor\\" href=\\"#_2-2-负载均衡策略\\" aria-label=\\"Permalink to &quot;2.2 负载均衡策略&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"_2-2-1-随机算法\\" tabindex=\\"-1\\">2.2.1 随机算法 <a class=\\"header-anchor\\" href=\\"#_2-2-1-随机算法\\" aria-label=\\"Permalink to &quot;2.2.1 随机算法&quot;\\">&ZeroWidthSpace;</a></h4>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(List</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">&#x3C;</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">String</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        Random random </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> Random</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] addressArr </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toArray</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">        // random</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> addressArr[random.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">nextInt</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">size</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">())];</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br></div></div><h4 id=\\"_2-2-2-轮训算法\\" tabindex=\\"-1\\">2.2.2 轮训算法 <a class=\\"header-anchor\\" href=\\"#_2-2-2-轮训算法\\" aria-label=\\"Permalink to &quot;2.2.2 轮训算法&quot;\\">&ZeroWidthSpace;</a></h4>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> class</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> RoundBalanceTest</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> main</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">args</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> services </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Arrays.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">asList</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service1\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service2\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"service3\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        XxlBalanceTest.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">manyRoute</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(i </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">-></span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">            // 请求次数,取模。serviceKey 可以更细粒度的控制轮训</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            ColorConsole.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">colorPrintln</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"轮训负载({}):{}\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, i, </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">round</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(services));</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        });</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> final</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> AtomicInteger atomicInteger </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> new</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> AtomicInteger</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    private</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> String </span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">round</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(List&#x3C;</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">> </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">services</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        int</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">get</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        if</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> (count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">>=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> Integer.MAX_VALUE) {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">            atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">set</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        atomicInteger.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">incrementAndGet</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">();</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[] toArray </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> services.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">toArray</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">new</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> String</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">[</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">]);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">        return</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> toArray[count </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">%</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> toArray.length];</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br></div></div><h4 id=\\"_2-2-3-加权算法\\" tabindex=\\"-1\\">2.2.3 加权算法 <a class=\\"header-anchor\\" href=\\"#_2-2-3-加权算法\\" aria-label=\\"Permalink to &quot;2.2.3 加权算法&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>加权算法的有很多的变异算法, 可以通过配置的方式，也可以通过某种策略动态的给每台服务器进行加权，从而来提高被轮训到的次数。 这里说两种网上常见的实现。</p>\\n<p><strong>简单加权算法</strong>\\n一个简单暴力的加权算法,如下图。按照权重，重新构建集合。然后再将集合进行取模轮训即可。即可实现一个最简单 的加权算法。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/learn_1652884737000.png\\" alt=\\"\\"></p>\\n<p>代码实现也是比较简单的,如下代码。</p>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>public class WeightBalanceTest {</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    private static class Server {</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        private String host;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        private Integer port;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        public Server(String host, Integer port) {</span></span>\\n<span class=\\"line\\"><span>            this.host = host;</span></span>\\n<span class=\\"line\\"><span>            this.port = port;</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        @Override</span></span>\\n<span class=\\"line\\"><span>        public String toString() {</span></span>\\n<span class=\\"line\\"><span>            return \\"Server{\\" +</span></span>\\n<span class=\\"line\\"><span>                    \\"host='\\" + host + '\\\\'' +</span></span>\\n<span class=\\"line\\"><span>                    \\", port=\\" + port +</span></span>\\n<span class=\\"line\\"><span>                    '}';</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    private static final AtomicInteger atomicInteger = new AtomicInteger();</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    public static Server round(List&#x3C;Server> services) {</span></span>\\n<span class=\\"line\\"><span>        int count = atomicInteger.get();</span></span>\\n<span class=\\"line\\"><span>        if (count >= Integer.MAX_VALUE) {</span></span>\\n<span class=\\"line\\"><span>            atomicInteger.set(0);</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>        atomicInteger.incrementAndGet();</span></span>\\n<span class=\\"line\\"><span>        Server[] toArray = services.toArray(new Server[0]);</span></span>\\n<span class=\\"line\\"><span>        return toArray[count % toArray.length];</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    public static void main(String[] args) {</span></span>\\n<span class=\\"line\\"><span>        Map&#x3C;Server, Integer> confWeight = new HashMap&#x3C;>();</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 80), 2);</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 81), 3);</span></span>\\n<span class=\\"line\\"><span>        confWeight.put(new Server(\\"127.0.0.1\\", 82), 5);</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>        List&#x3C;Server> servers = new ArrayList&#x3C;>();</span></span>\\n<span class=\\"line\\"><span>        for (Map.Entry&#x3C;Server, Integer> entity : confWeight.entrySet()) {</span></span>\\n<span class=\\"line\\"><span>            Server server = entity.getKey();</span></span>\\n<span class=\\"line\\"><span>            Integer weight = entity.getValue();</span></span>\\n<span class=\\"line\\"><span>            for (int i = 0; i &#x3C; weight; i++) {</span></span>\\n<span class=\\"line\\"><span>                servers.add(server);</span></span>\\n<span class=\\"line\\"><span>            }</span></span>\\n<span class=\\"line\\"><span>        }</span></span>\\n<span class=\\"line\\"><span>        Loops.loop(10, i -> {</span></span>\\n<span class=\\"line\\"><span>            ColorConsole.colorPrintln(\\"第{}次,权重轮训{}\\", i, round(servers));</span></span>\\n<span class=\\"line\\"><span>        });</span></span>\\n<span class=\\"line\\"><span>    }</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>}</span></span>\\n<span class=\\"line\\"><span>第0次,权重轮训Server{host='127.0.0.1', port=80}</span></span>\\n<span class=\\"line\\"><span>第1次,权重轮训Server{host='127.0.0.1', port=80}</span></span>\\n<span class=\\"line\\"><span>第2次,权重轮训Server{host='127.0.0.1', port=82}</span></span>\\n<span class=\\"line\\"><span>第3次,权重轮训Server{host='127.0.0.1', port=82}</span></span>\\n<span class=\\"line\\"><span>第4次,权重轮训Server{host='127.0.0.1', port=82}</span></span>\\n<span class=\\"line\\"><span>第5次,权重轮训Server{host='127.0.0.1', port=82}</span></span>\\n<span class=\\"line\\"><span>第6次,权重轮训Server{host='127.0.0.1', port=82}</span></span>\\n<span class=\\"line\\"><span>第7次,权重轮训Server{host='127.0.0.1', port=81}</span></span>\\n<span class=\\"line\\"><span>第8次,权重轮训Server{host='127.0.0.1', port=81}</span></span>\\n<span class=\\"line\\"><span>第9次,权重轮训Server{host='127.0.0.1', port=81}</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br><span class=\\"line-number\\">10</span><br><span class=\\"line-number\\">11</span><br><span class=\\"line-number\\">12</span><br><span class=\\"line-number\\">13</span><br><span class=\\"line-number\\">14</span><br><span class=\\"line-number\\">15</span><br><span class=\\"line-number\\">16</span><br><span class=\\"line-number\\">17</span><br><span class=\\"line-number\\">18</span><br><span class=\\"line-number\\">19</span><br><span class=\\"line-number\\">20</span><br><span class=\\"line-number\\">21</span><br><span class=\\"line-number\\">22</span><br><span class=\\"line-number\\">23</span><br><span class=\\"line-number\\">24</span><br><span class=\\"line-number\\">25</span><br><span class=\\"line-number\\">26</span><br><span class=\\"line-number\\">27</span><br><span class=\\"line-number\\">28</span><br><span class=\\"line-number\\">29</span><br><span class=\\"line-number\\">30</span><br><span class=\\"line-number\\">31</span><br><span class=\\"line-number\\">32</span><br><span class=\\"line-number\\">33</span><br><span class=\\"line-number\\">34</span><br><span class=\\"line-number\\">35</span><br><span class=\\"line-number\\">36</span><br><span class=\\"line-number\\">37</span><br><span class=\\"line-number\\">38</span><br><span class=\\"line-number\\">39</span><br><span class=\\"line-number\\">40</span><br><span class=\\"line-number\\">41</span><br><span class=\\"line-number\\">42</span><br><span class=\\"line-number\\">43</span><br><span class=\\"line-number\\">44</span><br><span class=\\"line-number\\">45</span><br><span class=\\"line-number\\">46</span><br><span class=\\"line-number\\">47</span><br><span class=\\"line-number\\">48</span><br><span class=\\"line-number\\">49</span><br><span class=\\"line-number\\">50</span><br><span class=\\"line-number\\">51</span><br><span class=\\"line-number\\">52</span><br><span class=\\"line-number\\">53</span><br><span class=\\"line-number\\">54</span><br><span class=\\"line-number\\">55</span><br><span class=\\"line-number\\">56</span><br><span class=\\"line-number\\">57</span><br><span class=\\"line-number\\">58</span><br><span class=\\"line-number\\">59</span><br><span class=\\"line-number\\">60</span><br><span class=\\"line-number\\">61</span><br><span class=\\"line-number\\">62</span><br><span class=\\"line-number\\">63</span><br><span class=\\"line-number\\">64</span><br></div></div><p>但这样还是不均匀的, 相同的 ip 可能被连续的访问到其实就没有做到负载均衡。</p>\\n<p><strong>平滑加权算法</strong></p>\\n<p>主要解决上面那种不平滑的方案。这种方案是由 nginx (opens new window)提出来的。 算法的数学原理。</p>\\n<ul>\\n<li>最大权重，减总权重</li>\\n<li>当前权重加上原权重\\n如下权重变化。</li>\\n</ul>\\n<div class=\\"language- vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\"></span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span>| 轮数 | 选择前的当前权重 | 选择节点 | 选择后的当前权重 |</span></span>\\n<span class=\\"line\\"><span>|</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br></div></div>","category":"Mojito","date":{"time":null,"string":"Invalid Date"}},{"title":"SpringBoot脚手架【web版本】","url":"/post/project/pangu/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Excel文件拆分","url":"/post/python/excel/split_excel.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"格式转换","url":"/post/python/excel/xls2xlsx.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"Pandas","url":"/post/python/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"数据分析与清洗","url":"/post/python/pandas/Pandas实战手册.html","excerpt":"<h1 id=\\"pandas\\" tabindex=\\"-1\\">Pandas <a class=\\"header-anchor\\" href=\\"#pandas\\" aria-label=\\"Permalink to &quot;Pandas&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p><strong>作者</strong>: 西魏陶渊明\\n<strong>博客</strong>: <a href=\\"https://blog.springlearn.cn/\\" target=\\"_blank\\" rel=\\"noreferrer\\">https://blog.springlearn.cn/</a></p>\\n<blockquote>\\n<p>天下代码一大抄, 抄来抄去有提高, 看你会抄不会抄！</p>\\n</blockquote>\\n<p><code>本系列文章还是引用之前的理念，阅读文章，你不需要记，只要知道这一篇在讲什么即可，收藏起来，用的时候过来抄代码。</code></p>\\n<p>前面第一篇文章算是入门, 蜻蜓点水比较简单，而这一篇是干货满满, 并配有数据案例。一定要看完, 因为这将是后面我们具体案例分析的基础。</p>\\n<p>这一篇文章中，我们将深入研究如何使用Pandas进行数据探索和清洗。您将学习如何处理缺失值、重复数据、异常值等常见的数据质量问题。通过使用Pandas的强大功能，如数据筛选、排序和重塑，您将能够有效地准备和整理数据，为后续的分析工作打下坚实的基础。</p>\\n<p><strong>系列文章:</strong></p>\\n<ul>\\n<li>第一篇：Pandas入门指南：掌握Python数据处理利器</li>\\n<li>第二篇：数据探索与清洗：使用Pandas轻松预处理数据 【当前篇】</li>\\n<li>第三篇：深入了解Pandas数据结构：Series与DataFrame</li>\\n<li>第四篇：数据选择与过滤：Pandas中的强大索引技巧</li>\\n<li>第五篇：数据操作与转换：学会利用Pandas处理复杂任务</li>\\n</ul>\\n<h2 id=\\"一、重点内容\\" tabindex=\\"-1\\">一、重点内容 <a class=\\"header-anchor\\" href=\\"#一、重点内容\\" aria-label=\\"Permalink to &quot;一、重点内容&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-1-数据查看\\" tabindex=\\"-1\\">1.1 数据查看 <a class=\\"header-anchor\\" href=\\"#_1-1-数据查看\\" aria-label=\\"Permalink to &quot;1.1 数据查看&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>数据预览：使用head()函数预览数据的前几行，以了解数据的整体结构和格式。</li>\\n<li>基本统计量：使用describe()函数获取数据的基本统计信息，如均值、标准差、最小值、最大值等，帮助了解数据的分布和范围。</li>\\n<li>唯一值与计数：使用unique()和value_counts()函数获取列中的唯一值和各个值的计数，以了解数据的分类和频率分布。</li>\\n<li>缺失值检测：使用isnull()函数检测数据中的缺失值，并通过sum()函数统计每列的缺失值数量，帮助了解数据的完整性。</li>\\n</ul>\\n<h3 id=\\"_1-2-数据清洗\\" tabindex=\\"-1\\">1.2 数据清洗 <a class=\\"header-anchor\\" href=\\"#_1-2-数据清洗\\" aria-label=\\"Permalink to &quot;1.2 数据清洗&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>处理缺失值：使用dropna()函数删除包含缺失值的行或列，或者使用fillna()函数填充缺失值，选择适当的方法取决于具体的数据情况。</li>\\n<li>处理重复值：使用duplicated()函数检测重复值，并使用drop_duplicates()函数删除重复值，确保数据的唯一性。</li>\\n<li>异常值处理：通过使用可视化工具和基本统计分析来识别和处理异常值，可以使用过滤、替换或删除等方法来应对异常值。</li>\\n<li>数据类型转换：使用astype()函数将列的数据类型转换为正确的类型，确保数据的一致性和准确性。</li>\\n<li>数据格式化与规范化：对于字符串类型的数据，可以使用字符串处理函数（如str.lower()、str.upper()、str.strip()等）对数据进行格式化和规范化。</li>\\n</ul>\\n<h3 id=\\"_1-3-数据预处理\\" tabindex=\\"-1\\">1.3 数据预处理 <a class=\\"header-anchor\\" href=\\"#_1-3-数据预处理\\" aria-label=\\"Permalink to &quot;1.3 数据预处理&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>特征选择与删除：根据分析目标和特征的相关性，选择相关特征并删除不相关或冗余的特征，以提高后续分析的效果。</li>\\n<li>数据转换与衍生：使用apply()函数或自定义函数对数据进行转换和衍生，如特征缩放、数值转换、日期提取等，以适应不同的分析需求。</li>\\n<li>数据合并与拆分：通过使用merge()函数或concat()函数，可以将多个数据集合并成一个，或者将一个数据集拆分成多个，以满足数据分析的需要。</li>\\n<li>数据重塑与透视：使用pivot()函数或melt()函数，可以对数据进行重塑和透视，以更好地理解和分析数据的关系和趋势。</li>\\n</ul>\\n<h2 id=\\"二、数据查看\\" tabindex=\\"-1\\">二、数据查看 <a class=\\"header-anchor\\" href=\\"#二、数据查看\\" aria-label=\\"Permalink to &quot;二、数据查看&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>当我们在接触到一份二维表格数据, 我们会先用Excel来查看数据的大概类型, 只有清楚了表格的内容信息,才知道如何来处理\\n这份数据。为了让大家快速的学习，我这里也列一个表格数据。然后我们针对这个数据进行分析。</p>\\n<p><img src=\\"https://i-blog.csdnimg.cn/blog_migrate/296ebcc43f628ac72cd238399e42c724.png\\" alt=\\"在这里插入图片描述\\">\\n首先我们读取数据。</p>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">import</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> pandas </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">as</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> pd</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">import</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> numpy </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">as</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> np</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">df </span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\"> pd.read_excel(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">'./销售金额.xlsx'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">)</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br></div></div><h3 id=\\"_2-1-数据预览\\" tabindex=\\"-1\\">2.1 数据预览 <a class=\\"header-anchor\\" href=\\"#_2-1-数据预览\\" aria-label=\\"Permalink to &quot;2.1 数据预览&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>这个表格有多少行，多少列，每一列的类型是什么?</p>\\n<h4 id=\\"_2-1-1-查看行数列数\\" tabindex=\\"-1\\">2.1.1 查看行数列数 <a class=\\"header-anchor\\" href=\\"#_2-1-1-查看行数列数\\" aria-label=\\"Permalink to &quot;2.1.1 查看行数列数&quot;\\">&ZeroWidthSpace;</a></h4>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 12 2</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 12行2列</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df.shape)</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br></div></div><h4 id=\\"_2-1-2-查看头尾数据\\" tabindex=\\"-1\\">2.1.2 查看头尾数据 <a class=\\"header-anchor\\" href=\\"#_2-1-2-查看头尾数据\\" aria-label=\\"Permalink to &quot;2.1.2 查看头尾数据&quot;\\">&ZeroWidthSpace;</a></h4>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">#         日期   销售金额</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 0  2023-01  100.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df.head(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">))</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">#          日期   销售金额</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 11  2023-12  534.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df.tail(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">1</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">))</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><h4 id=\\"_2-1-3-随机抽查\\" tabindex=\\"-1\\">2.1.3 随机抽查 <a class=\\"header-anchor\\" href=\\"#_2-1-3-随机抽查\\" aria-label=\\"Permalink to &quot;2.1.3 随机抽查&quot;\\">&ZeroWidthSpace;</a></h4>\\n<ul>\\n<li>axios = 0 查看行数</li>\\n<li>axios = 1 查看列数</li>\\n</ul>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 随机查看2行</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">#          日期   销售金额</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 11  2023-12  534.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 1   2023-02   80.0</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df.sample(</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">2</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">, </span><span style=\\"--shiki-light:#E36209;--shiki-dark:#FFAB70\\">axis</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">=</span><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">0</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">))</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div><h4 id=\\"_2-1-4-查看数据类型\\" tabindex=\\"-1\\">2.1.4 查看数据类型 <a class=\\"header-anchor\\" href=\\"#_2-1-4-查看数据类型\\" aria-label=\\"Permalink to &quot;2.1.4 查看数据类型&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>查看每一列的数据类型，也可以查看指定列的类型。</p>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 日期       object</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># 销售金额    float64</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># dtype: object</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df.dtypes)</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># float64</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#005CC5;--shiki-dark:#79B8FF\\">print</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(df[</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">'销售金额'</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">].dtypes)</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br></div></div><h4 id=\\"_2-1-4-查看所有信息\\" tabindex=\\"-1\\">2.1.4 查看所有信息 <a class=\\"header-anchor\\" href=\\"#_2-1-4-查看所有信息\\" aria-label=\\"Permalink to &quot;2.1.4 查看所有信息&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>前面如果感觉麻烦，我们可以直接使用info方法。\\n<code>info()</code>函数提供了更详细的数据信息，包括每列的名称、非空值数量和数据类型。\\n它还可以显示数据集的内存占用情况和总体摘要。</p>\\n<p>从下面内容看,日期列都有值。no-null = 12 说明都有值，而销售金额 no-null = 11 说明有一列没有值。\\n<code>memory usage: 320.0+ bytes</code> 是占用的内存大小,可以看到只有320+ 字节。</p>\\n<div class=\\"language-python vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">python</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># &#x3C;class 'pandas.core.frame.DataFrame'></span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># RangeIndex: 12 entries, 0 to 11</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\"># Data columns (total 2 columns):</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">#  #   Column  Non-Null Count  Dtype  </span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#6A737D;--shiki-dark:#6A737D\\">#</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br></div></div>","date":{"time":null,"string":"Invalid Date"}},{"title":"常用函数","url":"/post/python/pandas/常用函数.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"文件路径处理","url":"/post/python/path/path_demo.html","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"地址库设计","url":"/post/scm/baseservice/location.html","excerpt":"","category":"02-基础服务","date":{"time":null,"string":"Invalid Date"}},{"title":"商货品管理","url":"/post/scm/baseservice/sku.html","excerpt":"","category":"02-基础服务","date":{"time":null,"string":"Invalid Date"}},{"title":"仓网设计","url":"/post/scm/baseservice/warehouse.html","excerpt":"","category":"02-基础服务","date":{"time":null,"string":"Invalid Date"}},{"title":"财务必读","url":"/post/scm/finance/report.html","excerpt":"","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"企业预算","url":"/post/scm/finance/企业预算.html","excerpt":"<h1 id=\\"企业预算\\" tabindex=\\"-1\\">企业预算 <a class=\\"header-anchor\\" href=\\"#企业预算\\" aria-label=\\"Permalink to &quot;企业预算&quot;\\">&ZeroWidthSpace;</a></h1>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">写在前面</p>\\n<p><em>如果这个企业没有做过预算，你要推动预算进行，必须先成立一个预算委员会。让创始人、董事长，反正就是实权派，让他成为委员长。一定要让他成为委员长，要不然这事你就别干。如果委员长说了，说你们财务自己当委员长，你们财务的事你们财务干，那你就不能干这事，因为这事本来就不应该财务牵头，必须业务牵头。业务不牵头，财务不做。先让业务的老大成为委员长，然后 CEO（总经理）和财务老大成为副委员长，这事才能干。请记住，没有业务的支持，预算一定会一塌糊涂。</em></p>\\n<p><strong>预算执行小组的组长就应该是 CEO（业务老大），财务负责人就应该是副组长。这个预算小组，组长是 CEO，副组长是财务。财务不要冲到前面，因为预算本身就不是财务的事。财务只是一个执行者、组织者，一定是企业的老大和业务人员。</strong></p>\\n<p><strong>游戏规则的制定者、执行者要明确自己的位置。如果这个位置不明确，没法干这活，怎么干怎么死。</strong></p>\\n</div>\\n<h2 id=\\"编制方法分类\\" tabindex=\\"-1\\">编制方法分类 <a class=\\"header-anchor\\" href=\\"#编制方法分类\\" aria-label=\\"Permalink to &quot;编制方法分类&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><strong>零基预算</strong>很多企业在用，滚动预算大部分是世界五百强或者外资、国际企业在用。</p>\\n<h3 id=\\"增量预算\\" tabindex=\\"-1\\">增量预算 <a class=\\"header-anchor\\" href=\\"#增量预算\\" aria-label=\\"Permalink to &quot;增量预算&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"百度百科\\" tabindex=\\"-1\\">百度百科: <a class=\\"header-anchor\\" href=\\"#百度百科\\" aria-label=\\"Permalink to &quot;百度百科:&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>增量预算方法，又称调整预算方法，是指以基期成本费用水平为基础，结合预算期业务量水平及有关影响成本因素的未来变动情况，通过调整有关原有费用项目而编制预算的一种方法。 这是一种传统的预算方法。</p>\\n<h4 id=\\"假设前提\\" tabindex=\\"-1\\">假设前提 <a class=\\"header-anchor\\" href=\\"#假设前提\\" aria-label=\\"Permalink to &quot;假设前提&quot;\\">&ZeroWidthSpace;</a></h4>\\n<ol>\\n<li>现有的业务活动是企业必需的；</li>\\n<li>原有的各项开支都是合理的；</li>\\n<li>增加费用预算是值得的。</li>\\n</ol>\\n<h4 id=\\"例子\\" tabindex=\\"-1\\">例子 <a class=\\"header-anchor\\" href=\\"#例子\\" aria-label=\\"Permalink to &quot;例子&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>某制造企业在编制下一年度销售预算时，首先参考上一年的实际销售额为1亿元。考虑到市场增长率和企业竞争力提升，预计下一年度销售额将增长10%。因此，基于增量预算的方法，该企业将下一年度的销售预算设定为1.1亿元。这种方法简单直接，易于操作，但可能受限于过去的数据，无法充分反映新环境和新情况的变化。</p>\\n<h3 id=\\"零基预算\\" tabindex=\\"-1\\">零基预算 <a class=\\"header-anchor\\" href=\\"#零基预算\\" aria-label=\\"Permalink to &quot;零基预算&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"百度百科-1\\" tabindex=\\"-1\\">百度百科 <a class=\\"header-anchor\\" href=\\"#百度百科-1\\" aria-label=\\"Permalink to &quot;百度百科&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>零基预算是不考虑过去的预算项目和收支水平，以零为基点编制的预算，具体指不受以往预算安排情况的影响，一切从实际需要出发，逐项审议预算年度内各项费用的内容及其开支标准，结合财力状况，在综合平衡的基础上编制预算的一种科学的现代预算编制方法</p>\\n<h4 id=\\"例子-1\\" tabindex=\\"-1\\">例子 <a class=\\"header-anchor\\" href=\\"#例子-1\\" aria-label=\\"Permalink to &quot;例子&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>一家科技公司在编制下一年度的研发费用预算时，采用零基预算法。首先，不考虑上一年的研发费用支出情况，而是从零开始分析所有可能的研发项目和活动。公司评估了每个项目的可行性、重要性以及预期收益，并根据优先级和资源限制进行排序。最终，公司确定了下一年度的研发费用预算，重点投入于创新性强、市场前景好的项目。这种方法有助于打破过去预算的束缚，确保预算更加合理和有效。</p>\\n<h3 id=\\"滚动预算\\" tabindex=\\"-1\\">滚动预算 <a class=\\"header-anchor\\" href=\\"#滚动预算\\" aria-label=\\"Permalink to &quot;滚动预算&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"例子-2\\" tabindex=\\"-1\\">例子 <a class=\\"header-anchor\\" href=\\"#例子-2\\" aria-label=\\"Permalink to &quot;例子&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>一家零售连锁企业采用滚动预算法来管理其年度运营预算。在年初时，企业编制了涵盖全年12个月的初步预算。然而，随着市场的变化和季节的交替，企业每个月都会根据实际情况对接下来几个月的预算进行调整和更新。例如，在第三季度初，企业会根据前两个季度的销售情况和市场趋势，重新编制第四季度和下一年度的第一季度预算。这种方法使得预算始终保持与实际情况的紧密贴合，有助于企业更好地应对市场变化和调整经营策略。</p>\\n<h2 id=\\"预算类型\\" tabindex=\\"-1\\">预算类型 <a class=\\"header-anchor\\" href=\\"#预算类型\\" aria-label=\\"Permalink to &quot;预算类型&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>以下是一个针对中小型公司、按功能分类的预算分类表示例。请注意，这个表格是灵活的，可以根据公司的具体业务需求和组织结构进行调整。</p>\\n<h3 id=\\"中小型公司预算分类表-按功能分类\\" tabindex=\\"-1\\">中小型公司预算分类表（按功能分类） <a class=\\"header-anchor\\" href=\\"#中小型公司预算分类表-按功能分类\\" aria-label=\\"Permalink to &quot;中小型公司预算分类表（按功能分类）&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>| <strong>功能领域</strong>          | <strong>预算项目</strong>                                  | <strong>说明</strong>                                                 |\\n|</p>\\n","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"会计分录","url":"/post/scm/finance/会计分录.html","excerpt":"<h1 id=\\"会计分录\\" tabindex=\\"-1\\">会计分录 <a class=\\"header-anchor\\" href=\\"#会计分录\\" aria-label=\\"Permalink to &quot;会计分录&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>会计分录是记录经济业务的基本方法，通常涉及两大类账户的记录：借方和贷方。为了方便管理和分类，会计科目通常被分为几个大类。以下是会计分录中常见的主要大类：</p>\\n<p>所有数据的产出都来自分录, 即复式记账法,有借必有贷,借贷必相等。那么分录一定会有记错的情况。当月发现错误的可以直接作废处理。跨月的，不能直接作废，因为已经记账了，只能红冲。</p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">前言</p>\\n<p>有借必有贷，借贷必相等。相信所有做过支付或者财务的开发者，基本都听过了。但是不知道大家是否都真的清楚这句话的意思。\\n首先我想说的是，借贷并不代表加减，在不同的科目面前，有可能正好是相反的。但是如果是要做财务系统，这个会计分录必须要能看懂，借贷关系更是如此。</p>\\n</div>\\n<h2 id=\\"有借必有贷-借贷必相等\\" tabindex=\\"-1\\">有借必有贷，借贷必相等 <a class=\\"header-anchor\\" href=\\"#有借必有贷-借贷必相等\\" aria-label=\\"Permalink to &quot;有借必有贷，借贷必相等&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p><strong>有借必有贷，借贷必相等</strong>是复式记账法的基本原则。这个原则的核心思想是，每一笔经济业务的发生，必须同时记录在两个或多个账户的借方和贷方，且记录的金额总是相等的。这个原则保障了账目之间的平衡和完整性，从而准确反映企业的财务状况。</p>\\n<h3 id=\\"有借必有贷\\" tabindex=\\"-1\\">有借必有贷 <a class=\\"header-anchor\\" href=\\"#有借必有贷\\" aria-label=\\"Permalink to &quot;有借必有贷&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>每一笔业务都涉及至少两个账户，一个账户的借方增加（或减少），另一个账户的贷方增加（或减少）。</li>\\n<li>这意味着任何经济业务的发生，至少会对两个账户产生影响。例如，购买原材料用现金支付，既影响了原材料的增加（借方），也影响了现金的减少（贷方）。</li>\\n</ul>\\n<h3 id=\\"借贷必相等\\" tabindex=\\"-1\\">借贷必相等 <a class=\\"header-anchor\\" href=\\"#借贷必相等\\" aria-label=\\"Permalink to &quot;借贷必相等&quot;\\">&ZeroWidthSpace;</a></h3>\\n<ul>\\n<li>在一笔会计分录中，所有借方的金额之和必须等于贷方的金额之和。</li>\\n<li>这保证了每笔交易不会打破资产与权益（资产 = 负债 + 所有者权益）之间的平衡。\\n<ul>\\n<li>例如，购买价值 1,000 元的材料，借方“原材料”增加 1,000 元，贷方“现金”减少 1,000 元。借贷双方金额相等，确保了账务平衡。</li>\\n</ul>\\n</li>\\n</ul>\\n<p>在这个例子中原材料是增加，现金是减少。但是我们如何知道，<span style=\\"color: #e64b7d;font-weight: bold;background-color: var(--vp-code-bg);border-radius: 4px;\\n    padding: 3px 6px;\\">到底原材料是借方还是贷方？ 现金是借方还是贷方呢?</span></p>\\n<p><strong>解答:</strong></p>\\n<p>在会计科目中，有资产、负债、所有者权益(含收入、成本、费用)</p>\\n<p>我们先看现金和原材料是属于上面那一类? 原材料和现金都是资产。</p>\\n<p>但是对于这个例子，我们的现金是减少的，原材料是增加的。对于资产类的科目，计算公式是: 借加贷减。</p>\\n<p>所以:</p>\\n<ul>\\n<li>借方: 原材料 +1000</li>\\n<li>贷方: 现金   -1000</li>\\n</ul>\\n<p>相信看到这部分人大多数就懵逼了。其实问题的答案就是这句话: <span style=\\"color: #e64b7d;font-weight: bold;background-color: var(--vp-code-bg);border-radius: 4px;\\n    padding: 3px 6px;\\">对于资产类的科目，计算公式是借加贷减。</span>\\n只要你能分清属于的那个科目类型，那么就能知道借方和贷方。</p>\\n<h2 id=\\"如何知道借贷\\" tabindex=\\"-1\\">如何知道借贷 <a class=\\"header-anchor\\" href=\\"#如何知道借贷\\" aria-label=\\"Permalink to &quot;如何知道借贷&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>在会计科目中一共有六大类科目，组成了会计体系，反映了企业的财务状况和经营成果。<a href=\\"https://www.kjjl100.com/news/164753.html\\" target=\\"_blank\\" rel=\\"noreferrer\\">2024新准则会计科目表</a></p>\\n<ol>\\n<li>资产：企业的资源（如现金、存货等）。</li>\\n<li>负债：企业的债务（如应付账款、借款等）。</li>\\n<li>所有者权益：股东对企业净资产的权利（如实收资本、利润等）。</li>\\n<li>收入：企业的收入来源（如销售收入、利息收入等）。</li>\\n<li>费用：企业的支出（如成本、管理费用等）。</li>\\n<li>损益：用于最终汇总企业的经营成果（盈亏情况）。</li>\\n</ol>\\n<p>其中每个类型都会对应一个公式，来确定资金的增加和减少。别看是六个，其实公式就 2 个。</p>\\n<ul>\\n<li><strong>资产、费用: 借加贷减</strong></li>\\n<li><strong>其他:      借减贷加</strong></li>\\n</ul>\\n<p>建议也仔细看下下面的科目大类，这样在涉及会计分录填报系统的时候，才会更有信心。因为只要是设计到支出和收入的业务单据，比如\\n采购单，销售单，快递单，各种报销的单据，其实最终都要归类到这几类科目。<span style=\\"color: #e64b7d;font-weight: bold;background-color: var(--vp-code-bg);border-radius: 4px;\\n    padding: 3px 6px;\\">作为财务开发这是必须要了解的东西。</span></p>\\n<h3 id=\\"资产类\\" tabindex=\\"-1\\">资产类 <a class=\\"header-anchor\\" href=\\"#资产类\\" aria-label=\\"Permalink to &quot;资产类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"记账公式\\" tabindex=\\"-1\\">记账公式 <a class=\\"header-anchor\\" href=\\"#记账公式\\" aria-label=\\"Permalink to &quot;记账公式&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>借加贷减</p>\\n<h4 id=\\"主要类目\\" tabindex=\\"-1\\">主要类目 <a class=\\"header-anchor\\" href=\\"#主要类目\\" aria-label=\\"Permalink to &quot;主要类目&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>资产类账户用于记录企业拥有或控制的经济资源，主要包括：</p>\\n<ul>\\n<li>现金（Cash）</li>\\n<li>银行存款（Bank Deposits）</li>\\n<li>应收账款（Accounts Receivable）</li>\\n<li>预付款项（Prepayments）</li>\\n<li>存货（Inventory）</li>\\n<li>固定资产（Fixed Assets）</li>\\n<li>无形资产（Intangible Assets）</li>\\n</ul>\\n<h3 id=\\"负债类\\" tabindex=\\"-1\\">负债类 <a class=\\"header-anchor\\" href=\\"#负债类\\" aria-label=\\"Permalink to &quot;负债类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"记账公式-1\\" tabindex=\\"-1\\">记账公式 <a class=\\"header-anchor\\" href=\\"#记账公式-1\\" aria-label=\\"Permalink to &quot;记账公式&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>借减贷加</p>\\n<h4 id=\\"主要类目-1\\" tabindex=\\"-1\\">主要类目 <a class=\\"header-anchor\\" href=\\"#主要类目-1\\" aria-label=\\"Permalink to &quot;主要类目&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>负债类账户记录企业的债务或义务，主要包括：</p>\\n<ul>\\n<li>应付账款（Accounts Payable）</li>\\n<li>预收账款（Advance Receipts）</li>\\n<li>短期借款（Short-term Loans）</li>\\n<li>长期借款（Long-term Loans）</li>\\n<li>应付工资（Accrued Wages）</li>\\n<li>应交税费（Taxes Payable）</li>\\n</ul>\\n<h3 id=\\"所有者权益类\\" tabindex=\\"-1\\">所有者权益类 <a class=\\"header-anchor\\" href=\\"#所有者权益类\\" aria-label=\\"Permalink to &quot;所有者权益类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"记账公式-2\\" tabindex=\\"-1\\">记账公式 <a class=\\"header-anchor\\" href=\\"#记账公式-2\\" aria-label=\\"Permalink to &quot;记账公式&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>借减贷加</p>\\n<h4 id=\\"主要类目-2\\" tabindex=\\"-1\\">主要类目 <a class=\\"header-anchor\\" href=\\"#主要类目-2\\" aria-label=\\"Permalink to &quot;主要类目&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>所有者权益类账户用于反映企业的净资产，属于股东或业主的权益，主要包括：</p>\\n<ul>\\n<li>实收资本（Paid-in Capital）</li>\\n<li>资本公积（Capital Reserve）</li>\\n<li>盈余公积（Surplus Reserve）</li>\\n<li>未分配利润（Retained Earnings）</li>\\n</ul>\\n<h3 id=\\"收入类\\" tabindex=\\"-1\\">收入类 <a class=\\"header-anchor\\" href=\\"#收入类\\" aria-label=\\"Permalink to &quot;收入类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"记账公式-3\\" tabindex=\\"-1\\">记账公式 <a class=\\"header-anchor\\" href=\\"#记账公式-3\\" aria-label=\\"Permalink to &quot;记账公式&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>借减贷加</p>\\n<h4 id=\\"主要类目-3\\" tabindex=\\"-1\\">主要类目 <a class=\\"header-anchor\\" href=\\"#主要类目-3\\" aria-label=\\"Permalink to &quot;主要类目&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>收入类账户记录企业的经营成果，是企业通过销售产品或提供服务获得的经济利益，主要包括：</p>\\n<ul>\\n<li>主营业务收入（Operating Revenue）</li>\\n<li>其他业务收入（Other Operating Revenue）</li>\\n<li>投资收益（Investment Income）</li>\\n<li>利息收入（Interest Income）</li>\\n</ul>\\n<h3 id=\\"费用类\\" tabindex=\\"-1\\">费用类 <a class=\\"header-anchor\\" href=\\"#费用类\\" aria-label=\\"Permalink to &quot;费用类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<h4 id=\\"记账公式-4\\" tabindex=\\"-1\\">记账公式 <a class=\\"header-anchor\\" href=\\"#记账公式-4\\" aria-label=\\"Permalink to &quot;记账公式&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>借加贷减</p>\\n<h4 id=\\"主要类目-4\\" tabindex=\\"-1\\">主要类目 <a class=\\"header-anchor\\" href=\\"#主要类目-4\\" aria-label=\\"Permalink to &quot;主要类目&quot;\\">&ZeroWidthSpace;</a></h4>\\n<p>费用类账户记录企业为了实现收入而发生的经济资源消耗，主要包括：</p>\\n<ul>\\n<li>主营业务成本（Cost of Goods Sold）</li>\\n<li>管理费用（Administrative Expenses）</li>\\n<li>销售费用（Selling Expenses）</li>\\n<li>财务费用（Financial Expenses）</li>\\n<li>税金及附加（Taxes and Surcharges）</li>\\n</ul>\\n<h3 id=\\"损益类\\" tabindex=\\"-1\\">损益类 <a class=\\"header-anchor\\" href=\\"#损益类\\" aria-label=\\"Permalink to &quot;损益类&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>损益类账户用于汇总企业的收入和费用，最终反映企业的净利润或净亏损。损益类账户是通过收入和费用的对比来计算企业的经营成果的。</p>\\n<h2 id=\\"示例\\" tabindex=\\"-1\\">示例 <a class=\\"header-anchor\\" href=\\"#示例\\" aria-label=\\"Permalink to &quot;示例&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>现在我们大概知道公司如何做账了，我们仅仅从财务的角度来出发，看财务系统如何出三大报表。</p>\\n<p>下面是一个公司运行的示例，包括所有者权益、资产、负债、收入和费用等各类科目，并最终生成财务三大报表：资产负债表、利润表和现金流量表。</p>\\n<h3 id=\\"公司背景\\" tabindex=\\"-1\\">公司背景 <a class=\\"header-anchor\\" href=\\"#公司背景\\" aria-label=\\"Permalink to &quot;公司背景&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>假设我们有一家名为“XYZ科技有限公司”的公司，主要业务是销售电子产品。</p>\\n<h3 id=\\"经营活动的假设\\" tabindex=\\"-1\\">经营活动的假设 <a class=\\"header-anchor\\" href=\\"#经营活动的假设\\" aria-label=\\"Permalink to &quot;经营活动的假设&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>在某一财务年度，XYZ科技有限公司的经营活动包括：</p>\\n<p><strong>盈余公积</strong>: 企业根据法律法规或公司章程规定，从税后利润中提取的一部分资金，目的是为了在未来应对可能的亏损、扩大再生产或进行其他投资。盈余公积是所有者权益的一部分，它的提取通常是企业内部资金管理的重要措施。</p>\\n<ul>\\n<li>销售收入：公司在年度内销售电子产品，总收入为 100,000 元。\\n<ul>\\n<li>借：应收账款 100,000 元</li>\\n<li>贷：主营业务收入 100,000 元</li>\\n</ul>\\n</li>\\n<li>产品成本：产品的成本为 60,000 元。\\n<ul>\\n<li>借：主营业务成本 60,000 元</li>\\n<li>贷：存货 60,000 元</li>\\n</ul>\\n</li>\\n<li>管理费用：公司在管理方面的支出为 10,000 元。\\n<ul>\\n<li>借：管理费用 10,000 元</li>\\n<li>贷：现金 10,000 元</li>\\n</ul>\\n</li>\\n<li>销售费用：公司在市场营销和销售上的支出为 5,000 元。\\n<ul>\\n<li>借：销售费用 5,000 元</li>\\n<li>贷：现金 5,000 元</li>\\n</ul>\\n</li>\\n<li>利息费用：公司在借款上的利息支出为 2,000 元。\\n<ul>\\n<li>借：财务费用 2,000 元</li>\\n<li>贷：应付利息 2,000 元</li>\\n</ul>\\n</li>\\n<li>税费：公司需支付的所得税为 5,000 元。\\n<ul>\\n<li>借：所得税费用 5,000 元</li>\\n<li>贷：应交税费 5,000 元</li>\\n</ul>\\n</li>\\n<li>股东出资：股东在公司成立时投资 50,000 元。\\n<ul>\\n<li>借：银行存款 50,000 元</li>\\n<li>贷：实收资本 50,000 元</li>\\n</ul>\\n</li>\\n<li>股本溢价：股东投资时，超过面值的部分为 10,000 元。\\n<ul>\\n<li>借：银行存款 10,000 元</li>\\n<li>贷：资本公积 10,000 元</li>\\n</ul>\\n</li>\\n<li>盈余公积：公司根据政策提取盈余公积 3,000 元。\\n<ul>\\n<li>借：盈余公积 3000 元</li>\\n<li>贷：未分配利润 3000 元</li>\\n</ul>\\n</li>\\n<li>未分配利润：年初未分配利润为 12,000 元。</li>\\n</ul>\\n<h3 id=\\"利润表\\" tabindex=\\"-1\\">利润表 <a class=\\"header-anchor\\" href=\\"#利润表\\" aria-label=\\"Permalink to &quot;利润表&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p><strong>年度结束：12月31日</strong></p>\\n<p>| 科目                  | 金额（元）      |\\n|</p>\\n","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"发票管理","url":"/post/scm/finance/发票管理.html","excerpt":"","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"四流合一","url":"/post/scm/finance/四流合一.html","excerpt":"","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"科目速记","url":"/post/scm/finance/科目速记.html","excerpt":"<h1 id=\\"科目速记\\" tabindex=\\"-1\\">科目速记 <a class=\\"header-anchor\\" href=\\"#科目速记\\" aria-label=\\"Permalink to &quot;科目速记&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p>在做企业费用管理的时候经常要记科目号，多少需要了解下。不然会计科目都看不懂，更不要说记账是否正确了。\\n但是这个东西, 就是工具。没必要死记硬背。知道怎么查就行了。能记多少是多少就行。</p>\\n<h2 id=\\"常见科目速记\\" tabindex=\\"-1\\">常见科目速记 <a class=\\"header-anchor\\" href=\\"#常见科目速记\\" aria-label=\\"Permalink to &quot;常见科目速记&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>| 科目名称      | 解释                               |\\n|</p>\\n","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"税务知识","url":"/post/scm/finance/税务.html","excerpt":"","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"系统设计","url":"/post/scm/finance/系统设计.html","excerpt":"","category":"07-系统设计","date":{"time":null,"string":"Invalid Date"}},{"title":"计提帐","url":"/post/scm/finance/计提帐.html","excerpt":"<h1 id=\\"计提帐\\" tabindex=\\"-1\\">计提帐 <a class=\\"header-anchor\\" href=\\"#计提帐\\" aria-label=\\"Permalink to &quot;计提帐&quot;\\">&ZeroWidthSpace;</a></h1>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">计提帐</p>\\n<p>计提账是指在会计处理中，对于已经发生但尚未支付的费用，或者预计未来可能发生的损失，按照权责发生制原则，提前在账目中进行记录和反映。\\n<strong>计提账的目的是为了真实反映企业的财务状况和经营成果，确保利润的准确性，避免利润虚增</strong>\\n常见的计提项目包括坏账准备、存货跌价准备、固定资产折旧、应付职工薪酬等。\\n计提账体现了谨慎性原则，有助于提高会计信息的质量和可靠性。</p>\\n</div>\\n<h2 id=\\"什么情况下会计要进行计提操作\\" tabindex=\\"-1\\">什么情况下会计要进行计提操作？ <a class=\\"header-anchor\\" href=\\"#什么情况下会计要进行计提操作\\" aria-label=\\"Permalink to &quot;什么情况下会计要进行计提操作？&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ol>\\n<li>费用已经发生但未实际支付：例如，员工工资通常在下个月发放，但根据权责发生制，工资费用应该记入当月，因此会计在当月结账时需要计提工资。</li>\\n<li>预计未来可能发生的损失或费用：比如，企业可能会计提坏账准备，以反映可能无法收回的应收账款；或者计提存货跌价准备，以反映存货可能因过时、毁损等原因导致价值下降。</li>\\n<li>根据制度规定计算和提取的准备金：如应付福利费、长期投资减值准备等，这些准备金是按照规定的比率从合法员工薪酬等基数中计算出来的。</li>\\n<li>预计某些应付账款：如果企业预计未来将产生某些应付账款，即使尚未发生，也需要进行计提，以反映真实的财务状况。</li>\\n<li>其他符合会计制度的预计项目：这包括但不限于短期投资跌价准备、长期投资减值准备等，这些项目通常在中期期末或年度终了时进行评估和计提。</li>\\n</ol>\\n<h2 id=\\"举例\\" tabindex=\\"-1\\">举例 <a class=\\"header-anchor\\" href=\\"#举例\\" aria-label=\\"Permalink to &quot;举例&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>假设某公司员工小张的月工资为10,000元，其中个人负担的社保费用为1,023元， 公积金为1,200元，个人所得税为150元。公司承担员工的社保和公积金费用， 即公司实际支付的总费用为12,223元（10,000元工资 + 1,023元社保 + 1,200元公积金），\\n而小张实际到手的工资为9,627元（10,000−1,023−1,200−150=9,627）。</p>\\n<p>下面是小张工资的详细明细表，添加了个人负担的社保和公积金部分：</p>\\n<p>| 项目               | 金额（元）  | 说明                       |\\n|</p>\\n","category":"06-财务结算","date":{"time":null,"string":"Invalid Date"}},{"title":"供应链","url":"/post/scm/","excerpt":"","category":"供应链","date":{"time":null,"string":"Invalid Date"}},{"title":"业财一体供应链系统设计分享","url":"/post/scm/introduce/业财一体.html","excerpt":"","category":"01-序言介绍","date":{"time":null,"string":"Invalid Date"}},{"title":"什么是供应链","url":"/post/scm/introduce/什么是供应链.html","excerpt":"<h1 id=\\"什么是供应链\\" tabindex=\\"-1\\">什么是供应链 <a class=\\"header-anchor\\" href=\\"#什么是供应链\\" aria-label=\\"Permalink to &quot;什么是供应链&quot;\\">&ZeroWidthSpace;</a></h1>\\n<p><img src=\\"https://img.springlearn.cn/blog/816c0db2d9d71d1532ec8b73a1cd2615.png\\" alt=\\"\\"></p>\\n<p>一个商品从厂家生产到最终消费者手里，这中间经历过的上下游企业组成的虚拟链路就叫供应链。</p>\\n<p>这个链可能是，资金链、物流链，信息链。\\n通俗点数就是: 钱到哪儿了? 货到哪儿了? 凭什么给你？</p>\\n<p>这中间所经过的各方可能就是下面的这些\\n原材料供应商，制造商，仓库，渠道商，物流配送</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/f137c00609f8b30053658b44f655943b.png\\" alt=\\"\\"></p>\\n<p>所以说供应链在生活中处处可见，优秀的供应链系统，不仅能给消费者带来友好的体验，快速的服务。更能给公司带来更高的价值。</p>\\n<p><img src=\\"https://img.springlearn.cn/blog/8d215fadffbda0612db001fed5816780.png\\" alt=\\"\\"></p>\\n<p><img src=\\"https://img.springlearn.cn/blog/11414b9f8504ddbce8488b6750d6955a.png\\" alt=\\"\\"></p>\\n<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">从生活场景触发,说听得懂的话</p>\\n<p>本系列专题,主要为小编在从事供应链行业开发所总结的经验, 及在经历供应链发展过程的所产生的个人认知, 讲的不一定都对\\n主要提供思路,如你有更好的见解或思路可以进行留言和评论。该系列文章</p>\\n<ol>\\n<li>将会从业务出发, 多举生活实例, 使读者更有体感。</li>\\n<li>业务发生所需要的系统支持, 及每个系统主要面对的难点, 及常用的解决方案。</li>\\n<li>业务发展的方向、及达成方向所必须经历的路径、及过程中可能遇到的坑。</li>\\n</ol>\\n</div>\\n<ul>\\n<li>👨🏻‍💻 <strong>如果你是技术</strong>: 你想听技术,那么我会告诉你这里会包括你想了解的高并发,分库分表,以及事务的一致性。📢:\\n主要以实用,解决实际问题为主，没有八股文。</li>\\n<li>👨‍🔧 <strong>如果你是产品</strong>: 你想听业务的发展方向,那么这里会包裹小编个人浅薄的认知,希望对你有所帮助。如有问题可以留下,共同探讨。</li>\\n</ul>\\n","category":"01-序言介绍","date":{"time":null,"string":"Invalid Date"}},{"title":"供应链系统","url":"/post/scm/introduce/系统介绍.html","excerpt":"<h1 id=\\"供应链系统\\" tabindex=\\"-1\\">供应链系统 <a class=\\"header-anchor\\" href=\\"#供应链系统\\" aria-label=\\"Permalink to &quot;供应链系统&quot;\\">&ZeroWidthSpace;</a></h1>\\n<h2 id=\\"基础服务\\" tabindex=\\"-1\\">基础服务 <a class=\\"header-anchor\\" href=\\"#基础服务\\" aria-label=\\"Permalink to &quot;基础服务&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"商货品系统\\" tabindex=\\"-1\\">商货品系统 <a class=\\"header-anchor\\" href=\\"#商货品系统\\" aria-label=\\"Permalink to &quot;商货品系统&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>|  系统   | 模块     | 介绍 |\\n|:</p>\\n","category":"01-序言介绍","date":{"time":null,"string":"Invalid Date"}},{"title":"PMO","url":"/post/scm/introduce/项目管理系统设计.html","excerpt":"","category":"01-序言介绍","date":{"time":null,"string":"Invalid Date"}},{"title":"到货管理","url":"/post/scm/purchase/arrival.html","excerpt":"","category":"04-采购入库","date":{"time":null,"string":"Invalid Date"}},{"title":"供应链","url":"/post/scm/purchase/","excerpt":"","category":"供应链","date":{"time":null,"string":"Invalid Date"}},{"title":"采购订单","url":"/post/scm/purchase/purchase.html","excerpt":"","category":"04-采购入库","date":{"time":null,"string":"Invalid Date"}},{"title":"理货报告","url":"/post/scm/purchase/tally.html","excerpt":"","category":"04-采购入库","date":{"time":null,"string":"Invalid Date"}},{"title":"物流轨迹","url":"/post/scm/sales/express.html","excerpt":"","category":"05-销售出库","date":{"time":null,"string":"Invalid Date"}},{"title":"公域拉单","url":"/post/scm/sales/pullOrder.html","excerpt":"","category":"05-销售出库","date":{"time":null,"string":"Invalid Date"}},{"title":"履约推单","url":"/post/scm/sales/pushOrder.html","excerpt":"","category":"05-销售出库","date":{"time":null,"string":"Invalid Date"}},{"title":"存货核算","url":"/post/scm/stock/stock.html","excerpt":"","category":"03-库存管理","date":{"time":null,"string":"Invalid Date"}},{"title":"Feign Mock注意事项","url":"/post/test/FeignMock.html","excerpt":"","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"JUnit API","url":"/post/test/JUnitAPI.html","excerpt":"<div class=\\"tip custom-block\\"><p class=\\"custom-block-title\\">TIP</p>\\n<p>只打印的单测是没有意义的,正确使用单测工具, 提高单测质量。</p>\\n</div>\\n<h2 id=\\"一、常用注解\\" tabindex=\\"-1\\">一、常用注解 <a class=\\"header-anchor\\" href=\\"#一、常用注解\\" aria-label=\\"Permalink to &quot;一、常用注解&quot;\\">&ZeroWidthSpace;</a></h2>\\n<h3 id=\\"_1-1-before-after\\" tabindex=\\"-1\\">1.1 @Before &amp; @After <a class=\\"header-anchor\\" href=\\"#_1-1-before-after\\" aria-label=\\"Permalink to &quot;1.1 @Before &amp; @After&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>单测类中每个单测方法执行都会触发这两个方法</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">Before</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> before</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"before\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">After</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> after</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"after\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><h3 id=\\"_1-2-beforeclass-afterclass\\" tabindex=\\"-1\\">1.2 @BeforeClass &amp; @AfterClass <a class=\\"header-anchor\\" href=\\"#_1-2-beforeclass-afterclass\\" aria-label=\\"Permalink to &quot;1.2 @BeforeClass &amp; @AfterClass&quot;\\">&ZeroWidthSpace;</a></h3>\\n<p>区别与上一个,不管单测类中有几个单测方法,都只会执行一次</p>\\n<p>要用静态修饰</p>\\n<div class=\\"language-java vp-adaptive-theme line-numbers-mode\\"><button title=\\"Copy Code\\" class=\\"copy\\"></button><span class=\\"lang\\">java</span><pre class=\\"shiki shiki-themes github-light github-dark vp-code\\" v-pre=\\"\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">BeforeClass</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> beforeClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"beforeClass\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span>\\n<span class=\\"line\\"></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    @</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">AfterClass</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\">    public</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> static</span><span style=\\"--shiki-light:#D73A49;--shiki-dark:#F97583\\"> void</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\"> afterClass</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">() {</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">        System.out.</span><span style=\\"--shiki-light:#6F42C1;--shiki-dark:#B392F0\\">println</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">(</span><span style=\\"--shiki-light:#032F62;--shiki-dark:#9ECBFF\\">\\"afterClass\\"</span><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">);</span></span>\\n<span class=\\"line\\"><span style=\\"--shiki-light:#24292E;--shiki-dark:#E1E4E8\\">    }</span></span></code></pre>\\n<div class=\\"line-numbers-wrapper\\" aria-hidden=\\"true\\"><span class=\\"line-number\\">1</span><br><span class=\\"line-number\\">2</span><br><span class=\\"line-number\\">3</span><br><span class=\\"line-number\\">4</span><br><span class=\\"line-number\\">5</span><br><span class=\\"line-number\\">6</span><br><span class=\\"line-number\\">7</span><br><span class=\\"line-number\\">8</span><br><span class=\\"line-number\\">9</span><br></div></div><div class=\\"info custom-block\\"><p class=\\"custom-block-title\\">代码实例</p>\\n<p>针对上面说的两个注解演示一下</p>\\n<ul>\\n<li>beforeClass</li>\\n<li>before</li>\\n<li>testOne</li>\\n<li>after</li>\\n<li>before</li>\\n<li>testTwo</li>\\n<li>after</li>\\n<li>afterClass</li>\\n</ul>\\n</div>\\n","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"JUnit单测类属性注入","url":"/post/test/JUnit单测类属性注入.html","excerpt":"","category":"源码分析","date":{"time":null,"string":"Invalid Date"}},{"title":"MockData API","url":"/post/test/MockDataAPI.html","excerpt":"<p><code>JMockData</code> 是一款国人开发用来生成模拟数据的工具</p>\\n<h2 id=\\"基础类型\\" tabindex=\\"-1\\">基础类型 <a class=\\"header-anchor\\" href=\\"#基础类型\\" aria-label=\\"Permalink to &quot;基础类型&quot;\\">&ZeroWidthSpace;</a></h2>\\n<p>| 描述         | 类型                                                         |\\n|</p>\\n","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"Mockito API","url":"/post/test/MockitoAPI.html","excerpt":"","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"SpringBoot Testing","url":"/post/test/SpringBootTesting.html","excerpt":"","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"单元测试专题","url":"/post/test/","excerpt":"","date":{"time":null,"string":"Invalid Date"}},{"title":"事务回滚原理","url":"/post/test/事务回滚原理.html","excerpt":"","category":"源码分析","date":{"time":null,"string":"Invalid Date"}},{"title":"使用断言","url":"/post/test/使用断言.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"单测维护","url":"/post/test/单测维护.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"启动缓慢","url":"/post/test/启动缓慢.html","excerpt":"","category":"场景分析","date":{"time":null,"string":"Invalid Date"}},{"title":"命名规则","url":"/post/test/命名规则.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"②如何知道是否依赖Spring容器","url":"/post/test/如何知道是否依赖Spring容器.html","excerpt":"","category":"源码分析","date":{"time":null,"string":"Invalid Date"}},{"title":"异步验证","url":"/post/test/异步验证.html","excerpt":"","category":"场景分析","date":{"time":null,"string":"Invalid Date"}},{"title":"影响范围","url":"/post/test/影响范围.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"技术选型","url":"/post/test/技术选型.html","excerpt":"","category":"技术框架","date":{"time":null,"string":"Invalid Date"}},{"title":"数据隔离","url":"/post/test/数据隔离.html","excerpt":"","category":"场景分析","date":{"time":null,"string":"Invalid Date"}},{"title":"极限测试","url":"/post/test/极限测试.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"案例分享","url":"/post/test/案例分享.html","excerpt":"","category":"案例分享","date":{"time":null,"string":"Invalid Date"}},{"title":"测试成本","url":"/post/test/测试成本.html","excerpt":"<div class=\\"info custom-block\\"><p class=\\"custom-block-title\\">INFO</p>\\n<p>测试成本到底有多大? 你认为你写的代码需不需要测试? 为了引出成本的话题, 我们先从实际工作中出发\\n看看你能否经受住这些灵魂的考验吧。</p>\\n</div>\\n<h2 id=\\"一、灵魂深处的拷问\\" tabindex=\\"-1\\">一、灵魂深处的拷问 <a class=\\"header-anchor\\" href=\\"#一、灵魂深处的拷问\\" aria-label=\\"Permalink to &quot;一、灵魂深处的拷问&quot;\\">&ZeroWidthSpace;</a></h2>\\n<ul>\\n<li>你的代码质量如何度量？</li>\\n<li>你是如何保证代码质量？</li>\\n<li>你敢随时重构代码吗？</li>\\n<li>你是如何确保重构的代码依然保持正确性？</li>\\n<li>你是否有足够信心在没有测试的情况下随时发布你的代码？</li>\\n</ul>\\n<p>📢 如果答案都比较犹豫，那么就证明我们非常需要单元测试。(ps: 不会有人心里想的是我们需要测试同学吧 😏)</p>\\n<p>==它能带给我们很多保障：==</p>\\n","category":"场景分析","date":{"time":null,"string":"Invalid Date"}},{"title":"测试范围","url":"/post/test/测试范围.html","excerpt":"","category":"单测规范","date":{"time":null,"string":"Invalid Date"}},{"title":"消息验证","url":"/post/test/消息验证.html","excerpt":"","category":"场景分析","date":{"time":null,"string":"Invalid Date"}},{"title":"①谁在调用JUnit","url":"/post/test/谁在调用JUnit.html","excerpt":"","category":"源码分析","date":{"time":null,"string":"Invalid Date"}}]`),_hoisted_1$1={id:"container",style:{overflow:"hidden"}},_sfc_main$1=defineComponent({__name:"PostEchart",setup(a,{expose:s}){const l=defineClientComponent(()=>__vitePreload(()=>import("./index.Cl8LkLFd.js"),__vite__mapDeps([0,1]))),o=ref(),c=ref(),u=x=>{const N=x.split("/");return N.length>2?N[2]:null},d=reactive([]),f=ref(),g=ref(!1);s({replay:()=>{g.value=!0,console.log("replay"),f.value&&(f.value=anime({targets:".echarts",autoplay:!1,opacity:1,scale:[0,1],easing:"spring",duration:1e3}),f.value.play())}});const $=reactive({title:{show:!1,text:"内容统计",textAlign:"center"},tooltip:{trigger:"item",formatter:"{b} <br/> 数量: {c} 占比:({d}%)"},legend:{top:"5%",left:"center"},series:[{name:"Document Count",type:"pie",radius:["40%","70%"],padAngle:1,avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,formatter:"{b} {d}%"},emphasis:{label:{show:!0,fontSize:40,fontWeight:"bold"}},labelLine:{show:!0},data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]});return onMounted(()=>{o.value=new Map,c.value=new Map;for(let N=0;N<data.length;N++){let R=data[N];if(!R.url.endsWith("html"))continue;let j=u(R.url||"未定义"),ne=o.value.get(j)||[];ne.push(R.url),o.value.set(j,ne)}const x=[];o.value.forEach((N,R)=>{c.value.set(R,N.length),x.push({name:R.toUpperCase(),value:N.length}),d.push({value:N.length,name:R})}),$.series[0].data=x,data.map(N=>{console.log(`${N.title}--->${N.url}`)})}),onUnmounted(()=>{o.value=null}),(x,N)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[g.value?(openBlock(),createBlock(unref(l),{key:0,option:$,class:"echarts"},null,8,["option"])):createCommentVNode("",!0)]))}}),PostEchart=_export_sfc$1(_sfc_main$1,[["__scopeId","data-v-d2b224f9"]]),_hoisted_1={id:"container",class:"custom-scrollbar"},_sfc_main=defineComponent({__name:"NewHome",setup(a){const s=ref(),l=ref(),o=c=>{c===1?s.value.startTextAnimated():c===2&&l.value.replay()};return(c,u)=>(openBlock(),createElementBlock("div",_hoisted_1,[createVNode$1(unref(cu),{class:"custom-scrollbar","hide-navigation":"",onPageEnter:o},{default:withCtx(()=>[createBaseVNode("section",null,[createVNode$1(VHome)]),createBaseVNode("section",null,[createVNode$1(Style2,{ref_key:"textAnimatedRef",ref:s},null,512)]),createBaseVNode("section",null,[createVNode$1(PostEchart,{ref_key:"echartsRef",ref:l},null,512)])]),_:1})]))}}),NewHome=_export_sfc$1(_sfc_main,[["__scopeId","data-v-d482104f"]]);function useComponents(a){a.mixin({async mounted(){__vitePreload(()=>import("./index.CA6dDEUk.js").then(s=>s.i),__vite__mapDeps([2,1])).then(s=>{a.use(s.default)})}}),a.component("Demo",Demo),a.component("DemoBlock",DemoBlock),a.component("XHome",VHome),a.component("NewHome",NewHome),a.component("NewHome2",NewHome2),a.component("Style2",Style2),a.use(ArcoVue)}const RawTheme={...theme$1,Layout:_sfc_main$3v,enhanceApp(a){theme$1.enhanceApp(a),useComponents(a.app)}};export{RawTheme as R,init$1 as i,throttle$1 as t};
