const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/howler.BxWvNcJ0.js","assets/chunks/framework.B8fosacB.js"])))=>i.map(i=>d[i]);
import{d as se,as as iE,h as ie,aG as p9,y as sn,l as xi,k as T,o as N,c as ee,r as ye,n as Y,aH as Sb,C as be,H as _,w as He,an as br,ao as Ea,p as ur,M as Ai,ag as xs,O as It,L as it,ak as ea,b as De,a as ti,t as Bt,e as Me,F as Xt,D as Br,m as ve,aj as Uh,ar as f9,a0 as yt,aa as ks,al as Os,v as Vt,R as hr,W as dr,V as gt,a6 as $r,a9 as ph,A as Ss,X as Tn,U as m9,am as v9,Y as Cb,T as rs,Z as Ys,$ as Xs,ad as nz,ab as g9,a4 as rE,ai as pc,x as on,J as bs,ac as Am,ap as nc,a1 as Ws,aq as sz,a2 as y9,a3 as b9,E as w9}from"./framework.B8fosacB.js";const UP="animate__box",x9=se({__name:"VAnimate",props:{animate:{type:Object,default:{type:"fadeIn",duration:1,disabled:!1,intersecting:!1}}},setup(e,{expose:t}){iE(c=>({fcae69b0:l.value,"6c1abe2d":u.value}));const i=e,r=ie();p9();const a=()=>{const c=r.value.className.split(" ");c.push(UP),r.value.className=c.join(" ")},n=()=>{const d=r.value.className.split(" ").filter(h=>h!=="animate__box");r.value.className=d.join(" ")},s=ie();sn(()=>{s.value&&(s.value.disconnect(),s.value=null)}),xi(()=>{r.value.addEventListener("animationend",function(){n()}),i.animate.intersecting&&(s.value=new IntersectionObserver(c=>{c.forEach(d=>{d.isIntersecting&&a()})},{threshold:.1}),document.querySelectorAll(`.${UP}`).forEach(c=>{s.value.observe(c)}))}),t({replay:a});const o=c=>c.startsWith("animate__")?c.replace("animate__",""):c,l=T(()=>i.animate.disabled?"":o(i.animate.type)),u=T(()=>i.animate.disabled?"":`${i.animate.duration??1}s`);return(c,d)=>(N(),ee("div",{ref_key:"boxRef",ref:r,class:"animate__box",onClick:a},[ye(c.$slots,"default",{},void 0,!0)],512))}}),Ga=(e,t)=>{const i=e.__vccOpts||e;for(const[r,a]of t)i[r]=a;return i},fh=Ga(x9,[["__scopeId","data-v-407e5262"]]),S9=[{title:"采购付款管理",name:"icon-caigoufukuanguanli",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"标书",name:"icon-biaoshu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"采购付款管理",name:"icon-caiwufukuanguanli",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"仓库查询",name:"icon-cangkuchaxun",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"返利台账",name:"icon-fanlitaizhang",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"标签打印记录",name:"icon-jiaqiandayinjilu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"进度",name:"icon-jindu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"流水查询",name:"icon-liushuichaxun",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"铺位组",name:"icon-puweizu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"商品库",name:"icon-shangpinku",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"商铺",name:"icon-shangpu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"项目",name:"icon-xiangmu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"价签打印",name:"icon-jiaqiandayin",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"价签打印记录",name:"icon-jiaqiandayinjilu1",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"折扣打印",name:"icon-zhekoujiaqian",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"出清",name:"icon-chuqing",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"价签推送",name:"icon-jiaqiantuisong",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"价签基站",name:"icon-jiaqianjizhan",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"价签状态",name:"icon-jiaqianzhuangtai",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"监控",name:"icon-jiankong",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"章子",name:"icon-zhangzi",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"工具集",name:"icon-gongjuji",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"默认替换",name:"icon-morentihuan",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"表单",name:"icon-biaodan",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"表单模版",name:"icon-biaodanmoban",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"表单业务",name:"icon-biaodanyewu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"提报表单",name:"icon-tibaobiaodan",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"流程管理",name:"icon-liuchengguanli",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"门店看板",name:"icon-mendiankanban",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"统计",name:"icon-tongji",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"任务查询",name:"icon-renwuchaxun",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"数据统计",name:"icon-shujutongji",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"会员录入",name:"icon-huiyuanluru",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"日志变更",name:"icon-rizhibiangeng",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"日志记录",name:"icon-rizhijilu",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"商圈管理",name:"icon-shangquanguanli",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"提报审核",name:"icon-tibaoshenhe",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"图层数据",name:"icon-tucengshuju",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"消费分析",name:"icon-xiaofeifenxi",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"小区数据",name:"icon-xiaoqushuju",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"行为分析",name:"icon-hangweifenxi",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"付款报表查询",name:"icon-fukuanbaobiaochaxun",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"采购报表",name:"icon-caigoubaobiao",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"报表",name:"icon-baobiao",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"报表数据",name:"icon-baobiaoshuju",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"会员数据",name:"icon-huiyuanshuju",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"会员销售分析",name:"icon-huiyuanxiaoshoufenxi",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"会员注册",name:"icon-huiyuanzhuce",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"落位查询",name:"icon-laweichaxun",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"销售数据",name:"icon-xiaoshoushuju",category:"供应链多彩图标",categoryCN:"供应链多彩图标"},{title:"待办",name:"icon-daiban1",category:"工作流",categoryCN:"工作流"},{title:"待办",name:"icon-daiban",category:"工作流",categoryCN:"工作流"},{title:"待办事项",name:"icon-daibanshixiang",category:"工作流",categoryCN:"工作流"},{title:"审批通过",name:"icon-tongguo",category:"工作流",categoryCN:"工作流"},{title:"审核拒绝",name:"icon-shenpijujue",category:"工作流",categoryCN:"工作流"},{title:"已审核",name:"icon-yishenhe",category:"工作流",categoryCN:"工作流"},{title:"待审核",name:"icon-daishenhe",category:"工作流",categoryCN:"工作流"},{title:"在线订货",name:"icon-zaixiandinghuo",category:"供应链",categoryCN:"供应链"},{title:"库存",name:"icon-kucun",category:"供应链",categoryCN:"供应链"},{title:"上架",name:"icon-furcabinetclo",category:"供应链",categoryCN:"供应链"},{title:"上架",name:"icon-shangjia",category:"供应链",categoryCN:"供应链"},{title:"收货",name:"icon-shoudaohuo",category:"供应链",categoryCN:"供应链"},{title:"送货",name:"icon-tool_b",category:"供应链",categoryCN:"供应链"},{title:"货车",name:"icon-icon-test1",category:"供应链",categoryCN:"供应链"},{title:"拉板车",name:"icon-caisemiaobiantubiaoji-",category:"供应链",categoryCN:"供应链"},{title:"通知",name:"icon-tongzhi3",category:"供应链",categoryCN:"供应链"},{title:"库管发货",name:"icon-kuguanfahuo",category:"供应链",categoryCN:"供应链"},{title:"拉板车",name:"icon-sales",category:"供应链",categoryCN:"供应链"},{title:"货车装货",name:"icon-huoche_zhuangche",category:"供应链",categoryCN:"供应链"},{title:"货车卸货",name:"icon-discharge",category:"供应链",categoryCN:"供应链"},{title:"到货计划",name:"icon-daohuojihua",category:"供应链",categoryCN:"供应链"},{title:"货车",name:"icon-huoche",category:"供应链",categoryCN:"供应链"},{title:"清单",name:"icon-qingdan",category:"供应链",categoryCN:"供应链"},{title:"清单",name:"icon-24gf-clipboardChecklist",category:"供应链",categoryCN:"供应链"},{title:"清单",name:"icon-qingdan1",category:"供应链",categoryCN:"供应链"},{title:"清单",name:"icon-fayunqingdan",category:"供应链",categoryCN:"供应链"},{title:"隐私1",name:"icon-no-view1",category:"电商后台",categoryCN:"电商后台"},{title:"隐私",name:"icon-no-view",category:"电商后台",categoryCN:"电商后台"},{title:"身份证",name:"icon-shenfenzhengrenzheng",category:"电商后台",categoryCN:"电商后台"},{title:"发票",name:"icon-fapiao2",category:"电商后台",categoryCN:"电商后台"},{title:"物流",name:"icon-wuliuquanqiuwuliu",category:"电商后台",categoryCN:"电商后台"},{title:"物流",name:"icon-wuliuwuliuyunshu",category:"电商后台",categoryCN:"电商后台"},{title:"物流",name:"icon-wuliu",category:"电商后台",categoryCN:"电商后台"},{title:"手机号",name:"icon-shoujihao1",category:"电商后台",categoryCN:"电商后台"},{title:"购物车",name:"icon-MBEfenggeduosetubiao-gouwuche",category:"电商后台",categoryCN:"电商后台"},{title:"OA",name:"icon-OA",category:"电商后台",categoryCN:"电商后台"},{title:"预售",name:"icon-yushou",category:"电商后台",categoryCN:"电商后台"},{title:"签收",name:"icon-yiqianshou",category:"电商后台",categoryCN:"电商后台"},{title:"发票",name:"icon-fapiao",category:"电商后台",categoryCN:"电商后台"},{title:"身份证",name:"icon-shenfenzheng1",category:"电商后台",categoryCN:"电商后台"},{title:"配送费",name:"icon-navicon-psf",category:"电商后台",categoryCN:"电商后台"},{title:"签收",name:"icon-qianshou",category:"电商后台",categoryCN:"电商后台"},{title:"签收",name:"icon-a-ziyuan16",category:"电商后台",categoryCN:"电商后台"},{title:"编辑",name:"icon-bianji",category:"电商后台",categoryCN:"电商后台"},{title:"编辑1",name:"icon-bianji1",category:"电商后台",categoryCN:"电商后台"},{title:"编辑2",name:"icon-bianji2",category:"电商后台",categoryCN:"电商后台"},{title:"标记",name:"icon-icon-biaoji",category:"电商后台",categoryCN:"电商后台"},{title:"标记",name:"icon-yibiaoji",category:"电商后台",categoryCN:"电商后台"},{title:"包邮",name:"icon-baoyou",category:"电商后台",categoryCN:"电商后台"},{title:"发货",name:"icon-baoguofahuo",category:"电商后台",categoryCN:"电商后台"},{title:"已发货",name:"icon-yifahuo",category:"电商后台",categoryCN:"电商后台"},{title:"发货",name:"icon-baoguo_fahuo_o",category:"电商后台",categoryCN:"电商后台"},{title:"拼多多",name:"icon-pinduoduo",category:"电商后台",categoryCN:"电商后台"},{title:"拼多多",name:"icon-pinduoduo1",category:"电商后台",categoryCN:"电商后台"},{title:"淘宝",name:"icon-taobao",category:"电商后台",categoryCN:"电商后台"},{title:"淘宝",name:"icon-taobao1",category:"电商后台",categoryCN:"电商后台"},{title:"抖店",name:"icon-doudian",category:"电商后台",categoryCN:"电商后台"},{title:"抖店",name:"icon-doudian1",category:"电商后台",categoryCN:"电商后台"},{title:"红色小旗",name:"icon-yibiaoji-red-copy",category:"电商后台",categoryCN:"电商后台"},{title:"灰色小旗",name:"icon-yibiaoji-huise-copy",category:"电商后台",categoryCN:"电商后台"},{title:"黄色小旗",name:"icon-yibiaoji-chengse-copy",category:"电商后台",categoryCN:"电商后台"},{title:"绿色小旗",name:"icon-yibiaoji-luse-copy",category:"电商后台",categoryCN:"电商后台"},{title:"青色小旗",name:"icon-yibiaoji-lanse-copy",category:"电商后台",categoryCN:"电商后台"},{title:"紫色小旗",name:"icon-yibiaoji-zise-copy",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi1",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-yichaoshi",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-yanqi",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi2",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-mingrixianshiqiang",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi3",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi4",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi5",category:"电商后台",categoryCN:"电商后台"},{title:"超时",name:"icon-chaoshi6",category:"电商后台",categoryCN:"电商后台"},{title:"今日头条",name:"icon-jinritoutiao",category:"电商后台",categoryCN:"电商后台"},{title:"github",name:"icon-github2",category:"互联网平台",categoryCN:"互联网平台"},{title:"zhifubao",name:"icon-zhifubaozhifu",category:"互联网平台",categoryCN:"互联网平台"},{title:"qq",name:"icon-qq1",category:"互联网平台",categoryCN:"互联网平台"},{title:"zhifubao",name:"icon-zhifupingtai-zhifubao",category:"互联网平台",categoryCN:"互联网平台"},{title:"qq",name:"icon-QQ",category:"互联网平台",categoryCN:"互联网平台"},{title:"weixin",name:"icon-weixin2",category:"互联网平台",categoryCN:"互联网平台"},{title:"github",name:"icon-github3",category:"互联网平台",categoryCN:"互联网平台"},{title:"google",name:"icon-google",category:"互联网平台",categoryCN:"互联网平台"},{title:"weixin",name:"icon-weixin3",category:"互联网平台",categoryCN:"互联网平台"},{title:"360",name:"icon-360",category:"互联网平台",categoryCN:"互联网平台"},{title:"bzhan",name:"icon-Bzhan",category:"互联网平台",categoryCN:"互联网平台"},{title:"feishu",name:"icon-feishu",category:"互联网平台",categoryCN:"互联网平台"},{title:"feishu",name:"icon-feishu1",category:"互联网平台",categoryCN:"互联网平台"},{title:"feishu",name:"icon-feishurenwu",category:"互联网平台",categoryCN:"互联网平台"},{title:"微信支付",name:"icon-weixinzhifu",category:"财务相关",categoryCN:"财务相关"},{title:"银行卡",name:"icon-yinhangqia",category:"财务相关",categoryCN:"财务相关"},{title:"银行卡",name:"icon-yinhangqia-xianxing",category:"财务相关",categoryCN:"财务相关"},{title:"采购付款",name:"icon-caigoufukuan",category:"财务相关",categoryCN:"财务相关"},{title:"销售收入",name:"icon-xiaoshoushouru",category:"财务相关",categoryCN:"财务相关"},{title:"季度销售收入",name:"icon-yueduxiaoshoushouru",category:"财务相关",categoryCN:"财务相关"},{title:"付款",name:"icon-fukuan",category:"财务相关",categoryCN:"财务相关"},{title:"微信支付",name:"icon-weixinzhifu1",category:"财务相关",categoryCN:"财务相关"},{title:"支付宝支付",name:"icon-zhifu-_zhifubaozhifu",category:"财务相关",categoryCN:"财务相关"},{title:"销售收入",name:"icon-xiaoshoushouru1",category:"财务相关",categoryCN:"财务相关"},{title:"销售收入",name:"icon-xiaoshoushouru2",category:"财务相关",categoryCN:"财务相关"},{title:"银行卡",name:"icon-yinhangka",category:"财务相关",categoryCN:"财务相关"},{title:"支付",name:"icon-zhifu",category:"财务相关",categoryCN:"财务相关"},{title:"销售收入",name:"icon-xiaoshoushourubaoxiaozonge",category:"财务相关",categoryCN:"财务相关"},{title:"银联支付",name:"icon-yinlianzhifuzhifu",category:"财务相关",categoryCN:"财务相关"},{title:"采购付款",name:"icon-caigoufukuan1",category:"财务相关",categoryCN:"财务相关"},{title:"支付宝支付",name:"icon-zhifubaozhifu1",category:"财务相关",categoryCN:"财务相关"},{title:"草稿",name:"icon-caogao3",category:"财务相关",categoryCN:"财务相关"},{title:"已结算",name:"icon-yijiesuan",category:"财务相关",categoryCN:"财务相关"},{title:"结算中",name:"icon-jiesuanzhong",category:"财务相关",categoryCN:"财务相关"},{title:"结算",name:"icon-jiesuan",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-gongshangyinhang",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-zhongguogongshangyinhang",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-zhaoshangyinhang",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-zhaoshangyinhang1",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-zhongguonongyeyinhang",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-zhongguonongyeyinhang1",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-jiaotongyinhang",category:"财务相关",categoryCN:"财务相关"},{title:"银行",name:"icon-jiaotongyinhang1",category:"财务相关",categoryCN:"财务相关"},{title:"人民币",name:"icon-renminbi",category:"财务相关",categoryCN:"财务相关"},{title:"美元",name:"icon-meiyuan",category:"财务相关",categoryCN:"财务相关"}];function C9(){const e=[{key:"tag-blue",tagValue:"blue",tagStyle:"blue"},{key:"tag-red",tagValue:"red",tagStyle:"red"},{key:"tag-green",tagValue:"green",tagStyle:"green"},{key:"tag-yellow",tagValue:"yellow",tagStyle:"yellow"},{key:"tag-orange",tagValue:"orange",tagStyle:"orange"},{key:"tag-purple",tagValue:"purple",tagStyle:"purple"},{key:"tag-pink",tagValue:"pink",tagStyle:"pink"},{key:"tag-gray",tagValue:"gray",tagStyle:"gray"}],t=[{key:"circle-blue",tagValue:"blue",tagStyle:"blue"},{key:"circle-red",tagValue:"red",tagStyle:"red"},{key:"circle-green",tagValue:"green",tagStyle:"green"},{key:"circle-yellow",tagValue:"yellow",tagStyle:"yellow"},{key:"circle-orange",tagValue:"orange",tagStyle:"orange"},{key:"circle-purple",tagValue:"purple",tagStyle:"purple"},{key:"circle-pink",tagValue:"pink",tagStyle:"pink"},{key:"circle-gray",tagValue:"gray",tagStyle:"gray"}],i=l=>e.find(u=>u.key===l),r=l=>t.findIndex(c=>c.key===l)>=0;function a(l){return{title:l.key,name:l.key,category:"内置Tag标记",categoryCN:"内置Tag标记"}}function n(l){return{title:l.key,name:l.key,category:"内置状态图标",categoryCN:"内置状态图标"}}return{hasInnerTagIcon:i,loadInnerTag:l=>{l.内置Tag标记=e.map(a)},loadInnerNoticeIcon:l=>{l.内置状态图标=t.map(n)},hasInnerNoticeIcon:r,innerTagStyle:e,innerCircleStyle:t}}const _9=se({__name:"VCircle",props:{value:{type:Object,required:!0},tagKey:[String,Number]},setup(e){function t(s,o){if(s!==void 0&&s instanceof Array&&s.length>0)for(let l=0;l<s.length;l+=1){const u=s[l];if(o(u))return l}return-1}function i(s,o){const l=t(s,o);return l>=0?s[l]:null}const r=e,a=T(()=>r.tagKey),n=T(()=>{const s=i(r.value,o=>o.key===a.value);return s!==null?s.tagStyle:a});return(s,o)=>(N(),ee("span",{class:Y(["circle",n.value])},null,2))}}),M9=Ga(_9,[["__scopeId","data-v-20db6afc"]]),E9=se({__name:"VTag",setup(e){const t=Sb();return(i,r)=>{const a=be("a-tag");return N(),ee("div",null,[_(a,br(Ea(ur(t))),{default:He(()=>[ye(i.$slots,"default")]),_:3},16)])}}}),Pn=Symbol("ArcoConfigProvider");var A9=Object.defineProperty,P9=Object.defineProperties,T9=Object.getOwnPropertyDescriptors,WP=Object.getOwnPropertySymbols,k9=Object.prototype.hasOwnProperty,O9=Object.prototype.propertyIsEnumerable,HP=(e,t,i)=>t in e?A9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,D9=(e,t)=>{for(var i in t||(t={}))k9.call(t,i)&&HP(e,i,t[i]);if(WP)for(var i of WP(t))O9.call(t,i)&&HP(e,i,t[i]);return e},I9=(e,t)=>P9(e,T9(t));const L9="A",B9="arco",C_="$arco",hi=e=>{var t;return(t=e?.componentPrefix)!=null?t:L9},pi=(e,t)=>{var i;t&&t.classPrefix&&(e.config.globalProperties[C_]=I9(D9({},(i=e.config.globalProperties[C_])!=null?i:{}),{classPrefix:t.classPrefix}))},Se=e=>{var t,i,r;const a=xs(),n=Ai(Pn,void 0),s=(r=(i=n?.prefixCls)!=null?i:(t=a?.appContext.config.globalProperties[C_])==null?void 0:t.classPrefix)!=null?r:B9;return e?`${s}-${e}`:s},yd=Object.prototype.toString;function bi(e){return yd.call(e)==="[object Array]"}function Wn(e){return yd.call(e)==="[object Null]"}function jn(e){return yd.call(e)==="[object Boolean]"}function ki(e){return yd.call(e)==="[object Object]"}const ld=e=>yd.call(e)==="[object Promise]";function na(e){return yd.call(e)==="[object String]"}function Mt(e){return yd.call(e)==="[object Number]"&&e===e}function ei(e){return e===void 0}function Zt(e){return typeof e=="function"}function z9(e){return ki(e)&&Object.keys(e).length===0}function GP(e){return e||e===0}function zg(e){return e===window}const oz=e=>e?.$!==void 0,R9=e=>/\[Q]Q/.test(e);function Ks(e){return ki(e)&&"$y"in e&&"$M"in e&&"$D"in e&&"$d"in e&&"$H"in e&&"$m"in e&&"$s"in e}var We=(e,t)=>{for(const[i,r]of t)e[i]=r;return e};const N9=se({name:"Icon",props:{type:String,size:[Number,String],rotate:Number,spin:Boolean},setup(e){const t=Se("icon"),i=T(()=>{const a={};return e.size&&(a.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(a.transform=`rotate(${e.rotate}deg)`),a});return{cls:T(()=>[t,{[`${t}-loading`]:e.spin},e.type]),innerStyle:i}}});function V9(e,t,i,r,a,n){return N(),ee("svg",{class:Y(e.cls),style:It(e.innerStyle),fill:"currentColor"},[ye(e.$slots,"default")],6)}var Rg=We(N9,[["render",V9]]);const Ch=()=>{},lz=()=>{const{body:e}=document,t=document.documentElement;let i;try{i=(window.top||window.self||window).document.body}catch{}return{height:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight,i?.scrollHeight||0,i?.clientHeight||0),width:Math.max(e.scrollWidth,e.offsetWidth,t.clientWidth,t.scrollWidth,t.offsetWidth,i?.scrollWidth||0,i?.clientWidth||0)}},Pm=(()=>{try{return!(typeof window<"u"&&document!==void 0)}catch{return!0}})(),wr=Pm?Ch:(e,t,i,r=!1)=>{e.addEventListener(t,i,r)},Ir=Pm?Ch:(e,t,i,r=!1)=>{e.removeEventListener(t,i,r)},F9=(e,t)=>{if(!e||!t)return!1;let i=t;for(;i;){if(i===e)return!0;i=i.parentNode}return!1},_b=e=>{const t=document.createElement("div");return t.setAttribute("class",`arco-overlay arco-overlay-${e}`),t},uz=(e,t)=>{var i;return Pm?Ch():(i=(t??document).querySelector(e))!=null?i:void 0},el=(e,t)=>{if(na(e)){const i=e[0]==="#"?`[id='${e.slice(1)}']`:e;return uz(i,t)}return e},j9=(e,t)=>{const i=e.getBoundingClientRect(),r=t.getBoundingClientRect();return{top:i.top-r.top,bottom:r.bottom-i.bottom,left:i.left-r.left,right:r.right-i.right,width:i.width,height:i.height}},$9=e=>e.tagName==="BODY"?document.documentElement.scrollHeight>window.innerHeight:e.scrollHeight>e.offsetHeight,U9=e=>e.tagName==="BODY"?window.innerWidth-lz().width:e.offsetWidth-e.clientWidth;function W9(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}const qP=[],H9=e=>{const{src:t,extraProps:i={}}=e;if(!Pm&&t?.length&&!qP.includes(t)){const r=document.createElement("script");r.setAttribute("src",t),r.setAttribute("data-namespace",t),qP.push(t),document.body.appendChild(r)}return se({name:"IconFont",props:{type:String,size:[Number,String],rotate:Number,spin:Boolean},setup(r,{slots:a}){return()=>{var n;const s=r.type?_("use",{"xlink:href":`#${r.type}`},null):(n=a.default)==null?void 0:n.call(a);return _(Rg,it(r,i),W9(s)?s:{default:()=>[s]})}}})},cz=Object.assign(Rg,{addFromIconFontCn:H9,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+Rg.name,Rg)}}),G9={style:{display:"flex","justify-content":"center","align-items":"center"}},q9="//at.alicdn.com/t/c/font_902793_kono671wie.js",K0=se({__name:"VIcon",props:{icon:String},setup(e){const t=e,i=cz.addFromIconFontCn({src:`https://${q9}`,extraProps:{}}),r=[];S9.forEach(l=>{r.push(l.name)});const a=l=>r.findIndex(u=>u===l)>=0,{hasInnerTagIcon:n,hasInnerNoticeIcon:s,innerCircleStyle:o}=C9();return(l,u)=>{var c;return N(),ee("div",G9,[ur(n)(t.icon)?(N(),De(E9,{key:0,color:(c=ur(n)(t.icon))==null?void 0:c.tagStyle},{default:He(()=>{var d;return[ti(Bt((d=ur(n)(t.icon))==null?void 0:d.tagStyle),1)]}),_:1},8,["color"])):ur(s)(t.icon)?(N(),De(M9,{key:1,value:ur(o),"tag-key":t.icon},null,8,["value","tag-key"])):Me("",!0),a(t.icon)?(N(),De(ur(i),{key:2,type:t.icon},null,8,["type"])):Me("",!0)])}}}),Y9=["src"],Z0=se({__name:"VImage",props:{src:String},emits:["success","error"],setup(e,{emit:t}){const i=e,r=t,a=ie(),n=Sb();return xi(()=>{a.value&&(a.value.onload=function(){console.log("图片加载成功！"),r("success")},a.value.onerror=function(){console.log("图片加载失败！"),r("error")})}),(s,o)=>(N(),ee("img",it(ur(n),{ref_key:"imgRef",ref:a,src:i.src}),null,16,Y9))}}),X9=se({__name:"VTextCenter",props:{align:{type:Object,default:"center"},title:String,secondary:String,tag:Object},setup(e){const t=e;return(i,r)=>{const a=be("a-tag"),n=be("a-typography-title"),s=be("a-typography-text"),o=be("a-space");return N(),De(o,{align:t.align,direction:"vertical",size:"mini",style:{"text-align":"left"}},{default:He(()=>[t.tag?(N(),De(a,{key:0,color:t.tag.color},{default:He(()=>[ti(Bt(t.tag.tag),1)]),_:1},8,["color"])):Me("",!0),_(n,{heading:3},{default:He(()=>[ti(Bt(t.title??""),1)]),_:1}),_(s,{type:"secondary",style:{"font-size":"1.17rem"}},{default:He(()=>[ti(Bt(t.secondary??""),1)]),_:1})]),_:1},8,["align"])}}}),Q0=Ga(X9,[["__scopeId","data-v-5e4161d4"]]);var du=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dz={exports:{}};/*! LeaderLine v1.1.11 (c) Rai Blaze undefined */(function(e,t){var i=function(){function r(C){C.SVGPathElement.prototype.getPathData&&C.SVGPathElement.prototype.setPathData||function(){var L={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},j=function(je){this._string=je,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},H=C.navigator.userAgent.indexOf("MSIE ")!==-1;j.prototype={parseSegment:function(){var Ue=this._string[this._currentIndex],je=L[Ue]||null;if(je===null){if(this._prevCommand===null||(je=(Ue==="+"||Ue==="-"||Ue==="."||"0"<=Ue&&Ue<="9")&&this._prevCommand!=="Z"?this._prevCommand==="M"?"L":this._prevCommand==="m"?"l":this._prevCommand:null)===null)return null}else this._currentIndex+=1;var Re=null,Ue=(this._prevCommand=je).toUpperCase();return Ue==="H"||Ue==="V"?Re=[this._parseNumber()]:Ue==="M"||Ue==="L"||Ue==="T"?Re=[this._parseNumber(),this._parseNumber()]:Ue==="S"||Ue==="Q"?Re=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:Ue==="C"?Re=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:Ue==="A"?Re=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:Ue==="Z"&&(this._skipOptionalSpaces(),Re=[]),Re===null||0<=Re.indexOf(null)?null:{type:je,values:Re}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var je=this._string[this._currentIndex];return L[je]||null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var je=this.peekSegmentType();return je==="M"||je==="m"},_isCurrentSpace:function(){var je=this._string[this._currentIndex];return je<=" "&&(je===" "||je===`
`||je==="	"||je==="\r"||je==="\f")},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string[this._currentIndex]!==",")&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string[this._currentIndex]===","&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var je=0,Re=0,Ue=1,Ze=0,Ve=1,Ge=1,Ke=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,Ve=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&this._string[this._currentIndex]!==".")return null;for(var Ft=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==Ft)for(var Yt=this._currentIndex-1,Ot=1;Ft<=Yt;)Re+=Ot*(this._string[Yt]-"0"),--Yt,Ot*=10;if(this._currentIndex<this._endIndex&&this._string[this._currentIndex]==="."){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)Ue*=10,Ze+=(this._string.charAt(this._currentIndex)-"0")/Ue,this._currentIndex+=1}if(this._currentIndex!==Ke&&this._currentIndex+1<this._endIndex&&(this._string[this._currentIndex]==="e"||this._string[this._currentIndex]==="E")&&this._string[this._currentIndex+1]!=="x"&&this._string[this._currentIndex+1]!=="m"){if(this._currentIndex+=1,this._string[this._currentIndex]==="+"?this._currentIndex+=1:this._string[this._currentIndex]==="-"&&(this._currentIndex+=1,Ge=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)je*=10,je+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var ut=Re+Ze;return ut*=Ve,je&&(ut*=Math.pow(10,Ge*je)),Ke===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),ut)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var je=null,Re=this._string[this._currentIndex];if(this._currentIndex+=1,Re==="0")je=0;else{if(Re!=="1")return null;je=1}return this._skipOptionalSpacesOrDelimiter(),je}};function ue(je){if(!je||je.length===0)return[];var Re=new j(je),Ue=[];if(Re.initialCommandIsMoveTo())for(;Re.hasMoreData();){var Ze=Re.parseSegment();if(Ze===null)break;Ue.push(Ze)}return Ue}function ae(je){return je.map(function(Re){return{type:Re.type,values:Array.prototype.slice.call(Re.values)}})}function Ie(je){var Re=[],Ue=null,Ze=null,Ve=null,Ge=null,Ke=null,Ft=null,Yt=null;return je.forEach(function(Ot){var ut,Lt,st,we,rt,Dt,Qe,Ut;Ot.type==="M"?(Qe=Ot.values[0],Ut=Ot.values[1],Re.push({type:"M",values:[Qe,Ut]}),Ge=Ft=Qe,Ke=Yt=Ut):Ot.type==="C"?(rt=Ot.values[0],Dt=Ot.values[1],ut=Ot.values[2],Lt=Ot.values[3],Qe=Ot.values[4],Ut=Ot.values[5],Re.push({type:"C",values:[rt,Dt,ut,Lt,Qe,Ut]}),Ze=ut,Ve=Lt,Ge=Qe,Ke=Ut):Ot.type==="L"?(Qe=Ot.values[0],Ut=Ot.values[1],Re.push({type:"L",values:[Qe,Ut]}),Ge=Qe,Ke=Ut):Ot.type==="H"?(Qe=Ot.values[0],Re.push({type:"L",values:[Qe,Ke]}),Ge=Qe):Ot.type==="V"?(Ut=Ot.values[0],Re.push({type:"L",values:[Ge,Ut]}),Ke=Ut):Ot.type==="S"?(ut=Ot.values[0],Lt=Ot.values[1],Qe=Ot.values[2],Ut=Ot.values[3],we=Ue==="C"||Ue==="S"?(st=Ge+(Ge-Ze),Ke+(Ke-Ve)):(st=Ge,Ke),Re.push({type:"C",values:[st,we,ut,Lt,Qe,Ut]}),Ze=ut,Ve=Lt,Ge=Qe,Ke=Ut):Ot.type==="T"?(Qe=Ot.values[0],Ut=Ot.values[1],Dt=Ue==="Q"||Ue==="T"?(rt=Ge+(Ge-Ze),Ke+(Ke-Ve)):(rt=Ge,Ke),st=Ge+2*(rt-Ge)/3,we=Ke+2*(Dt-Ke)/3,Re.push({type:"C",values:[st,we,Qe+2*(rt-Qe)/3,Ut+2*(Dt-Ut)/3,Qe,Ut]}),Ze=rt,Ve=Dt,Ge=Qe,Ke=Ut):Ot.type==="Q"?(rt=Ot.values[0],Dt=Ot.values[1],Qe=Ot.values[2],Ut=Ot.values[3],st=Ge+2*(rt-Ge)/3,we=Ke+2*(Dt-Ke)/3,Re.push({type:"C",values:[st,we,Qe+2*(rt-Qe)/3,Ut+2*(Dt-Ut)/3,Qe,Ut]}),Ze=rt,Ve=Dt,Ge=Qe,Ke=Ut):Ot.type==="A"?(Lt=Ot.values[0],st=Ot.values[1],we=Ot.values[2],rt=Ot.values[3],Dt=Ot.values[4],Qe=Ot.values[5],Ut=Ot.values[6],Lt===0||st===0?(Re.push({type:"C",values:[Ge,Ke,Qe,Ut,Qe,Ut]}),Ge=Qe,Ke=Ut):Ge===Qe&&Ke===Ut||dt(Ge,Ke,Qe,Ut,Lt,st,we,rt,Dt).forEach(function(Wt){Re.push({type:"C",values:Wt}),Ge=Qe,Ke=Ut})):Ot.type==="Z"&&(Re.push(Ot),Ge=Ft,Ke=Yt),Ue=Ot.type}),Re}var Fe=C.SVGPathElement.prototype.setAttribute,qe=C.SVGPathElement.prototype.removeAttribute,_t=C.Symbol?C.Symbol():"__cachedPathData",tt=C.Symbol?C.Symbol():"__cachedNormalizedPathData",dt=function(je,Re,Ue,rr,Ut,Wt,Ke,Ft,Yt,Ot){function ut(At,_e,$e){return{x:At*Math.cos($e)-_e*Math.sin($e),y:At*Math.sin($e)+_e*Math.cos($e)}}var Lt=Math.PI*Ke/180,Pi=[];Ot?(Ti=Ot[0],Qe=Ot[1],sr=Ot[2],Dt=Ot[3]):(je=(Gi=ut(je,Re,-Lt)).x,Re=Gi.y,1<(Gi=(rt=(je-(Ue=(we=ut(Ue,rr,-Lt)).x))/2)*rt/(Ut*Ut)+(st=(Re-(rr=we.y))/2)*st/(Wt*Wt))&&(Ut*=Gi=Math.sqrt(Gi),Wt*=Gi),we=Ut*Ut,Gi=Wt*Wt,sr=(we=(Ft===Yt?-1:1)*Math.sqrt(Math.abs((we*Gi-we*st*st-Gi*rt*rt)/(we*st*st+Gi*rt*rt))))*Ut*st/Wt+(je+Ue)/2,Dt=we*-Wt*rt/Ut+(Re+rr)/2,Ti=Math.asin(parseFloat(((Re-Dt)/Wt).toFixed(9))),Qe=Math.asin(parseFloat(((rr-Dt)/Wt).toFixed(9))),je<sr&&(Ti=Math.PI-Ti),Ue<sr&&(Qe=Math.PI-Qe),Ti<0&&(Ti=2*Math.PI+Ti),Qe<0&&(Qe=2*Math.PI+Qe),Yt&&Qe<Ti&&(Ti-=2*Math.PI),!Yt&&Ti<Qe&&(Qe-=2*Math.PI));var st,we,rt,Gi=Qe-Ti;Math.abs(Gi)>120*Math.PI/180&&(st=Qe,we=Ue,rt=rr,Qe=Yt&&Ti<Qe?Ti+120*Math.PI/180*1:Ti+120*Math.PI/180*-1,Ue=sr+Ut*Math.cos(Qe),rr=Dt+Wt*Math.sin(Qe),Pi=dt(Ue,rr,we,rt,Ut,Wt,Ke,0,Yt,[Qe,st,sr,Dt]));var Gi=Qe-Ti,sr=Math.cos(Ti),Dt=Math.sin(Ti),Ti=Math.cos(Qe),Qe=Math.sin(Qe),Gi=Math.tan(Gi/4),Ut=4/3*Ut*Gi,Wt=4/3*Wt*Gi,Gi=[je,Re],sr=[je+Ut*Dt,Re-Wt*sr],Ti=[Ue+Ut*Qe,rr-Wt*Ti],rr=[Ue,rr];if(sr[0]=2*Gi[0]-sr[0],sr[1]=2*Gi[1]-sr[1],Ot)return[sr,Ti,rr].concat(Pi);var Pi=[sr,Ti,rr].concat(Pi).join().split(","),gi=[],ii=[];return Pi.forEach(function(At,_e){_e%2?ii.push(ut(Pi[_e-1],Pi[_e],Lt).y):ii.push(ut(Pi[_e],Pi[_e+1],Lt).x),ii.length===6&&(gi.push(ii),ii=[])}),gi};C.SVGPathElement.prototype.setAttribute=function(je,Re){je==="d"&&(this[_t]=null,this[tt]=null),Fe.call(this,je,Re)},C.SVGPathElement.prototype.removeAttribute=function(je,Re){je==="d"&&(this[_t]=null,this[tt]=null),qe.call(this,je)},C.SVGPathElement.prototype.getPathData=function(je){if(je&&je.normalize)return this[tt]?ae(this[tt]):(this[_t]?Ke=ae(this[_t]):(Ke=ue(this.getAttribute("d")||""),this[_t]=ae(Ke)),je=Ie((Re=[],Ge=Ve=Ze=Ue=null,Ke.forEach(function(Ft){var Yt,Ot,ut,Lt,st,we,rt=Ft.type;rt==="M"?(st=Ft.values[0],we=Ft.values[1],Re.push({type:"M",values:[st,we]}),Ue=Ve=st,Ze=Ge=we):rt==="m"?(st=Ue+Ft.values[0],we=Ze+Ft.values[1],Re.push({type:"M",values:[st,we]}),Ue=Ve=st,Ze=Ge=we):rt==="L"?(st=Ft.values[0],we=Ft.values[1],Re.push({type:"L",values:[st,we]}),Ue=st,Ze=we):rt==="l"?(st=Ue+Ft.values[0],we=Ze+Ft.values[1],Re.push({type:"L",values:[st,we]}),Ue=st,Ze=we):rt==="C"?(Yt=Ft.values[0],Ot=Ft.values[1],ut=Ft.values[2],Lt=Ft.values[3],st=Ft.values[4],we=Ft.values[5],Re.push({type:"C",values:[Yt,Ot,ut,Lt,st,we]}),Ue=st,Ze=we):rt==="c"?(Yt=Ue+Ft.values[0],Ot=Ze+Ft.values[1],ut=Ue+Ft.values[2],Lt=Ze+Ft.values[3],st=Ue+Ft.values[4],we=Ze+Ft.values[5],Re.push({type:"C",values:[Yt,Ot,ut,Lt,st,we]}),Ue=st,Ze=we):rt==="Q"?(Yt=Ft.values[0],Ot=Ft.values[1],st=Ft.values[2],we=Ft.values[3],Re.push({type:"Q",values:[Yt,Ot,st,we]}),Ue=st,Ze=we):rt==="q"?(Yt=Ue+Ft.values[0],Ot=Ze+Ft.values[1],st=Ue+Ft.values[2],we=Ze+Ft.values[3],Re.push({type:"Q",values:[Yt,Ot,st,we]}),Ue=st,Ze=we):rt==="A"?(st=Ft.values[5],we=Ft.values[6],Re.push({type:"A",values:[Ft.values[0],Ft.values[1],Ft.values[2],Ft.values[3],Ft.values[4],st,we]}),Ue=st,Ze=we):rt==="a"?(st=Ue+Ft.values[5],we=Ze+Ft.values[6],Re.push({type:"A",values:[Ft.values[0],Ft.values[1],Ft.values[2],Ft.values[3],Ft.values[4],st,we]}),Ue=st,Ze=we):rt==="H"?(st=Ft.values[0],Re.push({type:"H",values:[st]}),Ue=st):rt==="h"?(st=Ue+Ft.values[0],Re.push({type:"H",values:[st]}),Ue=st):rt==="V"?(we=Ft.values[0],Re.push({type:"V",values:[we]}),Ze=we):rt==="v"?(we=Ze+Ft.values[0],Re.push({type:"V",values:[we]}),Ze=we):rt==="S"?(ut=Ft.values[0],Lt=Ft.values[1],st=Ft.values[2],we=Ft.values[3],Re.push({type:"S",values:[ut,Lt,st,we]}),Ue=st,Ze=we):rt==="s"?(ut=Ue+Ft.values[0],Lt=Ze+Ft.values[1],st=Ue+Ft.values[2],we=Ze+Ft.values[3],Re.push({type:"S",values:[ut,Lt,st,we]}),Ue=st,Ze=we):rt==="T"?(st=Ft.values[0],we=Ft.values[1],Re.push({type:"T",values:[st,we]}),Ue=st,Ze=we):rt==="t"?(st=Ue+Ft.values[0],we=Ze+Ft.values[1],Re.push({type:"T",values:[st,we]}),Ue=st,Ze=we):rt!=="Z"&&rt!=="z"||(Re.push({type:"Z",values:[]}),Ue=Ve,Ze=Ge)}),Re)),this[tt]=ae(je),je);if(this[_t])return ae(this[_t]);var Re,Ue,Ze,Ve,Ge,Ke=ue(this.getAttribute("d")||"");return this[_t]=ae(Ke),Ke},C.SVGPathElement.prototype.setPathData=function(je){if(je.length===0)H?this.setAttribute("d",""):this.removeAttribute("d");else{for(var Re="",Ue=0,Ze=je.length;Ue<Ze;Ue+=1){var Ve=je[Ue];0<Ue&&(Re+=" "),Re+=Ve.type,Ve.values&&0<Ve.values.length&&(Re+=" "+Ve.values.join(" "))}this.setAttribute("d",Re)}},C.SVGRectElement.prototype.getPathData=function(je){var Re=this.x.baseVal.value,Ke=this.y.baseVal.value,Ue=this.width.baseVal.value,Ze=this.height.baseVal.value,Ve=(this.hasAttribute("rx")?this.rx:this.ry).baseVal.value,Ge=(this.hasAttribute("ry")?this.ry:this.rx).baseVal.value,Ke=(Ke=[{type:"M",values:[Re+(Ve=Ue/2<Ve?Ue/2:Ve),Ke]},{type:"H",values:[Re+Ue-Ve]},{type:"A",values:[Ve,Ge=Ze/2<Ge?Ze/2:Ge,0,0,1,Re+Ue,Ke+Ge]},{type:"V",values:[Ke+Ze-Ge]},{type:"A",values:[Ve,Ge,0,0,1,Re+Ue-Ve,Ke+Ze]},{type:"H",values:[Re+Ve]},{type:"A",values:[Ve,Ge,0,0,1,Re,Ke+Ze-Ge]},{type:"V",values:[Ke+Ge]},{type:"A",values:[Ve,Ge,0,0,1,Re+Ve,Ke]},{type:"Z",values:[]}]).filter(function(Ft){return Ft.type!=="A"||Ft.values[0]!==0&&Ft.values[1]!==0});return Ke=je&&je.normalize===!0?Ie(Ke):Ke},C.SVGCircleElement.prototype.getPathData=function(je){var Re=this.cx.baseVal.value,Ze=this.cy.baseVal.value,Ue=this.r.baseVal.value,Ze=[{type:"M",values:[Re+Ue,Ze]},{type:"A",values:[Ue,Ue,0,0,1,Re,Ze+Ue]},{type:"A",values:[Ue,Ue,0,0,1,Re-Ue,Ze]},{type:"A",values:[Ue,Ue,0,0,1,Re,Ze-Ue]},{type:"A",values:[Ue,Ue,0,0,1,Re+Ue,Ze]},{type:"Z",values:[]}];return Ze=je&&je.normalize===!0?Ie(Ze):Ze},C.SVGEllipseElement.prototype.getPathData=function(je){var Re=this.cx.baseVal.value,Ve=this.cy.baseVal.value,Ue=this.rx.baseVal.value,Ze=this.ry.baseVal.value,Ve=[{type:"M",values:[Re+Ue,Ve]},{type:"A",values:[Ue,Ze,0,0,1,Re,Ve+Ze]},{type:"A",values:[Ue,Ze,0,0,1,Re-Ue,Ve]},{type:"A",values:[Ue,Ze,0,0,1,Re,Ve-Ze]},{type:"A",values:[Ue,Ze,0,0,1,Re+Ue,Ve]},{type:"Z",values:[]}];return Ve=je&&je.normalize===!0?Ie(Ve):Ve},C.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},C.SVGPolylineElement.prototype.getPathData=function(){for(var je=[],Re=0;Re<this.points.numberOfItems;Re+=1){var Ue=this.points.getItem(Re);je.push({type:Re===0?"M":"L",values:[Ue.x,Ue.y]})}return je},C.SVGPolygonElement.prototype.getPathData=function(){for(var je=[],Re=0;Re<this.points.numberOfItems;Re+=1){var Ue=this.points.getItem(Re);je.push({type:Re===0?"M":"L",values:[Ue.x,Ue.y]})}return je.push({type:"Z",values:[]}),je}}()}var a,n,s,o,l,u,c,d,h,p,f,v,m,g,y,b,x,S,w,E,M,P,A,k="leader-line",I=1,O=2,D=3,F=4,U={top:I,right:O,bottom:D,left:F},z=1,B=2,W=3,R=4,$=5,q={straight:z,arc:B,fluid:W,magnet:R,grid:$},Z="behind",G=k+"-defs",X='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:#fff}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:#000}.leader-line-caps-mask-anchor{stroke:#000}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:transparent}.leader-line-line-mask-shape{stroke:#fff}.leader-line-line-outline-mask-shape{stroke:#000}.leader-line-plug-mask-shape{fill:#fff;stroke:#000}.leader-line-plug-outline-mask-shape{fill:#000;stroke:#fff}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',J={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},pe={behind:Z,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},fe={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},de=[I,O,D,F],ge="auto",me={x:"left",y:"top",width:"width",height:"height"},ke=80,ce=4,le=5,xe=120,Ne=8,pt=3.75,at=10,Oe=30,Ye=.5522847,xt=.25*Math.PI,ne=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,K="http://www.w3.org/2000/svg",Qt="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,ze=!Qt&&!!document.uniqueID,ft="MozAppearance"in document.documentElement.style,te=!(Qt||ft||!window.chrome||!window.CSS),Pe=!Qt&&!ze&&!ft&&!te&&!window.chrome&&"WebkitAppearance"in document.documentElement.style,Te=ze||Qt?.2:.1,Be={path:W,lineColor:"coral",lineSize:4,plugSE:[Z,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1],lineId:""},Le=(M={}.toString,P={}.hasOwnProperty.toString,A=P.call(Object),function(C){return C&&M.call(C)==="[object Object]"&&(!(C=Object.getPrototypeOf(C))||(C=C.hasOwnProperty("constructor")&&C.constructor)&&typeof C=="function"&&P.call(C)===A)}),jt=Number.isFinite||function(C){return typeof C=="number"&&window.isFinite(C)},kt=(g={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},y=1e3/60/2,b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(C){setTimeout(C,y)},x=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(C){clearTimeout(C)},S=Number.isFinite||function(C){return typeof C=="number"&&window.isFinite(C)},w=[],E=0,{add:function(C,L,j,H,ue,ae,Ie){var Fe,qe,_t,tt,dt,je,Re,Ue,Ze,Ve,Ge=++E;function Ke(Ft,Yt){return{value:C(Yt),timeRatio:Ft,outputRatio:Yt}}if(typeof ue=="string"&&(ue=g[ue]),C=C||function(){},j<y)Fe=[Ke(0,0),Ke(1,1)];else{if(qe=y/j,Fe=[Ke(0,0)],ue[0]===0&&ue[1]===0&&ue[2]===1&&ue[3]===1)for(tt=qe;tt<=1;tt+=qe)Fe.push(Ke(tt,tt));else for(dt=_t=(tt=qe)/10;dt<=1;dt+=_t)Ve=Ze=Ue=void 0,Ue=(Ve=(Re=dt)*dt)*dt,Ve*=3*(Ze=1-dt),tt<=(je={x:(Re=3*(Ze*Ze)*dt)*ue[0]+Ve*ue[2]+Ue,y:Re*ue[1]+Ve*ue[3]+Ue}).x&&(Fe.push(Ke(je.x,je.y)),tt+=qe);Fe.push(Ke(1,1))}return w.push(ae={animId:Ge,frameCallback:L,duration:j,count:H,frames:Fe,reverse:!!ae}),Ie!==!1&&Yi(ae,Ie),Ge},remove:function(C){var L;w.some(function(j,H){return j.animId===C&&(L=H,!(j.framesStart=null))})&&w.splice(L,1)},start:function(C,L,j){w.some(function(H){return H.animId===C&&(H.reverse=!!L,Yi(H,j),!0)})},stop:function(C,L){var j;return w.some(function(H){return H.animId===C&&(L?H.lastFrame!=null&&(j=H.frames[H.lastFrame].timeRatio):(j=(Date.now()-H.framesStart)/H.duration,(j=H.reverse?1-j:j)<0?j=0:1<j&&(j=1)),!(H.framesStart=null))}),j},validTiming:function(C){return typeof C=="string"?g[C]:Array.isArray(C)&&[0,1,2,3].every(function(L){return S(C[L])&&0<=C[L]&&C[L]<=1})?[C[0],C[1],C[2],C[3]]:null}}),Qt=(f=[function(C,L,j){j.r(L);var H,ue=[],ae=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(tt){return setTimeout(tt,1e3/60)},Ie=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(tt){return clearTimeout(tt)},Fe=Date.now();function qe(){var tt,dt;H&&(Ie.call(window,H),H=null),ue.forEach(function(je){var Re;(Re=je.event)&&(je.event=null,je.listener(Re),tt=!0)}),tt?(Fe=Date.now(),dt=!0):Date.now()-Fe<500&&(dt=!0),dt&&(H=ae.call(window,qe))}function _t(tt){var dt=-1;return ue.some(function(je,Re){return je.listener===tt&&(dt=Re,!0)}),dt}j={add:function(tt){var dt;return _t(tt)===-1?(ue.push(dt={listener:tt}),function(je){dt.event=je,H||qe()}):null},remove:function(tt){-1<(tt=_t(tt))&&(ue.splice(tt,1),!ue.length&&H&&(Ie.call(window,H),H=null))}},L.default=j}],v={},$t.m=f,$t.c=v,$t.d=function(C,L,j){$t.o(C,L)||Object.defineProperty(C,L,{enumerable:!0,get:j})},$t.r=function(C){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})},$t.t=function(C,L){if(1&L&&(C=$t(C)),8&L||4&L&&typeof C=="object"&&C&&C.__esModule)return C;var j=Object.create(null);if($t.r(j),Object.defineProperty(j,"default",{enumerable:!0,value:C}),2&L&&typeof C!="string")for(var H in C)$t.d(j,H,function(ue){return C[ue]}.bind(null,H));return j},$t.n=function(C){var L=C&&C.__esModule?function(){return C.default}:function(){return C};return $t.d(L,"a",L),L},$t.o=function(C,L){return Object.prototype.hasOwnProperty.call(C,L)},$t.p="",$t($t.s=0).default),ct={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:Z},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:Z},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:Z},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},mt={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},Et="fade",Gt=[],Ht={},Ee=0,nt={},St=0;function $t(C){if(v[C])return v[C].exports;var L=v[C]={i:C,l:!1,exports:{}};return f[C].call(L.exports,L,L.exports,$t),L.l=!0,L.exports}function Ei(){var C=Date.now(),L=!1;m&&(x.call(window,m),m=null),w.forEach(function(j){var H,ue,ae;if(j.framesStart){if((H=C-j.framesStart)>=j.duration&&j.count&&j.loopsLeft<=1)return ae=j.frames[j.lastFrame=j.reverse?0:j.frames.length-1],j.frameCallback(ae.value,!0,ae.timeRatio,ae.outputRatio),void(j.framesStart=null);if(H>j.duration){if(ue=Math.floor(H/j.duration),j.count){if(ue>=j.loopsLeft)return ae=j.frames[j.lastFrame=j.reverse?0:j.frames.length-1],j.frameCallback(ae.value,!0,ae.timeRatio,ae.outputRatio),void(j.framesStart=null);j.loopsLeft-=ue}j.framesStart+=j.duration*ue,H=C-j.framesStart}j.reverse&&(H=j.duration-H),ae=j.frames[j.lastFrame=Math.round(H/y)],j.frameCallback(ae.value,!1,ae.timeRatio,ae.outputRatio)!==!1?L=!0:j.framesStart=null}}),L&&(m=b.call(window,Ei))}function Yi(C,L){C.framesStart=Date.now(),L!=null&&(C.framesStart-=C.duration*(C.reverse?1-L:L)),C.loopsLeft=C.count,C.lastFrame=null,Ei()}function nr(C,L){var j,H;return typeof C!=typeof L||(j=Le(C)?"obj":Array.isArray(C)?"array":"")!=(Le(L)?"obj":Array.isArray(L)?"array":"")||(j==="obj"?nr(H=Object.keys(C).sort(),Object.keys(L).sort())||H.some(function(ue){return nr(C[ue],L[ue])}):j==="array"?C.length!==L.length||C.some(function(ue,ae){return nr(ue,L[ae])}):C!==L)}function ar(C){return C&&(Le(C)?Object.keys(C).reduce(function(L,j){return L[j]=ar(C[j]),L},{}):Array.isArray(C)?C.map(ar):C)}function Qr(C){var L,j,H,ue=1,ae=C=(C+"").trim();function Ie(_t){var qe=1,_t=ne.exec(_t);return _t&&(qe=parseFloat(_t[1]),_t[2]?qe=0<=qe&&qe<=100?qe/100:1:(qe<0||1<qe)&&(qe=1)),qe}return(L=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(C))?(j=L[1].toLowerCase(),H=L[2].trim().split(/\s*,\s*/),j==="rgba"&&H.length===4?(ue=Ie(H[3]),ae="rgb("+H.slice(0,3).join(", ")+")"):j==="hsla"&&H.length===4?(ue=Ie(H[3]),ae="hsl("+H.slice(0,3).join(", ")+")"):j==="hwb"&&H.length===4?(ue=Ie(H[3]),ae="hwb("+H.slice(0,3).join(", ")+")"):j==="gray"&&H.length===2?(ue=Ie(H[1]),ae="gray("+H[0]+")"):j==="device-cmyk"&&5<=H.length&&(ue=Ie(H[4]),ae="device-cmyk("+H.slice(0,4).join(", ")+")")):(L=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(C))?ae=L[1]?(ue=parseInt(L[2],16)/255,"#"+L[1]):(ue=parseInt(L[4]+L[4],16)/255,"#"+L[3]):C.toLocaleLowerCase()==="transparent"&&(ue=0),[ue,ae]}function Rt(C){return!(!C||C.nodeType!==Node.ELEMENT_NODE||typeof C.getBoundingClientRect!="function")}function Ci(C,L){var j,H,ue,ae={};if(!(ue=C.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(C.compareDocumentPosition(ue)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(H in j=C.getBoundingClientRect())ae[H]=j[H];if(!L){if(!(ue=ue.defaultView))return console.error("Cannot get window that contains the element."),null;ae.left+=ue.pageXOffset,ae.right+=ue.pageXOffset,ae.top+=ue.pageYOffset,ae.bottom+=ue.pageYOffset}return ae}function or(C,L){var j,H=[],ue=C;for(L=L||window;;){if(!(j=ue.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(j=j.defaultView))return console.error("Cannot get window that contains the element."),null;if(j===L)break;if(!(ue=j.frameElement))return console.error("`baseWindow` was not found."),null;H.unshift(ue)}return H}function ta(C,L){var j=0,H=0;return(L=or(C,L=L||window))?L.length?(L.forEach(function(ue,ae){var Ie=Ci(ue,0<ae);j+=Ie.left,H+=Ie.top,ue=(ae=ue).ownerDocument.defaultView.getComputedStyle(ae,""),Ie={left:ae.clientLeft+parseFloat(ue.paddingLeft),top:ae.clientTop+parseFloat(ue.paddingTop)},j+=Ie.left,H+=Ie.top}),(L=Ci(C,!0)).left+=j,L.right+=j,L.top+=H,L.bottom+=H,L):Ci(C):null}function Jr(C,H){var j=C.x-H.x,H=C.y-H.y;return Math.sqrt(j*j+H*H)}function pn(C,ue,j){var H=ue.x-C.x,ue=ue.y-C.y;return{x:C.x+H*j,y:C.y+ue*j,angle:Math.atan2(ue,H)/(Math.PI/180)}}function fn(C,L,j){return C=Math.atan2(C.y-L.y,L.x-C.x),{x:L.x+Math.cos(C)*j,y:L.y+Math.sin(C)*j*-1}}function he(Re,Ue,j,Ve,Ze){var je=Ze*Ze,dt=je*Ze,ae=1-Ze,tt=ae*ae,_t=tt*ae,Ie=_t*Re.x+3*tt*Ze*Ue.x+3*ae*je*j.x+dt*Ve.x,Fe=_t*Re.y+3*tt*Ze*Ue.y+3*ae*je*j.y+dt*Ve.y,qe=Re.x+2*Ze*(Ue.x-Re.x)+je*(j.x-2*Ue.x+Re.x),_t=Re.y+2*Ze*(Ue.y-Re.y)+je*(j.y-2*Ue.y+Re.y),tt=Ue.x+2*Ze*(j.x-Ue.x)+je*(Ve.x-2*j.x+Ue.x),dt=Ue.y+2*Ze*(j.y-Ue.y)+je*(Ve.y-2*j.y+Ue.y),je=ae*Re.x+Ze*Ue.x,Re=ae*Re.y+Ze*Ue.y,Ue=ae*j.x+Ze*Ve.x,Ze=ae*j.y+Ze*Ve.y,Ve=90-180*Math.atan2(qe-tt,_t-dt)/Math.PI;return{x:Ie,y:Fe,fromP2:{x:qe,y:_t},toP1:{x:tt,y:dt},fromP1:{x:je,y:Re},toP2:{x:Ue,y:Ze},angle:Ve+=180<Ve?-180:180}}function lt(C,L,j,H,ue){function ae(dt,je,Re,Ue,Ze){return dt*(dt*(-3*je+9*Re-9*Ue+3*Ze)+6*je-12*Re+6*Ue)-3*je+3*Re}var Ie,Fe,qe=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],_t=0,tt=(ue=ue==null||1<ue?1:ue<0?0:ue)/2;return[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach(function(dt,je){Ie=ae(Fe=tt*dt+tt,C.x,L.x,j.x,H.x),Fe=ae(Fe,C.y,L.y,j.y,H.y),Fe=Ie*Ie+Fe*Fe,_t+=qe[je]*Math.sqrt(Fe)}),tt*_t}function vt(C,L,j,H,ue){for(var ae,Ie=.5,Fe=1-Ie;ae=lt(C,L,j,H,Fe),!(Math.abs(ae-ue)<=.01);)Fe+=(ae<ue?1:-1)*(Ie/=2);return Fe}function et(C,L){var j;return C.forEach(function(H){H=L?H.map(function(ue){return ue={x:ue.x,y:ue.y},L(ue),ue}):H,(j=j||[{type:"M",values:[H[0].x,H[0].y]}]).push(H.length?H.length===2?{type:"L",values:[H[1].x,H[1].y]}:{type:"C",values:[H[1].x,H[1].y,H[2].x,H[2].y,H[3].x,H[3].y]}:{type:"Z",values:[]})}),j}function bt(C){var L=[],j=0;return C.forEach(function(H){H=(H.length===2?Jr:lt).apply(null,H),L.push(H),j+=H}),{segsLen:L,lenAll:j}}function ci(C,L){return C==null||L==null||C.length!==L.length||C.some(function(j,H){var ue=L[H];return j.type!==ue.type||j.values.some(function(ae,Ie){return ae!==ue.values[Ie]})})}function mi(C,L,j){C.events[L]?C.events[L].indexOf(j)<0&&C.events[L].push(j):C.events[L]=[j]}function vi(C,L,j){var H;C.events[L]&&-1<(H=C.events[L].indexOf(j))&&C.events[L].splice(H,1)}function Si(C){c&&clearTimeout(c),Gt.push(C),c=setTimeout(function(){Gt.forEach(function(L){L()}),Gt=[]},0)}function ui(C,L){C.reflowTargets.indexOf(L)<0&&C.reflowTargets.push(L)}function Hi(C){C.reflowTargets.forEach(function(L){var j;j=L,setTimeout(function(){var H=j.parentNode,ue=j.nextSibling;H.insertBefore(H.removeChild(j),ue)},0)}),C.reflowTargets=[]}function er(C,L,j,H,ue,ae,Ie){var Fe;j==="auto-start-reverse"?(typeof d!="boolean"&&(L.setAttribute("orient","auto-start-reverse"),d=L.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),d?L.setAttribute("orient",j):((Fe=ue.createSVGTransform()).setRotate(180,0,0),ae.transform.baseVal.appendItem(Fe),L.setAttribute("orient","auto"),Fe=!0)):(L.setAttribute("orient",j),d===!1&&ae.transform.baseVal.clear()),L=L.viewBox.baseVal,Fe?(L.x=-H.right,L.y=-H.bottom):(L.x=H.left,L.y=H.top),L.width=H.width,L.height=H.height,ze&&ui(C,Ie)}function $i(C,L){return{prop:C?"markerEnd":"markerStart",orient:L?L.noRotate?"0":C?"auto":"auto-start-reverse":null}}function Ki(C,L){Object.keys(L).forEach(function(j){var H=L[j];C[j]=H.iniValue!=null?H.hasSE?[H.iniValue,H.iniValue]:H.iniValue:H.hasSE?H.hasProps?[{},{}]:[]:H.hasProps?{}:null})}function Xe(C,L,j,H,ue){return H!==L[j]&&(L[j]=H,ue&&ue.forEach(function(ae){ae(C,H,j)}),!0)}function ni(H){function L(ae,Ie){return ae+parseFloat(Ie)}var ue=H.document,j=H.getComputedStyle(ue.documentElement,""),H=H.getComputedStyle(ue.body,""),ue={x:0,y:0};return H.position!=="static"?(ue.x-=[j.marginLeft,j.borderLeftWidth,j.paddingLeft,H.marginLeft,H.borderLeftWidth].reduce(L,0),ue.y-=[j.marginTop,j.borderTopWidth,j.paddingTop,H.marginTop,H.borderTopWidth].reduce(L,0)):j.position!=="static"&&(ue.x-=[j.marginLeft,j.borderLeftWidth].reduce(L,0),ue.y-=[j.marginTop,j.borderTopWidth].reduce(L,0)),ue}function Oi(C){var L,j=C.document;j.getElementById(G)||(L=new C.DOMParser().parseFromString(X,"image/svg+xml"),j.body.appendChild(L.documentElement),r(C))}function wi(C){var L,j,H,ue,ae,Ie,Fe,qe,_t,tt,dt,je,Re,Ue,Ze=C.options,Ve=C.curStats,Ge=C.aplStats,Ke=Ve.position_socketXYSE,Ft=!1;function Yt(ut,Lt){return ut=Lt===I?{x:ut.left+ut.width/2,y:ut.top}:Lt===O?{x:ut.right,y:ut.top+ut.height/2}:Lt===D?{x:ut.left+ut.width/2,y:ut.bottom}:{x:ut.left,y:ut.top+ut.height/2},ut.socketId=Lt,ut}function Ot(ut){return{x:ut.x,y:ut.y}}if(Ve.position_path=Ze.path,Ve.position_lineStrokeWidth=Ve.line_strokeWidth,Ve.position_socketGravitySE=L=ar(Ze.socketGravitySE),j=[0,1].map(function(ut){var Lt=Ze.anchorSE[ut],st=C.optionIsAttach.anchorSE[ut],we=st!==!1?nt[Lt._id]:null,rt=st!==!1&&we.conf.getStrokeWidth?we.conf.getStrokeWidth(we,C):0,Dt=st!==!1&&we.conf.getBBoxNest?we.conf.getBBoxNest(we,C,rt):ta(Lt,C.baseWindow);return Ve.capsMaskAnchor_pathDataSE[ut]=st!==!1&&we.conf.getPathData?we.conf.getPathData(we,C,rt):(st=(Lt=Dt).right!=null?Lt.right:Lt.left+Lt.width,we=Lt.bottom!=null?Lt.bottom:Lt.top+Lt.height,[{type:"M",values:[Lt.left,Lt.top]},{type:"L",values:[st,Lt.top]},{type:"L",values:[st,we]},{type:"L",values:[Lt.left,we]},{type:"Z",values:[]}]),Ve.capsMaskAnchor_strokeWidthSE[ut]=rt,Dt}),Fe=-1,Ze.socketSE[0]&&Ze.socketSE[1]?(Ke[0]=Yt(j[0],Ze.socketSE[0]),Ke[1]=Yt(j[1],Ze.socketSE[1])):(Ze.socketSE[0]||Ze.socketSE[1]?(Ie=Ze.socketSE[0]?(ae=0,1):(ae=1,0),Ke[ae]=Yt(j[ae],Ze.socketSE[ae]),(ue=de.map(function(ut){return Yt(j[Ie],ut)})).forEach(function(ut){var Lt=Jr(ut,Ke[ae]);(Lt<Fe||Fe===-1)&&(Ke[Ie]=ut,Fe=Lt)})):(ue=de.map(function(ut){return Yt(j[1],ut)}),de.map(function(ut){return Yt(j[0],ut)}).forEach(function(ut){ue.forEach(function(Lt){var st=Jr(ut,Lt);(st<Fe||Fe===-1)&&(Ke[0]=ut,Ke[1]=Lt,Fe=st)})})),[0,1].forEach(function(ut){var Lt,st;Ze.socketSE[ut]||(j[ut].width||j[ut].height?j[ut].width||Ke[ut].socketId!==F&&Ke[ut].socketId!==O?j[ut].height||Ke[ut].socketId!==I&&Ke[ut].socketId!==D||(Ke[ut].socketId=0<=Ke[ut?0:1].y-j[ut].top?D:I):Ke[ut].socketId=0<=Ke[ut?0:1].x-j[ut].left?O:F:(Lt=Ke[ut?0:1].x-j[ut].left,st=Ke[ut?0:1].y-j[ut].top,Ke[ut].socketId=Math.abs(Lt)>=Math.abs(st)?0<=Lt?O:F:0<=st?D:I))})),Ve.position_path!==Ge.position_path||Ve.position_lineStrokeWidth!==Ge.position_lineStrokeWidth||[0,1].some(function(ut){return Ve.position_plugOverheadSE[ut]!==Ge.position_plugOverheadSE[ut]||(Lt=Ke[ut],st=Ge.position_socketXYSE[ut],Lt.x!==st.x||Lt.y!==st.y||Lt.socketId!==st.socketId)||(Lt=L[ut],st=Ge.position_socketGravitySE[ut],(ut=Lt==null?"auto":Array.isArray(Lt)?"array":"number")!=(st==null?"auto":Array.isArray(st)?"array":"number")||(ut=="array"?Lt[0]!==st[0]||Lt[1]!==st[1]:Lt!==st));var Lt,st})){switch(C.pathList.baseVal=H=[],C.pathList.animVal=null,Ve.position_path){case z:H.push([Ot(Ke[0]),Ot(Ke[1])]);break;case B:je=typeof L[0]=="number"&&0<L[0]||typeof L[1]=="number"&&0<L[1],Re=xt*(je?-1:1),Ue=Math.atan2(Ke[1].y-Ke[0].y,Ke[1].x-Ke[0].x),je=Re-Ue,Ue=Math.PI-Ue-Re,Re=Jr(Ke[0],Ke[1])/Math.sqrt(2)*Ye,je={x:Ke[0].x+Math.cos(je)*Re,y:Ke[0].y+Math.sin(je)*Re*-1},Re={x:Ke[1].x+Math.cos(Ue)*Re,y:Ke[1].y+Math.sin(Ue)*Re*-1},H.push([Ot(Ke[0]),je,Re,Ot(Ke[1])]);break;case W:case R:_t=[L[0],Ve.position_path===R?0:L[1]],tt=[],dt=[],Ke.forEach(function(ut,Lt){var st,we=_t[Lt],rt=Array.isArray(we)?{x:we[0],y:we[1]}:typeof we=="number"?ut.socketId===I?{x:0,y:-we}:ut.socketId===O?{x:we,y:0}:ut.socketId===D?{x:0,y:we}:{x:-we,y:0}:(st=Ke[Lt?0:1],we=0<(we=Ve.position_plugOverheadSE[Lt])?xe+(Ne<we?(we-Ne)*pt:0):ke+(Ve.position_lineStrokeWidth>ce?(Ve.position_lineStrokeWidth-ce)*le:0),ut.socketId===I?{x:0,y:-(rt=(rt=(ut.y-st.y)/2)<we?we:rt)}:ut.socketId===O?{x:rt=(rt=(st.x-ut.x)/2)<we?we:rt,y:0}:ut.socketId===D?{x:0,y:rt=(rt=(st.y-ut.y)/2)<we?we:rt}:{x:-(rt=(rt=(ut.x-st.x)/2)<we?we:rt),y:0});tt[Lt]=ut.x+rt.x,dt[Lt]=ut.y+rt.y}),H.push([Ot(Ke[0]),{x:tt[0],y:dt[0]},{x:tt[1],y:dt[1]},Ot(Ke[1])]);break;case $:(function(){var ut,Lt=1,st=2,we=3,rt=4,Dt=[[],[]],Qe=[];function Ut(ii){return ii===Lt?we:ii===st?rt:ii===we?Lt:st}function Wt(ii){return ii===st||ii===rt?"x":"y"}function Gi(ii,At,_e){var $e={x:ii.x,y:ii.y};if(_e){if(_e===Ut(ii.dirId))throw new Error("Invalid dirId: "+_e);$e.dirId=_e}else $e.dirId=ii.dirId;return $e.dirId===Lt?$e.y-=At:$e.dirId===st?$e.x+=At:$e.dirId===we?$e.y+=At:$e.x-=At,$e}function sr(ii,At){return At.dirId===Lt?ii.y<=At.y:At.dirId===st?ii.x>=At.x:At.dirId===we?ii.y>=At.y:ii.x<=At.x}function Ti(ii,At){return At.dirId===Lt||At.dirId===we?ii.x===At.x:ii.y===At.y}function rr(ii){return ii[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function Pi(ii,At,_e){return Math.abs(At[_e]-ii[_e])}function gi(ii,At,_e){return _e==="x"?ii.x<At.x?st:rt:ii.y<At.y?we:Lt}for(Ke.forEach(function(ii,At){var _e=Ot(ii),$e=L[At];ii=Array.isArray($e)?$e[0]<0?[rt,-$e[0]]:0<$e[0]?[st,$e[0]]:$e[1]<0?[Lt,-$e[1]]:0<$e[1]?[we,$e[1]]:[ii.socketId,0]:typeof $e!="number"?[ii.socketId,Oe]:0<=$e?[ii.socketId,$e]:[Ut(ii.socketId),-$e],_e.dirId=ii[0],$e=ii[1],Dt[At].push(_e),Qe[At]=Gi(_e,$e)});function(){var ii,At,_e,$e,Ct=[sr(Qe[1],Qe[0]),sr(Qe[0],Qe[1])],Nt=[Wt(Qe[0].dirId),Wt(Qe[1].dirId)];if(Nt[0]===Nt[1]){if(Ct[0]&&Ct[1])return void(Ti(Qe[1],Qe[0])||(Qe[0][Nt[0]]===Qe[1][Nt[1]]?(Dt[0].push(Qe[0]),Dt[1].push(Qe[1])):(ii=Qe[0][Nt[0]]+(Qe[1][Nt[1]]-Qe[0][Nt[0]])/2,Dt[0].push(Gi(Qe[0],Math.abs(ii-Qe[0][Nt[0]]))),Dt[1].push(Gi(Qe[1],Math.abs(ii-Qe[1][Nt[1]]))))));Ct[0]!==Ct[1]?(At=rr(Ct),(_e=Pi(Qe[At.notContain],Qe[At.contain],Nt[At.notContain]))<Oe&&(Qe[At.notContain]=Gi(Qe[At.notContain],Oe-_e)),Dt[At.notContain].push(Qe[At.notContain]),Qe[At.notContain]=Gi(Qe[At.notContain],Oe,Ti(Qe[At.contain],Qe[At.notContain])?Nt[At.notContain]==="x"?we:st:gi(Qe[At.notContain],Qe[At.contain],Nt[At.notContain]==="x"?"y":"x"))):(_e=Pi(Qe[0],Qe[1],Nt[0]==="x"?"y":"x"),Dt.forEach(function(ai,qt){var si=qt===0?1:0;ai.push(Qe[qt]),Qe[qt]=Gi(Qe[qt],Oe,2*Oe<=_e?gi(Qe[qt],Qe[si],Nt[qt]==="x"?"y":"x"):Nt[qt]==="x"?we:st)}))}else{if(Ct[0]&&Ct[1])return void(Ti(Qe[1],Qe[0])?Dt[1].push(Qe[1]):Ti(Qe[0],Qe[1])?Dt[0].push(Qe[0]):Dt[0].push(Nt[0]==="x"?{x:Qe[1].x,y:Qe[0].y}:{x:Qe[0].x,y:Qe[1].y}));Ct[0]!==Ct[1]?(At=rr(Ct),Dt[At.notContain].push(Qe[At.notContain]),Qe[At.notContain]=Gi(Qe[At.notContain],Oe,Pi(Qe[At.notContain],Qe[At.contain],Nt[At.contain])>=Oe?gi(Qe[At.notContain],Qe[At.contain],Nt[At.contain]):Qe[At.contain].dirId)):($e=[{x:Qe[0].x,y:Qe[0].y},{x:Qe[1].x,y:Qe[1].y}],Dt.forEach(function(ai,qt){var si=qt===0?1:0,Je=Pi($e[qt],$e[si],Nt[qt]);Je<Oe&&(Qe[qt]=Gi(Qe[qt],Oe-Je)),ai.push(Qe[qt]),Qe[qt]=Gi(Qe[qt],Oe,gi(Qe[qt],Qe[si],Nt[si]))}))}return 1}(););Dt[1].reverse(),Dt[0].concat(Dt[1]).forEach(function(ii,At){ii={x:ii.x,y:ii.y},0<At&&H.push([ut,ii]),ut=ii})})()}qe=[],Ve.position_plugOverheadSE.forEach(function(ut,Lt){var st,we,rt,Dt,Qe,Ut,Wt,Gi,sr,Ti=!Lt;0<ut?(st=H[we=Ti?0:H.length-1]).length===2?(qe[we]=qe[we]||Jr.apply(null,st),qe[we]>at&&(qe[we]-ut<at&&(ut=qe[we]-at),Wt=pn(st[0],st[1],(Ti?ut:qe[we]-ut)/qe[we]),H[we]=Ti?[Wt,st[1]]:[st[0],Wt],qe[we]-=ut)):(qe[we]=qe[we]||lt.apply(null,st),qe[we]>at&&(qe[we]-ut<at&&(ut=qe[we]-at),Wt=he(st[0],st[1],st[2],st[3],vt(st[0],st[1],st[2],st[3],Ti?ut:qe[we]-ut)),Dt=Ti?(rt=st[0],Wt.toP1):(rt=st[3],Wt.fromP2),Qe=Math.atan2(rt.y-Wt.y,Wt.x-rt.x),Ut=Jr(Wt,Dt),Wt.x=rt.x+Math.cos(Qe)*ut,Wt.y=rt.y+Math.sin(Qe)*ut*-1,Dt.x=Wt.x+Math.cos(Qe)*Ut,Dt.y=Wt.y+Math.sin(Qe)*Ut*-1,H[we]=Ti?[Wt,Wt.toP1,Wt.toP2,st[3]]:[st[0],Wt.fromP1,Wt.fromP2,Wt],qe[we]=null)):ut<0&&(st=H[we=Ti?0:H.length-1],Wt=Ke[Lt].socketId,Lt=-j[Lt][(Gi=Wt===F||Wt===O?"x":"y")=="x"?"width":"height"],sr=(ut=ut<Lt?Lt:ut)*(Wt===F||Wt===I?-1:1),st.length===2?st[Ti?0:st.length-1][Gi]+=sr:(Ti?[0,1]:[st.length-2,st.length-1]).forEach(function(rr){st[rr][Gi]+=sr}),qe[we]=null)}),Ge.position_socketXYSE=ar(Ke),Ge.position_plugOverheadSE=ar(Ve.position_plugOverheadSE),Ge.position_path=Ve.position_path,Ge.position_lineStrokeWidth=Ve.position_lineStrokeWidth,Ge.position_socketGravitySE=ar(L),Ft=!0,C.events.apl_position&&C.events.apl_position.forEach(function(ut){ut(C,H)})}return Ft}function pr(C,L){L!==C.isShown&&(!!L!=!!C.isShown&&(C.svg.style.visibility=L?"":"hidden"),C.isShown=L,C.events&&C.events.svgShow&&C.events.svgShow.forEach(function(j){j(C,L)}))}function yi(C,L){var j,H,ue,ae,Ie,Fe,qe,_t,tt,dt,je,Re,Ue,Ze,Ve,Ge,Ke,Ft,Yt,Ot,ut,Lt,st,we,rt,Dt,Qe,Ut,Wt,Gi,sr,Ti,rr,Pi,gi,ii,At,_e,$e,Ct,Nt,ai,qt,si={};L.line&&(si.line=(_t=(j=C).options,H=j.curStats,tt=j.events,dt=!1,j.svg.id=j.options.lineId,dt=Xe(j,H,"line_color",_t.lineColor,tt.cur_line_color)||dt,dt=Xe(j,H,"line_colorTra",Qr(H.line_color)[0]<1)||dt,dt=Xe(j,H,"line_strokeWidth",_t.lineSize,tt.cur_line_strokeWidth)||dt)),(L.plug||si.line)&&(si.plug=(ae=(ue=C).options,Ie=ue.curStats,Fe=ue.events,qe=!1,[0,1].forEach(function(Je){var oi,Xi,sa,Sr,ls,Cr,us,Ms,ro=ae.plugSE[Je];qe=Xe(ue,Ie.plug_enabledSE,Je,ro!==Z)||qe,qe=Xe(ue,Ie.plug_plugSE,Je,ro)||qe,qe=Xe(ue,Ie.plug_colorSE,Je,Ms=ae.plugColorSE[Je]||Ie.line_color,Fe.cur_plug_colorSE)||qe,qe=Xe(ue,Ie.plug_colorTraSE,Je,Qr(Ms)[0]<1)||qe,ro!==Z&&(Sr=Xi=(oi=J[fe[ro]]).widthR*ae.plugSizeSE[Je],ls=sa=oi.heightR*ae.plugSizeSE[Je],Pe&&(Sr*=Ie.line_strokeWidth,ls*=Ie.line_strokeWidth),qe=Xe(ue,Ie.plug_markerWidthSE,Je,Sr)||qe,qe=Xe(ue,Ie.plug_markerHeightSE,Je,ls)||qe,Ie.capsMaskMarker_markerWidthSE[Je]=Xi,Ie.capsMaskMarker_markerHeightSE[Je]=sa),Ie.plugOutline_plugSE[Je]=Ie.capsMaskMarker_plugSE[Je]=ro,Ie.plug_enabledSE[Je]?(Ms=Ie.line_strokeWidth/Be.lineSize*ae.plugSizeSE[Je],Ie.position_plugOverheadSE[Je]=oi.overhead*Ms,Ie.viewBox_plugBCircleSE[Je]=oi.bCircle*Ms,Cr=oi.sideLen*Ms,us=oi.backLen*Ms):(Ie.position_plugOverheadSE[Je]=-Ie.line_strokeWidth/2,Ie.viewBox_plugBCircleSE[Je]=Cr=us=0),Xe(ue,Ie.attach_plugSideLenSE,Je,Cr,Fe.cur_attach_plugSideLenSE),Xe(ue,Ie.attach_plugBackLenSE,Je,us,Fe.cur_attach_plugBackLenSE),Ie.capsMaskAnchor_enabledSE[Je]=!Ie.plug_enabledSE[Je]}),qe=Xe(ue,Ie,"plug_enabled",Ie.plug_enabledSE[0]||Ie.plug_enabledSE[1])||qe)),(L.lineOutline||si.line)&&(si.lineOutline=(tt=(_t=C).options,dt=_t.curStats,st=!1,st=Xe(_t,dt,"lineOutline_enabled",tt.lineOutlineEnabled)||st,st=Xe(_t,dt,"lineOutline_color",tt.lineOutlineColor)||st,st=Xe(_t,dt,"lineOutline_colorTra",Qr(dt.lineOutline_color)[0]<1)||st,tt=dt.line_strokeWidth*tt.lineOutlineSize,st=Xe(_t,dt,"lineOutline_strokeWidth",dt.line_strokeWidth-2*tt)||st,st=Xe(_t,dt,"lineOutline_inStrokeWidth",dt.lineOutline_colorTra?dt.lineOutline_strokeWidth+2*Te:dt.line_strokeWidth-tt)||st)),(L.plugOutline||si.line||si.plug||si.lineOutline)&&(si.plugOutline=(Re=(je=C).options,Ue=je.curStats,Ze=!1,[0,1].forEach(function(Je){var oi=Ue.plugOutline_plugSE[Je],Xi=oi!==Z?J[fe[oi]]:null;Ze=Xe(je,Ue.plugOutline_enabledSE,Je,Re.plugOutlineEnabledSE[Je]&&Ue.plug_enabled&&Ue.plug_enabledSE[Je]&&!!Xi&&!!Xi.outlineBase)||Ze,Ze=Xe(je,Ue.plugOutline_colorSE,Je,oi=Re.plugOutlineColorSE[Je]||Ue.lineOutline_color)||Ze,Ze=Xe(je,Ue.plugOutline_colorTraSE,Je,Qr(oi)[0]<1)||Ze,Xi&&Xi.outlineBase&&((oi=Re.plugOutlineSizeSE[Je])>Xi.outlineMax&&(oi=Xi.outlineMax),oi*=2*Xi.outlineBase,Ze=Xe(je,Ue.plugOutline_strokeWidthSE,Je,oi)||Ze,Ze=Xe(je,Ue.plugOutline_inStrokeWidthSE,Je,Ue.plugOutline_colorTraSE[Je]?oi-Te/(Ue.line_strokeWidth/Be.lineSize)/Re.plugSizeSE[Je]*2:oi/2)||Ze)}),Ze)),(L.faces||si.line||si.plug||si.lineOutline||si.plugOutline)&&(si.faces=(Ke=(Ve=C).curStats,Ft=Ve.aplStats,Yt=Ve.events,Ot=!1,!Ke.line_altColor&&Xe(Ve,Ft,"line_color",Ge=Ke.line_color,Yt.apl_line_color)&&(Ve.lineFace.style.stroke=Ge,Ot=!0),Xe(Ve,Ft,"line_strokeWidth",Ge=Ke.line_strokeWidth,Yt.apl_line_strokeWidth)&&(Ve.lineShape.style.strokeWidth=Ge+"px",Ot=!0,(ft||ze)&&(ui(Ve,Ve.lineShape),ze&&(ui(Ve,Ve.lineFace),ui(Ve,Ve.lineMaskCaps)))),Xe(Ve,Ft,"lineOutline_enabled",Ge=Ke.lineOutline_enabled,Yt.apl_lineOutline_enabled)&&(Ve.lineOutlineFace.style.display=Ge?"inline":"none",Ot=!0),Ke.lineOutline_enabled&&(Xe(Ve,Ft,"lineOutline_color",Ge=Ke.lineOutline_color,Yt.apl_lineOutline_color)&&(Ve.lineOutlineFace.style.stroke=Ge,Ot=!0),Xe(Ve,Ft,"lineOutline_strokeWidth",Ge=Ke.lineOutline_strokeWidth,Yt.apl_lineOutline_strokeWidth)&&(Ve.lineOutlineMaskShape.style.strokeWidth=Ge+"px",Ot=!0,ze&&(ui(Ve,Ve.lineOutlineMaskCaps),ui(Ve,Ve.lineOutlineFace))),Xe(Ve,Ft,"lineOutline_inStrokeWidth",Ge=Ke.lineOutline_inStrokeWidth,Yt.apl_lineOutline_inStrokeWidth)&&(Ve.lineMaskShape.style.strokeWidth=Ge+"px",Ot=!0,ze&&(ui(Ve,Ve.lineOutlineMaskCaps),ui(Ve,Ve.lineOutlineFace)))),Xe(Ve,Ft,"plug_enabled",Ge=Ke.plug_enabled,Yt.apl_plug_enabled)&&(Ve.plugsFace.style.display=Ge?"inline":"none",Ot=!0),Ke.plug_enabled&&[0,1].forEach(function(Je){var oi=Ke.plug_plugSE[Je],Xi=oi!==Z?J[fe[oi]]:null,sa=$i(Je,Xi);Xe(Ve,Ft.plug_enabledSE,Je,Ge=Ke.plug_enabledSE[Je],Yt.apl_plug_enabledSE)&&(Ve.plugsFace.style[sa.prop]=Ge?"url(#"+Ve.plugMarkerIdSE[Je]+")":"none",Ot=!0),Ke.plug_enabledSE[Je]&&(Xe(Ve,Ft.plug_plugSE,Je,oi,Yt.apl_plug_plugSE)&&(Ve.plugFaceSE[Je].href.baseVal="#"+Xi.elmId,er(Ve,Ve.plugMarkerSE[Je],sa.orient,Xi.bBox,Ve.svg,Ve.plugMarkerShapeSE[Je],Ve.plugsFace),Ot=!0,ft&&ui(Ve,Ve.plugsFace)),Xe(Ve,Ft.plug_colorSE,Je,Ge=Ke.plug_colorSE[Je],Yt.apl_plug_colorSE)&&(Ve.plugFaceSE[Je].style.fill=Ge,Ot=!0,(te||Pe||ze)&&!Ke.line_colorTra&&ui(Ve,ze?Ve.lineMaskCaps:Ve.capsMaskLine)),["markerWidth","markerHeight"].forEach(function(Sr){var ls="plug_"+Sr+"SE";Xe(Ve,Ft[ls],Je,Ge=Ke[ls][Je],Yt["apl_"+ls])&&(Ve.plugMarkerSE[Je][Sr].baseVal.value=Ge,Ot=!0)}),Xe(Ve,Ft.plugOutline_enabledSE,Je,Ge=Ke.plugOutline_enabledSE[Je],Yt.apl_plugOutline_enabledSE)&&(Ge?(Ve.plugFaceSE[Je].style.mask="url(#"+Ve.plugMaskIdSE[Je]+")",Ve.plugOutlineFaceSE[Je].style.display="inline"):(Ve.plugFaceSE[Je].style.mask="none",Ve.plugOutlineFaceSE[Je].style.display="none"),Ot=!0),Ke.plugOutline_enabledSE[Je]&&(Xe(Ve,Ft.plugOutline_plugSE,Je,oi,Yt.apl_plugOutline_plugSE)&&(Ve.plugOutlineFaceSE[Je].href.baseVal=Ve.plugMaskShapeSE[Je].href.baseVal=Ve.plugOutlineMaskShapeSE[Je].href.baseVal="#"+Xi.elmId,[Ve.plugMaskSE[Je],Ve.plugOutlineMaskSE[Je]].forEach(function(Sr){Sr.x.baseVal.value=Xi.bBox.left,Sr.y.baseVal.value=Xi.bBox.top,Sr.width.baseVal.value=Xi.bBox.width,Sr.height.baseVal.value=Xi.bBox.height}),Ot=!0),Xe(Ve,Ft.plugOutline_colorSE,Je,Ge=Ke.plugOutline_colorSE[Je],Yt.apl_plugOutline_colorSE)&&(Ve.plugOutlineFaceSE[Je].style.fill=Ge,Ot=!0,ze&&(ui(Ve,Ve.lineMaskCaps),ui(Ve,Ve.lineOutlineMaskCaps))),Xe(Ve,Ft.plugOutline_strokeWidthSE,Je,Ge=Ke.plugOutline_strokeWidthSE[Je],Yt.apl_plugOutline_strokeWidthSE)&&(Ve.plugOutlineMaskShapeSE[Je].style.strokeWidth=Ge+"px",Ot=!0),Xe(Ve,Ft.plugOutline_inStrokeWidthSE,Je,Ge=Ke.plugOutline_inStrokeWidthSE[Je],Yt.apl_plugOutline_inStrokeWidthSE)&&(Ve.plugMaskShapeSE[Je].style.strokeWidth=Ge+"px",Ot=!0)))}),Ot)),(L.position||si.line||si.plug)&&(si.position=wi(C)),(L.path||si.position)&&(si.path=(st=(ut=C).curStats,Qe=ut.aplStats,Dt=ut.pathList.animVal||ut.pathList.baseVal,we=st.path_edge,Ut=!1,Dt&&(we.x1=we.x2=Dt[0][0].x,we.y1=we.y2=Dt[0][0].y,st.path_pathData=Lt=et(Dt,function(Je){Je.x<we.x1&&(we.x1=Je.x),Je.y<we.y1&&(we.y1=Je.y),Je.x>we.x2&&(we.x2=Je.x),Je.y>we.y2&&(we.y2=Je.y)}),ci(Lt,Qe.path_pathData)&&(ut.linePath.setPathData(Lt),Qe.path_pathData=Lt,Ut=!0,ze?(ui(ut,ut.plugsFace),ui(ut,ut.lineMaskCaps)):ft&&ui(ut,ut.linePath),ut.events.apl_path&&ut.events.apl_path.forEach(function(Je){Je(ut,Lt)}))),Ut)),si.viewBox=(Dt=(rt=C).curStats,Qe=rt.aplStats,Ut=Dt.path_edge,Wt=Dt.viewBox_bBox,Gi=Qe.viewBox_bBox,sr=rt.svg.viewBox.baseVal,Ti=rt.svg.style,rr=!1,Qe=Math.max(Dt.line_strokeWidth/2,Dt.viewBox_plugBCircleSE[0]||0,Dt.viewBox_plugBCircleSE[1]||0),Pi={x1:Ut.x1-Qe,y1:Ut.y1-Qe,x2:Ut.x2+Qe,y2:Ut.y2+Qe},rt.events.new_edge4viewBox&&rt.events.new_edge4viewBox.forEach(function(Je){Je(rt,Pi)}),Wt.x=Dt.lineMask_x=Dt.lineOutlineMask_x=Dt.maskBGRect_x=Pi.x1,Wt.y=Dt.lineMask_y=Dt.lineOutlineMask_y=Dt.maskBGRect_y=Pi.y1,Wt.width=Pi.x2-Pi.x1,Wt.height=Pi.y2-Pi.y1,["x","y","width","height"].forEach(function(Je){var oi;(oi=Wt[Je])!==Gi[Je]&&(sr[Je]=Gi[Je]=oi,Ti[me[Je]]=oi+(Je==="x"||Je==="y"?rt.bodyOffset[Je]:0)+"px",rr=!0)}),rr),si.mask=(At=(gi=C).curStats,_e=gi.aplStats,$e=!1,At.plug_enabled?[0,1].forEach(function(Je){At.capsMaskMarker_enabledSE[Je]=At.plug_enabledSE[Je]&&At.plug_colorTraSE[Je]||At.plugOutline_enabledSE[Je]&&At.plugOutline_colorTraSE[Je]}):At.capsMaskMarker_enabledSE[0]=At.capsMaskMarker_enabledSE[1]=!1,At.capsMaskMarker_enabled=At.capsMaskMarker_enabledSE[0]||At.capsMaskMarker_enabledSE[1],At.lineMask_outlineMode=At.lineOutline_enabled,At.caps_enabled=At.capsMaskMarker_enabled||At.capsMaskAnchor_enabledSE[0]||At.capsMaskAnchor_enabledSE[1],At.lineMask_enabled=At.caps_enabled||At.lineMask_outlineMode,(At.lineMask_enabled&&!At.lineMask_outlineMode||At.lineOutline_enabled)&&["x","y"].forEach(function(Je){var oi="maskBGRect_"+Je;Xe(gi,_e,oi,ii=At[oi])&&(gi.maskBGRect[Je].baseVal.value=ii,$e=!0)}),Xe(gi,_e,"lineMask_enabled",ii=At.lineMask_enabled)&&(gi.lineFace.style.mask=ii?"url(#"+gi.lineMaskId+")":"none",$e=!0,Pe&&ui(gi,gi.lineMask)),At.lineMask_enabled&&(Xe(gi,_e,"lineMask_outlineMode",ii=At.lineMask_outlineMode)&&(ii?(gi.lineMaskBG.style.display="none",gi.lineMaskShape.style.display="inline"):(gi.lineMaskBG.style.display="inline",gi.lineMaskShape.style.display="none"),$e=!0),["x","y"].forEach(function(Je){var oi="lineMask_"+Je;Xe(gi,_e,oi,ii=At[oi])&&(gi.lineMask[Je].baseVal.value=ii,$e=!0)}),Xe(gi,_e,"caps_enabled",ii=At.caps_enabled)&&(gi.lineMaskCaps.style.display=gi.lineOutlineMaskCaps.style.display=ii?"inline":"none",$e=!0,Pe&&ui(gi,gi.capsMaskLine)),At.caps_enabled&&([0,1].forEach(function(Je){var oi;Xe(gi,_e.capsMaskAnchor_enabledSE,Je,ii=At.capsMaskAnchor_enabledSE[Je])&&(gi.capsMaskAnchorSE[Je].style.display=ii?"inline":"none",$e=!0,Pe&&ui(gi,gi.lineMask)),At.capsMaskAnchor_enabledSE[Je]&&(ci(oi=At.capsMaskAnchor_pathDataSE[Je],_e.capsMaskAnchor_pathDataSE[Je])&&(gi.capsMaskAnchorSE[Je].setPathData(oi),_e.capsMaskAnchor_pathDataSE[Je]=oi,$e=!0),Xe(gi,_e.capsMaskAnchor_strokeWidthSE,Je,ii=At.capsMaskAnchor_strokeWidthSE[Je])&&(gi.capsMaskAnchorSE[Je].style.strokeWidth=ii+"px",$e=!0))}),Xe(gi,_e,"capsMaskMarker_enabled",ii=At.capsMaskMarker_enabled)&&(gi.capsMaskLine.style.display=ii?"inline":"none",$e=!0),At.capsMaskMarker_enabled&&[0,1].forEach(function(Je){var oi=At.capsMaskMarker_plugSE[Je],Xi=oi!==Z?J[fe[oi]]:null,sa=$i(Je,Xi);Xe(gi,_e.capsMaskMarker_enabledSE,Je,ii=At.capsMaskMarker_enabledSE[Je])&&(gi.capsMaskLine.style[sa.prop]=ii?"url(#"+gi.lineMaskMarkerIdSE[Je]+")":"none",$e=!0),At.capsMaskMarker_enabledSE[Je]&&(Xe(gi,_e.capsMaskMarker_plugSE,Je,oi)&&(gi.capsMaskMarkerShapeSE[Je].href.baseVal="#"+Xi.elmId,er(gi,gi.capsMaskMarkerSE[Je],sa.orient,Xi.bBox,gi.svg,gi.capsMaskMarkerShapeSE[Je],gi.capsMaskLine),$e=!0,ft&&(ui(gi,gi.capsMaskLine),ui(gi,gi.lineFace))),["markerWidth","markerHeight"].forEach(function(Sr){var ls="capsMaskMarker_"+Sr+"SE";Xe(gi,_e[ls],Je,ii=At[ls][Je])&&(gi.capsMaskMarkerSE[Je][Sr].baseVal.value=ii,$e=!0)}))}))),At.lineOutline_enabled&&["x","y"].forEach(function(Je){var oi="lineOutlineMask_"+Je;Xe(gi,_e,oi,ii=At[oi])&&(gi.lineOutlineMask[Je].baseVal.value=ii,$e=!0)}),$e),L.effect&&(ai=(Ct=C).curStats,qt=Ct.aplStats,Object.keys(a).forEach(function(Sr){var oi=a[Sr],Xi=Sr+"_enabled",sa=Sr+"_options",Sr=ai[sa];Xe(Ct,qt,Xi,Nt=ai[Xi])?(Nt&&(qt[sa]=ar(Sr)),oi[Nt?"init":"remove"](Ct)):Nt&&nr(Sr,qt[sa])&&(oi.remove(Ct),qt[Xi]=!0,qt[sa]=ar(Sr),oi.init(Ct))})),(te||Pe)&&si.line&&!si.path&&ui(C,C.lineShape),te&&si.plug&&!si.line&&ui(C,C.plugsFace),Hi(C)}function xa(C,L){return{duration:(jt(C.duration)&&0<C.duration?C:L).duration,timing:kt.validTiming(C.timing)?C.timing:ar(L.timing)}}function Hn(C,L,j,H){var ue=C.curStats,ae=C.aplStats,Ie={};function Fe(){["show_on","show_effect","show_animOptions"].forEach(function(qe){ae[qe]=ue[qe]})}ue.show_on=L,j&&n[j]&&(ue.show_effect=j,ue.show_animOptions=xa(Le(H)?H:{},n[j].defaultAnimOptions)),Ie.show_on=ue.show_on!==ae.show_on,Ie.show_effect=ue.show_effect!==ae.show_effect,Ie.show_animOptions=nr(ue.show_animOptions,ae.show_animOptions),Ie.show_effect||Ie.show_animOptions?ue.show_inAnim?(j=Ie.show_effect?n[ae.show_effect].stop(C,!0,!0):n[ae.show_effect].stop(C),Fe(),n[ae.show_effect].init(C,j)):Ie.show_on&&(ae.show_effect&&Ie.show_effect&&n[ae.show_effect].stop(C,!0,!0),Fe(),n[ae.show_effect].init(C)):Ie.show_on&&(Fe(),n[ae.show_effect].start(C))}function os(C,L,j){return j={props:C,optionName:j},C.attachments.indexOf(L)<0&&(!L.conf.bind||L.conf.bind(L,j))&&(C.attachments.push(L),L.boundTargets.push(j),1)}function mn(C,L,j){var H=C.attachments.indexOf(L);-1<H&&C.attachments.splice(H,1),L.boundTargets.some(function(ue,ae){return ue.props===C&&(L.conf.unbind&&L.conf.unbind(L,ue),H=ae,!0)})&&(L.boundTargets.splice(H,1),j||Si(function(){L.boundTargets.length||u(L)}))}function Q(C,L){var j,H,ue,ae,Ie,Fe,qe,_t,tt,dt,je,Re,Ue,Ze,Ve,Ge=C.options,Ke={};function Ft(we,rt,Dt,Qe,Ut){var Wt={};return Dt?Qe!=null?(Wt.container=we[Dt],Wt.key=Qe):(Wt.container=we,Wt.key=Dt):(Wt.container=we,Wt.key=rt),Wt.default=Ut,Wt.acceptsAuto=Wt.default==null,Wt}function Yt(we,rt,Dt,Qe,Ut,Wt,Pi){var sr,Ti,rr,Pi=Ft(we,Dt,Ut,Wt,Pi);return rt[Dt]!=null&&(Ti=(rt[Dt]+"").toLowerCase())&&(Pi.acceptsAuto&&Ti===ge||(rr=Qe[Ti]))&&rr!==Pi.container[Pi.key]&&(Pi.container[Pi.key]=rr,sr=!0),Pi.container[Pi.key]!=null||Pi.acceptsAuto||(Pi.container[Pi.key]=Pi.default,sr=!0),sr}function Ot(we,rt,Dt,Qe,Ut,Wt,At,sr,Ti){var rr,Pi,gi,ii,At=Ft(we,Dt,Ut,Wt,At);if(!Qe){if(At.default==null)throw new Error("Invalid `type`: "+Dt);Qe=typeof At.default}return rt[Dt]!=null&&(At.acceptsAuto&&(rt[Dt]+"").toLowerCase()===ge||(gi=Pi=rt[Dt],((ii=Qe)==="number"?jt(gi):typeof gi===ii)&&(Pi=Ti&&Qe==="string"&&Pi?Pi.trim():Pi,1)&&(!sr||sr(Pi))))&&Pi!==At.container[At.key]&&(At.container[At.key]=Pi,rr=!0),At.container[At.key]!=null||At.acceptsAuto||(At.container[At.key]=At.default,rr=!0),rr}if(L=L||{},["start","end"].forEach(function(we,rt){var Dt=L[we],Qe=!1;if(Dt&&(Rt(Dt)||(Qe=l(Dt,"anchor")))&&Dt!==Ge.anchorSE[rt]){if(C.optionIsAttach.anchorSE[rt]!==!1&&mn(C,nt[Ge.anchorSE[rt]._id]),Qe&&!os(C,nt[Dt._id],we))throw new Error("Can't bind attachment");Ge.anchorSE[rt]=Dt,C.optionIsAttach.anchorSE[rt]=Qe,j=Ke.position=!0}}),!Ge.anchorSE[0]||!Ge.anchorSE[1]||Ge.anchorSE[0]===Ge.anchorSE[1])throw new Error("`start` and `end` are required.");function ut(we){var rt=Ie.appendChild(Ze.createElementNS(K,"mask"));return rt.id=we,rt.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[rt.x,rt.y,rt.width,rt.height].forEach(function(Dt){Dt.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),rt}function Lt(we){var rt=Ie.appendChild(Ze.createElementNS(K,"marker"));return rt.id=we,rt.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,rt.viewBox.baseVal||rt.setAttribute("viewBox","0 0 0 0"),rt}function st(we){return[we.width,we.height].forEach(function(rt){rt.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)}),we}j&&(je=function(we,rt){var Dt,Qe;if(!(we=or(we))||!(Dt=or(rt)))throw new Error("Cannot get frames.");return we.length&&Dt.length&&(we.reverse(),Dt.reverse(),we.some(function(Ut){return Dt.some(function(Wt){return Wt===Ut&&(Qe=Wt.contentWindow,!0)})})),Qe||window}(C.optionIsAttach.anchorSE[0]!==!1?nt[Ge.anchorSE[0]._id].element:Ge.anchorSE[0],C.optionIsAttach.anchorSE[1]!==!1?nt[Ge.anchorSE[1]._id].element:Ge.anchorSE[1]))!==C.baseWindow&&(ue=je,Ue=(H=C).aplStats,Ze=ue.document,Ve=k+"-"+H._id,H.pathList={},Ki(Ue,ct),Object.keys(a).forEach(function(we){var rt=we+"_enabled";Ue[rt]&&(a[we].remove(H),Ue[rt]=!1)}),H.baseWindow&&H.svg&&H.baseWindow.document.body.removeChild(H.svg),Oi(H.baseWindow=ue),H.bodyOffset=ni(ue),H.svg=ae=Ze.createElementNS(K,"svg"),ae.className.baseVal=k,ae.viewBox.baseVal||ae.setAttribute("viewBox","0 0 0 0"),H.defs=Ie=ae.appendChild(Ze.createElementNS(K,"defs")),H.linePath=qe=Ie.appendChild(Ze.createElementNS(K,"path")),qe.id=_t=Ve+"-line-path",qe.className.baseVal=k+"-line-path",Pe&&(qe.style.fill="none"),H.lineShape=qe=Ie.appendChild(Ze.createElementNS(K,"use")),qe.id=tt=Ve+"-line-shape",qe.href.baseVal="#"+_t,(Fe=Ie.appendChild(Ze.createElementNS(K,"g"))).id=dt=Ve+"-caps",H.capsMaskAnchorSE=[0,1].map(function(){var we=Fe.appendChild(Ze.createElementNS(K,"path"));return we.className.baseVal=k+"-caps-mask-anchor",we}),H.lineMaskMarkerIdSE=[Ve+"-caps-mask-marker-0",Ve+"-caps-mask-marker-1"],H.capsMaskMarkerSE=[0,1].map(function(we){return Lt(H.lineMaskMarkerIdSE[we])}),H.capsMaskMarkerShapeSE=[0,1].map(function(we){return we=H.capsMaskMarkerSE[we].appendChild(Ze.createElementNS(K,"use")),we.className.baseVal=k+"-caps-mask-marker-shape",we}),H.capsMaskLine=qe=Fe.appendChild(Ze.createElementNS(K,"use")),qe.className.baseVal=k+"-caps-mask-line",qe.href.baseVal="#"+tt,H.maskBGRect=qe=st(Ie.appendChild(Ze.createElementNS(K,"rect"))),qe.id=je=Ve+"-mask-bg-rect",qe.className.baseVal=k+"-mask-bg-rect",Pe&&(qe.style.fill="white"),H.lineMask=st(ut(H.lineMaskId=Ve+"-line-mask")),H.lineMaskBG=qe=H.lineMask.appendChild(Ze.createElementNS(K,"use")),qe.href.baseVal="#"+je,H.lineMaskShape=qe=H.lineMask.appendChild(Ze.createElementNS(K,"use")),qe.className.baseVal=k+"-line-mask-shape",qe.href.baseVal="#"+_t,qe.style.display="none",H.lineMaskCaps=qe=H.lineMask.appendChild(Ze.createElementNS(K,"use")),qe.href.baseVal="#"+dt,H.lineOutlineMask=st(ut(ue=Ve+"-line-outline-mask")),(qe=H.lineOutlineMask.appendChild(Ze.createElementNS(K,"use"))).href.baseVal="#"+je,H.lineOutlineMaskShape=qe=H.lineOutlineMask.appendChild(Ze.createElementNS(K,"use")),qe.className.baseVal=k+"-line-outline-mask-shape",qe.href.baseVal="#"+_t,H.lineOutlineMaskCaps=qe=H.lineOutlineMask.appendChild(Ze.createElementNS(K,"use")),qe.href.baseVal="#"+dt,H.face=ae.appendChild(Ze.createElementNS(K,"g")),H.lineFace=qe=H.face.appendChild(Ze.createElementNS(K,"use")),qe.href.baseVal="#"+tt,H.lineOutlineFace=qe=H.face.appendChild(Ze.createElementNS(K,"use")),qe.href.baseVal="#"+tt,qe.style.mask="url(#"+ue+")",qe.style.display="none",H.plugMaskIdSE=[Ve+"-plug-mask-0",Ve+"-plug-mask-1"],H.plugMaskSE=[0,1].map(function(we){return ut(H.plugMaskIdSE[we])}),H.plugMaskShapeSE=[0,1].map(function(we){return we=H.plugMaskSE[we].appendChild(Ze.createElementNS(K,"use")),we.className.baseVal=k+"-plug-mask-shape",we}),Re=[],H.plugOutlineMaskSE=[0,1].map(function(we){return ut(Re[we]=Ve+"-plug-outline-mask-"+we)}),H.plugOutlineMaskShapeSE=[0,1].map(function(we){return we=H.plugOutlineMaskSE[we].appendChild(Ze.createElementNS(K,"use")),we.className.baseVal=k+"-plug-outline-mask-shape",we}),H.plugMarkerIdSE=[Ve+"-plug-marker-0",Ve+"-plug-marker-1"],H.plugMarkerSE=[0,1].map(function(we){return we=Lt(H.plugMarkerIdSE[we]),Pe&&(we.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),we}),H.plugMarkerShapeSE=[0,1].map(function(we){return H.plugMarkerSE[we].appendChild(Ze.createElementNS(K,"g"))}),H.plugFaceSE=[0,1].map(function(we){return H.plugMarkerShapeSE[we].appendChild(Ze.createElementNS(K,"use"))}),H.plugOutlineFaceSE=[0,1].map(function(we){var rt=H.plugMarkerShapeSE[we].appendChild(Ze.createElementNS(K,"use"));return rt.style.mask="url(#"+Re[we]+")",rt.style.display="none",rt}),H.plugsFace=qe=H.face.appendChild(Ze.createElementNS(K,"use")),qe.className.baseVal=k+"-plugs-face",qe.href.baseVal="#"+tt,qe.style.display="none",H.curStats.show_inAnim?(H.isShown=1,n[Ue.show_effect].stop(H,!0)):H.isShown||(ae.style.visibility="hidden"),Ze.body.appendChild(ae),[0,1,2].forEach(function(Dt){var rt,Dt=H.options.labelSEM[Dt];Dt&&l(Dt,"label")&&(rt=nt[Dt._id]).conf.initSvg&&rt.conf.initSvg(rt,H)}),Ke.line=Ke.plug=Ke.lineOutline=Ke.plugOutline=Ke.faces=Ke.effect=!0),Ke.position=Yt(Ge,L,"path",q,null,null,Be.path)||Ke.position,Ke.position=Yt(Ge,L,"startSocket",U,"socketSE",0)||Ke.position,Ke.position=Yt(Ge,L,"endSocket",U,"socketSE",1)||Ke.position,[L.startSocketGravity,L.endSocketGravity].forEach(function(we,rt){var Dt,Qe,Ut=!1;we!=null&&(Array.isArray(we)?jt(we[0])&&jt(we[1])&&(Ut=[we[0],we[1]],Array.isArray(Ge.socketGravitySE[rt])&&(Dt=Ut,Qe=Ge.socketGravitySE[rt],Dt.length===Qe.length&&Dt.every(function(Wt,Gi){return Wt===Qe[Gi]}))&&(Ut=!1)):((we+"").toLowerCase()===ge?Ut=null:jt(we)&&0<=we&&(Ut=we),Ut===Ge.socketGravitySE[rt]&&(Ut=!1)),Ut!==!1&&(Ge.socketGravitySE[rt]=Ut,Ke.position=!0))}),Ke.line=Ot(Ge,L,"color",null,"lineColor",null,Be.lineColor,null,!0)||Ke.line,Ke.line=Ot(Ge,L,"size",null,"lineSize",null,Be.lineSize,function(we){return 0<we})||Ke.line,["startPlug","endPlug"].forEach(function(we,rt){Ke.plug=Yt(Ge,L,we,pe,"plugSE",rt,Be.plugSE[rt])||Ke.plug,Ke.plug=Ot(Ge,L,we+"Color","string","plugColorSE",rt,null,null,!0)||Ke.plug,Ke.plug=Ot(Ge,L,we+"Size",null,"plugSizeSE",rt,Be.plugSizeSE[rt],function(Dt){return 0<Dt})||Ke.plug}),Ke.lineOutline=Ot(Ge,L,"outline",null,"lineOutlineEnabled",null,Be.lineOutlineEnabled)||Ke.lineOutline,Ke.lineOutline=Ot(Ge,L,"outlineColor",null,"lineOutlineColor",null,Be.lineOutlineColor,null,!0)||Ke.lineOutline,Ke.lineOutline=Ot(Ge,L,"outlineSize",null,"lineOutlineSize",null,Be.lineOutlineSize,function(we){return 0<we&&we<=.48})||Ke.lineOutline,Ke.lineId=Ot(Ge,L,"lineId",null,"lineId",null,Be.lineId,null,!0)||Ke.lineId,["startPlugOutline","endPlugOutline"].forEach(function(we,rt){Ke.plugOutline=Ot(Ge,L,we,null,"plugOutlineEnabledSE",rt,Be.plugOutlineEnabledSE[rt])||Ke.plugOutline,Ke.plugOutline=Ot(Ge,L,we+"Color","string","plugOutlineColorSE",rt,null,null,!0)||Ke.plugOutline,Ke.plugOutline=Ot(Ge,L,we+"Size",null,"plugOutlineSizeSE",rt,Be.plugOutlineSizeSE[rt],function(Dt){return 1<=Dt})||Ke.plugOutline}),["startLabel","endLabel","middleLabel"].forEach(function(we,rt){var Dt,Qe,Ut,Wt=L[we],Gi=Ge.labelSEM[rt]&&!C.optionIsAttach.labelSEM[rt]?nt[Ge.labelSEM[rt]._id].text:Ge.labelSEM[rt],sr=!1;if((Dt=typeof Wt=="string")&&(Wt=Wt.trim()),(Dt||Wt&&(sr=l(Wt,"label")))&&Wt!==Gi){if(Ge.labelSEM[rt]&&(mn(C,nt[Ge.labelSEM[rt]._id]),Ge.labelSEM[rt]=""),Wt){if(sr?(Qe=nt[(Ut=Wt)._id]).boundTargets.slice().forEach(function(Ti){Qe.conf.removeOption(Qe,Ti)}):Ut=new o(s.captionLabel,[Wt]),!os(C,nt[Ut._id],we))throw new Error("Can't bind attachment");Ge.labelSEM[rt]=Ut}C.optionIsAttach.labelSEM[rt]=sr}}),Object.keys(a).forEach(function(we){var rt,Dt,Qe=a[we],Ut=we+"_enabled",Wt=we+"_options";function Gi(Ti){var rr={};return Qe.optionsConf.forEach(function(Pi){var gi=Pi[0],ii=Pi[3];Pi[4]==null||rr[ii]||(rr[ii]=[]),(typeof gi=="function"?gi:gi==="id"?Yt:Ot).apply(null,[rr,Ti].concat(Pi.slice(1)))}),rr}function sr(Ti){var rr,Pi=we+"_animOptions";return Ti.hasOwnProperty("animation")?Le(Ti.animation)?rr=C.curStats[Pi]=xa(Ti.animation,Qe.defaultAnimOptions):(rr=!!Ti.animation,C.curStats[Pi]=rr?xa({},Qe.defaultAnimOptions):null):(rr=!!Qe.defaultEnabled,C.curStats[Pi]=rr?xa({},Qe.defaultAnimOptions):null),rr}L.hasOwnProperty(we)&&(rt=L[we],Le(rt)?(C.curStats[Ut]=!0,Dt=C.curStats[Wt]=Gi(rt),Qe.anim&&(C.curStats[Wt].animation=sr(rt))):(Dt=C.curStats[Ut]=!!rt)&&(C.curStats[Wt]=Gi({}),Qe.anim&&(C.curStats[Wt].animation=sr({}))),nr(Dt,Ge[we])&&(Ge[we]=Dt,Ke.effect=!0))}),yi(C,Ke)}function re(C,L,j){var H={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};Ki(H.curStats,ct),Ki(H.aplStats,ct),Object.keys(a).forEach(function(ue){var ae=a[ue].stats;Ki(H.curStats,ae),Ki(H.aplStats,ae),H.options[ue]=!1}),Ki(H.curStats,mt),Ki(H.aplStats,mt),H.curStats.show_effect=Et,H.curStats.show_animOptions=ar(n[Et].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++Ee}),H._id=this._id,Ht[this._id]=H,arguments.length===1&&(j=C,C=null),j=j||{},(C||L)&&(j=ar(j),C&&(j.start=C),L&&(j.end=L)),H.isShown=H.aplStats.show_on=!j.hide,this.setOptions(j)}function Ae(C){return function(L){var j={};j[C]=L,this.setOptions(j)}}function oe(C,L){var j,H={conf:C,curStats:{},aplStats:{},boundTargets:[]},ue={};C.argOptions.every(function(ae){return!(!L.length||(typeof ae.type=="string"?typeof L[0]!==ae.type:typeof ae.type!="function"||!ae.type(L[0])))&&(ue[ae.optionName]=L.shift(),!0)}),j=L.length&&Le(L[0])?ar(L[0]):{},Object.keys(ue).forEach(function(ae){j[ae]=ue[ae]}),C.stats&&(Ki(H.curStats,C.stats),Ki(H.aplStats,C.stats)),Object.defineProperty(this,"_id",{value:++St}),Object.defineProperty(this,"isRemoved",{get:function(){return!nt[this._id]}}),H._id=this._id,C.init&&!C.init(H,j)||(nt[this._id]=H)}return a={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(C){return 0<C}],["type","gap","number",null,null,null,function(C){return 0<C}]],init:function(C){mi(C,"apl_line_strokeWidth",a.dash.update),C.lineFace.style.strokeDashoffset=0,a.dash.update(C)},remove:function(C){var L=C.curStats;vi(C,"apl_line_strokeWidth",a.dash.update),L.dash_animId&&(kt.remove(L.dash_animId),L.dash_animId=null),C.lineFace.style.strokeDasharray="none",C.lineFace.style.strokeDashoffset=0,Ki(C.aplStats,a.dash.stats)},update:function(C){var L,j=C.curStats,H=C.aplStats,ue=H.dash_options,ae=!1;j.dash_len=ue.len||2*H.line_strokeWidth,j.dash_gap=ue.gap||H.line_strokeWidth,j.dash_maxOffset=j.dash_len+j.dash_gap,ae=Xe(C,H,"dash_len",j.dash_len)||ae,(ae=Xe(C,H,"dash_gap",j.dash_gap)||ae)&&(C.lineFace.style.strokeDasharray=H.dash_len+","+H.dash_gap),j.dash_animOptions?(ae=Xe(C,H,"dash_maxOffset",j.dash_maxOffset),H.dash_animOptions&&(ae||nr(j.dash_animOptions,H.dash_animOptions))&&(j.dash_animId&&(L=kt.stop(j.dash_animId),kt.remove(j.dash_animId)),H.dash_animOptions=null),H.dash_animOptions||(j.dash_animId=kt.add(function(Ie){return(1-Ie)*H.dash_maxOffset+"px"},function(Ie){C.lineFace.style.strokeDashoffset=Ie},j.dash_animOptions.duration,0,j.dash_animOptions.timing,!1,L),H.dash_animOptions=ar(j.dash_animOptions))):H.dash_animOptions&&(j.dash_animId&&(kt.remove(j.dash_animId),j.dash_animId=null),C.lineFace.style.strokeDashoffset=0,H.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(C){var L=C.baseWindow.document,j=C.defs,H=k+"-"+C._id+"-gradient";C.efc_gradient_gradient=j=j.appendChild(L.createElementNS(K,"linearGradient")),j.id=H,j.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[j.x1,j.y1,j.x2,j.y2].forEach(function(ue){ue.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),C.efc_gradient_stopSE=[0,1].map(function(ue){var ae=C.efc_gradient_gradient.appendChild(L.createElementNS(K,"stop"));try{ae.offset.baseVal=ue}catch(Ie){if(Ie.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw Ie;ae.setAttribute("offset",ue)}return ae}),mi(C,"cur_plug_colorSE",a.gradient.update),mi(C,"apl_path",a.gradient.update),C.curStats.line_altColor=!0,C.lineFace.style.stroke="url(#"+H+")",a.gradient.update(C)},remove:function(C){C.efc_gradient_gradient&&(C.defs.removeChild(C.efc_gradient_gradient),C.efc_gradient_gradient=C.efc_gradient_stopSE=null),vi(C,"cur_plug_colorSE",a.gradient.update),vi(C,"apl_path",a.gradient.update),C.curStats.line_altColor=!1,C.lineFace.style.stroke=C.curStats.line_color,Ki(C.aplStats,a.gradient.stats)},update:function(C){var L,j=C.curStats,H=C.aplStats,ue=H.gradient_options,ae=C.pathList.animVal||C.pathList.baseVal;[0,1].forEach(function(Ie){j.gradient_colorSE[Ie]=ue.colorSE[Ie]||j.plug_colorSE[Ie]}),L=ae[0][0],j.gradient_pointSE[0]={x:L.x,y:L.y},L=(ae=ae[ae.length-1])[ae.length-1],j.gradient_pointSE[1]={x:L.x,y:L.y},[0,1].forEach(function(Ie){var Fe;Xe(C,H.gradient_colorSE,Ie,Fe=j.gradient_colorSE[Ie])&&(Pe?(Fe=Qr(Fe),C.efc_gradient_stopSE[Ie].style.stopColor=Fe[1],C.efc_gradient_stopSE[Ie].style.stopOpacity=Fe[0]):C.efc_gradient_stopSE[Ie].style.stopColor=Fe),["x","y"].forEach(function(qe){(Fe=j.gradient_pointSE[Ie][qe])!==H.gradient_pointSE[Ie][qe]&&(C.efc_gradient_gradient[qe+(Ie+1)].baseVal.value=H.gradient_pointSE[Ie][qe]=Fe)})})}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(C){return 0<=C}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(C){return 0<=C&&C<=1}]],init:function(C){var L,j,H,ue,ae=C.baseWindow.document,Ie=C.defs,Fe=k+"-"+C._id+"-dropShadow",qe=(L=ae,j=Fe,ue={},typeof p!="boolean"&&(p=!!window.SVGFEDropShadowElement&&!Pe),ue.elmsAppend=[ue.elmFilter=ae=L.createElementNS(K,"filter")],ae.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,ae.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),ae.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),ae.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),ae.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),ae.id=j,p?(ue.elmOffset=ue.elmBlur=H=ae.appendChild(L.createElementNS(K,"feDropShadow")),ue.styleFlood=H.style):(ue.elmBlur=ae.appendChild(L.createElementNS(K,"feGaussianBlur")),ue.elmOffset=H=ae.appendChild(L.createElementNS(K,"feOffset")),H.result.baseVal="offsetblur",H=ae.appendChild(L.createElementNS(K,"feFlood")),ue.styleFlood=H.style,(H=ae.appendChild(L.createElementNS(K,"feComposite"))).in2.baseVal="offsetblur",H.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(H=ae.appendChild(L.createElementNS(K,"feMerge"))).appendChild(L.createElementNS(K,"feMergeNode")),H.appendChild(L.createElementNS(K,"feMergeNode")).in1.baseVal="SourceGraphic"),ue);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach(function(_t){C["efc_dropShadow_"+_t]=qe[_t]}),qe.elmsAppend.forEach(function(_t){Ie.appendChild(_t)}),C.face.setAttribute("filter","url(#"+Fe+")"),mi(C,"new_edge4viewBox",a.dropShadow.adjustEdge),a.dropShadow.update(C)},remove:function(C){var L=C.defs;C.efc_dropShadow_elmsAppend&&(C.efc_dropShadow_elmsAppend.forEach(function(j){L.removeChild(j)}),C.efc_dropShadow_elmFilter=C.efc_dropShadow_elmOffset=C.efc_dropShadow_elmBlur=C.efc_dropShadow_styleFlood=C.efc_dropShadow_elmsAppend=null),vi(C,"new_edge4viewBox",a.dropShadow.adjustEdge),yi(C,{}),C.face.removeAttribute("filter"),Ki(C.aplStats,a.dropShadow.stats)},update:function(C){var L,j,H=C.curStats,ue=C.aplStats,ae=ue.dropShadow_options;H.dropShadow_dx=L=ae.dx,Xe(C,ue,"dropShadow_dx",L)&&(C.efc_dropShadow_elmOffset.dx.baseVal=L,j=!0),H.dropShadow_dy=L=ae.dy,Xe(C,ue,"dropShadow_dy",L)&&(C.efc_dropShadow_elmOffset.dy.baseVal=L,j=!0),H.dropShadow_blur=L=ae.blur,Xe(C,ue,"dropShadow_blur",L)&&(C.efc_dropShadow_elmBlur.setStdDeviation(L,L),j=!0),j&&yi(C,{}),H.dropShadow_color=L=ae.color,Xe(C,ue,"dropShadow_color",L)&&(C.efc_dropShadow_styleFlood.floodColor=L),H.dropShadow_opacity=L=ae.opacity,Xe(C,ue,"dropShadow_opacity",L)&&(C.efc_dropShadow_styleFlood.floodOpacity=L)},adjustEdge:function(C,L){var j,H=C.curStats,ue=C.aplStats;H.dropShadow_dx!=null&&(j=3*H.dropShadow_blur,(j={x1:L.x1-j+H.dropShadow_dx,y1:L.y1-j+H.dropShadow_dy,x2:L.x2+j+H.dropShadow_dx,y2:L.y2+j+H.dropShadow_dy}).x1<L.x1&&(L.x1=j.x1),j.y1<L.y1&&(L.y1=j.y1),j.x2>L.x2&&(L.x2=j.x2),j.y2>L.y2&&(L.y2=j.y2),["x","y"].forEach(function(ae){var Ie,Fe="dropShadow_"+ae;H[Fe]=Ie=L[ae+"1"],Xe(C,ue,Fe,Ie)&&(C.efc_dropShadow_elmFilter[ae].baseVal.value=Ie)}))}}},Object.keys(a).forEach(function(C){var L=a[C],j=L.stats;j[C+"_enabled"]={iniValue:!1},j[C+"_options"]={hasProps:!0},L.anim&&(j[C+"_animOptions"]={},j[C+"_animId"]={})}),n={none:{defaultAnimOptions:{},init:function(C,L){var j=C.curStats;j.show_animId&&(kt.remove(j.show_animId),j.show_animId=null),n.none.start(C,L)},start:function(C,L){n.none.stop(C,!0)},stop:function(C,L,j){var H=C.curStats;return j=j??C.aplStats.show_on,H.show_inAnim=!1,L&&pr(C,j),j?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(C,L){var j=C.curStats,H=C.aplStats;j.show_animId&&kt.remove(j.show_animId),j.show_animId=kt.add(function(ue){return ue},function(ue,ae){ae?n.fade.stop(C,!0):(C.svg.style.opacity=ue+"",ze&&(ui(C,C.svg),Hi(C)))},H.show_animOptions.duration,1,H.show_animOptions.timing,null,!1),n.fade.start(C,L)},start:function(C,L){var j,H=C.curStats;H.show_inAnim&&(j=kt.stop(H.show_animId)),pr(C,1),H.show_inAnim=!0,kt.start(H.show_animId,!C.aplStats.show_on,L??j)},stop:function(C,L,j){var H,ue=C.curStats;return j=j??C.aplStats.show_on,H=ue.show_inAnim?kt.stop(ue.show_animId):j?1:0,ue.show_inAnim=!1,L&&(C.svg.style.opacity=j?"":"0",pr(C,j)),H}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(C,L){var j=C.curStats,H=C.aplStats,ue=C.pathList.baseVal,ae=bt(ue),Ie=ae.segsLen,Fe=ae.lenAll;j.show_animId&&kt.remove(j.show_animId),j.show_animId=kt.add(function(qe){var _t,tt,dt,je=-1;if(qe===0)tt=[[ue[0][0],ue[0][0]]];else if(qe===1)tt=ue;else{for(_t=Fe*qe,tt=[];_t>=Ie[++je];)tt.push(ue[je]),_t-=Ie[je];_t&&((dt=ue[je]).length===2?tt.push([dt[0],pn(dt[0],dt[1],_t/Ie[je])]):(qe=he(dt[0],dt[1],dt[2],dt[3],vt(dt[0],dt[1],dt[2],dt[3],_t)),tt.push([dt[0],qe.fromP1,qe.fromP2,qe])))}return tt},function(qe,_t){_t?n.draw.stop(C,!0):(C.pathList.animVal=qe,yi(C,{path:!0}))},H.show_animOptions.duration,1,H.show_animOptions.timing,null,!1),n.draw.start(C,L)},start:function(C,L){var j,H=C.curStats;H.show_inAnim&&(j=kt.stop(H.show_animId)),pr(C,1),H.show_inAnim=!0,mi(C,"apl_position",n.draw.update),kt.start(H.show_animId,!C.aplStats.show_on,L??j)},stop:function(C,L,j){var H,ue=C.curStats;return j=j??C.aplStats.show_on,H=ue.show_inAnim?kt.stop(ue.show_animId):j?1:0,ue.show_inAnim=!1,L&&(C.pathList.animVal=j?null:[[C.pathList.baseVal[0][0],C.pathList.baseVal[0][0]]],yi(C,{path:!0}),pr(C,j)),H},update:function(C){vi(C,"apl_position",n.draw.update),C.curStats.show_inAnim?n.draw.init(C,n.draw.stop(C)):C.aplStats.show_animOptions={}}}},["lineId"].forEach(function(C){var L=C[0],j=C[1],H=C[2];Object.defineProperty(re.prototype,L,{get:function(){var ue=H!=null?Ht[this._id].options[j][H]:j?Ht[this._id].options[j]:Ht[this._id].options[L];return ue==null?ge:ar(ue)},set:Ae(L),enumerable:!0})}),[["path",q],["startSocket",U,"socketSE",0],["endSocket",U,"socketSE",1],["startPlug",pe,"plugSE",0],["endPlug",pe,"plugSE",1]].forEach(function(C){var L=C[0],j=C[1],H=C[2],ue=C[3];Object.defineProperty(re.prototype,L,{get:function(){var ae,Ie=ue!=null?Ht[this._id].options[H][ue]:H?Ht[this._id].options[H]:Ht[this._id].options[L];return Ie?Object.keys(j).some(function(Fe){return j[Fe]===Ie&&(ae=Fe,!0)})?ae:new Error("It's broken"):ge},set:Ae(L),enumerable:!0})}),Object.keys(a).forEach(function(C){var L=a[C];Object.defineProperty(re.prototype,C,{get:function(){var j,H,ue=Ht[this._id].options[C];return Le(ue)?(j=ue,H=L.optionsConf.reduce(function(ae,je){var Fe,qe=je[0],_t=je[1],tt=je[2],dt=je[3],je=je[4],Re=je!=null?j[dt][je]:dt?j[dt]:j[_t];return ae[_t]=qe==="id"?Re?Object.keys(tt).some(function(Ue){return tt[Ue]===Re&&(Fe=Ue,!0)})?Fe:new Error("It's broken"):ge:Re==null?ge:ar(Re),ae},{}),L.anim&&(H.animation=ar(j.animation)),H):ue},set:Ae(C),enumerable:!0})}),["startLabel","endLabel","middleLabel"].forEach(function(C,L){Object.defineProperty(re.prototype,C,{get:function(){var j=Ht[this._id],H=j.options;return H.labelSEM[L]&&!j.optionIsAttach.labelSEM[L]?nt[H.labelSEM[L]._id].text:H.labelSEM[L]||""},set:Ae(C),enumerable:!0})}),re.prototype.setOptions=function(C){return Q(Ht[this._id],C),this},re.prototype.position=function(){return yi(Ht[this._id],{position:!0}),this},re.prototype.remove=function(){var C=Ht[this._id],L=C.curStats;Object.keys(a).forEach(function(j){j+="_animId",L[j]&&kt.remove(L[j])}),L.show_animId&&kt.remove(L.show_animId),C.attachments.slice().forEach(function(j){mn(C,j)}),C.baseWindow&&C.svg&&C.baseWindow.document.body.removeChild(C.svg),delete Ht[this._id]},re.prototype.show=function(C,L){return Hn(Ht[this._id],!0,C,L),this},re.prototype.hide=function(C,L){return Hn(Ht[this._id],!1,C,L),this},u=function(C){C&&nt[C._id]&&(C.boundTargets.slice().forEach(function(L){mn(L.props,C,!0)}),C.conf.remove&&C.conf.remove(C),delete nt[C._id])},oe.prototype.remove=function(){var C=this,L=nt[C._id];L&&(L.boundTargets.slice().forEach(function(j){L.conf.removeOption(L,j)}),Si(function(){var j=nt[C._id];j&&(console.error("LeaderLineAttachment was not removed by removeOption"),u(j))}))},o=oe,window.LeaderLineAttachment=o,l=function(C,L){return C instanceof o&&(!(C.isRemoved||L&&nt[C._id].conf.type!==L)||null)},s={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Rt}],init:function(C,L){return C.element=s.pointAnchor.checkElement(L.element),C.x=s.pointAnchor.parsePercent(L.x,!0)||[.5,!0],C.y=s.pointAnchor.parsePercent(L.y,!0)||[.5,!0],!0},removeOption:function(ae,L){var j=L.props,H={},ue=ae.element,ae=j.options.anchorSE[L.optionName==="start"?1:0];ue===ae&&(ue=ae===document.body?new o(s.pointAnchor,[ue]):document.body),H[L.optionName]=ue,Q(j,H)},getBBoxNest:function(C,ue){var j=ta(C.element,ue.baseWindow),H=j.width,ue=j.height;return j.width=j.height=0,j.left=j.right=j.left+C.x[0]*(C.x[1]?H:1),j.top=j.bottom=j.top+C.y[0]*(C.y[1]?ue:1),j},parsePercent:function(C,L){var j,H,ue=!1;return jt(C)?H=C:typeof C=="string"&&(j=ne.exec(C))&&j[2]&&(ue=(H=parseFloat(j[1])/100)!==0),H!=null&&(L||0<=H)?[H,ue]:null},checkElement:function(C){if(C==null)C=document.body;else if(!Rt(C))throw new Error("`element` must be Element");return C}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Rt},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(C,L){var j,H=[];return C.element=s.pointAnchor.checkElement(L.element),typeof L.color=="string"&&(C.color=L.color.trim()),typeof L.fillColor=="string"&&(C.fill=L.fillColor.trim()),jt(L.size)&&0<=L.size&&(C.size=L.size),L.dash&&(C.dash=!0,jt(L.dash.len)&&0<L.dash.len&&(C.dashLen=L.dash.len),jt(L.dash.gap)&&0<L.dash.gap&&(C.dashGap=L.dash.gap)),L.shape==="circle"?C.shape=L.shape:L.shape==="polygon"&&Array.isArray(L.points)&&3<=L.points.length&&L.points.every(function(ue){var ae={};return!(!(ae.x=s.pointAnchor.parsePercent(ue[0],!0))||!(ae.y=s.pointAnchor.parsePercent(ue[1],!0)))&&(H.push(ae),(ae.x[1]||ae.y[1])&&(C.hasRatio=!0),!0)})?(C.shape=L.shape,C.points=H):(C.shape="rect",C.radius=jt(L.radius)&&0<=L.radius?L.radius:0),C.shape!=="rect"&&C.shape!=="circle"||(C.x=s.pointAnchor.parsePercent(L.x,!0)||[-.05,!0],C.y=s.pointAnchor.parsePercent(L.y,!0)||[-.05,!0],C.width=s.pointAnchor.parsePercent(L.width)||[1.1,!0],C.height=s.pointAnchor.parsePercent(L.height)||[1.1,!0],(C.x[1]||C.y[1]||C.width[1]||C.height[1])&&(C.hasRatio=!0)),j=C.element.ownerDocument,C.svg=L=j.createElementNS(K,"svg"),L.className.baseVal=k+"-areaAnchor",L.viewBox.baseVal||L.setAttribute("viewBox","0 0 0 0"),C.path=L.appendChild(j.createElementNS(K,"path")),C.path.style.fill=C.fill||"none",C.isShown=!1,L.style.visibility="hidden",j.body.appendChild(L),Oi(j=j.defaultView),C.bodyOffset=ni(j),C.updateColor=function(){var ue=C.curStats,ae=C.aplStats,Ie=C.boundTargets.length?C.boundTargets[0].props.curStats:null;ue.color=Ie=C.color||(Ie?Ie.line_color:Be.lineColor),Xe(C,ae,"color",Ie)&&(C.path.style.stroke=Ie)},C.updateShow=function(){pr(C,C.boundTargets.some(function(ue){return ue.props.isShown===!0}))},!0},bind:function(C,L){return L=L.props,C.color||mi(L,"cur_line_color",C.updateColor),mi(L,"svgShow",C.updateShow),Si(function(){C.updateColor(),C.updateShow()}),!0},unbind:function(C,L){L=L.props,C.color||vi(L,"cur_line_color",C.updateColor),vi(L,"svgShow",C.updateShow),1<C.boundTargets.length&&Si(function(){C.updateColor(),C.updateShow(),s.areaAnchor.update(C)&&C.boundTargets.forEach(function(j){yi(j.props,{position:!0})})})},removeOption:function(C,L){s.pointAnchor.removeOption(C,L)},remove:function(C){C.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),C.boundTargets.forEach(function(L){s.areaAnchor.unbind(C,L)})),C.svg.parentNode.removeChild(C.svg)},getStrokeWidth:function(C,L){return s.areaAnchor.update(C)&&1<C.boundTargets.length&&Si(function(){C.boundTargets.forEach(function(j){j.props!==L&&yi(j.props,{position:!0})})}),C.curStats.strokeWidth},getPathData:function(C,L){var j=ta(C.element,L.baseWindow);return et(C.curStats.pathListRel,function(H){H.x+=j.left,H.y+=j.top})},getBBoxNest:function(C,L){return L=ta(C.element,L.baseWindow),C=C.curStats.bBoxRel,{left:C.left+L.left,top:C.top+L.top,right:C.right+L.left,bottom:C.bottom+L.top,width:C.width,height:C.height}},update:function(C){var L,j,H,ue,ae,Ie,Fe,qe,_t,tt,dt,je,Re,Ue,Ze,Ve,Ge=C.curStats,Ke=C.aplStats,Ft=C.boundTargets.length?C.boundTargets[0].props.curStats:null,Yt={};if(Yt.strokeWidth=Xe(C,Ge,"strokeWidth",C.size!=null?C.size:Ft?Ft.line_strokeWidth:Be.lineSize),L=Ci(C.element),Yt.elementWidth=Xe(C,Ge,"elementWidth",L.width),Yt.elementHeight=Xe(C,Ge,"elementHeight",L.height),Yt.elementLeft=Xe(C,Ge,"elementLeft",L.left),Yt.elementTop=Xe(C,Ge,"elementTop",L.top),Yt.strokeWidth||C.hasRatio&&(Yt.elementWidth||Yt.elementHeight)){switch(C.shape){case"rect":(je={left:C.x[0]*(C.x[1]?L.width:1),top:C.y[0]*(C.y[1]?L.height:1),width:C.width[0]*(C.width[1]?L.width:1),height:C.height[0]*(C.height[1]?L.height:1)}).right=je.left+je.width,je.bottom=je.top+je.height,dt=Ge.strokeWidth/2,qe=(Fe=Math.min(je.width,je.height))?Fe/2*Math.SQRT2+dt:0,tt=(Fe=C.radius?C.radius<=qe?C.radius:qe:0)?(qe=(Fe-dt)/Math.SQRT2,tt=[{x:je.left-(_t=Fe-qe),y:je.top+qe},{x:je.left+qe,y:je.top-_t},{x:je.right-qe,y:je.top-_t},{x:je.right+_t,y:je.top+qe},{x:je.right+_t,y:je.bottom-qe},{x:je.right-qe,y:je.bottom+_t},{x:je.left+qe,y:je.bottom+_t},{x:je.left-_t,y:je.bottom-qe}],Ge.pathListRel=[[tt[0],{x:tt[0].x,y:tt[0].y-(dt=Fe*Ye)},{x:tt[1].x-dt,y:tt[1].y},tt[1]]],tt[1].x!==tt[2].x&&Ge.pathListRel.push([tt[1],tt[2]]),Ge.pathListRel.push([tt[2],{x:tt[2].x+dt,y:tt[2].y},{x:tt[3].x,y:tt[3].y-dt},tt[3]]),tt[3].y!==tt[4].y&&Ge.pathListRel.push([tt[3],tt[4]]),Ge.pathListRel.push([tt[4],{x:tt[4].x,y:tt[4].y+dt},{x:tt[5].x+dt,y:tt[5].y},tt[5]]),tt[5].x!==tt[6].x&&Ge.pathListRel.push([tt[5],tt[6]]),Ge.pathListRel.push([tt[6],{x:tt[6].x-dt,y:tt[6].y},{x:tt[7].x,y:tt[7].y+dt},tt[7]]),tt[7].y!==tt[0].y&&Ge.pathListRel.push([tt[7],tt[0]]),Ge.pathListRel.push([]),_t=Fe-qe+Ge.strokeWidth/2,[{x:je.left-_t,y:je.top-_t},{x:je.right+_t,y:je.bottom+_t}]):(_t=Ge.strokeWidth/2,tt=[{x:je.left-_t,y:je.top-_t},{x:je.right+_t,y:je.bottom+_t}],Ge.pathListRel=[[tt[0],{x:tt[1].x,y:tt[0].y}],[{x:tt[1].x,y:tt[0].y},tt[1]],[tt[1],{x:tt[0].x,y:tt[1].y}],[]],[{x:je.left-Ge.strokeWidth,y:je.top-Ge.strokeWidth},{x:je.right+Ge.strokeWidth,y:je.bottom+Ge.strokeWidth}]),Ge.bBoxRel={left:tt[0].x,top:tt[0].y,right:tt[1].x,bottom:tt[1].y,width:tt[1].x-tt[0].x,height:tt[1].y-tt[0].y};break;case"circle":(Ie={left:C.x[0]*(C.x[1]?L.width:1),top:C.y[0]*(C.y[1]?L.height:1),width:C.width[0]*(C.width[1]?L.width:1),height:C.height[0]*(C.height[1]?L.height:1)}).width||Ie.height||(Ie.width=Ie.height=10),Ie.width||(Ie.width=Ie.height),Ie.height||(Ie.height=Ie.width),Ie.right=Ie.left+Ie.width,Ie.bottom=Ie.top+Ie.height,dt=Ie.left+Ie.width/2,Fe=Ie.top+Ie.height/2,ae=Ge.strokeWidth/2,qe=Ie.width/2,_t=Ie.height/2,je=qe*Math.SQRT2+ae,tt=_t*Math.SQRT2+ae,Ge.pathListRel=[[(ae=[{x:dt-je,y:Fe},{x:dt,y:Fe-tt},{x:dt+je,y:Fe},{x:dt,y:Fe+tt}])[0],{x:ae[0].x,y:ae[0].y-(dt=tt*Ye)},{x:ae[1].x-(Fe=je*Ye),y:ae[1].y},ae[1]],[ae[1],{x:ae[1].x+Fe,y:ae[1].y},{x:ae[2].x,y:ae[2].y-dt},ae[2]],[ae[2],{x:ae[2].x,y:ae[2].y+dt},{x:ae[3].x+Fe,y:ae[3].y},ae[3]],[ae[3],{x:ae[3].x-Fe,y:ae[3].y},{x:ae[0].x,y:ae[0].y+dt},ae[0]],[]],qe=je-qe+Ge.strokeWidth/2,_t=tt-_t+Ge.strokeWidth/2,ae=[{x:Ie.left-qe,y:Ie.top-_t},{x:Ie.right+qe,y:Ie.bottom+_t}],Ge.bBoxRel={left:ae[0].x,top:ae[0].y,right:ae[1].x,bottom:ae[1].y,width:ae[1].x-ae[0].x,height:ae[1].y-ae[0].y};break;case"polygon":C.points.forEach(function(Lt){var ut=Lt.x[0]*(Lt.x[1]?L.width:1),Lt=Lt.y[0]*(Lt.y[1]?L.height:1);H?(ut<H.left&&(H.left=ut),ut>H.right&&(H.right=ut),Lt<H.top&&(H.top=Lt),Lt>H.bottom&&(H.bottom=Lt)):H={left:ut,right:ut,top:Lt,bottom:Lt},ue?Ge.pathListRel.push([ue,{x:ut,y:Lt}]):Ge.pathListRel=[],ue={x:ut,y:Lt}}),Ge.pathListRel.push([]),ae=Ge.strokeWidth/2,ae=[{x:H.left-ae,y:H.top-ae},{x:H.right+ae,y:H.bottom+ae}],Ge.bBoxRel={left:ae[0].x,top:ae[0].y,right:ae[1].x,bottom:ae[1].y,width:ae[1].x-ae[0].x,height:ae[1].y-ae[0].y}}Yt.pathListRel=Yt.bBoxRel=!0}return(Yt.pathListRel||Yt.elementLeft||Yt.elementTop)&&(Ge.pathData=et(Ge.pathListRel,function(Ot){Ot.x+=L.left,Ot.y+=L.top})),Xe(C,Ke,"strokeWidth",j=Ge.strokeWidth)&&(C.path.style.strokeWidth=j+"px"),ci(j=Ge.pathData,Ke.pathData)&&(C.path.setPathData(j),Ke.pathData=j,Yt.pathData=!0),C.dash&&(!Yt.pathData&&(!Yt.strokeWidth||C.dashLen&&C.dashGap)||(Ge.dashLen=C.dashLen||2*Ge.strokeWidth,Ge.dashGap=C.dashGap||Ge.strokeWidth),Yt.dash=Xe(C,Ke,"dashLen",Ge.dashLen)||Yt.dash,Yt.dash=Xe(C,Ke,"dashGap",Ge.dashGap)||Yt.dash,Yt.dash&&(C.path.style.strokeDasharray=Ke.dashLen+","+Ke.dashGap)),Re=Ge.viewBoxBBox,Ue=Ke.viewBoxBBox,Ze=C.svg.viewBox.baseVal,Ve=C.svg.style,Re.x=Ge.bBoxRel.left+L.left,Re.y=Ge.bBoxRel.top+L.top,Re.width=Ge.bBoxRel.width,Re.height=Ge.bBoxRel.height,["x","y","width","height"].forEach(function(Ot){(j=Re[Ot])!==Ue[Ot]&&(Ze[Ot]=Ue[Ot]=j,Ve[me[Ot]]=j+(Ot==="x"||Ot==="y"?C.bodyOffset[Ot]:0)+"px")}),Yt.strokeWidth||Yt.pathListRel||Yt.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:Rt},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(C,L){var j,H,ue,ae,Ie,Fe,qe,_t,tt,dt=s.mouseHoverAnchor,je={};if(C.element=s.pointAnchor.checkElement(L.element),qe=C.element,!((_t=qe.ownerDocument)&&(tt=_t.defaultView)&&tt.HTMLElement&&qe instanceof tt.HTMLElement))throw new Error("`element` must be HTML element");return dt.style.backgroundSize=dt.backgroundSize.width+"px "+dt.backgroundSize.height+"px",["style","hoverStyle"].forEach(function(Re){var Ue=dt[Re];C[Re]=Object.keys(Ue).reduce(function(Ze,Ve){return Ze[Ve]=Ue[Ve],Ze},{})}),(j=C.element.ownerDocument.defaultView.getComputedStyle(C.element,"")).display==="inline"?C.style.display="inline-block":j.display==="none"&&(C.style.display="block"),s.mouseHoverAnchor.dirKeys.forEach(function(Ze){var Ue=Ze[0],Ze="padding"+Ze[1];parseFloat(j[Ze])<dt.padding[Ue]&&(C.style[Ze]=dt.padding[Ue]+"px")}),C.style.display&&(ue=C.element.style.display,C.element.style.display=C.style.display),s.mouseHoverAnchor.dirKeys.forEach(function(Re){Re="padding"+Re[1],C.style[Re]&&(je[Re]=C.element.style[Re],C.element.style[Re]=C.style[Re])}),(qe=C.element.getBoundingClientRect()).height<dt.minHeight&&(ze?(tt=dt.minHeight,j.boxSizing==="content-box"?tt-=parseFloat(j.borderTopWidth)+parseFloat(j.borderBottomWidth)+parseFloat(j.paddingTop)+parseFloat(j.paddingBottom):j.boxSizing==="padding-box"&&(tt-=parseFloat(j.borderTopWidth)+parseFloat(j.borderBottomWidth)),C.style.height=tt+"px"):C.style.height=parseFloat(j.height)+(dt.minHeight-qe.height)+"px"),C.style.backgroundPosition=Pe?qe.width-dt.backgroundSize.width-dt.backgroundPosition.right+"px "+dt.backgroundPosition.top+"px":"right "+dt.backgroundPosition.right+"px top "+dt.backgroundPosition.top+"px",C.style.display&&(C.element.style.display=ue),s.mouseHoverAnchor.dirKeys.forEach(function(Re){Re="padding"+Re[1],C.style[Re]&&(C.element.style[Re]=je[Re])}),["style","hoverStyle"].forEach(function(Re){var Ue=C[Re],Ze=L[Re];Le(Ze)&&Object.keys(Ze).forEach(function(Ve){typeof Ze[Ve]=="string"||jt(Ze[Ve])?Ue[Ve]=Ze[Ve]:Ze[Ve]==null&&delete Ue[Ve]})}),typeof L.onSwitch=="function"&&(Fe=L.onSwitch),L.showEffectName&&n[L.showEffectName]&&(C.showEffectName=ae=L.showEffectName),Ie=L.animOptions,C.elmStyle=H=C.element.style,C.mouseenter=function(Re){C.hoverStyleSave=dt.getStyles(H,Object.keys(C.hoverStyle)),dt.setStyles(H,C.hoverStyle),C.boundTargets.forEach(function(Ue){Hn(Ue.props,!0,ae,Ie)}),Fe&&Fe(Re)},C.mouseleave=function(Re){dt.setStyles(H,C.hoverStyleSave),C.boundTargets.forEach(function(Ue){Hn(Ue.props,!1,ae,Ie)}),Fe&&Fe(Re)},!0},bind:function(C,L){var j,H,ue,ae,Ie;return L.props.svg?s.mouseHoverAnchor.llShow(L.props,!1,C.showEffectName):Si(function(){s.mouseHoverAnchor.llShow(L.props,!1,C.showEffectName)}),C.enabled||(C.styleSave=s.mouseHoverAnchor.getStyles(C.elmStyle,Object.keys(C.style)),s.mouseHoverAnchor.setStyles(C.elmStyle,C.style),C.removeEventListener=(j=C.element,H=C.mouseenter,ue=C.mouseleave,"onmouseenter"in j&&"onmouseleave"in j?(j.addEventListener("mouseenter",H,!1),j.addEventListener("mouseleave",ue,!1),function(){j.removeEventListener("mouseenter",H,!1),j.removeEventListener("mouseleave",ue,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),j.addEventListener("mouseover",ae=function(Fe){Fe.relatedTarget&&(Fe.relatedTarget===this||this.compareDocumentPosition(Fe.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||H.apply(this,arguments)}),j.addEventListener("mouseout",Ie=function(Fe){Fe.relatedTarget&&(Fe.relatedTarget===this||this.compareDocumentPosition(Fe.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||ue.apply(this,arguments)}),function(){j.removeEventListener("mouseover",ae,!1),j.removeEventListener("mouseout",Ie,!1)})),C.enabled=!0),!0},unbind:function(C,L){C.enabled&&C.boundTargets.length<=1&&(C.removeEventListener(),s.mouseHoverAnchor.setStyles(C.elmStyle,C.styleSave),C.enabled=!1),s.mouseHoverAnchor.llShow(L.props,!0,C.showEffectName)},removeOption:function(C,L){s.pointAnchor.removeOption(C,L)},remove:function(C){C.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),C.boundTargets.forEach(function(L){s.mouseHoverAnchor.unbind(C,L)}))},getBBoxNest:function(C,L){return ta(C.element,L.baseWindow)},llShow:function(C,L,j){n[j||C.curStats.show_effect].stop(C,!0,L),C.aplStats.show_on=L},getStyles:function(C,L){return L.reduce(function(j,H){return j[H]=C[H],j},{})},setStyles:function(C,L){Object.keys(L).forEach(function(j){C[j]=L[j]})}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(C,L){return typeof L.text=="string"&&(C.text=L.text.trim()),!!C.text&&(typeof L.color=="string"&&(C.color=L.color.trim()),C.outlineColor=typeof L.outlineColor=="string"?L.outlineColor.trim():"#fff",Array.isArray(L.offset)&&jt(L.offset[0])&&jt(L.offset[1])&&(C.offset={x:L.offset[0],y:L.offset[1]}),jt(L.lineOffset)&&(C.lineOffset=L.lineOffset),s.captionLabel.textStyleProps.forEach(function(j){L[j]!=null&&(C[j]=L[j])}),C.updateColor=function(j){s.captionLabel.updateColor(C,j)},C.updateSocketXY=function(j){var H,ue=C.curStats,ae=C.aplStats,Ie=j.curStats,Fe=Ie.position_socketXYSE[C.socketIndex];Fe.x!=null&&(C.offset?(ue.x=Fe.x+C.offset.x,ue.y=Fe.y+C.offset.y):(H=C.height/2,j=Math.max(Ie.attach_plugSideLenSE[C.socketIndex]||0,Ie.line_strokeWidth/2),Ie=Ie.position_socketXYSE[C.socketIndex?0:1],Fe.socketId===F||Fe.socketId===O?(ue.x=Fe.socketId===F?Fe.x-H-C.width:Fe.x+H,ue.y=Ie.y<Fe.y?Fe.y+j+H:Fe.y-j-H-C.height):(ue.x=Ie.x<Fe.x?Fe.x+j+H:Fe.x-j-H-C.width,ue.y=Fe.socketId===I?Fe.y-H-C.height:Fe.y+H)),Xe(C,ae,"x",H=ue.x)&&(C.elmPosition.x.baseVal.getItem(0).value=H),Xe(C,ae,"y",H=ue.y)&&(C.elmPosition.y.baseVal.getItem(0).value=H+C.height))},C.updatePath=function(ae){var H=C.curStats,ue=C.aplStats,ae=ae.pathList.animVal||ae.pathList.baseVal;ae&&(ae=s.captionLabel.getMidPoint(ae,C.lineOffset),H.x=ae.x-C.width/2,H.y=ae.y-C.height/2,Xe(C,ue,"x",ae=H.x)&&(C.elmPosition.x.baseVal.getItem(0).value=ae),Xe(C,ue,"y",ae=H.y)&&(C.elmPosition.y.baseVal.getItem(0).value=ae+C.height))},C.updateShow=function(j){s.captionLabel.updateShow(C,j)},Pe&&(C.adjustEdge=function(j,H){var ue=C.curStats;ue.x!=null&&s.captionLabel.adjustEdge(H,{x:ue.x,y:ue.y,width:C.width,height:C.height},C.strokeWidth/2)}),!0)},updateColor:function(C,ue){var j=C.curStats,H=C.aplStats,ue=ue.curStats;j.color=ue=C.color||ue.line_color,Xe(C,H,"color",ue)&&(C.styleFill.fill=ue)},updateShow:function(C,L){L=L.isShown===!0,L!==C.isShown&&(C.styleShow.visibility=L?"":"hidden",C.isShown=L)},adjustEdge:function(C,L,j){j={x1:L.x-j,y1:L.y-j,x2:L.x+L.width+j,y2:L.y+L.height+j},j.x1<C.x1&&(C.x1=j.x1),j.y1<C.y1&&(C.y1=j.y1),j.x2>C.x2&&(C.x2=j.x2),j.y2>C.y2&&(C.y2=j.y2)},newText:function(C,L,j,H,ue){var ae,Ie,Fe=L.createElementNS(K,"text");return Fe.textContent=C,[Fe.x,Fe.y].forEach(function(qe){var _t=j.createSVGLength();_t.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),qe.baseVal.initialize(_t)}),typeof h!="boolean"&&(h="paintOrder"in Fe.style),ue&&!h?(ae=L.createElementNS(K,"defs"),Fe.id=H,ae.appendChild(Fe),(Ie=(C=L.createElementNS(K,"g")).appendChild(L.createElementNS(K,"use"))).href.baseVal="#"+H,(L=C.appendChild(L.createElementNS(K,"use"))).href.baseVal="#"+H,(Ie=Ie.style).strokeLinejoin="round",{elmPosition:Fe,styleText:Fe.style,styleFill:L.style,styleStroke:Ie,styleShow:C.style,elmsAppend:[ae,C]}):(Ie=Fe.style,ue&&(Ie.strokeLinejoin="round",Ie.paintOrder="stroke"),{elmPosition:Fe,styleText:Ie,styleFill:Ie,styleStroke:ue?Ie:null,styleShow:Ie,elmsAppend:[Fe]})},getMidPoint:function(C,L){var j,H,ae=bt(C),ue=ae.segsLen,ae=ae.lenAll,Ie=-1,Fe=ae/2+(L||0);if(Fe<=0)return(j=C[0]).length===2?pn(j[0],j[1],0):he(j[0],j[1],j[2],j[3],0);if(ae<=Fe)return(j=C[C.length-1]).length===2?pn(j[0],j[1],1):he(j[0],j[1],j[2],j[3],1);for(H=[];Fe>ue[++Ie];)H.push(C[Ie]),Fe-=ue[Ie];return(j=C[Ie]).length===2?pn(j[0],j[1],Fe/ue[Ie]):he(j[0],j[1],j[2],j[3],vt(j[0],j[1],j[2],j[3],Fe))},initSvg:function(C,L){var j,H,ue=s.captionLabel.newText(C.text,L.baseWindow.document,L.svg,k+"-captionLabel-"+C._id,C.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach(function(ae){C[ae]=ue[ae]}),C.isShown=!1,C.styleShow.visibility="hidden",s.captionLabel.textStyleProps.forEach(function(ae){C[ae]!=null&&(ue.styleText[ae]=C[ae])}),ue.elmsAppend.forEach(function(ae){L.svg.appendChild(ae)}),j=ue.elmPosition.getBBox(),C.width=j.width,C.height=j.height,C.outlineColor&&(H=j.height/9,ue.styleStroke.strokeWidth=(H=10<H?10:H<2?2:H)+"px",ue.styleStroke.stroke=C.outlineColor),C.strokeWidth=H||0,Ki(C.aplStats,s.captionLabel.stats),C.updateColor(L),C.refSocketXY?C.updateSocketXY(L):C.updatePath(L),Pe&&yi(L,{}),C.updateShow(L)},bind:function(C,L){var j=L.props;return C.color||mi(j,"cur_line_color",C.updateColor),(C.refSocketXY=L.optionName==="startLabel"||L.optionName==="endLabel")?(C.socketIndex=L.optionName==="startLabel"?0:1,mi(j,"apl_position",C.updateSocketXY),C.offset||(mi(j,"cur_attach_plugSideLenSE",C.updateSocketXY),mi(j,"cur_line_strokeWidth",C.updateSocketXY))):mi(j,"apl_path",C.updatePath),mi(j,"svgShow",C.updateShow),Pe&&mi(j,"new_edge4viewBox",C.adjustEdge),s.captionLabel.initSvg(C,j),!0},unbind:function(C,L){var j=L.props;C.elmsAppend&&(C.elmsAppend.forEach(function(H){j.svg.removeChild(H)}),C.elmPosition=C.styleFill=C.styleShow=C.elmsAppend=null),Ki(C.curStats,s.captionLabel.stats),Ki(C.aplStats,s.captionLabel.stats),C.color||vi(j,"cur_line_color",C.updateColor),C.refSocketXY?(vi(j,"apl_position",C.updateSocketXY),C.offset||(vi(j,"cur_attach_plugSideLenSE",C.updateSocketXY),vi(j,"cur_line_strokeWidth",C.updateSocketXY))):vi(j,"apl_path",C.updatePath),vi(j,"svgShow",C.updateShow),Pe&&(vi(j,"new_edge4viewBox",C.adjustEdge),yi(j,{}))},removeOption:function(C,L){var j=L.props,H={};H[L.optionName]="",Q(j,H)},remove:function(C){C.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),C.boundTargets.forEach(function(L){s.captionLabel.unbind(C,L)}))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(C,L){return typeof L.text=="string"&&(C.text=L.text.trim()),!!C.text&&(typeof L.color=="string"&&(C.color=L.color.trim()),C.outlineColor=typeof L.outlineColor=="string"?L.outlineColor.trim():"#fff",jt(L.lineOffset)&&(C.lineOffset=L.lineOffset),s.captionLabel.textStyleProps.forEach(function(j){L[j]!=null&&(C[j]=L[j])}),C.updateColor=function(j){s.captionLabel.updateColor(C,j)},C.updatePath=function(j){var H=C.curStats,ue=C.aplStats,ae=j.curStats,Ie=j.pathList.animVal||j.pathList.baseVal;Ie&&(H.pathData=ae=s.pathLabel.getOffsetPathData(Ie,ae.line_strokeWidth/2+C.strokeWidth/2+C.height/4,1.25*C.height),ci(ae,ue.pathData)&&(C.elmPath.setPathData(ae),ue.pathData=ae,C.bBox=C.elmPosition.getBBox(),C.updateStartOffset(j)))},C.updateStartOffset=function(j){var H,ue,ae=C.curStats,Ie=C.aplStats,Fe=j.curStats;ae.pathData&&(C.semIndex===2&&!C.lineOffset||(ue=ae.pathData.reduce(function(qe,_t){var tt,dt=_t.values;switch(_t.type){case"M":H={x:dt[0],y:dt[1]};break;case"L":tt={x:dt[0],y:dt[1]},H&&(qe+=Jr(H,tt)),H=tt;break;case"C":tt={x:dt[4],y:dt[5]},H&&(qe+=lt(H,{x:dt[0],y:dt[1]},{x:dt[2],y:dt[3]},tt)),H=tt}return qe},0),j=C.semIndex===0?0:C.semIndex===1?ue:ue/2,C.semIndex!==2&&(Fe=Math.max(Fe.attach_plugBackLenSE[C.semIndex]||0,Fe.line_strokeWidth/2)+C.strokeWidth/2+C.height/4,j=(j+=C.semIndex===0?Fe:-Fe)<0?0:ue<j?ue:j),C.lineOffset&&(j=(j+=C.lineOffset)<0?0:ue<j?ue:j),ae.startOffset=j,Xe(C,Ie,"startOffset",j)&&(C.elmOffset.startOffset.baseVal.value=j)))},C.updateShow=function(j){s.captionLabel.updateShow(C,j)},Pe&&(C.adjustEdge=function(j,H){C.bBox&&s.captionLabel.adjustEdge(H,C.bBox,C.strokeWidth/2)}),!0)},getOffsetPathData:function(C,L,j){var H,ue,ae=[];function Ie(Fe,qe){return Math.abs(Fe.x-qe.x)<3&&Math.abs(Fe.y-qe.y)<3}return C.forEach(function(Fe){var qe,_t,tt,dt,je,Re,Ue,Ze,Ve,Ge,Ke;Fe.length===2?(Ze=Fe[0],Ve=Fe[1],Ge=L,Ke=Math.atan2(Ze.y-Ve.y,Ve.x-Ze.x)+.5*Math.PI,qe=[{x:Ze.x+Math.cos(Ke)*Ge,y:Ze.y+Math.sin(Ke)*Ge*-1},{x:Ve.x+Math.cos(Ke)*Ge,y:Ve.y+Math.sin(Ke)*Ge*-1}],H?(tt=H.points,0<=(Ue=Math.atan2(tt[1].y-tt[0].y,tt[0].x-tt[1].x)-Math.atan2(Fe[0].y-Fe[1].y,Fe[1].x-Fe[0].x))&&Ue<=Math.PI?_t={type:"line",points:qe,inside:!0}:(je=fn(tt[0],tt[1],L),dt=fn(qe[1],qe[0],L),Re=tt[0],Ze=qe[1],Ke=(Ve=je).x-Re.x,Ge=Ve.y-Re.y,Ue=Ze.x-dt.x,Ve=Ze.y-dt.y,Ze=(-Ge*(Re.x-dt.x)+Ke*(Re.y-dt.y))/(-Ue*Ge+Ke*Ve),Ve=(Ue*(Re.y-dt.y)-Ve*(Re.x-dt.x))/(-Ue*Ge+Ke*Ve),_t=(Ge=0<=Ze&&Ze<=1&&0<=Ve&&Ve<=1?{x:Re.x+Ve*Ke,y:Re.y+Ve*Ge}:null)?{type:"line",points:[tt[1]=Ge,qe[1]]}:(tt[1]=Ie(dt,je)?dt:je,{type:"line",points:[dt,qe[1]]}),H.len=Jr(tt[0],tt[1]))):_t={type:"line",points:qe},_t.len=Jr(_t.points[0],_t.points[1]),ae.push(H=_t)):(ae.push({type:"cubic",points:function(Ft,Yt,Ot,ut,Lt,st){for(var we,rt,Dt=lt(Ft,Yt,Ot,ut)/st,Qe=1/(st<Lt?Lt/st*Dt:Dt),Ut=[],Wt=0;rt=(90-(we=he(Ft,Yt,Ot,ut,Wt)).angle)*(Math.PI/180),Ut.push({x:we.x+Math.cos(rt)*Lt,y:we.y+Math.sin(rt)*Lt*-1}),!(1<=Wt);)1<(Wt+=Qe)&&(Wt=1);return Ut}(Fe[0],Fe[1],Fe[2],Fe[3],L,16)}),H=null)}),H=null,ae.forEach(function(Fe){var qe;H=Fe.type==="line"?(Fe.inside&&(H.len>L?((qe=H.points)[1]=fn(qe[0],qe[1],-L),H.len=Jr(qe[0],qe[1])):(H.points=null,H.len=0),Fe.len>L+j?((qe=Fe.points)[0]=fn(qe[1],qe[0],-(L+j)),Fe.len=Jr(qe[0],qe[1])):(Fe.points=null,Fe.len=0)),Fe):null}),ae.reduce(function(Fe,qe){var _t=qe.points;return _t&&(ue&&Ie(_t[0],ue)||Fe.push({type:"M",values:[_t[0].x,_t[0].y]}),qe.type==="line"?Fe.push({type:"L",values:[_t[1].x,_t[1].y]}):(_t.shift(),_t.forEach(function(tt){Fe.push({type:"L",values:[tt.x,tt.y]})})),ue=_t[_t.length-1]),Fe},[])},newText:function(C,L,j,H){var ue,ae,Ie,Fe,qe=L.createElementNS(K,"defs"),_t=qe.appendChild(L.createElementNS(K,"path"));return _t.id=ue=j+"-path",(Ie=(ae=L.createElementNS(K,"text")).appendChild(L.createElementNS(K,"textPath"))).href.baseVal="#"+ue,Ie.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),Ie.textContent=C,typeof h!="boolean"&&(h="paintOrder"in ae.style),H&&!h?(ae.id=C=j+"-text",qe.appendChild(ae),(Fe=(j=L.createElementNS(K,"g")).appendChild(L.createElementNS(K,"use"))).href.baseVal="#"+C,(L=j.appendChild(L.createElementNS(K,"use"))).href.baseVal="#"+C,(Fe=Fe.style).strokeLinejoin="round",{elmPosition:ae,elmPath:_t,elmOffset:Ie,styleText:ae.style,styleFill:L.style,styleStroke:Fe,styleShow:j.style,elmsAppend:[qe,j]}):(Fe=ae.style,H&&(Fe.strokeLinejoin="round",Fe.paintOrder="stroke"),{elmPosition:ae,elmPath:_t,elmOffset:Ie,styleText:Fe,styleFill:Fe,styleStroke:H?Fe:null,styleShow:Fe,elmsAppend:[qe,ae]})},initSvg:function(C,L){var j,H,ue=s.pathLabel.newText(C.text,L.baseWindow.document,k+"-pathLabel-"+C._id,C.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach(function(ae){C[ae]=ue[ae]}),C.isShown=!1,C.styleShow.visibility="hidden",s.captionLabel.textStyleProps.forEach(function(ae){C[ae]!=null&&(ue.styleText[ae]=C[ae])}),ue.elmsAppend.forEach(function(ae){L.svg.appendChild(ae)}),ue.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),j=ue.elmPosition.getBBox(),ue.styleText.textAnchor=["start","end","middle"][C.semIndex],C.semIndex!==2||C.lineOffset||ue.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),C.height=j.height,C.outlineColor&&(H=j.height/9,ue.styleStroke.strokeWidth=(H=10<H?10:H<2?2:H)+"px",ue.styleStroke.stroke=C.outlineColor),C.strokeWidth=H||0,Ki(C.aplStats,s.pathLabel.stats),C.updateColor(L),C.updatePath(L),C.updateStartOffset(L),Pe&&yi(L,{}),C.updateShow(L)},bind:function(C,L){var j=L.props;return C.color||mi(j,"cur_line_color",C.updateColor),mi(j,"cur_line_strokeWidth",C.updatePath),mi(j,"apl_path",C.updatePath),C.semIndex=L.optionName==="startLabel"?0:L.optionName==="endLabel"?1:2,C.semIndex===2&&!C.lineOffset||mi(j,"cur_attach_plugBackLenSE",C.updateStartOffset),mi(j,"svgShow",C.updateShow),Pe&&mi(j,"new_edge4viewBox",C.adjustEdge),s.pathLabel.initSvg(C,j),!0},unbind:function(C,L){var j=L.props;C.elmsAppend&&(C.elmsAppend.forEach(function(H){j.svg.removeChild(H)}),C.elmPosition=C.elmPath=C.elmOffset=C.styleFill=C.styleShow=C.elmsAppend=null),Ki(C.curStats,s.pathLabel.stats),Ki(C.aplStats,s.pathLabel.stats),C.color||vi(j,"cur_line_color",C.updateColor),vi(j,"cur_line_strokeWidth",C.updatePath),vi(j,"apl_path",C.updatePath),C.semIndex===2&&!C.lineOffset||vi(j,"cur_attach_plugBackLenSE",C.updateStartOffset),vi(j,"svgShow",C.updateShow),Pe&&(vi(j,"new_edge4viewBox",C.adjustEdge),yi(j,{}))},removeOption:function(C,L){var j=L.props,H={};H[L.optionName]="",Q(j,H)},remove:function(C){C.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),C.boundTargets.forEach(function(L){s.pathLabel.unbind(C,L)}))}}},Object.keys(s).forEach(function(C){re[C]=function(){return new o(s[C],Array.prototype.slice.call(arguments))}}),re.positionByWindowResize=!0,window.addEventListener("resize",Qt.add(function(){re.positionByWindowResize&&Object.keys(Ht).forEach(function(C){yi(Ht[C],{position:!0})})}),!1),re}();(function(r,a){e.exports=a()})(du,function(){return i})})(dz);var K9=dz.exports;const Z9=fc(K9),Q9={id:"container",style:{width:"100%"}},J9={class:"banner-image"},e$={class:"banner-image"},hz=se({__name:"VAroundBanner",props:{line:Boolean,template:{type:Object,default:[{imagePosition:{image:{src:"https://ritheme.com/wp-content/themes/ritheme-2023/assets/img/screen-1-1000x800.jpg"},position:"left",animate:{type:"fadeInUp",duration:1,disable:!1}},title:"灵活轻量原生态的首页模块化配置",animate:{type:"fadeInUp",duration:2,disable:!1},secondary:"现代化的前台页面，易于管理拖拽搭配的WP原生小工具模块化首页可拖拽设置。",textItems:[{text:"非常适合虚拟资源商城"},{text:"所有功能界面自带，无需依赖插件"}]},{imagePosition:{image:{src:"https://ritheme.com/wp-content/themes/ritheme-2023/assets/img/screen-2-1000x800.jpg"},position:"right",animate:{type:"fadeInUp",duration:1,disable:!1}},animate:{type:"fadeInUp",duration:2,disable:!1},title:"灵活轻量原生态的首页模块化配置",secondary:"现代化的前台页面，易于管理拖拽搭配的WP原生小工具模块化首页可拖拽设置。",textItems:[{text:"非常适合虚拟资源商城"},{text:"所有功能界面自带，无需依赖插件"}]},{imagePosition:{image:{src:"https://ritheme.com/wp-content/themes/ritheme-2023/assets/img/screen-1-1000x800.jpg"},position:"left",animate:{type:"fadeInUp",duration:1,disable:!1}},title:"灵活轻量原生态的首页模块化配置",animate:{type:"fadeInUp",duration:2,disable:!1},secondary:"现代化的前台页面，易于管理拖拽搭配的WP原生小工具模块化首页可拖拽设置。",textItems:[{text:"非常适合虚拟资源商城"},{text:"所有功能界面自带，无需依赖插件"}]}]}},setup(e){const t=e,i=ie([]),r=ie(0),a=()=>{if(r.value+=1,t.line){const s=document.querySelectorAll(".around-banner-image");s&&s.length==r.value&&s.length>=2&&setTimeout(()=>{for(let o=0;o<s.length-1;o++){const l=new Z9(s[o],s[o+1],{dash:{animation:!0},startPlug:"behind",endPlug:"behind",color:"#e7eaf0",startSocket:"bottom",endSocket:"top",hide:!0});i.value.push(l),l.show("draw"),console.log("draw")}},1e3)}},n=()=>{if(i.value.length>0)for(let s=0;s<i.value.length;s++)i.value[s].position()};return xi(()=>{window.addEventListener("resize",n)}),sn(()=>{if(i.value.length>0)for(let s in i.value)i.value[s].remove();window.removeEventListener("resize",n)}),(s,o)=>{const l=be("a-col"),u=be("a-typography-text"),c=be("a-space"),d=be("a-row");return N(),ee("div",Q9,[(N(!0),ee(Xt,null,Br(t.template,(h,p)=>(N(),De(d,{key:p,class:"grid-demo",gutter:12,style:{margin:"5.5rem 0"},align:"center"},{default:He(()=>[h.imagePosition.position==="left"?(N(),De(l,{key:0,xs:24,sm:24,md:22,lg:12,xl:12,xxl:12,align:"center"},{default:He(()=>[ve("div",J9,[_(fh,{animate:h.imagePosition.animate},{default:He(()=>[_(Z0,{class:"around-banner-image",src:h.imagePosition.image.src,alt:h.imagePosition.image.alt,style:{width:"70%","object-fit":"contain"},onSuccess:a},null,8,["src","alt"])]),_:2},1032,["animate"])])]),_:2},1024)):Me("",!0),h.imagePosition.position==="left"?(N(),De(l,{key:1,align:"center",xs:24,sm:12,md:22,lg:12,xl:12,xxl:12},{default:He(()=>[_(c,{align:"start",direction:"vertical",size:"mini",style:{width:"70%"}},{default:He(()=>[_(fh,{animate:h.animate,style:{"text-align":"left"}},{default:He(()=>[_(Q0,{align:"start",title:h.title,style:{margin:"1.5rem 0"},secondary:h.secondary},null,8,["title","secondary"]),(N(!0),ee(Xt,null,Br(h.textItems,(f,v)=>(N(),ee("div",{key:v,style:{"padding-top":"0.5rem !important","padding-bottom":"0.5rem !important"}},[_(c,{size:"mini"},{default:He(()=>[_(K0,{icon:f.icon??"circle-blue"},null,8,["icon"]),_(u,{bold:""},{default:He(()=>[ti(Bt(f.text),1)]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1032,["animate"])]),_:2},1024)]),_:2},1024)):Me("",!0),h.imagePosition.position==="right"?(N(),De(l,{key:2,xs:24,sm:12,md:22,lg:12,xl:12,xxl:12,align:"center"},{default:He(()=>[_(c,{align:"start",direction:"vertical",size:"mini",style:{width:"70%"}},{default:He(()=>[_(fh,{animate:h.animate,style:{"text-align":"left"}},{default:He(()=>[_(Q0,{align:"start",title:h.title,style:{margin:"1.5rem 0"},secondary:h.secondary},null,8,["title","secondary"]),(N(!0),ee(Xt,null,Br(h.textItems,(f,v)=>(N(),ee("div",{key:v,style:{"padding-top":"0.5rem !important","padding-bottom":"0.5rem !important"}},[_(c,{size:"mini"},{default:He(()=>[_(K0,{icon:f.icon??"circle-blue"},null,8,["icon"]),_(u,{bold:""},{default:He(()=>[ti(Bt(f.text),1)]),_:2},1024)]),_:2},1024)]))),128))]),_:2},1032,["animate"])]),_:2},1024)]),_:2},1024)):Me("",!0),h.imagePosition.position==="right"?(N(),De(l,{key:3,xs:24,sm:12,md:22,lg:12,xl:12,xxl:12,align:"center"},{default:He(()=>[ve("div",e$,[_(fh,{animate:h.imagePosition.animate},{default:He(()=>[_(Z0,{class:"around-banner-image",src:h.imagePosition.image.src,alt:h.imagePosition.image.alt,style:{width:"70%","object-fit":"contain"},onSuccess:a},null,8,["src","alt"])]),_:2},1032,["animate"])])]),_:2},1024)):Me("",!0)]),_:2},1024))),128))])}}}),t$={class:"box"},i$={class:"icon",style:{"margin-bottom":"1.5rem !important"}},r$=["src"],a$={class:"h1"},n$={class:"secondary"},s$=se({__name:"VTextStatistic",props:{src:String,title:String,color:String,secondary:String},setup(e){const t=e;return(i,r)=>(N(),ee("div",t$,[ve("div",i$,[ve("img",{class:"home-number-icon",alt:"",src:t.src},null,8,r$)]),ve("div",a$,[ve("span",{style:It({color:t.color})},Bt(t.title),5)]),ve("h3",n$,Bt(t.secondary),1)]))}}),pz=Ga(s$,[["__scopeId","data-v-405c3b31"]]);var YP;(function(e){e[e.ELEMENT=1]="ELEMENT",e[e.FUNCTIONAL_COMPONENT=2]="FUNCTIONAL_COMPONENT",e[e.STATEFUL_COMPONENT=4]="STATEFUL_COMPONENT",e[e.COMPONENT=6]="COMPONENT",e[e.TEXT_CHILDREN=8]="TEXT_CHILDREN",e[e.ARRAY_CHILDREN=16]="ARRAY_CHILDREN",e[e.SLOTS_CHILDREN=32]="SLOTS_CHILDREN",e[e.TELEPORT=64]="TELEPORT",e[e.SUSPENSE=128]="SUSPENSE",e[e.COMPONENT_SHOULD_KEEP_ALIVE=256]="COMPONENT_SHOULD_KEEP_ALIVE",e[e.COMPONENT_KEPT_ALIVE=512]="COMPONENT_KEPT_ALIVE"})(YP||(YP={}));var XP;(function(e){e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.DEV_ROOT_FRAGMENT=2048]="DEV_ROOT_FRAGMENT",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL"})(XP||(XP={}));const Mb=e=>!!(e&&e.shapeFlag&1),Tm=(e,t)=>!!(e&&e.shapeFlag&6),o$=(e,t)=>!!(e&&e.shapeFlag&8),Eb=(e,t)=>!!(e&&e.shapeFlag&16),Ab=(e,t)=>!!(e&&e.shapeFlag&32),_h=e=>{var t,i;if(e)for(const r of e){if(Mb(r)||Tm(r))return r;if(Eb(r,r.children)){const a=_h(r.children);if(a)return a}else if(Ab(r,r.children)){const a=(i=(t=r.children).default)==null?void 0:i.call(t);if(a){const n=_h(a);if(n)return n}}else if(bi(r)){const a=_h(r);if(a)return a}}},l$=e=>{if(!e)return!0;for(const t of e)if(t.children)return!1;return!0},fz=(e,t)=>{if(e&&e.length>0)for(let i=0;i<e.length;i++){const r=e[i];if(Mb(r)||Tm(r)){const n=Zt(t)?t(r):t;return e[i]=Uh(r,n,!0),!0}const a=aE(r);if(a&&a.length>0&&fz(a,t))return!0}return!1},aE=e=>{if(Eb(e,e.children))return e.children;if(bi(e))return e},mz=e=>{var t,i;if(Mb(e))return e.el;if(Tm(e)){if(((t=e.el)==null?void 0:t.nodeType)===1)return e.el;if((i=e.component)!=null&&i.subTree){const r=mz(e.component.subTree);if(r)return r}}else{const r=aE(e);return vz(r)}},vz=e=>{if(e&&e.length>0)for(const t of e){const i=mz(t);if(i)return i}},ul=(e,t=!1)=>{var i,r;const a=[];for(const n of e??[])Mb(n)||Tm(n)||t&&o$(n,n.children)?a.push(n):Eb(n,n.children)?a.push(...ul(n.children,t)):Ab(n,n.children)?a.push(...ul((r=(i=n.children).default)==null?void 0:r.call(i),t)):bi(n)&&a.push(...ul(n,t));return a};function u$(e){function t(i){const r=[];return i.forEach(a=>{var n,s;ea(a)&&a.type===Xt?Ab(a,a.children)?r.push(...t(((s=(n=a.children).default)==null?void 0:s.call(n))||[])):Eb(a,a.children)?r.push(...t(a.children)):na(a.children)&&r.push(a.children):r.push(a)}),r}return t(e)}const Qn=e=>{if(e)return Zt(e)?e:()=>e},gz=(e,t)=>{var i;const r=[];if(Tm(e,e.type))e.type.name===t?e.component&&r.push(e.component.uid):(i=e.component)!=null&&i.subTree&&r.push(...gz(e.component.subTree,t));else{const a=aE(e);a&&r.push(...yz(a,t))}return r},yz=(e,t)=>{const i=[];if(e&&e.length>0)for(const r of e)i.push(...gz(r,t));return i};var P1=se({name:"Space",props:{align:{type:String},direction:{type:String,default:"horizontal"},size:{type:[Number,String,Array],default:"small"},wrap:{type:Boolean},fill:{type:Boolean}},setup(e,{slots:t}){const i=Se("space"),r=T(()=>{var o;return(o=e.align)!=null?o:e.direction==="horizontal"?"center":""}),a=T(()=>[i,{[`${i}-${e.direction}`]:e.direction,[`${i}-align-${r.value}`]:r.value,[`${i}-wrap`]:e.wrap,[`${i}-fill`]:e.fill}]);function n(o){if(Mt(o))return o;switch(o){case"mini":return 4;case"small":return 8;case"medium":return 16;case"large":return 24;default:return 8}}const s=o=>{const l={},u=`${n(bi(e.size)?e.size[0]:e.size)}px`,c=`${n(bi(e.size)?e.size[1]:e.size)}px`;return o?e.wrap?{marginBottom:c}:{}:(e.direction==="horizontal"&&(l.marginRight=u),(e.direction==="vertical"||e.wrap)&&(l.marginBottom=c),l)};return()=>{var o;const l=ul((o=t.default)==null?void 0:o.call(t),!0).filter(u=>u.type!==f9);return _("div",{class:a.value},[l.map((u,c)=>{var d,h;const p=t.split&&c>0;return _(Xt,{key:(d=u.key)!=null?d:`item-${c}`},[p&&_("div",{class:`${i}-item-split`,style:s(!1)},[(h=t.split)==null?void 0:h.call(t)]),_("div",{class:`${i}-item`,style:s(c===l.length-1)},[u])])})])}}});const __=Object.assign(P1,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+P1.name,P1)}}),c$=se({name:"IconHover",props:{prefix:{type:String},size:{type:String,default:"medium"},disabled:{type:Boolean,default:!1}},setup(){return{prefixCls:Se("icon-hover")}}});function d$(e,t,i,r,a,n){return N(),ee("span",{class:Y([e.prefixCls,{[`${e.prefix}-icon-hover`]:e.prefix,[`${e.prefixCls}-size-${e.size}`]:e.size!=="medium",[`${e.prefixCls}-disabled`]:e.disabled}])},[ye(e.$slots,"default")],2)}var Ur=We(c$,[["render",d$]]);const h$=se({name:"IconClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-close`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),p$=["stroke-width","stroke-linecap","stroke-linejoin"],f$=ve("path",{d:"M9.857 9.858 24 24m0 0 14.142 14.142M24 24 38.142 9.858M24 24 9.857 38.142"},null,-1),m$=[f$];function v$(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},m$,14,p$)}var T1=We(h$,[["render",v$]]);const kn=Object.assign(T1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+T1.name,T1)}}),g$=se({name:"IconLoading",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-loading`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),y$=["stroke-width","stroke-linecap","stroke-linejoin"],b$=ve("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6"},null,-1),w$=[b$];function x$(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},w$,14,y$)}var k1=We(g$,[["render",x$]]);const $n=Object.assign(k1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+k1.name,k1)}}),KP=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta","gray"],hn=(e,{defaultValue:t="medium"}={})=>{const i=Ai(Pn,void 0);return{mergedSize:T(()=>{var a,n;return(n=(a=e?.value)!=null?a:i?.size)!=null?n:t})}},S$=se({name:"Tag",components:{IconHover:Ur,IconClose:kn,IconLoading:$n},props:{color:{type:String},size:{type:String},bordered:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},closable:{type:Boolean,default:!1},checkable:{type:Boolean,default:!1},checked:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,default:!0},nowrap:{type:Boolean,default:!1}},emits:{"update:visible":e=>!0,"update:checked":e=>!0,close:e=>!0,check:(e,t)=>!0},setup(e,{emit:t}){const{size:i}=yt(e),r=Se("tag"),a=T(()=>e.color&&KP.includes(e.color)),n=T(()=>e.color&&!KP.includes(e.color)),s=ie(e.defaultVisible),o=ie(e.defaultChecked),l=T(()=>{var m;return(m=e.visible)!=null?m:s.value}),u=T(()=>{var m;return e.checkable?(m=e.checked)!=null?m:o.value:!0}),{mergedSize:c}=hn(i),d=T(()=>c.value==="mini"?"small":c.value),h=m=>{s.value=!1,t("update:visible",!1),t("close",m)},p=m=>{if(e.checkable){const g=!u.value;o.value=g,t("update:checked",g),t("check",g,m)}},f=T(()=>[r,`${r}-size-${d.value}`,{[`${r}-loading`]:e.loading,[`${r}-hide`]:!l.value,[`${r}-${e.color}`]:a.value,[`${r}-bordered`]:e.bordered,[`${r}-checkable`]:e.checkable,[`${r}-checked`]:u.value,[`${r}-custom-color`]:n.value}]),v=T(()=>{if(n.value)return{backgroundColor:e.color}});return{prefixCls:r,cls:f,style:v,computedVisible:l,computedChecked:u,handleClick:p,handleClose:h}}});function C$(e,t,i,r,a,n){const s=be("icon-close"),o=be("icon-hover"),l=be("icon-loading");return e.computedVisible?(N(),ee("span",{key:0,class:Y(e.cls),style:It(e.style),onClick:t[0]||(t[0]=(...u)=>e.handleClick&&e.handleClick(...u))},[e.$slots.icon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon")],2)):Me("v-if",!0),e.nowrap?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-text`)},[ye(e.$slots,"default")],2)):ye(e.$slots,"default",{key:2}),e.closable?(N(),De(o,{key:3,role:"button","aria-label":"Close",prefix:e.prefixCls,class:Y(`${e.prefixCls}-close-btn`),onClick:ks(e.handleClose,["stop"])},{default:He(()=>[ye(e.$slots,"close-icon",{},()=>[_(s)])]),_:3},8,["prefix","class","onClick"])):Me("v-if",!0),e.loading?(N(),ee("span",{key:4,class:Y(`${e.prefixCls}-loading-icon`)},[_(l)],2)):Me("v-if",!0)],6)):Me("v-if",!0)}var O1=We(S$,[["render",C$]]);const Pb=Object.assign(O1,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+O1.name,O1)}}),Tb=["info","success","warning","error"],sc=["onFocus","onFocusin","onFocusout","onBlur","onChange","onBeforeinput","onInput","onReset","onSubmit","onInvalid","onKeydown","onKeypress","onKeyup","onCopy","onCut","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onSelect","autocomplete","autofocus","maxlength","minlength","name","pattern","readonly","required"],_$=se({name:"IconCheckCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-check-circle-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),M$=["stroke-width","stroke-linecap","stroke-linejoin"],E$=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm10.207-24.379a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0L22 26.172l-4.878-4.88a1 1 0 0 0-1.415 0l-1.414 1.415a1 1 0 0 0 0 1.414l7 7a1 1 0 0 0 1.414 0l11.5-11.5Z",fill:"currentColor",stroke:"none"},null,-1),A$=[E$];function P$(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},A$,14,M$)}var D1=We(_$,[["render",P$]]);const bd=Object.assign(D1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+D1.name,D1)}}),T$=se({name:"IconExclamationCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-exclamation-circle-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),k$=["stroke-width","stroke-linecap","stroke-linejoin"],O$=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm-2-11a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2Zm4-18a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V15Z",fill:"currentColor",stroke:"none"},null,-1),D$=[O$];function I$(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},D$,14,k$)}var I1=We(T$,[["render",I$]]);const hu=Object.assign(I1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+I1.name,I1)}}),L$=se({name:"IconCloseCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-close-circle-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),B$=["stroke-width","stroke-linecap","stroke-linejoin"],z$=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm4.955-27.771-4.95 4.95-4.95-4.95a1 1 0 0 0-1.414 0l-1.414 1.414a1 1 0 0 0 0 1.414l4.95 4.95-4.95 4.95a1 1 0 0 0 0 1.414l1.414 1.414a1 1 0 0 0 1.414 0l4.95-4.95 4.95 4.95a1 1 0 0 0 1.414 0l1.414-1.414a1 1 0 0 0 0-1.414l-4.95-4.95 4.95-4.95a1 1 0 0 0 0-1.414l-1.414-1.414a1 1 0 0 0-1.414 0Z",fill:"currentColor",stroke:"none"},null,-1),R$=[z$];function N$(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},R$,14,B$)}var L1=We(L$,[["render",N$]]);const up=Object.assign(L1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+L1.name,L1)}}),V$=se({name:"FeedbackIcon",components:{IconLoading:$n,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up},props:{type:{type:String}},setup(e){const t=Se("feedback-icon");return{cls:T(()=>[t,`${t}-status-${e.type}`])}}});function F$(e,t,i,r,a,n){const s=be("icon-loading"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill");return N(),ee("span",{class:Y(e.cls)},[e.type==="validating"?(N(),De(s,{key:0})):e.type==="success"?(N(),De(o,{key:1})):e.type==="warning"?(N(),De(l,{key:2})):e.type==="error"?(N(),De(u,{key:3})):Me("v-if",!0)],2)}var km=We(V$,[["render",F$]]);const nE={key:"Enter",code:"Enter"},bz={key:"Backspace",code:"Backspace"},j$={key:"ArrowLeft",code:"ArrowLeft"},$$={key:"ArrowRight",code:"ArrowRight"};var U$=Object.defineProperty,ZP=Object.getOwnPropertySymbols,W$=Object.prototype.hasOwnProperty,H$=Object.prototype.propertyIsEnumerable,QP=(e,t,i)=>t in e?U$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,G$=(e,t)=>{for(var i in t||(t={}))W$.call(t,i)&&QP(e,i,t[i]);if(ZP)for(var i of ZP(t))H$.call(t,i)&&QP(e,i,t[i]);return e};const ln=(e,t)=>{const i=G$({},e);for(const r of t)r in i&&delete i[r];return i};function ml(e,t){const i={};return t.forEach(r=>{const a=r;r in e&&(i[a]=e[a])}),i}const M_=Symbol("ArcoFormItemContext"),sE=Symbol("ArcoFormContext"),Wr=({size:e,disabled:t,error:i,uninject:r}={})=>{const a=r?{}:Ai(M_,{}),n=T(()=>{var c;return(c=e?.value)!=null?c:a.size}),s=T(()=>t?.value||a.disabled),o=T(()=>i?.value||a.error),l=Os(a,"feedback"),u=Os(a,"eventHandlers");return{formItemCtx:a,mergedSize:n,mergedDisabled:s,mergedError:o,feedback:l,eventHandlers:u}};function wz(e){const t=ie();function i(){if(!e.value)return;const{selectionStart:a,selectionEnd:n,value:s}=e.value;if(a==null||n==null)return;const o=s.slice(0,Math.max(0,a)),l=s.slice(Math.max(0,n));t.value={selectionStart:a,selectionEnd:n,value:s,beforeTxt:o,afterTxt:l}}function r(){if(!e.value||!t.value)return;const{value:a}=e.value,{beforeTxt:n,afterTxt:s,selectionStart:o}=t.value;if(!n||!s||!o)return;let l=a.length;if(a.endsWith(s))l=a.length-s.length;else if(a.startsWith(n))l=n.length;else{const u=n[o-1],c=a.indexOf(u,o-1);c!==-1&&(l=c+1)}e.value.setSelectionRange(l,l)}return[i,r]}var q$=Object.defineProperty,JP=Object.getOwnPropertySymbols,Y$=Object.prototype.hasOwnProperty,X$=Object.prototype.propertyIsEnumerable,e3=(e,t,i)=>t in e?q$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,t3=(e,t)=>{for(var i in t||(t={}))Y$.call(t,i)&&e3(e,i,t[i]);if(JP)for(var i of JP(t))X$.call(t,i)&&e3(e,i,t[i]);return e},Ef=se({name:"Input",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},size:{type:String},allowClear:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},placeholder:String,maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},wordLength:{type:Function},wordSlice:{type:Function},inputAttrs:{type:Object},type:{type:String,default:"text"}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,pressEnter:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:i,attrs:r}){const{size:a,disabled:n,error:s,modelValue:o}=yt(e),l=Se("input"),u=ie(),{mergedSize:c,mergedDisabled:d,mergedError:h,feedback:p,eventHandlers:f}=Wr({size:a,disabled:n,error:s}),{mergedSize:v}=hn(c),[m,g]=wz(u),y=ie(e.defaultValue),b=T(()=>{var ce;return(ce=e.modelValue)!=null?ce:y.value});Vt(o,ce=>{(ei(ce)||Wn(ce))&&(y.value="")});let x=b.value;const S=ie(!1),w=T(()=>e.allowClear&&!e.readonly&&!d.value&&!!b.value),E=ie(!1),M=ie(""),P=ce=>{var le;return Zt(e.wordLength)?e.wordLength(ce):(le=ce.length)!=null?le:0},A=T(()=>P(b.value)),k=T(()=>h.value||!!(ki(e.maxLength)&&e.maxLength.errorOnly&&A.value>O.value)),I=T(()=>ki(e.maxLength)&&!!e.maxLength.errorOnly),O=T(()=>ki(e.maxLength)?e.maxLength.length:e.maxLength),D=T(()=>{const ce=P("a");return Math.floor(O.value/ce)}),F=ce=>{var le,xe;O.value&&!I.value&&P(ce)>O.value&&(ce=(xe=(le=e.wordSlice)==null?void 0:le.call(e,ce,O.value))!=null?xe:ce.slice(0,D.value)),y.value=ce,t("update:modelValue",ce)},U=ce=>{u.value&&ce.target!==u.value&&(ce.preventDefault(),u.value.focus())},z=(ce,le)=>{var xe,Ne;ce!==x&&(x=ce,t("change",ce,le),(Ne=(xe=f.value)==null?void 0:xe.onChange)==null||Ne.call(xe,le))},B=ce=>{var le,xe;S.value=!0,x=b.value,t("focus",ce),(xe=(le=f.value)==null?void 0:le.onFocus)==null||xe.call(le,ce)},W=ce=>{var le,xe;S.value=!1,z(b.value,ce),t("blur",ce),(xe=(le=f.value)==null?void 0:le.onBlur)==null||xe.call(le,ce)},R=ce=>{var le,xe,Ne;const{value:pt,selectionStart:at,selectionEnd:Oe}=ce.target;if(ce.type==="compositionend"){if(E.value=!1,M.value="",O.value&&!I.value&&A.value>=O.value&&P(pt)>O.value&&at===Oe){$();return}F(pt),t("input",pt,ce),(xe=(le=f.value)==null?void 0:le.onInput)==null||xe.call(le,ce),$()}else E.value=!0,M.value=b.value+((Ne=ce.data)!=null?Ne:"")},$=()=>{m(),hr(()=>{u.value&&b.value!==u.value.value&&(u.value.value=b.value,g())})},q=ce=>{var le,xe;const{value:Ne}=ce.target;if(!E.value){if(O.value&&!I.value&&A.value>=O.value&&P(Ne)>O.value&&ce.inputType==="insertText"){$();return}F(Ne),t("input",Ne,ce),(xe=(le=f.value)==null?void 0:le.onInput)==null||xe.call(le,ce),$()}},Z=ce=>{F(""),z("",ce),t("clear",ce)},G=ce=>{const le=ce.key||ce.code;!E.value&&le===nE.key&&(z(b.value,ce),t("pressEnter",ce))},X=T(()=>[`${l}-outer`,`${l}-outer-size-${v.value}`,{[`${l}-outer-has-suffix`]:!!i.suffix,[`${l}-outer-disabled`]:d.value}]),J=T(()=>[`${l}-wrapper`,{[`${l}-error`]:k.value,[`${l}-disabled`]:d.value,[`${l}-focus`]:S.value}]),pe=T(()=>[l,`${l}-size-${v.value}`]),fe=T(()=>ln(r,sc)),de=T(()=>ml(r,sc)),ge=T(()=>{const ce=t3(t3({},de.value),e.inputAttrs);return k.value&&(ce["aria-invalid"]=!0),ce}),me=ce=>{var le;return _("span",it({class:J.value,onMousedown:U},ce?void 0:fe.value),[i.prefix&&_("span",{class:`${l}-prefix`},[i.prefix()]),_("input",it({ref:u,class:pe.value,value:b.value,type:e.type,placeholder:e.placeholder,readonly:e.readonly,disabled:d.value,onInput:q,onKeydown:G,onFocus:B,onBlur:W,onCompositionstart:R,onCompositionupdate:R,onCompositionend:R},ge.value),null),w.value&&_(Ur,{prefix:l,class:`${l}-clear-btn`,onClick:Z},{default:()=>[_(kn,null,null)]}),(i.suffix||!!e.maxLength&&e.showWordLimit||!!p.value)&&_("span",{class:[`${l}-suffix`,{[`${l}-suffix-has-feedback`]:p.value}]},[!!e.maxLength&&e.showWordLimit&&_("span",{class:`${l}-word-limit`},[A.value,ti("/"),O.value]),(le=i.suffix)==null?void 0:le.call(i),!!p.value&&_(km,{type:p.value},null)])])};return{inputRef:u,render:()=>i.prepend||i.append?_("span",it({class:X.value},fe.value),[i.prepend&&_("span",{class:`${l}-prepend`},[i.prepend()]),me(!0),i.append&&_("span",{class:`${l}-append`},[i.append()])]):me()}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const K$=se({name:"IconSearch",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-search`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Z$=["stroke-width","stroke-linecap","stroke-linejoin"],Q$=ve("path",{d:"M33.072 33.071c6.248-6.248 6.248-16.379 0-22.627-6.249-6.249-16.38-6.249-22.628 0-6.248 6.248-6.248 16.379 0 22.627 6.248 6.248 16.38 6.248 22.628 0Zm0 0 8.485 8.485"},null,-1),J$=[Q$];function eU(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},J$,14,Z$)}var B1=We(K$,[["render",eU]]);const E_=Object.assign(B1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+B1.name,B1)}}),xz=Symbol("ArcoButtonGroup"),tU=se({name:"Button",components:{IconLoading:$n},props:{type:{type:String},shape:{type:String},status:{type:String},size:{type:String},long:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean},htmlType:{type:String,default:"button"},href:String},emits:{click:e=>!0},setup(e,{emit:t}){const{size:i,disabled:r}=yt(e),a=Se("btn"),n=Ai(xz,void 0),s=T(()=>{var p;return(p=i.value)!=null?p:n?.size}),o=T(()=>!!(r.value||n?.disabled)),{mergedSize:l,mergedDisabled:u}=Wr({size:s,disabled:o}),{mergedSize:c}=hn(l),d=T(()=>{var p,f,v,m,g,y;return[a,`${a}-${(f=(p=e.type)!=null?p:n?.type)!=null?f:"secondary"}`,`${a}-shape-${(m=(v=e.shape)!=null?v:n?.shape)!=null?m:"square"}`,`${a}-size-${c.value}`,`${a}-status-${(y=(g=e.status)!=null?g:n?.status)!=null?y:"normal"}`,{[`${a}-long`]:e.long,[`${a}-loading`]:e.loading,[`${a}-disabled`]:u.value,[`${a}-link`]:na(e.href)}]});return{prefixCls:a,cls:d,mergedDisabled:u,handleClick:p=>{if(e.disabled||e.loading){p.preventDefault();return}t("click",p)}}}}),iU=["href"],rU=["type","disabled"];function aU(e,t,i,r,a,n){const s=be("icon-loading");return e.href?(N(),ee("a",{key:0,class:Y([e.cls,{[`${e.prefixCls}-only-icon`]:e.$slots.icon&&!e.$slots.default}]),href:e.mergedDisabled||e.loading?void 0:e.href,onClick:t[0]||(t[0]=(...o)=>e.handleClick&&e.handleClick(...o))},[e.loading||e.$slots.icon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[e.loading?(N(),De(s,{key:0,spin:"true"})):ye(e.$slots,"icon",{key:1})],2)):Me("v-if",!0),ye(e.$slots,"default")],10,iU)):(N(),ee("button",{key:1,class:Y([e.cls,{[`${e.prefixCls}-only-icon`]:e.$slots.icon&&!e.$slots.default}]),type:e.htmlType,disabled:e.mergedDisabled,onClick:t[1]||(t[1]=(...o)=>e.handleClick&&e.handleClick(...o))},[e.loading||e.$slots.icon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[e.loading?(N(),De(s,{key:0,spin:!0})):ye(e.$slots,"icon",{key:1})],2)):Me("v-if",!0),ye(e.$slots,"default")],10,rU))}var z1=We(tU,[["render",aU]]);const nU=se({name:"ButtonGroup",props:{type:{type:String},status:{type:String},shape:{type:String},size:{type:String},disabled:{type:Boolean}},setup(e){const{type:t,size:i,status:r,disabled:a,shape:n}=yt(e),s=Se("btn-group");return dr(xz,gt({type:t,size:i,shape:n,status:r,disabled:a})),{prefixCls:s}}});function sU(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[ye(e.$slots,"default")],2)}var Af=We(nU,[["render",sU]]);const un=Object.assign(z1,{Group:Af,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+z1.name,z1),e.component(i+Af.name,Af)}});var Ng=se({name:"InputSearch",props:{searchButton:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String},buttonText:{type:String},buttonProps:{type:Object}},emits:{search:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{size:r}=yt(e),a=Se("input-search"),{mergedSize:n}=hn(r),s=ie(),o=d=>{s.value.inputRef&&t("search",s.value.inputRef.value,d)},l=()=>{var d;return _(Xt,null,[e.loading?_($n,null,null):_(Ur,{onClick:o},{default:()=>[_(E_,null,null)]}),(d=i.suffix)==null?void 0:d.call(i)])},u=()=>{var d;let h={};return e.buttonText||i["button-default"]||i["button-icon"]?h={default:(d=i["button-default"])!=null?d:e.buttonText?()=>e.buttonText:void 0,icon:i["button-icon"]}:h={icon:()=>_(E_,null,null)},_(un,it({type:"primary",class:`${a}-btn`,disabled:e.disabled,size:n.value,loading:e.loading},e.buttonProps,{onClick:o}),h)};return{inputRef:s,render:()=>_(Ef,{ref:s,class:a,size:n.value,disabled:e.disabled},{prepend:i.prepend,prefix:i.prefix,suffix:e.searchButton?i.suffix:l,append:e.searchButton?u:i.append})}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const oU=se({name:"IconEye",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-eye`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),lU=["stroke-width","stroke-linecap","stroke-linejoin"],uU=ve("path",{"clip-rule":"evenodd",d:"M24 37c6.627 0 12.627-4.333 18-13-5.373-8.667-11.373-13-18-13-6.627 0-12.627 4.333-18 13 5.373 8.667 11.373 13 18 13Z"},null,-1),cU=ve("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0Z"},null,-1),dU=[uU,cU];function hU(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},dU,14,lU)}var R1=We(oU,[["render",hU]]);const Sz=Object.assign(R1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+R1.name,R1)}}),pU=se({name:"IconEyeInvisible",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-eye-invisible`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),fU=["stroke-width","stroke-linecap","stroke-linejoin"],mU=ve("path",{d:"M14 14.5c-2.69 2-5.415 5.33-8 9.5 5.373 8.667 11.373 13 18 13 3.325 0 6.491-1.09 9.5-3.271M17.463 12.5C19 11 21.75 11 24 11c6.627 0 12.627 4.333 18 13-1.766 2.848-3.599 5.228-5.5 7.14"},null,-1),vU=ve("path",{d:"M29 24a5 5 0 1 1-10 0 5 5 0 0 1 10 0ZM6.852 7.103l34.294 34.294"},null,-1),gU=[mU,vU];function yU(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},gU,14,fU)}var N1=We(pU,[["render",yU]]);const bU=Object.assign(N1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+N1.name,N1)}});function Mn(e){const t=ie(e);return[t,r=>{t.value=r}]}function ja(e,t){const{value:i}=yt(t),[r,a]=Mn(ei(i.value)?e:i.value);return Vt(i,s=>{ei(s)&&a(void 0)}),[T(()=>ei(i.value)?r.value:i.value),a,r]}const wU=se({name:"InputPassword",components:{IconEye:Sz,IconEyeInvisible:bU,AIconHover:Ur,AInput:Ef},props:{visibility:{type:Boolean,default:void 0},defaultVisibility:{type:Boolean,default:!0},invisibleButton:{type:Boolean,default:!0}},emits:["visibility-change","update:visibility"],setup(e,{emit:t}){const{visibility:i,defaultVisibility:r}=yt(e),a=ie(),n=()=>{l(!s.value)},[s,o]=ja(r.value,gt({value:i})),l=u=>{u!==s.value&&(t("visibility-change",u),t("update:visibility",u),o(u))};return{inputRef:a,mergedVisible:s,handleInvisible:n}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}}});function xU(e,t,i,r,a,n){const s=be("icon-eye"),o=be("icon-eye-invisible"),l=be("a-icon-hover"),u=be("a-input");return N(),De(u,{ref:"inputRef",type:e.mergedVisible?"password":"text"},$r({_:2},[e.$slots.prepend?{name:"prepend",fn:He(()=>[ye(e.$slots,"prepend")])}:void 0,e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0,e.invisibleButton||e.$slots.suffix?{name:"suffix",fn:He(()=>[e.invisibleButton?(N(),De(l,{key:0,onClick:e.handleInvisible,onMousedown:t[0]||(t[0]=ks(()=>{},["prevent"])),onMouseup:t[1]||(t[1]=ks(()=>{},["prevent"]))},{default:He(()=>[e.mergedVisible?(N(),De(o,{key:1})):(N(),De(s,{key:0}))]),_:1},8,["onClick"])):Me("v-if",!0),ye(e.$slots,"suffix")])}:void 0,e.$slots.append?{name:"append",fn:He(()=>[ye(e.$slots,"append")])}:void 0]),1032,["type"])}var Vg=We(wU,[["render",xU]]);const SU=se({name:"InputGroup",setup(){return{prefixCls:Se("input-group")}}});function CU(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[ye(e.$slots,"default")],2)}var Mh=We(SU,[["render",CU]]);const mc=Object.assign(Ef,{Search:Ng,Password:Vg,Group:Mh,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+Ef.name,Ef),e.component(i+Mh.name,Mh),e.component(i+Ng.name,Ng),e.component(i+Vg.name,Vg)}}),_U=se({name:"TypographyEditContent",components:{Input:mc},props:{text:{type:String,required:!0}},emits:["change","end","update:text"],setup(e,{emit:t}){const r=[`${Se("typography")}-edit-content`],a=ie();function n(o){t("update:text",o),t("change",o)}function s(){t("end")}return xi(()=>{if(!a.value||!a.value.$el)return;const o=a.value.$el.querySelector("input");if(!o)return;o.focus&&o.focus();const{length:l}=o.value;o.setSelectionRange(l,l)}),{classNames:r,inputRef:a,onBlur:s,onChange:n,onEnd:s}}});function MU(e,t,i,r,a,n){const s=be("Input");return N(),ee("div",{class:Y(e.classNames)},[_(s,{ref:"inputRef","auto-size":"","model-value":e.text,onBlur:e.onBlur,onInput:e.onChange,onKeydown:ph(e.onEnd,["enter"])},null,8,["model-value","onBlur","onInput","onKeydown"])],2)}var EU=We(_U,[["render",MU]]),AU=Object.defineProperty,i3=Object.getOwnPropertySymbols,PU=Object.prototype.hasOwnProperty,TU=Object.prototype.propertyIsEnumerable,r3=(e,t,i)=>t in e?AU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,hf=(e,t)=>{for(var i in t||(t={}))PU.call(t,i)&&r3(e,i,t[i]);if(i3)for(var i of i3(t))TU.call(t,i)&&r3(e,i,t[i]);return e};const kU=()=>{const{height:e,width:t}=lz();return{width:Math.min(t,window.innerWidth),height:Math.min(e,window.innerHeight)}},a3=(e,t)=>{var i,r;const a=e.getBoundingClientRect();return{top:a.top,bottom:a.bottom,left:a.left,right:a.right,scrollTop:a.top-t.top,scrollBottom:a.bottom-t.top,scrollLeft:a.left-t.left,scrollRight:a.right-t.left,width:(i=e.offsetWidth)!=null?i:e.clientWidth,height:(r=e.offsetHeight)!=null?r:e.clientHeight}},OU=e=>{switch(e){case"top":case"tl":case"tr":return"top";case"bottom":case"bl":case"br":return"bottom";case"left":case"lt":case"lb":return"left";case"right":case"rt":case"rb":return"right";default:return"top"}},iv=(e,t)=>{switch(t){case"top":switch(e){case"bottom":return"top";case"bl":return"tl";case"br":return"tr";default:return e}case"bottom":switch(e){case"top":return"bottom";case"tl":return"bl";case"tr":return"br";default:return e}case"left":switch(e){case"right":return"left";case"rt":return"lt";case"rb":return"lb";default:return e}case"right":switch(e){case"left":return"right";case"lt":return"rt";case"lb":return"rb";default:return e}default:return e}},DU=(e,t,{containerRect:i,triggerRect:r,popupRect:a,offset:n,translate:s})=>{const o=OU(e),l=kU(),u={top:i.top+t.top,bottom:l.height-(i.top+t.top+a.height),left:i.left+t.left,right:l.width-(i.left+t.left+a.width)};let c=e;if(o==="top"&&u.top<0)if(r.top>a.height)t.top=-i.top;else{const d=pf("bottom",r,a,{offset:n,translate:s});l.height-(i.top+d.top+a.height)>0&&(c=iv(e,"bottom"),t.top=d.top)}if(o==="bottom"&&u.bottom<0)if(l.height-r.bottom>a.height)t.top=-i.top+(l.height-a.height);else{const d=pf("top",r,a,{offset:n,translate:s});i.top+d.top>0&&(c=iv(e,"top"),t.top=d.top)}if(o==="left"&&u.left<0)if(r.left>a.width)t.left=-i.left;else{const d=pf("right",r,a,{offset:n,translate:s});l.width-(i.left+d.left+a.width)>0&&(c=iv(e,"right"),t.left=d.left)}if(o==="right"&&u.right<0)if(l.width-r.right>a.width)t.left=-i.left+(l.width-a.width);else{const d=pf("left",r,a,{offset:n,translate:s});i.left+d.left>0&&(c=iv(e,"left"),t.left=d.left)}return(o==="top"||o==="bottom")&&(u.left<0?t.left=-i.left:u.right<0&&(t.left=-i.left+(l.width-a.width))),(o==="left"||o==="right")&&(u.top<0?t.top=-i.top:u.bottom<0&&(t.top=-i.top+(l.height-a.height))),{popupPosition:t,position:c}},pf=(e,t,i,{offset:r=0,translate:a=[0,0]}={})=>{var n;const s=(n=bi(a)?a:a[e])!=null?n:[0,0];switch(e){case"top":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(i.width/2)+s[0],top:t.scrollTop-i.height-r+s[1]};case"tl":return{left:t.scrollLeft+s[0],top:t.scrollTop-i.height-r+s[1]};case"tr":return{left:t.scrollRight-i.width+s[0],top:t.scrollTop-i.height-r+s[1]};case"bottom":return{left:t.scrollLeft+Math.round(t.width/2)-Math.round(i.width/2)+s[0],top:t.scrollBottom+r+s[1]};case"bl":return{left:t.scrollLeft+s[0],top:t.scrollBottom+r+s[1]};case"br":return{left:t.scrollRight-i.width+s[0],top:t.scrollBottom+r+s[1]};case"left":return{left:t.scrollLeft-i.width-r+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(i.height/2)+s[1]};case"lt":return{left:t.scrollLeft-i.width-r+s[0],top:t.scrollTop+s[1]};case"lb":return{left:t.scrollLeft-i.width-r+s[0],top:t.scrollBottom-i.height+s[1]};case"right":return{left:t.scrollRight+r+s[0],top:t.scrollTop+Math.round(t.height/2)-Math.round(i.height/2)+s[1]};case"rt":return{left:t.scrollRight+r+s[0],top:t.scrollTop+s[1]};case"rb":return{left:t.scrollRight+r+s[0],top:t.scrollBottom-i.height+s[1]};default:return{left:0,top:0}}},IU=e=>{let t="0";["top","bottom"].includes(e)?t="50%":["left","lt","lb","tr","br"].includes(e)&&(t="100%");let i="0";return["left","right"].includes(e)?i="50%":["top","tl","tr","lb","rb"].includes(e)&&(i="100%"),`${t} ${i}`},LU=(e,t,i,r,{offset:a=0,translate:n=[0,0],customStyle:s={},autoFitPosition:o=!1}={})=>{let l=e,u=pf(e,i,r,{offset:a,translate:n});if(o){const d=DU(e,u,{containerRect:t,popupRect:r,triggerRect:i,offset:a,translate:n});u=d.popupPosition,l=d.position}return{style:hf({left:`${u.left}px`,top:`${u.top}px`},s),position:l}},BU=(e,t,i,{customStyle:r={}})=>{if(["top","tl","tr","bottom","bl","br"].includes(e)){let n=Math.abs(t.scrollLeft+t.width/2-i.scrollLeft);return n>i.width-8&&(t.width>i.width?n=i.width/2:n=i.width-8),["top","tl","tr"].includes(e)?hf({left:`${n}px`,bottom:"0",transform:"translate(-50%,50%) rotate(45deg)"},r):hf({left:`${n}px`,top:"0",transform:"translate(-50%,-50%) rotate(45deg)"},r)}let a=Math.abs(t.scrollTop+t.height/2-i.scrollTop);return a>i.height-8&&(t.height>i.height?a=i.height/2:a=i.height-8),["left","lt","lb"].includes(e)?hf({top:`${a}px`,right:"0",transform:"translate(50%,-50%) rotate(45deg)"},r):hf({top:`${a}px`,left:"0",transform:"translate(-50%,-50%) rotate(45deg)"},r)},zU=e=>e.scrollHeight>e.offsetHeight||e.scrollWidth>e.offsetWidth,n3=e=>{var t;const i=[];let r=e;for(;r&&r!==document.documentElement;)zU(r)&&i.push(r),r=(t=r.parentElement)!=null?t:void 0;return i};var Cz=function(){if(typeof Map<"u")return Map;function e(t,i){var r=-1;return t.some(function(a,n){return a[0]===i?(r=n,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(i){var r=e(this.__entries__,i),a=this.__entries__[r];return a&&a[1]},t.prototype.set=function(i,r){var a=e(this.__entries__,i);~a?this.__entries__[a][1]=r:this.__entries__.push([i,r])},t.prototype.delete=function(i){var r=this.__entries__,a=e(r,i);~a&&r.splice(a,1)},t.prototype.has=function(i){return!!~e(this.__entries__,i)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(i,r){r===void 0&&(r=null);for(var a=0,n=this.__entries__;a<n.length;a++){var s=n[a];i.call(r,s[1],s[0])}},t}()}(),A_=typeof window<"u"&&typeof document<"u"&&window.document===document,J0=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),RU=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(J0):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),NU=2;function VU(e,t){var i=!1,r=!1,a=0;function n(){i&&(i=!1,e()),r&&o()}function s(){RU(n)}function o(){var l=Date.now();if(i){if(l-a<NU)return;r=!0}else i=!0,r=!1,setTimeout(s,t);a=l}return o}var FU=20,jU=["top","right","bottom","left","width","height","size","weight"],$U=typeof MutationObserver<"u",UU=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=VU(this.refresh.bind(this),FU)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var i=this.observers_,r=i.indexOf(t);~r&&i.splice(r,1),!i.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(i){return i.gatherActive(),i.hasActive()});return t.forEach(function(i){return i.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!A_||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),$U?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!A_||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var i=t.propertyName,r=i===void 0?"":i,a=jU.some(function(n){return!!~r.indexOf(n)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),_z=function(e,t){for(var i=0,r=Object.keys(t);i<r.length;i++){var a=r[i];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},Wh=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||J0},Mz=kb(0,0,0,0);function ey(e){return parseFloat(e)||0}function s3(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.reduce(function(r,a){var n=e["border-"+a+"-width"];return r+ey(n)},0)}function WU(e){for(var t=["top","right","bottom","left"],i={},r=0,a=t;r<a.length;r++){var n=a[r],s=e["padding-"+n];i[n]=ey(s)}return i}function HU(e){var t=e.getBBox();return kb(0,0,t.width,t.height)}function GU(e){var t=e.clientWidth,i=e.clientHeight;if(!t&&!i)return Mz;var r=Wh(e).getComputedStyle(e),a=WU(r),n=a.left+a.right,s=a.top+a.bottom,o=ey(r.width),l=ey(r.height);if(r.boxSizing==="border-box"&&(Math.round(o+n)!==t&&(o-=s3(r,"left","right")+n),Math.round(l+s)!==i&&(l-=s3(r,"top","bottom")+s)),!YU(e)){var u=Math.round(o+n)-t,c=Math.round(l+s)-i;Math.abs(u)!==1&&(o-=u),Math.abs(c)!==1&&(l-=c)}return kb(a.left,a.top,o,l)}var qU=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof Wh(e).SVGGraphicsElement}:function(e){return e instanceof Wh(e).SVGElement&&typeof e.getBBox=="function"}}();function YU(e){return e===Wh(e).document.documentElement}function XU(e){return A_?qU(e)?HU(e):GU(e):Mz}function KU(e){var t=e.x,i=e.y,r=e.width,a=e.height,n=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(n.prototype);return _z(s,{x:t,y:i,width:r,height:a,top:i,right:t+r,bottom:a+i,left:t}),s}function kb(e,t,i,r){return{x:e,y:t,width:i,height:r}}var ZU=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=kb(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=XU(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),QU=function(){function e(t,i){var r=KU(i);_z(this,{target:t,contentRect:r})}return e}(),JU=function(){function e(t,i,r){if(this.activeObservations_=[],this.observations_=new Cz,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=i,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Wh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)||(i.set(t,new ZU(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof Wh(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var i=this.observations_;i.has(t)&&(i.delete(t),i.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(i){i.isActive()&&t.activeObservations_.push(i)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,i=this.activeObservations_.map(function(r){return new QU(r.target,r.broadcastRect())});this.callback_.call(t,i,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Ez=typeof WeakMap<"u"?new WeakMap:new Cz,Az=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=UU.getInstance(),r=new JU(t,i,this);Ez.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Az.prototype[e]=function(){var t;return(t=Ez.get(this))[e].apply(t,arguments)}});var Ob=function(){return typeof J0.ResizeObserver<"u"?J0.ResizeObserver:Az}();const Pz=()=>{const e={},t=ie(),i=()=>{const r=vz(e.value);r!==t.value&&(t.value=r)};return xi(()=>i()),Ss(()=>i()),{children:e,firstElement:t}};var oc=se({name:"ResizeObserver",props:{watchOnUpdated:Boolean},emits:["resize"],setup(e,{emit:t,slots:i}){const{children:r,firstElement:a}=Pz();let n;const s=l=>{l&&(n=new Ob(u=>{const c=u[0];t("resize",c)}),n.observe(l))},o=()=>{n&&(n.disconnect(),n=null)};return Vt(a,l=>{n&&o(),l&&s(l)}),Tn(()=>{n&&o()}),()=>{var l;return r.value=(l=i.default)==null?void 0:l.call(i),r.value}}});function vo(e,t){const i=ie(e[t]);return Ss(()=>{const r=e[t];i.value!==r&&(i.value=r)}),i}const o3=Symbol("ArcoTrigger"),Tz=typeof window>"u"?global:window,kz=Tz.requestAnimationFrame,ty=Tz.cancelAnimationFrame;function ud(e){let t=0;const i=(...r)=>{t&&ty(t),t=kz(()=>{e(...r),t=0})};return i.cancel=()=>{ty(t),t=0},i}const e7=1e3,t7=5e3,i7=1;class r7{constructor(){this.popupStack={popup:new Set,dialog:new Set,message:new Set},this.getNextZIndex=t=>(t==="message"?Array.from(this.popupStack.message).pop()||t7:Array.from(this.popupStack.popup).pop()||e7)+i7,this.add=t=>{const i=this.getNextZIndex(t);return this.popupStack[t].add(i),t==="dialog"&&this.popupStack.popup.add(i),i},this.delete=(t,i)=>{this.popupStack[i].delete(t),i==="dialog"&&this.popupStack.popup.delete(t)},this.isLastDialog=t=>this.popupStack.dialog.size>1?t===Array.from(this.popupStack.dialog).pop():!0}}const V1=new r7;function cp(e,{visible:t,runOnMounted:i}={}){const r=ie(0),a=()=>{r.value=V1.add(e)},n=()=>{V1.delete(r.value,e)},s=()=>e==="dialog"?V1.isLastDialog(r.value):!1;return Vt(()=>t?.value,o=>{o?a():n()},{immediate:!0}),i&&(xi(()=>{a()}),Tn(()=>{n()})),{zIndex:m9(r),open:a,close:n,isLastDialog:s}}const a7=({elementRef:e,onResize:t})=>{let i;return{createResizeObserver:()=>{e.value&&(i=new Ob(n=>{const s=n[0];Zt(t)&&t(s)}),i.observe(e.value))},destroyResizeObserver:()=>{i&&(i.disconnect(),i=null)}}};var oE=se({name:"ClientOnly",setup(e,{slots:t}){const i=ie(!1);return xi(()=>i.value=!0),()=>{var r;return i.value?(r=t.default)==null?void 0:r.call(t):null}}});const lE=({popupContainer:e,visible:t,defaultContainer:i="body",documentContainer:r})=>{const a=ie(e.value),n=ie(),s=()=>{const o=el(e.value),l=o?e.value:i,u=o??(r?document.documentElement:el(i));l!==a.value&&(a.value=l),u!==n.value&&(n.value=u)};return xi(()=>s()),Vt(t,o=>{a.value!==e.value&&o&&s()}),{teleportContainer:a,containerRef:n}};var n7=Object.defineProperty,s7=Object.defineProperties,o7=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,l7=Object.prototype.hasOwnProperty,u7=Object.prototype.propertyIsEnumerable,u3=(e,t,i)=>t in e?n7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,c7=(e,t)=>{for(var i in t||(t={}))l7.call(t,i)&&u3(e,i,t[i]);if(l3)for(var i of l3(t))u7.call(t,i)&&u3(e,i,t[i]);return e},d7=(e,t)=>s7(e,o7(t));const h7=["onClick","onMouseenter","onMouseleave","onFocusin","onFocusout","onContextmenu"];var F1=se({name:"Trigger",inheritAttrs:!1,props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"bottom"},disabled:{type:Boolean,default:!1},popupOffset:{type:Number,default:0},popupTranslate:{type:[Array,Object]},showArrow:{type:Boolean,default:!1},alignPoint:{type:Boolean,default:!1},popupHoverStay:{type:Boolean,default:!0},blurToClose:{type:Boolean,default:!0},clickToClose:{type:Boolean,default:!0},clickOutsideToClose:{type:Boolean,default:!0},unmountOnClose:{type:Boolean,default:!0},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupStyle:{type:Object},animationName:{type:String,default:"fade-in"},duration:{type:[Number,Object]},mouseEnterDelay:{type:Number,default:100},mouseLeaveDelay:{type:Number,default:100},focusDelay:{type:Number,default:0},autoFitPopupWidth:{type:Boolean,default:!1},autoFitPopupMinWidth:{type:Boolean,default:!1},autoFixPosition:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},updateAtScroll:{type:Boolean,default:!1},autoFitTransformOrigin:{type:Boolean,default:!1},hideEmpty:{type:Boolean,default:!1},openedClass:{type:[String,Array,Object]},autoFitPosition:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},preventFocus:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},scrollToCloseDistance:{type:Number,default:0}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,show:()=>!0,hide:()=>!0,resize:()=>!0},setup(e,{emit:t,slots:i,attrs:r}){const{popupContainer:a}=yt(e),n=Se("trigger"),s=T(()=>ln(r,h7)),o=Ai(Pn,void 0),l=T(()=>[].concat(e.trigger)),u=new Set,c=Ai(o3,void 0),{children:d,firstElement:h}=Pz(),p=ie(),f=ie(e.defaultPopupVisible),v=ie(e.position),m=ie({}),g=ie({}),y=ie({}),b=ie(),x=ie({top:0,left:0});let S=null,w=null;const E=T(()=>{var Te;return(Te=e.popupVisible)!=null?Te:f.value}),{teleportContainer:M,containerRef:P}=lE({popupContainer:a,visible:E,documentContainer:!0}),{zIndex:A}=cp("popup",{visible:E});let k=0,I=!1,O=!1;const D=()=>{k&&(window.clearTimeout(k),k=0)},F=Te=>{if(e.alignPoint){const{pageX:Be,pageY:Le}=Te;x.value={top:Le,left:Be}}},U=()=>{if(!h.value||!p.value||!P.value)return;const Te=P.value.getBoundingClientRect(),Be=e.alignPoint?{top:x.value.top,bottom:x.value.top,left:x.value.left,right:x.value.left,scrollTop:x.value.top,scrollBottom:x.value.top,scrollLeft:x.value.left,scrollRight:x.value.left,width:0,height:0}:a3(h.value,Te),Le=()=>a3(p.value,Te),jt=Le(),{style:kt,position:Qt}=LU(e.position,Te,Be,jt,{offset:e.popupOffset,translate:e.popupTranslate,customStyle:e.popupStyle,autoFitPosition:e.autoFitPosition});e.autoFitTransformOrigin&&(g.value={transformOrigin:IU(Qt)}),e.autoFitPopupMinWidth?kt.minWidth=`${Be.width}px`:e.autoFitPopupWidth&&(kt.width=`${Be.width}px`),v.value!==Qt&&(v.value=Qt),m.value=kt,e.showArrow&&hr(()=>{y.value=BU(Qt,Be,Le(),{customStyle:e.arrowStyle})})},z=(Te,Be)=>{if(Te===E.value&&k===0)return;const Le=()=>{f.value=Te,t("update:popupVisible",Te),t("popupVisibleChange",Te),Te&&hr(()=>{U()})};Te||(S=null,w=null),Be?(D(),Te!==E.value&&(k=window.setTimeout(Le,Be))):Le()},B=Te=>{var Be;(Be=r.onClick)==null||Be.call(r,Te),!(e.disabled||E.value&&!e.clickToClose)&&(l.value.includes("click")?(F(Te),z(!E.value)):l.value.includes("contextMenu")&&E.value&&z(!1))},W=Te=>{var Be;(Be=r.onMouseenter)==null||Be.call(r,Te),!(e.disabled||!l.value.includes("hover"))&&(F(Te),z(!0,e.mouseEnterDelay))},R=Te=>{c?.onMouseenter(Te),W(Te)},$=Te=>{var Be;(Be=r.onMouseleave)==null||Be.call(r,Te),!(e.disabled||!l.value.includes("hover"))&&z(!1,e.mouseLeaveDelay)},q=Te=>{c?.onMouseleave(Te),$(Te)},Z=Te=>{var Be;(Be=r.onFocusin)==null||Be.call(r,Te),!(e.disabled||!l.value.includes("focus"))&&z(!0,e.focusDelay)},G=Te=>{var Be;(Be=r.onFocusout)==null||Be.call(r,Te),!(e.disabled||!l.value.includes("focus"))&&e.blurToClose&&z(!1)},X=Te=>{var Be;(Be=r.onContextmenu)==null||Be.call(r,Te),!(e.disabled||!l.value.includes("contextMenu")||E.value&&!e.clickToClose)&&(F(Te),z(!E.value),Te.preventDefault())};dr(o3,gt({onMouseenter:R,onMouseleave:q,addChildRef:Te=>{u.add(Te),c?.addChildRef(Te)},removeChildRef:Te=>{u.delete(Te),c?.removeChildRef(Te)}}));const fe=()=>{Ir(document.documentElement,"mousedown",me),I=!1},de=vo(i,"content"),ge=T(()=>{var Te;return e.hideEmpty&&l$((Te=de.value)==null?void 0:Te.call(de))}),me=Te=>{var Be,Le,jt;if(!((Be=h.value)!=null&&Be.contains(Te.target)||(Le=p.value)!=null&&Le.contains(Te.target))){for(const kt of u)if((jt=kt.value)!=null&&jt.contains(Te.target))return;fe(),z(!1)}},ke=(Te,Be)=>{const[Le,jt]=Te,{scrollTop:kt,scrollLeft:Qt}=Be;return Math.abs(kt-Le)>=e.scrollToCloseDistance||Math.abs(Qt-jt)>=e.scrollToCloseDistance},ce=ud(Te=>{if(E.value)if(e.scrollToClose||o?.scrollToClose){const Be=Te.target;S||(S=[Be.scrollTop,Be.scrollLeft]),ke(S,Be)?z(!1):U()}else U()}),le=()=>{Ir(window,"scroll",xe),O=!1},xe=ud(Te=>{const Be=Te.target.documentElement;w||(w=[Be.scrollTop,Be.scrollLeft]),ke(w,Be)&&(z(!1),le())}),Ne=()=>{E.value&&U()},pt=()=>{Ne(),t("resize")},at=Te=>{e.preventFocus&&Te.preventDefault()};c?.addChildRef(p);const Oe=T(()=>E.value?e.openedClass:void 0);let Ye;Vt(E,Te=>{if(e.clickOutsideToClose&&(!Te&&I?fe():Te&&!I&&(wr(document.documentElement,"mousedown",me),I=!0)),(e.scrollToClose||o?.scrollToClose)&&(wr(window,"scroll",xe),O=!0),e.updateAtScroll||o?.updateAtScroll){if(Te){Ye=n3(h.value);for(const Be of Ye)Be.addEventListener("scroll",ce)}else if(Ye){for(const Be of Ye)Be.removeEventListener("scroll",ce);Ye=void 0}}Te&&(K.value=!0)}),Vt(()=>[e.autoFitPopupWidth,e.autoFitPopupMinWidth],()=>{E.value&&U()});const{createResizeObserver:xt,destroyResizeObserver:ne}=a7({elementRef:P,onResize:Ne});xi(()=>{if(xt(),E.value&&(U(),e.clickOutsideToClose&&!I&&(wr(document.documentElement,"mousedown",me),I=!0),e.updateAtScroll||o?.updateAtScroll)){Ye=n3(h.value);for(const Te of Ye)Te.addEventListener("scroll",ce)}}),Ss(()=>{E.value&&U()}),v9(()=>{z(!1)}),Tn(()=>{if(c?.removeChildRef(p),ne(),I&&fe(),O&&le(),Ye){for(const Te of Ye)Te.removeEventListener("scroll",ce);Ye=void 0}});const K=ie(E.value),ze=ie(!1),ft=()=>{ze.value=!0},te=()=>{ze.value=!1,E.value&&t("show")},Pe=()=>{ze.value=!1,E.value||(K.value=!1,t("hide"))};return()=>{var Te,Be;return d.value=(Be=(Te=i.default)==null?void 0:Te.call(i))!=null?Be:[],fz(d.value,{class:Oe.value,onClick:B,onMouseenter:W,onMouseleave:$,onFocusin:Z,onFocusout:G,onContextmenu:X}),_(Xt,null,[e.autoFixPosition?_(oc,{onResize:pt},{default:()=>[d.value]}):d.value,_(oE,null,{default:()=>[_(Cb,{to:M.value,disabled:!e.renderToBody},{default:()=>[(!e.unmountOnClose||E.value||K.value)&&!ge.value&&_(oc,{onResize:Ne},{default:()=>[_("div",it({ref:p,class:[`${n}-popup`,`${n}-position-${v.value}`],style:d7(c7({},m.value),{zIndex:A.value,pointerEvents:ze.value?"none":"auto"}),"trigger-placement":v.value,onMouseenter:R,onMouseleave:q,onMousedown:at},s.value),[_(rs,{name:e.animationName,duration:e.duration,appear:!0,onBeforeEnter:ft,onAfterEnter:te,onBeforeLeave:ft,onAfterLeave:Pe},{default:()=>{var Le;return[Ys(_("div",{class:`${n}-popup-wrapper`,style:g.value},[_("div",{class:[`${n}-content`,e.contentClass],style:e.contentStyle},[(Le=i.content)==null?void 0:Le.call(i)]),e.showArrow&&_("div",{ref:b,class:[`${n}-arrow`,e.arrowClass],style:y.value},null)]),[[Xs,E.value]])]}})])]})]})]})])}}});const $a=Object.assign(F1,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+F1.name,F1)}});var p7=Object.defineProperty,c3=Object.getOwnPropertySymbols,f7=Object.prototype.hasOwnProperty,m7=Object.prototype.propertyIsEnumerable,d3=(e,t,i)=>t in e?p7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,h3=(e,t)=>{for(var i in t||(t={}))f7.call(t,i)&&d3(e,i,t[i]);if(c3)for(var i of c3(t))m7.call(t,i)&&d3(e,i,t[i]);return e};const v7=se({name:"Tooltip",components:{Trigger:$a},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},content:String,position:{type:String,default:"top"},mini:{type:Boolean,default:!1},backgroundColor:{type:String},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:t}){const i=Se("tooltip"),r=ie(e.defaultPopupVisible),a=T(()=>{var c;return(c=e.popupVisible)!=null?c:r.value}),n=c=>{r.value=c,t("update:popupVisible",c),t("popupVisibleChange",c)},s=T(()=>[`${i}-content`,e.contentClass,{[`${i}-mini`]:e.mini}]),o=T(()=>{if(e.backgroundColor||e.contentStyle)return h3({backgroundColor:e.backgroundColor},e.contentStyle)}),l=T(()=>[`${i}-popup-arrow`,e.arrowClass]),u=T(()=>{if(e.backgroundColor||e.arrowStyle)return h3({backgroundColor:e.backgroundColor},e.arrowStyle)});return{prefixCls:i,computedPopupVisible:a,contentCls:s,computedContentStyle:o,arrowCls:l,computedArrowStyle:u,handlePopupVisibleChange:n}}});function g7(e,t,i,r,a,n){const s=be("Trigger");return N(),De(s,{class:Y(e.prefixCls),trigger:"hover",position:e.position,"popup-visible":e.computedPopupVisible,"popup-offset":10,"show-arrow":"","content-class":e.contentCls,"content-style":e.computedContentStyle,"arrow-class":e.arrowCls,"arrow-style":e.computedArrowStyle,"popup-container":e.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",role:"tooltip",onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[ye(e.$slots,"content",{},()=>[ti(Bt(e.content),1)])]),default:He(()=>[ye(e.$slots,"default")]),_:3},8,["class","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}var j1=We(v7,[["render",g7]]);const eo=Object.assign(j1,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+j1.name,j1)}}),y7=se({name:"IconCopy",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-copy`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),b7=["stroke-width","stroke-linecap","stroke-linejoin"],w7=ve("path",{d:"M20 6h18a2 2 0 0 1 2 2v22M8 16v24c0 1.105.891 2 1.996 2h20.007A1.99 1.99 0 0 0 32 40.008V15.997A1.997 1.997 0 0 0 30 14H10a2 2 0 0 0-2 2Z"},null,-1),x7=[w7];function S7(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},x7,14,b7)}var $1=We(y7,[["render",S7]]);const C7=Object.assign($1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+$1.name,$1)}}),_7=se({name:"IconEdit",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-edit`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),M7=["stroke-width","stroke-linecap","stroke-linejoin"],E7=ve("path",{d:"m30.48 19.038 5.733-5.734a1 1 0 0 0 0-1.414l-5.586-5.586a1 1 0 0 0-1.414 0l-5.734 5.734m7 7L15.763 33.754a1 1 0 0 1-.59.286l-6.048.708a1 1 0 0 1-1.113-1.069l.477-6.31a1 1 0 0 1 .29-.631l14.7-14.7m7 7-7-7M6 42h36"},null,-1),A7=[E7];function P7(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},A7,14,M7)}var U1=We(_7,[["render",P7]]);const T7=Object.assign(U1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+U1.name,U1)}}),rv={formatYear:"YYYY 年",formatMonth:"YYYY 年 MM 月",today:"今天",view:{month:"月",year:"年",week:"周",day:"日"},month:{long:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"},short:{January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月"}},week:{long:{self:"周",monday:"周一",tuesday:"周二",wednesday:"周三",thursday:"周四",friday:"周五",saturday:"周六",sunday:"周日"},short:{self:"周",monday:"一",tuesday:"二",wednesday:"三",thursday:"四",friday:"五",saturday:"六",sunday:"日"}}},k7={locale:"zh-CN",empty:{description:"暂无数据"},drawer:{okText:"确定",cancelText:"取消"},popconfirm:{okText:"确定",cancelText:"取消"},modal:{okText:"确定",cancelText:"取消"},pagination:{goto:"前往",page:"页",countPerPage:"条/页",total:"共 {0} 条"},table:{okText:"确定",resetText:"重置"},upload:{start:"开始",cancel:"取消",delete:"删除",retry:"点击重试",buttonText:"点击上传",preview:"预览",drag:"点击或拖拽文件到此处上传",dragHover:"释放文件并开始上传",error:"上传失败"},calendar:rv,datePicker:{view:rv.view,month:rv.month,week:rv.week,placeholder:{date:"请选择日期",week:"请选择周",month:"请选择月份",year:"请选择年份",quarter:"请选择季度",time:"请选择时间"},rangePlaceholder:{date:["开始日期","结束日期"],week:["开始周","结束周"],month:["开始月份","结束月份"],year:["开始年份","结束年份"],quarter:["开始季度","结束季度"],time:["开始时间","结束时间"]},selectTime:"选择时间",today:"今天",now:"此刻",ok:"确定"},image:{loading:"加载中"},imagePreview:{fullScreen:"全屏",rotateRight:"向右旋转",rotateLeft:"向左旋转",zoomIn:"放大",zoomOut:"缩小",originalSize:"原始尺寸"},typography:{copied:"已复制",copy:"复制",expand:"展开",collapse:"折叠",edit:"编辑"},form:{validateMessages:{required:"#{field} 是必填项",type:{string:"#{field} 不是合法的文本类型",number:"#{field} 不是合法的数字类型",boolean:"#{field} 不是合法的布尔类型",array:"#{field} 不是合法的数组类型",object:"#{field} 不是合法的对象类型",url:"#{field} 不是合法的 url 地址",email:"#{field} 不是合法的邮箱地址",ip:"#{field} 不是合法的 IP 地址"},number:{min:"`#{value}` 小于最小值 `#{min}`",max:"`#{value}` 大于最大值 `#{max}`",equal:"`#{value}` 不等于 `#{equal}`",range:"`#{value}` 不在 `#{min} ~ #{max}` 范围内",positive:"`#{value}` 不是正数",negative:"`#{value}` 不是负数"},array:{length:"`#{field}` 个数不等于 #{length}",minLength:"`#{field}` 个数最少为 #{minLength}",maxLength:"`#{field}` 个数最多为 #{maxLength}",includes:"#{field} 不包含 #{includes}",deepEqual:"#{field} 不等于 #{deepEqual}",empty:"`#{field}` 不是空数组"},string:{minLength:"字符数最少为 #{minLength}",maxLength:"字符数最多为 #{maxLength}",length:"字符数必须是 #{length}",match:"`#{value}` 不符合模式 #{pattern}",uppercase:"`#{value}` 必须全大写",lowercase:"`#{value}` 必须全小写"},object:{deepEqual:"`#{field}` 不等于期望值",hasKeys:"`#{field}` 不包含必须字段",empty:"`#{field}` 不是对象"},boolean:{true:"期望是 `true`",false:"期望是 `false`"}}},colorPicker:{history:"最近使用颜色",preset:"系统预设颜色",empty:"暂无"}},uE=ie("zh-CN"),iy=gt({"zh-CN":k7}),O7=(e,t)=>{for(const i of Object.keys(e))(!iy[i]||t?.overwrite)&&(iy[i]=e[i])},D7=e=>{if(!iy[e]){console.warn(`use ${e} failed! Please add ${e} first`);return}uE.value=e},I7=()=>uE.value,Yr=()=>{const e=Ai(Pn,void 0),t=T(()=>{var a;return(a=e?.locale)!=null?a:iy[uE.value]}),i=T(()=>t.value.locale);return{i18nMessage:t,locale:i,t:(a,...n)=>{const s=a.split(".");let o=t.value;for(const l of s){if(!o[l])return a;o=o[l]}return na(o)&&n.length>0?o.replace(/{(\d+)}/g,(l,u)=>{var c;return(c=n[u])!=null?c:l}):o}}},L7=se({name:"TypographyOperations",components:{Tooltip:eo,IconCheckCircleFill:bd,IconCopy:C7,IconEdit:T7},props:{editable:Boolean,copyable:Boolean,expandable:Boolean,isCopied:Boolean,isEllipsis:Boolean,expanded:Boolean,forceRenderExpand:Boolean,editTooltipProps:Object,copyTooltipProps:Object},emits:{edit:()=>!0,copy:()=>!0,expand:()=>!0},setup(e,{emit:t}){const i=Se("typography"),r=T(()=>e.forceRenderExpand||e.expandable&&e.isEllipsis),{t:a}=Yr();return{prefixCls:i,showExpand:r,t:a,onEditClick(){t("edit")},onCopyClick(){t("copy")},onExpandClick(){t("expand")}}}});function B7(e,t,i,r,a,n){const s=be("IconEdit"),o=be("Tooltip"),l=be("IconCheckCircleFill"),u=be("IconCopy");return N(),ee(Xt,null,[e.editable?(N(),De(o,it({key:0,content:e.t("typography.edit")},e.editTooltipProps),{default:He(()=>[ve("span",{class:Y(`${e.prefixCls}-operation-edit`),onClick:t[0]||(t[0]=ks((...c)=>e.onEditClick&&e.onEditClick(...c),["stop"]))},[_(s)],2)]),_:1},16,["content"])):Me("v-if",!0),e.copyable?(N(),De(o,br(it({key:1},e.copyTooltipProps)),{content:He(()=>[ye(e.$slots,"copy-tooltip",{copied:e.isCopied},()=>[ti(Bt(e.isCopied?e.t("typography.copied"):e.t("typography.copy")),1)])]),default:He(()=>[ve("span",{class:Y({[`${e.prefixCls}-operation-copied`]:e.isCopied,[`${e.prefixCls}-operation-copy`]:!e.isCopied}),onClick:t[1]||(t[1]=ks((...c)=>e.onCopyClick&&e.onCopyClick(...c),["stop"]))},[ye(e.$slots,"copy-icon",{copied:e.isCopied},()=>[e.isCopied?(N(),De(l,{key:0})):(N(),De(u,{key:1}))])],2)]),_:3},16)):Me("v-if",!0),e.showExpand?(N(),ee("a",{key:2,class:Y(`${e.prefixCls}-operation-expand`),onClick:t[2]||(t[2]=ks((...c)=>e.onExpandClick&&e.onExpandClick(...c),["stop"]))},[ye(e.$slots,"expand-node",{expanded:e.expanded},()=>[ti(Bt(e.expanded?e.t("typography.collapse"):e.t("typography.expand")),1)])],2)):Me("v-if",!0)],64)}var p3=We(L7,[["render",B7]]),Ao=se({name:"ResizeObserver",emits:["resize"],setup(e,{emit:t,slots:i}){let r;const a=ie(),n=T(()=>oz(a.value)?a.value.$el:a.value),s=l=>{l&&(r=new Ob(u=>{const c=u[0];t("resize",c)}),r.observe(l))},o=()=>{r&&(r.disconnect(),r=null)};return Vt(n,l=>{r&&o(),l&&s(l)}),xi(()=>{n.value&&s(n.value)}),sn(()=>{o()}),()=>{var l,u;const c=_h((u=(l=i.default)==null?void 0:l.call(i))!=null?u:[]);return c?Uh(c,{ref:a},!0):null}}});let Sa;function z7(e){return Array.prototype.slice.apply(e).map(i=>`${i}: ${e.getPropertyValue(i)};`).join("")}function W1(e){if(!e)return 0;const t=e.match(/^\d*(\.\d*)?/);return t?Number(t[0]):0}var R7=(e,t,i,r)=>{Sa||(Sa=document.createElement("div"),document.body.appendChild(Sa));const{rows:a,suffix:n,ellipsisStr:s}=t,o=window.getComputedStyle(e),l=z7(o),u=W1(o.lineHeight),c=Math.round(u*a+W1(o.paddingTop)+W1(o.paddingBottom));Sa.setAttribute("style",l),Sa.setAttribute("aria-hidden","true"),Sa.style.height="auto",Sa.style.minHeight="auto",Sa.style.maxHeight="auto",Sa.style.position="fixed",Sa.style.left="0",Sa.style.top="-99999999px",Sa.style.zIndex="-200",Sa.style.whiteSpace="normal";const d=nz({render(){return _("span",null,[i])}});d.mount(Sa);const h=Array.prototype.slice.apply(Sa.childNodes[0].cloneNode(!0).childNodes);d.unmount(),Sa.innerHTML="";const p=document.createTextNode(`${s}${n}`);Sa.appendChild(p),h.forEach(g=>{Sa.appendChild(g)});const f=document.createTextNode(r);Sa.insertBefore(f,p);function v(){return Sa.offsetHeight<=c}if(v())return{ellipsis:!1,text:r};function m(g,y=0,b=r.length,x=0){const S=Math.floor((y+b)/2),w=r.slice(0,S);if(g.textContent=w,y>=b-1)for(let E=b;E>=y;E-=1){const M=r.slice(0,E);if(g.textContent=M,v()||!M)return}v()?m(g,S,b,S):m(g,y,S,x)}return m(f),{text:f.textContent,ellipsis:!0}};const N7=async e=>{var t;if((t=navigator.clipboard)!=null&&t.writeText)try{await navigator.clipboard.writeText(e);return}catch(n){console.error(n??new DOMException("The request is not allowed","NotAllowedError"))}const i=document.createElement("span");i.textContent=e,i.style.whiteSpace="pre",document.body.appendChild(i);const r=window.getSelection(),a=window.document.createRange();r?.removeAllRanges(),a.selectNode(i),r?.addRange(a);try{window.document.execCommand("copy")}catch(n){console.error(`execCommand Error: ${n}`)}r?.removeAllRanges(),window.document.body.removeChild(i)};let Pd;function V7(e){if(!e)return"";Pd||(Pd=document.createElement("div"),Pd.setAttribute("aria-hidden","true"),document.body.appendChild(Pd));const t=nz({render(){return _("div",null,[e])}});t.mount(Pd);const i=Pd.innerText;return t.unmount(),i}const F7=se({name:"Popover",components:{Trigger:$a},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},title:String,content:String,trigger:{type:[String,Array],default:"hover"},position:{type:String,default:"top"},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:t}){const i=Se("popover"),r=ie(e.defaultPopupVisible),a=T(()=>{var l;return(l=e.popupVisible)!=null?l:r.value}),n=l=>{r.value=l,t("update:popupVisible",l),t("popupVisibleChange",l)},s=T(()=>[`${i}-popup-content`,e.contentClass]),o=T(()=>[`${i}-popup-arrow`,e.arrowClass]);return{prefixCls:i,computedPopupVisible:a,contentCls:s,arrowCls:o,handlePopupVisibleChange:n}}});function j7(e,t,i,r,a,n){const s=be("trigger");return N(),De(s,{class:Y(e.prefixCls),trigger:e.trigger,position:e.position,"popup-visible":e.computedPopupVisible,"popup-offset":10,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"show-arrow":"","popup-container":e.popupContainer,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[ve("div",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2),ve("div",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"content",{},()=>[ti(Bt(e.content),1)])],2)]),default:He(()=>[ye(e.$slots,"default")]),_:3},8,["class","trigger","position","popup-visible","content-class","content-style","arrow-class","arrow-style","popup-container","onPopupVisibleChange"])}var H1=We(F7,[["render",j7]]);const cE=Object.assign(H1,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+H1.name,H1)}});var $7=Object.defineProperty,U7=Object.defineProperties,W7=Object.getOwnPropertyDescriptors,f3=Object.getOwnPropertySymbols,H7=Object.prototype.hasOwnProperty,G7=Object.prototype.propertyIsEnumerable,m3=(e,t,i)=>t in e?$7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,q7=(e,t)=>{for(var i in t||(t={}))H7.call(t,i)&&m3(e,i,t[i]);if(f3)for(var i of f3(t))G7.call(t,i)&&m3(e,i,t[i]);return e},Y7=(e,t)=>U7(e,W7(t));function Oz(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}function X7(e){const{bold:t,mark:i,underline:r,delete:a,code:n}=e,s=[];return t&&s.push("b"),r&&s.push("u"),a&&s.push("del"),n&&s.push("code"),i&&s.push("mark"),s}function v3(e,t){const{mark:i}=e,r=X7(e),a=ki(i)&&i.color?{backgroundColor:i.color}:{};return r.reduce((n,s)=>_(s,s==="mark"?{style:a}:{},Oz(n)?n:{default:()=>[n]}),t)}function K7(e){const t=!!e.showTooltip,i=ki(e.showTooltip)&&e.showTooltip.type==="popover"?cE:eo,r=ki(e.showTooltip)&&e.showTooltip.props||{};return Y7(q7({rows:1,suffix:"",ellipsisStr:"...",expandable:!1,css:!1},ln(e,["showTooltip"])),{showTooltip:t,TooltipComponent:i,tooltipProps:r})}var dE=se({name:"TypographyBase",inheritAttrs:!1,props:{component:{type:String,required:!0},type:{type:String},bold:{type:Boolean},mark:{type:[Boolean,Object],default:!1},underline:{type:Boolean},delete:{type:Boolean},code:{type:Boolean},disabled:{type:Boolean},editable:{type:Boolean},editing:{type:Boolean,default:void 0},defaultEditing:{type:Boolean},editText:{type:String},copyable:{type:Boolean},copyText:{type:String},copyDelay:{type:Number,default:3e3},ellipsis:{type:[Boolean,Object],default:!1},editTooltipProps:{type:Object},copyTooltipProps:{type:Object}},emits:{editStart:()=>!0,change:e=>!0,"update:editText":e=>!0,editEnd:()=>!0,"update:editing":e=>!0,copy:e=>!0,ellipsis:e=>!0,expand:e=>!0},setup(e,{slots:t,emit:i,attrs:r}){const{editing:a,defaultEditing:n,ellipsis:s,copyable:o,editable:l,copyText:u,editText:c,copyDelay:d,component:h}=yt(e),p=Se("typography"),f=T(()=>[p,{[`${p}-${e.type}`]:e.type,[`${p}-disabled`]:e.disabled}]),v=ie(),m=ie(""),[g,y]=ja(n.value,gt({value:a})),b=T(()=>l.value&&g.value);function x(){i("update:editing",!0),i("editStart"),y(!0)}function S(X){i("update:editText",X),i("change",X)}function w(){g.value&&(i("update:editing",!1),i("editEnd"),y(!1))}const E=ie(!1);let M=null;function P(){var X;const J=(X=u.value)!=null?X:m.value;N7(J||""),E.value=!0,i("copy",J),M=setTimeout(()=>{E.value=!1},d.value)}sn(()=>{M&&clearTimeout(M),M=null});const A=ie(!1),k=ie(!1),I=ie(""),O=T(()=>K7(ki(s.value)&&s.value||{}));let D=null;function F(){const X=!k.value;k.value=X,i("expand",X)}function U(X=!1){return O.value.css?_(p3,{editable:l.value,copyable:o.value,expandable:O.value.expandable,isCopied:E.value,isEllipsis:q.value,expanded:k.value,forceRenderExpand:X||k.value,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:x,onCopy:P,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]}):_(p3,{editable:l.value,copyable:o.value,expandable:O.value.expandable,isCopied:E.value,isEllipsis:A.value,expanded:k.value,forceRenderExpand:X,editTooltipProps:e.editTooltipProps,copyTooltipProps:e.copyTooltipProps,onEdit:x,onCopy:P,onExpand:F},{"copy-tooltip":t["copy-tooltip"],"copy-icon":t["copy-icon"],"expand-node":t["expand-node"]})}function z(){if(!v.value)return;const{ellipsis:X,text:J}=R7(v.value,O.value,U(!!O.value.expandable),m.value);A.value!==X&&(A.value=X,O.value.css||i("ellipsis",X)),I.value!==J&&(I.value=J||"")}function B(){s.value&&!k.value&&(ty(D),D=kz(()=>{z()}))}sn(()=>{ty(D)}),Vt(()=>O.value.rows,()=>{B()}),Vt(s,X=>{X?B():A.value=!1});let W=[];const R=()=>{if(s.value||o.value||l.value){const X=V7(W);X!==m.value&&(m.value=X,B())}};xi(R),Ss(R);const $=ie(),q=ie(!1),Z=()=>{if(v.value&&$.value){const X=$.value.offsetHeight>v.value.offsetHeight;X!==q.value&&(q.value=X,i("ellipsis",X))}},G=T(()=>k.value?{}:{overflow:"hidden","text-overflow":"ellipsis",display:"-webkit-box","-webkit-line-clamp":O.value.rows,"-webkit-box-orient":"vertical"});return()=>{var X,J;if(W=((X=t.default)==null?void 0:X.call(t))||[],b.value){const Ne=(J=c.value)!=null?J:m.value;return _(EU,{text:Ne,onChange:pt=>{pt!==Ne&&S(pt)},onEnd:w},null)}const{suffix:pe,ellipsisStr:fe,showTooltip:de,tooltipProps:ge,TooltipComponent:me}=O.value,ke=A.value&&!k.value,ce=ke&&!de?{title:m.value}:{},le=h.value;if(O.value.css){const Ne=v3(e,W),pt=_(le,it({class:f.value,ref:v,style:G.value},ce,r),{default:()=>[_("span",{ref:$},[Ne])]});return q.value?_(me,it(ge,{onResize:()=>Z()}),{default:()=>[pt],content:()=>m.value}):_(Ao,{onResize:()=>{Z()}},Oz(pt)?pt:{default:()=>[pt]})}const xe=v3(e,ke?I.value:W);return _(Ao,{onResize:()=>B()},{default:()=>[_(le,it({class:f.value,ref:v},ce,r),{default:()=>[ke&&de?_(me,ge,{default:()=>[_("span",null,[xe])],content:()=>m.value}):xe,ke?fe:null,pe,U()]})]})}}}),Pf=se({name:"TypographyParagraph",inheritAttrs:!1,props:{blockquote:{type:Boolean},spacing:{type:String,default:"default"}},setup(e){const{blockquote:t,spacing:i}=yt(e),r=Se("typography"),a=T(()=>t?.value?"blockquote":"div"),n=T(()=>[{[`${r}-spacing-close`]:i?.value==="close"}]);return{component:a,classNames:n}},render(){const{component:e,classNames:t}=this;return _(dE,it({class:t},this.$attrs,{component:e}),this.$slots)}});const Z7={id:"container"},Q7={id:"head"},J7={class:"title"},eW={href:"https://ritheme.com/theme/riplus.html",class:"text-dark",style:{color:"inherit","text-decoration":"none"}},tW={class:"descBox"},iW={class:"body"},rW=["src","alt"],aW={id:"footer"},nW=se({__name:"VImageCard",props:{template:{type:Object,default:{title:"${title}",image:{src:"https://ritheme.com/wp-content/uploads/2023/06/theme-ripro-v5-300x200.jpg"},tags:[{tag:"V8.1",color:"#86909c"},{tag:"强大首选",color:"#d16c74"}],description:{rows:2,content:`A design is a plan or specification for theconstruction of an object or system or for the implementation of an activity or process, or the result of that plan or specification in the form of a prototype, product or
          process. The verb to design expresses the process of developing a design. The verb to design expresses the
          process of developing a design.A design is a plan or specification for the construction of an object or system
          or for the implementation of an activity or process, or the result of that plan or specification in the form
          of a prototype, product or process. The verb to design expresses the process of developing a design. The verb
          to design expresses the process of developing a design.`},footButton:{leftButton:{text:"主题介绍",type:"",status:"danger"},rightButton:{text:"正版演示",type:"primary",status:"normal"}}}}},setup(e){const i=e.template;return(r,a)=>(N(),ee("div",Z7,[ur(i).badge?(N(),ee("div",{key:0,class:"badge",style:It({backgroundColor:ur(i).badge.bgColor??"red",color:ur(i).badge.color??"white"})},Bt(ur(i).badge.text),5)):Me("",!0),ve("div",Q7,[ve("div",J7,[_(ur(__),null,{default:He(()=>[ve("a",eW,Bt(ur(i).title),1),(N(!0),ee(Xt,null,Br(ur(i).tags,n=>(N(),De(ur(Pb),{key:n.tag,size:"small",color:n.color},{default:He(()=>[ti(Bt(n.tag),1)]),_:2},1032,["color"]))),128))]),_:1})]),ve("div",tW,[_(ur(Pf),{ellipsis:{rows:ur(i).description.rows}},{default:He(()=>[ti(Bt(ur(i).description.content),1)]),_:1},8,["ellipsis"])])]),ve("div",iW,[ve("img",{class:"theme-item-media",src:ur(i).image.src,alt:ur(i).image.alt},null,8,rW)]),ve("div",aW,[ur(i).footButton?(N(),De(ur(__),{key:0},{default:He(()=>[_(ur(un),br(Ea(ur(i).footButton.leftButton)),{default:He(()=>[ti(Bt(ur(i).footButton.leftButton.text),1)]),_:1},16),_(ur(un),br(Ea(ur(i).footButton.rightButton)),{default:He(()=>[ti(Bt(ur(i).footButton.rightButton.text),1)]),_:1},16)]),_:1})):ye(r.$slots,"footer",{key:1},void 0,!0)])]))}}),Dz=Ga(nW,[["__scopeId","data-v-c13cb9b8"]]),sW=se({__name:"VButton",props:{shake:Boolean,loading:Boolean,shakeColor:{type:String,default:"red"}},emits:["click"],setup(e,{expose:t,emit:i}){const r=e,a=Sb(),n=i,s=ie(),o=()=>{n("click")},l=c=>{c.style.transition="background-color 0.82s cubic-bezier(.36,.07,.19,.97) both",c.style.animation="shake 0.82s cubic-bezier(.36,.07,.19,.97) both",c.style.backgroundColor=r.shakeColor,c.addEventListener("animationend",()=>{c.style.animation="",c.style.backgroundColor=""})};return Vt(()=>r.shake,()=>{const c=s.value.$el;l(c)}),t({shake:()=>{l(s.value.$el)}}),(c,d)=>{const h=be("a-button");return N(),De(h,it({ref_key:"btn",ref:s},ur(a),{loading:e.loading,onClick:o}),{default:He(()=>[ye(c.$slots,"icon",{},void 0,!0),ye(c.$slots,"default",{},void 0,!0)]),_:3},16,["loading"])}}}),oW=Ga(sW,[["__scopeId","data-v-73d1d31a"]]),lW=se({name:"IconMoreVertical",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-more-vertical`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),uW=["stroke-width","stroke-linecap","stroke-linejoin"],cW=ve("path",{d:"M25 10h-2V8h2v2ZM25 25h-2v-2h2v2ZM25 40h-2v-2h2v2Z",fill:"currentColor",stroke:"none"},null,-1),dW=ve("path",{d:"M25 10h-2V8h2v2ZM25 25h-2v-2h2v2ZM25 40h-2v-2h2v2Z"},null,-1),hW=[cW,dW];function pW(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},hW,14,uW)}var G1=We(lW,[["render",pW]]);const fW=Object.assign(G1,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+G1.name,G1)}}),mW=se({__name:"VMoreButton",setup(e){const t=Sb(),i=g9();return(r,a)=>{const n=be("a-button"),s=be("a-dropdown");return N(),De(s,it(ur(t),{position:"bl"}),$r({default:He(()=>[_(n,null,{default:He(()=>[a[0]||(a[0]=ti("更多操作 ")),_(ur(fW))]),_:1})]),_:2},[Br(Object.keys(ur(i)),o=>({name:o,fn:He(l=>[ye(r.$slots,o,br(Ea(l)),void 0,!0)])}))]),1040)}}}),vW=Ga(mW,[["__scopeId","data-v-6e3d0c58"]]);function gW(){const e=ie();function t(a,n){e.value=new IntersectionObserver(s=>{s.forEach(o=>{o.isIntersecting?o.target.classList.add(n):o.target.classList.remove(n)})},{threshold:.1}),document.querySelectorAll(a).forEach(s=>{e.value.observe(s)})}const i=a=>a.startsWith("animate__")?a.replace("animate__",""):a;function r(){e.value.disconnect(),e.value=null}return{createObserver:t,disconnect:r,addAnimatePrefixIfNeeded:i}}function P_(){return P_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},P_.apply(this,arguments)}var yW={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},bW=new(function(){function e(){}var t=e.prototype;return t.load=function(i,r,a){if(i.el=typeof a=="string"?document.querySelector(a):a,i.options=P_({},yW,r),i.isInput=i.el.tagName.toLowerCase()==="input",i.attr=i.options.attr,i.bindInputFocusEvents=i.options.bindInputFocusEvents,i.showCursor=!i.isInput&&i.options.showCursor,i.cursorChar=i.options.cursorChar,i.cursorBlinking=!0,i.elContent=i.attr?i.el.getAttribute(i.attr):i.el.textContent,i.contentType=i.options.contentType,i.typeSpeed=i.options.typeSpeed,i.startDelay=i.options.startDelay,i.backSpeed=i.options.backSpeed,i.smartBackspace=i.options.smartBackspace,i.backDelay=i.options.backDelay,i.fadeOut=i.options.fadeOut,i.fadeOutClass=i.options.fadeOutClass,i.fadeOutDelay=i.options.fadeOutDelay,i.isPaused=!1,i.strings=i.options.strings.map(function(u){return u.trim()}),i.stringsElement=typeof i.options.stringsElement=="string"?document.querySelector(i.options.stringsElement):i.options.stringsElement,i.stringsElement){i.strings=[],i.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var n=Array.prototype.slice.apply(i.stringsElement.children),s=n.length;if(s)for(var o=0;o<s;o+=1)i.strings.push(n[o].innerHTML.trim())}for(var l in i.strPos=0,i.currentElContent=this.getCurrentElContent(i),i.currentElContent&&i.currentElContent.length>0&&(i.strPos=i.currentElContent.length-1,i.strings.unshift(i.currentElContent)),i.sequence=[],i.strings)i.sequence[l]=l;i.arrayPos=0,i.stopNum=0,i.loop=i.options.loop,i.loopCount=i.options.loopCount,i.curLoop=0,i.shuffle=i.options.shuffle,i.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},i.typingComplete=!1,i.autoInsertCss=i.options.autoInsertCss,i.autoInsertCss&&(this.appendCursorAnimationCss(i),this.appendFadeOutAnimationCss(i))},t.getCurrentElContent=function(i){return i.attr?i.el.getAttribute(i.attr):i.isInput?i.el.value:i.contentType==="html"?i.el.innerHTML:i.el.textContent},t.appendCursorAnimationCss=function(i){var r="data-typed-js-cursor-css";if(i.showCursor&&!document.querySelector("["+r+"]")){var a=document.createElement("style");a.setAttribute(r,"true"),a.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(a)}},t.appendFadeOutAnimationCss=function(i){var r="data-typed-fadeout-js-css";if(i.fadeOut&&!document.querySelector("["+r+"]")){var a=document.createElement("style");a.setAttribute(r,"true"),a.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(a)}},e}()),g3=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(i,r,a){if(a.contentType!=="html")return r;var n=i.substring(r).charAt(0);if(n==="<"||n==="&"){var s;for(s=n==="<"?">":";";i.substring(r+1).charAt(0)!==s&&!(1+ ++r>i.length););r++}return r},t.backSpaceHtmlChars=function(i,r,a){if(a.contentType!=="html")return r;var n=i.substring(r).charAt(0);if(n===">"||n===";"){var s;for(s=n===">"?"<":"&";i.substring(r-1).charAt(0)!==s&&!(--r<0););r--}return r},e}()),wW=function(){function e(i,r){bW.load(this,r,i),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(i){i===void 0&&(i=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,i&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var i=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){i.strPos===0?i.typewrite(i.strings[i.sequence[i.arrayPos]],i.strPos):i.backspace(i.strings[i.sequence[i.arrayPos]],i.strPos)},this.startDelay)},t.typewrite=function(i,r){var a=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var n=this.humanizer(this.typeSpeed),s=1;this.pause.status!==!0?this.timeout=setTimeout(function(){r=g3.typeHtmlChars(i,r,a);var o=0,l=i.substring(r);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var u=1;u+=(l=/\d+/.exec(l)[0]).length,o=parseInt(l),a.temporaryPause=!0,a.options.onTypingPaused(a.arrayPos,a),i=i.substring(0,r)+i.substring(r+u),a.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;i.substring(r+s).charAt(0)!=="`"&&(s++,!(r+s>i.length)););var c=i.substring(0,r),d=i.substring(c.length+1,r+s),h=i.substring(r+s+1);i=c+d+h,s--}a.timeout=setTimeout(function(){a.toggleBlinking(!1),r>=i.length?a.doneTyping(i,r):a.keepTyping(i,r,s),a.temporaryPause&&(a.temporaryPause=!1,a.options.onTypingResumed(a.arrayPos,a))},o)},n):this.setPauseStatus(i,r,!0)},t.keepTyping=function(i,r,a){r===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var n=i.substring(0,r+=a);this.replaceText(n),this.typewrite(i,r)},t.doneTyping=function(i,r){var a=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){a.backspace(i,r)},this.backDelay))},t.backspace=function(i,r){var a=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var n=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=g3.backSpaceHtmlChars(i,r,a);var s=i.substring(0,r);if(a.replaceText(s),a.smartBackspace){var o=a.strings[a.arrayPos+1];a.stopNum=o&&s===o.substring(0,r)?r:0}r>a.stopNum?(r--,a.backspace(i,r)):r<=a.stopNum&&(a.arrayPos++,a.arrayPos===a.strings.length?(a.arrayPos=0,a.options.onLastStringBackspaced(),a.shuffleStringsIfNeeded(),a.begin()):a.typewrite(a.strings[a.sequence[a.arrayPos]],r))},n)}else this.setPauseStatus(i,r,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(i,r,a){this.pause.typewrite=a,this.pause.curString=i,this.pause.curStrPos=r},t.toggleBlinking=function(i){this.cursor&&(this.pause.status||this.cursorBlinking!==i&&(this.cursorBlinking=i,i?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(i){return Math.round(Math.random()*i/2)+i},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var i=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){i.arrayPos++,i.replaceText(""),i.strings.length>i.arrayPos?i.typewrite(i.strings[i.sequence[i.arrayPos]],0):(i.typewrite(i.strings[0],0),i.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(i){this.attr?this.el.setAttribute(this.attr,i):this.isInput?this.el.value=i:this.contentType==="html"?this.el.innerHTML=i:this.el.textContent=i},t.bindFocusEvents=function(){var i=this;this.isInput&&(this.el.addEventListener("focus",function(r){i.stop()}),this.el.addEventListener("blur",function(r){i.el.value&&i.el.value.length!==0||i.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}();const xW={id:"container"},SW=se({__name:"VTypedText",props:{text:String},setup(e){const t=e,i=()=>{let r=t.text;if(r){const a=r.split(",");a&&new wW("#container",{strings:a,typeSpeed:100,loop:!0,startDelay:100,fadeOut:!0}).start()}};return xi(()=>{i()}),(r,a)=>(N(),ee("span",xW))}}),CW=Ga(SW,[["__scopeId","data-v-71aa6f76"]]),_W={},MW={id:"container",class:"text-blurry"};function EW(e,t){return N(),ee("div",MW," Wolrd ")}const AW=Ga(_W,[["render",EW],["__scopeId","data-v-eae71ed4"]]);var Iz={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},hE={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},PW=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ry={CSS:{},springs:{}};function al(e,t,i){return Math.min(Math.max(e,t),i)}function Tf(e,t){return e.indexOf(t)>-1}function q1(e,t){return e.apply(null,t)}var Li={arr:function(e){return Array.isArray(e)},obj:function(e){return Tf(Object.prototype.toString.call(e),"Object")},pth:function(e){return Li.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||Li.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return Li.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Li.hex(e)||Li.rgb(e)||Li.hsl(e)},key:function(e){return!Iz.hasOwnProperty(e)&&!hE.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Lz(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function Bz(e,t){var i=Lz(e),r=al(Li.und(i[0])?1:i[0],.1,100),a=al(Li.und(i[1])?100:i[1],.1,100),n=al(Li.und(i[2])?10:i[2],.1,100),s=al(Li.und(i[3])?0:i[3],.1,100),o=Math.sqrt(a/r),l=n/(2*Math.sqrt(a*r)),u=l<1?o*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*o+-s)/u:-s+o;function h(f){var v=t?t*f/1e3:f;return l<1?v=Math.exp(-v*l*o)*(c*Math.cos(u*v)+d*Math.sin(u*v)):v=(c+d*v)*Math.exp(-v*o),f===0||f===1?f:1-v}function p(){var f=ry.springs[e];if(f)return f;for(var v=1/6,m=0,g=0;;)if(m+=v,h(m)===1){if(g++,g>=16)break}else g=0;var y=m*v*1e3;return ry.springs[e]=y,y}return t?h:p}function TW(e){return e===void 0&&(e=10),function(t){return Math.ceil(al(t,1e-6,1)*e)*(1/e)}}var kW=function(){var e=11,t=1/(e-1);function i(c,d){return 1-3*d+3*c}function r(c,d){return 3*d-6*c}function a(c){return 3*c}function n(c,d,h){return((i(d,h)*c+r(d,h))*c+a(d))*c}function s(c,d,h){return 3*i(d,h)*c*c+2*r(d,h)*c+a(d)}function o(c,d,h,p,f){var v,m,g=0;do m=d+(h-d)/2,v=n(m,p,f)-c,v>0?h=m:d=m;while(Math.abs(v)>1e-7&&++g<10);return m}function l(c,d,h,p){for(var f=0;f<4;++f){var v=s(d,h,p);if(v===0)return d;var m=n(d,h,p)-c;d-=m/v}return d}function u(c,d,h,p){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var f=new Float32Array(e);if(c!==d||h!==p)for(var v=0;v<e;++v)f[v]=n(v*t,c,h);function m(g){for(var y=0,b=1,x=e-1;b!==x&&f[b]<=g;++b)y+=t;--b;var S=(g-f[b])/(f[b+1]-f[b]),w=y+S*t,E=s(w,c,h);return E>=.001?l(g,w,c,h):E===0?w:o(g,y,y+t,c,h)}return function(g){return c===d&&h===p||g===0||g===1?g:n(m(g),d,p)}}return u}(),zz=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Expo:function(){return function(r){return r?Math.pow(2,10*r-10):0}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var a,n=4;r<((a=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((a*3-2)/22-r,2)}},Elastic:function(r,a){r===void 0&&(r=1),a===void 0&&(a=.5);var n=al(r,1,10),s=al(a,.1,2);return function(o){return o===0||o===1?o:-n*Math.pow(2,10*(o-1))*Math.sin((o-1-s/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/s)}}},i=["Quad","Cubic","Quart","Quint"];return i.forEach(function(r,a){t[r]=function(){return function(n){return Math.pow(n,a+2)}}}),Object.keys(t).forEach(function(r){var a=t[r];e["easeIn"+r]=a,e["easeOut"+r]=function(n,s){return function(o){return 1-a(n,s)(1-o)}},e["easeInOut"+r]=function(n,s){return function(o){return o<.5?a(n,s)(o*2)/2:1-a(n,s)(o*-2+2)/2}},e["easeOutIn"+r]=function(n,s){return function(o){return o<.5?(1-a(n,s)(1-o*2))/2:(a(n,s)(o*2-1)+1)/2}}}),e}();function pE(e,t){if(Li.fnc(e))return e;var i=e.split("(")[0],r=zz[i],a=Lz(e);switch(i){case"spring":return Bz(e,t);case"cubicBezier":return q1(kW,a);case"steps":return q1(TW,a);default:return q1(r,a)}}function Rz(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function Db(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,a=[],n=0;n<i;n++)if(n in e){var s=e[n];t.call(r,s,n,e)&&a.push(s)}return a}function Ib(e){return e.reduce(function(t,i){return t.concat(Li.arr(i)?Ib(i):i)},[])}function y3(e){return Li.arr(e)?e:(Li.str(e)&&(e=Rz(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function fE(e,t){return e.some(function(i){return i===t})}function mE(e){var t={};for(var i in e)t[i]=e[i];return t}function T_(e,t){var i=mE(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function Lb(e,t){var i=mE(e);for(var r in t)i[r]=Li.und(e[r])?t[r]:e[r];return i}function OW(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function DW(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,u,c){return l+l+u+u+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),a=parseInt(r[1],16),n=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+a+","+n+","+s+",1)"}function IW(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,a=parseInt(t[3],10)/100,n=t[4]||1;function s(h,p,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?h+(p-h)*6*f:f<1/2?p:f<2/3?h+(p-h)*(2/3-f)*6:h}var o,l,u;if(r==0)o=l=u=a;else{var c=a<.5?a*(1+r):a+r-a*r,d=2*a-c;o=s(d,c,i+1/3),l=s(d,c,i),u=s(d,c,i-1/3)}return"rgba("+o*255+","+l*255+","+u*255+","+n+")"}function LW(e){if(Li.rgb(e))return OW(e);if(Li.hex(e))return DW(e);if(Li.hsl(e))return IW(e)}function Jl(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function BW(e){if(Tf(e,"translate")||e==="perspective")return"px";if(Tf(e,"rotate")||Tf(e,"skew"))return"deg"}function k_(e,t){return Li.fnc(e)?e(t.target,t.id,t.total):e}function nl(e,t){return e.getAttribute(t)}function vE(e,t,i){var r=Jl(t);if(fE([i,"deg","rad","turn"],r))return t;var a=ry.CSS[t+i];if(!Li.und(a))return a;var n=100,s=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(s),s.style.position="absolute",s.style.width=n+i;var l=n/s.offsetWidth;o.removeChild(s);var u=l*parseFloat(t);return ry.CSS[t+i]=u,u}function Nz(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?vE(e,a,i):a}}function gE(e,t){if(Li.dom(e)&&!Li.inp(e)&&(!Li.nil(nl(e,t))||Li.svg(e)&&e[t]))return"attribute";if(Li.dom(e)&&fE(PW,t))return"transform";if(Li.dom(e)&&t!=="transform"&&Nz(e,t))return"css";if(e[t]!=null)return"object"}function Vz(e){if(Li.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,a;a=i.exec(t);)r.set(a[1],a[2]);return r}}function zW(e,t,i,r){var a=Tf(t,"scale")?1:0+BW(t),n=Vz(e).get(t)||a;return i&&(i.transforms.list.set(t,n),i.transforms.last=t),r?vE(e,n,r):n}function yE(e,t,i,r){switch(gE(e,t)){case"transform":return zW(e,t,r,i);case"css":return Nz(e,t,i);case"attribute":return nl(e,t);default:return e[t]||0}}function bE(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=Jl(e)||0,a=parseFloat(t),n=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return a+n+r;case"-":return a-n+r;case"*":return a*n+r}}function Fz(e,t){if(Li.col(e))return LW(e);if(/\s/g.test(e))return e;var i=Jl(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function wE(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function RW(e){return Math.PI*2*nl(e,"r")}function NW(e){return nl(e,"width")*2+nl(e,"height")*2}function VW(e){return wE({x:nl(e,"x1"),y:nl(e,"y1")},{x:nl(e,"x2"),y:nl(e,"y2")})}function jz(e){for(var t=e.points,i=0,r,a=0;a<t.numberOfItems;a++){var n=t.getItem(a);a>0&&(i+=wE(r,n)),r=n}return i}function FW(e){var t=e.points;return jz(e)+wE(t.getItem(t.numberOfItems-1),t.getItem(0))}function $z(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return RW(e);case"rect":return NW(e);case"line":return VW(e);case"polyline":return jz(e);case"polygon":return FW(e)}}function jW(e){var t=$z(e);return e.setAttribute("stroke-dasharray",t),t}function $W(e){for(var t=e.parentNode;Li.svg(t)&&Li.svg(t.parentNode);)t=t.parentNode;return t}function Uz(e,t){var i=t||{},r=i.el||$W(e),a=r.getBoundingClientRect(),n=nl(r,"viewBox"),s=a.width,o=a.height,l=i.viewBox||(n?n.split(" "):[0,0,s,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s,h:o,vW:l[2],vH:l[3]}}function UW(e,t){var i=Li.str(e)?Rz(e)[0]:e,r=t||100;return function(a){return{property:a,el:i,svg:Uz(i),totalLength:$z(i)*(r/100)}}}function WW(e,t,i){function r(c){c===void 0&&(c=0);var d=t+c>=1?t+c:0;return e.el.getPointAtLength(d)}var a=Uz(e.el,e.svg),n=r(),s=r(-1),o=r(1),l=i?1:a.w/a.vW,u=i?1:a.h/a.vH;switch(e.property){case"x":return(n.x-a.x)*l;case"y":return(n.y-a.y)*u;case"angle":return Math.atan2(o.y-s.y,o.x-s.x)*180/Math.PI}}function b3(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=Fz(Li.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:Li.str(e)||t?r.split(i):[]}}function xE(e){var t=e?Ib(Li.arr(e)?e.map(y3):y3(e)):[];return Db(t,function(i,r,a){return a.indexOf(i)===r})}function Wz(e){var t=xE(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:Vz(i)}}})}function HW(e,t){var i=mE(t);if(/^spring/.test(i.easing)&&(i.duration=Bz(i.easing)),Li.arr(e)){var r=e.length,a=r===2&&!Li.obj(e[0]);a?e={value:e}:Li.fnc(t.duration)||(i.duration=t.duration/r)}var n=Li.arr(e)?e:[e];return n.map(function(s,o){var l=Li.obj(s)&&!Li.pth(s)?s:{value:s};return Li.und(l.delay)&&(l.delay=o?0:t.delay),Li.und(l.endDelay)&&(l.endDelay=o===n.length-1?t.endDelay:0),l}).map(function(s){return Lb(s,i)})}function GW(e){for(var t=Db(Ib(e.map(function(n){return Object.keys(n)})),function(n){return Li.key(n)}).reduce(function(n,s){return n.indexOf(s)<0&&n.push(s),n},[]),i={},r=function(n){var s=t[n];i[s]=e.map(function(o){var l={};for(var u in o)Li.key(u)?u==s&&(l.value=o[u]):l[u]=o[u];return l})},a=0;a<t.length;a++)r(a);return i}function qW(e,t){var i=[],r=t.keyframes;r&&(t=Lb(GW(r),t));for(var a in t)Li.key(a)&&i.push({name:a,tweens:HW(t[a],e)});return i}function YW(e,t){var i={};for(var r in e){var a=k_(e[r],t);Li.arr(a)&&(a=a.map(function(n){return k_(n,t)}),a.length===1&&(a=a[0])),i[r]=a}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function XW(e,t){var i;return e.tweens.map(function(r){var a=YW(r,t),n=a.value,s=Li.arr(n)?n[1]:n,o=Jl(s),l=yE(t.target,e.name,o,t),u=i?i.to.original:l,c=Li.arr(n)?n[0]:u,d=Jl(c)||Jl(l),h=o||d;return Li.und(s)&&(s=u),a.from=b3(c,h),a.to=b3(bE(s,c),h),a.start=i?i.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=pE(a.easing,a.duration),a.isPath=Li.pth(n),a.isPathTargetInsideSVG=a.isPath&&Li.svg(t.target),a.isColor=Li.col(a.from.original),a.isColor&&(a.round=1),i=a,a})}var Hz={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,a){if(r.list.set(t,i),t===r.last||a){var n="";r.list.forEach(function(s,o){n+=o+"("+s+") "}),e.style.transform=n}}};function Gz(e,t){var i=Wz(e);i.forEach(function(r){for(var a in t){var n=k_(t[a],r),s=r.target,o=Jl(n),l=yE(s,a,o,r),u=o||Jl(l),c=bE(Fz(n,u),l),d=gE(s,a);Hz[d](s,a,c,r.transforms,!0)}})}function KW(e,t){var i=gE(e.target,t.name);if(i){var r=XW(t,e),a=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:a.end,delay:r[0].delay,endDelay:a.endDelay}}}function ZW(e,t){return Db(Ib(e.map(function(i){return t.map(function(r){return KW(i,r)})})),function(i){return!Li.und(i)})}function qz(e,t){var i=e.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=i?Math.max.apply(Math,e.map(function(n){return r(n)+n.duration})):t.duration,a.delay=i?Math.min.apply(Math,e.map(function(n){return r(n)+n.delay})):t.delay,a.endDelay=i?a.duration-Math.max.apply(Math,e.map(function(n){return r(n)+n.duration-n.endDelay})):t.endDelay,a}var w3=0;function QW(e){var t=T_(Iz,e),i=T_(hE,e),r=qW(i,e),a=Wz(e.targets),n=ZW(a,r),s=qz(n,i),o=w3;return w3++,Lb(t,{id:o,children:[],animatables:a,animations:n,duration:s.duration,delay:s.delay,endDelay:s.endDelay})}var go=[],Yz=function(){var e;function t(){!e&&(!x3()||!jr.suspendWhenDocumentHidden)&&go.length>0&&(e=requestAnimationFrame(i))}function i(a){for(var n=go.length,s=0;s<n;){var o=go[s];o.paused?(go.splice(s,1),n--):(o.tick(a),s++)}e=s>0?requestAnimationFrame(i):void 0}function r(){jr.suspendWhenDocumentHidden&&(x3()?e=cancelAnimationFrame(e):(go.forEach(function(a){return a._onDocumentVisibility()}),Yz()))}return typeof document<"u"&&document.addEventListener("visibilitychange",r),t}();function x3(){return!!document&&document.hidden}function jr(e){e===void 0&&(e={});var t=0,i=0,r=0,a,n=0,s=null;function o(y){var b=window.Promise&&new Promise(function(x){return s=x});return y.finished=b,b}var l=QW(e);o(l);function u(){var y=l.direction;y!=="alternate"&&(l.direction=y!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,a.forEach(function(b){return b.reversed=l.reversed})}function c(y){return l.reversed?l.duration-y:y}function d(){t=0,i=c(l.currentTime)*(1/jr.speed)}function h(y,b){b&&b.seek(y-b.timelineOffset)}function p(y){if(l.reversePlayback)for(var x=n;x--;)h(y,a[x]);else for(var b=0;b<n;b++)h(y,a[b])}function f(y){for(var b=0,x=l.animations,S=x.length;b<S;){var w=x[b],E=w.animatable,M=w.tweens,P=M.length-1,A=M[P];P&&(A=Db(M,function(J){return y<J.end})[0]||A);for(var k=al(y-A.start-A.delay,0,A.duration)/A.duration,I=isNaN(k)?1:A.easing(k),O=A.to.strings,D=A.round,F=[],U=A.to.numbers.length,z=void 0,B=0;B<U;B++){var W=void 0,R=A.to.numbers[B],$=A.from.numbers[B]||0;A.isPath?W=WW(A.value,I*R,A.isPathTargetInsideSVG):W=$+I*(R-$),D&&(A.isColor&&B>2||(W=Math.round(W*D)/D)),F.push(W)}var q=O.length;if(!q)z=F[0];else{z=O[0];for(var Z=0;Z<q;Z++){O[Z];var G=O[Z+1],X=F[Z];isNaN(X)||(G?z+=X+G:z+=X+" ")}}Hz[w.type](E.target,w.property,z,E.transforms),w.currentValue=z,b++}}function v(y){l[y]&&!l.passThrough&&l[y](l)}function m(){l.remaining&&l.remaining!==!0&&l.remaining--}function g(y){var b=l.duration,x=l.delay,S=b-l.endDelay,w=c(y);l.progress=al(w/b*100,0,100),l.reversePlayback=w<l.currentTime,a&&p(w),!l.began&&l.currentTime>0&&(l.began=!0,v("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,v("loopBegin")),w<=x&&l.currentTime!==0&&f(0),(w>=S&&l.currentTime!==b||!b)&&f(b),w>x&&w<S?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,v("changeBegin")),v("change"),f(w)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,v("changeComplete")),l.currentTime=al(w,0,b),l.began&&v("update"),y>=b&&(i=0,m(),l.remaining?(t=r,v("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,v("loopComplete"),v("complete"),!l.passThrough&&"Promise"in window&&(s(),o(l)))))}return l.reset=function(){var y=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=y==="reverse",l.remaining=l.loop,a=l.children,n=a.length;for(var b=n;b--;)l.children[b].reset();(l.reversed&&l.loop!==!0||y==="alternate"&&l.loop===1)&&l.remaining++,f(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(y,b){return Gz(y,b),l},l.tick=function(y){r=y,t||(t=r),g((r+(i-t))*jr.speed)},l.seek=function(y){g(c(y))},l.pause=function(){l.paused=!0,d()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,go.push(l),d(),Yz())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(y){var b=xE(y);Xz(b,l)},l.reset(),l.autoplay&&l.play(),l}function S3(e,t){for(var i=t.length;i--;)fE(e,t[i].animatable.target)&&t.splice(i,1)}function Xz(e,t){var i=t.animations,r=t.children;S3(e,i);for(var a=r.length;a--;){var n=r[a],s=n.animations;S3(e,s),!s.length&&!n.children.length&&r.splice(a,1)}!i.length&&!r.length&&t.pause()}function JW(e){for(var t=xE(e),i=go.length;i--;){var r=go[i];Xz(t,r)}}function eH(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?pE(t.easing):null,a=t.grid,n=t.axis,s=t.from||0,o=s==="first",l=s==="center",u=s==="last",c=Li.arr(e),d=parseFloat(c?e[0]:e),h=c?parseFloat(e[1]):0,p=Jl(c?e[1]:e)||0,f=t.start||0+(c?d:0),v=[],m=0;return function(g,y,b){if(o&&(s=0),l&&(s=(b-1)/2),u&&(s=b-1),!v.length){for(var x=0;x<b;x++){if(!a)v.push(Math.abs(s-x));else{var S=l?(a[0]-1)/2:s%a[0],w=l?(a[1]-1)/2:Math.floor(s/a[0]),E=x%a[0],M=Math.floor(x/a[0]),P=S-E,A=w-M,k=Math.sqrt(P*P+A*A);n==="x"&&(k=-P),n==="y"&&(k=-A),v.push(k)}m=Math.max.apply(Math,v)}r&&(v=v.map(function(O){return r(O/m)*m})),i==="reverse"&&(v=v.map(function(O){return n?O<0?O*-1:-O:Math.abs(m-O)}))}var I=c?(h-d)/m:d;return f+I*(Math.round(v[y]*100)/100)+p}}function tH(e){e===void 0&&(e={});var t=jr(e);return t.duration=0,t.add=function(i,r){var a=go.indexOf(t),n=t.children;a>-1&&go.splice(a,1);function s(h){h.passThrough=!0}for(var o=0;o<n.length;o++)s(n[o]);var l=Lb(i,T_(hE,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=Li.und(r)?u:bE(r,u),s(t),t.seek(l.timelineOffset);var c=jr(l);s(c),n.push(c);var d=qz(n,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}jr.version="3.2.1";jr.speed=1;jr.suspendWhenDocumentHidden=!0;jr.running=go;jr.remove=JW;jr.get=yE;jr.set=Gz;jr.convertPx=vE;jr.path=UW;jr.setDashoffset=jW;jr.stagger=eH;jr.timeline=tH;jr.easing=pE;jr.penner=zz;jr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const iH={class:"wrapper",style:{color:"black","font-size":"4rem",display:"flex","justify-content":"center","align-items":"center"}},rH={class:"item",style:{position:"relative"}},aH=se({__name:"VTextStaggeredAnimate",props:{text:String,animate:Object},setup(e){const t=e,i=ie([]),r=ie(),a=()=>{const o=jr({targets:".item",translateY:["100px",0],opacity:[0,1],scale:[.5,1],autoplay:!0,easing:"spring(1, 80, 10, 0)",delay:jr.stagger(100,{easing:"linear"})});function l(u){o.tick(u),r.value=requestAnimationFrame(l)}requestAnimationFrame(l)},n=()=>{const o=jr({targets:".item",translateX:[120,0],opacity:[0,1],scale:[.5,1],autoplay:!0,easing:"spring(1, 80, 10, 0)",delay:jr.stagger(100,{easing:"linear"})});function l(u){o.tick(u),r.value=requestAnimationFrame(l)}requestAnimationFrame(l)},s=()=>{const o=jr({targets:".item",opacity:[0,1],left:[-10,0],autoplay:!0,easing:"spring(1, 80, 10, 0)",delay:jr.stagger(50,{easing:"linear"})});function l(u){o.tick(u),r.value=requestAnimationFrame(l)}requestAnimationFrame(l)};return xi(()=>{var o;i.value=t.text.split("");const l=((o=t.animate)==null?void 0:o.type)||"letterPullLeft";hr(()=>{switch(l){case"letterPullUp":a();break;case"letterPullLeft":n();break;case"gradualSpacing":s();break}})}),(o,l)=>(N(),ee("div",null,[ve("div",iH,[(N(!0),ee(Xt,null,Br(i.value,u=>(N(),ee("span",rH,Bt(u),1))),256))]),l[0]||(l[0]=ve("span",{class:"js-object-log"},null,-1))]))}}),nH={style:{width:"100vw",height:"100vh"}},sH=se({__name:"VInteractiveCard",setup(e){return xi(()=>{document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".interactive");let i=0,r=0,a=0,n=0;const s=()=>{i+=(a-i)/20,r+=(n-r)/20,t.style.transform=`translate(${Math.round(i)}px, ${Math.round(r)}px)`,requestAnimationFrame(s)};window.addEventListener("mousemove",o=>{a=o.clientX,n=o.clientY}),s()})}),(t,i)=>(N(),ee("div",nH,i[0]||(i[0]=[rE('<div class="card" data-v-baecf109><svg viewBox="0 0 100% 100%" xmlns="http://www.w3.org/2000/svg" class="noise" data-v-baecf109><filter id="noiseFilter" data-v-baecf109><feTurbulence type="fractalNoise" baseFrequency="0.85" numOctaves="6" stitchTiles="stitch" data-v-baecf109></feTurbulence></filter><rect width="100%" height="100%" preserveAspectRatio="xMidYMid meet" filter="url(#noiseFilter)" data-v-baecf109></rect></svg><div class="content" data-v-baecf109><h1 data-v-baecf109>日本的汽油车</h1><p data-v-baecf109>日本看越南，一个坑逼玩意，越南还没富裕就已经坑得不能再坑，所以日本承包的高铁、地铁、公路都不怎么开工，越南要求日本提供低息贷款，等于日本出钱出技术，还要转让技术给越南才行。</p></div><div class="content" data-v-baecf109><h1 data-v-baecf109>电动车给威胁到</h1><p data-v-baecf109>日本看越南，一个坑逼玩意，越南还没富裕就已经坑得不能再坑，所以日本承包的高铁、地铁、公路都不怎么开工，越南要求日本提供低息贷款，等于日本出钱出技术，还要转让技术给越南才行。</p></div><div class="content" data-v-baecf109><h1 data-v-baecf109>日本的电动给威胁到</h1><p data-v-baecf109>日本看越南，一个坑逼玩意，越南还没富裕就已经坑得不能再坑，所以日本承包的高铁、地铁、公路都不怎么开工，越南要求日本提供低息贷款，等于日本出钱出技术，还要转让技术给越南才行。</p></div></div><div class="gradient-bg" data-v-baecf109><svg viewBox="0 0 100vw 100vw" xmlns="http://www.w3.org/2000/svg" class="noiseBg" data-v-baecf109><filter id="noiseFilterBg" data-v-baecf109><feTurbulence type="fractalNoise" baseFrequency="0.6" stitchTiles="stitch" data-v-baecf109></feTurbulence></filter><rect width="100%" height="100%" preserveAspectRatio="xMidYMid meet" filter="url(#noiseFilterBg)" data-v-baecf109></rect></svg><svg xmlns="http://www.w3.org/2000/svg" class="svgBlur" data-v-baecf109><defs data-v-baecf109><filter id="goo" data-v-baecf109><feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" data-v-baecf109></feGaussianBlur><feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8" result="goo" data-v-baecf109></feColorMatrix><feBlend in="SourceGraphic" in2="goo" data-v-baecf109></feBlend></filter></defs></svg><div class="gradients-container" data-v-baecf109><div class="g1" data-v-baecf109></div><div class="g2" data-v-baecf109></div><div class="g3" data-v-baecf109></div><div class="g4" data-v-baecf109></div><div class="g5" data-v-baecf109></div><div class="interactive" data-v-baecf109></div></div></div>',2)])))}}),oH=Ga(sH,[["__scopeId","data-v-baecf109"]]);var lH=Object.create,Bb=Object.defineProperty,uH=Object.getOwnPropertyDescriptor,cH=Object.getOwnPropertyNames,dH=Object.getPrototypeOf,hH=Object.prototype.hasOwnProperty,pH=(e,t,i)=>t in e?Bb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,pu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fH=(e,t)=>{for(var i in t)Bb(e,i,{get:t[i],enumerable:!0})},mH=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of cH(t))!hH.call(e,a)&&a!==i&&Bb(e,a,{get:()=>t[a],enumerable:!(r=uH(t,a))||r.enumerable});return e},fu=(e,t,i)=>(i=e!=null?lH(dH(e)):{},mH(t||!e||!e.__esModule?Bb(i,"default",{value:e,enumerable:!0}):i,e)),ff=(e,t,i)=>(pH(e,typeof t!="symbol"?t+"":t,i),i),vH=pu((e,t)=>{(function(i,r){typeof e=="object"?t.exports=r():typeof define=="function"&&define.amd?define(r):i.Alea=r()})(e,function(){return i.importState=function(a){var n=new i;return n.importState(a),n},i;function i(){return function(a){var n=0,s=0,o=0,l=1;a.length==0&&(a=[+new Date]);var u=r();n=u(" "),s=u(" "),o=u(" ");for(var c=0;c<a.length;c++)n-=u(a[c]),n<0&&(n+=1),s-=u(a[c]),s<0&&(s+=1),o-=u(a[c]),o<0&&(o+=1);u=null;var d=function(){var h=2091639*n+l*23283064365386963e-26;return n=s,s=o,o=h-(l=h|0)};return d.next=d,d.uint32=function(){return d()*4294967296},d.fract53=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.version="Alea 0.9",d.args=a,d.exportState=function(){return[n,s,o,l]},d.importState=function(h){n=+h[0]||0,s=+h[1]||0,o=+h[2]||0,l=+h[3]||0},d}(Array.prototype.slice.call(arguments))}function r(){var a=4022871197,n=function(s){s=s.toString();for(var o=0;o<s.length;o++){a+=s.charCodeAt(o);var l=.02519603282416938*a;a=l>>>0,l-=a,l*=a,a=l>>>0,l-=a,a+=l*4294967296}return(a>>>0)*23283064365386963e-26};return n.version="Mash 0.9",n}})}),Kz=pu((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((i=typeof globalThis<"u"?globalThis:i||self).SVDJS={})})(e,function(i){i.SVD=function(r,a,n,s,o){if(a=a===void 0||a,n=n===void 0||n,o=1e-64/(s=s||Math.pow(2,-52)),!r)throw new TypeError("Matrix a is not defined");var l,u,c,d,h,p,f,v,m,g,y,b,x=r[0].length,S=r.length;if(S<x)throw new TypeError("Invalid matrix: m < n");for(var w=[],E=[],M=[],P=a==="f"?S:x,A=g=f=0;A<S;A++)E[A]=new Array(P).fill(0);for(A=0;A<x;A++)M[A]=new Array(x).fill(0);var k,I=new Array(x).fill(0);for(A=0;A<S;A++)for(l=0;l<x;l++)E[A][l]=r[A][l];for(A=0;A<x;A++){for(w[A]=f,m=0,c=A+1,l=A;l<S;l++)m+=Math.pow(E[l][A],2);if(m<o)f=0;else for(v=(p=E[A][A])*(f=p<0?Math.sqrt(m):-Math.sqrt(m))-m,E[A][A]=p-f,l=c;l<x;l++){for(m=0,u=A;u<S;u++)m+=E[u][A]*E[u][l];for(p=m/v,u=A;u<S;u++)E[u][l]=E[u][l]+p*E[u][A]}for(I[A]=f,m=0,l=c;l<x;l++)m+=Math.pow(E[A][l],2);if(m<o)f=0;else{for(v=(p=E[A][A+1])*(f=p<0?Math.sqrt(m):-Math.sqrt(m))-m,E[A][A+1]=p-f,l=c;l<x;l++)w[l]=E[A][l]/v;for(l=c;l<S;l++){for(m=0,u=c;u<x;u++)m+=E[l][u]*E[A][u];for(u=c;u<x;u++)E[l][u]=E[l][u]+m*w[u]}}g<(y=Math.abs(I[A])+Math.abs(w[A]))&&(g=y)}if(n)for(A=x-1;0<=A;A--){if(f!==0){for(v=E[A][A+1]*f,l=c;l<x;l++)M[l][A]=E[A][l]/v;for(l=c;l<x;l++){for(m=0,u=c;u<x;u++)m+=E[A][u]*M[u][l];for(u=c;u<x;u++)M[u][l]=M[u][l]+m*M[u][A]}}for(l=c;l<x;l++)M[A][l]=0,M[l][A]=0;M[A][A]=1,f=w[A],c=A}if(a){if(a==="f")for(A=x;A<S;A++){for(l=x;l<S;l++)E[A][l]=0;E[A][A]=1}for(A=x-1;0<=A;A--){for(c=A+1,f=I[A],l=c;l<P;l++)E[A][l]=0;if(f!==0){for(v=E[A][A]*f,l=c;l<P;l++){for(m=0,u=c;u<S;u++)m+=E[u][A]*E[u][l];for(p=m/v,u=A;u<S;u++)E[u][l]=E[u][l]+p*E[u][A]}for(l=A;l<S;l++)E[l][A]=E[l][A]/f}else for(l=A;l<S;l++)E[l][A]=0;E[A][A]=E[A][A]+1}}for(s*=g,u=x-1;0<=u;u--)for(var O=0;O<50;O++){for(k=!1,c=u;0<=c;c--){if(Math.abs(w[c])<=s){k=!0;break}if(Math.abs(I[c-1])<=s)break}if(!k){for(h=0,d=c-(m=1),A=c;A<u+1&&(p=m*w[A],w[A]=h*w[A],!(Math.abs(p)<=s));A++)if(f=I[A],I[A]=Math.sqrt(p*p+f*f),h=f/(v=I[A]),m=-p/v,a)for(l=0;l<S;l++)y=E[l][d],b=E[l][A],E[l][d]=y*h+b*m,E[l][A]=-y*m+b*h}if(b=I[u],c===u){if(b<0&&(I[u]=-b,n))for(l=0;l<x;l++)M[l][u]=-M[l][u];break}for(g=I[c],p=(((y=I[u-1])-b)*(y+b)+((f=w[u-1])-(v=w[u]))*(f+v))/(2*v*y),f=Math.sqrt(p*p+1),p=((g-b)*(g+b)+v*(y/(p<0?p-f:p+f)-v))/g,A=c+(m=h=1);A<u+1;A++){if(f=w[A],y=I[A],v=m*f,f*=h,b=Math.sqrt(p*p+v*v),p=g*(h=p/(w[A-1]=b))+f*(m=v/b),f=-g*m+f*h,v=y*m,y*=h,n)for(l=0;l<x;l++)g=M[l][A-1],b=M[l][A],M[l][A-1]=g*h+b*m,M[l][A]=-g*m+b*h;if(b=Math.sqrt(p*p+v*v),p=(h=p/(I[A-1]=b))*f+(m=v/b)*y,g=-m*f+h*y,a)for(l=0;l<S;l++)y=E[l][A-1],b=E[l][A],E[l][A-1]=y*h+b*m,E[l][A]=-y*m+b*h}w[c]=0,w[u]=p,I[u]=g}for(A=0;A<x;A++)I[A]<s&&(I[A]=0);return{u:E,q:I,v:M}},i.VERSION="1.1.1",Object.defineProperty(i,"__esModule",{value:!0})})}),gH=pu((e,t)=>{(function(i,r){typeof e=="object"&&typeof t<"u"?t.exports=r():typeof define=="function"&&define.amd?define(r):(i=i||self,i.TinyQueue=r())})(e,function(){var i=function(a,n){if(a===void 0&&(a=[]),n===void 0&&(n=r),this.data=a,this.length=this.data.length,this.compare=n,this.length>0)for(var s=(this.length>>1)-1;s>=0;s--)this._down(s)};i.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},i.prototype.pop=function(){if(this.length!==0){var a=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),a}},i.prototype.peek=function(){return this.data[0]},i.prototype._up=function(a){for(var n=this,s=n.data,o=n.compare,l=s[a];a>0;){var u=a-1>>1,c=s[u];if(o(l,c)>=0)break;s[a]=c,a=u}s[a]=l},i.prototype._down=function(a){for(var n=this,s=n.data,o=n.compare,l=this.length>>1,u=s[a];a<l;){var c=(a<<1)+1,d=s[c],h=c+1;if(h<this.length&&o(s[h],d)<0&&(c=h,d=s[h]),o(d,u)>=0)break;s[a]=d,a=c}s[a]=u};function r(a,n){return a<n?-1:a>n?1:0}return i})}),yH=pu((e,t)=>{var i=gH();i.default&&(i=i.default),t.exports=r,t.exports.default=r;function r(u,c,d){c=c||1;for(var h,p,f,v,m=0;m<u[0].length;m++){var g=u[0][m];(!m||g[0]<h)&&(h=g[0]),(!m||g[1]<p)&&(p=g[1]),(!m||g[0]>f)&&(f=g[0]),(!m||g[1]>v)&&(v=g[1])}var y=f-h,b=v-p,x=Math.min(y,b),S=x/2;if(x===0){var w=[h,p];return w.distance=0,w}for(var E=new i(void 0,a),M=h;M<f;M+=x)for(var P=p;P<v;P+=x)E.push(new n(M+S,P+S,S,u));var A=o(u),k=new n(h+y/2,p+b/2,0,u);k.d>A.d&&(A=k);for(var I=E.length;E.length;){var O=E.pop();O.d>A.d&&(A=O,d&&console.log("found best %d after %d probes",Math.round(1e4*O.d)/1e4,I)),!(O.max-A.d<=c)&&(S=O.h/2,E.push(new n(O.x-S,O.y-S,S,u)),E.push(new n(O.x+S,O.y-S,S,u)),E.push(new n(O.x-S,O.y+S,S,u)),E.push(new n(O.x+S,O.y+S,S,u)),I+=4)}d&&(console.log("num probes: "+I),console.log("best distance: "+A.d));var D=[A.x,A.y];return D.distance=A.d,D}function a(u,c){return c.max-u.max}function n(u,c,d,h){this.x=u,this.y=c,this.h=d,this.d=s(u,c,h),this.max=this.d+this.h*Math.SQRT2}function s(u,c,d){for(var h=!1,p=1/0,f=0;f<d.length;f++)for(var v=d[f],m=0,g=v.length,y=g-1;m<g;y=m++){var b=v[m],x=v[y];b[1]>c!=x[1]>c&&u<(x[0]-b[0])*(c-b[1])/(x[1]-b[1])+b[0]&&(h=!h),p=Math.min(p,l(u,c,b,x))}return p===0?0:(h?1:-1)*Math.sqrt(p)}function o(u){for(var c=0,d=0,h=0,p=u[0],f=0,v=p.length,m=v-1;f<v;m=f++){var g=p[f],y=p[m],b=g[0]*y[1]-y[0]*g[1];d+=(g[0]+y[0])*b,h+=(g[1]+y[1])*b,c+=b*3}return c===0?new n(p[0][0],p[0][1],0,u):new n(d/c,h/c,0,u)}function l(u,c,d,h){var p=d[0],f=d[1],v=h[0]-p,m=h[1]-f;if(v!==0||m!==0){var g=((u-p)*v+(c-f)*m)/(v*v+m*m);g>1?(p=h[0],f=h[1]):g>0&&(p+=v*g,f+=m*g)}return v=u-p,m=c-f,v*v+m*m}}),bH=pu((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){if(r===null||r===!0||r===!1)return NaN;var a=Number(r);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}t.exports=e.default}),wH=pu((e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;function i(r){var a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return a.setUTCFullYear(r.getFullYear()),r.getTime()-a.getTime()}t.exports=e.default}),xH=pu((e,t)=>{function i(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function r(n,s,o,l){this.message=n,this.expected=s,this.found=o,this.location=l,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,r)}i(r,Error),r.buildMessage=function(n,s){var o={literal:function(f){return'"'+u(f.text)+'"'},class:function(f){var v="",m;for(m=0;m<f.parts.length;m++)v+=f.parts[m]instanceof Array?c(f.parts[m][0])+"-"+c(f.parts[m][1]):c(f.parts[m]);return"["+(f.inverted?"^":"")+v+"]"},any:function(f){return"any character"},end:function(f){return"end of input"},other:function(f){return f.description}};function l(f){return f.charCodeAt(0).toString(16).toUpperCase()}function u(f){return f.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function c(f){return f.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+l(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+l(v)})}function d(f){return o[f.type](f)}function h(f){var v=new Array(f.length),m,g;for(m=0;m<f.length;m++)v[m]=d(f[m]);if(v.sort(),v.length>0){for(m=1,g=1;m<v.length;m++)v[m-1]!==v[m]&&(v[g]=v[m],g++);v.length=g}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function p(f){return f?'"'+u(f)+'"':"end of input"}return"Expected "+h(n)+" but "+p(s)+" found."};function a(n,s){s=s!==void 0?s:{};var o={},l={svg_path:Ht},u=Ht,c=function(Q){if(!Q)return[];for(var re=[],Ae=0;Ae<Q.length;Ae++)re=re.concat.apply(re,Q[Ae]);var oe=re[0];return oe&&oe.code=="m"&&(delete oe.relative,oe.code="M"),re},d=function(Q,re){return xa(Q,re)},h=/^[Mm]/,p=kt(["M","m"],!1,!1),f=function(Q,re,Ae){var oe=mn(Q,[re]);return Ae&&(oe=oe.concat(mn(Q=="M"?"L":"l",Ae[1]))),oe},v=/^[Zz]/,m=kt(["Z","z"],!1,!1),g=function(){return mn("Z")},y=/^[Ll]/,b=kt(["L","l"],!1,!1),x=function(Q,re){return mn(Q,re)},S=/^[Hh]/,w=kt(["H","h"],!1,!1),E=function(Q,re){return mn(Q,re.map(function(Ae){return{x:Ae}}))},M=/^[Vv]/,P=kt(["V","v"],!1,!1),A=function(Q,re){return mn(Q,re.map(function(Ae){return{y:Ae}}))},k=/^[Cc]/,I=kt(["C","c"],!1,!1),O=function(Q,re,Ae){return{x1:Q.x,y1:Q.y,x2:re.x,y2:re.y,x:Ae.x,y:Ae.y}},D=/^[Ss]/,F=kt(["S","s"],!1,!1),U=function(Q,re){return{x2:Q.x,y2:Q.y,x:re.x,y:re.y}},z=/^[Qq]/,B=kt(["Q","q"],!1,!1),W=function(Q,re){return{x1:Q.x,y1:Q.y,x:re.x,y:re.y}},R=/^[Tt]/,$=kt(["T","t"],!1,!1),q=/^[Aa]/,Z=kt(["A","a"],!1,!1),G=function(Q,re,Ae,oe,C,L){return{rx:Q,ry:re,xAxisRotation:Ae,largeArc:oe,sweep:C,x:L.x,y:L.y}},X=function(Q,re){return{x:Q,y:re}},J=function(Q){return Q*1},pe=function(Q){return Q.join("")*1},fe=/^[01]/,de=kt(["0","1"],!1,!1),ge=function(Q){return Q=="1"},me=function(){return""},ke=",",ce=jt(",",!1),le=function(Q){return Q.join("")},xe=".",Ne=jt(".",!1),pt=/^[eE]/,at=kt(["e","E"],!1,!1),Oe=/^[+\-]/,Ye=kt(["+","-"],!1,!1),xt=/^[0-9]/,ne=kt([["0","9"]],!1,!1),K=function(Q){return Q.join("")},ze=/^[ \t\n\r]/,ft=kt([" ","	",`
`,"\r"],!1,!1),te=0,Pe=[{line:1,column:1}],Te=0,Be=[],Le;if("startRule"in s){if(!(s.startRule in l))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');u=l[s.startRule]}function jt(Q,re){return{type:"literal",text:Q,ignoreCase:re}}function kt(Q,re,Ae){return{type:"class",parts:Q,inverted:re,ignoreCase:Ae}}function Qt(){return{type:"end"}}function ct(Q){var re=Pe[Q],Ae;if(re)return re;for(Ae=Q-1;!Pe[Ae];)Ae--;for(re=Pe[Ae],re={line:re.line,column:re.column};Ae<Q;)n.charCodeAt(Ae)===10?(re.line++,re.column=1):re.column++,Ae++;return Pe[Q]=re,re}function mt(Q,re){var Ae=ct(Q),oe=ct(re);return{start:{offset:Q,line:Ae.line,column:Ae.column},end:{offset:re,line:oe.line,column:oe.column}}}function Et(Q){te<Te||(te>Te&&(Te=te,Be=[]),Be.push(Q))}function Gt(Q,re,Ae){return new r(r.buildMessage(Q,re),Q,re,Ae)}function Ht(){var Q,re,Ae,oe,C;for(Q=te,re=[],Ae=yi();Ae!==o;)re.push(Ae),Ae=yi();if(re!==o)if(Ae=Ee(),Ae===o&&(Ae=null),Ae!==o){for(oe=[],C=yi();C!==o;)oe.push(C),C=yi();oe!==o?(re=c(Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;else te=Q,Q=o;return Q}function Ee(){var Q,re,Ae,oe,C,L;if(Q=te,re=nt(),re!==o){for(Ae=[],oe=te,C=[],L=yi();L!==o;)C.push(L),L=yi();for(C!==o?(L=nt(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;){for(Ae.push(oe),oe=te,C=[],L=yi();L!==o;)C.push(L),L=yi();C!==o?(L=nt(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o)}Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function nt(){var Q,re,Ae,oe,C,L;if(Q=te,re=$t(),re!==o){for(Ae=[],oe=te,C=[],L=yi();L!==o;)C.push(L),L=yi();for(C!==o?(L=St(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;){for(Ae.push(oe),oe=te,C=[],L=yi();L!==o;)C.push(L),L=yi();C!==o?(L=St(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o)}Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function St(){var Q;return Q=Ei(),Q===o&&(Q=Yi(),Q===o&&(Q=ar(),Q===o&&(Q=Rt(),Q===o&&(Q=Ci(),Q===o&&(Q=Jr(),Q===o&&(Q=he(),Q===o&&(Q=et(),Q===o&&(Q=ci())))))))),Q}function $t(){var Q,re,Ae,oe,C,L,j;if(Q=te,h.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(p)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=Si(),oe!==o?(C=te,L=$i(),L===o&&(L=null),L!==o?(j=nr(),j!==o?(L=[L,j],C=L):(te=C,C=o)):(te=C,C=o),C===o&&(C=null),C!==o?(re=f(re,oe,C),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function Ei(){var Q,re;return Q=te,v.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(m)),re!==o&&(re=g()),Q=re,Q}function Yi(){var Q,re,Ae,oe;if(Q=te,y.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(b)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=nr(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function nr(){var Q,re,Ae,oe,C,L;if(Q=te,re=Si(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Si(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Si(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function ar(){var Q,re,Ae,oe;if(Q=te,S.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(w)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=Qr(),oe!==o?(re=E(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function Qr(){var Q,re,Ae,oe,C,L;if(Q=te,re=Hi(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Hi(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Hi(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function Rt(){var Q,re,Ae,oe;if(Q=te,M.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(P)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=Qr(),oe!==o?(re=A(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function Ci(){var Q,re,Ae,oe;if(Q=te,k.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(I)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=or(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function or(){var Q,re,Ae,oe,C,L;if(Q=te,re=ta(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=ta(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=ta(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function ta(){var Q,re,Ae,oe,C,L;return Q=te,re=Si(),re!==o?(Ae=$i(),Ae===o&&(Ae=null),Ae!==o?(oe=Si(),oe!==o?(C=$i(),C===o&&(C=null),C!==o?(L=Si(),L!==o?(re=O(re,oe,L),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o),Q}function Jr(){var Q,re,Ae,oe;if(Q=te,D.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(F)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=pn(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function pn(){var Q,re,Ae,oe,C,L;if(Q=te,re=fn(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=fn(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=fn(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function fn(){var Q,re,Ae,oe;return Q=te,re=Si(),re!==o?(Ae=$i(),Ae===o&&(Ae=null),Ae!==o?(oe=Si(),oe!==o?(re=U(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o),Q}function he(){var Q,re,Ae,oe;if(Q=te,z.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(B)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=lt(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function lt(){var Q,re,Ae,oe,C,L;if(Q=te,re=vt(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=vt(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=vt(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function vt(){var Q,re,Ae,oe;return Q=te,re=Si(),re!==o?(Ae=$i(),Ae===o&&(Ae=null),Ae!==o?(oe=Si(),oe!==o?(re=W(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o),Q}function et(){var Q,re,Ae,oe;if(Q=te,R.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et($)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=bt(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function bt(){var Q,re,Ae,oe,C,L;if(Q=te,re=Si(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Si(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=Si(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function ci(){var Q,re,Ae,oe;if(Q=te,q.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(Z)),re!==o){for(Ae=[],oe=yi();oe!==o;)Ae.push(oe),oe=yi();Ae!==o?(oe=mi(),oe!==o?(re=x(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)}else te=Q,Q=o;return Q}function mi(){var Q,re,Ae,oe,C,L;if(Q=te,re=vi(),re!==o){for(Ae=[],oe=te,C=$i(),C===o&&(C=null),C!==o?(L=vi(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);oe!==o;)Ae.push(oe),oe=te,C=$i(),C===o&&(C=null),C!==o?(L=vi(),L!==o?(C=[C,L],oe=C):(te=oe,oe=o)):(te=oe,oe=o);Ae!==o?(re=d(re,Ae),Q=re):(te=Q,Q=o)}else te=Q,Q=o;return Q}function vi(){var Q,re,Ae,oe,C,L,j,H,ue,ae,Ie,Fe;return Q=te,re=ui(),re!==o?(Ae=$i(),Ae===o&&(Ae=null),Ae!==o?(oe=ui(),oe!==o?(C=$i(),C===o&&(C=null),C!==o?(L=Hi(),L!==o?(j=$i(),j!==o?(H=er(),H!==o?(ue=$i(),ue===o&&(ue=null),ue!==o?(ae=er(),ae!==o?(Ie=$i(),Ie===o&&(Ie=null),Ie!==o?(Fe=Si(),Fe!==o?(re=G(re,oe,L,H,ae,Fe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o),Q}function Si(){var Q,re,Ae,oe;return Q=te,re=Hi(),re!==o?(Ae=$i(),Ae===o&&(Ae=null),Ae!==o?(oe=Hi(),oe!==o?(re=X(re,oe),Q=re):(te=Q,Q=o)):(te=Q,Q=o)):(te=Q,Q=o),Q}function ui(){var Q,re;return Q=te,re=Xe(),re===o&&(re=pr()),re!==o&&(re=J(re)),Q=re,Q}function Hi(){var Q,re,Ae,oe;return Q=te,re=te,Ae=wi(),Ae===o&&(Ae=null),Ae!==o?(oe=Xe(),oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)):(te=re,re=o),re===o&&(re=te,Ae=wi(),Ae===o&&(Ae=null),Ae!==o?(oe=pr(),oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)):(te=re,re=o)),re!==o&&(re=pe(re)),Q=re,Q}function er(){var Q,re;return Q=te,fe.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(de)),re!==o&&(re=ge(re)),Q=re,Q}function $i(){var Q,re,Ae,oe,C;if(Q=te,re=[],Ae=yi(),Ae!==o)for(;Ae!==o;)re.push(Ae),Ae=yi();else re=o;if(re!==o)if(Ae=Ki(),Ae===o&&(Ae=null),Ae!==o){for(oe=[],C=yi();C!==o;)oe.push(C),C=yi();oe!==o?(re=[re,Ae,oe],Q=re):(te=Q,Q=o)}else te=Q,Q=o;else te=Q,Q=o;if(Q===o){if(Q=te,re=te,Ae=Ki(),Ae!==o){for(oe=[],C=yi();C!==o;)oe.push(C),C=yi();oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)}else te=re,re=o;re!==o&&(re=me()),Q=re}return Q}function Ki(){var Q;return n.charCodeAt(te)===44?(Q=ke,te++):(Q=o,Et(ce)),Q}function Xe(){var Q,re,Ae,oe;return Q=te,re=te,Ae=ni(),Ae!==o?(oe=Oi(),oe===o&&(oe=null),oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)):(te=re,re=o),re===o&&(re=te,Ae=pr(),Ae!==o?(oe=Oi(),oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)):(te=re,re=o)),re!==o&&(re=le(re)),Q=re,Q}function ni(){var Q,re,Ae,oe,C;return Q=te,re=te,Ae=pr(),Ae===o&&(Ae=null),Ae!==o?(n.charCodeAt(te)===46?(oe=xe,te++):(oe=o,Et(Ne)),oe!==o?(C=pr(),C!==o?(Ae=[Ae,oe,C],re=Ae):(te=re,re=o)):(te=re,re=o)):(te=re,re=o),re===o&&(re=te,Ae=pr(),Ae!==o?(n.charCodeAt(te)===46?(oe=xe,te++):(oe=o,Et(Ne)),oe!==o?(Ae=[Ae,oe],re=Ae):(te=re,re=o)):(te=re,re=o)),re!==o&&(re=le(re)),Q=re,Q}function Oi(){var Q,re,Ae,oe,C;return Q=te,re=te,pt.test(n.charAt(te))?(Ae=n.charAt(te),te++):(Ae=o,Et(at)),Ae!==o?(oe=wi(),oe===o&&(oe=null),oe!==o?(C=pr(),C!==o?(Ae=[Ae,oe,C],re=Ae):(te=re,re=o)):(te=re,re=o)):(te=re,re=o),re!==o&&(re=le(re)),Q=re,Q}function wi(){var Q;return Oe.test(n.charAt(te))?(Q=n.charAt(te),te++):(Q=o,Et(Ye)),Q}function pr(){var Q,re,Ae;if(Q=te,re=[],xt.test(n.charAt(te))?(Ae=n.charAt(te),te++):(Ae=o,Et(ne)),Ae!==o)for(;Ae!==o;)re.push(Ae),xt.test(n.charAt(te))?(Ae=n.charAt(te),te++):(Ae=o,Et(ne));else re=o;return re!==o&&(re=K(re)),Q=re,Q}function yi(){var Q,re;return Q=te,ze.test(n.charAt(te))?(re=n.charAt(te),te++):(re=o,Et(ft)),re!==o&&(re=me()),Q=re,Q}function xa(Q,re){if(!re)return[Q];for(var Ae=[Q],oe=0,C=re.length;oe<C;oe++)Ae[oe+1]=re[oe][1];return Ae}var Hn={m:"moveto",l:"lineto",h:"horizontal lineto",v:"vertical lineto",c:"curveto",s:"smooth curveto",q:"quadratic curveto",t:"smooth quadratic curveto",a:"elliptical arc",z:"closepath"};for(var os in Hn)Hn[os.toUpperCase()]=Hn[os];function mn(Q,re){re||(re=[{}]);for(var Ae=re.length;Ae--;){var oe={code:Q,command:Hn[Q]};Q==Q.toLowerCase()&&(oe.relative=!0);for(var C in re[Ae])oe[C]=re[Ae][C];re[Ae]=oe}return re}if(Le=u(),Le!==o&&te===n.length)return Le;throw Le!==o&&te<n.length&&Et(Qt()),Gt(Be,Te<n.length?n.charAt(Te):null,Te<n.length?mt(Te,Te+1):mt(Te,Te))}t.exports={SyntaxError:r,parse:a}}),Zz=pu((e,t)=>{var i=xH().parse;i.parseSVG=i,i.makeAbsolute=r,t.exports=i;function r(a){var n,s={x:0,y:0},o={x:"x0",y:"y0",x1:"x0",y1:"y0",x2:"x0",y2:"y0"};return a.forEach(function(l){l.command==="moveto"&&(n=l),l.x0=s.x,l.y0=s.y;for(var u in o)u in l&&(l[u]+=l.relative?l[o[u]]:0);"x"in l||(l.x=s.x),"y"in l||(l.y=s.y),l.relative=!1,l.code=l.code.toUpperCase(),l.command=="closepath"&&(l.x=n.x,l.y=n.y),s=l}),a}}),SH=pu((e,t)=>{t.exports=function(i,r){for(var a=i.split("."),n=r.split("."),s=0;s<3;s++){var o=Number(a[s]),l=Number(n[s]);if(o>l)return 1;if(l>o)return-1;if(!isNaN(o)&&isNaN(l))return 1;if(isNaN(o)&&!isNaN(l))return-1}return 0}}),dp="149",Ls={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CH=0,C3=1,_H=2,SE=1,MH=2,mf=3,Po=0,tn=1,Rn=2,Oa=0,Xc=1,_3=2,M3=3,E3=4,EH=5,sh=100,AH=101,PH=102,A3=103,P3=104,TH=200,kH=201,OH=202,DH=203,Qz=204,Jz=205,IH=206,LH=207,BH=208,zH=209,RH=210,NH=0,VH=1,FH=2,O_=3,jH=4,$H=5,UH=6,WH=7,eR=0,HH=1,GH=2,cl=0,qH=1,YH=2,XH=3,KH=4,ZH=5,tR=300,cd=301,dd=302,D_=303,I_=304,Om=306,ql=1e3,Zr=1001,L_=1002,Ar=1003,T3=1004,Y1=1005,ir=1006,QH=1007,Hh=1008,Un=1009,JH=1010,eG=1011,iR=1012,tG=1013,Yl=1014,Pa=1015,au=1016,iG=1017,rG=1018,Kc=1020,aG=1021,Ja=1023,nG=1024,sG=1025,Zc=1026,hd=1027,oG=1028,lG=1029,ay=1030,uG=1031,rR=1033,X1=33776,K1=33777,Z1=33778,Q1=33779,k3=35840,O3=35841,D3=35842,I3=35843,cG=36196,L3=37492,B3=37496,z3=37808,R3=37809,N3=37810,V3=37811,F3=37812,j3=37813,$3=37814,U3=37815,W3=37816,H3=37817,G3=37818,q3=37819,Y3=37820,X3=37821,J1=36492,dG=36283,K3=36284,Z3=36285,Q3=36286,aR=2200,nR=2201,CE=2202,ny=2300,sy=2301,ew=2302,mh=2400,vh=2401,oy=2402,_E=2500,hG=2501,To=3e3,Ji=3001,mu=3200,sR=3201,pG=0,fG=1,Ko="srgb",ly="srgb-linear",tw=7680,mG=519,B_=35044,vG=35048,J3="300 es",z_=1035,On=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let i=this._listeners[e];if(i!==void 0){let r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let t=this._listeners[e.type];if(t!==void 0){e.target=this;let i=t.slice(0);for(let r=0,a=i.length;r<a;r++)i[r].call(this,e);e.target=null}}},Dn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],eT=1234567,kf=Math.PI/180,Jf=180/Math.PI;function Zs(){let e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Dn[e&255]+Dn[e>>8&255]+Dn[e>>16&255]+Dn[e>>24&255]+"-"+Dn[t&255]+Dn[t>>8&255]+"-"+Dn[t>>16&15|64]+Dn[t>>24&255]+"-"+Dn[i&63|128]+Dn[i>>8&255]+"-"+Dn[i>>16&255]+Dn[i>>24&255]+Dn[r&255]+Dn[r>>8&255]+Dn[r>>16&255]+Dn[r>>24&255]).toLowerCase()}function Ma(e,t,i){return Math.max(t,Math.min(i,e))}function ME(e,t){return(e%t+t)%t}function gG(e,t,i,r,a){return r+(e-t)*(a-r)/(i-t)}function yG(e,t,i){return e!==t?(i-e)/(t-e):0}function Of(e,t,i){return(1-i)*e+i*t}function bG(e,t,i,r){return Of(e,t,1-Math.exp(-i*r))}function wG(e,t=1){return t-Math.abs(ME(e,t*2)-t)}function xG(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))}function SG(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(e*6-15)+10))}function CG(e,t){return e+Math.floor(Math.random()*(t-e+1))}function _G(e,t){return e+Math.random()*(t-e)}function MG(e){return e*(.5-Math.random())}function EG(e){e!==void 0&&(eT=e);let t=eT+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function AG(e){return e*kf}function PG(e){return e*Jf}function R_(e){return(e&e-1)===0&&e!==0}function oR(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function uy(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function TG(e,t,i,r,a){let n=Math.cos,s=Math.sin,o=n(i/2),l=s(i/2),u=n((t+r)/2),c=s((t+r)/2),d=n((t-r)/2),h=s((t-r)/2),p=n((r-t)/2),f=s((r-t)/2);switch(a){case"XYX":e.set(o*c,l*d,l*h,o*u);break;case"YZY":e.set(l*h,o*c,l*d,o*u);break;case"ZXZ":e.set(l*d,l*h,o*c,o*u);break;case"XZX":e.set(o*c,l*f,l*p,o*u);break;case"YXY":e.set(l*p,o*c,l*f,o*u);break;case"ZYZ":e.set(l*f,l*p,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function Xl(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Fr(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(e*65535);case Uint8Array:return Math.round(e*255);case Int16Array:return Math.round(e*32767);case Int8Array:return Math.round(e*127);default:throw new Error("Invalid component type.")}}var li=Object.freeze({__proto__:null,DEG2RAD:kf,RAD2DEG:Jf,ceilPowerOfTwo:oR,clamp:Ma,damp:bG,degToRad:AG,denormalize:Xl,euclideanModulo:ME,floorPowerOfTwo:uy,generateUUID:Zs,inverseLerp:yG,isPowerOfTwo:R_,lerp:Of,mapLinear:gG,normalize:Fr,pingpong:wG,radToDeg:PG,randFloat:_G,randFloatSpread:MG,randInt:CG,seededRandom:EG,setQuaternionFromProperEuler:TG,smootherstep:SG,smoothstep:xG}),Ce=class{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),r=Math.sin(t),a=this.x-e.x,n=this.y-e.y;return this.x=a*i-n*r+e.x,this.y=a*r+n*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Ta=class{constructor(){Ta.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,a,n,s,o,l){let u=this.elements;return u[0]=e,u[1]=r,u[2]=s,u[3]=t,u[4]=a,u[5]=o,u[6]=i,u[7]=n,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,a=this.elements,n=i[0],s=i[3],o=i[6],l=i[1],u=i[4],c=i[7],d=i[2],h=i[5],p=i[8],f=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],x=r[2],S=r[5],w=r[8];return a[0]=n*f+s*g+o*x,a[3]=n*v+s*y+o*S,a[6]=n*m+s*b+o*w,a[1]=l*f+u*g+c*x,a[4]=l*v+u*y+c*S,a[7]=l*m+u*b+c*w,a[2]=d*f+h*g+p*x,a[5]=d*v+h*y+p*S,a[8]=d*m+h*b+p*w,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],n=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*n*u-t*s*l-i*a*u+i*s*o+r*a*l-r*n*o}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],n=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=u*n-s*l,d=s*o-u*a,h=l*a-n*o,p=t*c+i*d+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=c*f,e[1]=(r*l-u*i)*f,e[2]=(s*i-r*n)*f,e[3]=d*f,e[4]=(u*t-r*o)*f,e[5]=(r*a-s*t)*f,e[6]=h*f,e[7]=(i*o-l*t)*f,e[8]=(n*t-i*a)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,a,n,s){let o=Math.cos(a),l=Math.sin(a);return this.set(i*o,i*l,-i*(o*n+l*s)+n+e,-r*l,r*o,-r*(-l*n+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(iw.makeScale(e,t)),this}rotate(e){return this.premultiply(iw.makeRotation(-e)),this}translate(e,t){return this.premultiply(iw.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}},iw=new Ta;function lR(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var kG={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function av(e,t){return new kG[e](t)}function em(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Qc(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function Fg(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}var rw={[Ko]:{[ly]:Qc},[ly]:{[Ko]:Fg}},Gn={legacyMode:!0,get workingColorSpace(){return ly},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(this.legacyMode||t===i||!t||!i)return e;if(rw[t]&&rw[t][i]!==void 0){let r=rw[t][i];return e.r=r(e.r),e.g=r(e.g),e.b=r(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},uR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ia={r:0,g:0,b:0},ao={h:0,s:0,l:0},nv={h:0,s:0,l:0};function aw(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+(t-e)*6*i:i<1/2?t:i<2/3?e+(t-e)*6*(2/3-i):e}function sv(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var Bi=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ko){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Gn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Gn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Gn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Gn.workingColorSpace){if(e=ME(e,1),t=Ma(t,0,1),i=Ma(i,0,1),t===0)this.r=this.g=this.b=i;else{let a=i<=.5?i*(1+t):i+t-i*t,n=2*i-a;this.r=aw(n,a,e+1/3),this.g=aw(n,a,e),this.b=aw(n,a,e-1/3)}return Gn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ko){function i(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let a,n=r[1],s=r[2];switch(n){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(a[1],10))/255,this.g=Math.min(255,parseInt(a[2],10))/255,this.b=Math.min(255,parseInt(a[3],10))/255,Gn.toWorkingColorSpace(this,t),i(a[4]),this;if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(a[1],10))/100,this.g=Math.min(100,parseInt(a[2],10))/100,this.b=Math.min(100,parseInt(a[3],10))/100,Gn.toWorkingColorSpace(this,t),i(a[4]),this;break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let o=parseFloat(a[1])/360,l=parseFloat(a[2])/100,u=parseFloat(a[3])/100;return i(a[4]),this.setHSL(o,l,u,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let a=r[1],n=a.length;if(n===3)return this.r=parseInt(a.charAt(0)+a.charAt(0),16)/255,this.g=parseInt(a.charAt(1)+a.charAt(1),16)/255,this.b=parseInt(a.charAt(2)+a.charAt(2),16)/255,Gn.toWorkingColorSpace(this,t),this;if(n===6)return this.r=parseInt(a.charAt(0)+a.charAt(1),16)/255,this.g=parseInt(a.charAt(2)+a.charAt(3),16)/255,this.b=parseInt(a.charAt(4)+a.charAt(5),16)/255,Gn.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Ko){let i=uR[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qc(e.r),this.g=Qc(e.g),this.b=Qc(e.b),this}copyLinearToSRGB(e){return this.r=Fg(e.r),this.g=Fg(e.g),this.b=Fg(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ko){return Gn.fromWorkingColorSpace(sv(this,Ia),e),Ma(Ia.r*255,0,255)<<16^Ma(Ia.g*255,0,255)<<8^Ma(Ia.b*255,0,255)<<0}getHexString(e=Ko){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Gn.workingColorSpace){Gn.fromWorkingColorSpace(sv(this,Ia),t);let i=Ia.r,r=Ia.g,a=Ia.b,n=Math.max(i,r,a),s=Math.min(i,r,a),o,l,u=(s+n)/2;if(s===n)o=0,l=0;else{let c=n-s;switch(l=u<=.5?c/(n+s):c/(2-n-s),n){case i:o=(r-a)/c+(r<a?6:0);break;case r:o=(a-i)/c+2;break;case a:o=(i-r)/c+4;break}o/=6}return e.h=o,e.s=l,e.l=u,e}getRGB(e,t=Gn.workingColorSpace){return Gn.fromWorkingColorSpace(sv(this,Ia),t),e.r=Ia.r,e.g=Ia.g,e.b=Ia.b,e}getStyle(e=Ko){return Gn.fromWorkingColorSpace(sv(this,Ia),e),e!==Ko?`color(${e} ${Ia.r} ${Ia.g} ${Ia.b})`:`rgb(${Ia.r*255|0},${Ia.g*255|0},${Ia.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(ao),ao.h+=e,ao.s+=t,ao.l+=i,this.setHSL(ao.h,ao.s,ao.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(ao),e.getHSL(nv);let i=Of(ao.h,nv.h,t),r=Of(ao.s,nv.s,t),a=Of(ao.l,nv.l,t);return this.setHSL(i,r,a),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Bi.NAMES=uR;var Td,cR=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Td===void 0&&(Td=em("canvas")),Td.width=e.width,Td.height=e.height;let i=Td.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Td}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=em("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let r=i.getImageData(0,0,e.width,e.height),a=r.data;for(let n=0;n<a.length;n++)a[n]=Qc(a[n]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Qc(t[i]/255)*255):t[i]=Qc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},dR=class{constructor(e=null){this.isSource=!0,this.uuid=Zs(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let a;if(Array.isArray(r)){a=[];for(let n=0,s=r.length;n<s;n++)r[n].isDataTexture?a.push(nw(r[n].image)):a.push(nw(r[n]))}else a=nw(r);i.url=a}return t||(e.images[this.uuid]=i),i}};function nw(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?cR.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var OG=0,aa=class extends On{constructor(e=aa.DEFAULT_IMAGE,t=aa.DEFAULT_MAPPING,i=Zr,r=Zr,a=ir,n=Hh,s=Ja,o=Un,l=aa.DEFAULT_ANISOTROPY,u=To){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:OG++}),this.uuid=Zs(),this.name="",this.source=new dR(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=a,this.minFilter=n,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ta,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tR)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ql:e.x=e.x-Math.floor(e.x);break;case Zr:e.x=e.x<0?0:1;break;case L_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ql:e.y=e.y-Math.floor(e.y);break;case Zr:e.y=e.y<0?0:1;break;case L_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};aa.DEFAULT_IMAGE=null;aa.DEFAULT_MAPPING=tR;aa.DEFAULT_ANISOTROPY=1;var Wi=class{constructor(e=0,t=0,i=0,r=1){Wi.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,a=this.w,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r+n[12]*a,this.y=n[1]*t+n[5]*i+n[9]*r+n[13]*a,this.z=n[2]*t+n[6]*i+n[10]*r+n[14]*a,this.w=n[3]*t+n[7]*i+n[11]*r+n[15]*a,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,a,n=e.elements,s=n[0],o=n[4],l=n[8],u=n[1],c=n[5],d=n[9],h=n[2],p=n[6],f=n[10];if(Math.abs(o-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-p)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+p)<.1&&Math.abs(s+c+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let m=(s+1)/2,g=(c+1)/2,y=(f+1)/2,b=(o+u)/4,x=(l+h)/4,S=(d+p)/4;return m>g&&m>y?m<.01?(i=0,r=.707106781,a=.707106781):(i=Math.sqrt(m),r=b/i,a=x/i):g>y?g<.01?(i=.707106781,r=0,a=.707106781):(r=Math.sqrt(g),i=b/r,a=S/r):y<.01?(i=.707106781,r=.707106781,a=0):(a=Math.sqrt(y),i=x/a,r=S/a),this.set(i,r,a,t),this}let v=Math.sqrt((p-d)*(p-d)+(l-h)*(l-h)+(u-o)*(u-o));return Math.abs(v)<.001&&(v=1),this.x=(p-d)/v,this.y=(l-h)/v,this.z=(u-o)/v,this.w=Math.acos((s+c+f-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Mr=class extends On{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Wi(0,0,e,t),this.scissorTest=!1,this.viewport=new Wi(0,0,e,t);let r={width:e,height:t,depth:1};this.texture=new aa(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ir,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new dR(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},hR=class extends aa{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ar,this.minFilter=Ar,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},DG=class extends aa{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ar,this.minFilter=Ar,this.wrapR=Zr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},IG=class extends Mr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;let a=this.texture;this.texture=[];for(let n=0;n<i;n++)this.texture[n]=a.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,a=this.texture.length;r<a;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},Ui=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,a,n,s){let o=i[r+0],l=i[r+1],u=i[r+2],c=i[r+3],d=a[n+0],h=a[n+1],p=a[n+2],f=a[n+3];if(s===0){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(s===1){e[t+0]=d,e[t+1]=h,e[t+2]=p,e[t+3]=f;return}if(c!==f||o!==d||l!==h||u!==p){let v=1-s,m=o*d+l*h+u*p+c*f,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){let x=Math.sqrt(y),S=Math.atan2(x,m*g);v=Math.sin(v*S)/x,s=Math.sin(s*S)/x}let b=s*g;if(o=o*v+d*b,l=l*v+h*b,u=u*v+p*b,c=c*v+f*b,v===1-s){let x=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=x,l*=x,u*=x,c*=x}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,i,r,a,n){let s=i[r],o=i[r+1],l=i[r+2],u=i[r+3],c=a[n],d=a[n+1],h=a[n+2],p=a[n+3];return e[t]=s*p+u*c+o*h-l*d,e[t+1]=o*p+u*d+l*c-s*h,e[t+2]=l*p+u*h+s*d-o*c,e[t+3]=u*p-s*c-o*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){let i=e._x,r=e._y,a=e._z,n=e._order,s=Math.cos,o=Math.sin,l=s(i/2),u=s(r/2),c=s(a/2),d=o(i/2),h=o(r/2),p=o(a/2);switch(n){case"XYZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"YXZ":this._x=d*u*c+l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"ZXY":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c-d*h*p;break;case"ZYX":this._x=d*u*c-l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c+d*h*p;break;case"YZX":this._x=d*u*c+l*h*p,this._y=l*h*c+d*u*p,this._z=l*u*p-d*h*c,this._w=l*u*c-d*h*p;break;case"XZY":this._x=d*u*c-l*h*p,this._y=l*h*c-d*u*p,this._z=l*u*p+d*h*c,this._w=l*u*c+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+n)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],r=t[4],a=t[8],n=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],d=i+s+c;if(d>0){let h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(u-o)*h,this._y=(a-l)*h,this._z=(n-r)*h}else if(i>s&&i>c){let h=2*Math.sqrt(1+i-s-c);this._w=(u-o)/h,this._x=.25*h,this._y=(r+n)/h,this._z=(a+l)/h}else if(s>c){let h=2*Math.sqrt(1+s-i-c);this._w=(a-l)/h,this._x=(r+n)/h,this._y=.25*h,this._z=(o+u)/h}else{let h=2*Math.sqrt(1+c-i-s);this._w=(n-r)/h,this._x=(a+l)/h,this._y=(o+u)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ma(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(i===0)return this;let r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,r=e._y,a=e._z,n=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=i*u+n*s+r*l-a*o,this._y=r*u+n*o+a*s-i*l,this._z=a*u+n*l+i*o-r*s,this._w=n*u-i*s-r*o-a*l,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let i=this._x,r=this._y,a=this._z,n=this._w,s=n*e._w+i*e._x+r*e._y+a*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=n,this._x=i,this._y=r,this._z=a,this;let o=1-s*s;if(o<=Number.EPSILON){let h=1-t;return this._w=h*n+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*a+t*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(o),u=Math.atan2(l,s),c=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=n*c+this._w*d,this._x=i*c+this._x*d,this._y=r*c+this._y*d,this._z=a*c+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),a=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(a),i*Math.cos(a),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},V=class{constructor(e=0,t=0,i=0){V.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(tT.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(tT.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6]*r,this.y=a[1]*t+a[4]*i+a[7]*r,this.z=a[2]*t+a[5]*i+a[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,r=this.z,a=e.elements,n=1/(a[3]*t+a[7]*i+a[11]*r+a[15]);return this.x=(a[0]*t+a[4]*i+a[8]*r+a[12])*n,this.y=(a[1]*t+a[5]*i+a[9]*r+a[13])*n,this.z=(a[2]*t+a[6]*i+a[10]*r+a[14])*n,this}applyQuaternion(e){let t=this.x,i=this.y,r=this.z,a=e.x,n=e.y,s=e.z,o=e.w,l=o*t+n*r-s*i,u=o*i+s*t-a*r,c=o*r+a*i-n*t,d=-a*t-n*i-s*r;return this.x=l*o+d*-a+u*-s-c*-n,this.y=u*o+d*-n+c*-a-l*-s,this.z=c*o+d*-s+l*-n-u*-a,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,r=this.z,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r,this.y=a[1]*t+a[5]*i+a[9]*r,this.z=a[2]*t+a[6]*i+a[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,r=e.y,a=e.z,n=t.x,s=t.y,o=t.z;return this.x=r*o-a*s,this.y=a*n-i*o,this.z=i*s-r*n,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sw.copy(this).projectOnVector(e),this.sub(sw)}reflect(e){return this.sub(sw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let i=this.dot(e)/t;return Math.acos(Ma(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},sw=new V,tT=new Ui,ba=class{constructor(e=new V(1/0,1/0,1/0),t=new V(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,a=-1/0,n=-1/0,s=-1/0;for(let o=0,l=e.length;o<l;o+=3){let u=e[o],c=e[o+1],d=e[o+2];u<t&&(t=u),c<i&&(i=c),d<r&&(r=d),u>a&&(a=u),c>n&&(n=c),d>s&&(s=d)}return this.min.set(t,i,r),this.max.set(a,n,s),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,a=-1/0,n=-1/0,s=-1/0;for(let o=0,l=e.count;o<l;o++){let u=e.getX(o),c=e.getY(o),d=e.getZ(o);u<t&&(t=u),c<i&&(i=c),d<r&&(r=d),u>a&&(a=u),c>n&&(n=c),d>s&&(s=d)}return this.min.set(t,i,r),this.max.set(a,n,s),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=yc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){let a=i.attributes.position;for(let n=0,s=a.count;n<s;n++)yc.fromBufferAttribute(a,n).applyMatrix4(e.matrixWorld),this.expandByPoint(yc)}else i.boundingBox===null&&i.computeBoundingBox(),ow.copy(i.boundingBox),ow.applyMatrix4(e.matrixWorld),this.union(ow);let r=e.children;for(let a=0,n=r.length;a<n;a++)this.expandByObject(r[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,yc),yc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ip),ov.subVectors(this.max,Ip),kd.subVectors(e.a,Ip),Od.subVectors(e.b,Ip),Dd.subVectors(e.c,Ip),wu.subVectors(Od,kd),xu.subVectors(Dd,Od),bc.subVectors(kd,Dd);let t=[0,-wu.z,wu.y,0,-xu.z,xu.y,0,-bc.z,bc.y,wu.z,0,-wu.x,xu.z,0,-xu.x,bc.z,0,-bc.x,-wu.y,wu.x,0,-xu.y,xu.x,0,-bc.y,bc.x,0];return!lw(t,kd,Od,Dd,ov)||(t=[1,0,0,0,1,0,0,0,1],!lw(t,kd,Od,Dd,ov))?!1:(lv.crossVectors(wu,xu),t=[lv.x,lv.y,lv.z],lw(t,kd,Od,Dd,ov))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return yc.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(yc).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(_l[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),_l[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),_l[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),_l[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),_l[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),_l[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),_l[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),_l[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(_l),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},_l=[new V,new V,new V,new V,new V,new V,new V,new V],yc=new V,ow=new ba,kd=new V,Od=new V,Dd=new V,wu=new V,xu=new V,bc=new V,Ip=new V,ov=new V,lv=new V,wc=new V;function lw(e,t,i,r,a){for(let n=0,s=e.length-3;n<=s;n+=3){wc.fromArray(e,n);let o=a.x*Math.abs(wc.x)+a.y*Math.abs(wc.y)+a.z*Math.abs(wc.z),l=t.dot(wc),u=i.dot(wc),c=r.dot(wc);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}var LG=new ba,Lp=new V,uw=new V,ws=class{constructor(e=new V,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;t!==void 0?i.copy(t):LG.setFromPoints(e).getCenter(i);let r=0;for(let a=0,n=e.length;a<n;a++)r=Math.max(r,i.distanceToSquared(e[a]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lp.subVectors(e,this.center);let t=Lp.lengthSq();if(t>this.radius*this.radius){let i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Lp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lp.copy(e.center).add(uw)),this.expandByPoint(Lp.copy(e.center).sub(uw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ml=new V,cw=new V,uv=new V,Su=new V,dw=new V,cv=new V,hw=new V,hp=class{constructor(e=new V,t=new V(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ml)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Ml.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ml.copy(this.direction).multiplyScalar(t).add(this.origin),Ml.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){cw.copy(e).add(t).multiplyScalar(.5),uv.copy(t).sub(e).normalize(),Su.copy(this.origin).sub(cw);let a=e.distanceTo(t)*.5,n=-this.direction.dot(uv),s=Su.dot(this.direction),o=-Su.dot(uv),l=Su.lengthSq(),u=Math.abs(1-n*n),c,d,h,p;if(u>0)if(c=n*o-s,d=n*s-o,p=a*u,c>=0)if(d>=-p)if(d<=p){let f=1/u;c*=f,d*=f,h=c*(c+n*d+2*s)+d*(n*c+d+2*o)+l}else d=a,c=Math.max(0,-(n*d+s)),h=-c*c+d*(d+2*o)+l;else d=-a,c=Math.max(0,-(n*d+s)),h=-c*c+d*(d+2*o)+l;else d<=-p?(c=Math.max(0,-(-n*a+s)),d=c>0?-a:Math.min(Math.max(-a,-o),a),h=-c*c+d*(d+2*o)+l):d<=p?(c=0,d=Math.min(Math.max(-a,-o),a),h=d*(d+2*o)+l):(c=Math.max(0,-(n*a+s)),d=c>0?a:Math.min(Math.max(-a,-o),a),h=-c*c+d*(d+2*o)+l);else d=n>0?-a:a,c=Math.max(0,-(n*d+s)),h=-c*c+d*(d+2*o)+l;return i&&i.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(uv).multiplyScalar(d).add(cw),h}intersectSphere(e,t){Ml.subVectors(e.center,this.origin);let i=Ml.dot(this.direction),r=Ml.dot(Ml)-i*i,a=e.radius*e.radius;if(r>a)return null;let n=Math.sqrt(a-r),s=i-n,o=i+n;return s<0&&o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,a,n,s,o,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(a=(e.min.y-d.y)*u,n=(e.max.y-d.y)*u):(a=(e.max.y-d.y)*u,n=(e.min.y-d.y)*u),i>n||a>r||((a>i||isNaN(i))&&(i=a),(n<r||isNaN(r))&&(r=n),c>=0?(s=(e.min.z-d.z)*c,o=(e.max.z-d.z)*c):(s=(e.max.z-d.z)*c,o=(e.min.z-d.z)*c),i>o||s>r)||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ml)!==null}intersectTriangle(e,t,i,r,a){dw.subVectors(t,e),cv.subVectors(i,e),hw.crossVectors(dw,cv);let n=this.direction.dot(hw),s;if(n>0){if(r)return null;s=1}else if(n<0)s=-1,n=-n;else return null;Su.subVectors(this.origin,e);let o=s*this.direction.dot(cv.crossVectors(Su,cv));if(o<0)return null;let l=s*this.direction.dot(dw.cross(Su));if(l<0||o+l>n)return null;let u=-s*Su.dot(hw);return u<0?null:this.at(u/n,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},zt=class{constructor(){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,a,n,s,o,l,u,c,d,h,p,f,v){let m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=r,m[1]=a,m[5]=n,m[9]=s,m[13]=o,m[2]=l,m[6]=u,m[10]=c,m[14]=d,m[3]=h,m[7]=p,m[11]=f,m[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,r=1/Id.setFromMatrixColumn(e,0).length(),a=1/Id.setFromMatrixColumn(e,1).length(),n=1/Id.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*a,t[5]=i[5]*a,t[6]=i[6]*a,t[7]=0,t[8]=i[8]*n,t[9]=i[9]*n,t[10]=i[10]*n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,r=e.y,a=e.z,n=Math.cos(i),s=Math.sin(i),o=Math.cos(r),l=Math.sin(r),u=Math.cos(a),c=Math.sin(a);if(e.order==="XYZ"){let d=n*u,h=n*c,p=s*u,f=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=h+p*l,t[5]=d-f*l,t[9]=-s*o,t[2]=f-d*l,t[6]=p+h*l,t[10]=n*o}else if(e.order==="YXZ"){let d=o*u,h=o*c,p=l*u,f=l*c;t[0]=d+f*s,t[4]=p*s-h,t[8]=n*l,t[1]=n*c,t[5]=n*u,t[9]=-s,t[2]=h*s-p,t[6]=f+d*s,t[10]=n*o}else if(e.order==="ZXY"){let d=o*u,h=o*c,p=l*u,f=l*c;t[0]=d-f*s,t[4]=-n*c,t[8]=p+h*s,t[1]=h+p*s,t[5]=n*u,t[9]=f-d*s,t[2]=-n*l,t[6]=s,t[10]=n*o}else if(e.order==="ZYX"){let d=n*u,h=n*c,p=s*u,f=s*c;t[0]=o*u,t[4]=p*l-h,t[8]=d*l+f,t[1]=o*c,t[5]=f*l+d,t[9]=h*l-p,t[2]=-l,t[6]=s*o,t[10]=n*o}else if(e.order==="YZX"){let d=n*o,h=n*l,p=s*o,f=s*l;t[0]=o*u,t[4]=f-d*c,t[8]=p*c+h,t[1]=c,t[5]=n*u,t[9]=-s*u,t[2]=-l*u,t[6]=h*c+p,t[10]=d-f*c}else if(e.order==="XZY"){let d=n*o,h=n*l,p=s*o,f=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=d*c+f,t[5]=n*u,t[9]=h*c-p,t[2]=p*c-h,t[6]=s*u,t[10]=f*c+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(BG,e,zG)}lookAt(e,t,i){let r=this.elements;return Es.subVectors(e,t),Es.lengthSq()===0&&(Es.z=1),Es.normalize(),Cu.crossVectors(i,Es),Cu.lengthSq()===0&&(Math.abs(i.z)===1?Es.x+=1e-4:Es.z+=1e-4,Es.normalize(),Cu.crossVectors(i,Es)),Cu.normalize(),dv.crossVectors(Es,Cu),r[0]=Cu.x,r[4]=dv.x,r[8]=Es.x,r[1]=Cu.y,r[5]=dv.y,r[9]=Es.y,r[2]=Cu.z,r[6]=dv.z,r[10]=Es.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,r=t.elements,a=this.elements,n=i[0],s=i[4],o=i[8],l=i[12],u=i[1],c=i[5],d=i[9],h=i[13],p=i[2],f=i[6],v=i[10],m=i[14],g=i[3],y=i[7],b=i[11],x=i[15],S=r[0],w=r[4],E=r[8],M=r[12],P=r[1],A=r[5],k=r[9],I=r[13],O=r[2],D=r[6],F=r[10],U=r[14],z=r[3],B=r[7],W=r[11],R=r[15];return a[0]=n*S+s*P+o*O+l*z,a[4]=n*w+s*A+o*D+l*B,a[8]=n*E+s*k+o*F+l*W,a[12]=n*M+s*I+o*U+l*R,a[1]=u*S+c*P+d*O+h*z,a[5]=u*w+c*A+d*D+h*B,a[9]=u*E+c*k+d*F+h*W,a[13]=u*M+c*I+d*U+h*R,a[2]=p*S+f*P+v*O+m*z,a[6]=p*w+f*A+v*D+m*B,a[10]=p*E+f*k+v*F+m*W,a[14]=p*M+f*I+v*U+m*R,a[3]=g*S+y*P+b*O+x*z,a[7]=g*w+y*A+b*D+x*B,a[11]=g*E+y*k+b*F+x*W,a[15]=g*M+y*I+b*U+x*R,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],r=e[8],a=e[12],n=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14],p=e[3],f=e[7],v=e[11],m=e[15];return p*(+a*o*c-r*l*c-a*s*d+i*l*d+r*s*h-i*o*h)+f*(+t*o*h-t*l*d+a*n*d-r*n*h+r*l*u-a*o*u)+v*(+t*l*c-t*s*h-a*n*c+i*n*h+a*s*u-i*l*u)+m*(-r*s*u-t*o*c+t*s*d+r*n*c-i*n*d+i*o*u)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],r=e[2],a=e[3],n=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],d=e[10],h=e[11],p=e[12],f=e[13],v=e[14],m=e[15],g=c*v*l-f*d*l+f*o*h-s*v*h-c*o*m+s*d*m,y=p*d*l-u*v*l-p*o*h+n*v*h+u*o*m-n*d*m,b=u*f*l-p*c*l+p*s*h-n*f*h-u*s*m+n*c*m,x=p*c*o-u*f*o-p*s*d+n*f*d+u*s*v-n*c*v,S=t*g+i*y+r*b+a*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let w=1/S;return e[0]=g*w,e[1]=(f*d*a-c*v*a-f*r*h+i*v*h+c*r*m-i*d*m)*w,e[2]=(s*v*a-f*o*a+f*r*l-i*v*l-s*r*m+i*o*m)*w,e[3]=(c*o*a-s*d*a-c*r*l+i*d*l+s*r*h-i*o*h)*w,e[4]=y*w,e[5]=(u*v*a-p*d*a+p*r*h-t*v*h-u*r*m+t*d*m)*w,e[6]=(p*o*a-n*v*a-p*r*l+t*v*l+n*r*m-t*o*m)*w,e[7]=(n*d*a-u*o*a+u*r*l-t*d*l-n*r*h+t*o*h)*w,e[8]=b*w,e[9]=(p*c*a-u*f*a-p*i*h+t*f*h+u*i*m-t*c*m)*w,e[10]=(n*f*a-p*s*a+p*i*l-t*f*l-n*i*m+t*s*m)*w,e[11]=(u*s*a-n*c*a-u*i*l+t*c*l+n*i*h-t*s*h)*w,e[12]=x*w,e[13]=(u*f*r-p*c*r+p*i*d-t*f*d-u*i*v+t*c*v)*w,e[14]=(p*s*r-n*f*r-p*i*o+t*f*o+n*i*v-t*s*v)*w,e[15]=(n*c*r-u*s*r+u*i*o-t*c*o-n*i*d+t*s*d)*w,this}scale(e){let t=this.elements,i=e.x,r=e.y,a=e.z;return t[0]*=i,t[4]*=r,t[8]*=a,t[1]*=i,t[5]*=r,t[9]*=a,t[2]*=i,t[6]*=r,t[10]*=a,t[3]*=i,t[7]*=r,t[11]*=a,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),r=Math.sin(t),a=1-i,n=e.x,s=e.y,o=e.z,l=a*n,u=a*s;return this.set(l*n+i,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+i,u*o-r*n,0,l*o-r*s,u*o+r*n,a*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,a,n){return this.set(1,i,a,0,e,1,n,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){let r=this.elements,a=t._x,n=t._y,s=t._z,o=t._w,l=a+a,u=n+n,c=s+s,d=a*l,h=a*u,p=a*c,f=n*u,v=n*c,m=s*c,g=o*l,y=o*u,b=o*c,x=i.x,S=i.y,w=i.z;return r[0]=(1-(f+m))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*S,r[5]=(1-(d+m))*S,r[6]=(v+g)*S,r[7]=0,r[8]=(p+y)*w,r[9]=(v-g)*w,r[10]=(1-(d+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){let r=this.elements,a=Id.set(r[0],r[1],r[2]).length(),n=Id.set(r[4],r[5],r[6]).length(),s=Id.set(r[8],r[9],r[10]).length();this.determinant()<0&&(a=-a),e.x=r[12],e.y=r[13],e.z=r[14],no.copy(this);let o=1/a,l=1/n,u=1/s;return no.elements[0]*=o,no.elements[1]*=o,no.elements[2]*=o,no.elements[4]*=l,no.elements[5]*=l,no.elements[6]*=l,no.elements[8]*=u,no.elements[9]*=u,no.elements[10]*=u,t.setFromRotationMatrix(no),i.x=a,i.y=n,i.z=s,this}makePerspective(e,t,i,r,a,n){let s=this.elements,o=2*a/(t-e),l=2*a/(i-r),u=(t+e)/(t-e),c=(i+r)/(i-r),d=-(n+a)/(n-a),h=-2*n*a/(n-a);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,r,a,n){let s=this.elements,o=1/(t-e),l=1/(i-r),u=1/(n-a),c=(t+e)*o,d=(i+r)*l,h=(n+a)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}},Id=new V,no=new zt,BG=new V(0,0,0),zG=new V(1,1,1),Cu=new V,dv=new V,Es=new V,iT=new zt,rT=new Ui,Va=class{constructor(e=0,t=0,i=0,r=Va.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let r=e.elements,a=r[0],n=r[4],s=r[8],o=r[1],l=r[5],u=r[9],c=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Ma(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,h),this._z=Math.atan2(-n,a)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ma(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,h),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,a),this._z=0);break;case"ZXY":this._x=Math.asin(Ma(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,h),this._z=Math.atan2(-n,l)):(this._y=0,this._z=Math.atan2(o,a));break;case"ZYX":this._y=Math.asin(-Ma(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(o,a)):(this._x=0,this._z=Math.atan2(-n,l));break;case"YZX":this._z=Math.asin(Ma(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,a)):(this._x=0,this._y=Math.atan2(s,h));break;case"XZY":this._z=Math.asin(-Ma(n,-1,1)),Math.abs(n)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return iT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(iT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return rT.setFromEuler(this),this.setFromQuaternion(rT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Va.DEFAULT_ORDER="XYZ";var EE=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},RG=0,aT=new V,Ld=new Ui,El=new zt,hv=new V,Bp=new V,NG=new V,VG=new Ui,nT=new V(1,0,0),sT=new V(0,1,0),oT=new V(0,0,1),FG={type:"added"},lT={type:"removed"},Tr=class extends On{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:RG++}),this.uuid=Zs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tr.DEFAULT_UP.clone();let e=new V,t=new Va,i=new Ui,r=new V(1,1,1);function a(){i.setFromEuler(t,!1)}function n(){t.setFromQuaternion(i,void 0,!1)}t._onChange(a),i._onChange(n),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zt},normalMatrix:{value:new Ta}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=Tr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new EE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.multiply(Ld),this}rotateOnWorldAxis(e,t){return Ld.setFromAxisAngle(e,t),this.quaternion.premultiply(Ld),this}rotateX(e){return this.rotateOnAxis(nT,e)}rotateY(e){return this.rotateOnAxis(sT,e)}rotateZ(e){return this.rotateOnAxis(oT,e)}translateOnAxis(e,t){return aT.copy(e).applyQuaternion(this.quaternion),this.position.add(aT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(nT,e)}translateY(e){return this.translateOnAxis(sT,e)}translateZ(e){return this.translateOnAxis(oT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(El.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?hv.copy(e):hv.set(e,t,i);let r=this.parent;this.updateWorldMatrix(!0,!1),Bp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?El.lookAt(Bp,hv,this.up):El.lookAt(hv,Bp,this.up),this.quaternion.setFromRotationMatrix(El),r&&(El.extractRotation(r.matrixWorld),Ld.setFromRotationMatrix(El),this.quaternion.premultiply(Ld.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(FG)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(lT)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){let t=this.children[e];t.parent=null,t.dispatchEvent(lT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),El.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),El.multiply(e.parent.matrixWorld)),e.applyMatrix4(El),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){let a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,a=this.children.length;r<a;r++){let n=this.children[r].getObjectsByProperty(e,t);n.length>0&&(i=i.concat(n))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bp,e,NG),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Bp,VG,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,r=t.length;i<r;i++){let a=t[i];(a.matrixWorldAutoUpdate===!0||e===!0)&&a.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let a=0,n=r.length;a<n;a++){let s=r[a];s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function a(s,o){return s[o.uuid]===void 0&&(s[o.uuid]=o.toJSON(e)),o.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=a(e.geometries,this.geometry);let s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){let o=s.shapes;if(Array.isArray(o))for(let l=0,u=o.length;l<u;l++){let c=o[l];a(e.shapes,c)}else a(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let s=[];for(let o=0,l=this.material.length;o<l;o++)s.push(a(e.materials,this.material[o]));r.material=s}else r.material=a(e.materials,this.material);if(this.children.length>0){r.children=[];for(let s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let s=0;s<this.animations.length;s++){let o=this.animations[s];r.animations.push(a(e.animations,o))}}if(t){let s=n(e.geometries),o=n(e.materials),l=n(e.textures),u=n(e.images),c=n(e.shapes),d=n(e.skeletons),h=n(e.animations),p=n(e.nodes);s.length>0&&(i.geometries=s),o.length>0&&(i.materials=o),l.length>0&&(i.textures=l),u.length>0&&(i.images=u),c.length>0&&(i.shapes=c),d.length>0&&(i.skeletons=d),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function n(s){let o=[];for(let l in s){let u=s[l];delete u.metadata,o.push(u)}return o}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){let r=e.children[i];this.add(r.clone())}return this}};Tr.DEFAULT_UP=new V(0,1,0);Tr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Tr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var so=new V,Al=new V,pw=new V,Pl=new V,Bd=new V,zd=new V,uT=new V,fw=new V,mw=new V,vw=new V,xn=class{constructor(e=new V,t=new V,i=new V){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),so.subVectors(e,t),r.cross(so);let a=r.lengthSq();return a>0?r.multiplyScalar(1/Math.sqrt(a)):r.set(0,0,0)}static getBarycoord(e,t,i,r,a){so.subVectors(r,t),Al.subVectors(i,t),pw.subVectors(e,t);let n=so.dot(so),s=so.dot(Al),o=so.dot(pw),l=Al.dot(Al),u=Al.dot(pw),c=n*l-s*s;if(c===0)return a.set(-2,-1,-1);let d=1/c,h=(l*o-s*u)*d,p=(n*u-s*o)*d;return a.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Pl),Pl.x>=0&&Pl.y>=0&&Pl.x+Pl.y<=1}static getUV(e,t,i,r,a,n,s,o){return this.getBarycoord(e,t,i,r,Pl),o.set(0,0),o.addScaledVector(a,Pl.x),o.addScaledVector(n,Pl.y),o.addScaledVector(s,Pl.z),o}static isFrontFacing(e,t,i,r){return so.subVectors(i,t),Al.subVectors(e,t),so.cross(Al).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return so.subVectors(this.c,this.b),Al.subVectors(this.a,this.b),so.cross(Al).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return xn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return xn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,a){return xn.getUV(e,this.a,this.b,this.c,t,i,r,a)}containsPoint(e){return xn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return xn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i=this.a,r=this.b,a=this.c,n,s;Bd.subVectors(r,i),zd.subVectors(a,i),fw.subVectors(e,i);let o=Bd.dot(fw),l=zd.dot(fw);if(o<=0&&l<=0)return t.copy(i);mw.subVectors(e,r);let u=Bd.dot(mw),c=zd.dot(mw);if(u>=0&&c<=u)return t.copy(r);let d=o*c-u*l;if(d<=0&&o>=0&&u<=0)return n=o/(o-u),t.copy(i).addScaledVector(Bd,n);vw.subVectors(e,a);let h=Bd.dot(vw),p=zd.dot(vw);if(p>=0&&h<=p)return t.copy(a);let f=h*l-o*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(i).addScaledVector(zd,s);let v=u*p-h*c;if(v<=0&&c-u>=0&&h-p>=0)return uT.subVectors(a,r),s=(c-u)/(c-u+(h-p)),t.copy(r).addScaledVector(uT,s);let m=1/(v+f+d);return n=f*m,s=d*m,t.copy(i).addScaledVector(Bd,n).addScaledVector(zd,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},jG=0,Dm=class extends On{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jG++}),this.uuid=Zs(),this.name="",this.type="Material",this.blending=Xc,this.side=Po,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Qz,this.blendDst=Jz,this.blendEquation=sh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=O_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=mG,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tw,this.stencilZFail=tw,this.stencilZPass=tw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}let r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Xc&&(i.blending=this.blending),this.side!==Po&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(a){let n=[];for(let s in a){let o=a[s];delete o.metadata,n.push(o)}return n}if(t){let a=r(e.textures),n=r(e.images);a.length>0&&(i.textures=a),n.length>0&&(i.images=n)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(t!==null){let r=t.length;i=new Array(r);for(let a=0;a!==r;++a)i[a]=t[a].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},nu=class extends Dm{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Bi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}},Ca=new V,pv=new Ce,ji=class{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=B_,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)pv.fromBufferAttribute(this,t),pv.applyMatrix3(e),this.setXY(t,pv.x,pv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix3(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyMatrix4(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.applyNormalMatrix(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ca.fromBufferAttribute(this,t),Ca.transformDirection(e),this.setXYZ(t,Ca.x,Ca.y,Ca.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Xl(t,this.array)),t}setX(e,t){return this.normalized&&(t=Fr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Xl(t,this.array)),t}setY(e,t){return this.normalized&&(t=Fr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Xl(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Fr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Xl(t,this.array)),t}setW(e,t){return this.normalized&&(t=Fr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array),r=Fr(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e*=this.itemSize,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array),r=Fr(r,this.array),a=Fr(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==B_&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},pR=class extends ji{constructor(e,t,i){super(new Uint16Array(e),t,i)}},Eh=class extends ji{constructor(e,t,i){super(new Uint32Array(e),t,i)}},ri=class extends ji{constructor(e,t,i){super(new Float32Array(e),t,i)}},$G=0,Bs=new zt,gw=new Tr,Rd=new V,As=new ba,zp=new ba,qa=new V,Mi=class extends On{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$G++}),this.uuid=Zs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lR(e)?Eh:pR)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let a=new Ta().getNormalMatrix(e);i.applyNormalMatrix(a),i.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Bs.makeRotationFromQuaternion(e),this.applyMatrix4(Bs),this}rotateX(e){return Bs.makeRotationX(e),this.applyMatrix4(Bs),this}rotateY(e){return Bs.makeRotationY(e),this.applyMatrix4(Bs),this}rotateZ(e){return Bs.makeRotationZ(e),this.applyMatrix4(Bs),this}translate(e,t,i){return Bs.makeTranslation(e,t,i),this.applyMatrix4(Bs),this}scale(e,t,i){return Bs.makeScale(e,t,i),this.applyMatrix4(Bs),this}lookAt(e){return gw.lookAt(e),gw.updateMatrix(),this.applyMatrix4(gw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Rd).negate(),this.translate(Rd.x,Rd.y,Rd.z),this}setFromPoints(e){let t=[];for(let i=0,r=e.length;i<r;i++){let a=e[i];t.push(a.x,a.y,a.z||0)}return this.setAttribute("position",new ri(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ba);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new V(-1/0,-1/0,-1/0),new V(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){let a=t[i];As.setFromBufferAttribute(a),this.morphTargetsRelative?(qa.addVectors(this.boundingBox.min,As.min),this.boundingBox.expandByPoint(qa),qa.addVectors(this.boundingBox.max,As.max),this.boundingBox.expandByPoint(qa)):(this.boundingBox.expandByPoint(As.min),this.boundingBox.expandByPoint(As.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ws);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new V,1/0);return}if(e){let i=this.boundingSphere.center;if(As.setFromBufferAttribute(e),t)for(let a=0,n=t.length;a<n;a++){let s=t[a];zp.setFromBufferAttribute(s),this.morphTargetsRelative?(qa.addVectors(As.min,zp.min),As.expandByPoint(qa),qa.addVectors(As.max,zp.max),As.expandByPoint(qa)):(As.expandByPoint(zp.min),As.expandByPoint(zp.max))}As.getCenter(i);let r=0;for(let a=0,n=e.count;a<n;a++)qa.fromBufferAttribute(e,a),r=Math.max(r,i.distanceToSquared(qa));if(t)for(let a=0,n=t.length;a<n;a++){let s=t[a],o=this.morphTargetsRelative;for(let l=0,u=s.count;l<u;l++)qa.fromBufferAttribute(s,l),o&&(Rd.fromBufferAttribute(e,l),qa.add(Rd)),r=Math.max(r,i.distanceToSquared(qa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let i=e.array,r=t.position.array,a=t.normal.array,n=t.uv.array,s=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ji(new Float32Array(4*s),4));let o=this.getAttribute("tangent").array,l=[],u=[];for(let P=0;P<s;P++)l[P]=new V,u[P]=new V;let c=new V,d=new V,h=new V,p=new Ce,f=new Ce,v=new Ce,m=new V,g=new V;function y(P,A,k){c.fromArray(r,P*3),d.fromArray(r,A*3),h.fromArray(r,k*3),p.fromArray(n,P*2),f.fromArray(n,A*2),v.fromArray(n,k*2),d.sub(c),h.sub(c),f.sub(p),v.sub(p);let I=1/(f.x*v.y-v.x*f.y);!isFinite(I)||(m.copy(d).multiplyScalar(v.y).addScaledVector(h,-f.y).multiplyScalar(I),g.copy(h).multiplyScalar(f.x).addScaledVector(d,-v.x).multiplyScalar(I),l[P].add(m),l[A].add(m),l[k].add(m),u[P].add(g),u[A].add(g),u[k].add(g))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let P=0,A=b.length;P<A;++P){let k=b[P],I=k.start,O=k.count;for(let D=I,F=I+O;D<F;D+=3)y(i[D+0],i[D+1],i[D+2])}let x=new V,S=new V,w=new V,E=new V;function M(P){w.fromArray(a,P*3),E.copy(w);let A=l[P];x.copy(A),x.sub(w.multiplyScalar(w.dot(A))).normalize(),S.crossVectors(E,A);let k=S.dot(u[P])<0?-1:1;o[P*4]=x.x,o[P*4+1]=x.y,o[P*4+2]=x.z,o[P*4+3]=k}for(let P=0,A=b.length;P<A;++P){let k=b[P],I=k.start,O=k.count;for(let D=I,F=I+O;D<F;D+=3)M(i[D+0]),M(i[D+1]),M(i[D+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ji(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,h=i.count;d<h;d++)i.setXYZ(d,0,0,0);let r=new V,a=new V,n=new V,s=new V,o=new V,l=new V,u=new V,c=new V;if(e)for(let d=0,h=e.count;d<h;d+=3){let p=e.getX(d+0),f=e.getX(d+1),v=e.getX(d+2);r.fromBufferAttribute(t,p),a.fromBufferAttribute(t,f),n.fromBufferAttribute(t,v),u.subVectors(n,a),c.subVectors(r,a),u.cross(c),s.fromBufferAttribute(i,p),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,v),s.add(u),o.add(u),l.add(u),i.setXYZ(p,s.x,s.y,s.z),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z)}else for(let d=0,h=t.count;d<h;d+=3)r.fromBufferAttribute(t,d+0),a.fromBufferAttribute(t,d+1),n.fromBufferAttribute(t,d+2),u.subVectors(n,a),c.subVectors(r,a),u.cross(c),i.setXYZ(d+0,u.x,u.y,u.z),i.setXYZ(d+1,u.x,u.y,u.z),i.setXYZ(d+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)qa.fromBufferAttribute(e,t),qa.normalize(),e.setXYZ(t,qa.x,qa.y,qa.z)}toNonIndexed(){function e(s,o){let l=s.array,u=s.itemSize,c=s.normalized,d=new l.constructor(o.length*u),h=0,p=0;for(let f=0,v=o.length;f<v;f++){s.isInterleavedBufferAttribute?h=o[f]*s.data.stride+s.offset:h=o[f]*u;for(let m=0;m<u;m++)d[p++]=l[h++]}return new ji(d,u,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new Mi,i=this.index.array,r=this.attributes;for(let s in r){let o=r[s],l=e(o,i);t.setAttribute(s,l)}let a=this.morphAttributes;for(let s in a){let o=[],l=a[s];for(let u=0,c=l.length;u<c;u++){let d=l[u],h=e(d,i);o.push(h)}t.morphAttributes[s]=o}t.morphTargetsRelative=this.morphTargetsRelative;let n=this.groups;for(let s=0,o=n.length;s<o;s++){let l=n[s];t.addGroup(l.start,l.count,l.materialIndex)}return t}toJSON(){let e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let o=this.parameters;for(let l in o)o[l]!==void 0&&(e[l]=o[l]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let o in i){let l=i[o];e.data.attributes[o]=l.toJSON(e.data)}let r={},a=!1;for(let o in this.morphAttributes){let l=this.morphAttributes[o],u=[];for(let c=0,d=l.length;c<d;c++){let h=l[c];u.push(h.toJSON(e.data))}u.length>0&&(r[o]=u,a=!0)}a&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let n=this.groups;n.length>0&&(e.data.groups=JSON.parse(JSON.stringify(n)));let s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;i!==null&&this.setIndex(i.clone(t));let r=e.attributes;for(let l in r){let u=r[l];this.setAttribute(l,u.clone(t))}let a=e.morphAttributes;for(let l in a){let u=[],c=a[l];for(let d=0,h=c.length;d<h;d++)u.push(c[d].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;let n=e.groups;for(let l=0,u=n.length;l<u;l++){let c=n[l];this.addGroup(c.start,c.count,c.materialIndex)}let s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());let o=e.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},cT=new zt,Nd=new hp,yw=new ws,Rp=new V,Np=new V,Vp=new V,bw=new V,fv=new V,mv=new Ce,vv=new Ce,gv=new Ce,ww=new V,yv=new V,ra=class extends Tr{constructor(e=new Mi,t=new nu){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){let n=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}getVertexPosition(e,t){let i=this.geometry,r=i.attributes.position,a=i.morphAttributes.position,n=i.morphTargetsRelative;t.fromBufferAttribute(r,e);let s=this.morphTargetInfluences;if(a&&s){fv.set(0,0,0);for(let o=0,l=a.length;o<l;o++){let u=s[o],c=a[o];u!==0&&(bw.fromBufferAttribute(c,e),n?fv.addScaledVector(bw,u):fv.addScaledVector(bw.sub(t),u))}t.add(fv)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){let i=this.geometry,r=this.material,a=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),yw.copy(i.boundingSphere),yw.applyMatrix4(a),e.ray.intersectsSphere(yw)===!1)||(cT.copy(a).invert(),Nd.copy(e.ray).applyMatrix4(cT),i.boundingBox!==null&&Nd.intersectsBox(i.boundingBox)===!1))return;let n,s=i.index,o=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv2,c=i.groups,d=i.drawRange;if(s!==null)if(Array.isArray(r))for(let h=0,p=c.length;h<p;h++){let f=c[h],v=r[f.materialIndex],m=Math.max(f.start,d.start),g=Math.min(s.count,Math.min(f.start+f.count,d.start+d.count));for(let y=m,b=g;y<b;y+=3){let x=s.getX(y),S=s.getX(y+1),w=s.getX(y+2);n=bv(this,v,e,Nd,l,u,x,S,w),n&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=f.materialIndex,t.push(n))}}else{let h=Math.max(0,d.start),p=Math.min(s.count,d.start+d.count);for(let f=h,v=p;f<v;f+=3){let m=s.getX(f),g=s.getX(f+1),y=s.getX(f+2);n=bv(this,r,e,Nd,l,u,m,g,y),n&&(n.faceIndex=Math.floor(f/3),t.push(n))}}else if(o!==void 0)if(Array.isArray(r))for(let h=0,p=c.length;h<p;h++){let f=c[h],v=r[f.materialIndex],m=Math.max(f.start,d.start),g=Math.min(o.count,Math.min(f.start+f.count,d.start+d.count));for(let y=m,b=g;y<b;y+=3){let x=y,S=y+1,w=y+2;n=bv(this,v,e,Nd,l,u,x,S,w),n&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=f.materialIndex,t.push(n))}}else{let h=Math.max(0,d.start),p=Math.min(o.count,d.start+d.count);for(let f=h,v=p;f<v;f+=3){let m=f,g=f+1,y=f+2;n=bv(this,r,e,Nd,l,u,m,g,y),n&&(n.faceIndex=Math.floor(f/3),t.push(n))}}}};function UG(e,t,i,r,a,n,s,o){let l;if(t.side===tn?l=r.intersectTriangle(s,n,a,!0,o):l=r.intersectTriangle(a,n,s,t.side===Po,o),l===null)return null;yv.copy(o),yv.applyMatrix4(e.matrixWorld);let u=i.ray.origin.distanceTo(yv);return u<i.near||u>i.far?null:{distance:u,point:yv.clone(),object:e}}function bv(e,t,i,r,a,n,s,o,l){e.getVertexPosition(s,Rp),e.getVertexPosition(o,Np),e.getVertexPosition(l,Vp);let u=UG(e,t,i,r,Rp,Np,Vp,ww);if(u){a&&(mv.fromBufferAttribute(a,s),vv.fromBufferAttribute(a,o),gv.fromBufferAttribute(a,l),u.uv=xn.getUV(ww,Rp,Np,Vp,mv,vv,gv,new Ce)),n&&(mv.fromBufferAttribute(n,s),vv.fromBufferAttribute(n,o),gv.fromBufferAttribute(n,l),u.uv2=xn.getUV(ww,Rp,Np,Vp,mv,vv,gv,new Ce));let c={a:s,b:o,c:l,normal:new V,materialIndex:0};xn.getNormal(Rp,Np,Vp,c.normal),u.face=c}return u}var ko=class extends Mi{constructor(e=1,t=1,i=1,r=1,a=1,n=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:a,depthSegments:n};let s=this;r=Math.floor(r),a=Math.floor(a),n=Math.floor(n);let o=[],l=[],u=[],c=[],d=0,h=0;p("z","y","x",-1,-1,i,t,e,n,a,0),p("z","y","x",1,-1,i,t,-e,n,a,1),p("x","z","y",1,1,e,i,t,r,n,2),p("x","z","y",1,-1,e,i,-t,r,n,3),p("x","y","z",1,-1,e,t,i,r,a,4),p("x","y","z",-1,-1,e,t,-i,r,a,5),this.setIndex(o),this.setAttribute("position",new ri(l,3)),this.setAttribute("normal",new ri(u,3)),this.setAttribute("uv",new ri(c,2));function p(f,v,m,g,y,b,x,S,w,E,M){let P=b/w,A=x/E,k=b/2,I=x/2,O=S/2,D=w+1,F=E+1,U=0,z=0,B=new V;for(let W=0;W<F;W++){let R=W*A-I;for(let $=0;$<D;$++){let q=$*P-k;B[f]=q*g,B[v]=R*y,B[m]=O,l.push(B.x,B.y,B.z),B[f]=0,B[v]=0,B[m]=S>0?1:-1,u.push(B.x,B.y,B.z),c.push($/w),c.push(1-W/E),U+=1}}for(let W=0;W<E;W++)for(let R=0;R<w;R++){let $=d+R+D*W,q=d+R+D*(W+1),Z=d+(R+1)+D*(W+1),G=d+(R+1)+D*W;o.push($,q,G),o.push(q,Z,G),z+=6}s.addGroup(h,z,M),h+=z,d+=U}}static fromJSON(e){return new ko(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Gh(e){let t={};for(let i in e){t[i]={};for(let r in e[i]){let a=e[i][r];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?t[i][r]=a.clone():Array.isArray(a)?t[i][r]=a.slice():t[i][r]=a}}return t}function Kn(e){let t={};for(let i=0;i<e.length;i++){let r=Gh(e[i]);for(let a in r)t[a]=r[a]}return t}function WG(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}function fR(e){return e.getRenderTarget()===null&&e.outputEncoding===Ji?Ko:ly}var pp={clone:Gh,merge:Kn},HG=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GG=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,xr=class extends Dm{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HG,this.fragmentShader=GG,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gh(e.uniforms),this.uniformsGroups=WG(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;let i={};for(let r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},wd=class extends Tr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Bn=class extends wd{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Jf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(kf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Jf*2*Math.atan(Math.tan(kf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,a,n){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(kf*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,a=-.5*r,n=this.view;if(this.view!==null&&this.view.enabled){let o=n.fullWidth,l=n.fullHeight;a+=n.offsetX*r/o,t-=n.offsetY*i/l,r*=n.width/o,i*=n.height/l}let s=this.filmOffset;s!==0&&(a+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},Vd=-90,Fd=1,qG=class extends Tr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;let r=new Bn(Vd,Fd,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);let a=new Bn(Vd,Fd,e,t);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(-1,0,0),this.add(a);let n=new Bn(Vd,Fd,e,t);n.layers=this.layers,n.up.set(0,0,-1),n.lookAt(0,1,0),this.add(n);let s=new Bn(Vd,Fd,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let o=new Bn(Vd,Fd,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);let l=new Bn(Vd,Fd,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){this.parent===null&&this.updateMatrixWorld();let i=this.renderTarget,[r,a,n,s,o,l]=this.children,u=e.getRenderTarget(),c=e.toneMapping,d=e.xr.enabled;e.toneMapping=cl,e.xr.enabled=!1;let h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,a),e.setRenderTarget(i,2),e.render(t,n),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(u),e.toneMapping=c,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}},AE=class extends aa{constructor(e,t,i,r,a,n,s,o,l,u){e=e!==void 0?e:[],t=t!==void 0?t:cd,super(e,t,i,r,a,n,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},YG=class extends Mr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new AE(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ir}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ko(5,5,5),a=new xr({name:"CubemapFromEquirect",uniforms:Gh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:tn,blending:Oa});a.uniforms.tEquirect.value=t;let n=new ra(r,a),s=t.minFilter;return t.minFilter===Hh&&(t.minFilter=ir),new qG(1,10,this).update(e,n),t.minFilter=s,n.geometry.dispose(),n.material.dispose(),this}clear(e,t,i,r){let a=e.getRenderTarget();for(let n=0;n<6;n++)e.setRenderTarget(this,n),e.clear(t,i,r);e.setRenderTarget(a)}},xw=new V,XG=new V,KG=new Ta,hs=class{constructor(e=new V(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let r=xw.subVectors(i,t).cross(XG.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){let i=e.delta(xw),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let a=-(e.start.dot(this.normal)+this.constant)/r;return a<0||a>1?null:t.copy(i).multiplyScalar(a).add(e.start)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||KG.getNormalMatrix(e),r=this.coplanarPoint(xw).applyMatrix4(e),a=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},jd=new ws,wv=new V,PE=class{constructor(e=new hs,t=new hs,i=new hs,r=new hs,a=new hs,n=new hs){this.planes=[e,t,i,r,a,n]}set(e,t,i,r,a,n){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(r),s[4].copy(a),s[5].copy(n),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){let t=this.planes,i=e.elements,r=i[0],a=i[1],n=i[2],s=i[3],o=i[4],l=i[5],u=i[6],c=i[7],d=i[8],h=i[9],p=i[10],f=i[11],v=i[12],m=i[13],g=i[14],y=i[15];return t[0].setComponents(s-r,c-o,f-d,y-v).normalize(),t[1].setComponents(s+r,c+o,f+d,y+v).normalize(),t[2].setComponents(s+a,c+l,f+h,y+m).normalize(),t[3].setComponents(s-a,c-l,f-h,y-m).normalize(),t[4].setComponents(s-n,c-u,f-p,y-g).normalize(),t[5].setComponents(s+n,c+u,f+p,y+g).normalize(),this}intersectsObject(e){let t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),jd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(jd)}intersectsSprite(e){return jd.center.set(0,0,0),jd.radius=.7071067811865476,jd.applyMatrix4(e.matrixWorld),this.intersectsSphere(jd)}intersectsSphere(e){let t=this.planes,i=e.center,r=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let r=t[i];if(wv.x=r.normal.x>0?e.max.x:e.min.x,wv.y=r.normal.y>0?e.max.y:e.min.y,wv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(wv)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function mR(){let e=null,t=!1,i=null,r=null;function a(n,s){i(n,s),r=e.requestAnimationFrame(a)}return{start:function(){t!==!0&&i!==null&&(r=e.requestAnimationFrame(a),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(n){i=n},setContext:function(n){e=n}}}function ZG(e,t){let i=t.isWebGL2,r=new WeakMap;function a(u,c){let d=u.array,h=u.usage,p=e.createBuffer();e.bindBuffer(c,p),e.bufferData(c,d,h),u.onUploadCallback();let f;if(d instanceof Float32Array)f=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(i)f=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=5123;else if(d instanceof Int16Array)f=5122;else if(d instanceof Uint32Array)f=5125;else if(d instanceof Int32Array)f=5124;else if(d instanceof Int8Array)f=5120;else if(d instanceof Uint8Array)f=5121;else if(d instanceof Uint8ClampedArray)f=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:f,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function n(u,c,d){let h=c.array,p=c.updateRange;e.bindBuffer(d,u),p.count===-1?e.bufferSubData(d,0,h):(i?e.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):e.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1),c.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);let c=r.get(u);c&&(e.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){let h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let d=r.get(u);d===void 0?r.set(u,a(u,c)):d.version<u.version&&(n(d.buffer,u,c),d.version=u.version)}return{get:s,remove:o,update:l}}var su=class extends Mi{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};let a=e/2,n=t/2,s=Math.floor(i),o=Math.floor(r),l=s+1,u=o+1,c=e/s,d=t/o,h=[],p=[],f=[],v=[];for(let m=0;m<u;m++){let g=m*d-n;for(let y=0;y<l;y++){let b=y*c-a;p.push(b,-g,0),f.push(0,0,1),v.push(y/s),v.push(1-m/o)}}for(let m=0;m<o;m++)for(let g=0;g<s;g++){let y=g+l*m,b=g+l*(m+1),x=g+1+l*(m+1),S=g+1+l*m;h.push(y,b,S),h.push(b,x,S)}this.setIndex(h),this.setAttribute("position",new ri(p,3)),this.setAttribute("normal",new ri(f,3)),this.setAttribute("uv",new ri(v,2))}static fromJSON(e){return new su(e.width,e.height,e.widthSegments,e.heightSegments)}},QG=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,JG=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,eq=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,tq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,aq="vec3 transformed = vec3( position );",nq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sq=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,oq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,lq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,uq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,cq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,dq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,pq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,fq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,mq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,vq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,gq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,yq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bq=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,wq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,xq=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Sq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Cq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,_q="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mq=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Eq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Aq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Pq=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Tq=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,kq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Oq=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Dq=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Iq=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Lq=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Bq=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,zq=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Rq=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Nq=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Vq=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Fq=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jq=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,$q=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Uq=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Wq=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Hq=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Gq=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,qq=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yq=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Xq=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Kq=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Zq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Qq=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Jq=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,eY=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,tY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,iY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,rY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,aY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,sY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,oY=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,lY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,uY=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,cY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,dY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,hY=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,pY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,fY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,mY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,gY=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,yY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,bY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,wY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,xY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,SY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,CY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_Y=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,EY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,AY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,PY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,TY=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,kY=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,OY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,DY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,IY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,LY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,BY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,RY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,NY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,VY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,FY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,$Y=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,UY=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,WY=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,HY=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,GY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,qY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,YY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,XY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,KY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ZY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,QY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,eX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,iX=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,rX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,aX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,nX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,sX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,oX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,lX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cX=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_X=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,MX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EX=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,PX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tr={alphamap_fragment:QG,alphamap_pars_fragment:JG,alphatest_fragment:eq,alphatest_pars_fragment:tq,aomap_fragment:iq,aomap_pars_fragment:rq,begin_vertex:aq,beginnormal_vertex:nq,bsdfs:sq,iridescence_fragment:oq,bumpmap_pars_fragment:lq,clipping_planes_fragment:uq,clipping_planes_pars_fragment:cq,clipping_planes_pars_vertex:dq,clipping_planes_vertex:hq,color_fragment:pq,color_pars_fragment:fq,color_pars_vertex:mq,color_vertex:vq,common:gq,cube_uv_reflection_fragment:yq,defaultnormal_vertex:bq,displacementmap_pars_vertex:wq,displacementmap_vertex:xq,emissivemap_fragment:Sq,emissivemap_pars_fragment:Cq,encodings_fragment:_q,encodings_pars_fragment:Mq,envmap_fragment:Eq,envmap_common_pars_fragment:Aq,envmap_pars_fragment:Pq,envmap_pars_vertex:Tq,envmap_physical_pars_fragment:jq,envmap_vertex:kq,fog_vertex:Oq,fog_pars_vertex:Dq,fog_fragment:Iq,fog_pars_fragment:Lq,gradientmap_pars_fragment:Bq,lightmap_fragment:zq,lightmap_pars_fragment:Rq,lights_lambert_fragment:Nq,lights_lambert_pars_fragment:Vq,lights_pars_begin:Fq,lights_toon_fragment:$q,lights_toon_pars_fragment:Uq,lights_phong_fragment:Wq,lights_phong_pars_fragment:Hq,lights_physical_fragment:Gq,lights_physical_pars_fragment:qq,lights_fragment_begin:Yq,lights_fragment_maps:Xq,lights_fragment_end:Kq,logdepthbuf_fragment:Zq,logdepthbuf_pars_fragment:Qq,logdepthbuf_pars_vertex:Jq,logdepthbuf_vertex:eY,map_fragment:tY,map_pars_fragment:iY,map_particle_fragment:rY,map_particle_pars_fragment:aY,metalnessmap_fragment:nY,metalnessmap_pars_fragment:sY,morphcolor_vertex:oY,morphnormal_vertex:lY,morphtarget_pars_vertex:uY,morphtarget_vertex:cY,normal_fragment_begin:dY,normal_fragment_maps:hY,normal_pars_fragment:pY,normal_pars_vertex:fY,normal_vertex:mY,normalmap_pars_fragment:vY,clearcoat_normal_fragment_begin:gY,clearcoat_normal_fragment_maps:yY,clearcoat_pars_fragment:bY,iridescence_pars_fragment:wY,output_fragment:xY,packing:SY,premultiplied_alpha_fragment:CY,project_vertex:_Y,dithering_fragment:MY,dithering_pars_fragment:EY,roughnessmap_fragment:AY,roughnessmap_pars_fragment:PY,shadowmap_pars_fragment:TY,shadowmap_pars_vertex:kY,shadowmap_vertex:OY,shadowmask_pars_fragment:DY,skinbase_vertex:IY,skinning_pars_vertex:LY,skinning_vertex:BY,skinnormal_vertex:zY,specularmap_fragment:RY,specularmap_pars_fragment:NY,tonemapping_fragment:VY,tonemapping_pars_fragment:FY,transmission_fragment:jY,transmission_pars_fragment:$Y,uv_pars_fragment:UY,uv_pars_vertex:WY,uv_vertex:HY,uv2_pars_fragment:GY,uv2_pars_vertex:qY,uv2_vertex:YY,worldpos_vertex:XY,background_vert:KY,background_frag:ZY,backgroundCube_vert:QY,backgroundCube_frag:JY,cube_vert:eX,cube_frag:tX,depth_vert:iX,depth_frag:rX,distanceRGBA_vert:aX,distanceRGBA_frag:nX,equirect_vert:sX,equirect_frag:oX,linedashed_vert:lX,linedashed_frag:uX,meshbasic_vert:cX,meshbasic_frag:dX,meshlambert_vert:hX,meshlambert_frag:pX,meshmatcap_vert:fX,meshmatcap_frag:mX,meshnormal_vert:vX,meshnormal_frag:gX,meshphong_vert:yX,meshphong_frag:bX,meshphysical_vert:wX,meshphysical_frag:xX,meshtoon_vert:SX,meshtoon_frag:CX,points_vert:_X,points_frag:MX,shadow_vert:EX,shadow_frag:AX,sprite_vert:PX,sprite_frag:TX},Kt={common:{diffuse:{value:new Bi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ta},uv2Transform:{value:new Ta},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ta}},sprite:{diffuse:{value:new Bi(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ta}}},Qo={basic:{uniforms:Kn([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.fog]),vertexShader:tr.meshbasic_vert,fragmentShader:tr.meshbasic_frag},lambert:{uniforms:Kn([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Bi(0)}}]),vertexShader:tr.meshlambert_vert,fragmentShader:tr.meshlambert_frag},phong:{uniforms:Kn([Kt.common,Kt.specularmap,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,Kt.lights,{emissive:{value:new Bi(0)},specular:{value:new Bi(1118481)},shininess:{value:30}}]),vertexShader:tr.meshphong_vert,fragmentShader:tr.meshphong_frag},standard:{uniforms:Kn([Kt.common,Kt.envmap,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.roughnessmap,Kt.metalnessmap,Kt.fog,Kt.lights,{emissive:{value:new Bi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag},toon:{uniforms:Kn([Kt.common,Kt.aomap,Kt.lightmap,Kt.emissivemap,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.gradientmap,Kt.fog,Kt.lights,{emissive:{value:new Bi(0)}}]),vertexShader:tr.meshtoon_vert,fragmentShader:tr.meshtoon_frag},matcap:{uniforms:Kn([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,Kt.fog,{matcap:{value:null}}]),vertexShader:tr.meshmatcap_vert,fragmentShader:tr.meshmatcap_frag},points:{uniforms:Kn([Kt.points,Kt.fog]),vertexShader:tr.points_vert,fragmentShader:tr.points_frag},dashed:{uniforms:Kn([Kt.common,Kt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:tr.linedashed_vert,fragmentShader:tr.linedashed_frag},depth:{uniforms:Kn([Kt.common,Kt.displacementmap]),vertexShader:tr.depth_vert,fragmentShader:tr.depth_frag},normal:{uniforms:Kn([Kt.common,Kt.bumpmap,Kt.normalmap,Kt.displacementmap,{opacity:{value:1}}]),vertexShader:tr.meshnormal_vert,fragmentShader:tr.meshnormal_frag},sprite:{uniforms:Kn([Kt.sprite,Kt.fog]),vertexShader:tr.sprite_vert,fragmentShader:tr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ta},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:tr.background_vert,fragmentShader:tr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:tr.backgroundCube_vert,fragmentShader:tr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:tr.cube_vert,fragmentShader:tr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:tr.equirect_vert,fragmentShader:tr.equirect_frag},distanceRGBA:{uniforms:Kn([Kt.common,Kt.displacementmap,{referencePosition:{value:new V},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:tr.distanceRGBA_vert,fragmentShader:tr.distanceRGBA_frag},shadow:{uniforms:Kn([Kt.lights,Kt.fog,{color:{value:new Bi(0)},opacity:{value:1}}]),vertexShader:tr.shadow_vert,fragmentShader:tr.shadow_frag}};Qo.physical={uniforms:Kn([Qo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Bi(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Bi(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Bi(1,1,1)},specularColorMap:{value:null}}]),vertexShader:tr.meshphysical_vert,fragmentShader:tr.meshphysical_frag};var xv={r:0,b:0,g:0};function kX(e,t,i,r,a,n,s){let o=new Bi(0),l=n===!0?0:1,u,c,d=null,h=0,p=null;function f(m,g){let y=!1,b=g.isScene===!0?g.background:null;b&&b.isTexture&&(b=(g.backgroundBlurriness>0?i:t).get(b));let x=e.xr,S=x.getSession&&x.getSession();S&&S.environmentBlendMode==="additive"&&(b=null),b===null?v(o,l):b&&b.isColor&&(v(b,1),y=!0),(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Om)?(c===void 0&&(c=new ra(new ko(1,1,1),new xr({name:"BackgroundCubeMaterial",uniforms:Gh(Qo.backgroundCube.uniforms),vertexShader:Qo.backgroundCube.vertexShader,fragmentShader:Qo.backgroundCube.fragmentShader,side:tn,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,E,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(c)),c.material.uniforms.envMap.value=b,c.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=b.encoding!==Ji,(d!==b||h!==b.version||p!==e.toneMapping)&&(c.material.needsUpdate=!0,d=b,h=b.version,p=e.toneMapping),c.layers.enableAll(),m.unshift(c,c.geometry,c.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new ra(new su(2,2),new xr({name:"BackgroundMaterial",uniforms:Gh(Qo.background.uniforms),vertexShader:Qo.background.vertexShader,fragmentShader:Qo.background.fragmentShader,side:Po,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=b.encoding!==Ji,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||h!==b.version||p!==e.toneMapping)&&(u.material.needsUpdate=!0,d=b,h=b.version,p=e.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null))}function v(m,g){m.getRGB(xv,fR(e)),r.buffers.color.setClear(xv.r,xv.g,xv.b,g,s)}return{getClearColor:function(){return o},setClearColor:function(m,g=1){o.set(m),l=g,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(m){l=m,v(o,l)},render:f}}function OX(e,t,i,r){let a=e.getParameter(34921),n=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||n!==null,o={},l=m(null),u=l,c=!1;function d(D,F,U,z,B){let W=!1;if(s){let R=v(z,U,F);u!==R&&(u=R,p(u.object)),W=g(D,z,U,B),W&&y(D,z,U,B)}else{let R=F.wireframe===!0;(u.geometry!==z.id||u.program!==U.id||u.wireframe!==R)&&(u.geometry=z.id,u.program=U.id,u.wireframe=R,W=!0)}B!==null&&i.update(B,34963),(W||c)&&(c=!1,M(D,F,U,z),B!==null&&e.bindBuffer(34963,i.get(B).buffer))}function h(){return r.isWebGL2?e.createVertexArray():n.createVertexArrayOES()}function p(D){return r.isWebGL2?e.bindVertexArray(D):n.bindVertexArrayOES(D)}function f(D){return r.isWebGL2?e.deleteVertexArray(D):n.deleteVertexArrayOES(D)}function v(D,F,U){let z=U.wireframe===!0,B=o[D.id];B===void 0&&(B={},o[D.id]=B);let W=B[F.id];W===void 0&&(W={},B[F.id]=W);let R=W[z];return R===void 0&&(R=m(h()),W[z]=R),R}function m(D){let F=[],U=[],z=[];for(let B=0;B<a;B++)F[B]=0,U[B]=0,z[B]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:U,attributeDivisors:z,object:D,attributes:{},index:null}}function g(D,F,U,z){let B=u.attributes,W=F.attributes,R=0,$=U.getAttributes();for(let q in $)if($[q].location>=0){let Z=B[q],G=W[q];if(G===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(G=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(G=D.instanceColor)),Z===void 0||Z.attribute!==G||G&&Z.data!==G.data)return!0;R++}return u.attributesNum!==R||u.index!==z}function y(D,F,U,z){let B={},W=F.attributes,R=0,$=U.getAttributes();for(let q in $)if($[q].location>=0){let Z=W[q];Z===void 0&&(q==="instanceMatrix"&&D.instanceMatrix&&(Z=D.instanceMatrix),q==="instanceColor"&&D.instanceColor&&(Z=D.instanceColor));let G={};G.attribute=Z,Z&&Z.data&&(G.data=Z.data),B[q]=G,R++}u.attributes=B,u.attributesNum=R,u.index=z}function b(){let D=u.newAttributes;for(let F=0,U=D.length;F<U;F++)D[F]=0}function x(D){S(D,0)}function S(D,F){let U=u.newAttributes,z=u.enabledAttributes,B=u.attributeDivisors;U[D]=1,z[D]===0&&(e.enableVertexAttribArray(D),z[D]=1),B[D]!==F&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,F),B[D]=F)}function w(){let D=u.newAttributes,F=u.enabledAttributes;for(let U=0,z=F.length;U<z;U++)F[U]!==D[U]&&(e.disableVertexAttribArray(U),F[U]=0)}function E(D,F,U,z,B,W){r.isWebGL2===!0&&(U===5124||U===5125)?e.vertexAttribIPointer(D,F,U,B,W):e.vertexAttribPointer(D,F,U,z,B,W)}function M(D,F,U,z){if(r.isWebGL2===!1&&(D.isInstancedMesh||z.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;b();let B=z.attributes,W=U.getAttributes(),R=F.defaultAttributeValues;for(let $ in W){let q=W[$];if(q.location>=0){let Z=B[$];if(Z===void 0&&($==="instanceMatrix"&&D.instanceMatrix&&(Z=D.instanceMatrix),$==="instanceColor"&&D.instanceColor&&(Z=D.instanceColor)),Z!==void 0){let G=Z.normalized,X=Z.itemSize,J=i.get(Z);if(J===void 0)continue;let pe=J.buffer,fe=J.type,de=J.bytesPerElement;if(Z.isInterleavedBufferAttribute){let ge=Z.data,me=ge.stride,ke=Z.offset;if(ge.isInstancedInterleavedBuffer){for(let ce=0;ce<q.locationSize;ce++)S(q.location+ce,ge.meshPerAttribute);D.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=ge.meshPerAttribute*ge.count)}else for(let ce=0;ce<q.locationSize;ce++)x(q.location+ce);e.bindBuffer(34962,pe);for(let ce=0;ce<q.locationSize;ce++)E(q.location+ce,X/q.locationSize,fe,G,me*de,(ke+X/q.locationSize*ce)*de)}else{if(Z.isInstancedBufferAttribute){for(let ge=0;ge<q.locationSize;ge++)S(q.location+ge,Z.meshPerAttribute);D.isInstancedMesh!==!0&&z._maxInstanceCount===void 0&&(z._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let ge=0;ge<q.locationSize;ge++)x(q.location+ge);e.bindBuffer(34962,pe);for(let ge=0;ge<q.locationSize;ge++)E(q.location+ge,X/q.locationSize,fe,G,X*de,X/q.locationSize*ge*de)}}else if(R!==void 0){let G=R[$];if(G!==void 0)switch(G.length){case 2:e.vertexAttrib2fv(q.location,G);break;case 3:e.vertexAttrib3fv(q.location,G);break;case 4:e.vertexAttrib4fv(q.location,G);break;default:e.vertexAttrib1fv(q.location,G)}}}}w()}function P(){I();for(let D in o){let F=o[D];for(let U in F){let z=F[U];for(let B in z)f(z[B].object),delete z[B];delete F[U]}delete o[D]}}function A(D){if(o[D.id]===void 0)return;let F=o[D.id];for(let U in F){let z=F[U];for(let B in z)f(z[B].object),delete z[B];delete F[U]}delete o[D.id]}function k(D){for(let F in o){let U=o[F];if(U[D.id]===void 0)continue;let z=U[D.id];for(let B in z)f(z[B].object),delete z[B];delete U[D.id]}}function I(){O(),c=!0,u!==l&&(u=l,p(u.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:I,resetDefaultState:O,dispose:P,releaseStatesOfGeometry:A,releaseStatesOfProgram:k,initAttributes:b,enableAttribute:x,disableUnusedAttributes:w}}function DX(e,t,i,r){let a=r.isWebGL2,n;function s(u){n=u}function o(u,c){e.drawArrays(n,u,c),i.update(c,n,1)}function l(u,c,d){if(d===0)return;let h,p;if(a)h=e,p="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](n,u,c,d),i.update(c,n,d)}this.setMode=s,this.render=o,this.renderInstances=l}function IX(e,t,i){let r;function a(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let E=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function n(E){if(E==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext,o=i.precision!==void 0?i.precision:"highp",l=n(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);let u=s||t.has("WEBGL_draw_buffers"),c=i.logarithmicDepthBuffer===!0,d=e.getParameter(34930),h=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),v=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),y=e.getParameter(36349),b=h>0,x=s||t.has("OES_texture_float"),S=b&&x,w=s?e.getParameter(36183):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:a,getMaxPrecision:n,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:v,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:x,floatVertexTextures:S,maxSamples:w}}function LX(e){let t=this,i=null,r=0,a=!1,n=!1,s=new hs,o=new Ta,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){let p=d.length!==0||h||r!==0||a;return a=h,r=d.length,p},this.beginShadows=function(){n=!0,c(null)},this.endShadows=function(){n=!1},this.setGlobalState=function(d,h){i=c(d,h,0)},this.setState=function(d,h,p){let f=d.clippingPlanes,v=d.clipIntersection,m=d.clipShadows,g=e.get(d);if(!a||f===null||f.length===0||n&&!m)n?c(null):u();else{let y=n?0:r,b=y*4,x=g.clippingState||null;l.value=x,x=c(f,h,b,p);for(let S=0;S!==b;++S)x[S]=i[S];g.clippingState=x,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=y}};function u(){l.value!==i&&(l.value=i,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(d,h,p,f){let v=d!==null?d.length:0,m=null;if(v!==0){if(m=l.value,f!==!0||m===null){let g=p+v*4,y=h.matrixWorldInverse;o.getNormalMatrix(y),(m===null||m.length<g)&&(m=new Float32Array(g));for(let b=0,x=p;b!==v;++b,x+=4)s.copy(d[b]).applyMatrix4(y,o),s.normal.toArray(m,x),m[x+3]=s.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,m}}function BX(e){let t=new WeakMap;function i(s,o){return o===D_?s.mapping=cd:o===I_&&(s.mapping=dd),s}function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){let o=s.mapping;if(o===D_||o===I_)if(t.has(s)){let l=t.get(s).texture;return i(l,s.mapping)}else{let l=s.image;if(l&&l.height>0){let u=new YG(l.height/2);return u.fromEquirectangularTexture(e,s),t.set(s,u),s.addEventListener("dispose",a),i(u.texture,s.mapping)}else return null}}return s}function a(s){let o=s.target;o.removeEventListener("dispose",a);let l=t.get(o);l!==void 0&&(t.delete(o),l.dispose())}function n(){t=new WeakMap}return{get:r,dispose:n}}var zb=class extends wd{constructor(e=-1,t=1,i=1,r=-1,a=.1,n=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=a,this.far=n,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,a,n){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=a,this.view.height=n,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=i-e,n=i+e,s=r+t,o=r-t;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=l*this.view.offsetX,n=a+l*this.view.width,s-=u*this.view.offsetY,o=s-u*this.view.height}this.projectionMatrix.makeOrthographic(a,n,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},gh=4,dT=[.125,.215,.35,.446,.526,.582],Ic=20,Sw=new zb,hT=new Bi,Cw=null,Pc=(1+Math.sqrt(5))/2,$d=1/Pc,pT=[new V(1,1,1),new V(-1,1,1),new V(1,1,-1),new V(-1,1,-1),new V(0,Pc,$d),new V(0,Pc,-$d),new V($d,0,Pc),new V(-$d,0,Pc),new V(Pc,$d,0),new V(-Pc,$d,0)],fT=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Cw=this._renderer.getRenderTarget(),this._setSize(256);let a=this._allocateTargets();return a.depthBuffer=!0,this._sceneToCubeUV(e,i,r,a),t>0&&this._blur(a,0,0,t),this._applyPMREM(a),this._cleanup(a),a}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=gT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=vT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Cw),e.scissorTest=!1,Sv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===cd||e.mapping===dd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Cw=this._renderer.getRenderTarget();let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ir,minFilter:ir,generateMipmaps:!1,type:au,format:Ja,encoding:To,depthBuffer:!1},r=mT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=mT(e,t,i);let{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zX(a)),this._blurMaterial=RX(a,e,t)}return r}_compileMaterial(e){let t=new ra(this._lodPlanes[0],e);this._renderer.compile(t,Sw)}_sceneToCubeUV(e,t,i,r){let a=new Bn(90,1,t,i),n=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.toneMapping;o.getClearColor(hT),o.toneMapping=cl,o.autoClear=!1;let c=new nu({name:"PMREM.Background",side:tn,depthWrite:!1,depthTest:!1}),d=new ra(new ko,c),h=!1,p=e.background;p?p.isColor&&(c.color.copy(p),e.background=null,h=!0):(c.color.copy(hT),h=!0);for(let f=0;f<6;f++){let v=f%3;v===0?(a.up.set(0,n[f],0),a.lookAt(s[f],0,0)):v===1?(a.up.set(0,0,n[f]),a.lookAt(0,s[f],0)):(a.up.set(0,n[f],0),a.lookAt(0,0,s[f]));let m=this._cubeSize;Sv(r,v*m,f>2?m:0,m,m),o.setRenderTarget(r),h&&o.render(d,a),o.render(e,a)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=u,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let i=this._renderer,r=e.mapping===cd||e.mapping===dd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=gT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=vT());let a=r?this._cubemapMaterial:this._equirectMaterial,n=new ra(this._lodPlanes[0],a),s=a.uniforms;s.envMap.value=e;let o=this._cubeSize;Sv(t,0,0,3*o,2*o),i.setRenderTarget(t),i.render(n,Sw)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let a=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=pT[(r-1)%pT.length];this._blur(e,r-1,r,a,n)}t.autoClear=i}_blur(e,t,i,r,a){let n=this._pingPongRenderTarget;this._halfBlur(e,n,t,i,r,"latitudinal",a),this._halfBlur(n,e,i,i,r,"longitudinal",a)}_halfBlur(e,t,i,r,a,n,s){let o=this._renderer,l=this._blurMaterial;n!=="latitudinal"&&n!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let u=3,c=new ra(this._lodPlanes[r],l),d=l.uniforms,h=this._sizeLods[i]-1,p=isFinite(a)?Math.PI/(2*h):2*Math.PI/(2*Ic-1),f=a/p,v=isFinite(a)?1+Math.floor(u*f):Ic;v>Ic&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${Ic}`);let m=[],g=0;for(let w=0;w<Ic;++w){let E=w/f,M=Math.exp(-E*E/2);m.push(M),w===0?g+=M:w<v&&(g+=2*M)}for(let w=0;w<m.length;w++)m[w]=m[w]/g;d.envMap.value=e.texture,d.samples.value=v,d.weights.value=m,d.latitudinal.value=n==="latitudinal",s&&(d.poleAxis.value=s);let{_lodMax:y}=this;d.dTheta.value=p,d.mipInt.value=y-i;let b=this._sizeLods[r],x=3*b*(r>y-gh?r-y+gh:0),S=4*(this._cubeSize-b);Sv(t,x,S,3*b,2*b),o.setRenderTarget(t),o.render(c,Sw)}};function zX(e){let t=[],i=[],r=[],a=e,n=e-gh+1+dT.length;for(let s=0;s<n;s++){let o=Math.pow(2,a);i.push(o);let l=1/o;s>e-gh?l=dT[s-e+gh-1]:s===0&&(l=0),r.push(l);let u=1/(o-2),c=-u,d=1+u,h=[c,c,d,c,d,d,c,c,d,d,c,d],p=6,f=6,v=3,m=2,g=1,y=new Float32Array(v*f*p),b=new Float32Array(m*f*p),x=new Float32Array(g*f*p);for(let w=0;w<p;w++){let E=w%3*2/3-1,M=w>2?0:-1,P=[E,M,0,E+2/3,M,0,E+2/3,M+1,0,E,M,0,E+2/3,M+1,0,E,M+1,0];y.set(P,v*f*w),b.set(h,m*f*w);let A=[w,w,w,w,w,w];x.set(A,g*f*w)}let S=new Mi;S.setAttribute("position",new ji(y,v)),S.setAttribute("uv",new ji(b,m)),S.setAttribute("faceIndex",new ji(x,g)),t.push(S),a>gh&&a--}return{lodPlanes:t,sizeLods:i,sigmas:r}}function mT(e,t,i){let r=new Mr(e,t,i);return r.texture.mapping=Om,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Sv(e,t,i,r,a){e.viewport.set(t,i,r,a),e.scissor.set(t,i,r,a)}function RX(e,t,i){let r=new Float32Array(Ic),a=new V(0,1,0);return new xr({name:"SphericalGaussianBlur",defines:{n:Ic,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function vT(){return new xr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function gT(){return new xr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TE(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function TE(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function NX(e){let t=new WeakMap,i=null;function r(o){if(o&&o.isTexture){let l=o.mapping,u=l===D_||l===I_,c=l===cd||l===dd;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=t.get(o);return i===null&&(i=new fT(e)),d=u?i.fromEquirectangular(o,d):i.fromCubemap(o,d),t.set(o,d),d.texture}else{if(t.has(o))return t.get(o).texture;{let d=o.image;if(u&&d&&d.height>0||c&&d&&a(d)){i===null&&(i=new fT(e));let h=u?i.fromEquirectangular(o):i.fromCubemap(o);return t.set(o,h),o.addEventListener("dispose",n),h.texture}else return null}}}return o}function a(o){let l=0,u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function n(o){let l=o.target;l.removeEventListener("dispose",n);let u=t.get(l);u!==void 0&&(t.delete(l),u.dispose())}function s(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:r,dispose:s}}function VX(e){let t={};function i(r){if(t[r]!==void 0)return t[r];let a;switch(r){case"WEBGL_depth_texture":a=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=e.getExtension(r)}return t[r]=a,a}return{has:function(r){return i(r)!==null},init:function(r){r.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(r){let a=i(r);return a===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),a}}}function FX(e,t,i,r){let a={},n=new WeakMap;function s(d){let h=d.target;h.index!==null&&t.remove(h.index);for(let f in h.attributes)t.remove(h.attributes[f]);h.removeEventListener("dispose",s),delete a[h.id];let p=n.get(h);p&&(t.remove(p),n.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,i.memory.geometries--}function o(d,h){return a[h.id]===!0||(h.addEventListener("dispose",s),a[h.id]=!0,i.memory.geometries++),h}function l(d){let h=d.attributes;for(let f in h)t.update(h[f],34962);let p=d.morphAttributes;for(let f in p){let v=p[f];for(let m=0,g=v.length;m<g;m++)t.update(v[m],34962)}}function u(d){let h=[],p=d.index,f=d.attributes.position,v=0;if(p!==null){let y=p.array;v=p.version;for(let b=0,x=y.length;b<x;b+=3){let S=y[b+0],w=y[b+1],E=y[b+2];h.push(S,w,w,E,E,S)}}else{let y=f.array;v=f.version;for(let b=0,x=y.length/3-1;b<x;b+=3){let S=b+0,w=b+1,E=b+2;h.push(S,w,w,E,E,S)}}let m=new(lR(h)?Eh:pR)(h,1);m.version=v;let g=n.get(d);g&&t.remove(g),n.set(d,m)}function c(d){let h=n.get(d);if(h){let p=d.index;p!==null&&h.version<p.version&&u(d)}else u(d);return n.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function jX(e,t,i,r){let a=r.isWebGL2,n;function s(h){n=h}let o,l;function u(h){o=h.type,l=h.bytesPerElement}function c(h,p){e.drawElements(n,p,o,h*l),i.update(p,n,1)}function d(h,p,f){if(f===0)return;let v,m;if(a)v=e,m="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),m="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[m](n,p,o,h*l,f),i.update(p,n,f)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=d}function $X(e){let t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function r(n,s,o){switch(i.calls++,s){case 4:i.triangles+=o*(n/3);break;case 1:i.lines+=o*(n/2);break;case 3:i.lines+=o*(n-1);break;case 2:i.lines+=o*n;break;case 0:i.points+=o*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function a(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:a,update:r}}function UX(e,t){return e[0]-t[0]}function WX(e,t){return Math.abs(t[1])-Math.abs(e[1])}function HX(e,t,i){let r={},a=new Float32Array(8),n=new WeakMap,s=new Wi,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,d,h){let p=u.morphTargetInfluences;if(t.isWebGL2===!0){let f=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=f!==void 0?f.length:0,m=n.get(c);if(m===void 0||m.count!==v){let b=function(){D.dispose(),n.delete(c),c.removeEventListener("dispose",b)};m!==void 0&&m.texture.dispose();let x=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,E=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],P=c.morphAttributes.color||[],A=0;x===!0&&(A=1),S===!0&&(A=2),w===!0&&(A=3);let k=c.attributes.position.count*A,I=1;k>t.maxTextureSize&&(I=Math.ceil(k/t.maxTextureSize),k=t.maxTextureSize);let O=new Float32Array(k*I*4*v),D=new hR(O,k,I,v);D.type=Pa,D.needsUpdate=!0;let F=A*4;for(let U=0;U<v;U++){let z=E[U],B=M[U],W=P[U],R=k*I*4*U;for(let $=0;$<z.count;$++){let q=$*F;x===!0&&(s.fromBufferAttribute(z,$),O[R+q+0]=s.x,O[R+q+1]=s.y,O[R+q+2]=s.z,O[R+q+3]=0),S===!0&&(s.fromBufferAttribute(B,$),O[R+q+4]=s.x,O[R+q+5]=s.y,O[R+q+6]=s.z,O[R+q+7]=0),w===!0&&(s.fromBufferAttribute(W,$),O[R+q+8]=s.x,O[R+q+9]=s.y,O[R+q+10]=s.z,O[R+q+11]=W.itemSize===4?s.w:1)}}m={count:v,texture:D,size:new Ce(k,I)},n.set(c,m),c.addEventListener("dispose",b)}let g=0;for(let b=0;b<p.length;b++)g+=p[b];let y=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(e,"morphTargetBaseInfluence",y),h.getUniforms().setValue(e,"morphTargetInfluences",p),h.getUniforms().setValue(e,"morphTargetsTexture",m.texture,i),h.getUniforms().setValue(e,"morphTargetsTextureSize",m.size)}else{let f=p===void 0?0:p.length,v=r[c.id];if(v===void 0||v.length!==f){v=[];for(let x=0;x<f;x++)v[x]=[x,0];r[c.id]=v}for(let x=0;x<f;x++){let S=v[x];S[0]=x,S[1]=p[x]}v.sort(WX);for(let x=0;x<8;x++)x<f&&v[x][1]?(o[x][0]=v[x][0],o[x][1]=v[x][1]):(o[x][0]=Number.MAX_SAFE_INTEGER,o[x][1]=0);o.sort(UX);let m=c.morphAttributes.position,g=c.morphAttributes.normal,y=0;for(let x=0;x<8;x++){let S=o[x],w=S[0],E=S[1];w!==Number.MAX_SAFE_INTEGER&&E?(m&&c.getAttribute("morphTarget"+x)!==m[w]&&c.setAttribute("morphTarget"+x,m[w]),g&&c.getAttribute("morphNormal"+x)!==g[w]&&c.setAttribute("morphNormal"+x,g[w]),a[x]=E,y+=E):(m&&c.hasAttribute("morphTarget"+x)===!0&&c.deleteAttribute("morphTarget"+x),g&&c.hasAttribute("morphNormal"+x)===!0&&c.deleteAttribute("morphNormal"+x),a[x]=0)}let b=c.morphTargetsRelative?1:1-y;h.getUniforms().setValue(e,"morphTargetBaseInfluence",b),h.getUniforms().setValue(e,"morphTargetInfluences",a)}}return{update:l}}function GX(e,t,i,r){let a=new WeakMap;function n(l){let u=r.render.frame,c=l.geometry,d=t.get(l,c);return a.get(d)!==u&&(t.update(d),a.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),i.update(l.instanceMatrix,34962),l.instanceColor!==null&&i.update(l.instanceColor,34962)),d}function s(){a=new WeakMap}function o(l){let u=l.target;u.removeEventListener("dispose",o),i.remove(u.instanceMatrix),u.instanceColor!==null&&i.remove(u.instanceColor)}return{update:n,dispose:s}}var vR=new aa,gR=new hR,yR=new DG,bR=new AE,yT=[],bT=[],wT=new Float32Array(16),xT=new Float32Array(9),ST=new Float32Array(4);function fp(e,t,i){let r=e[0];if(r<=0||r>0)return e;let a=t*i,n=yT[a];if(n===void 0&&(n=new Float32Array(a),yT[a]=n),t!==0){r.toArray(n,0);for(let s=1,o=0;s!==t;++s)o+=i,e[s].toArray(n,o)}return n}function Ua(e,t){if(e.length!==t.length)return!1;for(let i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function Wa(e,t){for(let i=0,r=t.length;i<r;i++)e[i]=t[i]}function Rb(e,t){let i=bT[t];i===void 0&&(i=new Int32Array(t),bT[t]=i);for(let r=0;r!==t;++r)i[r]=e.allocateTextureUnit();return i}function qX(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function YX(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ua(i,t))return;e.uniform2fv(this.addr,t),Wa(i,t)}}function XX(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Ua(i,t))return;e.uniform3fv(this.addr,t),Wa(i,t)}}function KX(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ua(i,t))return;e.uniform4fv(this.addr,t),Wa(i,t)}}function ZX(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Ua(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Wa(i,t)}else{if(Ua(i,r))return;ST.set(r),e.uniformMatrix2fv(this.addr,!1,ST),Wa(i,r)}}function QX(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Ua(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Wa(i,t)}else{if(Ua(i,r))return;xT.set(r),e.uniformMatrix3fv(this.addr,!1,xT),Wa(i,r)}}function JX(e,t){let i=this.cache,r=t.elements;if(r===void 0){if(Ua(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Wa(i,t)}else{if(Ua(i,r))return;wT.set(r),e.uniformMatrix4fv(this.addr,!1,wT),Wa(i,r)}}function eK(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function tK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ua(i,t))return;e.uniform2iv(this.addr,t),Wa(i,t)}}function iK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Ua(i,t))return;e.uniform3iv(this.addr,t),Wa(i,t)}}function rK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ua(i,t))return;e.uniform4iv(this.addr,t),Wa(i,t)}}function aK(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function nK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ua(i,t))return;e.uniform2uiv(this.addr,t),Wa(i,t)}}function sK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Ua(i,t))return;e.uniform3uiv(this.addr,t),Wa(i,t)}}function oK(e,t){let i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ua(i,t))return;e.uniform4uiv(this.addr,t),Wa(i,t)}}function lK(e,t,i){let r=this.cache,a=i.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),i.setTexture2D(t||vR,a)}function uK(e,t,i){let r=this.cache,a=i.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),i.setTexture3D(t||yR,a)}function cK(e,t,i){let r=this.cache,a=i.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),i.setTextureCube(t||bR,a)}function dK(e,t,i){let r=this.cache,a=i.allocateTextureUnit();r[0]!==a&&(e.uniform1i(this.addr,a),r[0]=a),i.setTexture2DArray(t||gR,a)}function hK(e){switch(e){case 5126:return qX;case 35664:return YX;case 35665:return XX;case 35666:return KX;case 35674:return ZX;case 35675:return QX;case 35676:return JX;case 5124:case 35670:return eK;case 35667:case 35671:return tK;case 35668:case 35672:return iK;case 35669:case 35673:return rK;case 5125:return aK;case 36294:return nK;case 36295:return sK;case 36296:return oK;case 35678:case 36198:case 36298:case 36306:case 35682:return lK;case 35679:case 36299:case 36307:return uK;case 35680:case 36300:case 36308:case 36293:return cK;case 36289:case 36303:case 36311:case 36292:return dK}}function pK(e,t){e.uniform1fv(this.addr,t)}function fK(e,t){let i=fp(t,this.size,2);e.uniform2fv(this.addr,i)}function mK(e,t){let i=fp(t,this.size,3);e.uniform3fv(this.addr,i)}function vK(e,t){let i=fp(t,this.size,4);e.uniform4fv(this.addr,i)}function gK(e,t){let i=fp(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function yK(e,t){let i=fp(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function bK(e,t){let i=fp(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function wK(e,t){e.uniform1iv(this.addr,t)}function xK(e,t){e.uniform2iv(this.addr,t)}function SK(e,t){e.uniform3iv(this.addr,t)}function CK(e,t){e.uniform4iv(this.addr,t)}function _K(e,t){e.uniform1uiv(this.addr,t)}function MK(e,t){e.uniform2uiv(this.addr,t)}function EK(e,t){e.uniform3uiv(this.addr,t)}function AK(e,t){e.uniform4uiv(this.addr,t)}function PK(e,t,i){let r=this.cache,a=t.length,n=Rb(i,a);Ua(r,n)||(e.uniform1iv(this.addr,n),Wa(r,n));for(let s=0;s!==a;++s)i.setTexture2D(t[s]||vR,n[s])}function TK(e,t,i){let r=this.cache,a=t.length,n=Rb(i,a);Ua(r,n)||(e.uniform1iv(this.addr,n),Wa(r,n));for(let s=0;s!==a;++s)i.setTexture3D(t[s]||yR,n[s])}function kK(e,t,i){let r=this.cache,a=t.length,n=Rb(i,a);Ua(r,n)||(e.uniform1iv(this.addr,n),Wa(r,n));for(let s=0;s!==a;++s)i.setTextureCube(t[s]||bR,n[s])}function OK(e,t,i){let r=this.cache,a=t.length,n=Rb(i,a);Ua(r,n)||(e.uniform1iv(this.addr,n),Wa(r,n));for(let s=0;s!==a;++s)i.setTexture2DArray(t[s]||gR,n[s])}function DK(e){switch(e){case 5126:return pK;case 35664:return fK;case 35665:return mK;case 35666:return vK;case 35674:return gK;case 35675:return yK;case 35676:return bK;case 5124:case 35670:return wK;case 35667:case 35671:return xK;case 35668:case 35672:return SK;case 35669:case 35673:return CK;case 5125:return _K;case 36294:return MK;case 36295:return EK;case 36296:return AK;case 35678:case 36198:case 36298:case 36306:case 35682:return PK;case 35679:case 36299:case 36307:return TK;case 35680:case 36300:case 36308:case 36293:return kK;case 36289:case 36303:case 36311:case 36292:return OK}}var IK=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=hK(t.type)}},LK=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=DK(t.type)}},BK=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let r=this.seq;for(let a=0,n=r.length;a!==n;++a){let s=r[a];s.setValue(e,t[s.id],i)}}},_w=/(\w+)(\])?(\[|\.)?/g;function CT(e,t){e.seq.push(t),e.map[t.id]=t}function zK(e,t,i){let r=e.name,a=r.length;for(_w.lastIndex=0;;){let n=_w.exec(r),s=_w.lastIndex,o=n[1],l=n[2]==="]",u=n[3];if(l&&(o=o|0),u===void 0||u==="["&&s+2===a){CT(i,u===void 0?new IK(o,e,t):new LK(o,e,t));break}else{let c=i.map[o];c===void 0&&(c=new BK(o),CT(i,c)),i=c}}}var jg=class{constructor(e,t){this.seq=[],this.map={};let i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){let a=e.getActiveUniform(t,r),n=e.getUniformLocation(t,a.name);zK(a,n,this)}}setValue(e,t,i,r){let a=this.map[t];a!==void 0&&a.setValue(e,i,r)}setOptional(e,t,i){let r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let a=0,n=t.length;a!==n;++a){let s=t[a],o=i[s.id];o.needsUpdate!==!1&&s.setValue(e,o.value,r)}}static seqWithValue(e,t){let i=[];for(let r=0,a=e.length;r!==a;++r){let n=e[r];n.id in t&&i.push(n)}return i}};function _T(e,t,i){let r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}var RK=0;function NK(e,t){let i=e.split(`
`),r=[],a=Math.max(t-6,0),n=Math.min(t+6,i.length);for(let s=a;s<n;s++){let o=s+1;r.push(`${o===t?">":" "} ${o}: ${i[s]}`)}return r.join(`
`)}function VK(e){switch(e){case To:return["Linear","( value )"];case Ji:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function MT(e,t,i){let r=e.getShaderParameter(t,35713),a=e.getShaderInfoLog(t).trim();if(r&&a==="")return"";let n=/ERROR: 0:(\d+)/.exec(a);if(n){let s=parseInt(n[1]);return i.toUpperCase()+`

`+a+`

`+NK(e.getShaderSource(t),s)}else return a}function FK(e,t){let i=VK(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function jK(e,t){let i;switch(t){case qH:i="Linear";break;case YH:i="Reinhard";break;case XH:i="OptimizedCineon";break;case KH:i="ACESFilmic";break;case ZH:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function $K(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(vf).join(`
`)}function UK(e){let t=[];for(let i in e){let r=e[i];r!==!1&&t.push("#define "+i+" "+r)}return t.join(`
`)}function WK(e,t){let i={},r=e.getProgramParameter(t,35721);for(let a=0;a<r;a++){let n=e.getActiveAttrib(t,a),s=n.name,o=1;n.type===35674&&(o=2),n.type===35675&&(o=3),n.type===35676&&(o=4),i[s]={type:n.type,location:e.getAttribLocation(t,s),locationSize:o}}return i}function vf(e){return e!==""}function ET(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function AT(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var HK=/^[ \t]*#include +<([\w\d./]+)>/gm;function N_(e){return e.replace(HK,GK)}function GK(e,t){let i=tr[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return N_(i)}var qK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function PT(e){return e.replace(qK,YK)}function YK(e,t,i,r){let a="";for(let n=parseInt(t);n<parseInt(i);n++)a+=r.replace(/\[\s*i\s*\]/g,"[ "+n+" ]").replace(/UNROLLED_LOOP_INDEX/g,n);return a}function TT(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function XK(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===SE?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===MH?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===mf&&(t="SHADOWMAP_TYPE_VSM"),t}function KK(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case cd:case dd:t="ENVMAP_TYPE_CUBE";break;case Om:t="ENVMAP_TYPE_CUBE_UV";break}return t}function ZK(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case dd:t="ENVMAP_MODE_REFRACTION";break}return t}function QK(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case eR:t="ENVMAP_BLENDING_MULTIPLY";break;case HH:t="ENVMAP_BLENDING_MIX";break;case GH:t="ENVMAP_BLENDING_ADD";break}return t}function JK(e){let t=e.envMapCubeUVHeight;if(t===null)return null;let i=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:r,maxMip:i}}function eZ(e,t,i,r){let a=e.getContext(),n=i.defines,s=i.vertexShader,o=i.fragmentShader,l=XK(i),u=KK(i),c=ZK(i),d=QK(i),h=JK(i),p=i.isWebGL2?"":$K(i),f=UK(n),v=a.createProgram(),m,g,y=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(m=[f].filter(vf).join(`
`),m.length>0&&(m+=`
`),g=[p,f].filter(vf).join(`
`),g.length>0&&(g+=`
`)):(m=[TT(i),"#define SHADER_NAME "+i.shaderName,f,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(vf).join(`
`),g=[p,TT(i),"#define SHADER_NAME "+i.shaderName,f,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+u:"",i.envMap?"#define "+c:"",i.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+l:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==cl?"#define TONE_MAPPING":"",i.toneMapping!==cl?tr.tonemapping_pars_fragment:"",i.toneMapping!==cl?jK("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",tr.encodings_pars_fragment,FK("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(vf).join(`
`)),s=N_(s),s=ET(s,i),s=AT(s,i),o=N_(o),o=ET(o,i),o=AT(o,i),s=PT(s),o=PT(o),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(y=`#version 300 es
`,m=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+m,g=["#define varying in",i.glslVersion===J3?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===J3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let b=y+m+s,x=y+g+o,S=_T(a,35633,b),w=_T(a,35632,x);if(a.attachShader(v,S),a.attachShader(v,w),i.index0AttributeName!==void 0?a.bindAttribLocation(v,0,i.index0AttributeName):i.morphTargets===!0&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),e.debug.checkShaderErrors){let P=a.getProgramInfoLog(v).trim(),A=a.getShaderInfoLog(S).trim(),k=a.getShaderInfoLog(w).trim(),I=!0,O=!0;if(a.getProgramParameter(v,35714)===!1){I=!1;let D=MT(a,S,"vertex"),F=MT(a,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,35715)+`

Program Info Log: `+P+`
`+D+`
`+F)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(A===""||k==="")&&(O=!1);O&&(this.diagnostics={runnable:I,programLog:P,vertexShader:{log:A,prefix:m},fragmentShader:{log:k,prefix:g}})}a.deleteShader(S),a.deleteShader(w);let E;this.getUniforms=function(){return E===void 0&&(E=new jg(a,v)),E};let M;return this.getAttributes=function(){return M===void 0&&(M=WK(a,v)),M},this.destroy=function(){r.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=RK++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=S,this.fragmentShader=w,this}var tZ=0,iZ=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),a=this._getShaderStage(i),n=this._getShaderCacheForMaterial(e);return n.has(r)===!1&&(n.add(r),r.usedTimes++),n.has(a)===!1&&(n.add(a),a.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return i===void 0&&(i=new rZ(e),t.set(e,i)),i}},rZ=class{constructor(e){this.id=tZ++,this.code=e,this.usedTimes=0}};function aZ(e,t,i,r,a,n,s){let o=new EE,l=new iZ,u=[],c=a.isWebGL2,d=a.logarithmicDepthBuffer,h=a.vertexTextures,p=a.precision,f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(M,P,A,k,I){let O=k.fog,D=I.geometry,F=M.isMeshStandardMaterial?k.environment:null,U=(M.isMeshStandardMaterial?i:t).get(M.envMap||F),z=U&&U.mapping===Om?U.image.height:null,B=f[M.type];M.precision!==null&&(p=a.getMaxPrecision(M.precision),p!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",p,"instead."));let W=D.morphAttributes.position||D.morphAttributes.normal||D.morphAttributes.color,R=W!==void 0?W.length:0,$=0;D.morphAttributes.position!==void 0&&($=1),D.morphAttributes.normal!==void 0&&($=2),D.morphAttributes.color!==void 0&&($=3);let q,Z,G,X;if(B){let ge=Qo[B];q=ge.vertexShader,Z=ge.fragmentShader}else q=M.vertexShader,Z=M.fragmentShader,l.update(M),G=l.getVertexShaderID(M),X=l.getFragmentShaderID(M);let J=e.getRenderTarget(),pe=M.alphaTest>0,fe=M.clearcoat>0,de=M.iridescence>0;return{isWebGL2:c,shaderID:B,shaderName:M.type,vertexShader:q,fragmentShader:Z,defines:M.defines,customVertexShaderID:G,customFragmentShaderID:X,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:p,instancing:I.isInstancedMesh===!0,instancingColor:I.isInstancedMesh===!0&&I.instanceColor!==null,supportsVertexTextures:h,outputEncoding:J===null?e.outputEncoding:J.isXRRenderTarget===!0?J.texture.encoding:To,map:!!M.map,matcap:!!M.matcap,envMap:!!U,envMapMode:U&&U.mapping,envMapCubeUVHeight:z,lightMap:!!M.lightMap,aoMap:!!M.aoMap,emissiveMap:!!M.emissiveMap,bumpMap:!!M.bumpMap,normalMap:!!M.normalMap,objectSpaceNormalMap:M.normalMapType===fG,tangentSpaceNormalMap:M.normalMapType===pG,decodeVideoTexture:!!M.map&&M.map.isVideoTexture===!0&&M.map.encoding===Ji,clearcoat:fe,clearcoatMap:fe&&!!M.clearcoatMap,clearcoatRoughnessMap:fe&&!!M.clearcoatRoughnessMap,clearcoatNormalMap:fe&&!!M.clearcoatNormalMap,iridescence:de,iridescenceMap:de&&!!M.iridescenceMap,iridescenceThicknessMap:de&&!!M.iridescenceThicknessMap,displacementMap:!!M.displacementMap,roughnessMap:!!M.roughnessMap,metalnessMap:!!M.metalnessMap,specularMap:!!M.specularMap,specularIntensityMap:!!M.specularIntensityMap,specularColorMap:!!M.specularColorMap,opaque:M.transparent===!1&&M.blending===Xc,alphaMap:!!M.alphaMap,alphaTest:pe,gradientMap:!!M.gradientMap,sheen:M.sheen>0,sheenColorMap:!!M.sheenColorMap,sheenRoughnessMap:!!M.sheenRoughnessMap,transmission:M.transmission>0,transmissionMap:!!M.transmissionMap,thicknessMap:!!M.thicknessMap,combine:M.combine,vertexTangents:!!M.normalMap&&!!D.attributes.tangent,vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!D.attributes.color&&D.attributes.color.itemSize===4,vertexUvs:!!M.map||!!M.bumpMap||!!M.normalMap||!!M.specularMap||!!M.alphaMap||!!M.emissiveMap||!!M.roughnessMap||!!M.metalnessMap||!!M.clearcoatMap||!!M.clearcoatRoughnessMap||!!M.clearcoatNormalMap||!!M.iridescenceMap||!!M.iridescenceThicknessMap||!!M.displacementMap||!!M.transmissionMap||!!M.thicknessMap||!!M.specularIntensityMap||!!M.specularColorMap||!!M.sheenColorMap||!!M.sheenRoughnessMap,uvsVertexOnly:!(M.map||M.bumpMap||M.normalMap||M.specularMap||M.alphaMap||M.emissiveMap||M.roughnessMap||M.metalnessMap||M.clearcoatNormalMap||M.iridescenceMap||M.iridescenceThicknessMap||M.transmission>0||M.transmissionMap||M.thicknessMap||M.specularIntensityMap||M.specularColorMap||M.sheen>0||M.sheenColorMap||M.sheenRoughnessMap)&&!!M.displacementMap,fog:!!O,useFog:M.fog===!0,fogExp2:O&&O.isFogExp2,flatShading:!!M.flatShading,sizeAttenuation:M.sizeAttenuation,logarithmicDepthBuffer:d,skinning:I.isSkinnedMesh===!0,morphTargets:D.morphAttributes.position!==void 0,morphNormals:D.morphAttributes.normal!==void 0,morphColors:D.morphAttributes.color!==void 0,morphTargetsCount:R,morphTextureStride:$,numDirLights:P.directional.length,numPointLights:P.point.length,numSpotLights:P.spot.length,numSpotLightMaps:P.spotLightMap.length,numRectAreaLights:P.rectArea.length,numHemiLights:P.hemi.length,numDirLightShadows:P.directionalShadowMap.length,numPointLightShadows:P.pointShadowMap.length,numSpotLightShadows:P.spotShadowMap.length,numSpotLightShadowsWithMaps:P.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:M.dithering,shadowMapEnabled:e.shadowMap.enabled&&A.length>0,shadowMapType:e.shadowMap.type,toneMapping:M.toneMapped?e.toneMapping:cl,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Rn,flipSided:M.side===tn,useDepthPacking:!!M.depthPacking,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionDerivatives:M.extensions&&M.extensions.derivatives,extensionFragDepth:M.extensions&&M.extensions.fragDepth,extensionDrawBuffers:M.extensions&&M.extensions.drawBuffers,extensionShaderTextureLOD:M.extensions&&M.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:M.customProgramCacheKey()}}function m(M){let P=[];if(M.shaderID?P.push(M.shaderID):(P.push(M.customVertexShaderID),P.push(M.customFragmentShaderID)),M.defines!==void 0)for(let A in M.defines)P.push(A),P.push(M.defines[A]);return M.isRawShaderMaterial===!1&&(g(P,M),y(P,M),P.push(e.outputEncoding)),P.push(M.customProgramCacheKey),P.join()}function g(M,P){M.push(P.precision),M.push(P.outputEncoding),M.push(P.envMapMode),M.push(P.envMapCubeUVHeight),M.push(P.combine),M.push(P.vertexUvs),M.push(P.fogExp2),M.push(P.sizeAttenuation),M.push(P.morphTargetsCount),M.push(P.morphAttributeCount),M.push(P.numDirLights),M.push(P.numPointLights),M.push(P.numSpotLights),M.push(P.numSpotLightMaps),M.push(P.numHemiLights),M.push(P.numRectAreaLights),M.push(P.numDirLightShadows),M.push(P.numPointLightShadows),M.push(P.numSpotLightShadows),M.push(P.numSpotLightShadowsWithMaps),M.push(P.shadowMapType),M.push(P.toneMapping),M.push(P.numClippingPlanes),M.push(P.numClipIntersection),M.push(P.depthPacking)}function y(M,P){o.disableAll(),P.isWebGL2&&o.enable(0),P.supportsVertexTextures&&o.enable(1),P.instancing&&o.enable(2),P.instancingColor&&o.enable(3),P.map&&o.enable(4),P.matcap&&o.enable(5),P.envMap&&o.enable(6),P.lightMap&&o.enable(7),P.aoMap&&o.enable(8),P.emissiveMap&&o.enable(9),P.bumpMap&&o.enable(10),P.normalMap&&o.enable(11),P.objectSpaceNormalMap&&o.enable(12),P.tangentSpaceNormalMap&&o.enable(13),P.clearcoat&&o.enable(14),P.clearcoatMap&&o.enable(15),P.clearcoatRoughnessMap&&o.enable(16),P.clearcoatNormalMap&&o.enable(17),P.iridescence&&o.enable(18),P.iridescenceMap&&o.enable(19),P.iridescenceThicknessMap&&o.enable(20),P.displacementMap&&o.enable(21),P.specularMap&&o.enable(22),P.roughnessMap&&o.enable(23),P.metalnessMap&&o.enable(24),P.gradientMap&&o.enable(25),P.alphaMap&&o.enable(26),P.alphaTest&&o.enable(27),P.vertexColors&&o.enable(28),P.vertexAlphas&&o.enable(29),P.vertexUvs&&o.enable(30),P.vertexTangents&&o.enable(31),P.uvsVertexOnly&&o.enable(32),M.push(o.mask),o.disableAll(),P.fog&&o.enable(0),P.useFog&&o.enable(1),P.flatShading&&o.enable(2),P.logarithmicDepthBuffer&&o.enable(3),P.skinning&&o.enable(4),P.morphTargets&&o.enable(5),P.morphNormals&&o.enable(6),P.morphColors&&o.enable(7),P.premultipliedAlpha&&o.enable(8),P.shadowMapEnabled&&o.enable(9),P.physicallyCorrectLights&&o.enable(10),P.doubleSided&&o.enable(11),P.flipSided&&o.enable(12),P.useDepthPacking&&o.enable(13),P.dithering&&o.enable(14),P.specularIntensityMap&&o.enable(15),P.specularColorMap&&o.enable(16),P.transmission&&o.enable(17),P.transmissionMap&&o.enable(18),P.thicknessMap&&o.enable(19),P.sheen&&o.enable(20),P.sheenColorMap&&o.enable(21),P.sheenRoughnessMap&&o.enable(22),P.decodeVideoTexture&&o.enable(23),P.opaque&&o.enable(24),M.push(o.mask)}function b(M){let P=f[M.type],A;if(P){let k=Qo[P];A=pp.clone(k.uniforms)}else A=M.uniforms;return A}function x(M,P){let A;for(let k=0,I=u.length;k<I;k++){let O=u[k];if(O.cacheKey===P){A=O,++A.usedTimes;break}}return A===void 0&&(A=new eZ(e,P,M,n),u.push(A)),A}function S(M){if(--M.usedTimes===0){let P=u.indexOf(M);u[P]=u[u.length-1],u.pop(),M.destroy()}}function w(M){l.remove(M)}function E(){l.dispose()}return{getParameters:v,getProgramCacheKey:m,getUniforms:b,acquireProgram:x,releaseProgram:S,releaseShaderCache:w,programs:u,dispose:E}}function nZ(){let e=new WeakMap;function t(n){let s=e.get(n);return s===void 0&&(s={},e.set(n,s)),s}function i(n){e.delete(n)}function r(n,s,o){e.get(n)[s]=o}function a(){e=new WeakMap}return{get:t,remove:i,update:r,dispose:a}}function sZ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function kT(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function OT(){let e=[],t=0,i=[],r=[],a=[];function n(){t=0,i.length=0,r.length=0,a.length=0}function s(d,h,p,f,v,m){let g=e[t];return g===void 0?(g={id:d.id,object:d,geometry:h,material:p,groupOrder:f,renderOrder:d.renderOrder,z:v,group:m},e[t]=g):(g.id=d.id,g.object=d,g.geometry=h,g.material=p,g.groupOrder=f,g.renderOrder=d.renderOrder,g.z=v,g.group=m),t++,g}function o(d,h,p,f,v,m){let g=s(d,h,p,f,v,m);p.transmission>0?r.push(g):p.transparent===!0?a.push(g):i.push(g)}function l(d,h,p,f,v,m){let g=s(d,h,p,f,v,m);p.transmission>0?r.unshift(g):p.transparent===!0?a.unshift(g):i.unshift(g)}function u(d,h){i.length>1&&i.sort(d||sZ),r.length>1&&r.sort(h||kT),a.length>1&&a.sort(h||kT)}function c(){for(let d=t,h=e.length;d<h;d++){let p=e[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:i,transmissive:r,transparent:a,init:n,push:o,unshift:l,finish:c,sort:u}}function oZ(){let e=new WeakMap;function t(r,a){let n=e.get(r),s;return n===void 0?(s=new OT,e.set(r,[s])):a>=n.length?(s=new OT,n.push(s)):s=n[a],s}function i(){e=new WeakMap}return{get:t,dispose:i}}function lZ(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new V,color:new Bi};break;case"SpotLight":i={position:new V,direction:new V,color:new Bi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new V,color:new Bi,distance:0,decay:0};break;case"HemisphereLight":i={direction:new V,skyColor:new Bi,groundColor:new Bi};break;case"RectAreaLight":i={color:new Bi,position:new V,halfWidth:new V,halfHeight:new V};break}return e[t.id]=i,i}}}function uZ(){let e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=i,i}}}var cZ=0;function dZ(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function hZ(e,t){let i=new lZ,r=uZ(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)a.probe.push(new V);let n=new V,s=new zt,o=new zt;function l(c,d){let h=0,p=0,f=0;for(let k=0;k<9;k++)a.probe[k].set(0,0,0);let v=0,m=0,g=0,y=0,b=0,x=0,S=0,w=0,E=0,M=0;c.sort(dZ);let P=d!==!0?Math.PI:1;for(let k=0,I=c.length;k<I;k++){let O=c[k],D=O.color,F=O.intensity,U=O.distance,z=O.shadow&&O.shadow.map?O.shadow.map.texture:null;if(O.isAmbientLight)h+=D.r*F*P,p+=D.g*F*P,f+=D.b*F*P;else if(O.isLightProbe)for(let B=0;B<9;B++)a.probe[B].addScaledVector(O.sh.coefficients[B],F);else if(O.isDirectionalLight){let B=i.get(O);if(B.color.copy(O.color).multiplyScalar(O.intensity*P),O.castShadow){let W=O.shadow,R=r.get(O);R.shadowBias=W.bias,R.shadowNormalBias=W.normalBias,R.shadowRadius=W.radius,R.shadowMapSize=W.mapSize,a.directionalShadow[v]=R,a.directionalShadowMap[v]=z,a.directionalShadowMatrix[v]=O.shadow.matrix,x++}a.directional[v]=B,v++}else if(O.isSpotLight){let B=i.get(O);B.position.setFromMatrixPosition(O.matrixWorld),B.color.copy(D).multiplyScalar(F*P),B.distance=U,B.coneCos=Math.cos(O.angle),B.penumbraCos=Math.cos(O.angle*(1-O.penumbra)),B.decay=O.decay,a.spot[g]=B;let W=O.shadow;if(O.map&&(a.spotLightMap[E]=O.map,E++,W.updateMatrices(O),O.castShadow&&M++),a.spotLightMatrix[g]=W.matrix,O.castShadow){let R=r.get(O);R.shadowBias=W.bias,R.shadowNormalBias=W.normalBias,R.shadowRadius=W.radius,R.shadowMapSize=W.mapSize,a.spotShadow[g]=R,a.spotShadowMap[g]=z,w++}g++}else if(O.isRectAreaLight){let B=i.get(O);B.color.copy(D).multiplyScalar(F),B.halfWidth.set(O.width*.5,0,0),B.halfHeight.set(0,O.height*.5,0),a.rectArea[y]=B,y++}else if(O.isPointLight){let B=i.get(O);if(B.color.copy(O.color).multiplyScalar(O.intensity*P),B.distance=O.distance,B.decay=O.decay,O.castShadow){let W=O.shadow,R=r.get(O);R.shadowBias=W.bias,R.shadowNormalBias=W.normalBias,R.shadowRadius=W.radius,R.shadowMapSize=W.mapSize,R.shadowCameraNear=W.camera.near,R.shadowCameraFar=W.camera.far,a.pointShadow[m]=R,a.pointShadowMap[m]=z,a.pointShadowMatrix[m]=O.shadow.matrix,S++}a.point[m]=B,m++}else if(O.isHemisphereLight){let B=i.get(O);B.skyColor.copy(O.color).multiplyScalar(F*P),B.groundColor.copy(O.groundColor).multiplyScalar(F*P),a.hemi[b]=B,b++}}y>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=Kt.LTC_FLOAT_1,a.rectAreaLTC2=Kt.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=Kt.LTC_HALF_1,a.rectAreaLTC2=Kt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=h,a.ambient[1]=p,a.ambient[2]=f;let A=a.hash;(A.directionalLength!==v||A.pointLength!==m||A.spotLength!==g||A.rectAreaLength!==y||A.hemiLength!==b||A.numDirectionalShadows!==x||A.numPointShadows!==S||A.numSpotShadows!==w||A.numSpotMaps!==E)&&(a.directional.length=v,a.spot.length=g,a.rectArea.length=y,a.point.length=m,a.hemi.length=b,a.directionalShadow.length=x,a.directionalShadowMap.length=x,a.pointShadow.length=S,a.pointShadowMap.length=S,a.spotShadow.length=w,a.spotShadowMap.length=w,a.directionalShadowMatrix.length=x,a.pointShadowMatrix.length=S,a.spotLightMatrix.length=w+E-M,a.spotLightMap.length=E,a.numSpotLightShadowsWithMaps=M,A.directionalLength=v,A.pointLength=m,A.spotLength=g,A.rectAreaLength=y,A.hemiLength=b,A.numDirectionalShadows=x,A.numPointShadows=S,A.numSpotShadows=w,A.numSpotMaps=E,a.version=cZ++)}function u(c,d){let h=0,p=0,f=0,v=0,m=0,g=d.matrixWorldInverse;for(let y=0,b=c.length;y<b;y++){let x=c[y];if(x.isDirectionalLight){let S=a.directional[h];S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),h++}else if(x.isSpotLight){let S=a.spot[f];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),f++}else if(x.isRectAreaLight){let S=a.rectArea[v];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),o.identity(),s.copy(x.matrixWorld),s.premultiply(g),o.extractRotation(s),S.halfWidth.set(x.width*.5,0,0),S.halfHeight.set(0,x.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),v++}else if(x.isPointLight){let S=a.point[p];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),p++}else if(x.isHemisphereLight){let S=a.hemi[m];S.direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(g),m++}}}return{setup:l,setupView:u,state:a}}function DT(e,t){let i=new hZ(e,t),r=[],a=[];function n(){r.length=0,a.length=0}function s(c){r.push(c)}function o(c){a.push(c)}function l(c){i.setup(r,c)}function u(c){i.setupView(r,c)}return{init:n,state:{lightsArray:r,shadowsArray:a,lights:i},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:o}}function pZ(e,t){let i=new WeakMap;function r(n,s=0){let o=i.get(n),l;return o===void 0?(l=new DT(e,t),i.set(n,[l])):s>=o.length?(l=new DT(e,t),o.push(l)):l=o[s],l}function a(){i=new WeakMap}return{get:r,dispose:a}}var wR=class extends Dm{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=mu,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},fZ=class extends Dm{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new V,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},mZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function gZ(e,t,i){let r=new PE,a=new Ce,n=new Ce,s=new Wi,o=new wR({depthPacking:sR}),l=new fZ,u={},c=i.maxTextureSize,d={[Po]:tn,[tn]:Po,[Rn]:Rn},h=new xr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:mZ,fragmentShader:vZ}),p=h.clone();p.defines.HORIZONTAL_PASS=1;let f=new Mi;f.setAttribute("position",new ji(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let v=new ra(f,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=SE,this.render=function(x,S,w){if(m.enabled===!1||m.autoUpdate===!1&&m.needsUpdate===!1||x.length===0)return;let E=e.getRenderTarget(),M=e.getActiveCubeFace(),P=e.getActiveMipmapLevel(),A=e.state;A.setBlending(Oa),A.buffers.color.setClear(1,1,1,1),A.buffers.depth.setTest(!0),A.setScissorTest(!1);for(let k=0,I=x.length;k<I;k++){let O=x[k],D=O.shadow;if(D===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(D.autoUpdate===!1&&D.needsUpdate===!1)continue;a.copy(D.mapSize);let F=D.getFrameExtents();if(a.multiply(F),n.copy(D.mapSize),(a.x>c||a.y>c)&&(a.x>c&&(n.x=Math.floor(c/F.x),a.x=n.x*F.x,D.mapSize.x=n.x),a.y>c&&(n.y=Math.floor(c/F.y),a.y=n.y*F.y,D.mapSize.y=n.y)),D.map===null){let z=this.type!==mf?{minFilter:Ar,magFilter:Ar}:{};D.map=new Mr(a.x,a.y,z),D.map.texture.name=O.name+".shadowMap",D.camera.updateProjectionMatrix()}e.setRenderTarget(D.map),e.clear();let U=D.getViewportCount();for(let z=0;z<U;z++){let B=D.getViewport(z);s.set(n.x*B.x,n.y*B.y,n.x*B.z,n.y*B.w),A.viewport(s),D.updateMatrices(O,z),r=D.getFrustum(),b(S,w,D.camera,O,this.type)}D.isPointLightShadow!==!0&&this.type===mf&&g(D,w),D.needsUpdate=!1}m.needsUpdate=!1,e.setRenderTarget(E,M,P)};function g(x,S){let w=t.update(v);h.defines.VSM_SAMPLES!==x.blurSamples&&(h.defines.VSM_SAMPLES=x.blurSamples,p.defines.VSM_SAMPLES=x.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),x.mapPass===null&&(x.mapPass=new Mr(a.x,a.y)),h.uniforms.shadow_pass.value=x.map.texture,h.uniforms.resolution.value=x.mapSize,h.uniforms.radius.value=x.radius,e.setRenderTarget(x.mapPass),e.clear(),e.renderBufferDirect(S,null,w,h,v,null),p.uniforms.shadow_pass.value=x.mapPass.texture,p.uniforms.resolution.value=x.mapSize,p.uniforms.radius.value=x.radius,e.setRenderTarget(x.map),e.clear(),e.renderBufferDirect(S,null,w,p,v,null)}function y(x,S,w,E,M,P){let A=null,k=w.isPointLight===!0?x.customDistanceMaterial:x.customDepthMaterial;if(k!==void 0)A=k;else if(A=w.isPointLight===!0?l:o,e.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){let I=A.uuid,O=S.uuid,D=u[I];D===void 0&&(D={},u[I]=D);let F=D[O];F===void 0&&(F=A.clone(),D[O]=F),A=F}return A.visible=S.visible,A.wireframe=S.wireframe,P===mf?A.side=S.shadowSide!==null?S.shadowSide:S.side:A.side=S.shadowSide!==null?S.shadowSide:d[S.side],A.alphaMap=S.alphaMap,A.alphaTest=S.alphaTest,A.map=S.map,A.clipShadows=S.clipShadows,A.clippingPlanes=S.clippingPlanes,A.clipIntersection=S.clipIntersection,A.displacementMap=S.displacementMap,A.displacementScale=S.displacementScale,A.displacementBias=S.displacementBias,A.wireframeLinewidth=S.wireframeLinewidth,A.linewidth=S.linewidth,w.isPointLight===!0&&A.isMeshDistanceMaterial===!0&&(A.referencePosition.setFromMatrixPosition(w.matrixWorld),A.nearDistance=E,A.farDistance=M),A}function b(x,S,w,E,M){if(x.visible===!1)return;if(x.layers.test(S.layers)&&(x.isMesh||x.isLine||x.isPoints)&&(x.castShadow||x.receiveShadow&&M===mf)&&(!x.frustumCulled||r.intersectsObject(x))){x.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,x.matrixWorld);let A=t.update(x),k=x.material;if(Array.isArray(k)){let I=A.groups;for(let O=0,D=I.length;O<D;O++){let F=I[O],U=k[F.materialIndex];if(U&&U.visible){let z=y(x,U,E,w.near,w.far,M);e.renderBufferDirect(w,null,A,z,x,F)}}}else if(k.visible){let I=y(x,k,E,w.near,w.far,M);e.renderBufferDirect(w,null,A,I,x,null)}}let P=x.children;for(let A=0,k=P.length;A<k;A++)b(P[A],S,w,E,M)}}function yZ(e,t,i){let r=i.isWebGL2;function a(){let Ee=!1,nt=new Wi,St=null,$t=new Wi(0,0,0,0);return{setMask:function(Ei){St!==Ei&&!Ee&&(e.colorMask(Ei,Ei,Ei,Ei),St=Ei)},setLocked:function(Ei){Ee=Ei},setClear:function(Ei,Yi,nr,ar,Qr){Qr===!0&&(Ei*=ar,Yi*=ar,nr*=ar),nt.set(Ei,Yi,nr,ar),$t.equals(nt)===!1&&(e.clearColor(Ei,Yi,nr,ar),$t.copy(nt))},reset:function(){Ee=!1,St=null,$t.set(-1,0,0,0)}}}function n(){let Ee=!1,nt=null,St=null,$t=null;return{setTest:function(Ei){Ei?pe(2929):fe(2929)},setMask:function(Ei){nt!==Ei&&!Ee&&(e.depthMask(Ei),nt=Ei)},setFunc:function(Ei){if(St!==Ei){switch(Ei){case NH:e.depthFunc(512);break;case VH:e.depthFunc(519);break;case FH:e.depthFunc(513);break;case O_:e.depthFunc(515);break;case jH:e.depthFunc(514);break;case $H:e.depthFunc(518);break;case UH:e.depthFunc(516);break;case WH:e.depthFunc(517);break;default:e.depthFunc(515)}St=Ei}},setLocked:function(Ei){Ee=Ei},setClear:function(Ei){$t!==Ei&&(e.clearDepth(Ei),$t=Ei)},reset:function(){Ee=!1,nt=null,St=null,$t=null}}}function s(){let Ee=!1,nt=null,St=null,$t=null,Ei=null,Yi=null,nr=null,ar=null,Qr=null;return{setTest:function(Rt){Ee||(Rt?pe(2960):fe(2960))},setMask:function(Rt){nt!==Rt&&!Ee&&(e.stencilMask(Rt),nt=Rt)},setFunc:function(Rt,Ci,or){(St!==Rt||$t!==Ci||Ei!==or)&&(e.stencilFunc(Rt,Ci,or),St=Rt,$t=Ci,Ei=or)},setOp:function(Rt,Ci,or){(Yi!==Rt||nr!==Ci||ar!==or)&&(e.stencilOp(Rt,Ci,or),Yi=Rt,nr=Ci,ar=or)},setLocked:function(Rt){Ee=Rt},setClear:function(Rt){Qr!==Rt&&(e.clearStencil(Rt),Qr=Rt)},reset:function(){Ee=!1,nt=null,St=null,$t=null,Ei=null,Yi=null,nr=null,ar=null,Qr=null}}}let o=new a,l=new n,u=new s,c=new WeakMap,d=new WeakMap,h={},p={},f=new WeakMap,v=[],m=null,g=!1,y=null,b=null,x=null,S=null,w=null,E=null,M=null,P=!1,A=null,k=null,I=null,O=null,D=null,F=e.getParameter(35661),U=!1,z=0,B=e.getParameter(7938);B.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(B)[1]),U=z>=1):B.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),U=z>=2);let W=null,R={},$=e.getParameter(3088),q=e.getParameter(2978),Z=new Wi().fromArray($),G=new Wi().fromArray(q);function X(Ee,nt,St){let $t=new Uint8Array(4),Ei=e.createTexture();e.bindTexture(Ee,Ei),e.texParameteri(Ee,10241,9728),e.texParameteri(Ee,10240,9728);for(let Yi=0;Yi<St;Yi++)e.texImage2D(nt+Yi,0,6408,1,1,0,6408,5121,$t);return Ei}let J={};J[3553]=X(3553,3553,1),J[34067]=X(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(2929),l.setFunc(O_),Ne(!1),pt(C3),pe(2884),le(Oa);function pe(Ee){h[Ee]!==!0&&(e.enable(Ee),h[Ee]=!0)}function fe(Ee){h[Ee]!==!1&&(e.disable(Ee),h[Ee]=!1)}function de(Ee,nt){return p[Ee]!==nt?(e.bindFramebuffer(Ee,nt),p[Ee]=nt,r&&(Ee===36009&&(p[36160]=nt),Ee===36160&&(p[36009]=nt)),!0):!1}function ge(Ee,nt){let St=v,$t=!1;if(Ee)if(St=f.get(nt),St===void 0&&(St=[],f.set(nt,St)),Ee.isWebGLMultipleRenderTargets){let Ei=Ee.texture;if(St.length!==Ei.length||St[0]!==36064){for(let Yi=0,nr=Ei.length;Yi<nr;Yi++)St[Yi]=36064+Yi;St.length=Ei.length,$t=!0}}else St[0]!==36064&&(St[0]=36064,$t=!0);else St[0]!==1029&&(St[0]=1029,$t=!0);$t&&(i.isWebGL2?e.drawBuffers(St):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(St))}function me(Ee){return m!==Ee?(e.useProgram(Ee),m=Ee,!0):!1}let ke={[sh]:32774,[AH]:32778,[PH]:32779};if(r)ke[A3]=32775,ke[P3]=32776;else{let Ee=t.get("EXT_blend_minmax");Ee!==null&&(ke[A3]=Ee.MIN_EXT,ke[P3]=Ee.MAX_EXT)}let ce={[TH]:0,[kH]:1,[OH]:768,[Qz]:770,[RH]:776,[BH]:774,[IH]:772,[DH]:769,[Jz]:771,[zH]:775,[LH]:773};function le(Ee,nt,St,$t,Ei,Yi,nr,ar){if(Ee===Oa){g===!0&&(fe(3042),g=!1);return}if(g===!1&&(pe(3042),g=!0),Ee!==EH){if(Ee!==y||ar!==P){if((b!==sh||w!==sh)&&(e.blendEquation(32774),b=sh,w=sh),ar)switch(Ee){case Xc:e.blendFuncSeparate(1,771,1,771);break;case _3:e.blendFunc(1,1);break;case M3:e.blendFuncSeparate(0,769,0,1);break;case E3:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}else switch(Ee){case Xc:e.blendFuncSeparate(770,771,1,771);break;case _3:e.blendFunc(770,1);break;case M3:e.blendFuncSeparate(0,769,0,1);break;case E3:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ee);break}x=null,S=null,E=null,M=null,y=Ee,P=ar}return}Ei=Ei||nt,Yi=Yi||St,nr=nr||$t,(nt!==b||Ei!==w)&&(e.blendEquationSeparate(ke[nt],ke[Ei]),b=nt,w=Ei),(St!==x||$t!==S||Yi!==E||nr!==M)&&(e.blendFuncSeparate(ce[St],ce[$t],ce[Yi],ce[nr]),x=St,S=$t,E=Yi,M=nr),y=Ee,P=!1}function xe(Ee,nt){Ee.side===Rn?fe(2884):pe(2884);let St=Ee.side===tn;nt&&(St=!St),Ne(St),Ee.blending===Xc&&Ee.transparent===!1?le(Oa):le(Ee.blending,Ee.blendEquation,Ee.blendSrc,Ee.blendDst,Ee.blendEquationAlpha,Ee.blendSrcAlpha,Ee.blendDstAlpha,Ee.premultipliedAlpha),l.setFunc(Ee.depthFunc),l.setTest(Ee.depthTest),l.setMask(Ee.depthWrite),o.setMask(Ee.colorWrite);let $t=Ee.stencilWrite;u.setTest($t),$t&&(u.setMask(Ee.stencilWriteMask),u.setFunc(Ee.stencilFunc,Ee.stencilRef,Ee.stencilFuncMask),u.setOp(Ee.stencilFail,Ee.stencilZFail,Ee.stencilZPass)),Oe(Ee.polygonOffset,Ee.polygonOffsetFactor,Ee.polygonOffsetUnits),Ee.alphaToCoverage===!0?pe(32926):fe(32926)}function Ne(Ee){A!==Ee&&(Ee?e.frontFace(2304):e.frontFace(2305),A=Ee)}function pt(Ee){Ee!==CH?(pe(2884),Ee!==k&&(Ee===C3?e.cullFace(1029):Ee===_H?e.cullFace(1028):e.cullFace(1032))):fe(2884),k=Ee}function at(Ee){Ee!==I&&(U&&e.lineWidth(Ee),I=Ee)}function Oe(Ee,nt,St){Ee?(pe(32823),(O!==nt||D!==St)&&(e.polygonOffset(nt,St),O=nt,D=St)):fe(32823)}function Ye(Ee){Ee?pe(3089):fe(3089)}function xt(Ee){Ee===void 0&&(Ee=33984+F-1),W!==Ee&&(e.activeTexture(Ee),W=Ee)}function ne(Ee,nt,St){St===void 0&&(W===null?St=33984+F-1:St=W);let $t=R[St];$t===void 0&&($t={type:void 0,texture:void 0},R[St]=$t),($t.type!==Ee||$t.texture!==nt)&&(W!==St&&(e.activeTexture(St),W=St),e.bindTexture(Ee,nt||J[Ee]),$t.type=Ee,$t.texture=nt)}function K(){let Ee=R[W];Ee!==void 0&&Ee.type!==void 0&&(e.bindTexture(Ee.type,null),Ee.type=void 0,Ee.texture=void 0)}function ze(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ft(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function te(){try{e.texSubImage2D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Pe(){try{e.texSubImage3D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Te(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Be(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Le(){try{e.texStorage2D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function jt(){try{e.texStorage3D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function kt(){try{e.texImage2D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function Qt(){try{e.texImage3D.apply(e,arguments)}catch(Ee){console.error("THREE.WebGLState:",Ee)}}function ct(Ee){Z.equals(Ee)===!1&&(e.scissor(Ee.x,Ee.y,Ee.z,Ee.w),Z.copy(Ee))}function mt(Ee){G.equals(Ee)===!1&&(e.viewport(Ee.x,Ee.y,Ee.z,Ee.w),G.copy(Ee))}function Et(Ee,nt){let St=d.get(nt);St===void 0&&(St=new WeakMap,d.set(nt,St));let $t=St.get(Ee);$t===void 0&&($t=e.getUniformBlockIndex(nt,Ee.name),St.set(Ee,$t))}function Gt(Ee,nt){let St=d.get(nt).get(Ee);c.get(nt)!==St&&(e.uniformBlockBinding(nt,St,Ee.__bindingPointIndex),c.set(nt,St))}function Ht(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),r===!0&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),h={},W=null,R={},p={},f=new WeakMap,v=[],m=null,g=!1,y=null,b=null,x=null,S=null,w=null,E=null,M=null,P=!1,A=null,k=null,I=null,O=null,D=null,Z.set(0,0,e.canvas.width,e.canvas.height),G.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:pe,disable:fe,bindFramebuffer:de,drawBuffers:ge,useProgram:me,setBlending:le,setMaterial:xe,setFlipSided:Ne,setCullFace:pt,setLineWidth:at,setPolygonOffset:Oe,setScissorTest:Ye,activeTexture:xt,bindTexture:ne,unbindTexture:K,compressedTexImage2D:ze,compressedTexImage3D:ft,texImage2D:kt,texImage3D:Qt,updateUBOMapping:Et,uniformBlockBinding:Gt,texStorage2D:Le,texStorage3D:jt,texSubImage2D:te,texSubImage3D:Pe,compressedTexSubImage2D:Te,compressedTexSubImage3D:Be,scissor:ct,viewport:mt,reset:Ht}}function bZ(e,t,i,r,a,n,s){let o=a.isWebGL2,l=a.maxTextures,u=a.maxCubemapSize,c=a.maxTextureSize,d=a.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap,v,m=new WeakMap,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(ne,K){return g?new OffscreenCanvas(ne,K):em("canvas")}function b(ne,K,ze,ft){let te=1;if((ne.width>ft||ne.height>ft)&&(te=ft/Math.max(ne.width,ne.height)),te<1||K===!0)if(typeof HTMLImageElement<"u"&&ne instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ne instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ne instanceof ImageBitmap){let Pe=K?uy:Math.floor,Te=Pe(te*ne.width),Be=Pe(te*ne.height);v===void 0&&(v=y(Te,Be));let Le=ze?y(Te,Be):v;return Le.width=Te,Le.height=Be,Le.getContext("2d").drawImage(ne,0,0,Te,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ne.width+"x"+ne.height+") to ("+Te+"x"+Be+")."),Le}else return"data"in ne&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ne.width+"x"+ne.height+")."),ne;return ne}function x(ne){return R_(ne.width)&&R_(ne.height)}function S(ne){return o?!1:ne.wrapS!==Zr||ne.wrapT!==Zr||ne.minFilter!==Ar&&ne.minFilter!==ir}function w(ne,K){return ne.generateMipmaps&&K&&ne.minFilter!==Ar&&ne.minFilter!==ir}function E(ne){e.generateMipmap(ne)}function M(ne,K,ze,ft,te=!1){if(o===!1)return K;if(ne!==null){if(e[ne]!==void 0)return e[ne];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ne+"'")}let Pe=K;return K===6403&&(ze===5126&&(Pe=33326),ze===5131&&(Pe=33325),ze===5121&&(Pe=33321)),K===33319&&(ze===5126&&(Pe=33328),ze===5131&&(Pe=33327),ze===5121&&(Pe=33323)),K===6408&&(ze===5126&&(Pe=34836),ze===5131&&(Pe=34842),ze===5121&&(Pe=ft===Ji&&te===!1?35907:32856),ze===32819&&(Pe=32854),ze===32820&&(Pe=32855)),(Pe===33325||Pe===33326||Pe===33327||Pe===33328||Pe===34842||Pe===34836)&&t.get("EXT_color_buffer_float"),Pe}function P(ne,K,ze){return w(ne,ze)===!0||ne.isFramebufferTexture&&ne.minFilter!==Ar&&ne.minFilter!==ir?Math.log2(Math.max(K.width,K.height))+1:ne.mipmaps!==void 0&&ne.mipmaps.length>0?ne.mipmaps.length:ne.isCompressedTexture&&Array.isArray(ne.image)?K.mipmaps.length:1}function A(ne){return ne===Ar||ne===T3||ne===Y1?9728:9729}function k(ne){let K=ne.target;K.removeEventListener("dispose",k),O(K),K.isVideoTexture&&f.delete(K)}function I(ne){let K=ne.target;K.removeEventListener("dispose",I),F(K)}function O(ne){let K=r.get(ne);if(K.__webglInit===void 0)return;let ze=ne.source,ft=m.get(ze);if(ft){let te=ft[K.__cacheKey];te.usedTimes--,te.usedTimes===0&&D(ne),Object.keys(ft).length===0&&m.delete(ze)}r.remove(ne)}function D(ne){let K=r.get(ne);e.deleteTexture(K.__webglTexture);let ze=ne.source,ft=m.get(ze);delete ft[K.__cacheKey],s.memory.textures--}function F(ne){let K=ne.texture,ze=r.get(ne),ft=r.get(K);if(ft.__webglTexture!==void 0&&(e.deleteTexture(ft.__webglTexture),s.memory.textures--),ne.depthTexture&&ne.depthTexture.dispose(),ne.isWebGLCubeRenderTarget)for(let te=0;te<6;te++)e.deleteFramebuffer(ze.__webglFramebuffer[te]),ze.__webglDepthbuffer&&e.deleteRenderbuffer(ze.__webglDepthbuffer[te]);else{if(e.deleteFramebuffer(ze.__webglFramebuffer),ze.__webglDepthbuffer&&e.deleteRenderbuffer(ze.__webglDepthbuffer),ze.__webglMultisampledFramebuffer&&e.deleteFramebuffer(ze.__webglMultisampledFramebuffer),ze.__webglColorRenderbuffer)for(let te=0;te<ze.__webglColorRenderbuffer.length;te++)ze.__webglColorRenderbuffer[te]&&e.deleteRenderbuffer(ze.__webglColorRenderbuffer[te]);ze.__webglDepthRenderbuffer&&e.deleteRenderbuffer(ze.__webglDepthRenderbuffer)}if(ne.isWebGLMultipleRenderTargets)for(let te=0,Pe=K.length;te<Pe;te++){let Te=r.get(K[te]);Te.__webglTexture&&(e.deleteTexture(Te.__webglTexture),s.memory.textures--),r.remove(K[te])}r.remove(K),r.remove(ne)}let U=0;function z(){U=0}function B(){let ne=U;return ne>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ne+" texture units while this GPU supports only "+l),U+=1,ne}function W(ne){let K=[];return K.push(ne.wrapS),K.push(ne.wrapT),K.push(ne.wrapR||0),K.push(ne.magFilter),K.push(ne.minFilter),K.push(ne.anisotropy),K.push(ne.internalFormat),K.push(ne.format),K.push(ne.type),K.push(ne.generateMipmaps),K.push(ne.premultiplyAlpha),K.push(ne.flipY),K.push(ne.unpackAlignment),K.push(ne.encoding),K.join()}function R(ne,K){let ze=r.get(ne);if(ne.isVideoTexture&&Ye(ne),ne.isRenderTargetTexture===!1&&ne.version>0&&ze.__version!==ne.version){let ft=ne.image;if(ft===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ft.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{fe(ze,ne,K);return}}i.bindTexture(3553,ze.__webglTexture,33984+K)}function $(ne,K){let ze=r.get(ne);if(ne.version>0&&ze.__version!==ne.version){fe(ze,ne,K);return}i.bindTexture(35866,ze.__webglTexture,33984+K)}function q(ne,K){let ze=r.get(ne);if(ne.version>0&&ze.__version!==ne.version){fe(ze,ne,K);return}i.bindTexture(32879,ze.__webglTexture,33984+K)}function Z(ne,K){let ze=r.get(ne);if(ne.version>0&&ze.__version!==ne.version){de(ze,ne,K);return}i.bindTexture(34067,ze.__webglTexture,33984+K)}let G={[ql]:10497,[Zr]:33071,[L_]:33648},X={[Ar]:9728,[T3]:9984,[Y1]:9986,[ir]:9729,[QH]:9985,[Hh]:9987};function J(ne,K,ze){if(ze?(e.texParameteri(ne,10242,G[K.wrapS]),e.texParameteri(ne,10243,G[K.wrapT]),(ne===32879||ne===35866)&&e.texParameteri(ne,32882,G[K.wrapR]),e.texParameteri(ne,10240,X[K.magFilter]),e.texParameteri(ne,10241,X[K.minFilter])):(e.texParameteri(ne,10242,33071),e.texParameteri(ne,10243,33071),(ne===32879||ne===35866)&&e.texParameteri(ne,32882,33071),(K.wrapS!==Zr||K.wrapT!==Zr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(ne,10240,A(K.magFilter)),e.texParameteri(ne,10241,A(K.minFilter)),K.minFilter!==Ar&&K.minFilter!==ir&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){let ft=t.get("EXT_texture_filter_anisotropic");if(K.magFilter===Ar||K.minFilter!==Y1&&K.minFilter!==Hh||K.type===Pa&&t.has("OES_texture_float_linear")===!1||o===!1&&K.type===au&&t.has("OES_texture_half_float_linear")===!1)return;(K.anisotropy>1||r.get(K).__currentAnisotropy)&&(e.texParameterf(ne,ft.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,a.getMaxAnisotropy())),r.get(K).__currentAnisotropy=K.anisotropy)}}function pe(ne,K){let ze=!1;ne.__webglInit===void 0&&(ne.__webglInit=!0,K.addEventListener("dispose",k));let ft=K.source,te=m.get(ft);te===void 0&&(te={},m.set(ft,te));let Pe=W(K);if(Pe!==ne.__cacheKey){te[Pe]===void 0&&(te[Pe]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,ze=!0),te[Pe].usedTimes++;let Te=te[ne.__cacheKey];Te!==void 0&&(te[ne.__cacheKey].usedTimes--,Te.usedTimes===0&&D(K)),ne.__cacheKey=Pe,ne.__webglTexture=te[Pe].texture}return ze}function fe(ne,K,ze){let ft=3553;(K.isDataArrayTexture||K.isCompressedArrayTexture)&&(ft=35866),K.isData3DTexture&&(ft=32879);let te=pe(ne,K),Pe=K.source;i.bindTexture(ft,ne.__webglTexture,33984+ze);let Te=r.get(Pe);if(Pe.version!==Te.__version||te===!0){i.activeTexture(33984+ze),e.pixelStorei(37440,K.flipY),e.pixelStorei(37441,K.premultiplyAlpha),e.pixelStorei(3317,K.unpackAlignment),e.pixelStorei(37443,0);let Be=S(K)&&x(K.image)===!1,Le=b(K.image,Be,!1,c);Le=xt(K,Le);let jt=x(Le)||o,kt=n.convert(K.format,K.encoding),Qt=n.convert(K.type),ct=M(K.internalFormat,kt,Qt,K.encoding,K.isVideoTexture);J(ft,K,jt);let mt,Et=K.mipmaps,Gt=o&&K.isVideoTexture!==!0,Ht=Te.__version===void 0||te===!0,Ee=P(K,Le,jt);if(K.isDepthTexture)ct=6402,o?K.type===Pa?ct=36012:K.type===Yl?ct=33190:K.type===Kc?ct=35056:ct=33189:K.type===Pa&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),K.format===Zc&&ct===6402&&K.type!==iR&&K.type!==Yl&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),K.type=Yl,Qt=n.convert(K.type)),K.format===hd&&ct===6402&&(ct=34041,K.type!==Kc&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),K.type=Kc,Qt=n.convert(K.type))),Ht&&(Gt?i.texStorage2D(3553,1,ct,Le.width,Le.height):i.texImage2D(3553,0,ct,Le.width,Le.height,0,kt,Qt,null));else if(K.isDataTexture)if(Et.length>0&&jt){Gt&&Ht&&i.texStorage2D(3553,Ee,ct,Et[0].width,Et[0].height);for(let nt=0,St=Et.length;nt<St;nt++)mt=Et[nt],Gt?i.texSubImage2D(3553,nt,0,0,mt.width,mt.height,kt,Qt,mt.data):i.texImage2D(3553,nt,ct,mt.width,mt.height,0,kt,Qt,mt.data);K.generateMipmaps=!1}else Gt?(Ht&&i.texStorage2D(3553,Ee,ct,Le.width,Le.height),i.texSubImage2D(3553,0,0,0,Le.width,Le.height,kt,Qt,Le.data)):i.texImage2D(3553,0,ct,Le.width,Le.height,0,kt,Qt,Le.data);else if(K.isCompressedTexture)if(K.isCompressedArrayTexture){Gt&&Ht&&i.texStorage3D(35866,Ee,ct,Et[0].width,Et[0].height,Le.depth);for(let nt=0,St=Et.length;nt<St;nt++)mt=Et[nt],K.format!==Ja?kt!==null?Gt?i.compressedTexSubImage3D(35866,nt,0,0,0,mt.width,mt.height,Le.depth,kt,mt.data,0,0):i.compressedTexImage3D(35866,nt,ct,mt.width,mt.height,Le.depth,0,mt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?i.texSubImage3D(35866,nt,0,0,0,mt.width,mt.height,Le.depth,kt,Qt,mt.data):i.texImage3D(35866,nt,ct,mt.width,mt.height,Le.depth,0,kt,Qt,mt.data)}else{Gt&&Ht&&i.texStorage2D(3553,Ee,ct,Et[0].width,Et[0].height);for(let nt=0,St=Et.length;nt<St;nt++)mt=Et[nt],K.format!==Ja?kt!==null?Gt?i.compressedTexSubImage2D(3553,nt,0,0,mt.width,mt.height,kt,mt.data):i.compressedTexImage2D(3553,nt,ct,mt.width,mt.height,0,mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?i.texSubImage2D(3553,nt,0,0,mt.width,mt.height,kt,Qt,mt.data):i.texImage2D(3553,nt,ct,mt.width,mt.height,0,kt,Qt,mt.data)}else if(K.isDataArrayTexture)Gt?(Ht&&i.texStorage3D(35866,Ee,ct,Le.width,Le.height,Le.depth),i.texSubImage3D(35866,0,0,0,0,Le.width,Le.height,Le.depth,kt,Qt,Le.data)):i.texImage3D(35866,0,ct,Le.width,Le.height,Le.depth,0,kt,Qt,Le.data);else if(K.isData3DTexture)Gt?(Ht&&i.texStorage3D(32879,Ee,ct,Le.width,Le.height,Le.depth),i.texSubImage3D(32879,0,0,0,0,Le.width,Le.height,Le.depth,kt,Qt,Le.data)):i.texImage3D(32879,0,ct,Le.width,Le.height,Le.depth,0,kt,Qt,Le.data);else if(K.isFramebufferTexture){if(Ht)if(Gt)i.texStorage2D(3553,Ee,ct,Le.width,Le.height);else{let nt=Le.width,St=Le.height;for(let $t=0;$t<Ee;$t++)i.texImage2D(3553,$t,ct,nt,St,0,kt,Qt,null),nt>>=1,St>>=1}}else if(Et.length>0&&jt){Gt&&Ht&&i.texStorage2D(3553,Ee,ct,Et[0].width,Et[0].height);for(let nt=0,St=Et.length;nt<St;nt++)mt=Et[nt],Gt?i.texSubImage2D(3553,nt,0,0,kt,Qt,mt):i.texImage2D(3553,nt,ct,kt,Qt,mt);K.generateMipmaps=!1}else Gt?(Ht&&i.texStorage2D(3553,Ee,ct,Le.width,Le.height),i.texSubImage2D(3553,0,0,0,kt,Qt,Le)):i.texImage2D(3553,0,ct,kt,Qt,Le);w(K,jt)&&E(ft),Te.__version=Pe.version,K.onUpdate&&K.onUpdate(K)}ne.__version=K.version}function de(ne,K,ze){if(K.image.length!==6)return;let ft=pe(ne,K),te=K.source;i.bindTexture(34067,ne.__webglTexture,33984+ze);let Pe=r.get(te);if(te.version!==Pe.__version||ft===!0){i.activeTexture(33984+ze),e.pixelStorei(37440,K.flipY),e.pixelStorei(37441,K.premultiplyAlpha),e.pixelStorei(3317,K.unpackAlignment),e.pixelStorei(37443,0);let Te=K.isCompressedTexture||K.image[0].isCompressedTexture,Be=K.image[0]&&K.image[0].isDataTexture,Le=[];for(let nt=0;nt<6;nt++)!Te&&!Be?Le[nt]=b(K.image[nt],!1,!0,u):Le[nt]=Be?K.image[nt].image:K.image[nt],Le[nt]=xt(K,Le[nt]);let jt=Le[0],kt=x(jt)||o,Qt=n.convert(K.format,K.encoding),ct=n.convert(K.type),mt=M(K.internalFormat,Qt,ct,K.encoding),Et=o&&K.isVideoTexture!==!0,Gt=Pe.__version===void 0||ft===!0,Ht=P(K,jt,kt);J(34067,K,kt);let Ee;if(Te){Et&&Gt&&i.texStorage2D(34067,Ht,mt,jt.width,jt.height);for(let nt=0;nt<6;nt++){Ee=Le[nt].mipmaps;for(let St=0;St<Ee.length;St++){let $t=Ee[St];K.format!==Ja?Qt!==null?Et?i.compressedTexSubImage2D(34069+nt,St,0,0,$t.width,$t.height,Qt,$t.data):i.compressedTexImage2D(34069+nt,St,mt,$t.width,$t.height,0,$t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Et?i.texSubImage2D(34069+nt,St,0,0,$t.width,$t.height,Qt,ct,$t.data):i.texImage2D(34069+nt,St,mt,$t.width,$t.height,0,Qt,ct,$t.data)}}}else{Ee=K.mipmaps,Et&&Gt&&(Ee.length>0&&Ht++,i.texStorage2D(34067,Ht,mt,Le[0].width,Le[0].height));for(let nt=0;nt<6;nt++)if(Be){Et?i.texSubImage2D(34069+nt,0,0,0,Le[nt].width,Le[nt].height,Qt,ct,Le[nt].data):i.texImage2D(34069+nt,0,mt,Le[nt].width,Le[nt].height,0,Qt,ct,Le[nt].data);for(let St=0;St<Ee.length;St++){let $t=Ee[St].image[nt].image;Et?i.texSubImage2D(34069+nt,St+1,0,0,$t.width,$t.height,Qt,ct,$t.data):i.texImage2D(34069+nt,St+1,mt,$t.width,$t.height,0,Qt,ct,$t.data)}}else{Et?i.texSubImage2D(34069+nt,0,0,0,Qt,ct,Le[nt]):i.texImage2D(34069+nt,0,mt,Qt,ct,Le[nt]);for(let St=0;St<Ee.length;St++){let $t=Ee[St];Et?i.texSubImage2D(34069+nt,St+1,0,0,Qt,ct,$t.image[nt]):i.texImage2D(34069+nt,St+1,mt,Qt,ct,$t.image[nt])}}}w(K,kt)&&E(34067),Pe.__version=te.version,K.onUpdate&&K.onUpdate(K)}ne.__version=K.version}function ge(ne,K,ze,ft,te){let Pe=n.convert(ze.format,ze.encoding),Te=n.convert(ze.type),Be=M(ze.internalFormat,Pe,Te,ze.encoding);r.get(K).__hasExternalTextures||(te===32879||te===35866?i.texImage3D(te,0,Be,K.width,K.height,K.depth,0,Pe,Te,null):i.texImage2D(te,0,Be,K.width,K.height,0,Pe,Te,null)),i.bindFramebuffer(36160,ne),Oe(K)?h.framebufferTexture2DMultisampleEXT(36160,ft,te,r.get(ze).__webglTexture,0,at(K)):(te===3553||te>=34069&&te<=34074)&&e.framebufferTexture2D(36160,ft,te,r.get(ze).__webglTexture,0),i.bindFramebuffer(36160,null)}function me(ne,K,ze){if(e.bindRenderbuffer(36161,ne),K.depthBuffer&&!K.stencilBuffer){let ft=33189;if(ze||Oe(K)){let te=K.depthTexture;te&&te.isDepthTexture&&(te.type===Pa?ft=36012:te.type===Yl&&(ft=33190));let Pe=at(K);Oe(K)?h.renderbufferStorageMultisampleEXT(36161,Pe,ft,K.width,K.height):e.renderbufferStorageMultisample(36161,Pe,ft,K.width,K.height)}else e.renderbufferStorage(36161,ft,K.width,K.height);e.framebufferRenderbuffer(36160,36096,36161,ne)}else if(K.depthBuffer&&K.stencilBuffer){let ft=at(K);ze&&Oe(K)===!1?e.renderbufferStorageMultisample(36161,ft,35056,K.width,K.height):Oe(K)?h.renderbufferStorageMultisampleEXT(36161,ft,35056,K.width,K.height):e.renderbufferStorage(36161,34041,K.width,K.height),e.framebufferRenderbuffer(36160,33306,36161,ne)}else{let ft=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let te=0;te<ft.length;te++){let Pe=ft[te],Te=n.convert(Pe.format,Pe.encoding),Be=n.convert(Pe.type),Le=M(Pe.internalFormat,Te,Be,Pe.encoding),jt=at(K);ze&&Oe(K)===!1?e.renderbufferStorageMultisample(36161,jt,Le,K.width,K.height):Oe(K)?h.renderbufferStorageMultisampleEXT(36161,jt,Le,K.width,K.height):e.renderbufferStorage(36161,Le,K.width,K.height)}}e.bindRenderbuffer(36161,null)}function ke(ne,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,ne),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(K.depthTexture).__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),R(K.depthTexture,0);let ze=r.get(K.depthTexture).__webglTexture,ft=at(K);if(K.depthTexture.format===Zc)Oe(K)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,ze,0,ft):e.framebufferTexture2D(36160,36096,3553,ze,0);else if(K.depthTexture.format===hd)Oe(K)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,ze,0,ft):e.framebufferTexture2D(36160,33306,3553,ze,0);else throw new Error("Unknown depthTexture format")}function ce(ne){let K=r.get(ne),ze=ne.isWebGLCubeRenderTarget===!0;if(ne.depthTexture&&!K.__autoAllocateDepthBuffer){if(ze)throw new Error("target.depthTexture not supported in Cube render targets");ke(K.__webglFramebuffer,ne)}else if(ze){K.__webglDepthbuffer=[];for(let ft=0;ft<6;ft++)i.bindFramebuffer(36160,K.__webglFramebuffer[ft]),K.__webglDepthbuffer[ft]=e.createRenderbuffer(),me(K.__webglDepthbuffer[ft],ne,!1)}else i.bindFramebuffer(36160,K.__webglFramebuffer),K.__webglDepthbuffer=e.createRenderbuffer(),me(K.__webglDepthbuffer,ne,!1);i.bindFramebuffer(36160,null)}function le(ne,K,ze){let ft=r.get(ne);K!==void 0&&ge(ft.__webglFramebuffer,ne,ne.texture,36064,3553),ze!==void 0&&ce(ne)}function xe(ne){let K=ne.texture,ze=r.get(ne),ft=r.get(K);ne.addEventListener("dispose",I),ne.isWebGLMultipleRenderTargets!==!0&&(ft.__webglTexture===void 0&&(ft.__webglTexture=e.createTexture()),ft.__version=K.version,s.memory.textures++);let te=ne.isWebGLCubeRenderTarget===!0,Pe=ne.isWebGLMultipleRenderTargets===!0,Te=x(ne)||o;if(te){ze.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)ze.__webglFramebuffer[Be]=e.createFramebuffer()}else{if(ze.__webglFramebuffer=e.createFramebuffer(),Pe)if(a.drawBuffers){let Be=ne.texture;for(let Le=0,jt=Be.length;Le<jt;Le++){let kt=r.get(Be[Le]);kt.__webglTexture===void 0&&(kt.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&ne.samples>0&&Oe(ne)===!1){let Be=Pe?K:[K];ze.__webglMultisampledFramebuffer=e.createFramebuffer(),ze.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,ze.__webglMultisampledFramebuffer);for(let Le=0;Le<Be.length;Le++){let jt=Be[Le];ze.__webglColorRenderbuffer[Le]=e.createRenderbuffer(),e.bindRenderbuffer(36161,ze.__webglColorRenderbuffer[Le]);let kt=n.convert(jt.format,jt.encoding),Qt=n.convert(jt.type),ct=M(jt.internalFormat,kt,Qt,jt.encoding,ne.isXRRenderTarget===!0),mt=at(ne);e.renderbufferStorageMultisample(36161,mt,ct,ne.width,ne.height),e.framebufferRenderbuffer(36160,36064+Le,36161,ze.__webglColorRenderbuffer[Le])}e.bindRenderbuffer(36161,null),ne.depthBuffer&&(ze.__webglDepthRenderbuffer=e.createRenderbuffer(),me(ze.__webglDepthRenderbuffer,ne,!0)),i.bindFramebuffer(36160,null)}}if(te){i.bindTexture(34067,ft.__webglTexture),J(34067,K,Te);for(let Be=0;Be<6;Be++)ge(ze.__webglFramebuffer[Be],ne,K,36064,34069+Be);w(K,Te)&&E(34067),i.unbindTexture()}else if(Pe){let Be=ne.texture;for(let Le=0,jt=Be.length;Le<jt;Le++){let kt=Be[Le],Qt=r.get(kt);i.bindTexture(3553,Qt.__webglTexture),J(3553,kt,Te),ge(ze.__webglFramebuffer,ne,kt,36064+Le,3553),w(kt,Te)&&E(3553)}i.unbindTexture()}else{let Be=3553;(ne.isWebGL3DRenderTarget||ne.isWebGLArrayRenderTarget)&&(o?Be=ne.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(Be,ft.__webglTexture),J(Be,K,Te),ge(ze.__webglFramebuffer,ne,K,36064,Be),w(K,Te)&&E(Be),i.unbindTexture()}ne.depthBuffer&&ce(ne)}function Ne(ne){let K=x(ne)||o,ze=ne.isWebGLMultipleRenderTargets===!0?ne.texture:[ne.texture];for(let ft=0,te=ze.length;ft<te;ft++){let Pe=ze[ft];if(w(Pe,K)){let Te=ne.isWebGLCubeRenderTarget?34067:3553,Be=r.get(Pe).__webglTexture;i.bindTexture(Te,Be),E(Te),i.unbindTexture()}}}function pt(ne){if(o&&ne.samples>0&&Oe(ne)===!1){let K=ne.isWebGLMultipleRenderTargets?ne.texture:[ne.texture],ze=ne.width,ft=ne.height,te=16384,Pe=[],Te=ne.stencilBuffer?33306:36096,Be=r.get(ne),Le=ne.isWebGLMultipleRenderTargets===!0;if(Le)for(let jt=0;jt<K.length;jt++)i.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+jt,36161,null),i.bindFramebuffer(36160,Be.__webglFramebuffer),e.framebufferTexture2D(36009,36064+jt,3553,null,0);i.bindFramebuffer(36008,Be.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,Be.__webglFramebuffer);for(let jt=0;jt<K.length;jt++){Pe.push(36064+jt),ne.depthBuffer&&Pe.push(Te);let kt=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(kt===!1&&(ne.depthBuffer&&(te|=256),ne.stencilBuffer&&(te|=1024)),Le&&e.framebufferRenderbuffer(36008,36064,36161,Be.__webglColorRenderbuffer[jt]),kt===!0&&(e.invalidateFramebuffer(36008,[Te]),e.invalidateFramebuffer(36009,[Te])),Le){let Qt=r.get(K[jt]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,Qt,0)}e.blitFramebuffer(0,0,ze,ft,0,0,ze,ft,te,9728),p&&e.invalidateFramebuffer(36008,Pe)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),Le)for(let jt=0;jt<K.length;jt++){i.bindFramebuffer(36160,Be.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+jt,36161,Be.__webglColorRenderbuffer[jt]);let kt=r.get(K[jt]).__webglTexture;i.bindFramebuffer(36160,Be.__webglFramebuffer),e.framebufferTexture2D(36009,36064+jt,3553,kt,0)}i.bindFramebuffer(36009,Be.__webglMultisampledFramebuffer)}}function at(ne){return Math.min(d,ne.samples)}function Oe(ne){let K=r.get(ne);return o&&ne.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function Ye(ne){let K=s.render.frame;f.get(ne)!==K&&(f.set(ne,K),ne.update())}function xt(ne,K){let ze=ne.encoding,ft=ne.format,te=ne.type;return ne.isCompressedTexture===!0||ne.isVideoTexture===!0||ne.format===z_||ze!==To&&(ze===Ji?o===!1?t.has("EXT_sRGB")===!0&&ft===Ja?(ne.format=z_,ne.minFilter=ir,ne.generateMipmaps=!1):K=cR.sRGBToLinear(K):(ft!==Ja||te!==Un)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ze)),K}this.allocateTextureUnit=B,this.resetTextureUnits=z,this.setTexture2D=R,this.setTexture2DArray=$,this.setTexture3D=q,this.setTextureCube=Z,this.rebindTextures=le,this.setupRenderTarget=xe,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=Oe}function wZ(e,t,i){let r=i.isWebGL2;function a(n,s=null){let o;if(n===Un)return 5121;if(n===iG)return 32819;if(n===rG)return 32820;if(n===JH)return 5120;if(n===eG)return 5122;if(n===iR)return 5123;if(n===tG)return 5124;if(n===Yl)return 5125;if(n===Pa)return 5126;if(n===au)return r?5131:(o=t.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(n===aG)return 6406;if(n===Ja)return 6408;if(n===nG)return 6409;if(n===sG)return 6410;if(n===Zc)return 6402;if(n===hd)return 34041;if(n===z_)return o=t.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(n===oG)return 6403;if(n===lG)return 36244;if(n===ay)return 33319;if(n===uG)return 33320;if(n===rR)return 36249;if(n===X1||n===K1||n===Z1||n===Q1)if(s===Ji)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===X1)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===K1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Z1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Q1)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===X1)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===K1)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Z1)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Q1)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===k3||n===O3||n===D3||n===I3)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===k3)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===O3)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===D3)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===I3)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===cG)return o=t.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===L3||n===B3)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(n===L3)return s===Ji?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===B3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===z3||n===R3||n===N3||n===V3||n===F3||n===j3||n===$3||n===U3||n===W3||n===H3||n===G3||n===q3||n===Y3||n===X3)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(n===z3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===R3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===N3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===V3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===F3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===j3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===$3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===U3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===W3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===H3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===G3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===q3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Y3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===X3)return s===Ji?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===J1)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(n===J1)return s===Ji?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(n===dG||n===K3||n===Z3||n===Q3)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(n===J1)return o.COMPRESSED_RED_RGTC1_EXT;if(n===K3)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Z3)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Q3)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Kc?r?34042:(o=t.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):e[n]!==void 0?e[n]:null}return{convert:a}}var xZ=class extends Bn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Kl=class extends Tr{constructor(){super(),this.isGroup=!0,this.type="Group"}},SZ={type:"move"},Mw=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new V,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new V),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new V,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new V),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,a=null,n=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(l&&e.hand){n=!0;for(let f of e.hand.values()){let v=t.getJointPose(f,i),m=this._getHandJoint(l,f);v!==null&&(m.matrix.fromArray(v.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.jointRadius=v.radius),m.visible=v!==null}let u=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],d=u.position.distanceTo(c.position),h=.02,p=.005;l.inputState.pinching&&d>h+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&d<=h-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else o!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,i),a!==null&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1));s!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&a!==null&&(r=a),r!==null&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(SZ)))}return s!==null&&(s.visible=r!==null),o!==null&&(o.visible=a!==null),l!==null&&(l.visible=n!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let i=new Kl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}},qh=class extends aa{constructor(e,t,i,r,a,n,s,o,l,u){if(u=u!==void 0?u:Zc,u!==Zc&&u!==hd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Zc&&(i=Yl),i===void 0&&u===hd&&(i=Kc),super(null,r,a,n,s,o,u,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=s!==void 0?s:Ar,this.minFilter=o!==void 0?o:Ar,this.flipY=!1,this.generateMipmaps=!1}},CZ=class extends On{constructor(e,t){super();let i=this,r=null,a=1,n=null,s="local-floor",o=1,l=null,u=null,c=null,d=null,h=null,p=null,f=t.getContextAttributes(),v=null,m=null,g=[],y=[],b=new Set,x=new Map,S=new Bn;S.layers.enable(1),S.viewport=new Wi;let w=new Bn;w.layers.enable(2),w.viewport=new Wi;let E=[S,w],M=new xZ;M.layers.enable(1),M.layers.enable(2);let P=null,A=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let q=g[$];return q===void 0&&(q=new Mw,g[$]=q),q.getTargetRaySpace()},this.getControllerGrip=function($){let q=g[$];return q===void 0&&(q=new Mw,g[$]=q),q.getGripSpace()},this.getHand=function($){let q=g[$];return q===void 0&&(q=new Mw,g[$]=q),q.getHandSpace()};function k($){let q=y.indexOf($.inputSource);if(q===-1)return;let Z=g[q];Z!==void 0&&Z.dispatchEvent({type:$.type,data:$.inputSource})}function I(){r.removeEventListener("select",k),r.removeEventListener("selectstart",k),r.removeEventListener("selectend",k),r.removeEventListener("squeeze",k),r.removeEventListener("squeezestart",k),r.removeEventListener("squeezeend",k),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",O);for(let $=0;$<g.length;$++){let q=y[$];q!==null&&(y[$]=null,g[$].disconnect(q))}P=null,A=null,e.setRenderTarget(v),h=null,d=null,c=null,r=null,m=null,R.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){a=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){s=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||n},this.setReferenceSpace=function($){l=$},this.getBaseLayer=function(){return d!==null?d:h},this.getBinding=function(){return c},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function($){if(r=$,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",k),r.addEventListener("selectstart",k),r.addEventListener("selectend",k),r.addEventListener("squeeze",k),r.addEventListener("squeezestart",k),r.addEventListener("squeezeend",k),r.addEventListener("end",I),r.addEventListener("inputsourceschange",O),f.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let q={antialias:r.renderState.layers===void 0?f.antialias:!0,alpha:f.alpha,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:a};h=new XRWebGLLayer(r,t,q),r.updateRenderState({baseLayer:h}),m=new Mr(h.framebufferWidth,h.framebufferHeight,{format:Ja,type:Un,encoding:e.outputEncoding,stencilBuffer:f.stencil})}else{let q=null,Z=null,G=null;f.depth&&(G=f.stencil?35056:33190,q=f.stencil?hd:Zc,Z=f.stencil?Kc:Yl);let X={colorFormat:32856,depthFormat:G,scaleFactor:a};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(X),r.updateRenderState({layers:[d]}),m=new Mr(d.textureWidth,d.textureHeight,{format:Ja,type:Un,depthTexture:new qh(d.textureWidth,d.textureHeight,Z,void 0,void 0,void 0,void 0,void 0,void 0,q),stencilBuffer:f.stencil,encoding:e.outputEncoding,samples:f.antialias?4:0});let J=e.properties.get(m);J.__ignoreDepthValues=d.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(o),l=null,n=await r.requestReferenceSpace(s),R.setContext(r),R.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function O($){for(let q=0;q<$.removed.length;q++){let Z=$.removed[q],G=y.indexOf(Z);G>=0&&(y[G]=null,g[G].disconnect(Z))}for(let q=0;q<$.added.length;q++){let Z=$.added[q],G=y.indexOf(Z);if(G===-1){for(let J=0;J<g.length;J++)if(J>=y.length){y.push(Z),G=J;break}else if(y[J]===null){y[J]=Z,G=J;break}if(G===-1)break}let X=g[G];X&&X.connect(Z)}}let D=new V,F=new V;function U($,q,Z){D.setFromMatrixPosition(q.matrixWorld),F.setFromMatrixPosition(Z.matrixWorld);let G=D.distanceTo(F),X=q.projectionMatrix.elements,J=Z.projectionMatrix.elements,pe=X[14]/(X[10]-1),fe=X[14]/(X[10]+1),de=(X[9]+1)/X[5],ge=(X[9]-1)/X[5],me=(X[8]-1)/X[0],ke=(J[8]+1)/J[0],ce=pe*me,le=pe*ke,xe=G/(-me+ke),Ne=xe*-me;q.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(Ne),$.translateZ(xe),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();let pt=pe+xe,at=fe+xe,Oe=ce-Ne,Ye=le+(G-Ne),xt=de*fe/at*pt,ne=ge*fe/at*pt;$.projectionMatrix.makePerspective(Oe,Ye,xt,ne,pt,at)}function z($,q){q===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(q.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(r===null)return;M.near=w.near=S.near=$.near,M.far=w.far=S.far=$.far,(P!==M.near||A!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),P=M.near,A=M.far);let q=$.parent,Z=M.cameras;z(M,q);for(let X=0;X<Z.length;X++)z(Z[X],q);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),$.matrix.copy(M.matrix),$.matrix.decompose($.position,$.quaternion,$.scale);let G=$.children;for(let X=0,J=G.length;X<J;X++)G[X].updateMatrixWorld(!0);Z.length===2?U(M,S,w):M.projectionMatrix.copy(S.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(!(d===null&&h===null))return o},this.setFoveation=function($){o=$,d!==null&&(d.fixedFoveation=$),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=$)},this.getPlanes=function(){return b};let B=null;function W($,q){if(u=q.getViewerPose(l||n),p=q,u!==null){let Z=u.views;h!==null&&(e.setRenderTargetFramebuffer(m,h.framebuffer),e.setRenderTarget(m));let G=!1;Z.length!==M.cameras.length&&(M.cameras.length=0,G=!0);for(let X=0;X<Z.length;X++){let J=Z[X],pe=null;if(h!==null)pe=h.getViewport(J);else{let de=c.getViewSubImage(d,J);pe=de.viewport,X===0&&(e.setRenderTargetTextures(m,de.colorTexture,d.ignoreDepthValues?void 0:de.depthStencilTexture),e.setRenderTarget(m))}let fe=E[X];fe===void 0&&(fe=new Bn,fe.layers.enable(X),fe.viewport=new Wi,E[X]=fe),fe.matrix.fromArray(J.transform.matrix),fe.projectionMatrix.fromArray(J.projectionMatrix),fe.viewport.set(pe.x,pe.y,pe.width,pe.height),X===0&&M.matrix.copy(fe.matrix),G===!0&&M.cameras.push(fe)}}for(let Z=0;Z<g.length;Z++){let G=y[Z],X=g[Z];G!==null&&X!==void 0&&X.update(G,q,l||n)}if(B&&B($,q),q.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:q.detectedPlanes});let Z=null;for(let G of b)q.detectedPlanes.has(G)||(Z===null&&(Z=[]),Z.push(G));if(Z!==null)for(let G of Z)b.delete(G),x.delete(G),i.dispatchEvent({type:"planeremoved",data:G});for(let G of q.detectedPlanes)if(!b.has(G))b.add(G),x.set(G,q.lastChangedTime),i.dispatchEvent({type:"planeadded",data:G});else{let X=x.get(G);G.lastChangedTime>X&&(x.set(G,G.lastChangedTime),i.dispatchEvent({type:"planechanged",data:G}))}}p=null}let R=new mR;R.setAnimationLoop(W),this.setAnimationLoop=function($){B=$},this.dispose=function(){}}};function _Z(e,t){function i(v,m){m.color.getRGB(v.fogColor.value,fR(e)),m.isFog?(v.fogNear.value=m.near,v.fogFar.value=m.far):m.isFogExp2&&(v.fogDensity.value=m.density)}function r(v,m,g,y,b){m.isMeshBasicMaterial||m.isMeshLambertMaterial?a(v,m):m.isMeshToonMaterial?(a(v,m),c(v,m)):m.isMeshPhongMaterial?(a(v,m),u(v,m)):m.isMeshStandardMaterial?(a(v,m),d(v,m),m.isMeshPhysicalMaterial&&h(v,m,b)):m.isMeshMatcapMaterial?(a(v,m),p(v,m)):m.isMeshDepthMaterial?a(v,m):m.isMeshDistanceMaterial?(a(v,m),f(v,m)):m.isMeshNormalMaterial?a(v,m):m.isLineBasicMaterial?(n(v,m),m.isLineDashedMaterial&&s(v,m)):m.isPointsMaterial?o(v,m,g,y):m.isSpriteMaterial?l(v,m):m.isShadowMaterial?(v.color.value.copy(m.color),v.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function a(v,m){v.opacity.value=m.opacity,m.color&&v.diffuse.value.copy(m.color),m.emissive&&v.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.bumpMap&&(v.bumpMap.value=m.bumpMap,v.bumpScale.value=m.bumpScale,m.side===tn&&(v.bumpScale.value*=-1)),m.displacementMap&&(v.displacementMap.value=m.displacementMap,v.displacementScale.value=m.displacementScale,v.displacementBias.value=m.displacementBias),m.emissiveMap&&(v.emissiveMap.value=m.emissiveMap),m.normalMap&&(v.normalMap.value=m.normalMap,v.normalScale.value.copy(m.normalScale),m.side===tn&&v.normalScale.value.negate()),m.specularMap&&(v.specularMap.value=m.specularMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let g=t.get(m).envMap;if(g&&(v.envMap.value=g,v.flipEnvMap.value=g.isCubeTexture&&g.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=m.reflectivity,v.ior.value=m.ior,v.refractionRatio.value=m.refractionRatio),m.lightMap){v.lightMap.value=m.lightMap;let x=e.physicallyCorrectLights!==!0?Math.PI:1;v.lightMapIntensity.value=m.lightMapIntensity*x}m.aoMap&&(v.aoMap.value=m.aoMap,v.aoMapIntensity.value=m.aoMapIntensity);let y;m.map?y=m.map:m.specularMap?y=m.specularMap:m.displacementMap?y=m.displacementMap:m.normalMap?y=m.normalMap:m.bumpMap?y=m.bumpMap:m.roughnessMap?y=m.roughnessMap:m.metalnessMap?y=m.metalnessMap:m.alphaMap?y=m.alphaMap:m.emissiveMap?y=m.emissiveMap:m.clearcoatMap?y=m.clearcoatMap:m.clearcoatNormalMap?y=m.clearcoatNormalMap:m.clearcoatRoughnessMap?y=m.clearcoatRoughnessMap:m.iridescenceMap?y=m.iridescenceMap:m.iridescenceThicknessMap?y=m.iridescenceThicknessMap:m.specularIntensityMap?y=m.specularIntensityMap:m.specularColorMap?y=m.specularColorMap:m.transmissionMap?y=m.transmissionMap:m.thicknessMap?y=m.thicknessMap:m.sheenColorMap?y=m.sheenColorMap:m.sheenRoughnessMap&&(y=m.sheenRoughnessMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),v.uvTransform.value.copy(y.matrix));let b;m.aoMap?b=m.aoMap:m.lightMap&&(b=m.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uv2Transform.value.copy(b.matrix))}function n(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity}function s(v,m){v.dashSize.value=m.dashSize,v.totalSize.value=m.dashSize+m.gapSize,v.scale.value=m.scale}function o(v,m,g,y){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.size.value=m.size*g,v.scale.value=y*.5,m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let b;m.map?b=m.map:m.alphaMap&&(b=m.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),v.uvTransform.value.copy(b.matrix))}function l(v,m){v.diffuse.value.copy(m.color),v.opacity.value=m.opacity,v.rotation.value=m.rotation,m.map&&(v.map.value=m.map),m.alphaMap&&(v.alphaMap.value=m.alphaMap),m.alphaTest>0&&(v.alphaTest.value=m.alphaTest);let g;m.map?g=m.map:m.alphaMap&&(g=m.alphaMap),g!==void 0&&(g.matrixAutoUpdate===!0&&g.updateMatrix(),v.uvTransform.value.copy(g.matrix))}function u(v,m){v.specular.value.copy(m.specular),v.shininess.value=Math.max(m.shininess,1e-4)}function c(v,m){m.gradientMap&&(v.gradientMap.value=m.gradientMap)}function d(v,m){v.roughness.value=m.roughness,v.metalness.value=m.metalness,m.roughnessMap&&(v.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(v.metalnessMap.value=m.metalnessMap),t.get(m).envMap&&(v.envMapIntensity.value=m.envMapIntensity)}function h(v,m,g){v.ior.value=m.ior,m.sheen>0&&(v.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),v.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(v.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(v.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(v.clearcoat.value=m.clearcoat,v.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(v.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),v.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===tn&&v.clearcoatNormalScale.value.negate())),m.iridescence>0&&(v.iridescence.value=m.iridescence,v.iridescenceIOR.value=m.iridescenceIOR,v.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(v.iridescenceMap.value=m.iridescenceMap),m.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=m.iridescenceThicknessMap)),m.transmission>0&&(v.transmission.value=m.transmission,v.transmissionSamplerMap.value=g.texture,v.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(v.transmissionMap.value=m.transmissionMap),v.thickness.value=m.thickness,m.thicknessMap&&(v.thicknessMap.value=m.thicknessMap),v.attenuationDistance.value=m.attenuationDistance,v.attenuationColor.value.copy(m.attenuationColor)),v.specularIntensity.value=m.specularIntensity,v.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(v.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(v.specularColorMap.value=m.specularColorMap)}function p(v,m){m.matcap&&(v.matcap.value=m.matcap)}function f(v,m){v.referencePosition.value.copy(m.referencePosition),v.nearDistance.value=m.nearDistance,v.farDistance.value=m.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function MZ(e,t,i,r){let a={},n={},s=[],o=i.isWebGL2?e.getParameter(35375):0;function l(y,b){let x=b.program;r.uniformBlockBinding(y,x)}function u(y,b){let x=a[y.id];x===void 0&&(f(y),x=c(y),a[y.id]=x,y.addEventListener("dispose",m));let S=b.program;r.updateUBOMapping(y,S);let w=t.render.frame;n[y.id]!==w&&(h(y),n[y.id]=w)}function c(y){let b=d();y.__bindingPointIndex=b;let x=e.createBuffer(),S=y.__size,w=y.usage;return e.bindBuffer(35345,x),e.bufferData(35345,S,w),e.bindBuffer(35345,null),e.bindBufferBase(35345,b,x),x}function d(){for(let y=0;y<o;y++)if(s.indexOf(y)===-1)return s.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(y){let b=a[y.id],x=y.uniforms,S=y.__cache;e.bindBuffer(35345,b);for(let w=0,E=x.length;w<E;w++){let M=x[w];if(p(M,w,S)===!0){let P=M.__offset,A=Array.isArray(M.value)?M.value:[M.value],k=0;for(let I=0;I<A.length;I++){let O=A[I],D=v(O);typeof O=="number"?(M.__data[0]=O,e.bufferSubData(35345,P+k,M.__data)):O.isMatrix3?(M.__data[0]=O.elements[0],M.__data[1]=O.elements[1],M.__data[2]=O.elements[2],M.__data[3]=O.elements[0],M.__data[4]=O.elements[3],M.__data[5]=O.elements[4],M.__data[6]=O.elements[5],M.__data[7]=O.elements[0],M.__data[8]=O.elements[6],M.__data[9]=O.elements[7],M.__data[10]=O.elements[8],M.__data[11]=O.elements[0]):(O.toArray(M.__data,k),k+=D.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,P,M.__data)}}e.bindBuffer(35345,null)}function p(y,b,x){let S=y.value;if(x[b]===void 0){if(typeof S=="number")x[b]=S;else{let w=Array.isArray(S)?S:[S],E=[];for(let M=0;M<w.length;M++)E.push(w[M].clone());x[b]=E}return!0}else if(typeof S=="number"){if(x[b]!==S)return x[b]=S,!0}else{let w=Array.isArray(x[b])?x[b]:[x[b]],E=Array.isArray(S)?S:[S];for(let M=0;M<w.length;M++){let P=w[M];if(P.equals(E[M])===!1)return P.copy(E[M]),!0}}return!1}function f(y){let b=y.uniforms,x=0,S=16,w=0;for(let E=0,M=b.length;E<M;E++){let P=b[E],A={boundary:0,storage:0},k=Array.isArray(P.value)?P.value:[P.value];for(let I=0,O=k.length;I<O;I++){let D=k[I],F=v(D);A.boundary+=F.boundary,A.storage+=F.storage}if(P.__data=new Float32Array(A.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=x,E>0){w=x%S;let I=S-w;w!==0&&I-A.boundary<0&&(x+=S-w,P.__offset=x)}x+=A.storage}return w=x%S,w>0&&(x+=S-w),y.__size=x,y.__cache={},this}function v(y){let b={boundary:0,storage:0};return typeof y=="number"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function m(y){let b=y.target;b.removeEventListener("dispose",m);let x=s.indexOf(b.__bindingPointIndex);s.splice(x,1),e.deleteBuffer(a[b.id]),delete a[b.id],delete n[b.id]}function g(){for(let y in a)e.deleteBuffer(a[y]);s=[],a={},n={}}return{bind:l,update:u,dispose:g}}function EZ(){let e=em("canvas");return e.style.display="block",e}function xR(e={}){this.isWebGLRenderer=!0;let t=e.canvas!==void 0?e.canvas:EZ(),i=e.context!==void 0?e.context:null,r=e.depth!==void 0?e.depth:!0,a=e.stencil!==void 0?e.stencil:!0,n=e.antialias!==void 0?e.antialias:!1,s=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,o=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,l=e.powerPreference!==void 0?e.powerPreference:"default",u=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1,c;i!==null?c=i.getContextAttributes().alpha:c=e.alpha!==void 0?e.alpha:!1;let d=null,h=null,p=[],f=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=To,this.physicallyCorrectLights=!1,this.toneMapping=cl,this.toneMappingExposure=1;let v=this,m=!1,g=0,y=0,b=null,x=-1,S=null,w=new Wi,E=new Wi,M=null,P=t.width,A=t.height,k=1,I=null,O=null,D=new Wi(0,0,P,A),F=new Wi(0,0,P,A),U=!1,z=new PE,B=!1,W=!1,R=null,$=new zt,q=new Ce,Z=new V,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return b===null?k:1}let J=i;function pe(he,lt){for(let vt=0;vt<he.length;vt++){let et=he[vt],bt=t.getContext(et,lt);if(bt!==null)return bt}return null}try{let he={alpha:!0,depth:r,stencil:a,antialias:n,premultipliedAlpha:s,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${dp}`),t.addEventListener("webglcontextlost",ct,!1),t.addEventListener("webglcontextrestored",mt,!1),t.addEventListener("webglcontextcreationerror",Et,!1),J===null){let lt=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&lt.shift(),J=pe(lt,he),J===null)throw pe(lt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(he){throw console.error("THREE.WebGLRenderer: "+he.message),he}let fe,de,ge,me,ke,ce,le,xe,Ne,pt,at,Oe,Ye,xt,ne,K,ze,ft,te,Pe,Te,Be,Le,jt;function kt(){fe=new VX(J),de=new IX(J,fe,e),fe.init(de),Be=new wZ(J,fe,de),ge=new yZ(J,fe,de),me=new $X,ke=new nZ,ce=new bZ(J,fe,ge,ke,de,Be,me),le=new BX(v),xe=new NX(v),Ne=new ZG(J,de),Le=new OX(J,fe,Ne,de),pt=new FX(J,Ne,me,Le),at=new GX(J,pt,Ne,me),te=new HX(J,de,ce),K=new LX(ke),Oe=new aZ(v,le,xe,fe,de,Le,K),Ye=new _Z(v,ke),xt=new oZ,ne=new pZ(fe,de),ft=new kX(v,le,xe,ge,at,c,s),ze=new gZ(v,at,de),jt=new MZ(J,me,de,ge),Pe=new DX(J,fe,me,de),Te=new jX(J,fe,me,de),me.programs=Oe.programs,v.capabilities=de,v.extensions=fe,v.properties=ke,v.renderLists=xt,v.shadowMap=ze,v.state=ge,v.info=me}kt();let Qt=new CZ(v,J);this.xr=Qt,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){let he=fe.get("WEBGL_lose_context");he&&he.loseContext()},this.forceContextRestore=function(){let he=fe.get("WEBGL_lose_context");he&&he.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(he){he!==void 0&&(k=he,this.setSize(P,A,!1))},this.getSize=function(he){return he.set(P,A)},this.setSize=function(he,lt,vt){if(Qt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}P=he,A=lt,t.width=Math.floor(he*k),t.height=Math.floor(lt*k),vt!==!1&&(t.style.width=he+"px",t.style.height=lt+"px"),this.setViewport(0,0,he,lt)},this.getDrawingBufferSize=function(he){return he.set(P*k,A*k).floor()},this.setDrawingBufferSize=function(he,lt,vt){P=he,A=lt,k=vt,t.width=Math.floor(he*vt),t.height=Math.floor(lt*vt),this.setViewport(0,0,he,lt)},this.getCurrentViewport=function(he){return he.copy(w)},this.getViewport=function(he){return he.copy(D)},this.setViewport=function(he,lt,vt,et){he.isVector4?D.set(he.x,he.y,he.z,he.w):D.set(he,lt,vt,et),ge.viewport(w.copy(D).multiplyScalar(k).floor())},this.getScissor=function(he){return he.copy(F)},this.setScissor=function(he,lt,vt,et){he.isVector4?F.set(he.x,he.y,he.z,he.w):F.set(he,lt,vt,et),ge.scissor(E.copy(F).multiplyScalar(k).floor())},this.getScissorTest=function(){return U},this.setScissorTest=function(he){ge.setScissorTest(U=he)},this.setOpaqueSort=function(he){I=he},this.setTransparentSort=function(he){O=he},this.getClearColor=function(he){return he.copy(ft.getClearColor())},this.setClearColor=function(){ft.setClearColor.apply(ft,arguments)},this.getClearAlpha=function(){return ft.getClearAlpha()},this.setClearAlpha=function(){ft.setClearAlpha.apply(ft,arguments)},this.clear=function(he=!0,lt=!0,vt=!0){let et=0;he&&(et|=16384),lt&&(et|=256),vt&&(et|=1024),J.clear(et)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ct,!1),t.removeEventListener("webglcontextrestored",mt,!1),t.removeEventListener("webglcontextcreationerror",Et,!1),xt.dispose(),ne.dispose(),ke.dispose(),le.dispose(),xe.dispose(),at.dispose(),Le.dispose(),jt.dispose(),Oe.dispose(),Qt.dispose(),Qt.removeEventListener("sessionstart",$t),Qt.removeEventListener("sessionend",Ei),R&&(R.dispose(),R=null),Yi.stop()};function ct(he){he.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;let he=me.autoReset,lt=ze.enabled,vt=ze.autoUpdate,et=ze.needsUpdate,bt=ze.type;kt(),me.autoReset=he,ze.enabled=lt,ze.autoUpdate=vt,ze.needsUpdate=et,ze.type=bt}function Et(he){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",he.statusMessage)}function Gt(he){let lt=he.target;lt.removeEventListener("dispose",Gt),Ht(lt)}function Ht(he){Ee(he),ke.remove(he)}function Ee(he){let lt=ke.get(he).programs;lt!==void 0&&(lt.forEach(function(vt){Oe.releaseProgram(vt)}),he.isShaderMaterial&&Oe.releaseShaderCache(he))}this.renderBufferDirect=function(he,lt,vt,et,bt,ci){lt===null&&(lt=G);let mi=bt.isMesh&&bt.matrixWorld.determinant()<0,vi=Jr(he,lt,vt,et,bt);ge.setMaterial(et,mi);let Si=vt.index,ui=1;et.wireframe===!0&&(Si=pt.getWireframeAttribute(vt),ui=2);let Hi=vt.drawRange,er=vt.attributes.position,$i=Hi.start*ui,Ki=(Hi.start+Hi.count)*ui;ci!==null&&($i=Math.max($i,ci.start*ui),Ki=Math.min(Ki,(ci.start+ci.count)*ui)),Si!==null?($i=Math.max($i,0),Ki=Math.min(Ki,Si.count)):er!=null&&($i=Math.max($i,0),Ki=Math.min(Ki,er.count));let Xe=Ki-$i;if(Xe<0||Xe===1/0)return;Le.setup(bt,et,vi,vt,Si);let ni,Oi=Pe;if(Si!==null&&(ni=Ne.get(Si),Oi=Te,Oi.setIndex(ni)),bt.isMesh)et.wireframe===!0?(ge.setLineWidth(et.wireframeLinewidth*X()),Oi.setMode(1)):Oi.setMode(4);else if(bt.isLine){let wi=et.linewidth;wi===void 0&&(wi=1),ge.setLineWidth(wi*X()),bt.isLineSegments?Oi.setMode(1):bt.isLineLoop?Oi.setMode(2):Oi.setMode(3)}else bt.isPoints?Oi.setMode(0):bt.isSprite&&Oi.setMode(4);if(bt.isInstancedMesh)Oi.renderInstances($i,Xe,bt.count);else if(vt.isInstancedBufferGeometry){let wi=vt._maxInstanceCount!==void 0?vt._maxInstanceCount:1/0,pr=Math.min(vt.instanceCount,wi);Oi.renderInstances($i,Xe,pr)}else Oi.render($i,Xe)},this.compile=function(he,lt){function vt(et,bt,ci){et.transparent===!0&&et.side===Rn&&et.forceSinglePass===!1?(et.side=tn,et.needsUpdate=!0,or(et,bt,ci),et.side=Po,et.needsUpdate=!0,or(et,bt,ci),et.side=Rn):or(et,bt,ci)}h=ne.get(he),h.init(),f.push(h),he.traverseVisible(function(et){et.isLight&&et.layers.test(lt.layers)&&(h.pushLight(et),et.castShadow&&h.pushShadow(et))}),h.setupLights(v.physicallyCorrectLights),he.traverse(function(et){let bt=et.material;if(bt)if(Array.isArray(bt))for(let ci=0;ci<bt.length;ci++){let mi=bt[ci];vt(mi,he,et)}else vt(bt,he,et)}),f.pop(),h=null};let nt=null;function St(he){nt&&nt(he)}function $t(){Yi.stop()}function Ei(){Yi.start()}let Yi=new mR;Yi.setAnimationLoop(St),typeof self<"u"&&Yi.setContext(self),this.setAnimationLoop=function(he){nt=he,Qt.setAnimationLoop(he),he===null?Yi.stop():Yi.start()},Qt.addEventListener("sessionstart",$t),Qt.addEventListener("sessionend",Ei),this.render=function(he,lt){if(lt!==void 0&&lt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(m===!0)return;he.matrixWorldAutoUpdate===!0&&he.updateMatrixWorld(),lt.parent===null&&lt.matrixWorldAutoUpdate===!0&&lt.updateMatrixWorld(),Qt.enabled===!0&&Qt.isPresenting===!0&&(Qt.cameraAutoUpdate===!0&&Qt.updateCamera(lt),lt=Qt.getCamera()),he.isScene===!0&&he.onBeforeRender(v,he,lt,b),h=ne.get(he,f.length),h.init(),f.push(h),$.multiplyMatrices(lt.projectionMatrix,lt.matrixWorldInverse),z.setFromProjectionMatrix($),W=this.localClippingEnabled,B=K.init(this.clippingPlanes,W),d=xt.get(he,p.length),d.init(),p.push(d),nr(he,lt,0,v.sortObjects),d.finish(),v.sortObjects===!0&&d.sort(I,O),B===!0&&K.beginShadows();let vt=h.state.shadowsArray;if(ze.render(vt,he,lt),B===!0&&K.endShadows(),this.info.autoReset===!0&&this.info.reset(),ft.render(d,he),h.setupLights(v.physicallyCorrectLights),lt.isArrayCamera){let et=lt.cameras;for(let bt=0,ci=et.length;bt<ci;bt++){let mi=et[bt];ar(d,he,mi,mi.viewport)}}else ar(d,he,lt);b!==null&&(ce.updateMultisampleRenderTarget(b),ce.updateRenderTargetMipmap(b)),he.isScene===!0&&he.onAfterRender(v,he,lt),Le.resetDefaultState(),x=-1,S=null,f.pop(),f.length>0?h=f[f.length-1]:h=null,p.pop(),p.length>0?d=p[p.length-1]:d=null};function nr(he,lt,vt,et){if(he.visible===!1)return;if(he.layers.test(lt.layers)){if(he.isGroup)vt=he.renderOrder;else if(he.isLOD)he.autoUpdate===!0&&he.update(lt);else if(he.isLight)h.pushLight(he),he.castShadow&&h.pushShadow(he);else if(he.isSprite){if(!he.frustumCulled||z.intersectsSprite(he)){et&&Z.setFromMatrixPosition(he.matrixWorld).applyMatrix4($);let ci=at.update(he),mi=he.material;mi.visible&&d.push(he,ci,mi,vt,Z.z,null)}}else if((he.isMesh||he.isLine||he.isPoints)&&(he.isSkinnedMesh&&he.skeleton.frame!==me.render.frame&&(he.skeleton.update(),he.skeleton.frame=me.render.frame),!he.frustumCulled||z.intersectsObject(he))){et&&Z.setFromMatrixPosition(he.matrixWorld).applyMatrix4($);let ci=at.update(he),mi=he.material;if(Array.isArray(mi)){let vi=ci.groups;for(let Si=0,ui=vi.length;Si<ui;Si++){let Hi=vi[Si],er=mi[Hi.materialIndex];er&&er.visible&&d.push(he,ci,er,vt,Z.z,Hi)}}else mi.visible&&d.push(he,ci,mi,vt,Z.z,null)}}let bt=he.children;for(let ci=0,mi=bt.length;ci<mi;ci++)nr(bt[ci],lt,vt,et)}function ar(he,lt,vt,et){let bt=he.opaque,ci=he.transmissive,mi=he.transparent;h.setupLightsView(vt),B===!0&&K.setGlobalState(v.clippingPlanes,vt),ci.length>0&&Qr(bt,lt,vt),et&&ge.viewport(w.copy(et)),bt.length>0&&Rt(bt,lt,vt),ci.length>0&&Rt(ci,lt,vt),mi.length>0&&Rt(mi,lt,vt),ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),ge.setPolygonOffset(!1)}function Qr(he,lt,vt){let et=de.isWebGL2;R===null&&(R=new Mr(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")?au:Un,minFilter:Hh,samples:et&&n===!0?4:0})),v.getDrawingBufferSize(q),et?R.setSize(q.x,q.y):R.setSize(uy(q.x),uy(q.y));let bt=v.getRenderTarget();v.setRenderTarget(R),v.clear();let ci=v.toneMapping;v.toneMapping=cl,Rt(he,lt,vt),v.toneMapping=ci,ce.updateMultisampleRenderTarget(R),ce.updateRenderTargetMipmap(R),v.setRenderTarget(bt)}function Rt(he,lt,vt){let et=lt.isScene===!0?lt.overrideMaterial:null;for(let bt=0,ci=he.length;bt<ci;bt++){let mi=he[bt],vi=mi.object,Si=mi.geometry,ui=et===null?mi.material:et,Hi=mi.group;vi.layers.test(vt.layers)&&Ci(vi,lt,vt,Si,ui,Hi)}}function Ci(he,lt,vt,et,bt,ci){he.onBeforeRender(v,lt,vt,et,bt,ci),he.modelViewMatrix.multiplyMatrices(vt.matrixWorldInverse,he.matrixWorld),he.normalMatrix.getNormalMatrix(he.modelViewMatrix),bt.onBeforeRender(v,lt,vt,et,he,ci),bt.transparent===!0&&bt.side===Rn&&bt.forceSinglePass===!1?(bt.side=tn,bt.needsUpdate=!0,v.renderBufferDirect(vt,lt,et,bt,he,ci),bt.side=Po,bt.needsUpdate=!0,v.renderBufferDirect(vt,lt,et,bt,he,ci),bt.side=Rn):v.renderBufferDirect(vt,lt,et,bt,he,ci),he.onAfterRender(v,lt,vt,et,bt,ci)}function or(he,lt,vt){lt.isScene!==!0&&(lt=G);let et=ke.get(he),bt=h.state.lights,ci=h.state.shadowsArray,mi=bt.state.version,vi=Oe.getParameters(he,bt.state,ci,lt,vt),Si=Oe.getProgramCacheKey(vi),ui=et.programs;et.environment=he.isMeshStandardMaterial?lt.environment:null,et.fog=lt.fog,et.envMap=(he.isMeshStandardMaterial?xe:le).get(he.envMap||et.environment),ui===void 0&&(he.addEventListener("dispose",Gt),ui=new Map,et.programs=ui);let Hi=ui.get(Si);if(Hi!==void 0){if(et.currentProgram===Hi&&et.lightsStateVersion===mi)return ta(he,vi),Hi}else vi.uniforms=Oe.getUniforms(he),he.onBuild(vt,vi,v),he.onBeforeCompile(vi,v),Hi=Oe.acquireProgram(vi,Si),ui.set(Si,Hi),et.uniforms=vi.uniforms;let er=et.uniforms;(!he.isShaderMaterial&&!he.isRawShaderMaterial||he.clipping===!0)&&(er.clippingPlanes=K.uniform),ta(he,vi),et.needsLights=fn(he),et.lightsStateVersion=mi,et.needsLights&&(er.ambientLightColor.value=bt.state.ambient,er.lightProbe.value=bt.state.probe,er.directionalLights.value=bt.state.directional,er.directionalLightShadows.value=bt.state.directionalShadow,er.spotLights.value=bt.state.spot,er.spotLightShadows.value=bt.state.spotShadow,er.rectAreaLights.value=bt.state.rectArea,er.ltc_1.value=bt.state.rectAreaLTC1,er.ltc_2.value=bt.state.rectAreaLTC2,er.pointLights.value=bt.state.point,er.pointLightShadows.value=bt.state.pointShadow,er.hemisphereLights.value=bt.state.hemi,er.directionalShadowMap.value=bt.state.directionalShadowMap,er.directionalShadowMatrix.value=bt.state.directionalShadowMatrix,er.spotShadowMap.value=bt.state.spotShadowMap,er.spotLightMatrix.value=bt.state.spotLightMatrix,er.spotLightMap.value=bt.state.spotLightMap,er.pointShadowMap.value=bt.state.pointShadowMap,er.pointShadowMatrix.value=bt.state.pointShadowMatrix);let $i=Hi.getUniforms(),Ki=jg.seqWithValue($i.seq,er);return et.currentProgram=Hi,et.uniformsList=Ki,Hi}function ta(he,lt){let vt=ke.get(he);vt.outputEncoding=lt.outputEncoding,vt.instancing=lt.instancing,vt.skinning=lt.skinning,vt.morphTargets=lt.morphTargets,vt.morphNormals=lt.morphNormals,vt.morphColors=lt.morphColors,vt.morphTargetsCount=lt.morphTargetsCount,vt.numClippingPlanes=lt.numClippingPlanes,vt.numIntersection=lt.numClipIntersection,vt.vertexAlphas=lt.vertexAlphas,vt.vertexTangents=lt.vertexTangents,vt.toneMapping=lt.toneMapping}function Jr(he,lt,vt,et,bt){lt.isScene!==!0&&(lt=G),ce.resetTextureUnits();let ci=lt.fog,mi=et.isMeshStandardMaterial?lt.environment:null,vi=b===null?v.outputEncoding:b.isXRRenderTarget===!0?b.texture.encoding:To,Si=(et.isMeshStandardMaterial?xe:le).get(et.envMap||mi),ui=et.vertexColors===!0&&!!vt.attributes.color&&vt.attributes.color.itemSize===4,Hi=!!et.normalMap&&!!vt.attributes.tangent,er=!!vt.morphAttributes.position,$i=!!vt.morphAttributes.normal,Ki=!!vt.morphAttributes.color,Xe=et.toneMapped?v.toneMapping:cl,ni=vt.morphAttributes.position||vt.morphAttributes.normal||vt.morphAttributes.color,Oi=ni!==void 0?ni.length:0,wi=ke.get(et),pr=h.state.lights;if(B===!0&&(W===!0||he!==S)){let oe=he===S&&et.id===x;K.setState(et,he,oe)}let yi=!1;et.version===wi.__version?(wi.needsLights&&wi.lightsStateVersion!==pr.state.version||wi.outputEncoding!==vi||bt.isInstancedMesh&&wi.instancing===!1||!bt.isInstancedMesh&&wi.instancing===!0||bt.isSkinnedMesh&&wi.skinning===!1||!bt.isSkinnedMesh&&wi.skinning===!0||wi.envMap!==Si||et.fog===!0&&wi.fog!==ci||wi.numClippingPlanes!==void 0&&(wi.numClippingPlanes!==K.numPlanes||wi.numIntersection!==K.numIntersection)||wi.vertexAlphas!==ui||wi.vertexTangents!==Hi||wi.morphTargets!==er||wi.morphNormals!==$i||wi.morphColors!==Ki||wi.toneMapping!==Xe||de.isWebGL2===!0&&wi.morphTargetsCount!==Oi)&&(yi=!0):(yi=!0,wi.__version=et.version);let xa=wi.currentProgram;yi===!0&&(xa=or(et,lt,bt));let Hn=!1,os=!1,mn=!1,Q=xa.getUniforms(),re=wi.uniforms;if(ge.useProgram(xa.program)&&(Hn=!0,os=!0,mn=!0),et.id!==x&&(x=et.id,os=!0),Hn||S!==he){if(Q.setValue(J,"projectionMatrix",he.projectionMatrix),de.logarithmicDepthBuffer&&Q.setValue(J,"logDepthBufFC",2/(Math.log(he.far+1)/Math.LN2)),S!==he&&(S=he,os=!0,mn=!0),et.isShaderMaterial||et.isMeshPhongMaterial||et.isMeshToonMaterial||et.isMeshStandardMaterial||et.envMap){let oe=Q.map.cameraPosition;oe!==void 0&&oe.setValue(J,Z.setFromMatrixPosition(he.matrixWorld))}(et.isMeshPhongMaterial||et.isMeshToonMaterial||et.isMeshLambertMaterial||et.isMeshBasicMaterial||et.isMeshStandardMaterial||et.isShaderMaterial)&&Q.setValue(J,"isOrthographic",he.isOrthographicCamera===!0),(et.isMeshPhongMaterial||et.isMeshToonMaterial||et.isMeshLambertMaterial||et.isMeshBasicMaterial||et.isMeshStandardMaterial||et.isShaderMaterial||et.isShadowMaterial||bt.isSkinnedMesh)&&Q.setValue(J,"viewMatrix",he.matrixWorldInverse)}if(bt.isSkinnedMesh){Q.setOptional(J,bt,"bindMatrix"),Q.setOptional(J,bt,"bindMatrixInverse");let oe=bt.skeleton;oe&&(de.floatVertexTextures?(oe.boneTexture===null&&oe.computeBoneTexture(),Q.setValue(J,"boneTexture",oe.boneTexture,ce),Q.setValue(J,"boneTextureSize",oe.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let Ae=vt.morphAttributes;if((Ae.position!==void 0||Ae.normal!==void 0||Ae.color!==void 0&&de.isWebGL2===!0)&&te.update(bt,vt,et,xa),(os||wi.receiveShadow!==bt.receiveShadow)&&(wi.receiveShadow=bt.receiveShadow,Q.setValue(J,"receiveShadow",bt.receiveShadow)),et.isMeshGouraudMaterial&&et.envMap!==null&&(re.envMap.value=Si,re.flipEnvMap.value=Si.isCubeTexture&&Si.isRenderTargetTexture===!1?-1:1),os&&(Q.setValue(J,"toneMappingExposure",v.toneMappingExposure),wi.needsLights&&pn(re,mn),ci&&et.fog===!0&&Ye.refreshFogUniforms(re,ci),Ye.refreshMaterialUniforms(re,et,k,A,R),jg.upload(J,wi.uniformsList,re,ce)),et.isShaderMaterial&&et.uniformsNeedUpdate===!0&&(jg.upload(J,wi.uniformsList,re,ce),et.uniformsNeedUpdate=!1),et.isSpriteMaterial&&Q.setValue(J,"center",bt.center),Q.setValue(J,"modelViewMatrix",bt.modelViewMatrix),Q.setValue(J,"normalMatrix",bt.normalMatrix),Q.setValue(J,"modelMatrix",bt.matrixWorld),bt.previousModelViewMatrix&&Q.setValue(J,"previousModelViewMatrix",bt.previousModelViewMatrix),he.previousProjectionMatrix&&Q.setValue(J,"previousProjectionMatrix",he.previousProjectionMatrix),et.isShaderMaterial||et.isRawShaderMaterial){let oe=et.uniformsGroups;for(let C=0,L=oe.length;C<L;C++)if(de.isWebGL2){let j=oe[C];jt.update(j,xa),jt.bind(j,xa)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return xa}function pn(he,lt){he.ambientLightColor.needsUpdate=lt,he.lightProbe.needsUpdate=lt,he.directionalLights.needsUpdate=lt,he.directionalLightShadows.needsUpdate=lt,he.pointLights.needsUpdate=lt,he.pointLightShadows.needsUpdate=lt,he.spotLights.needsUpdate=lt,he.spotLightShadows.needsUpdate=lt,he.rectAreaLights.needsUpdate=lt,he.hemisphereLights.needsUpdate=lt}function fn(he){return he.isMeshLambertMaterial||he.isMeshToonMaterial||he.isMeshPhongMaterial||he.isMeshStandardMaterial||he.isShadowMaterial||he.isShaderMaterial&&he.lights===!0}this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(he,lt,vt){ke.get(he.texture).__webglTexture=lt,ke.get(he.depthTexture).__webglTexture=vt;let et=ke.get(he);et.__hasExternalTextures=!0,et.__hasExternalTextures&&(et.__autoAllocateDepthBuffer=vt===void 0,et.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),et.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(he,lt){let vt=ke.get(he);vt.__webglFramebuffer=lt,vt.__useDefaultFramebuffer=lt===void 0},this.setRenderTarget=function(he,lt=0,vt=0){b=he,g=lt,y=vt;let et=!0,bt=null,ci=!1,mi=!1;if(he){let vi=ke.get(he);vi.__useDefaultFramebuffer!==void 0?(ge.bindFramebuffer(36160,null),et=!1):vi.__webglFramebuffer===void 0?ce.setupRenderTarget(he):vi.__hasExternalTextures&&ce.rebindTextures(he,ke.get(he.texture).__webglTexture,ke.get(he.depthTexture).__webglTexture);let Si=he.texture;(Si.isData3DTexture||Si.isDataArrayTexture||Si.isCompressedArrayTexture)&&(mi=!0);let ui=ke.get(he).__webglFramebuffer;he.isWebGLCubeRenderTarget?(bt=ui[lt],ci=!0):de.isWebGL2&&he.samples>0&&ce.useMultisampledRTT(he)===!1?bt=ke.get(he).__webglMultisampledFramebuffer:bt=ui,w.copy(he.viewport),E.copy(he.scissor),M=he.scissorTest}else w.copy(D).multiplyScalar(k).floor(),E.copy(F).multiplyScalar(k).floor(),M=U;if(ge.bindFramebuffer(36160,bt)&&de.drawBuffers&&et&&ge.drawBuffers(he,bt),ge.viewport(w),ge.scissor(E),ge.setScissorTest(M),ci){let vi=ke.get(he.texture);J.framebufferTexture2D(36160,36064,34069+lt,vi.__webglTexture,vt)}else if(mi){let vi=ke.get(he.texture),Si=lt||0;J.framebufferTextureLayer(36160,36064,vi.__webglTexture,vt||0,Si)}x=-1},this.readRenderTargetPixels=function(he,lt,vt,et,bt,ci,mi){if(!(he&&he.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vi=ke.get(he).__webglFramebuffer;if(he.isWebGLCubeRenderTarget&&mi!==void 0&&(vi=vi[mi]),vi){ge.bindFramebuffer(36160,vi);try{let Si=he.texture,ui=Si.format,Hi=Si.type;if(ui!==Ja&&Be.convert(ui)!==J.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let er=Hi===au&&(fe.has("EXT_color_buffer_half_float")||de.isWebGL2&&fe.has("EXT_color_buffer_float"));if(Hi!==Un&&Be.convert(Hi)!==J.getParameter(35738)&&!(Hi===Pa&&(de.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!er){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}lt>=0&&lt<=he.width-et&&vt>=0&&vt<=he.height-bt&&J.readPixels(lt,vt,et,bt,Be.convert(ui),Be.convert(Hi),ci)}finally{let Si=b!==null?ke.get(b).__webglFramebuffer:null;ge.bindFramebuffer(36160,Si)}}},this.copyFramebufferToTexture=function(he,lt,vt=0){let et=Math.pow(2,-vt),bt=Math.floor(lt.image.width*et),ci=Math.floor(lt.image.height*et);ce.setTexture2D(lt,0),J.copyTexSubImage2D(3553,vt,0,0,he.x,he.y,bt,ci),ge.unbindTexture()},this.copyTextureToTexture=function(he,lt,vt,et=0){let bt=lt.image.width,ci=lt.image.height,mi=Be.convert(vt.format),vi=Be.convert(vt.type);ce.setTexture2D(vt,0),J.pixelStorei(37440,vt.flipY),J.pixelStorei(37441,vt.premultiplyAlpha),J.pixelStorei(3317,vt.unpackAlignment),lt.isDataTexture?J.texSubImage2D(3553,et,he.x,he.y,bt,ci,mi,vi,lt.image.data):lt.isCompressedTexture?J.compressedTexSubImage2D(3553,et,he.x,he.y,lt.mipmaps[0].width,lt.mipmaps[0].height,mi,lt.mipmaps[0].data):J.texSubImage2D(3553,et,he.x,he.y,mi,vi,lt.image),et===0&&vt.generateMipmaps&&J.generateMipmap(3553),ge.unbindTexture()},this.copyTextureToTexture3D=function(he,lt,vt,et,bt=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let ci=he.max.x-he.min.x+1,mi=he.max.y-he.min.y+1,vi=he.max.z-he.min.z+1,Si=Be.convert(et.format),ui=Be.convert(et.type),Hi;if(et.isData3DTexture)ce.setTexture3D(et,0),Hi=32879;else if(et.isDataArrayTexture)ce.setTexture2DArray(et,0),Hi=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(37440,et.flipY),J.pixelStorei(37441,et.premultiplyAlpha),J.pixelStorei(3317,et.unpackAlignment);let er=J.getParameter(3314),$i=J.getParameter(32878),Ki=J.getParameter(3316),Xe=J.getParameter(3315),ni=J.getParameter(32877),Oi=vt.isCompressedTexture?vt.mipmaps[0]:vt.image;J.pixelStorei(3314,Oi.width),J.pixelStorei(32878,Oi.height),J.pixelStorei(3316,he.min.x),J.pixelStorei(3315,he.min.y),J.pixelStorei(32877,he.min.z),vt.isDataTexture||vt.isData3DTexture?J.texSubImage3D(Hi,bt,lt.x,lt.y,lt.z,ci,mi,vi,Si,ui,Oi.data):vt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(Hi,bt,lt.x,lt.y,lt.z,ci,mi,vi,Si,Oi.data)):J.texSubImage3D(Hi,bt,lt.x,lt.y,lt.z,ci,mi,vi,Si,ui,Oi),J.pixelStorei(3314,er),J.pixelStorei(32878,$i),J.pixelStorei(3316,Ki),J.pixelStorei(3315,Xe),J.pixelStorei(32877,ni),bt===0&&et.generateMipmaps&&J.generateMipmap(Hi),ge.unbindTexture()},this.initTexture=function(he){he.isCubeTexture?ce.setTextureCube(he,0):he.isData3DTexture?ce.setTexture3D(he,0):he.isDataArrayTexture||he.isCompressedArrayTexture?ce.setTexture2DArray(he,0):ce.setTexture2D(he,0),ge.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,ge.reset(),Le.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var AZ=class extends xR{};AZ.prototype.isWebGL1Renderer=!0;var SR=class{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Bi(e),this.near=t,this.far=i}clone(){return new SR(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},dl=class extends Tr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}},PZ=class{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=B_,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Zs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Zs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},qn=new V,V_=class{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}setX(e,t){return this.normalized&&(t=Fr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Fr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Fr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Fr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Xl(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Xl(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Xl(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Xl(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array),r=Fr(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fr(t,this.array),i=Fr(i,this.array),r=Fr(r,this.array),a=Fr(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return new ji(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new V_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let i=0;i<this.count;i++){let r=i*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[r+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},CR=class extends Tr{constructor(){super(),this.isBone=!0,this.type="Bone"}},qs=class extends aa{constructor(e=null,t=1,i=1,r,a,n,s,o,l=Ar,u=Ar,c,d){super(null,n,s,o,l,u,r,a,c,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},IT=new zt,TZ=new zt,kE=class{constructor(e=[],t=[]){this.uuid=Zs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let i=new zt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let a=0,n=e.length;a<n;a++){let s=e[a]?e[a].matrixWorld:TZ;IT.multiplyMatrices(s,t[a]),IT.toArray(i,a*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new kE(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=oR(e),e=Math.max(e,4);let t=new Float32Array(e*e*4);t.set(this.boneMatrices);let i=new qs(t,e,e,Ja,Pa);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){let a=e.bones[i],n=t[a];n===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),n=new CR),this.bones.push(n),this.boneInverses.push(new zt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){let e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,i=this.boneInverses;for(let r=0,a=t.length;r<a;r++){let n=t[r];e.bones.push(n.uuid);let s=i[r];e.boneInverses.push(s.toArray())}return e}},tm=class extends ji{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}},LT=new zt,BT=new zt,Cv=[],kZ=new zt,Fp=new ra,OZ=class extends ra{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new tm(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,kZ)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){let i=this.matrixWorld,r=this.count;if(Fp.geometry=this.geometry,Fp.material=this.material,Fp.material!==void 0)for(let a=0;a<r;a++){this.getMatrixAt(a,LT),BT.multiplyMatrices(i,LT),Fp.matrixWorld=BT,Fp.raycast(e,Cv);for(let n=0,s=Cv.length;n<s;n++){let o=Cv[n];o.instanceId=a,o.object=this,t.push(o)}Cv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new tm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}},vc=class extends Dm{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Bi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},zT=new V,RT=new V,NT=new zt,Ew=new hp,_v=new ws,cy=class extends Tr{constructor(e=new Mi,t=new vc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[0];for(let r=1,a=t.count;r<a;r++)zT.fromBufferAttribute(t,r-1),RT.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=zT.distanceTo(RT);e.setAttribute("lineDistance",new ri(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let i=this.geometry,r=this.matrixWorld,a=e.params.Line.threshold,n=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_v.copy(i.boundingSphere),_v.applyMatrix4(r),_v.radius+=a,e.ray.intersectsSphere(_v)===!1)return;NT.copy(r).invert(),Ew.copy(e.ray).applyMatrix4(NT);let s=a/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new V,u=new V,c=new V,d=new V,h=this.isLineSegments?2:1,p=i.index,f=i.attributes.position;if(p!==null){let v=Math.max(0,n.start),m=Math.min(p.count,n.start+n.count);for(let g=v,y=m-1;g<y;g+=h){let b=p.getX(g),x=p.getX(g+1);if(l.fromBufferAttribute(f,b),u.fromBufferAttribute(f,x),Ew.distanceSqToSegment(l,u,d,c)>o)continue;d.applyMatrix4(this.matrixWorld);let S=e.ray.origin.distanceTo(d);S<e.near||S>e.far||t.push({distance:S,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else{let v=Math.max(0,n.start),m=Math.min(f.count,n.start+n.count);for(let g=v,y=m-1;g<y;g+=h){if(l.fromBufferAttribute(f,g),u.fromBufferAttribute(f,g+1),Ew.distanceSqToSegment(l,u,d,c)>o)continue;d.applyMatrix4(this.matrixWorld);let b=e.ray.origin.distanceTo(d);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,a=i.length;r<a;r++){let n=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=r}}}}},VT=new V,FT=new V,Im=class extends cy{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,i=[];for(let r=0,a=t.count;r<a;r+=2)VT.fromBufferAttribute(t,r),FT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+VT.distanceTo(FT);e.setAttribute("lineDistance",new ri(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},DZ=class extends aa{constructor(e,t,i,r,a,n,s,o,l){super(e,t,i,r,a,n,s,o,l),this.isVideoTexture=!0,this.minFilter=n!==void 0?n:ir,this.magFilter=a!==void 0?a:ir,this.generateMipmaps=!1;let u=this;function c(){u.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},IZ=class extends aa{constructor(e,t,i,r,a,n,s,o,l){super(e,t,i,r,a,n,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},wl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,r=this.getPoint(0),a=0;t.push(0);for(let n=1;n<=e;n++)i=this.getPoint(n/e),a+=i.distanceTo(r),t.push(a),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i=this.getLengths(),r=0,a=i.length,n;t?n=t:n=e*i[a-1];let s=0,o=a-1,l;for(;s<=o;)if(r=Math.floor(s+(o-s)/2),l=i[r]-n,l<0)s=r+1;else if(l>0)o=r-1;else{o=r;break}if(r=o,i[r]===n)return r/(a-1);let u=i[r],c=i[r+1]-u,d=(n-u)/c;return(r+d)/(a-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);let a=this.getPoint(i),n=this.getPoint(r),s=t||(a.isVector2?new Ce:new V);return s.copy(n).sub(a).normalize(),s}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new V,r=[],a=[],n=[],s=new V,o=new zt;for(let h=0;h<=e;h++){let p=h/e;r[h]=this.getTangentAt(p,new V)}a[0]=new V,n[0]=new V;let l=Number.MAX_VALUE,u=Math.abs(r[0].x),c=Math.abs(r[0].y),d=Math.abs(r[0].z);u<=l&&(l=u,i.set(1,0,0)),c<=l&&(l=c,i.set(0,1,0)),d<=l&&i.set(0,0,1),s.crossVectors(r[0],i).normalize(),a[0].crossVectors(r[0],s),n[0].crossVectors(r[0],a[0]);for(let h=1;h<=e;h++){if(a[h]=a[h-1].clone(),n[h]=n[h-1].clone(),s.crossVectors(r[h-1],r[h]),s.length()>Number.EPSILON){s.normalize();let p=Math.acos(Ma(r[h-1].dot(r[h]),-1,1));a[h].applyMatrix4(o.makeRotationAxis(s,p))}n[h].crossVectors(r[h],a[h])}if(t===!0){let h=Math.acos(Ma(a[0].dot(a[e]),-1,1));h/=e,r[0].dot(s.crossVectors(a[0],a[e]))>0&&(h=-h);for(let p=1;p<=e;p++)a[p].applyMatrix4(o.makeRotationAxis(r[p],h*p)),n[p].crossVectors(r[p],a[p])}return{tangents:r,normals:a,binormals:n}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},Nb=class extends wl{constructor(e=0,t=0,i=1,r=1,a=0,n=Math.PI*2,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=n,this.aClockwise=s,this.aRotation=o}getPoint(e,t){let i=t||new Ce,r=Math.PI*2,a=this.aEndAngle-this.aStartAngle,n=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(n?a=0:a=r),this.aClockwise===!0&&!n&&(a===r?a=-r:a=a-r);let s=this.aStartAngle+e*a,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){let u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=o-this.aX,h=l-this.aY;o=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},LZ=class extends Nb{constructor(e,t,i,r,a,n){super(e,t,i,i,r,a,n),this.isArcCurve=!0,this.type="ArcCurve"}};function OE(){let e=0,t=0,i=0,r=0;function a(n,s,o,l){e=n,t=o,i=-3*n+3*s-2*o-l,r=2*n-2*s+o+l}return{initCatmullRom:function(n,s,o,l,u){a(s,o,u*(o-n),u*(l-s))},initNonuniformCatmullRom:function(n,s,o,l,u,c,d){let h=(s-n)/u-(o-n)/(u+c)+(o-s)/c,p=(o-s)/c-(l-s)/(c+d)+(l-o)/d;h*=c,p*=c,a(s,o,h,p)},calc:function(n){let s=n*n,o=s*n;return e+t*n+i*s+r*o}}}var Mv=new V,Aw=new OE,Pw=new OE,Tw=new OE,BZ=class extends wl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new V){let i=t,r=this.points,a=r.length,n=(a-(this.closed?0:1))*e,s=Math.floor(n),o=n-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/a)+1)*a:o===0&&s===a-1&&(s=a-2,o=1);let l,u;this.closed||s>0?l=r[(s-1)%a]:(Mv.subVectors(r[0],r[1]).add(r[0]),l=Mv);let c=r[s%a],d=r[(s+1)%a];if(this.closed||s+2<a?u=r[(s+2)%a]:(Mv.subVectors(r[a-1],r[a-2]).add(r[a-1]),u=Mv),this.curveType==="centripetal"||this.curveType==="chordal"){let h=this.curveType==="chordal"?.5:.25,p=Math.pow(l.distanceToSquared(c),h),f=Math.pow(c.distanceToSquared(d),h),v=Math.pow(d.distanceToSquared(u),h);f<1e-4&&(f=1),p<1e-4&&(p=f),v<1e-4&&(v=f),Aw.initNonuniformCatmullRom(l.x,c.x,d.x,u.x,p,f,v),Pw.initNonuniformCatmullRom(l.y,c.y,d.y,u.y,p,f,v),Tw.initNonuniformCatmullRom(l.z,c.z,d.z,u.z,p,f,v)}else this.curveType==="catmullrom"&&(Aw.initCatmullRom(l.x,c.x,d.x,u.x,this.tension),Pw.initCatmullRom(l.y,c.y,d.y,u.y,this.tension),Tw.initCatmullRom(l.z,c.z,d.z,u.z,this.tension));return i.set(Aw.calc(o),Pw.calc(o),Tw.calc(o)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new V().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}};function jT(e,t,i,r,a){let n=(r-t)*.5,s=(a-i)*.5,o=e*e,l=e*o;return(2*i-2*r+n+s)*l+(-3*i+3*r-2*n-s)*o+n*e+i}function zZ(e,t){let i=1-e;return i*i*t}function RZ(e,t){return 2*(1-e)*e*t}function NZ(e,t){return e*e*t}function Df(e,t,i,r){return zZ(e,t)+RZ(e,i)+NZ(e,r)}function VZ(e,t){let i=1-e;return i*i*i*t}function FZ(e,t){let i=1-e;return 3*i*i*e*t}function jZ(e,t){return 3*(1-e)*e*e*t}function $Z(e,t){return e*e*e*t}function If(e,t,i,r,a){return VZ(e,t)+FZ(e,i)+jZ(e,r)+$Z(e,a)}var wo=class extends wl{constructor(e=new Ce,t=new Ce,i=new Ce,r=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ce){let i=t,r=this.v0,a=this.v1,n=this.v2,s=this.v3;return i.set(If(e,r.x,a.x,n.x,s.x),If(e,r.y,a.y,n.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},$g=class extends wl{constructor(e=new V,t=new V,i=new V,r=new V){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new V){let i=t,r=this.v0,a=this.v1,n=this.v2,s=this.v3;return i.set(If(e,r.x,a.x,n.x,s.x),If(e,r.y,a.y,n.y,s.y),If(e,r.z,a.z,n.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},Mo=class extends wl{constructor(e=new Ce,t=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){let i=t||new Ce;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},_R=class extends wl{constructor(e=new V,t=new V){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new V){let i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},lc=class extends wl{constructor(e=new Ce,t=new Ce,i=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ce){let i=t,r=this.v0,a=this.v1,n=this.v2;return i.set(Df(e,r.x,a.x,n.x),Df(e,r.y,a.y,n.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},UZ=class extends wl{constructor(e=new V,t=new V,i=new V){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new V){let i=t,r=this.v0,a=this.v1,n=this.v2;return i.set(Df(e,r.x,a.x,n.x),Df(e,r.y,a.y,n.y),Df(e,r.z,a.z,n.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},DE=class extends wl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){let i=t,r=this.points,a=(r.length-1)*e,n=Math.floor(a),s=a-n,o=r[n===0?n:n-1],l=r[n],u=r[n>r.length-2?r.length-1:n+1],c=r[n>r.length-3?r.length-1:n+2];return i.set(jT(s,o.x,l.x,u.x,c.x),jT(s,o.y,l.y,u.y,c.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let r=e.points[t];this.points.push(new Ce().fromArray(r))}return this}},WZ=Object.freeze({__proto__:null,ArcCurve:LZ,CatmullRomCurve3:BZ,CubicBezierCurve:wo,CubicBezierCurve3:$g,EllipseCurve:Nb,LineCurve:Mo,LineCurve3:_R,QuadraticBezierCurve:lc,QuadraticBezierCurve3:UZ,SplineCurve:DE}),MR=class extends wl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Mo(t,e))}getPoint(e,t){let i=e*this.getLength(),r=this.getCurveLengths(),a=0;for(;a<r.length;){if(r[a]>=i){let n=r[a]-i,s=this.curves[a],o=s.getLength(),l=o===0?0:1-n/o;return s.getPointAt(l,t)}a++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t=[],i;for(let r=0,a=this.curves;r<a.length;r++){let n=a[r],s=n.isEllipseCurve?e*2:n.isLineCurve||n.isLineCurve3?1:n.isSplineCurve?e*n.points.length:e,o=n.getPoints(s);for(let l=0;l<o.length;l++){let u=o[l];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){let r=e.curves[t];this.curves.push(new WZ[r.type]().fromJSON(r))}return this}},dy=class extends MR{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let i=new Mo(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){let a=new lc(this.currentPoint.clone(),new Ce(e,t),new Ce(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,a,n){let s=new wo(this.currentPoint.clone(),new Ce(e,t),new Ce(i,r),new Ce(a,n));return this.curves.push(s),this.currentPoint.set(a,n),this}splineThru(e){let t=[this.currentPoint.clone()].concat(e),i=new DE(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,a,n){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,r,a,n),this}absarc(e,t,i,r,a,n){return this.absellipse(e,t,i,i,r,a,n),this}ellipse(e,t,i,r,a,n,s,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,i,r,a,n,s,o),this}absellipse(e,t,i,r,a,n,s,o){let l=new Nb(e,t,i,r,a,n,s,o);if(this.curves.length>0){let c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}},ER=class extends Mi{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Ma(r,0,Math.PI*2);let a=[],n=[],s=[],o=[],l=[],u=1/t,c=new V,d=new Ce,h=new V,p=new V,f=new V,v=0,m=0;for(let g=0;g<=e.length-1;g++)switch(g){case 0:v=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,h.x=m*1,h.y=-v,h.z=m*0,f.copy(h),h.normalize(),o.push(h.x,h.y,h.z);break;case e.length-1:o.push(f.x,f.y,f.z);break;default:v=e[g+1].x-e[g].x,m=e[g+1].y-e[g].y,h.x=m*1,h.y=-v,h.z=m*0,p.copy(h),h.x+=f.x,h.y+=f.y,h.z+=f.z,h.normalize(),o.push(h.x,h.y,h.z),f.copy(p)}for(let g=0;g<=t;g++){let y=i+g*u*r,b=Math.sin(y),x=Math.cos(y);for(let S=0;S<=e.length-1;S++){c.x=e[S].x*b,c.y=e[S].y,c.z=e[S].x*x,n.push(c.x,c.y,c.z),d.x=g/t,d.y=S/(e.length-1),s.push(d.x,d.y);let w=o[3*S+0]*b,E=o[3*S+1],M=o[3*S+0]*x;l.push(w,E,M)}}for(let g=0;g<t;g++)for(let y=0;y<e.length-1;y++){let b=y+g*e.length,x=b,S=b+e.length,w=b+e.length+1,E=b+1;a.push(x,S,E),a.push(w,E,S)}this.setIndex(a),this.setAttribute("position",new ri(n,3)),this.setAttribute("uv",new ri(s,2)),this.setAttribute("normal",new ri(l,3))}static fromJSON(e){return new ER(e.points,e.segments,e.phiStart,e.phiLength)}},IE=class extends Mi{constructor(e=1,t=1,i=1,r=32,a=1,n=!1,s=0,o=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:a,openEnded:n,thetaStart:s,thetaLength:o};let l=this;r=Math.floor(r),a=Math.floor(a);let u=[],c=[],d=[],h=[],p=0,f=[],v=i/2,m=0;g(),n===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(u),this.setAttribute("position",new ri(c,3)),this.setAttribute("normal",new ri(d,3)),this.setAttribute("uv",new ri(h,2));function g(){let b=new V,x=new V,S=0,w=(t-e)/i;for(let E=0;E<=a;E++){let M=[],P=E/a,A=P*(t-e)+e;for(let k=0;k<=r;k++){let I=k/r,O=I*o+s,D=Math.sin(O),F=Math.cos(O);x.x=A*D,x.y=-P*i+v,x.z=A*F,c.push(x.x,x.y,x.z),b.set(D,w,F).normalize(),d.push(b.x,b.y,b.z),h.push(I,1-P),M.push(p++)}f.push(M)}for(let E=0;E<r;E++)for(let M=0;M<a;M++){let P=f[M][E],A=f[M+1][E],k=f[M+1][E+1],I=f[M][E+1];u.push(P,A,I),u.push(A,k,I),S+=6}l.addGroup(m,S,0),m+=S}function y(b){let x=p,S=new Ce,w=new V,E=0,M=b===!0?e:t,P=b===!0?1:-1;for(let k=1;k<=r;k++)c.push(0,v*P,0),d.push(0,P,0),h.push(.5,.5),p++;let A=p;for(let k=0;k<=r;k++){let I=k/r*o+s,O=Math.cos(I),D=Math.sin(I);w.x=M*D,w.y=v*P,w.z=M*O,c.push(w.x,w.y,w.z),d.push(0,P,0),S.x=O*.5+.5,S.y=D*.5*P+.5,h.push(S.x,S.y),p++}for(let k=0;k<r;k++){let I=x+k,O=A+k;b===!0?u.push(O,O+1,I):u.push(O+1,O,I),E+=3}l.addGroup(m,E,b===!0?1:2),m+=E}}static fromJSON(e){return new IE(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},LE=class extends IE{constructor(e=1,t=1,i=32,r=1,a=!1,n=0,s=Math.PI*2){super(0,e,t,i,r,a,n,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:n,thetaLength:s}}static fromJSON(e){return new LE(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},BE=class extends Mi{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};let a=[],n=[];s(r),l(i),u(),this.setAttribute("position",new ri(a,3)),this.setAttribute("normal",new ri(a.slice(),3)),this.setAttribute("uv",new ri(n,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function s(g){let y=new V,b=new V,x=new V;for(let S=0;S<t.length;S+=3)h(t[S+0],y),h(t[S+1],b),h(t[S+2],x),o(y,b,x,g)}function o(g,y,b,x){let S=x+1,w=[];for(let E=0;E<=S;E++){w[E]=[];let M=g.clone().lerp(b,E/S),P=y.clone().lerp(b,E/S),A=S-E;for(let k=0;k<=A;k++)k===0&&E===S?w[E][k]=M:w[E][k]=M.clone().lerp(P,k/A)}for(let E=0;E<S;E++)for(let M=0;M<2*(S-E)-1;M++){let P=Math.floor(M/2);M%2===0?(d(w[E][P+1]),d(w[E+1][P]),d(w[E][P])):(d(w[E][P+1]),d(w[E+1][P+1]),d(w[E+1][P]))}}function l(g){let y=new V;for(let b=0;b<a.length;b+=3)y.x=a[b+0],y.y=a[b+1],y.z=a[b+2],y.normalize().multiplyScalar(g),a[b+0]=y.x,a[b+1]=y.y,a[b+2]=y.z}function u(){let g=new V;for(let y=0;y<a.length;y+=3){g.x=a[y+0],g.y=a[y+1],g.z=a[y+2];let b=v(g)/2/Math.PI+.5,x=m(g)/Math.PI+.5;n.push(b,1-x)}p(),c()}function c(){for(let g=0;g<n.length;g+=6){let y=n[g+0],b=n[g+2],x=n[g+4],S=Math.max(y,b,x),w=Math.min(y,b,x);S>.9&&w<.1&&(y<.2&&(n[g+0]+=1),b<.2&&(n[g+2]+=1),x<.2&&(n[g+4]+=1))}}function d(g){a.push(g.x,g.y,g.z)}function h(g,y){let b=g*3;y.x=e[b+0],y.y=e[b+1],y.z=e[b+2]}function p(){let g=new V,y=new V,b=new V,x=new V,S=new Ce,w=new Ce,E=new Ce;for(let M=0,P=0;M<a.length;M+=9,P+=6){g.set(a[M+0],a[M+1],a[M+2]),y.set(a[M+3],a[M+4],a[M+5]),b.set(a[M+6],a[M+7],a[M+8]),S.set(n[P+0],n[P+1]),w.set(n[P+2],n[P+3]),E.set(n[P+4],n[P+5]),x.copy(g).add(y).add(b).divideScalar(3);let A=v(x);f(S,P+0,g,A),f(w,P+2,y,A),f(E,P+4,b,A)}}function f(g,y,b,x){x<0&&g.x===1&&(n[y]=g.x-1),b.x===0&&b.z===0&&(n[y]=x/2/Math.PI+.5)}function v(g){return Math.atan2(g.z,-g.x)}function m(g){return Math.atan2(-g.y,Math.sqrt(g.x*g.x+g.z*g.z))}}static fromJSON(e){return new BE(e.vertices,e.indices,e.radius,e.details)}},AR=class extends BE{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=1/i,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],n=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,n,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new AR(e.radius,e.detail)}},hy=class extends dy{constructor(e){super(e),this.uuid=Zs(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){let r=e.holes[t];this.holes.push(new dy().fromJSON(r))}return this}},HZ={triangulate:function(e,t,i=2){let r=t&&t.length,a=r?t[0]*i:e.length,n=PR(e,0,a,i,!0),s=[];if(!n||n.next===n.prev)return s;let o,l,u,c,d,h,p;if(r&&(n=KZ(e,t,n,i)),e.length>80*i){o=u=e[0],l=c=e[1];for(let f=i;f<a;f+=i)d=e[f],h=e[f+1],d<o&&(o=d),h<l&&(l=h),d>u&&(u=d),h>c&&(c=h);p=Math.max(u-o,c-l),p=p!==0?32767/p:0}return im(n,s,i,o,l,p,0),s}};function PR(e,t,i,r,a){let n,s;if(a===oQ(e,t,i,r)>0)for(n=t;n<i;n+=r)s=$T(n,e[n],e[n+1],s);else for(n=i-r;n>=t;n-=r)s=$T(n,e[n],e[n+1],s);return s&&Vb(s,s.next)&&(am(s),s=s.next),s}function pd(e,t){if(!e)return e;t||(t=e);let i=e,r;do if(r=!1,!i.steiner&&(Vb(i,i.next)||ia(i.prev,i,i.next)===0)){if(am(i),i=t=i.prev,i===i.next)break;r=!0}else i=i.next;while(r||i!==t);return t}function im(e,t,i,r,a,n,s){if(!e)return;!s&&n&&tQ(e,r,a,n);let o=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,n?qZ(e,r,a,n):GZ(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(u.i/i|0),am(e),e=u.next,o=u.next;continue}if(e=u,e===o){s?s===1?(e=YZ(pd(e),t,i),im(e,t,i,r,a,n,2)):s===2&&XZ(e,t,i,r,a,n):im(pd(e),t,i,r,a,n,1);break}}}function GZ(e){let t=e.prev,i=e,r=e.next;if(ia(t,i,r)>=0)return!1;let a=t.x,n=i.x,s=r.x,o=t.y,l=i.y,u=r.y,c=a<n?a<s?a:s:n<s?n:s,d=o<l?o<u?o:u:l<u?l:u,h=a>n?a>s?a:s:n>s?n:s,p=o>l?o>u?o:u:l>u?l:u,f=r.next;for(;f!==t;){if(f.x>=c&&f.x<=h&&f.y>=d&&f.y<=p&&yh(a,o,n,l,s,u,f.x,f.y)&&ia(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function qZ(e,t,i,r){let a=e.prev,n=e,s=e.next;if(ia(a,n,s)>=0)return!1;let o=a.x,l=n.x,u=s.x,c=a.y,d=n.y,h=s.y,p=o<l?o<u?o:u:l<u?l:u,f=c<d?c<h?c:h:d<h?d:h,v=o>l?o>u?o:u:l>u?l:u,m=c>d?c>h?c:h:d>h?d:h,g=F_(p,f,t,i,r),y=F_(v,m,t,i,r),b=e.prevZ,x=e.nextZ;for(;b&&b.z>=g&&x&&x.z<=y;){if(b.x>=p&&b.x<=v&&b.y>=f&&b.y<=m&&b!==a&&b!==s&&yh(o,c,l,d,u,h,b.x,b.y)&&ia(b.prev,b,b.next)>=0||(b=b.prevZ,x.x>=p&&x.x<=v&&x.y>=f&&x.y<=m&&x!==a&&x!==s&&yh(o,c,l,d,u,h,x.x,x.y)&&ia(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;b&&b.z>=g;){if(b.x>=p&&b.x<=v&&b.y>=f&&b.y<=m&&b!==a&&b!==s&&yh(o,c,l,d,u,h,b.x,b.y)&&ia(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;x&&x.z<=y;){if(x.x>=p&&x.x<=v&&x.y>=f&&x.y<=m&&x!==a&&x!==s&&yh(o,c,l,d,u,h,x.x,x.y)&&ia(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function YZ(e,t,i){let r=e;do{let a=r.prev,n=r.next.next;!Vb(a,n)&&TR(a,r,r.next,n)&&rm(a,n)&&rm(n,a)&&(t.push(a.i/i|0),t.push(r.i/i|0),t.push(n.i/i|0),am(r),am(r.next),r=e=n),r=r.next}while(r!==e);return pd(r)}function XZ(e,t,i,r,a,n){let s=e;do{let o=s.next.next;for(;o!==s.prev;){if(s.i!==o.i&&aQ(s,o)){let l=kR(s,o);s=pd(s,s.next),l=pd(l,l.next),im(s,t,i,r,a,n,0),im(l,t,i,r,a,n,0);return}o=o.next}s=s.next}while(s!==e)}function KZ(e,t,i,r){let a=[],n,s,o,l,u;for(n=0,s=t.length;n<s;n++)o=t[n]*r,l=n<s-1?t[n+1]*r:e.length,u=PR(e,o,l,r,!1),u===u.next&&(u.steiner=!0),a.push(rQ(u));for(a.sort(ZZ),n=0;n<a.length;n++)i=QZ(a[n],i);return i}function ZZ(e,t){return e.x-t.x}function QZ(e,t){let i=JZ(e,t);if(!i)return t;let r=kR(i,e);return pd(r,r.next),pd(i,i.next)}function JZ(e,t){let i=t,r=-1/0,a,n=e.x,s=e.y;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){let h=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(h<=n&&h>r&&(r=h,a=i.x<i.next.x?i:i.next,h===n))return a}i=i.next}while(i!==t);if(!a)return null;let o=a,l=a.x,u=a.y,c=1/0,d;i=a;do n>=i.x&&i.x>=l&&n!==i.x&&yh(s<u?n:r,s,l,u,s<u?r:n,s,i.x,i.y)&&(d=Math.abs(s-i.y)/(n-i.x),rm(i,e)&&(d<c||d===c&&(i.x>a.x||i.x===a.x&&eQ(a,i)))&&(a=i,c=d)),i=i.next;while(i!==o);return a}function eQ(e,t){return ia(e.prev,e,t.prev)<0&&ia(t.next,e,e.next)<0}function tQ(e,t,i,r){let a=e;do a.z===0&&(a.z=F_(a.x,a.y,t,i,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,iQ(a)}function iQ(e){let t,i,r,a,n,s,o,l,u=1;do{for(i=e,e=null,n=null,s=0;i;){for(s++,r=i,o=0,t=0;t<u&&(o++,r=r.nextZ,!!r);t++);for(l=u;o>0||l>0&&r;)o!==0&&(l===0||!r||i.z<=r.z)?(a=i,i=i.nextZ,o--):(a=r,r=r.nextZ,l--),n?n.nextZ=a:e=a,a.prevZ=n,n=a;i=r}n.nextZ=null,u*=2}while(s>1);return e}function F_(e,t,i,r,a){return e=(e-i)*a|0,t=(t-r)*a|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function rQ(e){let t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function yh(e,t,i,r,a,n,s,o){return(a-s)*(t-o)>=(e-s)*(n-o)&&(e-s)*(r-o)>=(i-s)*(t-o)&&(i-s)*(n-o)>=(a-s)*(r-o)}function aQ(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!nQ(e,t)&&(rm(e,t)&&rm(t,e)&&sQ(e,t)&&(ia(e.prev,e,t.prev)||ia(e,t.prev,t))||Vb(e,t)&&ia(e.prev,e,e.next)>0&&ia(t.prev,t,t.next)>0)}function ia(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Vb(e,t){return e.x===t.x&&e.y===t.y}function TR(e,t,i,r){let a=Av(ia(e,t,i)),n=Av(ia(e,t,r)),s=Av(ia(i,r,e)),o=Av(ia(i,r,t));return!!(a!==n&&s!==o||a===0&&Ev(e,i,t)||n===0&&Ev(e,r,t)||s===0&&Ev(i,e,r)||o===0&&Ev(i,t,r))}function Ev(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Av(e){return e>0?1:e<0?-1:0}function nQ(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&TR(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function rm(e,t){return ia(e.prev,e,e.next)<0?ia(e,t,e.next)>=0&&ia(e,e.prev,t)>=0:ia(e,t,e.prev)<0||ia(e,e.next,t)<0}function sQ(e,t){let i=e,r=!1,a=(e.x+t.x)/2,n=(e.y+t.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&a<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==e);return r}function kR(e,t){let i=new j_(e.i,e.x,e.y),r=new j_(t.i,t.x,t.y),a=e.next,n=t.prev;return e.next=t,t.prev=e,i.next=a,a.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function $T(e,t,i,r){let a=new j_(e,t,i);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function am(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function j_(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function oQ(e,t,i,r){let a=0;for(let n=t,s=i-r;n<i;n+=r)a+=(e[s]-e[n])*(e[n+1]+e[s+1]),s=n;return a}var OR=class{static area(e){let t=e.length,i=0;for(let r=t-1,a=0;a<t;r=a++)i+=e[r].x*e[a].y-e[a].x*e[r].y;return i*.5}static isClockWise(e){return OR.area(e)<0}static triangulateShape(e,t){let i=[],r=[],a=[];UT(e),WT(i,e);let n=e.length;t.forEach(UT);for(let o=0;o<t.length;o++)r.push(n),n+=t[o].length,WT(i,t[o]);let s=HZ.triangulate(i,r);for(let o=0;o<s.length;o+=3)a.push(s.slice(o,o+3));return a}};function UT(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function WT(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}var DR=class extends BE{constructor(e=1,t=0){let i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DR(e.radius,e.detail)}},Ah=class extends Mi{constructor(e=1,t=32,i=16,r=0,a=Math.PI*2,n=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:a,thetaStart:n,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));let o=Math.min(n+s,Math.PI),l=0,u=[],c=new V,d=new V,h=[],p=[],f=[],v=[];for(let m=0;m<=i;m++){let g=[],y=m/i,b=0;m==0&&n==0?b=.5/t:m==i&&o==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){let S=x/t;c.x=-e*Math.cos(r+S*a)*Math.sin(n+y*s),c.y=e*Math.cos(n+y*s),c.z=e*Math.sin(r+S*a)*Math.sin(n+y*s),p.push(c.x,c.y,c.z),d.copy(c).normalize(),f.push(d.x,d.y,d.z),v.push(S+b,1-y),g.push(l++)}u.push(g)}for(let m=0;m<i;m++)for(let g=0;g<t;g++){let y=u[m][g+1],b=u[m][g],x=u[m+1][g],S=u[m+1][g+1];(m!==0||n>0)&&h.push(y,b,S),(m!==i-1||o<Math.PI)&&h.push(b,x,S)}this.setIndex(h),this.setAttribute("position",new ri(p,3)),this.setAttribute("normal",new ri(f,3)),this.setAttribute("uv",new ri(v,2))}static fromJSON(e){return new Ah(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},IR=class extends Mi{constructor(e=1,t=.4,i=12,r=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:a},i=Math.floor(i),r=Math.floor(r);let n=[],s=[],o=[],l=[],u=new V,c=new V,d=new V;for(let h=0;h<=i;h++)for(let p=0;p<=r;p++){let f=p/r*a,v=h/i*Math.PI*2;c.x=(e+t*Math.cos(v))*Math.cos(f),c.y=(e+t*Math.cos(v))*Math.sin(f),c.z=t*Math.sin(v),s.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),d.subVectors(c,u).normalize(),o.push(d.x,d.y,d.z),l.push(p/r),l.push(h/i)}for(let h=1;h<=i;h++)for(let p=1;p<=r;p++){let f=(r+1)*h+p-1,v=(r+1)*(h-1)+p-1,m=(r+1)*(h-1)+p,g=(r+1)*h+p;n.push(f,v,g),n.push(v,m,g)}this.setIndex(n),this.setAttribute("position",new ri(s,3)),this.setAttribute("normal",new ri(o,3)),this.setAttribute("uv",new ri(l,2))}static fromJSON(e){return new IR(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},LR=class extends Mi{constructor(e=1,t=.4,i=64,r=8,a=2,n=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:a,q:n},i=Math.floor(i),r=Math.floor(r);let s=[],o=[],l=[],u=[],c=new V,d=new V,h=new V,p=new V,f=new V,v=new V,m=new V;for(let y=0;y<=i;++y){let b=y/i*a*Math.PI*2;g(b,a,n,e,h),g(b+.01,a,n,e,p),v.subVectors(p,h),m.addVectors(p,h),f.crossVectors(v,m),m.crossVectors(f,v),f.normalize(),m.normalize();for(let x=0;x<=r;++x){let S=x/r*Math.PI*2,w=-t*Math.cos(S),E=t*Math.sin(S);c.x=h.x+(w*m.x+E*f.x),c.y=h.y+(w*m.y+E*f.y),c.z=h.z+(w*m.z+E*f.z),o.push(c.x,c.y,c.z),d.subVectors(c,h).normalize(),l.push(d.x,d.y,d.z),u.push(y/i),u.push(x/r)}}for(let y=1;y<=i;y++)for(let b=1;b<=r;b++){let x=(r+1)*(y-1)+(b-1),S=(r+1)*y+(b-1),w=(r+1)*y+b,E=(r+1)*(y-1)+b;s.push(x,S,E),s.push(S,w,E)}this.setIndex(s),this.setAttribute("position",new ri(o,3)),this.setAttribute("normal",new ri(l,3)),this.setAttribute("uv",new ri(u,2));function g(y,b,x,S,w){let E=Math.cos(y),M=Math.sin(y),P=x/b*y,A=Math.cos(P);w.x=S*(2+A)*.5*E,w.y=S*(2+A)*M*.5,w.z=S*Math.sin(P)*.5}}static fromJSON(e){return new LR(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}};function _u(e,t,i){return BR(e)?new e.constructor(e.subarray(t,i!==void 0?i:e.length)):e.slice(t,i)}function Pv(e,t,i){return!e||e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)}function BR(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function lQ(e){function t(a,n){return e[a]-e[n]}let i=e.length,r=new Array(i);for(let a=0;a!==i;++a)r[a]=a;return r.sort(t),r}function HT(e,t,i){let r=e.length,a=new e.constructor(r);for(let n=0,s=0;s!==r;++n){let o=i[n]*t;for(let l=0;l!==t;++l)a[s++]=e[o+l]}return a}function zR(e,t,i,r){let a=1,n=e[0];for(;n!==void 0&&n[r]===void 0;)n=e[a++];if(n===void 0)return;let s=n[r];if(s!==void 0)if(Array.isArray(s))do s=n[r],s!==void 0&&(t.push(n.time),i.push.apply(i,s)),n=e[a++];while(n!==void 0);else if(s.toArray!==void 0)do s=n[r],s!==void 0&&(t.push(n.time),s.toArray(i,i.length)),n=e[a++];while(n!==void 0);else do s=n[r],s!==void 0&&(t.push(n.time),i.push(s)),n=e[a++];while(n!==void 0)}var Fb=class{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,r=t[i],a=t[i-1];e:{t:{let n;i:{r:if(!(e<r)){for(let s=i+2;;){if(r===void 0){if(e<a)break r;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(a=r,r=t[++i],e<r)break t}n=t.length;break i}if(!(e>=a)){let s=t[1];e<s&&(i=2,a=s);for(let o=i-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(r=a,a=t[--i-1],e>=a)break t}n=i,i=0;break i}break e}for(;i<n;){let s=i+n>>>1;e<t[s]?n=s:i=s+1}if(r=t[i],a=t[i-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,a,r)}return this.interpolate_(i,a,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r;for(let n=0;n!==r;++n)t[n]=i[a+n];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},uQ=class extends Fb{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:mh,endingEnd:mh}}intervalChanged_(e,t,i){let r=this.parameterPositions,a=e-2,n=e+1,s=r[a],o=r[n];if(s===void 0)switch(this.getSettings_().endingStart){case vh:a=e,s=2*t-i;break;case oy:a=r.length-2,s=t+r[a]-r[a+1];break;default:a=e,s=i}if(o===void 0)switch(this.getSettings_().endingEnd){case vh:n=e,o=2*i-t;break;case oy:n=1,o=i+r[1]-r[0];break;default:n=e-1,o=t}let l=(i-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=a*u,this._offsetNext=n*u}interpolate_(e,t,i,r){let a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),f=p*p,v=f*p,m=-d*v+2*d*f-d*p,g=(1+d)*v+(-1.5-2*d)*f+(-.5+d)*p+1,y=(-1-h)*v+(1.5+h)*f+.5*p,b=h*v-h*f;for(let x=0;x!==s;++x)a[x]=m*n[u+x]+g*n[l+x]+y*n[o+x]+b*n[c+x];return a}},RR=class extends Fb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(i-t)/(r-t),c=1-u;for(let d=0;d!==s;++d)a[d]=n[l+d]*c+n[o+d]*u;return a}},cQ=class extends Fb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}},xl=class{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pv(t,this.TimeBufferType),this.values=Pv(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Pv(e.times,Array),values:Pv(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new cQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new RR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new uQ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ny:t=this.InterpolantFactoryMethodDiscrete;break;case sy:t=this.InterpolantFactoryMethodLinear;break;case ew:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ny;case this.InterpolantFactoryMethodLinear:return sy;case this.InterpolantFactoryMethodSmooth:return ew}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){let i=this.times,r=i.length,a=0,n=r-1;for(;a!==r&&i[a]<e;)++a;for(;n!==-1&&i[n]>t;)--n;if(++n,a!==0||n!==r){a>=n&&(n=Math.max(n,1),a=n-1);let s=this.getValueSize();this.times=_u(i,a,n),this.values=_u(this.values,a*s,n*s)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let i=this.times,r=this.values,a=i.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let n=null;for(let s=0;s!==a;s++){let o=i[s];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(n!==null&&n>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,n),e=!1;break}n=o}if(r!==void 0&&BR(r))for(let s=0,o=r.length;s!==o;++s){let l=r[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e}optimize(){let e=_u(this.times),t=_u(this.values),i=this.getValueSize(),r=this.getInterpolation()===ew,a=e.length-1,n=1;for(let s=1;s<a;++s){let o=!1,l=e[s],u=e[s+1];if(l!==u&&(s!==1||l!==e[0]))if(r)o=!0;else{let c=s*i,d=c-i,h=c+i;for(let p=0;p!==i;++p){let f=t[c+p];if(f!==t[d+p]||f!==t[h+p]){o=!0;break}}}if(o){if(s!==n){e[n]=e[s];let c=s*i,d=n*i;for(let h=0;h!==i;++h)t[d+h]=t[c+h]}++n}}if(a>0){e[n]=e[a];for(let s=a*i,o=n*i,l=0;l!==i;++l)t[o+l]=t[s+l];++n}return n!==e.length?(this.times=_u(e,0,n),this.values=_u(t,0,n*i)):(this.times=e,this.values=t),this}clone(){let e=_u(this.times,0),t=_u(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};xl.prototype.TimeBufferType=Float32Array;xl.prototype.ValueBufferType=Float32Array;xl.prototype.DefaultInterpolation=sy;var mp=class extends xl{};mp.prototype.ValueTypeName="bool";mp.prototype.ValueBufferType=Array;mp.prototype.DefaultInterpolation=ny;mp.prototype.InterpolantFactoryMethodLinear=void 0;mp.prototype.InterpolantFactoryMethodSmooth=void 0;var NR=class extends xl{};NR.prototype.ValueTypeName="color";var py=class extends xl{};py.prototype.ValueTypeName="number";var dQ=class extends Fb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){let a=this.resultBuffer,n=this.sampleValues,s=this.valueSize,o=(i-t)/(r-t),l=e*s;for(let u=l+s;l!==u;l+=4)Ui.slerpFlat(a,0,n,l-s,n,l,o);return a}},Lm=class extends xl{InterpolantFactoryMethodLinear(e){return new dQ(this.times,this.values,this.getValueSize(),e)}};Lm.prototype.ValueTypeName="quaternion";Lm.prototype.DefaultInterpolation=sy;Lm.prototype.InterpolantFactoryMethodSmooth=void 0;var vp=class extends xl{};vp.prototype.ValueTypeName="string";vp.prototype.ValueBufferType=Array;vp.prototype.DefaultInterpolation=ny;vp.prototype.InterpolantFactoryMethodLinear=void 0;vp.prototype.InterpolantFactoryMethodSmooth=void 0;var fy=class extends xl{};fy.prototype.ValueTypeName="vector";var $_=class{constructor(e,t=-1,i,r=_E){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Zs(),this.duration<0&&this.resetDuration()}static parse(e){let t=[],i=e.tracks,r=1/(e.fps||1);for(let n=0,s=i.length;n!==s;++n)t.push(pQ(i[n]).scale(r));let a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){let t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,n=i.length;a!==n;++a)t.push(xl.toJSON(i[a]));return r}static CreateFromMorphTargetSequence(e,t,i,r){let a=t.length,n=[];for(let s=0;s<a;s++){let o=[],l=[];o.push((s+a-1)%a,s,(s+1)%a),l.push(0,1,0);let u=lQ(o);o=HT(o,1,u),l=HT(l,1,u),!r&&o[0]===0&&(o.push(a),l.push(l[0])),n.push(new py(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new this(e,-1,n)}static findByName(e,t){let i=e;if(!Array.isArray(e)){let r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){let r={},a=/^([\w-]*?)([\d]+)$/;for(let s=0,o=e.length;s<o;s++){let l=e[s],u=l.name.match(a);if(u&&u.length>1){let c=u[1],d=r[c];d||(r[c]=d=[]),d.push(l)}}let n=[];for(let s in r)n.push(this.CreateFromMorphTargetSequence(s,r[s],t,i));return n}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let i=function(u,c,d,h,p){if(d.length!==0){let f=[],v=[];zR(d,f,v,h),f.length!==0&&p.push(new u(c,f,v))}},r=[],a=e.name||"default",n=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let u=0;u<l.length;u++){let c=l[u].keys;if(!(!c||c.length===0))if(c[0].morphTargets){let d={},h;for(h=0;h<c.length;h++)if(c[h].morphTargets)for(let p=0;p<c[h].morphTargets.length;p++)d[c[h].morphTargets[p]]=-1;for(let p in d){let f=[],v=[];for(let m=0;m!==c[h].morphTargets.length;++m){let g=c[h];f.push(g.time),v.push(g.morphTarget===p?1:0)}r.push(new py(".morphTargetInfluence["+p+"]",f,v))}o=d.length*n}else{let d=".bones["+t[u].name+"]";i(fy,d+".position",c,"pos",r),i(Lm,d+".quaternion",c,"rot",r),i(fy,d+".scale",c,"scl",r)}}return r.length===0?null:new this(a,o,r,s)}resetDuration(){let e=this.tracks,t=0;for(let i=0,r=e.length;i!==r;++i){let a=this.tracks[i];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function hQ(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return py;case"vector":case"vector2":case"vector3":case"vector4":return fy;case"color":return NR;case"quaternion":return Lm;case"bool":case"boolean":return mp;case"string":return vp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function pQ(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=hQ(e.type);if(e.times===void 0){let i=[],r=[];zR(e.keys,i,r,"value"),e.times=i,e.values=r}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var my={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},VR=class{constructor(e,t,i){let r=this,a=!1,n=0,s=0,o,l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){s++,a===!1&&r.onStart!==void 0&&r.onStart(u,n,s),a=!0},this.itemEnd=function(u){n++,r.onProgress!==void 0&&r.onProgress(u,n,s),n===s&&(a=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return o?o(u):u},this.setURLModifier=function(u){return o=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){let c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(let c=0,d=l.length;c<d;c+=2){let h=l[c],p=l[c+1];if(h.global&&(h.lastIndex=0),h.test(u))return p}return null}}},fQ=new VR,Bm=class{constructor(e){this.manager=e!==void 0?e:fQ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let i=this;return new Promise(function(r,a){i.load(e,r,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}},Tl={},mQ=class extends Error{constructor(e,t){super(e),this.response=t}},U_=class extends Bm{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=my.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(Tl[e]!==void 0){Tl[e].push({onLoad:t,onProgress:i,onError:r});return}Tl[e]=[],Tl[e].push({onLoad:t,onProgress:i,onError:r});let n=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(n).then(l=>{if(l.status===200||l.status===0){if(l.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||l.body===void 0||l.body.getReader===void 0)return l;let u=Tl[e],c=l.body.getReader(),d=l.headers.get("Content-Length")||l.headers.get("X-File-Size"),h=d?parseInt(d):0,p=h!==0,f=0,v=new ReadableStream({start(m){g();function g(){c.read().then(({done:y,value:b})=>{if(y)m.close();else{f+=b.byteLength;let x=new ProgressEvent("progress",{lengthComputable:p,loaded:f,total:h});for(let S=0,w=u.length;S<w;S++){let E=u[S];E.onProgress&&E.onProgress(x)}m.enqueue(b),g()}})}}});return new Response(v)}else throw new mQ(`fetch for "${l.url}" responded with ${l.status}: ${l.statusText}`,l)}).then(l=>{switch(o){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,s));case"json":return l.json();default:if(s===void 0)return l.text();{let u=/charset="?([^;"\s]*)"?/i.exec(s),c=u&&u[1]?u[1].toLowerCase():void 0,d=new TextDecoder(c);return l.arrayBuffer().then(h=>d.decode(h))}}}).then(l=>{my.add(e,l);let u=Tl[e];delete Tl[e];for(let c=0,d=u.length;c<d;c++){let h=u[c];h.onLoad&&h.onLoad(l)}}).catch(l=>{let u=Tl[e];if(u===void 0)throw this.manager.itemError(e),l;delete Tl[e];for(let c=0,d=u.length;c<d;c++){let h=u[c];h.onError&&h.onError(l)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}},vQ=class extends Bm{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let a=this,n=my.get(e);if(n!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(n),a.manager.itemEnd(e)},0),n;let s=em("img");function o(){u(),my.add(e,this),t&&t(this),a.manager.itemEnd(e)}function l(c){u(),r&&r(c),a.manager.itemError(e),a.manager.itemEnd(e)}function u(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s}},gQ=class extends Bm{constructor(e){super(e)}load(e,t,i,r){let a=new aa,n=new vQ(this.manager);return n.setCrossOrigin(this.crossOrigin),n.setPath(this.path),n.load(e,function(s){a.image=s,a.needsUpdate=!0,t!==void 0&&t(a)},i,r),a}},zm=class extends Tr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Bi(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}},yQ=class extends zm{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bi(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}},kw=new zt,GT=new V,qT=new V,zE=class{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new PE,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new Wi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,i=this.matrix;GT.setFromMatrixPosition(e.matrixWorld),t.position.copy(GT),qT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qT),t.updateMatrixWorld(),kw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(kw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(kw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}},bQ=class extends zE{constructor(){super(new Bn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){let t=this.camera,i=Jf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(i!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}},wQ=class extends zm{constructor(e,t,i=0,r=Math.PI/3,a=0,n=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.distance=i,this.angle=r,this.penumbra=a,this.decay=n,this.map=null,this.shadow=new bQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},YT=new zt,jp=new V,Ow=new V,xQ=class extends zE{constructor(){super(new Bn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new Wi(2,1,1,1),new Wi(0,1,1,1),new Wi(3,1,1,1),new Wi(1,1,1,1),new Wi(3,0,1,1),new Wi(1,0,1,1)],this._cubeDirections=[new V(1,0,0),new V(-1,0,0),new V(0,0,1),new V(0,0,-1),new V(0,1,0),new V(0,-1,0)],this._cubeUps=[new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,1,0),new V(0,0,1),new V(0,0,-1)]}updateMatrices(e,t=0){let i=this.camera,r=this.matrix,a=e.distance||i.far;a!==i.far&&(i.far=a,i.updateProjectionMatrix()),jp.setFromMatrixPosition(e.matrixWorld),i.position.copy(jp),Ow.copy(i.position),Ow.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Ow),i.updateMatrixWorld(),r.makeTranslation(-jp.x,-jp.y,-jp.z),YT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YT)}},SQ=class extends zm{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new xQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}},CQ=class extends zE{constructor(){super(new zb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},_Q=class extends zm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tr.DEFAULT_UP),this.updateMatrix(),this.target=new Tr,this.shadow=new CQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},FR=class extends Mi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}},jR=class extends Bm{constructor(e){super(e)}load(e,t,i,r){let a=this,n=new U_(a.manager);n.setPath(a.path),n.setRequestHeader(a.requestHeader),n.setWithCredentials(a.withCredentials),n.load(e,function(s){try{t(a.parse(JSON.parse(s)))}catch(o){r?r(o):console.error(o),a.manager.itemError(e)}},i,r)}parse(e){let t={},i={};function r(d,h){if(t[h]!==void 0)return t[h];let p=d.interleavedBuffers[h],f=a(d,p.buffer),v=av(p.type,f),m=new PZ(v,p.stride);return m.uuid=p.uuid,t[h]=m,m}function a(d,h){if(i[h]!==void 0)return i[h];let p=d.arrayBuffers[h],f=new Uint32Array(p).buffer;return i[h]=f,f}let n=e.isInstancedBufferGeometry?new FR:new Mi,s=e.data.index;if(s!==void 0){let d=av(s.type,s.array);n.setIndex(new ji(d,1))}let o=e.data.attributes;for(let d in o){let h=o[d],p;if(h.isInterleavedBufferAttribute){let f=r(e.data,h.data);p=new V_(f,h.itemSize,h.offset,h.normalized)}else{let f=av(h.type,h.array),v=h.isInstancedBufferAttribute?tm:ji;p=new v(f,h.itemSize,h.normalized)}h.name!==void 0&&(p.name=h.name),h.usage!==void 0&&p.setUsage(h.usage),h.updateRange!==void 0&&(p.updateRange.offset=h.updateRange.offset,p.updateRange.count=h.updateRange.count),n.setAttribute(d,p)}let l=e.data.morphAttributes;if(l)for(let d in l){let h=l[d],p=[];for(let f=0,v=h.length;f<v;f++){let m=h[f],g;if(m.isInterleavedBufferAttribute){let y=r(e.data,m.data);g=new V_(y,m.itemSize,m.offset,m.normalized)}else{let y=av(m.type,m.array);g=new ji(y,m.itemSize,m.normalized)}m.name!==void 0&&(g.name=m.name),p.push(g)}n.morphAttributes[d]=p}e.data.morphTargetsRelative&&(n.morphTargetsRelative=!0);let u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let d=0,h=u.length;d!==h;++d){let p=u[d];n.addGroup(p.start,p.count,p.materialIndex)}let c=e.data.boundingSphere;if(c!==void 0){let d=new V;c.center!==void 0&&d.fromArray(c.center),n.boundingSphere=new ws(d,c.radius)}return e.name&&(n.name=e.name),e.userData&&(n.userData=e.userData),n}},MQ=class{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=XT();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}};function XT(){return(typeof performance>"u"?Date:performance).now()}var EQ=class{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,a,n;switch(t){case"quaternion":r=this._slerp,a=this._slerpAdditive,n=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,n=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,a=this._lerpAdditive,n=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=n,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let i=this.buffer,r=this.valueSize,a=e*r+r,n=this.cumulativeWeight;if(n===0){for(let s=0;s!==r;++s)i[a+s]=i[s];n=t}else{n+=t;let s=t/n;this._mixBufferRegion(i,a,0,s,r)}this.cumulativeWeight=n}accumulateAdditive(e){let t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,i=this.buffer,r=e*t+t,a=this.cumulativeWeight,n=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){let o=t*this._origIndex;this._mixBufferRegion(i,r,o,1-a,t)}n>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){s.setValue(i,r);break}}saveOriginalState(){let e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let a=i,n=r;a!==n;++a)t[a]=t[r+a%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,a){if(r>=.5)for(let n=0;n!==a;++n)e[t+n]=e[i+n]}_slerp(e,t,i,r){Ui.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,a){let n=this._workIndex*a;Ui.multiplyQuaternionsFlat(e,n,e,t,e,i),Ui.slerpFlat(e,t,e,t,e,n,r)}_lerp(e,t,i,r,a){let n=1-r;for(let s=0;s!==a;++s){let o=t+s;e[o]=e[o]*n+e[i+s]*r}}_lerpAdditive(e,t,i,r,a){for(let n=0;n!==a;++n){let s=t+n;e[s]=e[s]+e[i+n]*r}}},RE="\\[\\]\\.:\\/",AQ=new RegExp("["+RE+"]","g"),NE="[^"+RE+"]",PQ="[^"+RE.replace("\\.","")+"]",TQ=/((?:WC+[\/:])*)/.source.replace("WC",NE),kQ=/(WCOD+)?/.source.replace("WCOD",PQ),OQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",NE),DQ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",NE),IQ=new RegExp("^"+TQ+kQ+OQ+DQ+"$"),LQ=["material","materials","bones","map"],BQ=class{constructor(e,t,i){let r=i||Rr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,a=i.length;r!==a;++r)i[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Rr=class{constructor(e,t,i){this.path=t,this.parsedPath=i||Rr.parseTrackName(t),this.node=Rr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Rr.Composite(e,t,i):new Rr(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(AQ,"")}static parseTrackName(e){let t=IQ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){let a=i.nodeName.substring(r+1);LQ.indexOf(a)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=a)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){let i=function(a){for(let n=0;n<a.length;n++){let s=a[n];if(s.name===t||s.uuid===t)return s;let o=i(s.children);if(o)return o}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let r=0,a=i.length;r!==a;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,a=t.propertyIndex;if(e||(e=Rr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let l=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}let n=e[r];if(n===void 0){let l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(a!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}o=this.BindingType.ArrayElement,this.resolvedProperty=n,this.propertyIndex=a}else n.fromArray!==void 0&&n.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=n):Array.isArray(n)?(o=this.BindingType.EntireArray,this.resolvedProperty=n):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Rr.Composite=BQ;Rr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rr.prototype.GetterByBindingType=[Rr.prototype._getValue_direct,Rr.prototype._getValue_array,Rr.prototype._getValue_arrayElement,Rr.prototype._getValue_toArray];Rr.prototype.SetterByBindingTypeAndVersioning=[[Rr.prototype._setValue_direct,Rr.prototype._setValue_direct_setNeedsUpdate,Rr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_array,Rr.prototype._setValue_array_setNeedsUpdate,Rr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_arrayElement,Rr.prototype._setValue_arrayElement_setNeedsUpdate,Rr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rr.prototype._setValue_fromArray,Rr.prototype._setValue_fromArray_setNeedsUpdate,Rr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var zQ=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;let a=t.tracks,n=a.length,s=new Array(n),o={endingStart:mh,endingEnd:mh};for(let l=0;l!==n;++l){let u=a[l].createInterpolant(null);s[l]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=nR,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){let r=this._clip.duration,a=e._clip.duration,n=a/r,s=r/a;e.warp(1,n,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){let e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){let r=this._mixer,a=r.time,n=this.timeScale,s=this._timeScaleInterpolant;s===null&&(s=r._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=a,o[1]=a+i,l[0]=e/n,l[1]=t/n,this}stopWarping(){let e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}let a=this._startTime;if(a!==null){let o=(e-a)*i;o<0||i===0?t=0:(this._startTime=null,t=i*o)}t*=this._updateTimeScale(e);let n=this._updateTime(t),s=this._updateWeight(e);if(s>0){let o=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case hG:for(let u=0,c=o.length;u!==c;++u)o[u].evaluate(n),l[u].accumulateAdditive(s);break;case _E:default:for(let u=0,c=o.length;u!==c;++u)o[u].evaluate(n),l[u].accumulate(r,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let i=this._weightInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,i=this.loop,r=this.time+e,a=this._loopCount,n=i===CE;if(e===0)return a===-1?r:n&&(a&1)===1?t-r:r;if(i===aR){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,n)):this._setEndings(this.repetitions===0,!0,n)),r>=t||r<0){let s=Math.floor(r/t);r-=t*s,a+=Math.abs(s);let o=this.repetitions-a;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(o===1){let l=e<0;this._setEndings(l,!l,n)}else this._setEndings(!1,!1,n);this._loopCount=a,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}else this.time=r;if(n&&(a&1)===1)return t-r}return r}_setEndings(e,t,i){let r=this._interpolantSettings;i?(r.endingStart=vh,r.endingEnd=vh):(e?r.endingStart=this.zeroSlopeAtStart?vh:mh:r.endingStart=oy,t?r.endingEnd=this.zeroSlopeAtEnd?vh:mh:r.endingEnd=oy)}_scheduleFading(e,t,i){let r=this._mixer,a=r.time,n=this._weightInterpolant;n===null&&(n=r._lendControlInterpolant(),this._weightInterpolant=n);let s=n.parameterPositions,o=n.sampleValues;return s[0]=a,o[0]=t,s[1]=a+e,o[1]=i,this}},RQ=new Float32Array(1),NQ=class extends On{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let i=e._localRoot||this._root,r=e._clip.tracks,a=r.length,n=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,u=l[o];u===void 0&&(u={},l[o]=u);for(let c=0;c!==a;++c){let d=r[c],h=d.name,p=u[h];if(p!==void 0)++p.referenceCount,n[c]=p;else{if(p=n[c],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,o,h));continue}let f=t&&t._propertyBindings[c].binding.parsedPath;p=new EQ(Rr.create(i,h,f),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,h),n[c]=p}s[c].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){let i=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,i)}let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let a=t[i];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let a=t[i];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){let r=this._actions,a=this._actionsByClip,n=a[t];if(n===void 0)n={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=n;else{let s=n.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),n.actionByRoot[i]=e}_removeInactiveAction(e){let t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;let a=e._clip.uuid,n=this._actionsByClip,s=n[a],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null;let c=s.actionByRoot,d=(e._localRoot||this._root).uuid;delete c[d],o.length===0&&delete n[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){let a=t[i];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){let t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackAction(e){let t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_addInactiveBinding(e,t,i){let r=this._bindingsByRootAndName,a=this._bindings,n=r[t];n===void 0&&(n={},r[t]=n),n[i]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){let t=this._bindings,i=e.binding,r=i.rootNode.uuid,a=i.path,n=this._bindingsByRootAndName,s=n[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[a],Object.keys(s).length===0&&delete n[r]}_lendBinding(e){let t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_takeBackBinding(e){let t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=i,t[i]=a}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return i===void 0&&(i=new RR(new Float32Array(2),new Float32Array(2),1,RQ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){let t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=i,t[i]=a}clipAction(e,t,i){let r=t||this._root,a=r.uuid,n=typeof e=="string"?$_.findByName(r,e):e,s=n!==null?n.uuid:e,o=this._actionsByClip[s],l=null;if(i===void 0&&(n!==null?i=n.blendMode:i=_E),o!==void 0){let c=o.actionByRoot[a];if(c!==void 0&&c.blendMode===i)return c;l=o.knownActions[0],n===null&&(n=l._clip)}if(n===null)return null;let u=new zQ(this,n,t,i);return this._bindAction(u,l),this._addInactiveAction(u,s,a),u}existingAction(e,t){let i=t||this._root,r=i.uuid,a=typeof e=="string"?$_.findByName(i,e):e,n=a?a.uuid:e,s=this._actionsByClip[n];return s!==void 0&&s.actionByRoot[r]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;let t=this._actions,i=this._nActiveActions,r=this.time+=e,a=Math.sign(e),n=this._accuIndex^=1;for(let l=0;l!==i;++l)t[l]._update(r,e,a,n);let s=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)s[l].apply(n);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,i=e.uuid,r=this._actionsByClip,a=r[i];if(a!==void 0){let n=a.knownActions;for(let s=0,o=n.length;s!==o;++s){let l=n[s];this._deactivateAction(l);let u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}}uncacheRoot(e){let t=e.uuid,i=this._actionsByClip;for(let n in i){let s=i[n].actionByRoot,o=s[t];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}let r=this._bindingsByRootAndName,a=r[t];if(a!==void 0)for(let n in a){let s=a[n];s.restoreOriginalState(),this._removeInactiveBinding(s)}}uncacheAction(e,t){let i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}},Pt=class{constructor(e){this.value=e}clone(){return new Pt(this.value.clone===void 0?this.value:this.value.clone())}},$R=class{constructor(e,t,i=0,r=1/0){this.ray=new hp(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new EE,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return W_(e,this,i,t),i.sort(KT),i}intersectObjects(e,t=!0,i=[]){for(let r=0,a=e.length;r<a;r++)W_(e[r],this,i,t);return i.sort(KT),i}};function KT(e,t){return e.distance-t.distance}function W_(e,t,i,r){if(e.layers.test(t.layers)&&e.raycast(t,i),r===!0){let a=e.children;for(let n=0,s=a.length;n<s;n++)W_(a[n],t,i,!0)}}var ZT=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ma(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},QT=new Ce,UR=class{constructor(e=new Ce(1/0,1/0),t=new Ce(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=QT.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return QT.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},JT=new V,Tv=new V,Qs=class{constructor(e=new V,t=new V){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){JT.subVectors(e,this.start),Tv.subVectors(this.end,this.start);let i=Tv.dot(Tv),r=Tv.dot(JT)/i;return t&&(r=Ma(r,0,1)),r}closestPointToPoint(e,t,i){let r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},ek=new V,VQ=class extends Tr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";let i=new Mi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let n=0,s=1,o=32;n<o;n++,s++){let l=n/o*Math.PI*2,u=s/o*Math.PI*2;r.push(Math.cos(l),Math.sin(l),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ri(r,3));let a=new vc({fog:!1,toneMapped:!1});this.cone=new Im(i,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),ek.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ek),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},FQ=class extends ra{constructor(e,t,i){let r=new Ah(t,4,2),a=new nu({wireframe:!0,fog:!1,toneMapped:!1});super(r,a),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},tk=new V,kv=new V,ik=new V,jQ=class extends Tr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Mi;r.setAttribute("position",new ri([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));let a=new vc({fog:!1,toneMapped:!1});this.lightPlane=new cy(r,a),this.add(this.lightPlane),r=new Mi,r.setAttribute("position",new ri([0,0,0,0,0,1],3)),this.targetLine=new cy(r,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),tk.setFromMatrixPosition(this.light.matrixWorld),kv.setFromMatrixPosition(this.light.target.matrixWorld),ik.subVectors(kv,tk),this.lightPlane.lookAt(kv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kv),this.targetLine.scale.z=ik.length()}},Ov=new V,oa=new wd,vy=class extends Im{constructor(e){let t=new Mi,i=new vc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],n={};s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4");function s(p,f){o(p),o(f)}function o(p){r.push(0,0,0),a.push(0,0,0),n[p]===void 0&&(n[p]=[]),n[p].push(r.length/3-1)}t.setAttribute("position",new ri(r,3)),t.setAttribute("color",new ri(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=n,this.update();let l=new Bi(16755200),u=new Bi(16711680),c=new Bi(43775),d=new Bi(16777215),h=new Bi(3355443);this.setColors(l,u,c,d,h)}setColors(e,t,i,r,a){let n=this.geometry.getAttribute("color");n.setXYZ(0,e.r,e.g,e.b),n.setXYZ(1,e.r,e.g,e.b),n.setXYZ(2,e.r,e.g,e.b),n.setXYZ(3,e.r,e.g,e.b),n.setXYZ(4,e.r,e.g,e.b),n.setXYZ(5,e.r,e.g,e.b),n.setXYZ(6,e.r,e.g,e.b),n.setXYZ(7,e.r,e.g,e.b),n.setXYZ(8,e.r,e.g,e.b),n.setXYZ(9,e.r,e.g,e.b),n.setXYZ(10,e.r,e.g,e.b),n.setXYZ(11,e.r,e.g,e.b),n.setXYZ(12,e.r,e.g,e.b),n.setXYZ(13,e.r,e.g,e.b),n.setXYZ(14,e.r,e.g,e.b),n.setXYZ(15,e.r,e.g,e.b),n.setXYZ(16,e.r,e.g,e.b),n.setXYZ(17,e.r,e.g,e.b),n.setXYZ(18,e.r,e.g,e.b),n.setXYZ(19,e.r,e.g,e.b),n.setXYZ(20,e.r,e.g,e.b),n.setXYZ(21,e.r,e.g,e.b),n.setXYZ(22,e.r,e.g,e.b),n.setXYZ(23,e.r,e.g,e.b),n.setXYZ(24,t.r,t.g,t.b),n.setXYZ(25,t.r,t.g,t.b),n.setXYZ(26,t.r,t.g,t.b),n.setXYZ(27,t.r,t.g,t.b),n.setXYZ(28,t.r,t.g,t.b),n.setXYZ(29,t.r,t.g,t.b),n.setXYZ(30,t.r,t.g,t.b),n.setXYZ(31,t.r,t.g,t.b),n.setXYZ(32,i.r,i.g,i.b),n.setXYZ(33,i.r,i.g,i.b),n.setXYZ(34,i.r,i.g,i.b),n.setXYZ(35,i.r,i.g,i.b),n.setXYZ(36,i.r,i.g,i.b),n.setXYZ(37,i.r,i.g,i.b),n.setXYZ(38,r.r,r.g,r.b),n.setXYZ(39,r.r,r.g,r.b),n.setXYZ(40,a.r,a.g,a.b),n.setXYZ(41,a.r,a.g,a.b),n.setXYZ(42,a.r,a.g,a.b),n.setXYZ(43,a.r,a.g,a.b),n.setXYZ(44,a.r,a.g,a.b),n.setXYZ(45,a.r,a.g,a.b),n.setXYZ(46,a.r,a.g,a.b),n.setXYZ(47,a.r,a.g,a.b),n.setXYZ(48,a.r,a.g,a.b),n.setXYZ(49,a.r,a.g,a.b),n.needsUpdate=!0}update(){let e=this.geometry,t=this.pointMap,i=1,r=1;oa.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pa("c",t,e,oa,0,0,-1),pa("t",t,e,oa,0,0,1),pa("n1",t,e,oa,-i,-r,-1),pa("n2",t,e,oa,i,-r,-1),pa("n3",t,e,oa,-i,r,-1),pa("n4",t,e,oa,i,r,-1),pa("f1",t,e,oa,-i,-r,1),pa("f2",t,e,oa,i,-r,1),pa("f3",t,e,oa,-i,r,1),pa("f4",t,e,oa,i,r,1),pa("u1",t,e,oa,i*.7,r*1.1,-1),pa("u2",t,e,oa,-i*.7,r*1.1,-1),pa("u3",t,e,oa,0,r*2,-1),pa("cf1",t,e,oa,-i,0,1),pa("cf2",t,e,oa,i,0,1),pa("cf3",t,e,oa,0,-r,1),pa("cf4",t,e,oa,0,r,1),pa("cn1",t,e,oa,-i,0,-1),pa("cn2",t,e,oa,i,0,-1),pa("cn3",t,e,oa,0,-r,-1),pa("cn4",t,e,oa,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function pa(e,t,i,r,a,n,s){Ov.set(a,n,s).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],Ov.x,Ov.y,Ov.z)}}var gy=class extends Im{constructor(e,t=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new Mi;a.setIndex(new ji(i,1)),a.setAttribute("position",new ri(r,3)),super(a,new vc({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},$Q=class extends Im{constructor(e=1){let t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Mi;r.setAttribute("position",new ri(t,3)),r.setAttribute("color",new ri(i,3));let a=new vc({vertexColors:!0,toneMapped:!1});super(r,a),this.type="AxesHelper"}setColors(e,t,i){let r=new Bi,a=this.geometry.attributes.color.array;return r.set(e),r.toArray(a,0),r.toArray(a,3),r.set(t),r.toArray(a,6),r.toArray(a,9),r.set(i),r.toArray(a,12),r.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Wl=UQ();function UQ(){let e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),r=new Uint32Array(512),a=new Uint32Array(512);for(let l=0;l<256;++l){let u=l-127;u<-27?(r[l]=0,r[l|256]=32768,a[l]=24,a[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,a[l]=-u-1,a[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,a[l]=13,a[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,a[l]=24,a[l|256]=24):(r[l]=31744,r[l|256]=64512,a[l]=13,a[l|256]=13)}let n=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,n[l]=u|c}for(let l=1024;l<2048;++l)n[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:t,uint32View:i,baseTable:r,shiftTable:a,mantissaTable:n,exponentTable:s,offsetTable:o}}function WQ(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ma(e,-65504,65504),Wl.floatView[0]=e;let t=Wl.uint32View[0],i=t>>23&511;return Wl.baseTable[i]+((t&8388607)>>Wl.shiftTable[i])}function HQ(e){let t=e>>10;return Wl.uint32View[0]=Wl.mantissaTable[Wl.offsetTable[t]+(e&1023)]+Wl.exponentTable[t],Wl.floatView[0]}var GQ=Object.freeze({__proto__:null,fromHalfFloat:HQ,toHalfFloat:WQ});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:dp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=dp);var $p=".",VE=Symbol("target"),WR=Symbol("unsubscribe");function H_(e){return e instanceof Date||e instanceof Set||e instanceof Map||e instanceof WeakSet||e instanceof WeakMap||ArrayBuffer.isView(e)}function qQ(e){return(typeof e=="object"?e===null:typeof e!="function")||e instanceof RegExp}var tl=Array.isArray;function FE(e){return typeof e=="symbol"}var YQ={after:(e,t)=>tl(e)?e.slice(t.length):t===""?e:e.slice(t.length+1),concat:(e,t)=>tl(e)?(e=[...e],t&&e.push(t),e):t&&t.toString!==void 0?(e!==""&&(e+=$p),FE(t)?e+t.toString():e+t):e,initial:e=>{if(tl(e))return e.slice(0,-1);if(e==="")return e;let t=e.lastIndexOf($p);return t===-1?"":e.slice(0,t)},last:e=>{if(tl(e))return e[e.length-1]||"";if(e==="")return e;let t=e.lastIndexOf($p);return t===-1?e:e.slice(t+1)},walk:(e,t)=>{if(tl(e))for(let i of e)t(i);else if(e!==""){let i=0,r=e.indexOf($p);if(r===-1)t(e);else for(;i<e.length;)r===-1&&(r=e.length),t(e.slice(i,r)),i=r+1,r=e.indexOf($p,i)}},get(e,t){return this.walk(t,i=>{e&&(e=e[i])}),e}},js=YQ;function XQ(e){return typeof e=="object"&&typeof e.next=="function"}function KQ(e,t,i,r,a){let n=e.next;if(t.name==="entries")e.next=function(){let s=n.call(this);return s.done===!1&&(s.value[0]=a(s.value[0],t,s.value[0],r),s.value[1]=a(s.value[1],t,s.value[0],r)),s};else if(t.name==="values"){let s=i[VE].keys();e.next=function(){let o=n.call(this);return o.done===!1&&(o.value=a(o.value,t,s.next().value,r)),o}}else e.next=function(){let s=n.call(this);return s.done===!1&&(s.value=a(s.value,t,s.value,r)),s};return e}function rk(e,t,i){return e.isUnsubscribed||t.ignoreSymbols&&FE(i)||t.ignoreUnderscores&&i.charAt(0)==="_"||"ignoreKeys"in t&&t.ignoreKeys.includes(i)}var ZQ=class{constructor(e){this._equals=e,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(e){let t=this._getDescriptorCache(),i=t.get(e);return i===void 0&&(i={},t.set(e,i)),i}_getOwnPropertyDescriptor(e,t){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(e,t);let i=this._getProperties(e),r=i[t];return r===void 0&&(r=Reflect.getOwnPropertyDescriptor(e,t),i[t]=r),r}getProxy(e,t,i,r){if(this.isUnsubscribed)return e;let a=e[r],n=a||e;this._pathCache.set(n,t);let s=this._proxyCache.get(n);return s===void 0&&(s=a===void 0?new Proxy(e,i):e,this._proxyCache.set(n,s)),s}getPath(e){return this.isUnsubscribed?void 0:this._pathCache.get(e)}isDetached(e,t){return!Object.is(e,js.get(t,this.getPath(e)))}defineProperty(e,t,i){return Reflect.defineProperty(e,t,i)?(this.isUnsubscribed||(this._getProperties(e)[t]=i),!0):!1}setProperty(e,t,i,r,a){if(!this._equals(a,i)||!(t in e)){let n=this._getOwnPropertyDescriptor(e,t);return n!==void 0&&"set"in n?Reflect.set(e,t,i,r):Reflect.set(e,t,i)}return!0}deleteProperty(e,t,i){if(Reflect.deleteProperty(e,t)){if(!this.isUnsubscribed){let r=this._getDescriptorCache().get(e);r&&(delete r[t],this._pathCache.delete(i))}return!0}return!1}isSameDescriptor(e,t,i){let r=this._getOwnPropertyDescriptor(t,i);return e!==void 0&&r!==void 0&&Object.is(e.value,r.value)&&(e.writable||!1)===(r.writable||!1)&&(e.enumerable||!1)===(r.enumerable||!1)&&(e.configurable||!1)===(r.configurable||!1)&&e.get===r.get&&e.set===r.set}isGetInvariant(e,t){let i=this._getOwnPropertyDescriptor(e,t);return i!==void 0&&i.configurable!==!0&&i.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function G_(e){return toString.call(e)==="[object Object]"}function Dv(){return!0}function Ud(e,t){return e.length!==t.length||e.some((i,r)=>t[r]!==i)}var HR=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),QQ=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),GR={push:Dv,pop:Dv,shift:Dv,unshift:Dv,copyWithin:Ud,reverse:Ud,sort:Ud,splice:Ud,flat:Ud,fill:Ud},JQ=new Set([...HR,...QQ,...Object.keys(GR)]);function Iv(e,t){if(e.size!==t.size)return!0;for(let i of e)if(!t.has(i))return!0;return!1}var qR=["keys","values","entries"],YR=new Set(["has","toString"]),XR={add:Iv,clear:Iv,delete:Iv,forEach:Iv},eJ=new Set([...YR,...Object.keys(XR),...qR]);function Lv(e,t){if(e.size!==t.size)return!0;let i;for(let[r,a]of e)if(i=t.get(r),i!==a||i===void 0&&!t.has(r))return!0;return!1}var tJ=new Set([...YR,"get"]),KR={set:Lv,clear:Lv,delete:Lv,forEach:Lv},iJ=new Set([...tJ,...Object.keys(KR),...qR]),uc=class{constructor(e,t,i,r){this._path=t,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=r,this._changes=r?[]:null,this.clone=t===void 0?e:this._shallowClone(e)}static isHandledMethod(e){return HR.has(e)}_shallowClone(e){let t=e;if(G_(e))t={...e};else if(tl(e))t=[...e];else if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set([...e].map(i=>this._shallowClone(i)));else if(e instanceof Map){t=new Map;for(let[i,r]of e.entries())t.set(i,this._shallowClone(r))}return this._clonedCache.add(t),t}preferredThisArg(e,t,i,r){return e?(tl(r)?this._onIsChanged=GR[t]:r instanceof Set?this._onIsChanged=XR[t]:r instanceof Map&&(this._onIsChanged=KR[t]),r):i}update(e,t,i){let r=js.after(e,this._path);if(t!=="length"){let a=this.clone;js.walk(r,n=>{a&&a[n]&&(this._clonedCache.has(a[n])||(a[n]=this._shallowClone(a[n])),a=a[n])}),this._hasOnValidate&&this._changes.push({path:r,property:t,previous:i}),a&&a[t]&&(a[t]=i)}this._isChanged=!0}undo(e){let t;for(let i=this._changes.length-1;i!==-1;i--)t=this._changes[i],js.get(e,t.path)[t.property]=t.previous}isChanged(e){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,e)}},ak=class extends uc{static isHandledMethod(e){return JQ.has(e)}},rJ=class extends uc{undo(e){e.setTime(this.clone.getTime())}isChanged(e,t){return!t(this.clone.valueOf(),e.valueOf())}},nk=class extends uc{static isHandledMethod(e){return eJ.has(e)}undo(e){for(let t of this.clone)e.add(t);for(let t of e)this.clone.has(t)||e.delete(t)}},sk=class extends uc{static isHandledMethod(e){return iJ.has(e)}undo(e){for(let[t,i]of this.clone.entries())e.set(t,i);for(let t of e.keys())this.clone.has(t)||e.delete(t)}},aJ=class extends uc{constructor(e,t,i,r){super(void 0,t,i,r),this._arg1=i[0],this._weakValue=e.has(this._arg1)}isChanged(e){return this._weakValue!==e.has(this._arg1)}undo(e){this._weakValue&&!e.has(this._arg1)?e.add(this._arg1):e.delete(this._arg1)}},nJ=class extends uc{constructor(e,t,i,r){super(void 0,t,i,r),this._weakKey=i[0],this._weakHas=e.has(this._weakKey),this._weakValue=e.get(this._weakKey)}isChanged(e){return this._weakValue!==e.get(this._weakKey)}undo(e){let t=e.has(this._weakKey);this._weakHas&&!t?e.set(this._weakKey,this._weakValue):!this._weakHas&&t?e.delete(this._weakKey):this._weakValue!==e.get(this._weakKey)&&e.set(this._weakKey,this._weakValue)}},oh=class{constructor(e){this._stack=[],this._hasOnValidate=e}static isHandledType(e){return G_(e)||tl(e)||H_(e)}static isHandledMethod(e,t){return G_(e)?uc.isHandledMethod(t):tl(e)?ak.isHandledMethod(t):e instanceof Set?nk.isHandledMethod(t):e instanceof Map?sk.isHandledMethod(t):H_(e)}get isCloning(){return this._stack.length>0}start(e,t,i){let r=uc;tl(e)?r=ak:e instanceof Date?r=rJ:e instanceof Set?r=nk:e instanceof Map?r=sk:e instanceof WeakSet?r=aJ:e instanceof WeakMap&&(r=nJ),this._stack.push(new r(e,t,i,this._hasOnValidate))}update(e,t,i){this._stack[this._stack.length-1].update(e,t,i)}preferredThisArg(e,t,i){let{name:r}=e,a=oh.isHandledMethod(i,r);return this._stack[this._stack.length-1].preferredThisArg(a,r,t,i)}isChanged(e,t,i){return this._stack[this._stack.length-1].isChanged(e,t,i)}undo(e){this._previousClone!==void 0&&this._previousClone.undo(e)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},sJ={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},jE=(e,t,i={})=>{i={...sJ,...i};let r=Symbol("ProxyTarget"),{equals:a,isShallow:n,ignoreDetached:s,details:o}=i,l=new ZQ(a),u=typeof i.onValidate=="function",c=new oh(u),d=(y,b,x,S,w)=>!u||c.isCloning||i.onValidate(js.concat(l.getPath(y),b),x,S,w)===!0,h=(y,b,x,S)=>{!rk(l,i,b)&&!(s&&l.isDetached(y,e))&&p(l.getPath(y),b,x,S)},p=(y,b,x,S,w)=>{c.isCloning?c.update(y,b,S):t(js.concat(y,b),x,S,w)},f=y=>y&&(y[r]||y),v=(y,b,x,S)=>qQ(y)||x==="constructor"||n&&!oh.isHandledMethod(b,x)||rk(l,i,x)||l.isGetInvariant(b,x)||s&&l.isDetached(b,e)?y:(S===void 0&&(S=l.getPath(b)),l.getProxy(y,js.concat(S,x),m,r)),m={get(y,b,x){if(FE(b)){if(b===r||b===VE)return y;if(b===WR&&!l.isUnsubscribed&&l.getPath(y).length===0)return l.unsubscribe(),y}let S=H_(y)?Reflect.get(y,b):Reflect.get(y,b,x);return v(S,y,b)},set(y,b,x,S){x=f(x);let w=y[r]||y,E=w[b];if(a(E,x)&&b in y)return!0;let M=d(y,b,x,E);return M&&l.setProperty(w,b,x,S,E)?(h(y,b,y[b],E),!0):!M},defineProperty(y,b,x){if(!l.isSameDescriptor(x,y,b)){let S=y[b];d(y,b,x.value,S)&&l.defineProperty(y,b,x,S)&&h(y,b,x.value,S)}return!0},deleteProperty(y,b){if(!Reflect.has(y,b))return!0;let x=Reflect.get(y,b),S=d(y,b,void 0,x);return S&&l.deleteProperty(y,b,x)?(h(y,b,void 0,x),!0):!S},apply(y,b,x){let S=b[r]||b;if(l.isUnsubscribed)return Reflect.apply(y,S,x);if((o===!1||o!==!0&&!o.includes(y.name))&&oh.isHandledType(S)){let w=js.initial(l.getPath(y)),E=oh.isHandledMethod(S,y.name);c.start(S,w,x);let M=Reflect.apply(y,c.preferredThisArg(y,b,S),E?x.map(k=>f(k)):x),P=c.isChanged(S,a),A=c.stop();if(oh.isHandledType(M)&&E&&(b instanceof Map&&y.name==="get"&&(w=js.concat(w,x[0])),M=l.getProxy(M,w,m)),P){let k={name:y.name,args:x,result:M},I=c.isCloning?js.initial(w):w,O=c.isCloning?js.last(w):"";d(js.get(e,I),O,S,A,k)?p(I,O,S,A,k):c.undo(S)}return(b instanceof Map||b instanceof Set)&&XQ(M)?KQ(M,y,b,w,v):M}return Reflect.apply(y,b,x)}},g=l.getProxy(e,i.pathAsArray?[]:"",m);return t=t.bind(g),u&&(i.onValidate=i.onValidate.bind(g)),g};jE.target=e=>e&&e[VE]||e;jE.unsubscribe=e=>e[WR]||e;var ok=jE,oJ=typeof global=="object"&&global&&global.Object===Object&&global,ZR=oJ,lJ=typeof self=="object"&&self&&self.Object===Object&&self,uJ=ZR||lJ||Function("return this")(),Lo=uJ,cJ=Lo.Symbol,to=cJ,QR=Object.prototype,dJ=QR.hasOwnProperty,hJ=QR.toString,Up=to?to.toStringTag:void 0;function pJ(e){var t=dJ.call(e,Up),i=e[Up];try{e[Up]=void 0;var r=!0}catch{}var a=hJ.call(e);return r&&(t?e[Up]=i:delete e[Up]),a}var fJ=pJ,mJ=Object.prototype,vJ=mJ.toString;function gJ(e){return vJ.call(e)}var yJ=gJ,bJ="[object Null]",wJ="[object Undefined]",lk=to?to.toStringTag:void 0;function xJ(e){return e==null?e===void 0?wJ:bJ:lk&&lk in Object(e)?fJ(e):yJ(e)}var xd=xJ;function SJ(e){return e!=null&&typeof e=="object"}var ou=SJ,CJ="[object Symbol]";function _J(e){return typeof e=="symbol"||ou(e)&&xd(e)==CJ}var Rm=_J;function MJ(e,t){for(var i=-1,r=e==null?0:e.length,a=Array(r);++i<r;)a[i]=t(e[i],i,e);return a}var JR=MJ,EJ=Array.isArray,vl=EJ,AJ=1/0,uk=to?to.prototype:void 0,ck=uk?uk.toString:void 0;function e6(e){if(typeof e=="string")return e;if(vl(e))return JR(e,e6)+"";if(Rm(e))return ck?ck.call(e):"";var t=e+"";return t=="0"&&1/e==-AJ?"-0":t}var PJ=e6,TJ=/\s/;function kJ(e){for(var t=e.length;t--&&TJ.test(e.charAt(t)););return t}var OJ=kJ,DJ=/^\s+/;function IJ(e){return e&&e.slice(0,OJ(e)+1).replace(DJ,"")}var LJ=IJ;function BJ(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Oo=BJ,dk=NaN,zJ=/^[-+]0x[0-9a-f]+$/i,RJ=/^0b[01]+$/i,NJ=/^0o[0-7]+$/i,VJ=parseInt;function FJ(e){if(typeof e=="number")return e;if(Rm(e))return dk;if(Oo(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Oo(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=LJ(e);var i=RJ.test(e);return i||NJ.test(e)?VJ(e.slice(2),i?2:8):zJ.test(e)?dk:+e}var hk=FJ;function jJ(e){return e}var t6=jJ,$J="[object AsyncFunction]",UJ="[object Function]",WJ="[object GeneratorFunction]",HJ="[object Proxy]";function GJ(e){if(!Oo(e))return!1;var t=xd(e);return t==UJ||t==WJ||t==$J||t==HJ}var i6=GJ,qJ=Lo["__core-js_shared__"],Dw=qJ,pk=function(){var e=/[^.]+$/.exec(Dw&&Dw.keys&&Dw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function YJ(e){return!!pk&&pk in e}var XJ=YJ,KJ=Function.prototype,ZJ=KJ.toString;function QJ(e){if(e!=null){try{return ZJ.call(e)}catch{}try{return e+""}catch{}}return""}var Sd=QJ,JJ=/[\\^$.*+?()[\]{}|]/g,eee=/^\[object .+?Constructor\]$/,tee=Function.prototype,iee=Object.prototype,ree=tee.toString,aee=iee.hasOwnProperty,nee=RegExp("^"+ree.call(aee).replace(JJ,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function see(e){if(!Oo(e)||XJ(e))return!1;var t=i6(e)?nee:eee;return t.test(Sd(e))}var oee=see;function lee(e,t){return e?.[t]}var uee=lee;function cee(e,t){var i=uee(e,t);return oee(i)?i:void 0}var Cd=cee,dee=Cd(Lo,"WeakMap"),q_=dee,fk=Object.create,hee=function(){function e(){}return function(t){if(!Oo(t))return{};if(fk)return fk(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),pee=hee;function fee(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var mee=fee;function vee(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}var gee=vee,yee=800,bee=16,wee=Date.now;function xee(e){var t=0,i=0;return function(){var r=wee(),a=bee-(r-i);if(i=r,a>0){if(++t>=yee)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var See=xee;function Cee(e){return function(){return e}}var _ee=Cee,Mee=function(){try{var e=Cd(Object,"defineProperty");return e({},"",{}),e}catch{}}(),yy=Mee,Eee=yy?function(e,t){return yy(e,"toString",{configurable:!0,enumerable:!1,value:_ee(t),writable:!0})}:t6,Aee=Eee,Pee=See(Aee),Tee=Pee;function kee(e,t){for(var i=-1,r=e==null?0:e.length;++i<r&&t(e[i],i,e)!==!1;);return e}var Oee=kee,Dee=9007199254740991,Iee=/^(?:0|[1-9]\d*)$/;function Lee(e,t){var i=typeof e;return t=t??Dee,!!t&&(i=="number"||i!="symbol"&&Iee.test(e))&&e>-1&&e%1==0&&e<t}var $E=Lee;function Bee(e,t,i){t=="__proto__"&&yy?yy(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}var r6=Bee;function zee(e,t){return e===t||e!==e&&t!==t}var UE=zee,Ree=Object.prototype,Nee=Ree.hasOwnProperty;function Vee(e,t,i){var r=e[t];(!(Nee.call(e,t)&&UE(r,i))||i===void 0&&!(t in e))&&r6(e,t,i)}var WE=Vee;function Fee(e,t,i,r){var a=!i;i||(i={});for(var n=-1,s=t.length;++n<s;){var o=t[n],l=r?r(i[o],e[o],o,i,e):void 0;l===void 0&&(l=e[o]),a?r6(i,o,l):WE(i,o,l)}return i}var Nm=Fee,mk=Math.max;function jee(e,t,i){return t=mk(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,n=mk(r.length-t,0),s=Array(n);++a<n;)s[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=i(s),mee(e,this,o)}}var $ee=jee,Uee=9007199254740991;function Wee(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Uee}var HE=Wee;function Hee(e){return e!=null&&HE(e.length)&&!i6(e)}var a6=Hee,Gee=Object.prototype;function qee(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Gee;return e===i}var GE=qee;function Yee(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}var Xee=Yee,Kee="[object Arguments]";function Zee(e){return ou(e)&&xd(e)==Kee}var vk=Zee,n6=Object.prototype,Qee=n6.hasOwnProperty,Jee=n6.propertyIsEnumerable,ete=vk(function(){return arguments}())?vk:function(e){return ou(e)&&Qee.call(e,"callee")&&!Jee.call(e,"callee")},qE=ete;function tte(){return!1}var ite=tte,s6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gk=s6&&typeof module=="object"&&module&&!module.nodeType&&module,rte=gk&&gk.exports===s6,yk=rte?Lo.Buffer:void 0,ate=yk?yk.isBuffer:void 0,nte=ate||ite,by=nte,ste="[object Arguments]",ote="[object Array]",lte="[object Boolean]",ute="[object Date]",cte="[object Error]",dte="[object Function]",hte="[object Map]",pte="[object Number]",fte="[object Object]",mte="[object RegExp]",vte="[object Set]",gte="[object String]",yte="[object WeakMap]",bte="[object ArrayBuffer]",wte="[object DataView]",xte="[object Float32Array]",Ste="[object Float64Array]",Cte="[object Int8Array]",_te="[object Int16Array]",Mte="[object Int32Array]",Ete="[object Uint8Array]",Ate="[object Uint8ClampedArray]",Pte="[object Uint16Array]",Tte="[object Uint32Array]",Xr={};Xr[xte]=Xr[Ste]=Xr[Cte]=Xr[_te]=Xr[Mte]=Xr[Ete]=Xr[Ate]=Xr[Pte]=Xr[Tte]=!0;Xr[ste]=Xr[ote]=Xr[bte]=Xr[lte]=Xr[wte]=Xr[ute]=Xr[cte]=Xr[dte]=Xr[hte]=Xr[pte]=Xr[fte]=Xr[mte]=Xr[vte]=Xr[gte]=Xr[yte]=!1;function kte(e){return ou(e)&&HE(e.length)&&!!Xr[xd(e)]}var Ote=kte;function Dte(e){return function(t){return e(t)}}var YE=Dte,o6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lf=o6&&typeof module=="object"&&module&&!module.nodeType&&module,Ite=Lf&&Lf.exports===o6,Iw=Ite&&ZR.process,Lte=function(){try{var e=Lf&&Lf.require&&Lf.require("util").types;return e||Iw&&Iw.binding&&Iw.binding("util")}catch{}}(),Yh=Lte,bk=Yh&&Yh.isTypedArray,Bte=bk?YE(bk):Ote,l6=Bte,zte=Object.prototype,Rte=zte.hasOwnProperty;function Nte(e,t){var i=vl(e),r=!i&&qE(e),a=!i&&!r&&by(e),n=!i&&!r&&!a&&l6(e),s=i||r||a||n,o=s?Xee(e.length,String):[],l=o.length;for(var u in e)(t||Rte.call(e,u))&&!(s&&(u=="length"||a&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$E(u,l)))&&o.push(u);return o}var u6=Nte;function Vte(e,t){return function(i){return e(t(i))}}var c6=Vte,Fte=c6(Object.keys,Object),jte=Fte,$te=Object.prototype,Ute=$te.hasOwnProperty;function Wte(e){if(!GE(e))return jte(e);var t=[];for(var i in Object(e))Ute.call(e,i)&&i!="constructor"&&t.push(i);return t}var Hte=Wte;function Gte(e){return a6(e)?u6(e):Hte(e)}var XE=Gte;function qte(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var Yte=qte,Xte=Object.prototype,Kte=Xte.hasOwnProperty;function Zte(e){if(!Oo(e))return Yte(e);var t=GE(e),i=[];for(var r in e)r=="constructor"&&(t||!Kte.call(e,r))||i.push(r);return i}var Qte=Zte;function Jte(e){return a6(e)?u6(e,!0):Qte(e)}var Nc=Jte,eie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tie=/^\w*$/;function iie(e,t){if(vl(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Rm(e)?!0:tie.test(e)||!eie.test(e)||t!=null&&e in Object(t)}var rie=iie,aie=Cd(Object,"create"),nm=aie;function nie(){this.__data__=nm?nm(null):{},this.size=0}var sie=nie;function oie(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lie=oie,uie="__lodash_hash_undefined__",cie=Object.prototype,die=cie.hasOwnProperty;function hie(e){var t=this.__data__;if(nm){var i=t[e];return i===uie?void 0:i}return die.call(t,e)?t[e]:void 0}var pie=hie,fie=Object.prototype,mie=fie.hasOwnProperty;function vie(e){var t=this.__data__;return nm?t[e]!==void 0:mie.call(t,e)}var gie=vie,yie="__lodash_hash_undefined__";function bie(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=nm&&t===void 0?yie:t,this}var wie=bie;function gp(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}gp.prototype.clear=sie;gp.prototype.delete=lie;gp.prototype.get=pie;gp.prototype.has=gie;gp.prototype.set=wie;var wk=gp;function xie(){this.__data__=[],this.size=0}var Sie=xie;function Cie(e,t){for(var i=e.length;i--;)if(UE(e[i][0],t))return i;return-1}var jb=Cie,_ie=Array.prototype,Mie=_ie.splice;function Eie(e){var t=this.__data__,i=jb(t,e);if(i<0)return!1;var r=t.length-1;return i==r?t.pop():Mie.call(t,i,1),--this.size,!0}var Aie=Eie;function Pie(e){var t=this.__data__,i=jb(t,e);return i<0?void 0:t[i][1]}var Tie=Pie;function kie(e){return jb(this.__data__,e)>-1}var Oie=kie;function Die(e,t){var i=this.__data__,r=jb(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this}var Iie=Die;function yp(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}yp.prototype.clear=Sie;yp.prototype.delete=Aie;yp.prototype.get=Tie;yp.prototype.has=Oie;yp.prototype.set=Iie;var $b=yp,Lie=Cd(Lo,"Map"),sm=Lie;function Bie(){this.size=0,this.__data__={hash:new wk,map:new(sm||$b),string:new wk}}var zie=Bie;function Rie(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Nie=Rie;function Vie(e,t){var i=e.__data__;return Nie(t)?i[typeof t=="string"?"string":"hash"]:i.map}var Ub=Vie;function Fie(e){var t=Ub(this,e).delete(e);return this.size-=t?1:0,t}var jie=Fie;function $ie(e){return Ub(this,e).get(e)}var Uie=$ie;function Wie(e){return Ub(this,e).has(e)}var Hie=Wie;function Gie(e,t){var i=Ub(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this}var qie=Gie;function bp(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}bp.prototype.clear=zie;bp.prototype.delete=jie;bp.prototype.get=Uie;bp.prototype.has=Hie;bp.prototype.set=qie;var Wb=bp,Yie="Expected a function";function KE(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Yie);var i=function(){var r=arguments,a=t?t.apply(this,r):r[0],n=i.cache;if(n.has(a))return n.get(a);var s=e.apply(this,r);return i.cache=n.set(a,s)||n,s};return i.cache=new(KE.Cache||Wb),i}KE.Cache=Wb;var Xie=KE,Kie=500;function Zie(e){var t=Xie(e,function(r){return i.size===Kie&&i.clear(),r}),i=t.cache;return t}var Qie=Zie,Jie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ere=/\\(\\)?/g,tre=Qie(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Jie,function(i,r,a,n){t.push(a?n.replace(ere,"$1"):r||i)}),t}),ire=tre;function rre(e){return e==null?"":PJ(e)}var are=rre;function nre(e,t){return vl(e)?e:rie(e,t)?[e]:ire(are(e))}var wp=nre,sre=1/0;function ore(e){if(typeof e=="string"||Rm(e))return e;var t=e+"";return t=="0"&&1/e==-sre?"-0":t}var Hb=ore;function lre(e,t){t=wp(t,e);for(var i=0,r=t.length;e!=null&&i<r;)e=e[Hb(t[i++])];return i&&i==r?e:void 0}var d6=lre;function ure(e,t){for(var i=-1,r=t.length,a=e.length;++i<r;)e[a+i]=t[i];return e}var ZE=ure,xk=to?to.isConcatSpreadable:void 0;function cre(e){return vl(e)||qE(e)||!!(xk&&e&&e[xk])}var dre=cre;function h6(e,t,i,r,a){var n=-1,s=e.length;for(i||(i=dre),a||(a=[]);++n<s;){var o=e[n];t>0&&i(o)?t>1?h6(o,t-1,i,r,a):ZE(a,o):r||(a[a.length]=o)}return a}var hre=h6;function pre(e){var t=e==null?0:e.length;return t?hre(e,1):[]}var fre=pre;function mre(e){return Tee($ee(e,void 0,fre),e+"")}var p6=mre,vre=c6(Object.getPrototypeOf,Object),QE=vre,gre="[object Object]",yre=Function.prototype,bre=Object.prototype,f6=yre.toString,wre=bre.hasOwnProperty,xre=f6.call(Object);function Sre(e){if(!ou(e)||xd(e)!=gre)return!1;var t=QE(e);if(t===null)return!0;var i=wre.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&f6.call(i)==xre}var Cre=Sre;function _re(e,t,i){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),i=i>a?a:i,i<0&&(i+=a),a=t>i?0:i-t>>>0,t>>>=0;for(var n=Array(a);++r<a;)n[r]=e[r+t];return n}var Mre=_re;function Ere(){this.__data__=new $b,this.size=0}var Are=Ere;function Pre(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}var Tre=Pre;function kre(e){return this.__data__.get(e)}var Ore=kre;function Dre(e){return this.__data__.has(e)}var Ire=Dre,Lre=200;function Bre(e,t){var i=this.__data__;if(i instanceof $b){var r=i.__data__;if(!sm||r.length<Lre-1)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Wb(r)}return i.set(e,t),this.size=i.size,this}var zre=Bre;function xp(e){var t=this.__data__=new $b(e);this.size=t.size}xp.prototype.clear=Are;xp.prototype.delete=Tre;xp.prototype.get=Ore;xp.prototype.has=Ire;xp.prototype.set=zre;var Ug=xp;function Rre(e,t){return e&&Nm(t,XE(t),e)}var Nre=Rre;function Vre(e,t){return e&&Nm(t,Nc(t),e)}var Fre=Vre,m6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sk=m6&&typeof module=="object"&&module&&!module.nodeType&&module,jre=Sk&&Sk.exports===m6,Ck=jre?Lo.Buffer:void 0,_k=Ck?Ck.allocUnsafe:void 0;function $re(e,t){if(t)return e.slice();var i=e.length,r=_k?_k(i):new e.constructor(i);return e.copy(r),r}var Ure=$re;function Wre(e,t){for(var i=-1,r=e==null?0:e.length,a=0,n=[];++i<r;){var s=e[i];t(s,i,e)&&(n[a++]=s)}return n}var Hre=Wre;function Gre(){return[]}var v6=Gre,qre=Object.prototype,Yre=qre.propertyIsEnumerable,Mk=Object.getOwnPropertySymbols,Xre=Mk?function(e){return e==null?[]:(e=Object(e),Hre(Mk(e),function(t){return Yre.call(e,t)}))}:v6,JE=Xre;function Kre(e,t){return Nm(e,JE(e),t)}var Zre=Kre,Qre=Object.getOwnPropertySymbols,Jre=Qre?function(e){for(var t=[];e;)ZE(t,JE(e)),e=QE(e);return t}:v6,g6=Jre;function eae(e,t){return Nm(e,g6(e),t)}var tae=eae;function iae(e,t,i){var r=t(e);return vl(e)?r:ZE(r,i(e))}var y6=iae;function rae(e){return y6(e,XE,JE)}var Y_=rae;function aae(e){return y6(e,Nc,g6)}var b6=aae,nae=Cd(Lo,"DataView"),X_=nae,sae=Cd(Lo,"Promise"),K_=sae,oae=Cd(Lo,"Set"),Z_=oae,Ek="[object Map]",lae="[object Object]",Ak="[object Promise]",Pk="[object Set]",Tk="[object WeakMap]",kk="[object DataView]",uae=Sd(X_),cae=Sd(sm),dae=Sd(K_),hae=Sd(Z_),pae=Sd(q_),Tc=xd;(X_&&Tc(new X_(new ArrayBuffer(1)))!=kk||sm&&Tc(new sm)!=Ek||K_&&Tc(K_.resolve())!=Ak||Z_&&Tc(new Z_)!=Pk||q_&&Tc(new q_)!=Tk)&&(Tc=function(e){var t=xd(e),i=t==lae?e.constructor:void 0,r=i?Sd(i):"";if(r)switch(r){case uae:return kk;case cae:return Ek;case dae:return Ak;case hae:return Pk;case pae:return Tk}return t});var om=Tc,fae=Object.prototype,mae=fae.hasOwnProperty;function vae(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&mae.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var gae=vae,yae=Lo.Uint8Array,wy=yae;function bae(e){var t=new e.constructor(e.byteLength);return new wy(t).set(new wy(e)),t}var eA=bae;function wae(e,t){var i=t?eA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var xae=wae,Sae=/\w*$/;function Cae(e){var t=new e.constructor(e.source,Sae.exec(e));return t.lastIndex=e.lastIndex,t}var _ae=Cae,Ok=to?to.prototype:void 0,Dk=Ok?Ok.valueOf:void 0;function Mae(e){return Dk?Object(Dk.call(e)):{}}var Eae=Mae;function Aae(e,t){var i=t?eA(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var Pae=Aae,Tae="[object Boolean]",kae="[object Date]",Oae="[object Map]",Dae="[object Number]",Iae="[object RegExp]",Lae="[object Set]",Bae="[object String]",zae="[object Symbol]",Rae="[object ArrayBuffer]",Nae="[object DataView]",Vae="[object Float32Array]",Fae="[object Float64Array]",jae="[object Int8Array]",$ae="[object Int16Array]",Uae="[object Int32Array]",Wae="[object Uint8Array]",Hae="[object Uint8ClampedArray]",Gae="[object Uint16Array]",qae="[object Uint32Array]";function Yae(e,t,i){var r=e.constructor;switch(t){case Rae:return eA(e);case Tae:case kae:return new r(+e);case Nae:return xae(e,i);case Vae:case Fae:case jae:case $ae:case Uae:case Wae:case Hae:case Gae:case qae:return Pae(e,i);case Oae:return new r;case Dae:case Bae:return new r(e);case Iae:return _ae(e);case Lae:return new r;case zae:return Eae(e)}}var Xae=Yae;function Kae(e){return typeof e.constructor=="function"&&!GE(e)?pee(QE(e)):{}}var Zae=Kae,Qae="[object Map]";function Jae(e){return ou(e)&&om(e)==Qae}var ene=Jae,Ik=Yh&&Yh.isMap,tne=Ik?YE(Ik):ene,ine=tne,rne="[object Set]";function ane(e){return ou(e)&&om(e)==rne}var nne=ane,Lk=Yh&&Yh.isSet,sne=Lk?YE(Lk):nne,one=sne,lne=1,une=2,cne=4,w6="[object Arguments]",dne="[object Array]",hne="[object Boolean]",pne="[object Date]",fne="[object Error]",x6="[object Function]",mne="[object GeneratorFunction]",vne="[object Map]",gne="[object Number]",S6="[object Object]",yne="[object RegExp]",bne="[object Set]",wne="[object String]",xne="[object Symbol]",Sne="[object WeakMap]",Cne="[object ArrayBuffer]",_ne="[object DataView]",Mne="[object Float32Array]",Ene="[object Float64Array]",Ane="[object Int8Array]",Pne="[object Int16Array]",Tne="[object Int32Array]",kne="[object Uint8Array]",One="[object Uint8ClampedArray]",Dne="[object Uint16Array]",Ine="[object Uint32Array]",Hr={};Hr[w6]=Hr[dne]=Hr[Cne]=Hr[_ne]=Hr[hne]=Hr[pne]=Hr[Mne]=Hr[Ene]=Hr[Ane]=Hr[Pne]=Hr[Tne]=Hr[vne]=Hr[gne]=Hr[S6]=Hr[yne]=Hr[bne]=Hr[wne]=Hr[xne]=Hr[kne]=Hr[One]=Hr[Dne]=Hr[Ine]=!0;Hr[fne]=Hr[x6]=Hr[Sne]=!1;function Wg(e,t,i,r,a,n){var s,o=t&lne,l=t&une,u=t&cne;if(i&&(s=a?i(e,r,a,n):i(e)),s!==void 0)return s;if(!Oo(e))return e;var c=vl(e);if(c){if(s=gae(e),!o)return gee(e,s)}else{var d=om(e),h=d==x6||d==mne;if(by(e))return Ure(e,o);if(d==S6||d==w6||h&&!a){if(s=l||h?{}:Zae(e),!o)return l?tae(e,Fre(s,e)):Zre(e,Nre(s,e))}else{if(!Hr[d])return a?e:{};s=Xae(e,d,o)}}n||(n=new Ug);var p=n.get(e);if(p)return p;n.set(e,s),one(e)?e.forEach(function(m){s.add(Wg(m,t,i,m,e,n))}):ine(e)&&e.forEach(function(m,g){s.set(g,Wg(m,t,i,g,e,n))});var f=u?l?b6:Y_:l?Nc:XE,v=c?void 0:f(e);return Oee(v||e,function(m,g){v&&(g=m,m=e[g]),WE(s,g,Wg(m,t,i,g,e,n))}),s}var C6=Wg,Lne=1,Bne=4;function zne(e){return C6(e,Lne|Bne)}var Gb=zne,Rne="__lodash_hash_undefined__";function Nne(e){return this.__data__.set(e,Rne),this}var Vne=Nne;function Fne(e){return this.__data__.has(e)}var jne=Fne;function xy(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Wb;++t<i;)this.add(e[t])}xy.prototype.add=xy.prototype.push=Vne;xy.prototype.has=jne;var $ne=xy;function Une(e,t){for(var i=-1,r=e==null?0:e.length;++i<r;)if(t(e[i],i,e))return!0;return!1}var Wne=Une;function Hne(e,t){return e.has(t)}var Gne=Hne,qne=1,Yne=2;function Xne(e,t,i,r,a,n){var s=i&qne,o=e.length,l=t.length;if(o!=l&&!(s&&l>o))return!1;var u=n.get(e),c=n.get(t);if(u&&c)return u==t&&c==e;var d=-1,h=!0,p=i&Yne?new $ne:void 0;for(n.set(e,t),n.set(t,e);++d<o;){var f=e[d],v=t[d];if(r)var m=s?r(v,f,d,t,e,n):r(f,v,d,e,t,n);if(m!==void 0){if(m)continue;h=!1;break}if(p){if(!Wne(t,function(g,y){if(!Gne(p,y)&&(f===g||a(f,g,i,r,n)))return p.push(y)})){h=!1;break}}else if(!(f===v||a(f,v,i,r,n))){h=!1;break}}return n.delete(e),n.delete(t),h}var _6=Xne;function Kne(e){var t=-1,i=Array(e.size);return e.forEach(function(r,a){i[++t]=[a,r]}),i}var Zne=Kne;function Qne(e){var t=-1,i=Array(e.size);return e.forEach(function(r){i[++t]=r}),i}var Jne=Qne,ese=1,tse=2,ise="[object Boolean]",rse="[object Date]",ase="[object Error]",nse="[object Map]",sse="[object Number]",ose="[object RegExp]",lse="[object Set]",use="[object String]",cse="[object Symbol]",dse="[object ArrayBuffer]",hse="[object DataView]",Bk=to?to.prototype:void 0,Lw=Bk?Bk.valueOf:void 0;function pse(e,t,i,r,a,n,s){switch(i){case hse:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case dse:return!(e.byteLength!=t.byteLength||!n(new wy(e),new wy(t)));case ise:case rse:case sse:return UE(+e,+t);case ase:return e.name==t.name&&e.message==t.message;case ose:case use:return e==t+"";case nse:var o=Zne;case lse:var l=r&ese;if(o||(o=Jne),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;r|=tse,s.set(e,t);var c=_6(o(e),o(t),r,a,n,s);return s.delete(e),c;case cse:if(Lw)return Lw.call(e)==Lw.call(t)}return!1}var fse=pse,mse=1,vse=Object.prototype,gse=vse.hasOwnProperty;function yse(e,t,i,r,a,n){var s=i&mse,o=Y_(e),l=o.length,u=Y_(t),c=u.length;if(l!=c&&!s)return!1;for(var d=l;d--;){var h=o[d];if(!(s?h in t:gse.call(t,h)))return!1}var p=n.get(e),f=n.get(t);if(p&&f)return p==t&&f==e;var v=!0;n.set(e,t),n.set(t,e);for(var m=s;++d<l;){h=o[d];var g=e[h],y=t[h];if(r)var b=s?r(y,g,h,t,e,n):r(g,y,h,e,t,n);if(!(b===void 0?g===y||a(g,y,i,r,n):b)){v=!1;break}m||(m=h=="constructor")}if(v&&!m){var x=e.constructor,S=t.constructor;x!=S&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof S=="function"&&S instanceof S)&&(v=!1)}return n.delete(e),n.delete(t),v}var bse=yse,wse=1,zk="[object Arguments]",Rk="[object Array]",Bv="[object Object]",xse=Object.prototype,Nk=xse.hasOwnProperty;function Sse(e,t,i,r,a,n){var s=vl(e),o=vl(t),l=s?Rk:om(e),u=o?Rk:om(t);l=l==zk?Bv:l,u=u==zk?Bv:u;var c=l==Bv,d=u==Bv,h=l==u;if(h&&by(e)){if(!by(t))return!1;s=!0,c=!1}if(h&&!c)return n||(n=new Ug),s||l6(e)?_6(e,t,i,r,a,n):fse(e,t,l,i,r,a,n);if(!(i&wse)){var p=c&&Nk.call(e,"__wrapped__"),f=d&&Nk.call(t,"__wrapped__");if(p||f){var v=p?e.value():e,m=f?t.value():t;return n||(n=new Ug),a(v,m,i,r,n)}}return h?(n||(n=new Ug),bse(e,t,i,r,a,n)):!1}var Cse=Sse;function M6(e,t,i,r,a){return e===t?!0:e==null||t==null||!ou(e)&&!ou(t)?e!==e&&t!==t:Cse(e,t,i,r,M6,a)}var _se=M6;function Mse(e,t){return e!=null&&t in Object(e)}var Ese=Mse;function Ase(e,t,i){t=wp(t,e);for(var r=-1,a=t.length,n=!1;++r<a;){var s=Hb(t[r]);if(!(n=e!=null&&i(e,s)))break;e=e[s]}return n||++r!=a?n:(a=e==null?0:e.length,!!a&&HE(a)&&$E(s,a)&&(vl(e)||qE(e)))}var Pse=Ase;function Tse(e,t){return e!=null&&Pse(e,t,Ese)}var kse=Tse,Ose=function(){return Lo.Date.now()},Bw=Ose,Dse="Expected a function",Ise=Math.max,Lse=Math.min;function Bse(e,t,i){var r,a,n,s,o,l,u=0,c=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Dse);t=hk(t)||0,Oo(i)&&(c=!!i.leading,d="maxWait"in i,n=d?Ise(hk(i.maxWait)||0,t):n,h="trailing"in i?!!i.trailing:h);function p(w){var E=r,M=a;return r=a=void 0,u=w,s=e.apply(M,E),s}function f(w){return u=w,o=setTimeout(g,t),c?p(w):s}function v(w){var E=w-l,M=w-u,P=t-E;return d?Lse(P,n-M):P}function m(w){var E=w-l,M=w-u;return l===void 0||E>=t||E<0||d&&M>=n}function g(){var w=Bw();if(m(w))return y(w);o=setTimeout(g,v(w))}function y(w){return o=void 0,h&&r?p(w):(r=a=void 0,s)}function b(){o!==void 0&&clearTimeout(o),u=0,r=l=a=o=void 0}function x(){return o===void 0?s:y(Bw())}function S(){var w=Bw(),E=m(w);if(r=arguments,a=this,l=w,E){if(o===void 0)return f(l);if(d)return clearTimeout(o),o=setTimeout(g,t),p(l)}return o===void 0&&(o=setTimeout(g,t)),s}return S.cancel=b,S.flush=x,S}var lm=Bse;function zse(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Rse=zse;function Nse(e,t){return e>t}var Vse=Nse;function Fse(e,t){return t.length<2?e:d6(e,Mre(t,0,-1))}var jse=Fse;function $se(e,t){return _se(e,t)}var tA=$se;function Use(e,t,i){for(var r=-1,a=e.length;++r<a;){var n=e[r],s=t(n);if(s!=null&&(o===void 0?s===s&&!Rm(s):i(s,o)))var o=s,l=n}return l}var Wse=Use;function Hse(e){return e&&e.length?Wse(e,t6,Vse):void 0}var Gse=Hse;function qse(e,t){return t=wp(t,e),e=jse(e,t),e==null||delete e[Hb(Rse(t))]}var Yse=qse;function Xse(e){return Cre(e)?void 0:e}var Kse=Xse,Zse=1,Qse=2,Jse=4,eoe=p6(function(e,t){var i={};if(e==null)return i;var r=!1;t=JR(t,function(n){return n=wp(n,e),r||(r=n.length>1),n}),Nm(e,b6(e),i),r&&(i=C6(i,Zse|Qse|Jse,Kse));for(var a=t.length;a--;)Yse(i,t[a]);return i}),Q_=eoe;function toe(e,t,i,r){if(!Oo(e))return e;t=wp(t,e);for(var a=-1,n=t.length,s=n-1,o=e;o!=null&&++a<n;){var l=Hb(t[a]),u=i;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(a!=s){var c=o[l];u=r?r(c,l,o):void 0,u===void 0&&(u=Oo(c)?c:$E(t[a+1])?[]:{})}WE(o,l,u),o=o[l]}return e}var ioe=toe;function roe(e,t,i){for(var r=-1,a=t.length,n={};++r<a;){var s=t[r],o=d6(e,s);i(o,s)&&ioe(n,wp(s,e),o)}return n}var aoe=roe;function noe(e,t){return aoe(e,t,function(i,r){return kse(e,r)})}var soe=noe,ooe=p6(function(e,t){return e==null?{}:soe(e,t)}),hl=ooe,loe="Expected a function";function uoe(e,t,i){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(loe);return Oo(i)&&(r="leading"in i?!!i.leading:r,a="trailing"in i?!!i.trailing:a),lm(e,t,{leading:r,maxWait:t,trailing:a})}var coe=uoe;function E6(e){for(let t of Object.keys(e))e[t]===void 0&&delete e[t];return e}function io(e,t){return Object.setPrototypeOf(e,t),e}var doe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),hoe=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),poe=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||qb&&"ontouchend"in document,foe=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,moe=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,voe=()=>{if(typeof window>"u")return!1;let e=navigator.userAgent,t=navigator.vendor;return/Safari/i.test(e)&&/Apple Computer/.test(t)},goe=()=>{if(typeof window>"u")return null;let e=navigator.userAgent.match(/Version\/(\d+\.\d)/);return e&&e[1]},yoe=()=>{if(typeof window>"u")return;let e=new URLSearchParams(window.location.search).get("desktop-app-version");return e?(window.localStorage.setItem("desktop-app-version",e),e):window.localStorage.getItem("desktop-app-version")??"0.0.6"},A6=doe();A6&&yoe();var qb=hoe(),Vm=poe(),boe=foe(),Ts=moe(),Vk=voe(),woe=Number(goe());function P6(e){return Array.isArray(e)?e:[e]}function T6(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}function zv(e){return qb?e.metaKey:e.ctrlKey}function xoe(e){return e.wheelDeltaY===0||e.deltaY===0?qb&&e.shiftKey&&Math.abs(e.wheelDeltaX)>=120?!1:e.wheelDeltaX?e.wheelDeltaX===-3*e.deltaX||e.wheelDeltaX===-3*window.devicePixelRatio*e.deltaX:e.deltaMode===0:e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY||e.wheelDeltaY===-3*window.devicePixelRatio*e.deltaY:e.deltaMode===0}var Ni=[],Sy={},gf={},Hg={};function k6(e){Ni.includes(e)||Ni.push(e)}function Ph(e){delete Sy[e.pointerId];for(let t=0;t<Ni.length;t++)if(Ni[t].pointerId===e.pointerId){Ni.splice(t,1);break}}function Soe(){Ni.splice(0,Ni.length)}function Cy(e){if(e.pointerType!=="touch")return;let t=Sy[e.pointerId];t===void 0&&(t={x:0,y:0},Sy[e.pointerId]=t),t.x=e.pageX,t.y=e.pageY}function zw(e){let t=e.pointerId===Ni[0].pointerId?Ni[1]:Ni[0];return Sy[t.pointerId]}function O6(e){gf[e.key]=!0,Hg[e.key]=Hg[e.key]===void 0?1:Hg[e.key]+1}function D6(e){if(qb&&gf.Meta)for(let t in gf)gf[t]=!1;else gf[e.key]=!1;Hg={}}function Coe(e){e.addEventListener("pointerdown",k6,!0),e.addEventListener("pointerdown",Cy,!0),e.addEventListener("pointermove",Cy,!0),e.addEventListener("pointerup",Ph,!0),e.addEventListener("pointercancel",Ph,!0),e.addEventListener("pointerleave",Ph,!0),window.addEventListener("keydown",O6,!0),window.addEventListener("keyup",D6,!0)}function _oe(e){e.removeEventListener("pointerdown",k6,!0),e.removeEventListener("pointerdown",Cy,!0),e.removeEventListener("pointermove",Cy,!0),e.removeEventListener("pointerup",Ph,!0),e.removeEventListener("pointercancel",Ph,!0),e.removeEventListener("pointerleave",Ph,!0),window.removeEventListener("keydown",O6,!0),window.removeEventListener("keyup",D6,!0)}var I6,Moe=new Promise(e=>{I6=e}),Rv;function Eoe(){if(Rv)return Rv;async function e(){let t="https://unpkg.com/@splinetool/navmesh-wasm@1.9.31/build",i=pc(()=>import("./navmesh.CyXjZWmr.js"),[]),[r,a]=await Promise.all([i,fetch(`${t}/navmesh.wasm`).then(o=>o.arrayBuffer())]),n=r.default,s=await n({wasmBinary:a});I6(s)}return Rv=e(),Rv}var L6,Aoe=new Promise(e=>{L6=e}),Nv;function Poe(){if(Nv)return Nv;async function e(){let t=await pc(()=>import("./physics.BM4kW-A5.js"),[]);await t.init(),L6(t)}return Nv=e(),Nv}var Ii=class{modifyById(e,t){let i=this;if(i[e]===void 0)throw new Error("not expected");{let r={...i,[e]:t};return Object.setPrototypeOf(r,Ii.prototype),r}}add(e,t){var i;return((i=this.runOp({type:1,id:e,data:t}))==null?void 0:i.data)??this}runOp(e){let t=this;if(e.type===1){let i=t[e.id],r;i===void 0?r={type:2,id:e.id}:r={type:1,id:e.id,data:i};let{id:a,data:n}=e,s={...t,[a]:n};return Object.setPrototypeOf(s,Ii.prototype),{data:s,actual:e,reverse:r}}else if(e.type===2){let{id:i}=e,r=t[i];if(r===void 0)return null;{let a={...t};return Object.setPrototypeOf(a,Ii.prototype),delete a[i],{data:a,actual:e,reverse:{type:1,id:i,data:r}}}}return null}};function iA(e){if(e.deepFreeze!==void 0){e.deepFreeze(e);return}let t=Object.getOwnPropertyNames(e);for(let i of t){let r=e[i];r&&typeof r=="object"&&iA(r)}return Object.freeze(e)}function Toe(e,t){let i=0;for(;i<e.length&&i<t.length;){if(e[i]<t[i])return-1;if(e[i]>t[i])return 1;i+=1}return i!==t.length?-1:i!==e.length?1:0}var B6=class extends Error{};function Rw(e){let t={...e};return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}function Hu(e,t,i){if(e===void 0?t===void 0?(e=0,t=10):e=t-10:t===void 0&&(t=e+10),e>t){let n=e;e=t,t=n}let r=[],a=1/(i+1);for(let n=0;n<i;n++){let s=e+(t-e)*(n+.75+Math.random()*.5)*a;r.push(s)}return r}function rA(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}function koe(){return typeof process<"u"}function z6(e,t){for(let i of e)t(i.id,i.data)!==!0&&z6(i.children,t)}function R6(e,t){if(t(e.id,e.data)!==!0)for(let i of e.children)R6(i,t)}var Sn=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Sn.prototype)}deepFreeze(){let e=0;for(;e<this.length;)iA(this[e]),e++}fillCaches0(e,t){this.objCaches.set(e.id,e),this.parentCaches.set(e.id,t);for(let i of e.children)this.fillCaches0(i,e.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let e of this)this.fillCaches0(e,null)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}nonExistOrDescendantOf(e,t){if(!this.has(e))return!0;for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}rootAcestor(e){for(;e;){let t=this.parent(e);if(t)e=t;else return e}return e}isDescendantOf(e,t){for(;e;){let i=this.parent(e);if(i===t)return!0;e=i}return!1}data(e){var t;return(t=this.get(e))==null?void 0:t.data}has(e){return this.childrenOf(e)!==void 0}get(e){return this.fillCaches(),this.objCaches.get(e)}childrenOf(e){var t;return e===null?this:(t=this.get(e))==null?void 0:t.children}traverseFrom(e,t){if(e===null)this.traverse(t);else{let i=this.get(e);i&&R6(i,t)}}traverse(e){z6(this,e)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(e){return this.fillCaches(),this.parentCaches.get(e)}childrenArray(e){return e===null?this:this.get(e).children}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this.parent(e),r=this.childrenArray(i),a=r.findIndex(s=>s.id===e);if(a<0)throw new Error("not expected");let n=r[a];return r=[...r],r[a]={...n,data:t},this.modifyArrayBy(i,r)}}modifyArrayBy(e,t){let i=e,r=t;for(;i!==null;){let n=r,s=i;if(i=this.parent(i),i===void 0)throw new Error;r=this.childrenArray(i);let o=r.findIndex(l=>l.id===s);if(o<0)throw new Error;r=[...r],r[o]={...r[o],children:n}}Object.setPrototypeOf(r,Sn.prototype);let a=r;return a.fillCaches(),a}runOp(e){switch(e.type){case 7:return this.addOp(e);case 8:return this.deleteOp(e);case 9:return this.moveOp(e)}return null}checkDuplicatedIdRec({id:e,children:t}){if(this.get(e)!==void 0)return!0;for(let i of t)if(this.checkDuplicatedIdRec(i))return!0;return!1}addOp(e){let{parent:t,fi:i,id:r,data:a,children:n}=e;if(t!==null&&this.get(t)===void 0||this.checkDuplicatedIdRec(e))return null;{let s=t,o=this.childrenArray(s),l={fi:i,id:r,data:a,children:n};return o=[...o,l],o.sort((u,c)=>u.fi-c.fi),e.localIndex=o.indexOf(l),{data:this.modifyArrayBy(s,o),actual:e,reverse:{type:8,id:r}}}}deleteOp(e){let{id:t}=e;if(this.get(t)===null)return null;{let i=this.parent(t);if(i===void 0)return null;let r=this.childrenArray(i),a=r.findIndex(s=>s.id===t);e.localIndex=a,r=[...r];let n=r.splice(a,1)[0];return{data:this.modifyArrayBy(i,r),actual:e,reverse:{type:7,...n,parent:i}}}}moveOp(e){let{parent:t,fi:i,id:r}=e;if(t!==null&&this.get(t)===void 0)return this.deleteOp({type:8,id:r});if(t!==null){let d=t;for(;d!==null;){if(d===void 0)throw new Error;if(d===r)throw new B6("cyclic tree");d=this.parent(d)}}let a=this.parent(r);if(a===void 0)return null;let n=a,s=this.childrenArray(a),o=s.findIndex(d=>d.id===r);s=[...s];let l=s.splice(o,1)[0],u=this.modifyArrayBy(a,s);a=t,s=u.childrenArray(a);let c=l.fi;return l={...l,fi:i},s=[...s,l],s.sort((d,h)=>d.fi-h.fi),e.localIndex=s.indexOf(l),u=u.modifyArrayBy(a,s),{data:u,actual:e,reverse:{type:9,parent:n,fi:c,id:r}}}previous(e,t){if(t===null){let r=this.childrenArray(e);return r.length===0?null:r[r.length-1].id}let i=null;for(let r of this.childrenArray(e)){if(r.id===t)return i;i=r.id}return null}traverseSortNext(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(a=>a.id===e)+1;if(r<i.length)return i[r].id;if(t)return this.traverseSortNext(t)}}sortNext(e){let t=this.childrenArray(e);return t.length>0?t[0].id:this.traverseSortNext(e)}traverseSortPrevious(e){let t=this.childrenArray(e);return t.length>0?this.traverseSortPrevious(t[t.length-1].id):e}sortPrevious(e){let t=this.parent(e);if(t!==void 0){let i=this.childrenArray(t),r=i.findIndex(a=>a.id===e)-1;return r>=0?this.traverseSortPrevious(i[r].id):t}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push({...i,...r})}t.sort((i,r)=>Toe(i.sortKey,r.sortKey));for(let i of t)delete i.sortKey;return t}getWithSortKey(e){var t=e;let i=[],r=this.get(t),a=r;if(r!==void 0){for(;t;)i.splice(0,0,r.fi),t=this.parent(t),t!==null&&(r=this.get(t));return{...a,sortKey:i}}}insertBeforeHelper(e,t,i){return this.insertAfterHelper(e,this.previous(e,t),i)}insertAfterHelper(e,t,i){let r=this.childrenArray(e);if(t===null){if(r.length===0)return Hu(0,i,i);{let a=r[0].fi;return Hu(a-i,a,i)}}else{let a=this.get(t);if(a===void 0||this.parent(t)!==e)throw new Error("illegal args");let n=r.find(s=>s.fi>a.fi);if(n===void 0){let s=r[r.length-1].fi;return Hu(s,s+i,i)}else return Hu(a.fi,n.fi,i)}}},_y;(e=>{function t(i,r){if(r.type!==0)return null;if(Array.isArray(i)){let a=r.props,n={},s=[...i],o=!1;if(a)for(let l of Object.keys(a)){let u=parseInt(l);if(isNaN(u))throw new Error("wrong index");n[l]=s[u],s[u]=a[l],o=!0}return o?{data:s,actual:r,reverse:{type:0,props:n}}:null}else{let a=r.props,n={},s={...i},o=!1;if(a)for(let l of Object.keys(a)){n[l]=s[l];let u=a[l];u===void 0?delete s[l]:s[l]=u,o=!0}return o?{data:s,actual:r,reverse:{type:0,props:n}}:null}}e.runOp=t})(_y||(_y={}));var _i=class extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_i.prototype)}deepFreeze(){let e=0;for(;e<this.length;)iA(this[e]),e++}fillCaches0(e){this.objCaches.set(e.id,e)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let e of this)this.fillCaches0(e)}}randomId(){this.fillCaches();let e=Array.from(this.objCaches.keys());if(e.length!==0)return e[Math.max(0,Math.floor(Math.random()*e.length)-1)]}data(e){var t;return(t=this.get(e))==null?void 0:t.data}get(e){return this.fillCaches(),this.objCaches.get(e)}modifyById(e,t){if(this.get(e)===void 0)throw new Error("not expected");{let i=this,r=i.findIndex(n=>n.id===e);if(r<0)throw new Error("not expected");let a=i[r];return i=[...i],i[r]={...a,data:t},this.modifyArrayBy(i)}}modifyArrayBy(e){Object.setPrototypeOf(e,_i.prototype);let t=e;return koe()||t.fillCaches(),t}runOp(e){switch(e.type){case 4:return this.addOp(e);case 5:return this.deleteOp(e);case 6:return this.moveOp(e)}return null}addOp(e){let{fi:t,id:i,data:r}=e,a=this,n={fi:t,id:i,data:r};return a=[...a,n],a.sort((s,o)=>s.fi-o.fi),e.localIndex=a.indexOf(n),{data:this.modifyArrayBy(a),actual:e,reverse:{type:5,id:i}}}deleteOp(e){let{id:t}=e,i=this,r=i.findIndex(n=>n.id===t);if(r===-1)return null;e.localIndex=r,i=[...i];let a=i.splice(r,1)[0];return{data:this.modifyArrayBy(i),actual:e,reverse:{type:4,...a}}}moveOp(e){let{fi:t,id:i}=e,r=this;r=[...r];let a=r.findIndex(o=>o.id===i);if(a===-1)return null;let n=r[a].fi,s={...r[a],fi:t};return r[a]=s,r.sort((o,l)=>o.fi-l.fi),e.localIndex=r.indexOf(s),{data:this.modifyArrayBy(r),actual:e,reverse:{type:6,fi:n,id:i}}}previous(e){if(e===null)return this.length===0?null:this[this.length-1].id;let t=null;for(let i of this){if(i.id===e)return t;t=i.id}return null}insertBeforeHelper(e,t){return this.insertAfterHelper(this.previous(e),t)}insertAfterHelper(e,t){let i=this;if(e===null){if(i.length===0)return Hu(0,t,t);{let r=i[0].fi;return Hu(r-t,r,t)}}else{let r=this.get(e);if(r===void 0)throw new Error("illegal args");let a=i.find(n=>n.fi>r.fi);if(a===void 0){let n=i[i.length-1].fi;return Hu(n,n+t,t)}else return Hu(r.fi,a.fi,t)}}};function Xh(e){return e&&typeof e=="object"&&e instanceof Da}var Da=class{unusedFunOverridesTable(e){}runOp(e){let t=[],i=this,r=0,a={};for(;r<e.path.length;){if(t.push(i),i=i===void 0?void 0:i[e.path[r]],i!==void 0&&!Xh(i))return null;r+=1}i=i?Rw(i):new Da;for(let[o,l]of Object.entries(e.props)){let u=i[o];a[o]=u,l===void 0?delete i[o]:i[o]=l}for(;r>0;){if(Object.keys(i).length===0){let o=t[r-1];o&&(i=Rw(o),delete i[e.path[r-1]])}else{let o=t[r-1];if(o){let l=Rw(o);l[e.path[r-1]]=i,i=l}else{let l=new Da;l[e.path[r-1]]=i,i=l}}r-=1}let n=Object.setPrototypeOf(i,Da.prototype),s={...e,props:a};return{data:n,actual:e,reverse:s}}},tc;(e=>{function t(a,n){return um(a,n)??a}e.apply=t;function i(a,n){return nA(a,n)}e.merge=i;function r(a,n){let s=0,o=n.path,l=a;for(;s<o.length&&l!==void 0;){if(l=Fa.zoomOnce(l,o[s]),l===void 0)return n;if(!Xh(l))return;s+=1}if(l===void 0)return n;if(Xh(l))if(n.type===0){let u={...n.props};for(let c of Object.keys(l))delete u[c];return{...n,props:u}}else if(n.type===1||n.type===4||n.type===7){let u=aA([n],l);return u?(console.log(u),u):n}else return n}e.filterOp=r})(tc||(tc={}));function aA(e,t){if(t===void 0)return;let i=!1,r=e.map(a=>{let n=a.id,s=um(a.data,t[n]);if(i=i||s!==void 0,s===void 0&&(s=a.data),a.children){let o=aA(a.children,t);return o!==void 0?i=!0:o=a.children,{...a,id:n,data:s,children:o}}else return{...a,id:n,data:s}});if(i)return r}function Ooe(e,t){if(t===void 0)return;let i=!1,r=e.map(a=>{let n=a.id,s=um(a.data,t[n]);return i=i||s!==void 0,s===void 0&&(s=a.data),{...a,id:n,data:s}});if(i)return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}function um(e,t){if(!Xh(t))return t;if(e instanceof Sn){let i=aA(e,t);return i!==void 0&&Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i}else{if(e instanceof _i)return Ooe(e,t);if(Array.isArray(e)){let i=!1,r=e.map((a,n)=>{let s=um(a,t[n]);return i=i||s!==void 0,s===void 0&&(s=a),s});return i?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else{if(e instanceof Da)return nA(e,t);if(e&&typeof e=="object"){let i={},r=!1;for(let[a,n]of Object.entries(e)){let s=um(n,t[a]);r=r||s!==void 0,s===void 0&&(s=n),i[a]=s}return r?(Object.setPrototypeOf(i,Object.getPrototypeOf(e)),i):void 0}}}}function nA(e,t){if(e===void 0)return t;if(t===void 0)return e;if(!Xh(t))return t;if(!Xh(e))return tc.apply(e,t);let i=new Set;for(let a of Object.keys(e))i.add(a);for(let a of Object.keys(t))i.add(a);let r=new Da;for(let a of i){let n=nA(e===void 0?void 0:e[a],t===void 0?void 0:t[a]);r[a]=n}return r}function Doe(e,t){let i={cur:[],result:[],len:0};return e=cm(e,t,i)??e,[e,i.result]}function My(e,t){return e===null?null:(e.cur[e.len]=t,e.len+=1,e)}function Ey(e){e&&(e.len-=1)}function Ioe(e){if(e===null)return null;e.result.push(e.cur.slice(0,e.len))}function N6(e,t,i){let r=!1,a=e.map(n=>{let s=n.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(r=!0,s=o,i!==null))throw new Error("not supported");let l=cm(n.data,t,My(i,s));Ey(i),r=r||l!==void 0,l===void 0&&(l=n.data);let u=N6(n.children,t,i);return u!==void 0?r=!0:u=n.children,{...n,id:s,data:l,children:u}});if(r)return a}function Loe(e,t,i){let r=!1,a=e.map(n=>{let s=n.id,o=t[s];if(o!==void 0&&typeof o=="string"&&(r=!0,s=o,i!==null))throw new Error("not supported");let l=cm(n.data,t,My(i,s));return Ey(i),r=r||l!==void 0,l===void 0&&(l=n.data),{...n,id:s,data:l}});if(r)return Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a}function cm(e,t,i){if(e instanceof Sn){let r=N6(e,t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r}else{if(e instanceof _i)return Loe(e,t,i);if(Array.isArray(e)){let r=!1,a=e.map((n,s)=>{let o=cm(n,t,My(i,s));return Ey(i),r=r||o!==void 0,o===void 0&&(o=n),o});return r?(Object.setPrototypeOf(a,Object.getPrototypeOf(e)),a):void 0}else if(e&&typeof e=="object"&&!rA(e)){let r={},a=!1;for(let[n,s]of Object.entries(e))if(n!=="name"&&n!=="variableId"){let o=t[n];if(typeof o=="string"){if(i!==null)throw new Error("not supported");a=!0,n=o}let l=cm(s,t,My(i,n));Ey(i),a=a||l!==void 0,l===void 0&&(l=s),r[n]=l}else r[n]=s;return a?(Object.setPrototypeOf(r,Object.getPrototypeOf(e)),r):void 0}else if(typeof e=="string"){let r=t[e];return r!==void 0&&Ioe(i),r}else return}}var Ay;(e=>{function t(i,r){let a=Fa.zoom(r,i.path);if(typeof a=="object"){let n={};for(let s of Object.keys(i.props))n[s]=a[s];return{...i,props:n}}else return{...i,props:{}}}e.replaceProps=t})(Ay||(Ay={}));var en;(e=>{function t(l,u){return{...l,path:l.path.slice(u)}}e.drop=t;function i(l,u){var c;return((c=r(l,u))==null?void 0:c.data)??l}e.applySimple=i;function r(l,u){var c,d;let h=u.path;for(var p=[];;){let f;if(l instanceof Da&&u.type===0&&(f=l.runOp({...u,path:h.slice(p.length)}),f===null&&(f=void 0)),f===void 0&&p.length===h.length&&(l instanceof Sn||l instanceof _i||l instanceof Ii?f=l.runOp(u):f=_y.runOp(l,u)),f!==void 0)if(f!==null){let g=f.data;for(let y=p.length-1;y>=0;y--){let b=h[y],x=p[y];if(x instanceof Sn){if(typeof b=="number")throw new Error("illegal arg");g=x.modifyById(b,g)}else if(x instanceof _i){if(typeof b=="number")throw new Error("illegal arg");g=x.modifyById(b,g)}else if(x instanceof Ii){if(typeof b=="number")throw new Error("illegal arg");g=x.modifyById(b,g)}else if(x instanceof Da){let S={...x,[b]:g};g=Object.setPrototypeOf(S,Da.prototype)}else if(typeof x=="object")if(Array.isArray(x)){if(typeof b=="string"&&(b=parseInt(b),isNaN(b)))throw new Error("Invalid path");let S=g;g=[...x],g[b]=S}else g={...x,[b]:g};else return null}return{data:g,actual:{...f.actual,path:h},reverse:{...f.reverse,path:h}}}else return null;let v=h[p.length],m;if(l instanceof Sn){if(typeof v=="number")throw new Error("");m=(c=l.get(v))==null?void 0:c.data}else if(l instanceof _i){if(typeof v=="number")throw new Error("");m=(d=l.get(v))==null?void 0:d.data}else l!==null&&(m=l[v]);if(m!==void 0)p.push(l),l=m;else return null}}e.apply=r;function a(l,u){for(let c=0;c<l.length&&c<u.length;c++)if(l[c]!==u[c])return!0;return!1}e.pathDisjoint=a;function n(l,u){if(l.length!==u.length)return!1;for(let c=0;c<l.length;c++)if(l[c]!==u[c])return!1;return!0}e.pathEq=n;function s(l,u){return a(l.path,u.path)}e.commutative=s;function o(l,u){return l.type===0&&u.type===0&&n(l.path,u.path)?Object.keys(l.props).every(c=>u.props[c]!==void 0):!1}e.subsumed=o})(en||(en={}));var J_;(e=>{function t(){return[]}e.empty=t;function i(u,c){let d=[];for(let h of u){let[p,...f]=h.path;p===c&&d.push({...h,path:f})}return d}e.removePrefix=i;function r(u,c){return u.map(d=>({...d,path:[c,...d.path]}))}e.addPrefix=r;function a(u,c){return[...u,...c]}e.concat=a;function n(u,c){return[...u.filter(d=>!c.some(h=>en.subsumed(d,h))),...c]}e.compress=n;function s(u,c){return u.every(d=>c.every(h=>en.commutative(d,h)))}e.commutative=s;function o(u,c){for(let d of c){let h=l(u,d);h!==null&&(u=h.data)}return u}e.applyAll=o;function l(u,c){var d=u;let h=[],p=[];for(let f of c)try{if(f.type===3||f.type===5&&f.path[f.path.length-1]==="variables"){let v,m,g;if(f.type===3?(v=Fa.zoom(d,[...f.path,f.id]),g=en.apply(d,{...f,type:2})):(v=Fa.zoom(d,[...f.path,f.id,"value"]),g=en.apply(d,f)),g!==null){d=g.data;let[y,b]=Doe(d,{[f.id]:v});d=y;for(let x=0;x<b.length;x++){let S=b[x],w=S.pop();if(typeof w=="number"){let E=[w];for(let P=x+1;P<b.length;P++){let A=b[P],k=A[A.length-1];if(typeof k=="number"&&Fa.equal(S,A.slice(0,A.length-1)))E.push(k),b.splice(P,1);else break}let M=Fa.zoom(d,S);m=M.map((P,A)=>E.includes(A)?f.id:P),v=M,w=S.pop()}else{if(w==="alphaOverride"||w==="alpha"){v/=100;let E=v,M=Fa.zoom(d,S.slice(0,S.length-2)),P=M.layers.map(A=>A.id===S[S.length-1]?{...A,data:{...A.data,[w]:E}}:A);Object.setPrototypeOf(P,Object.getPrototypeOf(M.layers)),M.layers=P}m=f.id}h.push({type:0,path:S,props:{[w]:v}}),p.push({type:0,path:S,props:{[w]:m}})}p.push(g.reverse),h.push(g.actual)}}else{let v=en.apply(d,f);v!==null&&(h.push(v.actual),d=v.data,p.push(v.reverse))}}catch(v){if(v instanceof B6)return null;throw v}return{data:d,actual:h,reverse:p.reverse()}}e.apply=l})(J_||(J_={}));var V6=Symbol(),Boe=Symbol(),Yb=Symbol(),Fm=class{reportOp(e,t,i=[]){let r=this;if(t===null)return;r._current=t.data;let a=i;for(;!(r instanceof j6);){let n=r._path,s=r._current;if(n!==""&&a.splice(0,0,n),r=r._parent,r===null)return;r.update(n,s)}r.push(a,e,t.actual,t.reverse)}deleteChildren(e){if(this._children){let t=this._children[e];if(t){let i=t[Yb];i&&i(),delete this._children[e]}}}},zoe=class extends Fm{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){if(Array.isArray(this._current)){if(typeof e=="string"&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid path");this._current=[...this._current],this._current[e]=t}else this._current={...this._current,[e]:t}}runOp(e){this.reportOp(e,_y.runOp(this._current,e),e.path)}},Roe=class extends Fm{constructor(e,t,i){super(),this._parent=e,this._path=t,this._current=i}update(e,t){this._current={...this._current,[e]:t},Object.setPrototypeOf(this._current,Ii.prototype)}runOp(e){this.reportOp(e,this._current.runOp(e))}},F6={get(e,t){if(t===Yb)return()=>{e._parent=null};if(t===V6)return e._current;if(t===Boe)return e;let{_current:i,_children:r}=e;if(t==="push"&&Array.isArray(i))throw new Error("not supported to expand array");let a=r===void 0?void 0:r[t];if(a!==void 0)return a;let n=i[t],s=Xb(e,t,n);return s!==n?(r===void 0&&(r={},e._children=r),r[t]=s,s):n},has(e,t){return t in e._current},ownKeys(e){return Reflect.ownKeys(e._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(e){return Object.getPrototypeOf(e._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(e,t){let i=e._current,r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:!0,enumerable:r.enumerable,value:i[t]}}},Noe={...F6,set(e,t,i){let r={type:0,props:{[t]:ga(i)??i}};return e.deleteChildren(t),e.runOp(r),!0},deleteProperty(e,t){let i={type:0,props:{[t]:void 0}};return e.deleteChildren(t),e.runOp(i),!0}},Voe={...F6,set(e,t,i){return i===void 0?this.deleteProperty(e,t):(e.deleteChildren(t),e.runOp({type:1,id:t,data:i})),!0},deleteProperty(e,t){return e.runOp({type:2,id:t}),!0}},sA=class extends Fm{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Yb]=()=>{this._parent=null}}unproxy(){return this._current}update(e,t){this._current=this._current.modifyById(e,t)}runOp(e){this.reportOp(e,this._current.runOp(e))}randomId(){return this._current.randomId()}isDescendantOf(e,t){return this._current.isDescendantOf(e,t)}childrenOf(e){return this._current.childrenOf(e)}traverse(e){return this._current.traverse(e)}get(e){return this._current.get(e)}parent(e){return this._current.parent(e)}traverse(e){this._current.traverse((t,i)=>{e(t,this.data(t))})}data(e){var t;let{_current:i,_children:r}=this,a=r===void 0?void 0:r[e];if(a!==void 0)return a;let n=(t=i.get(e))==null?void 0:t.data,s=Xb(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}add(e,t,i,r,a){this.runOp({type:7,parent:e,fi:t,id:i,data:r,children:a})}move(e,t,i){this.runOp({type:9,parent:e,fi:t,id:i})}insertAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let a=0;a<i.length;a++){let n=i[a];this.add(e,r[a],n.id,n.data,n.children)}}insertBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let a=0;a<i.length;a++){let n=i[a];this.add(e,r[a],n.id,n.data,n.children)}}moveAfter(e,t,i){let r=this._current.insertAfterHelper(e,t,i.length);for(let a=0;a<i.length;a++){let n=i[a];this.move(e,r[a],n)}}moveBefore(e,t,i){let r=this._current.insertBeforeHelper(e,t,i.length);for(let a=0;a<i.length;a++){let n=i[a];this.move(e,r[a],n)}}delete(e){this.deleteChildren(e),this.runOp({type:8,id:e})}sortNext(e){return this._current.sortNext(e)}sortPrevious(e){return this._current.sortPrevious(e)}getAllSorted(e){return this._current.getAllSorted(e)}},oA=class extends Fm{constructor(e,t,i){super(),this._children={},this._parent=e,this._path=t,this._current=i,this[Yb]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id,a=this._current[i].fi;e(this.data(this._current[i].id),r,a)}}find(e){let t=this.length;for(let i=0;i<t;i++){let r=this._current[i].id;if(e(this.data(r),r))return this.get(r)}}update(e,t){this._current=this._current.modifyById(e,t)}randomId(){return this._current.randomId()}get(e){return{...this._current.get(e),data:this.data(e)}}data(e){var t;let{_current:i,_children:r}=this,a=r===void 0?void 0:r[e];if(a!==void 0)return a;let n=(t=i.get(e))==null?void 0:t.data,s=Xb(this,e,n);return s!==n?(r===void 0&&(r={},this._children=r),r[e]=s,s):n}runOp(e){this.reportOp(e,this._current.runOp(e))}add(e,t,i){this.runOp({type:4,fi:e,id:t,data:i})}move(e,t){this.runOp({type:6,fi:e,id:t})}insertAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let a=t[r];this.add(i[r],a.id,a.data)}}insertBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let a=t[r];this.add(i[r],a.id,a.data)}}moveAfter(e,t){let i=this._current.insertAfterHelper(e,t.length);for(let r=0;r<t.length;r++){let a=t[r];this.move(i[r],a)}}moveBefore(e,t){let i=this._current.insertBeforeHelper(e,t.length);for(let r=0;r<t.length;r++){let a=t[r];this.move(i[r],a)}}delete(e){this.deleteChildren(e),this.runOp({type:5,id:e})}};function Nw(e,t,i){if(e.length>0){let r=e[e.length-1];if(r.type===0&&t.type===0&&Fa.equal(r.path,i)){Object.assign(r.props,t.props);return}}e.push({...t,path:i})}var j6=class extends Fm{constructor(e){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=e}update(e,t){if(e!=="")throw new Error("");this._current=t}push(e,t,i,r){Nw(this.ts,t,e),Nw(this.actual,i,e),Nw(this.reverse,r,e)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Xb(e,t,i){return i instanceof Sn?new sA(e,t,i):i instanceof _i?new oA(e,t,i):i instanceof Ii?new Proxy(new Roe(e,t,i),Voe):i!==null&&typeof i=="object"?rA(i)?i:new Proxy(new zoe(e,t,i),Noe):i}function $6(e){let t=new j6(e);return[Xb(t,"",e),t]}function dm(e,t){let[i,r]=$6(e);return t(i),r.result()}function ga(e){return e instanceof sA||e instanceof oA?e._current:e!==null&&typeof e=="object"?e[V6]:e}var Fa;(e=>{function t(n,s){if(s.length===n.length)for(var o=0;o<n.length;){if(n[o]!==s[o])return!1;o+=1}else return!1;return!0}e.equal=t;function i(n,s,o){let l=a(o,n);if(l!==void 0&&typeof l=="object"&&l!==null){let u={...s};return Object.keys(l).forEach(c=>{delete u[c]}),u}else return s}e.removeOverridden=i;function r(n,s){if((n instanceof Sn||n instanceof sA)&&typeof s=="string"||(n instanceof _i||n instanceof oA)&&typeof s=="string")return n.data(s);if(typeof s=="number"&&Array.isArray(n)||typeof s=="string"&&typeof n=="object"&&n!==null)return n[s]}e.zoomOnce=r;function a(n,s,o=0){for(;o<s.length&&n!==void 0;)n=r(n,s[o]),o+=1;return n}e.zoom=a})(Fa||(Fa={}));function Foe(e,t){let i=[];if(t.length===e.length)for(var r=0;r<e.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}function Vr(e,t){let i=[];if(t.length<=e.length)for(var r=0;r<t.length;){if(t[r]==="*")i.push(e[r]);else if(e[r]!==t[r])return null;r+=1}else return null;return i}var U6=class{},Fk=class extends U6{constructor(e){super(),this.id=e}},jk=class extends U6{constructor(e){super(),this.data=e}},e2;try{e2=new TextDecoder}catch{}var fi,ic,ot=0,fs={},_r,Gu,$s=0,il=0,Ps,eu,as=[],Pr,$k={useRecords:!1,mapsAsObjects:!0},W6=class{},H6=new W6;H6.name="MessagePack 0xC1";var Kh=!1,Py=class{constructor(e){e&&(e.useRecords===!1&&e.mapsAsObjects===void 0&&(e.mapsAsObjects=!0),e.structures?e.structures.sharedLength=e.structures.length:e.getStructures&&((e.structures=[]).uninitialized=!0,e.structures.sharedLength=0)),Object.assign(this,e)}unpack(e,t){if(fi)return Z6(()=>(i2(),this?this.unpack(e,t):Py.prototype.unpack.call($k,e,t)));ic=t>-1?t:e.length,ot=0,il=0,Gu=null,Ps=null,fi=e;try{Pr=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(i){throw fi=null,e instanceof Uint8Array?i:new Error("Source must be a Uint8Array or Buffer but was a "+(e&&typeof e=="object"?e.constructor.name:typeof e))}if(this instanceof Py){if(fs=this,this.structures)return _r=this.structures,Vv();(!_r||_r.length>0)&&(_r=[])}else fs=$k,(!_r||_r.length>0)&&(_r=[]);return Vv()}unpackMultiple(e,t){let i,r=0;try{Kh=!0;let a=e.length,n=this?this.unpack(e,a):Zb.unpack(e,a);if(t){for(t(n);ot<a;)if(r=ot,t(Vv())===!1)return}else{for(i=[n];ot<a;)r=ot,i.push(Vv());return i}}catch(a){throw a.lastPosition=r,a.values=i,a}finally{Kh=!1,i2()}}_mergeStructures(e,t){e=e||[];for(let i=0,r=e.length;i<r;i++){let a=e[i];a&&(a.isShared=!0,i>=32&&(a.highByte=i-32>>5))}e.sharedLength=e.length;for(let i in t||[])if(i>=0){let r=e[i],a=t[i];a&&(r&&((e.restoreStructures||(e.restoreStructures=[]))[i]=r),e[i]=a)}return this.structures=e}decode(e,t){return this.unpack(e,t)}};function Vv(){try{if(!fs.trusted&&!Kh){let t=_r.sharedLength||0;t<_r.length&&(_r.length=t)}let e=ca();if(ot==ic)_r.restoreStructures&&Uk(),_r=null,fi=null,eu&&(eu=null);else if(ot>ic){let t=new Error("Unexpected end of MessagePack data");throw t.incomplete=!0,t}else if(!Kh)throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw _r.restoreStructures&&Uk(),i2(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function Uk(){for(let e in _r.restoreStructures)_r[e]=_r.restoreStructures[e];_r.restoreStructures=null}function ca(){let e=fi[ot++];if(e<160)if(e<128){if(e<64)return e;{let t=_r[e&63]||fs.getStructures&&G6()[e&63];return t?(t.read||(t.read=lA(t,e&63)),t.read()):e}}else if(e<144)if(e-=128,fs.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[Y6()]=ca();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(ca(),ca());return t}else{e-=144;let t=new Array(e);for(let i=0;i<e;i++)t[i]=ca();return t}else if(e<192){let t=e-160;if(il>=ot)return Gu.slice(ot-$s,(ot+=t)-$s);if(il==0&&ic<140){let i=t<16?uA(t):q6(t);if(i!=null)return i}return t2(t)}else{let t;switch(e){case 192:return null;case 193:return Ps?(t=ca(),t>0?Ps[1].slice(Ps.position1,Ps.position1+=t):Ps[0].slice(Ps.position0,Ps.position0-=t)):H6;case 194:return!1;case 195:return!0;case 196:return Vw(fi[ot++]);case 197:return t=Pr.getUint16(ot),ot+=2,Vw(t);case 198:return t=Pr.getUint32(ot),ot+=4,Vw(t);case 199:return xc(fi[ot++]);case 200:return t=Pr.getUint16(ot),ot+=2,xc(t);case 201:return t=Pr.getUint32(ot),ot+=4,xc(t);case 202:if(t=Pr.getFloat32(ot),fs.useFloat32>2){let i=cA[(fi[ot]&127)<<1|fi[ot+1]>>7];return ot+=4,(i*t+(t>0?.5:-.5)>>0)/i}return ot+=4,t;case 203:return t=Pr.getFloat64(ot),ot+=8,t;case 204:return fi[ot++];case 205:return t=Pr.getUint16(ot),ot+=2,t;case 206:return t=Pr.getUint32(ot),ot+=4,t;case 207:return fs.int64AsNumber?(t=Pr.getUint32(ot)*4294967296,t+=Pr.getUint32(ot+4)):t=Pr.getBigUint64(ot),ot+=8,t;case 208:return Pr.getInt8(ot++);case 209:return t=Pr.getInt16(ot),ot+=2,t;case 210:return t=Pr.getInt32(ot),ot+=4,t;case 211:return fs.int64AsNumber?(t=Pr.getInt32(ot)*4294967296,t+=Pr.getUint32(ot+4)):t=Pr.getBigInt64(ot),ot+=8,t;case 212:if(t=fi[ot++],t==114)return Yk(fi[ot++]&63);{let i=as[t];if(i)return i.read?(ot++,i.read(ca())):i.noBuffer?(ot++,i()):i(fi.subarray(ot,++ot));throw new Error("Unknown extension "+t)}case 213:return t=fi[ot],t==114?(ot++,Yk(fi[ot++]&63,fi[ot++])):xc(2);case 214:return xc(4);case 215:return xc(8);case 216:return xc(16);case 217:return t=fi[ot++],il>=ot?Gu.slice(ot-$s,(ot+=t)-$s):$oe(t);case 218:return t=Pr.getUint16(ot),ot+=2,il>=ot?Gu.slice(ot-$s,(ot+=t)-$s):Uoe(t);case 219:return t=Pr.getUint32(ot),ot+=4,il>=ot?Gu.slice(ot-$s,(ot+=t)-$s):Woe(t);case 220:return t=Pr.getUint16(ot),ot+=2,Hk(t);case 221:return t=Pr.getUint32(ot),ot+=4,Hk(t);case 222:return t=Pr.getUint16(ot),ot+=2,Gk(t);case 223:return t=Pr.getUint32(ot),ot+=4,Gk(t);default:if(e>=224)return e-256;if(e===void 0){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}throw new Error("Unknown MessagePack token "+e)}}}var joe=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function lA(e,t){function i(){if(i.count++>2){let a=e.read=new Function("r","return function(){return {"+e.map(n=>joe.test(n)?n+":r()":"["+JSON.stringify(n)+"]:r()").join(",")+"}}")(ca);return e.highByte===0&&(e.read=Wk(t,e.read)),a()}let r={};for(let a=0,n=e.length;a<n;a++){let s=e[a];r[s]=ca()}return r}return i.count=0,e.highByte===0?Wk(t,i):i}var Wk=(e,t)=>function(){let i=fi[ot++];if(i===0)return t();let r=e<32?-(e+(i<<5)):e+(i<<5),a=_r[r]||G6()[r];if(!a)throw new Error("Record id is not defined for "+r);return a.read||(a.read=lA(a,e)),a.read()};function G6(){let e=Z6(()=>(fi=null,fs.getStructures()));return _r=fs._mergeStructures(e,_r)}var t2=Kb,$oe=Kb,Uoe=Kb,Woe=Kb;function Kb(e){let t;if(e<16&&(t=uA(e)))return t;if(e>64&&e2)return e2.decode(fi.subarray(ot,ot+=e));let i=ot+e,r=[];for(t="";ot<i;){let a=fi[ot++];if(!(a&128))r.push(a);else if((a&224)===192){let n=fi[ot++]&63;r.push((a&31)<<6|n)}else if((a&240)===224){let n=fi[ot++]&63,s=fi[ot++]&63;r.push((a&31)<<12|n<<6|s)}else if((a&248)===240){let n=fi[ot++]&63,s=fi[ot++]&63,o=fi[ot++]&63,l=(a&7)<<18|n<<12|s<<6|o;l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l)}else r.push(a);r.length>=4096&&(t+=Xa.apply(String,r),r.length=0)}return r.length>0&&(t+=Xa.apply(String,r)),t}function Hk(e){let t=new Array(e);for(let i=0;i<e;i++)t[i]=ca();return t}function Gk(e){if(fs.mapsAsObjects){let t={};for(let i=0;i<e;i++)t[Y6()]=ca();return t}else{let t=new Map;for(let i=0;i<e;i++)t.set(ca(),ca());return t}}var Xa=String.fromCharCode;function q6(e){let t=ot,i=new Array(e);for(let r=0;r<e;r++){let a=fi[ot++];if((a&128)>0){ot=t;return}i[r]=a}return Xa.apply(String,i)}function uA(e){if(e<4)if(e<2){if(e===0)return"";{let t=fi[ot++];if((t&128)>1){ot-=1;return}return Xa(t)}}else{let t=fi[ot++],i=fi[ot++];if((t&128)>0||(i&128)>0){ot-=2;return}if(e<3)return Xa(t,i);let r=fi[ot++];if((r&128)>0){ot-=3;return}return Xa(t,i,r)}else{let t=fi[ot++],i=fi[ot++],r=fi[ot++],a=fi[ot++];if((t&128)>0||(i&128)>0||(r&128)>0||(a&128)>0){ot-=4;return}if(e<6){if(e===4)return Xa(t,i,r,a);{let n=fi[ot++];if((n&128)>0){ot-=5;return}return Xa(t,i,r,a,n)}}else if(e<8){let n=fi[ot++],s=fi[ot++];if((n&128)>0||(s&128)>0){ot-=6;return}if(e<7)return Xa(t,i,r,a,n,s);let o=fi[ot++];if((o&128)>0){ot-=7;return}return Xa(t,i,r,a,n,s,o)}else{let n=fi[ot++],s=fi[ot++],o=fi[ot++],l=fi[ot++];if((n&128)>0||(s&128)>0||(o&128)>0||(l&128)>0){ot-=8;return}if(e<10){if(e===8)return Xa(t,i,r,a,n,s,o,l);{let u=fi[ot++];if((u&128)>0){ot-=9;return}return Xa(t,i,r,a,n,s,o,l,u)}}else if(e<12){let u=fi[ot++],c=fi[ot++];if((u&128)>0||(c&128)>0){ot-=10;return}if(e<11)return Xa(t,i,r,a,n,s,o,l,u,c);let d=fi[ot++];if((d&128)>0){ot-=11;return}return Xa(t,i,r,a,n,s,o,l,u,c,d)}else{let u=fi[ot++],c=fi[ot++],d=fi[ot++],h=fi[ot++];if((u&128)>0||(c&128)>0||(d&128)>0||(h&128)>0){ot-=12;return}if(e<14){if(e===12)return Xa(t,i,r,a,n,s,o,l,u,c,d,h);{let p=fi[ot++];if((p&128)>0){ot-=13;return}return Xa(t,i,r,a,n,s,o,l,u,c,d,h,p)}}else{let p=fi[ot++],f=fi[ot++];if((p&128)>0||(f&128)>0){ot-=14;return}if(e<15)return Xa(t,i,r,a,n,s,o,l,u,c,d,h,p,f);let v=fi[ot++];if((v&128)>0){ot-=15;return}return Xa(t,i,r,a,n,s,o,l,u,c,d,h,p,f,v)}}}}}function Vw(e){return fs.copyBuffers?Uint8Array.prototype.slice.call(fi,ot,ot+=e):fi.subarray(ot,ot+=e)}function xc(e){let t=fi[ot++];if(as[t])return as[t](fi.subarray(ot,ot+=e));throw new Error("Unknown extension type "+t)}var qk=new Array(4096);function Y6(){let e=fi[ot++];if(e>=160&&e<192){if(e=e-160,il>=ot)return Gu.slice(ot-$s,(ot+=e)-$s);if(!(il==0&&ic<180))return t2(e)}else return ot--,ca();let t=(e<<5^(e>1?Pr.getUint16(ot):e>0?fi[ot]:0))&4095,i=qk[t],r=ot,a=ot+e-3,n,s=0;if(i&&i.bytes==e){for(;r<a;){if(n=Pr.getUint32(r),n!=i[s++]){r=1879048192;break}r+=4}for(a+=3;r<a;)if(n=fi[r++],n!=i[s++]){r=1879048192;break}if(r===a)return ot=r,i.string;a-=3,r=ot}for(i=[],qk[t]=i,i.bytes=e;r<a;)n=Pr.getUint32(r),i.push(n),r+=4;for(a+=3;r<a;)n=fi[r++],i.push(n);let o=e<16?uA(e):q6(e);return o!=null?i.string=o:i.string=t2(e)}var Yk=(e,t)=>{var i=ca();let r=e;t!==void 0&&(e=e<32?-((t<<5)+e):(t<<5)+e,i.highByte=t);let a=_r[e];return a&&a.isShared&&((_r.restoreStructures||(_r.restoreStructures=[]))[e]=a),_r[e]=i,i.read=lA(i,r),i.read()},X6=typeof self=="object"?self:global;as[0]=()=>{};as[0].noBuffer=!0;as[101]=()=>{let e=ca();return(X6[e[0]]||Error)(e[1])};as[105]=e=>{let t=Pr.getUint32(ot-4);eu||(eu=new Map);let i=fi[ot],r;i>=144&&i<160||i==220||i==221?r=[]:r={};let a={target:r};eu.set(t,a);let n=ca();return a.used?Object.assign(r,n):(a.target=n,n)};as[112]=e=>{let t=Pr.getUint32(ot-4),i=eu.get(t);return i.used=!0,i.target};as[115]=()=>new Set(ca());var K6=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(e=>e+"Array");as[116]=e=>{let t=e[0],i=K6[t];if(!i)throw new Error("Could not find typed array for code "+t);return new X6[i](Uint8Array.prototype.slice.call(e,1).buffer)};as[120]=()=>{let e=ca();return new RegExp(e[0],e[1])};as[98]=e=>{let t=(e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3],i=ot;ot+=t-4,Ps=[ca(),ca()],Ps.position0=0,Ps.position1=0;let r=ot;ot=i;try{return ca()}finally{ot=r}};as[255]=e=>e.length==4?new Date((e[0]*16777216+(e[1]<<16)+(e[2]<<8)+e[3])*1e3):e.length==8?new Date(((e[0]<<22)+(e[1]<<14)+(e[2]<<6)+(e[3]>>2))/1e6+((e[3]&3)*4294967296+e[4]*16777216+(e[5]<<16)+(e[6]<<8)+e[7])*1e3):e.length==12?new Date(((e[0]<<24)+(e[1]<<16)+(e[2]<<8)+e[3])/1e6+((e[4]&128?-281474976710656:0)+e[6]*1099511627776+e[7]*4294967296+e[8]*16777216+(e[9]<<16)+(e[10]<<8)+e[11])*1e3):new Date("invalid");function Z6(e){let t=ic,i=ot,r=$s,a=il,n=Gu,s=eu,o=Ps,l=new Uint8Array(fi.slice(0,ic)),u=_r,c=_r.slice(0,_r.length),d=fs,h=Kh,p=e();return ic=t,ot=i,$s=r,il=a,Gu=n,eu=s,Ps=o,fi=l,Kh=h,_r=u,_r.splice(0,_r.length,...c),fs=d,Pr=new DataView(fi.buffer,fi.byteOffset,fi.byteLength),p}function i2(){fi=null,eu=null,_r=null}function Hoe(e){e.unpack?as[e.type]=e.unpack:as[e.type]=e}var cA=new Array(147);for(let e=0;e<256;e++)cA[e]=+("1e"+Math.floor(45.15-e*.30103));var Zb=new Py({useRecords:!1});Zb.unpack;Zb.unpackMultiple;Zb.unpack;var Goe=new Float32Array(1);new Uint8Array(Goe.buffer,0,4);var Gg;try{Gg=new TextEncoder}catch{}var Ty,dA,Qb=typeof Buffer<"u",Fw=Qb?Buffer.allocUnsafeSlow:Uint8Array,Q6=Qb?Buffer:Uint8Array,Xk=Qb?4294967296:2144337920,Tt,fa,ht=0,No,Vo=null,qoe=/[\u0080-\uFFFF]/,Wp=Symbol("record-id"),J6=class extends Py{constructor(e){super(e),this.offset=0;let t,i,r,a,n,s=0,o=Q6.prototype.utf8Write?function(w,E,M){return Tt.utf8Write(w,E,M)}:Gg&&Gg.encodeInto?function(w,E){return Gg.encodeInto(w,Tt.subarray(E)).written}:!1,l=this;e||(e={});let u=e&&e.sequential,c=e.structures||e.saveStructures,d=e.maxSharedStructures;if(d==null&&(d=c?32:0),d>8160)throw new Error("Maximum maxSharedStructure is 8160");let h=e.maxOwnStructures;h==null&&(h=c?32:64),u&&!e.saveStructures&&(this.structures=[]);let p=d>32||h+d>64,f=d+64,v=d+h+64;if(v>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let m=[],g=0,y=0;this.pack=this.encode=function(w,E){if(Tt||(Tt=new Fw(8192),fa=new DataView(Tt.buffer,0,8192),ht=0),No=Tt.length-10,No-ht<2048?(Tt=new Fw(Tt.length),fa=new DataView(Tt.buffer,0,Tt.length),No=Tt.length-10,ht=0):ht=ht+7&2147483640,t=ht,n=l.structuredClone?new Map:null,l.bundleStrings?(Vo=["",""],Tt[ht++]=214,Tt[ht++]=98,Vo.position=ht-t,ht+=4):Vo=null,i=l.structures,i){i.uninitialized&&(i=l._mergeStructures(l.getStructures()));let M=i.sharedLength||0;if(M>d)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+i.sharedLength);if(!i.transitions){i.transitions=Object.create(null);for(let P=0;P<M;P++){let A=i[P];if(!A)continue;let k,I=i.transitions;for(let O=0,D=A.length;O<D;O++){let F=A[O];k=I[F],k||(k=I[F]=Object.create(null)),I=k}I[Wp]=P+64}s=M}u||(i.nextId=M+64)}r&&(r=!1),a=i||[];try{if(b(w),Vo){fa.setUint32(Vo.position+t,ht-Vo.position-t);let M=Vo;Vo=null,b(M[0]),b(M[1])}if(l.offset=ht,n&&n.idsToInsert){ht+=n.idsToInsert.length*6,ht>No&&S(ht),l.offset=ht;let M=Xoe(Tt.subarray(t,ht),n.idsToInsert);return n=null,M}return E&Koe?(Tt.start=t,Tt.end=ht,Tt):Tt.subarray(t,ht)}finally{if(i){if(y<10&&y++,g>1e4)i.transitions=null,y=0,g=0,m.length>0&&(m=[]);else if(m.length>0&&!u){for(let M=0,P=m.length;M<P;M++)m[M][Wp]=0;m=[]}if(r&&l.saveStructures){let M=i.sharedLength||d;i.length>M&&(i=i.slice(0,M));let P=Tt.subarray(t,ht);return l.saveStructures(i,s)===!1?(l._mergeStructures(l.getStructures()),l.pack(w)):(s=M,P)}}E&Zoe&&(ht=t)}};let b=w=>{ht>No&&(Tt=S(ht));var E=typeof w,M;if(E==="string"){let P=w.length;if(Vo&&P>=8&&P<4096){let I=qoe.test(w);Vo[I?0:1]+=w,Tt[ht++]=193,b(I?-P:P);return}let A;P<32?A=1:P<256?A=2:P<65536?A=3:A=5;let k=P*3;if(ht+k>No&&(Tt=S(ht+k)),P<64||!o){let I,O,D,F=ht+A;for(I=0;I<P;I++)O=w.charCodeAt(I),O<128?Tt[F++]=O:O<2048?(Tt[F++]=O>>6|192,Tt[F++]=O&63|128):(O&64512)===55296&&((D=w.charCodeAt(I+1))&64512)===56320?(O=65536+((O&1023)<<10)+(D&1023),I++,Tt[F++]=O>>18|240,Tt[F++]=O>>12&63|128,Tt[F++]=O>>6&63|128,Tt[F++]=O&63|128):(Tt[F++]=O>>12|224,Tt[F++]=O>>6&63|128,Tt[F++]=O&63|128);M=F-ht-A}else M=o(w,ht+A,k);M<32?Tt[ht++]=160|M:M<256?(A<2&&Tt.copyWithin(ht+2,ht+1,ht+1+M),Tt[ht++]=217,Tt[ht++]=M):M<65536?(A<3&&Tt.copyWithin(ht+3,ht+2,ht+2+M),Tt[ht++]=218,Tt[ht++]=M>>8,Tt[ht++]=M&255):(A<5&&Tt.copyWithin(ht+5,ht+3,ht+3+M),Tt[ht++]=219,fa.setUint32(ht,M),ht+=4),ht+=M}else if(E==="number")if(w>>>0===w)w<64?Tt[ht++]=w:w<256?(Tt[ht++]=204,Tt[ht++]=w):w<65536?(Tt[ht++]=205,Tt[ht++]=w>>8,Tt[ht++]=w&255):(Tt[ht++]=206,fa.setUint32(ht,w),ht+=4);else if(w>>0===w)w>=-32?Tt[ht++]=256+w:w>=-128?(Tt[ht++]=208,Tt[ht++]=w+256):w>=-32768?(Tt[ht++]=209,fa.setInt16(ht,w),ht+=2):(Tt[ht++]=210,fa.setInt32(ht,w),ht+=4);else{let P;if((P=this.useFloat32)>0&&w<4294967296&&w>=-2147483648){Tt[ht++]=202,fa.setFloat32(ht,w);let A;if(P<4||(A=w*cA[(Tt[ht]&127)<<1|Tt[ht+1]>>7])>>0===A){ht+=4;return}else ht--}Tt[ht++]=203,fa.setFloat64(ht,w),ht+=8}else if(E==="object")if(!w)Tt[ht++]=192;else{if(n){let A=n.get(w);if(A){if(!A.id){let k=n.idsToInsert||(n.idsToInsert=[]);A.id=k.push(A)}Tt[ht++]=214,Tt[ht++]=112,fa.setUint32(ht,A.id),ht+=4;return}else n.set(w,{offset:ht-t})}let P=w.constructor;if(P===Object)x(w,!0);else if(P===Array){M=w.length,M<16?Tt[ht++]=144|M:M<65536?(Tt[ht++]=220,Tt[ht++]=M>>8,Tt[ht++]=M&255):(Tt[ht++]=221,fa.setUint32(ht,M),ht+=4);for(let A=0;A<M;A++)b(w[A])}else if(P===Map){M=w.size,M<16?Tt[ht++]=128|M:M<65536?(Tt[ht++]=222,Tt[ht++]=M>>8,Tt[ht++]=M&255):(Tt[ht++]=223,fa.setUint32(ht,M),ht+=4);for(let[A,k]of w)b(A),b(k)}else{for(let A=0,k=Ty.length;A<k;A++){let I=dA[A];if(w instanceof I){let O=Ty[A];if(O.write){O.type&&(Tt[ht++]=212,Tt[ht++]=O.type,Tt[ht++]=0),b(O.write.call(this,w));return}let D=Tt,F=fa,U=ht;Tt=null;let z;try{z=O.pack.call(this,w,B=>(Tt=D,D=null,ht+=B,ht>No&&S(ht),{target:Tt,targetView:fa,position:ht-B}),b)}finally{D&&(Tt=D,fa=F,ht=U,No=Tt.length-10)}z&&(z.length+ht>No&&S(z.length+ht),ht=Yoe(z,Tt,ht,O.type));return}}x(w,!w.hasOwnProperty)}}else if(E==="boolean")Tt[ht++]=w?195:194;else if(E==="bigint"){if(w<BigInt(1)<<BigInt(63)&&w>=-(BigInt(1)<<BigInt(63)))Tt[ht++]=211,fa.setBigInt64(ht,w);else if(w<BigInt(1)<<BigInt(64)&&w>0)Tt[ht++]=207,fa.setBigUint64(ht,w);else if(this.largeBigIntToFloat)Tt[ht++]=203,fa.setFloat64(ht,Number(w));else throw new RangeError(w+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ht+=8}else if(E==="undefined")this.encodeUndefinedAsNil?Tt[ht++]=192:(Tt[ht++]=212,Tt[ht++]=0,Tt[ht++]=0);else if(E==="function")b(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+E)},x=this.useRecords===!1?this.variableMapSize?w=>{let E=Object.keys(w),M=E.length;M<16?Tt[ht++]=128|M:M<65536?(Tt[ht++]=222,Tt[ht++]=M>>8,Tt[ht++]=M&255):(Tt[ht++]=223,fa.setUint32(ht,M),ht+=4);let P;for(let A=0;A<M;A++)b(P=E[A]),b(w[P])}:(w,E)=>{Tt[ht++]=222;let M=ht-t;ht+=2;let P=0;for(let A in w)(E||w.hasOwnProperty(A))&&(b(A),b(w[A]),P++);Tt[M+++t]=P>>8,Tt[M+t]=P&255}:w=>{let E=Object.keys(w),M,P=a.transitions||(a.transitions=Object.create(null)),A=0;for(let I=0,O=E.length;I<O;I++){let D=E[I];M=P[D],M||(M=P[D]=Object.create(null),A++),P=M}let k=P[Wp];if(k)k>=96&&p?(Tt[ht++]=((k-=96)&31)+96,Tt[ht++]=k>>5):Tt[ht++]=k;else{k=a.nextId,k||(k=64),k<f&&this.shouldShareStructure&&!this.shouldShareStructure(E)?(k=a.nextOwnId,k<v||(k=f),a.nextOwnId=k+1):(k>=v&&(k=f),a.nextId=k+1);let I=E.highByte=k>=96&&p?k-96>>5:-1;P[Wp]=k,a[k-64]=E,k<f?(E.isShared=!0,a.sharedLength=k-63,r=!0,I>=0?(Tt[ht++]=(k&31)+96,Tt[ht++]=I):Tt[ht++]=k):(I>=0?(Tt[ht++]=213,Tt[ht++]=114,Tt[ht++]=(k&31)+96,Tt[ht++]=I):(Tt[ht++]=212,Tt[ht++]=114,Tt[ht++]=k),A&&(g+=y*A),m.length>=h&&(m.shift()[Wp]=0),m.push(P),b(E))}for(let I=0,O=E.length;I<O;I++)b(w[E[I]])},S=w=>{let E;if(w>16777216){if(w-t>Xk)throw new Error("Packed buffer would be larger than maximum buffer size");E=Math.min(Xk,Math.round(Math.max((w-t)*(w>67108864?1.25:2),4194304)/4096)*4096)}else E=(Math.max(w-t<<2,Tt.length-1)>>12)+1<<12;let M=new Fw(E);return fa=new DataView(M.buffer,0,E),Tt.copy?Tt.copy(M,0,t,w):M.set(Tt.slice(t,w)),ht-=t,t=0,No=M.length-10,Tt=M}}useBuffer(e){Tt=e,fa=new DataView(Tt.buffer,Tt.byteOffset,Tt.byteLength),ht=0}};dA=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,W6];Ty=[{pack(e,t,i){let r=e.getTime()/1e3;if((this.useTimestamp32||e.getMilliseconds()===0)&&r>=0&&r<4294967296){let{target:a,targetView:n,position:s}=t(6);a[s++]=214,a[s++]=255,n.setUint32(s,r)}else if(r>0&&r<17179869184){let{target:a,targetView:n,position:s}=t(10);a[s++]=215,a[s++]=255,n.setUint32(s,e.getMilliseconds()*4e6+(r/1e3/4294967296>>0)),n.setUint32(s+4,r)}else if(isNaN(r)){if(this.onInvalidDate)return t(0),i(this.onInvalidDate());let{target:a,targetView:n,position:s}=t(3);a[s++]=212,a[s++]=255,a[s++]=255}else{let{target:a,targetView:n,position:s}=t(15);a[s++]=199,a[s++]=12,a[s++]=255,n.setUint32(s,e.getMilliseconds()*1e6),n.setBigInt64(s+4,BigInt(Math.floor(r)))}}},{pack(e,t,i){let r=Array.from(e),{target:a,position:n}=t(this.structuredClone?3:0);this.structuredClone&&(a[n++]=212,a[n++]=115,a[n++]=0),i(r)}},{pack(e,t,i){let{target:r,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(r[a++]=212,r[a++]=101,r[a++]=0),i([e.name,e.message])}},{pack(e,t,i){let{target:r,position:a}=t(this.structuredClone?3:0);this.structuredClone&&(r[a++]=212,r[a++]=120,r[a++]=0),i([e.source,e.flags])}},{pack(e,t){this.structuredClone?Kk(e,16,t):Zk(Qb?Buffer.from(e):new Uint8Array(e),t)}},{pack(e,t){let i=e.constructor;i!==Q6&&this.structuredClone?Kk(e,K6.indexOf(i.name),t):Zk(e,t)}},{pack(e,t){let{target:i,position:r}=t(1);i[r]=193}}];function Kk(e,t,i,r){let a=e.byteLength;if(a+1<256){var{target:n,position:s}=i(4+a);n[s++]=199,n[s++]=a+1}else if(a+1<65536){var{target:n,position:s}=i(5+a);n[s++]=200,n[s++]=a+1>>8,n[s++]=a+1&255}else{var{target:n,position:s,targetView:o}=i(7+a);n[s++]=201,o.setUint32(s,a+1),s+=4}n[s++]=116,n[s++]=t,n.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),s)}function Zk(e,t){let i=e.byteLength;var r,a;if(i<256){var{target:r,position:a}=t(i+2);r[a++]=196,r[a++]=i}else if(i<65536){var{target:r,position:a}=t(i+3);r[a++]=197,r[a++]=i>>8,r[a++]=i&255}else{var{target:r,position:a,targetView:n}=t(i+5);r[a++]=198,n.setUint32(a,i),a+=4}r.set(e,a)}function Yoe(e,t,i,r){let a=e.length;switch(a){case 1:t[i++]=212;break;case 2:t[i++]=213;break;case 4:t[i++]=214;break;case 8:t[i++]=215;break;case 16:t[i++]=216;break;default:a<256?(t[i++]=199,t[i++]=a):a<65536?(t[i++]=200,t[i++]=a>>8,t[i++]=a&255):(t[i++]=201,t[i++]=a>>24,t[i++]=a>>16&255,t[i++]=a>>8&255,t[i++]=a&255)}return t[i++]=r,t.set(e,i),i+=a,i}function Xoe(e,t){let i,r=t.length*6,a=e.length-r;for(t.sort((n,s)=>n.offset>s.offset?1:-1);i=t.pop();){let n=i.offset,s=i.id;e.copyWithin(n+r,n,a),r-=6;let o=n+r;e[o++]=214,e[o++]=105,e[o++]=s>>24,e[o++]=s>>16&255,e[o++]=s>>8&255,e[o++]=s&255,a=n}return e}function Sp(e){if(e.Class){if(!e.pack&&!e.write)throw new Error("Extension has no pack or write function");if(e.pack&&!e.type)throw new Error("Extension has no type (numeric code to identify the extension)");dA.unshift(e.Class),Ty.unshift(e)}Hoe(e)}var eN=new J6({useRecords:!1});eN.pack;eN.pack;var Koe=512,Zoe=1024,Qk=new J6({structuredClone:!0});Sp({Class:Ii.prototype.constructor,type:1,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Ii.prototype),e}});Sp({Class:_i.prototype.constructor,type:2,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,_i.prototype),e}});Sp({Class:Sn.prototype.constructor,type:3,write(e){return[...e]},read(e){return Object.setPrototypeOf(e,Sn.prototype),e}});Sp({Class:Fk.prototype.constructor,type:4,write(e){return e.id},read(e){return new Fk(e)}});Sp({Class:jk.prototype.constructor,type:5,write(e){return e.data},read(e){return new jk(e)}});Sp({Class:Da.prototype.constructor,type:6,write(e){return{...e}},read(e){return Object.setPrototypeOf(e,Da.prototype),e}});function Qoe(e){var t=0;if(e.length===0)return t;for(let i=0;i<e.length;i++){let r=e[i];t=(t<<5)-t+r,t=t&t}return t}function r2(e){if(rA(e))return e;if(Array.isArray(e))return e.map(r2);if(typeof e=="object"&&e!==null){let t={};for(let i of Object.keys(e).sort())t[i]=r2(e[i]);return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),t}else return e}var a2;(e=>{function t(a){return Qk.pack(a)}e.serialize=t;function i(a){return Qk.unpack(a)}e.deserialize=i;function r(a){return Qoe(t(r2(a))).toString()}e.checksum=r})(a2||(a2={}));var Jk;(e=>{function t(r){return r.type==="Conditional"?r.condition.type==="Distance"?"Distance":"StateChange":r.type}e.toEventUIType=t;function i(r){return r==="Distance"||r==="StateChange"?"Conditional":r}e.fromEventUIType=i})(Jk||(Jk={}));function eO(e){return e==="MouseDown"||e==="MouseUp"||e==="KeyDown"||e==="KeyUp"||e==="Collision"||e==="Trigger"}var In={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Particles","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseHover:["Transition","Animation","Particles","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Start:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Conditional:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MouseUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],MousePress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyDown:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyUp:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],KeyPress:["Transition","Animation","Audio","Particles","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],GameControl:["Transition","Animation","Audio","Particles","Create","Conditional"],Collision:["Transition","Animation","Audio","Particles","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Trigger:["Transition","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],Resize:["Transition","Animation","Audio","Particles","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],VariableChange:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],API:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"],WEBHOOK:["Transition","Animation","Audio","Particles","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional","ClearLocalStorage","UserAPI"]},tO;(e=>{function t(r){return r.type==="MouseDown"||r.type==="MouseUp"||r.type==="MousePress"||r.type==="KeyDown"||r.type==="KeyUp"||r.type==="KeyPress"}e.is=t;function i(r){return r==="MouseDown"||r==="MouseUp"||r==="MousePress"?{type:r,mode:"Object",disabled:!1,actions:new _i}:{type:r,disabled:!1,key:void 0,actions:new _i}}e.defaultData=i})(tO||(tO={}));var ky;(e=>{function t(i){return{type:"Property",value:[i??null,"position","x"]}}e.propertyDefaultData=t,e.valueDefaultData={type:"Literal",value:0}})(ky||(ky={}));var n2;(e=>{function t(a){return{type:"Comparison",operator:"==",lOperand:ky.propertyDefaultData(a),rOperand:{...ky.valueDefaultData}}}e.comparisonDefaultData=t;function i(a){return{type:"Distance",toObject:a??null,fromObject:a??null,distance:200}}e.distanceDefaultData=i;function r(a,n){return{type:"State",object:a??null,state:n??null}}e.stateDefaultData=r})(n2||(n2={}));var iO;(e=>{function t(i){return i.find(r=>r==="ifActions"||r==="elseActions")!==void 0}e.isConditionalSubActions=t})(iO||(iO={}));var rO;(e=>{function t(r){return r.type==="Conditional"}e.is=t;function i(r){return{type:"Conditional",disabled:!1,inActions:new _i,outActions:new _i,condition:n2.distanceDefaultData(r)}}e.defaultData=i})(rO||(rO={}));var aO;(e=>e.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new _i,drop:new _i}})(aO||(aO={}));var s2;(e=>e.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new _i})(s2||(s2={}));var o2;(e=>e.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(o2||(o2={}));var nO;(e=>{function t(r){return r.type==="MouseHover"}e.is=t;function i(){return{type:"MouseHover",disabled:!1,actions:new _i}}e.defaultData=i})(nO||(nO={}));var sO;(e=>{function t(r){return r.type==="Scroll"}e.is=t;function i(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new _i}}e.defaultData=i})(sO||(sO={}));var oO;(e=>{function t(r){return r.type==="Start"}e.is=t;function i(){return{type:"Start",disabled:!1,actions:new _i}}e.defaultData=i})(oO||(oO={}));var lO;(e=>{function t(r){return r.type==="Collision"}e.is=t;function i(){return{type:"Collision",disabled:!1,target:"character",actions:new _i}}e.defaultData=i})(lO||(lO={}));var uO;(e=>{function t(r){return r.type==="Trigger"}e.is=t;function i(r,a){return{type:"Trigger",disabled:!1,target:"all",triggeringObjects:[],actions:new _i,triggerZone:"box",position:a.toArray(),rotation:[0,0,0],size:r.toArray(),radius:r.length()/2,helperVisible:!0}}e.defaultData=i})(uO||(uO={}));var l2;(e=>{e.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function t(s){return s.type==="Resize"}e.is=t;function i(s){return typeof s=="string"?s:"custom"}e.sizeToDevice=i;function r(s){return typeof s=="string"?[...e.defaultSizes[s]]:[...s]}e.deviceToSize=r;function a(){let s={size:"mobile",operator:"<",actions:new _i},o={size:"tablet",operator:"<",actions:new _i},l={size:[...e.defaultSizes.custom],operator:"<>",actions:new _i},u=new _i;return u.push({id:li.generateUUID(),fi:0,data:s},{id:li.generateUUID(),fi:1,data:o},{id:li.generateUUID(),fi:2,data:l}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:u}}e.defaultData=a;function n(){return{size:[...e.defaultSizes.custom],operator:"<>",actions:new _i}}e.defaultBreakpointData=n})(l2||(l2={}));var u2;(e=>{e.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function t(r){return r.type==="VariableChange"}e.is=t;function i(){return{disabled:!1,type:"VariableChange",actions:new _i,variableId:"",objectId:null,property:"Position X"}}e.defaultData=i})(u2||(u2={}));var cO;(e=>{function t(r){return r.type==="API"}e.is=t;function i(){return{disabled:!1,type:"API",successActions:new _i,errorActions:new _i,userAPIId:""}}e.defaultData=i})(cO||(cO={}));var dO;(e=>{function t(r){return r.type==="WEBHOOK"}e.is=t;function i(){return{disabled:!1,type:"WEBHOOK",actions:new _i,userWebhookId:""}}e.defaultData=i})(dO||(dO={}));var Cp="personal camera",Bf="a218fcc3-276b-49b9-b485-49037fd14f5f",Joe=2960946,Ds=5526619,Zl;(e=>{function t(f,v){return f[0]===v[0]&&f[1]===v[1]}e.isEqual=t;function i(f,v,m){return[f[0]+(v[0]-f[0])*m,f[1]+(v[1]-f[1])*m]}e.lerp=i;function r(f,v){return[f[0]+v[0],f[1]+v[1]]}e.add=r;function a(f,v){return[f[0]-v[0],f[1]-v[1]]}e.sub=a;function n(f,v){return[f[0]*v[0],f[1]*v[1]]}e.multiply=n;function s(f,v){return[f[0]/v[0],f[1]/v[1]]}e.divide=s;function o(f,v){return Math.pow(v[0]-f[0],2)+Math.pow(v[1]-f[1],2)}e.distanceSquared=o;function l(f,v){return Math.sqrt(o(f,v))}e.distance=l;function u(f,v){return f[0]*v[0]+f[1]*v[1]}e.dot=u;function c(f,v){return[f[0]*v,f[1]*v]}e.scalarMultiply=c;function d(f,v,m){let g=e.sub(v,f),y=e.sub(m,f),b=e.dot(g,y)/e.dot(g,g),x=e.scalarMultiply(g,b);return e.add(f,x)}e.projectionOnto=d;function h(f,v,m){return l(f,d(f,v,m))}e.projectionOntoDistance=h;function p(f,v){return[(f[0]+v[0])*.5,(f[1]+v[1])*.5]}e.center=p})(Zl||(Zl={}));var Jc;(e=>{function t(l,u){return l[0]===u[0]&&l[1]===u[1]&&l[2]===u[2]}e.isEqual=t;function i(l,u){return[l[0]+u[0],l[1]+u[1],l[2]+u[2]]}e.add=i;function r(l,u){return[l[0]-u[0],l[1]-u[1],l[2]-u[2]]}e.sub=r;function a(l,u){return[l[0]/u[0],l[1]/u[1],l[2]/u[2]]}e.div=a;function n(l,u){return[l[0]*u[0],l[1]*u[1],l[2]*u[2]]}e.mul=n;function s(l,u){return Math.hypot(l[0]-u[0],l[1]-u[1],l[2]-u[2])}e.dist=s;function o(l,u,c){return[l[0]+(u[0]-l[0])*c,l[1]+(u[1]-l[1])*c,l[2]+(u[2]-l[2])*c]}e.lerp=o})(Jc||(Jc={}));var Oy;(e=>{function t(r,a){return r[0]===a[0]&&r[1]===a[1]&&r[2]===a[2]&&r[3]===a[3]}e.isEqual=t;function i(r,a,n){return[r[0]+(a[0]-r[0])*n,r[1]+(a[1]-r[1])*n,r[2]+(a[2]-r[2])*n,r[3]+(a[3]-r[3])*n]}e.lerp=i})(Oy||(Oy={}));var hO;(e=>{let t=180/Math.PI,i=Math.PI/180;function r(o){return typeof o=="number"?o*t:o}function a(o){return typeof o=="number"?o*i:o}function n(o){return[r(o[0]),r(o[1]),r(o[2])]}e.radToDeg=n;function s(o){return[a(o[0]),a(o[1]),a(o[2])]}e.degToRad=s})(hO||(hO={}));var Zh;(e=>{e.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(a,n){for(let s=0;s<16;s++)if(a[s]!==n[s])return!1;return!0}e.isEqual=t;function i(a){return a??e.identity}e.simplify=i;function r(a,n){let s=n.slice(0);for(var o=0,l=n.length;o<l;o+=3){let u=a[3]*n[o]+a[7]*n[o+1]+a[11]*n[o+2]+a[15];s[o]=(a[0]*n[o]+a[4]*n[o+1]+a[8]*n[o+2]+a[12])/u,s[o+1]=(a[1]*n[o]+a[5]*n[o+1]+a[9]*n[o+2]+a[13])/u,s[o+2]=(a[2]*n[o]+a[6]*n[o+1]+a[10]*n[o+2]+a[14])/u}return s}e.applyMatrix4=r})(Zh||(Zh={}));var wn;(e=>{function t(u){return typeof u=="object"&&typeof u.r=="number"&&typeof u.g=="number"&&typeof u.b=="number"}e.isRGB=t,e.white={r:1,g:1,b:1},e.red={r:1,g:0,b:0},e.black={r:0,g:0,b:0};function i(u){return{r:Math.round(u.r*255),g:Math.round(u.g*255),b:Math.round(u.b*255),a:1}}e.toRgb255a1=i;function r(u){return{r:u.r,g:u.g,b:u.b}}e.clone=r;function a(u){return u=Math.floor(u),{r:(u>>16&255)/255,g:(u>>8&255)/255,b:(u&255)/255}}e.fromHex=a;function n(u){return Math.round(u.r*255)*65536+Math.round(u.g*255)*256+Math.round(u.b*255)}e.toHex=n;function s(u,c){return u.r===c.r&&u.g===c.g&&u.b===c.b}e.equals=s;function o(u,c){return u.r.toFixed(2)===c.r.toFixed(2)&&u.g.toFixed(2)===c.g.toFixed(2)&&u.b.toFixed(2)===c.b.toFixed(2)}e.equalsFixed=o;function l(u,c,d){return{r:u.r+(c.r-u.r)*d,g:u.g+(c.g-u.g)*d,b:u.b+(c.b-u.b)*d}}e.lerp=l})(wn||(wn={}));var Lr;(e=>{e.white={...wn.white,a:1},e.transparent={...wn.white,a:0};function t(l){return{r:l[0],g:l[1],b:l[2],a:l[3]}}e.from0to1=t;function i(l,u){return{...wn.fromHex(l),a:u}}e.fromHexAndA=i;function r(l){return{r:Math.round(l.r*255),g:Math.round(l.g*255),b:Math.round(l.b*255),a:l.a}}e.toRgb255a1=r;function a(l,u){return wn.equals(l,u)&&l.a===u.a}e.equals=a;function n(l,u){return wn.equalsFixed(l,u)&&l.a.toFixed(2)===u.a.toFixed(2)}e.equalsFixed=n;function s(l,u,c){return{r:l.r+(u.r-l.r)*c,g:l.g+(u.g-l.g)*c,b:l.b+(u.b-l.b)*c,a:l.a+(u.a-l.a)*c}}e.lerp=s;function o({r:l,g:u,b:c,a:d}=e.white){return`rgba(${l*255}, ${u*255}, ${c*255}, ${d})`}e.toStyle=o})(Lr||(Lr={}));var c2;(e=>e.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(c2||(c2={}));var pO;(e=>e.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(pO||(pO={}));var fO;(e=>e.defaultData={control1:[.5,0],control2:[.5,1]})(fO||(fO={}));var Ru;(e=>(e.linear=[0,0,1,1],e.ease=[.25,.1,.25,1],e.easeIn=[.42,0,1,1],e.easeOut=[0,0,.58,1],e.easeInOut=[.42,0,.58,1]))(Ru||(Ru={}));function mO(e){return typeof e=="string"&&e.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e):!1}var fd;(e=>{e.all=["PerspectiveCamera","OrthographicCamera"];function t(i){return e.all.includes(i)}e.is=t})(fd||(fd={}));var Qh;(e=>{e.DefaultUp=[0,1,0],e.DefaultTargetOffset=1e3,e.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:e.DefaultUp,isUpVectorFlipped:!1,targetOffset:e.DefaultTargetOffset};function t(i){var r,a;return i.type==="PerspectiveCamera"?((r=i.perspective)==null?void 0:r.zoom)??1:((a=i.orthographic)==null?void 0:a.zoom)??1}e.getZoom=t})(Qh||(Qh={}));var qu;(e=>{function t(r,a=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(r[0],r[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[r[0]+r[0]*a,0,0]},grid:{count:[2,2,2],size:r.map(n=>n*(1+a)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}e.defaultData=t;function i(r,a){let n={...r};if(tN.forEach(s=>{Object.assign(n,{[s]:a[s]??r[s]})}),n.radial={...r.radial},a.radial){let s=r.radial,o=a.radial;iN.forEach(l=>{Object.assign(n.radial,{[l]:o[l]??s[l]})})}if(n.linear={...r.linear},a.linear){let s=r.linear,o=a.linear;rN.forEach(l=>{Object.assign(n.linear,{[l]:o[l]??s[l]})})}if(n.grid={...r.grid},a.grid){let s=r.grid,o=a.grid;aN.forEach(l=>{Object.assign(n.grid,{[l]:o[l]??s[l]})})}if(n.toObject={...r.toObject},a.toObject){let s=r.toObject,o=a.toObject;nN.forEach(l=>{Object.assign(n.toObject,{[l]:o[l]??s[l]})})}if(n.randomnessObject={...r.randomnessObject},a.randomnessObject){let s=r.randomnessObject,o=a.randomnessObject;sN.forEach(l=>{Object.assign(n.randomnessObject,{[l]:o[l]??s[l]})})}return n}e.merge=i})(qu||(qu={}));var d2;(e=>{e.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let t=["radial","linear","grid","toObject","randomnessObject"];function i(r,a){let n=[];r.count!==void 0&&n.push({type:0,path:a,props:{count:r.count}});for(let s of t){let o=r[s];o&&Object.keys(o).length>0&&n.push({type:0,path:[...a,s],props:o})}return n}e.toOps=i})(d2||(d2={}));var tN=["count"],iN=["radius","start","end","position","scale","rotation"],rN=["position","scale","rotation"],aN=["count","size"],nN=["count","position","scale","rotation"],sN=["strength","scale","rotation","position","movement","seed","freqScale"],h2;(e=>{e.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function t(i){return e.all.includes(i)}e.is=t})(h2||(h2={}));var p2;(e=>{function t(r){return i(r)}e.defaultData=t;function i(r){if(r==="PointLight")return{type:r,color:Lr.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(r==="SpotLight")return{type:r,color:Lr.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(r==="DirectionalLight")return{type:r,color:Lr.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(p2||(p2={}));var Dy;(e=>(e.defaultShapeData={type:"PlaneEmitterShape",size:[100,100,100]},e.defaultCollisionData={colliderEntityId:null,collisionBounce:.75},e.defaultData={renderMaterial:{type:"particleMaterial",color:{r:1,g:.2,b:.545,a:1},color2:{r:.945,g:.714,b:.184,a:1},coloring:"gradient",ease:"linearFadeOut",easeSize:"linearFadeOut",transparent:!0,size:[40,40],texture:"pt_default_particle",spriteRotation:[0,0]},birthRatePerSec:50,gravity:1,noiseStrength:0,noiseScale:0,noiseSeed:1,noiseType:"curl",randomRotation:0,randomScale:.2,randomMass:.5,rootObjectType:"instancedMesh",life:1,direction:[0,0,0],directionMode:"axis",speed:10,shape:e.defaultShapeData,autoPlay:!0,emitTimeDelay:0,emitTimeCycle:"infinity",emitTimeDuration:1,...e.defaultCollisionData}))(Dy||(Dy={}));var Jh;(e=>e.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(Jh||(Jh={}));var f2;(e=>{e.defaultData={castShadow:!0,receiveShadow:!0};function t(i,r){return i.castShadow===r.castShadow&&i.receiveShadow===r.receiveShadow}e.equals=t})(f2||(f2={}));var m2;(e=>{e.defaultData={flatShading:!1,wireframe:!1,side:0};function t(i,r){return i.flatShading===r.flatShading&&i.side===r.side&&i.wireframe===r.wireframe}e.equals=t})(m2||(m2={}));var v2;(e=>e.defaultData={...m2.defaultData,...f2.defaultData})(v2||(v2={}));var vO;(e=>{function t(i,r){var a,n;let s=[];if("material"in i){let o=typeof i.material=="string"?r.materials[i.material]??((a=r.lib.materials[i.material])==null?void 0:a.asset):i.material;o&&s.push(o)}else if("materials"in i)for(let o of i.materials){let l=typeof o=="string"?r.materials[o]??((n=r.lib.materials[o])==null?void 0:n.asset):o;l&&s.push(l)}return s}e.getMaterialData=t})(vO||(vO={}));var Iy;(e=>(e.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},e.maxSize=3e7))(Iy||(Iy={}));var gO;(e=>{function t(i){return i==="texture"||i==="video"||i==="color"||i==="depth"||i==="normal"||i==="gradient"||i==="noise"||i==="fresnel"||i==="rainbow"||i==="toon"||i==="outline"||i==="particle"||i==="transmission"||i==="matcap"||i==="displace"||i==="pattern"||i==="light"}e.is=t})(gO||(gO={}));function ele(e){return e.type!=="displace"}var yO;(e=>{function t(i){return i==="phong"||i==="toon"||i==="lambert"||i==="physical"}e.is=t})(yO||(yO={}));var oN=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],tle=["wrapping","image","video","name","minFilter","magFilter"],Ka;(e=>{function t(n,s){let{texture:o,...l}=s;if(Object.assign(n,l),o){let u=n.texture;u&&Object.assign(u,o)}}e.patch=t;function i(n,s){return n==="light"&&s?r(s):a(n)}e.defaultData=i;function r(n){let s={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(n){case"phong":return{...s,category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6};case"toon":return{...s,category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1};case"lambert":return{...s,category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0};case"physical":return{...s,category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0}}}function a(n){let s={alpha:1,mode:0,isMask:!1,visible:!0};switch(n){case"texture":return{...s,type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"video":return{...s,type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Iy.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006},crop:!1};case"color":return{...s,type:"color",color:wn.fromHex(Ds)};case"depth":return{...s,type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200};case"normal":return{...s,type:"normal",cnormal:[1,1,1]};case"gradient":return{...s,type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{...s,type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:{...wn.fromHex(6710886),a:1},colorB:{...wn.fromHex(6710886),a:1},colorC:{...wn.fromHex(16777215),a:1},colorD:{...wn.fromHex(16777215),a:1},distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1};case"fresnel":return{...s,type:"fresnel",color:Lr.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{...s,type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"toon":return{...s,type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Lr.fromHexAndA(0,0),offset:[0,0,0]};case"outline":return{...s,type:"outline",outlineColor:Lr.fromHexAndA(0,1),contourColor:Lr.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0};case"matcap":return{...s,type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0],rotation:0,minFilter:1008,magFilter:1006}};case"transmission":return{...s,type:"transmission",thickness:10,ior:1.5,roughness:1};case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return{...s,type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:{...wn.fromHex(0),a:1},colorB:{...wn.fromHex(16777215),a:1},frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6}}}})(Ka||(Ka={}));var Cn;(e=>{function t(c){return!c.layers.some(d=>d.data.type==="texture"&&d.data.projection!==0||d.data.type==="depth"&&!d.data.isWorldSpace||d.data.type==="noise"||d.data.type==="displace")}e.isMergable=t;function i(c){let d="";return c.layers.forEach(h=>{Object.entries(h.data).forEach(([p,f])=>{d+=`${p}${f}`,Array.isArray(f)?f.forEach(v=>d+=`${v}`):typeof f=="object"?Object.values(f).forEach(v=>{typeof v=="number"?d+=`${v.toFixed(4)}`:d+=`${v}`}):d+=`${f}`})}),d}e.getHash=i;function r(){return{layers:new _i}}e.defaultEmptyData=r;function a(c="layer1",d="layer2"){return s("phong",c,d)}e.defaultData=a;function n(c,d){return{...c,name:d}}e.withName=n;function s(c,d="layer1",h="layer2"){let p=new _i;return p.push({fi:0,data:Ka.defaultData("light",c),id:d}),p.push({fi:1,data:Ka.defaultData("color"),id:h}),{layers:p}}e.defaultTwoLayerData=s;function o(c){let d=Ka.defaultData("texture");c&&Object.assign(d.texture,{image:c});let h=new _i;return h.push({fi:0,data:d,id:"layer1"}),h.push({fi:1,data:{...Ka.defaultData("transmission"),alpha:1},id:"layer2"}),h.push({fi:2,data:{...Ka.defaultData("light","lambert"),alpha:0},id:"layer3"}),{layers:h}}e.defaultUIObjectMaterial=o;function l(c,d="phong",h="layer1",p="layer2"){let f=Ka.defaultData("texture");Object.assign(f.texture,{image:c});let v=new _i;return v.push({fi:0,data:f,id:h}),v.push({fi:1,data:Ka.defaultData("light",d),id:p}),{layers:v}}e.defaultTwoLayerTextureData=l;function u(c,d="phong",h="layer1",p="layer2"){let f=Ka.defaultData("video");Object.assign(f.texture,{video:c});let v=new _i;return v.push({fi:0,data:f,id:h}),v.push({fi:1,data:Ka.defaultData("light",d),id:p}),{layers:v}}e.defaultTwoLayerVideoTextureData=u})(Cn||(Cn={}));var Ly;(e=>{function t(){return{points:new _i,roundness:0,shapeHoles:[],isClosed:!1}}e.defaultData=t})(Ly||(Ly={}));var By;(e=>{function t(){return{points:new _i,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}e.defaultData=t})(By||(By={}));var lN={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},g2;(e=>{function t(i,r){let a={...i};return cN.forEach(n=>{Object.assign(a,{[n]:r[n]??i[n]})}),a}e.merge=t})(g2||(g2={}));var uN={shape:lN,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},cN=["depth","offset","angle","twist","startScale","endScale"],zy;(e=>{function t(r){return r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="UIGeometry"}e.is2DParametricMesh=t;function i(r){return r==="PolygonGeometry"||r==="PolygonGeometry"||r==="RectangleGeometry"||r==="StarGeometry"||r==="TriangleGeometry"||r==="EllipseGeometry"||r==="PathGeometry"||r==="VectorGeometry"||r==="ConeGeometry"||r==="CubeGeometry"||r==="CylinderGeometry"||r==="DodecahedronGeometry"||r==="HelixGeometry"||r==="IcosahedronGeometry"||r==="LatheGeometry"||r==="PyramidGeometry"||r==="SphereGeometry"||r==="PlaneGeometry"||r==="BackdropGeometry"||r==="TorusGeometry"||r==="TorusKnotGeometry"||r==="BooleanGeometry"||r==="TextGeometry"||r==="InputGeometry"}e.isParametricMesh=i})(zy||(zy={}));var y2;(e=>{function t(i,r){let a={...i};return Object.assign(a,r),a.type==="PathGeometry"&&"extrusion"in r&&r.extrusion&&(a.extrusion={...i.extrusion},Object.assign(a.extrusion,g2.merge(a.extrusion,r.extrusion))),a}e.merge=t})(y2||(y2={}));var Vc;(e=>{function t(i){if(i==="RectangleGeometry")return{width:320,height:320,type:i,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="UIGeometry")return{type:i,frame:"",cornerRadius:[0,0,0,0],cornerType:0,width:1,height:1};if(i==="PathGeometry")return{type:i,width:1,height:1,depth:1,path:By.defaultData(),extrusion:uN};if(i==="VectorGeometry")return{width:1,height:1,type:i,subdivisions:12,shape:Ly.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="BooleanGeometry")return{type:i,operation:2,width:0,height:0,depth:0,phongAngle:35};if(i==="TextGeometry")return{type:i,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",editable:!1,extrudeBevelSize:0,extrudeBevelSegments:1};if(i==="InputGeometry")return{...e.defaultData("TextGeometry"),type:i,editable:!0};if(i==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}e.defaultData=t})(Vc||(Vc={}));var jw=["width","height","depth"],b2;(e=>e.defaultData={enabled:!1,useBackgroundColor:!1,color:wn.white,near:.1,far:2e3})(b2||(b2={}));var Ry;(e=>{let t={opacity:1,blendFunction:13,enabled:!1};e.defaultData={enabled:!1,pixelation:{...t,blendFunction:16,granularity:15},bloom:{...t,blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3},chromaticAberration:{...t,offset:[2,2]},vignette:{...t,darkness:1,offset:0},hueSaturation:{...t,hue:3,saturation:0},brightnessContrast:{...t,brightness:.25,contrast:0},depthOfField:{...t,focusDistance:100,focalLength:20,bokehScale:5},noise:{...t,blendFunction:16}}})(Ry||(Ry={}));var w2;(e=>e.defaultData={softShadowQuality:"low"})(w2||(w2={}));var x2;(e=>e.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(x2||(x2={}));var S2;(e=>e.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(S2||(S2={}));var ep;(e=>e.defaultData={usePhysics:!1,gravity:-10})(ep||(ep={}));var C2;(e=>e.defaultData={playCamera:Cp,gameControlObject:null})(C2||(C2={}));var _2;(e=>e.defaultData={backgroundColor:Lr.fromHexAndA(Joe,1),postprocessing:Ry.defaultData,fog:b2.defaultData,globalPhysics:ep.defaultData,ambient:x2.defaultData,ao:S2.defaultData,shadow:w2.defaultData,publish:C2.defaultData})(_2||(_2={}));var M2;(e=>e.defaultData={colliderType:"box",size:[100,100,100],colliderHelperVisible:!0,forceType:"collider",forceRange:"global",forceIntensity:.5,forceDambing:.95})(M2||(M2={}));var bO;(e=>{function t(r){return r==="Component"||r==="Instance"}e.isComponentRelated=t;function i(r){return r==="Empty"||r==="Instance"}e.isEmptyOrComponent=i})(bO||(bO={}));var tp;(e=>{e.identity={...c2.identity,hiddenMatrix:Zh.identity};function t(a){return{position:a.position,rotation:a.rotation,scale:a.scale,hiddenMatrix:a.hiddenMatrix}}e.fromObject=t;function i(a,n){return{position:n?.position||a.position,rotation:n?.rotation||a.rotation,scale:n?.scale||a.scale,hiddenMatrix:n?.hiddenMatrix||a.hiddenMatrix}}e.merge=i;function r(a,n){return E6({position:Jc.isEqual(a.position,n.position)?void 0:n.position,rotation:Jc.isEqual(a.rotation,n.rotation)?void 0:n.rotation,scale:Jc.isEqual(a.scale,n.scale)?null:n.scale,hiddenMatrix:Zh.isEqual(a.hiddenMatrix,n.hiddenMatrix)?void 0:n.hiddenMatrix})}e.diff=r})(tp||(tp={}));var rn;(e=>e.defaultData={states:new _i,events:new _i,visible:!0,raycastLock:!1,physics:Jh.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"},...tp.identity,cloner:null})(rn||(rn={}));var E2;(e=>e.defaultData={type:"Empty",...rn.defaultData})(E2||(E2={}));var wO;(e=>e.defaultData={type:"ParticleCollider",...M2.defaultData,...rn.defaultData})(wO||(wO={}));var xO;(e=>e.defaultData={type:"Component",...rn.defaultData})(xO||(xO={}));var SO;(e=>e.defaultData={type:"Particle",...rn.defaultData,...Dy.defaultData})(SO||(SO={}));var Fc;(e=>e.defaultData={type:"Mesh",...rn.defaultData,...v2.defaultData})(Fc||(Fc={}));var hm;(e=>e.defaultData={...rn.defaultData,...tp.identity,position:[0,0,Qh.DefaultTargetOffset],...Qh.defaultData})(hm||(hm={}));var A2;(e=>{function t(i){return{...rn.defaultData,...p2.defaultData(i)}}e.defaultData=t,e.defaultDirectionalLightData={...e.defaultData("DirectionalLight"),position:[200,300,300],name:"Directional Light",intensity:.7}})(A2||(A2={}));var Ny;(e=>{function t(r,a,n=0){for(;n<a.length;){let s=r?r[a[n]]:void 0;if(a.length===n+1)return s;if(s)r=s.descendants,n+=1;else return}}e.resolveWithDes=t;function i(r,a,n=0){let s=t(r,a,n);if(s){let o=Object.keys(s);if(o.length===1&&o[0]==="descendants")return}return s}e.resolve=i})(Ny||(Ny={}));var Yu;(e=>{e.rootOverrideProps=["physics","events"],e.compositeNonOptionalOverrideProps=["geometry"],e.compositeEntireOverrideOverrideProps=["material"];function t(r,a){return{...rn.defaultData,...a,component:r,overrides:new Da,physics:void 0,events:void 0,type:"Instance"}}e.ofComponent=t;function i(r){let a=tp.fromObject(r.data);return t(r.id,a)}e.fromComponentData=i})(Yu||(Yu={}));var ip;(e=>{e.defaultData={type:"Page",...rn.defaultData,physics:{...Jh.defaultData,fusedBody:!1},..._2.defaultData,camera:hm.defaultData};function t(i){return i.uiScene!==void 0}e.isUIPage=t})(ip||(ip={}));var P2;(e=>(e.defaultCamera={position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:Zh.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:Jh.defaultData,states:new _i,events:new _i,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0},...Qh.defaultData},e.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},e.defaultMeshObject={name:"Rectangle",...rn.defaultData,...Fc.defaultData,geometry:Vc.defaultData("RectangleGeometry"),material:Cn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultBooleanObject={name:"Boolean",...rn.defaultData,...Fc.defaultData,geometry:Vc.defaultData("BooleanGeometry"),material:Cn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultTextObject={name:"Text",...rn.defaultData,...Fc.defaultData,geometry:Vc.defaultData("TextGeometry"),material:Cn.defaultTwoLayerData("phong","layer1","layer2")},e.defaultInputObject={name:"Input",...rn.defaultData,...Fc.defaultData,geometry:Vc.defaultData("InputGeometry"),material:Cn.defaultTwoLayerData("phong","layer1","layer2")}))(P2||(P2={}));var jc;(e=>{function t(n,s){let o={name:s};return n.type==="Mesh"?(o.geometry={},"material"in n&&(o.material={layers:new Da}),"materials"in n&&(o.materials=n.materials.map(l=>({layers:new Da})))):fd.is(n.type)&&(o.perspective={},o.orthographic={}),o}e.newEmpty=t;function i(n,s){if(s===void 0)return n;let o={...n};return"material"in o&&"material"in s&&s.material&&(o.material=dm(o.material,l=>{if(typeof l!="string")for(let[u,c]of Object.entries(s.material.layers)){let d=l.layers.data(u);d&&Ka.patch(d,c)}}).data),o.materials&&s.materials&&(o.materials=dm(o.materials,l=>{var u,c;for(let d=0;d<o.materials.length;d++){let h=s.materials[d];if(typeof h!="string")for(let[p,f]of Object.entries(h.layers)){let v=(c=(u=l[d])==null?void 0:u.layers)==null?void 0:c.data(p);v&&Ka.patch(v,f)}}}).data),o}function r(n,s){let o,l=[],u={orthographic:0,perspective:0,geometry:0};function c(d,h){for(let[p,f]of Object.entries(h.layers)){let{texture:v,...m}=f;if(v!==void 0&&Object.keys(v).length>0){let g={path:[...d,"layers",p,"texture"],props:v,type:0};l.push(g)}if(Object.keys(m).length>0){let g={path:[...d,"layers",p],props:m,type:0};l.push(g)}}}for(let[d,h]of Object.entries(s))if(d!=="name")if(d==="cloner")l.push(...d2.toOps(h,["cloner"]));else if(d==="pathSnapping")l.push({path:[d],props:{slide:h.slide,offset:h.offset},type:0});else if(d==="material")c(["material"],h);else if(d==="materials")for(let[p,f]of Object.entries(h))c(["materials",p],f);else if(u[d]===0){if(d==="geometry"&&h.extrusion!==void 0){let p={path:[d,"extrusion"],props:h.extrusion,type:0};l.push(p),h={...h},delete h.extrusion}if(Object.keys(h).length>0){let p={path:[d],props:h,type:0};l.push(p)}}else o===void 0&&(o={path:[],props:{},type:0},l.push(o)),o.props[d]=h;return l}e.toOps=r;function a(n,s){var o,l,u,c,d,h;if(s===void 0)return n;let p={...n};if(Object.assign(p,tp.merge(p,s)),Object.assign(p,{pathSnapping:Object.assign({},p.pathSnapping,{slide:((o=s.pathSnapping)==null?void 0:o.slide)??((l=p.pathSnapping)==null?void 0:l.slide)??0,offset:((u=s.pathSnapping)==null?void 0:u.offset)??((c=p.pathSnapping)==null?void 0:c.offset)??0})}),fd.is(n.type)){p.orthographic={...p.orthographic},p.perspective={...p.perspective};let f=s;((d=f.orthographic)==null?void 0:d.zoom)!==void 0&&(p.orthographic.zoom=f.orthographic.zoom),((h=f.perspective)==null?void 0:h.zoom)!==void 0&&(p.perspective.zoom=f.perspective.zoom),f.isUpVectorFlipped!==void 0&&(p.isUpVectorFlipped=f.isUpVectorFlipped),f.targetOffset!==void 0&&(p.targetOffset=f.targetOffset)}else if(n.type==="Mesh")"geometry"in s&&Object.assign(p,{geometry:y2.merge(p.geometry,s.geometry)}),(s.material||s.materials)&&(p=i(p,s)),p.cloner&&"cloner"in s&&Object.assign(p,{cloner:qu.merge(p.cloner,s.cloner)});else if(n.type==="Empty")p.cloner&&"cloner"in s&&Object.assign(p,{cloner:qu.merge(p.cloner,s.cloner)});else if(h2.is(n.type)){let f=s;f.intensity!==void 0&&(p.intensity=f.intensity),f.color!==void 0&&(typeof f.color=="string"?p.color=f.color:p.color=wn.clone(f.color))}return p}e.patch=a})(jc||(jc={}));var Vy;(e=>e.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(Vy||(Vy={}));var Xu;(e=>e.defaultData={orbitControls:Vy.defaultData,playPage:Bf,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((t,i)=>{let r=0,a=0;return i<5?a=-30:i<10&&(a=30),i===0||i===10||i===5?r=30:(i===4||i===11||i===9)&&(r=-30),[120,[r,a],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1,imageQuality:70}},stopRaycast:!0,hdTransmission:!1})(Xu||(Xu={}));var T2;(e=>e.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(T2||(T2={}));var k2;(e=>e.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(k2||(k2={}));var $c;(e=>(e.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:{...T2.defaultData},isRandomSeed:!0,seed:e.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:k2.defaultData}),e.generateSeed=()=>Math.round(Math.random()*1e5)))($c||($c={}));var pm;(e=>{function t(r){return r.find(a=>a.data.type==="Page"&&a.data.globalPhysics.usePhysics)!==void 0}e.physicsEnabled=t;function i(r,a,n){r.scene.objects.traverseFrom(a,(s,o)=>{var l;if(o.type==="Instance"){let u=(l=$y.getComponentData(r,o.component))==null?void 0:l.data;u&&n(s,o,u.events)}else n(s,o,o.events)})}e.traverseModuleInstances=i})(pm||(pm={}));var Uc;(e=>{e.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222",e.defaultLight={fi:-1,data:A2.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]};function t(a=!0,n=[]){let s=[],o=P2.defaultMeshObject;a&&(s.push({...e.defaultLight}),s.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:o,children:[]})),s.push(...n);let l=new Sn;return l.push({fi:1,id:Bf,data:{...ip.defaultData,name:"Scene 1"},children:s}),l}e.createDefaultObjectTreeWithPage=t,e.defaultData={objects:t(),publish:Xu.defaultData,styles:$c.defaultData()},e.emptyDataWithoutPage=function(){return{objects:new Sn,publish:Xu.defaultData,styles:$c.defaultData()}},e.emptyDataWithPage=function(a=!0){return{objects:t(a),publish:Xu.defaultData,styles:$c.defaultData()}},e.emptyData=function(){return{objects:new Sn,publish:{...Xu.defaultData},styles:$c.defaultData()}};function i(a){return{...e.defaultData,objects:io(a,Sn.prototype)}}e.withObjs=i;function r(a,n){return i([{id:a,data:n,children:[],fi:0}])}e.withObj=r})(Uc||(Uc={}));var zf;(e=>e.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(zf||(zf={}));var O2;(e=>(e.defaultData=t=>({url:t,name:"New Webhook",parametersSchemas:new _i}),e.defaultParameterValueByType=t=>t==="number"?0:t==="boolean"?!1:""))(O2||(O2={}));var CO;(e=>e.defaultData=(t,i="GET")=>({url:t,method:i,name:"New API",headers:new _i,queries:new _i,autoStart:!0}))(CO||(CO={}));var _n;(e=>{function t(s){return s.textValue!==void 0}e.isTextValue=t;function i(s){return typeof s=="number"}e.isNumber=i;function r(s){return typeof s=="boolean"}e.isBoolean=r;function a(s){return t(s)?"string":r(s)?"boolean":"number"}e.typeOfVariable=a;function n(s){return e.isTextValue(s)?Array.isArray(s.textValue)?s.textValue.map(o=>o.toString().padStart(s.padding??2,"0")).join(s.deliminator??":")+(s.suffix!==void 0?" "+s.suffix:""):s.textValue.toString():e.isBoolean(s)?s?"True":"False":e.isNumber(s)?parseFloat(s.toFixed(3)).toString():s.toString()}e.getDisplayedValue=n})(_n||(_n={}));var D2;(e=>e.all=["images","videos","colors","audios","particles","fonts","materials","variables"])(D2||(D2={}));var _O;(e=>e.all=[...D2.all,"components"])(_O||(_O={}));var MO;(e=>{function t(){return{images:new Ii,videos:new Ii,colors:new Ii,audios:new Ii,particles:new Ii,fonts:new Ii,materials:new Ii,components:new Ii,variables:new Ii,userAPIs:new Ii,userWebhooks:new Ii}}e.defaultData=t})(MO||(MO={}));var lu;(e=>{function t(){return{images:new Ii,videos:new Ii,colors:new Ii,audios:new Ii,particles:new Ii,fonts:new Ii,materials:new Ii,components:new Ii,variables:new Ii,userAPIs:new Ii,userWebhooks:new Ii}}e.defaultData=t})(lu||(lu={}));var Us;(e=>{function t(){let s={};return s["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},io(s,Ii.prototype)}e.defaultColors=t;function i(){return io({},Ii.prototype)}e.defaultImages=i;function r(){return{catelogs:new Ii,materials:new Ii,images:new Ii,videos:new Ii,colors:new Ii,audios:new Ii,particles:new Ii,fonts:new Ii,variables:new _i,userAPIs:new Ii,userWebhooks:new Ii,lib:lu.defaultData()}}e.emptyData=r;function a(s){switch(s){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let o=[0,0,0];return{name:"Time",value:{textValue:o,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:o,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",s)}}e.defaultVariables=a;function n(s,o){if(o.format==="HH:mm:ss"){let l=Math.floor(s/3600),u=Math.floor((s-l*3600)/60),c=Math.round(s-l*3600-u*60);return{textValue:[l,u,c]}}else if(o.format==="mm:ss"){let l=Math.floor(s/60),u=Math.round(s-l*60);return{textValue:[l,u]}}else return o.format==="number"?s=Math.round(s):s=Math.round(s*1e3)/1e3,s}e.getFormattedTimerTime=n})(Us||(Us={}));var Fy;(e=>e.list=["idle","move","jump","run"])(Fy||(Fy={}));var jy;(e=>(e.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},e.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","▲"],["rotPosY","◀"],["rotNegX","▼"],["rotNegY","▶"],["jump","Space"],["run","⇧"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:e.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new _i,move:new _i,jump:new _i,run:new _i},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Lr.fromHexAndA(3728051,1)}}))(jy||(jy={}));function EO(e){e.layers.forEach(t=>{if(t.type==="depth"&&t.colorA!==void 0){let i=t.colorA,r=t.colorB,a=[[i.r,i.g,i.b,i.a],[r.r,r.g,r.b,r.a]],n=[0,1];for(let o=2;o<10;o++)a.push(a[1]),n.push(1);let s={...hl(ga(t),"type","visible","isVector","isWorldSpace","origin","alpha","mode"),near:Math.max(0,t.near),far:Math.max(0,t.far),colors:a,steps:n,num:2,direction:[1,0,0],smooth:!1,gradientType:1};Object.assign(t,s)}else if(t.type==="depth"&&t.gradientType===1&&(t.near<0||t.far<0)){let i={...ga(t),near:Math.max(t.near,0),far:Math.max(t.far,0)};Object.assign(t,i)}})}function Fu(e,t){Object.values(e.shared.materials).forEach(i=>t(i))}function ju(e,t){e.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach((a,n)=>{a===void 0&&(r.materials[n]=Cn.defaultData(),a=r.materials[n]),typeof a!="string"&&t(a)}):"material"in r?typeof r.material!="string"&&(r.material===void 0&&(r.material=Cn.defaultData()),t(r.material)):r.type==="Mesh"&&(r.material===void 0&&(r.material=Cn.defaultData()),t(r.material)),"overrides"in r&&Object.values(r.overrides).forEach(a=>{a.material&&typeof a.material!="string"&&Object.getPrototypeOf(a.material)!==Da.prototype&&t(a.material)})})}function ile(e){Object.assign(e.scene.publish,{orbitControls:{...Vy.defaultData,...ga(e.scene.publish.orbitControls)}})}function rle(e){Object.assign(e.scene.publish.settings,{video:{...Xu.defaultData.settings.video,...ga(e.scene.publish.settings.video)}})}function ale(e){function t(i){if(i.layers){for(let r of Object.values(i.layers))if(r){for(let[a,n]of Object.entries(r))if((oN.includes(a)||typeof n=="boolean")&&delete r[a],a==="texture")for(let[s,o]of Object.entries(n))(tle.includes(s)||typeof o=="boolean")&&delete n[s]}}}e.scene.objects.traverse((i,r)=>{r.states.forEach(a=>{let n=a;n.material?t(n.material):n.materials&&n.materials.forEach(s=>{t(s)})})})}function nle(e){e.scene.publish.withBackground=!0}function sle(e){e.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function ole(e){e.scene.objects.traverse((t,i)=>{let r=i.cloner;r&&(r.radial.scale=r.radial.scale.map(a=>a+1),r.linear.scale=r.linear.scale.map(a=>a+1))})}function lle(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&(r.type==="DodecahedronGeometry"||r.type==="IcosahedronGeometry")&&(r.detail=Math.round(r.detail))})}function ule(e){e.scene.objects.traverse((t,i)=>{let r=e.scene.objects.unproxy().parent(t);if(r){let a=ga(e.scene.objects.data(r));a&&a.type==="Mesh"&&a.geometry.type==="BooleanGeometry"&&i.type==="Mesh"&&(i.visible=ga(i).booleanExclude!==!0)}})}function cle(e){e.scene.objects.traverse((t,i)=>{if(i.type==="Mesh"){let r=i;i.geometry.type==="NonParametricGeometry"?r.material!==void 0&&delete r.material:r.materials!==void 0&&delete r.materials}})}function dle(e){function t(r){Object.setPrototypeOf(r,Da.prototype),r.texture&&Object.setPrototypeOf(r.texture,Da.prototype)}function i(r){Object.setPrototypeOf(r,Da.prototype);for(let a in r)t(r[a])}e.scene.objects.traverse((r,a)=>{a.states.forEach(n=>{let s=n;if(s.material){let o=ga(s.material).layers;i(o),s.material.layers=o}if(s.materials)for(let o=0;o<s.materials.length;o++){let l=s.materials[o],u=ga(l).layers;i(u),l.layers=u}})})}function AO(e){e.layers===void 0&&Object.assign(e,Cn.defaultTwoLayerData("lambert"))}function $w(e){!e.layers||e.layers.forEach(t=>{if(t.type==="depth"&&t.colors.length===10){let i=[...t.colors];i.push(t.colors[9]);let r=[...t.steps];r.push(t.steps[9]);let a={...ga(t),colors:i,steps:r};Object.assign(t,a)}})}function hle(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&(i.geometry.type==="BooleanGeometry"||i.geometry.type==="SubdivGeometry")&&(i.geometry.phongAngle=35)})}function PO(e){e.scene.objects.traverse((t,i)=>{"materials"in i?i.materials.forEach(r=>{typeof r!="string"&&$w(r)}):"material"in i&&typeof i.material!="string"&&$w(i.material)}),Object.values(e.shared.materials).forEach(t=>$w(t))}function ple(e){e.scene.environment.ambientLight.softShadows=!1,e.scene.environment.ambientLight.softShadowQuality="low",e.scene.objects.traverse((t,i)=>{(i.type==="DirectionalLight"||i.type==="SpotLight")&&(i.shadowResolution=1024,i.shadowRadius=1,i.depth=1e5)}),e.shared.penumbraSize=new Array(5).fill(.5)}function fle(e){e.shared.audios=io({},Ii.prototype)}function mle(e){e.shared.videos=io({},Ii.prototype)}function vle(e){let t=e.shared.materials;Object.entries(t).forEach(([i,r])=>{if(!r.layers){let a={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(t,{[i]:a})}})}function gle(e){Object.entries(ga(e.shared.images)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.images[t]}),Object.entries(ga(e.shared.audios)).filter(t=>t[1].asset===!1).map(t=>t[0]).forEach(t=>{delete e.shared.audios[t]})}function yle(e){e.scene.publish.settings.web.preload=!1}function TO(e){e.layers&&e.layers.forEach(t=>{t.type==="depth"&&t.num!==void 0&&(t.colors=t.colors.slice(0,t.num),t.steps=t.steps.slice(0,t.num),delete t.num)})}function kO(e){e.layers&&e.layers.forEach(t=>{ele(t)&&t.isMask===void 0&&(t.isMask=!1),(t.type==="texture"||t.type==="video")&&t.blending===void 0&&(t.blending=0),(t.type==="noise"||t.type==="displace"&&t.displacementType==="noise")&&(t.voronoiStyle===void 0&&(t.voronoiStyle=0),t.highCut===void 0&&(t.highCut=1),t.lowCut===void 0&&(t.lowCut=0),t.smoothness===void 0&&(t.smoothness=.3),t.seed===void 0&&(t.seed=0),t.quality===void 0&&(t.quality=1))})}function ble(e){e.shared.fonts=io({},Ii.prototype)}function wle(e){return e.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function xle(e){let t=[];e.scene.objects.traverse((i,r)=>{let a=r;if(a.type==="TextFrame"){let n=Cn.defaultTwoLayerData("phong"),s=typeof a.color=="string"?e.shared.colors[a.color]:a.color;n.layers[1].data.color={r:s.r,g:s.g,b:s.b},n.layers[1].data.alpha=a.alpha;let o=wle(a.font);e.shared.fonts[o]===void 0&&(e.shared.fonts[o]={name:o});let l={name:a.name,...rn.defaultData,...Fc.defaultData,flatShading:!1,wireframe:!1,geometry:{...Vc.defaultData("TextGeometry"),width:a.width,height:a.height,font:o,depth:0,horizontalAlign:a.horizontalAlign,verticalAlign:a.verticalAlign,fontSize:a.fontSize*1.40625,lineHeight:a.lineHeight/1.40625,letterSpacing:a.letterSpacing-1,text:a.text,textTransform:a.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1},material:n,states:ga(a.states),events:ga(a.events),visible:a.visible,raycastLock:a.raycastLock,position:a.position,rotation:a.rotation,scale:a.scale,hiddenMatrix:a.hiddenMatrix},u=ga(e.scene.objects).parent(i);e.scene.objects.insertAfter(u??null,i,[{id:i+"new",data:l,children:[]}]),t.push(i)}}),t.forEach(i=>{e.scene.objects.delete(i)})}function Sle(e){let t={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};e.scene.objects.traverse((i,r)=>{r.events.forEach(a=>{if(t[Number(a.type)])if(Object.assign(a,{type:t[Number(a.type)]}),a.type==="Audio"&&"audioEvent"in a&&(Object.assign(a,{playAudio:a.audioEvent}),delete a.audioEvent),a.type==="GameControl")Object.assign(a,{gameActions:{idle:new _i,move:new _i,jump:new _i}});else{let n=new _i;Object.assign(a,{actions:n}),(a.type==="MouseDown"||a.type==="MouseUp"||a.type==="KeyDown"||a.type==="KeyUp")&&"url"in a&&n.push({fi:0,id:li.generateUUID(),data:{type:"Link",url:a.url,delay:0}}),"targets"in a&&(a.targets.forEach((s,o,l)=>{let u={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},c={easing:s.easing,duration:s.duration};s.easing===6?Object.assign(c,hl(s,"mass","stiffness","damping","velocity")):s.easing===5&&Object.assign(c,{control1:{...s.control1},control2:{...s.control2}});let d={repeat:s.repeat?-1:0,delay:s.delay,delayDirection:s.delayDirection,direction:s.cycle&&s.rewind?"pingpong-rewind":s.cycle?"pingpong":"normal"},h={state:s.state,...d,...c},p={allowSlerp:!0,type:"Transition",object:s.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new _i({fi:0,id:li.generateUUID(),data:u},{fi:1,id:li.generateUUID(),data:h})};n.push({fi:l,id:o,data:p})}),delete a.targets)}})})}function Cle(e){e.scene.objects.traverse((t,i)=>{function r(a,n){var s;let o=new _i,l=[];if(i.events.forEach((u,c,d)=>{if(u.type==="Audio"&&u.trigger===n){let h;l.push(c),u.interaction==="play"?h={...hl(u,"interaction","audio","delay","volume","loop"),triggerAfter:"after"in u?u.after:void 0,toggle:"after"in u?u.toggle:void 0,type:"Audio"}:(u.interaction==="pause"||u.interaction==="stop")&&(h={...hl(u,"interaction","delay","object","playAudio"),type:"Audio"}),h&&o.push({fi:d,id:c,data:h})}}),l.forEach(u=>i.events.delete(u)),o.length){let u=(s=i.events.find(c=>c.type===a))==null?void 0:s.data;u?"actions"in u&&u.actions.insertBefore(null,o):i.events.insertBefore(null,[{id:li.generateUUID(),data:{type:a,actions:o}}])}}r("Start","start"),r("MouseDown","mouseDown"),r("MouseUp","mouseUp"),r("KeyDown","keyDown"),r("KeyUp","keyUp")})}function OO(e){var t;let i=(t=e.layers.find(r=>r.type==="light"))==null?void 0:t.data;if(i?.category==="basic"){let r=Ka.defaultData("light","phong"),a=i;Object.assign(a,r),a.visible=!1}}function DO(e){Fu(e,OO),ju(e,OO)}function _le(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="SubdivGeometry"&&(i.geometry.scaleBaked||(i.geometry.scaleBaked=[1,1,1]))})}function Mle(e){e.scene.objects.traverse((t,i)=>{(i.type==="Empty"||i.type==="Mesh")&&i.cloner&&!i.cloner.randomnessObject&&!i.cloner.toObject&&!i.cloner.randomness&&(i.cloner={...i.cloner,toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}})})}function Ele(e){e.scene.objects.traverse((t,i)=>{i.type==="Mesh"&&i.geometry.type==="NonParametricGeometry"&&!("material"in i)&&!("materials"in i)&&(i.material=Cn.defaultTwoLayerData("phong"))})}function Ale(e){e.scene.publish.orbitControls.autoZoom===void 0&&(e.scene.publish.orbitControls.autoZoom=!1),e.scene.objects.traverse((t,i)=>{(i.type==="OrthographicCamera"||i.type==="PerspectiveCamera")&&(i.orthographic.autoZoom===void 0&&(i.orthographic.autoZoom=!1),i.orthographic.autoZoomFrustumSize===void 0&&(i.orthographic.autoZoomFrustumSize=790))})}function Ple(e){e.scene.objects.traverse((t,i)=>{i.pathSnapping===void 0&&(i.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),i.pathSnapping.offset===void 0&&(i.pathSnapping.offset=0)})}function Tle(e){e.scene.publish.mouseEventTarget===void 0&&(e.scene.publish.mouseEventTarget="canvas"),e.scene.publish.settings.web.hint===void 0&&(e.scene.publish.settings.web.hint=!1)}function kle(e){let{video:t}=e.scene.publish.settings;t.format==="gif"&&t.fps>48&&(t.fps=15)}function Ole(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.resetYPosition=Math.abs(r.resetYPosition-i.position[1]))})})}function Dle(e){let t=e.scene.environment.usePhysics;e.scene.objects.traverse((i,r)=>{t&&r.physics===null?r.collision=!1:r.collision="visibility"})}function Ile(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.navmesh=jy.defaultDataThirdPerson.navmesh)})})}function Lle(e){e.scene.styles||(e.scene.styles=$c.defaultData())}function IO(e){e.layers.forEach(t=>{t.type==="light"&&t.category!=="toon"&&t.occlusion===void 0&&(t.occlusion=!0)})}function Ble(e){e.scene.environment.ambientLight.occlusion===void 0&&(e.scene.environment.ambientLight.occlusion=!1),e.scene.environment.ambientLight.aoFullRes===void 0&&(e.scene.environment.ambientLight.aoFullRes=!1),e.scene.environment.ambientLight.radius===void 0&&(e.scene.environment.ambientLight.radius=256),e.scene.environment.ambientLight.bias===void 0&&(e.scene.environment.ambientLight.bias=.5),e.scene.environment.ambientLight.aoColor===void 0&&(e.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),ju(e,IO),Fu(e,IO)}function zle(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&Object.assign(r.gameActions,{run:new _i})})})}function Rle(e){e.scene.objects.traverse((t,i)=>{i.events.forEach(r=>{r.type==="GameControl"&&(r.keyAssignments=[...r.keyAssignments,["run","⇧"],["none","Ctrl"]])})})}function LO(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.bumpMapIntensity===void 0&&(t.bumpMapIntensity=5)})}function Nle(e,t){if(t<1&&(ju(e,EO),Fu(e,EO),e.schema=1),t<2&&(ile(e),e.schema=2),t<3&&(ale(e),e.schema=3),t<4&&(nle(e),e.schema=4),t<5&&(sle(e),e.schema=5),t<6&&(ole(e),e.schema=6),t<7&&(lle(e),e.schema=7),t<8&&(e.schema=8),t<9&&(PO(e),e.schema=9),t<10&&(hle(e),e.schema=10),t<11&&(ple(e),e.schema=11),t<12&&(PO(e),e.schema=12),t<13&&(fle(e),e.schema=13),t<14&&(vle(e),e.schema=14),t<15&&(gle(e),e.schema=15),t<16&&(yle(e),e.schema=16),t<17&&(ju(e,TO),Fu(e,TO),e.schema=17),t<18&&(ju(e,AO),Fu(e,AO),e.schema=18),t<19&&(rle(e),e.schema=19),t<20&&(ble(e),xle(e),e.schema=20),t<21&&(Sle(e),Cle(e),e.schema=21),t<22&&(DO(e),e.schema=22),t<23&&(_le(e),e.schema=23),t<24&&(Mle(e),e.schema=24),(t<25||e.shared.videos===void 0)&&(mle(e),t<25&&(e.schema=25)),t<26&&(ule(e),e.schema=26),t<27&&(cle(e),e.schema=27),t<28&&(DO(e),e.schema=28),t<29&&(dle(e),e.schema=29),t<30&&(Ele(e),e.schema=30),t<31&&(Ale(e),e.schema=31),t<33&&(Ple(e),e.schema=33),t<34&&(Tle(e),e.schema=34),t<35&&(kle(e),e.schema=35),t<36&&(Ole(e),e.schema=36),t<37&&(Dle(e),e.schema=37),t<38&&(ju(e,kO),Fu(e,kO),e.schema=38),t<39&&(Ile(e),e.schema=39),t<40&&(Lle(e),e.schema=40),t<41&&(Ble(e),e.schema=41),t<42&&(zle(e),e.schema=42),t<43&&(Rle(e),e.schema=43),t<99){ju(e,LO),Fu(e,LO),e.scene.publish.playCamera===null&&(e.scene.publish.playCamera=Cp);let i=ga(e.scene.objects),r=e.scene.objects;e.scene.publish.playPage=Bf,r.insertBefore(null,null,[{id:Bf,data:{...ip.defaultData,backgroundColor:e.scene.backgroundColor,fog:e.scene.fog,postprocessing:e.scene.postprocessing,ao:hl(e.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:e.scene.publish.playCamera,gameControlObject:e.scene.publish.gameControlObject},shadow:hl(e.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:{...ep.defaultData,...hl(e.scene.environment,"usePhysics","gravity")},camera:ga(e.scene.ownerCamera)??ip.defaultData.camera,name:"Scene"},children:[]}]);for(let s of i)s.id!==Uc.TRASH_CAN_ID&&r.move(Bf,s.fi,s.id);let a=0,n=0;e.shared.penumbraSize&&e.scene.objects.traverse((s,o)=>{o.type==="DirectionalLight"?(o.penumbraSize=e.shared.penumbraSize[Math.min(a,2)],a+=1):o.type==="SpotLight"&&(o.penumbraSize=e.shared.penumbraSize[3+Math.min(n,1)],n+=1),(o.physics===void 0||o.physics===null)&&o.type!=="Instance"&&(o.physics={},Object.assign(o.physics,Jh.defaultData)),o.physics!==void 0&&o.physics!==null&&(o.physics.enabled=o.collision??"visibility",delete o.collision)}),e.schema=99}}function BO(e){e.layers&&e.layers.forEach(t=>{t.type==="light"&&t.alphaOverride===void 0&&(t.alphaOverride=1)})}function Vle(e){e.scene.objects.traverse((t,i)=>{let r=i.geometry;r&&r.type==="PathGeometry"&&(r.extrusion.capType="flat",r.extrusion.bevel=50,r.extrusion.bevelSides=6,r.extrusion.shape.type==="Custom"&&(r.extrusion.shape.shapeQuality="low"))})}function Fle(e){var t;Array.isArray(ga(e.events))&&((t=e.events)==null||t.forEach(i=>{"disabled"in i||(i.disabled=!1),(i.type==="MouseDown"||i.type==="MouseUp"||i.type==="MousePress")&&(i.mode=i.mode||"Object")}))}var lh=180/Math.PI;function zO(e){e.rotation=e.rotation.slice(0,3).map(t=>t*lh)}function dN(e){var t,i;zO(e),e.type==="Page"&&zO(e.camera),(t=e.states)==null||t.forEach(a=>{a.rotation===void 0||a.rotation===null||(a.rotation=a.rotation.slice(0,3).map(n=>n*lh))});let r=e.geometry;r&&r.type==="SphereGeometry"&&(r.thetaLength=(r.thetaLength??180)*lh),r&&r.type==="TorusGeometry"&&(r.arc=r.arc*lh),r&&r.type==="PathGeometry"&&(r.extrusion.angle*=lh,r.extrusion.twist*=lh),e.type==="Mesh"&&e.geometry.type==="TextGeometry"&&(e.geometry.text={textValue:e.geometry.text}),Array.isArray(ga(e.events))&&((i=e.events)==null||i.forEach(a=>{(a.type==="MouseDown"||a.type==="MouseUp"||a.type==="MousePress"||a.type==="KeyDown"||a.type==="KeyUp"||a.type==="KeyPress"||a.type==="Collision"||a.type==="Trigger")&&(a.runMode=a.toggle?"Toggle":"Repeat")}))}function jle(e){e.shared.variables=io({},Ii.prototype)}function $le(e){let t=ga(e.shared.variables);e.shared.variables=io(Object.entries(t??{}).map(([i,r],a)=>({fi:a,id:i,data:r})),_i.prototype)}var Fl=115;function hN(e,t){t(e.data);for(let i of e.children)hN(i,t)}function Ule(e){let t=e.schema??104;t!==Fl&&t<105&&(hN(e.asset,dN),e.schema=105)}function Wle(e){e.shared.particles=io({},Ii.prototype),e.shared.lib&&(e.shared.lib.particles=lu.defaultData().particles)}function Hle(e){e.scene.objects.traverse((t,i)=>{i.type==="Particle"&&typeof i.renderMaterial.size=="number"&&Object.assign(i.renderMaterial,{size:[i.renderMaterial.size,i.renderMaterial.size]})})}function Gle(e){e.scene.objects.traverse((t,i)=>{i.type==="Page"&&(i.postprocessing.depthOfField.focusDistance=100,i.postprocessing.depthOfField.focalLength=20,i.postprocessing.depthOfField.bokehScale=5)})}function qle(e){e.scene.objects.traverse((t,i)=>{var r;Array.isArray(ga(i.events))!==!1&&((r=i.events)==null||r.forEach(a=>{var n,s,o,l,u,c,d,h,p,f,v;let m=a.runMode;a.type==="MouseDown"||a.type==="MouseUp"||a.type==="KeyDown"||a.type==="KeyUp"||a.type==="Collision"||a.type==="Trigger"?(n=a.actions)==null||n.forEach(g=>{g.type==="Transition"&&(g.runMode=m??"Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode=m==="Toggle"?"Toggle":"Normal")}):a.type==="MouseHover"||a.type==="MousePress"||a.type==="KeyPress"?(s=a.actions)==null||s.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")}):a.type==="GameControl"?(delete a.actions,Object.keys(a.gameActions).forEach(g=>{var y;(y=a.gameActions[g])==null||y.forEach(b=>{b.type==="Transition"&&(b.runMode="Repeat"),b.type==="Animation"&&(b.runMode="Normal")})})):a.type==="DragDrop"?(delete a.actions,(l=(o=a.dragDropActions)==null?void 0:o.drag)==null||l.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")}),(c=(u=a.dragDropActions)==null?void 0:u.drop)==null||c.forEach(g=>{(g.type==="Transition"||g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Toggle")})):a.type==="Resize"?(delete a.actions,(d=a.breakpoints)==null||d.forEach(g=>{var y;(y=g.actions)==null||y.forEach(b=>{(b.type==="Transition"||b.type==="Animation"||b.type==="SwitchCamera")&&(b.runMode="Toggle")})})):a.type==="Start"?(h=a.actions)==null||h.forEach(g=>{g.type==="Transition"&&(g.runMode="Once"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}):a.type==="VariableChange"||a.type==="Scroll"?(p=a.actions)==null||p.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}):a.type==="Conditional"&&(delete a.actions,(f=a.inActions)==null||f.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}),(v=a.outActions)==null||v.forEach(g=>{g.type==="Transition"&&(g.runMode="Repeat"),(g.type==="Animation"||g.type==="SwitchCamera")&&(g.runMode="Normal")}))}))})}function Yle(e){e.shared.userAPIs=io({},Ii.prototype),e.shared.userWebhooks=io({},Ii.prototype),e.shared.lib&&(e.shared.lib.userAPIs=lu.defaultData().userAPIs,e.shared.lib.userWebhooks=lu.defaultData().userWebhooks)}function pN(e){let t=e.schema??0;if(t!==Fl){console.warn("updating from ",t,"to ",Fl),Nle(e,t),t<100&&(e.scene.publish.joystickSizeAndXYOffset===void 0&&(e.scene.publish.joystickSizeAndXYOffset=Xu.defaultData.joystickSizeAndXYOffset),e.schema=100),t<101&&(ju(e,BO),Fu(e,BO),e.schema=101),t<102&&(Vle(e),e.schema=102),t<104&&(e.shared.catelogs=new Ii,e.shared.lib=lu.defaultData(),e.schema=104),t<105&&(jle(e),e.scene.objects.traverse((i,r)=>{dN(r)}),e.schema=105);for(let i of Object.values(e.shared.lib.components))Ule(i);t<106&&($le(e),e.schema=106),t<107&&(e.shared.lib.variables=lu.defaultData().variables,e.schema=107),t<109&&(Wle(e),e.schema=109),t<110&&(Hle(e),e.schema=110),t<111&&(e.scene.objects.traverse((i,r)=>{Fle(r)}),e.schema=111),t<112&&(Gle(e),e.schema=112),t<113&&(qle(e),e.schema=113),t<114&&(e.scene.publish.settings.web.imageQuality===void 0&&(e.scene.publish.settings.web.imageQuality=70),e.schema=114),t<115&&(Yle(e),e.schema=115)}}var $y;(e=>{e.defaultData={schema:Fl,scene:Uc.defaultData,frames:new Ii().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",zf.defaultData),shared:{...Us.emptyData(),colors:Us.defaultColors()}},e.emptyDataForImports=function(){let n=Uc.emptyDataWithPage();return{schema:Fl,scene:n,frames:new Ii().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",zf.defaultData),shared:{...Us.emptyData(),colors:Us.defaultColors(),images:Us.defaultImages()}}},e.emptyData=function(){return{schema:Fl,scene:Uc.emptyDataWithPage(),frames:new Ii().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",zf.defaultData),shared:Us.emptyData()}},e.clipboard2dData=function(){return{schema:Fl,scene:Uc.emptyData(),frames:new Ii,shared:Us.emptyData()}},e.collabHelper={...J_,updateSchema(n){return(n.schema??0)<Fl?dm(n,pN):(n.schema??0)-Fl}};function t(n){let s=e.collabHelper.updateSchema(n);return typeof s=="number"?s===0?n:null:s.data}e.updateSchemaDirectly=t;function i(n){return{...n,shared:{...n.shared,lib:lu.defaultData()}}}e.withoutLib=i;function r(n,s){let o=n.scene.objects.get(s);if(o&&o.data.type==="Component")return o;{let l=n.shared.lib.components[s];if(l)return l.asset}}e.getComponentData=r;function a(n){let s=Object.values(n.shared.userAPIs);for(let o of s){let l=o.headers;for(let u of l)if(u.data.key.toLowerCase()==="authorization"&&u.data.value!=="")return!0}return!1}e.hasSensitiveData=a})($y||($y={}));var I2;(e=>e.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(I2||(I2={}));var RO;(e=>{function t(i){return!0}e.is=t})(RO||(RO={}));var Uy;(e=>{e.defaultData={position:[0,0],scale:[1,1],rotation:0,shear:[0,0]};function t(r,a){return{position:a?.position??r.position,rotation:a?.rotation??r.rotation,scale:a?.scale??r.scale,shear:a?.shear??r.shear}}e.merge=t;function i(r,a){return E6({position:Zl.isEqual(r.position,a.position)?void 0:a.position,rotation:r.rotation===a.rotation?void 0:a.rotation,scale:Zl.isEqual(r.scale,a.scale)?void 0:a.scale,shear:r.shear&&a.shear&&Zl.isEqual(r.shear,a.shear)?void 0:a.shear})}e.diff=i})(Uy||(Uy={}));var L2;(e=>e.defaultData={horizontalConstraint:0,verticalConstraint:0})(L2||(L2={}));var NO;(e=>e.defaultData={direction:"row",wrap:"unwrap",align:"top-left",gap:10,rowGap:10,autoGap:!1,autoRowGap:!1,leftPadding:8,rightPadding:8,topPadding:8,bottomPadding:8})(NO||(NO={}));var Wy;(e=>e.defaultData={opacity:1,fill:{color:Lr.fromHexAndA(Ds,1),enabled:!0},stroke:{color:Lr.from0to1([0,0,0,1]),thickness:1,enabled:!1,mode:"inside"},layerBlur:{radius:2,enabled:!1},backgroundBlur:{radius:2,enabled:!1},dropShadow:{offset:[10,10],blurRadius:10,color:Lr.from0to1([0,0,0,1]),enabled:!1,spread:0},innerShadow:{offset:[10,10],blurRadius:10,color:Lr.from0to1([0,0,0,1]),enabled:!1,spread:0}})(Wy||(Wy={}));var Wc;(e=>{function t(s,o){return{name:o}}e.newEmpty=t;function i(s,o){if(o===void 0)return s;let l={...s},u=["width","height","cornerRadius"];for(let c of u)c in l&&c in o&&o[c]!==void 0&&Object.assign(l,{[c]:o[c]});return l}function r(s,o){if(o===void 0)return s;let l={...s};return"fill"in l&&"fill"in o&&o.fill!==void 0&&Object.assign(l,{fill:{...l.fill,...o.fill}}),"stroke"in l&&"stroke"in o&&o.stroke!==void 0&&Object.assign(l,{stroke:{...l.stroke,...o.stroke}}),"layerBlur"in l&&"layerBlur"in o&&o.layerBlur!==void 0&&Object.assign(l,{layerBlur:{...l.layerBlur,...o.layerBlur}}),"backgroundBlur"in l&&"backgroundBlur"in o&&o.backgroundBlur!==void 0&&Object.assign(l,{backgroundBlur:{...l.backgroundBlur,...o.backgroundBlur}}),"dropShadow"in l&&"dropShadow"in o&&o.dropShadow!==void 0&&Object.assign(l,{dropShadow:{...l.dropShadow,...o.dropShadow}}),"innerShadow"in l&&"innerShadow"in o&&o.innerShadow!==void 0&&Object.assign(l,{innerShadow:{...l.innerShadow,...o.innerShadow}}),l}function a(s,o){if(o===void 0)return s;let l={...s};return Object.assign(l,Uy.merge(l,o)),l=i(l,o),l=r(l,o),l}e.patch=a;function n(s,o){let l,u=[];for(let[c,d]of Object.entries(o))c!=="name"&&(l===void 0&&(l={path:[],props:{},type:0},u.push(l)),l.props[c]=d);return u}e.toOps=n})(Wc||(Wc={}));var fm;(e=>e.defaultData={...Uy.defaultData,...L2.defaultData,states:new _i,events:new _i,visible:!0,raycastLock:!1})(fm||(fm={}));var rp;(e=>e.defaultData={...fm.defaultData,...Wy.defaultData})(rp||(rp={}));var Hy;(e=>e.defaultData={cornerRadius:[0,0,0,0]})(Hy||(Hy={}));var B2;(e=>e.defaultData={...rp.defaultData,type:"ellipse2d",width:100,height:100,name:"Ellipse"})(B2||(B2={}));var mm;(e=>e.defaultData={...rp.defaultData,...Hy.defaultData,type:"rectangle2d",width:100,height:100,name:"Rectangle"})(mm||(mm={}));var z2;(e=>e.defaultData={...rp.defaultData,type:"text2d",width:100,height:100,fontSize:12,lineHeight:1.2,letterSpacing:0,text:{textValue:"Hello world"},horizontalAlign:1,verticalAlign:1,textTransform:1,font:"Roboto_regular",name:"Text"})(z2||(z2={}));var R2;(e=>e.defaultData={...rp.defaultData,type:"path2d",path:"",name:"Path"})(R2||(R2={}));var VO;(e=>{function t(i){return i.type==="ellipse2d"||i.type==="rectangle2d"||i.type==="text2d"||i.type==="vector2d"||i.type==="path2d"}e.is=t})(VO||(VO={}));var Gy;(e=>e.defaultData={...fm.defaultData,name:"Group",type:"group2d"})(Gy||(Gy={}));var N2;(e=>e.defaultData=()=>({...fm.defaultData,...Hy.defaultData,...Wy.defaultData,name:"Frame",type:"frame2d",clipped:!0,width:200,height:200,fill:{color:Lr.fromHexAndA(4737101,1),enabled:!0},stroke:{color:Lr.fromHexAndA(0,1),thickness:1,enabled:!1,mode:"inside"},backgroundBlur:{radius:2,enabled:!1},layerBlur:{radius:2,enabled:!1}}))(N2||(N2={}));var ed;(e=>{function t(s){switch(s){case"rectangle2d":return{...mm.defaultData};case"ellipse2d":return{...B2.defaultData};case"text2d":return{...z2.defaultData};case"vector2d":return{...mm.defaultData};case"path2d":return{...R2.defaultData};case"frame2d":return{...N2.defaultData()};case"group2d":return{...Gy.defaultData}}}e.defaultData=t;function i(s){return"width"in s&&"height"in s?[typeof s.width=="number"?s.width*.5:0,typeof s.height=="number"?s.height*.5:0]:[0,0]}e.getPivot=i;function r(s){return s.type==="rectangle2d"||s.type==="ellipse2d"||s.type==="text2d"||s.type==="frame2d"}e.isResizeable=r;function a(s){return s.type==="frame2d"&&s.autoLayout!==void 0}e.isAutoLayoutable=a;function n(s){return s.type==="rectangle2d"||s.type==="frame2d"}e.hasCorners=n})(ed||(ed={}));var V2;(e=>(e.defaultData={name:"UI",type:"scene2d",objects:new Sn},e.emptyData=function(){return{type:"scene2d",objects:new Sn}}))(V2||(V2={}));function Hc(e,t=!1){let i=e[0].index!==null,r=new Set(Object.keys(e[0].attributes)),a=new Set(Object.keys(e[0].morphAttributes)),n={},s={},o=e[0].morphTargetsRelative,l=new Mi,u=0;for(let c=0;c<e.length;++c){let d=e[c],h=0;if(i!==(d.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let p in d.attributes){if(!r.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+p+'" attribute exists among all geometries, or in none of them.'),null;n[p]===void 0&&(n[p]=[]),n[p].push(d.attributes[p]),h++}if(h!==r.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let p in d.morphAttributes){if(!a.has(p))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;s[p]===void 0&&(s[p]=[]),s[p].push(d.morphAttributes[p])}if(t){let p;if(i)p=d.index.count;else if(d.attributes.position!==void 0)p=d.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,p,c),u+=p}}if(i){let c=0,d=[];for(let h=0;h<e.length;++h){let p=e[h].index;for(let f=0;f<p.count;++f)d.push(p.getX(f)+c);c+=e[h].attributes.position.count}l.setIndex(d)}for(let c in n){let d=FO(n[c]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,d)}for(let c in s){let d=s[c][0].length;if(d===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let h=0;h<d;++h){let p=[];for(let v=0;v<s[c].length;++v)p.push(s[c][v][h]);let f=FO(p);if(!f)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(f)}}return l}function FO(e){let t,i,r,a=0;for(let o=0;o<e.length;++o){let l=e[o];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(t===void 0&&(t=l.array.constructor),t!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(i===void 0&&(i=l.itemSize),i!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(r===void 0&&(r=l.normalized),r!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;a+=l.array.length}let n=new t(a),s=0;for(let o=0;o<e.length;++o)n.set(e[o].array,s),s+=e[o].array.length;return new ji(n,i,r)}var Xle=Math.pow(2,-24),Fv=class{constructor(){}};function rl(e,t,i){return i.min.x=t[e],i.min.y=t[e+1],i.min.z=t[e+2],i.max.x=t[e+3],i.max.y=t[e+4],i.max.z=t[e+5],i}function jO(e){let t=-1,i=-1/0;for(let r=0;r<3;r++){let a=e[r+3]-e[r];a>i&&(i=a,t=r)}return t}function $O(e,t){t.set(e)}function UO(e,t,i){let r,a;for(let n=0;n<3;n++){let s=n+3;r=e[n],a=t[n],i[n]=r<a?r:a,r=e[s],a=t[s],i[s]=r>a?r:a}}function jv(e,t,i){for(let r=0;r<3;r++){let a=t[e+2*r],n=t[e+2*r+1],s=a-n,o=a+n;s<i[r]&&(i[r]=s),o>i[r+3]&&(i[r+3]=o)}}function Hp(e){let t=e[3]-e[0],i=e[4]-e[1],r=e[5]-e[2];return 2*(t*i+i*r+r*t)}function Kle(e,t){if(!e.index){let i=e.attributes.position.count,r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,a;i>65535?a=new Uint32Array(new r(4*i)):a=new Uint16Array(new r(2*i)),e.setIndex(new ji(a,1));for(let n=0;n<i;n++)a[n]=n}}function Zle(e){if(!e.groups||!e.groups.length)return[{offset:0,count:e.index.count/3}];let t=[],i=new Set;for(let a of e.groups)i.add(a.start),i.add(a.start+a.count);let r=Array.from(i.values()).sort((a,n)=>a-n);for(let a=0;a<r.length-1;a++){let n=r[a],s=r[a+1];t.push({offset:n/3,count:(s-n)/3})}return t}function Uw(e,t,i,r,a=null){let n=1/0,s=1/0,o=1/0,l=-1/0,u=-1/0,c=-1/0,d=1/0,h=1/0,p=1/0,f=-1/0,v=-1/0,m=-1/0,g=a!==null;for(let y=t*6,b=(t+i)*6;y<b;y+=6){let x=e[y+0],S=e[y+1],w=x-S,E=x+S;w<n&&(n=w),E>l&&(l=E),g&&x<d&&(d=x),g&&x>f&&(f=x);let M=e[y+2],P=e[y+3],A=M-P,k=M+P;A<s&&(s=A),k>u&&(u=k),g&&M<h&&(h=M),g&&M>v&&(v=M);let I=e[y+4],O=e[y+5],D=I-O,F=I+O;D<o&&(o=D),F>c&&(c=F),g&&I<p&&(p=I),g&&I>m&&(m=I)}r[0]=n,r[1]=s,r[2]=o,r[3]=l,r[4]=u,r[5]=c,g&&(a[0]=d,a[1]=h,a[2]=p,a[3]=f,a[4]=v,a[5]=m)}function Qle(e,t,i,r){let a=1/0,n=1/0,s=1/0,o=-1/0,l=-1/0,u=-1/0;for(let c=t*6,d=(t+i)*6;c<d;c+=6){let h=e[c+0];h<a&&(a=h),h>o&&(o=h);let p=e[c+2];p<n&&(n=p),p>l&&(l=p);let f=e[c+4];f<s&&(s=f),f>u&&(u=f)}r[0]=a,r[1]=n,r[2]=s,r[3]=o,r[4]=l,r[5]=u}function Jle(e,t,i,r,a){let n=i,s=i+r-1,o=a.pos,l=a.axis*2;for(;;){for(;n<=s&&t[n*6+l]<o;)n++;for(;n<=s&&t[s*6+l]>=o;)s--;if(n<s){for(let u=0;u<3;u++){let c=e[n*3+u];e[n*3+u]=e[s*3+u],e[s*3+u]=c;let d=t[n*6+u*2+0];t[n*6+u*2+0]=t[s*6+u*2+0],t[s*6+u*2+0]=d;let h=t[n*6+u*2+1];t[n*6+u*2+1]=t[s*6+u*2+1],t[s*6+u*2+1]=h}n++,s--}else return n}}var Bl=32,eue=(e,t)=>e.candidate-t.candidate,Mu=new Array(Bl).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),$v=new Float32Array(6);function tue(e,t,i,r,a,n){let s=-1,o=0;if(n===0)s=jO(t),s!==-1&&(o=(t[s]+t[s+3])/2);else if(n===1)s=jO(e),s!==-1&&(o=iue(i,r,a,s));else if(n===2){let l=Hp(e),u=1.25*a,c=r*6,d=(r+a)*6;for(let h=0;h<3;h++){let p=t[h],f=(t[h+3]-p)/Bl;if(a<Bl/4){let v=[...Mu];v.length=a;let m=0;for(let y=c;y<d;y+=6,m++){let b=v[m];b.candidate=i[y+2*h],b.count=0;let{bounds:x,leftCacheBounds:S,rightCacheBounds:w}=b;for(let E=0;E<3;E++)w[E]=1/0,w[E+3]=-1/0,S[E]=1/0,S[E+3]=-1/0,x[E]=1/0,x[E+3]=-1/0;jv(y,i,x)}v.sort(eue);let g=a;for(let y=0;y<g;y++){let b=v[y];for(;y+1<g&&v[y+1].candidate===b.candidate;)v.splice(y+1,1),g--}for(let y=c;y<d;y+=6){let b=i[y+2*h];for(let x=0;x<g;x++){let S=v[x];b>=S.candidate?jv(y,i,S.rightCacheBounds):(jv(y,i,S.leftCacheBounds),S.count++)}}for(let y=0;y<g;y++){let b=v[y],x=b.count,S=a-b.count,w=b.leftCacheBounds,E=b.rightCacheBounds,M=0;x!==0&&(M=Hp(w)/l);let P=0;S!==0&&(P=Hp(E)/l);let A=1+1.25*(M*x+P*S);A<u&&(s=h,u=A,o=b.candidate)}}else{for(let g=0;g<Bl;g++){let y=Mu[g];y.count=0,y.candidate=p+f+g*f;let b=y.bounds;for(let x=0;x<3;x++)b[x]=1/0,b[x+3]=-1/0}for(let g=c;g<d;g+=6){let y=~~((i[g+2*h]-p)/f);y>=Bl&&(y=Bl-1);let b=Mu[y];b.count++,jv(g,i,b.bounds)}let v=Mu[Bl-1];$O(v.bounds,v.rightCacheBounds);for(let g=Bl-2;g>=0;g--){let y=Mu[g],b=Mu[g+1];UO(y.bounds,b.rightCacheBounds,y.rightCacheBounds)}let m=0;for(let g=0;g<Bl-1;g++){let y=Mu[g],b=y.count,x=y.bounds,S=Mu[g+1].rightCacheBounds;b!==0&&(m===0?$O(x,$v):UO(x,$v,$v)),m+=b;let w=0,E=0;m!==0&&(w=Hp($v)/l);let M=a-m;M!==0&&(E=Hp(S)/l);let P=1+1.25*(w*m+E*M);P<u&&(s=h,u=P,o=y.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${n} used.`);return{axis:s,pos:o}}function iue(e,t,i,r){let a=0;for(let n=t,s=t+i;n<s;n++)a+=e[n*6+r*2];return a/i}function rue(e,t){let i=e.attributes.position,r=e.index.array,a=r.length/3,n=new Float32Array(a*6),s=i.normalized,o=i.array,l=i.offset||0,u=3;i.isInterleavedBufferAttribute&&(u=i.data.stride);let c=["getX","getY","getZ"];for(let d=0;d<a;d++){let h=d*3,p=d*6,f,v,m;s?(f=r[h+0],v=r[h+1],m=r[h+2]):(f=r[h+0]*u+l,v=r[h+1]*u+l,m=r[h+2]*u+l);for(let g=0;g<3;g++){let y,b,x;s?(y=i[c[g]](f),b=i[c[g]](v),x=i[c[g]](m)):(y=o[f+g],b=o[v+g],x=o[m+g]);let S=y;b<S&&(S=b),x<S&&(S=x);let w=y;b>w&&(w=b),x>w&&(w=x);let E=(w-S)/2,M=g*2;n[p+M+0]=S+E,n[p+M+1]=E+(Math.abs(S)+E)*Xle,S<t[g]&&(t[g]=S),w>t[g+3]&&(t[g+3]=w)}}return n}function aue(e,t){function i(g){h&&h(g/p)}function r(g,y,b,x=null,S=0){if(!f&&S>=l&&(f=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(e))),b<=c||S>=l)return i(y+b),g.offset=y,g.count=b,g;let w=tue(g.boundingData,x,s,y,b,d);if(w.axis===-1)return i(y+b),g.offset=y,g.count=b,g;let E=Jle(o,s,y,b,w);if(E===y||E===y+b)i(y+b),g.offset=y,g.count=b;else{g.splitAxis=w.axis;let M=new Fv,P=y,A=E-y;g.left=M,M.boundingData=new Float32Array(6),Uw(s,P,A,M.boundingData,n),r(M,P,A,n,S+1);let k=new Fv,I=E,O=b-A;g.right=k,k.boundingData=new Float32Array(6),Uw(s,I,O,k.boundingData,n),r(k,I,O,n,S+1)}return g}Kle(e,t);let a=new Float32Array(6),n=new Float32Array(6),s=rue(e,a),o=e.index.array,l=t.maxDepth,u=t.verbose,c=t.maxLeafTris,d=t.strategy,h=t.onProgress,p=e.index.count/3,f=!1,v=[],m=Zle(e);if(m.length===1){let g=m[0],y=new Fv;y.boundingData=a,Qle(s,g.offset,g.count,n),r(y,g.offset,g.count,n),v.push(y)}else for(let g of m){let y=new Fv;y.boundingData=new Float32Array(6),Uw(s,g.offset,g.count,y.boundingData,n),r(y,g.offset,g.count,n),v.push(y)}return v}function nue(e,t){let i=aue(e,t),r,a,n,s=[],o=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<i.length;c++){let d=i[c],h=l(d),p=new o(32*h);r=new Float32Array(p),a=new Uint32Array(p),n=new Uint16Array(p),u(0,d),s.push(p)}return s;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function u(c,d){let h=c/4,p=c/2,f=!!d.count,v=d.boundingData;for(let m=0;m<6;m++)r[h+m]=v[m];if(f){let m=d.offset,g=d.count;return a[h+6]=m,n[p+14]=g,n[p+15]=65535,c+32}else{let m=d.left,g=d.right,y=d.splitAxis,b;if(b=u(c+32,m),b/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return a[h+6]=b/4,b=u(b,g),a[h+7]=y,b}}}var uu=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let i=1/0,r=-1/0;for(let a=0,n=e.length;a<n;a++){let s=e[a][t];i=s<i?s:i,r=s>r?s:r}this.min=i,this.max=r}setFromPoints(e,t){let i=1/0,r=-1/0;for(let a=0,n=t.length;a<n;a++){let s=t[a],o=e.dot(s);i=o<i?o:i,r=o>r?o:r}this.min=i,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}};uu.prototype.setFromBox=function(){let e=new V;return function(t,i){let r=i.min,a=i.max,n=1/0,s=-1/0;for(let o=0;o<=1;o++)for(let l=0;l<=1;l++)for(let u=0;u<=1;u++){e.x=r.x*o+a.x*(1-o),e.y=r.y*l+a.y*(1-l),e.z=r.z*u+a.z*(1-u);let c=t.dot(e);n=Math.min(c,n),s=Math.max(c,s)}this.min=n,this.max=s}}();var sue=function(){let e=new V,t=new V,i=new V;return function(r,a,n){let s=r.start,o=e,l=a.start,u=t;i.subVectors(s,l),e.subVectors(r.end,r.start),t.subVectors(a.end,a.start);let c=i.dot(u),d=u.dot(o),h=u.dot(u),p=i.dot(o),f=o.dot(o)*h-d*d,v,m;f!==0?v=(c*d-p*h)/f:v=0,m=(c+v*d)/h,n.x=v,n.y=m}}(),hA=function(){let e=new Ce,t=new V,i=new V;return function(r,a,n,s){sue(r,a,e);let o=e.x,l=e.y;if(o>=0&&o<=1&&l>=0&&l<=1){r.at(o,n),a.at(l,s);return}else if(o>=0&&o<=1){l<0?a.at(0,s):a.at(1,s),r.closestPointToPoint(s,!0,n);return}else if(l>=0&&l<=1){o<0?r.at(0,n):r.at(1,n),a.closestPointToPoint(n,!0,s);return}else{let u;o<0?u=r.start:u=r.end;let c;l<0?c=a.start:c=a.end;let d=t,h=i;if(r.closestPointToPoint(c,!0,t),a.closestPointToPoint(u,!0,i),d.distanceToSquared(c)<=h.distanceToSquared(u)){n.copy(d),s.copy(c);return}else{n.copy(u),s.copy(h);return}}}}(),oue=function(){let e=new V,t=new V,i=new hs,r=new Qs;return function(a,n){let{radius:s,center:o}=a,{a:l,b:u,c}=n;if(r.start=l,r.end=u,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s||(r.start=l,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s)||(r.start=u,r.end=c,r.closestPointToPoint(o,!0,e).distanceTo(o)<=s))return!0;let d=n.getPlane(i);if(Math.abs(d.distanceToPoint(o))<=s){let h=d.projectPoint(o,t);if(n.containsPoint(h))return!0}return!1}}(),lue=1e-15;function Wd(e){return Math.abs(e)<lue}var cu=class extends xn{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new V),this.satBounds=new Array(4).fill().map(()=>new uu),this.points=[this.a,this.b,this.c],this.sphere=new ws,this.plane=new hs,this.needsUpdate=!0}intersectsSphere(e){return oue(e,this)}update(){let e=this.a,t=this.b,i=this.c,r=this.points,a=this.satAxes,n=this.satBounds,s=a[0],o=n[0];this.getNormal(s),o.setFromPoints(s,r);let l=a[1],u=n[1];l.subVectors(e,t),u.setFromPoints(l,r);let c=a[2],d=n[2];c.subVectors(t,i),d.setFromPoints(c,r);let h=a[3],p=n[3];h.subVectors(i,e),p.setFromPoints(h,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(s,e),this.needsUpdate=!1}};cu.prototype.closestPointToSegment=function(){let e=new V,t=new V,i=new Qs;return function(r,a=null,n=null){let{start:s,end:o}=r,l=this.points,u,c=1/0;for(let d=0;d<3;d++){let h=(d+1)%3;i.start.copy(l[d]),i.end.copy(l[h]),hA(i,r,e,t),u=e.distanceToSquared(t),u<c&&(c=u,a&&a.copy(e),n&&n.copy(t))}return this.closestPointToPoint(s,e),u=s.distanceToSquared(e),u<c&&(c=u,a&&a.copy(e),n&&n.copy(s)),this.closestPointToPoint(o,e),u=o.distanceToSquared(e),u<c&&(c=u,a&&a.copy(e),n&&n.copy(o)),Math.sqrt(c)}}();cu.prototype.intersectsTriangle=function(){let e=new cu,t=new Array(3),i=new Array(3),r=new uu,a=new uu,n=new V,s=new V,o=new V,l=new V,u=new Qs,c=new Qs,d=new Qs;return function(h,p=null,f=!1){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(e.copy(h),e.update(),h=e);let v=this.plane,m=h.plane;if(Math.abs(v.normal.dot(m.normal))>1-1e-10){let g=this.satBounds,y=this.satAxes;i[0]=h.a,i[1]=h.b,i[2]=h.c;for(let S=0;S<4;S++){let w=g[S],E=y[S];if(r.setFromPoints(E,i),w.isSeparated(r))return!1}let b=h.satBounds,x=h.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let S=0;S<4;S++){let w=b[S],E=x[S];if(r.setFromPoints(E,t),w.isSeparated(r))return!1}for(let S=0;S<4;S++){let w=y[S];for(let E=0;E<4;E++){let M=x[E];if(n.crossVectors(w,M),r.setFromPoints(n,t),a.setFromPoints(n,i),r.isSeparated(a))return!1}}return p&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{let g=this.points,y=!1,b=0;for(let O=0;O<3;O++){let D=g[O],F=g[(O+1)%3];u.start.copy(D),u.end.copy(F),u.delta(s);let U=y?c.start:c.end,z=Wd(m.distanceToPoint(D));if(Wd(m.normal.dot(s))&&z){c.copy(u),b=2;break}if((m.intersectLine(u,U)||z)&&!Wd(U.distanceTo(F))){if(b++,y)break;y=!0}}if(b===1&&h.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(b!==2)return!1;let x=h.points,S=!1,w=0;for(let O=0;O<3;O++){let D=x[O],F=x[(O+1)%3];u.start.copy(D),u.end.copy(F),u.delta(o);let U=S?d.start:d.end,z=Wd(v.distanceToPoint(D));if(Wd(v.normal.dot(o))&&z){d.copy(u),w=2;break}if((v.intersectLine(u,U)||z)&&!Wd(U.distanceTo(F))){if(w++,S)break;S=!0}}if(w===1&&this.containsPoint(d.end))return p&&(p.start.copy(d.end),p.end.copy(d.end)),!0;if(w!==2)return!1;if(c.delta(s),d.delta(o),s.dot(o)<0){let O=d.start;d.start=d.end,d.end=O}let E=c.start.dot(s),M=c.end.dot(s),P=d.start.dot(s),A=d.end.dot(s),k=M<P,I=E<A;return E!==A&&P!==M&&k===I?!1:(p&&(l.subVectors(c.start,d.start),l.dot(s)>0?p.start.copy(c.start):p.start.copy(d.start),l.subVectors(c.end,d.end),l.dot(s)<0?p.end.copy(c.end):p.end.copy(d.end)),!0)}}}();cu.prototype.distanceToPoint=function(){let e=new V;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();cu.prototype.distanceToTriangle=function(){let e=new V,t=new V,i=["a","b","c"],r=new Qs,a=new Qs;return function(n,s=null,o=null){let l=s||o?r:null;if(this.intersectsTriangle(n,l))return(s||o)&&(s&&l.getCenter(s),o&&l.getCenter(o)),0;let u=1/0;for(let c=0;c<3;c++){let d,h=i[c],p=n[h];this.closestPointToPoint(p,e),d=p.distanceToSquared(e),d<u&&(u=d,s&&s.copy(e),o&&o.copy(p));let f=this[h];n.closestPointToPoint(f,e),d=f.distanceToSquared(e),d<u&&(u=d,s&&s.copy(f),o&&o.copy(e))}for(let c=0;c<3;c++){let d=i[c],h=i[(c+1)%3];r.set(this[d],this[h]);for(let p=0;p<3;p++){let f=i[p],v=i[(p+1)%3];a.set(n[f],n[v]),hA(r,a,e,t);let m=e.distanceToSquared(t);m<u&&(u=m,s&&s.copy(e),o&&o.copy(t))}}return Math.sqrt(u)}}();var gl=class{constructor(e,t,i){this.isOrientedBox=!0,this.min=new V,this.max=new V,this.matrix=new zt,this.invMatrix=new zt,this.points=new Array(8).fill().map(()=>new V),this.satAxes=new Array(3).fill().map(()=>new V),this.satBounds=new Array(3).fill().map(()=>new uu),this.alignedSatBounds=new Array(3).fill().map(()=>new uu),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),i&&this.matrix.copy(i)}set(e,t,i){this.min.copy(e),this.max.copy(t),this.matrix.copy(i),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}};gl.prototype.update=function(){return function(){let e=this.matrix,t=this.min,i=this.max,r=this.points;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){let d=1*l|2*u|4*c,h=r[d];h.x=l?i.x:t.x,h.y=u?i.y:t.y,h.z=c?i.z:t.z,h.applyMatrix4(e)}let a=this.satBounds,n=this.satAxes,s=r[0];for(let l=0;l<3;l++){let u=n[l],c=a[l],d=1<<l,h=r[d];u.subVectors(s,h),c.setFromPoints(u,r)}let o=this.alignedSatBounds;o[0].setFromPointsField(r,"x"),o[1].setFromPointsField(r,"y"),o[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();gl.prototype.intersectsBox=function(){let e=new uu;return function(t){this.needsUpdate&&this.update();let i=t.min,r=t.max,a=this.satBounds,n=this.satAxes,s=this.alignedSatBounds;if(e.min=i.x,e.max=r.x,s[0].isSeparated(e)||(e.min=i.y,e.max=r.y,s[1].isSeparated(e))||(e.min=i.z,e.max=r.z,s[2].isSeparated(e)))return!1;for(let o=0;o<3;o++){let l=n[o],u=a[o];if(e.setFromBox(l,t),u.isSeparated(e))return!1}return!0}}();gl.prototype.intersectsTriangle=function(){let e=new cu,t=new Array(3),i=new uu,r=new uu,a=new V;return function(n){this.needsUpdate&&this.update(),n.isExtendedTriangle?n.needsUpdate&&n.update():(e.copy(n),e.update(),n=e);let s=this.satBounds,o=this.satAxes;t[0]=n.a,t[1]=n.b,t[2]=n.c;for(let d=0;d<3;d++){let h=s[d],p=o[d];if(i.setFromPoints(p,t),h.isSeparated(i))return!1}let l=n.satBounds,u=n.satAxes,c=this.points;for(let d=0;d<3;d++){let h=l[d],p=u[d];if(i.setFromPoints(p,c),h.isSeparated(i))return!1}for(let d=0;d<3;d++){let h=o[d];for(let p=0;p<4;p++){let f=u[p];if(a.crossVectors(h,f),i.setFromPoints(a,t),r.setFromPoints(a,c),i.isSeparated(r))return!1}}return!0}}();gl.prototype.closestPointToPoint=function(){return function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t}}();gl.prototype.distanceToPoint=function(){let e=new V;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}();gl.prototype.distanceToBox=function(){let e=["x","y","z"],t=new Array(12).fill().map(()=>new Qs),i=new Array(12).fill().map(()=>new Qs),r=new V,a=new V;return function(n,s=0,o=null,l=null){if(this.needsUpdate&&this.update(),this.intersectsBox(n))return(o||l)&&(n.getCenter(a),this.closestPointToPoint(a,r),n.closestPointToPoint(r,a),o&&o.copy(r),l&&l.copy(a)),0;let u=s*s,c=n.min,d=n.max,h=this.points,p=1/0;for(let v=0;v<8;v++){let m=h[v];a.copy(m).clamp(c,d);let g=m.distanceToSquared(a);if(g<p&&(p=g,o&&o.copy(m),l&&l.copy(a),g<u))return Math.sqrt(g)}let f=0;for(let v=0;v<3;v++)for(let m=0;m<=1;m++)for(let g=0;g<=1;g++){let y=(v+1)%3,b=(v+2)%3,x=m<<y|g<<b,S=1<<v|m<<y|g<<b,w=h[x],E=h[S];t[f].set(w,E);let M=e[v],P=e[y],A=e[b],k=i[f],I=k.start,O=k.end;I[M]=c[M],I[P]=m?c[P]:d[P],I[A]=g?c[A]:d[P],O[M]=d[M],O[P]=m?c[P]:d[P],O[A]=g?c[A]:d[P],f++}for(let v=0;v<=1;v++)for(let m=0;m<=1;m++)for(let g=0;g<=1;g++){a.x=v?d.x:c.x,a.y=m?d.y:c.y,a.z=g?d.z:c.z,this.closestPointToPoint(a,r);let y=a.distanceToSquared(r);if(y<p&&(p=y,o&&o.copy(r),l&&l.copy(a),y<u))return Math.sqrt(y)}for(let v=0;v<12;v++){let m=t[v];for(let g=0;g<12;g++){let y=i[g];hA(m,y,r,a);let b=r.distanceToSquared(a);if(b<p&&(p=b,o&&o.copy(r),l&&l.copy(a),b<u))return Math.sqrt(b)}}return Math.sqrt(p)}}();var Hd=new V,Gd=new V,qd=new V,Uv=new Ce,Wv=new Ce,Hv=new Ce,WO=new V,HO=new V,GO=new V,Gv=new V;function uue(e,t,i,r,a,n){let s;return n===tn?s=e.intersectTriangle(r,i,t,!0,a):s=e.intersectTriangle(t,i,r,n!==Rn,a),s===null?null:{distance:e.origin.distanceTo(a),point:a.clone()}}function cue(e,t,i,r,a,n,s,o,l){Hd.fromBufferAttribute(t,n),Gd.fromBufferAttribute(t,s),qd.fromBufferAttribute(t,o);let u=uue(e,Hd,Gd,qd,Gv,l);if(u){r&&(Uv.fromBufferAttribute(r,n),Wv.fromBufferAttribute(r,s),Hv.fromBufferAttribute(r,o),u.uv=xn.getInterpolation(Gv,Hd,Gd,qd,Uv,Wv,Hv,new Ce)),a&&(Uv.fromBufferAttribute(a,n),Wv.fromBufferAttribute(a,s),Hv.fromBufferAttribute(a,o),u.uv1=xn.getInterpolation(Gv,Hd,Gd,qd,Uv,Wv,Hv,new Ce)),i&&(WO.fromBufferAttribute(i,n),HO.fromBufferAttribute(i,s),GO.fromBufferAttribute(i,o),u.normal=xn.getInterpolation(Gv,Hd,Gd,qd,WO,HO,GO,new V),u.normal.dot(e.direction)>0&&u.normal.multiplyScalar(-1));let c={a:n,b:s,c:o,normal:new V,materialIndex:0};xn.getNormal(Hd,Gd,qd,c.normal),u.face=c,u.faceIndex=n}return u}function fN(e,t,i,r,a){let n=r*3,s=e.index.getX(n),o=e.index.getX(n+1),l=e.index.getX(n+2),{position:u,normal:c,uv:d,uv1:h}=e.attributes,p=cue(i,u,c,d,h,s,o,l,t);return p?(p.faceIndex=r,a&&a.push(p),p):null}function due(e,t,i,r,a,n){for(let s=r,o=r+a;s<o;s++)fN(e,t,i,s,n)}function hue(e,t,i,r,a){let n=1/0,s=null;for(let o=r,l=r+a;o<l;o++){let u=fN(e,t,i,o);u&&u.distance<n&&(s=u,n=u.distance)}return s}function Jo(e,t,i,r){let a=e.a,n=e.b,s=e.c,o=t,l=t+1,u=t+2;i&&(o=i.getX(t),l=i.getX(t+1),u=i.getX(t+2)),a.x=r.getX(o),a.y=r.getY(o),a.z=r.getZ(o),n.x=r.getX(l),n.y=r.getY(l),n.z=r.getZ(l),s.x=r.getX(u),s.y=r.getY(u),s.z=r.getZ(u)}function qO(e,t,i,r,a,n,s){let o=i.index,l=i.attributes.position;for(let u=e,c=t+e;u<c;u++)if(Jo(s,u*3,o,l),s.needsUpdate=!0,r(s,u,a,n))return!0;return!1}var mN=class{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){let e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}};function $u(e,t){return t[e+15]===65535}function Th(e,t){return t[e+6]}function vm(e,t){return t[e+14]}function gm(e){return e+8}function ym(e,t){return t[e+6]}function pue(e,t){return t[e+7]}var bh=new ba,qy=new V,fue=["x","y","z"];function F2(e,t,i,r,a){let n=e*2,s=_p,o=rc,l=ac;if($u(n,o)){let u=Th(e,l),c=vm(n,o);due(t,i,r,u,c,a)}else{let u=gm(e);Yy(u,s,r,qy)&&F2(u,t,i,r,a);let c=ym(e,l);Yy(c,s,r,qy)&&F2(c,t,i,r,a)}}function j2(e,t,i,r){let a=e*2,n=_p,s=rc,o=ac;if($u(a,s)){let l=Th(e,o),u=vm(a,s);return hue(t,i,r,l,u)}else{let l=pue(e,o),u=fue[l],c=r.direction[u]>=0,d,h;c?(d=gm(e),h=ym(e,o)):(d=ym(e,o),h=gm(e));let p=Yy(d,n,r,qy)?j2(d,t,i,r):null;if(p){let v=p.point[u];if(c?v<=n[h+l]:v>=n[h+l+3])return p}let f=Yy(h,n,r,qy)?j2(h,t,i,r):null;return p&&f?p.distance<=f.distance?p:f:p||f||null}}var mue=function(){let e,t,i=[],r=new mN(()=>new ba);return function(...n){e=r.getPrimitive(),t=r.getPrimitive(),i.push(e,t);let s=a(...n);r.releasePrimitive(e),r.releasePrimitive(t),i.pop(),i.pop();let o=i.length;return o>0&&(t=i[o-1],e=i[o-2]),s};function a(n,s,o,l,u=null,c=0,d=0){function h(y){let b=y*2,x=rc,S=ac;for(;!$u(b,x);)y=gm(y),b=y*2;return Th(y,S)}function p(y){let b=y*2,x=rc,S=ac;for(;!$u(b,x);)y=ym(y,S),b=y*2;return Th(y,S)+vm(b,x)}let f=n*2,v=_p,m=rc,g=ac;if($u(f,m)){let y=Th(n,g),b=vm(f,m);return rl(n,v,e),l(y,b,!1,d,c+n,e)}else{let y=gm(n),b=ym(n,g),x=y,S=b,w,E,M,P;if(u&&(M=e,P=t,rl(x,v,M),rl(S,v,P),w=u(M),E=u(P),E<w)){x=b,S=y;let U=w;w=E,E=U,M=P}M||(M=e,rl(x,v,M));let A=$u(x*2,m),k=o(M,A,w,d+1,c+x),I;if(k===2){let U=h(x),z=p(x)-U;I=l(U,z,!0,d+1,c+x,M)}else I=k&&a(x,s,o,l,u,c,d+1);if(I)return!0;P=t,rl(S,v,P);let O=$u(S*2,m),D=o(P,O,E,d+1,c+S),F;if(D===2){let U=h(S),z=p(S)-U;F=l(U,z,!0,d+1,c+S,P)}else F=D&&a(S,s,o,l,u,c,d+1);return!!F}}}(),vue=function(){let e=new cu,t=new cu,i=new zt,r=new gl,a=new gl;return function n(s,o,l,u,c=null){let d=s*2,h=_p,p=rc,f=ac;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,u),c=r),$u(d,p)){let v=o,m=v.index,g=v.attributes.position,y=l.index,b=l.attributes.position,x=Th(s,f),S=vm(d,p);if(i.copy(u).invert(),l.boundsTree)return rl(s,h,a),a.matrix.copy(i),a.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:w=>a.intersectsBox(w),intersectsTriangle:w=>{w.a.applyMatrix4(u),w.b.applyMatrix4(u),w.c.applyMatrix4(u),w.needsUpdate=!0;for(let E=x*3,M=(S+x)*3;E<M;E+=3)if(Jo(t,E,m,g),t.needsUpdate=!0,w.intersectsTriangle(t))return!0;return!1}});for(let w=x*3,E=S+x*3;w<E;w+=3){Jo(e,w,m,g),e.a.applyMatrix4(i),e.b.applyMatrix4(i),e.c.applyMatrix4(i),e.needsUpdate=!0;for(let M=0,P=y.count;M<P;M+=3)if(Jo(t,M,y,b),t.needsUpdate=!0,e.intersectsTriangle(t))return!0}}else{let v=s+8,m=f[s+6];return rl(v,h,bh),!!(c.intersectsBox(bh)&&n(v,o,l,u,c)||(rl(m,h,bh),c.intersectsBox(bh)&&n(m,o,l,u,c)))}}}();function Yy(e,t,i,r){return rl(e,t,bh),i.intersectBox(bh,r)}var $2=[],qg,_p,rc,ac;function yf(e){qg&&$2.push(qg),qg=e,_p=new Float32Array(e),rc=new Uint16Array(e),ac=new Uint32Array(e)}function qv(){qg=null,_p=null,rc=null,ac=null,$2.length&&yf($2.pop())}var Ww=Symbol("skip tree generation"),Hw=new ba,Gw=new ba,Yd=new zt,Sc=new gl,Gp=new gl,qp=new V,Yv=new V,gue=new V,yue=new V,bue=new V,YO=new ba,Fo=new mN(()=>new cu),Rf=class{static serialize(e,t={}){if(t.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Rf.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});t={cloneBuffers:!0,...t};let i=e.geometry,r=e._roots,a=i.getIndex(),n;return t.cloneBuffers?n={roots:r.map(s=>s.slice()),index:a.array.slice()}:n={roots:r,index:a.array},n}static deserialize(e,t,i={}){if(typeof i=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Rf.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});i={setIndex:!0,...i};let{index:r,roots:a}=e,n=new Rf(t,{...i,[Ww]:!0});if(n._roots=a,i.setIndex){let s=t.getIndex();if(s===null){let o=new ji(e.index,1,!1);t.setIndex(o)}else s.array!==r&&(s.array.set(r),s.needsUpdate=!0)}return n}constructor(e,t={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(t=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Ww]:!1},t),t.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,t[Ww]||(this._roots=nue(e,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new ba))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));let t=this.geometry,i=t.index.array,r=t.attributes.position,a,n,s,o,l=0,u=this._roots;for(let d=0,h=u.length;d<h;d++)a=u[d],n=new Uint32Array(a),s=new Uint16Array(a),o=new Float32Array(a),c(0,l),l+=a.byteLength;function c(d,h,p=!1){let f=d*2;if(s[f+15]===65535){let v=n[d+6],m=s[f+14],g=1/0,y=1/0,b=1/0,x=-1/0,S=-1/0,w=-1/0;for(let E=3*v,M=3*(v+m);E<M;E++){let P=i[E],A=r.getX(P),k=r.getY(P),I=r.getZ(P);A<g&&(g=A),A>x&&(x=A),k<y&&(y=k),k>S&&(S=k),I<b&&(b=I),I>w&&(w=I)}return o[d+0]!==g||o[d+1]!==y||o[d+2]!==b||o[d+3]!==x||o[d+4]!==S||o[d+5]!==w?(o[d+0]=g,o[d+1]=y,o[d+2]=b,o[d+3]=x,o[d+4]=S,o[d+5]=w,!0):!1}else{let v=d+8,m=n[d+6],g=v+h,y=m+h,b=p,x=!1,S=!1;e?b||(x=e.has(g),S=e.has(y),b=!x&&!S):(x=!0,S=!0);let w=b||x,E=b||S,M=!1;w&&(M=c(v,h,b));let P=!1;E&&(P=c(m,h,b));let A=M||P;if(A)for(let k=0;k<3;k++){let I=v+k,O=m+k,D=o[I],F=o[I+3],U=o[O],z=o[O+3];o[d+k]=D<U?D:U,o[d+k+3]=F>z?F:z}return A}}}traverse(e,t=0){let i=this._roots[t],r=new Uint32Array(i),a=new Uint16Array(i);n(0);function n(s,o=0){let l=s*2,u=a[l+15]===65535;if(u){let c=r[s+6],d=a[l+14];e(o,u,new Float32Array(i,s*4,6),c,d)}else{let c=s+8,d=r[s+6],h=r[s+7];e(o,u,new Float32Array(i,s*4,6),h)||(n(c,o+1),n(d,o+1))}}}raycast(e,t=Po){let i=this._roots,r=this.geometry,a=[],n=t.isMaterial,s=Array.isArray(t),o=r.groups,l=n?t.side:t;for(let u=0,c=i.length;u<c;u++){let d=s?t[o[u].materialIndex].side:l,h=a.length;if(yf(i[u]),F2(0,r,d,e,a),qv(),s){let p=o[u].materialIndex;for(let f=h,v=a.length;f<v;f++)a[f].face.materialIndex=p}}return a}raycastFirst(e,t=Po){let i=this._roots,r=this.geometry,a=t.isMaterial,n=Array.isArray(t),s=null,o=r.groups,l=a?t.side:t;for(let u=0,c=i.length;u<c;u++){let d=n?t[o[u].materialIndex].side:l;yf(i[u]);let h=j2(0,r,d,e);qv(),h!=null&&(s==null||h.distance<s.distance)&&(s=h,n&&(h.face.materialIndex=o[u].materialIndex))}return s}intersectsGeometry(e,t){let i=this.geometry,r=!1;for(let a of this._roots)if(yf(a),r=vue(0,i,e,t),qv(),r)break;return r}shapecast(e,t,i){let r=this.geometry;if(e instanceof Function){if(t){let d=t;t=(h,p,f,v)=>{let m=p*3;return d(h,m,m+1,m+2,f,v)}}e={boundsTraverseOrder:i,intersectsBounds:e,intersectsTriangle:t,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let a=Fo.getPrimitive(),{boundsTraverseOrder:n,intersectsBounds:s,intersectsRange:o,intersectsTriangle:l}=e;if(o&&l){let d=o;o=(h,p,f,v,m)=>d(h,p,f,v,m)?!0:qO(h,p,r,l,f,v,a)}else o||(l?o=(d,h,p,f)=>qO(d,h,r,l,p,f,a):o=(d,h,p)=>p);let u=!1,c=0;for(let d of this._roots){if(yf(d),u=mue(0,r,s,o,n,c),qv(),u)break;c+=d.byteLength}return Fo.releasePrimitive(a),u}bvhcast(e,t,i){let{intersectsRanges:r,intersectsTriangles:a}=i,n=this.geometry.index,s=this.geometry.attributes.position,o=e.geometry.index,l=e.geometry.attributes.position;Yd.copy(t).invert();let u=Fo.getPrimitive(),c=Fo.getPrimitive();if(a){let h=function(p,f,v,m,g,y,b,x){for(let S=v,w=v+m;S<w;S++){Jo(c,S*3,o,l),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let E=p,M=p+f;E<M;E++)if(Jo(u,E*3,n,s),u.needsUpdate=!0,a(u,c,E,S,g,y,b,x))return!0}return!1};if(r){let p=r;r=function(f,v,m,g,y,b,x,S){return p(f,v,m,g,y,b,x,S)?!0:h(f,v,m,g,y,b,x,S)}}else r=h}e.getBoundingBox(Gw),Gw.applyMatrix4(t);let d=this.shapecast({intersectsBounds:h=>Gw.intersectsBox(h),intersectsRange:(h,p,f,v,m,g)=>(Hw.copy(g),Hw.applyMatrix4(Yd),e.shapecast({intersectsBounds:y=>Hw.intersectsBox(y),intersectsRange:(y,b,x,S,w)=>r(h,p,y,b,v,m,S,w)}))});return Fo.releasePrimitive(u),Fo.releasePrimitive(c),d}intersectsBox(e,t){return Sc.set(e.min,e.max,t),Sc.needsUpdate=!0,this.shapecast({intersectsBounds:i=>Sc.intersectsBox(i),intersectsTriangle:i=>Sc.intersectsTriangle(i)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t,i={},r={},a=0,n=1/0){e.boundingBox||e.computeBoundingBox(),Sc.set(e.boundingBox.min,e.boundingBox.max,t),Sc.needsUpdate=!0;let s=this.geometry,o=s.attributes.position,l=s.index,u=e.attributes.position,c=e.index,d=Fo.getPrimitive(),h=Fo.getPrimitive(),p=Yv,f=gue,v=null,m=null;r&&(v=yue,m=bue);let g=1/0,y=null,b=null;return Yd.copy(t).invert(),Gp.matrix.copy(Yd),this.shapecast({boundsTraverseOrder:x=>Sc.distanceToBox(x),intersectsBounds:(x,S,w)=>w<g&&w<n?(S&&(Gp.min.copy(x.min),Gp.max.copy(x.max),Gp.needsUpdate=!0),!0):!1,intersectsRange:(x,S)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:w=>Gp.distanceToBox(w),intersectsBounds:(w,E,M)=>M<g&&M<n,intersectsRange:(w,E)=>{for(let M=w*3,P=(w+E)*3;M<P;M+=3){Jo(h,M,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let A=x*3,k=(x+S)*3;A<k;A+=3){Jo(d,A,l,o),d.needsUpdate=!0;let I=d.distanceToTriangle(h,p,v);if(I<g&&(f.copy(p),m&&m.copy(v),g=I,y=A/3,b=M/3),I<a)return!0}}}});{let w=c?c.count:u.count;for(let E=0,M=w;E<M;E+=3){Jo(h,E,c,u),h.a.applyMatrix4(t),h.b.applyMatrix4(t),h.c.applyMatrix4(t),h.needsUpdate=!0;for(let P=x*3,A=(x+S)*3;P<A;P+=3){Jo(d,P,l,o),d.needsUpdate=!0;let k=d.distanceToTriangle(h,p,v);if(k<g&&(f.copy(p),m&&m.copy(v),g=k,y=P/3,b=E/3),k<a)return!0}}}}}),Fo.releasePrimitive(d),Fo.releasePrimitive(h),g===1/0?null:(i.point?i.point.copy(f):i.point=f.clone(),i.distance=g,i.faceIndex=y,r&&(r.point?r.point.copy(m):r.point=m.clone(),r.point.applyMatrix4(Yd),f.applyMatrix4(Yd),r.distance=f.sub(r.point).length(),r.faceIndex=b),i)}closestPointToPoint(e,t={},i=0,r=1/0){let a=i*i,n=r*r,s=1/0,o=null;if(this.shapecast({boundsTraverseOrder:u=>(qp.copy(e).clamp(u.min,u.max),qp.distanceToSquared(e)),intersectsBounds:(u,c,d)=>d<s&&d<n,intersectsTriangle:(u,c)=>{u.closestPointToPoint(e,qp);let d=e.distanceToSquared(qp);return d<s&&(Yv.copy(qp),s=d,o=c),d<a}}),s===1/0)return null;let l=Math.sqrt(s);return t.point?t.point.copy(Yv):t.point=Yv.clone(),t.distance=l,t.faceIndex=o,t}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(t=>{rl(0,new Float32Array(t),YO),e.union(YO)}),e}},Yp=fu(vH()),wue=.5*(Math.sqrt(3)-1),Xp=(3-Math.sqrt(3))/6,xue=1/3,jo=1/6,Nf=e=>Math.floor(e)|0,XO=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),qw=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function Yw(e=Math.random){let t=vN(e),i=new Float64Array(t).map(a=>XO[a%12*2]),r=new Float64Array(t).map(a=>XO[a%12*2+1]);return function(a,n){let s=0,o=0,l=0,u=(a+n)*wue,c=Nf(a+u),d=Nf(n+u),h=(c+d)*Xp,p=c-h,f=d-h,v=a-p,m=n-f,g,y;v>m?(g=1,y=0):(g=0,y=1);let b=v-g+Xp,x=m-y+Xp,S=v-1+2*Xp,w=m-1+2*Xp,E=c&255,M=d&255,P=.5-v*v-m*m;if(P>=0){let I=E+t[M],O=i[I],D=r[I];P*=P,s=P*P*(O*v+D*m)}let A=.5-b*b-x*x;if(A>=0){let I=E+g+t[M+y],O=i[I],D=r[I];A*=A,o=A*A*(O*b+D*x)}let k=.5-S*S-w*w;if(k>=0){let I=E+1+t[M+1],O=i[I],D=r[I];k*=k,l=k*k*(O*S+D*w)}return 70*(s+o+l)}}function Sue(e=Math.random){let t=vN(e),i=new Float64Array(t).map(n=>qw[n%12*3]),r=new Float64Array(t).map(n=>qw[n%12*3+1]),a=new Float64Array(t).map(n=>qw[n%12*3+2]);return function(n,s,o){let l,u,c,d,h=(n+s+o)*xue,p=Nf(n+h),f=Nf(s+h),v=Nf(o+h),m=(p+f+v)*jo,g=p-m,y=f-m,b=v-m,x=n-g,S=s-y,w=o-b,E,M,P,A,k,I;x>=S?S>=w?(E=1,M=0,P=0,A=1,k=1,I=0):x>=w?(E=1,M=0,P=0,A=1,k=0,I=1):(E=0,M=0,P=1,A=1,k=0,I=1):S<w?(E=0,M=0,P=1,A=0,k=1,I=1):x<w?(E=0,M=1,P=0,A=0,k=1,I=1):(E=0,M=1,P=0,A=1,k=1,I=0);let O=x-E+jo,D=S-M+jo,F=w-P+jo,U=x-A+2*jo,z=S-k+2*jo,B=w-I+2*jo,W=x-1+3*jo,R=S-1+3*jo,$=w-1+3*jo,q=p&255,Z=f&255,G=v&255,X=.6-x*x-S*S-w*w;if(X<0)l=0;else{let de=q+t[Z+t[G]];X*=X,l=X*X*(i[de]*x+r[de]*S+a[de]*w)}let J=.6-O*O-D*D-F*F;if(J<0)u=0;else{let de=q+E+t[Z+M+t[G+P]];J*=J,u=J*J*(i[de]*O+r[de]*D+a[de]*F)}let pe=.6-U*U-z*z-B*B;if(pe<0)c=0;else{let de=q+A+t[Z+k+t[G+I]];pe*=pe,c=pe*pe*(i[de]*U+r[de]*z+a[de]*B)}let fe=.6-W*W-R*R-$*$;if(fe<0)d=0;else{let de=q+1+t[Z+1+t[G+1]];fe*=fe,d=fe*fe*(i[de]*W+r[de]*R+a[de]*$)}return 32*(l+u+c+d)}}function vN(e){let t=new Uint8Array(512);for(let i=0;i<512/2;i++)t[i]=i;for(let i=0;i<512/2-1;i++){let r=i+~~(e()*(256-i)),a=t[i];t[i]=t[r],t[r]=a}for(let i=256;i<512;i++)t[i]=t[i-256];return t}var oo=new xn,Cue=class{constructor(e){this.weightAttribute=null;let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let e=this.positionAttribute,t=new Float32Array(e.count/3);for(let r=0;r<e.count;r+=3){let a=1;oo.a.fromBufferAttribute(e,r),oo.b.fromBufferAttribute(e,r+1),oo.c.fromBufferAttribute(e,r+2),a*=oo.getArea(),t[r/3]=a}this.distribution=new Float32Array(e.count/3);let i=0;for(let r=0;r<t.length;r++)i+=t[r],this.distribution[r]=i;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t){if(this.distribution){let i=this.distribution[this.distribution.length-1],r=this.binarySearch(this.randomFunction()*i);return this.sampleFace(r,e,t)}}binarySearch(e){if(!this.distribution)return 0;let t=this.distribution,i=0,r=t.length-1,a=-1;for(;i<=r;){let n=Math.ceil((i+r)/2);if(n===0||t[n-1]<=e&&t[n]>e){a=n;break}else e<t[n]?r=n-1:i=n+1}return a}sampleFace(e,t,i){let r=this.randomFunction(),a=this.randomFunction();return r+a>1&&(r=1-r,a=1-a),oo.a.fromBufferAttribute(this.positionAttribute,e*3),oo.b.fromBufferAttribute(this.positionAttribute,e*3+1),oo.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(oo.a,r).addScaledVector(oo.b,a).addScaledVector(oo.c,1-(r+a)),oo.getNormal(i),this}},_ue=fu(Kz()),Mue=new zt,Eue=new zt,Aue=new zt,bm;(e=>{function t(i){return i&&i.__isSPEObject}e.is=t})(bm||(bm={}));var pA=e=>class extends e{constructor(){super(...arguments),this.previousModelViewMatrix=new zt,this.copyPreviousMatrix=!0,this.hiddenMatrix=new zt,this.matrixWorldRigid=new zt,this.shearScale=new zt,this.shearScaleInv=new zt}get __isSPEObject(){return!0}isDescendantOf(t){t instanceof Tr&&(t=t.uuid);let i=this;for(;i.parent;){if(i.parent.uuid===t)return!0;i=i.parent}return!1}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);for(let i of this.children)i.updateMatrixWorld(t)}updateWorldMatrix(t,i){let r=this.parent;if(t&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),i)for(let a of this.children)a.updateWorldMatrix(!1,!0)}traverseChildren(t,i=0){for(let r of this.children)bm.is(r)&&r.traverseObject(t,i+1)}traverseObject(t,i=0){if(t(this,i)!==!0)for(let r of this.children)bm.is(r)&&r.traverseObject(t,i+1)}updateMatrixWorldSVD(){let t=this.matrixWorld.elements,i=[[t[0],t[4],t[8]],[t[1],t[5],t[9]],[t[2],t[6],t[10]]],{u:r,v:a,q:n}=(0,_ue.SVD)(i),s=Mue.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),o=Eue.set(a[0][0],a[0][1],a[0][2],0,a[1][0],a[1][1],a[1][2],0,a[2][0],a[2][1],a[2][2],0,0,0,0,1),l=Aue.copy(o).transpose();this.shearScale.makeScale(n[0],n[1],n[2]).multiply(l).premultiply(o),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(s,l).copyPosition(this.matrixWorld),n.every(u=>Math.abs(n[0]-u)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(t,i){this.updateWorldMatrix(!0,!1);let r=new zt().copy(this.matrixWorld).invert();return t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),r.multiply(t.parent.matrixWorld)),"hiddenMatrix"in t&&t.hiddenMatrix instanceof zt?t.hiddenMatrix.premultiply(r):t.applyMatrix4(r),t.updateWorldMatrix(!1,!1),this.add(t),i!==void 0&&(this.children.pop(),this.children.splice(i,0,t)),this}copy(t,i=!1){return super.copy(t,i),this.hasNonUniformScale=t.hasNonUniformScale,this}onAfterRender(t,i,r,a,n,s){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},Pue=class extends pA(Tr){},Tue=e=>e.type==="Mesh",Nn=class extends Pue{constructor(e){super(),this.object=e,this.matrixAutoUpdate=!1,this.hasNonUniformScale=e.hasNonUniformScale}raycast(e,t){}expand(){let e=0,t=this.object.entityChildren(e);for(;t;){let i=this.children[e];i?.object!==t&&(i&&this.remove(i),i=new Nn(t),this.add(i),this.children.splice(e,0,this.children.pop()),i.matrixWorldNeedsUpdate=!0,i.matrixAutoUpdate=!1,i.matrix=t.matrix,i.hiddenMatrix=t.hiddenMatrix),i.expand(),e+=1,t=this.object.entityChildren(e)}for(;this.children.length>e;)this.remove(this.children[e])}get visible(){var e;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((e=this.object.dataPatched.cloner)==null?void 0:e.hideBase)===!0}set visible(e){}get castShadow(){return this.object.castShadow}set castShadow(e){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(e){}get isMesh(){return Tue(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(e){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},Lc=new V,Bc=new V,kh=new zt,gN=[new V(-1,1,1),new V(-1,-1,1),new V(1,-1,1),new V(1,1,1),new V(-1,1,-1),new V(-1,-1,-1),new V(1,-1,-1),new V(1,1,-1)],kue=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],Oue=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],KO=(e,t,i)=>{e.updateEntityBoxSize(Lc,Bc),kh.copy(t).multiply(e.matrixWorld),Bc.x===0&&Bc.y===0&&Bc.z===0?i.push(new V(Lc.x,Lc.y,Lc.z).applyMatrix4(kh)):gN.forEach(r=>{i.push(r.clone().multiply(Bc).add(Lc).applyMatrix4(kh))})},ZO=class extends ba{constructor(){super(...arguments),this.matrix=new zt,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(e){return super.copy(e),this.matrix.copy(e.matrix),this.vertices=e.vertices.map(t=>t.clone()),this.faces=e.faces.map(t=>t.clone()),this.edges=e.edges.map(t=>t.clone()),this.centerEdges=e.centerEdges.map(t=>t.clone()),this}setFromObjectSize(e,t=!1){e.updateWorldMatrix(!1,t),this.makeEmpty(),this.matrix.copy(e.matrixWorld);let i=new zt().copy(e.matrixWorld).invert();return this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];return i===!0?e.traverseEntity(a=>{if(a.visible||a.cloner&&a.data.visible){if(!("geometry"in a)){r.push(new V);return}KO(a,t,r)}}):KO(e,t,r),this.setFromPoints(r)}getCenter(e){return e=super.getCenter(e),e.applyMatrix4(this.matrix),e}getPositionToCenter(e){return e=super.getCenter(e),e.applyMatrix4(kh.copy(this.matrix).setPosition(0,0,0)),e}computeVertices(){this.getSize(Bc).multiplyScalar(.5),this.getCenter(Lc),kh.copy(this.matrix).setPosition(Lc),this.vertices=gN.map(e=>e.clone().multiply(Bc).applyMatrix4(kh))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=kue.map(([e,t])=>new Qs(this.vertices[e],this.vertices[t])),this.centerEdges=this.edges.map(e=>e.getCenter(new V))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=Oue.map(([e,t])=>this.vertices[e].clone().add(this.vertices[t]).multiplyScalar(.5))}},Ku={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},Due=class extends MR{constructor(){super()}getPoints(e=12){let t=[],i,r=this.getCurveLengths(),a=r[r.length-1]/r.length;for(let n=0,s=this.curves;n<s.length;n++){let o=s[n],l=n===0?r[n]:r[n]-r[n-1],u=Math.ceil(e*l/a),c=o.getPoints(u);for(let d=0;d<c.length;d++){let h=c[d];i&&i.equals(h)||(t.push(h),i=h)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}},U2=.001;function W2(e,t,i){return t.clone().sub(e).cross(t.clone().sub(i)).length()<=U2}function Xw(e,t){let i=new V(...e.position),r=new V(...e.controlNext.position),a=new V(...t.controlPrevious.position),n=new V(...t.position);return W2(i,r,n)&&W2(i,a,n)}function yN(e){let t=e.points.map(c=>new V(...c.data.position)),i=[e.points[0]],r=new V(...i[0].data.position);for(let c=0;c<e.points.length-1;c++)W2(r,t[c],t[c+1])||(i.push(e.points[c]),r=t[c]);i.push(e.points[e.points.length-1]);let a=e.isClosed,n=i.length-(a?0:1),s=i.length,o=[];for(let c=0;c<s;c++){let d=i[c].data,h=new V(...d.position),p=new V(...d.controlPrevious.position),f=new V(...d.controlNext.position),v={position:h,baseRoundness:d.roundness,controlPrevious:p,controlNext:f};if(d.roundness===0||!e.isClosed&&(c===0||c===s-1)){o[c]={...v,removedLength:0};continue}let m=a&&c==0?s-1:c-1,g=a&&c==s-1?0:c+1,y=i[m].data,b=i[g].data,x=new V(...y.position),S=new V(...b.position),w=x.clone().sub(h).normalize(),E=S.clone().sub(h).normalize();Object.assign(v,{prevDir:w,nextDir:E});let M=Xw(y,d),P=Xw(d,b);if(!M||!P)o[c]={...v,removedLength:0};else{let A=w.clone().add(E).normalize(),k=A.clone().cross(w).length()/w.dot(A);o[c]={...v,tan:k,removedLength:d.roundness/k}}}for(let c=0;c<n;c++){let d=c,h=a&&c===s-1?0:c+1,p=o[d],f=o[h];if(p.removedLength!==0||f.removedLength!==0){let v=p.position.distanceTo(f.position);p.removedLength=Math.min(p.removedLength,v/2),f.removedLength=Math.min(f.removedLength,v/2)}}let l=[];for(let c=0;c<n;c++){let d=c,h=a&&c===s-1?0:c+1,p=o[d],f=o[h],v=null;if(!Xw(i[d].data,i[h].data))p.position.distanceTo(f.position)>U2&&(v=new $g(p.position,p.controlNext,f.controlPrevious,f.position));else{let m=p.position.clone(),g=f.position.clone();(p.removedLength!==0||f.removedLength!==0)&&(p.nextDir&&m.add(p.nextDir.clone().setLength(p.removedLength)),f.prevDir&&g.add(f.prevDir.clone().setLength(f.removedLength))),m.distanceTo(g)>U2&&(v=new $g(m,m.clone().lerp(g,.3),g.clone().lerp(m,.3),g))}l[2*c+1]=v}for(let c=0;c<s;c++){let d=o[c];if(d.removedLength===0){l[2*c]=null;continue}let h=d.position,p=d.prevDir.clone().multiplyScalar(d.removedLength).add(h),f=d.nextDir.clone().multiplyScalar(d.removedLength).add(h),v=d.tan*d.removedLength,m=d.prevDir.clone().add(d.nextDir).normalize(),g=p.clone().lerp(f,.5),y=p.distanceTo(f)/2,b=m.clone().multiplyScalar(Math.sqrt(Math.pow(v,2)-Math.pow(y,2))).add(g),x=m.clone().multiplyScalar(-v).add(b),S=h.distanceTo(x)/h.distanceTo(g),w=d.prevDir.clone().multiplyScalar(S*h.distanceTo(p)).add(h),E=w.clone().lerp(x,2),M=p.clone().lerp(w,4/3),P=f.clone().lerp(E,4/3);l[2*c]=new $g(p,M,P,f)}let u=new Due;return l.forEach(c=>{c&&u.add(c)}),u}var fr;(e=>{function t(i){return i&&i.__isEntity}e.is=t})(fr||(fr={}));var jl=e=>fr.is(e),Iue={type:"completeState",isfromEntity:!0},Lue=["x","y","z"],Kw=new V,Bue=new V().set(0,1,0),fA=e=>class extends pA(e){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new ZO,this._recursiveBBox=new ZO,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(t){let i=this.children[t];if(fr.is(i))return i}entityChildrenCount(){let t=this.children.length;for(;t--;)if(fr.is(this.children[t]))return t+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let t=this;for(;t.data.type!=="Instance";){let i=t.parent;if(fr.is(i))t=i;else return}return t}forInstancesRec(t){this.instances.forEach(i=>{i.disposed||t(i),i.forInstancesRec(t)})}super_Entity(t,i){typeof t=="string"&&(this.uuid=t),this.identity=t,this.data=i,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(t,i,r=!1){if(!(this.data.states.length===0&&!r)){for(let a of this.data.states)jc.toOps(this.data,a.data).forEach(n=>{let s=Ay.replaceProps(n,this.data);this.dataPatched=this.data,this.updateByPatchedOp(s,this.data,i)});if(t!==null){let a=this.data.states.data(t);a&&(this.dataPatched=jc.patch(this.data,a),jc.toOps(this.data,a).forEach(n=>{this.updateByPatchedOp(n,this.dataPatched,i)}))}r&&this.updateTransformState(this.dataPatched,i),this.stateSelection=t,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(t,i){t.setScalar(0),i.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(t=>{jl(t)&&t.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(t=>{t.resetBBoxNeedsUpdateSelf()})}find(t){let i;return this.traverseEntity(r=>{r.uuid===t&&(i=r)}),i}traverseSortNextHelper(){let t=this.parent;if(t){let i=t.children,r=i.indexOf(this)+1;if(fr.is(i[r]))return i[r];if(fr.is(t))return t.traverseSortNextHelper()}}sortNext(){let t=this.children;return this.children.length>0&&fr.is(this.children[0])?t[0]:this.traverseSortNextHelper()}goUp(t){let i=this;for(;t>0&&i!==null;)i=i.parent,t-=1;return i}hasAnccestorOrSelf(t){return this===t||this.hasAnccestor(t)}hasAnccestor(t){let i=this.parent;for(;i;){if(t===i)return!0;i=i.parent}return!1}countToAccestor(t){let i=0,r=this;for(;r!==t;){if(r===null)return-1;r=r.parent,i+=1}return i}forEachEntity(t){for(let i of this.children)jl(i)&&t(i)}traverseEntityAncestors(t){this.traverseAncestors(i=>{fr.is(i)&&t(i)})}traverseConcreteEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)jl(r)&&r.isConcreteEntity&&r.traverseEntity(t,i+1)}traverseEntity(t,i=0){if(t(this,i)!==!0)for(let r of this.children)jl(r)&&r.traverseEntity(t,i+1)}traverseVisibleEntity(t){t(this);for(let i of this.children)jl(i)&&i.visible&&i.traverseVisibleEntity(t)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(t){super.updateMatrixWorld(t),this.dispatchEvent({type:"updateMatrixWorld"})}copy(t,i=!1){return super.copy(t,i),this.dataPatched=t.dataPatched,this.raycastLock=t.raycastLock,this.scaleLock=t.scaleLock,this.hiddenMatrix.copy(t.hiddenMatrix),this}hasEntityChild(){return this.children.some(t=>jl(t))}isAncestorOf(t){if(this.uuid===t)return!1;let i=!1;return this.traverseEntity(r=>{r.uuid===t&&(i=!0)}),i}toObjectTransformState(t=[]){this.updateWorldMatrix(!0,!1);let i={position:this.position.toArray(),rotation:[this.rotation.x*li.RAD2DEG,this.rotation.y*li.RAD2DEG,this.rotation.z*li.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return Q_(i,t)}getTransformValues(t,i,r){return i[t].map((a,n)=>r?.shared.getVariable(a,[this.uuid,t,Lue[n]])??a)}updateTransformState(t,i){let r=!1;return t.position&&(this.position.fromArray(this.getTransformValues("position",t,i)),r=!0),t.rotation&&(Kw.fromArray(this.getTransformValues("rotation",t,i)).multiplyScalar(li.DEG2RAD),this.rotation.setFromVector3(Kw),r=!0),t.scale&&(this.scale.fromArray(this.getTransformValues("scale",t,i)),r=!0),t.hiddenMatrix!==void 0&&(r=!0,this.hiddenMatrix.fromArray(t.hiddenMatrix??Zh.identity)),r&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(a=>{a.invalidateClonerTransform(this)})),t.position&&t.rotation&&t.scale&&t.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),r}onVariableUpdate(t=!1){if(t){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(i=>{i.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let t of this.children)fr.is(t)&&t.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(t=>{fr.is(t)&&t.disposeRecursively()})}toState(t=[]){let i={name:this.name,visible:this.visible,raycastLock:this.raycastLock,...this.toObjectTransformState(t)};return Q_(i,t)}updateByObjUpdateOp(t,i){t!==void 0&&this.updateByOp({type:0,props:t,path:[]},{...this.data,...t},i,!1)}updateByOp(t,i,r,a){let n=this.data;this.data=i;let s=t,o=Vr(t.path,["states","*"]);if(o!==null){if(t.type===0){let[l]=o;if((this==null?void 0:this.stateSelection)===l){let u={...t.props};if(delete u.name,Object.values(t.props).some(c=>c===void 0)){let c=this.data;if(c!==void 0){let d=Fa.zoom(c,t.path.slice(2));if(d)for(let h in t.props)t.props[h]===void 0&&h in d&&(u[h]=d[h])}}s={...t,props:u,path:t.path.slice(2)}}}}else if(t.type===0){let l=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(l!==void 0){if(t.props.name!==void 0&&l.name){let{name:c,...d}=l;l=d}if(t.props.material!==void 0&&"material"in l){let{material:c,...d}=l;l=d}let u=Fa.removeOverridden(t.path,t.props,l);s={...t,props:u}}}if(this.updateByPatchedOpBase(s,jc.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),r),Vr(t.path,["overrides"])){let l=[],u=[...t.path];for(l.push(u[1]),u.splice(0,2);u.length>0&&u[0]==="descendants";)l.push(u[1]),u.splice(0,2);if(l[l.length-1]===void 0){if(t.type===0)for(let c of Object.keys(t.props)){l[l.length-1]=c;let d=r.scene.findInstance([this.uuid,...l]);d&&(d.overrideData=t.props[c],d.updateState(tc.apply(d.component.data,d.overrideData),r))}}else{let c=r.scene.findInstance([this.uuid,...l]);if(c){let d=Fa.zoom(c.component.data,u);if(t={...t,path:u},t.type===0){let h=t.props;if(d)for(let[p,f]of Object.entries(t.props))f===void 0&&(h===t.props&&(h={...t.props}),h[p]=d[p]);t={...t,props:h}}c.overrideData=Ny.resolve(i.overrides,l),c.updateByOp(t,en.applySimple(c.data,t),r,!1)}}}else if(this.instances.length>0){let l;if(t.path.length===0&&t.type===0){let u;for(let c of Yu.rootOverrideProps)c in t.props&&(u===void 0&&(u={}),u[c]=t.props[c]);u&&(l={...t,props:u})}else for(let u of Yu.rootOverrideProps)if(Vr(t.path,[u])){l=t;break}l!==void 0&&this.instances.forEach(u=>{if(u.isInstanceRoot){let c=tc.filterOp(u.overrideData,l);c&&u.updateByOp(c,en.applySimple(u.data,c),r,!0)}}),this.instances.forEach(u=>{if(!u.isInstanceRoot){let c=tc.filterOp(u.overrideData,t);if(c){let d;n===u.data&&t===c?d=i:d=en.applySimple(u.data,c),u.updateByOp(c,d,r,!0)}}})}}updateByPatchedOpBase(t,i,r){if(this.dataPatched=i,t.path.length===0&&t.type===0)t.props.type!==void 0&&!fd.is(t.props.type)&&Ku.changeEntityProptotype(this,i,r);else if(t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&"type"in t.props){Ku.changeEntityProptotype(this,i,r);for(let a of this.children)fr.is(a)&&a.updateVisible(r.scene)}this.updateByPatchedOp(t,i,r)}updateByPatchedOp(t,i,r){if(t.path.length===0&&t.type===0&&this.updateState(t.props,r),Vr(t.path,["pathSnapping"])!==null&&this.updatePathSnapping(i.pathSnapping),Vr(t.path,["cloner"])!==null){let a=en.drop(t,1);a.path.length===0&&a.type===0&&a.props.disabled===!0?this.setFromClonerState(null,r):this.cloner?this.cloner.updateState(i.cloner,r.scene):(this.setFromClonerState(i.cloner,r),this.expandCloner(r.scene)),this.updateVisible(r.scene)}}updatePathSnapping(t=this.dataPatched.pathSnapping){this._updatedPathSnapping=t,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(t){var i,r,a,n,s;let o=((i=this._updatedPathSnapping)==null?void 0:i.pathId)??this.dataPatched.pathSnapping.pathId,l=((r=this._updatedPathSnapping)==null?void 0:r.slide)??this.dataPatched.pathSnapping.slide??0,u=((a=this._updatedPathSnapping)==null?void 0:a.offset)??this.dataPatched.pathSnapping.offset??0,c=((n=this._updatedPathSnapping)==null?void 0:n.orientation)??this.dataPatched.pathSnapping.orientation;if(o===null)return;let d=t.find(o);if(!d||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let h=d.data;if(h.geometry.path.points.length<=1)return;let p=yN(h.geometry.path),f=(l+u)%1;l+u===1&&f===0&&(f=1);let v=null;try{v=p.curves.length?p.getPointAt(f):null}catch{}if(v===null)return;let m=this.parent?(s=this.parent)==null?void 0:s.matrixWorld:new zt;d.updateMatrixWorld();let g=new zt().multiplyMatrices(m.clone().invert(),d.matrixWorld);v.applyMatrix4(g);let y={position:v.toArray(),rotation:h.rotation};if(c==="tangential"){let b=new zt().extractRotation(d.matrixWorld),x=p.getTangentAt(f).applyMatrix4(b).add(v),S=new zt().lookAt(v,x,Bue),w=Kw.setFromEuler(new Va().setFromRotationMatrix(S)).multiplyScalar(li.RAD2DEG);y={...y,rotation:w.toArray()}}this.updateTransformState(y),this.traverseEntity(b=>{b._cameraType&&b.dispatchEvent(Iue)})}updateVisible(t){var i;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||(this.dataPatched.cloner.disabled??!1)||((i=this.dataPatched.cloner)==null?void 0:i.hideBase)!==!0),!t)return;let r=!1;this.traverseEntity(a=>{if(a.data.type==="Splat")return r=!0,!0}),r&&t.reloadSplats()}updateState_Entity(t,i){t.name!==void 0&&(this.name=t.name),t.raycastLock!==void 0&&(this.raycastLock=t.raycastLock),t.visible!==void 0&&(this.updateVisible(i?.scene),this.resetBBoxNeedsUpdate()),i&&"cloner"in t&&t.cloner!==void 0&&(this.setFromClonerState(t.cloner,i),this.updateVisible(i.scene)),this.updateTransformState(t,i)}get attachedSurfaceCloners(){return this.children.filter(t=>t instanceof Ku.Cloner&&t.parameters.type==="toObject")}setFromClonerState(t,i){this.disposed||(t===null||t.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Ku.Cloner(this,t),i.scene.addPendingExpandCloner(this)):this.cloner.updateState(t,i.scene))}expandCloner(t){!this.disposed&&this.cloner&&this.cloner.expandClones(t)}invalidateClonerTransform(t){this.cloner&&this.cloner.invalidateTransform(t)}requestRender(){this.dispatchEvent({type:"requestRender"})}},bN=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},e.parameters);i.thetaLength=li.clamp(i.thetaLength,0,360);let r=i.width/2,a=i.radiusTop??r,n=i.radiusBottom??r;return a===n?(a=r,n=r):a>n?(a=r,n=n*r/a):(a=a*r/n,n=r),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),radiusTop:a,radiusBottom:n})}}static build(e){let{width:t,depth:i,height:r,radialSegments:a,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:l,radiusTop:u,radiusBottom:c,cornerRadius:d,cornerSegments:h,hollow:p}=e.parameters,f;return l===0?(f=new Mi,f.setAttribute("position",new ri([],3))):d||p?f=new wN(u,c,r,a,n,s,o,l*Math.PI/180,d,d,h,p):f=new IE(u,c,r,a,n,s,o,l*Math.PI/180),f.scale(1,1,i/t),Object.assign(f,{userData:{...e,type:"CylinderGeometry"}})}};function Eu(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function QO(e){return new Ce(e.y,-e.x)}var wN=class extends Mi{constructor(e,t,i,r,a,n,s,o,l,u,c,d,h=!1){super(),this.type="RoundedCylinderBufferGeometry",e=e!==void 0?e:1,t=t!==void 0?t:1,i=i||1,r=Math.floor(r)||8,a=Math.floor(a)||1,n=n!==void 0?n:!1,s=s!==void 0?s:0,o=o!==void 0?o:Math.PI*2,n&&(l=0,u=0);let p=[],f=[],v=[],m=[],g=0,y=i/2,b=new V,x=new V;h&&e==0&&(e=l),h&&t==0&&(t=u);let S=new Ce(e,y),w=new Ce(t,-y),E=null,M=null,P=null,A=null,k=S.clone().sub(w),I=0,O=0,D=0;d>0&&(I=Math.min(e,t)*(1-d),O=e-I,D=t-I);let F=S.clone();F.x-=I;let U=Math.PI-k.angle(),z=k.angle(),B=Math.tan(z/2),W=Math.tan(U/2),R=B+W,$=d?R:W,q=d?R:B;if(l=Math.min(l,(e-O)/$,k.length()/R),u=Math.min(u,(t-D)/q,k.length()/R),l>0){let fe=l/B;E=S.clone().sub(new Ce(fe,l)),d&&(P=E.clone(),P.x-=I-R*l),S.sub(k.clone().setLength(fe))}if(u>0){let fe=u/W;M=w.clone().sub(new Ce(fe,-u)),w.add(k.clone().setLength(fe)),d&&(A=M.clone(),A.x-=I-R*u,F.sub(k.clone().setLength(fe)))}k=S.clone().sub(w);let Z=k.length()<.5,G=[];for(let fe=0;fe<=r;fe++){let de=[],ge=fe/r,me=ge*o+s,ke=new Ce(Math.sin(me),Math.cos(me));A&&M?(X(de,ge,ke,U,u,A,-1,!0),X(de,ge,ke,z,u,M,-1,!1)):M?(J(de,ke,M.x,0,-1),X(de,ge,ke,z,u,M,-1,!1)):n||J(de,ke,t,D,-1);let ce=QO(k).normalize();if(Eu(ce,ke,b),!Z)for(let le=0;le<=a;le++){let xe=le/a,Ne=k.clone().multiplyScalar(xe).add(w);Eu(Ne,ke,x),f.push(x.x,x.y,x.z),v.push(b.x,b.y,b.z),m.push(ge,.5+x.y/i),de.push(g++)}if(P&&E?(X(de,ge,ke,U,l,E,1,!1),X(de,ge,ke,z,l,P,1,!0)):E?(X(de,ge,ke,U,l,E,1,!1),J(de,ke,E.x,0,1)):n||J(de,ke,e,O,1),d&&!Z){let le=QO(k).multiplyScalar(-1).normalize();Eu(le,ke,b);for(let xe=0;xe<=a;xe++){let Ne=xe/a,pt=k.clone().multiplyScalar(-Ne).add(F);Eu(pt,ke,x),f.push(x.x,x.y,x.z),v.push(b.x,b.y,b.z),m.push(ge,.5+x.y/i),de.push(g++)}}d&&!n&&de.push(de[0]),G.push(de)}for(let fe=0;fe<G.length-1;fe++)for(let de=0;de<G[0].length-1;de++){if(n&&d&&de==a)continue;let ge=G[fe][de],me=G[fe+1][de],ke=G[fe+1][de+1],ce=G[fe][de+1],le=f[ke*3+0],xe=f[ke*3+2];p.push(ge,me,ce),(le!=0||xe!=0)&&p.push(me,ke,ce)}o<Math.PI*2&&(pe(-1,G[0],s),pe(1,G[G.length-1],s+o)),this.setIndex(p),this.setAttribute("position",new ri(f,3)),this.setAttribute("normal",new ri(v,3)),this.setAttribute("uv",new ri(m,2));function X(fe,de,ge,me,ke,ce,le,xe){for(let Ne=0;Ne<c+1;Ne++){let pt=Ne/c,at=le<0?pt:1-pt;xe&&(at-=1),at*=me;let Oe=new Ce(Math.sin(at),Math.cos(at)*le),Ye=Oe.clone().multiplyScalar(ke).add(ce);Eu(Ye,ge,x),f.push(x.x,x.y,x.z),Eu(Oe,ge,b),v.push(b.x,b.y,b.z),m.push(de,.5+x.y/i),fe.push(g++)}}function J(fe,de,ge,me,ke){let ce=new V,le=new Ce,xe=[ge,me];ke<0&&xe.reverse();for(let Ne of xe)le.set(Ne,y*ke),Eu(le,de,ce),f.push(ce.x,ce.y,ce.z),v.push(0,ke,0),m.push(.5,.5),fe.push(g++)}function pe(fe,de,ge){let me=new Ce(Math.sin(ge),Math.cos(ge)),ke=new Ce(-Math.cos(ge),Math.sin(ge)),ce=new V,le=fe<0?(pt,at,Oe)=>p.push(pt,at,Oe):(pt,at,Oe)=>p.push(pt,Oe,at),xe=new Ce((e+t+O+D)/4,0);Eu(xe,me,ce),f.push(ce.x,ce.y,ce.z),v.push(ke.x,0,ke.y),m.push(.5,.5);let Ne=g++;for(let pt of de){let at=f.slice(pt*3,pt*3+3);f.push(...at),v.push(ke.x,0,ke.y);let Oe=m.slice(pt*2,pt*2+2);m.push(...Oe),g++}for(let pt=Ne+1;pt<g-1;pt++)le(Ne,pt,pt+1);le(Ne,g-1,Ne+1)}}},zue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},e.parameters);return i.thetaLength=li.clamp(i.thetaLength,0,360),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,depth:i,height:r,radialSegments:a,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:l,cornerRadiusTop:u,cornerRadiusBottom:c,cornerSegments:d}=e.parameters,h;return l===0?(h=new Mi,h.setAttribute("position",new ri([],3))):u>0||c>0||l<360?h=new wN(0,t/2,r,a,n,s,o,l*Math.PI/180,u,c,d,0,!0):h=new LE(t/2,r,a,n,s),h.scale(1,1,i/t),Object.assign(h,{userData:{...e,type:"ConeGeometry"}})}},Rue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,widthSegments:a,heightSegments:n,depthSegments:s,cornerRadius:o,cornerSegments:l}=e.parameters,u;return o===0?u=new ko(t,i,r,a,n,s):u=new Nue(t,i,r,a,n,s,o,l),Object.assign(u,{userData:{...e,type:"CubeGeometry"}})}},Zw=Math.PI/2,Nue=class extends Mi{constructor(e=1,t=1,i=1,r=1,a=1,n=1,s=0,o=4){super(),this.type="BoxGeometry",r=Math.floor(r),a=Math.floor(a),n=Math.floor(n),o=Math.floor(o),s=Math.min(s,e/2,t/2,i/2);let l=[],u=[],c=[],d=[],h=0;p("z","y","x",-1,-1,i,t,e,n,a),p("z","y","x",1,-1,i,t,-e,n,a),p("x","z","y",1,1,e,i,t,r,n),p("x","z","y",1,-1,e,i,-t,r,n),p("x","y","z",1,-1,e,t,i,r,a),p("x","y","z",-1,-1,e,t,-i,r,a),s>0&&(f("z","y","x",-1,-1,1,i,t,e,n),f("z","y","x",1,-1,-1,i,t,e,n),f("z","y","x",-1,1,-1,i,t,e,n),f("z","y","x",1,1,1,i,t,e,n),f("x","y","z",-1,-1,-1,e,t,i,r),f("x","y","z",1,-1,1,e,t,i,r),f("x","y","z",-1,1,1,e,t,i,r),f("x","y","z",1,1,-1,e,t,i,r),f("y","x","z",-1,-1,1,t,e,i,a),f("y","x","z",1,-1,-1,t,e,i,a),f("y","x","z",1,1,1,t,e,i,a),f("y","x","z",-1,1,-1,t,e,i,a),v(1,1,1),v(-1,1,1),v(1,-1,1),v(-1,-1,1),v(1,1,-1),v(-1,1,-1),v(1,-1,-1),v(-1,-1,-1)),this.setIndex(l),this.setAttribute("position",new ri(u,3)),this.setAttribute("normal",new ri(c,3)),this.setAttribute("uv",new ri(d,2));function p(m,g,y,b,x,S,w,E,M,P){let A=(S-2*s)/M,k=(w-2*s)/P,I=S/2-s,O=w/2-s,D=E/2,F=M+1,U=P+1,z=0,B=new V;for(let W=0;W<U;W++){let R=W*k-O;for(let $=0;$<F;$++){let q=$*A-I;B[m]=q*b,B[g]=R*x,B[y]=D,u.push(B.x,B.y,B.z),B[m]=0,B[g]=0,B[y]=E>0?1:-1,c.push(B.x,B.y,B.z),d.push($/M),d.push(1-W/P),z+=1}}for(let W=0;W<P;W++)for(let R=0;R<M;R++){let $=h+R+F*W,q=h+R+F*(W+1),Z=h+(R+1)+F*(W+1),G=h+(R+1)+F*W;l.push($,q,G),l.push(q,Z,G)}h+=z}function f(m,g,y,b,x,S,w,E,M,P){let A=(w-2*s)/P,k=w/2-s,I=E/2-s,O=M/2,D=P+1,F=0,U=new V,z=new V;for(let B=0;B<o+1;B++){let W=B/o*Zw,R=Math.sin(W)*s,$=(1-Math.cos(W))*s,q=Math.sin(W),Z=Math.cos(W);U[g]=(I+R)*x,U[y]=(O-$)*S,z[m]=0,z[g]=q*Math.sign(U[g]),z[y]=Z*Math.sign(U[y]);for(let G=0;G<D;G++){let X=G*A-k;U[m]=X*b,u.push(U.x,U.y,U.z),c.push(z.x,z.y,z.z),d.push(G/P),d.push(0),F+=1}}for(let B=0;B<o;B++)for(let W=0;W<P;W++){let R=h+W+D*B,$=h+W+D*(B+1),q=h+(W+1)+D*(B+1),Z=h+(W+1)+D*B;l.push(R,$,Z),l.push($,q,Z)}h+=F}function v(m,g,y){let b=new V,x=new V(e/2,t/2,i/2);x.subScalar(s);let S=[],w=m*g*y>0?(M,P,A)=>l.push(M,P,A):(M,P,A)=>l.push(M,A,P);for(let M=0;M<=o;M++){let P=[],A=Zw*(1-M/o),k=Math.cos(A),I=Math.sin(A),O=0;for(let D=0;D<=M;D++){let F=Math.cos(O),U=Math.sin(O);b.x=k*F,b.y=I,b.z=k*U;let z=x.clone().addScaledVector(b,s);u.push(m*z.x,g*z.y,y*z.z),c.push(m*b.x,g*b.y,y*b.z),d.push(0,0),P.push(h++),O+=Zw/M}S.push(P)}let E=S.length-1;for(let M=0;M<E;M++){let P=S[M],A=S[M+1],k=P.length-1;w(P[0],A[1],A[0]);for(let I=1;I<=k;I++)w(P[I-1],P[I],A[I]),w(P[I],A[I+1],A[I])}}}},mA=class extends Mi{constructor(e=[],t=[],i="",r=1,a=.2,n=4){super(),this.type="PolyhedronGeometryRound";let s=[],o=[],l=[];u(),c(),this.setAttribute("position",new ri(s,3)),this.setAttribute("normal",new ri(l,3)),this.setAttribute("uv",new ri(o,2));return;function u(){var d;a=Math.min(1-1e-5,a),a==0&&(n=0);let h={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[i],p=new V,f=p.clone(),v=new xn,m=a*r,g=r-m,y=n+1,b=new V,x=(B,W)=>b.subVectors(B,W).normalize(),S=(B,W)=>Array(B).fill(void 0).map(W),w=S(e.length/3,(B,W)=>new V().fromArray(e,W*3).setLength(r)),E=[],M=1e6;for(let B=0;B<w.length;B++){let W=w[B],R=[],$,q,Z,G=1e10,X=-1;for(;(X=t.indexOf(B,X+1))!=-1;){let de=X-X%3;$=t[de+(X+1)%3],q=t[de+(X+2)%3],Z=W.distanceToSquared(w[$]),G=Math.min(G,Z),R.push([$,q,Z])}G+=1e-6;let J=[],pe=0,fe=R.length;for(let de=0;de<fe;de++){[$,q,Z]=R[pe];let ge=((d=E[$])==null?void 0:d.includes(B))==!0;Z<=G&&J.push($+ +ge*M),pe=R.findIndex(me=>me[0]==q)}E.push(J)}let P=[];{let B=0,W=0,R,$,q=h==3;for(let Z=0;Z<=n;Z++){R=Z*(Z+1)/2,$=(Z+1)*(Z+2)/2;for(let G=0;G<n-Z;G++)[B,W]=[R+G+Z+2,$+G+Z+3],P.push(R,$,...q?[W,R]:[B,$],W,B),[R,$]=[B,W];P.push(R,$,R+n+2)}}let A=p.clone(),k=p.clone(),I=p.clone(),O=p.clone(),D=p.clone(),F=[],U=S(w.length,()=>S(h,()=>p.clone()));for(let B=0;B<w.length;B++){p.copy(w[B]).normalize(),A.copy(p).multiplyScalar(g);let W=E[B];for(let J=0;J<W.length;J++){let pe=W[J],fe=W[(J+1)%h];v.setFromPointsAndIndices(w,B,pe%M,fe%M),v.b.sub(v.a).setLength(1e10).add(v.a),v.c.sub(v.a).setLength(1e10).add(v.a),v.closestPointToPoint(A,U[B][J])}let R=[],$=[],q=[],Z=new V;n==0&&[...U[B]].reduce((J,pe)=>J.add(pe),Z).multiplyScalar(1/h);for(let J=0;J<h;J++){let pe=[],fe=(J-1+h)%h,de=U[B][fe],ge=U[B][J];p.copy(de).sub(A),f.copy(ge).sub(A);let me=A.angleTo(p),ke=p.angleTo(f),ce=Math.cos(me)*m;n==0?k.copy(Z):k.copy(A).setLength(g+ce),$.push(ce);let le=[k,de,ge];for(let xe=0;xe<2;xe++){let Ne=le[xe],pt=le[xe+1];O.subVectors(Ne,A),D.subVectors(pt,A),I.crossVectors(O,D).normalize();for(let at=0;at<y;at++){let Oe=[me,ke][xe]*at/y;p.copy(O).applyAxisAngle(I,Oe).add(A),R.push(p.clone()),xe&&(x(p,A),pe.push([at==0?Ne:p.clone(),b.clone()]))}xe&&(x(pt,A),pe.push([pt,b.clone()]))}q.push(pe)}F.push(q);let G=2*y,X=2;for(let J=0;J<h;J++){let pe=G*J,fe=G*((J+1)%h),de=[R[pe]];for(let me=1;me<y;me++){O=R[pe+me],D=R[fe+me],de.push(O);for(let ke=1,ce=me-X+1;ke<=ce;ke++)p.lerpVectors(O,D,ke/(ce+1)),p.sub(A).setLength($[J]).add(A),de.push(p.clone());de.push(D)}for(let me=0;me<y;me++)de.push(R[me+y+pe]);de.push(R[fe+y]);let ge=P.map(me=>de[me]);s.push(...ge.map(me=>[me.x,me.y,me.z]).flat()),l.push(...ge.map(me=>(x(me,A),[b.x,b.y,b.z])).flat())}}let z=[];for(let B=0;B<E.length;B++)for(let W=0;W<h;W++){let R=E[B][W];if(R<M){let $=E[R].findIndex(G=>G%M==B),q=F[B][W],Z=F[R][$];for(let G=0;G<y;G++){let X=q[G],J=Z[y-G],pe=q[G+1],fe=Z[y-(G+1)];[X,J,pe,pe,J,fe].forEach(de=>{s.push(de[0].x,de[0].y,de[0].z),l.push(de[1].x,de[1].y,de[1].z)})}z.push(q[0][0],Z[y][0],q[y][0],Z[0][0])}}for(;z.length;){let B,W,R,$;[B,W]=z.splice(0,2);let q=[B];for(;B!=W;)q.push(W),R=z.indexOf(W),$=R%2,W=z.splice(R-$,2)[1-$];b.subVectors(q[0],q[1]).cross(p.subVectors(q[0],q[2])).normalize();let Z=b.dot(q[0])<0;Z&&b.negate();for(let G=1;G<=q.length-2;G++)[q[G+ +Z],q[G+1-+Z],q[0]].forEach(X=>{s.push(X.x,X.y,X.z),l.push(b.x,b.y,b.z)})}}function c(){let d=new V;for(let w=0;w<s.length;w+=3){d.x=s[w+0],d.y=s[w+1],d.z=s[w+2];let E=x(d)/2/Math.PI+.5,M=S(d)/Math.PI+.5;o.push(E,1-M)}let h=new V,p=new V,f=new V,v=new V,m=new Ce,g=new Ce,y=new Ce,b=(w,E,M,P)=>{P<0&&w.x===1&&(o[E]=w.x-1),M.x===0&&M.z===0&&(o[E]=P/2/Math.PI+.5)};for(let w=0,E=0;w<s.length;w+=9,E+=6){h.set(s[w+0],s[w+1],s[w+2]),p.set(s[w+3],s[w+4],s[w+5]),f.set(s[w+6],s[w+7],s[w+8]),m.set(o[E+0],o[E+1]),g.set(o[E+2],o[E+3]),y.set(o[E+4],o[E+5]),v.copy(h).add(p).add(f).divideScalar(3);let M=x(v);b(m,E+0,h,M),b(g,E+2,p,M),b(y,E+4,f,M)}for(let w=0;w<o.length;w+=6){let E=o[w+0],M=o[w+2],P=o[w+4],A=Math.max(E,M,P),k=Math.min(E,M,P);A>.9&&k<.1&&(E<.2&&(o[w+0]+=1),M<.2&&(o[w+2]+=1),P<.2&&(o[w+4]+=1))}function x(w){return Math.atan2(w.z,-w.x)}function S(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}}static fromJSON(e){return new mA(e.vertices,e.indices,e.radius,e.corner,e.cornerSides)}},Vue=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:a,corner:n,cornerSides:s}=e.parameters,o=a===0&&n!==0?new xN(t*.5,n,s):new AR(t*.5,a);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"DodecahedronGeometry"}})}},xN=class extends mA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,a=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-r,0,-a,r,0,a,-r,0,a,r,-a,-r,0,-a,r,0,a,-r,0,a,r,0,-r,0,-a,r,0,-a,-r,0,a,r,0,a],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],o="DodecahedronGeometry";super(n,s,o,e,t,i),this.type=o}static fromJSON(e){return new xN(e.radius,e.corner,e.cornerSides)}},Kp=1e-12,vA=class{constructor(e){this.position=new Ce,this.startPosition=new Ce,this.uuid=li.generateUUID(),this.position=e.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(e){this.position.copy(this.startPosition).add(e)}copy(e){return this.position.copy(e.position),this.startPosition.copy(e.startPosition),this}clone(){return new vA(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},H2=class extends vA{constructor(e){super(e.position),this.parent=e}copy(e){return super.copy(e),this}clone(){return new H2(this.parent).copy(this)}},Oh=class extends vA{constructor(e,t){super(t),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=e,this.controls.push(new H2(this),new H2(this))}static create(e,t){let i=new Oh(e,new Ce(...t.position));return i.controls[0].position.set(...t.controlPrevious.position),i.controls[1].position.set(...t.controlNext.position),i.roundness=t.roundness,i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored,i}getOppositeControl(e){let t=this.controls.indexOf(e);return t===0?this.controls[1]:t===1?this.controls[0]:null}applyOffsetToControls(e,t=1){for(let i=0,r=this.controls.length;i<r;i++){let a=this.controls[i];this.position.distanceTo(a.position)<=t?a.position.copy(this.position):a.applyOffset(e)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(e){return super.copy(e),this.controls[0].copy(e.controls[0]),this.controls[1].copy(e.controls[1]),this.roundness=e.roundness,this.uuid=e.uuid,this}clone(){return new Oh(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var e,t;let i=(e=this.curveBefore)==null?void 0:e.getTangentAt(1),r=(t=this.curveAfter)==null?void 0:t.getTangentAt(0);return[i,r]}computeNormals(e=new Ce,t=new Ce){let[i,r]=this.computeTangents();return i&&r&&(JO(i,e),JO(r,t)),[e,t]}computeTangent(e=new Ce){let[t,i]=this.computeTangents();return t&&i&&e.copy(t).add(i).normalize(),e}computeNormal(e=new Ce){let[t,i]=this.computeNormals();return e.copy(t).add(i).normalize(),e}};function JO(e,t=new Ce){let i=e.length();return t.set(-e.y/i,e.x/i)}var gA=e=>e,Mp=new Ce,Jb=new Ce,Fue=new Ce,jue=new Ce,$ue=new Ce,Uue=new Ce,SN=new V,CN=new V;function Wue(e){let t=new Ce;t.addVectors(e.v0,Mp.subVectors(e.v1,e.v0).multiplyScalar(2/3));let i=new Ce;return i.addVectors(e.v2,Jb.subVectors(e.v1,e.v2).multiplyScalar(2/3)),new wo(e.v0,t,i,e.v2)}function bf(e,t,i=Number.EPSILON){return Math.abs(e-t)<i}function Hue(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function Gue(e,t,i=Number.EPSILON){return e.distanceTo(t)<i}function _N(e,t,i){let r=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),a=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)),n=Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2));return Math.acos((a*a+r*r-n*n)/(2*a*r))}function que(e,t,i){return tD(e,t)&&tD(t,i)&&G2(e.position,t.position,i.position)}function G2(e,t,i){return Mp.copy(t).sub(e).cross(Jb.copy(i).sub(e))===0}function Yue(e,t,i,r,a){let n=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),s=(e.y+t.y)/2,o=(e.x+t.x)/2,l=Math.sqrt(Math.pow(i,2)-Math.pow(n/2,2))*(e.y-t.y)/n,u=Math.sqrt(Math.pow(i,2)-Math.pow(n/2,2))*(t.x-e.x)/n;return r.set(o+l,s+u),a.set(o-l,s-u),[r,a]}function Xue(e,t,i){let r=e.distanceTo(i),a=t.distanceTo(i);return r<a?t:e}function Kue(e,t,i,r,a,n){let s=t.x-e.x,o=t.y-e.y,l=i.x-e.x,u=i.y-e.y,c=Math.sqrt((s+l)*(s+l)+(o+u)*(o+u)),d;return _N(t,e,i)>Math.PI&&(c*=-1),bf(u,o)?d=(o+u)*(r/c-.5)*8/3/(s-l):d=(s+l)*(r/c-.5)*8/3/(u-o),a.set(t.x-d*o,t.y+d*s),n.set(i.x+d*u,i.y-d*l),[a,n]}function eD(e,t){return e.position.equals(e.controls[1].position)&&t.position.equals(t.controls[0].position)}function tD(e,t){return G2(e.position,e.controls[1].position,t.position)&&G2(e.position,t.controls[0].position,t.position)}function Zue(e,t,i,r,a=.5){let n=Mp.subVectors(t,e).multiplyScalar(a).add(e),s=Jb.subVectors(i,t).multiplyScalar(a).add(t),o=Fue.subVectors(r,i).multiplyScalar(a).add(i),l=n,u=jue.subVectors(s,n).multiplyScalar(a).add(n),c=$ue.subVectors(o,s).multiplyScalar(a).add(s),d=o,h=Uue.subVectors(c,u).multiplyScalar(a).add(u);return[e.x,e.y,l.x,l.y,u.x,u.y,h.x,h.y,c.x,c.y,d.x,d.y,r.x,r.y]}function Que(e,t,i=12,r=!0){let a=CN.set(0,0,0),n,s=0;for(let o=0;o<t.length;o++){let l=gA(t[o]),u=Mp,c=td(l,i);for(let d=0;d<=c;d++)if(l instanceof wo||l instanceof lc||l instanceof Mo){if(l.getPoint(d/c,u),a.set(u.x,u.y,0),n!==void 0&&Gue(n,a))continue;n===void 0&&(n=SN),n.copy(a),e.setXYZ(s,a.x,a.y,a.z),s++}}return r&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),e}function Jue(e,t,i,r=12,a=!0){let n=CN.set(0,0,0),s=0,o=[];for(let l=0;l<t.length;l++){if(i[l]===!1)continue;let u,c=gA(t[l]),d=Mp,h=td(c,r);o.push(h);for(let p=0;p<=h;p++)if(c instanceof wo||c instanceof lc||c instanceof Mo){if(c.getPoint(p/h,d),n.set(d.x,d.y,0),u?.equals(n))continue;u===void 0?u=SN:(e.setXYZ(s,u.x,u.y,u.z),s++,e.setXYZ(s,n.x,n.y,n.z),s++),u.copy(n)}}return a&&s>1&&!(e.getX(s-1)===e.getX(0)&&e.getY(s-1)===e.getY(0)&&e.getZ(s-1)===e.getZ(0))&&(e.setXYZ(s,e.getX(0),e.getY(0),e.getZ(0)),s++),o}function iD(e,t=12,i=!1){let r=[];for(let a=0,n=e.length;a<n;a++){let s=e[a],o=0;if(i&&s.roundedCurveCorner!==void 0){let l=td(s.roundedCurveCorner,t)*.5;a>0&&(r[a-1]+=l),o+=l}s.curveAfter!==void 0&&(o+=td(s.curveAfter,t)),r.push(o)}return e.length>0&&i&&e[0].roundedCurveCorner!==void 0&&(r[e.length-1]+=td(e[0].roundedCurveCorner,t)*.5),r}function td(e,t=12){return e&&e instanceof Nb?t*2:e&&(e instanceof Mo||e instanceof _R)?1:e&&e instanceof DE?t*e.points.length:t}function ece(e,t,i=12,r=!0){let a,n=0;for(let s=0;s<t.length;s++){let o=gA(t[s]),l=td(o,i),u=Mp;for(let c=0;c<=l;c++)if(o instanceof wo||o instanceof lc||o instanceof Mo){if(o.getPoint(c/l,u),a!==void 0&&Hue(a,u,Kp))continue;a===void 0&&(a=Jb),a.copy(u),e.push(u.x,u.y),n++}}return bf(e[0],e[e.length-2],Kp)&&bf(e[1],e[e.length-1],Kp)&&(e.pop(),e.pop()),r&&n>1&&!(bf(e[n-1],e[1],Kp)&&bf(e[n-2],e[0],Kp))&&(e.push(e[0],e[1]),n++),e}var Qw=new Ce,tce=new Ce,ice=new Ce,rce=new Ce,ace=new Ce,nce=new Ce,da=class extends hy{constructor(e=100,t=100){super(),this.points=[],this.shapeHoles=[],this.plane=new hs(new V(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=li.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=e,this._height=t}static createFromState(e,t,i){let r=new da;return r.isClosed=e.isClosed,r.points=e.points.map(a=>Oh.create(a.id,a.data)),typeof e.roundness=="number"&&(r.roundness=e.roundness),r.shapeHoles=e.shapeHoles.map(a=>da.createFromState(a)),t!==void 0&&i!==void 0&&r.applySize(t,i),r.update(),r}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(e){if(this._roundness!==e){this._roundness=e;for(let t=0,i=this.points.length;t<i;t++)this.points[t].roundness=e;this.needsUpdate=!0}}getPointsIndexesByIds(e){return e.map(t=>this.getPointIndexById(t)).filter(t=>t>=0)}getPointIndexById(e){let t=this.points.length,i=this.points.findIndex(r=>r.uuid===e);if(i<0){let r=t;for(let a=0,n=this.shapeHoles.length;a<n;a++){let s=this.shapeHoles[a],o=s.points.length,l=s.getPointIndexById(e);if(l<0)r+=o;else return l+r}}return i}getLineIndexById(e){return this.getPointIndexById(e)}getBezierPoint(e){if(e<=this.points.length-1)return this.points[e];if(this.shapeHoles.length>0){let t=this.points.length;for(let i=0,r=this.shapeHoles.length;i<r;i++){let a=this.shapeHoles[i],n=e-t;if(n<=a.points.length-1)return a.points[n];t+=a.points.length}}throw new Error("This shape does not have a point for this index: "+e)}getBezierPointIndex(e){let t=this.points.indexOf(e);if(t>=0)return t;if(t=this.points.length,this.shapeHoles.length>0)for(let i=0,r=this.shapeHoles.length;i<r;i++){let a=this.shapeHoles[i],n=a.points.indexOf(e);if(n>=0)return t+n;t+=a.points.length}return-1}getAllPoints(){let e=[].concat(...this.shapeHoles.map(t=>t.points));return[...this.points,...e]}applySize(e,t){e===0&&(e=.001),t===0&&(t=.001),this._width=e,this._height=t}applyScale(e,t){let i=Qw.set(e,t);for(let r=0,a=this.points.length;r<a;r++){let n=this.points[r];n.position.multiply(i),n.controls[0].position.multiply(i),n.controls[1].position.multiply(i)}for(let r=0,a=this.shapeHoles.length;r<a;r++)this.shapeHoles[r].applyScale(e,t);this._update()}createPoint(e,t=0,i=li.generateUUID()){let r;e instanceof Ce?r=e:r=new Ce(e,t);let a=new Oh(i,r);return a.roundness=this.roundness,a}addPoint(e){this.points.push(e),this.needsUpdate=!0}addPointAt(e,t){this.points.splice(t,0,e),this.needsUpdate=!0}getPointByUuid(e){for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(r.uuid===e)return r}for(let t=0,i=this.shapeHoles.length;t<i;t++){let r=this.shapeHoles[t].getPointByUuid(e);if(r)return r}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(e){let t=this.points.indexOf(e);t>=0&&this.points.splice(t,1),this.needsUpdate=!0}removePointById(e){let t=this.points.find(i=>i.uuid===e);t&&this.removePoint(t)}update(){for(let e=0,t=this.shapeHoles.length;e<t;e++)this.shapeHoles[e].update();this._update()}extractShapePointsToBuffer(e,t=12,i=!1){this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t);let r=i?this.roundedCurveDivisions:this.curveDivisions;return Que(e,i?this.roundedCurves:this.curves,t,this.autoClose),r.reduce((a,n)=>a+n,0)+1}computeCurveDivisions(e=12){return this.curveDivisions=iD(this.points,e,!1),this.roundedCurveDivisions=iD(this.points,e,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(e,t,i=12){return Jue(e,this.curves,t,i,this.autoClose).reduce((r,a)=>r+a,0)*2}extractShapePointsToFlatArray(e,t=12){return this.subdivision=t,this.curveDivisions===void 0&&this.computeCurveDivisions(t),ece(e,this.roundedCurves,t,this.autoClose)}getCurveIndexFromVertexId(e,t=!1){let i=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let r=t?this.roundedCurveDivisions:this.curveDivisions,a=0;t&&this.points[0].roundedCurveCorner!==void 0&&(a=td(this.points[0].roundedCurveCorner,this.subdivision)*.5);let n=e-a;n<0&&(n+=r.reduce((s,o)=>s+o,0));for(let s=0,o=r.length;s<o;s++){let l=r[s];if(n<i+l)return[s,(n-i+1)/l];i+=l}return[0,1]}getCurveT(e,t,i){let r=this.points[e],a=this.points[e>=this.points.length-1?0:e+1],n=this.curveDivisions,s=n[e];if(eD(r,a)){let l=r.position.distanceTo(a.position);return r.position.distanceTo(Qw.set(i.x,i.y))/l}let o=0;for(let l=0;l<e;l++)o+=n[l];return(t-o)/s}dispose(){}_applyCurveForPoint(e,t){eD(t,e)?this.lineTo(e.position.x,e.position.y):this.bezierCurveTo(t.controls[1].position.x,t.controls[1].position.y,e.controls[0].position.x,e.controls[0].position.y,e.position.x,e.position.y);let i=this.curves[this.curves.length-1];e.curveBefore=i,t.curveAfter=i;let r=i.clone();e.roundedCurveBefore=r,t.roundedCurveAfter=r,e.roundedCurveCorner=void 0,this.roundedCurves.push(r)}_update(){if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let t=0,i=this.points.length;t<i;t++){let r=this.points[t];if(t===0)this.moveTo(r.position.x,r.position.y);else{let a=this.points[t-1];this._applyCurveForPoint(r,a)}}let e=this.getLastPoint();if(e?.curveAfter&&(e.curveAfter=void 0),this.isClosed){let t=this.points[0],i=this.points[this.points.length-1];this._applyCurveForPoint(t,i)}if(this.points.length>2){let t=0;for(let i=0,r=this.points.length;i<r;i++){let a=this.points[i],n=this.points[i-1]??this.points[this.points.length-1],s=this.points[i+1]??this.points[0],o=a.roundness,l=n&&s&&que(n,a,s);if(!a.controlsMoved()&&o>0&&!l){let u=a.curveBefore,c=a.curveAfter;if(u===void 0||c===void 0)continue;let d=a.roundedCurveBefore,h=a.roundedCurveAfter,p=u.getLength(),f=c.getLength(),v=Math.min(o,p*.499),m=Math.min(o,f*.499),g=Math.min(v,m),y=1-g/p,b=g/f,x=u.getPointAt(y,Qw),S=c.getPointAt(b,tce);this._subSplitCurve(u,d,y,x,void 0),this._subSplitCurve(c,h,b,void 0,S);let w;if(this.useCubicForRoundedCorners){let E=_N(x,a.position,S)/2,M=Math.tan(E)*x.distanceTo(a.position),[P,A]=Yue(x,S,M,ice,rce),k=Xue(P,A,a.position),[I,O]=Kue(k,x,S,M,ace,nce);w=new wo(x.clone(),I.clone(),O.clone(),S.clone())}else w=new lc(x.clone(),a.position.clone(),S.clone());a.roundedCurveCorner=w,this.roundedCurves.splice(i+t,0,w),t++}}}}_subSplitCurve(e,t,i,r,a){if(e instanceof Mo)r!==void 0&&t.v2.copy(r),a!==void 0&&t.v1.copy(a);else{let n=e,s=t,o=n.getUtoTmapping(i,0),l=Zue(n.v0,n.v1,n.v2,n.v3,o);return r!==void 0&&(s.v0.set(l[0],l[1]),s.v1.set(l[2],l[3]),s.v2.set(l[4],l[5]),s.v3.set(l[6],l[7])),a!==void 0&&(s.v0.set(l[6],l[7]),s.v1.set(l[8],l[9]),s.v2.set(l[10],l[11]),s.v3.set(l[12],l[13])),s}return t}clone(){let e=new da(this._width,this._height);return e.points=this.points.map(t=>t.clone()),e.isClosed=this.isClosed,e.roundness=this.roundness,e.isMesh2D=this.isMesh2D,e.shapeHoles=this.shapeHoles.map(t=>t.clone()),e}toJSON(){return{points:this.points.reduce((e,t)=>e.concat(t.toJSON()),[]),shapeHoles:this.shapeHoles.map(e=>e.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(e){var t;this.points=[],this.pointIDs=0;let i=e.points.length/7;for(let r=0;r<i;r++){let a=r*7,n=e.points[a+0],s=e.points[a+1],o=e.points[a+2],l=e.points[a+3],u=e.points[a+4],c=e.points[a+5],d=e.points[a+6],h=new Oh(li.generateUUID(),new Ce(n,s));h.controls[0].position.set(o,l),h.controls[1].position.set(u,c),h.roundness=d,this.points.push(h)}return this.shapeHoles=(t=e.shapeHoles)!=null&&t.length?e.shapeHoles.map(r=>{let a=new da;return a.fromJSON(r),a}):[],this.isClosed=e.isClosed,this._roundness=e.roundness,this._update(),this}fromShape(e,t=!1){this.isText=t;let i=(a,n)=>{n instanceof wo&&n.v3.equals(a.position)&&a.controls[0].position.copy(n.v2)},r=a=>{let n=[],s,o;for(s=0,o=a.length;s<o;s++)a[s]instanceof lc&&(a[s]=Wue(a[s]));for(s=0,o=a.length;s<o;s++){let c=a[s],d=s>0?a[s-1]:null,h;c instanceof wo?(h=this.createPoint(c.v0),h.controls[1].position.copy(c.v1)):c instanceof Mo&&(h=this.createPoint(c.v1)),h!==void 0&&(d!==null&&i(h,d),n.push(h))}let l=a[a.length-1],u=!1;return l instanceof wo?l.v3.equals(n[0].position)&&(n[0].controls[0].position.copy(l.v2),u=!0):l instanceof Mo&&l.v2.equals(n[0].position)&&(u=!0),this.isClosed=u,n};return this.points=r(e.curves),e instanceof hy&&(this.shapeHoles=e.holes.map(a=>{let n=new da;return n.fromShape(a),n})),this.update(),this}updatePoint(e,t){let i=this.getPointByUuid(e);i&&(t.position!==void 0&&i.position.fromArray(t.position),t.roundness!==void 0&&(i.roundness=t.roundness),t.areControlsDirectionsMirrored!==void 0&&(i.areControlsDirectionsMirrored=t.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[0];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}updateNextControl(e,t){var i;let r=(i=this.getPointByUuid(e))==null?void 0:i.controls[1];r&&(t.position&&r.position.fromArray(t.position),this.needsUpdate=!0)}},q2=Math.PI*2;function Jw({x:e,y:t},i,r,a,n){return{x:e*i+a,y:t*r+n}}function sce(e,t){let i=t===1.5707963267948966?.551915024494:t===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(t/4),r=Math.cos(e),a=Math.sin(e),n=Math.cos(e+t),s=Math.sin(e+t);return[{x:r-a*i,y:a+r*i},{x:n+s*i,y:s-n*i},{x:n,y:s}]}function rD(e,t,i,r){let a=e*r-t*i<0?-1:1,n=Math.min(1,Math.max(-1,e*i+t*r));return a*Math.acos(n)}function oce(e,t,i,r,a,n,s,o,l,u){let c=Math.pow(a,2),d=Math.pow(n,2),h=Math.pow(s,2),p=Math.pow(o,2),f=c*d-c*p-d*h;f<0&&(f=0),f/=c*p+d*h,f=Math.sqrt(f)*(l===u?-1:1);let v=f*a/n*o,m=f*-n/a*s,g=v+(e+i)/2,y=m+(t+r)/2,b=(s-v)/a,x=(o-m)/n,S=(-s-v)/a,w=(-o-m)/n,E=rD(1,0,b,x),M=rD(b,x,S,w);return!u&&M>0&&(M-=q2),u&&M<0&&(M+=q2),{centerx:g,centery:y,ang1:E,ang2:M}}function lce({px:e,py:t,cx:i,cy:r,rx:a,ry:n,largeArcFlag:s,sweepFlag:o}){let l=[];if(a===0||n===0)return[];let u=(e-i)/2,c=(t-r)/2;if(u===0&&c===0)return[];a=Math.abs(a),n=Math.abs(n);let d=Math.pow(u,2)/Math.pow(a,2)+Math.pow(c,2)/Math.pow(n,2);d>1&&(a*=Math.sqrt(d),n*=Math.sqrt(d));let h=oce(e,t,i,r,a,n,u,c,s,o),{ang1:p,ang2:f}=h,{centerx:v,centery:m}=h,g=Math.abs(f)/(q2/4);Math.abs(1-g)<1e-7&&(g=1);let y=Math.max(Math.ceil(g),1);f/=y;for(let b=0;b<y;b++)l.push(sce(p,f)),p+=f;return l.map(b=>{let{x,y:S}=Jw(b[0],a,n,v,m),{x:w,y:E}=Jw(b[1],a,n,v,m),{x:M,y:P}=Jw(b[2],a,n,v,m);return{x1:x,y1:S,x2:w,y2:E,x:M,y:P}})}var Dr;(function(e){e[e.ODD=0]="ODD",e[e.NONZERO=1]="NONZERO",e[e.POSITIVE=2]="POSITIVE",e[e.NEGATIVE=3]="NEGATIVE",e[e.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(Dr||(Dr={}));var Aa;(function(e){e[e.POLYGONS=0]="POLYGONS",e[e.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",e[e.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(Aa||(Aa={}));function Vi(e,t){if(!e)throw t||"Assertion Failed!"}var Di=function(){function e(){}return e.vertEq=function(t,i){return t.s===i.s&&t.t===i.t},e.vertLeq=function(t,i){return t.s<i.s||t.s===i.s&&t.t<=i.t},e.transLeq=function(t,i){return t.t<i.t||t.t===i.t&&t.s<=i.s},e.edgeGoesLeft=function(t){return e.vertLeq(t.Dst,t.Org)},e.edgeGoesRight=function(t){return e.vertLeq(t.Org,t.Dst)},e.vertL1dist=function(t,i){return Math.abs(t.s-i.s)+Math.abs(t.t-i.t)},e.edgeEval=function(t,i,r){Vi(e.vertLeq(t,i)&&e.vertLeq(i,r));var a=i.s-t.s,n=r.s-i.s;return a+n>0?a<n?i.t-t.t+(t.t-r.t)*(a/(a+n)):i.t-r.t+(r.t-t.t)*(n/(a+n)):0},e.edgeSign=function(t,i,r){Vi(e.vertLeq(t,i)&&e.vertLeq(i,r));var a=i.s-t.s,n=r.s-i.s;return a+n>0?(i.t-r.t)*a+(i.t-t.t)*n:0},e.transEval=function(t,i,r){Vi(e.transLeq(t,i)&&e.transLeq(i,r));var a=i.t-t.t,n=r.t-i.t;return a+n>0?a<n?i.s-t.s+(t.s-r.s)*(a/(a+n)):i.s-r.s+(r.s-t.s)*(n/(a+n)):0},e.transSign=function(t,i,r){Vi(e.transLeq(t,i)&&e.transLeq(i,r));var a=i.t-t.t,n=r.t-i.t;return a+n>0?(i.s-r.s)*a+(i.s-t.s)*n:0},e.vertCCW=function(t,i,r){return t.s*(i.t-r.t)+i.s*(r.t-t.t)+r.s*(t.t-i.t)>=0},e.interpolate=function(t,i,r,a){return t=t<0?0:t,r=r<0?0:r,t<=r?r===0?(i+a)/2:i+(a-i)*(t/(t+r)):a+(i-a)*(r/(t+r))},e.intersect=function(t,i,r,a,n){var s,o,l;e.vertLeq(t,i)||(l=t,t=i,i=l),e.vertLeq(r,a)||(l=r,r=a,a=l),e.vertLeq(t,r)||(l=t,t=r,r=l,l=i,i=a,a=l),e.vertLeq(r,i)?e.vertLeq(i,a)?(s=e.edgeEval(t,r,i),o=e.edgeEval(r,i,a),s+o<0&&(s=-s,o=-o),n.s=e.interpolate(s,r.s,o,i.s)):(s=e.edgeSign(t,r,i),o=-e.edgeSign(t,a,i),s+o<0&&(s=-s,o=-o),n.s=e.interpolate(s,r.s,o,a.s)):n.s=(r.s+i.s)/2,e.transLeq(t,i)||(l=t,t=i,i=l),e.transLeq(r,a)||(l=r,r=a,a=l),e.transLeq(t,r)||(l=t,t=r,r=l,l=i,i=a,a=l),e.transLeq(r,i)?e.transLeq(i,a)?(s=e.transEval(t,r,i),o=e.transEval(r,i,a),s+o<0&&(s=-s,o=-o),n.t=e.interpolate(s,r.t,o,i.t)):(s=e.transSign(t,r,i),o=-e.transSign(t,a,i),s+o<0&&(s=-s,o=-o),n.t=e.interpolate(s,r.t,o,a.t)):n.t=(r.t+i.t)/2},e}(),Zp=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return e}(),Xv=function(){function e(t){this.side=t,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(e.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(t){this.Sym.Lface=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(t){this.Sym.Org=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(t){this.Sym.Lnext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(t){this.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(t){this.Lnext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(t){this.Sym.Onext=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(t){this.Sym.Onext.Sym=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(t){this.Sym.Lnext.Sym=t},enumerable:!0,configurable:!0}),e}(),uh=function(){function e(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return e}(),aD=function(){function e(){var t=new uh,i=new Zp,r=new Xv(0),a=new Xv(1);t.next=t.prev=t,t.anEdge=null,i.next=i.prev=i,r.next=r,r.Sym=a,a.next=a,a.Sym=r,this.vHead=t,this.fHead=i,this.eHead=r,this.eHeadSym=a}return e.prototype.makeEdge_=function(t){var i=new Xv(0),r=new Xv(1);t.Sym.side<t.side&&(t=t.Sym);var a=t.Sym.next;return r.next=a,a.Sym.next=i,i.next=t,t.Sym.next=r,i.Sym=r,i.Onext=i,i.Lnext=r,i.Org=null,i.Lface=null,i.winding=0,i.activeRegion=null,r.Sym=i,r.Onext=r,r.Lnext=i,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,i},e.prototype.splice_=function(t,i){var r=t.Onext,a=i.Onext;r.Sym.Lnext=i,a.Sym.Lnext=t,t.Onext=a,i.Onext=r},e.prototype.makeVertex_=function(t,i,r){var a=t;Vi(a,"Vertex can't be null!");var n=r.prev;a.prev=n,n.next=a,a.next=r,r.prev=a,a.anEdge=i;var s=i;do s.Org=a,s=s.Onext;while(s!==i)},e.prototype.makeFace_=function(t,i,r){var a=t;Vi(a,"Face can't be null");var n=r.prev;a.prev=n,n.next=a,a.next=r,r.prev=a,a.anEdge=i,a.trail=null,a.marked=!1,a.inside=r.inside;var s=i;do s.Lface=a,s=s.Lnext;while(s!==i)},e.prototype.killEdge_=function(t){t.Sym.side<t.side&&(t=t.Sym);var i=t.next,r=t.Sym.next;i.Sym.next=r,r.Sym.next=i},e.prototype.killVertex_=function(t,i){var r=t.anEdge,a=r;do a.Org=i,a=a.Onext;while(a!==r);var n=t.prev,s=t.next;s.prev=n,n.next=s},e.prototype.killFace_=function(t,i){var r=t.anEdge,a=r;do a.Lface=i,a=a.Lnext;while(a!==r);var n=t.prev,s=t.next;s.prev=n,n.next=s},e.prototype.makeEdge=function(){var t=new uh,i=new uh,r=new Zp,a=this.makeEdge_(this.eHead);return this.makeVertex_(t,a,this.vHead),this.makeVertex_(i,a.Sym,this.vHead),this.makeFace_(r,a,this.fHead),a},e.prototype.splice=function(t,i){var r=!1,a=!1;if(t!==i){if(i.Org!==t.Org&&(a=!0,this.killVertex_(i.Org,t.Org)),i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(i,t),!a){var n=new uh;this.makeVertex_(n,i,t.Org),t.Org.anEdge=t}if(!r){var s=new Zp;this.makeFace_(s,i,t.Lface),t.Lface.anEdge=t}}},e.prototype.delete=function(t){var i=t.Sym,r=!1;if(t.Lface!==t.Rface&&(r=!0,this.killFace_(t.Lface,t.Rface)),t.Onext===t)this.killVertex_(t.Org,null);else if(t.Rface.anEdge=t.Oprev,t.Org.anEdge=t.Onext,this.splice_(t,t.Oprev),!r){var a=new Zp;this.makeFace_(a,t,t.Lface)}i.Onext===i?(this.killVertex_(i.Org,null),this.killFace_(i.Lface,null)):(t.Lface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev)),this.killEdge_(t)},e.prototype.addEdgeVertex=function(t){var i=this.makeEdge_(t),r=i.Sym;this.splice_(i,t.Lnext),i.Org=t.Dst;var a=new uh;return this.makeVertex_(a,r,i.Org),i.Lface=r.Lface=t.Lface,i},e.prototype.splitEdge=function(t){var i=this.addEdgeVertex(t),r=i.Sym;return this.splice_(t.Sym,t.Sym.Oprev),this.splice_(t.Sym,r),t.Dst=r.Org,r.Dst.anEdge=r.Sym,r.Rface=t.Rface,r.winding=t.winding,r.Sym.winding=t.Sym.winding,r.idx=t.idx,r.Sym.idx=t.Sym.idx,r},e.prototype.connect=function(t,i){var r=!1,a=this.makeEdge_(t),n=a.Sym;if(i.Lface!==t.Lface&&(r=!0,this.killFace_(i.Lface,t.Lface)),this.splice_(a,t.Lnext),this.splice_(n,i),a.Org=t.Dst,n.Org=i.Org,a.Lface=n.Lface=t.Lface,t.Lface.anEdge=n,!r){var s=new Zp;this.makeFace_(s,a,t.Lface)}return a},e.prototype.zapFace=function(t){var i=t.anEdge,r,a,n,s,o;a=i.Lnext;do r=a,a=r.Lnext,r.Lface=null,r.Rface===null&&(r.Onext===r?this.killVertex_(r.Org,null):(r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),n=r.Sym,n.Onext===n?this.killVertex_(n.Org,null):(n.Org.anEdge=n.Onext,this.splice_(n,n.Oprev)),this.killEdge_(r));while(r!=i);s=t.prev,o=t.next,o.prev=s,s.next=o},e.prototype.countFaceVerts_=function(t){var i=t.anEdge,r=0;do r++,i=i.Lnext;while(i!==t.anEdge);return r},e.prototype.mergeConvexFaces=function(t){var i,r,a,n,s,o,l;for(i=this.fHead.next;i!==this.fHead;i=i.next)if(i.inside)for(r=i.anEdge,s=r.Org;a=r.Lnext,n=r.Sym,n&&n.Lface&&n.Lface.inside&&(o=this.countFaceVerts_(i),l=this.countFaceVerts_(n.Lface),o+l-2<=t&&Di.vertCCW(r.Lprev.Org,r.Org,n.Lnext.Lnext.Org)&&Di.vertCCW(n.Lprev.Org,n.Org,r.Lnext.Lnext.Org)&&(a=n.Lnext,this.delete(n),r=null,n=null)),!(r&&r.Lnext.Org===s);)r=a;return!0},e.prototype.check=function(){var t=this.fHead,i=this.vHead,r=this.eHead,a,n,s,o,l,u;for(n=t,n=t;(a=n.next)!==t;n=a){Vi(a.prev===n),l=a.anEdge;do Vi(l.Sym!==l),Vi(l.Sym.Sym===l),Vi(l.Lnext.Onext.Sym===l),Vi(l.Onext.Sym.Lnext===l),Vi(l.Lface===a),l=l.Lnext;while(l!==a.anEdge)}for(Vi(a.prev===n&&a.anEdge===null),o=i,o=i;(s=o.next)!==i;o=s){Vi(s.prev===o),l=s.anEdge;do Vi(l.Sym!==l),Vi(l.Sym.Sym===l),Vi(l.Lnext.Onext.Sym===l),Vi(l.Onext.Sym.Lnext===l),Vi(l.Org===s),l=l.Onext;while(l!==s.anEdge)}for(Vi(s.prev===o&&s.anEdge===null),u=r,u=r;(l=u.next)!==r;u=l)Vi(l.Sym.next===u.Sym),Vi(l.Sym!==l),Vi(l.Sym.Sym===l),Vi(l.Org!==null),Vi(l.Dst!==null),Vi(l.Lnext.Onext.Sym===l),Vi(l.Onext.Sym.Lnext===l);Vi(l.Sym.next===u.Sym&&l.Sym===this.eHeadSym&&l.Sym.Sym===l&&l.Org===null&&l.Dst===null&&l.Lface===null&&l.Rface===null)},e}(),nD=function(){function e(){this.handle=null}return e}(),sD=function(){function e(){this.key=null,this.node=0}return e}(),uce=function(){function e(t,i){this.leq=i,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=t,this.nodes=[],this.handles=[];for(var r=0;r<t+1;r++)this.nodes[r]=new nD,this.handles[r]=new sD;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return e.prototype.floatDown_=function(t){var i=this.nodes,r=this.handles,a,n,s;for(a=i[t].handle;;){if(s=t<<1,s<this.size&&this.leq(r[i[s+1].handle].key,r[i[s].handle].key)&&++s,Vi(s<=this.max),n=i[s].handle,s>this.size||this.leq(r[a].key,r[n].key)){i[t].handle=a,r[a].node=t;break}i[t].handle=n,r[n].node=t,t=s}},e.prototype.floatUp_=function(t){var i=this.nodes,r=this.handles,a,n,s;for(a=i[t].handle;;){if(s=t>>1,n=i[s].handle,s===0||this.leq(r[n].key,r[a].key)){i[t].handle=a,r[a].node=t;break}i[t].handle=n,r[n].node=t,t=s}},e.prototype.init=function(){for(var t=this.size;t>=1;--t)this.floatDown_(t);this.initialized=!0},e.prototype.min=function(){return this.handles[this.nodes[1].handle].key},e.prototype.insert=function(t){var i,r;if(i=++this.size,i*2>this.max){this.max*=2;var a,n;for(n=this.nodes.length,this.nodes.length=this.max+1,a=n;a<this.nodes.length;a++)this.nodes[a]=new nD;for(n=this.handles.length,this.handles.length=this.max+1,a=n;a<this.handles.length;a++)this.handles[a]=new sD}return this.freeList===0?r=i:(r=this.freeList,this.freeList=this.handles[r].node),this.nodes[i].handle=r,this.handles[r].node=i,this.handles[r].key=t,this.initialized&&this.floatUp_(i),r},e.prototype.extractMin=function(){var t=this.nodes,i=this.handles,r=t[1].handle,a=i[r].key;return this.size>0&&(t[1].handle=t[this.size].handle,i[t[1].handle].node=1,i[r].key=null,i[r].node=this.freeList,this.freeList=r,--this.size,this.size>0&&this.floatDown_(1)),a},e.prototype.delete=function(t){var i=this.nodes,r=this.handles,a;Vi(t>=1&&t<=this.max&&r[t].key!==null),a=r[t].node,i[a].handle=i[this.size].handle,r[i[a].handle].node=a,--this.size,a<=this.size&&(a<=1||this.leq(r[i[a>>1].handle].key,r[i[a].handle].key)?this.floatDown_(a):this.floatUp_(a)),r[t].key=null,r[t].node=this.freeList,this.freeList=t},e}(),ex=function(){function e(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return e}(),oD=function(){function e(){this.key=null,this.next=null,this.prev=null}return e}(),cce=function(){function e(t,i){this.frame=t,this.leq=i,this.head=new oD,this.head.next=this.head,this.head.prev=this.head}return e.prototype.min=function(){return this.head.next},e.prototype.max=function(){return this.head.prev},e.prototype.insert=function(t){return this.insertBefore(this.head,t)},e.prototype.search=function(t){var i=this.head;do i=i.next;while(i.key!==null&&!this.leq(this.frame,t,i.key));return i},e.prototype.insertBefore=function(t,i){do t=t.prev;while(t.key!==null&&!this.leq(this.frame,t.key,i));var r=new oD;return r.key=i,r.next=t.next,t.next.prev=r,r.prev=t,t.next=r,r},e.prototype.delete=function(t){t.next.prev=t.prev,t.prev.next=t.next},e}(),dce=function(){function e(){}return e.regionBelow=function(t){return t.nodeUp.prev.key},e.regionAbove=function(t){return t.nodeUp.next.key},e.debugEvent=function(t){},e.addWinding=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.edgeLeq=function(t,i,r){var a=t.event,n=i.eUp,s=r.eUp;if(n.Dst===a)return s.Dst===a?Di.vertLeq(n.Org,s.Org)?Di.edgeSign(s.Dst,n.Org,s.Org)<=0:Di.edgeSign(n.Dst,s.Org,n.Org)>=0:Di.edgeSign(s.Dst,a,s.Org)<=0;if(s.Dst===a)return Di.edgeSign(n.Dst,a,n.Org)>=0;var o=Di.edgeEval(n.Dst,a,n.Org),l=Di.edgeEval(s.Dst,a,s.Org);return o>=l},e.deleteRegion=function(t,i){i.fixUpperEdge&&Vi(i.eUp.winding===0),i.eUp.activeRegion=null,t.dict.delete(i.nodeUp)},e.fixUpperEdge=function(t,i,r){Vi(i.fixUpperEdge),t.mesh.delete(i.eUp),i.fixUpperEdge=!1,i.eUp=r,r.activeRegion=i},e.topLeftRegion=function(t,i){var r=i.eUp.Org,a;do i=e.regionAbove(i);while(i.eUp.Org===r);if(i.fixUpperEdge){if(a=t.mesh.connect(e.regionBelow(i).eUp.Sym,i.eUp.Lnext),a===null)return null;e.fixUpperEdge(t,i,a),i=e.regionAbove(i)}return i},e.topRightRegion=function(t){var i=t.eUp.Dst;do t=e.regionAbove(t);while(t.eUp.Dst===i);return t},e.addRegionBelow=function(t,i,r){var a=new ex;return a.eUp=r,a.nodeUp=t.dict.insertBefore(i.nodeUp,a),a.fixUpperEdge=!1,a.sentinel=!1,a.dirty=!1,r.activeRegion=a,a},e.isWindingInside=function(t,i){switch(t.windingRule){case Dr.ODD:return(i&1)!==0;case Dr.NONZERO:return i!==0;case Dr.POSITIVE:return i>0;case Dr.NEGATIVE:return i<0;case Dr.ABS_GEQ_TWO:return i>=2||i<=-2}throw new Error("Invalid winding rulle")},e.computeWinding=function(t,i){i.windingNumber=e.regionAbove(i).windingNumber+i.eUp.winding,i.inside=e.isWindingInside(t,i.windingNumber)},e.finishRegion=function(t,i){var r=i.eUp,a=r.Lface;a.inside=i.inside,a.anEdge=r,e.deleteRegion(t,i)},e.finishLeftRegions=function(t,i,r){for(var a,n=null,s=i,o=i.eUp;s!==r;){if(s.fixUpperEdge=!1,n=e.regionBelow(s),a=n.eUp,a.Org!=o.Org){if(!n.fixUpperEdge){e.finishRegion(t,s);break}a=t.mesh.connect(o.Lprev,a.Sym),e.fixUpperEdge(t,n,a)}o.Onext!==a&&(t.mesh.splice(a.Oprev,a),t.mesh.splice(o,a)),e.finishRegion(t,s),o=n.eUp,s=n}return o},e.addRightEdges=function(t,i,r,a,n,s){var o,l,u,c,d=!0;u=r;do Vi(Di.vertLeq(u.Org,u.Dst)),e.addRegionBelow(t,i,u.Sym),u=u.Onext;while(u!==a);for(n===null&&(n=e.regionBelow(i).eUp.Rprev),l=i,c=n;o=e.regionBelow(l),u=o.eUp.Sym,u.Org===c.Org;)u.Onext!==c&&(t.mesh.splice(u.Oprev,u),t.mesh.splice(c.Oprev,u)),o.windingNumber=l.windingNumber-u.winding,o.inside=e.isWindingInside(t,o.windingNumber),l.dirty=!0,!d&&e.checkForRightSplice(t,l)&&(e.addWinding(u,c),e.deleteRegion(t,l),t.mesh.delete(c)),d=!1,l=o,c=u;l.dirty=!0,Vi(l.windingNumber-u.winding===o.windingNumber),s&&e.walkDirtyRegions(t,l)},e.spliceMergeVertices=function(t,i,r){t.mesh.splice(i,r)},e.vertexWeights=function(t,i,r){var a=Di.vertL1dist(i,t),n=Di.vertL1dist(r,t),s=.5*n/(a+n),o=.5*a/(a+n);t.coords[0]+=s*i.coords[0]+o*r.coords[0],t.coords[1]+=s*i.coords[1]+o*r.coords[1],t.coords[2]+=s*i.coords[2]+o*r.coords[2]},e.getIntersectData=function(t,i,r,a,n,s){i.coords[0]=i.coords[1]=i.coords[2]=0,i.idx=-1,e.vertexWeights(i,r,a),e.vertexWeights(i,n,s)},e.checkForRightSplice=function(t,i){var r=e.regionBelow(i),a=i.eUp,n=r.eUp;if(Di.vertLeq(a.Org,n.Org)){if(Di.edgeSign(n.Dst,a.Org,n.Org)>0)return!1;Di.vertEq(a.Org,n.Org)?a.Org!==n.Org&&(t.pq.delete(a.Org.pqHandle),e.spliceMergeVertices(t,n.Oprev,a)):(t.mesh.splitEdge(n.Sym),t.mesh.splice(a,n.Oprev),i.dirty=r.dirty=!0)}else{if(Di.edgeSign(a.Dst,n.Org,a.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Oprev,a)}return!0},e.checkForLeftSplice=function(t,i){var r=e.regionBelow(i),a=i.eUp,n=r.eUp,s;if(Vi(!Di.vertEq(a.Dst,n.Dst)),Di.vertLeq(a.Dst,n.Dst)){if(Di.edgeSign(a.Dst,n.Dst,a.Org)<0)return!1;e.regionAbove(i).dirty=i.dirty=!0,s=t.mesh.splitEdge(a),t.mesh.splice(n.Sym,s),s.Lface.inside=i.inside}else{if(Di.edgeSign(n.Dst,a.Dst,n.Org)>0)return!1;i.dirty=r.dirty=!0,s=t.mesh.splitEdge(n),t.mesh.splice(a.Lnext,n.Sym),s.Rface.inside=i.inside}return!0},e.checkForIntersect=function(t,i){var r=e.regionBelow(i),a=i.eUp,n=r.eUp,s=a.Org,o=n.Org,l=a.Dst,u=n.Dst,c,d,h=new uh,p,f;if(Vi(!Di.vertEq(u,l)),Vi(Di.edgeSign(l,t.event,s)<=0),Vi(Di.edgeSign(u,t.event,o)>=0),Vi(s!==t.event&&o!==t.event),Vi(!i.fixUpperEdge&&!r.fixUpperEdge),s===o||(c=Math.min(s.t,l.t),d=Math.max(o.t,u.t),c>d))return!1;if(Di.vertLeq(s,o)){if(Di.edgeSign(u,s,o)>0)return!1}else if(Di.edgeSign(l,o,s)<0)return!1;return e.debugEvent(t),Di.intersect(l,s,u,o,h),Vi(Math.min(s.t,l.t)<=h.t),Vi(h.t<=Math.max(o.t,u.t)),Vi(Math.min(u.s,l.s)<=h.s),Vi(h.s<=Math.max(o.s,s.s)),Di.vertLeq(h,t.event)&&(h.s=t.event.s,h.t=t.event.t),p=Di.vertLeq(s,o)?s:o,Di.vertLeq(p,h)&&(h.s=p.s,h.t=p.t),Di.vertEq(h,s)||Di.vertEq(h,o)?(e.checkForRightSplice(t,i),!1):!Di.vertEq(l,t.event)&&Di.edgeSign(l,t.event,h)>=0||!Di.vertEq(u,t.event)&&Di.edgeSign(u,t.event,h)<=0?u===t.event?(t.mesh.splitEdge(a.Sym),t.mesh.splice(n.Sym,a),i=e.topLeftRegion(t,i),a=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),r),e.addRightEdges(t,i,a.Oprev,a,a,!0),!0):l===t.event?(t.mesh.splitEdge(n.Sym),t.mesh.splice(a.Lnext,n.Oprev),r=i,i=e.topRightRegion(i),f=e.regionBelow(i).eUp.Rprev,r.eUp=n.Oprev,n=e.finishLeftRegions(t,r,null),e.addRightEdges(t,i,n.Onext,a.Rprev,f,!0),!0):(Di.edgeSign(l,t.event,h)>=0&&(e.regionAbove(i).dirty=i.dirty=!0,t.mesh.splitEdge(a.Sym),a.Org.s=t.event.s,a.Org.t=t.event.t),Di.edgeSign(u,t.event,h)<=0&&(i.dirty=r.dirty=!0,t.mesh.splitEdge(n.Sym),n.Org.s=t.event.s,n.Org.t=t.event.t),!1):(t.mesh.splitEdge(a.Sym),t.mesh.splitEdge(n.Sym),t.mesh.splice(n.Oprev,a),a.Org.s=h.s,a.Org.t=h.t,a.Org.pqHandle=t.pq.insert(a.Org),e.getIntersectData(t,a.Org,s,l,o,u),e.regionAbove(i).dirty=i.dirty=r.dirty=!0,!1)},e.walkDirtyRegions=function(t,i){for(var r=e.regionBelow(i),a,n;;){for(;r.dirty;)i=r,r=e.regionBelow(r);if(!i.dirty&&(r=i,i=e.regionAbove(i),i===null||!i.dirty))return;if(i.dirty=!1,a=i.eUp,n=r.eUp,a.Dst!==n.Dst&&e.checkForLeftSplice(t,i)&&(r.fixUpperEdge?(e.deleteRegion(t,r),t.mesh.delete(n),r=e.regionBelow(i),n=r.eUp):i.fixUpperEdge&&(e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionAbove(r),a=i.eUp)),a.Org!==n.Org)if(a.Dst!==n.Dst&&!i.fixUpperEdge&&!r.fixUpperEdge&&(a.Dst===t.event||n.Dst===t.event)){if(e.checkForIntersect(t,i))return}else e.checkForRightSplice(t,i);a.Org===n.Org&&a.Dst===n.Dst&&(e.addWinding(n,a),e.deleteRegion(t,i),t.mesh.delete(a),i=e.regionAbove(r))}},e.connectRightVertex=function(t,i,r){var a,n=r.Onext,s=e.regionBelow(i),o=i.eUp,l=s.eUp,u=!1;if(o.Dst!==l.Dst&&e.checkForIntersect(t,i),Di.vertEq(o.Org,t.event)&&(t.mesh.splice(n.Oprev,o),i=e.topLeftRegion(t,i),n=e.regionBelow(i).eUp,e.finishLeftRegions(t,e.regionBelow(i),s),u=!0),Di.vertEq(l.Org,t.event)&&(t.mesh.splice(r,l.Oprev),r=e.finishLeftRegions(t,s,null),u=!0),u){e.addRightEdges(t,i,r.Onext,n,n,!0);return}Di.vertLeq(l.Org,o.Org)?a=l.Oprev:a=o,a=t.mesh.connect(r.Lprev,a),e.addRightEdges(t,i,a,a.Onext,a.Onext,!1),a.Sym.activeRegion.fixUpperEdge=!0,e.walkDirtyRegions(t,i)},e.connectLeftDegenerate=function(t,i,r){var a,n,s,o,l;if(a=i.eUp,Di.vertEq(a.Org,r)){Vi(!1),e.spliceMergeVertices(t,a,r.anEdge);return}if(!Di.vertEq(a.Dst,r)){t.mesh.splitEdge(a.Sym),i.fixUpperEdge&&(t.mesh.delete(a.Onext),i.fixUpperEdge=!1),t.mesh.splice(r.anEdge,a),e.sweepEvent(t,r);return}Vi(!1),i=e.topRightRegion(i),l=e.regionBelow(i),s=l.eUp.Sym,n=o=s.Onext,l.fixUpperEdge&&(Vi(n!==s),e.deleteRegion(t,l),t.mesh.delete(s),s=n.Oprev),t.mesh.splice(r.anEdge,s),Di.edgeGoesLeft(n)||(n=null),e.addRightEdges(t,i,s.Onext,o,n,!0)},e.connectLeftVertex=function(t,i){var r,a,n,s,o,l,u=new ex;if(u.eUp=i.anEdge.Sym,r=t.dict.search(u).key,a=e.regionBelow(r),!!a){if(s=r.eUp,o=a.eUp,Di.edgeSign(s.Dst,i,s.Org)===0){e.connectLeftDegenerate(t,r,i);return}if(n=Di.vertLeq(o.Dst,s.Dst)?r:a,r.inside||n.fixUpperEdge){if(n===r)l=t.mesh.connect(i.anEdge.Sym,s.Lnext);else{var c=t.mesh.connect(o.Dnext,i.anEdge);l=c.Sym}n.fixUpperEdge?e.fixUpperEdge(t,n,l):e.computeWinding(t,e.addRegionBelow(t,r,l)),e.sweepEvent(t,i)}else e.addRightEdges(t,r,i.anEdge,i.anEdge,null,!0)}},e.sweepEvent=function(t,i){t.event=i,e.debugEvent(t);for(var r=i.anEdge;r.activeRegion===null;)if(r=r.Onext,r===i.anEdge){e.connectLeftVertex(t,i);return}var a=e.topLeftRegion(t,r.activeRegion);Vi(a!==null);var n=e.regionBelow(a),s=n.eUp,o=e.finishLeftRegions(t,n,null);o.Onext===s?e.connectRightVertex(t,a,o):e.addRightEdges(t,a,o.Onext,s,s,!0)},e.addSentinel=function(t,i,r,a){var n=new ex,s=t.mesh.makeEdge();s.Org.s=r,s.Org.t=a,s.Dst.s=i,s.Dst.t=a,t.event=s.Dst,n.eUp=s,n.windingNumber=0,n.inside=!1,n.fixUpperEdge=!1,n.sentinel=!0,n.dirty=!1,n.nodeUp=t.dict.insert(n)},e.initEdgeDict=function(t){t.dict=new cce(t,e.edgeLeq);var i=t.bmax[0]-t.bmin[0],r=t.bmax[1]-t.bmin[1],a=t.bmin[0]-i,n=t.bmax[0]+i,s=t.bmin[1]-r,o=t.bmax[1]+r;e.addSentinel(t,a,n,s),e.addSentinel(t,a,n,o)},e.doneEdgeDict=function(t){for(var i,r=0;(i=t.dict.min().key)!==null;)i.sentinel||(Vi(i.fixUpperEdge),Vi(++r===1)),Vi(i.windingNumber===0),e.deleteRegion(t,i)},e.removeDegenerateEdges=function(t){var i,r,a,n=t.mesh.eHead;for(i=n.next;i!==n;i=r)r=i.next,a=i.Lnext,Di.vertEq(i.Org,i.Dst)&&i.Lnext.Lnext!==i&&(e.spliceMergeVertices(t,a,i),t.mesh.delete(i),i=a,a=i.Lnext),a.Lnext===i&&(a!==i&&((a===r||a===r.Sym)&&(r=r.next),t.mesh.delete(a)),(i===r||i===r.Sym)&&(r=r.next),t.mesh.delete(i))},e.initPriorityQ=function(t){var i,r,a,n=0;for(a=t.mesh.vHead,r=a.next;r!==a;r=r.next)n++;for(n+=8,i=t.pq=new uce(n,Di.vertLeq),a=t.mesh.vHead,r=a.next;r!==a;r=r.next)r.pqHandle=i.insert(r);return r!==a?!1:(i.init(),!0)},e.donePriorityQ=function(t){t.pq=null},e.removeDegenerateFaces=function(t,i){var r,a,n;for(r=i.fHead.next;r!==i.fHead;r=a)a=r.next,n=r.anEdge,Vi(n.Lnext!==n),n.Lnext.Lnext===n&&(e.addWinding(n.Onext,n),t.mesh.delete(n));return!0},e.computeInterior=function(t,i){i===void 0&&(i=!0);var r,a;if(e.removeDegenerateEdges(t),!e.initPriorityQ(t))return!1;for(e.initEdgeDict(t);(r=t.pq.extractMin())!==null;){for(;a=t.pq.min(),!(a===null||!Di.vertEq(a,r));)a=t.pq.extractMin(),e.spliceMergeVertices(t,r.anEdge,a.anEdge);e.sweepEvent(t,r)}return t.event=t.dict.min().key.eUp.Org,e.debugEvent(t),e.doneEdgeDict(t),e.donePriorityQ(t),e.removeDegenerateFaces(t,t.mesh)?(i&&t.mesh.check(),!0):!1},e}(),hce=function(){function e(){this.mesh=new aD,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=Dr.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return e.prototype.dot_=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},e.prototype.normalize_=function(t){var i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];if(!i)throw"Zero-size vector!";i=Math.sqrt(i),t[0]/=i,t[1]/=i,t[2]/=i},e.prototype.longAxis_=function(t){var i=0;return Math.abs(t[1])>Math.abs(t[0])&&(i=1),Math.abs(t[2])>Math.abs(t[i])&&(i=2),i},e.prototype.computeNormal_=function(t){var i,r,a,n,s,o,l=[0,0,0],u=[0,0,0],c=[0,0,0],d=[0,0,0],h=[0,0,0],p=[null,null,null],f=[null,null,null],v=this.mesh.vHead;i=v.next;for(var m=0;m<3;++m)n=i.coords[m],u[m]=n,f[m]=i,l[m]=n,p[m]=i;for(i=v.next;i!==v;i=i.next)for(var g=0;g<3;++g)n=i.coords[g],n<u[g]&&(u[g]=n,f[g]=i),n>l[g]&&(l[g]=n,p[g]=i);var y=0;if(l[1]-u[1]>l[0]-u[0]&&(y=1),l[2]-u[2]>l[y]-u[y]&&(y=2),u[y]>=l[y]){t[0]=0,t[1]=0,t[2]=1;return}for(o=0,r=f[y],a=p[y],c[0]=r.coords[0]-a.coords[0],c[1]=r.coords[1]-a.coords[1],c[2]=r.coords[2]-a.coords[2],i=v.next;i!==v;i=i.next)d[0]=i.coords[0]-a.coords[0],d[1]=i.coords[1]-a.coords[1],d[2]=i.coords[2]-a.coords[2],h[0]=c[1]*d[2]-c[2]*d[1],h[1]=c[2]*d[0]-c[0]*d[2],h[2]=c[0]*d[1]-c[1]*d[0],s=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],s>o&&(o=s,t[0]=h[0],t[1]=h[1],t[2]=h[2]);o<=0&&(t[0]=t[1]=t[2]=0,t[this.longAxis_(c)]=1)},e.prototype.checkOrientation_=function(){for(var t=this.mesh.fHead,i,r=this.mesh.vHead,a,n=0,s=t.next;s!==t;s=s.next)if(a=s.anEdge,!(a.winding<=0))do n+=(a.Org.s-a.Dst.s)*(a.Org.t+a.Dst.t),a=a.Lnext;while(a!==s.anEdge);if(n<0){for(i=r.next;i!==r;i=i.next)i.t=-i.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},e.prototype.projectPolygon_=function(){var t=this.mesh.vHead,i=[0,0,0],r,a,n=!1;i[0]=this.normal[0],i[1]=this.normal[1],i[2]=this.normal[2],!i[0]&&!i[1]&&!i[2]&&(this.computeNormal_(i),n=!0),r=this.sUnit,a=this.tUnit;var s=this.longAxis_(i);r[s]=0,r[(s+1)%3]=1,r[(s+2)%3]=0,a[s]=0,a[(s+1)%3]=0,a[(s+2)%3]=i[s]>0?1:-1;for(var o=t.next;o!==t;o=o.next)o.s=this.dot_(o.coords,r),o.t=this.dot_(o.coords,a);n&&this.checkOrientation_();for(var l=!0,u=t.next;u!==t;u=u.next)l?(this.bmin[0]=this.bmax[0]=u.s,this.bmin[1]=this.bmax[1]=u.t,l=!1):(u.s<this.bmin[0]&&(this.bmin[0]=u.s),u.s>this.bmax[0]&&(this.bmax[0]=u.s),u.t<this.bmin[1]&&(this.bmin[1]=u.t),u.t>this.bmax[1]&&(this.bmax[1]=u.t))},e.prototype.addWinding_=function(t,i){t.winding+=i.winding,t.Sym.winding+=i.Sym.winding},e.prototype.tessellateMonoRegion_=function(t,i){var r,a;if(r=i.anEdge,!(r.Lnext!==r&&r.Lnext.Lnext!==r))throw"Mono region invalid";for(;Di.vertLeq(r.Dst,r.Org);r=r.Lprev);for(;Di.vertLeq(r.Org,r.Dst);r=r.Lnext);a=r.Lprev;for(var n=void 0;r.Lnext!==a;)if(Di.vertLeq(r.Dst,a.Org)){for(;a.Lnext!==r&&(Di.edgeGoesLeft(a.Lnext)||Di.edgeSign(a.Org,a.Dst,a.Lnext.Dst)<=0);)n=t.connect(a.Lnext,a),a=n.Sym;a=a.Lprev}else{for(;a.Lnext!==r&&(Di.edgeGoesRight(r.Lprev)||Di.edgeSign(r.Dst,r.Org,r.Lprev.Org)>=0);)n=t.connect(r,r.Lprev),r=n.Sym;r=r.Lnext}if(a.Lnext===r)throw"Mono region invalid";for(;a.Lnext.Lnext!==r;)n=t.connect(a.Lnext,a),a=n.Sym;return!0},e.prototype.tessellateInterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)if(i=r.next,r.inside&&!this.tessellateMonoRegion_(t,r))return!1;return!0},e.prototype.discardExterior_=function(t){for(var i,r=t.fHead.next;r!==t.fHead;r=i)i=r.next,r.inside||t.zapFace(r)},e.prototype.setWindingNumber_=function(t,i,r){for(var a,n=t.eHead.next;n!==t.eHead;n=a)a=n.next,n.Rface.inside!==n.Lface.inside?n.winding=n.Lface.inside?i:-i:r?t.delete(n):n.winding=0},e.prototype.getNeighbourFace_=function(t){return!t.Rface||!t.Rface.inside?-1:t.Rface.n},e.prototype.outputPolymesh_=function(t,i,r,a){var n,s=0,o=0,l;r>3&&t.mergeConvexFaces(r);for(var u=t.vHead.next;u!==t.vHead;u=u.next)u.n=-1;for(var c=t.fHead.next;c!==t.fHead;c=c.next)if(c.n=-1,!!c.inside){n=c.anEdge,l=0;do{var u=n.Org;u.n===-1&&(u.n=o,o++),l++,n=n.Lnext}while(n!==c.anEdge);if(l>r)throw"Face vertex greater that support polygon";c.n=s,++s}this.elementCount=s,i===Aa.CONNECTED_POLYGONS&&(s*=2),this.elements=[],this.elements.length=s*r,this.vertexCount=o,this.vertices=[],this.vertices.length=o*a,this.vertexIndices=[],this.vertexIndices.length=o;for(var u=t.vHead.next;u!==t.vHead;u=u.next)if(u.n!==-1){var d=u.n*a;this.vertices[d+0]=u.coords[0],this.vertices[d+1]=u.coords[1],a>2&&(this.vertices[d+2]=u.coords[2]),this.vertexIndices[u.n]=u.idx}for(var h=0,c=t.fHead.next;c!==t.fHead;c=c.next)if(c.inside){n=c.anEdge,l=0;do{var u=n.Org;this.elements[h++]=u.n,l++,n=n.Lnext}while(n!==c.anEdge);for(var p=l;p<r;++p)this.elements[h++]=-1;if(i===Aa.CONNECTED_POLYGONS){n=c.anEdge;do this.elements[h++]=this.getNeighbourFace_(n),n=n.Lnext;while(n!==c.anEdge);for(var f=l;f<r;++f)this.elements[h++]=-1}}},e.prototype.outputContours_=function(t,i){var r,a,n=0,s=0;this.vertexCount=0,this.elementCount=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){a=r=o.anEdge;do this.vertexCount++,r=r.Lnext;while(r!==a);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*i,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var l=0,u=0,c=0;n=0;for(var o=t.fHead.next;o!==t.fHead;o=o.next)if(o.inside){s=0,a=r=o.anEdge;do this.vertices[l++]=r.Org.coords[0],this.vertices[l++]=r.Org.coords[1],i>2&&(this.vertices[l++]=r.Org.coords[2]),this.vertexIndices[u++]=this.vertexIdCallback?this.vertexIdCallback(r):r.Org.idx,s++,r=r.Lnext;while(r!==a);this.elements[c++]=n,this.elements[c++]=s,n+=s}},e.prototype.addContour=function(t,i){this.mesh===null&&(this.mesh=new aD),t<2&&(t=2),t>3&&(t=3);for(var r=null,a=0;a<i.length;a+=t)r===null?(r=this.mesh.makeEdge(),this.mesh.splice(r,r.Sym)):(this.mesh.splitEdge(r),r=r.Lnext),r.Org.coords[0]=i[a+0],r.Org.coords[1]=i[a+1],t>2?r.Org.coords[2]=i[a+2]:r.Org.coords[2]=0,r.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(r),r.winding=1,r.Sym.winding=-1},e.prototype.tesselate=function(t,i,r,a,n,s){if(t===void 0&&(t=Dr.ODD),i===void 0&&(i=Aa.POLYGONS),s===void 0&&(s=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,n&&(this.normal[0]=n[0],this.normal[1]=n[1],this.normal[2]=n[2]),this.windingRule=t,a<2&&(a=2),a>3&&(a=3),!this.mesh)return!1;this.projectPolygon_(),dce.computeInterior(this,s);var o=this.mesh;return i===Aa.BOUNDARY_CONTOURS?this.setWindingNumber_(o,1,!0):this.tessellateInterior_(o),s&&o.check(),i===Aa.BOUNDARY_CONTOURS?this.outputContours_(o,a):this.outputPolymesh_(o,i,r,a),!0},e}();function Zu(e){var t=e.windingRule,i=t===void 0?Dr.ODD:t,r=e.elementType,a=r===void 0?Aa.POLYGONS:r,n=e.polySize,s=n===void 0?3:n,o=e.vertexSize,l=o===void 0?2:o,u=e.normal,c=u===void 0?[0,0,1]:u,d=e.contours,h=d===void 0?[]:d,p=e.strict,f=p===void 0?!0:p,v=e.debug,m=v===void 0?!1:v;if(!h&&f)throw new Error("Contours can't be empty");if(h){var g=new hce;e.edgeCreateCallback&&(g.edgeCreateCallback=e.edgeCreateCallback),e.vertexIdCallback&&(g.vertexIdCallback=e.vertexIdCallback);for(var y=0;y<h.length;y++)g.addContour(l||2,h[y]);return g.tesselate(i,a,s,l,c,f),{vertices:g.vertices,vertexIndices:g.vertexIndices,vertexCount:g.vertexCount,elements:g.elements,elementCount:g.elementCount,mesh:m?g.mesh:void 0}}}Dr.ODD;Dr.NONZERO;Dr.POSITIVE;Dr.NEGATIVE;Dr.ABS_GEQ_TWO;Aa.POLYGONS;Aa.CONNECTED_POLYGONS;Aa.BOUNDARY_CONTOURS;var Y2=class{constructor(e=256,t=!1){this.capacity=e,this.size=0,this.debug=t,this.debug&&console.log(`allocating with cap ${e}`);let i=e*Y2.eSize;this.buffer=new ArrayBuffer(i);let r=Float32Array.BYTES_PER_ELEMENT,a=0;this.positions=new Float32Array(this.buffer,a*r,3*e),a+=3*e,this.normals=new Float32Array(this.buffer,a*r,3*e),a+=3*e,this.uvs=new Float32Array(this.buffer,a*r,2*e)}realloc(e,t=!1){if(e<this.size)throw Error("cannot shrink buffer");if(e<=this.capacity&&!t)return;this.debug&&console.log(`resizing from ${this.capacity} → ${e}`);let i=e*Y2.eSize,r=new ArrayBuffer(i),a=Float32Array.BYTES_PER_ELEMENT,n=0,s=new Float32Array(r,n*a,3*e);n+=3*e;let o=new Float32Array(r,n*a,3*e);n+=3*e;let l=new Float32Array(r,n*a,2*e);t?(s.set(this.positions.subarray(0,this.size*3)),o.set(this.normals.subarray(0,this.size*3)),l.set(this.uvs.subarray(0,this.size*2))):(s.set(this.positions),o.set(this.normals),l.set(this.uvs)),this.buffer=r,this.positions=s,this.normals=o,this.uvs=l,this.capacity=e}get(e=1){let t=this.size+e;if(t>this.capacity){let r=this.capacity;for(;t>r;)r*=2;this.realloc(r)}let i=this.size;return this.size=t,i}reserve(e){let t=this.size+e;t>this.capacity&&this.realloc(t)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} → ${this.size}`),this.realloc(this.size,!0)}},MN=Y2;MN.eSize=8*Float32Array.BYTES_PER_ELEMENT;var pce=fu(yH()),yA={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},EN={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},AN={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},tx=(e,t)=>([i,r])=>(r<i&&(r+=t),(e>=i?e:e+t)<=r),bA=class extends Mi{constructor(e,t,i=0,r=12,a=3,n=Dr.ODD,s=!1){super(),this.forPathBevel=s,this.type="ShapeGeometry",this.vertexCache={},this._shape=e,this._depth=t,this._curveSegments=r,this._bevelSegmentsInput=a;let o=this._shape.extractShapePointsToFlatArray([],r),l=this._shape.shapeHoles.map(P=>{let A=P.extractShapePointsToFlatArray([],r),k=[];for(let I=A.length-1;I>=1;I-=2){let O=A[I-1],D=A[I-0];k.push(O,D)}return k}),u=[],c=[];for(let P=0;P<o.length;P+=2)c.push([o[P],o[P+1]]);u.push(c);for(let P=0;P<l.length;P++){let A=l[P],k=[];for(let I=0;I<A.length;I+=2)k.push([A[I],A[I+1]]);u.push(k)}let d;e.isText?d=new UR().setFromPoints(e.points.map(P=>P.position)).getSize(new Ce).length()*.1:u[0].length===0?d=i:d=(0,pce.default)(u).distance,i<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(i,d,t/2),this._bevelSegments=Math.floor(a));let h;try{h=Zu({windingRule:n,elementType:Aa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[o]})}catch{h=yA}let p;try{p=Zu({windingRule:Dr.ODD,elementType:Aa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch{p=EN}if(!h)throw new Error("error generating geometry");let f=h.elementCount;if(p){h.elementCount+=p.elementCount;for(let P=0;P<p.elements.length;P++){let A=p.elements[P],k=P%2===0?h.vertexCount:0;h.elements.push(A+k)}for(let P=0;P<p.vertexIndices.length;P++){let A=p.vertexIndices[P],k=h.vertexCount;h.vertexIndices.push(A+k)}for(let P=0;P<p.vertices.length;P++){let A=p.vertices[P];h.vertices.push(A)}}let v=1/0,m=-1/0,g=1/0,y=-1/0;for(let P=0,A=h.vertexCount;P<A;P++){let k=P*2,I=h.vertices[k+0],O=h.vertices[k+1];I<v&&(v=I),I>m&&(m=I),O<g&&(g=O),O>y&&(y=O)}this._minX=v,this._minY=g,this._width=m-v,this._height=y-g,this._buffer=new MN(this._computeBufferEstimatedSize(h));let b=[],x=[];for(let P=h.elementCount-1;P>=0;P--){let A=P>=f,k=P*2,I=h.elements[k+0],O=h.elements[k+1],D=I+O,F={start:I,count:O,normals:[],continuous:[],concave:[]},U=I,z=D-1,B=I+1,W=this._shape.roundedCurves.length;do{let G=U-I,X=h.vertices[z*2+0],J=h.vertices[z*2+1],pe=h.vertices[U*2+0],fe=h.vertices[U*2+1],de=h.vertices[B*2+0],ge=h.vertices[B*2+1],me=pe-X,ke=fe-J,ce=Math.sqrt(me*me+ke*ke);me/=ce,ke/=ce;let le=pe-de,xe=fe-ge,Ne=Math.sqrt(le*le+xe*xe);le/=Ne,xe/=Ne,F.normals[G*2+0]=-xe,F.normals[G*2+1]=le,F.concave[G]=me*xe-ke*le>0;let pt=h.vertexIndices[U];if(Array.isArray(pt))F.continuous[G]=!1;else{let[at,Oe]=this._shape.getCurveIndexFromVertexId(pt-1,!0);if(Oe>0&&Oe<1)F.continuous[G]=!0;else{let Ye=Oe===1?at+1:at-1;Ye=(Ye+W)%W;let xt=Oe===1?0:1,ne=this._shape.roundedCurves[at].getTangent(Oe),K=this._shape.roundedCurves[Ye].getTangent(xt);F.continuous[G]=ne.dot(K)>.95}}A&&(F.normals[G*2+0]*=-1,F.normals[G*2+1]*=-1),[z,U,B]=[U,B,B+1],B>=D&&(B-=O)}while(B!==I+1);let R=[];R.push({bevelI:0,angle:0,size:0,boundary:{vertices:h.vertices.slice(I*2,D*2),vertexCount:O,vertexIndices:new Array(O).fill(!0).map((G,X)=>[X,X]),elements:[0,O],elementCount:1,mesh:null},reverseMap:[],insetPoints:h.vertices.slice(I*2,D*2)});let $=0;for(let G=1;G<=this._bevelSegments;G++){let X=G/this._bevelSegments*Math.PI/2,J=(1-Math.cos(X))*this._bevel,pe=[],fe=[],de=0;for(let me=0;me<O;me++){let ke=me*2,ce=(me-1+O)%O*2,le=h.vertices[F.start*2+ke+0],xe=h.vertices[F.start*2+ke+1],Ne=-F.normals[ce+0]*J,pt=-F.normals[ce+1]*J,at=-F.normals[ke+0]*J,Oe=-F.normals[ke+1]*J;if(F.concave[me]||!F.concave[me]&&A){let Ye=Math.atan2(pt,Ne),xt=Math.atan2(Oe,at);xt>Ye&&(xt-=Math.PI*2);let ne=xt-Ye;if(F.continuous[me]||A){let K=Ye+ne/2,ze=Math.cos(K)*J,ft=Math.sin(K)*J;pe[2*de+0]=le+ze*(A?-1:1),pe[2*de+1]=xe+ft*(A?-1:1),fe[de]=me,de++}else{let K=Math.max(1,Math.floor(r/4*Math.abs(ne)/Math.PI));for(let ze=0;ze<=K;ze++){let ft=Ye+ne*(ze/K),te=Math.cos(ft)*J,Pe=Math.sin(ft)*J;pe[2*de+0]=le+te,pe[2*de+1]=xe+Pe,fe[de]=me,de++}}}else pe[2*de+0]=le+Ne,pe[2*de+1]=xe+pt,fe[de]=me,de++,pe[2*de+0]=le,pe[2*de+1]=xe,fe[de]=me,de++,pe[2*de+0]=le+at,pe[2*de+1]=xe+Oe,fe[de]=me,de++}let ge=Zu({windingRule:Dr.POSITIVE,elementType:Aa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[pe],edgeCreateCallback:me=>{let ke=me.Org.idx,ce=fe[ke],le=fe[(ke+1)%fe.length];me.idx=[ce,le],me.Sym.idx=[le,ce]},vertexIdCallback:me=>{let ke=me.Lprev.idx;return[ke?ke[1]:0,me.idx?me.idx[0]:0]}});if(!ge)throw console.log("Error"),new Error(`error generating bevel geometry for ${G}'th loop`);if(!ge.vertexCount){let me=(G-1)/this._bevelSegments*Math.PI/2;$=(1-Math.sin(me))*this._bevel;break}for(let me=0;me<ge.vertexIndices.length;me++){let[ke,ce]=ge.vertexIndices[me];if(ke===ce)continue;let le=ce;ce<ke&&(le+=O);for(let xe=ke;xe<le;xe++){let Ne=xe%O,pt=(xe+1)%O;if(!F.continuous[Ne]||!F.continuous[pt]){ge.vertexIndices[me]=[ke,Ne],ge.vertexIndices.splice(me+1,0,[pt,ce]),ge.vertices.splice((me+1)*2,0,ge.vertices[me*2],ge.vertices[me*2+1]);break}}}R.push({bevelI:G,angle:X,size:J,boundary:ge,reverseMap:fe,insetPoints:pe})}let q=(G,X,J)=>{let pe=0,fe=G.boundary.vertexIndices.length;for(;pe<fe&&J(G.boundary.vertexIndices[X]);)X=(X+1)%fe,pe++;return pe},Z=b.length;for(let G=1;G<R.length;G++){let X=R[G-1],J=R[G],pe=X.boundary.vertexIndices.length,fe=J.boundary.vertexIndices.length;if(!pe||!fe)break;let de=F.concave.length,ge=0,me=tx(ge,O);for(;!X.boundary.vertexIndices.filter(me).length||!J.boundary.vertexIndices.filter(me).length;)ge++,me=tx(ge,O);let ke=X.boundary.vertexIndices.findIndex(me),ce=J.boundary.vertexIndices.findIndex(me);do ke=(ke+1)%pe;while(me(X.boundary.vertexIndices[ke]));do ce=(ce+1)%fe;while(me(J.boundary.vertexIndices[ce]));ge=(ge+1)%O;let le=ge,xe=0,Ne=this._buildBevelVert(F,X,(ke-1+pe)%pe,void 0,xe),pt=this._buildBevelVert(F,J,(ce-1+fe)%fe,void 0,xe),at=Ne,Oe=pt,Ye,xt,ne=!1;do{xe=(ge||de)/de,me=tx(ge,O);let K=q(X,ke,me),ze=q(J,ce,me),ft=ne;if(ne=!1,K&&!ze){for(let te=0;te<K;te++)Ye=this._buildBevelVert(F,X,(ke+te)%pe,te/(K-1),xe),b.push(at.topN,Ye.topP,Oe.topN),s===!1&&b.push(Ye.bottomP,at.bottomN,Oe.bottomN),at=Ye;ne=!0}else if(!K&&ze)for(let te=0;te<ze;te++)xt=this._buildBevelVert(F,J,(ce+te)%fe,te/(ze-1),xe),b.push(Oe.topN,at.topP,xt.topP),s===!1&&b.push(at.bottomP,Oe.bottomN,xt.bottomP),Oe=xt;else if(K&&ze)if(Ye=this._buildBevelVert(F,X,ke,0,xe),xt=this._buildBevelVert(F,J,ce,0,xe),ft?(b.push(at.topN,xt.topP,Oe.topN),b.push(at.topN,Ye.topP,xt.topP),s===!1&&(b.push(xt.bottomP,at.bottomN,Oe.bottomN),b.push(xt.bottomP,Ye.bottomP,at.bottomN))):(b.push(Oe.topN,at.topN,Ye.topP),b.push(Oe.topN,Ye.topP,xt.topP),s===!1&&(b.push(Ye.bottomP,at.bottomN,Oe.bottomN),b.push(Ye.bottomP,Oe.bottomN,xt.bottomP))),at=Ye,Oe=xt,K===ze)for(let te=1;te<K;te++)Ye=this._buildBevelVert(F,X,(ke+te)%pe,te/(K-1),xe),xt=this._buildBevelVert(F,J,(ce+te)%fe,te/(ze-1),xe),b.push(at.topN,Ye.topP,Oe.topN),b.push(Oe.topN,Ye.topP,xt.topP),s===!1&&(b.push(Ye.bottomP,at.bottomN,Oe.bottomN),b.push(Ye.bottomP,Oe.bottomN,xt.bottomP)),at=Ye,Oe=xt;else if(K>ze){let te=K/ze,Pe=0;for(let Te=1;Te<K;Te++)Ye=this._buildBevelVert(F,X,(ke+Te)%pe,Te/(K-1),xe),b.push(at.topN,Ye.topP,Oe.topN),s===!1&&b.push(Ye.bottomP,at.bottomN,Oe.bottomN),at=Ye,Te>(Pe+1)*te&&(Pe++,xt=this._buildBevelVert(F,J,(ce+Pe)%fe,Pe/(ze-1),xe),b.push(Oe.topN,Ye.topP,xt.topP),s===!1&&b.push(Ye.bottomP,Oe.bottomN,xt.bottomP),Oe=xt)}else{let te=ze/K,Pe=0;for(let Te=1;Te<ze;Te++)xt=this._buildBevelVert(F,J,(ce+Te)%fe,Te/(ze-1),xe),b.push(Oe.topN,Ye.topP,xt.topP),s===!1&&b.push(Ye.bottomP,Oe.bottomN,xt.bottomP),Oe=xt,Te>(Pe+1)*te&&(Pe++,Ye=this._buildBevelVert(F,X,(ke+Pe)%pe,Pe/(K-1),xe),b.push(at.topN,Ye.topP,Oe.topN),s===!1&&b.push(Ye.bottomP,at.bottomN,Oe.bottomN),at=Ye)}ke=(ke+K)%pe,ce=(ce+ze)%fe,ge=(ge+1)%de}while(ge!==le)}if(s===!1&&this._depth>this._bevel*2&&this._buildWall(R,F,b),A){let G=[];for(let X=b.length-1;X>=Z+2;X-=3){let J=b[X-2],pe=b[X-1],fe=b[X-0];G.push(fe,pe,J)}b.splice(Z,b.length-Z,...G)}if(A){let G=[];for(let X=R[R.length-1].boundary.vertices.length-1;X>=1;X-=2){let J=R[R.length-1].boundary.vertices[X-1],pe=R[R.length-1].boundary.vertices[X-0];G.push(J,pe)}x.push(G)}if(!A){let G=R[R.length-1],X;try{X=Zu({windingRule:R.length>1?Dr.POSITIVE:Dr.ODD,elementType:Aa.POLYGONS,vertexSize:2,strict:!0,contours:[G.insetPoints,...x]})}catch{X=AN}if(!X)throw new Error("Error generating geometry for surface");l.length===0&&this._bevel<d&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let J=0;J<X.elementCount*3;J+=3){let pe=this._buildSurfaceVert(X,X.elements[J+0],$),fe=this._buildSurfaceVert(X,X.elements[J+1],$),de=this._buildSurfaceVert(X,X.elements[J+2],$);b.push(pe.top,fe.top,de.top),s===!1&&b.push(de.bottom,fe.bottom,pe.bottom)}}this.vertexCache={}}this._buffer.shrink();let S=new ji(Uint32Array.from(b),1),w=new ji(this._buffer.positions,3),E=new ji(this._buffer.normals,3),M=new ji(this._buffer.uvs,2);w.needsUpdate=!0,E.needsUpdate=!0,M.needsUpdate=!0,S.needsUpdate=!0,this.setAttribute("position",w),this.setAttribute("normal",E),this.setAttribute("uv",M),this.setIndex(S)}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let a=0,n=r.boundary.vertexCount;a<n;a++){let s=this._buildBevelVert(t,r,a),o=this._buildBevelVert(t,r,(a+1)%n);i.push(o.topP,s.topN,s.bottomN),i.push(o.topP,s.bottomN,o.bottomP)}}_buildSurfaceVert(e,t,i){let r=t.toString();if(r in this.vertexCache)return this.vertexCache[r];let a=e.vertices[t*2+0],n=e.vertices[t*2+1],s=(a-this._minX)/this._width,o=(n-this._minY)/this._height;this.forPathBevel&&(o=1);let l=this._buffer.get(this.forPathBevel?1:2),u=l*3,c=l*2,d={top:l+0,bottom:l+1};return this._buffer.positions[u+0]=a,this._buffer.positions[u+1]=n,this._buffer.positions[u+2]=this.forPathBevel?this._bevel:this._depth-i,this._buffer.normals[u+0]=0,this._buffer.normals[u+1]=0,this._buffer.normals[u+2]=1,this._buffer.uvs[c+0]=s,this._buffer.uvs[c+1]=o,this.forPathBevel===!1&&(this._buffer.positions[u+3]=a,this._buffer.positions[u+4]=n,this._buffer.positions[u+5]=i,this._buffer.normals[u+3]=0,this._buffer.normals[u+4]=0,this._buffer.normals[u+5]=-1,this._buffer.uvs[c+2]=s,this._buffer.uvs[c+3]=o),this.vertexCache[r]=d,d}_buildBevelVert(e,t,i,r=1,a){let n=`${t.bevelI}:${i}`;if(n in this.vertexCache&&a!==0&&a!==1&&(!a||a===this.vertexCache[n].pathBevelUCoord))return this.vertexCache[n];let[s,o]=t.boundary.vertexIndices[i],l,u,c,d;s!==o?(u=s,l=o,d=!1,c=e.continuous[u]&&e.continuous[l]):(l=s,u=(l-1+e.count)%e.count,d=e.concave[l]&&t.bevelI>0,c=e.continuous[l]||d);let h=Math.cos(t.angle),p=Math.sin(t.angle),f=i*2,v=l*2,m=u*2,g=t.boundary.vertices[f+0],y=t.boundary.vertices[f+1],b=(1-p)*this._bevel,x=(g-this._minX)/this._width,S=(y-this._minY)/this._height;this.forPathBevel&&(a!==void 0&&(x=a),S=1);let w=e.normals[v+0],E=e.normals[v+1],M=e.normals[m+0],P=e.normals[m+1];if(d){let D=M-w,F=P-E;w=w+D*(1-r),E=E+F*(1-r);let U=Math.sqrt(w*w+E*E);w/=U,E/=U}let A=this.forPathBevel?this._buffer.get(c?1:2):this._buffer.get(c?2:4),k=A*3,I=A*2,O={i,fi:l,topP:A+0,topN:A+0,bottomP:A+1,bottomN:A+1,pathBevelUCoord:a};return this._buffer.positions[k+0]=g,this._buffer.positions[k+1]=y,this._buffer.positions[k+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[k+0]=w*h,this._buffer.normals[k+1]=E*h,this._buffer.normals[k+2]=p,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=S,this.forPathBevel===!1&&(this._buffer.positions[k+3]=g,this._buffer.positions[k+4]=y,this._buffer.positions[k+5]=b,this._buffer.normals[k+3]=w*h,this._buffer.normals[k+4]=E*h,this._buffer.normals[k+5]=-p,this._buffer.uvs[I+2]=S,this._buffer.uvs[I+3]=x),c||(this.forPathBevel?(A+=1,k+=3,I+=2):(A+=2,k+=6,I+=4),O.topP=A+0,O.bottomP=A+1,this._buffer.positions[k+0]=g,this._buffer.positions[k+1]=y,this._buffer.positions[k+2]=(this.forPathBevel?this._bevel:this._depth)-b,this._buffer.normals[k+0]=M*h,this._buffer.normals[k+1]=P*h,this._buffer.normals[k+2]=p,this._buffer.uvs[I+0]=x,this._buffer.uvs[I+1]=S,this.forPathBevel===!1&&(this._buffer.positions[k+3]=g,this._buffer.positions[k+4]=y,this._buffer.positions[k+5]=b,this._buffer.normals[k+3]=M*h,this._buffer.normals[k+4]=P*h,this._buffer.normals[k+5]=-p,this._buffer.uvs[I+2]=S,this._buffer.uvs[I+3]=x)),this.vertexCache[n]=O,O}clone(){let e=new bA(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Gb(this.userData),e}},PN=class extends Mi{constructor(e,t=12,i={}){super(),this.type="ShapeGeometry",this.windingRule=Dr.ODD,this.elementType=Aa.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=e,this._curveSegments=t,this._triangulationOptions=Object.assign({windingRule:Dr.ODD,elementType:Aa.POLYGONS,polySize:3,vertexSize:2,strict:!0},i);let r=this._shape.extractShapePointsToFlatArray([],this._curveSegments),a=this._shape.shapeHoles.map(h=>h.extractShapePointsToFlatArray([],this._curveSegments)),n,s=!0,o=!0,l,u;for(let h=0,p=r.length/2;h<p;h++){let f=h*2,v=r[f+0],m=r[f+1];if(l!==void 0&&v!==l&&(s=!1),u!==void 0&&m!==u&&(o=!1),l=v,u=m,!s&&!o)break}if(!s&&!o)try{n=Zu({contours:[r,...a],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch{n=yA}let c=n?.vertexCount??1,d=n?.elementCount??1;if(this._positionAttribute=new ji(new Float32Array(c*3),3),this._normalAttribute=new ji(new Float32Array(c*3),3),this._uvAttribute=new ji(new Float32Array(c*2),2),this._indexAttribute=new ji(new Uint32Array(d*3),1),n){let h=1/0,p=-1/0,f=1/0,v=-1/0;for(let y=0,b=c;y<b;y++){let x=y*2,S=n.vertices[x+0],w=n.vertices[x+1];S<h&&(h=S),S>p&&(p=S),w<f&&(f=w),w>v&&(v=w)}let m=p-h,g=v-f;for(let y=0,b=c;y<b;y++){let x=y*2,S=n.vertices[x+0],w=n.vertices[x+1],E=(S-h)/m,M=(w-f)/g;this._positionAttribute.setXYZ(y,S,w,0),this._normalAttribute.setXYZ(y,0,0,1),this._uvAttribute.setXY(y,E,M)}for(let y=0,b=d;y<b;y++){let x=y*3,S=n.elements[x+0],w=n.elements[x+1],E=n.elements[x+2];this._indexAttribute.setX(x+0,S),this._indexAttribute.setX(x+1,w),this._indexAttribute.setX(x+2,E)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,(n?.elementCount??1)*3)}clone(){let e=new PN(this._shape,this._curveSegments);return e.userData=Gb(this.userData),e}},TN=class extends bA{constructor(e,t,i=0,r=12,a=3,n=Dr.ODD){super(e,t,i,r,a,n),this.type="ShapeGeometry"}_computeBufferEstimatedSize(e){return e.vertexCount*2*(2+this._bevelSegments)}_buildWall(e,t,i){let r=e[0];for(let a=0,n=r.boundary.vertexCount;a<n;a++){let s=this._buildBevelVert(t,r,a),o=this._buildBevelVert(t,r,(a+1)%n);i.push(o.topP,s.topN,s.bottomN),i.push(o.topP,s.bottomN,o.bottomP)}}clone(){let e=new TN(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return e.userData=Gb(this.userData),e}},_d=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i,r;let a=Object.assign({},t?.parameters??{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:Dr.ODD},e.parameters),n=Math.abs(a.width),s=Math.abs(a.height??a.width),o=Math.abs(a.depth??0),l=e.shape??t?.shape,u=l?.roundness??a.roundness;l!==void 0&&(l instanceof da?(l.width!==n||l.height!==s)&&l.applySize(n,s):l=new da(n,s).fromJSON(l),((i=e.parameters)==null?void 0:i.roundness)!==void 0&&((r=e.parameters)==null?void 0:r.roundness)>0&&l.update());let c=l??new da(n,s);return{parameters:Object.assign(a,{width:n,height:s,depth:o,roundness:u}),shape:c}}static build(e){let{depth:t,extrudeBevelSize:i,extrudeBevelSegments:r,subdivisions:a,roundness:n,windingRule:s}=e.parameters;e.shape.roundness=n;let o;return t<=0?o=new PN(e.shape,a,{windingRule:s}):o=new TN(e.shape,t,i,a,r,s),Object.assign(o,{userData:{...e,type:"VectorGeometry"}})}},kN=Math.PI*2,wA=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return i.angle=li.clamp(i.angle,0,360),{shape:e.shape&&e.shape instanceof da?e.shape:new da,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,angle:a,innerRadius:n,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}=e.parameters,u=e.shape,c=t*.5,d=i*.5,h=fce(u,c,d,a*Math.PI/180,r,n);u.isClosed=!0,u.update();let p;return a===0?(p=new Mi,p.setAttribute("position",new ri([],3))):p=_d.create({shape:u,parameters:{subdivisions:h,depth:s,extrudeBevelSize:o,extrudeBevelSegments:l}}),Object.assign(p,{userData:{...e,type:"EllipseGeometry"}})}};function fce(e,t,i,r,a,n){if(r>=kN)return a>30||a%4===0?(vce(e,t,i,n),Math.round(a/4)):lD(e,r,a,t,i,n);r=Math.max(r,.001);let s={x:0,y:i},o=r+Math.PI*.5,l={x:Math.cos(o)*t,y:Math.sin(o)*i},u=lce({px:s.x,py:s.y,cx:l.x,cy:l.y,rx:t,ry:i,largeArcFlag:r>Math.PI,sweepFlag:!0});return a>30||a%u.length===0?mce(e,s.x,s.y,u,a,t,i,n):lD(e,r,a,t,i,n)}function mce(e,t,i,r,a,n,s,o){let l=Math.round(a/r.length);e.addPoint(Dh(t,i));for(let u=0,c=r.length;u<c;u++){let d=r[u],h=e.points[u],p=Dh(d.x,d.y);h.controls[1].position.set(d.x1,d.y1),p.controls[0].position.set(d.x2,d.y2),e.addPoint(p)}return o>0?ON(e,n,s,o):e.addPoint(Dh(0,0)),l}function lD(e,t,i,r,a,n){let s=-t/i;for(let o=0;o<=i;o++){let l=s*o,u=Math.sin(l)*r,c=Math.cos(l)*a;e.addPoint(Dh(u,c))}return t<kN?n>0?ON(e,r,a,n):e.addPoint(Dh(0,0)):(e.removePoint(e.points[e.points.length-1]),n>0&&DN(e,r,a,n)),1}function vce(e,t,i,r=0,a=0,n=0){let s=.5522847498,o=t*s,l=i*s;e.addPoint(Kv(a-t,n,a-t,n-l,a-t,n+l)),e.addPoint(Kv(a,n+i,a-o,n+i,a+o,n+i)),e.addPoint(Kv(a+t,n,a+t,n+l,a+t,n-l)),e.addPoint(Kv(a,n-i,a+o,n-i,a-o,n-i)),r>0&&DN(e,t,i,r)}function Dh(e,t){return new Oh(li.generateUUID(),new Ce(e,t))}function Kv(e,t,i,r,a,n){let s=Dh(e,t);return s.controls[0].position.set(i,r),s.controls[1].position.set(a,n),s}function ON(e,t,i,r){IN(e,t,i,r).forEach(a=>e.addPoint(a))}function DN(e,t,i,r){let a=IN(e,t,i,r),n=new da;a.forEach(s=>n.addPoint(s)),n.isClosed=!0,e.shapeHoles.push(n)}function IN(e,t,i,r){let a=r*t/100,n=a*(Math.abs(i)/Math.abs(t)),s=new Ce(a/t,n/i),o=e.points.map(l=>{let u=l.clone();return u.uuid=li.generateUUID(),u}).reverse();return o.forEach(l=>{l.position.multiply(s);let u=l.controls[0].position.clone().multiply(s),c=l.controls[1].position.clone().multiply(s);l.controls[0].position.copy(c),l.controls[1].position.copy(u)}),o}var gce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},e.parameters),r=Math.abs(i.width),a=Math.abs(i.height??r),n=Math.abs(i.depth??r),s=Math.abs(Math.min(r,n))/2;return{parameters:Object.assign(i,{width:r,height:a,depth:n,radius:s,segments:Math.round(i.segments),pathSegments:Math.round(i.pathSegments),cornerSegments:Math.round(i.cornerSegments)})}}static build(e){let{width:t,height:i,depth:r,radius:a,revolutions:n,segments:s,pathRadius:o,pathType:l,pathSegments:u,cornerRadius:c,cornerSegments:d}=e.parameters,h=new LN(!1,t,i,r,a,n,s,o,l,u,c,d);return Object.assign(h,{userData:{...e,type:"HelixGeometry"}})}},ix=new Eh([0,0,0],1),LN=class extends Mi{constructor(e=!0,t=1,i=1,r=1,a=1,n=1,s=1,o=1,l=1,u=1,c=1,d=1){if(super(),n===0)return;let h=e&&n===1;h&&(d=0),c>100&&(c=100),c===0&&(d=0);let p=()=>new V,f=new V,v=p(),m=p(),g=p(),y,b,x,S,w,E,M,P,A=p(),k=p(),I=p(),O=p(),D=p(),F=p(),U=p(),z=p(),B=i-2*o+.001,W=B/n,R=Math.ceil(s*n),$=R+1,q=B/R,Z=-B/2,G=u+1,X=2*Math.PI/u,J=Math.PI/2/d,pe=.01,fe=Math.min((1-c/100)*o,o-pe),de=o-fe,ge=0,me=2,ke=d*me+me,ce=G*ke/me,le=ce+G*$,xe=Math.max(0,G*($+ke)),[Ne,pt,at]=[3,3,2].map(Le=>Array(xe*Le).fill(0)),Oe=[],Ye=a-o;function xt(Le,jt){let kt=Math.PI/2;E=jt*q,P=2*Math.PI*(E%W)/W+kt,E+=Z,M=Math.sin(P)*Ye,w=Math.cos(P)*Ye,e?Le.set(w,M,E):Le.set(w,E,M)}xt(f,-1e-10),xt(v,0),A.copy(f),xt(f,1);let ne=f.distanceTo(v),K=h?0:de+fe,ze=ne*R+2*K,ft=fe,te=ze-K;for(let Le=0;Le<=R;Le++){xt(m,Le),z.subVectors(m,A).normalize(),A.copy(m),F.copy(m).setComponent(+e+1,0).normalize(),U.crossVectors(z,F).normalize();let jt=Le===0,kt=Le===R,Qt=jt?3*Math.PI/2:J,ct=jt?ft:te,mt=jt?G:le,Et=jt?0:xe-G,Gt=z.clone().multiplyScalar(jt?-de:de).add(m),Ht=z.clone().multiplyScalar(jt?-1:1).normalize();for(let Ee=0;Ee<G;Ee++){let nt=Ee*X;if(k.addVectors(f.copy(F).multiplyScalar(o*Math.cos(nt)),v.copy(U).multiplyScalar(o*Math.sin(nt))),I.copy(k).normalize(),jt||kt){h||(ge=Et+Ee,[0,1,2].forEach(St=>{Ne[ge*3+St]=Gt.getComponent(St),pt[ge*3+St]=Ht.getComponent(St)}),at[ge*2]=+kt,at[ge*2+1]=Ee/u),v.copy(I).multiplyScalar(fe),g.addVectors(m,v);for(let St=0;St<d;St++){let $t=St*J+Qt;O.addVectors(f.copy(z).multiplyScalar(de*Math.sin($t)),v.copy(I).multiplyScalar(de*Math.cos($t))),D.copy(O).normalize(),v.addVectors(g,O),O.normalize(),ge=mt+St*G+Ee,[0,1,2].forEach(Yi=>{Ne[ge*3+Yi]=v.getComponent(Yi),pt[ge*3+Yi]=D.getComponent(Yi)});let Ei=+jt+Math.sin($t);at[ge*2]=(ct+de*Ei)/ze,at[ge*2+1]=Ee/u}}v.addVectors(m,k),ge=ce+Le*G+Ee,[0,1,2].forEach(St=>{Ne[ge*3+St]=v.getComponent(St),pt[ge*3+St]=I.getComponent(St)}),at[ge*2]=(K+Le*ne)/ze,at[ge*2+1]=Ee/u}}let Pe=$+2*d+me,[Te,Be]=[+h,Pe-1];for(let Le=Te;Le<=Be-1;Le++){let jt=h&&Le===Be-1;for(let kt=0;kt<G-1;kt++)y=Le*G+kt,b=y+1,x=(jt?kt:y)+G,S=(jt?kt+1:b)+G,Le===0?Oe.push(b,S,x):Le===Pe-2?Oe.push(y,b,x):Oe.push(y,b,x,b,S,x)}this.setIndex(Oe),this.setAttribute("position",new ri(Ne,3)),this.setAttribute("normal",new ri(pt,3)),this.setAttribute("uv",new ri(at,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let e=this.userData.parameters,t=Math.ceil(e.tubularSegments),i=e.radialSegments+1,r=Array.from(this.getIndex().array),a,n,s,o,l=6*(t-1)*e.radialSegments,u=t,c=u===t;for(let d=0;d<e.radialSegments;d++)a=u*i+d,n=a+1,s=(c?d:a)+i,o=(c?d+1:n)+i,r[l++]=a,r[l++]=n,r[l++]=s,r[l++]=n,r[l++]=o,r[l++]=s;return r.length=l,ix.array=r,ix.count=r.length,ix}},yce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,detail:0,corner:0,cornerSides:4},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,detail:a,corner:n,cornerSides:s}=e.parameters,o=a===0&&n!==0?new BN(t*.5,n,s):new DR(t*.5,a);return o.scale(1,i/t,r/t),Object.assign(o,{userData:{...e,type:"IcosahedronGeometry"}})}},BN=class extends mA{constructor(e=1,t=.2,i=4){let r=(1+Math.sqrt(5))/2,a=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],s="IcosahedronGeometry";super(a,n,s,e,t,i),this.type=s}static fromJSON(e){return new BN(e.radius,e.corner,e.cornerSides)}},bce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){var i;(((i=e.parameters)==null?void 0:i.points)??[]).forEach(a=>{Array.isArray(a)&&(a.x=a[0],a.y=a[1])});let r=Object.assign({},t?.parameters??{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},e.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??r.width)})}}static build(e){let{points:t,segments:i,verticalSegments:r}=e.parameters,a=new hy;a.moveTo(t[0].x,t[0].y),a.bezierCurveTo(t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y);let n=new ER(a.extractPoints(r).shape,i);return n.rotateZ(Math.PI),Object.assign(n,{userData:{...e,type:"LatheGeometry"}})}},$o=new zt,rx=new Tr,Zv=new V,Xy=class extends On{constructor(){super(),this.uuid=li.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(e){let t=new Ta().getNormalMatrix(e);for(let i=0,r=this.vertices.length;i<r;i++)this.vertices[i].applyMatrix4(e);for(let i=0,r=this.faces.length;i<r;i++){let a=this.faces[i];a.normal.applyMatrix3(t).normalize();for(let n=0,s=a.vertexNormals.length;n<s;n++)a.vertexNormals[n].applyMatrix3(t).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(e){return $o.makeRotationX(e),this.applyMatrix4($o),this}rotateY(e){return $o.makeRotationY(e),this.applyMatrix4($o),this}rotateZ(e){return $o.makeRotationZ(e),this.applyMatrix4($o),this}translate(e,t,i){return $o.makeTranslation(e,t,i),this.applyMatrix4($o),this}scale(e,t,i){return $o.makeScale(e,t,i),this.applyMatrix4($o),this}lookAt(e){return rx.lookAt(e),rx.updateMatrix(),this.applyMatrix4(rx.matrix),this}fromBufferGeometry(e){let t=this,i=e.index!==null?e.index:void 0,r=e.attributes;if(r.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let a=r.position,n=r.normal,s=r.color,o=r.uv,l=r.uv2;l!==void 0&&(this.faceVertexUvs[1]=[]);for(let d=0;d<a.count;d++)t.vertices.push(new V().fromBufferAttribute(a,d)),s!==void 0&&t.colors.push(new Bi().fromBufferAttribute(s,d));function u(d,h,p,f){let v=s===void 0?[]:[t.colors[d].clone(),t.colors[h].clone(),t.colors[p].clone()],m=n===void 0?[]:[new V().fromBufferAttribute(n,d),new V().fromBufferAttribute(n,h),new V().fromBufferAttribute(n,p)],g=new X2(d,h,p,m,v,f);t.faces.push(g),o!==void 0&&t.faceVertexUvs[0].push([new Ce().fromBufferAttribute(o,d),new Ce().fromBufferAttribute(o,h),new Ce().fromBufferAttribute(o,p)]),l!==void 0&&t.faceVertexUvs[1].push([new Ce().fromBufferAttribute(l,d),new Ce().fromBufferAttribute(l,h),new Ce().fromBufferAttribute(l,p)])}let c=e.groups;if(c.length>0)for(let d=0;d<c.length;d++){let h=c[d],p=h.start,f=h.count;for(let v=p,m=p+f;v<m;v+=3)i!==void 0?u(i.getX(v),i.getX(v+1),i.getX(v+2),h.materialIndex):u(v,v+1,v+2,h.materialIndex)}else if(i!==void 0)for(let d=0;d<i.count;d+=3)u(i.getX(d),i.getX(d+1),i.getX(d+2));else for(let d=0;d<a.count;d+=3)u(d,d+1,d+2);return this.computeFaceNormals(),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zv).negate(),this.translate(Zv.x,Zv.y,Zv.z),this}normalize(){this.computeBoundingSphere();let e=this.boundingSphere.center,t=this.boundingSphere.radius,i=t===0?1:1/t,r=new zt;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix4(r),this}computeFaceNormals(){let e=new V,t=new V;for(let i=0,r=this.faces.length;i<r;i++){let a=this.faces[i],n=this.vertices[a.a],s=this.vertices[a.b],o=this.vertices[a.c];e.subVectors(o,s),t.subVectors(n,s),e.cross(t),e.normalize(),a.normal.copy(e)}}computeVertexNormals(e=!0){let t=new Array(this.vertices.length);for(let i=0,r=this.vertices.length;i<r;i++)t[i]=new V;if(e){let i=new V,r=new V;for(let a=0,n=this.faces.length;a<n;a++){let s=this.faces[a],o=this.vertices[s.a],l=this.vertices[s.b],u=this.vertices[s.c];i.subVectors(u,l),r.subVectors(o,l),i.cross(r),t[s.a].add(i),t[s.b].add(i),t[s.c].add(i)}}else{this.computeFaceNormals();for(let i=0,r=this.faces.length;i<r;i++){let a=this.faces[i];t[a.a].add(a.normal),t[a.b].add(a.normal),t[a.c].add(a.normal)}}for(let i=0,r=this.vertices.length;i<r;i++)t[i].normalize();for(let i=0,r=this.faces.length;i<r;i++){let a=this.faces[i],n=a.vertexNormals;n.length===3?(n[0].copy(t[a.a]),n[1].copy(t[a.b]),n[2].copy(t[a.c])):(n[0]=t[a.a].clone(),n[1]=t[a.b].clone(),n[2]=t[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let e=0,t=this.faces.length;e<t;e++){let i=this.faces[e],r=i.vertexNormals;r.length===3?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]);for(let a=0,n=r.vertexNormals.length;a<n;a++)r.__originalVertexNormals[a]?r.__originalVertexNormals[a].copy(r.vertexNormals[a]):r.__originalVertexNormals[a]=r.vertexNormals[a].clone()}let e=new Xy;e.faces=this.faces;for(let t=0,i=this.morphTargets.length;t<i;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];let a=this.morphNormals[t].faceNormals,n=this.morphNormals[t].vertexNormals;for(let s=0,o=this.faces.length;s<o;s++){let l=new V,u={a:new V,b:new V,c:new V};a.push(l),n.push(u)}}let r=this.morphNormals[t];e.vertices=this.morphTargets[t].vertices,e.computeFaceNormals(),e.computeVertexNormals();for(let a=0,n=this.faces.length;a<n;a++){let s=this.faces[a],o=r.faceNormals[a],l=r.vertexNormals[a];o.copy(s.normal),l.a.copy(s.vertexNormals[0]),l.b.copy(s.vertexNormals[1]),l.c.copy(s.vertexNormals[2])}}for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t];r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ba),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ws),this.boundingSphere.setFromPoints(this.vertices)}merge(e,t,i=0){if(!(e&&e.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);return}let r,a=this.vertices.length,n=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.colors,c=e.colors;t!==void 0&&(r=new Ta().getNormalMatrix(t));for(let d=0,h=s.length;d<h;d++){let p=s[d].clone();t!==void 0&&p.applyMatrix4(t),n.push(p)}for(let d=0,h=c.length;d<h;d++)u.push(c[d].clone());for(let d=0,h=l.length;d<h;d++){let p=l[d],f,v,m=p.vertexNormals,g=p.vertexColors,y=new X2(p.a+a,p.b+a,p.c+a);y.normal.copy(p.normal),r!==void 0&&y.normal.applyMatrix3(r).normalize();for(let b=0,x=m.length;b<x;b++)f=m[b].clone(),r!==void 0&&f.applyMatrix3(r).normalize(),y.vertexNormals.push(f);y.color.copy(p.color);for(let b=0,x=g.length;b<x;b++)v=g[b],y.vertexColors.push(v.clone());y.materialIndex=p.materialIndex+i,o.push(y)}for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let p=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let f=0,v=p.length;f<v;f++){let m=p[f],g=[];for(let y=0,b=m.length;y<b;y++)g.push(m[y].clone());this.faceVertexUvs[d].push(g)}}}mergeMesh(e){if(!(e&&e.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);return}e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)}mergeVertices(e=4){let t={},i=[],r=[],a=Math.pow(10,e);for(let o=0,l=this.vertices.length;o<l;o++){let u=this.vertices[o],c=Math.round(u.x*a)+"_"+Math.round(u.y*a)+"_"+Math.round(u.z*a);t[c]===void 0?(t[c]=o,i.push(this.vertices[o]),r[o]=i.length-1):r[o]=r[t[c]]}let n=[];for(let o=0,l=this.faces.length;o<l;o++){let u=this.faces[o];u.a=r[u.a],u.b=r[u.b],u.c=r[u.c];let c=[u.a,u.b,u.c];for(let d=0;d<3;d++)if(c[d]===c[(d+1)%3]){n.push(o);break}}for(let o=n.length-1;o>=0;o--){let l=n[o];this.faces.splice(l,1);for(let u=0,c=this.faceVertexUvs.length;u<c;u++)this.faceVertexUvs[u].splice(l,1)}let s=this.vertices.length-i.length;return this.vertices=i,s}setFromPoints(e){this.vertices=[];for(let t=0,i=e.length;t<i;t++){let r=e[t];this.vertices.push(new V(r.x,r.y,r.z||0))}return this}sortFacesByMaterialIndex(){let e=this.faces,t=e.length;for(let o=0;o<t;o++)e[o]._id=o;function i(o,l){return o.materialIndex-l.materialIndex}e.sort(i);let r=this.faceVertexUvs[0],a=this.faceVertexUvs[1],n,s;r&&r.length===t&&(n=[]),a&&a.length===t&&(s=[]);for(let o=0;o<t;o++){let l=e[o]._id;n&&n.push(r[l]),s&&s.push(a[l])}n&&(this.faceVertexUvs[0]=n),s&&(this.faceVertexUvs[1]=s)}toJSON(){let e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),this.parameters!==void 0){let p=this.parameters;for(let f in p)p[f]!==void 0&&(e[f]=p[f]);return e}let t=[];for(let p=0;p<this.vertices.length;p++){let f=this.vertices[p];t.push(f.x,f.y,f.z)}let i=[],r=[],a={},n=[],s={},o=[],l={};for(let p=0;p<this.faces.length;p++){let f=this.faces[p],v=!0,m=!1,g=this.faceVertexUvs[0][p]!==void 0,y=f.normal.length()>0,b=f.vertexNormals.length>0,x=f.color.r!==1||f.color.g!==1||f.color.b!==1,S=f.vertexColors.length>0,w=0;if(w=u(w,0,0),w=u(w,1,v),w=u(w,2,m),w=u(w,3,g),w=u(w,4,y),w=u(w,5,b),w=u(w,6,x),w=u(w,7,S),i.push(w),i.push(f.a,f.b,f.c),i.push(f.materialIndex),g){let E=this.faceVertexUvs[0][p];i.push(h(E[0]),h(E[1]),h(E[2]))}if(y&&i.push(c(f.normal)),b){let E=f.vertexNormals;i.push(c(E[0]),c(E[1]),c(E[2]))}if(x&&i.push(d(f.color)),S){let E=f.vertexColors;i.push(d(E[0]),d(E[1]),d(E[2]))}}function u(p,f,v){return v?p|1<<f:p&~(1<<f)}function c(p){let f=p.x.toString()+p.y.toString()+p.z.toString();return a[f]!==void 0||(a[f]=r.length/3,r.push(p.x,p.y,p.z)),a[f]}function d(p){let f=p.r.toString()+p.g.toString()+p.b.toString();return s[f]!==void 0||(s[f]=n.length,n.push(p.getHex())),s[f]}function h(p){let f=p.x.toString()+p.y.toString();return l[f]!==void 0||(l[f]=o.length/2,o.push(p.x,p.y)),l[f]}return e.data={},e.data.vertices=t,e.data.normals=r,n.length>0&&(e.data.colors=n),o.length>0&&(e.data.uvs=[o]),e.data.faces=i,e}clone(){return new Xy().copy(this)}copy(e){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;let t=e.vertices;for(let d=0,h=t.length;d<h;d++)this.vertices.push(t[d].clone());let i=e.colors;for(let d=0,h=i.length;d<h;d++)this.colors.push(i[d].clone());let r=e.faces;for(let d=0,h=r.length;d<h;d++)this.faces.push(r[d].clone());for(let d=0,h=e.faceVertexUvs.length;d<h;d++){let p=e.faceVertexUvs[d];this.faceVertexUvs[d]===void 0&&(this.faceVertexUvs[d]=[]);for(let f=0,v=p.length;f<v;f++){let m=p[f],g=[];for(let y=0,b=m.length;y<b;y++){let x=m[y];g.push(x.clone())}this.faceVertexUvs[d].push(g)}}let a=e.morphTargets;for(let d=0,h=a.length;d<h;d++){let p={};if(p.name=a[d].name,a[d].vertices!==void 0){p.vertices=[];for(let f=0,v=a[d].vertices.length;f<v;f++)p.vertices.push(a[d].vertices[f].clone())}if(a[d].normals!==void 0){p.normals=[];for(let f=0,v=a[d].normals.length;f<v;f++)p.normals.push(a[d].normals[f].clone())}this.morphTargets.push(p)}let n=e.morphNormals;for(let d=0,h=n.length;d<h;d++){let p={};if(n[d].vertexNormals!==void 0){p.vertexNormals=[];for(let f=0,v=n[d].vertexNormals.length;f<v;f++){let m=n[d].vertexNormals[f],g={};g.a=m.a.clone(),g.b=m.b.clone(),g.c=m.c.clone(),p.vertexNormals.push(g)}}if(n[d].faceNormals!==void 0){p.faceNormals=[];for(let f=0,v=n[d].faceNormals.length;f<v;f++)p.faceNormals.push(n[d].faceNormals[f].clone())}this.morphNormals.push(p)}let s=e.skinWeights;for(let d=0,h=s.length;d<h;d++)this.skinWeights.push(s[d].clone());let o=e.skinIndices;for(let d=0,h=o.length;d<h;d++)this.skinIndices.push(o[d].clone());let l=e.lineDistances;for(let d=0,h=l.length;d<h;d++)this.lineDistances.push(l[d]);let u=e.boundingBox;u!==null&&(this.boundingBox=u.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}toBufferGeometry(){let e=new wce().fromGeometry(this),t=new Mi,i=new Float32Array(e.vertices.length*3);if(t.setAttribute("position",Qv.call(new ji(i,3),e.vertices)),e.normals.length>0){let r=new Float32Array(e.normals.length*3);t.setAttribute("normal",Qv.call(new ji(r,3),e.normals))}if(e.colors.length>0){let r=new Float32Array(e.colors.length*3);t.setAttribute("color",uD.call(new ji(r,3),e.colors))}if(e.uvs.length>0){let r=new Float32Array(e.uvs.length*2);t.setAttribute("uv",cD.call(new ji(r,2),e.uvs))}if(e.uvs2.length>0){let r=new Float32Array(e.uvs2.length*2);t.setAttribute("uv2",cD.call(new ji(r,2),e.uvs2))}t.groups=e.groups;for(let r in e.morphTargets){let a=[],n=e.morphTargets[r];for(let s=0,o=n.length;s<o;s++){let l=n[s],u=new ri(l.data.length*3,3);u.name=l.name,a.push(Qv.call(u,l.data))}t.morphAttributes[r]=a}if(e.skinIndices.length>0){let r=new ri(e.skinIndices.length*4,4);t.setAttribute("skinIndex",dD.call(r,e.skinIndices))}if(e.skinWeights.length>0){let r=new ri(e.skinWeights.length*4,4);t.setAttribute("skinWeight",dD.call(r,e.skinWeights))}return e.boundingSphere!==null&&(t.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(t.boundingBox=e.boundingBox.clone()),t}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(e){let t=new Mi,i=e.geometry;if(e.isPoints||e.isLine){let r=new ri(i.vertices.length*3,3),a=new ri(i.colors.length*3,3);if(t.setAttribute("position",Qv.call(r,i.vertices)),t.setAttribute("color",uD.call(a,i.colors)),i.lineDistances&&i.lineDistances.length===i.vertices.length){let n=new ri(i.lineDistances.length,1);t.setAttribute("lineDistance",xce.call(n,i.lineDistances))}i.boundingSphere!==null&&(t.boundingSphere=i.boundingSphere.clone()),i.boundingBox!==null&&(t.boundingBox=i.boundingBox.clone())}else e.isMesh&&(t=i.toBufferGeometry());return t}};Xy.prototype.isGeometry=!0;var wce=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(e){let t=[],i,r,a,n=e.faces;for(r=0;r<n.length;r++){let s=n[r];s.materialIndex!==a&&(a=s.materialIndex,i!==void 0&&(i.count=r*3-i.start,t.push(i)),i={start:r*3,materialIndex:a})}i!==void 0&&(i.count=r*3-i.start,t.push(i)),this.groups=t}fromGeometry(e){let t=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,n=r[1]&&r[1].length>0,s=e.morphTargets,o=s.length,l;if(o>0){l=[];for(let m=0;m<o;m++)l[m]={name:s[m].name,data:[]};this.morphTargets.position=l}let u=e.morphNormals,c=u.length,d;if(c>0){d=[];for(let m=0;m<c;m++)d[m]={name:u[m].name,data:[]};this.morphTargets.normal=d}let h=e.skinIndices,p=e.skinWeights,f=h.length===i.length,v=p.length===i.length;i.length>0&&t.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let m=0;m<t.length;m++){let g=t[m];this.vertices.push(i[g.a],i[g.b],i[g.c]);let y=g.vertexNormals;if(y.length===3)this.normals.push(y[0],y[1],y[2]);else{let x=g.normal;this.normals.push(x,x,x)}let b=g.vertexColors;if(b.length===3)this.colors.push(b[0],b[1],b[2]);else{let x=g.color;this.colors.push(x,x,x)}if(a===!0){let x=r[0][m];x!==void 0?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",m),this.uvs.push(new Ce,new Ce,new Ce))}if(n===!0){let x=r[1][m];x!==void 0?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",m),this.uvs2.push(new Ce,new Ce,new Ce))}for(let x=0;x<o;x++){let S=s[x].vertices;l[x].data.push(S[g.a],S[g.b],S[g.c])}for(let x=0;x<c;x++){let S=u[x].vertexNormals[m];d[x].data.push(S.a,S.b,S.c)}f&&this.skinIndices.push(h[g.a],h[g.b],h[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),this}},X2=class{constructor(e,t,i,r,a,n=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new V,this.vertexNormals=Array.isArray(r)?r:[],this.color=a&&a.isColor?a:new Bi,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=n}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}};function xce(e){return this.array.set(e),this}function uD(e){let t=this.array,i=0;for(let r=0,a=e.length;r<a;r++){let n=e[r];n===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),n=new Bi),t[i++]=n.r,t[i++]=n.g,t[i++]=n.b}return this}function cD(e){let t=this.array,i=0;for(let r=0,a=e.length;r<a;r++){let n=e[r];n===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),n=new Ce),t[i++]=n.x,t[i++]=n.y}return this}function Qv(e){let t=this.array,i=0;for(let r=0,a=e.length;r<a;r++){let n=e[r];n===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),n=new V),t[i++]=n.x,t[i++]=n.y,t[i++]=n.z}return this}function dD(e){let t=this.array,i=0;for(let r=0,a=e.length;r<a;r++){let n=e[r];n===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),n=new Wi),t[i++]=n.x,t[i++]=n.y,t[i++]=n.z,t[i++]=n.w}return this}var Sce=["a","b","c"];function Cce(e,t){switch(t){case"c":return e.c;case"b":return e.b;case"a":default:return e.a}}function ax(e,t,i){let r=Math.min(e,t),a=Math.max(e,t),n=r+"_"+a;return i.get(n)}function nx(e,t,i,r,a,n){let s=Math.min(e,t),o=Math.max(e,t),l=s+"_"+o,u;if(r.has(l))u=r.get(l);else{let c=i[s],d=i[o];u={a:c,b:d,newEdge:null,faces:[]},r.set(l,u)}u.faces.push(a),n[e].edges.push(u),n[t].edges.push(u)}function _ce(e,t,i,r){let a,n,s;for(a=0,n=e.length;a<n;a++)i[a]={edges:[]};for(a=0,n=t.length;a<n;a++)s=t[a],nx(s.a,s.b,e,r,s,i),nx(s.b,s.c,e,r,s,i),nx(s.c,s.a,e,r,s,i)}function Jv(e,t,i,r,a){e.push(new X2(t,i,r,void 0,void 0,a))}function Xd(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function eg(e,t,i,r){e.push([t.clone(),i.clone(),r.clone()])}var Mce=class{constructor(e=1){this.subdivisions=e}modify(e){e instanceof Mi?e=new Xy().fromBufferGeometry(e):e=e.clone(),e.mergeVertices();let t=this.subdivisions;for(;t-- >0;)this._smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),e}_smooth(e){let t=new V,i,r,a,n,s,o=e.vertices,l=e.faces,u=e.faceVertexUvs[0],c=u!==void 0&&u.length>0,d=[],h=new Map;_ce(o,l,d,h);let p=[],f,v,m,g,y,b,x;for(let pe of Array.from(h.keys())){for(v=h.get(pe),m=new V,y=3/8,b=1/8,x=v.faces.length,x!=2&&(y=.5,b=0,x!=1),m.addVectors(v.a,v.b).multiplyScalar(y),t.set(0,0,0),n=0;n<x;n++){for(g=v.faces[n],s=0;s<3&&(f=o[Cce(g,Sce[s])],!(f!==v.a&&f!==v.b));s++);f&&t.add(f)}t.multiplyScalar(b),m.add(t),v.newEdge=p.length,p.push(m)}let S,w,E,M,P,A,k,I=[];for(r=0,a=o.length;r<a;r++){for(A=o[r],P=d[r].edges,i=P.length,i==3?S=3/16:i>3&&(S=3/(8*i)),w=1-i*Number(S),E=S,i<=2&&(i==2?(w=3/4,E=1/8):i==1||i==0),k=A.clone().multiplyScalar(w),t.set(0,0,0),n=0;n<i;n++)M=P[n],f=M.a!==A?M.a:M.b,t.add(f);t.multiplyScalar(Number(E)),k.add(t),I.push(k)}let O=I.concat(p),D=I.length,F,U,z,B=[],W=[],R,$,q,Z,G=new Ce,X=new Ce,J=new Ce;for(r=0,a=l.length;r<a;r++)g=l[r],F=Number(ax(g.a,g.b,h).newEdge)+D,U=Number(ax(g.b,g.c,h).newEdge)+D,z=Number(ax(g.c,g.a,h).newEdge)+D,Jv(B,F,U,z,g.materialIndex),Jv(B,g.a,F,z,g.materialIndex),Jv(B,g.b,U,F,g.materialIndex),Jv(B,g.c,z,U,g.materialIndex),c&&(R=u[r],$=R[0],q=R[1],Z=R[2],G.set(Xd($.x,q.x),Xd($.y,q.y)),X.set(Xd(q.x,Z.x),Xd(q.y,Z.y)),J.set(Xd($.x,Z.x),Xd($.y,Z.y)),eg(W,G,X,J),eg(W,$,G,J),eg(W,q,X,G),eg(W,Z,J,X));e.vertices=O,e.faces=B,c&&(e.faceVertexUvs[0]=W)}},La=new V,Ece=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=e.geometry??t?.geometry??new Mi().copy(new ko(100,100,100)),r;t===void 0?(i.computeBoundingBox(),i.boundingBox.getSize(La),r={width:La.x,height:La.y,depth:La.z,subdivisions:0}):r=t.parameters;let a={...r,...e.parameters};return{parameters:{width:Math.abs(a.width),height:Math.abs(a.height),depth:Math.abs(a.depth),subdivisions:Math.abs(a.subdivisions)},geometry:i}}static build(e){let{width:t,height:i,depth:r,subdivisions:a}=e.parameters,n=e.geometry??new Mi().copy(new ko(100,100,100)),s=n.userData.parameters;s===void 0?(n.computeBoundingBox(),n.boundingBox.getSize(La)):La.set(s.width,s.height,s.depth),(t!==La.x||i!==La.y||r!==La.z)&&n.scale(La.x===0?1:t/La.x,La.y===0?1:i/La.y,La.z===0?1:r/La.z);let o=n.originalGeometry;try{a>0?(o===void 0||s?.subdivisions!==a)&&(o===void 0&&(o=n),n=new Mce(a).modify(o).toBufferGeometry()):(o!==void 0&&(n=o),o=void 0,n.getAttribute("normal")===void 0&&n.computeVertexNormals())}catch{o!==void 0&&(n=o),o=void 0,n.getAttribute("normal")===void 0&&n.computeVertexNormals()}return o!==void 0&&Object.assign(n,{originalGeometry:o}),delete e.geometry,Object.assign(n,{userData:{...e,type:"NonParametricGeometry"}})}static loadFromUrl(e,t,i){new jR(i).load(e,r=>{let a=this.normalizeInputs({geometry:r});r.boundingBox.getSize(La);let n=100/La.x;Object.assign(a.parameters,{width:100,height:La.y*n,depth:La.z*n}),t(this.build(a))})}},zN=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters);return{shape:e.shape&&e.shape instanceof da?e.shape:new da,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,spikes:r,cornerRadius:a,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o}=e.parameters,l=e.shape,u=t*.5,c=i*.5,d=0,h=0,p=2*Math.PI/r;for(let v=0;v<r;v++){let m=p*v,g=d+Math.sin(m)*u,y=h+Math.cos(m)*c;l.addPoint(l.createPoint(g,y))}l.isClosed=!0;for(let v=0,m=l.points.length;v<m;v++)l.points[v].roundness=a;l.roundness=a,l.update();let f=_d.create({shape:l,parameters:{roundness:a,depth:n,extrudeBevelSize:s,extrudeBevelSegments:o}});return Object.assign(f,{userData:{...e,type:"PolygonGeometry"}})}},Ace=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,radialSegments:a,heightSegments:n,openEnded:s,cornerRadius:o,cornerSegments:l}=e.parameters,u=new Tce(t*.5,i,a,n,s,o,l);return u.scale(1,1,r/t),Object.assign(u,{userData:{...e,type:"PyramidGeometry"}})}};function Qp(e,t,i){i.x=e.x*t.x,i.y=e.y,i.z=e.x*t.y}function sx(e,t,i,r,a,n){let s=t.clone().sub(e),o=i.clone().sub(e),l=s.angleTo(o);if(s.normalize(),o.normalize(),r===a){let u=s.add(o).normalize();n.copy(e).addScaledVector(u,r/Math.sin(l/2))}else{let u=s.angleTo(o);n.copy(e),n.addScaledVector(s,a/Math.sin(u)),n.addScaledVector(o,r/Math.sin(u))}}function Pce(e,t,i){let r=e.clone().sub(t),a=i.clone().sub(t);return r.projectOnVector(a),r.add(t)}var Tce=class extends Mi{constructor(e=.5,t=1,i=4,r=1,a=!1,n=0,s=4){super(),i=Math.floor(Math.max(3,i)),r=Math.floor(r),s=Math.floor(s);let o=[],l=[],u=[],c=[],d=0,h=t/2,p=Math.PI/i,f=e*Math.cos(Math.PI/i),v=2*Math.PI/i,m=(i-2)*Math.PI/i,g=Math.PI-m,y=new V(0,-h,0),b=new V(0,h,0),x=new Ce(e,-h),S=new Ce(f,-h),w=new Ce(0,b.y).sub(S),E=new Ce(0,b.y).sub(x),M=new Ce(w.y,-w.x).normalize(),P=new Ce(E.y,-E.x).normalize(),A=e*Math.cos(Math.PI/i)*Math.tan((Math.PI-w.angle())/2)-1e-8;n=Math.min(n,A);let k;{let z=new V(M.x,M.y,0),B=new V(Math.cos(v)*z.x,z.y,Math.sin(v)*z.x);k=z.angleTo(B)}let I=n/Math.tan((Math.PI-w.angle())/2),O=n/Math.tan((Math.PI-k)/2),D=new V;if(!a){l.push(y.x,y.y,y.z),u.push(0,-1,0),c.push(0,0);let z=d++,B=[],W=x.clone(),R=I/Math.cos(Math.PI/i);W.x-=R;for(let $=0;$<i;$++){let q=$/i*Math.PI*2+p,Z=new Ce(Math.sin(q),Math.cos(q));Qp(W,Z,D),l.push(D.x,D.y,D.z),u.push(0,-1,0),c.push(0,0),B.push(d++)}for(let $=0;$<B.length;$++)o.push(B[$],z,B[($+1)%B.length])}{let z=new V,B=new V,W=new V,R=new V,$=new V,q=new V;for(let Z=0;Z<i;Z++){let G=Z/i*Math.PI*2+p,X=(Z+.5)/i*Math.PI*2+p,J=(Z+1)/i*Math.PI*2+p,pe=new Ce(Math.sin(G),Math.cos(G)),fe=new Ce(Math.sin(X),Math.cos(X)),de=new Ce(Math.sin(J),Math.cos(J));Qp(x,pe,B),Qp(x,de,W),Qp(M,fe,z),sx(b,B,W,O,O,R),l.push(R.x,R.y,R.z),sx(B,b,W,O,I,$),l.push($.x,$.y,$.z),sx(W,B,b,I,O,q),l.push(q.x,q.y,q.z),u.push(z.x,z.y,z.z),u.push(z.x,z.y,z.z),u.push(z.x,z.y,z.z),c.push(0,0),c.push(0,0),c.push(0,0);let ge=d++,me=d++,ke=d++;if(o.push(ge,me,ke),n>0){{let xe=B.clone().add(W).multiplyScalar(.5),Ne=b.clone().sub(xe).normalize(),pt=y.clone().sub(xe).normalize().add(Ne).normalize().multiplyScalar(-1),at=q.clone().sub($);F(xe,at,pt,w.angle())}let ce,le;{let xe=new V;Qp(P,de,xe);let Ne=q.clone().add(R).multiplyScalar(.5);Ne=Pce(Ne,W,b);let pt=q.clone().sub(R);[ce,le]=F(Ne,pt,xe,k,R.y)}{let xe=ce,Ne=xe.clone().setY(0).normalize(),pt=new V(0,-1,0),at=Ne.clone().cross(pt);U(xe,Ne,pt,at)}{let xe=w.angle(),Ne=Math.PI-xe,pt=b.clone();pt.y-=n/Math.sin(xe-Math.PI/2);let at=new V,Oe=[];for(let xt=0;xt<s;xt++){let ne=[],K=Math.PI/2-Ne*xt/s,ze=Math.cos(K),ft=Math.sin(K),te=X;for(let Pe=0;Pe<=xt;Pe++){let Te=Math.cos(te),Be=Math.sin(te);z.x=ze*Be,z.y=ft,z.z=ze*Te,at.copy(pt).addScaledVector(z,n),l.push(at.x,at.y,at.z),u.push(z.x,z.y,z.z),c.push(0,0),ne.push(d++),te+=Math.PI*2/xt/i}Oe.push(ne)}le.reverse(),Oe.push(le);let Ye=Oe.length-1;for(let xt=0;xt<Ye;xt++){let ne=Oe[xt],K=Oe[xt+1],ze=ne.length-1;o.push(K[1],ne[0],K[0]);for(let ft=1;ft<=ze;ft++)o.push(ne[ft],ne[ft-1],K[ft]),o.push(K[ft+1],ne[ft],K[ft])}}}}}this.setIndex(o),this.setAttribute("position",new ri(l,3)),this.setAttribute("normal",new ri(u,3)),this.setAttribute("uv",new ri(c,2));function F(z,B,W,R,$){let q=-R/2,Z=(Math.PI-R)/2,G=B.clone().normalize().cross(W);z.addScaledVector(W,-n/Math.sin(Z));let X=new V,J=new V,pe=1,fe=d,de=[];for(let ge=0;ge<=s;ge++){let me=q+ge/s*R;J.set(0,0,0),J.addScaledVector(G,Math.sin(me)),J.addScaledVector(W,Math.cos(me));for(let ke=0;ke<=pe;ke++){let ce=ke/pe-.5;if(X.copy(z),X.addScaledVector(B,ce),X.addScaledVector(J,n),$!=null){let le=Math.max(0,X.y-$);X.addScaledVector(B,-le/B.y)}l.push(X.x,X.y,X.z),u.push(J.x,J.y,J.z),c.push(0,0),ke===0&&de.push(d),d++}}for(let ge=0;ge<s;ge++)for(let me=0;me<pe;me++){let ke=fe+me+(pe+1)*ge,ce=ke+(pe+1),le=ce+1,xe=ke+1;o.push(ke,ce,xe),o.push(ce,le,xe)}return[z.clone().addScaledVector(B,.5),de]}function U(z,B,W,R){let $=Math.PI/2,q=E.angle()-$,Z=[],G=new V,X=new V;for(let pe=0;pe<=s;pe++){let fe=[],de=pe/s;for(let ge=0;ge<=pe;ge++){let me=((pe?ge/pe:0)-.5)*g,ke=Math.cos(me),ce=Math.sin(me),le=Math.atan(Math.tan(q)*ke),xe=($+le)*de,Ne=Math.cos(xe),pt=Math.sin(xe);G.set(0,0,0),G.addScaledVector(B,pt*ke),G.addScaledVector(W,Ne),G.addScaledVector(R,pt*ce),X.copy(z).addScaledVector(G,n),l.push(X.x,X.y,X.z),u.push(G.x,G.y,G.z),c.push(0,0),fe.push(d++)}Z.push(fe)}let J=Z.length-1;for(let pe=0;pe<J;pe++){let fe=Z[pe],de=Z[pe+1],ge=fe.length-1;o.push(fe[0],de[1],de[0]);for(let me=1;me<=ge;me++)o.push(fe[me-1],fe[me],de[me]),o.push(fe[me],de[me+1],de[me])}}}},xA=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){let r=Object.assign({},i?.parameters??{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),a=Object.assign(i?.ui??{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof da?t.shape:new da,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs(r.height??r.width),depth:Math.abs(r.depth??0)}),ui:a}}static build(t){let i=t.shape,{width:r,height:a,cornerRadius:n,cornerType:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}=t.parameters,c={x:r*.5,y:a*.5},d={x:-c.x,y:-c.y},h={x:c.x,y:c.y};function p(S,w,E){return w>r&&E>a?Math.min(S*r/w,S*a/E):w>r?S*r/w:E>a?S*a/E:S}let f=[];f[0]=n[0]===0?0:p(n[0],n[0]+n[3],n[0]+n[1]),f[1]=n[1]===0?0:p(n[1],n[1]+n[2],n[1]+n[0]),f[2]=n[2]===0?0:p(n[2],n[2]+n[1],n[2]+n[3]),f[3]=n[3]===0?0:p(n[3],n[3]+n[0],n[3]+n[2]);let v=d.x,m=h.x,g=h.y,y=d.y;i.addPoint(i.createPoint(v,g)),i.addPoint(i.createPoint(m,g)),i.addPoint(i.createPoint(m,y)),i.addPoint(i.createPoint(v,y)),i.isClosed=!0;let b=!0;for(let S=0,w=i.points.length;S<w;S++)i.points[S].roundness=f[S],S>0&&f[S]!==f[S-1]&&(b=!1);b&&(i.roundness=f[0]),i.useCubicForRoundedCorners=s!==1,i.update();let x=_d.create({shape:i,parameters:{depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(x,{userData:{...t,type:"RectangleGeometry"}})}},kce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},e.parameters);return i.thetaLength=li.clamp(i.thetaLength,0,180),{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t=100,height:i=t,depth:r=t,widthSegments:a=64,heightSegments:n=64,phiStart:s,phiLength:o,thetaStart:l,thetaLength:u}=e.parameters,c;return u===0?(c=new Mi,c.setAttribute("position",new ri([],3))):c=new Ah(.5*t,a,n,s,o,l,u*li.DEG2RAD),c.scale(1,i/t,r/t),Object.assign(c,{userData:{...e,type:"SphereGeometry"}})}},Oce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,widthSegments:8,heightSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:0})}}static build(e){let{width:t=100,height:i=t,widthSegments:r=8,heightSegments:a=8}=e.parameters,n=new su(t,i,r,a);return n.scale(1,1,1),Object.assign(n,{userData:{...e,type:"PlaneGeometry"}})}},Dce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,angle:90,cornerRadius:24,cornerSegments:8},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width)})}}static build(e){let{width:t,height:i,depth:r,angle:a,cornerRadius:n,cornerSegments:s}=e.parameters,o=new Ice(t,i,r,a,n,s);return Object.assign(o,{userData:{...e,type:"BackdropGeometry"}})}},Ice=class extends Mi{constructor(e=1,t=1,i=1,r=90,a=10,n=24){super(),this.type="BackdropGeometry";let s=[],o=[],l=[],u=.001;a==0&&(n=1),n=Math.max(1,Math.floor(n)),a=Math.min(a,100),r=Math.min(180-u,r),r*=Math.PI/180;let c=[],d=Math.PI/2,h=(pe=0,fe=0,de=0)=>new V(pe,fe,de),p=h(),f=h(),[v,m,g]=[t/2,e/2,i/2],y=-m,b=+m,[x,S,w]=[h(y,-v,+g),h(y,-v,-g),h(y,+v,-g)],E=(pe,fe=!1)=>Math.sin(pe-Math.PI/(1+ +fe)),M=(pe,fe=!1)=>Math.cos(pe-Math.PI/(1+ +fe));w.y=Math.sin(r)*t-v;let P=Math.cos(r)*t-g,A=x.z-u;r<=d?(w.z=Math.min(P,A),w.z==A&&(w.y-=(P-A)/Math.tan(d-r))):S.z=Math.min(S.z-P-g,x.z-u),p.subVectors(x,S),f.subVectors(w,S);let k=Math.min(p.length(),f.length())*a/100,I=k*Math.tan(r/2),O=k/Math.cos(r/2),D=p.clone().normalize().add(f.normalize()).setLength(O).add(S);p.set(0,E(r,!0),M(r,!0)),c.push([w,p.clone()]);let F=(Math.PI-r)/n;for(let pe=0;pe<=n;pe++){let fe=d+r+pe*F;p.set(0,Math.sin(fe)*I,Math.cos(fe)*I),p.add(D),f.set(0,E(fe),M(fe)),c.push([p.clone(),f.clone()])}c.push([x,h(0,1,0)]);let U=Math.sin(F/2)*I*2,z=c.length-1,B=c[0][0].distanceTo(c[1][0]),W=c[z-1][0].distanceTo(c[z][0]),R=B+U*n+W;c[0].push(1);for(let pe=0;pe<=n;pe++)c[pe+1].push(1-(B+pe*U)/R);c[z].push(0);let[$,q,Z]=c[0],G,X,J;for(let pe=1;pe<c.length;pe++)[G,X,J]=c[pe],s.push(y,$.y,$.z,y,G.y,G.z,b,$.y,$.z,b,$.y,$.z,y,G.y,G.z,b,G.y,G.z),o.push(0,q.y,q.z,0,X.y,X.z,0,q.y,q.z,0,q.y,q.z,0,X.y,X.z,0,X.y,X.z),l.push(0,Z,0,J,1,Z,1,Z,0,J,1,J),[$,q,Z]=[G,X,J];this.setAttribute("position",new ri(s,3)),this.setAttribute("normal",new ri(o,3)),this.setAttribute("uv",new ri(l,2))}},RN=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},e.parameters);return{shape:e.shape&&e.shape instanceof da?e.shape:new da,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i,innerRadiusPercent:r,spikes:a,cornerRadius:n,angle:s,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}=e.parameters,c=e.shape,d=t*.5,h=i*.5,p=0,f=0,v=s*Math.PI/360/a,m=Math.PI/2*3*-1,g=d*r/100,y=h*r/100;if(a===3&&r===50){v=2*Math.PI/a;for(let x=0;x<a;x++){let S=v*x,w=p+Math.sin(S)*d,E=f+Math.cos(S)*h;c.addPoint(c.createPoint(w,E))}}else for(let x=0;x<a;x++){let S=p+Math.cos(m)*d,w=f+Math.sin(m)*h;c.addPoint(c.createPoint(S,w)),m+=v,S=p+Math.cos(m)*g,w=f+Math.sin(m)*y,c.addPoint(c.createPoint(S,w)),m+=v}c.isClosed=!0;for(let x=0,S=c.points.length;x<S;x++)c.points[x].roundness=n;c.roundness=n,c.update();let b=_d.create({shape:c,parameters:{roundness:n,depth:o,extrudeBevelSize:l,extrudeBevelSegments:u}});return Object.assign(b,{userData:{...e,type:"StarGeometry"}})}},Lce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t,height:i}=e.parameters,r=new su(t,i);return Object.assign(r,{userData:{...e,type:"TextFrameGeometry"}})}},Bce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},e.parameters),r=Math.abs(i.width),a=Math.abs(i.height??i.width),n=Math.round(Math.abs(i.depth??i.width*.25));return{parameters:Object.assign(i,{width:r,height:a,depth:n})}}static build(e){let{width:t,height:i,depth:r,radialSegments:a,tubularSegments:n,arc:s,cornerRadius:o,cornerSegments:l}=e.parameters,u=zce(t,i,r,t*.5,s,n,0,0,a,o,l);return u.scale(1,i/t,1),Object.assign(u,{userData:{...e,type:"TorusGeometry"}})}};function zce(e,t,i,r,a,n,s,o,l,u,c){[t,i]=[i,t],s=t/2;let d=li.clamp(a/360,0,1);if(d===0){let h=new Mi;return h.setAttribute("position",new ri([],3)),h}return d===1&&(u=0),new LN(!0,e,t,i,r,d,n,s,o,l,u,c)}var Rce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},e.parameters);return{parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width),depth:Math.abs(i.depth??i.width),tube:i.tube??i.width*.125})}}static build(e){let{width:t,tube:i,tubularSegments:r,radialSegments:a,p:n,q:s}=e.parameters,o=t*.5;o!==i&&(o-=i);let l=new LR(o,i,r,a,n,s);return Object.assign(l,{userData:{...e,type:"TorusKnotGeometry"}})}},Nce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},e.parameters);return{shape:e.shape&&e.shape instanceof da?e.shape:new da,parameters:Object.assign(i,{width:Math.abs(i.width),height:Math.abs(i.height??i.width*(i.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(i.depth??0)})}}static build(e){let{width:t=100,height:i,cornerRadius:r,depth:a,extrudeBevelSize:n,extrudeBevelSegments:s,isRect:o}=e.parameters,l=e.shape,u=t*.5,c=i*.5;o?(l.addPoint(l.createPoint(-u,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))):(l.addPoint(l.createPoint(0,c)),l.addPoint(l.createPoint(u,-c)),l.addPoint(l.createPoint(-u,-c))),l.isClosed=!0;for(let h=0,p=l.points.length;h<p;h++)l.points[h].roundness=r;l.roundness=r,l.update();let d=_d.create({shape:l,parameters:{roundness:r,depth:a,extrudeBevelSize:n,extrudeBevelSegments:s}});return Object.assign(d,{userData:{...e,type:"TriangleGeometry"}})}};function Vce(e,t){let i=2*Math.PI;return(e%i+i)%i===(t%i+i)%i}var Fce=class{add(e,t,i){if(typeof arguments[0]!="string")for(let r in arguments[0])this.add(r,arguments[0][r],arguments[1]);else(Array.isArray(e)?e:[e]).forEach(function(r){this[r]=this[r]||[],t&&this[r][i?"unshift":"push"](t)},this)}run(e,t){this[e]=this[e]||[],this[e].forEach(function(i){i.call(t&&t.context?t.context:t,t)})}},jce=class{constructor(e){this.jsep=e,this.registered={}}register(...e){e.forEach(t=>{if(typeof t!="object"||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)})}},wt=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+wt.version}static addUnaryOp(e){return wt.max_unop_len=Math.max(e.length,wt.max_unop_len),wt.unary_ops[e]=1,wt}static addBinaryOp(e,t,i){return wt.max_binop_len=Math.max(e.length,wt.max_binop_len),wt.binary_ops[e]=t,i?wt.right_associative.add(e):wt.right_associative.delete(e),wt}static addIdentifierChar(e){return wt.additional_identifier_chars.add(e),wt}static addLiteral(e,t){return wt.literals[e]=t,wt}static removeUnaryOp(e){return delete wt.unary_ops[e],e.length===wt.max_unop_len&&(wt.max_unop_len=wt.getMaxKeyLen(wt.unary_ops)),wt}static removeAllUnaryOps(){return wt.unary_ops={},wt.max_unop_len=0,wt}static removeIdentifierChar(e){return wt.additional_identifier_chars.delete(e),wt}static removeBinaryOp(e){return delete wt.binary_ops[e],e.length===wt.max_binop_len&&(wt.max_binop_len=wt.getMaxKeyLen(wt.binary_ops)),wt.right_associative.delete(e),wt}static removeAllBinaryOps(){return wt.binary_ops={},wt.max_binop_len=0,wt}static removeLiteral(e){return delete wt.literals[e],wt}static removeAllLiterals(){return wt.literals={},wt}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(e){this.expr=e,this.index=0}static parse(e){return new wt(e).parse()}static getMaxKeyLen(e){return Math.max(0,...Object.keys(e).map(t=>t.length))}static isDecimalDigit(e){return e>=48&&e<=57}static binaryPrecedence(e){return wt.binary_ops[e]||0}static isIdentifierStart(e){return e>=65&&e<=90||e>=97&&e<=122||e>=128&&!wt.binary_ops[String.fromCharCode(e)]||wt.additional_identifier_chars.has(String.fromCharCode(e))}static isIdentifierPart(e){return wt.isIdentifierStart(e)||wt.isDecimalDigit(e)}throwError(e){let t=new Error(e+" at character "+this.index);throw t.index=this.index,t.description=e,t}runHook(e,t){if(wt.hooks[e]){let i={context:this,node:t};return wt.hooks.run(e,i),i.node}return t}searchHook(e){if(wt.hooks[e]){let t={context:this};return wt.hooks[e].find(function(i){return i.call(t.context,t),t.node}),t.node}}gobbleSpaces(){let e=this.code;for(;e===wt.SPACE_CODE||e===wt.TAB_CODE||e===wt.LF_CODE||e===wt.CR_CODE;)e=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let e=this.gobbleExpressions(),t=e.length===1?e[0]:{type:wt.COMPOUND,body:e};return this.runHook("after-all",t)}gobbleExpressions(e){let t=[],i,r;for(;this.index<this.expr.length;)if(i=this.code,i===wt.SEMCOL_CODE||i===wt.COMMA_CODE)this.index++;else if(r=this.gobbleExpression())t.push(r);else if(this.index<this.expr.length){if(i===e)break;this.throwError('Unexpected "'+this.char+'"')}return t}gobbleExpression(){let e=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",e)}gobbleBinaryOp(){this.gobbleSpaces();let e=this.expr.substr(this.index,wt.max_binop_len),t=e.length;for(;t>0;){if(wt.binary_ops.hasOwnProperty(e)&&(!wt.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!wt.isIdentifierPart(this.expr.charCodeAt(this.index+e.length))))return this.index+=t,e;e=e.substr(0,--t)}return!1}gobbleBinaryExpression(){let e,t,i,r,a,n,s,o,l;if(n=this.gobbleToken(),!n||(t=this.gobbleBinaryOp(),!t))return n;for(a={value:t,prec:wt.binaryPrecedence(t),right_a:wt.right_associative.has(t)},s=this.gobbleToken(),s||this.throwError("Expected expression after "+t),r=[n,a,s];t=this.gobbleBinaryOp();){if(i=wt.binaryPrecedence(t),i===0){this.index-=t.length;break}a={value:t,prec:i,right_a:wt.right_associative.has(t)},l=t;let u=c=>a.right_a&&c.right_a?i>c.prec:i<=c.prec;for(;r.length>2&&u(r[r.length-2]);)s=r.pop(),t=r.pop().value,n=r.pop(),e={type:wt.BINARY_EXP,operator:t,left:n,right:s},r.push(e);e=this.gobbleToken(),e||this.throwError("Expected expression after "+l),r.push(a,e)}for(o=r.length-1,e=r[o];o>1;)e={type:wt.BINARY_EXP,operator:r[o-1].value,left:r[o-2],right:e},o-=2;return e}gobbleToken(){let e,t,i,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(e=this.code,wt.isDecimalDigit(e)||e===wt.PERIOD_CODE)return this.gobbleNumericLiteral();if(e===wt.SQUOTE_CODE||e===wt.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(e===wt.OBRACK_CODE)r=this.gobbleArray();else{for(t=this.expr.substr(this.index,wt.max_unop_len),i=t.length;i>0;){if(wt.unary_ops.hasOwnProperty(t)&&(!wt.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!wt.isIdentifierPart(this.expr.charCodeAt(this.index+t.length)))){this.index+=i;let a=this.gobbleToken();return a||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:wt.UNARY_EXP,operator:t,argument:a,prefix:!0})}t=t.substr(0,--i)}wt.isIdentifierStart(e)?(r=this.gobbleIdentifier(),wt.literals.hasOwnProperty(r.name)?r={type:wt.LITERAL,value:wt.literals[r.name],raw:r.name}:r.name===wt.this_str&&(r={type:wt.THIS_EXP})):e===wt.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(e){this.gobbleSpaces();let t=this.code;for(;t===wt.PERIOD_CODE||t===wt.OBRACK_CODE||t===wt.OPAREN_CODE||t===wt.QUMARK_CODE;){let i;if(t===wt.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==wt.PERIOD_CODE)break;i=!0,this.index+=2,this.gobbleSpaces(),t=this.code}this.index++,t===wt.OBRACK_CODE?(e={type:wt.MEMBER_EXP,computed:!0,object:e,property:this.gobbleExpression()},this.gobbleSpaces(),t=this.code,t!==wt.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):t===wt.OPAREN_CODE?e={type:wt.CALL_EXP,arguments:this.gobbleArguments(wt.CPAREN_CODE),callee:e}:(t===wt.PERIOD_CODE||i)&&(i&&this.index--,this.gobbleSpaces(),e={type:wt.MEMBER_EXP,computed:!1,object:e,property:this.gobbleIdentifier()}),i&&(e.optional=!0),this.gobbleSpaces(),t=this.code}return e}gobbleNumericLiteral(){let e="",t,i;for(;wt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(this.code===wt.PERIOD_CODE)for(e+=this.expr.charAt(this.index++);wt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);if(t=this.char,t==="e"||t==="E"){for(e+=this.expr.charAt(this.index++),t=this.char,(t==="+"||t==="-")&&(e+=this.expr.charAt(this.index++));wt.isDecimalDigit(this.code);)e+=this.expr.charAt(this.index++);wt.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+e+this.char+")")}return i=this.code,wt.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+e+this.char+")"):(i===wt.PERIOD_CODE||e.length===1&&e.charCodeAt(0)===wt.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:wt.LITERAL,value:parseFloat(e),raw:e}}gobbleStringLiteral(){let e="",t=this.index,i=this.expr.charAt(this.index++),r=!1;for(;this.index<this.expr.length;){let a=this.expr.charAt(this.index++);if(a===i){r=!0;break}else if(a==="\\")switch(a=this.expr.charAt(this.index++),a){case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:e+=a}else e+=a}return r||this.throwError('Unclosed quote after "'+e+'"'),{type:wt.LITERAL,value:e,raw:this.expr.substring(t,this.index)}}gobbleIdentifier(){let e=this.code,t=this.index;for(wt.isIdentifierStart(e)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(e=this.code,wt.isIdentifierPart(e));)this.index++;return{type:wt.IDENTIFIER,name:this.expr.slice(t,this.index)}}gobbleArguments(e){let t=[],i=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let a=this.code;if(a===e){i=!0,this.index++,e===wt.CPAREN_CODE&&r&&r>=t.length&&this.throwError("Unexpected token "+String.fromCharCode(e));break}else if(a===wt.COMMA_CODE){if(this.index++,r++,r!==t.length){if(e===wt.CPAREN_CODE)this.throwError("Unexpected token ,");else if(e===wt.CBRACK_CODE)for(let n=t.length;n<r;n++)t.push(null)}}else if(t.length!==r&&r!==0)this.throwError("Expected comma");else{let n=this.gobbleExpression();(!n||n.type===wt.COMPOUND)&&this.throwError("Expected comma"),t.push(n)}}return i||this.throwError("Expected "+String.fromCharCode(e)),t}gobbleGroup(){this.index++;let e=this.gobbleExpressions(wt.CPAREN_CODE);if(this.code===wt.CPAREN_CODE)return this.index++,e.length===1?e[0]:e.length?{type:wt.SEQUENCE_EXP,expressions:e}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:wt.ARRAY_EXP,elements:this.gobbleArguments(wt.CBRACK_CODE)}}},$ce=new Fce;Object.assign(wt,{hooks:$ce,plugins:new jce(wt),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"});wt.max_unop_len=wt.getMaxKeyLen(wt.unary_ops);wt.max_binop_len=wt.getMaxKeyLen(wt.binary_ops);var ap=e=>new wt(e).parse(),Uce=Object.getOwnPropertyNames(wt);Uce.forEach(e=>{ap[e]===void 0&&e!=="prototype"&&(ap[e]=wt[e])});ap.Jsep=wt;var Wce="ConditionalExpression",Hce={name:"ternary",init(e){e.hooks.add("after-expression",function(t){if(t.node&&this.code===e.QUMARK_CODE){this.index++;let i=t.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===e.COLON_CODE){this.index++;let a=this.gobbleExpression();if(a||this.throwError("Expected expression"),t.node={type:Wce,test:i,consequent:r,alternate:a},i.operator&&e.binary_ops[i.operator]<=.9){let n=i;for(;n.right.operator&&e.binary_ops[n.right.operator]<=.9;)n=n.right;t.node.test=n.right,n.right=t.node,t.node=i}}else this.throwError("Expected :")}})}};ap.plugins.register(Hce);var Gce=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],qce=["0","1","2","3","4","5","6","7","8","9","."],Yce=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function Xce(e){return typeof e!="string"?!1:!isNaN(e)&&!isNaN(parseFloat(e))}ap.addBinaryOp("^",11,!0);function NN(e,t,i="number"){let r="";for(let s=0;s<e.length;s++){let o=e[s];if("objType"in o&&o.objType==="api"){let l=JSON.parse(o.id),u=l[0],c=t.getUserAPI(u);if(c!==void 0){let d=c.retrieveValue(l.slice(1));d!==void 0&&(r+=d)}continue}if("objType"in o&&o.objType==="webhook"){let l=JSON.parse(o.id),[u,c]=l,d=t.getUserWebhook(u);if(d!==void 0){let h=d.getParameterValue(c);h!==void 0&&(r+=h)}continue}if("id"in o){let l=e[s-1];if(s>0&&"id"in l){console.error("Two variables in a row",e);return}let u=t.getVariable(o.id),c=_n.getDisplayedValue(u);i==="number"&&_n.isTextValue(u)&&Array.isArray(u.textValue)&&u.textValue.length===1?c=parseFloat(c).toString():i==="boolean"&&_n.isBoolean(u)?c=u?"true":"false":i==="boolean"&&_n.isTextValue(u)&&!Array.isArray(u.textValue)&&(c='"'+c+'"'),r+=c;continue}else if(i==="string"){o.name!=='"'&&(o.name!=="+"||o.escaped)&&(r+=o.name),o.name==="+"&&!o.escaped&&r[r.length-1]==="\\"&&(r=r.slice(0,-1)+o.name);continue}if(o.name==="and"){r+="&&";continue}if(o.name==="or"){r+="||";continue}if(o.name==="True"){r+="true";continue}if(o.name==="False"){r+="false";continue}if(i==="boolean"&&!Xce(o.name)&&!qce.includes(o.name)&&!Gce.includes(o.name)&&!Yce.includes(o.name.replace(/\($/g,""))){r+='"'+o.name+'"';continue}r+=o.name}if(i==="string")return r;if(e.length===0){if(i==="number")return 0;if(i==="boolean")return!1}let a;try{a=ap(r)}catch(s){console.error(r,s);return}let n;try{n=gr(a)}catch(s){console.error(r,a,s)}return n}function gr(e){switch(e.type){case"BinaryExpression":switch(e.operator){case"==":return+(gr(e.left)===gr(e.right));case"!=":return+(gr(e.left)!==gr(e.right));case">":return+(gr(e.left)>gr(e.right));case">=":return+(gr(e.left)>=gr(e.right));case"<":return+(gr(e.left)<gr(e.right));case"<=":return+(gr(e.left)<=gr(e.right));case"+":return gr(e.left)+gr(e.right);case"-":return gr(e.left)-gr(e.right);case"*":return gr(e.left)*gr(e.right);case"/":return gr(e.left)/gr(e.right);case"%":return gr(e.left)%gr(e.right);case"&&":return gr(e.left)&&gr(e.right);case"||":return gr(e.left)||gr(e.right);case"^":return Math.pow(gr(e.left),gr(e.right));default:throw new Error("Unknown operator: "+e.operator)}case"UnaryExpression":switch(e.operator){case"-":return-gr(e.argument);case"!":return+!gr(e.argument);default:throw new Error("Unknown operator: "+e.operator)}case"Identifier":throw new Error("Unknown identifier: "+e.name);case"Literal":return e.value;case"CallExpression":if(e.callee.type==="Identifier"){if(e.callee.name==="random"){let t=0,i=1;if(e.arguments.length>=1)try{t=gr(e.arguments[0])}catch(r){console.warn(r)}if(e.arguments.length>=2)try{i=gr(e.arguments[1])}catch(r){console.warn(r)}return t=Math.min(i,t),i=Math.max(i,t),t+Math.random()*(i-t)}return Math[e.callee.name].apply(null,e.arguments.map(gr))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+e.type)}}var Kce=new zt,Zce=new zt;function Qce(e,t,i){let r=[new V,new V,new V],a=[new V,new V,new V];return e.extractBasis(r[0],r[1],r[2]),t.extractBasis(a[0],a[1],a[2]),r.forEach((n,s)=>{let o=a[s],l=li.lerp(n.length(),o.length(),i);n.lerp(o,i).setLength(l)}),new zt().makeBasis(r[0],r[1],r[2])}var Jce=class{static create(e){return this.build(this.normalizeInputs(e))}static normalizeInputs(e,t){let i=Object.assign({},t?.parameters??{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},e.parameters),r=Math.abs(i.width),a=Math.abs(i.height??i.width),n=Math.abs(i.depth??0),s=t?.shapeData??wA.create({parameters:lN}).userData.shape;return{path:e.path??By.defaultData(),parameters:Object.assign(i,{width:r,height:a,depth:n,extrusion:{...uN,...i.extrusion}}),shapeData:s}}static build(e){if(e.path.points.length>=2){let t=new ede(e);return Object.assign(t,{userData:{...e,type:"PathGeometry"}})}else return Object.assign(new Mi,{userData:{...e,type:"PathGeometry"}})}},ede=class extends Mi{constructor(e){super(),this.type="PathExtrusionGeometry",this.inputs=e,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let e=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&e.depth===1)||!Vce(e.twist,0)||e.startScale!==e.endScale}build(){let e=this._extractPathPoints();if(e.length<2)return;let t=this._computeBasisMatrices(e),{depth:i,offset:r}=this.inputs.parameters.extrusion;i=Math.max(0,Math.min(i,1)),r=Math.max(0,Math.min(r,1));let a=this.inputs.path.isClosed?e.length:e.length-1,n=Math.floor(r*a),s=this.inputs.path.isClosed?Math.ceil((i+r)*a):Math.ceil(Math.min(1,i+r)*a),o=Math.min(Math.max(2,s-n+1),a+2),l=[],u=[];for(let z=0;z<o;z++){let B=this.inputs.path.isClosed?(z+n)%e.length:Math.min(z+n,e.length-1);l.push(e[B].clone()),u.push(t[B].clone())}let c=(z,B,W)=>{l[z]=l[z].clone().lerp(l[B],W),u[z]=Qce(u[z],u[B],W)},d=0,h=r*a%1;(!this.inputs.path.isClosed||i<=1)&&(h||r===0)&&(d=h,c(0,1,d));let p=0,f=(r+i)*a%1;if((this.inputs.path.isClosed&&i<=1||!this.inputs.path.isClosed&&r+i<1)&&f&&(p=f,c(l.length-1,l.length-2,1-p)),i===0){let z=l.length-1;l[z].copy(l[0]),u[z].copy(u[0])}this._applyPathModifiers(u,d,p);let{bevel:v,bevelSides:m}=this.inputs.parameters.extrusion,g=v>0?this.inputs.parameters.extrusion.capType:"flat",y=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(y=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:b,infos:x,vertices:S}=this._computeShapePoints(y),w=0,E;g==="round"&&(E=new bA(this.inputs.shapeData,2*v,v,y,m,void 0,!0),w=E.getAttribute("position").count);let M=0,P=0;x.sort((z,B)=>z.start-B.start),x.forEach(z=>{z.verticesStart=M,z.verticesCount=z.continuous.reduce((B,W,R)=>B+(R===0||!W?2:1),0),P+=z.verticesCount,M=P});let A=P*o,k,I=0;if(this._isOpenEnded()&&g==="flat"){try{k=Zu({windingRule:Dr.ODD,elementType:Aa.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:b})}catch{k=AN}I=k.vertexCount}let O=A+2*I+w*2,D=A+2*I,F={positions:new Float32Array(O*3),normals:new Float32Array(O*3),uvs:new Float32Array(O*2)},U=[];if(x.forEach(z=>{this._extrudeRegion(z,S,u,l,F,U,this._isGeometryClosed()&&!this._isOpenEnded())}),k&&(this._closeEnd(k,A,U,F,u[0],l[0],!1),this._closeEnd(k,A+I,U,F,u[u.length-1],l[l.length-1],!0)),E){F.positions.set(E.getAttribute("position").array,D*3),F.normals.set(E.getAttribute("normal").array,D*3),F.uvs.set(E.getAttribute("uv").array,D*2);for(let R=D;R<D+w;R++)F.uvs[R*2+1]=1e-4;let z=U.length;U.push(...E.getIndex().array.map(R=>R+D)),D+=w,F.positions.set(E.getAttribute("position").array,D*3),F.normals.set(E.getAttribute("normal").array,D*3),F.uvs.set(E.getAttribute("uv").array,D*2);let B=U.length;U.push(...E.getIndex().array.map(R=>R+D)),this.setAttribute("position",new ji(F.positions,3)),this.setAttribute("normal",new ji(F.normals,3)),this.setAttribute("uv",new ji(F.uvs,2)),this.setIndex(U);let W=Kce;W.copy(u[u.length-1]).setPosition(l[l.length-1]),this.applyMatrix4OnRange(W,D,O),W.copy(u[0]).setPosition(l[0]).multiply(Zce.makeScale(1,1,-1)),this.applyMatrix4OnRange(W,D-w,D),this.reverseIndicesOnRange(z,B)}else this.setAttribute("position",new ji(F.positions,3)),this.setAttribute("normal",new ji(F.normals,3)),this.setAttribute("uv",new ji(F.uvs,2)),this.setIndex(U)}_extractPathPoints(){let e=yN(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(e.length<2)return[];let t=[e[0]];return e.forEach(i=>{t[t.length-1].distanceToSquared(i)>.001&&t.push(i)}),this.inputs.path.isClosed&&t[t.length-1].distanceTo(t[0])<.001&&t.pop(),t}_computeBasisMatrices(e){let t=[],i=e.length,r=this.inputs.path.isClosed,a=new V,n=new V,s=new V,o=new V,l=new V(0,1,0);for(let f=0;f<i;f++){let v=e[f],m;f===0?m=r?e[e.length-2]:v.clone().multiplyScalar(2).sub(e[1]):m=e[f-1];let g;f===i-1?g=r?e[1]:v.clone().multiplyScalar(2).sub(e[f-1]):g=e[f+1];let y=v.clone().sub(m).normalize(),b=g.clone().sub(v).normalize(),x=y.clone().add(b).normalize();s.copy(x),f===0&&(x.equals(l)||x.clone().negate().equals(l))&&l.set(0,0,1);let S=l.clone().cross(x).normalize(),w=x.clone().cross(S).normalize();l.copy(w),o.copy(S),f===0&&(a.copy(w),n.copy(x));let E=new zt().makeBasis(S,w,x);t.push(E)}let u=r?n:s,c=r?a:new V(0,1,0),d=u.clone().cross(o).normalize(),h=Math.acos(c.dot(d));if(isNaN(h))return t;let p=c.clone().cross(d);u.dot(p)>0&&(h*=-1);for(let f=1;f<t.length;f++){let v=new zt().makeRotationZ(h*f/t.length);t[f].multiply(v)}return t}_applyPathModifiers(e,t,i){let r=e.length,{angle:a,twist:n,startScale:s,endScale:o}=this.inputs.parameters.extrusion,l=new zt,u=new zt;return e.forEach((c,d)=>{let h=d===0?0:d===r-1?1:(d-t)/(r-(i===0?0:1)-(t+(1-i)));l.makeRotationZ(li.lerp(a,a+n,h)*li.DEG2RAD);let p=li.lerp(s,o,h);u.makeScale(p,p,p),c.multiply(l).multiply(u)}),e}_computeShapePoints(e=12,t=Dr.ODD){let i=this.inputs.shapeData,r=i.extractShapePointsToFlatArray([],e),a=i.shapeHoles.map(u=>{let c=u.extractShapePointsToFlatArray([],e),d=[];for(let h=c.length-1;h>=1;h-=2){let p=c[h-1],f=c[h-0];d.push(p,f)}return d}),n;try{n=Zu({windingRule:t,elementType:Aa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[r]})}catch{n=yA}let s;try{s=Zu({windingRule:Dr.ODD,elementType:Aa.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...a]})}catch{s=EN}if(!n)throw new Error("error generating geometry");let o=n.elementCount;if(s){n.elementCount+=s.elementCount;for(let u=0;u<s.elements.length;u++){let c=s.elements[u],d=u%2===0?n.vertexCount:0;n.elements.push(c+d)}for(let u=0;u<s.vertexIndices.length;u++){let c=s.vertexIndices[u],d=n.vertexCount;n.vertexIndices.push(c+d)}for(let u=0;u<s.vertices.length;u++){let c=s.vertices[u];n.vertices.push(c)}}for(let u=0,c=n.vertexCount;u<c;u++){let d=u*2;n.vertices[d+0],n.vertices[d+1]}let l=[];for(let u=n.elementCount-1;u>=0;u--){let c=u>=o,d=u*2,h=n.elements[d+0],p=n.elements[d+1],f=h+p,v={start:h,count:p,normals:[],isHole:c,continuous:[],verticesStart:0,verticesCount:0};l.push(v);let m=h,g=f-1,y=h+1,b=i.roundedCurves.length;do{let x=m-h;n.vertices[g*2+0],n.vertices[g*2+1];let S=n.vertices[m*2+0],w=n.vertices[m*2+1],E=n.vertices[y*2+0],M=n.vertices[y*2+1],P=S-E,A=w-M,k=Math.sqrt(P*P+A*A);P/=k,A/=k,v.normals[x*2+0]=-A,v.normals[x*2+1]=P;let I=n.vertexIndices[m];if(Array.isArray(I))v.continuous[x]=!1;else{let[O,D]=i.getCurveIndexFromVertexId(I-1,!0);if(D>0&&D<1)v.continuous[x]=!0;else{let F=D===1?O+1:O-1;F=(F+b)%b;let U=D===1?0:1,z=i.roundedCurves[O].getTangent(D),B=i.roundedCurves[F].getTangent(U);v.continuous[x]=z.dot(B)>.95}}c&&(v.normals[x*2+0]*=-1,v.normals[x*2+1]*=-1),[g,m,y]=[m,y,y+1],y>=f&&(y-=p)}while(y!==h+1)}return{regions:[r,...a],infos:l,vertices:n.vertices}}_insertVertex(e,t,i,r,a){let n=t*2,s=t*3;e.positions[s+0]=i.x,e.positions[s+1]=i.y,e.positions[s+2]=i.z,e.normals[s+0]=r.x,e.normals[s+1]=r.y,e.normals[s+2]=r.z,e.uvs[n+0]=a.x,e.uvs[n+1]=a.y}_extrudeRegion(e,t,i,r,a,n,s){let o=new V,l=new V,u=new V,c=new V,d=new Ce;i.forEach((p,f)=>{let v=r[f],m=e.verticesStart*i.length+e.verticesCount*f;for(let g=0;g<e.count;g++){let y=(e.start+g)*2;if(o.set(t[y+0],t[y+1],0),u.copy(o).applyMatrix4(p).add(v),e.continuous[g])c.set(e.normals[g*2+0],e.normals[g*2+1],0);else{let b=g===0?(e.start+e.count-1)*2:y-2;l.set(t[b+0],t[b+1],0),c.copy(o).sub(l),c.set(-c.y,c.x,0),e.isHole||c.negate()}if(c.applyMatrix4(p).normalize(),d.set(g===0?1:g/e.count,f/(i.length-1)),this._insertVertex(a,m,u,c,d),m++,!e.continuous[g]||g===0){if(g===0)c.set(e.normals[g*2+0],e.normals[g*2+1],0),d.set(0,f/(i.length-1));else{let b=g===e.count-1?e.start*2:y+2;l.set(t[b+0],t[b+1],0),c.copy(l).sub(o),c.set(-c.y,c.x,0),e.isHole||c.negate()}c.applyMatrix4(p).normalize(),this._insertVertex(a,m,u,c,d),m++}}});let h=i.length-1;for(let p=0;p<h;p++){let f=e.verticesStart*i.length+e.verticesCount*p,v=e.verticesStart*i.length+e.verticesCount*(p+1),m=0;for(let g=0;g<e.count;g++){(!e.continuous[g]||g===0)&&m++;let y=g===e.count-1?0:m+1,b=f+m,x=f+y,S=v+y,w=v+m;e.isHole?n.push(b,S,x,b,w,S):n.push(b,x,S,b,S,w),m++}}}_closeEnd(e,t,i,r,a,n,s){let o=e.vertexCount,l=new V(0,0,s?-1:1).applyMatrix4(a),u=new V,c=new Ce;for(let h=0;h<o;h++){let p=2*h;u.set(e.vertices[p+0],e.vertices[p+1],0).applyMatrix4(a).add(n),this._insertVertex(r,t+h,u,l,c)}let d=e.elements;for(let h=0;h<e.elementCount;h++){let p=3*h,f=d[p+0]+t,v=d[p+(s?1:2)]+t,m=d[p+(s?2:1)]+t;i.push(f,v,m)}}applyMatrix4OnRange(e,t,i){let r=e.elements,a=new Ta().getNormalMatrix(e).elements,n,s,o,l,u=this.attributes.position,c=this.attributes.normal;if(!u||!c)return;let d=u.array,h=c.array,p=u.itemSize;for(let f=t*p,v=i*p;f<v;f+=p){if(f===t)debugger;n=d[f+0],s=d[f+1],o=d[f+2],l=1/(r[3]*n+r[7]*s+r[11]*o+r[15]),d[f+0]=(r[0]*n+r[4]*s+r[8]*o+r[12])*l,d[f+1]=(r[1]*n+r[5]*s+r[9]*o+r[13])*l,d[f+2]=(r[2]*n+r[6]*s+r[10]*o+r[14])*l,n=h[f+0],s=h[f+1],o=h[f+2],h[f+0]=a[0]*n+a[3]*s+a[6]*o,h[f+1]=a[1]*n+a[4]*s+a[7]*o,h[f+2]=a[2]*n+a[5]*s+a[8]*o}u.needsUpdate=!0,c.needsUpdate=!0}reverseIndicesOnRange(e,t){let i=this.index;if(i){for(let r=e;r<t;r+=3){let a=i.getX(r),n=i.getX(r+1),s=i.getX(r+2);i.setXYZ(r,s,n,a)}i.needsUpdate=!0}}};function VN(){let e=new Mi;return e.setAttribute("position",new ji(new Float32Array([]),3)),e.setIndex(new ji(new Uint16Array([]),1)),e}var tde=VN().attributes,ide=12,rde=1,K2=class extends Mi{constructor(e,t){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,tde),this.userData={parameters:e,type:"TextGeometry"};let i=t.getFont(e.font);i?.isLoaded?(this.font=i,this.update(e)):this.updateFont(e.font,t).then(()=>{this.update(e),t?.requestRender()})}async updateFont(e,t){let i=t.getFont(e);i&&(this.font=i,await i.loadingPromise)}update(e){let t=this.font;if(this.userData={parameters:e,type:"TextGeometry"},!t?.isLoaded){console.warn("Cannot update text because its font is not loaded");return}let{width:i,height:r,depth:a,extrudeBevelSize:n,extrudeBevelSegments:s,text:o,textTransform:l}=e,u=_n.getDisplayedValue(o),c=l===2?u.toUpperCase():l===3?u.toLowerCase():u,d=ade(e,t,c),{shapes:h,charWidths:p,charCoords:f}=t.generateShapes(d,e),v=(typeof i=="number"?i:1)*.5,m=(typeof r=="number"?r:1)*.5,g=h.map(x=>new da().fromShape(x,!0));this.vectorShapes=g;let y=g.map(x=>_d.create({shape:x,parameters:{depth:a,extrudeBevelSegments:s,extrudeBevelSize:n,windingRule:a<=0?Dr.NONZERO:Dr.ODD,subdivisions:this.isLowResolution&&a>0?rde:ide}})),b=y.length?Hc(y):VN();b.translate(-v,m,0),this.dispose(),this.wrappedText=d,this.charCoords=f,this.charWidths=p,this.deleteAttribute("extrudeNormal"),Object.entries(b.attributes).forEach(([x,S])=>{this.setAttribute(x,S)}),this.setIndex(b.index),this.computeBoundingSphere()}clone(){let e=io(new Mi,K2.prototype);return e.copy(this),console.log("CloneGeometry",this,e),e}copy(e){return Object.entries(e.attributes).forEach(([t,i])=>{this.setAttribute(t,i)}),this.setIndex(e.index),this.userData={parameters:{...e.userData.parameters},type:"TextGeometry"},this}async setText(e){this.font&&await this.font.loadingPromise,await this.update({...this.userData.parameters,text:{textValue:e}})}get text(){return this.userData.parameters.text??""}};function ade(e,t,i){let r=[""],a="";for(let n of i)a+=n,n===" "||n===`
`?(r[r.length-1]+=a,a="",n===`
`&&r.push("")):t.getTextWidth(r[r.length-1]+a,e)>e.width&&(r[r.length-1].length&&r.push(""),t.getTextWidth(r[r.length-1]+a,e)>e.width&&(a.length===1?(r[r.length-1]+=a,a=""):(r[r.length-1]+=a.slice(0,-1),a=a[a.length-1],r.push(""))));return r[r.length-1]+=a,r}var FN,jN=new Promise(e=>{FN=e}),hD=!1,tg;function nde(){if(hD)return;if(tg)return tg;async function e(){let t="https://unpkg.com/@splinetool/modelling-wasm@1.9.31/build",i=pc(()=>import("./process.Ciy5o4MN.js"),[]),[r,a]=await Promise.all([i,fetch(`${t}/process.wasm`).then(o=>o.arrayBuffer())]),n=r.default,s=await n({wasmBinary:a});FN(s),hD=!0}return tg=e(),tg}var sde=["font"];function wm(e,t,i,r){var a,n;let s,o,l;e.type==="PathGeometry"?(o=JSON.parse(JSON.stringify(e)),l=[[],["extrusion"]]):(o={...e},l=[[]]);for(let d of l){let h=o;for(let p of d)h=h[p];for(s in h){let p=h[s];mO(p)&&!sde.includes(s)&&(h[s]=t.getVariable(p,[r.uuid,"geometry",...d,s]),mO(h[s])&&(h[s]=1))}}let u={parameters:o,type:o.type};if(o.type==="PathGeometry")u.path=o.path;else if(o.type==="VectorGeometry"){let d=da.createFromState(o.shape,o.width,o.height);u.shape=d}else if(o.type==="NonParametricGeometry"){if(o.data.groups&&((a=o.data.groups)==null||a.forEach(d=>d.materialIndex=Math.max(d.materialIndex??0,0))),u.geometry=new jR().parse(o),u.geometry.groups.length===0){let d=u.geometry;d.addGroup(0,Math.max(((n=d.getIndex())==null?void 0:n.count)??0,d.getAttribute("position").count),0)}}else if(o.type==="SubdivGeometry"){let d=new Zn(o,i);return d.data=e,d}else{if(o.type==="TextGeometry")return new K2(o,t);if(o.type==="InputGeometry")return new K2(o,t);if(o.type==="UIGeometry")return xA.create({parameters:{width:o.width,height:o.height,cornerRadius:o.cornerRadius,cornerType:o.cornerType}})}let c;try{c=gD(u)}catch(d){console.error(d)}if(!c){let d=da.createFromState(Ly.defaultData(),100,100);u.shape=d,c=gD(u)}return c}var ode=new zt;function Z2(e,t,i,r){let a=e.position.array,n=e.normal.array,s=ode.makeScale(t,i,r).invert().elements,o,l,u;for(var c=0,d=a.length;c<d;c+=3)a[c]*=t,a[c+1]*=i,a[c+2]*=r,o=n[c],l=n[c+1],u=n[c+2],n[c]=s[0]*o+s[4]*l+s[8]*u,n[c+1]=s[1]*o+s[5]*l+s[9]*u,n[c+2]=s[2]*o+s[6]*l+s[10]*u;e.position.needsUpdate=!0,e.normal.needsUpdate=!0}var ig=new ba,Kd=new V,zi;jN.then(e=>{zi=e});var pD=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),fD=new Uint32Array([0,1,2,3]),mD=new Uint8Array([4]),Zn=class extends Mi{constructor(e,t){super(),this.data=e,this.flatShading=t,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(e,t){this.freeSubdivPointer();let i=this.data.scaleBaked,r=Jc.div(t,i);this.subdividedGeometry&&Z2(this.subdividedGeometry.attributes,...r),this.originalGeometry&&Z2(this.originalGeometry.attributes,...r),this.data=e;let a=this.userData.parameters;this.userData.parameters={width:a.width*r[0],height:a.height*r[1],depth:a.depth*r[2]},this.originalGeometry.boundingSphere.center.multiply(Kd.fromArray(r));let n=Kd.set(a.width,a.height,a.depth).length();this.originalGeometry.boundingSphere.radius=n/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){let e,t,i;try{({originalGeometry:e,subdividedGeometry:t,subdivPointer:i}=Zn.build(this.data,void 0,!this.flatShading,void 0))}catch{e=new ko(100,100,100),i=0}this.subdivPointer=i,this.originalGeometry=e,this.subdividedGeometry=t??void 0;let r=this.subdividedGeometry??this.originalGeometry;Object.assign(this,r),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Zn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ws,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;ig.setFromBufferAttribute(t),ig.getCenter(i),e.boundingSphere.radius=i.distanceTo(ig.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),ig.getSize(Kd);let r={width:Kd.x,height:Kd.y,depth:Kd.z};return this.userData.parameters=r,r}static build(e,t,i,r){let a,n,s,o=e?.phongAngle??35;i===!1&&(o=-1),t&&(zi.free_bvh(t),zi.free_subdivision_surface(t));try{a=Zn.allocate(e,r)}catch(l){console.error(l,e),a=Zn.allocate({positionWASM:pD,indexWASM:fD,verticesPerFaceWASM:mD},r)}if(zi.set_destination_refinement_level(a,0),n=Zn.buildLevel(a,!0,o),e.subdivisions>0)try{zi.set_destination_refinement_level(a,e.subdivisions),s=Zn.buildLevel(a,!1,o)}catch{try{zi.set_destination_refinement_level(a,e.subdivisions-1),s=Zn.buildLevel(a,!1,o)}catch{s=null}}else s=null;return{subdivPointer:a,originalGeometry:n,subdividedGeometry:s}}static primitiveToQuads(e,t,i){e.widthSegments>16&&(e.widthSegments=16),e.heightSegments>16&&(e.heightSegments=16),e.depthSegments>16&&(e.depthSegments=16),e.radialSegments>16&&(e.radialSegments=16),e.type==="DodecahedronGeometry"&&(e.detail=0);let r=e.shape!==void 0||e.path!==void 0?t.geometry:wm(e,i,!1),a;e.type==="TorusGeometry"&&e.arc===Math.PI*2?a=r.getClosedTorusIndicesForBooleanOrSubdiv():a=r.getIndex();let n,s,o,l;({positions:n,triIndices:l}=e1(r.getAttribute("position"),a));let u;if(e.type==="CylinderGeometry"&&e.cornerRadius===0&&e.hollow===0&&e.openEnded===!1){let c=e.radialSegments*e.heightSegments*3*2,d=c+e.radialSegments*3;u=[c,d]}return{indices:s,verticesPerFace:o}=$N(n,l,r,u),{positions:n,indices:s,verticesPerFace:o}}static allocate(e,t){var i;let r,a,n,s=[],o=[];e.positionWASM&&e.positionWASM.length>0?(r=e.positionWASM,a=e.indexWASM,n=e.verticesPerFaceWASM):(r=pD,a=fD,n=mD);let l=r.length,u=a.length,c=n.length,d=r.length+s.length+o.length,h=a.length+n.length,p=d*Float32Array.BYTES_PER_ELEMENT+h*Uint32Array.BYTES_PER_ELEMENT,f=d*Float32Array.BYTES_PER_ELEMENT,v=zi._malloc(p),m=new Float32Array(zi.HEAPF32.buffer,v,d),g=new Uint32Array(zi.HEAPU32.buffer,v+f,h);m.set(r,0),m.set(s,r.length),m.set(o,r.length+s.length),g.set(a,0),g.set(n,a.length);let y;(i=e?.scaleBaked)!=null&&i.some(x=>x!==1)&&(y=new zt().makeScale(...e.scaleBaked)),t&&(y?y.premultiply(t):y=t);let b=y?zi.alloc_subdivision_surface2(v,l,v+f,u,v+f+a.length*Uint32Array.BYTES_PER_ELEMENT,c,y.elements):zi.alloc_subdivision_surface(v,l,v+f,u,v+f+a.length*Uint32Array.BYTES_PER_ELEMENT,c);return zi._free(v),b}static buildLevel(e,t,i,r,a){let n=a?zi.get_mesh_data2(e,t?zi.Level.CONTROL:zi.Level.REFINED,i,a.elements):zi.get_mesh_data(e,t?zi.Level.CONTROL:zi.Level.REFINED,i),s=8,o=zi.HEAPU32.subarray(n>>2,(n>>2)+s),l=o.subarray(4,8),u=0,c=zi.HEAPU32[o[u]>>2],d=zi.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let h=zi.HEAPU32[o[u]>>2],p=zi.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let f=zi.HEAPU32[o[u]>>2],v=zi.HEAPU32.subarray(f>>2,(f>>2)+l[u]);u++;let m=zi.HEAPU32[o[u]>>2],g=zi.HEAPU32.subarray(m>>2,(m>>2)+l[u]);if(u++,r===void 0){let y=new Mi;if(y.setIndex(new Eh(g,1)),y.setAttribute("position",new ri(d,3)),y.setAttribute("normal",new ri(p,3)),t){y.setAttribute("faceMap",new Eh(v,1));let b=new Float32Array(p.length/3*4).fill(0);y.setAttribute("color",new ji(b,4))}return zi.free_mesh_data(n),y.userData.type="SubdivGeometry",y}r.getAttribute("position").copyArray(d),r.getAttribute("normal").copyArray(p),r.attributes.position.needsUpdate=!0,r.attributes.normal.needsUpdate=!0,zi.free_mesh_data(n)}static freeSubdivPointer(e){zi.free_bvh(e),zi.free_subdivision_surface(e)}static buildControlCageWireframe(e,t,i){let r=zi.get_wireframe_data_for_base_level(e),a=4,n=zi.HEAPU32.subarray(r>>2,(r>>2)+a),s=n.subarray(2,4),o=0,l=zi.HEAPU32[n[o]>>2],u=zi.HEAPF32.subarray(l>>2,(l>>2)+s[o]);o++;let c=zi.HEAPU32[n[o]>>2],d=zi.HEAPU32.subarray(c>>2,(c>>2)+s[o]);if(t===void 0){let h=new Mi;h.setAttribute("position",new ri(u,3));let p=new Float32Array(u.length);for(let f=0,v=u.length;f<v;)p[f++]=i.r,p[f++]=i.g,p[f++]=i.b;return h.setAttribute("color",new ji(p,3)),h.setIndex(new Eh(d,1)),zi.free_wireframe_data_for_base_level(r),h}t.getAttribute("position").copyArray(u),t.attributes.position.needsUpdate=!0,zi.free_wireframe_data_for_base_level(r)}static updateCollabMesh(e,t,i){let r=t===0;r||zi.set_destination_refinement_level(e,t);let a=i?zi.get_topological_data2(e,r?zi.Level.CONTROL:zi.Level.REFINED,i.elements):zi.get_topological_data(e,r?zi.Level.CONTROL:zi.Level.REFINED),n=6,s=zi.HEAPU32.subarray(a>>2,(a>>2)+n),o=s.subarray(3,6),l=0,u=zi.HEAPU32[s[l]>>2],c=new Float32Array(zi.HEAPF32.subarray(u>>2,(u>>2)+o[l]));l++;let d=zi.HEAPU32[s[l]>>2],h=new Uint32Array(zi.HEAPU32.subarray(d>>2,(d>>2)+o[l]));l++;let p=zi.HEAPU32[s[l]>>2],f=new Uint8Array(zi.HEAPU32.subarray(p>>2,(p>>2)+o[l]));return zi.free_topological_data(a),{positions:c,indices:h,verticesPerFace:f}}},vD=["getX","getY","getZ"];function e1(e,t){let i={},r=t?t.count:e.count,a=0,n=[],s=[],o=1e4;for(let u=0;u<r;u++){let c=t?t.getX(u):u,d="";for(let h=0;h<3;h++)d+=`${~~(e[vD[h]](c)*o)},`;if(d in i)n.push(i[d]);else{for(let h=0;h<3;h++)s.push(e[vD[h]](c));i[d]=a,n.push(a),a++}}let l=[];for(let u=0;u<n.length;u+=3)n[u]===n[u+1]||n[u]===n[u+2]||n[u+1]===n[u+2]||l.push(n[u],n[u+1],n[u+2]);return{positions:s,triIndices:l}}var rg=new V,ox=new V,lx=new V,ux=new V;function $N(e,t,i,r){let a=[],n=[];if(i.userData.shape!==void 0&&i.userData.parameters.depth===0&&i.userData.shape.shapeHoles.length===0){let l=i.userData.shape.extractShapePointsToFlatArray([]),u=i.userData.parameters.spikes;if(i.userData.type==="EllipseGeometry"&&u<=24&&u%4===0&&i.userData.parameters.angle>=360){let h=l.length/2/u;l=l.filter((p,f)=>Math.floor(f/2)%h===0)}let c=0;for(let h=0;h<l.length;h+=2)c+=(l[h]-l[(h===0?l.length:h)-2])*(l[h+1]+l[(h===0?l.length:h)-1]);e.length=0;let d=0;if(c<0)for(let h=0;h<l.length;h+=2)e.push(l[h],l[h+1],0),a.push(d++);else for(let h=l.length-2;h>=0;h-=2)e.push(l[h],l[h+1],0),a.push(d++);return n.push(d),{indices:a,verticesPerFace:n}}let s=new Float32Array([i.userData.parameters.depth])[0],o=0;for(;o<t.length;){if(i.useNgonForTopBottomFaceDuringBake){let l=0;if((e[t[o]*3+2]===s||e[t[o]*3+2]===0)&&l++,(e[t[o+1]*3+2]===s||e[t[o+1]*3+2]===0)&&l++,(e[t[o+2]*3+2]===s||e[t[o+2]*3+2]===0)&&l++,l===3)break}if(t[o+1]===t[o+3]&&t[o+2]===t[o+5]||t[o+0]===t[o+3]&&t[o+2]===t[o+4]){rg.set(e[t[o]*3],e[t[o]*3+1],e[t[o]*3+2]),ox.set(e[t[o+1]*3],e[t[o+1]*3+1],e[t[o+1]*3+2]),lx.set(e[t[o+4]*3],e[t[o+4]*3+1],e[t[o+4]*3+2]),ux.set(e[t[o+5]*3],e[t[o+5]*3+1],e[t[o+5]*3+2]),ox.sub(rg).normalize(),lx.sub(rg).normalize(),ux.sub(rg).normalize();let l=ox.cross(lx).dot(ux);Math.abs(l)>.005||r&&r.some((u,c)=>c%2===1?!1:o>=r[c]&&o<r[c+1])?(a.push(t[o],t[o+1],t[o+2]),n.push(3),o+=3):(a.push(t[o],t[o+1],t[o+4],t[o+5]),n.push(4),o+=6)}else a.push(t[o],t[o+1],t[o+2]),n.push(3),o+=3}if(i.useNgonForTopBottomFaceDuringBake){let l=[],u=[],c=0;for(let d=0,h=0;d<e.length;d+=3,h++)e[d+2]===0&&(l.push(h),c++),e[d+2]===s&&u.push(h);if(i.userData.parameters.extrudeBevelSize===0){let d=u[0];u[0]=u[1],u[1]=d}l.reverse(),a.push(...l,...u),n.push(c,c)}return{indices:a,verticesPerFace:n}}var Nl={};fH(Nl,{calcBoolean:()=>hde,calcBooleanTopological:()=>dde,freeMeshSet:()=>vde,getMeshSet:()=>pde,hasOpenEdges:()=>fde,transformMeshSet:()=>mde});var UN,lde=new Promise(e=>{UN=e}),ag;function ude(){if(ag)return ag;async function e(){let t="https://unpkg.com/@splinetool/boolean-wasm@1.9.31/build",i=pc(()=>import("./boolean.DyaWkygz.js"),[]),[r,a]=await Promise.all([i,fetch(`${t}/boolean.wasm`).then(o=>o.arrayBuffer())]),n=r.default,s=await n({wasmBinary:a});UN(s)}return ag=e(),ag}var lr,Ih;lde.then(e=>lr=e);function cde(e,t,i){let r,a;e.userData.parameters.type==="TorusGeometry"&&e.userData.parameters.arc===Math.PI*2?a=e.getClosedTorusIndicesForBooleanOrSubdiv():a=e.getIndex();let{positions:n,triIndices:s}=e1(e.getAttribute("position"),a),o;if(t&&i){let{indices:l,verticesPerFace:u}=$N(n,s,e);o=u.length,r=[];for(let c=0,d=0;c<o;c++){r.push(u[c]);for(let h=0;h<u[c];h++)r.push(l[d++])}}else{let l=s.length;r=Array(l+l/3),o=0;for(let u=0,c=0;c<r.length;)r[c++]=3,o++,r[c++]=s[u++],r[c++]=s[u++],r[c++]=s[u++]}return{positions:n,faceIndices:r,nFaces:o}}function WN(e){let t=e.length,i=t*Uint32Array.BYTES_PER_ELEMENT,r=t*Float32Array.BYTES_PER_ELEMENT,a=Number.isInteger(e[0])?i:r,n=lr._malloc(a);return(Number.isInteger(e[0])?new Uint32Array(lr.HEAPU32.buffer,n,t):new Float32Array(lr.HEAPF32.buffer,n,t)).set(e,0),n}function HN(e){switch(e){case 0:return lr.OP.UNION;case 1:return lr.OP.INTERSECTION;case 2:return lr.OP.A_MINUS_B;case 3:return lr.OP.B_MINUS_A;case 4:return lr.OP.SYMMETRIC_DIFFERENCE;case 5:return lr.OP.ALL;default:throw new Error("Unknown boolean operation "+e)}}function dde(e,t){Ih===void 0&&(Ih=lr.init_csg());let i=WN(e),r=lr.csg_calc_topological(Ih,i,e.length,HN(t));lr._free(i);let a=6,n=lr.HEAPU32.subarray(r>>2,(r>>2)+a),s=n.subarray(3,6),o=0,l=lr.HEAPU32[n[o]>>2],u=new Float32Array(lr.HEAPF32.subarray(l>>2,(l>>2)+s[o]));o++;let c=lr.HEAPU32[n[o]>>2],d=new Uint32Array(lr.HEAPU32.subarray(c>>2,(c>>2)+s[o]));o++;let h=lr.HEAPU32[n[o]>>2],p=new Uint8Array(lr.HEAPU32.subarray(h>>2,(h>>2)+s[o]));return lr.free_mesh_data(r),{positions:u,indices:d,verticesPerFace:p}}function hde(e,t,i,r){Ih===void 0&&(Ih=lr.init_csg());let a=WN(e),n=lr.csg_calc(Ih,a,e.length,r,HN(t));lr._free(a);let s=5,o=lr.HEAPU32.subarray(n>>2,(n>>2)+s),l=o.subarray(2,5),u=0,c=lr.HEAPU32[o[u]>>2],d=lr.HEAPF32.subarray(c>>2,(c>>2)+l[u]);u++;let h=lr.HEAPU32[o[u]>>2],p=lr.HEAPF32.subarray(h>>2,(h>>2)+l[u]);u++;let f=l[u];i.setAttribute("position",new ri(d,3)),i.setAttribute("normal",new ri(p,3));let v=lr.HEAPF32.subarray((n>>2)+5,(n>>2)+5+6);return i.boundingSphere===null&&(i.boundingSphere=new ws),i.boundingSphere.center.set(v[0],v[1],v[2]),i.boundingSphere.radius=(v[3]**2+v[4]**2+v[5]**2)**.5,i.userData.parameters={width:v[3]*2,height:v[4]*2,depth:v[5]*2},lr.free_mesh_data(n),f}function pde(e,t,i){if(lr===void 0)return-1;let r,a,n;if(t&&e.userData.positions!==void 0){let m=e.userData;n=m.verticesPerFace.length,r=m.positions,a=Array(m.verticesPerFace.reduce((g,y)=>g+y,0)+n);for(let g=0,y=0,b=0;g<m.verticesPerFace.length;g++){a[b++]=m.verticesPerFace[g];for(let x=0;x<m.verticesPerFace[g];x++)a[b++]=m.indices[y++]}}else({positions:r,faceIndices:a,nFaces:n}=cde(e,t,i));let s=r.length,o=a.length,l=r.length,u=a.length,c=l*Float32Array.BYTES_PER_ELEMENT+u*Uint32Array.BYTES_PER_ELEMENT,d=l*Float32Array.BYTES_PER_ELEMENT,h=lr._malloc(c),p=new Float32Array(lr.HEAPF32.buffer,h,l),f=new Uint32Array(lr.HEAPU32.buffer,h+d,u);p.set(r,0),f.set(a,0);let v=lr.get_csg_mesh(h,s,h+d,o,n);return lr._free(h),v}function fde(e){return lr.has_open_edges(e)}function mde(e,t){lr.transform_csg_mesh(e,t.elements)}function vde(e){lr.free_csg_mesh(e)}var gde={ConeGeometry:zue,CubeGeometry:Rue,CylinderGeometry:bN,DodecahedronGeometry:Vue,EllipseGeometry:wA,HelixGeometry:gce,IcosahedronGeometry:yce,LatheGeometry:bce,NonParametricGeometry:Ece,PolygonGeometry:zN,PyramidGeometry:Ace,RectangleGeometry:xA,SphereGeometry:kce,PlaneGeometry:Oce,BackdropGeometry:Dce,StarGeometry:RN,TextFrameGeometry:Lce,TorusGeometry:Bce,TorusKnotGeometry:Rce,TriangleGeometry:Nce,PathGeometry:Jce,VectorGeometry:_d},gD=e=>gde[e.type].create(e);function Zd(e){return e!==null&&"booleanOp"in e}var GN=class extends fA(ra){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new zt}updateVisible(e){super.updateVisible(e),this.visible=!Zd(this.parent)&&this.visible,Zd(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Nl.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(e=!1){return e?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Zd(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let e of this.children)e instanceof GN&&(e.freeBooleanPointer(),Zd(e)&&e.invalidateUpstreamBooleanData())}updateTransformState(e,t){let i=super.updateTransformState(e,t);return i&&Zd(this.parent)&&this.invalidateDownstreamBooleanData(!0),i}onVariableUpdate(e=!1){super.onVariableUpdate(e),Zd(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},ng=new ba;function SA(e,t=0,i=e.count,r,a){let n=1/0,s=1/0,o=1/0,l=-1/0,u=-1/0,c=-1/0;for(let d=t;d<i;d++){let h=e.getX(d),p=e.getY(d),f=e.getZ(d);h<n&&(n=h),p<s&&(s=p),f<o&&(o=f),h>l&&(l=h),p>u&&(u=p),f>c&&(c=f)}ng.min.set(n,s,o),ng.max.set(l,u,c),ng.getCenter(r),ng.getSize(a).multiplyScalar(.5)}var yde=new Mi,bde=new nu,ns=class extends GN{constructor(e,t){super(yde,bde),this.super_Entity(e,t)}updateState(e,t){this.updateState_Entity(e,t)}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?SA(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},Nu=class{constructor(e){if(this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},Nu.uuidContext===null)throw new Error("plz startContext");Nu.uuidContext===Nu.globalContext?this.uuid="_gid"+Nu.uuidContext.nodeContextUuid++:this.uuid="_uid"+Nu.uuidContext.nodeContextUuid++,this.type=e,this.name=""}static startContext(e){this.uuidContext===null||this.uuidContext===Nu.globalContext?this.uuidContext=e:console.error("Can't start context twice")}static endContext(e){this.uuidContext!==e&&console.error("Can't end context twice"),this.uuidContext=null}analyze(e,t){t=t??{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1}analyzeAndFlow(e,t,i){return i=i??{},this.analyze(e,i),this.flow(e,t,i)}flow(e,t,i){i=i??{},e.addFlow(i.slot,i.cache,i.context);let r={result:this.build(e,t),code:e.clearNodeCode(),extra:e.context.extra};return e.removeFlow(),r}build(e,t,i){t=t??this.getType(e,t);let r=e.getNodeData(i??this);return e.analyzing&&this.appendDepsNode(e,r,t),e.nodes.indexOf(this)===-1&&e.nodes.push(this),this.updateFrame!==void 0&&e.updaters.indexOf(this)===-1&&e.updaters.push(this),this.generate(e,t,i)}updateFrame(e){}generateReadonly(e,t,i,r,a,n){return""}generate(e,t,i,r,a){return""}parse(e,t,i,r){}appendDepsNode(e,t,i){t.deps=(t.deps||0)+1;let r=e.getTypeLength(i);(r>(t.outputMax||0)||this.getType(e,i))&&(t.outputMax=r,t.output=i)}setName(e){this.name=e}getName(){return this.name}getType(e,t){return t==="sampler2D"||t==="samplerCube"?t:this.type}},Na=Nu;Na.globalContext={nodeContextUuid:0},Na.uuidContext=Nu.globalContext;var yD=class{constructor(e){e=e??{},this.name=e.name,this.type=e.type,this.node=e.node,this.size=e.size,this.needsUpdate=e.needsUpdate}get value(){return this.node.value}set value(e){this.node.value=e}},wde=class{constructor(){this.nodes={},this.keywords={}}add(e){this.nodes[e.name]=e}addKeyword(e,t,i){i=i!==void 0?i:!0,this.keywords[e]={callback:t,cache:i}}remove(e){delete this.nodes[e.name]}removeKeyword(e){delete this.keywords[e]}get(e){return this.nodes[e]}getKeyword(e,t){return this.keywords[e].callback(t)}getKeywordData(e){return this.keywords[e]}contains(e){return this.nodes[e]!==void 0}containsKeyword(e){return this.keywords[e]!==void 0}},ms=new wde,zr=class extends Na{constructor(e,t){super(e),this.scope="",t=t??{},this.shared=t.shared!==void 0?t.shared:!0,this.unique=t.unique!==void 0?t.unique:!1}build(e,t,i,r){if(t=t??this.getType(e),this.getShared(e,t)){let a=this.getUnique(e,t);a&&this.uuid===void 0&&(this.uuid=li.generateUUID()),i=e.getUUID(i??this.getUUID(),!a);let n=e.getNodeData(i),s=n.output||this.getType(e);if(e.analyzing)return(n.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,n,t),this.generate(e,t,i)):super.build(e,t,i);if(a)return n.name=n.name||super.build(e,t,i),n.name;if(!this.getLabel()&&(!this.getShared(e,s)||e.context.ignoreCache||n.deps===1))return super.build(e,t,i);i=this.getUUID(!1);let o=this.getTemp(e,i);if(o)return e.format(o,s,t);{o=super.generate(e,t,i,n.output,r);let l=this.generate(e,s,i);return e.addNodeCode(o+" = "+l+";"),e.format(o,s,t)}}return super.build(e,t,i)}getShared(e,t){return t!=="sampler2D"&&t!=="samplerCube"&&this.shared}getUnique(e,t){return this.unique}setLabel(e){return this.label=e,this}getLabel(){return this.label}getUUID(e){let t=this.uuid;return typeof this.scope=="string"&&(t=this.scope+"-"+t),t}getTemp(e,t){t=t||this.uuid;let i=e.getVars()[t];return i?i.name:void 0}generate(e,t,i,r,a){return this.getShared(e,t)||console.error("TempNode is not shared"),i=i??this.uuid,e.getTempVar(i,r??this.getType(e),a,this.getLabel()).name}},Cs=class extends zr{constructor(e,t){t=t??{},t.shared=t.shared!==void 0?t.shared:!1,super(e,t),this.readonly=!1}setReadonly(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(e,t,i,r,a,n){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let s=e.getNodeData(i);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(e,t,i,r,a,n):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(r,this,a,n,this.getLabel())),e.format(s.vertex.name,r,t)):(s.fragment||(s.fragment=e.createFragmentUniform(r,this,a,n,this.getLabel())),e.format(s.fragment.name,r,t))}},yn=class extends Cs{constructor(e=0,t){super("v2"),this.nodeType="Vector2",this.value=e instanceof Ce?e:new Ce(e,t)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}generateReadonly(e,t,i,r,a,n){return e.format("vec2("+this.value.x+", "+this.value.y+")",r,t)}},Fs=class extends Cs{constructor(e=0,t,i){super("v3"),this.nodeType="Vector3",this.value=e instanceof V?e:new V(e,t,i)}get x(){return this.value.x}set x(e){this.value.x=e}get y(){return this.value.y}set y(e){this.value.y=e}get z(){return this.value.z}set z(e){this.value.z=e}generateReadonly(e,t,i,r,a,n){return e.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",r,t)}},En=class extends Bi{constructor(e,t,i,r){super(e,t,i),this.isColorA=!0,this.a=r}setRGBA(e,t,i,r){super.setRGB(e,t,i),this.a=r}copy(e){return super.copy(e),this.a="a"in e?e.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}equals(e){return super.equals(e)&&this.a===e.a}setStyle(e,t="srgb"){let i;if(e==="transparent")return this.setRGBA(0,0,0,0),this;if(i=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(e)){let r,a=i[1],n=i[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.a=a==="rgba"?parseFloat(r[4]):1,super.setStyle(e,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(n))return this.a=a==="hsla"?parseFloat(r[4]):1,super.setStyle(e,t);break}}return super.setStyle(e,t)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(e){this.r=e}set y(e){this.g=e}set z(e){this.b=e}set w(e){this.a=e}},Vl=class extends Cs{constructor(e){super("v4"),this.nodeType="Vector4",this.value=e instanceof En?e:new En(e.r,e.g,e.b,e.a)}generateReadonly(e,t,i,r,a,n){return e.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",r,t)}},xde=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,bD=/[a-z_0-9]+/gi,Jt=class extends zr{constructor(e,t,i,r,a){super(a),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=a===void 0,this.isInterface=!1,this.parse(e,t,i,r)}getShared(e,t){return!this.isMethod}getType(e){return e.getTypeByFormat(this.type)}getInputByName(e){if(this.inputs){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}}getIncludeByName(e){if(this.includes){let t=this.includes.length;for(;t--;)if(this.includes[t].name===e)return this.includes[t]}}generate(e,t,i,r,a){let n,s=0,o=this.src;if(this.includes)for(let u=0;u<this.includes.length;u++)e.include(this.includes[u],this);for(let u in this.extensions)e.extensions[u]=!0;let l=[];for(;n=bD.exec(this.src);)l.push(n);for(let u=0;u<l.length;u++){let c=l[u],d=c[0],h=this.isMethod?!this.getInputByName(d):!0,p=d;if(this.keywords[d]||this.useKeywords&&h&&ms.containsKeyword(d)){let f=this.keywords[d];if(!f){let v=ms.getKeywordData(d);v.cache&&(f=e.keywords[d]),f=f||ms.getKeyword(d,e),v.cache&&(e.keywords[d]=f)}p=f.build(e)}d!==p&&o[c.index+s-1]!=="."&&(o=o.substring(0,c.index+s)+p+o.substring(c.index+d.length+s),s+=p.length-d.length),this.getIncludeByName(p)===void 0&&ms.contains(p)&&e.include(ms.get(p))}return t==="source"?o:this.isMethod?(this.isInterface||e.include(this,void 0,o),this.name):e.format("( "+o+" )",this.getType(e),t)}parse(e,t,i,r){if(this.src=e||"",this.includes=t??[],this.extensions=i??{},this.keywords=r??{},this.isMethod){let a=xde.exec(this.src);if(this.inputs=[],a&&a.length==4){this.type=a[1],this.name=a[2];let n=a[3].match(bD);if(n){let s=0;for(;s<n.length;){let o=n[s++],l;o==="in"||o==="out"||o==="inout"?l=n[s++]:(l=o,o="");let u=n[s++];this.inputs.push({name:u,type:l,qualifier:o})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},Sde=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,qN=class extends zr{constructor(e="",t){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(e||qN.PI,void 0,void 0,void 0,t)}getType(e){return e.getTypeByFormat(this.type)}parse(e,t,i,r,a){this.src=e||"";let n,s,o="",l=Sde.exec(e);this.useDefine=a??this.src.charAt(0)==="#",l&&l.length>1?(s=l[1],n=l[2],o=l[3]):(n=this.src,s="f"),this.name=n,this.type=s,this.value=o}build(e,t){if(t==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return e.include(this),e.format(this.name,this.getType(e),t)}generate(e,t,i,r,a){return e.format(this.name,this.getType(e),t)}},Or=qN;Or.PI="PI",Or.PI2="PI2",Or.RECIPROCAL_PI="RECIPROCAL_PI",Or.RECIPROCAL_PI2="RECIPROCAL_PI2",Or.LOG2="LOG2",Or.EPSILON="EPSILON";var Cde=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),_de=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),YN=class extends zr{constructor(e=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(e)}getType(e){return e.getTypeByFormat(this.name)}getInputByName(e){let t=this.inputs.length;for(;t--;)if(this.inputs[t].name===e)return this.inputs[t]}generate(e,t,i,r,a){return t==="source"?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)}parse(e=""){this.src=e,this.inputs=[];let t=Cde.exec(e);if(t){let i=t[2],r;for(;r=_de.exec(i);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name}},CA=class extends zr{constructor(e){super("v2",{shared:!1}),this.nodeType="UV",this.index=e??0}generate(e,t){e.requires.uv[this.index]=!0;let i=this.index>0?this.index+1:"",r=e.isShader("vertex")?"uv"+i:"vUv"+i;return e.format(r,this.getType(e),t)}};ms.addKeyword("uv",function(){return new CA});ms.addKeyword("uv2",function(){return new CA(1)});var ch=class extends zr{constructor(e,t){super("v4"),this.nodeType="ColorSpace",this.input=e,this.method=t??ch.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(e){switch(e){case To:return["Linear"];case Ji:return["sRGB"];default:return[]}}generate(e,t){var i;let r=this.input.build(e,"v4"),a=this.getType(e),n=ch.Nodes[this.method],s=e.include(n);if(s===ch.LINEAR_TO_LINEAR)return e.format(r,a,t);if(((i=n.inputs)==null?void 0:i.length)===2){let o=this.factor.build(e,"f");return e.format(s+"( "+r+", "+o+" )",a,t)}else return e.format(s+"( "+r+" )",a,t)}fromEncoding(e){let t=ch.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]}fromDecoding(e){let t=ch.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]}},sl=ch;sl.Nodes={LinearToLinear:new Jt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new Jt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new Jt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},sl.LINEAR_TO_LINEAR="LinearToLinear",sl.SRGB_TO_LINEAR="sRGBToLinear",sl.LINEAR_TO_SRGB="LinearTosRGB";var Gr=class extends Jt{constructor(e="",t,i,r,a){super(e,a,r,i,t),this.nodeType="Expression"}},Hl=class extends Cs{constructor(e=new aa,t,i,r){super("v4",{shared:!0}),this.nodeType="Texture",this.value=e,this.uv=t??new CA,this.bias=i,this.project=r!==void 0?r:!1}getTexture(e,t){return super.generate(e,t,this.value.uuid,"t")}generate(e,t){if(t==="sampler2D")return this.getTexture(e,t);let i=this.getTexture(e,t),r=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;a===void 0&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f"));let n,s;this.project?n="texture2DProj":n=a?"tex2DBias":"tex2D",a?s=n+"( "+i+", "+r+", "+a+" )":s=n+"( "+i+", "+r+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new sl(new Gr("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,l),e.removeContext(),e.format(s,l,t)}},di=class extends Cs{constructor(e){super("f"),this.nodeType="Float",this.value=e??0}generateReadonly(e,t,i,r,a,n){return e.format(this.value+(this.value%1?"":".0"),r,t)}},wD=class extends zr{constructor(e,t){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=e,this.inputs=t??[]}getFunction(){return this.value}getType(e){return this.value.getType(e)}generate(e,t,i,r,a){r=this.getType(e);let n=this.value,s=n.build(e,t)+"( ",o=[];if(n.inputs){for(let l=0;l<n.inputs.length;l++){let u=n.inputs[l],c=this.inputs[l]||this.inputs[u.name];o.push(c.build(e,e.getTypeByFormat(u.type)))}s+=o.join(", ")+" )"}return e.format(s,r,t)}},XN=class extends zr{constructor(e,t,i=XN.ADD){super(),this.nodeType="Operator",this.type=e.type,this.a=e,this.b=t,this.op=i}getType(e){let t=this.a.getType(e),i=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(i)>e.getTypeLength(t)?i:t}generate(e,t){let i=this.getType(e);this.type=i;let r=this.a.build(e,i),a=this.b.build(e,i);return e.format("( "+r+" "+this.op+" "+a+" )",i,t)}},ds=XN;ds.ADD="+",ds.SUB="-",ds.MUL="*",ds.DIV="/";var kr=class extends zr{constructor(e,t=kr.ABS,i,r){super(),this.nodeType="Math",this.a=e,typeof t!="string"?this.b=t:r=t,typeof i!="string"?this.c=i:r=i,this.method=r,this.hashProperties=["method"]}getNumInputs(e){switch(this.method){case kr.MIX:case kr.CLAMP:case kr.REFRACT:case kr.SMOOTHSTEP:case kr.FACEFORWARD:return 3;case kr.MIN:case kr.MAX:case kr.MOD:case kr.STEP:case kr.REFLECT:case kr.DISTANCE:case kr.DOT:case kr.CROSS:case kr.POW:return 2;default:return 1}}getInputType(e){let t=e.getTypeLength(this.a.getType(e)),i=this.b?e.getTypeLength(this.b.getType(e)):0,r=this.c?e.getTypeLength(this.c.getType(e)):0;return t>i&&t>r?this.a.getType(e):i>r?this.b.getType(e):this.c.getType(e)}getType(e){switch(this.method){case kr.LENGTH:case kr.DISTANCE:case kr.DOT:return"f";case kr.CROSS:return"v3"}return this.getInputType(e)}generate(e,t){let i,r,a,n=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,o=this.c?e.getTypeLength(this.c.getType(e)):0,l=this.getInputType(e),u=this.getType(e);switch(this.type=u,this.method){case kr.NEGATE:return e.format("( -"+this.a.build(e,l)+" )",l,t);case kr.INVERT:return e.format("( 1.0 - "+this.a.build(e,l)+" )",l,t);case kr.CROSS:i=this.a.build(e,"v3"),r=this.b.build(e,"v3");break;case kr.STEP:i=this.a.build(e,n===1?"f":l),r=this.b.build(e,l);break;case kr.MIN:case kr.MAX:case kr.MOD:i=this.a.build(e,l),r=this.b.build(e,s===1?"f":l);break;case kr.REFRACT:i=this.a.build(e,l),r=this.b.build(e,l),a=this.c.build(e,"f");break;case kr.MIX:i=this.a.build(e,l),r=this.b.build(e,l),a=this.c.build(e,o===1?"f":l);break;default:i=this.a.build(e,l),this.b&&(r=this.b.build(e,l)),this.c&&(a=this.c.build(e,l));break}let c=[];c.push(i),r&&c.push(r),a&&c.push(a);let d=this.getNumInputs(e);if(c.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${c.length}.`);return e.format(this.method+"( "+c.join(", ")+" )",u,t)}},Zi=kr;Zi.RAD="radians",Zi.DEG="degrees",Zi.EXP="exp",Zi.EXP2="exp2",Zi.LOG="log",Zi.LOG2="log2",Zi.SQRT="sqrt",Zi.INV_SQRT="inversesqrt",Zi.FLOOR="floor",Zi.CEIL="ceil",Zi.NORMALIZE="normalize",Zi.FRACT="fract",Zi.SATURATE="saturate",Zi.SIN="sin",Zi.COS="cos",Zi.TAN="tan",Zi.ASIN="asin",Zi.ACOS="acos",Zi.ARCTAN="atan",Zi.ABS="abs",Zi.SIGN="sign",Zi.LENGTH="length",Zi.NEGATE="negate",Zi.INVERT="invert",Zi.MIN="min",Zi.MAX="max",Zi.MOD="mod",Zi.STEP="step",Zi.REFLECT="reflect",Zi.DISTANCE="distance",Zi.DOT="dot",Zi.CROSS="cross",Zi.POW="pow",Zi.MIX="mix",Zi.CLAMP="clamp",Zi.REFRACT="refract",Zi.SMOOTHSTEP="smoothstep",Zi.FACEFORWARD="faceforward";var wf=class extends zr{constructor(e,t,i){super("v4"),this.nodeType="TextureCubeUV",this.value=e,this.uv=t,this.bias=i}bilinearCubeUV(e,t,i,r){let a=new wD(wf.Nodes.bilinearCubeUV,[t,i,r]);this.colorSpaceTL=this.colorSpaceTL??new sl(new Gr("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(a.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR??new sl(new Gr("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(a.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL??new sl(new Gr("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(a.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR??new sl(new Gr("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(a.build(e)+".br");let n={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(n),this.colorSpaceTLExp=new Gr(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new Gr(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new Gr(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new Gr(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();let s=new Gr("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return s.keywords.cubeUV_TL=this.colorSpaceTLExp,s.keywords.cubeUV_TR=this.colorSpaceTRExp,s.keywords.cubeUV_BL=this.colorSpaceBLExp,s.keywords.cubeUV_BR=this.colorSpaceBRExp,s.keywords.cubeUV=a,s}generate(e,t){if(e.isShader("fragment")){let i=this.uv,r=this.bias||e.context.roughness,a=new wD(wf.Nodes.roughnessToMip,[r]),n=new Zi(a,wf.Nodes.m0,wf.Nodes.cubeUV_maxMipLevel,Zi.CLAMP),s=new Zi(n,Zi.FLOOR),o=new Zi(n,Zi.FRACT),l=this.bilinearCubeUV(e,this.value,i,s),u=this.bilinearCubeUV(e,this.value,i,new ds(s,new di(1).setReadonly(!0),ds.ADD)),c=new Zi(l,u,o,Zi.MIX);return e.format(c.build(e),"v4",t)}else return console.warn("TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)}},Q2=wf;Q2.Nodes=function(){let e=new YN(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),t=new Or("float cubeUV_maxMipLevel 8.0",!0),i=new Or("float cubeUV_minMipLevel 4.0",!0),r=new Or("float cubeUV_maxTileSize 256.0",!0),a=new Or("float cubeUV_minTileSize 16.0",!0),n=new Jt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);n.useKeywords=!1;let s=new Jt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);s.useKeywords=!1;let o=new Jt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[e,n,s,t,i,r,a]);o.useKeywords=!1;let l=new Or("float r0 1.0",!0),u=new Or("float v0 0.339",!0),c=new Or("float m0 -2.0",!0),d=new Or("float r1 0.8",!0),h=new Or("float v1 0.276",!0),p=new Or("float m1 -1.0",!0),f=new Or("float r4 0.4",!0),v=new Or("float v4 0.046",!0),m=new Or("float m4 2.0",!0),g=new Or("float r5 0.305",!0),y=new Or("float v5 0.016",!0),b=new Or("float m5 3.0",!0),x=new Or("float r6 0.21",!0),S=new Or("float v6 0.0038",!0),w=new Or("float m6 4.0",!0),E=[l,u,c,d,h,p,f,v,m,g,y,b,x,S,w],M=new Jt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,E);return{bilinearCubeUV:o,roughnessToMip:M,m0:c,cubeUV_maxMipLevel:t}}();var dh=class extends zr{constructor(e){super("v3"),this.nodeType="Normal",this.scope=e??dh.VIEW}getShared(){return this.scope===dh.WORLD}build(e,t,i,r){let a=e.context[this.scope+"Normal"];return a?a.build(e,t,i,r):super.build(e,t,i)}generate(e,t,i,r,a){let n;switch(this.scope){case dh.VIEW:e.isShader("vertex")?n="transformedNormal":n="geometryNormal";break;case dh.LOCAL:e.isShader("vertex")?n="objectNormal":(e.requires.normal=!0,n="vObjectNormal");break;case dh.WORLD:e.isShader("vertex")?n="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,n="vWNormal");break}return e.format(n,this.getType(e),t)}},vs=dh;vs.LOCAL="local",vs.WORLD="world",vs.VIEW="view",vs.NORMAL="normal";ms.addKeyword("viewNormal",function(){return new vs(vs.VIEW)});ms.addKeyword("localNormal",function(){return new vs(vs.NORMAL)});ms.addKeyword("worldNormal",function(){return new vs(vs.WORLD)});var zl=class extends zr{constructor(e){super("v3"),this.nodeType="Position",this.scope=e??zl.LOCAL}getType(){switch(this.scope){case zl.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case zl.LOCAL:case zl.WORLD:return!1}return!0}generate(e,t,i,r,a){let n;switch(this.scope){case zl.LOCAL:e.isShader("vertex")?n="transformed":(e.requires.position=!0,n="vPosition");break;case zl.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,n="vWPosition";break;case zl.VIEW:n=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case zl.PROJECTION:n=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return e.format(n,this.getType(),t)}},xo=zl;xo.LOCAL="local",xo.WORLD="world",xo.VIEW="view",xo.PROJECTION="projection";ms.addKeyword("position",function(){return new xo});ms.addKeyword("worldPosition",function(){return new xo(xo.WORLD)});ms.addKeyword("viewPosition",function(){return new xo(xo.VIEW)});var Xo=class extends zr{constructor(e){super("v3"),this.nodeType="Reflect",this.scope=e??Xo.CUBE}getUnique(e){return!e.context.viewNormal}getType(){switch(this.scope){case Xo.SPHERE:return"v2"}return this.type}generate(e,t){let i=this.getUnique(e);if(e.isShader("fragment")){let r;switch(this.scope){case Xo.VECTOR:{let a=new vs(vs.VIEW),n=e.context.roughness,s=a.build(e,"v3"),o=new xo(xo.VIEW).build(e,"v3"),l=n?n.build(e,"f"):void 0,u=`reflect( -normalize( ${o} ), ${s} )`;l&&(u=`normalize( mix( ${u}, ${s}, ${l} * ${l} ) )`);let c=`inverseTransformDirection( ${u}, viewMatrix )`;i?(e.addNodeCode(`vec3 reflectVec = ${c};`),r="reflectVec"):r=c;break}case Xo.CUBE:{let a=new Xo(Xo.VECTOR).build(e,"v3"),n="vec3( -"+a+".x, "+a+".yz )";i?(e.addNodeCode(`vec3 reflectCubeVec = ${n};`),r="reflectCubeVec"):r=n;break}case Xo.SPHERE:{let a="normalize( ( viewMatrix * vec4( "+new Xo(Xo.VECTOR).build(e,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";i?(e.addNodeCode(`vec2 reflectSphereVec = ${a};`),r="reflectSphereVec"):r=a;break}}return e.format(r,this.getType(),t)}else return console.warn("ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)}},Lh=Xo;Lh.CUBE="cube",Lh.SPHERE="sphere",Lh.VECTOR="vector";var Mde=class extends zr{constructor(e=new Hl,t,i){super("v4"),this.nodeType="TextureCube",this.value=e,this.radianceNode=new Q2(this.value,t??new Lh(Lh.VECTOR),i),this.irradianceNode=new Q2(this.value,new vs(vs.WORLD),new di(1).setReadonly(!0))}generate(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),(e.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))}},Ede=class extends Cs{constructor(e=new AE,t,i){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=e,this.uv=t??new Lh,this.bias=i}getTexture(e,t){return super.generate(e,t,this.value.uuid,"tc")}generate(e,t){var i;if(t==="samplerCube")return this.getTexture(e,t);let r=this.getTexture(e,t),a=(i=this.uv)==null?void 0:i.build(e,"v3"),n=this.bias?this.bias.build(e,"f"):void 0;n===void 0&&e.context.bias&&(n=e.context.bias.setTexture(this).build(e,"f"));let s;n?s="texCubeBias( "+r+", "+a+", "+n+" )":s="texCube( "+r+", "+a+" )";let o={include:e.isShader("vertex"),ignoreCache:!0},l=this.getType(e);return e.addContext(o),this.colorSpace=this.colorSpace??new sl(new Gr("",l)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(s),s=this.colorSpace.build(e,l),e.removeContext(),e.format(s,l,t)}},Ade=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,Pde=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,Tde=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,kde=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,Ode=`
layout(location = 1) out vec4 gVelocity;
`,Dde=`
    // Discard fully transparent pixels 
    if (gl_FragColor.a <= 0.0) discard;

    gVelocity = vec4(0.0, 0.0, 0.0, 1.0);
`,xD=["x","y","z","w"],Ide=["float","vec2","vec3","vec4"],Lde={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},Bde={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},KN=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function e(t,i){return t.deps.length-i.deps.length}return function(t,i){let r=this.getIncludes(t,i);if(!r)return"";let a="";r=r.sort(e);for(let n=0;n<r.length;n++)r[n].src&&(a+=r[n].src+`
`);return a}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(e,t){this.addVertexParsCode(Ade),this.addFragmentParsCode(Pde),this.buildShader("vertex",e),this.buildShader("fragment",t);for(let i=0;i<this.requires.uv.length;i++)if(this.requires.uv[i]){let r=i>0?i+1:"";this.addVaryCode("varying vec2 vUv"+r+";"),i>0&&this.addVertexParsCode("attribute vec2 uv"+r+";"),this.addVertexFinalCode("vUv"+r+" = uv"+r+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(Tde),this.addFragmentFinalCode(kde)),this}buildShader(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")}setMaterial(e,t){return this.defines={},this}addFlow(e,t,i){return this.addSlot(e).addCache(t).addContext(i)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(e){return this.cache=e??"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(e){return this.slot=e||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(e,t){this.fragmentVariables[e]===void 0&&(this.addFragmentCode(`${t} ${e};`),this.fragmentVariables[e]="")}addFragmentParsVariable(e,t){this.fragmentParsVariables[e]===void 0&&(this.addFragmentParsCode(`${t} ${e};`),this.fragmentParsVariables[e]="")}addVertexParsVariable(e,t){this.vertexParsVariables[e]===void 0&&(this.addVertexParsCode(`${t} ${e};`),this.vertexParsVariables[e]="")}addVertexCode(e){this.addCode(e,"vertex")}addFragmentCode(e){this.addCode(e,"fragment")}addCode(e,t){this.code[t??this.shader]+=e+`
`}addVertexNodeCode(e){this.addNodeCode(e,"vertex")}addFragmentNodeCode(e){this.addNodeCode(e,"fragment")}addNodeCode(e,t){this.nodeCode[t??this.shader]+=e+`
`}clearNodeCode(e){e=e??this.shader;let t=this.nodeCode[e];return this.nodeCode[e]="",t}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(e){this.addFinalCode(e,"vertex")}addFragmentFinalCode(e){this.addFinalCode(e,"fragment")}addFinalCode(e,t){this.finalCode[t??this.shader]+=e+`
`}addVertexParsCode(e){this.addParsCode(e,"vertex")}addFragmentParsCode(e){this.addParsCode(e,"fragment")}addParsCode(e,t){this.parsCode[t??this.shader]+=e+`
`}addVaryCode(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)}isCache(e){return this.caches.indexOf(e)!==-1}isSlot(e){return this.slots.indexOf(e)!==-1}define(e,t){this.defines[e]=t===void 0?1:t}require(e){this.requires[e]=!0}isDefined(e){return this.defines[e]!==void 0}getVar(e,t,i,r="varying",a="V",n=""){let s=this.getVars(r),o=s[e];if(!o){let l=s.length;o={name:i||"node"+a+l+(n?"_"+n:""),type:t},s.push(o),s[e]=o}return o}getTempVar(e,t,i,r){return this.getVar(e,t,i,this.shader,"T",r)}getAttribute(e,t){if(!this.attributes[e]){let i=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(i.name+" = "+e+";"),this.attributes[e]={varying:i,name:e,type:t}}return this.attributes[e]}getCode(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join(`
`)}getVarListCode(e,t){t=t??"";let i="";for(let r=0,a=e.length;r<a;++r){let n=e[r],s=n.type,o=n.name,l=n.size,u=this.getFormatByType(s);if(u===void 0)throw new Error("Node pars "+u+" not found.");u.includes("[]")?i+=t+" "+u.substring(0,u.length-2)+" "+o+`[${l}];
`:i+=t+" "+u+" "+o+`;
`}return i}getVars(e){return this.inputs.vars[e??this.shader]}getNodeData(e){let t=e instanceof Na?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}}createUniform(e,t,i,r,a,n){if(t.includes("[]")){let s=this.inputs.arrayUniforms,o=s.list.length,l=new yD({type:t,size:i.size,name:r||"nodeUA"+o+(n?"_"+n:""),node:i,needsUpdate:a});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}else{let s=this.inputs.uniforms,o=s.list.length,l=new yD({type:t,name:r||"nodeU"+o+(n?"_"+n:""),node:i,needsUpdate:a});return s.list.push(l),s[e].push(l),s[e][l.name]=l,this.uniforms[l.name]=l,l}}createVertexUniform(e,t,i,r,a){return this.createUniform("vertex",e,t,i,r,a)}createFragmentUniform(e,t,i,r,a){return this.createUniform("fragment",e,t,i,r,a)}include(e,t,i){var r;let a;if(e=typeof e=="string"?ms.get(e):e,this.context.include===!1)return e.name;e instanceof Jt?a=this.includes.functions:e instanceof Or?a=this.includes.consts:e instanceof YN&&(a=this.includes.structs);let n=a[this.shader]=a[this.shader]||[];if(e){let s=n[e.name];if(s||(s=n[e.name]={node:e,deps:[]},n.push(s),s.src=e.build(this,"source")),e instanceof Jt&&t&&n[t.name]&&n[t.name].deps.indexOf(e)===-1&&(n[t.name].deps.push(e),(r=e.includes)==null?void 0:r.length)){let o=0;do this.include(e.includes[o++],t);while(o<e.includes.length)}return i&&(s.src=i),e.name}else throw new Error("Include not found.")}colorToVectorProperties(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(e){return e.replace(/c/g,"v3")}getIncludes(e,t){return this.includes[e][t||this.shader]}getConstructorFromLength(e){return Ide[e-1]}isTypeMatrix(e){return/^m/.test(e)}getTypeLength(e){return e==="f"?1:parseInt(this.colorToVector(e).substr(1))}getTypeFromLength(e){return e===1?"f":"v"+e}findNode(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i?.isNode)return i}}resolve(...e){for(let t=0;t<arguments.length;t++){let i=e[t];if(i!==void 0){if(i.isNode)return i;if(i.isTexture)switch(i.mapping){case cd:case dd:return new Ede(i);case Om:return new Mde(new Hl(i));default:return new Hl(i)}else{if(i.isVector2)return new yn(i);if(i.isVector3)return new Fs(i);if(i.isVector4)return new Vl(i)}}}}format(e,t,i){switch(this.colorToVector(i+" <- "+t)){case"f <- v2":return e+".x";case"f <- v3":return e+".x";case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":return e+".xy";case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":return"int( "+e+".x )";case"i <- v3":return"int( "+e+".x )";case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e}getTypeByFormat(e){return Lde[e]||e}getFormatByType(e){return Bde[e]||e}getUUID(e,t){return t=t!==void 0?t:!0,t&&this.cache&&(e=this.cache+"-"+e),e}getElementByIndex(e){return xD[e]}getIndexByElement(e){return xD.indexOf(e)}isShader(e){return this.shader===e}setShader(e){return this.shader=e,this}mergeDefines(e){for(let t in e)this.defines[t]=e[t];return this.defines}mergeUniform(e){for(let t in e)this.uniforms[t]=e[t];return this.uniforms}getTextureEncodingFromMap(e){let t;return e?e.isTexture&&(t=e.encoding):t=To,t===To&&this.context.gamma&&(t=Ji),t}},ha=class extends Cs{constructor(e=0,t,i,r){super("c"),this.nodeType="Color",this.value=e instanceof En?e:new En(e||0,t,i,r)}setRGBA(e){this.value.setRGBA(e.r,e.g,e.b,e.a)}generate(e,t,i,r,a,n){i=e.getUUID(i??this.getUUID()),r=r??this.getType(e);let s=e.getNodeData(i),o=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let l=this.alpha.build(e,"f");e.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${l};`)}return o?this.generateReadonly(e,t,i,r,a,n):e.isShader("vertex")?(s.vertex||(s.vertex=e.createVertexUniform(r,this,a,n,this.getLabel())),e.format(s.vertex.name,r,t)):(s.fragment||(s.fragment=e.createFragmentUniform(r,this,a,n,this.getLabel())),e.format(s.fragment.name,r,t))}generateReadonly(e,t,i,r,a,n){return e.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",r,t)}},Nr=class extends Cs{constructor(e){super("i"),this.nodeType="Int",this.value=Math.floor(e??0)}generateReadonly(e,t,i,r,a,n){return e.format(this.value.toString(),r,t)}},Jn=class extends Cs{constructor(e){super("b"),this.nodeType="Bool",this.value=e??!1}generateReadonly(e,t,i,r){return e.format(this.value?"true":"false",r,t)}},kc=class extends Cs{constructor(e=1,t){super("f[]"),this.nodeType="FloatArray",this.size=e,this.value=Array.isArray(t)?t:typeof t=="number"?new Array(e).fill(t):new Array(e).fill(0)}},_A=class extends Cs{},zde=class extends _A{constructor(e){super("v3"),this.image=e,this._value=new V}get value(){return this._value.x=this.image.isVideo?this.image.img.videoWidth??0:this.image.img.width,this._value.y=this.image.isVideo?this.image.img.videoHeight??0:this.image.img.height,this._value}},J2=class extends _A{constructor(e,t,i=1008,r=1006){super("t"),this.image=e,this.wrap=t,this.minFilter=i,this.magFilter=r}get value(){return this.image.getTexture(this.wrap,this.minFilter,this.magFilter)}},ZN=class extends Cs{constructor(e){super("m3"),this.nodeType="Matrix3",this.value=e??new Ta}generateReadonly(e,t,i,r,a,n){return e.format("mat3("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}},yl=class extends Cs{constructor(e){super("m4"),this.nodeType="Matrix4",this.value=e??new zt}generateReadonly(e,t,i,r,a,n){return e.format("mat4("+this.value.elements.join(", ")+")",r,t)}get elements(){return this.value.elements}set elements(e){this.value.fromArray(e)}};function SD(e,t,i,r=0){e.setUvTransform(i[0],i[1],t[0],t[1],0,0,0).premultiply(new Ta().makeRotation(r*li.DEG2RAD))}var Rde=class extends ZN{constructor(e,t,i=0){super(new Ta),this.repeat=e,this.offset=t,this.rotation=i,SD(this.value,e,t,i)}updateMatrix(){SD(this.value,this.repeat,this.offset,this.rotation)}},Oc=class extends Cs{constructor(e=1,t){super("v4[]"),this.nodeType="Vector4Array",this.size=e,this.value=Array.isArray(t)?t:t instanceof Wi?new Array(e).fill(t):new Array(e).fill(new Wi(0))}},CD=class extends zr{constructor(e,t,i,r){super("v3"),this.nodeType="Blend",this.a=e,this.b=t,this.alpha=i,this.mode=r}generate(e,t){if(e.isShader("fragment")){let i=[];return i.push(this.a.build(e,"c")),i.push(this.b.build(e,"c")),i.push(this.alpha.build(e,"f")),i.push(this.mode.build(e,"i")),e.format("spe_blend("+i.join(",")+")",this.getType(e),t)}else return console.warn("BlendNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},QN=class extends zr{constructor(e,t){super("v3"),this.nodeType="CustomColor",this.color=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(QN.Nodes.customColor);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.color.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.build(e,"v3")})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomColorNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eM=QN;eM.Nodes=function(){return{customColor:new Jt(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var JN=class extends zr{constructor(e,t){super("v3"),this.nodeType="CustomNormal",this.cnormal=e,this.alpha=t,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){let i=e.include(JN.Nodes.customNormal);e.addFragmentVariable(this.calpha,"float");let r=[];return r.push(this.cnormal.build(e,"v3")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("CustomNormalNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},eV=JN;eV.Nodes=function(){return{customNormal:new Jt(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var xf=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c,d){super("v3"),this.nodeType="CustomTexture",this.texture=e,this.textureSize=t,this.crop=i,this.projection=r,this.axis=a,this.side=n,this.size=s,this.blending=o,this.mat=l,this.isMask=d,this.alpha=u,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){e.require("position"),e.require("normal"),e.require("uv"),e.requires.uv=[!0],e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0;let i=`g${this.uuid.toString().replace(/-/g,"")}`,r;switch(this.projection.value){case 3:r=e.include(xf.Nodes.cylindrical);break;case 2:r=e.include(xf.Nodes.spherical);break;case 1:let n=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],s=["zy","xz","xy"][this.axis.value],o=new Jt(`
		vec3 ${i}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${s})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${n}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);r=e.include(o);break;case 4:r=e.include(xf.Nodes.triplanar);break;default:r=e.include(xf.Nodes.uv);break}e.addFragmentVariable(this.calpha,"float");let a=[];if(a.push("normal"),a.push(this.texture.generate(e,"t")),a.push(this.textureSize.build(e,"v2")),a.push(this.crop.build(e,"f")),a.push(this.mat.build(e,"mat3")),a.push(this.size.build(e,"v2")),a.push(this.blending.build(e,"f")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.mode.build(e,"i")),a.push(this.calpha),this.projection.value===4){let n=`${i}_writeUvs`,s=n+"0",o=n+"1",l=n+"2",u=`${i}_triplanarWeights`;e.addFragmentVariable(s,"vec2"),e.addFragmentVariable(o,"vec2"),e.addFragmentVariable(l,"vec2"),e.addFragmentVariable(u,"vec3"),a.push(s),a.push(o),a.push(l),a.push(u)}else{let n=`${i}_writeUvs`;e.addFragmentVariable(n,"vec2"),a.push(n)}return e.format(r+"("+a.join(",")+")",this.getType(e),t)}},MA=xf;MA.Nodes=function(){let e=new Jt(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),t=new Jt(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new Jt(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),r=new Jt(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:e,spherical:t,uv:i,triplanar:r}}();var Sf=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c,d){super("v3"),this.nodeType="Depth",this.gradientType=e,this.smooth=t,this.near=i,this.far=r,this.isVector=a,this.isWorldSpace=n,this.origin=s,this.direction=o,this.colors=l,this.steps=u,this.isMask=d,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`,r=new Jt(`vec3 ${i}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${i}_MAX_COLORS], float steps[${i}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${i}_IS_VECTOR
                   #ifdef ${i}_LINEAR
                       #ifdef ${i}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${i}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${i}_SMOOTH
				for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${i}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[Sf.Nodes.vectorLinearWorldSpaceDepth,Sf.Nodes.vectorLinearObjectSpaceDepth,Sf.Nodes.vectorSphericalObjectSpaceDepth,Sf.Nodes.vectorSphericalWorldSpaceDepth]);if(e.isShader("fragment")){e.define(`${i}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&e.define(`${i}_SMOOTH`),this.isVector.value>.5&&e.define(`${i}_IS_VECTOR`),this.gradientType.value===0&&e.define(`${i}_LINEAR`),this.isWorldSpace.value>.5&&e.define(`${i}_WORLDSPACE`),e.require("worldPosition"),e.addFragmentVariable(this.calpha,"float");let a=e.include(r),n=[];return n.push(this.near.build(e,"f")),n.push(this.far.build(e,"f")),n.push(this.origin.build(e,"v3")),n.push(this.direction.build(e,"v3")),n.push(this.colors.build(e,"v4[]")),n.push(this.steps.build(e,"f[]")),n.push(this.isMask.build(e,"b")),n.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),n.push(this.alpha.build(e,"f")),n.push(this.calpha),e.format(a+"("+n.join(",")+")",this.getType(e),t)}else return console.warn("DepthNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},tV=Sf;tV.Nodes=function(){let e=new Jt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),t=new Jt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new Jt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),r=new Jt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:e,vectorLinearObjectSpaceDepth:t,vectorSphericalWorldSpaceDepth:i,vectorSphericalObjectSpaceDepth:r}}();var Nde=class extends zr{constructor(e,t,i,r,a,n,s,o){super("v3"),this.nodeType="Fresnel",this.color=e,this.bias=t,this.scale=i,this.intensity=r,this.factor=a,this.isMask=o,this.alpha=n,this.mode=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=new Jt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),r=e.include(i),a=[];return a.push(this.color.build(e,"c")),a.push(this.bias.build(e,"f")),a.push(this.scale.build(e,"f")),a.push(this.intensity.build(e,"f")),a.push(this.factor.build(e,"f")),a.push(this.isMask.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.mode.build(e,"i")),a.push(this.calpha),e.format(r+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("FresnelNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},iV=class extends zr{constructor(e,t,i,r,a,n,s,o,l){super("v3"),this.nodeType="Gradient",this.gradientType=e,this.smooth=t,this.colors=i,this.steps=r,this.offset=a,this.morph=n,this.angle=s,this.isMask=l,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.define("GRAD_MAX",10),e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(iV.Nodes.gradient),r=[];return r.push(this.gradientType.build(e,"i")),r.push(this.smooth.build(e,"b")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.offset.build(e,"v2")),r.push(this.morph.build(e,"v2")),r.push(this.angle.build(e,"f")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("GradientNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},rV=iV;rV.Nodes=function(){return{gradient:new Jt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var aV=class extends zr{constructor(e,t,i,r,a){super("v3"),this.nodeType="Matcap",this.texture=e,this.isMask=r,this.alpha=t,this.mode=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`,this.rotation=a}generate(e,t){if(e.isShader("fragment")){e.addFragmentVariable(this.calpha,"float");let i=e.include(aV.Nodes.matcap);e.require("normal"),e.requires.normal=!0;let r=[];return r.push(this.texture.generate(e,"t")),r.push("normal"),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.mode.build(e,"i")),r.push(this.calpha),r.push(this.rotation.build(e,"f")),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("MatcapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},nV=aV;nV.Nodes=function(){return{matcap:new Jt(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha, float rotation) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) );
					uv = mat2( cos(rotation), sin(rotation), -sin(rotation), cos(rotation) ) * uv;
					uv = uv * 0.495 + 0.5;
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var EA=(e=>(e.SIMPLEX="simplex3d",e.SIMPLEX_FRACTAL="simplex3dFractal",e.ASHIMA="simplexAshima",e.FBM="fbm",e.PERLIN="perlin",e.VORONOI="voronoi",e))(EA||{}),ps=function(){let e=new Jt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),t=new Jt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[e]);t.keywords.F3=new Or("float F3 0.3333333"),t.keywords.G3=new Or("float G3 0.1666667");let i=new Jt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[t]),r=new Jt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),a=new Jt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),n=new Jt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[r,a]),s=new Jt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),o=new Jt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[s]),l=new Jt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[o]),u=new Jt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[l]);u.keywords.NUM_OCTAVES=new Or("int NUM_OCTAVES 5");let c=new Jt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),d=new Jt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[r,a,c]),h=new Jt(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),p=new Jt(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),f=new Jt(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),v=new Jt(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),m=new Jt(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),g=new Jt(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),y=new Jt(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[h,p,f,v,m,g]);return{simplex:t,simplexFractal:i,simplexAshima:n,fbm:u,perlin:d,voronoi:y}}(),sV=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c,d,h,p,f,v,m,g,y){super("v3"),this.nodeType="Noise",this.scale=e,this.size=t,this.move=i,this.fA=r,this.fB=a,this.distortion=n,this.colorA=s,this.colorB=o,this.colorC=l,this.colorD=u,this.noiseType=d,this.voronoiStyle=p,this.highCut=f,this.lowCut=v,this.smoothness=m,this.seed=g,this.quality=y,this.isMask=h,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t,i,r,a){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let n=Object.values(EA)[this.noiseType.value],s=n=="voronoi"?`
		float v = ${n}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${n}(st),
					   ${n}(st + vec3(1.0)),
					   ${n}(st + vec3(1.0)));
		vec3 r = vec3(${n}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${n}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${n}(st * q));
		float f = ${n}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,o=new Jt(`vec3 ${n}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${s}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[ps.simplex,ps.simplexFractal,ps.simplexAshima,ps.fbm,ps.perlin,ps.voronoi]),l=e.include(o),u=[];return u.push(this.scale.build(e,"f")),u.push(this.size.build(e,"v3")),u.push(this.move.build(e,"f")),u.push(this.fA.build(e,"v2")),u.push(this.fB.build(e,"v2")),u.push(this.distortion.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.colorC.build(e,"v4")),u.push(this.colorD.build(e,"v4")),u.push(this.voronoiStyle.build(e,"i")),u.push(this.highCut.build(e,"f")),u.push(this.lowCut.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.seed.build(e,"f")),u.push(this.quality.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}};sV.numOctaves=5;var oV=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c,d,h,p,f,v){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=e,this.contourColor=t,this.outlineWidth=i,this.contourWidth=r,this.contourThreshold=a,this.outlineThreshold=n,this.contourFrequency=s,this.outlineSmoothing=o,this.contourDirection=l,this.positionalLines=u,this.compensation=c,this.resolution=d,this.normalMap=h,this.depthMap=p,this.pixelRatio=f,this.alpha=v,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){let i=`g${this.uuid.toString().replace(/-/g,"")}`;if(e.require("vWorldViewDir"),e.require("worldNormal"),e.extensions.derivatives=!0,this.compensation.value&&e.define("OUTLINE_COMPENSATION",`${i}_offset`),this.firstTime){let r=this.outlineWidth.build(e,"f"),a=this.resolution.build(e,"v2"),n=this.compensation.build(e,"b"),s=this.pixelRatio.build(e,"f");e.addVertexParsVariable("randomColor","attribute vec3"),e.addVertexParsVariable("extrudeNormal","attribute vec3"),e.addVertexParsVariable(r,"uniform float"),e.addVertexParsVariable(a,"uniform vec2"),e.addVertexParsVariable(n,"uniform bool"),e.addVertexParsVariable(s,"uniform float"),e.addVertexParsVariable("vID","flat out float"),e.addFragmentParsVariable("vID","flat in float"),e.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${i}_offset = vec2(0.0);
                if (${n}) {
                    vec4 ${i}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${i}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${i}_offset = normalize(${i}_clipNormal.xy) / ${a} * (${r} / 2.0) * ${i}_clipPosition.w * 2.0 * ${s};
                    ${i}_clipPosition.xy += ${i}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${i}_clipPosition;
                }
            `)}if(e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let r=e.include(oV.Nodes.outline),a=[];return a.push(this.outlineColor.build(e,"c")),a.push(this.contourColor.build(e,"c")),a.push(this.outlineWidth.build(e,"f")),a.push(this.contourWidth.build(e,"f")),a.push(this.contourThreshold.build(e,"f")),a.push(this.outlineThreshold.build(e,"f")),a.push(this.contourFrequency.build(e,"f")),a.push(this.outlineSmoothing.build(e,"f")),a.push(this.contourDirection.build(e,"v3")),a.push(this.positionalLines.build(e,"b")),a.push(this.resolution.build(e,"v2")),a.push(this.normalMap.getTexture(e,"t")),a.push(this.depthMap.getTexture(e,"t")),a.push(this.pixelRatio.build(e,"f")),a.push(this.compensation.build(e,"b")),a.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),a.push(this.alpha.build(e,"f")),a.push(this.calpha),this.firstTime=!this.firstTime,e.format(r+"("+a.join(",")+")",this.getType(e),t)}else return console.warn("OutlineNode is not compatible with "+e.shader+" shader."),""}},lV=oV;lV.Nodes=function(){let e=new Jt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new Jt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[e])}}();var Rl=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c,d,h,p,f,v,m,g){super("v3"),this.nodeType="Pattern",this.style=e,this.projection=t,this.axis=i,this.blending=r,this.offset=a,this.colorA=n,this.colorB=s,this.frequency=o,this.size=l,this.variation=u,this.smoothness=c,this.zigzag=d,this.rotation=h,this.vertical=p,this.horizontal=f,this.sides=v,this.isMask=g,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.isShader("fragment")){e.require("position"),e.require("uv"),e.requires.uv=[!0],e.require("normal"),e.requires.normal=!0,e.addFragmentVariable(this.calpha,"float");let i;switch(this.style.value){case 0:i="circle";break;case 1:i="ring";break;case 2:i="polygon";break;case 3:i="xcross";break;case 4:i="diamond";break;case 5:i="checkerboard";break;case 6:i="line";break;case 7:i="wave";break;default:i="circle";break}let r=`g${this.uuid.toString().replace(/-/g,"")}`,a=new Jt(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),n=new Jt(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),s="";if(this.projection.value===4){let c=this.style.value===2?`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d=this.style.value===2?`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,h=this.style.value===2?`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;s=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${c};
				float d1 = ${d};
				float d2 = ${h};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let c=this.style.value===2?`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${i}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,d="";this.axis.value===0?d=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?d=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,d=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let h="";switch(this.projection.value){case 0:h="custom_uv = vUv.st;";break;case 1:break;case 2:h=`
							vec3 p = position;
							${d}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break}s=`
				vec2 custom_uv;
				${h}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${c};
				`}let o=new Jt(`vec3 ${r}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${s}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[n,a,Rl.DrawFunctions.circle,Rl.DrawFunctions.ring,Rl.DrawFunctions.polygon,Rl.DrawFunctions.cross,Rl.DrawFunctions.diamond,Rl.DrawFunctions.checkerboard,Rl.DrawFunctions.line,Rl.DrawFunctions.wave]),l=e.include(o),u=[];return u.push("normal"),u.push(this.blending.build(e,"f")),u.push(this.style.build(e,"i")),u.push(this.offset.build(e,"v2")),u.push(this.colorA.build(e,"v4")),u.push(this.colorB.build(e,"v4")),u.push(this.frequency.build(e,"v2")),u.push(this.size.build(e,"f")),u.push(this.variation.build(e,"f")),u.push(this.smoothness.build(e,"f")),u.push(this.zigzag.build(e,"f")),u.push(this.rotation.build(e,"f")),u.push(this.vertical.build(e,"v2")),u.push(this.horizontal.build(e,"v2")),u.push(this.sides.build(e,"i")),u.push(this.isMask.build(e,"b")),u.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),u.push(this.alpha.build(e,"f")),u.push(this.calpha),e.format(l+"("+u.join(",")+")",this.getType(e),t)}else return console.warn("PatterNode is not compatible with "+e.shader+" shader."),e.format("vec3(0.0)",this.getType(e),t)}},uV=Rl;uV.DrawFunctions=function(){let e=new Jt(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),t=new Jt(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[e]),i=new Jt(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[t]),r=new Jt(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[t]),a=new Jt(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[t]),n=new Jt(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[t]),s=new Jt(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[t]),o=new Jt(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),l=new Jt(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[t]),u=new Jt(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:t,circle:i,ring:r,polygon:a,cross:n,diamond:s,checkerboard:o,line:l,wave:u}}();var cV=class extends zr{constructor(e,t,i,r,a,n,s,o){super("v3"),this.nodeType="Rainbow",this.filmThickness=e,this.movement=t,this.wavelengths=i,this.noiseStrength=r,this.noiseScale=a,this.offset=n,this.isMask=o,this.alpha=s,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("vWorldViewDir"),e.require("worldNormal"),e.isShader("fragment")){e.require("uv"),e.requires.uv=[!0],e.addFragmentVariable(this.calpha,"float");let i=e.include(cV.Nodes.rainbow),r=[];return r.push(this.filmThickness.build(e,"f")),r.push(this.movement.build(e,"f")),r.push(this.wavelengths.build(e,"v3")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.offset.build(e,"v3")),r.push(this.isMask.build(e,"b")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("RainbowNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},dV=cV;dV.Nodes=function(){let e=new Jt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[ps.simplex]);return{rainbow:new Jt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[e])}}();var hV=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u){super("v3"),this.nodeType="Toon",this.positioning=e,this.colors=t,this.steps=i,this.source=r,this.isWorldSpace=a,this.noiseStrength=n,this.noiseScale=s,this.shadowColor=o,this.offset=l,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.require("worldNormal"),e.require("worldPosition"),e.isShader("fragment")){e.define("COLORS_MAX",10),e.addFragmentVariable(this.calpha,"float");let i=e.include(hV.Nodes.toon),r=[];return r.push(this.positioning.build(e,"i")),r.push(this.colors.build(e,"v4[]")),r.push(this.steps.build(e,"f[]")),r.push(this.source.build(e,"v3")),r.push(this.isWorldSpace.build(e,"b")),r.push(this.noiseStrength.build(e,"f")),r.push(this.noiseScale.build(e,"f")),r.push(this.shadowColor.build(e,"v4")),r.push(this.offset.build(e,"v3")),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("ToonNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},pV=hV;pV.Nodes=function(){let e=new Jt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),t=new Jt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),i=new Jt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[t]),r=new Jt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),a=new Jt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[r]);return{toon:new Jt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ps.simplex,e,i,a])}}();var Vde=function(){return{textureBicubic:new Jt(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function Fde(e,t){return e>=t?new Ce(t/e,1):new Ce(1,e/t)}var fV=class extends zr{constructor(e,t,i,r,a,n,s,o){super("v3"),this.nodeType="Transmission",this.thickness=e,this.ior=t,this.roughness=i,this.transmissionSamplerSize=r,this.transmissionSamplerMap=a,this.transmissionDepthMap=n,this.aspectRatio=s,this.alpha=o,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(e,t){if(e.extensions.shaderTextureLOD=!0,e.extensions.derivatives=!0,e.isShader("fragment")){e.define("NUM_SAMPLES",6),e.define("BLUR_SLOD",Math.pow(2,Ri.transmissionLod.value)),e.require("worldPosition"),e.requires.worldNormal=!0,e.requires.modelMatrix=!0,e.requires.projectionMatrix=!0,e.addFragmentVariable(this.calpha,"float");let i=e.include(fV.Nodes.transmission),r=[];return r.push(this.thickness.build(e,"f")),r.push(this.ior.build(e,"f")),r.push(this.roughness.build(e,"f")),r.push(this.transmissionSamplerSize.build(e,"v2")),r.push(this.transmissionSamplerMap.getTexture(e,"t")),r.push(this.transmissionDepthMap.getTexture(e,"t")),r.push(this.aspectRatio.build(e,"v2")),r.push("normal"),r.push(this.mask?`luminance(${this.mask.flow(e,"v3").result})`:"1.0"),r.push(this.alpha.build(e,"f")),r.push(this.calpha),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("TransmissionNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},mV=fV;mV.Nodes=function(){let e=new Jt(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),t=new Jt(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),i=new Jt(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),r=new Jt(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[Vde.textureBicubic,i,e]),a=new Jt(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[r,t]);return{transmission:new Jt(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[a])}}();var tM=(e=>(e.NOISE="noise",e.MAP="map",e))(tM||{}),vV=class extends zr{constructor(e,t,i,r,a,n,s,o,l,u,c){super("v3"),this.displacementTypeIndex=new Nr(0),this.nodeType="VertexDisplacement",this.intensity=e,this.movementOrTexture=t,Object.values(tM)[this.displacementTypeIndex.value]==="map"&&(this.mat=new ZN(this.movementOrTexture.value.matrix)),this.cropOrOffset=i,this.scale=u,this.noiseFunctionIndex=c,this.voronoiStyle=r,this.smoothness=a,this.seed=n,this.highCut=s,this.lowCut=o,this.quality=l}generate(e,t){if(e.isShader("vertex")){e.define("USE_LAYER_DISPLACE");let i,r=[];switch(r.push("displaced_position"),r.push("displaced_normal"),Object.values(tM)[this.displacementTypeIndex.value]){case"map":{i=e.include(vV.Nodes.map),r.push(this.movementOrTexture.getTexture(e,"t")),r.push("uv"),r.push(this.cropOrOffset.build(e,"f")),this.mat&&r.push(this.mat.build(e,"mat3"));break}case"noise":{let a=Object.values(EA)[this.noiseFunctionIndex.value],n=new Jt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),s=a=="voronoi"?`
					float v = ${a}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${a}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,o=new Jt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${s}
						}`,[ps.simplex,ps.simplexFractal,ps.simplexAshima,ps.fbm,ps.perlin,ps.voronoi]),l=new Jt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[o,n]);i=e.include(l),r.push(this.scale.build(e,"f")),r.push(this.cropOrOffset.build(e,"v3")),r.push(this.movementOrTexture.build(e,"f")),r.push(this.voronoiStyle.build(e,"i")),r.push(this.smoothness.build(e,"f")),r.push(this.seed.build(e,"f")),r.push(this.highCut.build(e,"f")),r.push(this.lowCut.build(e,"f")),r.push(this.quality.build(e,"i"));break}}return r.push(this.intensity.build(e,"f")),r.push("displaced_normal"),e.format(i+"("+r.join(",")+")",this.getType(e),t)}else return console.warn("VertexDisplacementNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)}},gV=vV;gV.Nodes=function(){let e=new Jt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),t=new Jt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new Jt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[e,t])}}();var Ri={normalRenderTarget:new Hl,normalRenderTargetDepth:new Hl,transmissionRenderTarget:new Hl,aspectRatio:new yn,transmissionSize:new yn(2048,2048),transmissionRenderTargetDepth:new Hl,aoRenderTarget:new Hl,aoEnabled:new Jn,pixelRatioNode:new di(1),resolution:new yn,penumbraSize:new kc(5,.5),frameIndex:new Nr(0),transmissionLod:new Nr(2)};for(let e of Object.values(Ri))e.isRenderGlobal=!0;var yV={skiaWasmUrl:"https://unpkg.com/@splinetool/ui-wasm@1.9.31/build/ui.wasm"},AA=class extends Na{constructor(){super("basic"),this.nodeType="Basic",this.color=new ha(Ds),this.shadingAlpha=new di(1),this.shadingBlend=new Nr(0),this.previousModelViewMatrix=new yl,this.previouseProjectionMatrix=new yl}get category(){return"phong"}generate(e){let t;if(e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pp.merge([Kt.fog])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{this.color===void 0&&(this.color=new ha(Ds)),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"});let i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0,a=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,n=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0;e.requires.transparent=r!==void 0,e.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let s=["#include <normal_fragment_begin>",i.code];r&&s.push(r.code,"#ifdef ALPHATEST"," if ( "+r.result+" <= ALPHATEST ) discard;","#endif"),n?s.push(n.code,`vec3 outgoingLight = ${i.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${n.result}, 1.0, SPE_BLENDING_NORMAL);`):s.push(`vec3 finalColor = ${i.result};`);let o="1.0";this.mask&&(this.mask.analyze(e),o=`luminance(${this.mask.flow(e,"v3").result})`),r?s.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${r.result} * ${o} );`):s.push("gl_FragColor = vec4("+i.result+", 1.0 );"),a&&s.push(`gl_FragColor.a *= ${a.result};`),s.push("#include <fog_fragment>","#include <dithering_fragment>"),t=s.join(`
`)}return t}},jde=class extends Na{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new ha(Ds),this.emissive=new ha(0),this.emissiveIntensity=new di(1),this.previousModelViewMatrix=new yl,this.previouseProjectionMatrix=new yl,this.shadingAlpha=new di(1),this.shadingBlend=new Nr(0),this.occlusion=new Jn(!0)}get category(){return"lambert"}build(e){let t;if(e.define("LAMBERT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pp.merge([Kt.fog,Kt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),r.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),this.color===void 0&&(this.color=new ha(Ds)),this.color.analyze(e,{slot:"color"}),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.emissive.flow(e,"c",{slot:"emissive"}),a=this.emissiveIntensity.flow(e,"f",{slot:"emissive"}),n=this.occlusion.flow(e,"b",{slot:"occlusion"}),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];d.push(i.code,"vec3 diffuseColor = "+i.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),u&&d.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),d.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),r&&d.push(r.code,"reflectedLight.directDiffuse += "+r.result+" * "+a.result+";"),d.push("vec3 ao = aoEnabled && "+n.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${o.result} );

					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result} );`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},np=function(){let e=new Jt(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),t=new Jt(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:e,perturbNormalArb:t}}(),$de=class extends Na{constructor(){super("phong"),this.nodeType="Phong",this.color=new ha(Ds),this.specular=new ha(1118481),this.shininess=new di(30),this.previousModelViewMatrix=new yl,this.previouseProjectionMatrix=new yl,this.shadingAlpha=new di(1),this.shadingBlend=new Nr(0),this.occlusion=new Jn(!0)}get category(){return"phong"}build(e){let t;if(e.define("PHONG"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pp.merge([Kt.fog,Kt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),this.color===void 0&&(this.color=new ha(Ds)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e);let i=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let r=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),n=this.shininess.flow(e,"f"),s=this.shadingAlpha.flow(e,"f"),o=this.shadingBlend.flow(e,"i"),l=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,u=this.alpha?this.alpha.flow(e,"f"):void 0,c=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=u!==void 0,e.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let d=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){e.include(np.dHdxy),e.include(np.perturbNormalArb);let p=this.bumpMap.texture.flow(e,"t"),f=this.bumpMap.flow(e,"v3"),v=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",m="";this.bumpMap.projection.value===4?m=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${p.result}, uv0, ${v});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${p.result}, uv1, ${v});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${p.result}, uv2, ${v});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:m=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${p.result}, bumpMapCachedUv, ${v});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,d.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${f.result};
					${m}
					`)}d.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",a.code,"	vec3 specular = "+a.result+";",n.code,"	float shininess = max( 0.0001, "+n.result+" );","	float specularStrength = 1.0;"),u&&d.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),d.push("material.diffuseColor = diffuseColor;"),d.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d.push("vec3 ao = aoEnabled && "+i.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let h="1.0";this.mask&&(this.mask.analyze(e),h=`luminance(${this.mask.flow(e,"v3").result})`),d.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${s.result} * ${h} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${s.result} * ${h}, ${o.result} );
					
					outgoingLight *= ao;
				}
				`),l&&d.push(l.code,`outgoingLight = spe_blend(outgoingLight, ${l.result}, 1.0, SPE_BLENDING_NORMAL);`),u?d.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${u.result});`):d.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),c&&d.push(`gl_FragColor.a *= ${c.result};`),d.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=d.join(`
`)}return t}},Ude=class extends Na{constructor(){super("standard"),this.nodeType="Standard",this.color=new ha(Ds),this.roughness=new di(.3),this.metalness=new di(0),this.reflectivity=new di(.5),this.previousModelViewMatrix=new yl,this.previouseProjectionMatrix=new yl,this.shadingAlpha=new di(1),this.shadingBlend=new Nr(0),this.occlusion=new Jn(!0)}get category(){return"physical"}build(e){let t;if(e.define("STANDARD"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pp.merge([Kt.fog,Kt.lights])),Kt.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled});let i={gamma:!0};this.color===void 0&&(this.color=new ha(Ds)),this.color.analyze(e,{slot:"color",context:i}),this.roughness.analyze(e),this.metalness.analyze(e);let r=this.occlusion.flow(e,"b",{slot:"occlusion"});this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e),this.reflectivity&&this.reflectivity.analyze(e);let a=this.color.flow(e,"c",{slot:"color",context:i}),n=this.roughness.flow(e,"f"),s=this.metalness.flow(e,"f"),o=this.shadingAlpha.flow(e,"f"),l=this.shadingBlend.flow(e,"i"),u=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,c=this.alpha?this.alpha.flow(e,"f"):void 0,d=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0,h=this.reflectivity?this.reflectivity.flow(e,"f"):void 0;e.requires.transparent=c!==void 0,e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let p=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){e.include(np.dHdxy),e.include(np.perturbNormalArb);let v=this.bumpMap.texture.flow(e,"t"),m=this.bumpMap.flow(e,"v3"),g=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",y="";this.bumpMap.projection.value===4?y=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${v.result}, uv0, ${g});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${v.result}, uv1, ${g});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${v.result}, uv2, ${g});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:y=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${v.result}, bumpMapCachedUv, ${g});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};
					${y}
					`)}if(p.push(a.code,"	vec3 diffuseColor = "+a.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	float metalnessFactor = "+s.result+";"),this.roughnessMap){let v=this.roughnessMap.texture.flow(e,"t"),m=this.roughnessMap.flow(e,"v3"),g="";this.roughnessMap.projection.value===4?g=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${v.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${v.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${v.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${n.result};
					`:g=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${v.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${n.result};
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${m.result};

					const float roughnessScale = 1.0;

					${g}
				`)}else p.push(n.code,"	float roughnessFactor = "+n.result+";");c&&p.push(c.code,"#ifdef ALPHATEST","	if ( "+c.result+" <= ALPHATEST ) discard;","#endif"),p.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),p.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),h?p.push(h.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+h.result+" ) ), diffuseColor, metalnessFactor );"):p.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),p.push("#include <lights_fragment_begin>"),p.push("#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let f="1.0";this.mask&&(this.mask.analyze(e),f=`luminance(${this.mask.flow(e,"v3").result})`),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${o.result} * ${f} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${o.result} * ${f}, ${l.result} );
					
					outgoingLight *= ao;
				}
				`),u&&p.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),c?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${c.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),d&&p.push(`gl_FragColor.a *= ${d.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=p.join(`
`)}return t}},Wde=class extends Na{constructor(){super("toon"),this.nodeType="Toon",this.color=new ha(Ds),this.specular=new ha(1118481),this.shininess=new di(30),this.previousModelViewMatrix=new yl,this.previouseProjectionMatrix=new yl,this.shadingAlpha=new di(1),this.shadingBlend=new Nr(0)}get category(){return"toon"}build(e){let t;if(e.define("TOON"),e.requires.lights=!0,e.extensions.derivatives=!0,e.isShader("vertex")){let i=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({resolution:Ri.resolution}),e.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),e.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),e.mergeUniform(pp.merge([Kt.fog,Kt.lights])),e.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let r=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];i&&r.push(i.code,i.result?"displaced_position = "+i.result+";":""),r.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),r.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),r.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),t=r.join(`
`)}else{e.mergeUniform({penumbraSize:Ri.penumbraSize}),e.mergeUniform({frameIndex:Ri.frameIndex}),e.mergeUniform({aoMap:Ri.aoRenderTarget}),e.mergeUniform({aoEnabled:Ri.aoEnabled}),this.color===void 0&&(this.color=new ha(Ds)),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.shadingAlpha.analyze(e),this.shadingBlend.analyze(e),this.afterColor&&this.afterColor.analyze(e,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(e);let i=this.color.flow(e,"c",{slot:"color"}),r=this.specular.flow(e,"c"),a=this.shininess.flow(e,"f"),n=this.shadingAlpha.flow(e,"f"),s=this.shadingBlend.flow(e,"i"),o=this.afterColor?this.afterColor.flow(e,"c",{slot:"afterColor"}):void 0,l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.alphaOverride?this.alphaOverride.flow(e,"f"):void 0;e.requires.transparent=l!==void 0,e.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){e.include(np.dHdxy),e.include(np.perturbNormalArb);let h=this.bumpMap.texture.flow(e,"t"),p=this.bumpMap.flow(e,"v3"),f=this.bumpMapIntensity?this.bumpMapIntensity.flow(e,"f").result:"1.0",v="";this.bumpMap.projection.value===4?v=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${h.result}, uv0, ${f});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${h.result}, uv1, ${f});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${h.result}, uv2, ${f});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:v=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${h.result}, bumpMapCachedUv, ${f});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,c.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${p.result};
					${v}
					`)}c.push(i.code,"	vec3 diffuseColor = "+i.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",r.code,"	vec3 specular = "+r.result+";",a.code,"	float shininess = max( 0.0001, "+a.result+" );","	float specularStrength = 1.0;"),l&&c.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),c.push("material.diffuseColor = diffuseColor;"),c.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let d="1.0";this.mask&&(this.mask.analyze(e),d=`luminance(${this.mask.flow(e,"v3").result})`),c.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${n.result} * ${d} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${n.result} * ${d}, ${s.result} );
				}
				`),o&&c.push(o.code,`outgoingLight = spe_blend(outgoingLight, ${o.result}, 1.0, SPE_BLENDING_NORMAL);`),l?c.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${l.result} );`):c.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),u&&c.push(`gl_FragColor.a *= ${u.result};`),c.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),t=c.join(`
`)}return t}},Hde=class{constructor(e=1e3*10){this.timeout=e,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...e){}remove(e){let t=this.cache.get(e);t&&(this.dispose(e,t.data),this.cache.delete(e),t.prev.next=t.next,t.next.prev=t.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let e=Date.now(),t=this.head.next;for(;t.time<e-this.timeout;)this.dispose(t.src,t.data),this.cache.delete(t.src),t=t.next,t.prev=this.head,this.head.next=t;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(e){var t;return(t=this.cache.get(e))==null?void 0:t.data}load(e){let t=Date.now(),i=this.cache.get(e);return i===void 0?(i={data:this.create(e),src:e,time:t,next:null,prev:null},this.cache.set(e,i)):(i.time=t,i.prev.next=i.next,i.next.prev=i.prev),i.prev=this.tail.prev,i.next=this.tail,this.tail.prev.next=i,this.tail.prev=i,this.scheduleCleanup(),i.data}},Gde=class extends Hde{create(e){return URL.createObjectURL(new Blob([e]))}dispose(e,t){URL.revokeObjectURL(t)}},cx;function qde(e){return typeof e=="string"?e:(cx||(cx=new Gde),cx.load(e))}var Yde=class{constructor(e,t){this.data=e,this.cache=t,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},Xde=class{constructor(){this.cache=new Map}remove(e){this.cache.delete(e.data)}load(e){let t=this.cache.get(e);return t===void 0&&(t=this.create(e),this.cache.set(e,t)),t.refCount+=1,t}},bV=class extends Yde{constructor(e,t){super(e,t.imageHolderCache),this.data=e,this.shared=t,this.loaded=!1,this.isVideo=!1,this.isBuffer=!1,this._cache={1e3:{},1001:{},1002:{}},this.isVideo=e.type==="video",this.isBuffer=e.isWebGLRenderTarget===!0,this.loadPromise=this.updateSrc(this.isBuffer?e:e.data)}async updateSrc(e){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let t=()=>{this.loaded=!0;for(let r of Object.values(this._cache))for(let a of Object.values(r))for(let n of Object.values(a))n&&(n.image=this.img,n.needsUpdate=!0);this.shared.requestRender()};if(this.isBuffer)this.img=e,this.loaded=!0;else if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof e!="string"){var i=new FileReader;i.readAsDataURL(new Blob([e],{type:"video/mp4"}));let r;await new Promise(a=>{i.onloadend=n=>{var s;r=(s=n.target)==null?void 0:s.result,a(null)}}),this.img.src=r}else this.img.src=e;this.img.onloadeddata=()=>{t()}}else this.img=new Image,this.img.src=qde(e),this.img.onload=t,await new Promise(r=>{this.img.onload=()=>{t(),r(null)}})}getTexture(e,t=1008,i=1006){var r,a;let n=(a=(r=this._cache[e])==null?void 0:r[t])==null?void 0:a[i];if(n)return n;{let s;return this.isBuffer?s=this.img.texture:this.isVideo?s=new DZ(this.img,void 0,e,e):s=new aa(this.img,void 0,e,e,i,t),this.loaded&&(s.needsUpdate=!0),this._cache[e]===void 0&&(this._cache[e]={}),this._cache[e][t]===void 0&&(this._cache[e][t]={}),this._cache[e][t][i]=s,s}}setNeedsUpdate(e){for(let t of Object.values(this._cache))for(let i of Object.values(t))for(let r of Object.values(i))r&&(r.needsUpdate=e)}disposeTextures(){for(let[e,t]of Object.entries(this._cache))for(let[i,r]of Object.entries(t))for(let[a,n]of Object.entries(r))n?.dispose(),this._cache[e]!==void 0&&this._cache[e][i]!==void 0&&(this._cache[e][i][a]=void 0)}dispose(){super.dispose(),this.disposeTextures()}},Uu=class extends bV{};function Kde(e,t){var i=ehe(t);return i.formatToParts?Qde(i,e):Jde(i,e)}var Zde={year:0,month:1,day:2,hour:3,minute:4,second:5};function Qde(e,t){try{for(var i=e.formatToParts(t),r=[],a=0;a<i.length;a++){var n=Zde[i[a].type];n>=0&&(r[n]=parseInt(i[a].value,10))}return r}catch(s){if(s instanceof RangeError)return[NaN];throw s}}function Jde(e,t){var i=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var dx={};function ehe(e){if(!dx[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),i=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";dx[e]=i?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return dx[e]}function wV(e,t,i,r,a,n,s){var o=new Date(0);return o.setUTCFullYear(e,t,i),o.setUTCHours(r,a,n,s),o}var _D=36e5,the=6e4,hx={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function xV(e,t,i){var r,a;if(!e||(r=hx.timezoneZ.exec(e),r))return 0;var n;if(r=hx.timezoneHH.exec(e),r)return n=parseInt(r[1],10),MD(n)?-(n*_D):NaN;if(r=hx.timezoneHHMM.exec(e),r){n=parseInt(r[1],10);var s=parseInt(r[2],10);return MD(n,s)?(a=Math.abs(n)*_D+s*the,n>0?-a:a):NaN}if(ahe(e)){t=new Date(t||Date.now());var o=i?t:ihe(t),l=iM(o,e),u=i?l:rhe(t,l,e);return-u}return NaN}function ihe(e){return wV(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function iM(e,t){var i=Kde(e,t),r=wV(i[0],i[1]-1,i[2],i[3]%24,i[4],i[5],0).getTime(),a=e.getTime(),n=a%1e3;return a-=n>=0?n:1e3+n,r-a}function rhe(e,t,i){var r=e.getTime(),a=r-t,n=iM(new Date(a),i);if(t===n)return t;a-=n-t;var s=iM(new Date(a),i);return n===s?n:Math.max(n,s)}function MD(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var ED={};function ahe(e){if(ED[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),ED[e]=!0,!0}catch{return!1}}var nhe=fu(bH(),1),AD=fu(wH(),1),she=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,ohe=she,px=36e5,PD=6e4,lhe=2,es={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ohe};function uhe(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var i={},r=i.additionalDigits==null?lhe:(0,nhe.default)(i.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=che(e),n=dhe(a.date,r),s=n.year,o=n.restDateString,l=hhe(o,s);if(isNaN(l))return new Date(NaN);if(l){var u=l.getTime(),c=0,d;if(a.time&&(c=phe(a.time),isNaN(c)))return new Date(NaN);if(a.timeZone||i.timeZone){if(d=xV(a.timeZone||i.timeZone,new Date(u+c)),isNaN(d))return new Date(NaN)}else d=(0,AD.default)(new Date(u+c)),d=(0,AD.default)(new Date(u+c+d));return new Date(u+c+d)}else return new Date(NaN)}function che(e){var t={},i=es.dateTimePattern.exec(e),r;if(i?(t.date=i[1],r=i[3]):(i=es.datePattern.exec(e),i?(t.date=i[1],r=i[2]):(t.date=null,r=e)),r){var a=es.timeZone.exec(r);a?(t.time=r.replace(a[1],""),t.timeZone=a[1].trim()):t.time=r}return t}function dhe(e,t){var i=es.YYY[t],r=es.YYYYY[t],a;if(a=es.YYYY.exec(e)||r.exec(e),a){var n=a[1];return{year:parseInt(n,10),restDateString:e.slice(n.length)}}if(a=es.YY.exec(e)||i.exec(e),a){var s=a[1];return{year:parseInt(s,10)*100,restDateString:e.slice(s.length)}}return{year:null}}function hhe(e,t){if(t===null)return null;var i,r,a,n;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(i=es.MM.exec(e),i)return r=new Date(0),a=parseInt(i[1],10)-1,kD(t,a)?(r.setUTCFullYear(t,a),r):new Date(NaN);if(i=es.DDD.exec(e),i){r=new Date(0);var s=parseInt(i[1],10);return vhe(t,s)?(r.setUTCFullYear(t,0,s),r):new Date(NaN)}if(i=es.MMDD.exec(e),i){r=new Date(0),a=parseInt(i[1],10)-1;var o=parseInt(i[2],10);return kD(t,a,o)?(r.setUTCFullYear(t,a,o),r):new Date(NaN)}if(i=es.Www.exec(e),i)return n=parseInt(i[1],10)-1,OD(t,n)?TD(t,n):new Date(NaN);if(i=es.WwwD.exec(e),i){n=parseInt(i[1],10)-1;var l=parseInt(i[2],10)-1;return OD(t,n,l)?TD(t,n,l):new Date(NaN)}return null}function phe(e){var t,i,r;if(t=es.HH.exec(e),t)return i=parseFloat(t[1].replace(",",".")),fx(i)?i%24*px:NaN;if(t=es.HHMM.exec(e),t)return i=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),fx(i,r)?i%24*px+r*PD:NaN;if(t=es.HHMMSS.exec(e),t){i=parseInt(t[1],10),r=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return fx(i,r,a)?i%24*px+r*PD+a*1e3:NaN}return null}function TD(e,t,i){t=t||0,i=i||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,n=t*7+i+1-a;return r.setUTCDate(r.getUTCDate()+n),r}var fhe=[31,28,31,30,31,30,31,31,30,31,30,31],mhe=[31,29,31,30,31,30,31,31,30,31,30,31];function SV(e){return e%400===0||e%4===0&&e%100!==0}function kD(e,t,i){if(t<0||t>11)return!1;if(i!=null){if(i<1)return!1;var r=SV(e);if(r&&i>mhe[t]||!r&&i>fhe[t])return!1}return!0}function vhe(e,t){if(t<1)return!1;var i=SV(e);return!(i&&t>366||!i&&t>365)}function OD(e,t,i){return!(t<0||t>52||i!=null&&(i<0||i>6))}function fx(e,t,i){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||i!=null&&(i<0||i>=60))}function ghe(e,t,i){var r=uhe(e,i),a=xV(t,r,!0),n=new Date(r.getTime()-a),s=new Date(0);return s.setFullYear(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()),s.setHours(n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()),s}function ts(e,t){return t.color(e)}function DD(e=new Date,t){let i=t.format,r=e.getSeconds(),a=e;t&&t.timeZone!==null&&(a=ghe(new Date,t.timeZone));let n=a.getHours(),s=a.getMinutes(),o;t.format12h24h==="12ampm"&&(o=n>=12?"PM":"AM");let l=n;t.format12h24h!=="24"&&(l=n%12,l===0&&(l=12));let u,c;switch(i){case"HH:mm:ss":u=[l,s,r];break;case"HH:mm":u=[l,s];break;case"HH":u=[l],o=void 0;break;case"mm":u=[s],o=void 0;break;case"ss":u=[r],o=void 0;break;case"year":c=a.getFullYear();break;case"month":c=a.getMonth()+1;break;case"dayOfYear":c=Math.floor((a.getTime()-new Date(a.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":c=a.getDate();break;case"secondOfDay":c=n*60*60+s*60+r;break;default:console.error("Unknown time format",i),c=0;break}return u!==void 0?{textValue:u,suffix:o}:c}function yhe(e,t){switch(e.type){case"fresnel":return xhe(e,t);case"gradient":return She(e,t);case"depth":return Che(e,t);case"normal":return _he(e,t);case"noise":return Mhe(e,t);case"rainbow":return Ehe(e,t);case"toon":return Ahe(e,t);case"outline":return Phe(e,t);case"transmission":return The(e,t);case"color":return whe(e,t);case"pattern":return khe(e,t)}}function bhe(e){return{type:e.type}}function Bo(e,t){let{alpha:i,mode:r,isMask:a}=e,n=typeof i=="string"?(Number(t.getVariable(i))??100)/100:i;return{...bhe(e),alpha:n,mode:r,isMask:a}}function whe(e,t){return{...Bo(e,t),color:ts(e.color,t)}}function xhe(e,t){let{bias:i,scale:r,intensity:a,factor:n,color:s}=e;return{...Bo(e,t),color:ts(s,t),bias:i,scale:r,intensity:a,factor:n}}function She(e,t){let{gradientType:i,smooth:r,colors:a,steps:n,angle:s,offset:o,morph:l}=e;return{...Bo(e,t),gradientType:i,smooth:r,colors:a.map(u=>new Wi(u[0],u[1],u[2],u[3])),num:a.length,steps:n,offset:new Ce(...o),morph:new Ce(...l),angle:s}}function Che(e,t){let{gradientType:i,near:r,far:a,isVector:n,isWorldSpace:s,origin:o,direction:l,colors:u,steps:c,smooth:d}=e;return{...Bo(e,t),gradientType:i,near:r,far:a,isVector:n,isWorldSpace:s,origin:new V(...o),direction:l?new V(...l):new V(1,0,0),colors:u.map(h=>h!==void 0?new Wi(h[0],h[1],h[2],h[3]):new Wi(0,0,0,0)),steps:c.slice(0,u.length),smooth:d}}function _he(e,t){let{cnormal:i}=e;return{...Bo(e,t),cnormal:new V(i[0],i[1],i[2])}}function Mhe(e,t){return{...Bo(e,t),scale:e.scale,move:e.move,fA:new Ce(...e.fA),fB:new Ce(...e.fB),size:new V(...e.size),distortion:new Ce(...e.distortion),colorA:ts(e.colorA,t),colorB:ts(e.colorB,t),colorC:ts(e.colorC,t),colorD:ts(e.colorD,t),noiseType:e.noiseType,voronoiStyle:e.voronoiStyle,highCut:e.highCut,lowCut:e.lowCut,smoothness:e.smoothness,seed:e.seed,quality:e.quality}}function Ehe(e,t){return{...Bo(e,t),filmThickness:e.filmThickness,movement:e.movement,wavelengths:new V(...e.wavelengths),noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,offset:new V(...e.offset)}}function Ahe(e,t){return{...Bo(e,t),positioning:e.positioning,colors:e.colors.map(i=>new Wi(i[0],i[1],i[2],i[3])),num:e.colors.length,steps:e.steps,source:new V(...e.source),isWorldSpace:e.isWorldSpace,noiseStrength:e.noiseStrength,noiseScale:e.noiseScale,shadowColor:ts(e.shadowColor,t),offset:new V(...e.offset)}}function Phe(e,t){return{...Bo(e,t),outlineColor:ts(e.outlineColor,t),contourColor:ts(e.contourColor,t),outlineWidth:e.outlineWidth,contourWidth:e.contourWidth,outlineThreshold:e.outlineThreshold,contourThreshold:e.contourThreshold,outlineSmoothing:e.outlineSmoothing,contourFrequency:e.contourFrequency,contourDirection:new V(...e.contourDirection),positionalLines:e.positionalLines,compensation:e.compensation}}function The(e,t){return{...Bo(e,t),thickness:e.thickness,ior:e.ior,roughness:e.roughness}}function khe(e,t){return{...Bo(e,t),style:e.style,projection:e.projection,axis:e.axis,blending:e.blending,offset:new Ce(...e.offset),colorA:ts(e.colorA,t),colorB:ts(e.colorB,t),frequency:new Ce(...e.frequency),size:e.size,variation:e.variation,smoothness:e.smoothness,zigzag:e.zigzag,rotation:e.rotation,vertical:new Ce(...e.vertical),horizontal:new Ce(...e.horizontal),sides:e.sides}}var Ky=class extends En{},Ohe={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},Dhe={depth:["colors"]};function Ihe(e,t,i){var r,a;if(t==="isMask")return!0;let n=Ohe[e.type],s=Dhe[e.type];if(s!==void 0){let o=e.color;if(s.includes(t)){let l=(a=(r=o[t])==null?void 0:r.value)==null?void 0:a.length;if(l!==void 0&&l!==i.length)return!0}}return n!==void 0?n.includes(t):!1}function CV(e,t,i){let r=i.uniforms[`f${i.id}_texture`];if(!r)return!1;let a=!1,n=e;if("image"in n){let s=n.image,o=t.image(s),l=r;l.image instanceof Uu||l.image.deref(),l.image=o}if("video"in n){let s=n.video,o=t.video(s),l=r;l.image instanceof Uu||l.image.deref(),l.image=o}if("wrapping"in n){let s=r;s.wrap=n.wrapping}if("minFilter"in n){let s=r;s.minFilter=n.minFilter}if("magFilter"in n){let s=r;s.magFilter=n.magFilter}if("rotation"in n&&i.uniforms[`f${i.id}_rotation`])return i.uniforms[`f${i.id}_rotation`].value=(n.rotation??0)*li.DEG2RAD,a;if("repeat"in n||"offset"in n||"rotation"in n){let s="mat",o=i.uniforms[`f${i.id}_${s}`];"repeat"in n&&(o.repeat=n.repeat),"offset"in n&&(o.offset=n.offset),"rotation"in n&&(o.rotation=n.rotation??0),o.updateMatrix()}return a}function Lhe(e,t,i,r){let a=!1;for(let[n,s]of Object.entries(e)){if(n==="bumpMap"||n==="roughnessMap"){a=!0;continue}if(!n||s===void 0)continue;if(MV(n,i,r,t)){n==="visible"&&i.type==="light"&&(a=!0);continue}i.visible=r.visible;let o=i.uniforms[`f${i.id}_${n}`];if(o&&!(o instanceof _A))switch(a=a||Ihe(i,n,s),o.constructor){case ha:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof Ky?o.value=new En(l.r,l.g,l.b,l.a):o.setRGBA(l);break}case Vl:if(typeof s=="string"){let l=t.getColor(s);l&&(o.value=l);break}else{let l=s;o.value instanceof Ky?o.value=new En(l.r,l.g,l.b,l.a):o.value.setRGBA(l.r,l.g,l.b,l.a);break}case yn:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]);break}case Fs:{let l=s;o.value.setX(l[0]),o.value.setY(l[1]),o.value.setZ(l[2]);break}case Hl:{CV(s,t,i);break}case Oc:{o.value=s.map(l=>new Wi(...l));break}default:{o.value=s;break}}}return a}var md=(e,t,i)=>Math.max(0,Math.min(1,Number(t.getVariable(typeof e=="number"?e*100:e,i)??100)/100))??1,jm=class{constructor(e,t,i,r,a){this.id=e,this.uuid=t,this.data=i,this.uniforms={};for(let n in r)this.uniforms[`f${this.id}_${n}`]=r[n];for(let n in i)MV(n,this,i,a)}get type(){return this.data.type}static create(e,t,i,r){if(i.type==="light")return Zo.createLigherLayer(e,t,i,r);if(i.type==="texture"||i.type==="video"){let a=i.type==="texture"?r.uiBuffer(i.texture.image)??r.image(i.texture.image):r.video(i.texture.video),n=new J2(a,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),s=new zde(a),o=new Rde(i.texture.repeat,i.texture.offset,i.texture.rotation??0),l=new di(i.crop?1:0),u=new Nr(i.projection??0),c=new Nr(["x","y","z"].indexOf(i.axis)??0),d=new Nr(i.side??0),h=new yn(i.size?new Ce(i.size[0],i.size[1]):new Ce(100,100)),p=new di(i.blending??0),f=new di(md(i.alpha,r)),v=new Nr(i.mode??0),m=new Jn(i.isMask??!1),g=new MA(n,s,l,u,c,d,h,p,o,f,v,m),y=new Gr(g.calpha,"f");return new ua(e,t,i,{texture:n,textureSize:s,crop:l,projection:u,axis:c,side:d,size:h,blending:p,mat:o,alpha:f,mode:v,isMask:m},g,v,y,m,r)}else if(i.type==="matcap"){let a=r.image(i.texture.image),n=new J2(a,i.texture.wrapping,i.texture.minFilter??1008,i.texture.magFilter??1006),s=new di(md(i.alpha,r)),o=new Nr(i.mode??0),l=new Jn(i.isMask??!1),u=new di((i.texture.rotation??0)*li.DEG2RAD),c=new nV(n,s,o,l,u),d=new Gr(c.calpha,"f");return new ua(e,t,i,{texture:n,alpha:s,mode:o,isMask:l,rotation:u},c,o,d,l,r)}else if(i.type==="displace")if(i.displacementType==="noise"){let a=new Fs(new V(...i.offset)),n=new di(i.scale??10),s=new di(i.intensity??8),o=new di(i.movement??1),l=new Nr(i.noiseType??0),u=new Nr(i.voronoiStyle??0),c=new di(i.smoothness??.5),d=new di(i.seed??0),h=new di(i.highCut??1),p=new di(i.lowCut??0),f=new Nr(i.quality??1),v=new gV(s,o,a,u,c,d,h,p,f,n,l);return new _V(e,t,i,{offset:a,scale:n,intensity:s,movement:o,noiseType:l,voronoiStyle:u,smoothness:c,seed:d,highCut:h,lowCut:p,quality:f},v,r)}else throw new Error;else return Rhe(e,t,i,r)}updateByOp(e,t,i){let r=e;if(r.path[0]===void 0){if(r.type===0)return"type"in r.props||"category"in r.props||"visible"in r.props?(i.scene.markNeedsUpdateRendererDirty(),!0):Lhe(r.props,i.shared,this,t)}else if(r.path[0]==="texture")return"texture"in t||"video"in t?CV(r.props,i.shared,this):!0;return!1}dispose(){if(Bhe(this)){let e=this.uniforms[`f${this.id}_texture`];if(!e)return!1;let t=e;t.image instanceof Uu||t.image.deref()}}hasValueByKey(e){return this.uniforms[e]!==void 0}hasValue(e){return this.hasValueByKey(`f${this.id}_${e}`)}setValue(e,t){let i=`f${this.id}_${e}`;this.hasValueByKey(i)&&t!==void 0&&(this.uniforms[i].value=t)}getNode(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t]}getValue(e){let t=`f${this.id}_${e}`;if(this.hasValueByKey(t))return this.uniforms[t].value}getName(e){let t=/f\d+_(.*)/.exec(e);if(t&&t.length>1)return t[1];console.log(`Layer.getName: error ${e}`)}getNames(){let e=[];for(let t in this.uniforms){let i=this.getName(t);i&&e.push(i)}return e}},ua=class extends jm{constructor(e,t,i,r,a,n,s,o,l){super(e,t,i,r,l),this.params=r,this.color=a,this.mode=n,this.alpha=s,this.isMask=o}},_V=class extends jm{constructor(e,t,i,r,a,n){super(e,t,i,r,n),this.position=a}},Zo=class extends jm{constructor(e,t,i,r,a,n){super(e,t,i,a,n),this.node=r}static createLigherLayer(e,t,i,r){let a,n=new di(md(i.alpha,r)),s=new Nr(i.mode),o=new di(i.bumpMapIntensity),l=new di(md(i.alphaOverride,r)),u;if(!i.visible)a=new AA,u={};else if(i.category==="lambert"){a=new jde;let c=new ha(r.color(i.emissive)??0),d=new Jn(i.occlusion??!0);u={emissive:c,occlusion:d},a.emissive=c,a.occlusion=d}else if(i.category==="toon"){a=new Wde;let c=new di(i.shininess??30),d=new ha(r.color(i.specular)??1118481);u={shininess:c,specular:d},a.shininess=c,a.specular=d}else if(i.category==="physical"){a=new Ude;let c=new di(i.roughness??.3),d=new di(i.metalness??0),h=new di(i.reflectivity??.5),p=new Jn(i.occlusion??!0);u={roughness:c,metalness:d,reflectivity:h,occlusion:p},a.roughness=c,a.metalness=d,a.reflectivity=h,a.occlusion=p}else{a=new $de;let c=new di(i.shininess??30),d=new ha(i.specular!==void 0?r.color(i.specular)??1118481:1118481),h=new Jn(i.occlusion??!0);u={shininess:c,specular:d,occlusion:h},a.shininess=c,a.specular=d,a.occlusion=h}return a.alpha=new di(1),a.shadingAlpha=n,a.shadingBlend=s,a.bumpMapIntensity=o,a.alphaOverride=l,u.alpha=a.shadingAlpha,u.mode=a.shadingBlend,u.bumpMapIntensity=a.bumpMapIntensity,u.alphaOverride=a.alphaOverride,new Zo(e,t,i,a,u,r)}get category(){return this.node.category}};function Bhe(e){let t=e instanceof jm?e.type:e;return t==="texture"||t==="video"||t==="displace_map"||t==="matcap"}function zs(e){return{alpha:new di(e.alpha??1),mode:new Nr(e.mode??0),isMask:new Jn(e.isMask??!1)}}function zhe(e,t,i,r,a){switch(e.type){case"color":{let n=new ha(r.color??Ds),s=zs(r),o=new eM(n,s.alpha),l=new Gr(o.calpha,"f");return new ua(t,i,e,{color:n,...s},o,s.mode,l,s.isMask,a)}case"fresnel":{let n=new ha(r.color??16777215),s=new di(r.bias??.1),o=new di(r.scale??1),l=new di(r.intensity??2),u=new di(r.factor??1),c=zs(r),d=new Nde(n,s,o,l,u,c.alpha,c.mode,c.isMask),h=new Gr(d.calpha,"f");return new ua(t,i,e,{color:n,bias:s,scale:o,intensity:l,factor:u,...c},d,c.mode,h,c.isMask,a)}case"rainbow":{let n=new di(r.filmThickness??30),s=new di(r.movement??0),o=new Fs(r.wavelengths??new V(0,0,0)),l=new di(r.noiseStrength??0),u=new di(r.noiseScale??1),c=new Fs(r.offset??new V(0,0,0)),d=zs(r),h=new dV(n,s,o,l,u,c,d.alpha,d.isMask),p=new Gr(h.calpha,"f");return new ua(t,i,e,{filmThickness:n,movement:s,wavelengths:o,noiseStrength:l,noiseScale:u,offset:c,...d},h,d.mode,p,d.isMask,a)}case"transmission":{let n=new di(r.thickness??10),s=new di(r.ior??1.5),o=new di(r.roughness??.5),l=Ri.transmissionSize,u=Ri.transmissionRenderTarget,c=Ri.transmissionRenderTargetDepth,d=window.innerWidth,h=window.innerHeight,p=d>=h?new yn(h/d,1):new yn(1,d/h),f=zs(r),v=new mV(n,s,o,l,u,c,p,f.alpha),m=new Gr(v.calpha,"f");return new ua(t,i,e,{thickness:n,ior:s,roughness:o,aspectRatio:p,...f},v,f.mode,m,f.isMask,a)}case"toon":{let n=new Nr(r.positioning??0),s;r.colors?s=new Oc(r.colors.length,r.colors):(s=new Oc(10,new Wi(0,0,0,1)),s.value[1]=new Wi(1,1,1,1));let o;r.steps?o=new kc(r.steps.length,r.steps):(o=new kc(10,1),o.value[0]=0);let l=new Fs(r.source??new V(0,0,0)),u=new Jn(r.isWorldSpace??!0),c=new di(r.noiseStrength??0),d=new di(r.noiseScale??1),h=new Vl(r.shadowColor),p=new Fs(r.offset??new V(0,0,0)),f=zs(r),v=new pV(n,s,o,l,u,c,d,h,p,f.alpha),m=new Gr(v.calpha,"f");return new ua(t,i,e,{positioning:n,colors:s,steps:o,source:l,isWorldSpace:u,noiseStrength:c,noiseScale:d,shadowColor:h,offset:p,...f},v,f.mode,m,f.isMask,a)}case"outline":{let n=new ha(r.outlineColor??16777215),s=new ha(r.contourColor??16777215),o=new di(r.outlineWidth??.1),l=new di(r.contourWidth??.1),u=new di(r.outlineThreshold??.1),c=new di(r.contourThreshold??.1),d=new di(r.outlineSmoothing??.1),h=new di(r.contourFrequency??.1),p=new Fs(r.contourDirection??new V(0,1,0)),f=new Jn(r.positionalLines??!1),v=new Jn(r.compensation??!0),m=Ri.normalRenderTarget,g=Ri.normalRenderTargetDepth,y=Ri.pixelRatioNode,b=Ri.resolution,x=zs(r),S=new lV(n,s,o,l,u,c,d,h,p,f,v,b,m,g,y,x.alpha),w=new Gr(S.calpha,"f");return new ua(t,i,e,{outlineColor:n,contourColor:s,outlineWidth:o,contourWidth:l,outlineThreshold:u,contourThreshold:c,outlineSmoothing:d,contourFrequency:h,contourDirection:p,positionalLines:f,compensation:v,...x},S,x.mode,w,x.isMask,a)}case"depth":{let n=new Nr(r.gradientType??0),s=new Jn(r.smooth??!1),o=new di(r.near??50),l=new di(r.far??200),u=new di(r.isVector??1),c=new di(r.isWorldSpace??0),d=new Fs(r.origin??new V),h=new Fs(r.direction??new V),p;r.colors?p=new Oc(r.colors.length,r.colors):(p=new Oc(2,new Wi(0,0,0,1)),p.value[1]=new Wi(1,1,1,1));let f;r.steps?f=new kc(r.steps.length,r.steps):(f=new kc(2,1),f.value[0]=0);let v=zs(r),m=new tV(n,s,o,l,u,c,d,h,p,f,v.alpha,v.isMask),g=new Gr(m.calpha,"f");return new ua(t,i,e,{gradientType:n,smooth:s,near:o,far:l,isVector:u,isWorldSpace:c,origin:d,direction:h,colors:p,steps:f,...v},m,v.mode,g,v.isMask,a)}case"noise":{let n=new di(r.scale??1),s=new Fs(r.size??new V(100,100,100)),o=new di(r.move??1),l=new yn(r.fA??new Ce(1.7,9.2)),u=new yn(r.fB??new Ce(8.3,2.8)),c=new yn(r.distortion??new Ce(1,1)),d=new Vl(r.colorA),h=new Vl(r.colorB),p=new Vl(r.colorC),f=new Vl(r.colorD),v=new Nr(r.noiseType??0),m=new Nr(r.voronoiStyle??0),g=new di(r.highCut??1),y=new di(r.lowCut??0),b=new di(r.smoothness??.5),x=new di(r.seed??.5),S=new Nr(r.quality??1),w=zs(r),E=new sV(n,s,o,l,u,c,d,h,p,f,w.alpha,v,w.isMask,m,g,y,b,x,S),M=new Gr(E.calpha,"f");return new ua(t,i,e,{scale:n,size:s,move:o,fA:l,fB:u,distortion:c,colorA:d,colorB:h,colorC:p,colorD:f,noiseType:v,...w,voronoiStyle:m,highCut:g,lowCut:y,smoothness:b,seed:x,quality:S},E,w.mode,M,w.isMask,a)}case"normal":{let n=new Fs(r.cnormal??new V(1,1,1)),s=zs(r),o=new eV(n,s.alpha),l=new Gr(o.calpha,"f");return new ua(t,i,e,{cnormal:n,...s},o,s.mode,l,s.isMask,a)}case"gradient":{let n=new Nr(r.gradientType??0),s=new Jn(r.smooth??!1),o;r.colors?o=new Oc(r.colors.length,r.colors):(o=new Oc(10,new Wi(0,0,0,1)),o.value[1]=new Wi(1,1,1,1));let l;r.steps?l=new kc(r.steps.length,r.steps):(l=new kc(10,1),l.value[0]=0);let u=new yn(r.offset??new Ce(0,0)),c=new yn(r.morph??new Ce(0,0)),d=new di(r.angle??0),h=zs(r),p=new rV(n,s,o,l,u,c,d,h.alpha,h.isMask),f=new Gr(p.calpha,"f");return new ua(t,i,e,{gradientType:n,smooth:s,colors:o,steps:l,offset:u,morph:c,angle:d,...h},p,h.mode,f,h.isMask,a)}case"pattern":{let n=new Nr(r.style??0),s=new Nr(r.projection??0),o=new Nr(["x","y","z"].indexOf(r.axis)??0),l=new di(r.blending??0),u=new yn(r.offset??new Ce(0,0)),c=new Vl(r.colorA),d=new Vl(r.colorB),h=new yn(r.frequency??new Ce(10,10)),p=new di(r.size??.5),f=new di(r.variation??0),v=new di(r.smoothness??.5),m=new di(r.zigzag??0),g=new di(r.rotation??0),y=new yn(r.vertical??new Ce(0,1)),b=new yn(r.horizontal??new Ce(0,1)),x=new Nr(r.sides??6),S=zs(r),w=new uV(n,s,o,l,u,c,d,h,p,f,v,m,g,y,b,x,S.alpha,S.isMask),E=new Gr(w.calpha,"f");return new ua(t,i,e,{style:n,projection:s,axis:o,blending:l,offset:u,colorA:c,colorB:d,frequency:h,size:p,variation:f,smoothness:v,zigzag:m,rotation:g,vertical:y,horizontal:b,sides:x,...S},w,S.mode,E,S.isMask,a)}default:{let n=new ha(1,0,0,1),s=zs(r),o=new eM(n,s.alpha),l=new Gr(o.calpha,"f");return new ua(t,i,e,{color:n,...s},o,s.mode,l,s.isMask,a)}}}function Rhe(e,t,i,r){let a=yhe(i,r);return zhe(i,e,t,a,r)}function MV(e,t,i,r){if(i.type==="displace"&&(e==="intensity"||e==="visible")){let a=t.uniforms[`f${t.id}_intensity`];return a?(a.value=i.intensity*(i.visible?1:0),a):void 0}if(i.type!=="displace"&&(e==="alpha"||e==="visible")){let a=t.uniforms[`f${t.id}_alpha`];if(!a)return;if(a.value=md(i.alpha,r)*(i.visible?1:0),i.type==="outline"&&e==="visible"){let n=t.uniforms[`f${t.id}_compensation`];n&&(n.value=i.compensation&&i.visible)}return a}}function wh(e,t){let i=0,r=e.layers.find(a=>a.data.type==="light");if(r){let a=r.data,n=Number(t.getVariable(a.alphaOverride));if((typeof a.alphaOverride=="string"?n/100:a.alphaOverride)<1)return!0}for(let a of e.layers){if(a.data.type!=="displace"&&a.data.isMask)return!0;if(a.data.type!=="displace"&&"alpha"in a.data&&a.data.type!=="light"&&a.data.type!=="fresnel"&&a.data.type!=="texture"&&a.data.type!=="matcap"&&a.data.type!=="rainbow"&&a.data.type!=="outline"&&a.data.type!=="pattern"){let n=a.data.visible?a.data.alpha:0;if(typeof n=="string"&&(n=Math.max(0,Math.min(1,Number(t.getVariable(n)??100)/100))),n===1&&a.data.type==="depth"||a.data.type==="gradient"){for(let s of a.data.colors)if(s[3]<1){n=s[3];break}}else if(n===1&&a.data.type==="noise"){let s=t.color(a.data.colorA).a,o=t.color(a.data.colorB).a,l=t.color(a.data.colorC).a,u=t.color(a.data.colorD).a,c=Math.min(s,Math.min(o,Math.min(l,u)));c<1&&(n=c)}i+=(1-i)*n}}return i<1}var cc=class extends xr{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.nodeContextUuid=0,this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return""}},Nhe=class extends cc{constructor(e,t,i,r){super(),this.flatShading=e,this.side=t,this.wireframe=i,this.root=r}updateAfterBuild(){let e=this.root;this.lights=e.lights,this.vertexShader=e.vertexShader,this.fragmentShader=e.fragmentShader,this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.transparent=e.transparent,this.cacheKey=e.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(e,t){this.root.onBeforeCompile(e)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(e,t,i){return this.root.getFlavor(e,t,i)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(e){return this.root.getLayersOfType(e)}getLayerByUuid(e){return this.root.getLayerByUuid(e)}updateByOp(e,t,i){this.root.updateByOp(e,t,i)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},PA=class extends cc{constructor(e,t,i=!0){super(),this.data=e,this.allowVariableSaves=i,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.needsJitter=t.shared.needsJitter,Na.startContext(this),this.reset0(e,t),Na.endContext(this)}get nodeMaterial(){return this}getFlavor(e,t,i){let r=i?6:(e?3:0)+t;if(r===0)return this;this.flavors===void 0&&(this.flavors=[]),r-=1;let a=this.flavors[r];return a===void 0&&(a=new Nhe(e,t,i,this),a.needsJitter=this.needsJitter,this.flavors[r]=a,a.flatShading=e,a.side=t,a.updateAfterBuild()),a}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var e;return((e=this.lightLayer.getNode("occlusion"))==null?void 0:e.value)??!1}reset(e,t,i=!1){Na.startContext(this),(this.data!==e||i)&&this.reset0(e,t),Na.endContext(this)}reset0(e,t){this.data=e;let i=e.layers??Cn.defaultTwoLayerData("phong").layers;try{this.layers=i.map(r=>jm.create(this.layerIdGen++,r.id,r.data,t.shared))}catch{this.layers=[]}this.layers.reverse(),this.name=e.name??"Untitled Material",this.onUpdate(t.shared),this.transparent=wh(e,t.shared),this.saveVariableLocations(t)}onVariableUpdate(e,t,i){if(e[0]==="alphaOverride")this.transparent=wh(this.data,i.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(t)/100,1)));else if(e[0]==="layer"){let r=e[1],a=e[2];if(r&&a){let n=this.layers.find(s=>s.uuid===r);n?.hasValue(a)&&(a==="alpha"?(this.transparent=wh(this.data,i.shared),n.setValue(a,Math.max(0,Math.min(Number(t)/100,1)))):n.setValue(a,t))}}}saveVariableLocations(e){if(!this.allowVariableSaves)return;let t=this.data.layers.find(i=>i.data.type==="light");t&&e.shared.getVariable(t.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(i=>{"alpha"in i.data&&typeof i.data.alpha=="string"&&e.shared.getVariable(i.data.alpha,["material",this.uuid,"layer",i.id,"alpha"])})}getLayersOfType(e){return this.layers.filter(t=>t.type===e)}getLayerByUuid(e){return this.layers.find(t=>t.uuid===e)}onUpdate(e){this.lightLayer=this.layers.find(t=>t instanceof Zo),this.lightLayer===void 0&&(this.lightLayer=new Zo(0,"",{...Ka.defaultData("light","phong"),visible:!1},new AA,{},e)),this.dispose();for(let t of this.flavors)t&&t.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.build(),this.nodeContextUuid=0}applyTextureMaps(){let e=this.layers.find(a=>a instanceof Zo);if(!e)return;let t=e.data,i=t.bumpMap,r=t.roughnessMap;e.node.bumpMap=void 0,e.node.roughnessMap=void 0;for(let a=0;a<this.layers.length;++a){let n=this.layers[a];n instanceof ua&&n.color instanceof MA&&(n.uuid===i&&(e.node.bumpMap=n.color),n.uuid===r&&(e.node.roughnessMap=n.color))}}updateByOp(e,t,i){if(Na.startContext(this),t!==void 0?this.data=t:t=this.data,this.transparent=wh(t,i.shared),e.path[0]==="layers"){let r=i.shared,a=e.path[1];if(a===void 0)i.scene.markNeedsUpdateRendererDirty(),this.reset0(t,i);else{e.type===0&&e.props.occlusion!==void 0&&i.scene.markNeedsUpdateRendererDirty();let n=this.layers.find(s=>s.uuid===a);if(n){let s=t.layers.data(a),o;e.type===0&&("alpha"in e.props||"alphaOverride"in e.props)&&("alpha"in e.props?o={...e.props,alpha:md(e.props.alpha,r,["material",this.uuid,"layer",a,"alpha"])}:o={...e.props,alphaOverride:md(e.props.alphaOverride,r,["material",this.uuid,"alphaOverride"])}),n.updateByOp({...e,...o?{props:o}:{},path:e.path.slice(2)},s,i)&&this.reset0(t,i)}}}else this.reset0(t,i);Na.endContext(this)}applyMasks(){for(let e=0;e<this.layers.length;++e){let t=this.layers[e];t instanceof ua?t.color.mask=void 0:t instanceof Zo&&(t.node.mask=void 0)}for(let e=0;e<this.layers.length;++e){let t=this.layers[e];if(t instanceof ua&&t.isMask.value&&t.data.visible&&e>0){let i=e-1,r=this.layers[i];r instanceof Zo?r.node.mask=new ds(t.color,t.alpha,ds.MUL):r instanceof ua&&(r.isMask.value||(r.color.mask=new ds(t.color,t.alpha,ds.MUL)))}}}blendColors(){let e=this.layers.findIndex(i=>i instanceof ua),t=this.layers.findIndex(i=>i instanceof Zo);if(e!==-1&&e<t){let i=this.layers[e].color;for(let r=e+1;r<t;++r){let a=this.layers[r];if(a instanceof ua){if(a.isMask.value)continue;i=new CD(i,a.color,a.alpha,a.mode)}}this.fragment.color=i}else this.fragment.color=void 0}blendAfterColors(){let e=new Gr("outgoingLight","f"),t=this.layers.findIndex(i=>i instanceof Zo);if(this.layers.length>t+1){for(let i=t+1;i<this.layers.length;++i){let r=this.layers[i];if(r instanceof ua){if(r.isMask.value)continue;e=new CD(e,r.color,r.alpha,r.mode)}}this.fragment.afterColor=e}else this.fragment.afterColor=void 0}blendPositions(){let e=this.layers.filter(t=>t instanceof _V);if(e.length>0){let t=e[0].position;for(let i=1;i<e.length;++i)e[i]&&(t=new ds(t,e[i].position,ds.ADD),t=new ds(t,new di(.5).setReadonly(!0),ds.MUL));this.fragment.position=t}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(e){e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=this.extensions.derivatives===!0,e.extensionFragDepth=this.extensions.fragDepth===!0,e.extensionDrawBuffers=this.extensions.drawBuffers===!0,e.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(e,t){let i=(r,a,n)=>Math.min(Math.max(r,a),n);for(let r of this.layers)if(r.type==="displace"){let a=i(r.uniforms[`f${r.id}_intensity`].value,e,t);r.uniforms[`f${r.id}_intensity`].value=a}}updateFrame(e){for(let t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])}build(){let e=new KN;e.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,e.build(this.fragment,this.fragment),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms=e.uniforms,this.extensions=e.extensions,this.updaters=e.updaters;for(let t of this.flavors)t&&t.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose();for(let e of this.flavors)e&&e.dispose()}assetsLoaded(){for(let e of this.layers)if(e instanceof ua){let t=e.params.texture;if(t instanceof J2&&!t.image.loaded)return!1}return!0}};Object.defineProperties(cc.prototype,{properties:{get:function(){return this.fragment.properties}}});var rM=class extends PA{constructor(e,t,i){super(e,t,!1),this.uuid=i,this.allowVariableSaves=!0,this.saveVariableLocations(t)}},ID=new Map;function Vhe(e){if(typeof e=="string")return e;let t=ID.get(e);return t||(t={url:URL.createObjectURL(new Blob([e]))},ID.set(e,t)),t.url}var EV,Fhe=new Promise(e=>{EV=e}),LD=!1,sg;function jhe(){if(LD)return;if(sg)return sg;async function e(){await pc(()=>import("./howler.BxWvNcJ0.js"),__vite__mapDeps([0,1])).then(t=>t.h),EV(window!==void 0?window:global),LD=!0}return sg=e(),sg}var AV;Fhe.then(e=>AV=e);function $he(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events===void 0||Array.isArray(r.events)===!1)return!0;let a=[];r.events.forEach(n=>{"dragDropActions"in n.data?(a.push(...n.data.dragDropActions.drag),a.push(...n.data.dragDropActions.drop)):"inActions"in n.data?(a.push(...n.data.inActions),a.push(...n.data.outActions)):"gameActions"in n.data?(a.push(...n.data.gameActions.idle),a.push(...n.data.gameActions.move),a.push(...n.data.gameActions.jump),a.push(...n.data.gameActions.run)):"breakpoints"in n.data?n.data.breakpoints.forEach(s=>{a.push(...s.data.actions)}):"actions"in n.data&&a.push(...n.data.actions),t=t||a.some(s=>s.data.type==="Audio")})}),t}var Cf=class{constructor({src:e,volume:t,delay:i,loop:r}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let a;typeof e=="string"?a={src:e}:a={src:Vhe(e),format:"wav"},this.sound=new AV.Howl(a),this.sound.on("end",this.onEnd),this.src=e,t!==void 0&&(this.volume=t),i!==void 0&&(this.delay=i),r!==void 0&&(this.loop=r)}get status(){return this._status}get volume(){return this._volume}set volume(e){this._volume=e,this.sound.volume(e)}get loop(){return this._loop}set loop(e){this._loop=e,this.loopsRemaining=e}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(e,t=1e3){e?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,t),this.clearFade()},e)):this.sound.fade(this._volume,0,t)}on(e,t,i){this.sound.on(e,t,i)}off(e,t,i){this.sound.off(e,t,i)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(e=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},Uhe=class{constructor(){this.type="ShapePath",this.color=new Bi,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new dy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){var i;return(i=this.currentPath)==null||i.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){var a;return(a=this.currentPath)==null||a.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,a,n){var s;return(s=this.currentPath)==null||s.bezierCurveTo(e,t,i,r,a,n),this}splineThru(e){var t;return(t=this.currentPath)==null||t.splineThru(e),this}toShapes(){let e={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},t={loc:e.ORIGIN,t:0};function i(p,f,v,m){let g=p.x,y=f.x,b=v.x,x=m.x,S=p.y,w=f.y,E=v.y,M=m.y,P=(x-b)*(S-E)-(M-E)*(g-b),A=(y-g)*(S-E)-(w-S)*(g-b),k=(M-E)*(y-g)-(x-b)*(w-S),I=P/k,O=A/k;if(k===0&&P!==0||I<=0||I>=1||O<0||O>1)return null;if(P===0&&k===0){for(let D=0;D<2;D++)if(r(D===0?v:m,p,f),t.loc===e.ORIGIN){let F=D===0?v:m;return{x:F.x,y:F.y,t:t.t}}else if(t.loc===e.BETWEEN){let F=+(g+t.t*(y-g)).toPrecision(10),U=+(S+t.t*(w-S)).toPrecision(10);return{x:F,y:U,t:t.t}}return null}else{for(let U=0;U<2;U++)if(r(U===0?v:m,p,f),t.loc===e.ORIGIN){let z=U===0?v:m;return{x:z.x,y:z.y,t:t.t}}let D=+(g+I*(y-g)).toPrecision(10),F=+(S+I*(w-S)).toPrecision(10);return{x:D,y:F,t:I}}}function r(p,f,v){let m=v.x-f.x,g=v.y-f.y,y=p.x-f.x,b=p.y-f.y,x=m*b-y*g;if(p.x===f.x&&p.y===f.y){t.loc=e.ORIGIN,t.t=0;return}if(p.x===v.x&&p.y===v.y){t.loc=e.DESTINATION,t.t=1;return}if(x<-Number.EPSILON){t.loc=e.LEFT;return}if(x>Number.EPSILON){t.loc=e.RIGHT;return}if(m*y<0||g*b<0){t.loc=e.BEHIND;return}if(Math.sqrt(m*m+g*g)<Math.sqrt(y*y+b*b)){t.loc=e.BEYOND;return}let S;m!==0?S=y/m:S=b/g,t.loc=e.BETWEEN,t.t=S}function a(p,f){let v=[],m=[];for(let g=1;g<p.length;g++){let y=p[g-1],b=p[g];for(let x=1;x<f.length;x++){let S=f[x-1],w=f[x],E=i(y,b,S,w);E!==null&&v.find(M=>M.t<=E.t+Number.EPSILON&&M.t>=E.t-Number.EPSILON)===void 0&&(v.push(E),m.push(new Ce(E.x,E.y)))}}return m}function n(p,f,v){let m=new Ce;f.getCenter(m);let g=[];return v.forEach(y=>{y.boundingBox.containsPoint(m)&&a(p,y.points).forEach(b=>{g.push({identifier:y.identifier,isCW:y.isCW,point:b})})}),g.sort((y,b)=>y.point.x-b.point.x),g}function s(p,f,v,m,g){(g==null||g==="")&&(g="nonzero");let y=new Ce;p.boundingBox.getCenter(y);let b=[new Ce(v,y.y),new Ce(m,y.y)],x=n(b,p.boundingBox,f);x.sort((A,k)=>A.point.x-k.point.x);let S=[],w=[];x.forEach(A=>{A.identifier===p.identifier?S.push(A):w.push(A)});let E=S[0].point.x,M=[],P=0;for(;P<w.length&&w[P].point.x<E;)M.length>0&&M[M.length-1]===w[P].identifier?M.pop():M.push(w[P].identifier),P++;if(M.push(p.identifier),g==="evenodd"){let A=M.length%2===0,k=M[M.length-2];return{identifier:p.identifier,isHole:A,for:k}}else if(g==="nonzero"){let A=!0,k=null,I=null;for(let O=0;O<M.length;O++){let D=M[O];f[D]&&(A?(I=f[D].isCW,A=!1,k=D):I!==f[D].isCW&&(I=f[D].isCW,A=!0))}return{identifier:p.identifier,isHole:A,for:k}}else console.warn('fill-rule: "'+g+'" is currently not implemented.')}let o=0,l=999999999,u=-999999999,c=[];this.subPaths.forEach(p=>{let f=p.getPoints(),v=-999999999,m=999999999,g=-999999999,y=999999999;for(let b=0;b<f.length;b++){let x=f[b];x.y>v&&(v=x.y),x.y<m&&(m=x.y),x.x>g&&(g=x.x),x.x<y&&(y=x.x)}u<=g&&(u=g+1),l>=y&&(l=y-1),f.length&&c.push({curves:p.curves,points:f,isCW:OR.isClockWise(f),identifier:o++,boundingBox:new UR(new Ce(y,m),new Ce(g,v))})});let d=c.map(p=>{var f;return s(p,c,l,u,(f=this.userData)==null?void 0:f.style.fillRule)}),h=[];return c.forEach(p=>{let f=d[p.identifier];if(f&&!f.isHole){let v=new hy;v.curves=p.curves,d.filter(m=>m?.isHole&&m.for===p.identifier).forEach(m=>{if(m){let g=c[m.identifier],y=new dy;y.curves=g.curves,v.holes.push(y)}}),h.push(v)}}),h}},PV=!1,TV,BD=new Promise(e=>{TV=e}),zD=!1,og;function Whe(){if(PV=!0,zD)return;if(og)return og;async function e(){let t=await pc(()=>import("./opentype.BhA_KP3I.js"),[]);TV(t),zD=!0}return og=e(),og}var Hhe=class{async load(e,t,i=()=>{}){let{load:r}=await BD;r(e,(a,n)=>{a||!n?i(a??"Something went wrong"):t(n)})}async parse(e){let{parse:t,Bidi:i}=await BD;try{let r=t(e),a=new i,n=s=>r.charToGlyphIndex(s.char);return a.registerModifier("glyphIndex",null,n),a.applyFeatures(r,r.defaultRenderOptions.features),{font:r,bidi:a}}catch(r){console.error(r)}}};async function Ghe(e){return await(await fetch(e)).arrayBuffer()}var qhe=new Hhe;async function RD(e){let t,i,r=!1;if(e.url?(t=await Ghe(e.url),i=e.url,r=e.url.startsWith("/")):e.data&&(t=e.data.buffer.slice(e.data.byteOffset,e.data.byteOffset+e.data.byteLength)),t)if(PV){let a=await qhe.parse(t);if(a)return{font:a.font,url:i,intercepted:r,arr:t,bidi:a.bidi}}else return{font:void 0,url:i,intercepted:r,arr:t,bidi:null}}function Yhe(e,t){return t.state.glyphIndex===e||t.state.fina===e||t.state.medi===e||t.state.init===e}var Xhe=class{constructor(e){this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=RD(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}update(e){this._isLoaded=!1,this._isUserFont=e.isUserFont??!1,this._loadingPromise=RD(e).then(t=>{t&&(this._arrayBuffer=t.arr,this._url=t.url,this.font=t.font,this._intercepted=t.intercepted,this._isLoaded=!0,this._bidi=t.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(e,t,i){if(!this._bidi)return[];let r=this._bidi;r.getTextGlyphs(t);let a=r.tokenizer.tokens,n=[],s=0,o=i.length===a.length;for(let l=0;l<i.length;l++){let u=i[l].index,c=String.fromCharCode(i[l].unicode),d=a[s];if(Yhe(u,d)||o)n.push({char:c,index:u,replacements:[d.state.glyphIndex],replacementChars:[d.char]}),s++;else{let h=d.char,p="",f=[d.state.glyphIndex],v=[],m=!1;for(;!m;)s++,p=t.charAt(s),h+=p,f.push(e.charToGlyphIndex(p)),v=e.stringToGlyphs(h),v.length===1&&v[0].index===u&&(m=!0),s>t.length&&(m=!0);n.push({char:c,index:u,replacements:f,replacementChars:Array.from(h)}),s++}}return n}generateShapes(e,t){if(!this._isLoaded)return;let i=this.font,r=t.fontSize/this.unitsPerEm,a=t.fontSize*t.lineHeight,n=e.map(g=>this.getTextWidth(g,t)),s=t.width,o=this.getCharWidth(`
`,t),l=t.horizontalAlign===1?o:0,u=this.computeSpaceWidthForLine(e,0,t),c=this.getLineInitialOffsetX(n[0],s,t.horizontalAlign,e[0],o),d=this.getLineInitialOffsetY(a,e.length,t.height,r,t.verticalAlign),h=[],p=e.map(g=>[]),f=e.map(g=>[]),v;for(let g=0;g<e.length;g++){let y=e[g],b={features:{liga:!0}},x=[];try{x=i.stringToGlyphs(y,b)}catch(w){console.warn(w)}c=this.getLineInitialOffsetX(n[g],s,t.horizontalAlign,y,o);let S=[];try{S=this.reverseLigaturesTable(i,y,x)}catch(w){console.warn(w)}u=this.computeSpaceWidthForLine(e,g,t);for(let w=0;w<x.length;w++){let E=x[w],M=E.index===0?`
`:E.unicode?String.fromCharCode(E.unicode):void 0,P=S[w],A=0,k=0;w===0&&t.horizontalAlign===2&&E.leftSideBearing!==void 0&&(k=-E.leftSideBearing*r),v&&(A=i.getKerningValue(E,v)*r),c+=k+A;let I=0;if(M===`
`)I=l;else if(M===" ")I=u;else{let O=this.createPath(E,r,c,d,t);O&&(I=O.offsetX-(A+k),h.push(O.path))}if(P.replacements.length===1)f[g].push([c,d]),p[g].push(I);else{let O=P.replacements.map(z=>(i.glyphs.get(z).advanceWidth??0)*r),D=O.reduce((z,B)=>z+=B,0),F=O.map(z=>z/D),U=c;for(let z=0;z<F.length;z++){let B=I*F[z];f[g].push([U,d]),p[g].push(B),U+=B}}c+=I,v=E}d-=a}let m=[];for(let g=0,y=h.length;g<y;g++)m.push(...h[g].toShapes());return{shapes:m,charWidths:p,lineWidths:n,charCoords:f}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var e;return((e=this.font)==null?void 0:e.ascender)??0}get descender(){var e;return((e=this.font)==null?void 0:e.descender)??0}get familyName(){var e;return((e=this.font)==null?void 0:e.names.fontFamily)??""}get subfamilyName(){var e;return((e=this.font)==null?void 0:e.names.fontSubfamily)??""}get unitsPerEm(){var e;return((e=this.font)==null?void 0:e.unitsPerEm)??1}getLineInitialOffsetX(e,t,i,r,a){return(i===3||i===2)&&r.indexOf(`
`)>=0&&(e-=a),i===3?t*.5-e*.5:i===2?t-e:0}getLineInitialOffsetY(e,t,i,r,a){let n=t*e,s=Math.abs(this.ascender-this.descender)*r,o=e-s,l=-this.ascender*r-o/2;return a===3?-(i-n-l):a===2?-(i*.5-n*.5-l):l}createPath(e,t,i,r,a){var n;let s=e.getPath(i,-r,a.fontSize,{kerning:!1,letterSpacing:a.letterSpacing});if(!s){console.error('THREE.Font: character "'+e+'" does not exists in font family '+this.familyName+".");return}let o=new Uhe,l=(e.advanceWidth??1)*t;if(e)for(let u of s.commands){let c=(n=o.currentPath)==null?void 0:n.currentPoint;if(!(c&&u.type!=="Z"&&c.x===u.x&&-c.y===u.y))switch(u.type){case"M":o.moveTo(u.x,-u.y);break;case"L":o.lineTo(u.x,-u.y);break;case"Q":o.quadraticCurveTo(u.x1,-u.y1,u.x,-u.y);break;case"C":o.bezierCurveTo(u.x1,-u.y1,u.x2,-u.y2,u.x,-u.y);break}}return o.subPaths.forEach(u=>{let c=Khe(u.curves);c!==void 0&&u.currentPoint.distanceTo(c)>0&&u.lineTo(c.x,c.y)}),{offsetX:l+a.fontSize*a.letterSpacing,path:o}}getCharWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}getTextWidth(e,t){var i;return((i=this.font)==null?void 0:i.getAdvanceWidth(e,t.fontSize,{kerning:!0,letterSpacing:t.letterSpacing}))??0}computeSpaceWidthForLine(e,t,i){let r=this.getCharWidth(" ",i),a=e[t];if(a){let n=this.countSpaces(a.trimEnd());if(i.horizontalAlign===4&&t<e.length-1&&n){let s=i.width,o=this.getTextWidth(a,i);return(s-(o-n*r))/n}}return r}countSpaces(e){return(e.match(/ /g)||[]).length}};function Khe(e){if(e.length){let t=e[0];if(t instanceof Mo)return t.v1;if(t instanceof wo||t instanceof lc)return t.v0}}var Zhe=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(e){return this.objects.get(e)}get size(){return this.objects.size}get(e,t,i){let r=this.objects.get(e);return r===void 0?(r=this.createObject(e,t,i),this.objects.set(e,r)):r.isShared=!0,r}forceDelete(e){let t=this.objects.get(e);t&&(this.disposeObject(t),this.objects.delete(e))}mutateIfUnique(e,t){let i=this.objects.get(e);if(i&&i.isShared!==!0)return this.objects.delete(e),this.objects.set(t,i),i}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(e,t){let i=this.objects.get(e);t===i&&this.unreachable.delete(e)}endGc(){this.unreachable.forEach(e=>{this.disposeObject(this.objects.get(e)),this.objects.delete(e)}),this.unreachable.clear()}dispose(){this.objects.forEach(e=>{this.disposeObject(e)}),this.objects.clear()}},ND=class extends Zhe{constructor(e){super(),this.flatShading=e}disposeObject(e){e.dispose()}createObject(e,t,i){let r=wm(e,t,this.flatShading,i);return r.computeBoundingSphere(),r}},Qhe={markNeedsUpdateRendererDirty:()=>{}};function TA(e){return{all:e=e||new Map,on:function(t,i){var r=e.get(t);r?r.push(i):e.set(t,[i])},off:function(t,i){var r=e.get(t);r&&(i?r.splice(r.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var r=e.get(t);r&&r.slice().map(function(a){a(i)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,i)})}}}var Jhe=class{constructor(e,t,i){var r;this.id=e,this.userAPI=t,this.result=void 0,this.error="null",this.isPrefetched=!1,this.isLoading=!1,this.isLoaded=!1,this.prefetchPromise=new Promise(a=>a()),this.emitter=TA(),this._innerCallUserAPI=async a=>{var n,s,o;this.emitter.emit("start",{userAPIId:this.id}),this.isLoading=!0,this.isLoading=!1;try{this.result=await ape(this.userAPI,a),this.error="null",this.emitter.emit("success",{userAPIId:this.id})}catch(l){let u=((o=(s=(n=l.message)==null?void 0:n.split("_:_"))==null?void 0:s[0])==null?void 0:o.replace("status:",""))??"null";this.error=u,this.result=null,this.emitter.emit("error",{userAPIId:this.id})}this.isLoading=!1,this.isPrefetched=!0,this.isLoaded=!0},((r=t?.integration)==null?void 0:r.type)==="OpenAI"?this.result={content:""}:t.method==="GET"&&t.url!==""&&(this.prefetchPromise=this.prefetch(i)),this._debouncedCallUserAPI=this._innerCallUserAPI,this._updateDebouncedCallUserAPI(),this._debouncedPrefetch=lm(this.prefetch,1e3,{trailing:!0})}_updateDebouncedCallUserAPI(){this._debouncedCallUserAPI=this.userAPI.debounce!==void 0&&this.userAPI.debounce>0?lm(this._innerCallUserAPI,this.userAPI.debounce,{leading:!0,trailing:!0}):this._innerCallUserAPI}async prefetch(e){await this.callUserAPI(e)}async callUserAPI(e){await this._debouncedCallUserAPI(e)}update(e,t,i=!0){this.userAPI=e,this._updateDebouncedCallUserAPI(),this.userAPI.url!==""&&this.userAPI.method==="GET"&&i&&this._debouncedPrefetch(t)}retrieveValue(e){if(this.result)try{return Fa.zoom(this.result,e)}catch(t){console.error(t)}}retrieveZoomedKeyValues(e){if(this.result){let t=e&&e.length?Fa.zoom(this.result,e):this.result;if(rpe(t))return Object.entries(t);if(ipe(t))return t.map((i,r)=>[r.toString(),i]);throw tpe(t)?new Error("This path points to a value, use retrieveValue() instead. "+e?.join(".")):new Error("Path error"+e?.join("."))}}dispose(){}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}get autostart(){return this.userAPI.autoStart}};function epe(e){let t=new Headers;return e.headers.forEach(i=>{i.data.key!==""&&t.append(i.data.key,i.data.value)}),t}function tpe(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||e===null}function ipe(e){return Array.isArray(e)}function rpe(e){return typeof e=="object"&&e!==null}async function ape(e,t,i=new AbortController){var r,a,n;let s,o=e.url,l=((r=e.proxy)==null?void 0:r.enabled)??!1;if(l)o=`https://apis.spline.design/file/${e.proxy.fileId}/external-api/request?uuidexternalapi=${e.proxy.proxyId}`;else if(((a=e.integration)==null?void 0:a.type)==="OpenAI"){let c=Yg(e.integration.prompt===""?[]:JSON.parse(e.integration.prompt),t),d=e.integration.behavior===""?[]:Yg(JSON.parse(e.integration.behavior),t);s=`{
			"model": "${e.integration.model}",
			"messages": [${e.integration.useBehavior?`
			{
				"role": "system",
				"content": "${d}"
			},`:""}
			{
				"role": "user",
				"content": "${c}"
			}
			]
		}`}else e.method==="POST"&&e.body&&(s=Yg(JSON.parse(e.body),t));let u=await fetch(o,{method:l?"GET":e.method,headers:l?void 0:epe(e),signal:i.signal,body:s});if(!u.ok)throw new Error("status:"+u.status+"_:_"+u.statusText);if(((n=e.integration)==null?void 0:n.type)==="OpenAI"){let c=await u.json();return l&&(c=c.response),{content:c.choices[0].message.content}}else{let c=await u.json();return l&&(c=c.response),c}}var kV=(e,t)=>{if(typeof e=="string"){let i=t.getVariable(e);if(i)return kV(i,t)}return _n.isBoolean(e)?_n.getDisplayedValue(e).toLowerCase():_n.getDisplayedValue(e)},Yg=(e,t)=>e.map((i,r)=>{if("text"in i)return i.text;if("type"in i){if(i.type==="paragraph")return(r>0?`
`:"")+Yg(i.children,t);if(i.type==="variable"){let a=t.getVariable(i.variableId);if(a!==void 0)return kV(a,t)}}return""}).join(""),Xg=1e3,VD=512*Xg;function npe(e,t){let i=typeof e;return!!((t==="string"||t==="number")&&i===t||t==="boolean"&&(e==="true"||e==="false"||e===!0||e===!1)||t==="image"&&i==="string"&&e.startsWith("http"))}var spe="https://hooks.spline.design",ope=`${spe}/events?hashFile=`,lpe=class{constructor(e,t){this.id=e,this.userWebhook=t,this.result=void 0,this._connected=!1,this.emitter=TA(),this.reconnectWaitFor=Xg,this._onError=i=>{var r,a,n;(r=this.eventSource)==null||r.removeEventListener("message",this._onMessage),(a=this.eventSource)==null||a.removeEventListener("error",this._onError),(n=this.eventSource)==null||n.removeEventListener("open",this._onConnected),this._scheduleReconnect()},this._onConnected=i=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Xg,this._connected=!0},this._onDisconnected=()=>{clearTimeout(this.scheduledReconnectHandle),this.reconnectWaitFor=Xg,this._connected=!1},this._onMessage=i=>{let r=i.data,a;try{a=JSON.parse(r)}catch(n){console.error("Error parsing webhook message",n)}if(a){let n=!1;this.userWebhook.parametersSchemas.forEach(({data:s})=>{a[s.name]!==void 0&&npe(a[s.name],s.type)&&(this.result===void 0&&(this.result={}),this.result[s.name]=a[s.name],n=!0)}),n&&this.emitter.emit("message",{userWebhookId:this.id})}}}connect(){clearTimeout(this.scheduledReconnectHandle),this.userWebhook.url&&(this.eventSource=new EventSource(ope+this.userWebhook.url),this.eventSource.addEventListener("message",this._onMessage),this.eventSource.addEventListener("error",this._onError),this.eventSource.addEventListener("open",this._onConnected))}disconnect(){var e,t,i,r;(e=this.eventSource)==null||e.removeEventListener("message",this._onMessage),(t=this.eventSource)==null||t.removeEventListener("error",this._onError),(i=this.eventSource)==null||i.removeEventListener("open",this._onConnected),(r=this.eventSource)==null||r.close(),this._onDisconnected(),clearTimeout(this.scheduledReconnectHandle)}_scheduleReconnect(){this.reconnectWaitFor*=2,this.reconnectWaitFor>VD&&(this.reconnectWaitFor=VD),clearTimeout(this.scheduledReconnectHandle),this.scheduledReconnectHandle=setTimeout(()=>{this.scheduledReconnectHandle=void 0,this.connect()},this.reconnectWaitFor)}update(e){this.userWebhook=e}dispose(){this._connected&&this.disconnect()}get connected(){return this._connected}on(e,t){this.emitter.on(e,t)}off(e,t){this.emitter.off(e,t)}getParametersKeys(){return this.userWebhook.parametersSchemas.map(e=>e.data.name)}getParameterValue(e){var t;if(this.getParametersKeys().includes(e)){if(this.result)return(t=this.result)==null?void 0:t[e];for(let i of this.userWebhook.parametersSchemas)if(i.data.name===e)return O2.defaultParameterValueByType(i.data.type)}}};function aM(e){return"variable_"+e}var upe=class extends Xde{constructor(e){super(),this.shared=e}create(e){return new bV(e,this.shared)}},kA=class{constructor(e,t={},i=!0,r=!1){if(this.data=e,this.needsJitter=i,this.enableLocalStorageForPersistentVariables=r,this.geometryCache=new ND(!0),this.geometryCache2=new ND(!1),this.imageHolderCache=new upe(this),this.thisContext={scene:Qhe,shared:this},this.deletedMaterial=new rM(Cn.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new Uu(I2.emptyImage,this),this.deletedVideo=new Uu(Iy.defaultVideo,this),this.materials={},this.images={},this.uiBuffers={},this.videos={},this.colors={},this.audios={},this.particles={},this.fonts={},this.variables={},this.userAPIs={},this.userWebhooks={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},t.images)for(let[a,n]of Object.entries(t.images))this.addImage(a,n);if(t.videos)for(let[a,n]of Object.entries(t.videos))this.addVideo(a,n);if(t.audios)for(let[a,n]of Object.entries(t.audios))this.addAudio(a,n);if(t.particles)for(let[a,n]of Object.entries(t.particles))this.addParticle(a,n);this.reset(e)}setRequestRender(e){this._requestRender=e}getImageLoadPromises(){return Object.values(this.images).map(e=>e.loadPromise)}setEntityOpContext(e){this.entityOpContext=e}reset(e,t=!1){this.data=e,this.resetLib(e.lib);for(let{id:i,data:r}of e.variables)this.addVariableHolder(i,r),t&&this.updateVariableHolder(i,r);for(let[i,r]of Object.entries(e.userAPIs))this.addUserAPI(i,r);for(let[i,r]of Object.entries(e.userWebhooks))this.addUserWebhook(i,r);for(let[i,r]of Object.entries(e.images))this.addImage(i,r);for(let[i,r]of Object.entries(e.videos))this.addVideo(i,r);for(let[i,r]of Object.entries(e.colors))this.addColor(i,r);for(let[i,r]of Object.entries(e.materials))this.addMaterial(i,r);for(let[i,r]of Object.entries(e.audios))this.addAudio(i,r);for(let[i,r]of Object.entries(e.particles))this.addParticle(i,r);for(let[i,r]of Object.entries(e.fonts))this.addFont(i,r)}addMaterial(e,t){if(this.materials[e]){let i=this.materials[e];i.reset(t,this.thisContext),i.dispose()}else{let i=new rM(t,this.thisContext,e);this.materials[e]=i}}deleteMaterial(e){this.materials[e]&&(this.materials[e].nodeMaterialDispose(),delete this.materials[e])}getMaterial(e){return this.materials[e]}getMaterialOrDeletedPlaceholder(e){return this.materials[e]??this.deletedMaterial}material(e){return typeof e=="string"?this.getMaterialOrDeletedPlaceholder(e):e==null?(console.error("material is undefined or null"),this.deletedMaterial):new PA(e,this.thisContext)}getMaterials(){return this.materials}addImage(e,t){return this.images[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[e].updateSrc(t.data),!0):(this.images[e]=new Uu(t,this),!1)}deleteImage(e){let t=this.images[e];t&&(t.dispose(),delete this.images[e])}getDefaultImage(){return this.images.image_0}getImage(e){return this.images[e]??this.deletedImage}image(e){return typeof e=="string"?this.getImage(e):this.imageHolderCache.load(e)}addUIBuffer(e,t){return this.uiBuffers[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.uiBuffers[e].updateSrc(t),!0):(this.uiBuffers[e]=new Uu(t,this),!1)}uiBuffer(e){return this.uiBuffers[e]}addVideo(e,t){return this.videos[e]?(this.videos[e].updateSrc(t.data),!0):(this.videos[e]=new Uu(t,this),!1)}deleteVideo(e){let t=this.videos[e];t&&(t.dispose(),delete this.videos[e])}getVideo(e){return this.videos[e]??this.deletedVideo}video(e){return typeof e=="string"?this.getVideo(e):this.imageHolderCache.load(e)}addColor(e,t){return this.colors[e]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in t?this.colors[e].setRGBA(t.r,t.g,t.b,t.a):this.colors[e].setRGBA(t.r,t.g,t.b,1),!0):("a"in t?this.colors[e]=new Ky(t.r,t.g,t.b,t.a):this.colors[e]=new Ky(t.r,t.g,t.b,1),!1)}updateColor(e,t){if(this.colors[e]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let i=this.colors[e];return this.colors[e].r=t.r??i.r,this.colors[e].g=t.g??i.g,this.colors[e].b=t.b??i.b,this.colors[e].a=t.a??i.a,!0}return!1}deleteColor(e){this.colors[e]&&delete this.colors[e]}getColor(e){return this.colors[e]}color(e){let t;if(typeof e=="string"){let i=this.getColor(e);i?t=i:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),t=new En(0,0,0,0))}else return"a"in e?new En(e.r,e.g,e.b,e.a):new En(e.r,e.g,e.b,1);return t}addAudio(e,t){this.audios[e]=t}getAudio(e){let t=this.audios[e];if(t instanceof Cf)return t;{let i=new Cf({src:t.data});return this.audios[e]=i,i}}addParticle(e,t){this.particles[e]=t}getParticle(e){return this.particles[e]}deleteParticle(e){this.particles[e]&&delete this.particles[e]}deleteAudio(e){let t=this.audios[e];t&&(t instanceof Cf&&t.dispose(),delete this.audios[e])}addFont(e,t){this.fonts[e]=new Xhe(t),this.fonts[e].loadingPromise.then(()=>this.requestRender())}getFont(e){return this.fonts[e]}deleteFont(e){this.fonts[e]&&delete this.fonts[e]}dispose(){Object.keys(this.materials).forEach(e=>this.deleteMaterial(e)),this._requestRender=void 0,Object.values(this.audios).forEach(e=>{e instanceof Cf&&e.dispose()}),this.audios={},this.particles={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(e,t){if(this.variables[e]===void 0){let i=t.value;if(this.enableLocalStorageForPersistentVariables&&t.persistent){let r=localStorage.getItem(aM(e));i=r!==null?JSON.parse(r):t.value}return this.variables[e]={value:i,locations:[],persistent:t.persistent},"dynamicVariableType"in t&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0),!0}return this.variables[e].value=t.value,!1}resetDynamicVariablePlayState(){for(let e in this.variables)this.variables[e].dynamicVariablePlayState!==void 0&&(this.variables[e].dynamicVariablePlayState="Playing",this.variables[e].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(e,t){this.updateVariable(e,t.value)}updateVariable(e,t){if(this.variables[e]===void 0)return!1;this.variables[e].value=t,this.enableLocalStorageForPersistentVariables&&this.variables[e].persistent&&localStorage.setItem(aM(e),JSON.stringify(t));let i=t;for(;typeof i=="string";)i=this.variables[i].value;let r=this.entityOpContext.scene;for(let a=this.variables[e].locations.length-1;a>=0;a--){let n=this.variables[e].locations[a];if(n[0]==="material"){let s=n[1],o=i,l={scene:r,shared:this},u=n.slice(2);r.traverseMaterial(d=>{let h=d.root??d;h.uuid===s&&h.onVariableUpdate(u,o,l)});let c=this.materials[s];c&&c.onVariableUpdate(u,o,l)}else{let s=r.find(n[0]);if(s===void 0){this.variables[e].locations.splice(a,1);continue}if(n[1]!=="geometry"&&n[1]!=="particles"){for(let o=1;o<n.length-1;o++)s=s[n[o]];n[1]==="rotation"?s[n[n.length-1]]=i*li.DEG2RAD:s[n[n.length-1]]=i}if(s=r.find(n[0]),s.type==="ParticleEmitter"&&s.updateVariableState(i,n),fr.is(s)){if(n[1]==="position"||n[1]==="rotation"||n[1]==="scale")s.onVariableUpdate();else if(n[1]==="geometry"){let o=s;s.component&&(o=s.component);let l=o.dataPatched;o.chooseGeoemtryCache(this).forceDelete(l.geometry),o.createGeometryDelayed(this.entityOpContext),o.onVariableUpdate(!0),o.invalidateDownstreamBooleanData(),o.instances.forEach(u=>{let c=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(c.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0),u.invalidateDownstreamBooleanData()})}}}}return this.requestRender(),!0}deleteVariable(e){this.variables[e]&&delete this.variables[e]}getVariable(e,t){var i,r,a;if(Array.isArray(e)){if(e[0]==="mouse")return((i=this.mouseProperty)==null?void 0:i[e[1]])??0;if(e[0]==="raycast")return((r=this.raycastProperty)==null?void 0:r[e[1]])??0;let n=this.entityOpContext.scene.find(e[0]);if(e[1]==="width"||e[1]==="height"||e[1]==="depth")return n.geometry.userData.parameters[e[1]];for(let s=1;s<e.length;s++)n=n[e[s]];return e[1]==="rotation"&&(n*=li.RAD2DEG),n}for(let n in this.variables){if(t===void 0)break;let s=this.variables[n],o=(a=s.locations)==null?void 0:a.findIndex(l=>Fa.equal(l,t));o!==void 0&&o!==-1&&s.locations.splice(o,1)}if(typeof e=="string"){let n=e,s=e;do{if(s=n,this.variables[n]===void 0)break;let o=this.variables[n].value;t&&this.variables[s]!==void 0&&this.variables[s].locations.push(t),n=o}while(typeof n=="string");return n}else return e}getVariables(){return this.variables}getDynamicVariablePlayState(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariablePlayState}setDynamicVariablePlayState(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariablePlayState=t)}getDynamicVariableToggleIsForward(e){var t;return(t=this.variables[e])==null?void 0:t.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(e,t){this.variables[e]!==void 0&&(this.variables[e].dynamicVariableToggleIsForward=t)}resetLib(e){for(let[t,i]of Object.entries(e.images))this.addImage(t,i.asset);for(let[t,i]of Object.entries(e.audios))this.addAudio(t,i.asset);for(let[t,i]of Object.entries(e.particles))this.addParticle(t,i.asset);for(let[t,i]of Object.entries(e.colors))this.addColor(t,i.asset);for(let[t,i]of Object.entries(e.fonts))this.addFont(t,i.asset);for(let[t,i]of Object.entries(e.materials))this.addMaterial(t,i.asset);for(let[t,i]of Object.entries(e.videos))this.addVideo(t,i.asset);for(let[t,i]of Object.entries(e.variables))this.addVariableHolder(t,i.asset)}updateLibByOp(e,t){e.path[0]==="images"?e.path.length===1&&e.type===1?this.addImage(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteImage(e.id):e.path[0]==="videos"?e.path.length===1&&e.type===1?this.addVideo(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVideo(e.id):e.path[0]==="audios"?e.path.length===1&&e.type===1?this.addAudio(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteAudio(e.id):e.path[0]==="particles"?e.path.length===1&&e.type===1?this.addParticle(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteParticle(e.id):e.path[0]==="colors"?e.path.length===1&&e.type===1?this.addColor(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteColor(e.id):e.path[0]==="materials"?e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteMaterial(e.id):e.path[0]==="fonts"?e.path.length===1&&e.type===1?this.addFont(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteFont(e.id):e.path[0]==="variables"?e.path.length===1&&e.type===1?this.addVariableHolder(e.id,e.data.asset):e.path.length===1&&e.type===2&&this.deleteVariable(e.id):e.path[0]==="components"&&t.updateByLibOp(e,this)}updateByOp(e,t,i){var r,a;if(this.data=t,e.path[0]==="images")e.path.length===2&&e.type===0?e.props.data&&this.getImage(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addImage(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteImage(e.id);else if(e.path[0]==="videos")e.path.length===2&&e.type===0?e.props.data&&this.getVideo(e.path[1]).updateSrc(e.props.data):e.path.length===1&&e.type===1?this.addVideo(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteVideo(e.id);else if(e.path[0]==="audios")e.path.length===2&&e.type===0?e.props.data&&this.addAudio(e.path[1],t.audios[e.path[1]]):e.path.length===1&&e.type===1?this.addAudio(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteAudio(e.id);else if(e.path[0]==="particles")e.path.length===2&&e.type===0?e.props.data&&this.addParticle(e.path[1],t.particles[e.path[1]]):e.path.length===1&&e.type===1?this.addParticle(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteParticle(e.id);else if(e.path[0]==="colors")e.path.length===2&&e.type===0?this.updateColor(e.path[1],e.props):e.path.length===1&&e.type===1?this.addColor(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteColor(e.id);else if(e.path[0]==="materials")e.path.length===1&&e.type===1?this.addMaterial(e.id,e.data):e.path.length===1&&e.type===2?this.deleteMaterial(e.id):e.path.length>1&&this.getMaterial(e.path[1]).updateByOp(en.drop(e,2),t.materials[e.path[1]],{shared:this,scene:i});else if(e.path[0]==="fonts")e.path.length===2&&e.type===0?this.updateFont(e.path[1],e,i):e.path.length===1&&e.type===1?this.addFont(e.id,e.data):e.path.length===1&&e.type===2&&this.deleteFont(e.id);else if(e.path[0]==="variables")e.path.length===2&&e.type===0?"value"in e.props?this.updateVariable(e.path[1],e.props.value):"persistent"in e.props&&(this.variables[e.path[1]].persistent=e.props.persistent):e.path.length===1&&e.type===4?this.addVariableHolder(e.id,e.data):e.path.length===1&&e.type===5&&this.deleteVariable(e.id);else if(e.path[0]==="userAPIs"){if(e.path.length===1&&e.type===1)this.addUserAPI(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserAPI(e.id);else if(typeof e.path[1]=="string"){let n=t.userAPIs[e.path[1]];if(n){let s=e.type===0&&e.props.debounce===void 0;(r=this.getUserAPI(e.path[1]))==null||r.update(n,this,s)}}}else if(e.path[0]==="userWebhooks"){if(e.path.length===1&&e.type===1)this.addUserWebhook(e.id,e.data);else if(e.path.length===1&&e.type===2)this.deleteUserWebhook(e.id);else if(typeof e.path[1]=="string"){let n=t.userWebhooks[e.path[1]];n&&((a=this.getUserWebhook(e.path[1]))==null||a.update(n))}}else e.path[0]==="lib"&&this.updateLibByOp(en.drop(e,1),i)}updateFont(e,t,i){if(t.props.url){let r=this.getFont(e),a={...this.data.fonts[e],url:t.props.url};r.update(a),r.loadingPromise.then(()=>this.requestRender()),i.updateFont(e,this)}}addUserAPI(e,t){return this.userAPIs[e]?(this.userAPIs[e].update(t,this),!0):(this.userAPIs[e]=new Jhe(e,t,this),!1)}getUserAPI(e){return this.userAPIs[e]}getUserAPIs(){return this.userAPIs}deleteUserAPI(e){let t=this.userAPIs[e];t&&(t.dispose(),delete this.userAPIs[e])}addUserWebhook(e,t){return this.userWebhooks[e]?(this.userWebhooks[e].update(t),!0):(this.userWebhooks[e]=new lpe(e,t),!1)}getUserWebhook(e){return this.userWebhooks[e]}getUserWebhooks(){return this.userWebhooks}deleteUserWebhook(e){let t=this.userWebhooks[e];t&&(t.dispose(),delete this.userWebhooks[e])}};new kA(Us.emptyData());var Ep=class extends ns{updateByPatchedOp(e,t,i){if(super.updateByPatchedOp(e,t,i),Foe(e.path,["materials"])!==null&&e.type===0&&Array.isArray(this.material))for(let[r,a]of Object.entries(e.props)){let n=i.shared.material(a);this.material[Number(r)]=n}else if(Vr(e.path,["material"])&&this.material instanceof cc)"material"in t&&typeof t.material!="string"&&this.material.updateByOp(en.drop(e,1),t.material,i);else if(Vr(e.path,["materials","*"])&&Array.isArray(this.material)){let r=e.path[1];if("materials"in t&&r<this.material.length){let a=t.materials[r];typeof a!="string"&&this.material[r].updateByOp(en.drop(e,2),a,i)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(e,t){var i,r;super.updateState(e,t),e.castShadow!==void 0&&(this.castShadow=e.castShadow),e.receiveShadow!==void 0&&(this.receiveShadow=e.receiveShadow);let a=this.dataPatched;if(((i=e.geometry)==null?void 0:i.type)!=="NonParametricGeometry"&&"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=t.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe),t.scene.markNeedsUpdateRendererDirty()),(((r=e.geometry)==null?void 0:r.type)==="NonParametricGeometry"||"materials"in e)&&("materials"in e&&e.materials!==void 0?(this.disposeMaterial(),this.material=e.materials.map(n=>t.shared.material(n).getFlavor(a.flatShading,a.side,a.wireframe)),t.scene.markNeedsUpdateRendererDirty()):"material"in e&&e.material!==void 0&&(this.disposeMaterial(),this.material=[t.shared.material(e.material).getFlavor(a.flatShading,a.side,a.wireframe)],t.scene.markNeedsUpdateRendererDirty())),e.flatShading!==void 0||e.wireframe!==void 0||e.side!==void 0)if(Array.isArray(this.material))for(let n=0;n<this.material.length;n++)this.material[n]=this.material[n].getFlavor(a.flatShading,a.side,a.wireframe);else this.material=this.material.getFlavor(a.flatShading,a.side,a.wireframe)}disposeMaterial(){this.material&&P6(this.material).forEach(e=>{e instanceof cc&&(e instanceof rM||e.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},FD=new V,jD=new Wi,$D=new Wi,cpe=new V,UD=new zt,Vn=class extends Ep{constructor(e,t,i){super(e,t),this.data=t,this.isSkinnedMesh=!1,this.localGeometry=void 0,t.bindMode&&t.bindMatrix&&(this.bindMode=t.bindMode,this.bindMatrix=new zt().fromArray(t.bindMatrix),this.bindMatrixInverse=new zt)}chooseGeoemtryCache(e){return e.geometryCache}markGeometryAsReachable(e){this.geometryCreateDeleyed instanceof Mi&&this.chooseGeoemtryCache(e).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof kA){let e=this.geometryCreateDeleyed,t=this.chooseGeoemtryCache(e);this.geometryCreateDeleyed=t.get(this.dataPatched.geometry,e,this)}return this.geometryCreateDeleyed}set geometry(e){this.localGeometry=e}get is2DAndNoDepth(){let e=this.dataPatched.geometry;return zy.is2DParametricMesh(e.type)&&e.depth===0}get is2DType(){return zy.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Vr(e.path,["geometry"])&&this.updateByPatchedOpGeometry(en.drop(e,1),t.geometry,i)}removeInteractionGeometry(e){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(e,t){var i;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let a=e;if(this.localGeometry===void 0){let u={...this.data.geometry,...a};this.localGeometry=wm(u,t,this.data.flatShading,this)}let n,s,o;a.scaleBaked?[n,s,o]=a.scaleBaked:{width:n,height:s,depth:o}=a;let l=this.localGeometry.userData;l.sxPrev!==void 0&&Z2(this.localGeometry.attributes,n/l.sxPrev,s/l.syPrev,o/l.szPrev),l.sxPrev=n,l.syPrev=s,l.szPrev=o}else{let a={...this.data.geometry,...e};(i=this.localGeometry)==null||i.dispose(),this.localGeometry=wm(a,t,this.data.flatShading,this)}}refreshAttachedClonersInteractions(){for(let e of this.attachedSurfaceCloners)e.update()}refreshAttachedCloners(e){for(let t of this.attachedSurfaceCloners)e.scene.addPendingUpdateCloner(t.object)}refreshAttachedPaths(e){for(let t of this.attachedPaths)e.scene.addPendingCommand(()=>t.updateShape())}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.refreshAttachedCloners(e),this.refreshAttachedPaths(e)}updateByPatchedOpGeometry(e,t,i){var r;let a=!1;e.type===0&&e.path.length===0&&Object.keys(e.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Zn&&this.chooseGeoemtryCache(i.shared).mutateIfUnique(this.geometryCreateDeleyed.data,t)===this.geometryCreateDeleyed&&(a=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(t,e.props.scaleBaked),this.refreshAttachedCloners(i),this.refreshAttachedPaths(i)),a||((r=i.scene)==null||r.markGeometryCacheDirty(),this.createGeometryDelayed(i)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(e,t){this.createGeometryDelayed(t)}updateState(e,t){e.geometry!==void 0&&this.updateGeometryOnStateUpdate(e.geometry,t),super.updateState(e,t)}updateGeometryGroupsIfNeeded(){var e;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max(((e=this.geometry.getIndex())==null?void 0:e.count)??0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;this.is2DType?e.set(0,0,i.depth*.5):this.isNonParametric?(e.setScalar(0),this.geometry.boundingSphere&&e.copy(this.geometry.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)):e.setScalar(0),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(e,t){this.skeleton=e,this.isSkinnedMesh=!0,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(e){let t=new Wi,i=this.geometry.attributes.skinWeight;for(let r=0,a=i.count;r<a;r++){t.fromBufferAttribute(i,r);let n=1/t.manhattanLength();n!==1/0?t.multiplyScalar(n):t.set(1,0,0,0),i.setXYZW(r,t.x,t.y,t.z,t.w)}}boneTransform(e,t){let i=this.skeleton;if(i===void 0)return;let r=this.geometry;jD.fromBufferAttribute(r.attributes.skinIndex,e),$D.fromBufferAttribute(r.attributes.skinWeight,e),FD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){let n=$D.getComponent(a);if(n!==0){let s=jD.getComponent(a);UD.multiplyMatrices(i.bones[s].matrixWorld,i.boneInverses[s]),t.addScaledVector(cpe.copy(FD).applyMatrix4(UD),n)}}return t.applyMatrix4(this.bindMatrixInverse)}};function dpe(e){var t,i;if(e.geometry.attributes.extrudeNormal||!e.geometry.attributes.position||!e.geometry.attributes.normal)return;let r=new Map,a=e.geometry.attributes,n=a.position.array,s=a.normal.array,o=new Float32Array(n.length);for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,c=new V(s[l],s[l+1],s[l+2]);r.has(u)?(t=r.get(u))==null||t.normals.push(c):r.set(u,{normals:[c],result:new V})}r.forEach((l,u)=>{for(let c of l.normals)l.result.add(c);l.result.divideScalar(l.normals.length)});for(let l=0;l<n.length;l+=3){let u=`${n[l]}_${n[l+1]}_${n[l+2]}`,c=(i=r.get(u))==null?void 0:i.result;c&&(o[l]=c.x,o[l+1]=c.y,o[l+2]=c.z)}e.geometry.setAttribute("extrudeNormal",new ri(o,3))}function hpe(e){if(e.geometry.attributes.extrudeNormals||!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=new V;for(let a=0;a<t.length;a+=3)r.set(t[a],t[a+1],t[a+2]).normalize(),i[a]=r.x,i[a+1]=r.y,i[a+2]=r.z;e.geometry.setAttribute("extrudeNormal",new ri(i,3))}function OA(e){if(Array.isArray(e.material)){for(let t of e.material)if(t.getLayersOfType("outline").length===0)return}else if(!(e.material instanceof cc)||e.material.getLayersOfType("outline").length===0)return;e instanceof Vn&&e.is2DAndNoDepth?hpe(e):dpe(e)}function DA(e){if(!e.geometry.attributes.position)return;let t=e.geometry.attributes.position.array,i=new Float32Array(t.length),r=parseInt(e.uuid.replace(/\D/g,"")),a=[li.seededRandom(r),li.seededRandom(r+1e4),li.seededRandom(r+2e4)];for(let n=0;n<t.length;n++)i[n]=a[n%3];e.geometry.setAttribute("randomColor",new ji(i,3))}var Uo=new ba,Jp=new V;function ppe(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(t=!0)}),t}var xm=class extends Vn{constructor(e,t,i){super(e,t,i),this.data=t,this.hiddenMatrixOld=new zt,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(e){return this.dataPatched.flatShading?e.geometryCache:e.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){return this.data.geometry.phongAngle??45}updateEntityBoxSize(e,t){let i=this.geometry.userData.parameters;e.copy(this.originalGeometryNew.boundingSphere.center),t.set(i.width,i.height,i.depth??0).multiplyScalar(.5)}createGeometryByControls(e){var t,i,r;if(this.skipReactionUpdate===!0)return;let a=(t=this.localGeometry)==null?void 0:t.uuid,{originalGeometry:n,subdividedGeometry:s,subdivPointer:o}=Zn.build(e,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=o,n!==void 0&&((i=this.originalGeometry)==null||i.dispose(),this.originalGeometry=n),s!==void 0&&((r=this.subdividedGeometry)==null||r.dispose(),this.subdividedGeometry=s??void 0),this.localGeometry=this.subdividedGeometry??this.originalGeometry,OA(this),DA(this),this.calcBoundingBox(),a&&(this.localGeometry.uuid=a)}updateState(e,t){if(super.updateState(e,t),e.flatShading!==void 0){let i=this.material;this.material=Array.isArray(i)?i.map(r=>r.getFlavor(!1,r.side,r.wireframe)):i.getFlavor(!1,i.side,i.wireframe),this.smoothShading=!e.flatShading,this.createGeometryDelayed(t)}}updateMesh(e=!1){Zn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Zn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,e&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){this.originalGeometry.dispose(),this.originalGeometry=Zn.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Zn.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=this.subdividedGeometry??this.originalGeometry}raycast(e,t){let i=this.localGeometry;this.localGeometry=this.originalGeometryNew,ns.prototype.raycast.call(this,e,t),this.localGeometry=i}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let e=this.originalGeometry;e.boundingSphere===null&&(e.boundingSphere=new ws,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=e.boundingSphere));let t=e.attributes.position,i=e.boundingSphere.center;Uo.setFromBufferAttribute(t),Uo.getCenter(i),e.boundingSphere.radius=i.distanceTo(Uo.max),isNaN(e.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Uo.getSize(Jp),this.hasNonUniformScale&&Jp.divide(this.scale);let r={width:Jp.x,height:Jp.y,depth:Jp.z};return this.geometry.userData.parameters=r,r}updateBoundingSphere(e){let t=this.originalGeometry;Uo.min.set(e[0],e[2],e[4]),Uo.max.set(e[1],e[3],e[5]),this.hasNonUniformScale&&(Uo.min.applyMatrix4(this.shearScaleInv),Uo.max.applyMatrix4(this.shearScaleInv)),t.boundingSphere===null&&(t.boundingSphere=new ws);let i=t.boundingSphere.center;Uo.getCenter(i),t.boundingSphere.radius=i.distanceTo(Uo.max)}freeSubdivPointer(){var e,t;this.subdivPointer&&(Zn.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(e=this.originalGeometry)==null||e.dispose(),(t=this.subdividedGeometry)==null||t.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),this.localGeometry&&this.createGeometryByControls(t)}},WD=-1,fpe=1,mpe={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},vpe={polygon_center:0,edge:1,vertex:2},lg=(e,t)=>(i,r)=>!t||i===0||e===0?0:e*r/100,Qi=(e,t)=>{let i=Math.abs(t),r=i*-1;return(e-WD)*(i-r)/(fpe-WD)+r};function gpe(e){let t=[],i={};for(var r=0,a=e.length;r<a;r++){var n=JSON.stringify(e[r].pos.map(s=>Math.round(s*1e4)/1e4));i[n]||(t.push(e[r]),i[n]=!0)}return t}var ype=new V,ug=new V,bpe=new V,wpe=new V;function Bh(e,t){let i=bpe.fromArray(e),r=wpe.fromArray(t);ug.copy(r).sub(i);let a=ug.length();return ug.normalize().multiplyScalar(a*.5),ype.copy(i).add(ug).toArray()}var Hs=new xn,cg=new V,Zy=new V,zc=new V;function xpe(e){let t=[];for(let i=0;i<=e.index.count;i++)if(cg.fromArray(e.index.array,i*3),Hs.setFromAttributeAndIndices(e.attributes.position,cg.x,cg.y,cg.z),Hs.getNormal(Zy),Hs.getMidpoint(zc),!(isNaN(zc.x)||isNaN(zc.y)||isNaN(zc.z))){let{a:r,b:a,c:n}=Hs,s=r.toArray(),o=a.toArray(),l=n.toArray(),u=r.distanceTo(a),c=a.distanceTo(n),d=n.distanceTo(r),h=Bh(s,o),p=Bh(o,l),f=Bh(l,s),v=[u,c,d],m=Math.max(...v),g=v.filter(x=>Math.round(x)===Math.round(m)).length>1,y=[],b=Hs.getMidpoint(zc).toArray();m===u&&!g&&(y=[p,f,f],b=h),m===c&&!g&&(y=[h,f,f],b=p),m===d&&!g&&(y=[h,p,p],b=f),g&&(y=[h,p,f]),t.push({vertices:[s,o,l],faceCenters:y,midpoint:b,norm:Hs.getNormal(Zy).toArray()})}return t}function Spe(e){let t=[],{position:i}=e.attributes;for(let r=0;r<i.count;r++){Hs.setFromAttributeAndIndices(i,r*3,r*3+1,r*3+2),Hs.getNormal(Zy),Hs.getMidpoint(zc);let a=Hs.a.toArray(),n=Hs.b.toArray(),s=Hs.c.toArray();t.push({vertices:[a,n,s],faceCenters:[Bh(a,n),Bh(n,s),Bh(s,a)],midpoint:zc.toArray(),norm:Zy.toArray()})}return t}var Cpe=4,_pe=.5,mx=e=>.5*(1-Math.cos(e*Math.PI)),Mpe=class{constructor(){this.perlin=new Array(4096)}noise(e,t=0,i=0){if(this.perlin==null){this.perlin=new Array(4096);for(let m=0;m<4096;m++)this.perlin[m]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),i<0&&(i=-i);let r=Math.floor(e),a=Math.floor(t),n=Math.floor(i),s=e-r,o=t-a,l=i-n,u,c,d=0,h=.5,p,f,v;for(let m=0;m<Cpe;m++){let g=r+(a<<4)+(n<<8);u=mx(s),c=mx(o),p=this.perlin[g&4095],p+=u*(this.perlin[g+1&4095]-p),f=this.perlin[g+16&4095],f+=u*(this.perlin[g+16+1&4095]-f),p+=c*(f-p),g+=256,f=this.perlin[g&4095],f+=u*(this.perlin[g+1&4095]-f),v=this.perlin[g+16&4095],v+=u*(this.perlin[g+16+1&4095]-v),f+=c*(v-f),p+=mx(l)*(f-p),d+=p*h,h*=_pe,r<<=1,s*=2,a<<=1,o*=2,n<<=1,l*=2,s>=1&&(r++,s--),o>=1&&(a++,o--),l>=1&&(n++,l--)}return d}noiseSeed(e){let t=(()=>{let i,r;return{setSeed(a){r=i=(a??Math.random()*4294967296)>>>0},getSeed(){return i},rand(){return r=(1664525*r+1013904223)%4294967296,r/4294967296}}})();t.setSeed(e),this.perlin=new Array(4096);for(let i=0;i<4096;i++)this.perlin[i]=t.rand()}},Epe=Mpe,HD=new V,GD=new zt,qD=new hp;function YD(e){let t=!1;return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&(r.geometry.type==="TextGeometry"||r.geometry.type==="InputGeometry")&&(t=!0)}),t}var IA=class extends Vn{constructor(e,t,i){super(e,t,i),this.data=t}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var e;let t=this.dataPatched;return((e=this.font)==null?void 0:e.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))??0}get fontScale(){let e=this.dataPatched;return this.font?e.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var e;return(((e=this.font)==null?void 0:e.ascender)??1)*this.fontScale}get descender(){var e;return(((e=this.font)==null?void 0:e.descender)??1)*this.fontScale}get lineHeight(){let e=this.dataPatched;return e.geometry.fontSize*e.geometry.lineHeight}raycast(e,t){let{matrixWorld:i}=this;if(!(isNaN(e.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(GD.copy(i).invert(),qD.copy(e.ray).applyMatrix4(GD),qD.intersectBox(this.singleBBox,HD))){let r=HD.applyMatrix4(i),a=e.ray.origin.distanceTo(r);t.push({distance:a,point:r.clone(),object:this})}}},Yn=1e-4,Wo,OV,DV,IV,XD=new V,KD=new V;jN.then(e=>{Wo=e,OV=[Wo.get_face_center,Wo.get_edge_midpoint,Wo.get_vertex_position],DV=[Wo.get_face_normal,Wo.get_edge_normal,Wo.get_vertex_normal],IV=[Wo.face_count,Wo.edge_count,Wo.vertex_count]});var Ape=new zt,Ppe=new zt,Au=new V,dg=new V,ef=new V,vx=new V,Tpe=new V,kpe=new V,kl=new Epe,So=class extends pA(Tr){constructor(e,t){super(),this.parameters=t,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=e}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(e){if(this.parent===null)this.updateState(this.parameters,e);else for(let t of this.children)t instanceof Nn&&t.expand()}invalidateTransform(e){this.matrixWorldNeedsUpdate=!0,this.traverse(t=>{t instanceof Nn&&t.object===e&&(t.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let e of this.children)e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD())}_updateCount(e){let t;if(e!==void 0?t=e:t=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(t=0),this.parameters.type==="toObject"&&this.objectForSample){for(let r=0,a=this.children.length;r<a;++r)this.remove(this.children[0]);let i=this.children;if(i.length===t)return;if(i.length<t)for(let r=0,a=t-i.length;r<a;++r){let n=new Nn(this.object);n.expand(),this.add(n)}else for(let r=0,a=i.length-t;r<a;++r)this.remove(i[r])}else{if(this.children.length===t)return;if(this.children.length<t)for(let i=0,r=t-this.children.length;i<r;++i){let a=new Nn(this.object);a.expand(),this.add(a)}else for(let i=0,r=this.children.length-t;i<r;++i)this.remove(this.children[0])}}_updateRadial(e){let t=e.radial,i=t.start*li.DEG2RAD,r=t.end*li.DEG2RAD,a=i-r,n=new Va(t.rotation[0],t.rotation[1],t.rotation[2]),s;switch(t.axis){case"z":s=new V(0,0,1);break;case"y":s=new V(0,1,0);break;default:case"x":s=new V(1,0,0);break}let o=e.randomnessObject??qu.defaultData([1,1,1]).randomnessObject,l=o.noiseType==="perlin";kl.noiseSeed(o.seed);let u=Yw((0,Yp.default)(o.seed)),c=lg(o.strength,this.parameters.randomness);for(let[d,h]of this.children.entries()){let p=d*(o.freqScale/10)+o.movement,f=l?kl.noise(p):u(p,p),v=d+1;h.scale.x=t.scale[0]+c(v,Qi(f,o.scale[0]))||Yn,h.scale.y=t.scale[1]+c(v,Qi(f,o.scale[1]))||Yn,h.scale.z=t.scale[2]+c(v,Qi(f,o.scale[2]))||Yn,h.position.setScalar(0);let m=a/e.count*d-i;switch(t.axis){case"x":h.rotation.set(0,m,0);break;case"y":h.rotation.set(0,0,m);break;case"z":h.rotation.set(m,0,0);break}h.translateOnAxis(s,t.radius),h.position.x+=t.position[0]+c(v,Qi(f,o.position[0])),h.position.y+=t.position[1]+c(v,Qi(f,o.position[1])),h.position.z+=t.position[2]+c(v,Qi(f,o.position[2]));let g=c(v,Qi(f,o.rotation[0])),y=c(v,Qi(f,o.rotation[1])),b=c(v,Qi(f,o.rotation[2]));t.alignment===!0?(h.rotation.x+=n.x+g,h.rotation.y+=n.y+y,h.rotation.z+=n.z+b):h.rotation.set(n.x+g,n.y+y,n.z+b)}}_updateLinear(e){if(e.type!=="linear")throw new Error;let t=e.linear,i=new Va(t.rotation[0],t.rotation[1],t.rotation[2]),r=e.randomnessObject??qu.defaultData([1,1,1]).randomnessObject,a=r.noiseType==="perlin";kl.noiseSeed(r.seed);let n=Yw((0,Yp.default)(r.seed)),s=lg(r.strength,this.parameters.randomness);for(let[o,l]of this.children.entries()){let u=o*(r.freqScale/10)+r.movement,c=a?kl.noise(u):n(u,u),d=o+1,h=s(d,Qi(c,r.rotation[0])),p=s(d,Qi(c,r.rotation[1])),f=s(d,Qi(c,r.rotation[2]));l.scale.x=1+(t.scale[0]-1)*o+s(d,Qi(c,r.scale[0]))||Yn,l.scale.y=1+(t.scale[1]-1)*o+s(d,Qi(c,r.scale[1]))||Yn,l.scale.z=1+(t.scale[2]-1)*o+s(d,Qi(c,r.scale[2]))||Yn,l.rotation.x=i.x*o+h,l.rotation.y=i.y*o+p,l.rotation.z=i.z*o+f,l.position.x=t.position[0]*o+s(d,Qi(c,r.position[0])),l.position.y=t.position[1]*o+s(d,Qi(c,r.position[1])),l.position.z=t.position[2]*o+s(d,Qi(c,r.position[2]))}}_updateGrid(e){let t=0,i=e.grid,r=e.randomnessObject??qu.defaultData([1,1,1]).randomnessObject,a=lg(r.strength,this.parameters.randomness),n=r.noiseType==="perlin";kl.noiseSeed(r.seed);let s=Sue((0,Yp.default)(r.seed));if(i.useCenter===!0){let o={x:i.count[0]%2===0?2:1,y:i.count[1]%2===0?2:1,z:i.count[2]%2===0?2:1},l=new V(i.size[0]*(i.count[0]-o.x)*.5,i.size[1]*(i.count[1]-o.y)*.5,i.size[2]*(i.count[2]-o.z)*.5);for(let u=0;u<i.count[0];u++)for(let c=0;c<i.count[1];c++)for(let d=0;d<i.count[2];d++){let h=[(u+1)*(r.freqScale/10)+r.movement,(c+1)*(r.freqScale/10)+r.movement,(d+1)*(r.freqScale/10)+r.movement],p=n?kl.noise(...h):s(...h),f=this.children[t++];f.scale.x=1+a(t,Qi(p,r.scale[0]))||Yn,f.scale.y=1+a(t,Qi(p,r.scale[1]))||Yn,f.scale.z=1+a(t,Qi(p,r.scale[2]))||Yn;let v=a(t,Qi(p,r.rotation[0])),m=a(t,Qi(p,r.rotation[1])),g=a(t,Qi(p,r.rotation[2]));f.rotation.set(v,m,g),f.position.x=i.size[0]*u-l.x+a(t,Qi(p,r.position[0])),f.position.y=i.size[1]*c-l.y+a(t,Qi(p,r.position[1])),f.position.z=i.size[2]*d-l.z+a(t,Qi(p,r.position[2]))}}else for(let o=0;o<i.count[0];o++)for(let l=0;l<i.count[1];l++)for(let u=0;u<i.count[2];u++){let c=[(o+1)*(r.freqScale/10)+r.movement,(l+1)*(r.freqScale/10)+r.movement,(u+1)*(r.freqScale/10)+r.movement],d=n?kl.noise(...c):s(...c),h=this.children[t++];h.scale.x=1+a(t,Qi(d,r.scale[0]))||Yn,h.scale.y=1+a(t,Qi(d,r.scale[1]))||Yn,h.scale.z=1+a(t,Qi(d,r.scale[2]))||Yn;let p=a(t,Qi(d,r.rotation[0])),f=a(t,Qi(d,r.rotation[1])),v=a(t,Qi(d,r.rotation[2]));h.rotation.set(p,f,v),h.position.x=i.size[0]*o+a(t,Qi(d,r.position[0])),h.position.y=-i.size[1]*l+a(t,Qi(d,r.position[1])),h.position.z=-i.size[2]*u+a(t,Qi(d,r.position[2]))}}_updateToObject(e){var t;if(e.type!=="toObject")throw new Error;let{toObject:i}=e,r=new Va(i.rotation[0],i.rotation[1],i.rotation[2]),a=e.randomnessObject??qu.defaultData([1,1,1]).randomnessObject,n=a.noiseType==="perlin";kl.noiseSeed(a.seed);let s=Yw((0,Yp.default)(a.seed)),o=lg(a.strength,this.parameters.randomness);if(!i.object){for(let[,m]of this.children.entries())m.position.set(0,0,0),m.scale.setScalar(1),m.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof IA)if(!((t=this.objectForSample.font)!=null&&t.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let l=this.getSubdivData(),u=[],c=m=>{let g=m.length,y=m.map(S=>S[0]).reduce((S,w)=>S+w,0),b=m.map(S=>S[1]).reduce((S,w)=>S+w,0),x=m.map(S=>S[2]).reduce((S,w)=>S+w,0);return[y/g,b/g,x/g]},d=m=>Math.round(m*1e6)/1e6;l.forEach(m=>{let g=l.filter(y=>d(m.pos[0])===d(y.pos[0])&&d(m.pos[1])===d(y.pos[1])&&d(m.pos[2])===d(y.pos[2]));g.length>1?u.push({pos:m.pos,norm:c(g.map(y=>y.norm))}):u.push(m)});let h=gpe(u);if(h.length>0){let m=Math.round(h.length*i.count/100);this._updateCount(m)}else{let m=this.objectForSample.geometry.getAttribute("position");if(!m||isNaN(m.count)||m.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let p=new Cue(this.objectForSample).build(),f=mpe[i.axis],v=this.children;p.setRandomGenerator((0,Yp.default)(this.object.uuid+i.seed));for(let[m,g]of v.entries()){let y=m*(a.freqScale/10)+a.movement,b=n?kl.noise(y):s(y,y),x=m+1,S=o(x,Qi(b,a.rotation[0])),w=o(x,Qi(b,a.rotation[1])),E=o(x,Qi(b,a.rotation[2]));i.spreadType==="random"?p.sample(ef,vx):(h.length&&(ef.fromArray(h[m].pos),vx.fromArray(h[m].norm)),this.objectForSample instanceof xm&&ef.applyMatrix4(Ape.copy(this.objectForSample.matrixWorld).invert())),ef.applyMatrix4(this.object.hiddenMatrix.clone().invert()),g.position.copy(ef),Au.fromArray(f);let M=i.align==="normal"?vx:this.object.getWorldDirection(kpe),P=dg.fromArray(i.position);dg.x+=o(x,Qi(b,a.position[0])),dg.y+=o(x,Qi(b,a.position[1])),dg.z+=o(x,Qi(b,a.position[2]));let A=Math.acos(M.dot(Au)),k=Tpe.crossVectors(Au,M).normalize(),I=Ppe.makeRotationAxis(k,A),O=M.clone().cross(this.object.up).normalize(),D=O.clone().cross(M).normalize(),F=new zt().makeBasis(O,M,D),U=new V(Au.y,Au.z,Au.x).normalize(),z=U.clone().cross(Au).normalize(),B=new zt().makeBasis(U,Au,z).invert(),W=new zt().multiplyMatrices(F,B);g.rotation.setFromRotationMatrix(W),P.applyMatrix4(I),g.position.add(P),g.rotation.x=g.rotation.x+r.x+S,g.rotation.y=g.rotation.y+r.y+w,g.rotation.z=g.rotation.z+r.z+E,g.scale.setScalar(1),g.scale.x=g.scale.x+i.scale[0]+o(x,Qi(b,a.scale[0]))||Yn,g.scale.y=g.scale.y+i.scale[1]+o(x,Qi(b,a.scale[1]))||Yn,g.scale.z=g.scale.z+i.scale[2]+o(x,Qi(b,a.scale[2]))||Yn,g.scale.multiply(this.object.scale),g.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let e=this.parameters.toObject.spreadType;if(e==="random")return[];if(this.objectForSample instanceof xm){let t=this.objectForSample,i=vpe[e],r=IV[i],a=OV[i],n=DV[i],s=[],o=r(t.subdivPointerNew);for(let l=0;l<=o-1;l++){let u=a(t.subdivPointerNew,l),c=n(t.subdivPointerNew,l);XD.fromArray(u).applyMatrix4(t.matrixWorld),KD.fromArray(c),s.push({pos:XD.toArray(),norm:KD.toArray()})}return s}else return(this.objectForSample.geometry.index?xpe(this.objectForSample.geometry):Spe(this.objectForSample.geometry)).map((t,i)=>e==="polygon_center"?{pos:t.midpoint,norm:t.norm}:e==="vertex"?[{pos:t.vertices[0],norm:t.norm},{pos:t.vertices[1],norm:t.norm},{pos:t.vertices[2],norm:t.norm}]:e==="edge"?[{pos:t.faceCenters[0],norm:t.norm},{pos:t.faceCenters[1],norm:t.norm},{pos:t.faceCenters[2],norm:t.norm}]:[]).flat()}updateState(e,t){var i;if(this.parameters=Gb(e),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(i=this.object.parent)==null||i.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let r=t.find(this.parameters.toObject.object);r instanceof ns?this.objectForSample=r:this.objectForSample=void 0,this.matrix=new zt,this.hiddenMatrix=new zt,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,r&&r.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},$m=e=>{var t;return t=class extends e{},t.geometryHelper=new ko(30,30,30),t},hg=new hp,gx=new ws,ZD=new zt,Um=(e,t,i,r,a=!1,n=e)=>{let s=t,o=n.matrixWorld;if(s.boundingSphere===null&&s.computeBoundingSphere(),gx.copy(s.boundingSphere),gx.applyMatrix4(o),i.ray.intersectsSphere(gx)===!1||(ZD.copy(o).invert(),hg.copy(i.ray).applyMatrix4(ZD),s.boundingBox!==null&&hg.intersectsBox(s.boundingBox)===!1))return;let l,u,c,d,h=s.index,p=s.attributes.position,f=s.drawRange,v,m;if(a===!1){let y=Math.max(0,f.start),b=Math.min(h.count,f.start+f.count);for(v=y,m=b;v<m;v+=3)if(u=h.getX(v),c=h.getX(v+1),d=h.getX(v+2),l=g(e,i,hg,p,u,c,d),l){l.faceIndex=Math.floor(v/3),r.push(l);return}}else{let y=s.attributes.position,b=new V,x=new V,S=new V,w=new V,E=2,M=1/((n.scale.x+n.scale.y+n.scale.z)/3),P=M*M,A=Math.max(0,f.start),k=Math.min(y.count,f.start+f.count);for(let I=A,O=k-1;I<O;I+=E){if(b.fromBufferAttribute(y,I),x.fromBufferAttribute(y,I+1),hg.distanceSqToSegment(b,x,w,S)>P)continue;w.applyMatrix4(n.matrixWorld);let D=i.ray.origin.distanceTo(w);D<i.near||D>i.far||r.push({distance:D,point:S.clone().applyMatrix4(n.matrixWorld),object:e})}}function g(y,b,x,S,w,E,M){let P=new V,A=new V,k=new V,I=new V,O=new V;if(P.fromBufferAttribute(S,w),A.fromBufferAttribute(S,E),k.fromBufferAttribute(S,M),x.intersectTriangle(P,A,k,!1,I)===null)return null;O.copy(I),O.applyMatrix4(y.matrixWorld);let D=b.ray.origin.distanceTo(O);return D<b.near||D>b.far?null:{faceIndex:1,distance:D,point:O.clone(),object:y}}},pg=new V,Rs=new wd,Ope=class extends Im{constructor(e){let t=new Mi,i=new vc({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],a=[],n={},s=new Bi(15711266),o=new Bi(15711266),l=new Bi(2857471);u("n1","n2",s),u("n2","n4",s),u("n4","n3",s),u("n3","n1",s),u("f1","f2",s),u("f2","f4",s),u("f4","f3",s),u("f3","f1",s),u("n1","f1",s),u("n2","f2",s),u("n3","f3",s),u("n4","f4",s),u("p","n1",o),u("p","n2",o),u("p","n3",o),u("p","n4",o),u("u1","u2",l),u("u2","u3",l),u("u3","u1",l);function u(d,h,p){c(d,p),c(h,p)}function c(d,h){r.push(0,0,0),a.push(h.r,h.g,h.b),n[d]===void 0&&(n[d]=[]),n[d].push(r.length/3-1)}t.setAttribute("position",new ri(r,3)),t.setAttribute("color",new ri(a,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=n,this.update()}update(){let e=this.geometry,t=this.pointMap;Rs.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let i=1,r=1,a=.8;lo("n1",t,e,Rs,-i,-r,a),lo("n2",t,e,Rs,i,-r,a),lo("n3",t,e,Rs,-i,r,a),lo("n4",t,e,Rs,i,r,a);let n=a;lo("f1",t,e,Rs,-i,-r,n),lo("f2",t,e,Rs,i,-r,n),lo("f3",t,e,Rs,-i,r,n),lo("f4",t,e,Rs,i,r,n);let s=n,o=.5;lo("u1",t,e,Rs,i*.7*o,r*1.1,s),lo("u2",t,e,Rs,-i*.7*o,r*1.1,s),lo("u3",t,e,Rs,0,r*(1.1+.9*o),s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function lo(e,t,i,r,a,n,s){pg.set(a,n,s).unproject(r);let o=t[e];if(o!==void 0){let l=i.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],pg.x,pg.y,pg.z)}}var Dpe=class extends $m(Ope){constructor(e){super(e),this.object=e,this.object=e,this.name=`CombinedCameraHelper: ${e.uuid}`}updateMatrixWorld(e){super.updateMatrixWorld(e),this.updateTarget()}updateTarget(){let e=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(e)}raycast(e,t){Um(this.object,this.geometry,e,t,!0)}},nM;(e=>e.is=t=>"objectHelper"in t)(nM||(nM={}));var Ap=(e,t)=>class extends fA(e){constructor(){super(...arguments),this.objectHelper=new t(this),this.gizmos={}}get geometryHelper(){return t.geometryHelper}raycast(i,r){this.objectHelper.raycast(i,r)}showGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof gy&&(r.visible=!0)}}updateEntityBoxSize(i,r){this.objectHelper.visible&&this.geometryHelper instanceof ko?(i.setScalar(0),r.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(i,r)}hideGizmos(){for(let i in this.gizmos){let r=this.gizmos[i];r instanceof gy&&(r.visible=!1)}}},fg=790,Qd=new V,yx=new V,bx=new Ui,wx=new V,tf=new V,xx=new V,Fn=class extends Ap(wd,Dpe){constructor(e="",t={...hm.defaultData,name:""}){super(),this._cameraType="OrthographicCamera",this.targetOffset=Qh.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(e,t),this.previousProjectionMatrix=new zt,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let i=this.width,r=this.height;this.orthoCamera=new zb(i*-.5,i*.5,r*.5,r*-.5,-5e4,1e4),this.perspCamera=new Bn(45,i/r,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(e){this.perspCamera.fov=e}get fov(){return this.perspCamera.fov}setNear(e,t){e==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}setZoom(e,t){t>=0&&(e==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}set cameraType(e){e==="PerspectiveCamera"?this.toPerspective():e==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(e){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=e:this.orthoCamera.near=e}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(e){e>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=e:this.orthoCamera.zoom=e)}lookAt(e,t,i){typeof e=="number"&&(e=new V(e,t,i)),super.lookAt(e),this.getWorldPosition(Qd),this.targetOffset=Qd.distanceTo(e)}getTarget(e=new V){return this.getWorldDirection(yx),this.getWorldPosition(Qd),yx.multiplyScalar(this.targetOffset),e.copy(Qd).add(yx),e}getDistanceToTarget(){let e=this.getTarget();return this.getWorldPosition(Qd),Qd.distanceTo(e)}updateUp(){this.getWorldQuaternion(bx),wx.set(0,0,1).applyQuaternion(bx),tf.copy(Tr.DEFAULT_UP),this.isUpVectorFlipped&&tf.negate(),tf.applyQuaternion(bx),xx.copy(Tr.DEFAULT_UP).projectOnPlane(wx),this.angleOffsetFromUp=xx.angleTo(tf),this.angleOffsetFromUp*=xx.cross(tf).dot(wx)>=0?1:-1}updateTransformState(e,t){let i=super.updateTransformState(e,t);return e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateUp(),i}getViewFrontToObject(e){let t=e.getWorldPosition(new V),i=e.getWorldDirection(new V).multiplyScalar(this.targetOffset);return{position:t.clone().add(i),target:t}}getViewToTarget(e){let t=this.getWorldDirection(new V).multiplyScalar(this.targetOffset);return{position:e.clone().sub(t),target:e}}getViewToObject(e){let t=new V;return e.getWorldPosition(t),this.getViewToTarget(t)}setViewplaneSize(e,t,i=!1){if(this.aspect=e/t,i){let r=e>t?this.aspect:1,a=e>t?1:this.aspect;this.left=-fg*.5*r,this.right=fg*.5*r,this.top=fg*.5*(1/a),this.bottom=-fg*.5*(1/a)}else this.left=-e*.5,this.right=e*.5,this.top=t*.5,this.bottom=-t*.5;this.updateProjectionMatrix()}copyViewPlaneSize(e){this.aspect=e.aspect,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(e){this.perspCamera.setFocalLength(e),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(e,t,i,r,a,n){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(e,t,i,r,a,n):this.orthoCamera.setViewOffset(e,t,i,r,a,n)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(e,t){return super.copy(e,t),this.parent=e.parent,this.orthoCamera.copy(e.orthoCamera),this.perspCamera.copy(e.perspCamera),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.far=e.far,this.view=e.view===null?null:Object.assign({},e.view),this._cameraType=e._cameraType,this.aspect=e.aspect,this.fov=e.fov,this.focus=e.focus,this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this.targetOffset=e.targetOffset,this.updateProjectionMatrix(),this}toCameraState(e=[]){let t={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return Q_(t,e)}updateCameraSubtype(e,t){let i=e==="perspective"?"PerspectiveCamera":"OrthographicCamera";t.zoom!==void 0&&this.setZoom(i,t.zoom),t.near!==void 0&&this.setNear(i,t.near),t.fov!==void 0&&i==="PerspectiveCamera"&&(this.fov=t.fov)}updateState(e,t){this.updateCameraState(e,t)}updateCameraState(e,t){this.updateState_Entity(e,t),e.far!==void 0&&(this.far=e.far),e.orthographic!==void 0&&this.updateCameraSubtype("orthographic",e.orthographic),e.perspective!==void 0&&this.updateCameraSubtype("perspective",e.perspective),e.type!==void 0&&(this.cameraType=e.type),e.up!==void 0&&this.up.fromArray(e.up),e.targetOffset!==void 0&&(this.targetOffset=e.targetOffset),e.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=e.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.type===0&&this.updateCameraSubtype(e.path[0],e.props)}toState(e){return{...super.toState(e),...this.toCameraState(e),type:this.cameraType}}},Jd=new zt,Ipe=new zt;function QD(e){let t=!1;return e.scene.objects.traverse((i,r)=>{var a;((a=r.geometry)==null?void 0:a.type)==="BooleanGeometry"&&(t=!0)}),t}var vd=class extends Ep{constructor(e,t,i){super(e,t),this.data=t,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Mi,this.onAfterRender=(r,a,n,s,o,l)=>{super.onAfterRender(r,a,n,s,o,l),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){return this.data.geometry.phongAngle??45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.path.length===1&&e.path[0]==="geometry"&&e.type===0&&e.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(e,t=!0){var i;if(this.booleanMeshSetAddress!==-1&&!e)return;for(let a=0;a<this.children.length;a++){let n=this.children[a];n instanceof vd&&n.dataPatched.visible===!0&&n.recomputeBoolean(e===!0,t)}this.meshSetAddresses=[];for(let a=0;a<this.children.length;a++){let n=this.children[a];if(n instanceof ns&&n.dataPatched.visible===!0&&((i=n.geometry.attributes.position)==null?void 0:i.count)>0&&n.geometry.drawRange.count>0&&n.booleanMeshSetAddress!==0){Jd.multiplyMatrices(n.hiddenMatrix,n.matrix);try{if(n.booleanMeshSetAddress===-1){if((n.geometry.index??n.geometry.getAttribute("position")).count/3<15e5&&(n.booleanMeshSetAddress=Nl.getMeshSet(n.geometry,e===!0,t)),n.booleanMeshSetAddress===-1)return;Nl.transformMeshSet(n.booleanMeshSetAddress,Jd),n.booleanMatrixInvOld.copy(Jd).invert(),n.booleanWasTransformed=!1}else n instanceof vd&&n.needsTransformForDownstream===!0?(Nl.transformMeshSet(n.booleanMeshSetAddress,Jd),n.needsTransformForDownstream=!1):n.booleanWasTransformed===!0&&(Nl.transformMeshSet(n.booleanMeshSetAddress,Ipe.multiplyMatrices(Jd,n.booleanMatrixInvOld)),n.booleanMatrixInvOld.copy(Jd).invert(),n.booleanWasTransformed=!1)}catch(s){console.error(s),n.booleanMeshSetAddress=0,n.geometry.userData.booleanOperationDidFail=!0;continue}Nl.hasOpenEdges(n.booleanMeshSetAddress)===!1||a===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(n.booleanMeshSetAddress),n.geometry.userData.booleanOperationDidFail=!1):n.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new ri([],0)),this.geometry.setDrawRange(0,0);return}if(e===!0)return Nl.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Mi,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Nl.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(a){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(a)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,OA(this),DA(this)}dispose(){super.dispose(),this.geometry.dispose()}},sM;(e=>{function t(i){return fr.is(i)&&i instanceof zm}e.is=t})(sM||(sM={}));var LA=(e,t)=>class extends Ap(e,t){updateState_Light(i,r){this.updateState_Entity(i,r),i.color!==void 0&&(this.color=r.shared.color(i.color)),i.intensity!==void 0&&(this.intensity=i.intensity),i.depth!==void 0&&(this.shadow.camera.far=i.depth,this.shadow.needsUpdate=!0),i.shadows!==void 0&&(this.castShadow=i.shadows)}},yo=e=>e instanceof ns,Ql=e=>e!==null&&e instanceof vd,Lpe=e=>e instanceof Fn,Bpe=e=>sM.is(e),oM=e=>nM.is(e),zpe=new V(1,1,1),JD=new V,Rpe=new V,eI=new Ui,Wm=class extends $m($Q){constructor(e,t=15){super(t),this.object=e,this.dummy=new Kl,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${e.uuid}`,this.matrix=this.dummy.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(e,t){Um(this.object,Wm.geometryHelper,e,t,!1,this.dummy)}update(){}updateMatrix(){}updateMatrixWorld(e){this.object.matrixWorld.decompose(JD,eI,Rpe),this.matrix.compose(JD,eI,zpe),super.updateMatrixWorld(e)}updateWorldMatrix(e,t){}},zh=class extends Ap(Kl,Wm){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t),"buffer"in e&&Object.keys(e).length===1&&t.scene.reloadSplats()}},Kg=class extends Ap(Kl,Wm){constructor(e,t,i){super(),this.super_Entity(e,t),this.context=i,this.objectHelper.update()}updateState(e,t){this.updateState_Entity(e,t)}},LV={RED:0,GREEN:1,BLUE:2,ALPHA:3},Hm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Npe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;uniform vec4 kernel64[32];varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;}}`,mg=class extends xr{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new Pt(null),kernel16:new Pt(null),inputBuffer:new Pt(null),cocBuffer:new Pt(null),texelSize:new Pt(new Ce),scale:new Pt(1)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Npe,vertexShader:Hm}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.uniforms.scale.value=e}setScale(e){this.uniforms.scale.value=e}generateKernel(){let e=2.39996323,t=new Float32Array(128),i=new Float32Array(32),r=0,a=0;for(let o=0;o<80;++o){let l=o*e,u=Math.sqrt(o)/Math.sqrt(80),c=u*Math.cos(l),d=u*Math.sin(l);o%5===0?(i[a++]=c,i[a++]=d):(t[r++]=c,t[r++]=d)}let n=[],s=[];for(let o=0;o<128;)n.push(new Wi(t[o++],t[o++],t[o++],t[o++]));for(let o=0;o<32;)s.push(new Wi(i[o++],i[o++],i[o++],i[o++]));this.uniforms.kernel64.value=n,this.uniforms.kernel16.value=s}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}};function tI(e,t,i){return e*(t-i)-t}function lM(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var Vpe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,Fpe=class extends xr{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Pt(null),focusDistance:new Pt(0),focusRange:new Pt(0),cameraNear:new Pt(.3),cameraFar:new Pt(1e3)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Vpe,vertexShader:Hm}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=mu){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-tI(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=lM(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-tI(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=lM(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Bn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},jpe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,$pe="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",iI=class extends xr{constructor(e=new Ce){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Pt(null),texelSize:new Pt(new Ce),halfTexelSize:new Pt(new Ce),kernel:new Pt(0),scale:new Pt(1)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:jpe,vertexShader:$pe}),this.toneMapped=!1,this.setTexelSize(e.x,e.y)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.halfTexelSize.value.copy(i.texelSize.value).multiplyScalar(.5)}},Upe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,Wpe=class extends xr{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Pt(null),opacity:new Pt(1)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Upe,vertexShader:Hm}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},Hpe=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,Gpe=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,t1={DEPTH:0,LUMA:1,COLOR:2},qpe={DISABLED:0,DEPTH:1,CUSTOM:2},Ype=class extends xr{constructor(e=new Ce,t=t1.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:dp.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Pt(null),depthBuffer:new Pt(null),predicationBuffer:new Pt(null),texelSize:new Pt(e)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Hpe,vertexShader:Gpe}),this.toneMapped=!1,this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=mu){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(e*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Xpe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Kpe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",uo={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},uM=class extends xr{constructor(e,t,i,r,a=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:dp.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Pt(null),depthBuffer:new Pt(null),resolution:new Pt(new Ce),texelSize:new Pt(new Ce),cameraNear:new Pt(.3),cameraFar:new Pt(1e3),aspect:new Pt(1),time:new Pt(0)},blending:Oa,depthWrite:!1,depthTest:!1,dithering:a}),this.toneMapped=!1,e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.adoptCameraSettings(r)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=mu){this.depthBuffer=e,this.depthPacking=t}setShaderParts(e){return this.fragmentShader=Xpe.replace(uo.FRAGMENT_HEAD,e.get(uo.FRAGMENT_HEAD)).replace(uo.FRAGMENT_MAIN_UV,e.get(uo.FRAGMENT_MAIN_UV)).replace(uo.FRAGMENT_MAIN_IMAGE,e.get(uo.FRAGMENT_MAIN_IMAGE)),this.vertexShader=Kpe.replace(uo.VERTEX_HEAD,e.get(uo.VERTEX_HEAD)).replace(uo.VERTEX_MAIN_SUPPORT,e.get(uo.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(let t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(let t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(let t of e)this.extensions[t]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof Bn?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){let i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return uo}},Zpe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Qpe=class extends xr{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:dp.replace(/\D+/g,"")},uniforms:{inputBuffer:new Pt(null),threshold:new Pt(0),smoothing:new Pt(1),range:new Pt(null)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Zpe,vertexShader:Hm}),this.toneMapped=!1,this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return this.luminanceRange!==null}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){e!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Jpe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,BV={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},efe=class extends xr{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Pt(e),inputBuffer:new Pt(null),strength:new Pt(1)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:Jpe,vertexShader:Hm}),this.toneMapped=!1,this.setColorChannel(LV.RED),this.setMaskFunction(BV.DISCARD)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Un&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return this.defines.INVERTED!==void 0}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},tfe=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,ife="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",rfe=class extends xr{constructor(e=new Ce,t=new Ce){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Pt(null),searchTexture:new Pt(null),areaTexture:new Pt(null),resolution:new Pt(t),texelSize:new Pt(e)},blending:Oa,depthWrite:!1,depthTest:!1,fragmentShader:tfe,vertexShader:ife}),this.toneMapped=!1}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){let t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){let t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){let t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){let i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},afe=new wd,Pu=null;function nfe(){if(Pu===null){let e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);Pu=new Mi,Pu.setAttribute!==void 0?(Pu.setAttribute("position",new ji(e,3)),Pu.setAttribute("uv",new ji(t,2))):(Pu.addAttribute("position",new ji(e,3)),Pu.addAttribute("uv",new ji(t,2)))}return Pu}var ss=class{constructor(e="Pass",t=new dl,i=afe){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){let t=this.getFullscreenMaterial();t!==null&&(t.needsUpdate=!0),this.rtt=!e}}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new ra(nfe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new dl),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=mu){}render(e,t,i,r,a){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof dl||t===this.renderer)continue;this[e].dispose()}}}},cM=class extends ss{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new Wpe,this.needsSwap=!1,this.renderTarget=e,e===void 0&&(this.renderTarget=new Mr(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,r,a){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){i!==void 0&&(this.renderTarget.texture.type=i,i!==Un?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":e.outputEncoding===Ji&&(this.renderTarget.texture.encoding=Ji))}},sfe=class extends ss{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,r,a){let n=e.state.buffers.stencil;n.setLocked(!1),n.setTest(!1)}},Sx=new Bi,BA=class extends ss{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,r,a){let n=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=n!==null,u=s>=0;l?(Sx.copy(e.getClearColor(Sx)),e.setClearColor(n,u?s:o)):u&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Sx,o):u&&e.setClearAlpha(o)}},Tu=-1,gs=class extends On{constructor(e,t=Tu,i=Tu,r=1){super(),this.resizable=e,this.base=new Ce(1,1),this.preferred=new Ce(t,i),this.target=this.preferred,this.s=r}get width(){let{base:e,preferred:t,scale:i}=this,r;return t.width!==Tu?r=t.width:t.height!==Tu?r=Math.round(t.height*(e.width/Math.max(e.height,1))):r=Math.round(e.width*i),r}set width(e){this.preferredWidth=e}get height(){let{base:e,preferred:t,scale:i}=this,r;return t.height!==Tu?r=t.height:t.width!==Tu?r=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):r=Math.round(e.height*i),r}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferred.setScalar(Tu),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.base.width}set baseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(e){this.base.width!==e&&(this.base.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(e){this.base.height!==e&&(this.base.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){(this.base.width!==e||this.base.height!==t)&&(this.base.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(e){this.preferred.width!==e&&(this.preferred.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferred.height}set preferredHeight(e){this.preferred.height!==e&&(this.preferred.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){(this.preferred.width!==e||this.preferred.height!==t)&&(this.preferred.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(e){this.base.set(e.getBaseWidth(),e.getBaseHeight()),this.preferred.set(e.getPreferredWidth(),e.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Tu}},Cx=!1,rI=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let i;if(t.material.flatShading)switch(t.material.side){case Rn:i=this.materialsFlatShadedDoubleSide;break;case tn:i=this.materialsFlatShadedBackSide;break;default:i=this.materialsFlatShaded;break}else switch(t.material.side){case Rn:i=this.materialsDoubleSide;break;case tn:i=this.materialsBackSide;break;default:i=this.materials;break}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=i[2]:t.isInstancedMesh?t.material=i[1]:t.material=i[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,e!==null){let t=this.materials=[e.clone(),e.clone(),e.clone()];for(let i of t)i.uniforms=Object.assign({},e.uniforms),i.side=Po;t[2].skinning=!0,this.materialsBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=tn,r}),this.materialsDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.side=Rn,r}),this.materialsFlatShaded=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=tn,r}),this.materialsFlatShadedDoubleSide=t.map(i=>{let r=i.clone();return r.uniforms=Object.assign({},e.uniforms),r.flatShading=!0,r.side=Rn,r})}}render(e,t,i){let r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Cx){let a=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(let n of a)n[0].material=n[1];this.meshCount!==a.size&&a.clear()}else{let a=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=a}e.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){let e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Cx}static set workaroundEnabled(e){Cx=e}},ofe=class extends ss{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new BA,this.overrideMaterialManager=i===null?null:new rI(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){let e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){let t=this.overrideMaterialManager;e!==null?t!==null?t.setMaterial(e):this.overrideMaterialManager=new rI(e):t!==null&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,r,a){let n=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,u=n.background,c=e.shadowMap.autoUpdate,d=this.renderToScreen?null:t;o!==null&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(n.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(d),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,n,s):e.render(n,s),s.layers.mask=l,n.background=u,e.shadowMap.autoUpdate=c}},aI=class extends ss{constructor(e,t,{resolutionScale:i=1,width:r=gs.AUTO_SIZE,height:a=gs.AUTO_SIZE,renderTarget:n}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new ofe(e,t,new wR({depthPacking:sR}));let s=this.renderPass;s.skipShadowMapUpdate=!0,s.ignoreBackground=!0;let o=s.getClearPass();o.overrideClearColor=new Bi(16777215),o.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Mr(1,1,{minFilter:Ar,magFilter:Ar,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let l=this.resolution=new gs(this,r,a,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,a){let n=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,n)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},vr={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},lfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",ufe="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",cfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",dfe="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",hfe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",pfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",ffe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",mfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",vfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",gfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",yfe="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",bfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",wfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",xfe="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Sfe="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Cfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",_fe="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Mfe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Efe=new Map([[vr.SKIP,null],[vr.ADD,lfe],[vr.ALPHA,ufe],[vr.AVERAGE,cfe],[vr.COLOR_BURN,dfe],[vr.COLOR_DODGE,hfe],[vr.DARKEN,pfe],[vr.DIFFERENCE,ffe],[vr.EXCLUSION,mfe],[vr.LIGHTEN,vfe],[vr.MULTIPLY,gfe],[vr.DIVIDE,yfe],[vr.NEGATION,bfe],[vr.NORMAL,wfe],[vr.OVERLAY,xfe],[vr.REFLECT,Sfe],[vr.SCREEN,Cfe],[vr.SOFT_LIGHT,_fe],[vr.SUBTRACT,Mfe]]),Afe=class extends On{constructor(e,t=1){super(),this.f=e,this.opacity=new Pt(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this.f}set blendFunction(e){this.f=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Efe.get(this.blendFunction)}},pl={NONE:0,DEPTH:1,CONVOLUTION:2},Sl=class extends On{constructor(e,t,{attributes:i=pl.NONE,blendFunction:r=vr.SCREEN,defines:a=new Map,uniforms:n=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=a,this.uniforms=n,this.extensions=s,this.blendMode=new Afe(r),this.blendMode.addEventListener("change",l=>this.setChanged())}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=mu){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(let e of Object.keys(this)){let t=this[e];if(t!==null&&typeof t=="object"&&typeof t.dispose=="function"){if(t instanceof dl||t===this.renderer)continue;this[e].dispose()}}}};function nI(e,t,i){for(let r of t){let a="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),n=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(let s of i.entries())s[1]!==null&&i.set(s[0],s[1].replace(n,a))}}function Pfe(e,t,i,r,a,n,s){let o=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),l=o.get("fragment")!==void 0&&/mainImage/.test(o.get("fragment")),u=o.get("fragment")!==void 0&&/mainUv/.test(o.get("fragment")),c=[],d=[],h=!1,p=!1;if(o.get("fragment")===void 0)console.error("Missing fragment shader",t);else if(u&&s&pl.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(!l&&!u)console.error("The fragment shader contains neither a mainImage nor a mainUv function",t);else{let f=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,v=uM.Section;if(u){let g=`	${e}MainUv(UV);
`;i.set(v.FRAGMENT_MAIN_UV,i.get(v.FRAGMENT_MAIN_UV)+g),h=!0}if(o.get("vertex")!==null&&/mainSupport/.test(o.get("vertex"))){let g=`	${e}MainSupport(`;g+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o.get("vertex"))?`vUv);
`:`);
`,i.set(v.VERTEX_MAIN_SUPPORT,i.get(v.VERTEX_MAIN_SUPPORT)+g),c=c.concat([...o.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(y=>y[1])),d=d.concat(c).concat([...o.get("vertex").matchAll(f)].map(y=>y[1]))}d=d.concat([...o.get("fragment").matchAll(f)].map(g=>g[1])),d=d.concat([...t.defines.keys()].map(g=>g.replace(/\([\w\s,]*\)/g,""))),d=d.concat([...t.uniforms.keys()]),t.uniforms.forEach((g,y)=>n.set(e+y.charAt(0).toUpperCase()+y.slice(1),g)),t.defines.forEach((g,y)=>a.set(e+y.charAt(0).toUpperCase()+y.slice(1),g)),nI(e,d,a),nI(e,d,o);let m=t.blendMode;if(r.set(m.blendFunction,m),l){let g=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,y=`${e}MainImage(color0, UV, `;s&pl.DEPTH&&g.test(o.get("fragment"))&&(y+="depth, ",p=!0),y+=`color1);
	`;let b=e+"BlendOpacity";n.set(b,m.opacity),y+=`color0 = blend${m.blendFunction}(color0, color1, ${b});

	`,i.set(v.FRAGMENT_MAIN_IMAGE,i.get(v.FRAGMENT_MAIN_IMAGE)+y),y=`uniform float ${b};

`,i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+y)}i.set(v.FRAGMENT_HEAD,i.get(v.FRAGMENT_HEAD)+o.get("fragment")+`
`),o.get("vertex")!==null&&i.set(v.VERTEX_HEAD,i.get(v.VERTEX_HEAD)+o.get("vertex")+`
`)}return{varyings:c,transformedUv:h,readDepth:p}}var Qy=class extends ss{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new uM(null,null,null,e),this.effects=t.sort((i,r)=>r.attributes-i.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){let t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}verifyResources(){let e=this.renderer.capabilities,t=Math.min(e.maxFragmentUniforms,e.maxVertexUniforms);this.uniformCount>t&&console.warn("The current rendering context doesn't support more than "+t+" uniforms, but "+this.uniformCount+" were defined"),t=e.maxVaryings,this.varyingCount>t&&console.warn("The current rendering context doesn't support more than "+t+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let e=uM.Section,t=new Map([[e.FRAGMENT_HEAD,""],[e.FRAGMENT_MAIN_UV,""],[e.FRAGMENT_MAIN_IMAGE,""],[e.VERTEX_HEAD,""],[e.VERTEX_MAIN_SUPPORT,""]]),i=new Map,r=new Map,a=new Map,n=new Set,s=0,o=0,l=0,u=!1,c=!1;for(let h of this.effects)if(h.blendMode.blendFunction===vr.SKIP)l|=h.getAttributes()&pl.DEPTH;else if(l&h.getAttributes()&pl.CONVOLUTION)console.error("Convolution effects cannot be merged",h);else{l|=h.getAttributes();let p="e"+s++,f=Pfe(p,h,t,i,r,a,l);if(o+=f.varyings.length,u=u||f.transformedUv,c=c||f.readDepth,h.extensions!==null)for(let v of h.extensions)n.add(v)}let d=/\bblend\b/g;for(let h of i.values()){let p=h.getShaderCode().replace(d,`blend${h.blendFunction}`);t.set(e.FRAGMENT_HEAD,t.get(e.FRAGMENT_HEAD)+p+`
`)}l&pl.DEPTH?(c&&t.set(e.FRAGMENT_MAIN_IMAGE,`float depth = readDepth(UV);

	`+t.get(e.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,u?(t.set(e.FRAGMENT_MAIN_UV,`vec2 transformedUv = vUv;
`+t.get(e.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach((h,p,f)=>f.set(p,h.trim().replace(/^#/,`
#`))),this.uniformCount=a.size,this.varyingCount=o,this.skipRendering=s===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(t).setExtensions(n).setUniforms(a).setDefines(r)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=mu){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(let i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,r,a){for(let n of this.effects)n.update(e,t,r);if(!this.skipRendering||this.renderToScreen){let n=this.fullscreenMaterial;n.inputBuffer=t.texture,n.time+=r,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(let i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(let r of this.effects)r.initialize(e,t,i),r.addEventListener("change",a=>this.handleEvent(a));this.updateMaterial(),this.verifyResources(),i!==void 0&&i!==Un&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let e of this.effects)e.dispose()}handleEvent(e){switch(e.type){case"change":this.recompile();break}}},Tfe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],zA=class extends ss{constructor({resolutionScale:e=.5,width:t=gs.AUTO_SIZE,height:i=gs.AUTO_SIZE,kernelSize:r=i1.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Mr(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let a=this.resolution=new gs(this,t,i,e);a.addEventListener("change",n=>this.setSize(a.baseWidth,a.baseHeight)),this.blurMaterial=new iI,this.ditheredBlurMaterial=new iI,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=r}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,r,a){let n=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=Tfe[this.kernelSize],c=this.blurMaterial,d=t,h,p;for(this.fullscreenMaterial=c,h=0,p=u.length-1;h<p;++h){let f=h&1?l:o;c.kernel=u[h],c.inputBuffer=d.texture,e.setRenderTarget(f),e.render(n,s),d=f}this.dithering&&(c=this.ditheredBlurMaterial,this.fullscreenMaterial=c),c.kernel=u[h],c.inputBuffer=d.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(n,s)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,a=i.height;this.renderTargetA.setSize(r,a),this.renderTargetB.setSize(r,a),this.blurMaterial.setSize(r,a),this.ditheredBlurMaterial.setSize(r,a)}initialize(e,t,i){i!==void 0&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Un?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):e.outputEncoding===Ji&&(this.renderTargetA.texture.encoding=Ji,this.renderTargetB.texture.encoding=Ji))}static get AUTO_SIZE(){return gs.AUTO_SIZE}},kfe=class extends ss{constructor({width:e=gs.AUTO_SIZE,height:t=gs.AUTO_SIZE,renderTarget:i,luminanceRange:r,colorOutput:a}={}){super("LuminancePass"),this.fullscreenMaterial=new Qpe(a,r),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new Mr(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let n=this.resolution=new gs(this,e,t);n.addEventListener("change",s=>this.setSize(n.baseWidth,n.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,r,a){let n=this.fullscreenMaterial;n.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){i!==void 0&&i!==Un&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ofe=class extends ss{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new BA(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,r,a){let n=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,d=1-c;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),s.stencil.setFunc(n.ALWAYS,c,4294967295),s.stencil.setClear(d),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(e,null):(u.render(e,t),u.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(n.EQUAL,1,4294967295),s.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),s.stencil.setLocked(!0)}},Gs=class extends ss{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.inputBufferUniform=null,this.setInput(t)}setInput(e){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let t=this.fullscreenMaterial.uniforms;t!==void 0&&t[e]!==void 0&&(this.inputBufferUniform=t[e])}}render(e,t,i,r,a){this.inputBufferUniform!==null&&t!==null&&(this.inputBufferUniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){i!==void 0&&i!==Un&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},_x=1/1e3,Dfe=1e3,Ife=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(e){return this.fixedDeltaEnabled=e,this}isAutoResetEnabled(e){return this.autoReset}setAutoResetEnabled(e){return typeof document<"u"&&document.hidden!==void 0&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=e),this}getDelta(){return this.delta*_x}getFixedDelta(){return this.fixedDelta*_x}setFixedDelta(e){return this.fixedDelta=e*Dfe,this}getElapsed(){return this.elapsed*_x}getTimescale(){return this.timescale}setTimescale(e){return this.timescale=e,this}update(e){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=e!==void 0?e:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(e){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},i1={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Lfe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,Bfe=class extends Sl{constructor({blendFunction:e=vr.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,resolutionScale:r=.5,intensity:a=1,width:n=gs.AUTO_SIZE,height:s=gs.AUTO_SIZE,kernelSize:o=i1.LARGE}={}){super("BloomEffect",Lfe,{blendFunction:e,uniforms:new Map([["map",new Pt(null)],["intensity",new Pt(a)]])}),this.renderTarget=new Mr(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new kfe({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothingFactor=i,this.blurPass=new zA({resolutionScale:r,width:n,height:s,kernelSize:o});let l=this.blurPass.getResolution();l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){let r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.luminancePass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),i!==void 0&&(this.renderTarget.texture.type=i,e.outputEncoding===Ji&&(this.renderTarget.texture.encoding=Ji))}},zfe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",Rfe=class extends Sl{constructor({blendFunction:e=vr.NORMAL,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect",zfe,{blendFunction:e,uniforms:new Map([["brightness",new Pt(t)],["contrast",new Pt(i)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(e){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(e){return this.contrast}setContrast(e){this.contrast=e}},Nfe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",Vfe=class extends Sl{constructor(e=vr.NORMAL){super("ColorAverageEffect",Nfe,{blendFunction:e})}},Ffe="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",jfe="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",$fe=class extends Sl{constructor({blendFunction:e=vr.NORMAL,offset:t=new Ce(.001,5e-4)}={}){super("ChromaticAberrationEffect",Ffe,{vertexShader:jfe,blendFunction:e,attributes:pl.CONVOLUTION,uniforms:new Map([["offset",new Pt(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},Ufe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,Wfe=class extends Sl{constructor(e,{blendFunction:t=vr.NORMAL,worldFocusDistance:i,worldFocusRange:r,focusDistance:a=0,focalLength:n=.1,focusRange:s=n,bokehScale:o=1,width:l=gs.AUTO_SIZE,height:u=gs.AUTO_SIZE}={}){super("DepthOfFieldEffect",Ufe,{blendFunction:t,attributes:pl.DEPTH,uniforms:new Map([["nearColorBuffer",new Pt(null)],["farColorBuffer",new Pt(null)],["nearCoCBuffer",new Pt(null)],["scale",new Pt(1)]])}),this.camera=e,this.renderTarget=new Mr(1,1,{minFilter:ir,magFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Gs(new Fpe(e));let c=this.cocMaterial;c.focusDistance=a,c.focusRange=s,i!==void 0&&(c.worldFocusDistance=i),r!==void 0&&(c.worldFocusRange=r),this.blurPass=new zA({kernelSize:i1.MEDIUM,width:l,height:u});let d=this.blurPass.getResolution();d.addEventListener("change",p=>this.setSize(d.getBaseWidth(),d.getBaseHeight())),this.maskPass=new Gs(new efe(this.renderTargetCoC.texture));let h=this.maskPass.fullscreenMaterial;h.maskFunction=BV.MULTIPLY,h.colorChannel=LV.GREEN,this.bokehNearBasePass=new Gs(new mg(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Gs(new mg(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Gs(new mg(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Gs(new mg(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=o}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){let t=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let i of t)i.fullscreenMaterial.setScale(e);this.maskPass.fullscreenMaterial.setStrength(e),this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){let t=this.camera,i=t.position.distanceTo(e);return lM(-i,t.near,t.far)}setDepthTexture(e,t=mu){this.circleOfConfusionMaterial.depthBuffer=e,this.circleOfConfusionMaterial.depthPacking=t}update(e,t,i){let r=this.renderTarget,a=this.renderTargetCoC,n=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(this.target!==null){let o=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=o}this.cocPass.render(e,null,a),this.blurPass.render(e,a,n),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,r),this.bokehFarFillPass.render(e,r,this.renderTargetFar),this.bokehNearBasePass.render(e,t,r),this.bokehNearFillPass.render(e,r,this.renderTargetNear)}setSize(e,t){let i=this.resolution;i.setBaseSize(e,t);let r=i.width,a=i.height,n=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];n.push(this.renderTargetCoC,this.renderTargetMasked),n.forEach(s=>s.setSize(e,t)),n=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],n.forEach(s=>s.setSize(r,a)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(s=>s.fullscreenMaterial.setSize(r,a))}initialize(e,t,i){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(r=>r.initialize(e,t,i)),this.blurPass.initialize(e,t,Un),i!==void 0&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,e.outputEncoding===Ji&&(this.renderTarget.texture.encoding=Ji,this.renderTargetNear.texture.encoding=Ji,this.renderTargetFar.texture.encoding=Ji,this.renderTargetMasked.texture.encoding=Ji))}};new V;new zt;var Hfe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",Gfe=class extends Sl{constructor({blendFunction:e=vr.NORMAL,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect",Hfe,{blendFunction:e,uniforms:new Map([["hue",new Pt(new V)],["saturation",new Pt(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){let e=this.uniforms.get("hue").value;return Math.acos((e.x*3-1)/2)}set hue(e){let t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};new Bi;var qfe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Yfe=class extends Sl{constructor({blendFunction:e=vr.SCREEN,premultiply:t=!1}={}){super("NoiseEffect",qfe,{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},Xfe="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",Kfe=class extends Sl{constructor(e=30){super("PixelationEffect",Xfe,{uniforms:new Map([["active",new Pt(!1)],["d",new Pt(new Ce)]])}),this.resolution=new Ce,this.d=0,this.granularity=e}get granularity(){return this.d}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this.d=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}};new V;new V;var sI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",oI="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Zfe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Qfe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",Rc={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},zV=class extends Sl{constructor({preset:e=Rc.MEDIUM,edgeDetectionMode:t=t1.COLOR,predicationMode:i=qpe.DISABLED}={}){super("SMAAEffect",Zfe,{vertexShader:Qfe,blendFunction:vr.NORMAL,attributes:pl.CONVOLUTION|pl.DEPTH,uniforms:new Map([["weightMap",new Pt(null)]])});let r,a;arguments.length>1&&(r=arguments[0],a=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(t=arguments[3])),this.renderTargetEdges=new Mr(1,1,{minFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new BA(!0,!1,!1),this.clearPass.overrideClearColor=new Bi(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Gs(new Ype),this.edgeDetectionMaterial.edgeDetectionMode=t,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new Gs(new rfe);let n=new VR;n.onLoad=()=>{let s=new aa(r);s.name="SMAA.Search",s.magFilter=Ar,s.minFilter=Ar,s.generateMipmaps=!1,s.needsUpdate=!0,s.flipY=!0,this.weightsMaterial.searchTexture=s;let o=new aa(a);o.name="SMAA.Area",o.magFilter=ir,o.minFilter=ir,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!1,this.weightsMaterial.areaTexture=o,this.dispatchEvent({type:"load"})},n.itemStart("search"),n.itemStart("area"),r!==void 0&&a!==void 0?(n.itemEnd("search"),n.itemEnd("area")):typeof Image<"u"&&(r=new Image,a=new Image,r.addEventListener("load",()=>n.itemEnd("search")),a.addEventListener("load",()=>n.itemEnd("area")),r.src=sI,a.src=oI),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){let t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case Rc.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Rc.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Rc.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case Rc.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break}}setDepthTexture(e,t=mu){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){let{searchTexture:e,areaTexture:t}=this.weightsMaterial;e!==null&&t!==null&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return sI}static get areaImageDataURL(){return oI}},Jfe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,vg={DEFAULT:0,ESKIL:1},eme=class extends Sl{constructor({blendFunction:e=vr.NORMAL,technique:t=vg.DEFAULT,eskil:i=!1,offset:r=.5,darkness:a=.5}={}){super("VignetteEffect",Jfe,{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new Pt(r)],["darkness",new Pt(a)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===vg.ESKIL}set eskil(e){this.technique=e?vg.ESKIL:vg.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},vu=class{constructor(e,t){this.enabled=!1,this.effect=new e(t),Object.defineProperty(this,"opacity",{enumerable:!0,set(i){this.effect.blendMode.opacity.value=i},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(i){this.effect.blendMode.setBlendFunction(Number(i))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=vr.NORMAL}},tme=class extends vu{constructor(){super(Bfe),this.blendFunction=vr.SCREEN}set intensity(e){this.effect.intensity=e}get intensity(){return this.effect.intensity}set luminanceThreshold(e){this.effect.luminanceMaterial.threshold=e}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(e){this.effect.luminanceMaterial.smoothing=e}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(e){this.effect.blurPass.scale=e}get blurScale(){return this.effect.blurPass.scale}set kernelSize(e){this.effect.blurPass.kernelSize=e}get kernelSize(){return this.effect.blurPass.kernelSize}},ime=class extends vu{constructor(){super(Rfe)}set contrast(e){this.effect.uniforms.get("contrast").value=e}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(e){this.effect.uniforms.get("brightness").value=e}get brightness(){return this.effect.uniforms.get("brightness").value}},rme=class extends vu{constructor(){super($fe),this.effect.offset=new Ce(.01,.01)}set offset(e){this.effect.offset.set(e[0]/1e3,e[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},ame=class extends vu{constructor(){super(Vfe)}},nme=class extends vu{constructor(){super(Gfe),this._hue=0}set hue(e){this._hue=e,this.effect.setHue(e)}get hue(){return this._hue}set saturation(e){this.effect.uniforms.get("saturation").value=e}get saturation(){return this.effect.uniforms.get("saturation").value}},sme=class extends vu{constructor(){super(Yfe),this.blendFunction=vr.OVERLAY}},ome=class extends vu{constructor(){super(eme)}get eskil(){return this.effect.eskil}set eskil(e){this.effect.eskil=e}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(e){this.effect.uniforms.get("darkness").value=e}get offset(){return this.effect.uniforms.get("offset").value}set offset(e){this.effect.uniforms.get("offset").value=e}},lme=class extends vu{constructor(e){super(Wfe)}set focalLength(e){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=e/2e3}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(e){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=this.isPerspectiveCamera?e/2e3:(e+992)/2e3}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(e){this.effect.bokehScale=e}setCamera(e){let t=!1;(e.isPerspectiveCamera&&this.isPerspectiveCamera===!1||!e.isPerspectiveCamera&&this.isPerspectiveCamera===!0)&&(t=!0),e.isPerspectiveCamera?(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e.perspCamera),this.isPerspectiveCamera=!0):(this.effect.circleOfConfusionMaterial.adoptCameraSettings(e),this.isPerspectiveCamera=!1),t&&this.effect.setChanged()}},ume=class extends vu{constructor(){super(Kfe)}get granularity(){return this.effect.getGranularity()}set granularity(e){this.effect.setGranularity(e)}},cme=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,dme=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,hme=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,pme=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,dM=class extends xr{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Pt(null)},blending:Oa,depthWrite:!1,depthTest:!1,vertexShader:hme,fragmentShader:pme})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}},fme=class extends ss{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new dM,this.resolutionVector=new Ce,this.resolveMaterial=new xr({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Pt(null),historyBuffer:new Pt(null),velocityBuffer:new Pt(null),depthBuffer:new Pt(null),resolution:new Pt(new Ce)},blending:Oa,depthWrite:!1,depthTest:!1,vertexShader:cme,fragmentShader:dme}),this.historyRenderTarget=new Mr(1024,1024,{minFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Mr(1024,1024,{minFilter:ir,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(e,t){this.historyRenderTarget.setSize(e,t),this.resultRenderTarget.setSize(e,t)}render(e,t){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=t.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=t.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=t.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(t.width,t.height),e.setRenderTarget(this.resultRenderTarget),e.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(this.historyRenderTarget),e.render(this.scene,this.camera);let i=this.renderToScreen?null:t;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,e.setRenderTarget(i),e.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},mme=class extends ss{constructor(e,t,i){super("TransmissionPass",void 0,t),this.MRTCompatible=!0,this.depthPass=new aI(e,t,{renderTarget:i.transmissionDepthTarget}),this.passThroughMaterial=new dM,this.splineScene=e,this.needsSwap=!1}updatePasses(e){this.passThroughMaterial=new dM,this.depthPass=new aI(this.splineScene,this.camera,{renderTarget:e.transmissionDepthTarget})}setCamera(e){this.camera=e}setScene(e){this.splineScene=e}render(e,t,i){let r=this.camera.layers.mask,a=e;a.setRenderTarget(a.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=t.texture[0],a.clear(),a.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(e,t,i),a.shadowMap.needsUpdate=!1,a.shadowMap.autoUpdate=!1;let n=this.renderToScreen?null:t;this.camera.layers.set(3),e.setRenderTarget(n),e.render(this.splineScene,this.camera),this.camera.layers.mask=r}},lI=new dl,vme=new xr({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),hM=class extends ss{constructor(e,t,i){super("OpaquePass",t??lI,i),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=e}setCamera(e){this.camera=e}setScene(e){this.scene=e??lI}getScene(){return this.scene}render(e,t){this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(r=>{r.layers.isEnabled(3)&&r instanceof ns&&(this.originalMaterials.set(r.id,r.material),r.material=vme)}),e.shadowMap.needsUpdate=!0,e.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let i=this.renderToScreen?null:t;e.setRenderTarget(i),this.clearColorOnly&&e.clear(!0,!1,!0),this.clear&&e.clear(),e.render(this.scene,this.camera),this.clearDepth&&e.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((r,a)=>{let n=this.scene.getObjectById(a);n&&(n.material=r)})}},gme=class{constructor(e,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:a=0}={}){this.renderer=e,this.helperStartIndex=0,this.copyPass=new cM,this.depthTexture=null,this.timer=new Ife,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(t,i,a,r,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(t,i,a,r,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(t,i,a,r,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){let t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){var t;if(this.renderer=e,e!==null){let i=e.getSize(new Ce),r=((t=e.getContext().getContextAttributes())==null?void 0:t.alpha)??!1,a=this.inputBuffer.texture[0].type;a===Un&&e.outputEncoding===Ji&&(this.inputBuffer.texture[0].encoding=Ji,this.outputBuffer.texture[0].encoding=Ji,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),e.autoClear=!1,this.setSize(i.width,i.height,!1);for(let n of this.passes)n.initialize(e,r,a)}}replaceRenderer(e,t=!0){let i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){let e=this.depthTexture=new qh(this._width,this._height);return this.inputBuffer.depthTexture=e,this.inputBuffer.stencilBuffer?(e.format=hd,e.type=Kc):e.type=Yl,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r,a,n){let s=this.renderer,o=s===null?new Ce:s.getDrawingBufferSize(new Ce),l={minFilter:ir,magFilter:ir,wrapS:Zr,wrapT:Zr,stencilBuffer:t,depthBuffer:e},u;return r>0?(u=new Mr(o.width,o.height,l),u.samples=r):(a?(u=new IG(o.width,o.height,2,l),u.texture[1].type=au):u=new Mr(o.width,o.height,l),u.depthTexture=new qh(2048,2048),u.depthTexture.type=Pa),i===Un&&s!==null&&s.outputEncoding===Ji&&(Array.isArray(u.texture)?u.texture.forEach(c=>c.encoding=Ji):u.texture.encoding=Ji),Array.isArray(u.texture)?u.texture.forEach((c,d)=>{c.name=`EffectComposer.Buffer ${a} ${d}`,c.generateMipmaps=!1}):(u.texture.name=`EffectComposer.Buffer ${a}`,u.texture.generateMipmaps=!1),u.name=n,u}addPass(e,t){var i;let r=this.passes,a=this.renderer,n=a.getDrawingBufferSize(new Ce),s=((i=a.getContext().getContextAttributes())==null?void 0:i.alpha)??!1,o;if(e.MRTCompatible&&(o=this.inputBuffer.texture[0].type),e.MRTCompatible||(o=this.inputBuffer.texture.type),e.setRenderer(a),e.setSize(n.width,n.height),e.initialize(a,s,o),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?r.splice(t,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}setHelperStartIndex(e){this.helperStartIndex=e}removePass(e){let t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){let r=(a,n)=>a||n.needsDepthTexture;t.reduce(r,!1)||e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null)}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){let e=this.passes;e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){let t=this.renderer,i=this.copyPass,r=this.inputBuffer,a=this.outputBuffer,n=this.inputBufferSingle,s=this.outputBufferSingle,o=!1,l,u,c,d;e===void 0&&(e=this.timer.update().getDelta());for(let h of this.passes)h.enabled&&(h.MRTCompatible?h.render(t,r,a,e,o):h.render(t,n,s,e,o),h.needsSwap&&(o&&(i.renderToScreen=h.renderToScreen,l=t.getContext(),u=t.state.buffers.stencil,u.setFunc(l.NOTEQUAL,1,4294967295),i.render(t,r,a,e,o),u.setFunc(l.EQUAL,1,4294967295)),c=r,d=n,r=a,n=s,a=c,s=d),h instanceof Ofe?o=!0:h instanceof sfe&&(o=!1))}setSize(e,t,i){let r=this.renderer;if(this._width=e,this._height=t,e===void 0||t===void 0){let n=r.getSize(new Ce);e=n.width,t=n.height}r.setSize(e,t,i);let a=r.getDrawingBufferSize(new Ce);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height),this.inputBufferSingle.setSize(a.width,a.height),this.outputBufferSingle.setSize(a.width,a.height);for(let n of this.passes)n.setSize(a.width,a.height)}reset(){let e=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(e)}dispose(){for(let e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},yme=new xr({name:"CombineMaterial",uniforms:{inputBufferA:new Pt(null),inputBufferB:new Pt(null)},blending:Oa,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),bme=class extends ss{constructor(e){super("HelperPass",void 0,e),this.MRTCompatible=!1,this.fullscreenMaterial=yme,this.helperPass=new hM(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new hM(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let t=new zV({preset:Rc.LOW,edgeDetectionMode:t1.COLOR});this.effectPass=new Qy(this.camera,t),this.rt=new Mr(10,10,{minFilter:ir,magFilter:ir,wrapS:Zr,wrapT:Zr,depthBuffer:!0})}setSize(e,t){this.rt.setSize(e,t),this.effectPass.setSize(e,t)}set sceneHelpers(e){this.helperPass.setScene(e)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(e){this.helperPassOnTop.setScene(e)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(e){this.helperPass.setCamera(e),this.helperPassOnTop.setCamera(e)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(e,t,i){this.rt.depthTexture=t.depthTexture;let r=e.getClearAlpha();e.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(e,this.rt),this.helperPassOnTop.render(e,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.rt,i),this.fullscreenMaterial.uniforms.inputBufferA.value=i.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=t.texture,e.setClearAlpha(r),e.setRenderTarget(null),e.clear(),e.render(this.scene,this.camera)}},wme=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,xme=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,Sme=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,Cme=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,_me=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Mme=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,rf=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],Eme=new xr({vertexShader:wme,fragmentShader:xme}),eh=new xr({vertexShader:_me,fragmentShader:Mme,uniforms:{texture_ao_lrez:new Pt(null),texture_depth_lrez:new Pt(null),texture_depth_hrez:new Pt(null),near:new Pt(null),far:new Pt(null)}}),Ame=class extends ss{constructor(e,t){super("AmbientOcclusionPass",void 0,t),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let i=1024,r=1024;this.gBuffer=new Mr(i,r,{type:Vm?au:Pa,depthTexture:new qh(i,r),minFilter:ir,magFilter:ir}),this.depthBufferHighRes=new Mr(i,r,{depthTexture:new qh(i,r)}),this.aoBuffer=new Mr(i,r,{minFilter:ir,magFilter:ir}),this.splineScene=e,this.splineCamera=t;let a=new Float32Array(rf.length*2);for(let s=0;s<rf.length;s++){let o=s*2;a[o+0]=rf[s][0],a[o+1]=rf[s][1]}this.blueNoiseInDiskTexture=new qs(a,rf.length,1,ay,Pa),this.blueNoiseInDiskTexture.wrapS=ql,this.blueNoiseInDiskTexture.wrapT=ql,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new xr({vertexShader:Sme,fragmentShader:Cme,uniforms:{near:new Pt(null),far:new Pt(null),fov:new Pt(null),proj_info:new Pt(new Wi),is_ortho:new Pt(!1),resolution:new Pt(new Ce),radius_of_influence:new Pt(8),radius_in_screen_space:new Pt(1),exponent:new Pt(1),ao_color:new Pt(new V),bias:new Pt(.5),texture_depth:new Pt(null),texture_normals:new Pt(null),texture_blue_noise:new Pt(null),texture_blue_noise_in_disk:new Pt(this.blueNoiseInDiskTexture),frame_index:new Pt(0),fog_enabled:new Pt(!1),fog_near:new Pt(1),fog_far:new Pt(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Mr(i,r,{minFilter:ir,magFilter:ir,wrapS:Zr,wrapT:Zr,depthBuffer:!1,type:Pa});let n=new zV({preset:Rc.ULTRA,edgeDetectionMode:t1.COLOR});this.effectPass=new Qy(this.camera,n)}initialize(e,t,i){super.initialize(e,t,i),this.effectPass.initialize(e,t,i)}setBlueNoiseTexture(e){this.hbaoMaterial.uniforms.texture_blue_noise.value=e}setSize(e,t){this._width=e,this._height=t,this.depthBufferHighRes.setSize(e,t);let i=this._runHalfRes?.5:1,r=e*i,a=t*i;this.gBuffer.setSize(r,a),this.aoBuffer.setSize(r,a),this.hbaoMaterial.uniforms.resolution.value.set(r,a),this.aaBuffer.setSize(r,a),this.effectPass.setSize(r,a)}get runHalfRes(){return this._runHalfRes}set runHalfRes(e){this._runHalfRes=e,this.setSize(this._width,this._height)}setCamera(e){this.splineCamera=e}setScene(e){this.splineScene=e}setDepthTexture(e){this.depthBufferHighRes.depthTexture=e,eh.uniforms.texture_depth_hrez.value=e,eh.needsUpdate=!0}render(e,t,i){this.splineScene.overrideMaterial=Eme;let r=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),e.setRenderTarget(this.gBuffer),e.clear(),e.render(this.splineScene,this.splineCamera),e.setRenderTarget(this.depthBufferHighRes),e.clear(),e.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=r,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let a=this.splineCamera.perspCamera.projectionMatrix.elements,n=2/a[0],s=2/a[5],o=-(1-a[8])/a[0],l=-(1+a[9])/a[5];this.hbaoMaterial.uniforms.proj_info.value.set(n,s,o,l);let u=this.splineCamera.perspCamera.fov*(Math.PI/180),c=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(u*.5)*2),d=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*c;this.hbaoMaterial.uniforms.radius_in_screen_space.value=d,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let a=this.splineCamera.orthoCamera.projectionMatrix.elements,n=2/a[0],s=2/a[5],o=-(1+a[12])/a[0],l=-(1-a[13])/a[5];this.hbaoMaterial.uniforms.proj_info.value.set(n,s,o,l);let u=.5*(this.hbaoMaterial.uniforms.resolution.value.y/s),c=this.hbaoMaterial.uniforms.radius_of_influence.value*u;this.hbaoMaterial.uniforms.radius_in_screen_space.value=c,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aoBuffer),e.clear(),e.render(this.scene,this.camera),this.fullscreenMaterial=eh,eh.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,eh.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,eh.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,e.setRenderTarget(e.aoRenderTarget),e.clear(),e.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,e.setRenderTarget(this.aaBuffer),e.clear(),e.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(e,this.aaBuffer,e.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},Pme=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Tme=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,kme=class extends Gs{constructor(){super(new xr({vertexShader:Pme,fragmentShader:Tme,uniforms:{tInput:new Pt(null),tMap:new Pt(null),uResolution:new Pt(new Ce),uSize:new Pt(new Ce),uCoords:new Pt(new Ce),uScale:new Pt(1),uSceneColor:new Pt(new Bi(16711680)),uDPR:new Pt(1),uCurrent:new Pt(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(e){this.uniforms.tMap.value=e}},Ome=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Dme=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,Ime=[],Lme=class extends Gs{constructor(){super(new xr({vertexShader:Ome,fragmentShader:Dme,uniforms:{toScene:new Pt(null),fromScene:new Pt(null),uResolution:new Pt(new Ce),uDPR:new Pt(1),mixRatio:new Pt(0),threshold:new Pt(.1),useTexture:new Pt(0),tMixTexture:{value:Ime[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(e){this.uniforms.fromScene.value=e}},Bme=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,zme=`
uniform sampler2D inputBuffer;
uniform sampler2D blurredInputBuffer;
uniform sampler2D overlay;
uniform float blurIntensity;

uniform vec2 uResolution;
uniform float uDPR;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( overlay, screenUv );
	vec4 texel2 = texture2D( inputBuffer, screenUv );
	vec4 texel3 = texture2D( blurredInputBuffer, screenUv );

	float blurMask2 = max(sign(texel1.a), 0.0) * blurIntensity;
    gl_FragColor = mix( mix(texel2, texel3, blurMask2), texel1, texel1.a );
}
`,Rme=class extends Gs{constructor(){super(new xr({vertexShader:Bme,fragmentShader:zme,uniforms:{inputBuffer:new Pt(null),blurredInputBuffer:new Pt(null),overlay:new Pt(null),uResolution:new Pt(new Ce),uDPR:new Pt(1),blurIntensity:new Pt(0)}})),this._blurEnabled=!1,this.blurTarget=new Mr(1,1,{minFilter:ir,magFilter:ir,wrapS:Zr,wrapT:Zr}),this.blurPass=new zA({width:window.innerWidth,height:window.innerHeight,kernelSize:i1.HUGE,resolutionScale:.25}),this.blurPass.renderToScreen=!1,this.uniforms.blurredInputBuffer.value=this.blurTarget.texture}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.overlay.value}set texture(e){this.uniforms.overlay.value=e}setResolution(e,t,i=1){this.uniforms.uResolution.value.set(e,t),this.uniforms.uDPR.value=i,this.blurPass.setSize(e,t),this.blurTarget.setSize(e,t),this.blurPass.setSize(e,t)}get uiCanvas(){return this._uiCanvas}set uiCanvas(e){this._uiCanvas=e,e.texture&&(this.uniforms.overlay.value=e.texture);let t=e.frame;if(t){let i=t.data.backgroundBlur,r=i.radius;this._blurEnabled=i.enabled,this.uniforms.blurIntensity.value=this._blurEnabled?1:0,this.blurPass.scale=r/3}}render(e,t,i,r,a){this._blurEnabled&&(this.blurPass.setDepthTexture(this.getDepthTexture()),this.blurPass.render(e,t,this.blurTarget,r,a)),super.render(e,t,i,r,a)}},Nme=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Vme=`
uniform sampler2D tInput;
uniform sampler2D tOverlayImage;
varying vec2 vUv;
uniform vec2 uResolution;
uniform vec2 uRightBottom;
uniform vec2 uImageSize;
uniform float uScale;
uniform float uDPR;

vec3 blendNormal(vec3 base, vec3 blend) {
	return blend;
}

vec3 blendNormal(vec3 base, vec3 blend, float opacity) {
	return (blendNormal(base, blend) * opacity + base * (1.0 - opacity));
}

vec4 drawFixedSizeImage(sampler2D image, vec2 screenUV, vec2 imageSize, vec2 imageCoords, vec2 screenSize, float dpr) {
	vec2 uv = (screenUV * screenSize * dpr - imageCoords) / (imageSize * dpr);
	if (uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0) {
		return vec4(0.0);
	}
	return texture2D(image, uv);
}

void main() {
    vec2 screenUV = gl_FragCoord.xy / (uResolution.xy * uDPR);
	vec2 imageCoords = vec2(uResolution.x * uDPR - uImageSize.x * uScale * uDPR - uRightBottom.x * uDPR, uRightBottom.y * uDPR);
    vec4 background = texture2D(tInput, screenUV);
    vec4 image = drawFixedSizeImage(tOverlayImage, screenUV, uImageSize * uScale, imageCoords, uResolution, uDPR);
    gl_FragColor = vec4(blendNormal(background.rgb, image.rgb, image.a), max(background.a, image.a));
}
`,Fme=class extends Gs{constructor(){super(new xr({vertexShader:Nme,fragmentShader:Vme,uniforms:{tInput:new Pt(null),tOverlayImage:new Pt(null),uResolution:new Pt(new Ce),uImageSize:new Pt(new Ce),uRightBottom:new Pt(new Ce(20,20)),uScale:new Pt(.25),uDPR:new Pt(1)}}),"tInput")}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tOverlayImage.value}set texture(e){this.uniforms.tOverlayImage.value=e,this.uniforms.uImageSize.value.set(e.image.width,e.image.height)}};function uI(e,t){return t&&t.enabled&&e.push(t.effect),e}var jme=e=>Object.values(vr).includes(e)?e:vr.NORMAL,$me=class extends On{constructor(e,t){super(),this._needsDOFResize=t,this.postprocessingState=Ry.defaultData,this._scene=new dl,this._camera=new Fn,this.effects=new Map,this.blueNoiseTexture=new qs,this._renderToScreen=!0,this._isUIOverlayEnabled=!1,this.clock=new MQ,this.renderer=e,this.debug=!1,this.effects.set("bloom",new tme),this.effects.set("chromaticAberration",new rme),this.effects.set("vignette",new ome),this.effects.set("noise",new sme),this.effects.set("colorAverage",new ame),this.effects.set("hueSaturation",new nme),this.effects.set("brightnessContrast",new ime),this.effects.set("depthOfField",new lme),this.effects.set("pixelation",new ume),this.effectComposer=new gme(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new hM(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new mme(this.scene,this.camera,this.renderer),this.aoPass=new Ame(this.scene,this.camera),this.taaPass=new fme,this.taaPass.renderToScreen=!1,this.helperPass=new bme(this.camera),this.helperPass.renderToScreen=!1,this.stylesOverlayPass=new kme,this.stylesOverlayPass.enabled=!1,this.uiOverlayPass=new Rme,this.uiOverlayPass.enabled=!1,this.logoOverlayPass=new Fme,this.logoOverlayPass.enabled=!1,this.sceneTransitionPass=new Lme,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(e){e!==void 0?(this.stylesOverlayPass.texture=e,this.stylesOverlayPass.enabled=!0):this.stylesOverlayPass.enabled=!1}get overlayTexture(){return this.stylesOverlayPass.texture}set sceneHelpers(e){this.helperPass.sceneHelpers=e}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(e){this.helperPass.sceneHelpersOnTop=e}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(e){this._scene=e,this.opaquePass.setScene(e),this.transmissionPass.setScene(e),this.aoPass.setScene(e)}get camera(){return this._camera}set camera(e){let t=this._camera!==e;this._camera=e,this.opaquePass.setCamera(e),this.transmissionPass.setCamera(e),t&&this.transmissionPass.updatePasses(this.renderer),this.aoPass.setCamera(e),this.helperPass.setCamera(e),this.effects.get("depthOfField").setCamera(e)}updateRenderToScreen(){let e=!1;for(let t=this.effectComposer.passes.length-1;t>=0;t--){let i=this.effectComposer.passes[t];if(i.enabled===!0&&!e&&this._renderToScreen){i.renderToScreen=!0,e=!0;continue}i.renderToScreen=!1}}get isUIOverlayEnabled(){return this._isUIOverlayEnabled}disableUIOverlay(){this._isUIOverlayEnabled=!1}enableUIOverlay(){this._isUIOverlayEnabled=!0}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(e){this.blueNoiseTexture=new qs(e,128,128),this.blueNoiseTexture.wrapS=ql,this.blueNoiseTexture.wrapT=ql,this.blueNoiseTexture.minFilter=Ar,this.blueNoiseTexture.magFilter=Ar,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(e,t,i,r,a,n,s,o){this.aoPass.enabled=e,this.aoPass.radius=t,this.aoPass.bias=i,this.aoPass.aoColor=r,this.aoPass.fogEnabled=a,this.aoPass.fogNear=n,this.aoPass.fogFar=s,this.aoPass.runHalfRes!==!o&&(this.aoPass.runHalfRes=!o)}setTransmissionPassEnabled(e){this.transmissionPass.enabled=e,this.opaquePass.hasTransmissionPass=e}_initPasses(){var e,t,i;if((e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(uI,[]);r.length>0&&(this.uvEffectPass=new Qy(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let a=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("depthOfField"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(uI,[]);if(a.length>0&&(this.effectPass=new Qy(this.camera,...a),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass),this._needsDOFResize&&((i=this.effects.get("depthOfField"))==null?void 0:i.enabled)&&window!==void 0)){let n=this.renderer.viewportWidth,s=this.renderer.viewportHeight;this.renderer.setSize(n-1,s-1),this.renderer.setSize(n,s)}}this.effectComposer.addPass(this.stylesOverlayPass),this.effectComposer.addPass(this.uiOverlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass),this.effectComposer.addPass(this.logoOverlayPass)}_initCopyPass(){if(this._savePass)return;let e=new Ce;this.renderer.getDrawingBufferSize(e),this._rt=new Mr(e.x,e.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:ql,wrapT:ql}),this._rt.samples=0,this._savePass=new cM(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(e){this._rt=e,this._savePass=new cM(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(e){if(this._renderToScreen===e)return;let t=this.effectComposer;!t||(e===!0?t.removePass(this._savePass):t.addPass(this._savePass),this._renderToScreen=e,this.updateRenderToScreen())}set sceneTransitionFromTexture(e){e!==this.sceneTransitionPass.texture&&(e!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=e)}setWatermark(e){this.logoOverlayPass.enabled=e!==null,e&&(this.logoOverlayPass.texture=e)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(e){let{enabled:t,...i}=e,r=!1;t!==this.postprocessingState.enabled&&(r=!0);for(let a of Object.entries(i)){let n=a[1],s=this.effects.get(a[0]);if(s){s.enabled!==n.enabled&&(r=!0),s.enabled=n.enabled;for(let[o,l]of Object.entries(n))o==="blendFunction"?s.blendFunction=jme(l):s[o]=l}}this.postprocessingState=e,r&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(e,t,i,r){e instanceof Wi?(this.effectComposer.inputBuffer.scissor.set(e.x,e.y,e.z,e.w),this.effectComposer.outputBuffer.scissor.set(e.x,e.y,e.z,e.w)):(this.effectComposer.inputBuffer.scissor.set(e,t,i,r),this.effectComposer.outputBuffer.scissor.set(e,t,i,r));let a=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(a),this.effectComposer.outputBuffer.scissor.multiplyScalar(a),this.renderer.setScissor(e,t,i,r)}setScissorTest(e){this.effectComposer.inputBuffer.scissorTest=e,this.effectComposer.outputBuffer.scissorTest=e,this.renderer.setScissorTest(e)}setViewport(e,t,i,r){e instanceof Wi?(this.effectComposer.inputBuffer.viewport.copy(e),this.effectComposer.outputBuffer.viewport.copy(e)):(this.effectComposer.inputBuffer.viewport.set(e,t,i,r),this.effectComposer.outputBuffer.viewport.set(e,t,i,r))}resize(e,t,i){if(this.effectComposer.setSize(e,t,i),this._rt){let r=this.renderer.getPixelRatio();this._rt.setSize(e*r,t*r)}}dispose(){var e,t;(e=this.uvEffectPass)==null||e.dispose(),(t=this.effectPass)==null||t.dispose(),this.effectComposer.dispose()}},Ume=e=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${e};
const int gShadowSamples = ${e};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,Wme=tr.lights_fragment_begin,Hme=tr.shadowmask_pars_fragment,cI=null,Gme=e=>{switch(e){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},qme=(e="medium")=>{if(cI===e)return!1;cI=e;let t=Gme(e);tr.shadowmap_pars_fragment=Ume(t);let i=Wme.slice();i=i.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),i=i.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),tr.lights_fragment_begin=i;let r=Hme.slice();return r=r.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),tr.shadowmask_pars_fragment=r,!0},Yme=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;
#include <skinning_pars_vertex>

void main()
{
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
vec3 transformed = vec3(position);
#include <skinning_vertex>

vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(transformed, 1.0));
}
`,Xme=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,Mx=new xr({vertexShader:Yme,fragmentShader:Xme,uniforms:{depthContrast:{value:1}}}),dI=new aa,hI=new Ce,Kme=class extends xR{constructor(e){super(e),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new Ce,this.dummyCamera=new Fn,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(a=!0,n=!0,s=!0)=>{let o=this.getContext(),l=0;a&&(l|=o.COLOR_BUFFER_BIT),n&&(l|=o.DEPTH_BUFFER_BIT),s&&(l|=o.STENCIL_BUFFER_BIT),o.clear(l),o.clearBufferfv(o.COLOR,1,[0,0,0,1])},this.pipeline=new $me(this,e?.needsDOFResize??!1),this.autoClear=!1;let t=this.setPixelRatio.bind(this),i=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=SE,this.dummyCamera.matrixAutoUpdate=!1,this.domElement.removeAttribute("data-engine");let r=this.getContext();if(r&&"drawingBufferColorSpace"in r)try{r.drawingBufferColorSpace="display-p3"}catch(a){console.warn(a)}this.setPixelRatio=a=>{this._pixelRatio!==a&&(this._pixelRatio=a,t(a))},this.setSize=(a,n,s=!0)=>{var o,l;(this.viewportWidth!==a||this.viewportHeight!==n)&&(this.viewportWidth=a,this.viewportHeight=n,i(a,n,s),(o=this.normalRenderTarget)==null||o.setSize(a*this._pixelRatio,n*this._pixelRatio),this._resizeTransmission(a,n),(l=this.transmissionDepthTarget)==null||l.setSize(a*this._pixelRatio/2,n*this._pixelRatio/2),this.pipeline.resize(a,n,s))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new Mr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:ir,magFilter:ir,wrapS:Zr,wrapT:Zr,depthBuffer:!1}))}_resizeTransmission(e,t){var i,r;(i=this.transmissionRenderTarget)==null||i.setSize(e*this._pixelRatio/(this.hdTransmission?1:2),t*this._pixelRatio/(this.hdTransmission?1:2)),(r=this.aoRenderTarget)==null||r.setSize(e*this._pixelRatio/1,t*this._pixelRatio/1)}get hdTransmission(){return Ri.transmissionLod.value===1}set hdTransmission(e){Ri.transmissionLod.value=e===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Mr(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:Hh,magFilter:ir,wrapS:Zr,wrapT:Zr,depthBuffer:!1}),this.transmissionDepthTarget=new Mr(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:Ar,magFilter:Ar,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Mr(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:Ar,magFilter:Ar,type:Pa,depthTexture:new qh(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(e,t,i){this.normalRenderTarget&&(this.setClearColor(0),i.layers.enable(8),i.layers.disable(0),i.layers.disable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),i instanceof Fn?Mx.uniforms.depthContrast.value=(i.far-i.near)/1e4:Mx.uniforms.depthContrast.value=1,t.overrideMaterial=Mx,this.render(t,i),this.setClearColor(t.bgColor,t.bgColor.a),this.setRenderTarget(null),t.overrideMaterial=e.wireframeState?bM:null,i.layers.enable(0),i.layers.enable(3),t.traverseEntity(r=>{r.layers.isEnabled(8)&&(r.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(e,t,i=1){this.dummyCamera.updateCameraState(t.dataPatched),this.dummyCamera.matrix.copy(t.matrixWorld);let r=t.height,a=t.width,n=this.viewportWidth/this.viewportHeight;a<r?a=r*n:r=a/n,this.dummyCamera.setViewplaneSize(a,r);for(let s=0;s<i;s++)this.renderSplineScene(e,this.dummyCamera)}renderSplineScene(e,t,{sceneHelpers:i=this.sceneHelpers,sceneHelpersOnTop:r=this.sceneHelpersOnTop,overrideTransmission:a=void 0,overrideNormal:n=void 0}={}){var s;let o=e instanceof WA?e.activePage:e,l=o.visible;o.visible=!0;let u=o.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(t)),this.setClearColor(o.bgColor,o.bgColor.a),o.penumbraSizeArray.forEach((p,f)=>{Ri.penumbraSize.value[f]=p}),Ri.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Ri.resolution.value.set(this.resolution.x,this.resolution.y):Ri.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),n!==void 0?(Ri.normalRenderTarget.value=n,Ri.normalRenderTargetDepth.value=dI):u.needsNormal()&&(this.createNormalRenderTarget(),Ri.normalRenderTarget.value=this.normalRenderTarget.texture,Ri.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(u,o,t));let c=o.data.ao,d=c.occlusion;if(d&&(this.createAORenderTarget(),Ri.aoRenderTarget.value=this.aoRenderTarget.texture),Ri.aoEnabled.value=d,this.pipeline.setAmbientOcclusionParams(c.occlusion,c.radius,c.bias,o.aoColor,o.fog!==null,o.backupFog.near,o.backupFog.far,c.aoFullRes&&!Vm),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture),this.pipeline.isUIOverlayEnabled&&((s=o.uiCanvas)==null?void 0:s.enabled)&&o.uiCanvas.texture&&o.uiCanvas.texture.image.width>0){let p=this.getSize(hI),f=this.getPixelRatio();(o.uiCanvas.width!==this.viewportWidth||o.uiCanvas.height!==this.viewportHeight||o.uiCanvas.dpr!==f)&&o.uiCanvas.applySize({width:this.viewportWidth,height:this.viewportHeight},f),o.uiCanvas.render(this),this.pipeline.uiOverlayPass.uiCanvas=o.uiCanvas,this.pipeline.uiOverlayPass.enabled=!0,this.pipeline.uiOverlayPass.setResolution(p.x,p.y,f),this.pipeline.updateRenderToScreen()}else this.pipeline.uiOverlayPass.enabled=!1,this.pipeline.updateRenderToScreen();if(this.pipeline.logoOverlayPass.enabled){let p=this.getSize(hI),f=this.getPixelRatio();this.pipeline.logoOverlayPass.uniforms.uResolution.value.set(p.x,p.y),this.pipeline.logoOverlayPass.uniforms.uDPR.value=f}let h=!1;if(a!==void 0)Ri.transmissionRenderTarget.value=a,Ri.transmissionRenderTargetDepth.value=dI,this.pipeline.setTransmissionPassEnabled(!1);else{let p=u.needsTransmission();p&&(this.transmissionRenderTarget===void 0&&(h=!0),this.createTransmissionRenderTarget(),Ri.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Ri.aspectRatio.value=Fde(this.viewportWidth,this.viewportHeight),Ri.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(p)}t.layers.enable(3),t.layers.enable(8),this.pipeline.sceneHelpers=i,this.pipeline.sceneHelpersOnTop=r,this.pipeline.scene=o,this.pipeline.camera=t,h&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==o.postprocessing&&(this.pipeline.updatePostprocessing(o.postprocessing),!i&&!r&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),o.overrideMaterial=u.wireframeState?bM:null,this.pipeline.render(),Ri.frameIndex.value=(Ri.frameIndex.value+1)%16,t instanceof Fn&&t.copyHistory(),o.visible=l}renderFromSceneForSceneTransitionPass(e,t,i){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(e,t),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=i,this.sceneTransitionTimeRemaining=i,this.pipeline.renderToScreen=!0;let r=this.pipeline.sceneTransitionPass.uniforms;r.uDPR.value=window.devicePixelRatio,r.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var e,t,i,r,a,n;this._superDispose(),this.pipeline.dispose(),(e=this.aoRenderTarget)==null||e.dispose(),(t=this.transmissionRenderTarget)==null||t.dispose(),(i=this.transmissionDepthTarget)==null||i.dispose(),(r=this.normalRenderTarget)==null||r.dispose(),(n=(a=this.normalRenderTarget)==null?void 0:a.depthTexture)==null||n.dispose()}},RV=class extends $m(jQ){constructor(e,t=15,i=10066329){super(e,t,i),this.object=e,this.added=!1,this.name=`DirectionalLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,RV.geometryHelper,e,t)}},NV=class extends $m(FQ){constructor(e,t=15,i=6710886){super(e,t,i),this.object=e,this.name=`PointLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,NV.geometryHelper,e,t)}},pM=class extends $m(VQ){constructor(e,t=6710886){super(e,t),this.object=e,this.name=`SpotLightHelper: ${e.uuid}`}raycast(e,t){Um(this.object,pM.geometryHelper,e,t)}update(){if(this.object!==void 0){let e=pM._vector,t=this.object.distance?this.object.distance:1e3,i=t*Math.tan(this.object.angle);this.cone.scale.set(i,i,t),e.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(e);let r=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let a=0,n=this.cone.material.length;a<n;a++)this.cone.material[a].color.set(r);else this.cone.material.color.set(r)}}},VV=pM;VV._vector=new V;var FV=class extends Kl{constructor(){super(),this.caretIndex=0,this._caretVisibleAlpha=1,this._selectionVisibleAlpha=.3,this.current={start:0,end:void 0},this.matrixAutoUpdate=!1,this.caretMesh=new ra(new su(1,1),new nu({transparent:!0,opacity:0,side:Rn})),this.add(this.caretMesh),this.selectionMesh=new ra(new su(1,1),new nu({color:2857471,transparent:!0,depthTest:!1,depthWrite:!1,opacity:0,side:Rn})),this.add(this.selectionMesh),this.hide()}get caretHeight(){var e;return((e=this.object)==null?void 0:e.AD)??0}show(e){this.visible=!0,this.object=e,this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.y=-this.caretHeight*.5,this.setCaretPosition(this.caretIndex),this.update()}hide(){this.visible=!1}update(){if(this.object===void 0)return;this.updateHelperMatrix();let{depth:e}=this.object.geometry.userData.parameters;this.caretMesh.position.z=e,this.selectionMesh.position.z=e}updateHelperMatrix(){if(this.object===void 0)return;let e=this.object,t=e.parent;t!==null&&t.updateWorldMatrix(!0,!1),e.matrixAutoUpdate&&e.updateMatrix(),t!==null?(this.matrixWorld.multiplyMatrices(t.matrixWorld,e.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,e.matrix)):this.matrixWorld.multiplyMatrices(e.hiddenMatrix,e.matrix),this.matrix.copy(this.matrixWorld);for(let i of this.children)i.matrixWorld.copy(this.matrixWorld);e.updateWorldMatrix(!0,!0)}setCaretColor(e){let t=this.caretMesh.material;t.color.setRGB(e.r,e.g,e.b);let i=this._caretVisibleAlpha===t.opacity;this._caretVisibleAlpha=e.a,i&&(t.opacity=this._caretVisibleAlpha)}setSelectionColor(e){this.selectionMesh.material.color.setRGB(e.r,e.g,e.b)}setCaretPosition(e,t={}){if(this.object===void 0)return;this.caretIndex=e;let i=this.object.wrappedText,[r,a]=Jy(i,e),[n,s]=e>0?Jy(i,e-1):[null,null];(e>0&&i.length?i[n].charAt(s):null)===`
`&&(r++,a=0),this.current.start=e,this.current.end=void 0;let[o,l]=Ex(this.object,r,a),{AD:u,descender:c}=this.object,d=c+u*.5,{width:h,height:p,depth:f}=this.object.geometry.userData.parameters,v=typeof h=="string"?0:h,m=typeof p=="string"?0:p;this.caretMesh.scale.set(1,this.caretHeight,1),this.caretMesh.position.set(o-v*.5,l+d+m*.5,f),this.hideSelectionMesh(),this.showCaretMesh()}setSelection(e,t){if(this.object===void 0)return;let i=this.object.wrappedText;this.current.start=e,this.current.end=t;let r=[],a=[],n=Zme(i,e,t),{lineHeight:s,AD:o,descender:l}=this.object,u=l+o*.5-s*.5;for(let[m,g,y]of n)if(g!==y){let[b,x]=Ex(this.object,m,g),[S,w]=Ex(this.object,m,y);x+=u,w+=u,w+=s;let E=r.length/3;r.push(b,x,0),r.push(S,x,0),r.push(S,w,0),r.push(b,w,0),a.push(E+0,E+1,E+2),a.push(E+2,E+3,E+0)}let c=new Mi;c.setIndex(a),c.setAttribute("position",new ri(r,3));let{width:d,height:h,depth:p}=this.object.geometry.userData.parameters,f=typeof d=="string"?0:d,v=typeof h=="string"?0:h;this.selectionMesh.geometry.dispose(),this.selectionMesh.geometry=c,this.selectionMesh.position.x=-f*.5,this.selectionMesh.position.y=v*.5,this.selectionMesh.position.z=p,this.showSelectionMesh(),this.hideCaretMesh()}getSelectionFromPosition(e,t,i="previous"){if(this.object===void 0||this.object.font===void 0)return;let r=this.object.wrappedText,a=r.length,n=this.object.lineHeight,s=a*n,{height:o,verticalAlign:l}=this.object.geometry.userData.parameters,u=typeof o=="string"?0:o,c=0;l===3?c=u-s:l===2&&(c=u*.5-s*.5);let d=Math.min(Math.floor(Math.max(Math.min(-t-c,s),0)/n),a-1),h=this.object.charCoords[d],p=this.object.charWidths[d],f=0,v=!1;if(i==="previous"){for(let m=0;m<h.length;m++)if(h[m][0]+p[m]*.5-e>0){f=m,v=!0;break}}else if(i==="closest"){let m=1/0;for(let g=0;g<h.length;g++){let y=h[g][0]+p[g]*.5,b=Math.abs(y-e);b<m&&(m=b,f=g,v=!0)}}else for(let m=0;m<h.length;m++){let g=h[m][0],y=h[m][0]+p[m];if(e>=g&&e<y){f=m,v=!0;break}}return v||(f=h.length),{index:this.getGlobalIndexFromLineAndCharIndexes(r,d,f),lineIndex:d,characterIndex:f}}getGlobalIndexFromLineAndCharIndexes(e,t,i){return e.slice(0,t).reduce((r,a)=>r+=a.length,0)+i}showSelectionMesh(){this.selectionMesh.material.opacity=this._selectionVisibleAlpha}hideSelectionMesh(){this.selectionMesh.material.opacity=0}showCaretMesh(){this.caretMesh.material.opacity=this._caretVisibleAlpha}hideCaretMesh(){this.caretMesh.material.opacity=0}};function Ex(e,t,i){let{charCoords:r,charWidths:a,initialOffsetY:n,lineHeight:s}=e;if(r[t]&&r[t].length===0||r.length===0){let c=0,{horizontalAlign:d}=e.data.geometry,h=e.wrappedText,{width:p}=e.geometry.userData.parameters;return h.length===1&&h[0].length===0&&(d===3?c=p*.5:d===2&&(c=p)),[c,n-s*t]}let o=r[t];if(o===void 0||o.length===0)return[0,0];let[l,u]=o[Math.min(i,o.length-1)];return i>=o.length&&(l+=a[t][i-1]),[l,u]}function Jy(e,t){var i;let r=0;for(let a=0;a<e.length;a++){let n=e[a],s=t-r;if(s<=n.length)return[a,s];r+=n.length}return[Math.max(0,e.length-1),((i=e[e.length-1])==null?void 0:i.length)??0]}function Zme(e,t,i){let[r,a]=Jy(e,t),[n,s]=Jy(e,i),o=[];a>=e[r].length&&(r++,a=0);for(let l=r;l<=n;l++){let u=e[l],c=l===r?a:0,d=l===n?s:u.length;o.push([l,c,d])}return o}function Qme(e,t){let i=wn.fromHex(3223857),r=.8;for(let a of e.layers){if(a.data.type==="light"||a.data.type==="displace"||a.data.type==="fresnel"||a.data.type==="matcap"||a.data.type==="texture"||a.data.type==="toon"||a.data.type==="outline"||a.data.type==="transmission"||a.data.type==="noise")continue;let n=typeof a.data.alpha=="string"?Number(t.getVariable(a.data.alpha)):a.data.alpha;if(a.data.type==="color"&&n>.3){i=Jme(a.data.color,t),r=n;break}else if((a.data.type==="depth"||a.data.type==="gradient")&&n>.3){let s=eve(a.data);i={r:s[0],g:s[1],b:s[2]},r=typeof a.data.alpha=="string"?1:a.data.alpha;break}}return{...i,a:r}}function Jme(e,t){return typeof e=="string"?t.data.colors[e]:e}function eve(e){return e.colors[0]}function tve(e,t){e.shadow.camera.right=t/2,e.shadow.camera.left=-t/2,e.shadow.camera.top=t/2,e.shadow.camera.bottom=-t/2,e.shadow.needsUpdate=!0}var jV=class extends LA(_Q,RV){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.top=1250,r.bottom=-1250,r.right=1250,r.left=-1250,r.near=-1e4,r.far=2500;let a=new vy(this.shadow.camera);a.visible=!1,this.gizmos.shadowmap=a}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof vy&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t);let i=e.depth!==void 0&&e.depth!==this.shadow.camera.far||e.size!==void 0&&e.size/2!==this.shadow.camera.right;e.size!==void 0&&tve(this,e.size),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),i&&this.update()}},pI=new V,fI=new V,mI=new Ui,$V=class extends LA(wQ,VV){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=li.RAD2DEG*2*this.angle,r.aspect=1,r.near=100,r.far=2500;let a=new vy(this.shadow.camera);a.visible=!1,this.gizmos.shadowmap=a,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let e in this.gizmos){let t=this.gizmos[e];t instanceof vy&&t.update()}}updateMatrixWorld(e){super.updateMatrixWorld(e),fI.setFromMatrixPosition(this.matrixWorld),mI.setFromRotationMatrix(this.matrixWorld),pI.copy(this.up).applyQuaternion(mI).negate().multiplyScalar(this.distance),this.target.position.copy(fI).add(pI),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.angle!==void 0&&(this.angle=e.angle),e.penumbra!==void 0&&(this.penumbra=e.penumbra),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.penumbraSize!==void 0&&t.scene.markPenumbraSizeDirty(),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}};function ive(e){let t=(e[0][0]+e[1][1])/2,i=(e[0][0]-e[1][1])/2,r=(e[1][0]+e[0][1])/2,a=(e[1][0]-e[0][1])/2,n=Math.sqrt(t*t+a*a),s=Math.sqrt(i*i+r*r),o=n+s,l=n-s,u=Math.atan2(r,i),c=Math.atan2(a,t),d=(c-u)/2,h=(c+u)/2,p=[[Math.cos(h),Math.sin(h)],[-Math.sin(h),Math.cos(h)]],f=[[o,0],[0,l]],v=[[Math.cos(d),Math.sin(d)],[-Math.sin(d),Math.cos(d)]];return p[0][0]*=-1,p[0][1]*=-1,v[0][0]*=-1,v[1][0]*=-1,[p,f,v]}function Zg(e,t){return[[e[0][0]*t[0][0]+e[0][1]*t[1][0],e[0][0]*t[0][1]+e[0][1]*t[1][1]],[e[1][0]*t[0][0]+e[1][1]*t[1][0],e[1][0]*t[0][1]+e[1][1]*t[1][1]]]}function vI(e){return[[e[0][0],e[1][0]],[e[0][1],e[1][1]]]}function rve(e){let[t,i,r]=ive(e),a=Zg(t,vI(r)),n=Zg(Zg(r,i),vI(r)),s=Math.atan2(a[1][0],a[0][0]),o=[n[0][0],n[1][1]],l=[n[0][1]/n[1][1],n[1][0]/n[0][0]];return{rotation:s,scale:o,shear:l}}function ave({rotation:e,scale:t,shear:i}){let r=Math.cos(e),a=Math.sin(e),n=[[r,-a],[a,r]],s=[[t[0],i[0]*t[1]],[i[1]*t[0],t[1]]],o=Zg(n,s);return[o[0][0],o[1][0],o[0][1],o[1][1]]}var yr;(e=>{function t(){return[1,0,0,0,1,0,0,0,1]}e.identity=t;function i(w,E=e.identity()){for(let M=0,P=w.length;M<P;M++)E[M]=w[M];return E}e.copy=i;function r(w,E,M,P,A,k){return e.setAbcdef(e.identity(),w,E,M,P,A,k)}e.create=r;function a(w,E,M,P,A,k,I){return w[0]=E,w[1]=P,w[2]=k,w[3]=M,w[4]=A,w[5]=I,w}e.setAbcdef=a;function n(w,E){let[M,P,A,k,I,O]=o(w),[D,F,U,z,B,W]=o(E),R=D*M+F*A,$=D*P+F*k,q=U*M+z*A,Z=U*P+z*k,G=B*M+W*A+I,X=B*P+W*k+O;return e.create(R,$,q,Z,G,X)}e.append=n;function s(w,E){let[M,P,A,k,I,O]=o(w),[D,F,U,z,B,W]=o(E),R=M,$=P,q=A,Z=k;(D!==1||F!==0||U!==0||z!==1)&&(R=M*D+P*U,$=M*F+P*z,q=A*D+k*U,Z=A*F+k*z);let G=I*D+O*U+B,X=I*F+O*z+W;return e.create(R,$,q,Z,G,X)}e.prepend=s;function o(w){return[w[0],w[3],w[1],w[4],w[2],w[5]]}e.getAbcdef=o;function l(w){let[E,M,P,A,k,I]=e.getAbcdef(w),O=E*A-M*P,D=A/O,F=-M/O,U=-P/O,z=E/O,B=(P*I-A*k)/O,W=-(E*I-M*k)/O;return e.create(D,F,U,z,B,W)}e.invert=l;function u([w,E],M){let[P,A,k,I,O,D]=e.getAbcdef(M);return[P*w+k*E+O,A*w+I*E+D]}e.apply=u;function c(w,E){let[M,P,A,k,I,O]=e.getAbcdef(E),D=1/(M*k+A*-P),[F,U]=w;return[k*D*F+-A*D*U+(O*A-I*k)*D,M*D*U+-P*D*F+(-O*M+I*P)*D]}e.applyInverse=c;function d(w,E,M=E){let[P,A,k,I,O,D]=e.getAbcdef(w);return e.setAbcdef(w,P*E,A*M,k*E,I*M,O*E,D*M),w}e.scale=d;function h(w,E){let M=Math.cos(E),P=Math.sin(E),[A,k,I,O,D,F]=e.getAbcdef(w);return e.setAbcdef(w,A*M-k*P,A*P+k*M,I*M-O*P,I*P+O*M,D*M-F*P,D*P+F*M),w}e.rotate=h;function p(w,E,M){let[P,A]=M,k=e.translate(w,-P,-A);return k=e.rotate(k,E),k=e.translate(k,P,A),k}e.rotateAround=p;function f(w,E,M){let[P,A,k,I,O,D]=e.getAbcdef(w);return e.setAbcdef(w,P,A,k,I,O+E,D+M),w}e.translate=f;function v(w,E,M){let[P,A,k,I]=e.getAbcdef(w);return e.setAbcdef(w,P,A,k,I,E,M),w}e.setTranslate=v;function m(w,E,M){let[P,A,k,I]=e.getAbcdef(w);return e.setAbcdef(w,P,A,k,I,E,M),w}e.setPosition=m;function g(w){let[E,M,P,A]=e.getAbcdef(w),k=Math.sqrt(E*E+M*M),I=Math.sqrt(P*P+A*A);return[k,I]}e.getScale=g;function y(w){let[,,,,E,M]=e.getAbcdef(w);return[E,M]}e.getPosition=y;function b(w,E){return e.decompose(w,E).rotation}e.getRotation=b;function x(w,E){let[M,P,A,k,I,O]=e.getAbcdef(w),{rotation:D,scale:F,shear:U}=rve([[M,A],[P,k]]);return{position:[I+(E[0]*M+E[1]*A)-E[0],O+(E[0]*P+E[1]*k)-E[1]],scale:F,rotation:D,shear:U,pivot:E}}e.decompose=x;function S(w,E,M,P,A=[0,0]){let[k,I]=w,[O,D]=P,[F,U,z,B]=ave({rotation:M,scale:E,shear:A}),W=k-(O*F+D*z)+O,R=I-(O*U+D*B)+D;return e.create(F,U,z,B,W,R)}e.compose=S})(yr||(yr={}));var nve=Math.PI/180;function sve(e,t,i,r,a,n){let s=e-i,o=t-r;return s*s/(a*a)+o*o/(n*n)<=1}function ove(e){return e*nve}var nn=class{constructor(e,t,i){this.uuid=e,this.data=t,this.localMatrix=yr.identity(),this.worldMatrix=yr.identity(),this.ignoreCameraZoom=!1,this.visible=!0,this._singleBBox=new fM,this._recursiveBBox=new fM,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.stateSelection=null,this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this.name="",this.position=[0,0],this.scale=[1,1],this.rotation=0,this.shear=[0,0],this.emitter=TA(),this.dpr=i.dpr??1,this.dataPatched=t}project(e,t){let i=this.worldMatrix;return t&&(i=yr.append(t.worldMatrix,i)),yr.applyInverse(e,i)}intersects(e,t,i,r=!1){return this.visible&&!this.data.raycastLock&&this.intersectsInLocalSpace(...this.project([e,t],i),r)}intersectsInLocalSpace(e,t,i=!1){let{min:r,max:a}=i?this.recursiveBBox:this.singleBBox;return e>=r[0]&&e<=a[0]&&t>=r[1]&&t<=a[1]}applyTransforms(e){e.setTransform(this.worldMatrix,this.ignoreCameraZoom)}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges()),this._recursiveBBox}updateLocalMatrix(){this.localMatrix=yr.compose(this.position,this.scale,ove(this.rotation),ed.getPivot(this.dataPatched),this.shear)}updateWorldMatrix(e,t,i){let r=this.parent;t&&r!==null&&r!==void 0&&r.updateWorldMatrix(e,!0,!1),e&&this.updateLocalMatrix(),this.parent?this.worldMatrix=yr.append(this.parent.worldMatrix,this.localMatrix):this.worldMatrix=yr.copy(this.localMatrix),this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}get pivot(){return ed.getPivot(this.data)}getCenter(){return[0,0]}getHalfSize(){return[0,0]}get id(){return this.uuid}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(e=>{e.resetBBoxNeedsUpdateSelf()})}updateTransformState(e){let t=!1;e.position!==void 0&&(t=!0,this.position=e.position),e.rotation!==void 0&&(t=!0,this.rotation=e.rotation),e.scale!==void 0&&(t=!0,this.scale=e.scale),e.shear!==void 0&&(t=!0,this.shear=e.shear),t&&(this.updateWorldMatrix(!0,!1,!0),this.resetBBoxNeedsUpdate())}updateByOp(e,t,i){e.type===0&&e.props.visible!==void 0&&(this.visible=e.props.visible),this.data=t,this.data=t;let r=e,a=Vr(e.path,["states","*"]);if(a!==null){if(e.type===0){let[n]=a;if((this==null?void 0:this.stateSelection)===n){let s={...e.props};if(delete s.name,Object.values(e.props).some(o=>o===void 0)){let o=this.data;if(o!==void 0){let l=Fa.zoom(o,e.path.slice(2));if(l)for(let u in e.props)e.props[u]===void 0&&u in l&&(s[u]=l[u])}}r={...e,props:s,path:e.path.slice(2)}}}}else if(e.type===0){let n=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(n!==void 0){if(e.props.name!==void 0&&n.name){let{name:o,...l}=n;n=l}let s=Fa.removeOverridden(e.path,e.props,n);r={...e,props:s}}}this.updateByPatchedOpBase(r,Wc.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),i)}changeSelectedState(e,t,i=!1){if(!(this.data.states.length===0&&!i)){for(let r of this.data.states)Wc.toOps(this.data,r.data).forEach(a=>{let n=Ay.replaceProps(a,this.data);this.dataPatched=this.data,this.updateByPatchedOp(n,this.data,t)});if(e!==null){let r=this.data.states.data(e);r&&(this.dataPatched=Wc.patch(this.data,r),Wc.toOps(this.data,r).forEach(a=>{this.updateByPatchedOp(a,this.dataPatched,t)}))}i&&this.updateTransformState(this.dataPatched),this.stateSelection=e}}updateState(e,t){e.name!==void 0&&(this.name=e.name),e.visible!==void 0&&(this.visible=e.visible),this.updateTransformState(e)}updateByPatchedOpBase(e,t,i){this.dataPatched=t,this.updateByPatchedOp(e,t,i)}updateByPatchedOp(e,t,i){e.path.length===0&&e.type===0&&this.updateState(e.props,i),this.requestRender()}traverseFrameAncestors(e){this.traverseAncestors(t=>{t.data.type==="frame2d"&&e(t)})}traverseAncestors(e){let t=this.parent;for(;t;)e(t),t=t.parent}requestRender(){this.traverseFrameAncestors(e=>{e.requestRender()})}clone(e){let t=new nn(this.uuid,this.data,e);return t.parent=void 0,t}addEventListener(e,t){this.emitter.on(e,t)}removeEventListener(e,t){this.emitter.off(e,t)}dispatchEvent(e){this.emitter.emit(e.type,{...e,target:e.target??this})}traverseSortNextHelper(){let e=this.parent;if(e){let t=e.children;if(t){let i=t.indexOf(this)+1;return t[i]?t[i]:e.traverseSortNextHelper()}}}sortNext(){let e=this.children;return e&&e.length>0&&e[0]?e[0]:this.traverseSortNextHelper()}isDescendantOf(e){e instanceof nn&&(e=e.uuid);let t=this;for(;t.parent;){if(t.parent.uuid===e)return!0;t=t.parent}return!1}},bo=class extends nn{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.context=i,this.children=[]}add(e){e.parent&&e.parent instanceof bo&&e.parent.remove(e),this.children.push(e),e.parent=this}remove(e){let t=this.children.indexOf(e);t>=0&&(this.children.splice(t,1),e.parent=void 0)}traverse(e){let t=e(this);if(t!==!0)for(let i of this.children)i instanceof bo?i.traverse(e):t=e(i)}intersectsChildrenHelper(e,t,i,r,a){for(let n of this.children)if(n.intersects(e,t,i,!1)&&(a.push(n),r)||n instanceof bo&&n.intersectsChildrenHelper(e,t,i,r,a))return!0;return!1}intersectsChildren(e,t,i,r=!1,a=[],n=!1){return this.intersectsChildrenHelper(e,t,i,r,a),a}intersectsChildrenHelperReverse(e,t,i,r,a){for(let n of this.children)if(n instanceof bo&&n.intersectsChildrenHelperReverse(e,t,i,r,a)||n.intersects(e,t,i,!1)&&(a.push(n),r))return!0;return!1}intersectsChildrenReverse(e,t,i,r=!1,a=[],n=!1){return this.intersectsChildrenHelperReverse(e,t,i,r,a),a}updateWorldMatrix(e,t,i){if(super.updateWorldMatrix(e,t,i),i&&this.children)for(let r of this.children)r.updateWorldMatrix(e,!1,!0)}find(e){let t;return this.traverse(i=>{i.uuid===e&&(t=i)}),t}innerDrawChildren(e){for(let t=this.children.length-1;t>=0;t--)this.children[t].draw(e)}resetBBoxNeedsUpdate(){super.resetBBoxNeedsUpdate(),this.traverse(e=>{e.resetBBoxNeedsUpdateSelf()})}clone(e){let t=new bo(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},dc=class extends bo{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.updateState(t,i)}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.innerDrawChildren(e),e.restore())}clone(e){let t=new dc(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}};function lve(e,t){let[[i,r],[a,n]]=e,[[s,o],[l,u]]=t,c=(i-a)*(o-u)-(r-n)*(s-l);if(c===0)return!1;let d=((i-s)*(o-u)-(r-o)*(s-l))/c,h=-((i-a)*(r-o)-(r-n)*(i-s))/c;return d>=0&&d<=1&&h>=0&&h<=1}var UV=[[-1,1],[-1,-1],[1,-1],[1,1]],gI=(e,t,i)=>{let r=e.getCenter(),a=e.getHalfSize(),n=yr.append(t,e.worldMatrix);a[0]===0&&a[1]===0?i.push(yr.apply(r,n)):UV.forEach(s=>{let o=[s[0]*a[0]+r[0],s[1]*a[1]+r[1]];i.push(yr.apply(o,n))})},fM=class{constructor(){this.matrix=yr.identity(),this.min=[1/0,1/0],this.max=[-1/0,-1/0],this.vertices=[],this.edges=[]}setFromObjectSize(e,t=!1){e.updateWorldMatrix(),this.makeEmpty(),yr.copy(e.worldMatrix,this.matrix);let i=yr.invert(e.worldMatrix);this.expandByObjectSize(e,i,t)}expandByObjectSize(e,t,i=!1){let r=[];i===!0&&e instanceof bo?e.traverse(a=>{a.visible&&gI(a,t,r)}):gI(e,t,r),this.setFromPoints(r)}setFromSize(e,t,i){this.makeEmpty(),yr.copy(i,this.matrix),this.expandBySize(e,t,i)}expandBySize(e,t,i){[yr.apply([0,0],i),yr.apply([0,t],i),yr.apply([e,t],i),yr.apply([e,0],i)].forEach(r=>this.expandByPoint(r))}getCenter(){let[e,t]=this.min,[i,r]=this.getHalfSize();return yr.apply([e+i,t+r],this.matrix)}getSize(){return[this.max[0]-this.min[0],this.max[1]-this.min[1]]}getHalfSize(){return[(this.max[0]-this.min[0])*.5,(this.max[1]-this.min[1])*.5]}makeEmpty(){this.min=[1/0,1/0],this.max=[-1/0,-1/0]}setFromPoints(e){this.makeEmpty();for(let t of e)this.expandByPoint(t)}expandByPoint(e){this.min=[Math.min(this.min[0],e[0]),Math.min(this.min[1],e[1])],this.max=[Math.max(this.max[0],e[0]),Math.max(this.max[1],e[1])]}computeVertices(){let[e,t]=this.getHalfSize(),i=this.getCenter(),[r,a,n,s]=yr.getAbcdef(this.matrix),o=yr.create(r,a,n,s,i[0],i[1]);this.vertices=UV.map(([l,u])=>yr.apply([l*e,u*t],o))}computeEdges(){this.edges=[];for(let e=0,t=this.vertices.length;e<t;++e)this.edges.push([this.vertices[e],this.vertices[(e+1)%t]])}project(e,t){let i=this.matrix;return t&&(i=yr.append(t.worldMatrix,i)),yr.applyInverse(e,i)}intersects(e,t,i){return this.intersectsInLocalSpace(...this.project([e,t],i))}intersectsInLocalSpace(e,t){let{min:i,max:r}=this;return e>=i[0]&&e<=r[0]&&t>=i[1]&&t<=r[1]}containsPoint(e){let[t,i]=e,[r,a]=this.min,[n,s]=this.max;return t>=r&&t<=n&&i>=a&&i<=s}intersectsBBox2D(e){for(let t=0,i=this.edges.length;t<i;t++){let r=this.edges[t];for(let a=0,n=e.edges.length;a<n;a++){let s=e.edges[a];if(lve(r,s))return!0}}for(let t=0,i=e.vertices.length;t<i;t++){let r=e.vertices[t];if(this.containsPoint(r))return!0}return!1}ensureMinMax(){let e=this.min,t=this.max;this.min=[Math.min(e[0],t[0]),Math.min(e[1],t[1])],this.max=[Math.max(e[0],t[0]),Math.max(e[1],t[1])]}copy(e){this.min=[...e.min],this.max=[...e.max],yr.copy(e.matrix,this.matrix),this.computeVertices(),this.computeEdges()}clone(){let e=new fM;return e.copy(this),e}},WV,uve=new Promise(e=>{WV=e}),yI=!1,gg;function cve(){if(yI)return;if(gg)return gg;async function e(){let t=await pc(()=>import("./ui.BRPadsgT.js"),[]);WV(t.default??t),yI=!0}return gg=e(),gg}function bI(e){let t=!1;return e.scene.objects.traverse((i,r)=>{(r.type==="Mesh"&&r.geometry.type==="UIGeometry"||r.type==="Page"&&r.uiFrame!==void 0)&&(t=!0)}),t}var qi,Ax;async function dve(e){let t=await uve;qi||(Ax||(Ax=t({locateFile:()=>e})),qi=await Ax)}var wI=yr.identity(),HV=class{constructor(e,t=1){this.canvas=e,this._dpr=t,this._width=0,this._height=0,this._strokeMode="inside",this._layerBlur=0,this._backgroundBlur=0,this._dropShadowBlur=0,this._dropShadowOffsetX=0,this._dropShadowOffsetY=0,this._dropShadowColor=Lr.transparent,this._innerShadowBlur=0,this._innerShadowOffsetX=0,this._innerShadowOffsetY=0,this._innerShadowSpread=0,this._innerShadowColor=Lr.transparent,this._fonts=new Map,this._isSizeDirty=!1;try{let i=e.getBoundingClientRect();e.width=i.width*t,e.height=i.height*t}catch{console.log(e.width,t)}this._currentM3Transform=wI,this._currentTransform=new Float32Array(wI)}get dpr(){return this._dpr}set dpr(e){this._dpr=e,this._isSizeDirty=!0}async init(){var e,t;if(!this.wasmURL)throw Error("Your must set the wasm binary url with renderer.wasmURL = ... before you can call renderer.init");await dve(this.wasmURL),this._surface=qi.MakeWebGLCanvasSurface(this.canvas),this.ctx=(e=this._surface)==null?void 0:e.getCanvas(),this._paint=new qi.Paint,this._paint.setAntiAlias(!0),this._paintFill=this._paint.copy(),this._paintFill.setStyle(qi.PaintStyle.Fill),this._paintStroke=this._paint.copy(),this._paintStroke.setStyle(qi.PaintStyle.Stroke),(t=this.ctx)==null||t.scale(this.dpr,this.dpr)}get currentTransform(){return this._currentM3Transform}get currentTransformBuffer(){return this._currentTransform}set currentTransform(e){this._currentM3Transform=e,this._currentTransform.set(e)}async loadFont(e,t){let i=await(await fetch(e)).arrayBuffer();this.registerFont(i,t)}registerFont(e,t){if(this._fonts.has(t))return;let i=qi.FontMgr.FromData(e);if(i)this._fonts.set(t,i);else throw new Error("Invalid font data for "+t)}get width(){return this._width}get height(){return this._height}set strokeColor(e){this._paintStroke&&this._paintStroke.setColor(yg(e),qi.ColorSpace.DISPLAY_P3)}set fillColor(e){this._paintFill&&this._paintFill.setColor(yg(e),qi.ColorSpace.DISPLAY_P3)}set lineWidth(e){this._paintStroke&&this._paintStroke.setStrokeWidth(this._strokeMode==="center"?e:e*2)}set strokeMode(e){this._strokeMode=e}set dropShadowBlur(e){this._dropShadowBlur=e}set dropShadowColor(e){this._dropShadowColor=e}set dropShadowOffsetX(e){this._dropShadowOffsetX=e}set dropShadowOffsetY(e){this._dropShadowOffsetY=e}set innerShadowBlur(e){this._innerShadowBlur=e}set innerShadowColor(e){this._innerShadowColor=e}set innerShadowOffsetX(e){this._innerShadowOffsetX=e}set innerShadowOffsetY(e){this._innerShadowOffsetY=e}set innerShadowSpread(e){this._innerShadowSpread=e}set layerBlur(e){this._layerBlur=e}set backgroundBlur(e){this._backgroundBlur=e}clear(){var e;(e=this.ctx)==null||e.clear(qi.TRANSPARENT)}save(){var e;(e=this.ctx)==null||e.save()}restore(){var e;(e=this.ctx)==null||e.restore()}beginPath(){var e;(e=this._currentPath)==null||e.delete(),this._currentPath=new qi.Path}closePath(){let e=this._currentPath;if(e){if(e.isEmpty())return;let t=e.getBounds();(t[3]-t[1]||t[2]-t[0])&&e.close()}}fill(){this._paintInner(this._paintFill,!0)}stroke(){this._paintInner(this._paintStroke,!1)}clipRect(e,t,i,r,a=0,n=0,s=0,o=0){var l,u;let c=qi.XYWHRect(e,t,i,r);if(a===0&&n===0&&o===0&&s===0)(l=this.ctx)==null||l.clipRect(c,qi.ClipOp.Intersect,!0);else{let d=qi.RRectXY(c,a,a);d[4]=d[5]=a,d[6]=d[7]=n,d[8]=d[9]=s,d[10]=d[11]=o,(u=this.ctx)==null||u.clipRRect(d,qi.ClipOp.Intersect,!0)}}_applyShadowOffsetMatrix(){if(this.ctx){let e=yr.invert(this.currentTransform);this.ctx.concat(e);let t=yr.translate(yr.identity(),this._dropShadowOffsetX,this._dropShadowOffsetY);this.ctx.concat(t),this.ctx.concat(this._currentTransform)}}_applyEffectsToPaint(e,t,i=!0){var r,a,n,s;if(this.ctx&&this._currentPath){let o,l=!1;if(i&&this._hasDropShadow()){let u=e.copy();u.setColor(yg(this._dropShadowColor));let c;this._dropShadowBlur>0&&(c=qi.MaskFilter.MakeBlur(qi.BlurStyle.Normal,this._dropShadowBlur*this.dpr*(((r=this.camera)==null?void 0:r.scale)??1),!1),u.setMaskFilter(c)),this.ctx.save(),this.ctx.clipPath(this._currentPath,qi.ClipOp.Difference,!0),this._applyShadowOffsetMatrix(),t(u),this.ctx.restore(),u.delete(),c?.delete()}if(this._backgroundBlur>0&&i){this.ctx.save(),this.ctx.clipPath(this._currentPath,qi.ClipOp.Intersect,!0);let u=qi.ImageFilter.MakeBlur(this._backgroundBlur,this._backgroundBlur,qi.TileMode.Clamp,null),c=e.copy();c.setImageFilter(u),c.setAlphaf(1);let d=this._currentPath.computeTightBounds();this.ctx.saveLayer(c,d,null,qi.SaveLayerInitWithPrevious),this.ctx.drawColor(e.getColor()),this.ctx.restore(),this.ctx.restore(),c.delete(),u.delete(),l=!0}if(this._layerBlur>0){let u=e.copy();o=qi.MaskFilter.MakeBlur(qi.BlurStyle.Normal,this._layerBlur*this.dpr*(((a=this.camera)==null?void 0:a.scale)??1),!1),u.setMaskFilter(o),t(u),u.delete(),o.delete(),l=!0}if(l||t(e),i&&this._hasInnerShadow()){let u=new qi.Paint;u.setAntiAlias(!0),u.setStyle(qi.PaintStyle.Fill),u.setColor(yg(this._innerShadowColor));let c;this._innerShadowBlur>0&&(c=qi.MaskFilter.MakeBlur(qi.BlurStyle.Normal,this._innerShadowBlur*this.dpr*(((n=this.camera)==null?void 0:n.scale)??1),!1),u.setMaskFilter(c));let d=this._currentPath.computeTightBounds(),[h,p,f,v]=d,m=f-h,g=v-p;this.ctx.save(),this.ctx.clipPath(this._currentPath,qi.ClipOp.Intersect,!0),this.ctx.saveLayer(u,d,null,qi.SaveLayerInitWithPrevious),(s=this.ctx)==null||s.translate(this._innerShadowOffsetX,this._innerShadowOffsetY),this.ctx.drawRect(qi.XYWHRect(-1e3-this._innerShadowOffsetX,-1e3-this._innerShadowOffsetY,2e3+m+Math.abs(this._innerShadowOffsetX*2),2e3+g+Math.abs(this._innerShadowOffsetY*2)),u),u.setBlendMode(qi.BlendMode.Clear),this.ctx.drawPath(this._currentPath,u),this.ctx.restore(),this.ctx.restore(),u.delete(),c?.delete()}}}_paintInner(e,t=!0){if(this.ctx&&this._currentPath&&e){let i=this.ctx,r=this._currentPath;this._applyEffectsToPaint(e,a=>{let n=!1;!t&&this._strokeMode!=="center"&&(i.save(),i.clipPath(r,this._strokeMode==="outside"?qi.ClipOp.Difference:qi.ClipOp.Intersect,!0),n=!0),i.drawPath(r,a),n&&i.restore()},t)}}_hasDropShadow(){var e;return((e=this._dropShadowColor)==null?void 0:e.a)>0}_hasInnerShadow(){var e;return((e=this._innerShadowColor)==null?void 0:e.a)>0}path(e){var t;(t=this._currentPath)==null||t.addPath(qi.Path.MakeFromSVGString(e))}ellipse(e,t,i,r,a,n,s,o){var l;if(!xI([e,t,i,r])||!this._currentPath)return;if(i<0||r<0)throw Error("radii cannot be negative");let u=qi.XYWHRect(e-i,t-r,i*2,r*2);(l=this._currentPath)==null||l.addOval(u)}rect(e,t,i,r,a=0,n=0,s=0,o=0){var l,u;let c=qi.XYWHRect(e,t,i,r);if(xI(c))if(a===0&&n===0&&o===0&&s===0)(l=this._currentPath)==null||l.addRect(c);else{let d=qi.RRectXY(c,a,a);d[4]=d[5]=a,d[6]=d[7]=n,d[8]=d[9]=s,d[10]=d[11]=o,(u=this._currentPath)==null||u.addRRect(d)}}getHorizontalAlign(e){switch(e){case 2:return qi.TextAlign.Right;case 3:return qi.TextAlign.Center;case 4:return qi.TextAlign.Justify;case 1:default:return qi.TextAlign.Left}}drawTextInner(e,t,i,[r,a,n,s],o,l,u=!0){let c=0,{ctx:d}=this;if(!d)return c;let h=l.copy(),p=l.copy();return p.setAlphaf(0),this._applyEffectsToPaint(h,f=>{t.pushPaintStyle(i,f,p),t.addText(e);let v=t.build();v.layout(n);let m=a;o===2?m+=(s-v.getHeight())/2:o===3&&(m+=s-v.getHeight()),d.drawParagraph(v,r,m),c=v.getHeight(),t.reset(),v.delete()},u),h.delete(),p.delete(),c}drawText(e,t){let i=0,r=this._fonts.get(t.font),{ctx:a,_paintFill:n,_paintStroke:s}=this;if(r&&a){let o=new qi.TextStyle({fontFamilies:[t.font],fontSize:t.fontSize,heightMultiplier:t.lineHeight,letterSpacing:t.letterSpacing}),l=new qi.ParagraphStyle({textStyle:o,textAlign:this.getHorizontalAlign(t.horizontalAlign)}),u=qi.XYWHRect(t.x,t.y,t.width,t.height),c=qi.ParagraphBuilder.Make(l,r);n&&(i=this.drawTextInner(e,c,o,u,t.verticalAlign,n,!0)),s&&(i=this.drawTextInner(e,c,o,u,t.verticalAlign,s,!1)),c.delete()}return{height:i}}render(){var e;(e=this._surface)==null||e.flush()}moveTo(e,t){var i;(i=this._currentPath)==null||i.moveTo(e,t)}lineTo(e,t){var i;(i=this._currentPath)==null||i.lineTo(e,t)}bezierCurveTo(e,t,i,r,a,n){var s;(s=this._currentPath)==null||s.cubicTo(e,t,i,r,a,n)}quadraticCurveTo(e,t,i,r){var a;(a=this._currentPath)==null||a.quadTo(e,t,i,r)}setTransform(e,t=!1){var i,r,a,n,s;if(!this.ctx)return;let o=this.ctx.getTotalMatrix(),l=yr.invert(o);if(l&&this.ctx.concat(l),(i=this.ctx)==null||i.scale(this.dpr,this.dpr),((r=this.camera)==null?void 0:r.enabled)&&((a=this.ctx)==null||a.concat(this.camera.worldMatrix),t)){let u=yr.getScale(this.camera.worldMatrix);(n=this.ctx)==null||n.scale(1/u[0],1/u[1])}(s=this.ctx)==null||s.concat(e),this.currentTransform=e}transform(e){var t;(t=this.ctx)==null||t.concat(e)}setSize(e,t){var i;!this._isSizeDirty&&e===this._width&&t===this._height||(this._isSizeDirty=!1,this._width=e,this._height=t,this.canvas.style.width=e+"px",this.canvas.style.height=t+"px",this.canvas.width=e*this.dpr,this.canvas.height=t*this.dpr,this._surface&&(this._surface=qi.MakeWebGLCanvasSurface(this.canvas),this.ctx=(i=this._surface)==null?void 0:i.getCanvas()))}};function xI(e){for(let t=0;t<e.length;t++)if(e[t]!==void 0&&!Number.isFinite(e[t]))return!1;return!0}function yg({r:e,g:t,b:i,a:r}){return qi.Color4f(e,t,i,r)}var SI=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=Lr.transparent,this.blurRadius=0,this.offset=[0,0],this.spread=0,this.update(t)}update(e){e.color!==void 0&&(this.color=e.color),e.enabled!==void 0&&(this.enabled=e.enabled),e.blurRadius!==void 0&&(this.blurRadius=e.blurRadius),e.offset!==void 0&&(this.offset=e.offset),e.spread!==void 0&&(this.spread=e.spread)}},CI=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.radius=0,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.radius!==void 0&&(this.radius=e.radius)}},hve=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=Lr.transparent,this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color)}},pve=class{constructor(e,t,i){this.uuid=e,this.data=t,this.enabled=!1,this.color=Lr.transparent,this.thickness=0,this.mode="inside",this.update(t)}update(e){e.enabled!==void 0&&(this.enabled=e.enabled),e.color!==void 0&&(this.color=e.color),e.thickness!==void 0&&(this.thickness=e.thickness),e.mode!==void 0&&(this.mode=e.mode)}},Qa=class extends nn{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.autoClose=!0,this.fill=new hve(e+"-fill",t.fill,i),this.stroke=new pve(e+"-stroke",t.stroke,i),this.dropShadow=new SI(e+"-dropShadow",t.dropShadow,i),this.innerShadow=new SI(e+"-innerShadow",t.innerShadow,i),this.backgroundBlur=new CI(e+"-backgroundBlur",t.backgroundBlur,i),this.layerBlur=new CI(e+"-layerBlur",t.layerBlur,i)}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Lr.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Lr.transparent,e.strokeMode=this.stroke.mode,e.lineWidth=this.stroke.thickness}applyFilters(e){this.layerBlur.enabled?e.layerBlur=this.layerBlur.radius*5:e.layerBlur=0,this.backgroundBlur.enabled?e.backgroundBlur=this.backgroundBlur.radius*5:e.backgroundBlur=0,this.dropShadow.enabled?(e.dropShadowBlur=this.dropShadow.blurRadius*5,e.dropShadowColor=this.dropShadow.color,e.dropShadowOffsetX=this.dropShadow.offset[0],e.dropShadowOffsetY=this.dropShadow.offset[1]):e.dropShadowColor=Lr.transparent,this.innerShadow.enabled?(e.innerShadowSpread=this.innerShadow.spread,e.innerShadowBlur=this.innerShadow.blurRadius*5,e.innerShadowColor=this.innerShadow.color,e.innerShadowOffsetX=this.innerShadow.offset[0],e.innerShadowOffsetY=this.innerShadow.offset[1]):e.innerShadowColor=Lr.transparent}innerDraw(e){}draw(e){!this.visible||(e.save(),this.applyTransforms(e),this.applyFilters(e),this.applyFillStroke(e),e.beginPath(),this.innerDraw(e),this.autoClose&&e.closePath(),this.fill.enabled&&e.fill(),this.stroke.enabled&&e.stroke(),e.restore())}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Vr(e.path,["fill"])?this.fill.update(e.props):Vr(e.path,["stroke"])?this.stroke.update(e.props):Vr(e.path,["dropShadow"])?this.dropShadow.update(e.props):Vr(e.path,["innerShadow"])?this.innerShadow.update(e.props):Vr(e.path,["layerBlur"])?this.layerBlur.update(e.props):Vr(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}updateState(e,t){super.updateState(e,t),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur)}clone(e){let t=new Qa(this.uuid,this.data,e);return t.parent=void 0,t}},RA=class extends Qa{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.updateState(t,i)}innerDraw(e){e.ellipse(this.width*.5,this.height*.5,this.width*.5,this.height*.5,0,0,Math.PI*2)}intersectsInLocalSpace(e,t){return sve(e,t,this.width*.5,this.height*.5,this.width*.5,this.height*.5)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e)}clone(e){let t=new RA(this.uuid,this.data,e);return t.parent=void 0,t}},Gm=class extends Qa{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.width=0,this.height=0,this.cornerRadius=[0,0,0,0],this.updateState(t,i)}innerDraw(e){e.rect(0,0,this.width,this.height,...this.cornerRadius)}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e)}clone(e){let t=new Gm(this.uuid,this.data,e);return t.parent=void 0,t}},NA=class extends Qa{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._textHeight=0,this._textHeightDirty=!0,this.width=0,this.height=0,this.updateState(t,i)}get textHeight(){return this._textHeight}applyFillStroke(e){e.fillColor=this.fill.enabled?this.fill.color:Lr.transparent,e.strokeColor=this.stroke.enabled&&this.stroke.thickness>0?this.stroke.color:Lr.transparent,e.strokeMode="center",e.lineWidth=this.stroke.thickness}innerDraw(e){var t;(t=this._fontHolder)!=null&&t.arrayBuffer&&this._fontHolder.arrayBuffer.byteLength>1&&this.data.font&&e.registerFont(this._fontHolder.arrayBuffer,this.data.font);let i=this.data.textTransform,r=this.data.text.textValue.toString(),a=i===2?r.toUpperCase():i===3?r.toLowerCase():r,{height:n}=e.drawText(a,{x:0,y:0,width:this.width,height:this.height,fontSize:this.data.fontSize,lineHeight:this.data.lineHeight??1,letterSpacing:this.data.letterSpacing??0,horizontalAlign:this.data.horizontalAlign,verticalAlign:this.data.verticalAlign,font:this.data.font});this._textHeight=n}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateFontState(e,{shared:t}){e.font!==void 0&&(this._fontHolder=t.getFont(e.font),this._fontHolder&&!this._fontHolder.isLoaded&&this._fontHolder.loadingPromise.then(()=>{this.requestRender()}))}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateFontState(e,t)}clone(e){let t=new NA(this.uuid,this.data,e);return t.parent=void 0,t}},GV=class extends Qa{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this.curves=[],this.extremasBBox={min:[0,0],max:[0,0]},this.updateState(t,i)}computeExtremas(){this.curves.length===0&&this.computeCurves();let e=this.curves.map(r=>eb.extremas(r)),t=[1/0,1/0],i=[-1/0,-1/0];for(let r=0,a=e.length;r<a;r++){let n=e[r];n[0][0]<t[0]&&(t[0]=n[0][0]),n[0][1]<t[1]&&(t[1]=n[0][1]),n[1][0]>i[0]&&(i[0]=n[1][0]),n[1][1]>i[1]&&(i[1]=n[1][1])}return this.extremasBBox.min=[t[0],t[1]],this.extremasBBox.max=[i[0],i[1]],this.extremasBBox}computeCurves(){this.curves=[];for(let i=1,r=this.data.points.length;i<r;i++){let a=this.data.points[i].data,n=this.data.points[i-1].data,s={start:n.position,cp1:n.controlNext.position,cp2:a.controlPrevious.position,end:a.position};this.curves.push(s)}let e=this.data.points[0].data,t=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let i={start:t.position,cp1:t.controlNext.position,cp2:e.controlPrevious.position,end:e.position};this.curves.push(i)}}getCenter(){let[e,t]=this.extremasBBox.min,[i,r]=this.getHalfSize();return[e+i,t+r]}getHalfSize(){let{min:e,max:t}=this.extremasBBox;return[(t[0]-e[0])*.5,(t[1]-e[1])*.5]}innerDraw(e){for(let r=0,a=this.data.points.length;r<a;r++){let n=this.data.points[r].data;if(r===0){let[s,o]=n.position;e.moveTo(s,o)}else{let s=this.data.points[r-1].data,[o,l]=s.controlNext.position,[u,c]=n.controlPrevious.position,[d,h]=n.position,p={start:s.position,cp1:s.controlNext.position,cp2:n.controlPrevious.position,end:n.position};eb.derive(p),e.bezierCurveTo(o,l,u,c,d,h)}}let t=this.data.points[0].data,i=this.data.points[this.data.points.length-1].data;if(this.data.isClosed){let[r,a]=i.controlNext.position,[n,s]=t.controlPrevious.position,[o,l]=t.position;e.bezierCurveTo(r,a,n,s,o,l)}}updateState(e,t){super.updateState(e,t),this.computeExtremas()}clone(e){let t=new GV(this.uuid,this.data,e);return t.parent=void 0,t}},eb;(e=>{function t(s){let o=s.start,l=s.cp1,u=s.cp2,c=s.end,d=[3*(l[0]-o[0]),3*(l[1]-o[1])],h=[3*(u[0]-l[0]),3*(u[1]-l[1])],p=[3*(c[0]-u[0]),3*(c[1]-u[1])],f={start:d,cp:h,end:p};return s.derivative=f,f.derivative=mM.derive(f),f}e.derive=t;function i(s,o,l,u=!1){let c=s-2*o+l;if(c!==0){let d=-Math.sqrt(Math.abs(o*o-s*l)),h=-s+o,p=-(d+h)/c,f=-(-d+h)/c;return[p,f]}else if(o!==l&&c===0)return[(2*o-l)/(2*(o-l))];return[]}function r(s){let o=s.derivative??e.derive(s),l=o.start,u=o.cp,c=o.end;return[i(l[0],u[0],c[0]),i(l[1],u[1],c[1])]}e.droot=r;function a(s){let[o,l]=e.droot(s),u=[s.start[0],s.end[0]],c=[s.start[1],s.end[1]];for(let d of o)u.push(e.compute(s,Math.min(1,Math.max(0,d)))[0]);for(let d of l)c.push(e.compute(s,Math.min(1,Math.max(0,d)))[1]);return u.sort((d,h)=>d-h),c.sort((d,h)=>d-h),[[u[0],c[0]],[u[u.length-1],c[c.length-1]]]}e.extremas=a;function n(s,o){if(o===0)return[...s.start];if(o===1)return[...s.end];let l=1-o,u=l*l,c=o*o,d=u*l,h=u*o*3,p=l*c*3,f=o*c;return[d*s.start[0]+h*s.cp1[0]+p*s.cp2[0]+f*s.end[0],d*s.start[1]+h*s.cp1[1]+p*s.cp2[1]+f*s.end[1]]}e.compute=n})(eb||(eb={}));var mM;(e=>{function t(a){let n=a.start,s=a.cp,o=a.end,l=[2*(s[0]-n[0]),2*(s[1]-n[1])],u=[2*(o[0]-s[0]),2*(o[1]-s[1])],c={start:l,end:u};return c.derivative=vM.derive(c),a.derivative=c,c}e.derive=t;function i(a){let n=a.derivative??e.derive(a),s=n.start,o=n.end;return[s[0]!==o[0]?s[0]/(s[0]-o[0]):0,s[1]!==o[1]?s[1]/(s[1]-o[1]):0]}e.droot=i;function r(a,n){if(n===0)return[...a.start];if(n===1)return[...a.end];let s=1-n,o=s*s,l=n*n,u=o,c=s*n*2,d=l;return[u*a.start[0]+c*a.cp[0]+d*a.end[0],u*a.start[1]+c*a.cp[1]+d*a.end[1]]}e.compute=r})(mM||(mM={}));var vM;(e=>{function t(r){let a=r.start,n=r.end,s=[n[0]-a[0],n[1]-a[1]];return r.derivative=s,r.derivative}e.derive=t;function i(r,a){if(a===0)return[...r.start];if(a===1)return[...r.end];let n=r.start,s=r.end;return[n[0]+(s[0]-n[0])*a,n[1]+(s[1]-n[1])*a]}e.compute=i})(vM||(vM={}));var fl=class extends bo{constructor(e,t,i){super(e,t,i),this.uuid=e,this.width=0,this.height=0,this.clipped=!0,this.background=new Gm(e+"-background",mm.defaultData,i),this.background.parent=this,this.updateState(t,i)}get fill(){return this.background.fill}get stroke(){return this.background.stroke}get backgroundBlur(){return this.background.backgroundBlur}get layerBlur(){return this.background.layerBlur}get dropShadow(){return this.background.dropShadow}get innerShadow(){return this.background.innerShadow}get cornerRadius(){return this.background.cornerRadius}set cornerRadius(e){this.background.cornerRadius=e}updateLocalMatrix(){var e;super.updateLocalMatrix(),(e=this.background)==null||e.updateLocalMatrix()}updateWorldMatrix(e,t,i){var r;super.updateWorldMatrix(e,t,i),(r=this.background)==null||r.updateWorldMatrix(e,t,i)}draw(e){if(!this.visible)return;e.save();let t=this.width,i=this.height;this.applyTransforms(e),this.background.width=t,this.background.height=i,this.background.draw(e),this.clipped&&e.clipRect(0,0,t,i,...this.cornerRadius),this.innerDrawChildren(e),e.restore()}getCenter(){return[this.width*.5,this.height*.5]}getHalfSize(){return[this.width*.5,this.height*.5]}updateCornerState(e){e.cornerRadius!==void 0&&(this.cornerRadius=e.cornerRadius)}updateSizeState(e){let t=!1;e.width!==void 0&&(this.width=typeof e.width=="number"?e.width:this.width,t=!0),e.height!==void 0&&(this.height=typeof e.height=="number"?e.height:this.height,t=!0),t&&this.updateWorldMatrix(!0,!1,!0)}updateState(e,t){super.updateState(e,t),this.updateSizeState(e),this.updateCornerState(e),e.fill!==void 0&&this.fill.update(e.fill),e.stroke!==void 0&&this.stroke.update(e.stroke),e.dropShadow!==void 0&&this.dropShadow.update(e.dropShadow),e.innerShadow!==void 0&&this.innerShadow.update(e.innerShadow),e.layerBlur!==void 0&&this.layerBlur.update(e.layerBlur),e.backgroundBlur!==void 0&&this.backgroundBlur.update(e.backgroundBlur),e.clipped!==void 0&&(this.clipped=e.clipped)}requestRender(){super.requestRender(),this.dispatchEvent({type:"render"})}dispose(){this.removeEventListener("render")}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),e.type===0&&(Vr(e.path,["fill"])?this.fill.update(e.props):Vr(e.path,["stroke"])?this.stroke.update(e.props):Vr(e.path,["dropShadow"])?this.dropShadow.update(e.props):Vr(e.path,["innerShadow"])?this.innerShadow.update(e.props):Vr(e.path,["layerBlur"])?this.layerBlur.update(e.props):Vr(e.path,["backgroundBlur"])?this.backgroundBlur.update(e.props):this.resetBBoxNeedsUpdate())}clone(e){let t=new fl(this.uuid,this.data,e);t.parent=void 0;for(let i of this.children)t.add(i.clone(e));return t}},fve=fu(Zz(),1),r1=class extends Qa{constructor(e,t,i){super(e,t,i),this.uuid=e,this.data=t,this._pathBBox=new DOMRect,this.path="",this.updateState(t,i),this.autoClose=!1,this.computeSVGBBox()}computeSVGBBox(){let e=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");document.body.appendChild(e),t.setAttribute("d",this.path),e.appendChild(t),this._pathBBox=t.getBBox(),e.remove()}innerDraw(e){e.path(this.path)}intersectsInLocalSpace(e,t){return e>=this._pathBBox.x&&e<=this._pathBBox.x+this._pathBBox.width&&t>=this._pathBBox.y&&t<=this._pathBBox.y+this._pathBBox.height}getCenter(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}getHalfSize(){return[(this._pathBBox.x+this._pathBBox.width)/2,(this._pathBBox.y+this._pathBBox.height)/2]}updateState(e,t){super.updateState(e,t),e.path!==void 0&&(this.path=e.path,this.computeSVGBBox())}clone(e){let t=new r1(this.uuid,this.data,e);return t.parent=void 0,t}};function mve(e,t=1,i=1){if(t<=0||i<=0)return e;let r=(0,fve.parseSVG)(e).map(a=>{let n={...a};return"x"in n&&(n.x=n.x*t),"y"in n&&(n.y=n.y*i),"x1"in n&&(n.x1=n.x1*t),"x2"in n&&(n.x2=n.x2*t),"y1"in n&&(n.y1=n.y1*i),"y2"in n&&(n.y2=n.y2*i),"rx"in n&&(n.rx=n.rx*t),"ry"in n&&(n.ry=n.ry*i),n});return vve(r)}function vve(e){let t=["rx","ry","xAxisRotation","largeArc","sweep","x1","y1","x2","y2","x","y"],i;return e.map(r=>{let a=[];t.forEach(s=>{if(s in r){let o=r[s]*1;a.length&&o>=0&&a.push(","),a.push(o)}});let n=(i===r.code?a[0]<0?"":",":r.code)+a.join("");return i=r.code,n}).join("")}function gve(e,t,i){switch(t.type){case"ellipse2d":return new RA(e,t,i);case"rectangle2d":return new Gm(e,t,i);case"text2d":return new NA(e,t,i);case"vector2d":return new GV(e,t,i);case"path2d":return new r1(e,t,i);case"frame2d":return new fl(e,t,i);case"group2d":default:return new dc(e,t,i)}}var qV=class{constructor(e,t,i){this.uuid=e,this.data=t,this.group=new dc(qV.GROUP_ID,{...Gy.defaultData},i),this.createChildrenObjects(t.objects,this.group,i)}createObject(e,t,i,r,a,n){let s=gve(e,t,n);s&&(r.add(s),r.children.splice(a,0,r.children.pop()),s.updateWorldMatrix(),i.length>0&&(s instanceof dc||s instanceof fl)&&this.createChildrenObjects(i,s,n))}createChildrenObjects(e,t,i){let r=0;for(let a of e)this.createObject(a.id,a.data,a.children,t,r,i),r+=1}draw(e){this.group.draw(e)}updateEntityByOp(e,t,i,r){let a=this.find(e);if(a)try{a.updateByOp(t,i,{shared:r})}catch(n){console.error(n)}}updateTreeByOp(e,t){if(e.path.length===0&&e.type===7){let i=e.parent===null?this.group:this.find(e.parent);i!==void 0&&i instanceof bo&&(this.createObject(e.id,e.data,e.children,i,e.localIndex,t),i.requestRender())}else if(e.path.length===0&&e.type===8){let i=this.find(e.id);if(i!==void 0&&i.parent!==void 0&&i.parent instanceof bo){let r=i.parent;i.resetBBoxNeedsUpdate(),r?.remove(i),r?.requestRender()}}else if(e.path.length===0&&e.type===9){let i=this.find(e.id);if(i!==void 0){let r=i.parent,a=e.parent===null?this:this.find(e.parent);if(a instanceof bo||a===this){a.add(i);let n=e.localIndex;a.children.splice(n,0,a.children.pop()),i.updateWorldMatrix(!0,!1,!0),r?.requestRender(),i.requestRender()}i.resetBBoxNeedsUpdate()}}}add(e){this.group.add(e)}remove(e){this.group.remove(e)}traverse(e){this.group.traverse(t=>{t!==this.group&&e(t)})}intersectsChildren(e,t,i,r=!1,a=[]){return this.group.intersectsChildren(e,t,i,r,a,!0)}intersectsChildrenReverse(e,t,i,r=!1,a=[]){return this.group.intersectsChildrenReverse(e,t,i,r,a,!0)}find(e){return this.group.find(e)}get children(){return this.group.children}project(e,t){return this.group.project(e,t)}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this.group;){let a=r;r=r.parent;let n=r.children.indexOf(a);i.splice(0,0,n)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>T6(i.sortKey,r.sortKey)),t.map(i=>i.entity)}},VA=qV;VA.GROUP_ID="scene2d";function YV({constraints:e,newParentWidth:t,newParentHeight:i,initialParentWidth:r,initialParentHeight:a,objectInitialWidth:n,objectInitialHeight:s,objectInitialPosition:o}){let{horizontalConstraint:l,verticalConstraint:u}=e,c=t-r,d=i-a,h=n,p=s,f=o[0],v=o[1];if(l!==0){if(l===1)f+=c;else if(l===3)f+=c/2;else if(l===2)h=Math.max(1,h+c);else if(l===4){let m=t/r;h*=m,f*=m}}if(u!==0){if(u===1)v+=d;else if(u===3)v+=d/2;else if(u===2)p=Math.max(1,p+d);else if(u===4){let m=i/a;p*=m,v*=m}}return{width:h,height:p,position:[f,v]}}fu(Zz(),1);var yve=`
	varying vec2 vUv;
	void main() {
		vUv = uv;
		gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
	}`,bve=`
	uniform sampler2D tDiffuse;
	varying vec2 vUv;
	void main() {
		vec4 texel = texture2D( tDiffuse, vUv );
		gl_FragColor = texel;
	}`,wve=new zb(-1,1,1,-1,0,1),xve=class extends Mi{constructor(){super(),this.setAttribute("position",new ri([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ri([0,2,0,0,2,0],2))}},Sve=new xve,Cve=class{constructor(e){this._mesh=new ra(Sve,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,wve)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},XV=new xr({defines:{},uniforms:{tDiffuse:new Pt(null)},vertexShader:yve,fragmentShader:bve}),_ve=new Cve(XV),Px=null,Tx=null,Mve=()=>(Px===null&&(Px=document.createElement("canvas")),Px),Eve=e=>(Tx===null&&(Tx=new HV(e)),Tx),Ave=yr.identity(),KV=class{constructor(e,t,i,r){this.uuid=e,this.width=t,this.height=i,this.context=r,this.enabled=!0,this.isScreenSpace=!1,this.dpr=window.devicePixelRatio,this.isFrameDirty=!1,this.onRenderRequestedDownstream=()=>{this.isFrameDirty=!0,this.context.shared.requestRender()},this._innerApplySize=()=>{let a=this.width,n=this.height,s=this.dpr;this.renderer.dpr=this.isScreenSpace?s:Math.floor(2048/Math.max(a,n)),this.renderer.setSize(a,n)},this.onFrameOverrideObjectEvent=a=>{var n,s;if(((n=a.target)==null?void 0:n.uuid)!==void 0){let o=(s=this.frameRoot)==null?void 0:s.find(a.target.uuid);o&&o.dispatchEvent({...a,target:o})}},this.scene2d=new VA(li.generateUUID(),V2.defaultData,{dpr:window.devicePixelRatio,shared:r.shared}),this.canvas=Mve(),this.renderer=Eve(this.canvas),this.promise=this.init(),this.renderTarget=new Mr(1,1,{type:au,stencilBuffer:!1,depthBuffer:!1}),r.shared.addUIBuffer(this.uuid,this.renderTarget),this.textureHolder=r.shared.uiBuffer(this.uuid)}get canvasTexture(){return this._canvasTexture||(this._canvasTexture=new IZ(this.canvas)),this._canvasTexture}async init(){this.renderer instanceof HV&&(this.renderer.wasmURL=yV.skiaWasmUrl),await this.renderer.init()}render(e){var t,i;if(this.isFrameDirty){this.isFrameDirty=!1,this._innerApplySize(),this.renderer.clear(),(t=this.frameOverride)==null||t.draw(this.renderer),this.renderer.render(),XV.uniforms.tDiffuse.value=this.canvasTexture,this.canvasTexture.needsUpdate=!0;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),e.clear(),_ve.render(e),e.setRenderTarget(r),(i=this.textureHolder)==null||i.setNeedsUpdate(!0)}}updateEntity2DByOp(e,t,i,r){this.scene2d.updateEntityByOp(e,t,i,r),this.applySize()}updateTreeByOp(e,t){this.scene2d.updateTreeByOp(e,t),this.applySize()}applyOverrides(e){if(this.frameOverride&&this.frameRoot){this.frameOverride.position=[0,0],this.frameOverride.rotation=0;let t=e?.width??this.width,i=e?.height??this.height;this.frameOverride.width=t,this.frameOverride.height=i,this.frameOverride.localMatrix=Ave,this.isScreenSpace&&(this.frameOverride.fill.color=Lr.from0to1([0,0,0,0])),this.frameOverride.data={...this.frameOverride.data,width:t,height:i},ZV({objectOverride:this.frameOverride,objectRoot:this.frameRoot,newParentWidth:this.frameOverride.width,newParentHeight:this.frameOverride.height,initialParentWidth:this.frameRoot.width,initialParentHeight:this.frameRoot.height}),this.frameOverride.updateWorldMatrix(!0,!1,!0)}}applySize(e,t=window.devicePixelRatio){var i,r;let a=Math.max(1,e?.width??this.width),n=Math.max(1,e?.height??this.height);this.dpr=t,this.width=a,this.height=n,this._innerApplySize();let s=1,o=512,l=512;(a*t<o||n*t<l)&&(s=Math.max(o/(a*t),l/(n*t))),this.renderTarget.setSize(a*t*s,n*t*s),(i=this._canvasTexture)==null||i.dispose(),this._canvasTexture=void 0,this.applyOverrides(e),(r=this.frameOverride)==null||r.requestRender()}applyFrame(e){var t,i;let r=this.context.scene.find2D(e);if(!(!r||!(r instanceof fl)))return this.disposeFrameOverride(),this.frameRoot=r,this.frameOverride=r.clone({dpr:this.renderer.dpr,shared:this.context.shared}),this.scene2d.add(this.frameOverride),this.applySize(),(t=this.frame)==null||t.addEventListener("render",this.onRenderRequestedDownstream),this.frameOverride.traverse(a=>{a.addEventListener("beginState",this.onFrameOverrideObjectEvent)}),this.frameOverride.traverse(a=>{a.addEventListener("completeState",this.onFrameOverrideObjectEvent)}),(i=this.frame)==null||i.requestRender(),r}get frame(){return this.frameOverride}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}find(e){return this.scene2d.find(e)}get texture(){var e;return(e=this.textureHolder)==null?void 0:e.getTexture(1001)}disposeFrameOverride(){var e,t,i;(e=this.frameOverride)==null||e.removeEventListener("render",this.onRenderRequestedDownstream),(t=this.frameOverride)==null||t.traverse(r=>{r.removeEventListener("beginStateChange",this.onFrameOverrideObjectEvent)}),(i=this.frameOverride)==null||i.traverse(r=>{r.removeEventListener("completeState",this.onFrameOverrideObjectEvent)}),this.frameOverride&&this.scene2d.remove(this.frameOverride)}};function ZV({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:a,initialParentHeight:n}){if(e instanceof fl&&t instanceof fl||e instanceof dc&&t instanceof dc)for(let s=0,o=e.children.length;s<o;s++){let l=e.children[s],u=t.children[s];l&&u&&l.uuid===u.uuid&&Tve({objectOverride:l,objectRoot:u,newParentWidth:i,newParentHeight:r,initialParentWidth:a,initialParentHeight:n})}}function Pve(e){if(gM(e))return[e.width,e.height];if(e instanceof r1){let[t,i]=e.getHalfSize();return[t*2,i*2]}else if(e instanceof dc){let[t,i]=e.recursiveBBox.getHalfSize();return[t*2,i*2]}return[0,0]}function Tve({objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:a,initialParentHeight:n}){let[s,o]=Pve(t),{width:l,height:u,position:c}=YV({constraints:e.data,newParentWidth:i,newParentHeight:r,initialParentWidth:a,initialParentHeight:n,objectInitialWidth:s,objectInitialHeight:o,objectInitialPosition:t.position});if(e.position=c,e.data={...e.data,position:c},e.states)for(let d in e.states)kve({stateId:d,objectOverride:e,objectRoot:t,newParentWidth:i,newParentHeight:r,initialParentWidth:a,initialParentHeight:n});if(gM(e)||e instanceof dc)gM(e)&&(e.width=l,e.height=u,e.data={...e.data,width:l,height:u}),ZV({objectOverride:e,objectRoot:t,newParentWidth:l,newParentHeight:u,initialParentWidth:s,initialParentHeight:o});else if(e instanceof r1){let d=t,h=s!==0?l/s:1,p=o!==0?u/o:1;e.path=mve(d.path,h,p),e.data={...e.data,path:e.path}}}function kve({stateId:e,objectOverride:t,objectRoot:i,newParentWidth:r,newParentHeight:a,initialParentWidth:n,initialParentHeight:s}){var o,l;let u=(o=t.states)==null?void 0:o[e],c=(l=i.states)==null?void 0:l[e];if(u&&c){let{width:d,height:h,position:p}=YV({constraints:t.data,newParentWidth:r,newParentHeight:a,initialParentWidth:n,initialParentHeight:s,objectInitialWidth:ed.isResizeable(c)?c.width:0,objectInitialHeight:ed.isResizeable(c)?c.height:0,objectInitialPosition:c.position});Object.assign(t.states[e],{position:p}),ed.isResizeable(u)&&Object.assign(t.states[e],{width:d,height:h})}}function gM(e){return e instanceof Gm||e instanceof fl||e instanceof RA||e instanceof NA}var Za=class extends fA(dl){constructor(e,t,i){super(),this.data=t,this.bgColor=new En(1,1,1,1),this.fog=null,this.backupFog=new SR(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new Bi,this.penumbraSizeArrayCache=null,this.super_Entity(e,t),this.personalCamera=new Fn(Cp,{...hm.defaultData,...t.camera,name:"Personal Camera"}),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new yQ(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight),t.uiScene?this.uiScene=new VA((Array.isArray(e)?e[0]:e)+"-ui",t.uiScene,{dpr:window.devicePixelRatio,shared:i.shared}):t.uiFrame&&this.createUICanvas(t.uiFrame,i)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}get frameId(){return this.data.uiFrame}get frame(){var e;return(e=this.uiCanvas)==null?void 0:e.frame}createUICanvas(e,t){this.uiCanvas=new KV(this.uuid+"-uiscreen",window.innerWidth,window.innerHeight,t),this.uiCanvas.isScreenSpace=!0,this.uiCanvas.promise.then(()=>{var i,r;(i=this.uiCanvas)==null||i.applyFrame(e),(r=this.uiCanvas)==null||r.applySize()})}updateVisible(){}setBackgroundColor(e){this.bgColor=e,this.fogUseBGColor===!0&&(this.backupFog.color=e)}entityChildrenCount(){return this.uiScene?this.uiScene.children.length:super.entityChildrenCount()}updateAmbientLight(e,t){e.color!==void 0&&(this.ambientLight.color=ts(e.color,t)),e.intensity!==void 0&&(this.ambientLight.intensity=e.intensity),e.enabled!==void 0&&(e.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(e){this.isActive=!0,e.fog=this.fog,this.traverseEntity(t=>{t instanceof vd&&t.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(e=>{if(e instanceof Ep)if(Array.isArray(e.material))for(let t of e.material)t.needsUpdate=!0;else e.material.needsUpdate=!0,e.material.dispose()})}updateShadow(e){e.softShadowQuality!==void 0&&this.isActive&&qme(e.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(e,t){if(e.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let i=this.scene;i.fog=this.fog}this.fogUseBGColor=e.useBackgroundColor,e.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=ts(e.color,t),this.backupFog.near=e.near,this.backupFog.far=e.far}updateAo(e,t){e.aoColor!==void 0&&(this.aoColor=ts(e.aoColor,t))}updateByOp(e,t,i,r){let a=this.data.uiFrame;super.updateByOp(e,t,i,r);let n=t;Vr(e.path,["fog"])?this.updateFog(n.fog,i.shared):Vr(e.path,["ao"])?this.updateAo(n.ao,i.shared):Vr(e.path,["ambient"])?this.updateAmbientLight(n.ambient,i.shared):Vr(e.path,["shadow"])?this.updateShadow(n.shadow):e.type===0&&e.path.length===0&&(e.props.uiFrame!==void 0||a!==n.uiFrame)&&this.updateUIFrame(e.props.uiFrame,i)}updateUIFrame(e,t){e?(this.uiCanvas||this.createUICanvas(e,t),this.uiCanvas.enabled=!0,this.uiCanvas.applyFrame(e)):this.uiCanvas&&(this.uiCanvas.enabled=!1)}updateState(e,t){this.updateState_Entity(e,t),e.backgroundColor!==void 0&&this.setBackgroundColor(ts(e.backgroundColor,t.shared)),e.fog!==void 0&&this.updateFog(e.fog,t.shared),e.ambient!==void 0&&this.updateAmbientLight(e.ambient,t.shared),e.ao!==void 0&&this.updateAo(e.ao,t.shared),e.shadow!==void 0&&this.updateShadow(e.shadow)}createFrame(e,t){}raycast(e,t){super.raycast(e,t)}switchActiveCamera(e){e&&e.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=e,e.objectHelper.visible=!1)}get playCamera(){var e;return((e=this.scene)==null?void 0:e.find(this.data.publish.playCamera))??this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let e=0,t=0;this.traverseEntity(i=>{if(!i.visible)return!0;i instanceof jV&&i.visible&&e<3&&(this.penumbraSizeArrayCache[e]=i.data.penumbraSize??.5,e+=1),i instanceof $V&&i.visible&&e<2&&(this.penumbraSizeArrayCache[3+t]=i.data.penumbraSize??.5,t+=1)})}raycastWithClones(e){let t=[],i=r=>{for(let a of r.children){let n=a.cloner;fr.is(a)&&(a.visible||n?.object.data.visible)&&((yo(a)||oM(a)&&this.scene.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,t),yM(a,e,t,!0)),i(a))}};return i(this),t}updateEntity2DByOp(e,t,i,r){var a;(a=this.uiCanvas)==null||a.updateEntity2DByOp(e,t,i,r)}},Ove=class extends LA(SQ,NV){constructor(e,t,i){super(),this.super_Entity(e,t),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let r=this.shadow.camera;r.fov=90,r.aspect=1,r.near=100,r.far=2500;let a=new V(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),n=new V(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z),s=new ba(a,n),o=new gy(s,new Bi(16755200));o.visible=!1,this.gizmos.shadowmap=o,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let e in this.gizmos){let t=this.gizmos[e];if(t instanceof gy){let i=this.shadow.camera,r=new V(-i.far+this.position.x,-i.far+this.position.y,-i.far+this.position.z),a=new V(i.far+this.position.x,i.far+this.position.y,i.far+this.position.z);t.box.set(r,a),t.updateMatrixWorld(!0)}}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.objectHelper&&this.objectHelper.update()}updateState(e,t){this.updateState_Light(e,t),e.distance!==void 0&&(this.distance=e.distance),e.decay!==void 0&&(this.decay=e.decay),e.shadowRadius!==void 0&&(this.shadow.radius=e.shadowRadius),e.shadowResolution!==void 0&&(this.shadow.mapSize.set(e.shadowResolution,e.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Dve=class extends Vn{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?SA(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},FA=class extends Vn{constructor(e,t,i){super(e,t,i),this._shapeId=null,this._context=i}updateState(e,t){super.updateState(e,t),this.updateShape()}updateShape(){var e;let t={...this.data.geometry.extrusion.shape};for(let a in t)typeof t[a]=="string"&&(t[a]=this._context.shared.getVariable(t[a],[this.uuid,"geometry","extrusion","shape",a]));let i;if(t.type==="Custom"){let a=t.shapeId;if(a!==this._shapeId&&this.detachShape(),a){this._shapeId=a;let n=this._context.scene.find(a);n?.data&&(n.attachedPaths.add(this),i=(e=n.geometry.userData)==null?void 0:e.shape),i||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let a;switch(t.type){case"Rectangle":a=xA;break;case"Ellipse":a=wA;break;case"Polygon":a=zN;break;case"Star":a=RN;break;default:throw new Error(`Unknown shape type: ${t.type}`)}i=a.create({parameters:t}).userData.shape}let r=this.geometry;i&&r.inputs&&(r.inputs.shapeData=i,r.build(),this.attachedSurfaceCloners.forEach(a=>a.update()))}detachShape(){var e;this._shapeId!==null&&((e=this._context.scene.find(this._shapeId))==null||e.attachedPaths.delete(this))}createGeometryDelayed(e){this.geometryCreateDeleyed=e.shared,this.updateShape(),this.refreshAttachedPaths(e)}updateTransformState(e,t){return super.updateTransformState(e,t)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.updateShape()}updateEntityBoxSize(e,t){let i=this.geometry.getAttribute("position");i!==void 0?SA(i,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:i.count,e,t):super.updateEntityBoxSize(e,t)}},jA=class extends IA{constructor(e,t,i){super(e,t,i),this.data=t}},Rh=class extends Ap(Kl,Wm){constructor(e,t,i){super(),t.type==="Instance"&&typeof e=="string"&&(t=this.transformAssignData(t,i)),this.super_Entity(e,t),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(e,t){let i=$y.getComponentData({scene:t.scene.data,shared:t.shared.data},e.component);if(i){let r,a;for(let n of Yu.rootOverrideProps)e[n]===void 0?(r===void 0&&(r={...e}),r[n]=i.data[n]):(a===void 0&&(a={}),a[n]=e[n],r===void 0&&(r={...e}),r[n]=tc.apply(i.data[n],e[n]));return this.overrideData=a,r}else return{...rn.defaultData,...e,...hl(rn.defaultData,Yu.rootOverrideProps)}}updateByOp(e,t,i,r){let a;if(this.isInstanceRoot&&!r){if(t=this.transformAssignData(t,i),e.type===0&&e.path.length===0&&this.component)for(let n of Yu.rootOverrideProps)n in e.props&&e.props[n]===void 0&&(a===void 0&&(a={...e,props:{...e.props}}),a.props[n]=this.component.data[n]);else if(e.type===0&&e.path.length>0&&Yu.rootOverrideProps.includes(e.path[0])){let n=e.path[0];a===void 0&&(a={...e,path:[],props:{[n]:t[n]}})}}super.updateByOp(a??e,t,i,r)}updateState(e,t){this.updateState_Entity(e,t)}expandInstanceChildren(e){let t=this.data;if(this.component===void 0){let i=e.scene.find(t.component)??null,r=!1;if(i!==this.oldComponent){if(this.oldComponent){let a=0;for(let n of this.children)if(fr.is(n))e.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(n),$A(n),a+=1;else break;this.children.splice(0,a)}r=!0}if(i){let a={};QV(e,[this.uuid],t.overrides,this,i,i,0,r,a);for(let n of this.children)if(fr.is(n)){let s=n.data;s.type==="Empty"&&s.animations&&n.traverseEntity(o=>{let l=o.dataPatched;if(o instanceof Vn&&l.bones&&l.boneInverses){let u=o.dataPatched;if(u.bones&&u.boneInverses){let c=u.bones.map(p=>e.scene.find(a[p])),d=u.boneInverses.map(p=>new zt().fromArray(p)),h=new kE(c,d);o.bind(h,o.bindMatrix)}}else o.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function $A(e){if(e.component){let t=e.component.instances.indexOf(e);t>=0&&e.component.instances.splice(t,1);for(let i of e.children)fr.is(i)&&$A(i)}}function _I(e,t,i,r){return e.component===t&&tA(e.identity,r)?e.overrideData===i?2:1:0}function QV(e,t,i,r,a,n,s,o,l){if(s>50)return!1;if(r.component!==a){if(r.component){let c=r.component.instances.indexOf(r);c>=0&&r.component.instances.splice(c,1)}a.instances.find(c=>c===r)||a.instances.push(r),r.component=a}a instanceof Rh&&a.isInstanceRoot&&a.expandInstanceChildren(e);let u=0;for(let c of a.children)if(fr.is(c)){let d=[...t,...typeof c.identity=="string"?[c.identity]:c.identity],h=Ny.resolve(i,d,1);h!=null&&!(h instanceof Da)&&(Object.setPrototypeOf(h,Da.prototype),console.error("wrong prototype"));let p=null,f;if(!o){let v=r.children[u];if(p=fr.is(v)?v:null,p!==null){let m=_I(p,c,h,d);f=m>=1?p.stateSelection:void 0,m!==2&&(p=null)}if(p===null&&(p=e.scene.findInstance(d)??null,p!==null)){let m=_I(p,c,h,d);if(f=m>=1?p.stateSelection:void 0,m!==2)p=null;else{let g=p.parent.children.indexOf(p);p.parent.children.splice(g,1),r.children.splice(u,0,p),p.parent===r?g<=u&&console.error("not possible"):(p.parent=r,p.matrixWorldNeedsUpdate=!0,p.resetBBoxNeedsUpdate(),p.updateVisible(),e.pendingDeletes.delete(p))}}}if(p===null){let v=h?tc.apply(c.data,h):c.data;fd.is(v.type)&&(v={...v,type:"Empty"}),p=Ku.createEntity(d,v,e),p.overrideData=h,r.add(p),r.children.splice(r.children.length-1,1),r.children.splice(u,0,p),p.updateState(p.data,e),f&&p.changeSelectedState(f,e),e.scene.registerInstanceAndSetUuid(p)}if(p.isBone){let v=p.identity[p.identity.length-1];l[v]=p.uuid}u+=1,QV(e,t,i,p,c,n,s+1,o,l)}if(!o){let c=u;for(;;){let d=r.children[u];if(fr.is(d))e.pendingDeletes.add(d);else break;u+=1}r.children.splice(c,u-c)}return!0}var Ive=class extends Ap(CR,Wm){constructor(e,t){super(),this.super_Entity(e,t),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(e,t){this.updateState_Entity(e,t)}},zn=class extends Vn{constructor(e,t,i){super(e,t,i),this.onBeforeRender=r=>{this.uiCanvas.render(r)},this.uiCanvas=new KV(e+"-canvas",t.geometry.width,t.geometry.height,i),this.uiCanvas.promise.then(()=>{this.applyFrame(this.dataPatched.geometry.frame,i.shared)})}updateByPatchedOpGeometry(e,t,i){super.updateByPatchedOpGeometry(e,t,i),e.type===0&&(e.props.frame!==void 0&&this.applyFrame(e.props.frame,i.shared),(e.props.width!==void 0||e.props.height!==void 0)&&this.applySize(e.props,i.shared))}applySize(e,t){let i=e?.width??this.dataPatched.geometry.width,r=e?.height??this.dataPatched.geometry.height;this.uiCanvas.applySize({width:i,height:r}),this.applyGeometryParametersFromFrame(t)}applyFrame(e,t){this.uiCanvas.applyFrame(e),this.applyGeometryParametersFromFrame(t),this.applyMaterialParametersFromFrame({shared:t})}applyGeometryParametersFromFrame(e){var t;let i=this.frame;i&&(Object.assign(this.data,{geometry:Object.assign(this.data.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),Object.assign(this.dataPatched,{geometry:Object.assign(this.dataPatched.geometry,{cornerRadius:i.cornerRadius,cornerType:0})}),(t=this.localGeometry)==null||t.dispose(),this.localGeometry=wm(this.dataPatched.geometry,e,this.data.flatShading,this))}applyMaterialParametersFromFrame(e){let t=this.frame;if(t){let i=t.data.backgroundBlur;Object.assign(this.data.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.data.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),Object.assign(this.dataPatched.material.layers[0].data.texture,{image:this.uiCanvas.uuid}),Object.assign(this.dataPatched.material.layers[1].data,{roughness:i.radius,alpha:i.enabled?1:0}),this.material.reset(this.dataPatched.material,e,!0)}}updateEntity2DByOp(e,t,i,r){this.uiCanvas.updateEntity2DByOp(e,t,i,r),e===this.frameId&&t.type===0&&(t.props.cornerRadius!==void 0?this.applyGeometryParametersFromFrame(r):Vr(t.path,["backgroundBlur"])&&this.applyMaterialParametersFromFrame({shared:r}))}get frame(){return this.uiCanvas.frame}get frameId(){var e;return(e=this.frame)==null?void 0:e.uuid}removeInteractionGeometry(e){super.removeInteractionGeometry(e),this.applySize({},e)}updateGeometryInteractions(e,t){super.updateGeometryInteractions(e,t),this.applySize({width:e.width,height:e.height},t)}},Lve=class{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let r=Pa,a=new dl,n=new wd;n.position.z=1;let s={passThruTexture:{value:null}},o=c(h(),s),l=new ra(new su(2,2),o);a.add(l),this.setDataType=function(p){return r=p,this},this.addVariable=function(p,f,v){let m=this.createShaderMaterial(f),g={name:p,initialValueTexture:v,material:m,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Ar,magFilter:Ar};return this.variables.push(g),g},this.setVariableDependencies=function(p,f){p.dependencies=f},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let p=0;p<this.variables.length;p++){let f=this.variables[p];f.renderTargets[0]=this.createRenderTarget(e,t,f.wrapS,f.wrapT,f.minFilter,f.magFilter),f.renderTargets[1]=this.createRenderTarget(e,t,f.wrapS,f.wrapT,f.minFilter,f.magFilter),this.renderTexture(f.initialValueTexture,f.renderTargets[0]),this.renderTexture(f.initialValueTexture,f.renderTargets[1]);let v=f.material,m=v.uniforms;if(f.dependencies!==null)for(let g=0;g<f.dependencies.length;g++){let y=f.dependencies[g];if(y.name!==f.name){let b=!1;for(let x=0;x<this.variables.length;x++)if(y.name===this.variables[x].name){b=!0;break}if(!b)return"Variable dependency not found. Variable="+f.name+", dependency="+y.name}m[y.name]={value:null},v.fragmentShader=`
uniform sampler2D `+y.name+`;
`+v.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){let p=this.currentTextureIndex,f=this.currentTextureIndex===0?1:0;for(let v=0,m=this.variables.length;v<m;v++){let g=this.variables[v];if(g.dependencies!==null){let y=g.material.uniforms;for(let b=0,x=g.dependencies.length;b<x;b++){let S=g.dependencies[b];y[S.name].value=S.renderTargets[p].texture}}this.doRenderTarget(g.material,g.renderTargets[f])}this.currentTextureIndex=f},this.getCurrentRenderTarget=function(p){return p.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(p){return p.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){l.geometry.dispose(),l.material.dispose();let p=this.variables;for(let f=0;f<p.length;f++){let v=p[f];v.initialValueTexture&&v.initialValueTexture.dispose();let m=v.renderTargets;for(let g=0;g<m.length;g++)m[g].dispose()}};function u(p){p.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=u;function c(p,f){f=f||{};let v=new xr({uniforms:f,vertexShader:d(),fragmentShader:p});return u(v),v}this.createShaderMaterial=c,this.createRenderTarget=function(p,f,v,m,g,y){return p=p||e,f=f||t,v=v||Zr,m=m||Zr,g=g||Ar,y=y||Ar,new Mr(p,f,{wrapS:v,wrapT:m,minFilter:g,magFilter:y,format:Ja,type:r,depthBuffer:!1})},this.createTexture=function(){let p=new Float32Array(e*t*4),f=new qs(p,e,t,Ja,Pa);return f.needsUpdate=!0,f},this.renderTexture=function(p,f){s.passThruTexture.value=p,this.doRenderTarget(o,f),s.passThruTexture.value=null},this.doRenderTarget=function(p,f){let v=i.getRenderTarget(),m=i.xr.enabled,g=i.shadowMap.autoUpdate,y=i.outputEncoding,b=i.toneMapping;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,i.outputEncoding=To,i.toneMapping=cl,l.material=p,i.setRenderTarget(f),i.render(a,n),l.material=o,i.xr.enabled=m,i.shadowMap.autoUpdate=g,i.outputEncoding=y,i.toneMapping=b,i.setRenderTarget(v)};function d(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function h(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}},vn=new xn,bg=new V,Bve=class{constructor(e){let t=e.geometry;if(!t.isBufferGeometry||t.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){let e=this.positionAttribute,t=this.weightAttribute,i=new Float32Array(e.count/3);for(let a=0;a<e.count;a+=3){let n=1;t&&(n=t.getX(a)+t.getX(a+1)+t.getX(a+2)),vn.a.fromBufferAttribute(e,a),vn.b.fromBufferAttribute(e,a+1),vn.c.fromBufferAttribute(e,a+2),n*=vn.getArea(),i[a/3]=n}this.distribution=new Float32Array(e.count/3);let r=0;for(let a=0;a<i.length;a++)r+=i[a],this.distribution[a]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,i){let r=this.distribution[this.distribution.length-1],a=this.binarySearch(this.randomFunction()*r);return this.sampleFace(a,e,t,i)}binarySearch(e){let t=this.distribution,i=0,r=t.length-1,a=-1;for(;i<=r;){let n=Math.ceil((i+r)/2);if(n===0||t[n-1]<=e&&t[n]>e){a=n;break}else e<t[n]?r=n-1:i=n+1}return a}sampleFace(e,t,i,r){let a=this.randomFunction(),n=this.randomFunction();return a+n>1&&(a=1-a,n=1-n),vn.a.fromBufferAttribute(this.positionAttribute,e*3),vn.b.fromBufferAttribute(this.positionAttribute,e*3+1),vn.c.fromBufferAttribute(this.positionAttribute,e*3+2),t.set(0,0,0).addScaledVector(vn.a,a).addScaledVector(vn.b,n).addScaledVector(vn.c,1-(a+n)),i!==void 0&&vn.getNormal(i),r!==void 0&&this.colorAttribute!==void 0&&(vn.a.fromBufferAttribute(this.colorAttribute,e*3),vn.b.fromBufferAttribute(this.colorAttribute,e*3+1),vn.c.fromBufferAttribute(this.colorAttribute,e*3+2),bg.set(0,0,0).addScaledVector(vn.a,a).addScaledVector(vn.b,n).addScaledVector(vn.c,1-(a+n)),r.r=bg.x,r.g=bg.y,r.b=bg.z),this}};function zve(e){let t=new Float32Array(e*e*2);for(let i=0;i<e;i++)for(let r=0;r<e;r++){let a=i*e+r;t[a*2+0]=i/(e-1),t[a*2+1]=r/(e-1)}return t}function Rve(e){let t=Math.ceil(Math.sqrt(e));return Math.max(t,1)}function Nve(e,t){let i=new ra(e.geometry,e.material),r=[],a=[],n=new V,s=new V;i.geometry.index!==null&&(i.geometry=i.geometry.toNonIndexed());let o=new Bve(i).build();for(let c=0;c<t;c++)o.sample(n,s),r.push(n.x,n.y,n.z),a.push(s.x,s.y,s.z);let l=new Float32Array(r),u=new Float32Array(a);return{positions:l,normals:u}}function MI(e,t){let i=e,r=new Float32Array(4*t*t);for(let n=0;n<t*t;n++)r[4*n]=i[3*n],r[4*n+1]=i[3*n+1],r[4*n+2]=i[3*n+2],r[4*n+3]=0;let a=new qs(r,t,t,Ja,Pa);return a.needsUpdate=!0,a}function Vve({size:e}){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=r,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new qs(t,e,e,Ja,Pa);return i.needsUpdate=!0,i}function Fve(e){let t=new Float32Array(4*e*e);for(let r=0;r<e*e;r++)t[4*r]=0,t[4*r+1]=0,t[4*r+2]=0,t[4*r+3]=0;let i=new qs(t,e,e,Ja,Pa);return i.needsUpdate=!0,i}var jve=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform float uTime;
uniform float uSpeed;     // update speed of the particles
uniform vec3 uWorldOffset;    
uniform vec4 uWorldQuaternion;
uniform float uMaxLifeTime;
uniform vec3 uEmitterSize;
uniform float uFPSRatio;     // 1  for 60 FPS

float random (vec2 st) {
    return fract(sin(dot(st.xy,
        vec2(12.9898,78.233)))*
        43758.5453123);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
    vec3 acceleration = force / mass;
    
    return acceleration;
  }
  

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    float currentLife = texture2D( uCurrentPosition, vUv ).w;   // from 1 to 0
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).r;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;          // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;         // timeStart in seconds when the particle was emitted
    vec3 originalPosition = ((texture2D( uOriginalPosition, vUv ).xyz) * uEmitterSize);
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float collisionFlag = texture2D( uCurrentVelocity, vUv ).w;             // 1. = collided, 0. = not collided
    float lifeTime = uMaxLifeTime;

    // Calculate the position adjustment based on collision
    //     if (collisionFlag > .5) {  
    float isColliding = step(0.5, collisionFlag); // 1.0 if collisionFlag > 0.5, otherwise 0.0
    float bounceOffset = 3.0 * isColliding; // Becomes 3.0 if colliding, 0.0 otherwise
    vec3 collisionAdjustedVelocity = velocity * (1.0 + bounceOffset);

    // Update position based on collision or normal movement
    vec3 fpsVelocity = velocity * min(uFPSRatio, 5.0);
    position += mix(fpsVelocity, collisionAdjustedVelocity, isColliding);

    // EMISSION RATE - BIRTH
    // if (isSpawning == 1.0) {
    // Better Approach to avoid If statement
    vec3 newPosition = applyQuaternionToVector(uWorldQuaternion, originalPosition) + uWorldOffset;
    originalPosition = mix(originalPosition, newPosition, isSpawning);
    position = mix(position, originalPosition, isSpawning);;
    timeStart = mix(timeStart, uTime, isSpawning);

    // Calculate timeLeft for life normalization
    float timeLeft = max(lifeTime - (uTime - timeStart), 0.0);
    float life_Normalize = timeLeft / lifeTime;

    // Use isActive to blend between the calculated color and black
    vec4 activeColor = vec4(position, life_Normalize);
    // if (isActive == 1.0) {
    gl_FragColor = mix(vec4(0.0), activeColor, isActive);

}
`,$ve=`

    vec3 mod289(vec3 x) {
      return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 mod289(vec4 x) {
    return x - floor(x * (1.0 / 289.0)) * 289.0;
    }
    
    vec4 permute(vec4 x) {
        return mod289(((x*34.0)+1.0)*x);
    }
    
    vec4 taylorInvSqrt(vec4 r)
    {
    return 1.79284291400159 - 0.85373472095314 * r;
    }
    
    vec3 fade(vec3 t) {
  return t*t*t*(t*(t*6.0-15.0)+10.0);
}

    float snoise(vec3 v)
    {
    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
    vec3 i  = floor(v + dot(v, C.yyy) );
    vec3 x0 =   v - i + dot(i, C.xxx) ;
    vec3 g = step(x0.yzx, x0.xyz);
    vec3 l = 1.0 - g;
    vec3 i1 = min( g.xyz, l.zxy );
    vec3 i2 = max( g.xyz, l.zxy );
    vec3 x1 = x0 - i1 + C.xxx;
    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y
    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y
    
    // Permutations
    i = mod289(i);
    vec4 p = permute( permute( permute(
                i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
              + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))
              + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
    
    // Gradients: 7x7 points over a square, mapped onto an octahedron.
    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)
    float n_ = 0.142857142857; // 1.0/7.0
    vec3  ns = n_ * D.wyz - D.xzx;
    
    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)
    
    vec4 x_ = floor(j * ns.z);
    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
    
    vec4 x = x_ *ns.x + ns.yyyy;
    vec4 y = y_ *ns.x + ns.yyyy;
    vec4 h = 1.0 - abs(x) - abs(y);
    
    vec4 b0 = vec4( x.xy, y.xy );
    vec4 b1 = vec4( x.zw, y.zw );
    
    vec4 s0 = floor(b0)*2.0 + 1.0;
    vec4 s1 = floor(b1)*2.0 + 1.0;
    vec4 sh = -step(h, vec4(0.0));
    
    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
    
    vec3 p0 = vec3(a0.xy,h.x);
    vec3 p1 = vec3(a0.zw,h.y);
    vec3 p2 = vec3(a1.xy,h.z);
    vec3 p3 = vec3(a1.zw,h.w);
    
    //Normalise gradients
    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
    p0 *= norm.x;
    p1 *= norm.y;
    p2 *= norm.z;
    p3 *= norm.w;
    
    // Mix final noise value
    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
    m = m * m;
    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),
                                  dot(p2,x2), dot(p3,x3) ) );
    }
    
    vec3 snoiseVec3( vec3 x ){
    
      float s  = snoise(vec3( x ));
      float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));
      float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));
      vec3 c = vec3( s , s1 , s2 );
      return c;
    
    }
    
      
    vec3 curlNoise( vec3 p, float seed){
      p += seed;
      const float e = .1;
      vec3 dx = vec3( e   , 0.0 , 0.0 );
      vec3 dy = vec3( 0.0 , e   , 0.0 );
      vec3 dz = vec3( 0.0 , 0.0 , e   );
    
      vec3 p_x0 = snoiseVec3( p - dx );
      vec3 p_x1 = snoiseVec3( p + dx );
      vec3 p_y0 = snoiseVec3( p - dy );
      vec3 p_y1 = snoiseVec3( p + dy );
      vec3 p_z0 = snoiseVec3( p - dz );
      vec3 p_z1 = snoiseVec3( p + dz );
    
      float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
      float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
      float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;
    
      const float divisor = 1.0 / ( 2.0 * e );
      return normalize( vec3( x , y , z ) * divisor );
    
    }


// Classic Perlin noise
float cnoise(vec3 P)
{
  vec3 Pi0 = floor(P); // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod289(Pi0);
  Pi1 = mod289(Pi1);
  vec3 Pf0 = fract(P); // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = permute(permute(ix) + iy);
  vec4 ixy0 = permute(ixy + iz0);
  vec4 ixy1 = permute(ixy + iz1);

  vec4 gx0 = ixy0 * (1.0 / 7.0);
  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 * (1.0 / 7.0);
  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);

  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
  return 2.2 * n_xyz;
}


vec3 fbm_vec3(vec3 p, float frequency, float offset)
{
  return vec3(
    cnoise((p+vec3(offset))*frequency),
    cnoise((p+vec3(offset+20.0))*frequency),
    cnoise((p+vec3(offset-30.0))*frequency)
  );
}

`,Uve=`
  #ifdef USE_COLLIDER
    float restitution = max(uBounce * 2., .01); // Energy Loss
    // SPHERE COLLIDER
    // **************************************************************
    #ifdef USE_SPHERE_COLLIDER       
      // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
      vec3 radii = uColliderSize;
      // Adjust position relative to collider
      vec3 relPos = position - uColliderPos;
      // Apply rotation of the collider to the relative position
      relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
      // Scale relative position by radii (for ellipsoid collision detection)
      vec3 scaledPos = relPos / radii;
      // Calculate ellipsoidal distance
      float dist = length(scaledPos); // Distance in terms of ellipsoid
      
      // Check for collision
      if (dist <= 1. + particleSize / length(radii) && collisionFlag == 0.0) {
          // Compute the normal at the collision point, accounting for particle size
        vec3 adjustedPos = scaledPos * (1.0 + particleSize / length(radii));          
        // Compute the normal at the collision point
        vec3 normal = ellipsoidNormal(adjustedPos, radii);
        // Rotate the normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);
        // Reflect the velocity vector off the normal
        velocity = reflect(velocity, normal) * restitution;

        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif

    // BOX COLLIDER or PLANE COLLIDER 
    // **************************************************************
    #ifdef USE_BOX_COLLIDER
      // Box dimensions and repulsion variables
      vec3 boxHalfSize = uColliderSize / 2.0;
      // Convert world position to box's local space
      vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
      // Collision detection
      vec3 localDistance = abs(localPos) - boxHalfSize;
      float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));    

      // Collision Detected
      if (distToSurface <= particleSize * 0.5 && collisionFlag == 0.0) {      
        // Find the nearest face normal for bounce direction
        vec3 normal;
        if (localDistance.x > localDistance.y && localDistance.x > localDistance.z) {
            normal = vec3(sign(localPos.x), 0.0, 0.0);
        } else if (localDistance.y > localDistance.z) {
            normal = vec3(0.0, sign(localPos.y), 0.0);
        } else {
            normal = vec3(0.0, 0.0, sign(localPos.z));
        }            
        // Rotate normal back to world space
        normal = applyQuaternionToVector(uColliderQuaternion, normal);      
        // Reflect velocity and apply repulsion force
        velocity = reflect(velocity, normal) * restitution;
        
        collisionFlag = 1.0;
      } else {
        collisionFlag = 0.0;
      }
    #endif      
  #endif      
  // END COLLIDER    
`,Wve=`
  #ifdef USE_ATTRACTOR

      #ifdef USE_SPHERE_COLLIDER      
        // Convert collider size to radii (assuming uColliderSize is the diameter in each axis)
        vec3 radii = uColliderSize;
        // Adjust position relative to collider
        vec3 relPos = position - uColliderPos;
        // Apply rotation of the collider to the relative position
        relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
        // Scale relative position by radii (for ellipsoid collision detection)
        vec3 scaledPos = relPos / radii;
        // Calculate ellipsoidal distance
        float distToSurface = length(scaledPos); // Distance in terms of ellipsoid
        float insideCheck = 1.0;

      #endif


      #ifdef USE_BOX_COLLIDER
        // Box dimensions
        vec3 boxHalfSize = uColliderSize / 2.0;
        // Convert world position to box's local space
        vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
        vec3 localDistance = abs(localPos) - boxHalfSize;
        float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));
        float insideCheck = particleSize;
      #endif      
  
      // Apply vortex force inside the Helper
      #ifdef USE_FORCE_LOCAL_SPACE
        if (distToSurface <= insideCheck ) {    
            // Define parameters for the attractor field
            #ifdef USE_SPHERE_COLLIDER      
              float attractorStrength = (1.0 - distToSurface ) * uForceIntensity; // Adjust as needed
            #endif

            #ifdef USE_BOX_COLLIDER
              float attractorStrength = max((1.0 - insideCheck / distToSurface), 0.) * uForceIntensity; // Adjust as needed
              #endif

            float attractorDamping = uForceDamping;  // Adjust as needed (higher values will attenuate velocity more)
          
            // Use the same radii calculation code as for the collider
            vec3 attractorRadii = uColliderSize;
            // Adjust position relative to attractor center
            vec3 relPos = position - uColliderPos;
            // Apply rotation of the collider to the relative position
            relPos = applyQuaternionToVector(uColliderQuaternionInvert, relPos);            
            // Scale relative position by radii (for ellipsoid attraction)
            vec3 scaledPos = relPos / attractorRadii;

            // Calculate ellipsoidal distance as attractor radius
            float attractorRadius = length(scaledPos);
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * attractorStrength;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= attractorDamping;
        }
      #else 
            // Calculate the distance from the attractor center
            vec3 relativePosition = position - uColliderPos;
            // Calculate the force vector towards the attractor center
            vec3 attractorForce = normalize(relativePosition) * uForceIntensity;
            // Apply the attractor force to the particle
            velocity -= attractorForce;
            // Attenuate the particle's velocity
            velocity *= uForceDamping;
      #endif    
  #endif      
`,Hve=`
  #ifdef USE_VORTEX
    // Box dimensions
    vec3 boxHalfSize = uColliderSize / 2.0;
    // Convert world position to box's local space
    vec3 localPos = applyQuaternionToVector(uColliderQuaternionInvert, position - uColliderPos);      
    vec3 localDistance = abs(localPos) - boxHalfSize;
    float distToSurface = max(localDistance.x, max(localDistance.y, localDistance.z));

    // Apply vortex force inside the box
    if (distToSurface <= particleSize) {
      float vortexStrength = uForceIntensity;
      vec3 localTopCenter = vec3(0.0, 0., 0.0);

      // Transform the local top center to the world space
      vec3 vortexCenter = uColliderPos + applyQuaternionToVector(uColliderQuaternion, localTopCenter);
      // Calculate the vector from particle to vortex center
      vec3 vortexVector = vortexCenter - position;

      // Calculate the rotation axis from the inverse of the collider's quaternion and the fixed up vector
      // Note: important to add a tiny z component to the up vector to avoid instability
      vec3 upVector = vec3(0.0, 1.0, 0.01);
      vec3 rotationAxis = cross(upVector, applyQuaternionToVector(uColliderQuaternion, vortexVector));
      rotationAxis = normalize(rotationAxis);

      // Add rotational component to velocity
      float rotationSpeed = length(vortexVector * vortexStrength * 3.0) ; 

      vec3 rotationVelocity = rotationAxis * rotationSpeed;
      // velocity += rotationVelocity * 0.005 ;
      velocity = rotationVelocity * 0.005 ;

      // Calculate vortex force
      // vec3 vortexForce = normalize(vortexVector) * uSpeed * .1 ;
      // Apply the vortex force to the particle
      vec3 originDirection = applyQuaternionToVector(uWorldQuaternion, directions);
      velocity += applyForce( originDirection * uSpeed * (1. - uForceDamping) , mass * .5);
    }
  #endif      
`,Gve=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU
uniform sampler2D uOriginalPosition;
uniform sampler2D uDirections;     
uniform vec3 uDirectionsAxis;
uniform vec4 uWorldQuaternion;
uniform vec3 uGravity;        
uniform float uNoiseStrength;     // Variation of the noise
uniform float uNoiseScale;        // Scale of the noise
uniform float uNoiseSeed;         // Seed of the noise
uniform float particleSize;
uniform float uSpeed;     // update speed of the particles
uniform float uRandomMassFactor;

// COLLIDER
uniform vec3 uColliderPos;                // Collider Position
uniform vec3 uColliderSize;               // Collider Dimension
uniform vec4 uColliderQuaternion;         // Collider Rotation
uniform vec4 uColliderQuaternionInvert;   // Collider Rotation
uniform float uBounce;                    // Bounce factor
uniform float uForceDamping;
uniform float uForceIntensity;


`+$ve+`
float rand(vec2 co){
    return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);
}
vec3 applyQuaternionToVector( vec4 q, vec3 v ){
    return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
 } 
vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
  
  return acceleration;
}

vec4 conjugate(vec4 q) {
  return vec4(q.w, -q.x, -q.y, -q.z);
}

// Function to compute the normal of the ellipsoid at a given point
vec3 ellipsoidNormal(vec3 p, vec3 radii) {
  return normalize(p / (radii * radii));
}

float friction = .3;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    vec3 position = texture2D( uCurrentPosition, vUv ).xyz;
    vec3 originalPosition = texture2D( uOriginalPosition, vUv ).xyz;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    vec3 directions = texture2D( uDirections, vUv ).xyz;    
    vec3 velocity = texture2D( uCurrentVelocity, vUv ).xyz;
    float mass = rand(originalPosition.xy) * 0.5 + 0.5;
    float isSpawning = texture2D( uCurrentEmissionRate, vUv ).x;        // 1. = spawning, 0. = not spawning
    float isActive = texture2D( uCurrentEmissionRate, vUv ).y;          // 1. = active, 0. = not active
    float collisionFlag =texture2D( uCurrentVelocity, vUv ).w;          // Indicate collision

    // Randomness Mass
    mass = (1.0 - (uRandomMassFactor * mass));
    
    if (isActive == 1.0) {
      // **************************************************************
      // FORCES NOISES
      // **************************************************************
      #ifdef USE_CURL_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = curlNoise(position * uNoiseScale * .002, uNoiseSeed) * ( uNoiseStrength + 1.0) * .05 * uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {
          velocity += curlNoise( position, uNoiseSeed)  * uNoiseStrength * 0.05 * uSpeed;
        }
      #endif
      // **************************************************************
      #ifdef USE_SIMPLEX_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = vec3(snoise(position * uNoiseScale * .001) * ( uNoiseStrength + 1.0) * .1);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0) {
          velocity += vec3(snoise(position * uNoiseStrength * .001) * .05 * uSpeed);
        }
      #endif
      // ************************************************************** 
      #ifdef USE_FBM_NOISE
        if (uNoiseScale > 0.0 ) {
          velocity = fbm_vec3(position * uNoiseScale * .001, ( uNoiseStrength + 1.0), uNoiseSeed);
          velocity *= uSpeed;
        }
        // Variation of the noise Over Time
        if (uNoiseStrength > 0.0 && uNoiseScale == 0.0 ) {      
          velocity += fbm_vec3(position * uNoiseStrength * .001, ( uNoiseStrength + 1.0), uNoiseSeed) * .1 * uSpeed;
        }
      #endif

      // COLLIDER
      ${Uve}
      // ATTRACTION
      ${Wve}  
      // VORTEX
      ${Hve}
    } 
    // End isActive

    // SPAWN BIRTH 
    // **************************************************************
    // if (isSpawning == 1.)
    #ifdef USE_NORMALS
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, directions) * uSpeed, isSpawning);
    #else
      velocity = mix(velocity, applyQuaternionToVector(uWorldQuaternion, uDirectionsAxis) * uSpeed, isSpawning);    
    #endif
    
    // if (collisionFlag == 0.0)
    velocity += applyForce(uGravity, mass * .5) * (1.0 - collisionFlag);

    gl_FragColor = vec4(velocity, collisionFlag);
}
`,JV=`

  // Linear Fade In
  float linearFadeIn(float t) {
    return t;
  }


  // linear fade out
  float linearFadeOut(float t) {
    return 1.0 - t;
  }
  
  float linearInOut(float t) {
    return t < 0.5 ? t :  (1.0 - t);  
  }

    // lerp
    float lerp(float a, float b, float t) {
      return a + (b - a) * t;
    }

  // Ease In Out Quart
  float exponentialInOut(float t) {
    return t < 0.4 ? lerp(0.0, 1.0, t / 0.4) :
    t > 0.6 ? lerp(1.0, 0.0, (t - 0.6) / 0.4) :
    1.0;
   }

  // constant
  float constant(float t) {
    return 1.0;
  } 
`,qve=`

float rand(vec3 co){
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

vec3 applyQuaternionToVector( vec4 q, vec3 v ){
  return v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );
}

vec3 applyForce(vec3 force, float mass) {
  vec3 acceleration = force / mass;
    
  return acceleration;
}
`,Yve=`
vec3 rgb2xyz (in vec3 rgb) {
    float r = rgb.r;
	float g = rgb.g;
	float b = rgb.b;

	r = r > 0.04045 ? pow(((r + 0.055) / 1.055), 2.4) : (r / 12.92);
	g = g > 0.04045 ? pow(((g + 0.055) / 1.055), 2.4) : (g / 12.92);
	b = b > 0.04045 ? pow(((b + 0.055) / 1.055), 2.4) : (b / 12.92);

	float x = (r * 0.4124) + (g * 0.3576) + (b * 0.1805);
	float y = (r * 0.2126) + (g * 0.7152) + (b * 0.0722);
	float z = (r * 0.0193) + (g * 0.1192) + (b * 0.9505);
    
    vec3 xyz = vec3(
        (r * 0.4124) + (g * 0.3576) + (b * 0.1805) * 100.0,
        (r * 0.2126) + (g * 0.7152) + (b * 0.0722) * 100.0,
        (r * 0.0193) + (g * 0.1192) + (b * 0.9505) * 100.0
    );
    return(xyz);
}

vec3 xyz2lab (in vec3 xyz) {
	float x = xyz.x / 95.047;
	float y = xyz.y / 100.0;
	float z = xyz.z / 108.883;

	x = x > 0.008856 ? pow(x, 1.0 / 3.0) : (7.787 * x) + (16.0 / 116.0);
	y = y > 0.008856 ? pow(y, 1.0 / 3.0) : (7.787 * y) + (16.0 / 116.0);
	z = z > 0.008856 ? pow(z, 1.0 / 3.0) : (7.787 * z) + (16.0 / 116.0);

    vec3 lab = vec3((116.0 * y) - 16.0, 500.0 * (x - y), 200.0 * (y - z));
    return(lab);
}

vec3 rgb2lab(in vec3 rgb) {
    vec3 xyz = rgb2xyz(rgb);
    vec3 lab = xyz2lab(xyz);
    return(lab);
}

vec3 xyz2rgb (in vec3 xyz) {
	float x = xyz.x / 100.0;
	float y = xyz.y / 100.0;
	float z = xyz.z / 100.0;
	
    
	float r = (x *  3.2406) + (y * -1.5372) + (z * -0.4986);
	float g = (x * -0.9689) + (y *  1.8758) + (z *  0.0415);
	float b = (x *  0.0557) + (y * -0.2040) + (z *  1.0570);

	r = r > 0.0031308 ? ((1.055 * pow(r, 1.0 / 2.4)) - 0.055) : r * 12.92;
	g = g > 0.0031308 ? ((1.055 * pow(g, 1.0 / 2.4)) - 0.055) : g * 12.92;
	b = b > 0.0031308 ? ((1.055 * pow(b, 1.0 / 2.4)) - 0.055) : b * 12.92;

	r = min(max(0.0, r), 1.0);
	g = min(max(0.0, g), 1.0);
	b = min(max(0.0, b), 1.0);

	return(vec3(r, g, b));
}

vec3 lab2xyz (in vec3 lab) {
    float l = lab.x;
	float a = lab.y;
	float b = lab.z;

  	float y = (l + 16.0) / 116.0;
	float x = a / 500.0 + y;
	float z = y - b / 200.0;

	float y2 = pow(y, 3.0);
	float x2 = pow(x, 3.0);
	float z2 = pow(z, 3.0);

  	y = y2 > 0.008856 ? y2 : (y - 16.0 / 116.0) / 7.787;
	x = x2 > 0.008856 ? x2 : (x - 16.0 / 116.0) / 7.787;
	z = z2 > 0.008856 ? z2 : (z - 16.0 / 116.0) / 7.787;

	x *= 95.047;
	y *= 100.0;
	z *= 108.883;

	return(vec3(x, y, z));
}
vec3 lab2rgb (in vec3 lab) {
    vec3 xyz = lab2xyz(lab);
    vec3 rgb = xyz2rgb(xyz);
    return(rgb);
}

`,Xve=`
  uniform sampler2D uPosition;
  uniform float uSize;
  uniform float uSizeEnd;
  uniform vec3 uWorldOffset;
  uniform vec4 uWorldQuaternion;
  // Billboard Behavior - Currently at Zero, but we can change that
  uniform float uRotation;
  uniform float uRotationEnd;
  uniform vec2 center;

  // Randomness
  uniform float uRandScaleFactor;
  uniform float uRandRotationFactor;

  attribute vec2 ref;

  varying float v_LifeLeft;    // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  ${qve}
  ${JV}
`,Kve=({easeSize:e="linearFadeOut"})=>`
  vUv = uv;  
  vRef = ref;
  // Normalized LifeTime 1 to 0
  float lifeLeft = texture2D(uPosition, ref).w;
  v_LifeLeft = lifeLeft;
  // Position From DataTexture Simulation
  vec3 pos = texture2D(uPosition, ref).rgb - uWorldOffset;
  // Apply World Quaternion
  pos = applyQuaternionToVector(uWorldQuaternion, pos);  
            
  #ifdef  USE_SIZE_END
    // Scaled Over Time
    float t = 1. - lifeLeft;
    float currentSize = mix(uSize, uSizeEnd, t); // Linearly interpolate between uSize and uSizeEnd
    vec3 scaledPosition = position * vec3(currentSize);
  #else
    // Change Size Behavior over LifeTime
    float easeSize = ${e}(1. - lifeLeft);
    // Scaled Over Time
    vec3 scaledPosition = position * vec3(uSize * easeSize);
  #endif

  // Billboard Behavior
  vec2 scale;
  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );    
  // Randomness 
  float randRef = rand(ref);
  scale *= (1.0 - (uRandScaleFactor * randRef));
  // Rotation
  float randRotation =  2.0 * PI * ( uRandRotationFactor * randRef);
  float originalRotation = (1.0 - uRotation) * 2.0 * PI;
  float originalRotationEnd = (1.0 - uRotationEnd) * 2.0 * PI;
  // OverTime
  float finalRotation = mix(originalRotation + randRotation, originalRotationEnd + randRotation, lifeLeft);

  vec2 alignedPosition = ( scaledPosition.xy - ( center - vec2( 0.5 ) ) ) * scale;
  vec2 rotatedPosition;
  rotatedPosition.x = cos( finalRotation ) * alignedPosition.x - sin( finalRotation ) * alignedPosition.y;
  rotatedPosition.y = sin( finalRotation ) * alignedPosition.x + cos( finalRotation ) * alignedPosition.y;
  
  mat4 instanceMatrix = mat4(
    vec4(1.0, 0.0, 0.0, 0.0),
    vec4(0.0, 1.0, 0.0, 0.0),
    vec4(0.0, 0.0, 1.0, 0.0),
    vec4(pos.x, pos.y, pos.z, 1.0)
  );  

  mvPosition = modelViewMatrix * instanceMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
  mvPosition.xy += rotatedPosition;
  gl_Position = projectionMatrix  * mvPosition;   
`,Zve=`
  uniform vec4 uColor;                // start color
  uniform vec4 uColor2;               // end color
  uniform sampler2D uTexture;         // texture
  varying float v_LifeLeft;   // normalized lifetime 1 to 0
  varying vec2 vUv;
  varying vec2 vRef;

  float random(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
  }
  `+JV+`  
  ${Yve}

`,Qve=({easeOpacity:e="linearFadeOut"})=>`  
  // if Particle is dead, hide it
  if (v_LifeLeft <= 0.005 ) {
    discard;
  }

  #ifdef USE_RANDOM_COLORING
    float randVal = random(vRef); // Generate a random value based on the reference
    vec4 color = mix(uColor, uColor2, randVal); // Interpolate between the two colors
  #else
    vec4 color = mix(uColor, uColor2, 1. - v_LifeLeft);
  #endif

  // Opacity over Life Time
  float finalAlpha = ${e}(1. - v_LifeLeft);  
  vec4 textureColor = texture2D(uTexture, vUv).rgba; 
  finalColor = textureColor.rgb * color.rgb;
  finalAlpha = color.a * textureColor.a * finalAlpha;
  
  gl_FragColor = vec4(finalColor, finalAlpha);     

`,Jve=class extends xr{constructor(e,t){super(),this.needsJitter=!0,this.type="ParticleMaterial",this.easeOpacity="linearFadeIn",this.easeSize="linearFadeIn",this.useSizeEnd=!1,this.isColoringRandom=!1,this.init(e,t),this.context=t}reset(){}init(e,t){this.transparent=!0,this.depthTest=!0,this.depthWrite=!1,this.easeOpacity=e.ease,this.easeSize=e.easeSize,this.layers=[],Na.startContext(Na.globalContext),this.lightLayer=new Zo(0,"",{...Ka.defaultData("light","phong"),visible:!1},new AA,{},t.shared),Na.endContext(Na.globalContext),this.build()}updateState(e){e.coloring!==void 0&&(this.isColoringRandom=e.coloring==="random"),e.color!==void 0&&(e.color instanceof Array?this.uniforms.uColor.value=e.color:this.uniforms.uColor.value=this.context.shared.color(e.color)),e.color2!==void 0&&(e.color2 instanceof Array?this.uniforms.uColor2.value=e.color2:this.uniforms.uColor2.value=this.context.shared.color(e.color2)),e.size!==void 0&&(this.uniforms.uSize.value=e.size[0],this.uniforms.uSizeEnd.value=e.size[1],e.size[0]!==e.size[1]?this.useSizeEnd=!0:this.useSizeEnd=!1),e.ease!==void 0&&(this.easeOpacity=e.ease,this.build()),e.easeSize!==void 0&&(this.easeSize=e.easeSize,this.build()),this.needsUpdate=!0}onBeforeCompile(e){this.build(),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader}build(){let e=new KN;return e.needsJitter=this.needsJitter,e.addFragmentParsCode(Ode),e.buildShader("vertex",this.fragment),e.buildShader("fragment",this.fragment),e.addFragmentFinalCode(Dde),this.isColoringRandom&&e.define("USE_RANDOM_COLORING"),this.useSizeEnd&&e.define("USE_SIZE_END"),e.addVertexParsCode(Xve),e.addFragmentParsCode(Zve),e.addVertexFinalCode(Kve({easeSize:this.easeSize})),e.addFragmentFinalCode(Qve({easeOpacity:this.easeOpacity})),this.vertexShader=e.getCode("vertex"),this.fragmentShader=e.getCode("fragment"),this.defines=e.defines,this.uniforms={...e.uniforms,...this.uniforms},this.extensions=e.extensions,this}get nodeMaterial(){return this}get fragment(){return this.lightLayer.node}getDefines(){return this.defines}nodeMaterialDispose(){this.layers.forEach(e=>e.dispose()),super.dispose()}},kx=class{constructor(e,t,i,r){this.type="SphereEmitterShape",this.targetMesh=void 0,this.size=e,this.type=i,this.textureSize=Rve(t);let a=1;this.targetMesh=r?.type==="Mesh"&&r?r:this.getMesh(i,a);let{positions:n,dataTexture:s,dataTextureNormals:o}=this.createPositions(this.textureSize,this.targetMesh??this.getMesh(i,a));this.positionsTexture=s,this.positionsAttribute=n,this.directionsTexture=o}createPositions(e,t){let{positions:i,normals:r}=Nve(t,e*e),a=MI(i,e),n=MI(r,e);return{dataTexture:a,positions:i,dataTextureNormals:n}}getMesh(e,t){let i=null;switch(e){case"SphereEmitterShape":{i=new Ah(t*.5,32,32);break}case"TorusEmitterShape":{i=new IR(t*.5,.3,15,40);break}case"ConeEmitterShape":{i=new LE(t,t,15);break}case"BoxEmitterShape":{i=new ko(t,t,t);break}case"PlaneEmitterShape":{i=new su(t,t),i.rotateX(-Math.PI/2);break}case"MeshEmitterShape":{i=new Ah(t,32,32);break}default:{i=new Ah(t,32,32);break}}return new ra(i,new nu({color:16711680}))}applyToShader(e,t){this.size=new V().fromArray(t.size),e.uEmitterSize.value=this.size}dispose(){this.positionsTexture.dispose(),this.directionsTexture.dispose(),this.positionsAttribute=new Float32Array}};function hh(e){let t={...e},i=Dy.defaultData;t.forceFieldObjectId&&(t.colliderEntityId=t.forceFieldObjectId);let r={...i.shape,...t.shape},a={...i.renderMaterial,...t.renderMaterial};return{...i,...t,shape:r,renderMaterial:a}}var ege=`
// uniform sampler2D uCurrentPosition; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentVelocity; // Pass in the variable from GPGPU
// uniform sampler2D uCurrentEmissionRate; // Pass in the variable from GPGPU

uniform sampler2D uIndex; // Texture with corresponding index
uniform float uLastIndexEmitted; // Last emitted index
uniform float uParticlesToEmit; // Number of particles to emit on that frame
uniform float uTime;

void main() {
    vec2 vUv = gl_FragCoord.xy / resolution.xy;
    float particleIndex = texture(uIndex, vUv).x;
    float timeLeft = texture2D( uCurrentPosition, vUv ).w;
    float isActive = texture2D( uCurrentEmissionRate, vUv ).g;    // 1. = active, 0. = not active
    float timeStart = texture2D( uCurrentEmissionRate, vUv ).b;


    // ********** Detect Colision to Create a flag and use it in position **********
    // We are doing this here, so

    // ********** Emit Particles **********
    // X = isSpawning 0.0 or 1.0
    // Y = isActive 0.0 or 1.0
    // Check if the vertex index is between the first value and the last value
    // if (particleIndex >= uLastIndexEmitted && particleIndex < uLastIndexEmitted + uParticlesToEmit) {
    //     // Emit a particle by writing 1 to the red channel of the color output
    //     // r: 1. == emit the particle
    //     // g: 1. == particle is now active
    //     timeStart = uTime;
    //     gl_FragColor = vec4(1.0, 1.0, timeStart, 1.0);
    // } else {
    //     // The Particle is either already emitted or not in the range of the particles to emit
    //     // Do not emit a particle by writing 0 to the red channel of the color output        
    //     gl_FragColor = vec4(0.0, isActive, timeStart, 1.0);
    // }
    // Determine if the particle is within the emission range
    float emitLowerBound = step(uLastIndexEmitted, particleIndex);
    float emitUpperBound = step(particleIndex, uLastIndexEmitted + uParticlesToEmit - 1.0);
    float emitParticle = emitLowerBound * emitUpperBound; // 1.0 if in range, 0.0 otherwise

    // Set timeStart and color
    timeStart = mix(timeStart, uTime, emitParticle);
    gl_FragColor = vec4(emitParticle, mix(isActive, 1.0, emitParticle), timeStart, 1.0);


}
`,Ox=10,tge=class extends Tr{constructor(e,t){super(),this.type="ParticleEmitter",this.debugMode=!1,this.worldSpace=!0,this.rootObject=null,this.gpuCompute=null,this.positionSimRT=null,this.velocitySimRT=null,this.emissionRateSimRT=null,this.emitterShape=void 0,this.isEmitting=!1,this.hasBeenReset=!1,this.emittedParticlesAmount=0,this.lastEmitTime=0,this.globalTime=0,this.targetFPS=60,this.previousRatio=1,this.lerpFactor=.4,this.particlesAmount=0,this.noiseStrength=0,this.noiseScale=0,this.isBillboardBased=!0,this.simFeaturesDefinition={USE_COLLIDER:!1,USE_ATTRACTOR:!1,USE_VORTEX:!1,USE_SPHERE_COLLIDER:!1,USE_BOX_COLLIDER:!1,USE_FORCE_LOCAL_SPACE:!1,USE_NORMALS:!1,USE_CURL_NOISE:!0,USE_SIMPLEX_NOISE:!1,USE_FBM_NOISE:!1},this.textureLoader=new gQ,this.currentWorldPosition=new V,this.systemQuaternion=new Ui,this.worldGravity=new V(0,0,0),this.directionAxis=new V(0,0,0),this.colliderV3=new V(0,0,0),this.colliderQuaternion=new Ui(0,0,0,1),this.matrixAutoUpdate=!0,this.renderer=e,this.system=t,this.shared=t.context.shared;let i=t.data;this.material=new Jve(i.renderMaterial,t.context),this.material.uniforms={uSize:{value:0},uSizeEnd:{value:0},uColor:{value:i.renderMaterial.color},uColor2:{value:i.renderMaterial.color2},uPosition:{value:new V(0,0,0)},uEmissionData:{value:new V(0,0,0)},uTexture:{value:this.defaultTexture},uWorldOffset:{value:new V(0,0,0)},uWorldQuaternion:{value:new Wi(0,0,0,1)},uRandScaleFactor:{value:i.randomScale??0},uRandRotationFactor:{value:i.randomRotation??0},uRotation:{value:i.renderMaterial.spriteRotation[0]??0},uRotationEnd:{value:i.renderMaterial.spriteRotation[1]??0}},this.setTexture(this.material.uniforms,i.renderMaterial.texture),this.init(i)}setTexture(e,t){let i=t.data;if(typeof t=="string"){let r=this.shared.image(t),a=new aa(r.img);a.needsUpdate=!0,e.uTexture.value=a;return}if(typeof i!="string"){let r=new Image;r.onload=()=>{let s=new aa(r);s.needsUpdate=!0,e.uTexture.value=s};let a=new Blob([i],{type:"image/*"}),n=URL.createObjectURL(a);r.src=n}}updateGeometryAttributes(e,t){var i;let r=zve(t);!((i=this.emitterShape)!=null&&i.positionsAttribute)||e.geometry.setAttribute("ref",new tm(r,2))}applyWorldSpace(){if(!this.system.started||!this.worldSpace||!this.positionSimRT||!this.velocitySimRT)return;let e=this.system;e.getWorldQuaternion(this.systemQuaternion),this.systemQuaternion.invert(),e.getWorldPosition(this.currentWorldPosition),this.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.positionSimRT.material.uniforms.uWorldOffset.value=this.currentWorldPosition,this.systemQuaternion.invert(),this.positionSimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize()),this.velocitySimRT.material.uniforms.uWorldQuaternion.value.copy(this.systemQuaternion.normalize())}update(e,t){var i;if(!this.gpuCompute||!this.positionSimRT||!this.velocitySimRT||!this.emissionRateSimRT||this.hasBeenReset)return;if(this.checkIfAllParticlesAreDead()&&!this.hasBeenReset){this.reset();return}this.applyWorldSpace(),this.globalTime=e,this.positionSimRT.material.uniforms.uTime.value=e,this.emissionRateSimRT.material.uniforms.uTime.value=e;let r=1e3/t,a=this.targetFPS/r,n=this.previousRatio+(a-this.previousRatio)*this.lerpFactor;this.positionSimRT.material.uniforms.uFPSRatio.value=n,this.previousRatio=n;let s=this.isEmitting?this.GoEmitSomeParticles(e,this.system.data.birthRatePerSec):0;this.emissionRateSimRT.material.uniforms.uLastIndexEmitted.value=this.emittedParticlesAmount,this.emissionRateSimRT.material.uniforms.uParticlesToEmit.value=s,this.material.uniforms.uPosition.value=(i=this.gpuCompute.getCurrentRenderTarget(this.positionSimRT))==null?void 0:i.texture,this.system.colliderEntities.length>0&&this.renderColliders(),this.gpuCompute.compute()}renderColliders(){if(!this.velocitySimRT)return;let e=this.system.colliderEntities[0],t=this.simFeaturesDefinition.USE_COLLIDER||this.simFeaturesDefinition.USE_ATTRACTOR||this.simFeaturesDefinition.USE_VORTEX;if(e.destroyedInAction&&t&&this.init(hh({...this.system.data,colliderEntityId:null})),!e||e.destroyedInAction)return;e.getWorldPosition(this.colliderV3),this.colliderV3.y===0&&(this.colliderV3.y=1e-4),this.velocitySimRT.material.uniforms.uColliderPos.value.copy(this.colliderV3);let i=e.data.size;this.colliderV3.fromArray(i),this.velocitySimRT.material.uniforms.uColliderSize.value.copy(this.simFeaturesDefinition.USE_SPHERE_COLLIDER?this.colliderV3.multiplyScalar(.5):this.colliderV3),e.getWorldQuaternion(this.colliderQuaternion),this.velocitySimRT.material.uniforms.uColliderQuaternion.value.copy(this.colliderQuaternion.normalize()),this.velocitySimRT.material.uniforms.uColliderQuaternionInvert.value.copy(this.colliderQuaternion.normalize().invert())}updateState(e){!this.velocitySimRT||!this.positionSimRT||(e.renderMaterial&&this.updateMaterialState(e.renderMaterial),this.updateParticleState(e))}updateVariableState(e,t){if(!this.velocitySimRT||!this.positionSimRT)return;t[2]==="size"&&this.material.updateState({size:[e,this.material.uniforms.uSizeEnd.value]}),t[2]==="sizeEnd"&&this.material.updateState({size:[this.material.uniforms.uSize.value,e]});let i=(r,a)=>{let n=[...this.system.data.shape.size];n[r]=a,this.updateParticleState({shape:{...this.system.data.shape,size:n}})};t[2]==="shape_size_0"&&i(0,e),t[2]==="shape_size_1"&&i(1,e),t[2]==="shape_size_2"&&i(2,e),t[2]==="speed"&&(this.velocitySimRT.material.uniforms.uSpeed.value=e/Ox),t[2]==="gravity"&&this.worldGravity.set(0,e/100,0),t[2]==="noiseStrength"&&(this.noiseStrength=e,this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),t[2]==="noiseScale"&&(this.noiseScale=e,this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),t[2]==="direction_x"&&(this.directionAxis=this.getDirectionAxis([Number(e),this.system.data.direction[1],this.system.data.direction[2]])),t[2]==="direction_y"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],Number(e),this.system.data.direction[2]])),t[2]==="direction_z"&&(this.directionAxis=this.getDirectionAxis([this.system.data.direction[0],this.system.data.direction[1],Number(e)]))}updateMaterialState(e){this.material.updateState({...e,size:e.size?[Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","size"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","sizeEnd"]))]:[0,0]}),e.texture&&(this.setTexture(this.material.uniforms,e.texture),this.material.needsUpdate=!0)}updateParticleState(e){var t,i,r;if(!(!this.positionSimRT||!this.velocitySimRT)){if(this.shouldReInitGPUCompute(e)&&this.init(hh(this.system.data)),e.life!==void 0&&(this.positionSimRT.material.uniforms.uMaxLifeTime.value=e.life),e.speed!==void 0&&(this.velocitySimRT.material.uniforms.uSpeed.value=Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/Ox),e.collisionBounce!==void 0&&(this.velocitySimRT.material.uniforms.uBounce.value=e.collisionBounce),e.noiseStrength!==void 0&&(this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.velocitySimRT.material.uniforms.uNoiseStrength.value=this.noiseStrength),e.noiseScale!==void 0&&(this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"])),this.velocitySimRT.material.uniforms.uNoiseScale.value=this.noiseScale),e.noiseSeed!==void 0&&(this.velocitySimRT.material.uniforms.uNoiseSeed.value=e.noiseSeed),e.randomMass!==void 0&&(this.velocitySimRT.material.uniforms.uRandomMassFactor.value=e.randomMass),((t=e.renderMaterial)==null?void 0:t.size)!==void 0){let a=this.shared.getVariable(e.renderMaterial.size[0],[this.uuid,"particles","size"]);this.velocitySimRT.material.uniforms.particleSize.value=Number(a)}if(((i=e.renderMaterial)==null?void 0:i.spriteRotation)!==void 0&&(this.material.uniforms.uRotation.value=e.renderMaterial.spriteRotation[0],this.material.uniforms.uRotationEnd.value=e.renderMaterial.spriteRotation[1]),e.shape!==void 0){let a=e.shape.size??this.system.data.shape.size,n=[Number(this.shared.getVariable(a[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(a[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(a[2],[this.uuid,"particles","shape_size_2"]))],s={...hh(this.system.data).shape,size:n};(r=this.emitterShape)==null||r.applyToShader(this.positionSimRT.material.uniforms,s)}if(e.gravity!==void 0&&(this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.velocitySimRT.material.uniforms.uGravity={value:this.worldGravity}),e.direction!==void 0){let a=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(a),this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis}e.randomRotation!==void 0&&(this.material.uniforms.uRandRotationFactor.value=e.randomRotation),e.randomScale!==void 0&&(this.material.uniforms.uRandScaleFactor.value=e.randomScale)}}updateForceFieldParameters(e){!this.velocitySimRT||(e.forceIntensity!==void 0&&(this.velocitySimRT.material.uniforms.uForceIntensity.value=e.forceIntensity),e.forceDambing!==void 0&&(this.velocitySimRT.material.uniforms.uForceDamping.value=e.forceDambing))}getDirectionAxis(e){let t=[Number(e[0])*li.DEG2RAD,Number(e[1])*li.DEG2RAD,Number(e[2])*li.DEG2RAD],i=new Va(t[0],t[1],t[2],"XYZ");return this.directionAxis.set(0,1,0).applyEuler(i).normalize(),this.velocitySimRT&&(this.velocitySimRT.material.uniforms.uDirectionsAxis.value=this.directionAxis),this.directionAxis}shouldReInitGPUCompute(e){let{birthRatePerSec:t,rootObjectType:i,colliderEntityId:r,shape:a,emitTimeDuration:n,emitTimeCycle:s,life:o,directionMode:l,noiseType:u}=e;return t!==void 0||i!==void 0||r||r===null||s!==void 0||a!==void 0||o!==void 0||n!==void 0||l!==void 0||u!==void 0}init(e){this.dispose(),this.particlesAmount=this.getMaxParticlesAmount({birthRatePerSecond:e.birthRatePerSec,particleMaxLifeTime:e.life,loopDuration:e.emitTimeCycle==="infinity"?0:e.emitTimeDuration}),this.particlesAmount>1e5&&(console.warn("The maximum number of particles is limited to 100000."),this.particlesAmount=1e5),this.emitterShape=this.createShape(e.shape,this.particlesAmount);let t=setInterval(()=>{if(this.emitterShape)if(isNaN(this.emitterShape.positionsTexture.source.data.data[0])){this.init(e);return}else clearInterval(t)},100);if(!this.emitterShape)return;let i=new Lve(this.emitterShape.textureSize,this.emitterShape.textureSize,this.renderer),r=this.updateSimulationDefinition(e),a=i.addVariable("uCurrentPosition",r+jve,this.emitterShape.positionsTexture),n=i.addVariable("uCurrentVelocity",r+Gve,this.emitterShape.directionsTexture),s=i.addVariable("uCurrentEmissionRate",ege,Fve(this.emitterShape.textureSize));i.setVariableDependencies(a,[a,n,s]),i.setVariableDependencies(n,[a,n,s]),i.setVariableDependencies(s,[a,n,s]);let o=Vve({size:this.emitterShape.textureSize}),l={uOriginalPosition:{value:this.emitterShape.positionsTexture},uWorldOffset:{value:new V(0,0,0)},uWorldQuaternion:{value:new Wi(0,0,0,1)},uTime:{value:0},uFPSRatio:{value:1},uMaxLifeTime:{value:e.life},uEmitterSize:{value:new V(Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"])))},particleSize:{value:0}};a.material.uniforms=l;let u=this.getDirectionFromVariable(e.direction);this.directionAxis=this.getDirectionAxis(u),this.worldGravity.set(0,Number(this.shared.getVariable(this.system.data.gravity,[this.uuid,"particles","gravity"]))/100,0),this.noiseStrength=Number(this.shared.getVariable(e.noiseStrength,[this.uuid,"particles","noiseStrength"])),this.noiseScale=Number(this.shared.getVariable(e.noiseScale,[this.uuid,"particles","noiseScale"]));let c=e.colliderEntityId&&this.system.getColliderData(e.colliderEntityId),d={uOriginalPosition:{value:this.emitterShape.positionsTexture},uDirections:{value:this.emitterShape.directionsTexture},uDirectionsAxis:{value:this.directionAxis},uWorldQuaternion:{value:new Wi(0,0,0,1)},uColliderPos:{value:new V(0,0,0)},uColliderSize:{value:new V(0,0,0)},uForceIntensity:{value:c?c.forceIntensity:0},uForceDamping:{value:c?c.forceDambing:0},uColliderQuaternion:{value:new Wi(0,0,0,1)},uColliderQuaternionInvert:{value:new Wi(0,0,0,1)},particleSize:{value:0},uGravity:{value:this.worldGravity},uNoiseStrength:{value:this.noiseStrength},uNoiseScale:{value:this.noiseScale},uNoiseSeed:{value:e.noiseSeed},uRandomMassFactor:{value:e.randomMass},uBounce:{value:e.collisionBounce},uSpeed:{value:Number(this.shared.getVariable(e.speed,[this.uuid,"particles","speed"]))/Ox}};n.material.uniforms=d;let h={uIndex:{value:o},uTime:{value:0},uLastIndexEmitted:{value:0},uParticlesToEmit:{value:0}};s.material.uniforms=h;let p=[Number(this.shared.getVariable(e.shape.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.shape.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.shape.size[2],[this.uuid,"particles","shape_size_2"]))],f={...hh(this.system.data).shape,size:p};this.emitterShape.applyToShader(a.material.uniforms,f),i.init(),this.gpuCompute=i,this.positionSimRT=a,this.velocitySimRT=n,this.emissionRateSimRT=s,this.rootObject=this.createPrimaryEmitter(this.emitterShape.textureSize),this.add(this.rootObject),this.material.needsUpdate=!0}getDirectionFromVariable(e){let t=Number(this.shared.getVariable(e[0],[this.uuid,"particles","direction_x"])),i=Number(this.shared.getVariable(e[1],[this.uuid,"particles","direction_y"])),r=Number(this.shared.getVariable(e[2],[this.uuid,"particles","direction_z"]));return[t,i,r]}updateSimulationDefinition(e){if(this.simFeaturesDefinition.USE_COLLIDER=!1,this.simFeaturesDefinition.USE_ATTRACTOR=!1,this.simFeaturesDefinition.USE_VORTEX=!1,this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!1,this.simFeaturesDefinition.USE_BOX_COLLIDER=!1,this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!1,this.simFeaturesDefinition.USE_NORMALS=!1,this.simFeaturesDefinition.USE_CURL_NOISE=!1,this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!1,this.simFeaturesDefinition.USE_FBM_NOISE=!1,e.colliderEntityId&&this.system.colliderEntities.length>0){let i=this.system.getColliderData(e.colliderEntityId);switch(i?.forceType){case"attractor":this.simFeaturesDefinition.USE_ATTRACTOR=!0;break;case"collider":this.simFeaturesDefinition.USE_COLLIDER=!0;break;case"vortex":this.simFeaturesDefinition.USE_VORTEX=!0;break}let r=i?.colliderType;r==="sphere"&&(this.simFeaturesDefinition.USE_SPHERE_COLLIDER=!0),r==="box"&&(this.simFeaturesDefinition.USE_BOX_COLLIDER=!0),i?.forceRange==="helper"&&(this.simFeaturesDefinition.USE_FORCE_LOCAL_SPACE=!0)}e.directionMode==="normals"&&(this.simFeaturesDefinition.USE_NORMALS=!0),e.noiseType==="curl"&&(this.simFeaturesDefinition.USE_CURL_NOISE=!0),e.noiseType==="simplex"&&(this.simFeaturesDefinition.USE_SIMPLEX_NOISE=!0),e.noiseType==="fbm"&&(this.simFeaturesDefinition.USE_FBM_NOISE=!0);let t="";for(let[i,r]of Object.entries(this.simFeaturesDefinition))r&&(t+=`#define ${i}
`);return t}createShape(e,t){this.emitterShape&&this.emitterShape.dispose();let i=new V(Number(this.shared.getVariable(e.size[0],[this.uuid,"particles","shape_size_0"])),Number(this.shared.getVariable(e.size[1],[this.uuid,"particles","shape_size_1"])),Number(this.shared.getVariable(e.size[2],[this.uuid,"particles","shape_size_2"])));if(e.type==="MeshEmitterShape"){let r=null;return this.system.context.scene.traverseEntity(a=>{a.uuid===e.fromMeshId&&(r=a)}),r?new kx(i,t,e.type,r):new kx(i,t,"SphereEmitterShape")}else return new kx(i,t,e.type)}createPrimaryEmitter(e){let t,i=e*e;return t=new OZ(new su(1,1,1),this.material,i),this.updateGeometryAttributes(t,e),this.material.needsUpdate=!0,t.onBeforeRender=()=>{this.applyWorldSpace()},t}getMaxParticlesAmount({birthRatePerSecond:e,particleMaxLifeTime:t,loopDuration:i=0}){return Math.ceil(e*(t+i))}dispose(){var e,t,i;!this.gpuCompute||((t=(e=this.rootObject)==null?void 0:e.parent)==null||t.remove(this.rootObject),this.gpuCompute.dispose(),this.material.nodeMaterialDispose(),(i=this.emitterShape)==null||i.dispose())}GoEmitSomeParticles(e,t){let i=e-this.lastEmitTime,r=1/t;if(i>=r){let a=Math.max(1,Math.floor(i/r));return this.lastEmitTime=e,this.emittedParticlesAmount+a>this.particlesAmount&&(this.emittedParticlesAmount=0),this.emittedParticlesAmount+=a,a}return 0}checkIfAllParticlesAreDead(){return this.lastEmitTime+this.system.data.life+1<this.globalTime}reset(){this.hasBeenReset=!0,this.lastEmitTime=0,this.emittedParticlesAmount=0,this.gpuCompute&&this.init(hh(this.system.data))}startEmitting(e){this.isEmitting=!0,this.hasBeenReset=!1,this.lastEmitTime=e}stopEmitting(){this.isEmitting=!1}},Qg=class extends ns{constructor(e,t,i){super(e,t),this.type="ParticleSystem",this.geometry=new Mi,this.actualTime=0,this.currentLoopTime=0,this.started=!1,this.stopped=!1,this.timeoutId=void 0,this.isFrozen=!1,this.isIdle=!0,this.emitter=null,this.colliderEntities=[],this.renderer=null,this.isPreWarm=!1,this._hasOnAfterRenderBeenCalled=!1,this.onAfterRender=r=>{this._hasOnAfterRenderBeenCalled||(this._hasOnAfterRenderBeenCalled=!0,this.init(r))},this.context=i,this.data={...t,...hh(t)},this.geometry.setAttribute("position",new ri([],3)),this.material=new nu({colorWrite:!1}),this.frustumCulled=!1}init(e){this.renderer=e,this.emitter=new tge(e,this),this.add(this.emitter),this.updateParticleState(this.data)}update(e){if(!this.isReady||!this.started||this.isFrozen||this.isIdle)return;this.actualTime+=e,this.stopped||(this.currentLoopTime+=e);let t=this.data.emitTimeCycle==="one_time";if((this.data.emitTimeCycle==="loop"||t)&&this.currentLoopTime>this.data.emitTimeDuration*1e3&&(this.stopped||(this.stop(),t||this.start(this.data.emitTimeDelay*1e3))),this.emitter&&this.started){let i=this.actualTime/1e3;this.emitter.update(i,e)}this.scale.set(1,1,1),this.updateMatrix()}isReady(){return!!this.emitter}hasCollider(e){return this.colliderEntities.some(t=>t.identity===e)}getColliderData(e){let t=this.colliderEntities.find(i=>i.identity===e);return t?t.data:null}updateByPatchedOp(e,t,i){super.updateByPatchedOp(e,t,i),Vr(e.path,["renderMaterial"])&&this.updateParticleState({renderMaterial:{...this.data.renderMaterial,...en.drop(e,1).props}}),Vr(e.path,["shape"])&&this.updateParticleState({shape:{...this.data.shape,...en.drop(e,1).props}})}updateState(e,t){super.updateState(e,t),this.updateParticleState(e)}updateParticleState(e){if(this.emitter){if(e.colliderEntityId!==void 0&&e.colliderEntityId!==null){let t=this.context.scene.find(e.colliderEntityId);this.colliderEntities=t?[t]:[]}e.colliderEntityId===null&&(this.colliderEntities=[]),this.emitter.updateState(e),e.emitTimeCycle&&this.started&&this.start()}}updateFromColliderEntity(e){!this.emitter||(this.emitter.updateForceFieldParameters(e),this.stop(),this.start())}start(e=0){var t;if(this.currentLoopTime=0,e){this.timeoutId=window.setTimeout(()=>{this.start(0)},e);return}this.started=!0,this.stopped=!1,this.isFrozen=!1,(t=this.emitter)==null||t.startEmitting(this.actualTime/1e3)}froze(){this.isFrozen=!0}unFroze(){this.isFrozen=!1}stop(){var e;this.stopped=!0,this.currentLoopTime=0,(e=this.emitter)==null||e.stopEmitting(),clearTimeout(this.timeoutId)}reset(){var e;this.started=!1,this.stopped=!1,(e=this.emitter)==null||e.reset()}wakeUp(){this.isIdle=!1}sleep(){this.isIdle=!0,this.reset()}};function ige(){try{let e=window.location.href;if(e.includes("reducesubdiv=")){let t=e.indexOf("reducesubdiv=")+13;return parseInt(e.slice(t,t+1))}}catch{}}var Dx=ige();function rge(e,t,i){var r;Dx!==void 0&&(((r=t?.geometry)==null?void 0:r.subdivisions)??0)>Dx&&(console.log("reducing subdivisions",t.name,t.geometry.subdivisions),t.geometry.subdivisions=Dx);let a;return t.geometry.type==="TextGeometry"?new IA(e,t,i):t.geometry.type==="InputGeometry"?new jA(e,t,i):(t.geometry.type==="SubdivGeometry"?a=new xm(e,t,i):t.geometry.type==="PathGeometry"?a=new FA(e,t,i):t.geometry.type==="VectorGeometry"?a=new Dve(e,t,i):t.geometry.type==="BooleanGeometry"?a=new vd(e,t,i):t.geometry.type==="UIGeometry"?a=new zn(e,t,i):a=new Vn(e,t,i),a)}function UA(e,t,i){return console.assert(t.type!==void 0),t.type==="Mesh"?rge(e,t,i):t.type==="Empty"?new zh(e,t):t.type==="Particle"?new Qg(e,t,i):t.type==="ParticleCollider"?new Kg(e,t,i):t.type==="Splat"?new zh(e,t):t.type==="Bone"?new Ive(e,t):t.type==="Page"?new Za(e,t,i):t.type==="PointLight"?new Ove(e,t,i):t.type==="SpotLight"?new $V(e,t,i):t.type==="DirectionalLight"?new jV(e,t,i):t.type==="Component"||t.type==="Instance"?new Rh(e,t,i):fd.is(t.type)?new Fn(e,t):(console.error(t),new zh(e,t))}Ku.createEntity=UA;function age(e,t,i){let r=UA(e.identity,t,i),a=e.children,n=e.attachedPaths,s=e.parent,o=e.component,l=e.instances,u=e.overrideData,c=e.uuid,d=e.stateSelection;e.dispose();for(let h of Object.keys(e))delete e[h];Object.setPrototypeOf(e,Object.getPrototypeOf(r));for(let h of Object.keys(r))e[h]=r[h];e.children=[...e.children,...a],e.attachedPaths=n,e.parent=s,e.component=o,e.instances=l,e.uuid=c,e.overrideData=u,e.updateState(e.data,i),d&&e.changeSelectedState(d,i),e.resetBBoxNeedsUpdate()}Ku.changeEntityProptotype=age;Ku.Cloner=So;function nge(e,t,i,r){e.updateByOp(t,i,r,!1)}function EI(e,t){let i=!1,r=t.getLayersOfType("transmission"),a=t.getLayersOfType("outline");return a.length>0&&(e.layers.set(8),r.length>0&&e.layers.enable(3),i=!0,DA(e),OA(e)),r.length===0&&a.length===0&&e.layers.set(0),e instanceof Ep&&e.needsAO&&e.layers.enable(5),i}function AI(e,t){if(!t.layers)return!1;let i=!1,r=t.getLayersOfType("transmission").filter(n=>n.data.visible),a=t.getLayersOfType("outline").filter(n=>n.data.visible);return r.length>0&&(e.layers.set(3),a.length>0&&e.layers.enable(8),i=!0),r.length===0&&a.length===0&&e.layers.set(0),e.needsAO&&e.layers.enable(5),i}function sge(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof Ep)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)EI(i,i.material[r])&&(t=!0);else EI(i,i.material)&&(t=!0)}),t}function oge(e){let t=!1;return e.traverseEntity(i=>{if(i instanceof Ep)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)AI(i,i.material[r])&&(t=!0);else AI(i,i.material)&&(t=!0)}),t}var lge=new $R,uge=new zt,cge=new hp;function yM(e,t,i,r=!1){let a=e.cloner;if(a)for(let n of a.children){let s=uge.copy(n.matrixWorld).invert(),o=cge.copy(t.ray).applyMatrix4(s),l=e.matrixWorld;o.applyMatrix4(l);let u=lge;u.set(o.origin,o.direction),u.near=t.near,u.far=t.far;let c=u.intersectObject(e,!1);c.length>0&&i.push({...c[0],object:r?n:e})}}var dge=class{constructor(){this._constraints=new Map}setConstraint(e,t){t===null?this._constraints.delete(e):this._constraints.set(e,t)}removeDependencies(e){this._constraints.delete(e)}applyConstraints(e){let t=new Set;this._constraints.forEach((i,r)=>{let a=[r,i],n=i;for(;this._constraints.has(n);){if(n=this._constraints.get(n),a.includes(n)){console.warn(`circular dependency detected: ${a.join(" -> ")}`);break}t.has(n)||a.push(n)}for(let s=a.length-2;s>=0;s--)if(!t.has(a[s])){let o=e.find(a[s]);o?o.applyPathSnapping(e):console.warn(`missing entity ${a[s]}`),t.add(a[s])}})}findDependency(e,t){let i=e;for(;this._constraints.has(i);)if(i=this._constraints.get(i),i===t)return!0;return!1}},hge="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",Qu=class{};ff(Qu,"DepthMapRange",65536),ff(Qu,"MemoryPageSize",65536),ff(Qu,"BytesPerFloat",4),ff(Qu,"BytesPerInt",4);function pge(e){let t,i,r,a,n,s,o,l,u,c,d,h,p,f,v,m;function g(k){let I=new Float64Array(c,s,16);for(let D=0;D<16;D++)I[D]=k[D];let O;if(r>1){t.exports.sortIndexes(a,n,u,s,o,l,h.DepthMapRange,r);let D=new Uint32Array(r);O=D.buffer,D.set(new Uint32Array(c,l,r))}else if(r===1){let D=new Uint32Array(r);D[0]=new Uint32Array(c,a,i)[0],O=D.buffer}else O=new ArrayBuffer(0);e.postMessage({sortDone:!0,indexesBuffer:O},[O])}function y(k,I,O){let D=new Float32Array(c,n,i*3);r=0;let F=new Uint32Array(c,a,i);for(let U=0;U<O.length-1;U++){let z=I[U],B=k[U].elements,W=z.filter($=>$.enabled&&$.mode==="Include").map($=>$.type==="Box"?w($):P($)),R=z.filter($=>$.enabled&&$.mode==="Exclude").map($=>$.type==="Box"?w($):P($));for(let $=O[U];$<O[U+1];$++){let q=p[$*3],Z=p[$*3+1],G=p[$*3+2];if((W.length===0||x(q,Z,G,W))&&(R.length===0||!x(q,Z,G,R))){let X=1/(B[3]*q+B[7]*Z+B[11]*G+B[15]);D[r*3]=(B[0]*q+B[4]*Z+B[8]*G+B[12])*X,D[r*3+1]=(B[1]*q+B[5]*Z+B[9]*G+B[13])*X,D[r*3+2]=(B[2]*q+B[6]*Z+B[10]*G+B[14])*X,F[r]=$,r++}}}}function b(k,I){let O=[],D=I.filter(z=>z.enabled&&z.mode==="Include").map(z=>z.type==="Box"?w(z):P(z)),F=I.filter(z=>z.enabled&&z.mode==="Exclude").map(z=>z.type==="Box"?w(z):P(z)),U=k.length;for(let z=0;z<U;z+=3){let B=k[z],W=k[z+1],R=k[z+2];(D.length===0||x(B,W,R,D))&&(F.length===0||!x(B,W,R,F))||O.push(z/3)}return O}function x(k,I,O,D,F){return D.some(U=>{let z=S(k,I,O,U.invRotationMatrix,U.cropCenter);return Array.isArray(U)?M(z.x,z.y,z.z,U):A(z.x,z.y,z.z,U)})}function S(k,I,O,D,F){let U=k-F[0],z=I-F[1],B=O-F[2],W=1/(D[3]*U+D[7]*z+D[11]*B+D[15]);return{x:(D[0]*U+D[4]*z+D[8]*B+D[12])*W+F[0],y:(D[1]*U+D[5]*z+D[9]*B+D[13])*W+F[1],z:(D[2]*U+D[6]*z+D[10]*B+D[14])*W+F[2]}}function w(k){let I=k.cropSize[0]/2,O=k.cropSize[1]/2,D=k.cropSize[2]/2,F=[k.cropCenter[0]-I,k.cropCenter[1]-O,k.cropCenter[2]-D,k.cropCenter[0]+I,k.cropCenter[1]+O,k.cropCenter[2]+D],U=E(k.cropRotation);return Object.assign(F,{invRotationMatrix:U,cropCenter:k.cropCenter})}function E(k){let I=[],O=k[0]*Math.PI/180,D=k[1]*Math.PI/180,F=k[2]*Math.PI/180,U=Math.cos(O),z=Math.sin(O),B=Math.cos(D),W=Math.sin(D),R=Math.cos(F),$=Math.sin(F),q=U*R,Z=U*$,G=z*R,X=z*$;return I[0]=B*R,I[1]=-B*$,I[2]=W,I[4]=Z+G*W,I[5]=q-X*W,I[6]=-z*B,I[8]=X-q*W,I[9]=G+Z*W,I[10]=U*B,I[12]=0,I[13]=0,I[14]=0,I[3]=0,I[7]=0,I[11]=0,I[15]=1,I}function M(k,I,O,D){return k>=D[0]&&k<=D[3]&&I>=D[1]&&I<=D[4]&&O>=D[2]&&O<=D[5]}function P(k){let I=2/k.cropSize[0],O=2/k.cropSize[1],D=2/k.cropSize[2],F=E(k.cropRotation);return{invRadiusX:I,invRadiusY:O,invRadiusZ:D,cropCenter:k.cropCenter,invRotationMatrix:F}}function A(k,I,O,D){let F=(k-D.cropCenter[0])*D.invRadiusX,U=(I-D.cropCenter[1])*D.invRadiusY,z=(O-D.cropCenter[2])*D.invRadiusZ;return F*F+U*U+z*z<=1}e.onmessage=k=>{if(k.data.getCroppedIndexes){let I=new Uint32Array(b(new Float32Array(k.data.positions),k.data.crops)).buffer;e.postMessage({outOfBoundsIndexes:I},[I])}else if(k.data.positions)d=k.data.positions,p=new Float32Array(d),v=k.data.meshMatrixWorlds,m=k.data.cropsArray,f=k.data.meshIndexIntervals,y(v,m,f),e.postMessage({sortSetupComplete:!0});else if(k.data.sort||k.data.newMatrixWorlds||k.data.newCropsArray)(k.data.newMatrixWorlds||k.data.newCropsArray)&&(m=k.data.newCropsArray||m,v=k.data.newMatrixWorlds||v,y(v,m,f)),g(k.data.sort.view,k.data.sort.cameraPosition);else if(k.data.init){h=k.data.init.Constants,i=k.data.init.splatCount;let I=h.BytesPerInt,O=h.BytesPerFloat*3,D=new Uint8Array(k.data.init.sorterWasmBytes),F=I+O,U=i*F,z=i*h.BytesPerInt*2+h.DepthMapRange*h.BytesPerInt*2,B=h.MemoryPageSize*32,W=U+z+B,R=Math.floor(W/h.MemoryPageSize)+1,$={module:{},env:{memory:new WebAssembly.Memory({initial:R*2,maximum:R*3,shared:!0})}};WebAssembly.compile(D).then(q=>WebAssembly.instantiate(q,$)).then(q=>{t=q,a=0,n=i*I,s=n+i*O,u=s+16*h.BytesPerFloat*2,o=u+i*h.BytesPerInt,l=o+h.DepthMapRange*h.BytesPerInt,c=$.env.memory.buffer,e.postMessage({sortSetupPhase1Complete:!0})})}}}function fge(e){let t=new Worker(URL.createObjectURL(new Blob(["(",pge.toString(),")(self)"],{type:"application/javascript"}))),i=atob(hge),r=new Uint8Array(i.length);for(let a=0;a<i.length;a++)r[a]=i.charCodeAt(a);return t.postMessage({init:{sorterWasmBytes:r.buffer,splatCount:e,Constants:{BytesPerFloat:Qu.BytesPerFloat,BytesPerInt:Qu.BytesPerInt,DepthMapRange:Qu.DepthMapRange,MemoryPageSize:Qu.MemoryPageSize}}}),t}var Ix=function(){let e=new Float32Array(1),t=new Int32Array(e.buffer);return function(i){return e[0]=i,t[0]}}(),mge=function(e,t,i,r){return e+(t<<8)+(i<<16)+(r<<24)},wg=new Ce;function PI(e){let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.visible===!1)return!0;r.type==="Splat"&&(t=!0)}),t}var Jg=class extends ra{constructor(e,t,i,r,a=!1,n=1,s,o){super(i,r),this.splatCount=t,this.meshIndexIntervals=s,this.meshMatrixWorlds=o,this.splatBuffers=e,this.geometry=i,this.material=r,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=a,this.devicePixelRatio=n,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(e,t,i=!1,r=1,a,n){let s=Jg.buildGeomtery(t),o=Jg.buildMaterial(a);return new Jg(e,t,s,o,i,r,a,n)}static buildMaterial(e){let t=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,i=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,r={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:e},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new Ce},viewport:{type:"v2",value:new Ce},basisViewport:{type:"v2",value:new Ce},debugColor:{type:"v3",value:new Bi},covariancesTextureSize:{type:"v2",value:new Ce(1024,1024)},centersColorsTextureSize:{type:"v2",value:new Ce(1024,1024)},orthoZoom:{type:"f",value:-1}};return new xr({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,alphaTest:1,blending:Xc,depthTest:!0,depthWrite:!1,side:Rn})}static buildGeomtery(e){let t=new Mi;t.setIndex([0,1,2,0,2,3]);let i=new Float32Array(4*3),r=new ji(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;let a=new FR().copy(t),n=new Uint32Array(e),s=new tm(n,1,!1);return s.setUsage(vG),a.setAttribute("splatIndex",s),a.instanceCount=e,a}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(r=>r.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let e=0,t=0,i=0;for(let r of this.splatBuffers){let a=r.nsplats;this.colors.subarray(e,e+a*4).set(r.colorsA),e+=a*4,this.centers.subarray(t,t+a*3).set(r.decoded.xyz.denormDequant().data),t+=a*3,this.covariances.subarray(i,i+a*6).set(new Float32Array(r.precomputedCovarianceBufferData)),i+=a*6}}allocateAndStoreLocalSplatDataInTextures(){let e=this.splatCount,t=new Ce(4096,1024);for(;t.x*t.y*2<e*6;)t.y*=2;let i=new Ce(4096,1024);for(;i.x*i.y*4<e*4;)i.y*=2;let r,a;if(this.halfPrecisionCovariancesOnGPU){a=new Uint16Array(t.x*t.y*2);for(let c=0;c<this.covariances.length;c++)a[c]=GQ.toHalfFloat(this.covariances[c]);r=new qs(a,t.x,t.y,ay,au)}else a=new Float32Array(t.x*t.y*2),a.set(this.covariances),r=new qs(a,t.x,t.y,ay,Pa);r.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=r,this.material.uniforms.covariancesTextureSize.value.copy(t);let n=new Uint32Array(i.x*i.y*4);for(let c=0;c<e;c++){let d=c*4,h=c*3,p=c*4;n[p]=mge(this.colors[d],this.colors[d+1],this.colors[d+2],this.colors[d+3]),n[p+1]=Ix(this.centers[h]),n[p+2]=Ix(this.centers[h+1]),n[p+3]=Ix(this.centers[h+2])}let s=new qs(n,i.x,i.y,rR,Yl);s.internalFormat="RGBA32UI",s.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=s,this.material.uniforms.centersColorsTextureSize.value.copy(i);let o=256*4,l=new Float32Array(256*16);for(let c=0;c<this.meshMatrixWorlds.length;c++)l.set(this.meshMatrixWorlds[c].elements,c*16);let u=new qs(l,o,1,Ja,Pa);u.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=u,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:a,texture:r,size:t},centerColors:{data:n,texture:s,size:i},meshMatrixWorlds:{data:l,texture:u}}}updateIndexes(e){let t=this.geometry;t.attributes.splatIndex.set(e),t.attributes.splatIndex.needsUpdate=!0,t.instanceCount=e.length}updateUniforms(e,t,i,r){this.splatCount>0&&(wg.set(e.x*this.devicePixelRatio,e.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(wg),this.material.uniforms.basisViewport.value.set(2/wg.x,2/wg.y),this.material.uniforms.focal.value.set(t,i),this.material.uniforms.orthoZoom.value=r,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose()),this.removeFromParent()}},e8,vge=new Promise(e=>{e8=e}),TI=!1,xg;function gge(){if(TI)return;if(xg)return xg;async function e(){let t=await pc(()=>import("./gaussian-splat-compression.LExQ2fgM.js"),[]);e8(t),TI=!0}return xg=e(),xg}var t8;vge.then(e=>t8=e);var yge=class{constructor(e={}){ff(this,"updateView",function(){let t=new zt,i=[],r=new V(0,0,-1),a=new V(0,0,-1),n=new V,s=new V;return function(o=!1,l){let u=this.updateMatrixWorldsInWorkerIfNeeded(),c=this.cropsChanged();if(!o){a.set(0,0,-1).applyQuaternion(l.quaternion);let h=!1,p=!1;if(a.dot(r)<=.95&&(h=!0),s.copy(l.position).sub(n).length()>=1&&(p=!0),!h&&!p&&!u&&!c&&!this.needsInitialRender)return}this.needsInitialRender=!1,n.copy(l.position),r.copy(a),t.copy(l.matrixWorld).invert(),t.premultiply(this.dummyPerspectiveMatrix),i[0]=l.position.x,i[1]=l.position.y,i[2]=l.position.z;let d={sort:{view:t.elements,cameraPosition:i,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount},...u?{newMatrixWorlds:this.meshMatrixWorlds}:{},...c?{newCropsArray:this.cropsArray}:{}};this.sortRunning?this.queuedMessage=d:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(d))}}()),this.scene=e.scene,this.currentPage=null,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null,this.needsInitialRender=!0,this.dummyPerspectiveMatrix=new zt().makePerspective(-1,1,-1,1,.1,1e3)}updateSplatMeshUniforms(e,t){let i=new Ce;this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(e.getSize(i),this.cameraFocalLengthX=t.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=t.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,t.isPerspectiveCamera?-1:t.zoom*this.devicePixelRatio))}loadSplat(e={}){this.activePage=this.scene.activePage,e.position&&(e.position=new V().fromArray(e.position)),e.orientation&&(e.orientation=new Ui().fromArray(e.orientation)),e.halfPrecisionCovariances=!!e.halfPrecisionCovariances;let t=[];if(this.splatEntries=t,this.activePage.traverseVisibleEntity(n=>{n.data.type==="Splat"&&t.push(n)}),this.splatMesh&&this.splatMesh.dispose(),t.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=t.map(n=>n.matrixWorld),this.meshMatrixWorldsOld=t.map(n=>n.matrixWorld.clone()),this.cropsArray=t.map(n=>n.data.crops.map(s=>s.data));let i=t.map(n=>new t8.GSplineBuffer(new Uint8Array(n.data.buffer).buffer)),r=0,a=[0];for(let n of i)r+=n.getSplatCount(),a.push(r);return this.setupSplatMesh(i,r,e.position,e.orientation,e.halfPrecisionCovariances,this.devicePixelRatio,a,this.meshMatrixWorlds),this.setupSortWorker(r),!0}updateMatrixWorldsInWorkerIfNeeded(){let e=this.splatDataTextures.meshMatrixWorlds.data;for(let t=0;t<this.meshMatrixWorlds.length;t++)e.set(this.meshMatrixWorlds[t].elements,t*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((t,i)=>t.equals(this.meshMatrixWorldsOld[i]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(t=>t.clone()),!0)}cropsChanged(){let e=!1;return this.splatEntries.forEach((t,i)=>{var r;t.data.crops.forEach((a,n)=>{this.cropsArray[i][n]===void 0?(e=!0,this.cropsArray[i][n]=a.data):Object.entries(a.data).forEach(([s,o])=>{var l;Array.isArray(o)&&o.some((u,c)=>u!==this.cropsArray[i][n][s][c])?(e=!0,this.cropsArray[i][n][s]=o):o!==((l=this.cropsArray[i][n])==null?void 0:l[s])&&(e=!0,this.cropsArray[i][n][s]=o)})}),t.data.crops.length!==((r=this.cropsArray[i])==null?void 0:r.length)&&(this.cropsArray[i].length=t.data.crops.length,e=!0)}),e}setupSplatMesh(e,t,i=new V,r=new Ui,a=!1,n=1,s,o){this.splatMesh=Jg.buildMesh(e,t,a,n,s,o),this.splatMesh.position.copy(i),this.splatMesh.quaternion.copy(r),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=99999,this.splatRenderCount=t,this.splatMesh.onBeforeRender=(l,u,c)=>this.update(l,c)}setupSortWorker(e){this.sortWorker=fge(e),this.sortWorker.onmessage=t=>{var i;t.data.sortDone?(this.sortRunning=!1,(i=this.splatMesh)==null||i.updateIndexes(new Uint32Array(t.data.indexesBuffer)),this.lastSortTime=t.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):t.data.sortCanceled?this.sortRunning=!1:t.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):t.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.scene.activePage.add(this.splatMesh),this.needsInitialRender=!0)}}update(e,t){this.splatMesh!==null&&(this.updateSplatMeshUniforms(e,t),this.updateView(!1,t))}getSplatMesh(){return this.splatMesh}},bM=new nu;bM.wireframe=!0;var kI=new V,WA=class extends dl{constructor(e,t){super(),this.data=e,this.sharedAssets=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new dge,this.invisibleObjects=new zh("jflkdsafjasdifjaslk",{...E2.defaultData,visible:!1,name:"buildin invisible"}),this.needsRecomputeInstances=!1,this.init(e,t),this.matrixAutoUpdate=!1,this.errorPage=new Za("fdasfa",{...ip.defaultData,name:""},{shared:t,scene:this})}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=oge(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=sge(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(e){let t=e.identity.join("-"),i=this.entityIdentityToEntity[t];i&&(e.uuid=i.uuid),this.entityIdentityToEntity[t]=e,this.entityByUuid[e.uuid]=e}markPenumbraSizeDirty(){for(let e of this.children)e instanceof Za&&(e.penumbraSizeArrayCache=null)}findInstance(e){return this.entityIdentityToEntity[e.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(e){let t=this.find(e);if(t===void 0)return;let i=[],r=t;for(;r!==this;){let a=r;r=r.parent;let n=r.children.indexOf(a);i.splice(0,0,n)}return{entity:t,sortKey:i}}getAllSorted(e){let t=[];for(let i of e){let r=this.getWithSortKey(i.id);r!==void 0&&t.push(r)}return t.sort((i,r)=>T6(i.sortKey,r.sortKey)),t.map(i=>i.entity)}nonExistOrDescendantOf(e,t){let i=this.find(e);if(i===void 0)return!0;for(;i;){if(i.uuid===t)return!0;i=i.parent}return!1}find(e){if(this.activePage&&this.activePage.personalCamera.parent){if(e==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(e===Cp)return this.activePage.personalCamera}if(e===""||e===void 0)return;let t=this.entityByUuid[e];return t===void 0?this.getObjectByProperty("uuid",e):t}find2D(e){for(let t of this.children)if(t instanceof Za&&t.uiScene){let i=t.uiScene.find(e);if(i)return i}}findScene2DfromObject2D(e){for(let t of this.children)if(t instanceof Za&&t.uiScene&&t.uiScene.find(e))return t.uiScene}find2DInUIObjects(e){let t;return this.traverseEntity(i=>{t===void 0&&i instanceof zn&&(t=i.uiCanvas.find(e))}),t}traverse2D(e){for(let t of this.children)t instanceof Za&&t.uiScene&&t.uiScene.traverse(e)}debugEnsureEntity(e){let t=this.find(e);if(t){if(Array.isArray(t.identity)&&this.findInstance(t.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(e){this.toExpandCloner.add(e)}addPendingUpdateCloner(e){this.toUpdateCloner.add(e)}markToExpandCloner(e){this.toExpandCloner.add(e),e.traverseEntityAncestors(t=>{this.toExpandCloner.add(t)})}doPendingExpandCloner(){this.toExpandCloner.forEach(e=>{e.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(e=>{var t;(t=e.cloner)==null||t.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(e){this.pendingCommands.push(e)}applyPendingCommands(){this.pendingCommands.forEach(e=>e()),this.pendingCommands.length=0}updateByLibOp(e,t){e.path.length===1&&e.path[0]==="components"&&e.type===1&&this.createChildrenObjects([{...e.data.asset,id:e.id}],this.invisibleObjects,t)}updateTreeByOp(e,t){var i;if(e.path.length===0&&e.type===7){let r=e.parent===null?this:this.find(e.parent);if(r===void 0)throw new Error("unexpected");let a=this.createObject(e.id,e.data,e.children,r,e.localIndex,t);a.updateVisible(this),a.resetBBoxNeedsUpdate(),yo(a)&&Ql(a.parent)&&(a.invalidateUpstreamBooleanData(),a.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(r),this.markNeedsRecomputeInstancesForChildren(a),this.markToExpandCloner(a),this.markPenumbraSizeDirty(),a.updatePathSnapping()}else if(e.path.length===0&&e.type===8){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markToExpandCloner(r),r.resetBBoxNeedsUpdate(),this.unregisterObject(r);let a=r.parent;this.markNeedsRecomputeInstancesForAncessors(a),this.markNeedsRecomputeInstancesForChildren(r),this.markPenumbraSizeDirty(),r.parent.remove(r),Ql(r.parent)&&(r.parent.invalidateUpstreamBooleanData(),r.parent.invalidateDownstreamBooleanData().recomputeBoolean()),yo(r)&&(r.freeBooleanPointer(),a instanceof vd&&a.invalidateDownstreamBooleanData().recomputeBoolean()),r instanceof FA&&r.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(r),this.pathConstraints.removeDependencies(r.uuid),r.updatePathSnapping()}else if(e.path.length===0&&e.type===9){let r=this.find(e.id);if(r===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(r);let a=r.parent;this.markNeedsRecomputeInstancesForAncessors(a),(i=r.cloner)==null||i.resetOnMove(),this.markToExpandCloner(r);let n=e.parent===null?this:this.find(e.parent);if(n===void 0)throw new Error("unexpected");n.add(r),this.markNeedsRecomputeInstancesForAncessors(n),this.markToExpandCloner(r),r.invalidateClonerTransform(r),r.updateVisible(this),r.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let s=e.localIndex;n.children.splice(s,0,n.children.pop()),yo(r)&&(r.invalidateUpstreamBooleanData(),Ql(r.parent)?r.parent.invalidateDownstreamBooleanData().recomputeBoolean():a instanceof vd&&a.invalidateDownstreamBooleanData().recomputeBoolean()),r.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){return this.find(this.data.publish.playPage)??this.errorPage}updatePage(e){var t;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let i of this.children)i instanceof Za&&(i.visible=i.uuid===e,i.visible&&(this.activePage=i,this.activePage.onActive(this)));this.activePage!==((t=this.splatViewer)==null?void 0:t.activePage)&&this.reloadSplats()}updateEntityByOp(e,t,i,r){if(t.type===0){if(("overrides"in t.props||"component"in t.props)&&this.markNeedsRecomputeInstances(),"visible"in t.props&&this.markPenumbraSizeDirty(),t.path.includes("overrides")&&"states"in t.props){let{rest:n}=t.props;t={...t,props:n},this.markNeedsRecomputeInstances()}t.path[0]==="pathSnapping"&&t.props.pathId!==void 0&&this.pathConstraints.setConstraint(e,t.props.pathId)}let a=this.find(e);if(a)try{nge(a,t,i,{scene:this,shared:r}),a instanceof Vn&&a.updateGeometryGroupsIfNeeded()}catch(n){console.error(n)}}updateEntity2DByOp(e,t,i,r,a,n=[]){e.updateEntityByOp(t,i,r,a),this.traverseEntity(s=>{(s instanceof zn||s instanceof Za)&&(n.includes(s.frameId??"")||s.frameId===t)&&s.updateEntity2DByOp(t,i,r,a)})}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(e){this.activePage.switchActiveCamera(e)}isInvisibleObjects(e){return e===this.invisibleObjects||e.hasAnccestor(this.invisibleObjects)}init(e,t){let i=Object.entries(t.data.lib.components).map((r,a)=>({data:r[1].asset.data,children:r[1].asset.children,id:r[0],fi:a}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:t}),this.add(this.invisibleObjects),this.createChildrenObjects(i,this.invisibleObjects,t),this.createChildrenObjects(e.objects,this,t),this.updatePage(e.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(t,!0),this.traverseEntity(r=>{r instanceof Fn&&r.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(e){e.traverseEntity(t=>{(t.data.type==="Component"||t.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(e){fr.is(e)&&(e.data.type==="Component"&&this.markNeedsRecomputeInstances(),e.traverseAncestors(t=>{fr.is(t)&&t.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(e,t,i,r,a,n,s){if(e){let o=r.find(e);o&&o!==r&&a.forInstancesRec(l=>{l.data=dm(l.data,u=>{let c=u.events.data(s.id),d=l.goUp(n);if(d){let h=[...P6(d.identity),e].join("-"),p=this.entityIdentityToEntity[h];if(p){let f=p.uuid,v=Fa.zoom(c,t);v[i]=f}else console.warn("cannot find instance")}}).data})}}rewriteActions(e,t,i,r,a,n){e.forEach(s=>{s.data.type==="Transition"?this.relativeizeInner(s.data.object,[...t,s.id],"object",i,r,a,n):s.data.type==="Animation"?this.relativeizeInner(s.data.object,[...t,s.id],"object",i,r,a,n):s.data.type==="Conditional"&&(this.rewriteActions(s.data.ifActions,[...t,s.id,"ifActions"],i,r,a,n),this.rewriteActions(s.data.elseActions,[...t,s.id,"elseActions"],i,r,a,n))})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(e=>{if(e instanceof Rh&&typeof e.identity=="string"&&e.data.type==="Component")return e.traverseEntity((t,i)=>{t.data.events.forEach(r=>{if(r.data.type==="GameControl"){let a=!1;if(t.forInstancesRec(n=>{n.data=dm(n.data,s=>{n.isInstanceRoot||(s.events.delete(r.id),a=!0)}).data}),a===!1)for(let n of Fy.list)this.rewriteActions(r.data.gameActions[n],["gameActions",n],e,t,i,r)}else r.data.type==="Conditional"?(r.data.condition.type==="Distance"?(this.relativeizeInner(r.data.condition.fromObject,["condition"],"fromObject",e,t,i,r),this.relativeizeInner(r.data.condition.toObject,["condition"],"toObject",e,t,i,r)):r.data.condition.type==="State"?this.relativeizeInner(r.data.condition.object,["condition"],"object",e,t,i,r):r.data.condition.type==="Comparison"&&(r.data.condition.lOperand.type==="Property"&&this.relativeizeInner(r.data.condition.lOperand.value[0],["condition","lOperand","value"],0,e,t,i,r),r.data.condition.rOperand.type==="Property"&&this.relativeizeInner(r.data.condition.rOperand.value[0],["condition","rOperand","value"],0,e,t,i,r)),this.rewriteActions(r.data.inActions,["inActions"],e,t,i,r),this.rewriteActions(r.data.outActions,["outActions"],e,t,i,r)):"actions"in r.data&&this.rewriteActions(r.data.actions,["actions"],e,t,i,r)})}),!0})}expandInstances(e,t,i){let r=new Set;this.traverseEntity(a=>{if(a instanceof Rh&&a.isInstanceRoot)return a.expandInstanceChildren({scene:this,shared:e,pendingDeletes:r}),t||a.resetBBoxNeedsUpdate(),i&&a.traverseEntity(n=>{i.addClip(n)}),!0});for(let a of r)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(a),$A(a)}recomputeInstances(e,t){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(i=>{i instanceof Rh&&i.isInstanceRoot&&(i.component=void 0)}),this.expandInstances(e,!1,t))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(e){e.traverseEntity(t=>{let i=typeof t.identity=="string"?t.identity:t.identity.join("-");this.entityIdentityToEntity[i]===t&&(delete this.entityByUuid[t.uuid],delete this.entityIdentityToEntity[i]),t.dispose()})}clearScene(){for(let e of this.children)fr.is(e)&&e.disposeRecursively();this.children.length=0}resetAfterClear(e,t){this.init(e,t)}raycast(e){return this.raycast1(e,!1)}raycast1(e,t){let i=[],r=a=>{for(let n of a.children){let s=n.cloner;if(fr.is(n)&&!n.raycastLock&&(n.visible||s?.object.data.visible))if(t===!0&&n.isInstanceRoot){let o=[];if(e.intersectObject(n,!0,o),o.length){let l=o[0];l.object=n,l.point.applyMatrix4(l.object.matrixWorld);let u=n.matrixWorld.clone().invert();l.point.applyMatrix4(u),i.push(l)}}else(yo(n)||oM(n)&&this.enableHelpers&&n.objectHelper.visible)&&(e.intersectObject(n,!1,i),yM(n,e,i)),r(n)}};return r(this.activePage),i}raycastWithClones(e){let t=[],i=r=>{for(let a of r.children){let n=a.cloner;fr.is(a)&&(a.visible||n?.object.data.visible)&&((yo(a)||oM(a)&&this.enableHelpers&&a.objectHelper.visible)&&(e.intersectObject(a,!1,t),yM(a,e,t,!0)),i(a))}};return i(this),t}forEachEntity(e){for(let t of this.children)fr.is(t)&&e(t)}traverseConcreteEntity(e){for(let t of this.children)fr.is(t)&&t.isConcreteEntity&&t.traverseEntity(e)}traverseEntity(e){for(let t of this.children)fr.is(t)&&t.traverseEntity(e)}updateFont(e,t){this.traverseEntity(i=>{if(i instanceof Vn&&i.data.type==="Mesh"&&(i.data.geometry.type==="TextGeometry"||i.data.geometry.type==="InputGeometry")&&i.data.geometry.font===e){let r=i.geometry,a=i.data.geometry;r.updateFont(e,t).then(()=>{r.update(a);let n=i.invalidateDownstreamBooleanData();Ql(n)&&n.recomputeBoolean()})}})}traverseObject(e){for(let t of this.children)bm.is(t)&&t.traverseObject(e)}traverseVisibleEntity(e){for(let t of this.children)fr.is(t)&&t.visible&&t.traverseVisibleEntity(e)}dispose(){this.clearScene()}createChildrenObjects(e,t,i){let r=0;for(let a of e)this.createObject(a.id,a.data,a.children,t,r,i),r+=1}registerObjectCreatedInLegacy(e){this.entityByUuid[e.uuid]=e}unregisterObject(e){delete this.entityByUuid[e.uuid];for(let t of e.children)this.unregisterObject(t)}createObject(e,t,i,r,a,n){var s;let o={scene:this,shared:n},l=UA(e,t,o);return l&&(this.entityByUuid[e]=l,r.add(l),r.children.splice(a,0,r.children.pop()),i.length>0&&(l.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(i,l,n)),l.updateState(t,o),l instanceof Vn&&l.updateGeometryGroupsIfNeeded(),l.updateVisible(this),l.cloner&&this.toExpandCloner.add(l),(s=t.pathSnapping)!=null&&s.pathId&&this.pathConstraints.setConstraint(e,t.pathSnapping.pathId)),t.type==="Empty"&&t.animations&&l.traverseEntity(u=>{let c=u.dataPatched;if(u instanceof Vn&&c.bones&&c.boneInverses){let d=c.bones.map(f=>this.find(f)),h=c.boneInverses.map(f=>new zt().fromArray(f)),p=new kE(d,h);u.bind(p,u.bindMatrix)}else u.matrixAutoUpdate=!0}),l}getCenter(e){let t=[];for(let r=0,a=e.length;r<a;++r){let{id:n,recursive:s}=e[r],o=this.find(n),l=s?o.recursiveBBox:o.singleBBox;t.push(...l.vertices)}let i=new ba;return i.setFromPoints(t),i.getCenter(kI),kI}copyMatrixWorld(e,t){if(e===null){t.identity();return}let i=this.find(e);i?t.copy(i.matrixWorld):t.identity()}copyParentMatrixWorld(e,t){var i;if(e===null){t.identity();return}let r=(i=this.find(e))==null?void 0:i.parent;r?t.copy(r.matrixWorld):t.identity()}traverseMaterial(e){this.traverseEntity(t=>{if(t instanceof ns)if(Array.isArray(t.material))for(let i=0;i<t.material.length;i++)t.material[i]instanceof cc&&e(t.material[i]);else t.material instanceof cc&&e(t.material)})}updateViewPlaneSize(e,t,i=!1){this.traverseConcreteEntity(r=>{r instanceof Fn&&r.setViewplaneSize(e,t,i)})}initializeSplatViewer(){this.splatViewer=new yge({scene:this}),this.reloadSplats()}reloadSplats(){var e;(e=this.splatViewer)==null||e.loadSplat()}},e0=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return Math.sqrt(i*i+r*r)},bge=(e,t)=>{let i=t.x-e.x,r=t.y-e.y;return xge(Math.atan2(r,i))},wge=(e,t,i)=>{let r={x:0,y:0};return i=wM(i),r.x=e.x-t*Math.cos(i),r.y=e.y-t*Math.sin(i),r},wM=e=>e*(Math.PI/180),xge=e=>e*(180/Math.PI),Sge=e=>isNaN(e.buttons)?e.pressure!==0:e.buttons!==0,Lx=new Map,OI=e=>{Lx.has(e)&&clearTimeout(Lx.get(e)),Lx.set(e,setTimeout(e,100))},tb=(e,t,i)=>{let r=t.split(/[ ,]+/g),a;for(let n=0;n<r.length;n+=1)a=r[n],e.addEventListener?e.addEventListener(a,i,!1):e.attachEvent&&e.attachEvent(a,i)},DI=(e,t,i)=>{let r=t.split(/[ ,]+/g),a;for(let n=0;n<r.length;n+=1)a=r[n],e.removeEventListener?e.removeEventListener(a,i):e.detachEvent&&e.detachEvent(a,i)},i8=e=>(e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e),II=()=>{if(typeof window>"u")return;let e=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:e,y:t}},xM=(e,t)=>{t.top||t.right||t.bottom||t.left?(e.style.top=t.top,e.style.right=t.right,e.style.bottom=t.bottom,e.style.left=t.left):(e.style.left=t.x+"px",e.style.top=t.y+"px")},HA=(e,t,i)=>{let r=r8(e);for(let a in r)if(r.hasOwnProperty(a))if(typeof t=="string")r[a]=t+" "+i;else{let n="";for(let s=0,o=t.length;s<o;s+=1)n+=t[s]+" "+i+", ";r[a]=n.slice(0,-2)}return r},Cge=(e,t)=>{let i=r8(e);for(let r in i)i.hasOwnProperty(r)&&(i[r]=t);return i},r8=e=>{let t={};return t[e]="",["webkit","Moz","o"].forEach(function(i){t[i+e.charAt(0).toUpperCase()+e.slice(1)]=""}),t},Bx=(e,t)=>{for(let i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},_ge=(e,t)=>{let i={};for(let r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)?i[r]=t[r]:e.hasOwnProperty(r)&&(i[r]=e[r]);return i},SM=(e,t)=>{if(e.length)for(let i=0,r=e.length;i<r;i+=1)t(e[i]);else t(e)},Mge=(e,t,i)=>({x:Math.min(Math.max(e.x,t.x-i),t.x+i),y:Math.min(Math.max(e.y,t.y-i),t.y+i)});typeof window<"u"&&(a8="ontouchstart"in window,n8=!!window.PointerEvent,s8=!!window.MSPointerEvent);var a8,n8,s8,af={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},xh,Sm={};n8?xh=af.pointer:s8?xh=af.MSPointer:a8?(xh=af.touch,Sm=af.mouse):xh=af.mouse;function Md(){}Md.prototype.on=function(e,t){var i=this,r=e.split(/[ ,]+/g),a;i._handlers_=i._handlers_||{};for(var n=0;n<r.length;n+=1)a=r[n],i._handlers_[a]=i._handlers_[a]||[],i._handlers_[a].push(t);return i};Md.prototype.off=function(e,t){var i=this;return i._handlers_=i._handlers_||{},e===void 0?i._handlers_={}:t===void 0?i._handlers_[e]=null:i._handlers_[e]&&i._handlers_[e].indexOf(t)>=0&&i._handlers_[e].splice(i._handlers_[e].indexOf(t),1),i};Md.prototype.trigger=function(e,t){var i=this,r=e.split(/[ ,]+/g),a;i._handlers_=i._handlers_||{};for(var n=0;n<r.length;n+=1)a=r[n],i._handlers_[a]&&i._handlers_[a].length&&i._handlers_[a].forEach(function(s){s.call(i,{type:a,target:i},t)})};Md.prototype.config=function(e){var t=this;t.options=t.defaults||{},e&&(t.options=_ge(t.options,e))};Md.prototype.bindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},i._domHandlers_[t]=function(){typeof i["on"+t]=="function"?i["on"+t].apply(i,arguments):console.warn('[WARNING] : Missing "on'+t+'" handler.')},tb(e,xh[t],i._domHandlers_[t]),Sm[t]&&tb(e,Sm[t],i._domHandlers_[t]),i};Md.prototype.unbindEvt=function(e,t){var i=this;return i._domHandlers_=i._domHandlers_||{},DI(e,xh[t],i._domHandlers_[t]),Sm[t]&&DI(e,Sm[t],i._domHandlers_[t]),delete i._domHandlers_[t],this};var GA=Md;function Ha(e,t){return this.identifier=t.identifier,this.position=t.position,this.frontPosition=t.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(t),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Ha.id,Ha.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Ha.prototype=new GA;Ha.constructor=Ha;Ha.id=0;Ha.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)};Ha.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",t=Cge("borderRadius","50%"),i=HA("transition","opacity",e),r={};return r.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},r.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},r.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},Bx(r.el,i),this.options.shape==="circle"&&Bx(r.back,t),Bx(r.front,t),this.applyStyles(r),this};Ha.prototype.applyStyles=function(e){for(var t in this.ui)if(this.ui.hasOwnProperty(t))for(var i in e[t])this.ui[t].style[i]=e[t][i];return this};Ha.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)};Ha.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)};Ha.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()};Ha.prototype.show=function(e){var t=this;return t.options.dataOnly||(clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.addToDom(),t.restCallback(),setTimeout(function(){t.ui.el.style.opacity=1},0),t.showTimeout=setTimeout(function(){t.trigger("shown",t.instance),typeof e=="function"&&e.call(this)},t.options.fadeTime)),t};Ha.prototype.hide=function(e){var t=this;if(t.options.dataOnly)return t;if(t.ui.el.style.opacity=t.options.restOpacity,clearTimeout(t.removeTimeout),clearTimeout(t.showTimeout),clearTimeout(t.restTimeout),t.removeTimeout=setTimeout(function(){var i=t.options.mode==="dynamic"?"none":"block";t.ui.el.style.display=i,typeof e=="function"&&e.call(t),t.trigger("hidden",t.instance)},t.options.fadeTime),t.options.restJoystick){let i=t.options.restJoystick,r={};r.x=i===!0||i.x!==!1?0:t.instance.frontPosition.x,r.y=i===!0||i.y!==!1?0:t.instance.frontPosition.y,t.setPosition(e,r)}return t};Ha.prototype.setPosition=function(e,t){var i=this;i.frontPosition={x:t.x,y:t.y};var r=i.options.fadeTime+"ms",a={};a.front=HA("transition",["top","left"],r);var n={front:{}};n.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(a),i.applyStyles(n),i.restTimeout=setTimeout(function(){typeof e=="function"&&e.call(i),i.restCallback()},i.options.fadeTime)};Ha.prototype.restCallback=function(){var e=this,t={};t.front=HA("transition","none",""),e.applyStyles(t),e.trigger("rested",e.instance)};Ha.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}};Ha.prototype.computeDirection=function(e){var t=e.angle.radian,i=Math.PI/4,r=Math.PI/2,a,n,s;if(t>i&&t<i*3&&!e.lockX?a="up":t>-i&&t<=i&&!e.lockY?a="left":t>-i*3&&t<=-i&&!e.lockX?a="down":e.lockY||(a="right"),e.lockY||(t>-r&&t<r?n="left":n="right"),e.lockX||(t>0?s="up":s="down"),e.force>this.options.threshold){var o={},l;for(l in this.direction)this.direction.hasOwnProperty(l)&&(o[l]=this.direction[l]);var u={};this.direction={x:n,y:s,angle:a},e.direction=this.direction;for(l in o)o[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;(!u.x||!u.y)&&this.trigger("plain",e),u.x||this.trigger("plain:"+n,e),u.y||this.trigger("plain:"+s,e),u.angle||this.trigger("dir dir:"+a,e)}else this.resetDirection();return e};var Ege=Ha;function wa(e,t){var i=this;i.nipples=[],i.idles=[],i.actives=[],i.ids=[],i.pressureIntervals={},i.manager=e,i.id=wa.id,wa.id+=1,i.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},i.config(t),(i.options.mode==="static"||i.options.mode==="semi")&&(i.options.multitouch=!1),i.options.multitouch||(i.options.maxNumberOfNipples=1);let r=getComputedStyle(i.options.zone.parentElement);return r&&r.display==="flex"&&(i.parentIsFlex=!0),i.updateBox(),i.prepareNipples(),i.bindings(),i.begin(),i.nipples}wa.prototype=new GA;wa.constructor=wa;wa.id=0;wa.prototype.prepareNipples=function(){var e=this,t=e.nipples;t.on=e.on.bind(e),t.off=e.off.bind(e),t.options=e.options,t.destroy=e.destroy.bind(e),t.ids=e.ids,t.id=e.id,t.processOnMove=e.processOnMove.bind(e),t.processOnEnd=e.processOnEnd.bind(e),t.get=function(i){if(i===void 0)return t[0];for(var r=0,a=t.length;r<a;r+=1)if(t[r].identifier===i)return t[r];return!1}};wa.prototype.bindings=function(){var e=this;e.bindEvt(e.options.zone,"start"),e.options.zone.style.touchAction="none",e.options.zone.style.msTouchAction="none"};wa.prototype.begin=function(){var e=this,t=e.options;if(t.mode==="static"){var i=e.createNipple(t.position,e.manager.getIdentifier());i.add(),e.idles.push(i)}};wa.prototype.createNipple=function(e,t){var i=this,r=i.manager.scroll,a={},n=i.options,s={x:i.parentIsFlex?r.x:r.x+i.box.left,y:i.parentIsFlex?r.y:r.y+i.box.top};if(e.x&&e.y)a={x:e.x-s.x,y:e.y-s.y};else if(e.top||e.right||e.bottom||e.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=e.top,o.style.right=e.right,o.style.bottom=e.bottom,o.style.left=e.left,o.style.position="absolute",n.zone.appendChild(o);var l=o.getBoundingClientRect();n.zone.removeChild(o),a=e,e={x:l.left+r.x,y:l.top+r.y}}var u=new Ege(i,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:t,position:e,zone:n.zone,frontPosition:{x:0,y:0},shape:n.shape});return n.dataOnly||(xM(u.ui.el,a),xM(u.ui.front,u.frontPosition)),i.nipples.push(u),i.trigger("added "+u.identifier+":added",u),i.manager.trigger("added "+u.identifier+":added",u),i.bindNipple(u),u};wa.prototype.updateBox=function(){var e=this;e.box=e.options.zone.getBoundingClientRect()};wa.prototype.bindNipple=function(e){var t=this,i,r=function(a,n){i=a.type+" "+n.id+":"+a.type,t.trigger(i,n)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};wa.prototype.pressureFn=function(e,t,i){var r=this,a=0;clearInterval(r.pressureIntervals[i]),r.pressureIntervals[i]=setInterval(function(){var n=e.force||e.pressure||e.webkitForce||0;n!==a&&(t.trigger("pressure",n),r.trigger("pressure "+t.identifier+":pressure",n),a=n)}.bind(r),100)};wa.prototype.onstart=function(e){var t=this,i=t.options,r=e;e=i8(e),t.updateBox();var a=function(n){t.actives.length<i.maxNumberOfNipples?t.processOnStart(n):r.type.match(/^touch/)&&(Object.keys(t.manager.ids).forEach(function(s){if(Object.values(r.touches).findIndex(function(l){return l.identifier===s})<0){var o=[e[0]];o.identifier=s,t.processOnEnd(o)}}),t.actives.length<i.maxNumberOfNipples&&t.processOnStart(n))};return SM(e,a),t.manager.bindDocument(),!1};wa.prototype.processOnStart=function(e){var t=this,i=t.options,r,a=t.manager.getIdentifier(e),n=e.force||e.pressure||e.webkitForce||0,s={x:e.pageX,y:e.pageY},o=t.getOrCreate(a,s);o.identifier!==a&&t.manager.removeIdentifier(o.identifier),o.identifier=a;var l=function(c){c.trigger("start",c),t.trigger("start "+c.id+":start",c),c.show(),n>0&&t.pressureFn(e,c,c.identifier),t.processOnMove(e)};if((r=t.idles.indexOf(o))>=0&&t.idles.splice(r,1),t.actives.push(o),t.ids.push(o.identifier),i.mode!=="semi")l(o);else{var u=e0(s,o.position);if(u<=i.catchDistance)l(o);else{o.destroy(),t.processOnStart(e);return}}return o};wa.prototype.getOrCreate=function(e,t){var i=this,r=i.options,a;return/(semi|static)/.test(r.mode)?(a=i.idles[0],a?(i.idles.splice(0,1),a):r.mode==="semi"?i.createNipple(t,e):(console.warn("Coudln't find the needed nipple."),!1)):(a=i.createNipple(t,e),a)};wa.prototype.processOnMove=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),a=t.nipples.get(r),n=t.manager.scroll;if(!Sge(e)){this.processOnEnd(e);return}if(!a){console.error("Found zombie joystick with ID "+r),t.manager.removeIdentifier(r);return}if(i.dynamicPage){var s=a.el.getBoundingClientRect();a.position={x:n.x+s.left,y:n.y+s.top}}a.identifier=r;var o=a.options.size/2,l={x:e.pageX,y:e.pageY};i.lockX&&(l.y=a.position.y),i.lockY&&(l.x=a.position.x);var u=e0(l,a.position),c=bge(l,a.position),d=wM(c),h=u/o,p={distance:u,position:l},f,v;if(a.options.shape==="circle"?(f=Math.min(u,o),v=wge(a.position,f,c)):(v=Mge(l,a.position,o),f=e0(v,a.position)),i.follow){if(u>o){let b=l.x-v.x,x=l.y-v.y;a.position.x+=b,a.position.y+=x,a.el.style.top=a.position.y-(t.box.top+n.y)+"px",a.el.style.left=a.position.x-(t.box.left+n.x)+"px",u=e0(l,a.position)}}else l=v,u=f;var m=l.x-a.position.x,g=l.y-a.position.y;a.frontPosition={x:m,y:g},i.dataOnly||xM(a.ui.front,a.frontPosition);var y={identifier:a.identifier,position:l,force:h,pressure:e.force||e.pressure||e.webkitForce||0,distance:u,angle:{radian:d,degree:c},vector:{x:m/o,y:-g/o},raw:p,instance:a,lockX:i.lockX,lockY:i.lockY};y=a.computeDirection(y),y.angle={radian:wM(180-c),degree:180-c},a.trigger("move",y),t.trigger("move "+a.id+":move",y)};wa.prototype.processOnEnd=function(e){var t=this,i=t.options,r=t.manager.getIdentifier(e),a=t.nipples.get(r),n=t.manager.removeIdentifier(a.identifier);!a||(i.dataOnly||a.hide(function(){i.mode==="dynamic"&&(a.trigger("removed",a),t.trigger("removed "+a.id+":removed",a),t.manager.trigger("removed "+a.id+":removed",a),a.destroy())}),clearInterval(t.pressureIntervals[a.identifier]),a.resetDirection(),a.trigger("end",a),t.trigger("end "+a.id+":end",a),t.ids.indexOf(a.identifier)>=0&&t.ids.splice(t.ids.indexOf(a.identifier),1),t.actives.indexOf(a)>=0&&t.actives.splice(t.actives.indexOf(a),1),/(semi|static)/.test(i.mode)?t.idles.push(a):t.nipples.indexOf(a)>=0&&t.nipples.splice(t.nipples.indexOf(a),1),t.manager.unbindDocument(),/(semi|static)/.test(i.mode)&&(t.manager.ids[n.id]=n.identifier))};wa.prototype.onDestroyed=function(e,t){var i=this;i.nipples.indexOf(t)>=0&&i.nipples.splice(i.nipples.indexOf(t),1),i.actives.indexOf(t)>=0&&i.actives.splice(i.actives.indexOf(t),1),i.idles.indexOf(t)>=0&&i.idles.splice(i.idles.indexOf(t),1),i.ids.indexOf(t.identifier)>=0&&i.ids.splice(i.ids.indexOf(t.identifier),1),i.manager.removeIdentifier(t.identifier),i.manager.unbindDocument()};wa.prototype.destroy=function(){var e=this;e.unbindEvt(e.options.zone,"start"),e.nipples.forEach(function(i){i.destroy()});for(var t in e.pressureIntervals)e.pressureIntervals.hasOwnProperty(t)&&clearInterval(e.pressureIntervals[t]);e.trigger("destroyed",e.nipples),e.manager.unbindDocument(),e.off()};var Age=wa;function cn(e){var t=this;t.ids={},t.index=0,t.collections=[],t.scroll=II(),t.config(e),t.prepareCollections();var i=function(){var a;t.collections.forEach(function(n){n.forEach(function(s){a=s.el.getBoundingClientRect(),s.position={x:t.scroll.x+a.left,y:t.scroll.y+a.top}})})};if(typeof window>"u")return t.collections;tb(window,"resize",function(){OI(i)});var r=function(){t.scroll=II()};return tb(window,"scroll",function(){OI(r)}),t.collections}cn.prototype=new GA;cn.constructor=cn;cn.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(t){var i;return e.collections.every(function(r){return i=r.get(t),!i}),i}};cn.prototype.create=function(e){return this.createCollection(e)};cn.prototype.createCollection=function(e){var t=this,i=new Age(t,e);return t.bindCollection(i),t.collections.push(i),i};cn.prototype.bindCollection=function(e){var t=this,i,r=function(a,n){i=a.type+" "+n.id+":"+a.type,t.trigger(i,n)};e.on("destroyed",t.onDestroyed.bind(t)),e.on("shown hidden rested dir plain",r),e.on("dir:up dir:right dir:down dir:left",r),e.on("plain:up plain:right plain:down plain:left",r)};cn.prototype.bindDocument=function(){var e=this;e.binded||(e.bindEvt(document,"move").bindEvt(document,"end"),e.binded=!0)};cn.prototype.unbindDocument=function(e){var t=this;(!Object.keys(t.ids).length||e===!0)&&(t.unbindEvt(document,"move").unbindEvt(document,"end"),t.binded=!1)};cn.prototype.getIdentifier=function(e){var t;return e?(t=e.identifier===void 0?e.pointerId:e.identifier,t===void 0&&(t=this.latest||0)):t=this.index,this.ids[t]===void 0&&(this.ids[t]=this.index,this.index+=1),this.latest=t,this.ids[t]};cn.prototype.removeIdentifier=function(e){var t={};for(var i in this.ids)if(this.ids[i]===e){t.id=i,t.identifier=this.ids[i],delete this.ids[i];break}return t};cn.prototype.onmove=function(e){var t=this;return t.onAny("move",e),!1};cn.prototype.onend=function(e){var t=this;return t.onAny("end",e),!1};cn.prototype.oncancel=function(e){var t=this;return t.onAny("end",e),!1};cn.prototype.onAny=function(e,t){var i=this,r,a="processOn"+e.charAt(0).toUpperCase()+e.slice(1);t=i8(t);var n=function(o,l,u){u.ids.indexOf(l)>=0&&(u[a](o),o._found_=!0)},s=function(o){r=i.getIdentifier(o),SM(i.collections,n.bind(null,o,r)),o._found_||i.removeIdentifier(r)};return SM(t,s),!1};cn.prototype.destroy=function(){var e=this;e.unbindDocument(!0),e.ids={},e.index=0,e.collections.forEach(function(t){t.destroy()}),e.off()};cn.prototype.onDestroyed=function(e,t){var i=this;if(i.collections.indexOf(t)<0)return!1;i.collections.splice(i.collections.indexOf(t),1)};var Pge=cn,LI=new Pge,Tge={create:function(e){return LI.create(e)},factory:LI},o8=new Map,Vf=new Map,Gc=class{constructor(e,t,i,r){this.data=t;let{audio:a,volume:n,delay:s,loop:o}=t;if(!a)throw new Error("Missing property");let l=typeof a=="string"?r.getAudio(a).src:a.data;this.audioPlayer=new Cf({src:l,volume:n,delay:s,loop:o}),Vf.has(i.uuid)?Vf.get(i.uuid).push(this):Vf.set(i.uuid,[this]),o8.set(e,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},CM=class{constructor(e){this.data=e}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(e){let t=o8.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):t.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(e){let t=Vf.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let e=[...Vf.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},l8=class{constructor(e,t,i,r,a){if(this.data=t,this.shared=r,this.condition=a,t.interaction==="play")this.interaction=new Gc(e,t,i,r);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new CM(t);else throw new Error("Missing property")}dispatchBasic(){if(qr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Gc?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(qr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Gc?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(e){if(qr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Gc&&(e==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},u8=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.delay=0,this.emission=e.emission,e.delay!==void 0&&(this.delay=e.delay),this.particleSystem=this.page.scene.find(this.data.emitterObjectId)}toggleEmitting(){this.particleSystem.started&&!this.particleSystem.stopped?this.stop(this.delay):this.start(this.delay)}toggleFroze(){this.particleSystem.started&&!this.particleSystem.isFrozen?this.freeze(this.delay):this.unFreeze(this.delay)}start(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.start(0),this.clearDelay()},e);return}this.particleSystem.start()}stop(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.stop(0),this.clearDelay()},e);return}this.particleSystem.stop()}freeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.freeze(0),this.clearDelay()},e);return}this.particleSystem.froze()}unFreeze(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.unFreeze(0),this.clearDelay()},e);return}this.particleSystem.unFroze()}reset(e=0){if(e){this.delayTimerId=window.setTimeout(()=>{this.reset(0),this.clearDelay()},e);return}this.particleSystem.reset()}reverseFromCurrent(){switch(this.emission){case"emitToggle":this.toggleEmitting();break;case"pauseToggle":this.toggleFroze();break}}dispatchBasic(){if(qr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"emitToggle":this.toggleEmitting();break;case"pause":this.freeze(this.delay);break;case"pauseToggle":this.toggleFroze();break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchConditional(){if(qr(this.shared,this.condition)===!1||!this.particleSystem)return!1;switch(this.emission){case"start":this.start(this.delay);break;case"stop":this.stop(this.delay);break;case"reset":this.reset(this.delay);break}}dispatchGameControl(e){if(qr(this.shared,this.condition)===!1||!this.particleSystem)return!1;e==="start"?this.start(this.delay):this.stop(this.delay)}dispose(){!this.particleSystem||(this.particleSystem.reset(),this.clearDelay())}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}},kge="text/plain",Oge="us-ascii",BI=(e,t)=>t.some(i=>i instanceof RegExp?i.test(e):i===e),Dge=(e,{stripHash:t})=>{let i=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!i)throw new Error(`Invalid URL: ${e}`);let{type:r,data:a,hash:n}=i.groups,s=r.split(";");n=t?"":n;let o=!1;s[s.length-1]==="base64"&&(s.pop(),o=!0);let l=(s.shift()||"").toLowerCase(),u=[...s.map(c=>{let[d,h=""]=c.split("=").map(p=>p.trim());return d==="charset"&&(h=h.toLowerCase(),h===Oge)?"":`${d}${h?`=${h}`:""}`}).filter(Boolean)];return o&&u.push("base64"),(u.length>0||l&&l!==kge)&&u.unshift(l),`data:${u.join(";")},${o?a.trim():a}${n?`#${n}`:""}`};function Ige(e,t){if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Dge(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let i=e.startsWith("//");!i&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let r=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&r.protocol==="https:"&&(r.protocol="http:"),t.forceHttps&&r.protocol==="http:"&&(r.protocol="https:"),t.stripAuthentication&&(r.username="",r.password=""),t.stripHash?r.hash="":t.stripTextFragment&&(r.hash=r.hash.replace(/#?:~:text.*?$/i,"")),r.pathname){let n=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,s=0,o="";for(;;){let u=n.exec(r.pathname);if(!u)break;let c=u[0],d=u.index,h=r.pathname.slice(s,d);o+=h.replace(/\/{2,}/g,"/"),o+=c,s=d+c.length}let l=r.pathname.slice(s,r.pathname.length);o+=l.replace(/\/{2,}/g,"/"),r.pathname=o}if(r.pathname)try{r.pathname=decodeURI(r.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let n=r.pathname.split("/"),s=n[n.length-1];BI(s,t.removeDirectoryIndex)&&(n=n.slice(0,-1),r.pathname=n.slice(1).join("/")+"/")}if(r.hostname&&(r.hostname=r.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(r.hostname)&&(r.hostname=r.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let n of[...r.searchParams.keys()])BI(n,t.removeQueryParameters)&&r.searchParams.delete(n);if(t.removeQueryParameters===!0&&(r.search=""),t.sortQueryParameters){r.searchParams.sort();try{r.search=decodeURIComponent(r.search)}catch{}}t.removeTrailingSlash&&(r.pathname=r.pathname.replace(/\/$/,""));let a=e;return e=r.toString(),!t.removeSingleSlash&&r.pathname==="/"&&!a.endsWith("/")&&r.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||r.pathname==="/")&&r.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),i&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}var Lge=class{constructor({url:e,context:t},i,r,a){if(this.controlsManager=i,this.shared=r,this.condition=a,!e)throw new Error("Missing property");this.url=e.startsWith("mailto:")?e:Ige(e,{removeTrailingSlash:!1,removeSingleSlash:!1,stripWWW:!1}),this.context=t??"tab"}dispatch(){var e;if(qr(this.shared,this.condition)===!1)return!1;Vm?window.location.assign(this.url):(this.context==="tab"||A6&&this.context==="none"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(e=this.controlsManager.orbitControls)==null||e.onPointerUp(Ni[0]),Soe())}},c8=class{constructor(e,t,i,r,a){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=a,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=n=>{var s,o;this.timeoutIdQueue.shift();let l=this.page.scene.find(n);if(l===void 0)return;let u=this.controlsManager.sharedGameControlGlobals.rapierWorld,c=u?(s=l.dataPatched.physics)==null?void 0:s.fusedBody:!0;if(l.cloner){for(let d of l.cloner.children)c?(d.playModeVisible=!1,d.rigidBody&&((o=l.dataPatched.physics)==null?void 0:o.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),u.removeRigidBody(d.rigidBody),d.rigidBody=void 0),d.bvhGeometry&&(d.bvhGeometry=void 0)):this.clone===void 0||this.clone===d?(d.playModeVisible=!1,d.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(d.rigidBody.collider(0).handle),u.removeRigidBody(d.rigidBody),d.rigidBody=void 0)):d.playModeVisible===void 0&&(d.playModeVisible=!0);(c||this.clone===void 0||this.clone===!1)&&(l.visible=!1,l.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(l.rigidBody.collider(0).handle),u.removeRigidBody(l.rigidBody),l.rigidBody=void 0),l.bvhGeometry&&(l.bvhGeometry=void 0))}else l.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(l.rigidBody.collider(0).handle),u.removeRigidBody(l.rigidBody),l.rigidBody=void 0),l.bvhGeometry&&(l.bvhGeometry=void 0),l.visible=!1;u===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(d=>d.rigidBody!==void 0),l.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...e.objects]}dispatch(e){if(qr(this.shared,this.condition)===!1)return!1;this.clone=e,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(qr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(e=>window.clearTimeout(e))}},d8=class{constructor(e,t,i,r,a){this.data=e,this.page=t,this.shared=i,this.eventManager=r,this.condition=a,this.shared=i}dispatch(){if(qr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var e;this.shared.reset(this.shared.data,!0),rP(this.page,this.shared,!0),this.eventManager.reset(),(e=this.eventManager.controlsManager.gameControl)==null||e.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},(this.data.delay??0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},h8={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},qA={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},Bge=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ib={CSS:{},springs:{}};function Co(e,t,i){return Math.min(Math.max(e,t),i)}function Ff(e,t){return e.indexOf(t)>-1}function zx(e,t){return e.apply(null,t)}var Fi={arr:function(e){return Array.isArray(e)},obj:function(e){return Ff(Object.prototype.toString.call(e),"Object")},pth:function(e){return Fi.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return!("isNode"in e)&&(e.nodeType||Fi.svg(e))},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return Fi.hex(e)||Fi.rgb(e)||Fi.hsl(e)},key:function(e){return!h8.hasOwnProperty(e)&&!qA.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function p8(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(i){return parseFloat(i)}):[]}function f8(e,t){var i=p8(e),r=Co(Fi.und(i[0])?1:i[0],.1,100),a=Co(Fi.und(i[1])?100:i[1],.1,100),n=Co(Fi.und(i[2])?10:i[2],.1,100),s=Co(Fi.und(i[3])?0:i[3],.1,100),o=Math.sqrt(a/r),l=n/(2*Math.sqrt(a*r)),u=l<1?o*Math.sqrt(1-l*l):0,c=1,d=l<1?(l*o+-s)/u:-s+o;function h(f){var v=t?t*f/1e3:f;return l<1?v=Math.exp(-v*l*o)*(c*Math.cos(u*v)+d*Math.sin(u*v)):v=(c+d*v)*Math.exp(-v*o),f===0||f===1?f:1-v}function p(){var f=ib.springs[e];if(f)return f;for(var v=1/6,m=0,g=0;;)if(m+=v,h(m)===1){if(g++,g>=16)break}else g=0;var y=m*v*1e3;return ib.springs[e]=y,y}return t?h:p}function zge(e){return e===void 0&&(e=10),function(t){return Math.ceil(Co(t,1e-6,1)*e)*(1/e)}}var Rge=function(){var e=11,t=1/(e-1);function i(c,d){return 1-3*d+3*c}function r(c,d){return 3*d-6*c}function a(c){return 3*c}function n(c,d,h){return((i(d,h)*c+r(d,h))*c+a(d))*c}function s(c,d,h){return 3*i(d,h)*c*c+2*r(d,h)*c+a(d)}function o(c,d,h,p,f){var v,m,g=0;do m=d+(h-d)/2,v=n(m,p,f)-c,v>0?h=m:d=m;while(Math.abs(v)>1e-7&&++g<10);return m}function l(c,d,h,p){for(var f=0;f<4;++f){var v=s(d,h,p);if(v===0)return d;var m=n(d,h,p)-c;d-=m/v}return d}function u(c,d,h,p){if(!(0<=c&&c<=1&&0<=h&&h<=1))return;var f=new Float32Array(e);if(c!==d||h!==p)for(var v=0;v<e;++v)f[v]=n(v*t,c,h);function m(g){for(var y=0,b=1,x=e-1;b!==x&&f[b]<=g;++b)y+=t;--b;var S=(g-f[b])/(f[b+1]-f[b]),w=y+S*t,E=s(w,c,h);return E>=.001?l(g,w,c,h):E===0?w:o(g,y,y+t,c,h)}return function(g){return c===d&&h===p||g===0||g===1?g:n(m(g),d,p)}}return u}(),m8=function(){var e={linear:function(){return function(r){return r}}},t={Sine:function(){return function(r){return 1-Math.cos(r*Math.PI/2)}},Circ:function(){return function(r){return 1-Math.sqrt(1-r*r)}},Back:function(){return function(r){return r*r*(3*r-2)}},Bounce:function(){return function(r){for(var a,n=4;r<((a=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((a*3-2)/22-r,2)}},Elastic:function(r,a){r===void 0&&(r=1),a===void 0&&(a=.5);var n=Co(r,1,10),s=Co(a,.1,2);return function(o){return o===0||o===1?o:-n*Math.pow(2,10*(o-1))*Math.sin((o-1-s/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/s)}}},i=["Quad","Cubic","Quart","Quint","Expo"];return i.forEach(function(r,a){t[r]=function(){return function(n){return Math.pow(n,a+2)}}}),Object.keys(t).forEach(function(r){var a=t[r];e["easeIn"+r]=a,e["easeOut"+r]=function(n,s){return function(o){return 1-a(n,s)(1-o)}},e["easeInOut"+r]=function(n,s){return function(o){return o<.5?a(n,s)(o*2)/2:1-a(n,s)(o*-2+2)/2}}}),e}();function YA(e,t){if(Fi.fnc(e))return e;var i=e.split("(")[0],r=m8[i],a=p8(e);switch(i){case"spring":return f8(e,t);case"cubicBezier":return zx(Rge,a);case"steps":return zx(zge,a);default:return zx(r,a)}}function v8(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function a1(e,t){for(var i=e.length,r=arguments.length>=2?arguments[1]:void 0,a=[],n=0;n<i;n++)if(n in e){var s=e[n];t.call(r,s,n,e)&&a.push(s)}return a}function n1(e){return e.reduce(function(t,i){return t.concat(Fi.arr(i)?n1(i):i)},[])}function zI(e){return Fi.arr(e)?e:(Fi.str(e)&&(e=v8(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function XA(e,t){return e.some(function(i){return i===t})}function KA(e){var t={};for(var i in e)t[i]=e[i];return t}function _M(e,t){var i=KA(e);for(var r in e)i[r]=t.hasOwnProperty(r)?t[r]:e[r];return i}function s1(e,t){var i=KA(e);for(var r in t)i[r]=Fi.und(e[r])?t[r]:e[r];return i}function Nge(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function Vge(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=e.replace(t,function(o,l,u,c){return l+l+u+u+c+c}),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i),a=parseInt(r[1],16),n=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+a+","+n+","+s+",1)"}function Fge(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(t[1],10)/360,r=parseInt(t[2],10)/100,a=parseInt(t[3],10)/100,n=t[4]||1;function s(h,p,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?h+(p-h)*6*f:f<1/2?p:f<2/3?h+(p-h)*(2/3-f)*6:h}var o,l,u;if(r==0)o=l=u=a;else{var c=a<.5?a*(1+r):a+r-a*r,d=2*a-c;o=s(d,c,i+1/3),l=s(d,c,i),u=s(d,c,i-1/3)}return"rgba("+o*255+","+l*255+","+u*255+","+n+")"}function jge(e){if(Fi.rgb(e))return Nge(e);if(Fi.hex(e))return Vge(e);if(Fi.hsl(e))return Fge(e)}function tu(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function $ge(e){if(Ff(e,"translate")||e==="perspective")return"px";if(Ff(e,"rotate")||Ff(e,"skew"))return"deg"}function MM(e,t){return Fi.fnc(e)?e(t.target,t.id,t.total):e}function ol(e,t){return e.getAttribute(t)}function ZA(e,t,i){var r=tu(t);if(XA([i,"deg","rad","turn"],r))return t;var a=ib.CSS[t+i];if(!Fi.und(a))return a;var n=100,s=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(s),s.style.position="absolute",s.style.width=n+i;var l=n/s.offsetWidth;o.removeChild(s);var u=l*parseFloat(t);return ib.CSS[t+i]=u,u}function g8(e,t,i){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),a=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return i?ZA(e,a,i):a}}function QA(e,t){if(Fi.dom(e)&&!Fi.inp(e)&&(ol(e,t)||Fi.svg(e)&&e[t]))return"attribute";if(Fi.dom(e)&&XA(Bge,t))return"transform";if(Fi.dom(e)&&t!=="transform"&&g8(e,t))return"css";if(e[t]!=null)return"object"}function y8(e){if(Fi.dom(e)){for(var t=e.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map,a;a=i.exec(t);)r.set(a[1],a[2]);return r}}function Uge(e,t,i,r){var a=Ff(t,"scale")?1:0+$ge(t),n=y8(e).get(t)||a;return i&&(i.transforms.list.set(t,n),i.transforms.last=t),r?ZA(e,n,r):n}function JA(e,t,i,r){switch(QA(e,t)){case"transform":return Uge(e,t,r,i);case"css":return g8(e,t,i);case"attribute":return ol(e,t);default:return e[t]||0}}function eP(e,t){var i=/^(\*=|\+=|-=)/.exec(e);if(!i)return e;var r=tu(e)||0,a=parseFloat(t),n=parseFloat(e.replace(i[0],""));switch(i[0][0]){case"+":return a+n+r;case"-":return a-n+r;case"*":return a*n+r}}function b8(e,t){if(Fi.col(e))return jge(e);if(/\s/g.test(e))return e;var i=tu(e),r=i?e.substr(0,e.length-i.length):e;return t?r+t:r}function tP(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Wge(e){return Math.PI*2*ol(e,"r")}function Hge(e){return ol(e,"width")*2+ol(e,"height")*2}function Gge(e){return tP({x:ol(e,"x1"),y:ol(e,"y1")},{x:ol(e,"x2"),y:ol(e,"y2")})}function w8(e){for(var t=e.points,i=0,r,a=0;a<t.numberOfItems;a++){var n=t.getItem(a);a>0&&(i+=tP(r,n)),r=n}return i}function qge(e){var t=e.points;return w8(e)+tP(t.getItem(t.numberOfItems-1),t.getItem(0))}function x8(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return Wge(e);case"rect":return Hge(e);case"line":return Gge(e);case"polyline":return w8(e);case"polygon":return qge(e)}}function Yge(e){var t=x8(e);return e.setAttribute("stroke-dasharray",t),t}function Xge(e){for(var t=e.parentNode;Fi.svg(t)&&Fi.svg(t.parentNode);)t=t.parentNode;return t}function S8(e,t){var i=t||{},r=i.el||Xge(e),a=r.getBoundingClientRect(),n=ol(r,"viewBox"),s=a.width,o=a.height,l=i.viewBox||(n?n.split(" "):[0,0,s,o]);return{el:r,viewBox:l,x:l[0]/1,y:l[1]/1,w:s/l[2],h:o/l[3]}}function Kge(e,t){var i=Fi.str(e)?v8(e)[0]:e,r=t||100;return function(a){return{property:a,el:i,svg:S8(i),totalLength:x8(i)*(r/100)}}}function Zge(e,t){function i(o){o===void 0&&(o=0);var l=t+o>=1?t+o:0;return e.el.getPointAtLength(l)}var r=S8(e.el,e.svg),a=i(),n=i(-1),s=i(1);switch(e.property){case"x":return(a.x-r.x)*r.w;case"y":return(a.y-r.y)*r.h;case"angle":return Math.atan2(s.y-n.y,s.x-n.x)*180/Math.PI}}function RI(e,t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=b8(Fi.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(i)?r.match(i).map(Number):[0],strings:Fi.str(e)||t?r.split(i):[]}}function C8(e){var t=e?n1(Fi.arr(e)?e.map(zI):zI(e)):[];return a1(t,function(i,r,a){return a.indexOf(i)===r})}function _8(e){var t=C8(e);return t.map(function(i,r){return{target:i,id:r,total:t.length,transforms:{list:y8(i)}}})}function Qge(e,t){var i=KA(t);if(/^spring/.test(i.easing)&&(i.duration=f8(i.easing)),Fi.arr(e)){var r=e.length,a=r===2&&!Fi.obj(e[0]);a?e={value:e}:Fi.fnc(t.duration)||(i.duration=t.duration/r)}var n=Fi.arr(e)?e:[e];return n.map(function(s,o){var l=Fi.obj(s)&&!Fi.pth(s)?s:{value:s};return Fi.und(l.delay)&&(l.delay=o?0:t.delay),Fi.und(l.endDelay)&&(l.endDelay=o===n.length-1?t.endDelay:0),l}).map(function(s){return s1(s,i)})}function Jge(e){for(var t=a1(n1(e.map(function(n){return Object.keys(n)})),function(n){return Fi.key(n)}).reduce(function(n,s){return n.indexOf(s)<0&&n.push(s),n},[]),i={},r=function(n){var s=t[n];i[s]=e.map(function(o){var l={};for(var u in o)Fi.key(u)?u==s&&(l.value=o[u]):l[u]=o[u];return l})},a=0;a<t.length;a++)r(a);return i}function e0e(e,t){var i=[],r=t.keyframes;r&&(t=s1(Jge(r),t));for(var a in t)Fi.key(a)&&i.push({name:a,tweens:Qge(t[a],e)});return i}function t0e(e,t){var i={};for(var r in e){var a=MM(e[r],t);Fi.arr(a)&&(a=a.map(function(n){return MM(n,t)}),a.length===1&&(a=a[0])),i[r]=a}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function i0e(e,t){var i;return e.tweens.map(function(r){var a=t0e(r,t),n=a.value,s=Fi.arr(n)?n[1]:n,o=tu(s),l=JA(t.target,e.name,o,t),u=i?i.to.original:l,c=Fi.arr(n)?n[0]:u,d=tu(c)||tu(l),h=o||d;return Fi.und(s)&&(s=u),a.from=RI(c,h),a.to=RI(eP(s,c),h),a.start=i?i.end:0,a.end=a.start+a.delay+a.duration+a.endDelay,a.easing=YA(a.easing,a.duration),a.isPath=Fi.pth(n),a.isColor=Fi.col(a.from.original),a.isColor&&(a.round=1),i=a,a})}var M8={css:function(e,t,i){return e.style[t]=i},attribute:function(e,t,i){return e.setAttribute(t,i)},object:function(e,t,i){return e[t]=i},transform:function(e,t,i,r,a){if(r.list.set(t,i),t===r.last||a){var n="";r.list.forEach(function(s,o){n+=o+"("+s+") "}),e.style.transform=n}}};function E8(e,t){var i=_8(e);i.forEach(function(r){for(var a in t){var n=MM(t[a],r),s=r.target,o=tu(n),l=JA(s,a,o,r),u=o||tu(l),c=eP(b8(n,u),l),d=QA(s,a);M8[d](s,a,c,r.transforms,!0)}})}function r0e(e,t){var i=QA(e.target,t.name);if(i){var r=i0e(t,e),a=r[r.length-1];return{type:i,property:t.name,animatable:e,tweens:r,duration:a.end,delay:r[0].delay,endDelay:a.endDelay}}}function a0e(e,t){return a1(n1(e.map(function(i){return t.map(function(r){return r0e(i,r)})})),function(i){return!Fi.und(i)})}function A8(e,t){var i=e.length,r=function(n){return n.timelineOffset?n.timelineOffset:0},a={};return a.duration=i?Math.max.apply(Math,e.map(function(n){let s=n.startOnceDelay??0,o=n.pingPongDelayCorrection??0,l=n.pingPongEndDelayCorrection??0;return r(n)+s+o+l+n.duration*(n.loop??1)})):t.duration,a.delay=i?Math.min.apply(Math,e.map(function(n){let s=n.startOnceDelay??0,o=n.pingPongDelayCorrection??0;return r(n)+s+o+n.delay})):t.delay,a.endDelay=i?a.duration-Math.max.apply(Math,e.map(function(n){let s=n.startOnceDelay??0,o=n.pingPongDelayCorrection??0,l=n.pingPongEndDelayCorrection??0;return r(n)+s+o+n.duration*(n.loop??1)-n.endDelay-l})):t.endDelay,a}var NI=0;function n0e(e){var t=_M(h8,e),i=_M(qA,e),r=e0e(i,e),a=_8(e.targets),n=a0e(a,r),s=A8(n,i),o=NI;return NI++,s1(t,{id:o,children:[],animatables:a,animations:n,duration:s.duration,delay:s.delay,endDelay:s.endDelay,startOnceDelay:i.startOnceDelay,pingPongDelayCorrection:i.pingPongDelayCorrection,pingPongEndDelayCorrection:i.pingPongEndDelayCorrection})}var Js=[],VI=[],t0,s0e=function(){function e(){t0=requestAnimationFrame(t)}function t(i){var r=Js.length;if(r){for(var a=0;a<r;){var n=Js[a];n.paused?(Js.splice(a,1),r-=1):(n.tick(i),a++)}e()}else t0=cancelAnimationFrame(t0)}return e}();function o0e(e){document.hidden?(Js.forEach(function(t){return t.pause(e.timeStamp)}),VI=Js.slice(0),ya.running=Js=[]):VI.forEach(function(t){return t.play(e.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",o0e);function ya(e){e===void 0&&(e={});var t=0,i=0,r=0,a,n,s=0,o=null;function l(w){var E=window.Promise&&new Promise(function(M){return o=M});return w.finished=E,E}var u=n0e(e);l(u);function c(){var w=u.direction;w!=="alternate"&&(u.direction=w!=="normal"?"normal":"reverse"),u.reversed=!u.reversed,n.forEach(function(E){(E.loop===1||E.loop%2===0)&&(E.reversed=u.reversed)})}function d(){u.direction="normal",u.reversed=!1,n.forEach(function(w){return w.reversed=!1})}function h(w){return u.reversed?u.duration-w:w}function p(){t=0,i=h(u.currentTime)*(1/ya.speed)}function f(w,E,M=!1){E&&(u.reversed?E.seek(E.duration*E.loop-(w-E.timelineOffset-E.pingPongDelayCorrection),M):E.seek(w-E.timelineOffset-E.startOnceDelay-E.pingPongDelayCorrection,M))}function v(w,E=!1){if(u.reversed)for(var M=s;M--;)f(w,n[M],E);else for(var P=0;P<s;P++)f(w,n[P],E)}function m(w){var E,M,P,A,k,I,O,D,F,U,z=0,B=u.animations,W=B.length;for(u.direction!=="alternate"&&((E=u.parent)==null?void 0:E.direction)==="alternate"?((M=u.parent)==null?void 0:M.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1&&((P=u.parent)!=null&&P.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w):x(!1,(A=u.parent)==null?void 0:A.rewind,u.rewind,(k=u.parent)==null?void 0:k.reversePlayback,u.reversePlayback)&&((I=u.parent)!=null&&I.reversed&&u.direction==="alternate"?w=u.duration-u.delay+u.endDelay-w:w=u.duration+u.delay-u.endDelay-w);z<W;){var R=B[z],$=R.animatable,q=R.tweens,Z=q.length-1,G=q[Z];Z&&(G=a1(q,function(at){return w<at.end})[0]||G);let pt;(O=u.parent)!=null&&O.reversed&&u.direction==="alternate"?pt=Co(w-G.start-G.endDelay,0,G.duration)/G.duration:pt=Co(w-G.start-G.delay,0,G.duration)/G.duration;for(var X=isNaN(pt)?1:G.easing(pt),J=G.to.strings,pe=G.round,fe=[],de=G.to.numbers.length,ge=void 0,me=0;me<de;me++){var ke=void 0;let at,Oe;u.direction!=="alternate"?((D=u.parent)==null?void 0:D.rewind)===!1&&u.reversePlayback===!0&&u.rewind===!1?(at=G.to.numbers[me],Oe=G.from.numbers[me]||0):(Oe=G.to.numbers[me],at=G.from.numbers[me]||0):x(!0,(F=u.parent)==null?void 0:F.rewind,u.rewind,(U=u.parent)==null?void 0:U.reversePlayback,u.reversePlayback)?(at=G.to.numbers[me],Oe=G.from.numbers[me]||0):(Oe=G.to.numbers[me],at=G.from.numbers[me]||0),G.isPath?ke=Zge(G.value,X*Oe):ke=at+X*(Oe-at),pe&&(G.isColor&&me>2||(ke=Math.round(ke*pe)/pe)),fe.push(ke)}var ce=J.length;if(!ce)ge=fe[0];else{ge=J[0];for(var le=0;le<ce;le++){J[le];var xe=J[le+1],Ne=fe[le];isNaN(Ne)||(xe?ge+=Ne+xe:ge+=Ne+" ")}}M8[R.type]($.target,R.property,ge,$.transforms),R.currentValue=ge,z++}}function g(w){u[w]&&!u.passThrough&&u[w](u)}function y(){u.remaining&&u.remaining!==!0&&u.remaining--}let b={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function x(w,E,M,P,A){return b[w<<4|E<<3|M<<2|P<<1|A]}function S(w,E=!1){var M,P=u.duration;let A=u.delay,k=P-u.endDelay;(M=u.parent)!=null&&M.reversed&&u.direction==="alternate"&&(A=u.endDelay,k=P-u.delay);var I=h(w);if(u.progress=Co(I/P*100,0,100),E||(u.reversePlayback=I<u.currentTime),s&&v(I,E),!u.began&&u.currentTime>=0&&(u.began=!0,g("begin")),!u.loopBegan&&u.currentTime>0&&(u.loopBegan=!0,g("loopBegin")),(u.reversed||I>=0)&&I<=A&&u.currentTime!==0&&(m(0),g("change")),(I>=k&&u.currentTime!==P+u.pingPongDelayCorrection||!P)&&(m(P),g("change")),I>A&&I<k?(u.changeBegan||(u.changeBegan=!0,u.changeCompleted=!1,g("changeBegin")),m(I),g("change")):u.changeBegan?(u.changeCompleted=!0,u.changeBegan=!1,g("change"),s&&g("timelineChangeComplete")):u.began&&I>k&&g("changeComplete"),u.currentTime=Co(I,0,P+u.pingPongDelayCorrection),u.began&&g("update"),w>=P)if(y(),!u.remaining)u.paused=!0,u.completed||(u.completed=!0,g("loopComplete"),g("complete"),!u.passThrough&&"Promise"in window&&(o(),l(u)));else{s?t+=u.duration/ya.speed:t+=u.duration;for(let O of n)O.setStartTime(0),O.remaining=O.loop;g("loopComplete"),u.loopBegan=!1,u.direction==="alternate"?c():s&&d()}}return u.reset=function(){var w=u.direction;u.passThrough=!1,u.currentTime=0,u.progress=0,u.paused=!0,u.began=!1,u.loopBegan=!1,u.changeBegan=!1,u.completed=!1,u.changeCompleted=!1,u.reversePlayback=!1,u.reversed=w==="reverse",u.remaining=u.loop,n=u.children,s=n.length;for(var E=s;E--;)u.children[E].reset();m(u.reversed?u.duration:0)},u.setStartTime=function(w){t=w},u.set=function(w,E){return E8(w,E),u},u.tick=function(w){r=w,t||(t=r),S((r+(i-t))*ya.speed)},u.seek=function(w,E=!1){S(w-t,E)},u.pause=function(w){u.paused=!0,s&&(a=w??performance.now())},u.play=function(w){!u.paused||(u.completed&&u.reset(),u.paused=!1,Js.push(u),s&&a!==void 0&&(t+=(w??performance.now())-a),t0||s0e())},u.reverse=function(){c(),u.completed=!u.reversed,p()},u.restart=function(){u.reset(),u.play()},u.reset(),u.autoplay&&u.play(),u}function FI(e,t){for(var i=t.length;i--;)XA(e,t[i].animatable.target)&&t.splice(i,1)}function l0e(e){for(var t=C8(e),i=Js.length;i--;){var r=Js[i],a=r.animations,n=r.children;FI(t,a);for(var s=n.length;s--;){var o=n[s],l=o.animations;FI(t,l),!l.length&&!o.children.length&&n.splice(s,1)}!a.length&&!n.length&&r.pause()}}function u0e(e,t){t===void 0&&(t={});var i=t.direction||"normal",r=t.easing?YA(t.easing):null,a=t.grid,n=t.axis,s=t.from||0,o=s==="first",l=s==="center",u=s==="last",c=Fi.arr(e),d=parseFloat(c?e[0]:e),h=c?parseFloat(e[1]):0,p=tu(c?e[1]:e)||0,f=t.start||0+(c?d:0),v=[],m=0;return function(g,y,b){if(o&&(s=0),l&&(s=(b-1)/2),u&&(s=b-1),!v.length){for(var x=0;x<b;x++){if(!a)v.push(Math.abs(s-x));else{var S=l?(a[0]-1)/2:s%a[0],w=l?(a[1]-1)/2:Math.floor(s/a[0]),E=x%a[0],M=Math.floor(x/a[0]),P=S-E,A=w-M,k=Math.sqrt(P*P+A*A);n==="x"&&(k=-P),n==="y"&&(k=-A),v.push(k)}m=Math.max.apply(Math,v)}r&&(v=v.map(function(O){return r(O/m)*m})),i==="reverse"&&(v=v.map(function(O){return n?O<0?O*-1:-O:Math.abs(m-O)}))}var I=c?(h-d)/m:d;return f+I*(Math.round(v[y]*100)/100)+p}}function c0e(e){e===void 0&&(e={});var t=ya(e);return t.duration=0,t.add=function(i,r){var a=Js.indexOf(t),n=t.children;a>-1&&Js.splice(a,1);function s(h){h.passThrough=!0}for(var o=0;o<n.length;o++)s(n[o]);var l=s1(i,_M(qA,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.timelineOffset=Fi.und(r)?u:eP(r,u),s(t);var c=ya(l);s(c),n.push(c),c.parent=t;var d=A8(n,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,c.loop===!0&&(t.duration=1/0),t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}ya.version="3.2.0";ya.speed=1;ya.running=Js;ya.remove=l0e;ya.get=JA;ya.set=E8;ya.convertPx=ZA;ya.path=Kge;ya.setDashoffset=Yge;ya.stagger=u0e;ya.timeline=c0e;ya.easing=YA;ya.penner=m8;ya.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};var P8=ya,jI=new V,$I=new V,UI=new Ui;function d0e(e,t,i,r){if(r===0)return i.copy(e);if(r===1)return i.copy(t);let a=e.w*t.w+e.x*t.x+e.y*t.y+e.z*t.z;if(a>=1)return i.copy(e);let n=1-a*a;if(n<=Number.EPSILON){let c=1-r;return i.w=c*e.w+r*t.w,i.x=c*e.x+r*t.x,i.y=c*e.y+r*t.y,i.z=c*e.z+r*t.z,i.normalize(),i}let s=Math.sqrt(n),o=Math.atan2(s,a),l=Math.sin((1-r)*o)/s,u=Math.sin(r*o)/s;return i.w=e.w*l+t.w*u,i.x=e.x*l+t.x*u,i.y=e.y*l+t.y*u,i.z=e.z*l+t.z*u,i}function bn(e,t,i,r,a,n){let s=i[e]!==void 0?i[e]:void 0,o=r[e];if(o==null)return;let l=s!=null?typeof s=="string"?Number(a.getVariable(s)??0):s:t[e],u=typeof o=="string"?Number(a.getVariable(o)??0):o;if(l!==u)return{update:c=>{let d=li.lerp(l,u,c);n?t[e]=Math.trunc(d):t[e]=d},start:()=>{t[e]=l},end:()=>{t[e]=u}}}function iP(e,t,i,r,a,n){let s=i[e]?i[e]:void 0,o=r[e];if(!o)return;let l=t[e],u=[...s??l].map(d=>typeof d=="string"?Number(a.getVariable(d)??0):d),c=[...o].map(d=>typeof d=="string"?Number(a.getVariable(d)??0):d);if(!(u.length!==c.length||tA(u,c)))return{update:d=>{u.forEach((h,p)=>{let f=li.lerp(h,c[p],d);t[e][p]=n?Math.trunc(f):f})},start:()=>{Object.assign(t[e],u)},end:()=>{Object.assign(t[e],c)}}}function rb(e,t,i){return t.forEach((r,a)=>{e.setComponent(a,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function WI(e,t,i,r,a){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=n?rb(new V,n,a):o.clone(),u=rb(new V,s,a);if(!l.equals(u))return{update:c=>{o.lerpVectors(l,u,c)},start:()=>{o.copy(l)},end:()=>{o.copy(u)}}}function HI(e,t,i){return t.forEach((r,a)=>{e.setComponent(a,typeof r=="string"?Number(i.getVariable(r)??0):r)}),e}function ab(e,t,i,r,a){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=!(o instanceof Ce),u=o instanceof Ce?o:new Ce().fromArray(o),c=n?HI(new Ce,n,a):u.clone(),d=HI(new Ce,s,a);if(!c.equals(d))return{update:h=>{u.lerpVectors(c,d,h),l&&(t[e]=u.toArray())},start:()=>{u.copy(c),l&&(t[e]=u.toArray())},end:()=>{u.copy(d),l&&(t[e]=u.toArray())}}}function h0e(e,t,i,r){let a=i[e]?i[e]:void 0,n=r[e];if(!n)return;let s=t[e],o=a?new zt().fromArray(a):s.clone(),l=new V,u=new Ui,c=new V;o.decompose(l,u,c);let d=new zt().fromArray(n),h=new V,p=new Ui,f=new V;if(d.decompose(h,p,f),!o.equals(d))return{update:v=>{UI.slerpQuaternions(u,p,v),jI.lerpVectors(l,h,v),$I.lerpVectors(c,f,v),s.compose(jI,UI,$I)},start:()=>{s.compose(l,u,c)},end:()=>{s.compose(h,p,f)}}}function p0e(e,t,i,r,a){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=n?typeof n=="string"?a.getColor(n).clone():new Bi().setRGB(n.r,n.g,n.b):o.clone(),u=typeof s=="string"?a.getColor(s).clone():new Bi().setRGB(s.r,s.g,s.b);if(l.equals(u))return;let c=o.clone();return{update:d=>{var h,p;c.lerpColors(l,u,d),(p=(h=t[e])==null?void 0:h.copy)==null||p.call(h,c)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function Sg(e,t,i,r,a){let n=i[e]?i[e]:void 0,s=r[e];if(!s)return;let o=t[e],l=new En(o.r,o.g,o.b,o.a),u=n?typeof n=="string"?a.getColor(n).clone():new En(n.r,n.g,n.b,n.a):l.clone(),c=typeof s=="string"?a.getColor(s).clone():new En(s.r,s.g,s.b,s.a);if(!u.equals(c))return{update:d=>{l.lerpColors(u,c,d);let h=li.lerp(u.a,c.a,d);l.a=h,t[e]={r:l.r,g:l.g,b:l.b,a:l.a}},start:()=>{l.copy(u)},end:()=>{l.copy(c)}}}function gc(e,t,i,r,a){if(typeof t[e]=="number")return bn(e,t,i??{},r,a);if(Array.isArray(t[e]))return iP(e,t,i??{},r,a)}function f0e(e,t,i,r){var a,n,s,o;let l=[],u=e.cameraType==="OrthographicCamera"?(a=t.orthographic)==null?void 0:a.zoom:(n=t.perspective)==null?void 0:n.zoom,c=e.cameraType==="OrthographicCamera"?(s=i.orthographic)==null?void 0:s.zoom:(o=i.perspective)==null?void 0:o.zoom;if(c!==void 0){let d=u??e.zoom,h=c;d!==h&&l.push({update:p=>{e.zoom=li.lerp(d,h,p),e.updateProjectionMatrix()},start:()=>{e.zoom=d,e.updateProjectionMatrix()},end:()=>{e.zoom=h,e.updateProjectionMatrix()}})}if(i.targetOffset!==void 0){let d=bn("targetOffset",e,t,i,r);d&&l.push(d)}return l}function m0e(e,t,i,r){if(i.scaleBaked===void 0)return;let a=(t.scaleBaked??e.data.geometry.scaleBaked).map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o),n=i.scaleBaked.map(o=>typeof o=="string"?Number(r.getVariable(o)??0):o);if(Jc.isEqual(a,n))return;let s=[];return s.push({update:o=>{e.updateGeometryInteractions({scaleBaked:[li.lerp(a[0],n[0],o),li.lerp(a[1],n[1],o),li.lerp(a[2],n[2],o)]},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},start:()=>{e.updateGeometryInteractions({scaleBaked:a},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()},end:()=>{e.updateGeometryInteractions({scaleBaked:n},r),e.invalidateDownstreamBooleanData(),e.refreshAttachedClonersInteractions()}}),s}function v0e(e,t,i,r){if(!i.extrusion)return;let a=e.extrusion,n=t.extrusion??{},s=i.extrusion,o=[];return cN.forEach(l=>{let u=gc(l,a,n,s,r);u&&o.push(u)}),o}function g0e(e,t,i,r){let a=[];if(!("geometry"in i))return a;let n=e.geometry.userData.parameters,s="geometry"in t?t.geometry:{},o=i.geometry;if(e instanceof xm){let l=m0e(e,s,o,r);l&&a.push(...l)}else{let l={};if(Object.assign(l,hl(n,jw),hl(s,jw)),jw.forEach(u=>{let c=gc(u,l,s,o,r);c&&a.push(c)}),e instanceof FA){Object.assign(l,{extrusion:{...n.extrusion}});let u=v0e(l,s,o,r);u&&a.push(...u)}a.length&&a.push({update:u=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},start:u=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()},end:u=>{e.updateGeometryInteractions(l,r),e.updateGeometryGroupsIfNeeded(),e.refreshAttachedClonersInteractions()}})}return a}function y0e(e,t,i,r){let a=[];if(i.intensity!==void 0){let n=bn("intensity",e,t,i,r);n&&a.push(n)}if(i.color!==void 0){let n=p0e("color",e,t,i,r);n&&a.push(n)}return a}function b0e(e,t,i,r){let a=[];if(Array.isArray(e.material)){if(!("materials"in i&&i.materials))return a;let n="materials"in t&&t.materials?t.materials:[],s=i.materials;e.material.forEach((o,l)=>{if(!s[l])return;let u=n[l]??{},c=s[l];typeof u=="string"||typeof c=="string"||a.push(...GI(o,u,c,r))})}else{if(!("material"in i&&i.material))return a;let n="material"in t&&t.material?t.material:{},s=i.material;if(typeof n=="string"||typeof s=="string")return a;a.push(...GI(e.material,n,s,r))}return a}function GI(e,t,i,r){var a;let n=[],s=wh(i,r)||!!t.layers&&wh(t,r);n.push(P0e(e,s));for(let o of e.layers){let l=(a=t.layers)==null?void 0:a.data(o.uuid),u=i.layers.data(o.uuid);if(!u||o.type!=="light"&&(!(o.visible??!0)||!(u.visible??!0)))continue;let c=o.getNames().filter(d=>!oN.some(h=>d.includes(h)));for(let d of c)try{let h=o.getValue(d),p;if(d==="colors")p=E0e(o,l,u,d);else if(Array.isArray(h))d==="steps"&&(p=M0e(o,l,u,d));else if(typeof h=="number")p=w0e(o,l,u,d,r);else{if(typeof h=="boolean")continue;h instanceof Ce?p=x0e(o,l,u,d):h instanceof V?p=S0e(o,l,u,d,r):h instanceof En?p=_0e(o,l,u,d,r):h instanceof Bi?p=C0e(o,l,u,d,r):"isTexture"in h&&(p=A0e(o,l,u,d))}p&&(Array.isArray(p)?n.push(...p):n.push(p))}catch(h){console.error(`lerpMaterial: unexpected material layer for ${d}`,h)}}return n}function w0e(e,t,i,r,a){if(!e.hasValue(r)||!(r in i))return;let n=t?t[r]:e.getValue(r),s=i[r],o=typeof n=="string"?Number(a.getVariable(n)??0):n,l=typeof s=="string"?Number(a.getVariable(s)??0):s;if(o!==l)return{update:u=>{e.setValue(r,li.lerp(o,l,u))},start:()=>{e.setValue(r,o)},end:()=>{e.setValue(r,l)}}}function x0e(e,t,i,r){if(!e.hasValue(r)||!(r in i))return;let a=e.getValue(r),n=t?new Ce().fromArray(t[r]):a.clone(),s=new Ce().fromArray(i[r]);if(!n.equals(s))return{update:o=>{a.lerpVectors(n,s,o)},start:()=>{a.copy(n)},end:()=>{a.copy(s)}}}function S0e(e,t,i,r,a){if(!e.hasValue(r)||!(r in i))return;let n=e.getValue(r),s=t?t[r]:void 0,o=i[r],l=s?rb(new V,s,a):n.clone(),u=rb(new V,o,a);if(!l.equals(u))return{update:c=>{n.lerpVectors(l,u,c)},start:()=>{n.copy(l)},end:()=>{n.copy(u)}}}function C0e(e,t,i,r,a){if(!e.hasValue(r)||!(r in i))return;let n=t?t[r]:void 0,s=i[r],o=e.getValue(r),l=n?typeof n=="string"?a.getColor(n).clone():new Bi().setRGB(n.r,n.g,n.b):o.clone(),u=typeof s=="string"?a.getColor(s).clone():new Bi().setRGB(s.r,s.g,s.b);if(l.equals(u))return;let c=o.clone();return{update:d=>{e.getValue(r)!==c&&e.setValue(r,c),c.lerpColors(l,u,d)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function _0e(e,t,i,r,a){if(!e.hasValue(r)||!(r in i))return;let n=t?t[r]:void 0,s=i[r],o=e.getValue(r),l=n?typeof n=="string"?a.getColor(n).clone():new Bi().setRGB(n.r,n.g,n.b):o.clone(),u=typeof s=="string"?a.getColor(s).clone():new En(s.r,s.g,s.b,s.a);if(l.equals(u))return;let c=o.clone();return{update:d=>{e.getValue(r)!==c&&e.setValue(r,c),c.lerpColors(l,u,d)},start:()=>{c.copy(l)},end:()=>{c.copy(u)}}}function M0e(e,t,i,r="steps"){if(!e.hasValue(r)||!(r in i))return;let a=[],n=e.getValue(r),s=t?t[r]:n,o=i[r];return tA(s,o)||a.push({update:l=>{let u=[...n];for(let c=0;c<n.length;++c){let d=s[c],h=o[c];u[c]=li.lerp(d,h,l)}e.setValue(r,u)},start:()=>{e.setValue(r,s)},end:()=>{e.setValue(r,o)}}),a.length?a:void 0}function E0e(e,t,i,r="colors"){if(!e.hasValue(r)||!(r in i))return;let a=[],n=e.getValue(r),s=t?t[r]:n.map(l=>l.toArray()),o=i[r];for(let l=0;l<n.length;++l){let u=[...s[l]],c=[...o[l]];Oy.isEqual(u,c)||a.push({update:d=>{n[l].fromArray(Oy.lerp(u,c,d))},start:()=>{n[l].fromArray(u)},end:()=>{n[l].fromArray(c)}})}return a.length?a:void 0}function A0e(e,t,i,r="texture"){var a,n;if(!e.hasValue(r)||!(r in i))return;let s=e.getNode("rotation"),o=((a=t?.[r])==null?void 0:a.rotation)??0,l=((n=i[r])==null?void 0:n.rotation)??0;if(s&&o!==l)return{update:y=>{s.value=li.lerp(o,l,y)*li.DEG2RAD},start:()=>{s.value=o*li.DEG2RAD},end:()=>{s.value=l*li.DEG2RAD}};let u=e.getNode("mat");if(!u)return;let c=t?t[r]:u,d=i[r],h=[...c.repeat],p=[...c.offset],f=[...d.repeat],v=[...d.offset],m=c.rotation??0,g=d.rotation??0;if(!Zl.isEqual(h,f)||!Zl.isEqual(p,v)||m!==g)return{update:y=>{u.repeat=Zl.lerp(h,f,y),u.offset=Zl.lerp(p,v,y),u.rotation=li.lerp(m,g,y),u.updateMatrix()},start:()=>{u.repeat=[...h],u.offset=[...p],u.rotation=m,u.updateMatrix()},end:()=>{u.repeat=[...f],u.offset=[...v],u.rotation=g,u.updateMatrix()}}}function P0e(e,t){return{update:()=>{e.transparent=t}}}var Rx=new V,qI=new Va;function T0e(e,t,i,r,a){var n,s,o,l,u,c;let d=[],h,p,f,v,m,g,y,b;if(e instanceof nn?(h=ab("position",e,t,i,a),h&&d.push(h),f=bn("rotation",e,t,i,a),f&&d.push(f),v=ab("shear",e,t,i,a),v&&d.push(v)):(b={slide:((n=t.pathSnapping)==null?void 0:n.slide)??((s=e.updatedPathSnapping)==null?void 0:s.slide)??((o=e.dataPatched.pathSnapping)==null?void 0:o.slide)??0,offset:((l=t.pathSnapping)==null?void 0:l.offset)??((u=e.updatedPathSnapping)==null?void 0:u.offset)??((c=e.dataPatched.pathSnapping)==null?void 0:c.offset)??0},g=bn("slide",b,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,a),g&&d.push(g),y=bn("offset",b,t.pathSnapping??e.updatedPathSnapping??e.dataPatched.pathSnapping,i.pathSnapping??e.dataPatched.pathSnapping,a),y&&d.push(y),!g&&!y&&(h=WI("position",e,t,i,a),h&&d.push(h),p=WI("scale",e,t,i,a),p&&d.push(p),f=k0e(e,t,i,r,a),f&&d.push(f),m=h0e("hiddenMatrix",e,t,i),m&&d.push(m))),h||p||f||m||g||y){let x=e instanceof nn?()=>{e.updateWorldMatrix(!0)}:()=>{var S;e.updateMatrix(),e.hasNonUniformScale&&(e.updateMatrixWorld(),e.updateMatrixWorldSVD()),(S=e.parent)!=null&&S.matrixWorldFusedFalse&&(e.matrixWorld.multiplyMatrices(e.parent.matrixWorldFusedFalse,e.matrix),e.matrixWorldNeedsUpdate=!1),yo(e)&&Ql(e.parent)&&e.invalidateDownstreamBooleanData(!0),e.updatePathSnapping(Object.assign({},t.pathSnapping,b))};d.push({update:x,start:x,end:x})}return d}function k0e(e,t,i,r,a){var n;let s=t?.rotation?t.rotation.map(d=>(typeof d=="string"?Number(a.getVariable(d)??0):d)*li.DEG2RAD):void 0,o=(n=i.rotation)==null?void 0:n.map(d=>(typeof d=="string"?Number(a.getVariable(d)??0):d)*li.DEG2RAD);if(!o)return;let l=s?new V().fromArray(s):new V().setFromEuler(e.rotation),u=new V().fromArray(o);if(l.equals(u))return;let c=Rx.subVectors(u,l);if(r&&c.toArray().every(d=>Math.abs(d)<2*Math.PI)){let d=new Ui().setFromEuler(qI.setFromVector3(l)),h=new Ui().setFromEuler(qI.setFromVector3(u));return{update:p=>{d0e(d,h,e.quaternion,p)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(u)}}}else return{update:d=>{Rx.lerpVectors(l,u,d),e.rotation.setFromVector3(Rx)},start:()=>{e.rotation.setFromVector3(l)},end:()=>{e.rotation.setFromVector3(u)}}}function O0e(e,t,i,r){let a=[];if(!("cloner"in i)||!e.cloner)return a;let n=e.cloner,s="cloner"in t?t.cloner:{},o=i.cloner;tN.forEach(p=>{let f;p==="count"?f=bn("count",n.parameters,s,o,r,!0):f=gc(p,n.parameters,s??{},o,r),f&&a.push(f)});let l=D0e(n,s,o,r);l?.length&&a.push(...l);let u=I0e(n,s,o,r);u?.length&&a.push(...u);let c=L0e(n,s,o,r);c?.length&&a.push(...c);let d=B0e(n,s,o,r);d?.length&&a.push(...d);let h=z0e(n,s,o,r);return h?.length&&a.push(...h),a.length&&a.push({update:()=>{n.update()}}),a}function D0e(e,t,i,r){if(e.parameters.type!=="radial")return;let a=t.radial,n=i.radial;if(!n)return;let s=e.parameters.radial,o=[];return iN.forEach(l=>{let u=gc(l,s,a??{},n,r);u&&o.push(u)}),o}function I0e(e,t,i,r){if(e.parameters.type!=="linear")return;let a=t.linear,n=i.linear;if(!n)return;let s=[],o=e.parameters.linear;return rN.forEach(l=>{let u=gc(l,o,a??{},n,r);u&&s.push(u)}),s}function L0e(e,t,i,r){if(e.parameters.type!=="grid")return;let a=t.grid,n=i.grid;if(!n)return;let s=[],o=e.parameters.grid;return aN.forEach(l=>{let u;l==="count"?u=iP(l,o,a??{},n,r,!0):u=gc(l,o,a??{},n,r),u&&s.push(u)}),s}function B0e(e,t,i,r){if(e.parameters.type!=="toObject")return;let a=t.toObject,n=i.toObject;if(!n)return;let s=[],o=e.parameters.toObject;return nN.forEach(l=>{let u;l==="count"?u=bn(l,o,a??{},n,r,!0):u=gc(l,o,a??{},n,r),u&&s.push(u)}),s}function z0e(e,t,i,r){if(!e.parameters.randomness)return;let a=t.randomnessObject,n=i.randomnessObject;if(!n)return;let s=[],o=e.parameters.randomnessObject;return sN.forEach(l=>{let u=gc(l,o,a??{},n,r);u&&s.push(u)}),s}function R0e(e,t){return{update:()=>{e instanceof Qa&&(e.fill.enabled=t)}}}function N0e(e,t){return{update:()=>{e instanceof Qa&&(e.stroke.enabled=t)}}}function V0e(e,t){return{update:()=>{e instanceof Qa&&(e.dropShadow.enabled=t)}}}function F0e(e,t){return{update:()=>{e instanceof Qa&&(e.innerShadow.enabled=t)}}}function j0e(e,t){return{update:()=>{e instanceof Qa&&(e.backgroundBlur.enabled=t)}}}function $0e(e,t){return{update:()=>{e instanceof Qa&&(e.layerBlur.enabled=t)}}}function U0e(e,t,i,r,a){let n=[],s,o,l,u,c,d,h,p,f,v,m,g,y,b,x;if("width"in e&&(s=bn("width",e,t,i,a),s&&n.push(s)),"height"in e&&(o=bn("height",e,t,i,a),o&&n.push(o)),e instanceof Qa||e instanceof fl){let S={...t.fill},w={...i.fill};S.enabled!==void 0&&S.enabled!==w.enabled&&(n.push(R0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),l=Sg("color",e.fill,S,w,a),l&&n.push(l)}if(e instanceof Qa){let S={...t.stroke},w={...i.stroke};(S.enabled||w.enabled)&&(n.push(N0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),u=Sg("color",e.stroke,S,w,a),u&&n.push(u),c=bn("thickness",e.stroke,S,w,a),c&&n.push(c)}if(e instanceof Qa){let S={...t.dropShadow},w={...i.dropShadow};(S.enabled||w.enabled)&&(n.push(V0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),d=Sg("color",e.dropShadow,S,w,a),d&&n.push(d),h=bn("blurRadius",e.dropShadow,S,w,a),h&&n.push(h),f=bn("spread",e.dropShadow,S,w,a),f&&n.push(f),p=ab("offset",e.dropShadow,S,w,a),p&&n.push(p)}if(e instanceof Qa){let S={...t.innerShadow},w={...i.innerShadow};(S.enabled||w.enabled)&&(n.push(F0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,color:{...S.color,a:0}}),w.enabled||Object.assign(w,{enabled:!0,color:{...w.color,a:0}})),v=Sg("color",e.innerShadow,S,w,a),v&&n.push(v),m=bn("blurRadius",e.innerShadow,S,w,a),m&&n.push(m),y=bn("spread",e.innerShadow,S,w,a),y&&n.push(y),g=ab("offset",e.innerShadow,S,w,a),g&&n.push(g)}if(e instanceof Qa||e instanceof fl){let S={...t.backgroundBlur},w={...i.backgroundBlur};(S.enabled||w.enabled)&&(n.push(j0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),w.enabled||Object.assign(w,{enabled:!0,radius:0})),b=bn("radius",e.backgroundBlur,S,w,a),b&&n.push(b)}if(e instanceof Qa){let S={...t.layerBlur},w={...i.layerBlur};(S.enabled||w.enabled)&&(n.push($0e(e,!0)),S.enabled||Object.assign(S,{enabled:!0,radius:0}),w.enabled||Object.assign(w,{enabled:!0,radius:0})),x=bn("radius",e.layerBlur,S,w,a),x&&n.push(x)}if(e instanceof fl||e instanceof Gm){let S=iP("cornerRadius",e,t,i,a);S&&n.push(S)}return n}function YI(e,t,i,r,a){let n=[];return e.data.visible&&n.push(...T0e(e,t,i,a,r)),e instanceof nn?n.push(...U0e(e,t,i,a,r)):(e.data.visible&&n.push(...O0e(e,t,i,r)),yo(e)?(e instanceof Vn&&e.data.visible&&n.push(...g0e(e,t,i,r)),e.data.visible&&n.push(...b0e(e,t,i,r))):Bpe(e)?e.data.visible&&n.push(...y0e(e,t,i,r)):Lpe(e)&&n.push(...f0e(e,t,i,r))),n.length?{update:s=>{n.forEach(o=>o.update(s))},start:s=>{n.forEach(o=>{var l;return(l=o.start)==null?void 0:l.call(o,s)})},end:s=>{n.forEach(o=>{var l;return(l=o.end)==null?void 0:l.call(o,s)})}}:void 0}var XI=new V;function rP(e,t,i=!1){var r;let a=[],n=s=>{let o=s.data;delete s.states,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let l of o.states){let u={...l.data};s.states||(s.states={}),s.states[l.id]=Wc.patch(o,u)}ZI(e.scene,s,null,t,o.events.find(l=>l.data.type==="Follow"||l.data.type==="LookAt")!==void 0),KI(e)};e.scene.traverse2D(n),e.traverseChildren(s=>{var o,l,u,c,d,h;if(i&&((o=s.rigidBody)==null||o.setTranslation(s.position0,!0),(l=s.rigidBody)==null||l.setRotation(s.rotation0,!0),(u=s.rigidBody)==null||u.setLinvel(XI,!0),(c=s.rigidBody)==null||c.setAngvel(XI,!0)),!fr.is(s))return;let p=s.uuid,f=s.data;if(delete s.states,s.uuid===Cp)return;let v=!1;a.some(m=>{var g;return(g=e.scene.find(p))==null?void 0:g.isDescendantOf(m)})?v=!0:((d=f.physics)==null?void 0:d.fusedBody)===!0&&f.physics.rigidBody==="dynamic"&&a.push(p),s.data=f,s.currentState=null,s.reversibleToState=null,s.currentTransitionEvent=null;for(let m of f.states){let g={...m.data};e.data.globalPhysics.usePhysics===!0&&f.physics&&(f.physics.rigidBody==="dynamic"||v)&&(m.data.position!==void 0&&delete g.position,m.data.rotation!==void 0&&delete g.rotation,m.data.hiddenMatrix!==void 0&&delete g.hiddenMatrix),s.states||(s.states={}),s.states[m.id]=jc.patch(f,g)}ZI(e.scene,s,null,t,f.events.find(m=>m.data.type==="Follow"||m.data.type==="LookAt")!==void 0),KI(e),s instanceof zn&&s.frame&&(s.frame.traverse(m=>n(m)),(h=s.uiCanvas)==null||h.applySize())}),e.frame&&(e.frame.traverse(s=>n(s)),(r=e.uiCanvas)==null||r.applySize())}function KI(e){e.traverseEntity(t=>{for(let i of t.data.events){let r=[];switch(i.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":r.push(...i.data.actions);break;case"GameControl":for(let a of Object.values(i.data.gameActions))r.push(...a);break;case"DragDrop":r.push(...i.data.dragDropActions.drag,...i.data.dragDropActions.drop);break;case"Conditional":r.push(...i.data.inActions,...i.data.outActions);break}for(let a of r)if(a.data.type==="Create"&&a.data.hideBase==="Yes"){let n=e.scene.find(a.data.object);n&&(n.visible=!1)}}})}function ZI(e,t,i,r,a=!1){if(t instanceof Vn&&t.removeInteractionGeometry(r),t instanceof nn?t.changeSelectedState(i,{shared:r},a):t.changeSelectedState(i,{scene:e,shared:r},a),t instanceof Vn&&t.updateGeometryGroupsIfNeeded(),t instanceof Fn&&t.updateCameraState(t.dataPatched,{scene:e,shared:r}),!(t instanceof nn)){if(t.cloner)for(let n of t.cloner.children)n.playModeVisible=void 0;t.updateVisible()}}function T8(e){let t;if(e.easing===5){let{control1:i,control2:r}=e;t=`cubicBezier(
			${i[0]}, ${i[1]}, ${r[0]}, ${r[1]}
		)`}else if(e.easing===6){let{mass:i,stiffness:r,damping:a,velocity:n}=e;t=`spring( ${i}, ${r}, ${a}, ${n} )`}else{let i;switch(e.easing){case 0:i=Ru.linear;break;case 1:i=Ru.ease;break;case 2:i=Ru.easeIn;break;case 3:i=Ru.easeOut;break;case 4:i=Ru.easeInOut;break;default:i=Ru.linear}let[r,a,n,s]=i;t=`cubicBezier( ${r}, ${a}, ${n}, ${s} )`}return{duration:Math.max(e.duration,1e-4),easing:t}}function EM(e){let t={delay:0,loop:e.repeat===-1?!0:e.repeat+1};if(e.repeat===0)t.direction="normal",t.rewind=!1;else switch(e.direction){case"pingpong":t.direction="alternate",t.rewind=!1;break;case"pingpong-rewind":t.direction="alternate",t.rewind=!0;break;default:t.direction="normal",t.rewind=!1;break}switch(t.delay=0,t.endDelay=0,t.startOnceDelay=0,t.pingPongDelayCorrection=0,t.pingPongEndDelayCorrection=0,e.delayDirection){case"start-once":t.startOnceDelay=e.delay;break;case"start":t.delay=e.delay;break;case"end":t.endDelay=e.delay;break;case"start-end":case void 0:t.delay=e.delay,t.endDelay=e.delay;break}return t.direction==="alternate"&&(t.delay/=2,t.endDelay/=2,e.delayDirection==="start"?(t.pingPongDelayCorrection=t.delay,typeof t.loop=="number"&&t.loop%2===0&&(t.pingPongEndDelayCorrection=t.delay)):e.delayDirection==="end"?typeof t.loop=="number"&&t.loop%2!==0&&(t.pingPongEndDelayCorrection=t.endDelay):e.delayDirection==="start-end"&&(t.pingPongDelayCorrection=t.delay,t.pingPongEndDelayCorrection=t.endDelay)),t}var W0e={type:"beginState"},H0e={type:"completeState",isfromEntity:!1},QI=class{constructor(e,t,i,r,a,n){if(this.object=e,this.data=r,this.sharedAssets=a,this.allowSlerp=n,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.requestRender()),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let s=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"beginState",state:s}),this.object instanceof nn||this.object.traverseEntity(o=>{o!==this.object&&o instanceof Fn&&o.dispatchEvent(W0e)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let s=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=s,this.object.dispatchEvent({type:"completeState",state:s}),this.object instanceof nn||this.object.traverseEntity(o=>{o!==this.object&&o instanceof Fn&&o.dispatchEvent(H0e)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=YI(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},t===void 0){let s=i0(this.object,this.object.currentState===i?this.object.prevState:this.object.currentState);if(!s)throw new Error("Missing property");this.from=s}else{let s=i0(this.object,t);if(!s)throw new Error("Missing property");this.from=s}if(i===void 0)throw new Error("Missing property");{let s=i0(this.object,i);if(!s)throw new Error("Missing property");this.to=s}this.useCurrentState=t===void 0||i===void 0,this.params={targets:this.targets,t:1,autoplay:!1,...EM(r),...T8(r),change:this.onChange},this.callback=YI(this.object,t===void 0?{}:this.from.data,i===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},k8=class extends On{constructor(e,t,i,r,a){var n;if(super(),this.eventType=e,this.data=t,this.page=i,this.shared=r,this.condition=a,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.hasPlayedOnce=!1,this.onTimelineChangeComplete=()=>{var o;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((o=this.timeline)==null||o.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let s=this.page.scene.find(t.object)??((n=this.page.uiCanvas)==null?void 0:n.find(t.object))??this.page.scene.find2DInUIObjects(t.object);if(!s)throw new Error("Missing property");if(!s.states)throw new Error("Missing property");if(this.object=s,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){var e;return((e=this.timeline)==null?void 0:e.paused)===!1}get changeBegan(){return this.tweens.some(e=>e.changeBegan)??!1}init(){this.initialCurrentState=i0(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.data.runMode==="Toggle"&&eO(this.eventType)?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:e=!0,needsRebuild:t=!1,isRebuild:i=!1}={}){var r,a,n,s;try{let o=EM(this.data.tweens[0].data);i&&typeof o.loop=="number"&&o.loop--,(r=this.timeline)==null||r.pause(),this.timeline=P8.timeline({autoplay:!1,...o,...o.loop===!0||o.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}});let l=this.tweens.findIndex(u=>u?.changeBegan);if(t===!0&&(this.timelineNeedsRebuild=!0),e){let u=l===-1?0:l;for(let c=u;c<this.data.tweens.length-1;c++){let d=this.data.tweens[c],h=this.data.tweens[c+1],p;c===u&&(this.object.wasMovedByUser===!0||((a=this.object.previousAction)==null?void 0:a.changeBegan)===!0)?(p=void 0,this.object instanceof Fn&&(this.object.wasMovedByUser=!1)):p=d.data.state===void 0?this.currentState:d.data.state;let f=new QI(this.object,p,h.data.state===void 0?this.currentState:h.data.state,h.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(f.params,{startOnceDelay:0}),this.tweens[c]=f,this.timeline.add(f.params,this.timeline.duration+(c===u?o.delay:0))}this.timeline.duration+=o.endDelay}else{let u=l===-1?this.data.tweens.length-1:l+1;for(let c=u;c>0;c--){let d=this.data.tweens[c],h=this.data.tweens[c-1],p;c===u&&(this.object.wasMovedByUser===!0||((n=this.object.previousAction)==null?void 0:n.changeBegan)===!0)?(p=void 0,this.object instanceof Fn&&(this.object.wasMovedByUser=!1)):p=d.data.state===void 0?this.currentState:d.data.state;let f=new QI(this.object,p,h.data.state===void 0?this.currentState:h.data.state,d.data,this.shared,this.data.allowSlerp??!1);l!==-1&&c===u&&Object.assign(f.params,{startOnceDelay:0}),this.tweens[c-1]=f,this.timeline.add(f.params,this.timeline.duration+(c===u?o.endDelay:0))}this.timeline.duration+=o.delay}}catch(o){o instanceof Error&&console.error(o.message)}((s=this.object.previousAction)==null?void 0:s.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(qr(this.shared,this.condition)===!1||eO(this.eventType)&&this.data.runMode==="Once"&&this.hasPlayedOnce||(this.hasPlayedOnce=!0,this.playing))return!1;clearTimeout(this.timeoutId);let e=EM(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(t){t instanceof Error&&console.error(t.message)}},this.startOnceDelay+e)}pause(){var e;(e=this.timeline)==null||e.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let e=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object instanceof nn?this.object.changeSelectedState(e,{shared:this.shared}):this.object.changeSelectedState(e,{scene:this.page.scene,shared:this.shared}),this.object.currentState=e}seek(e){var t;if(qr(this.shared,this.condition)===!1)return!1;this.timeline===void 0&&this.buildTimeline(),(t=this.timeline)==null||t.seek(e*this.timeline.duration,!0)}toggle(e){var t;if(qr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),this.toggleIsForward=e??!this.toggleIsForward,this.playing?((t=this.timeline)==null||t.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var i;(i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function i0(e,t){var i;let r,a;if(typeof t=="string"?(r=t,a=(i=e.states)==null?void 0:i[r]):t===null&&(r=null,a=e.data),!(r===void 0||a===void 0))return{id:r,data:a}}var G0e={type:"beginState"},JI={type:"completeState",isfromEntity:!1},e4={type:"requestRender"},O8=class extends On{constructor(e,t,i,r){super(),this.data=e,this.page=t,this.shared=i,this.condition=r,this.toggleIsForward=!1,this.posStart=new V,this.posEnd=new V,this.qStart=new Ui,this.qEnd=new Ui,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(e=!1){if(!this.data.animate)return;let t=this.page.scene.find(this.data.targetCamera);if(!t||!t.visible)throw new ReferenceError("Target camera not founded or not visible");let i={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=P8({targets:i,t:1,...T8(this.data),update:()=>{i.t===0&&(this.data.runMode==="Toggle"&&!this.toggleIsForward?this.fromCamera&&(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(t.position),this.qEnd.copy(t.quaternion),this.zoomEnd=t.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(t.uuid)),this.page.activeCamera.dispatchEvent(G0e));let r=this.page.activeCamera;r.position.lerpVectors(this.posStart,this.posEnd,i.t),r.quaternion.slerpQuaternions(this.qStart,this.qEnd,i.t),r.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*i.t,r.wasMovedBySwitchCameraAction=!0,r.updateMatrix(),r.updateMatrixWorld(),r.updateProjectionMatrix(),r.dispatchEvent(e4),i.t===1&&r.dispatchEvent(JI)}})}switchCamera(e){let t=this.page.activeCamera,i=this.page.scene.find(e);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),t.dispatchEvent({type:"cameraChange",camera:i})}play(){if(qr(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var e;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(e=this.animation)==null||e.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch{}}pause(){var e;(e=this.animation)==null||e.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(e){var t,i;if(qr(this.shared,this.condition)===!1)return!1;if(window.clearTimeout(this.timeoutId),delete this.timeoutId,e!==this.toggleIsForward)try{this.playing?((t=this.animation)==null||t.pause(),this.toggleIsForward=e??!this.toggleIsForward,this.buildAnimation(!0),(i=this.animation)==null||i.play()):this.timeoutId=window.setTimeout(()=>{var r,a;this.toggleIsForward=e??!this.toggleIsForward,this.data.animate?((r=this.animation)==null||r.pause(),this.buildAnimation(),(a=this.animation)==null||a.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.fromCamera&&this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(JI),this.page.activeCamera.dispatchEvent(e4))},this.data.delay*1e3)}catch{}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}};function D8(e){let t=e?.tracks.filter(i=>i.ValueTypeName==="vector"||i.ValueTypeName==="quaternion").map(i=>i.times.length);if(t?.length){let i=Gse(t);return i&&i>2?i:2}return 2}var I8=class extends On{constructor(e,t,i,r,a){var n,s,o;super(),this.data=e,this.page=t,this.animationControls=i,this.shared=r,this.condition=a,this.startOnceDelay=0,this.toggleIsForward=!1;let l=e.object,u=t.scene.find(e.object);u&&Array.isArray(u.identity)&&(l=u.identity[0]),this.data={...e,object:l};let c=this.animationControls.clipIdToAction[e.clipId+"/"+l];if(this.duration=((n=c?.getClip())==null?void 0:n.duration)??1,this.data.crop2){let d=D8(c?.getClip());this.leftFrameTime=this.data.crop2[0]/(d-1)*this.duration,this.rightFrameTime=this.data.crop2[1]/(d-1)*this.duration}else{let d=(o=(s=c?.getClip())==null?void 0:s.tracks[0])==null?void 0:o.times.length;d&&d>1?(this.leftFrameTime=this.data.crop[0]/d*this.duration,this.rightFrameTime=this.data.crop[1]/d*this.duration):(this.leftFrameTime=0,this.rightFrameTime=this.duration)}this.startOnceDelay=e.delay}get playing(){var e;return((e=this.threeAnimAction)==null?void 0:e.isRunning())??!1}play(e=!1){if(qr(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var t;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let i=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([r,a])=>{let n=r.split("/")[1];this.threeAnimAction!==a&&n===i&&a.isRunning()&&(e?a.fadeOut(.2):a.stop())}),e&&((t=this.threeAnimAction)==null||t.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var e;(e=this.threeAnimAction)==null||e.fadeOut(.2)}seek(e){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=li.clamp(this.threeAnimAction.time+1/60*e,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(e,t=!1){if(qr(this.shared,this.condition)===!1)return!1;this.toggleIsForward=e??!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var i;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let r=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([a,n])=>{let s=a.split("/")[1];this.threeAnimAction!==n&&s===r&&n.isRunning()&&(t?n.fadeOut(.2):n.stop())}),t&&((i=this.threeAnimAction)==null||i.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var e;let t=(e=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:e.getClip();t&&(t.duration=this.duration),this.pause()}},L8=class{constructor(e,t,i,r,a){this.data=e,this.page=t,this.eventManager=i,this.shared=r,this.condition=a,this.timeOutId=-1,this.scene=t.scene}dispatch(){if(qr(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(t=>t.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let e=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.traverseVisibleEntity(t=>{t.type==="ParticleSystem"&&(t.sleep(),t.wakeUp(),t.data.autoPlay?t.start():t.stop())}),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(e),rP(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},B8=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=qr(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let e=this.shared.getVariable(this.data.variableId),t=NN(this.data.expression,this.shared,_n.typeOfVariable(e));t!==void 0&&this.shared.updateVariable(this.data.variableId,typeof t=="string"?{textValue:t}:t)}dispose(){}},z8=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r,this.timeoutId=null}dispatchInner(){if(qr(this.shared,this.condition)===!1)return!1;let e=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,e==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&e!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&e!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&e!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let t=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);e==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,t===void 0?!1:!t):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!t),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let e=this.data.delay,t=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&t==="Playing"&&(e=this.data.pauseDelay),e!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},e)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}},q0e=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){if(qr(this.shared,this.condition)===!1)return!1;(this.data.target==="single"?this.data.variableId?[this.data.variableId]:[]:Object.keys(this.shared.getVariables())).forEach(e=>{var t;this.shared.getVariable(e);let i=(t=this.shared.data.variables.data(e))==null?void 0:t.value;i!==void 0&&this.shared.updateVariable(e,i),this.shared.enableLocalStorageForPersistentVariables&&localStorage.removeItem(aM(e))})}dispose(){}},Y0e=class{constructor(e,t,i,r){this.data=e,this.page=t,this.shared=i,this.condition=r}dispatch(){var e;if(qr(this.shared,this.condition)===!1)return!1;this.data.userAPIId&&((e=this.shared.getUserAPI(this.data.userAPIId))==null||e.callUserAPI(this.shared))}dispose(){}};function qr(e,t){if(t===void 0)return!0;if(t.expression.length===0)return!1;let i=NN(t.expression,e,"boolean");return t.negate?!i:!!i}function dn(e,t,i,r,a,n){let s={Audio:[],Video:[],Particles:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[],ClearLocalStorage:[],UserAPI:[]},o=l=>({id:u,data:c})=>{try{c.type==="Audio"?In[e.type].includes("Audio")&&s.Audio.push(new l8(u,c,n,r,l)):c.type==="Video"&&!(n instanceof nn)?In[e.type].includes("Video")&&s.Video.push(new N8(u,c,n,r,l)):c.type==="Particles"?In[e.type].includes("Particles")&&s.Particles.push(new u8(c,i,r,l)):c.type==="Link"?In[e.type].includes("Link")&&s.Link.push(new Lge(c,a.controlsManager,r,l)):c.type==="Create"?In[e.type].includes("Create")&&s.Create.push(new V8(c,i,a.controlsManager,r,l)):c.type==="Destroy"?In[e.type].includes("Destroy")&&s.Destroy.push(new c8(c,i,a.controlsManager,r,l)):c.type==="Reset"?In[e.type].includes("Reset")&&s.Reset.push(new d8(c,i,r,a,l)):c.type==="Transition"?In[e.type].includes("Transition")&&s.Transition.push(new k8(e.type,c,i,r,l)):c.type==="SwitchCamera"?In[e.type].includes("SwitchCamera")&&s.SwitchCamera.push(new O8(c,i,r,l)):c.type==="SceneTransition"?In[e.type].includes("SceneTransition")&&s.SceneTransition.push(new L8(c,i,a,r,l)):c.type==="Animation"?In[e.type].includes("Animation")&&s.Animation.push(new I8(c,i,a.animationControls,r,l)):c.type==="SetVariable"?In[e.type].includes("SetVariable")&&s.SetVariable.push(new B8(c,i,r,l)):c.type==="DynamicVariablePlay"?In[e.type].includes("DynamicVariablePlay")&&s.DynamicVariablePlay.push(new z8(c,i,r,l)):c.type==="Conditional"?In[e.type].includes("Conditional")&&(c.ifActions.forEach(o({expression:c.condition,negate:!1})),c.elseActions.forEach(o({expression:c.condition,negate:!0}))):c.type==="ClearLocalStorage"?In[e.type].includes("ClearLocalStorage")&&s.ClearLocalStorage.push(new q0e(c,i,r,l)):c.type==="UserAPI"&&In[e.type].includes("UserAPI")&&s.UserAPI.push(new Y0e(c,i,r,l))}catch{}};return t.forEach(o()),s}function an(e){Object.values(e).forEach(t=>{t.forEach(i=>{(i instanceof l8||i instanceof N8||i instanceof u8||i instanceof I8||i instanceof k8||i instanceof V8||i instanceof c8||i instanceof O8||i instanceof L8||i instanceof d8||i instanceof B8||i instanceof z8)&&i.dispose()})})}function X0e(e,t){let i;if("material"in e){let r=e.material;Array.isArray(r)?i=e.material[0].layers.find(a=>a.uuid===t):i=e.material.layers.find(a=>a.uuid===t)}if(i)return i.color.texture.image.img instanceof HTMLVideoElement?i.color.texture.image.img:void 0}var R8=new Map,jf=new Map,Nh=class{constructor(e,t,i){this.data=t,this.delay=0,this.status="stopped";let{layerId:r,loop:a,volume:n,delay:s}=t;if(this.object=i,r===void 0)throw new Error("Missing property");let o=X0e(i,r);o&&(this.videoElement=o,this.videoElement.loop=a===1/0,Vm&&(this.videoElement.autoplay=!0),n!==void 0&&(this.videoElement.volume=n)),s!==void 0&&(this.delay=s),jf.has(i.uuid)?jf.get(i.uuid).push(this):jf.set(i.uuid,[this]),R8.set(e,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(e){if(!this.videoElement)return;let t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);e?(this.mute(),this.delay+=150):t?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let i=this.videoElement.play();i!==void 0&&i.then(r=>{}).catch(r=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},AM=class{constructor(e){this.data=e}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(e){let t=R8.get(e);!t||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t[this.data.interaction](),this.disposeDelay()},this.data.delay)):t[this.data.interaction]())}pauseAllVideosFromObject(e){let t=jf.get(e);!t?.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>i[this.data.interaction]()),this.disposeDelay()},this.data.delay)):t.forEach(i=>i[this.data.interaction]()))}pauseAllVideos(){let e=[...jf.values()];!e.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):e.forEach(t=>{t.forEach(i=>{i[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},N8=class{constructor(e,t,i,r,a){if(this.data=t,this.shared=r,this.condition=a,t.interaction==="play")this.interaction=new Nh(e,t,i);else if(t.interaction==="pause"||t.interaction==="stop")this.interaction=new AM(t);else throw new Error("Missing property")}dispatchBasic(){if(qr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Nh?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(qr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Nh?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},t4=(()=>{let e,t,i,r;function a(o){!e&&!i4()&&t?.sharedGameControlGlobals.createdObjects.length>0&&(e=requestAnimationFrame(n)),o&&(t=o,r=o.requestRender)}function n(o){let l=i?o-i:0,u=t.sharedGameControlGlobals.createdObjects,c=t.sharedGameControlGlobals.nCreatedPerAction,d=u.length,h=0;for(;h<d;){let p=u[h];p.userData.createdTime===void 0&&(p.userData.createdTime=o),p.userData.lifetime===void 0&&p.userData.quantity===void 0||p.userData.lifetime&&o-p.userData.createdTime<p.userData.lifetime||p.userData.quantity&&c[p.userData.actionId]<=p.userData.quantity?(p.userData.velocity&&(p.position.addScaledVector(p.userData.velocity,l/1e3),p.updateMatrix(),r()),h++):(c[p.userData.actionId]>p.userData.quantity&&c[p.userData.actionId]--,u.splice(h,1),p.removeFromParent(),t.sharedGameControlGlobals.rapierWorld&&p.rigidBody?(t.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),t.sharedGameControlGlobals.rapierWorld.removeRigidBody(p.rigidBody)):(p.bvhGeometry=void 0,t.sharedGameControlGlobals.entitiesWithTransformAnim=t.sharedGameControlGlobals.entitiesWithTransformAnim.filter(f=>f.bvhGeometry!==void 0)),d--,r())}e=h>0?requestAnimationFrame(n):void 0,i=h>0?o:void 0}function s(){i4()?e&&(cancelAnimationFrame(e),e=void 0,i=void 0):a()}return typeof document<"u"&&document.addEventListener("visibilitychange",s),a})();function i4(){return!!document&&document.hidden}var r4=new Ui,K0e=new V,Z0e=new V,V8=class{constructor(e,t,i,r,a){this.data=e,this.page=t,this.controlsManager=i,this.shared=r,this.condition=a,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=li.generateUUID(),this.dispatch=()=>{if(qr(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(qr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=coe(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let s=new Nn(this.object);if(s.playModeVisible=!0,s.expand(),this.data.coordinateSystem!=="world"){let l=this.data.coordinateSystem,u=this.page.scene.find(l);u&&(u.updateMatrixWorldSVD(),s.hiddenMatrix.copy(u.matrixWorldRigid))}s.scale.copy(this.object.scale),s.position.fromArray(this.data.position),s.rotation.fromArray(this.data.rotation),s.updateMatrix(),this.page.add(s);let o=this.controlsManager.sharedGameControlGlobals;o.createdObjects.push(s),o.nCreatedPerAction[this.uniqueId]===void 0?o.nCreatedPerAction[this.uniqueId]=1:o.nCreatedPerAction[this.uniqueId]++,s.updateWorldMatrix(!0,!0),s.traverseObject(this.traverseObjectCB),t4(),this.controlsManager.requestRender()},this.traverseObjectCB=s=>{var o,l,u,c;s.hasNonUniformScale&&s.updateMatrixWorldSVD();let d;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(s instanceof So)if(s.objectForSample){if(s.objectForSample.dataPatched.physics.fusedBody)return;d=s.object}else return s.object.dataPatched.physics.fusedBody===!0&&s.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(s instanceof Nn)d=s.object;else if(d=s,(o=d.dataPatched.cloner)==null?void 0:o.hideBase)return!0}else{if(s instanceof So)return;s instanceof Nn?d=s.object:d=s}this.data.destroy==="Time"?s.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(s.userData.quantity=this.data.destroyAfterQuantity,s.userData.actionId=this.uniqueId);let h=new V().fromArray(this.data.velocity),p=d.dataPatched;if(!(p.physics.enabled==="visibility"?!p.visible:!p.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(s,d,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((l=s.rigidBody)==null||l.collider(0).setActiveEvents(1),s.userData.hasCollisionDestroy=!0),s.matrixWorld.decompose(K0e,r4,Z0e),h.applyQuaternion(r4),this.data.velocity.some(f=>f!==0)&&this.data.dynamic&&((u=s.rigidBody)==null||u.setLinvel(h.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in s.object&&this.controlsManager.addBoundsTree(s),this.data.velocity.some(f=>f!==0)&&this.data.dynamic&&(s.userData.velocity=h)),((c=d.dataPatched.physics)==null?void 0:c.fusedBody)===!0))return!0};let n=this.page.scene.find(this.data.object);if(!n)throw new Error("Missing Property");if(this.object=n,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");t4(i)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(e=>window.clearTimeout(e)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},F8=200,Nx=.02,Vx=.3,Q0e=65;new V;var a4=new V,n4=new V,J0e=new V,Xn=new V,cs=new V,ku=new V,Fx=new zt,s4=new zt,eye=new zt;new zt;var co=new Ui,Ol=new Ui,Ho=new Va(0,0,0,"YXZ"),tye=new V(1,0,0),ho=new V(0,1,0),iye=new V(0,0,1),o4=new V(1,1,1);new ws;var rye=1,aye=.025,nye=16e-6,l4=12,sye=20,Ya=new Qs,Ns=new ba,oye={type:"requestRender"},lye={type:"updateMatrix"},u4=Math.PI/6,PM=class extends On{constructor(e,t,i,r,a,n,s,o,l){var u;super(),this.object=e,this.domElement=t,this.data=i,this.gloabalPhysics=r,this.controlsManager=a,this.cameraFollow=n,this.camera=s,this.page=o,this.sharedAssets=l,this.enableDamping=!0,this.hiddenMatrix0=new zt,this.target0=new V,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=F8,this.euler0=new Va(0,0,0,"YXZ"),this.position0Cam=new V,this.quat0Cam=new Ui,this.scale0Cam=new V,this.hiddenMatrix0Cam=new zt,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Qs(new V(0,-40,0),new V(0,40,0)),matrix:new zt,position:new V,rotation:new Ui},this.euler=new Va(0,0,0,"YXZ"),this.eulerDelta=new V,this.lastPosition=new V,this.lastCameraQuaternion=new Ui,this.lastCameraPosition=new V,this.PI_2=Math.PI/2,this.prevMouse=new Ce,this.velocityTarget=new V,this.velocity=new V,this.directionXZ=new V,this.rotVelocityStick=new V,this.rotVelocityTarget=new V,this.rotVelocity=new V,this.rotDirection=new V,this.nonColliderRotOffset=new zt,this.nonColliderPosOffset=new zt,this.firstPointerId=-1,this.rot=new V,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new zt,this.objectToTarget=new V,this.objectToTarget0=new V,this.objectToCamXZ=new V,this.objectToCamXZ0=new V,this.targetToCamera=new V,this.targetToCamera0=new V,this.cameraPolarAxis0=new V,this.targetPos=new V,this.targetQuat=new Ui,this.lerpFactorPos=new V().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Ui,this.objXZQuatInv=new Ui,this.objXZRotMat=new zt,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new V,this.pushedVelocity=new V,this.groundYRotation=0,this.objectRealQuat=new Ui,this.colliderWorldQuat=new Ui,this.groundNormal=new V,this.groundTilt=new Ui,this.groundTiltInv=new Ui,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new V,this.quaternion=new Ui,this.scale=new V,this.initialAction=!0,this.onPointerDown=v=>{var m;!(v.target===this.domElement||v.target instanceof HTMLElement&&v.target.tagName==="SPLINE-VIEWER"&&((m=v.target.shadowRoot)!=null&&m.contains(this.domElement)))||this.firstPointerId!==-1||(this.firstPointerId=v.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Ts&&!Vk&&this.domElement.requestPointerLock(),this.prevMouse.set(v.clientX,v.clientY))},this.onPointerUp=v=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),v.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=v=>{if(v.pointerId!==this.firstPointerId)return;let m=v.clientX-this.prevMouse.x,g=v.clientY-this.prevMouse.y;this.prevMouse.set(v.clientX,v.clientY),v.pointerType==="mouse"&&this.rotBy!=="keys"&&(Vk&&woe<15.5&&!Ts?(this.eulerDelta.y=-m*this.mouseOrbitSensitivity,this.eulerDelta.x=-g*this.mouseOrbitSensitivity):(this.eulerDelta.y=-v.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-v.movementY*this.mouseOrbitSensitivity)),v.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-m*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-g*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=v=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?PM.isLocked=!0:PM.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document?.hidden)for(let v in this.movementState)this.movementState[v]=0},this.onKeyDown=v=>{!(v.target instanceof HTMLInputElement)&&(v.code==="ArrowLeft"||v.code==="ArrowUp"||v.code==="ArrowRight"||v.code==="ArrowDown"||v.code==="Space")&&v.preventDefault();for(let m of this.keyAssignments)if(v.key.toUpperCase()===m[1]||v.key===m[1]){this.movementState[m[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=v=>{for(let m of this.keyAssignments)if(v.key.toUpperCase()===m[1]||v.key===m[1]||v.code.slice(3,v.code.length).toUpperCase()===m[1]){this.movementState[m[0]]=0;break}},this.copyVRGamePadValues=(v,m)=>{for(let g=2;g<4;g++){let y=v.axes[g];m===0?g===2?this.movementState.movePosX=y:this.movementState.movePosZ=y:(v.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,g===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(y)>=.3&&(this.vrEulerYOffset+=y<0?1:-1),this.movementState.rotPosY=y):this.moveMode==="fly"&&(this.movementState.moveNegY=y))}},this.sharedGameControlGlobals=a.sharedGameControlGlobals,e===s&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let c=this.euler0.clone(),d=c.y;if(this.objectRealQuat.copy(this.quaternion),c.y=0,this.quaternion.setFromEuler(c),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),c.set(0,d,0),this.quaternion.setFromEuler(c),this.rot.setFromEuler(c),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((u=this.camera)==null?void 0:u.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let v=new V(0,0,-1).applyQuaternion(this.camera.quaternion),m=new V().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(m),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let g,y;Math.abs(v.y)<1e-6?(m.y=0,v.y=0,y=m.projectOnVector(v)):m.y/v.y>0?y=v.multiplyScalar(m.y/v.y):y=v.multiplyScalar(m.length()),this.targetToCamera0.copy(y).negate(),g=this.camera.position.clone().add(y),this.objectToTarget0.subVectors(g,this.position);let b=new Va().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-b.x,b.x=0,b.z=0,b.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(b)}if(this.object instanceof Fn&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=i.rotByTouch??"joystick",this.rotBy=i.rotBy??"keys",this.rotationMode=i.rotationMode??"normal",this.moveMode=i.moveMode??"walk",this.collisionEnabled=i.collisionEnabled,this.speedTranslate=(i.speedTranslate??250)*rye,this.speedOrbit=(i.speedRotate??100)*aye,this.mouseOrbitSensitivity=(i.speedRotate??100)*nye,this.keyAssignments=i.keyAssignments.map(v=>{let m=[v[0],v[1]];return m[1]==="▲"?m[1]="ArrowUp":m[1]==="◀"?m[1]="ArrowLeft":m[1]==="▼"?m[1]="ArrowDown":m[1]==="▶"?m[1]="ArrowRight":m[1]==="⇧"?m[1]="Shift":m[1]==="↵"?m[1]="Enter":m[1]==="Space"?m[1]=" ":m[1]==="⌘"?m[1]="Meta":m[1]==="Ctrl"?m[1]="Control":m[1]==="Esc"&&(m[1]="Escape"),m}),i.rotBy==="mouse"){let v;v=this.keyAssignments.findIndex(m=>m[0]==="rotNegX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotPosX"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotPosY"),v!==-1&&(this.keyAssignments[v][1]=""),v=this.keyAssignments.findIndex(m=>m[0]==="rotNegY"),v!==-1&&(this.keyAssignments[v][1]="")}this.lerpFactorPosStart=1-.02**(1/((i.delayPos[0]??.3)*60)),this.lerpFactorPosEnd=1-.02**(1/((i.delayPos[1]??.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-.02**(1/((i.delayRot[0]??.3)*60)),this.lerpFactorRotEnd=1-.02**(1/((i.delayRot[1]??.3)*60)),this.lerpFactorPosCamera=1-.02**(1/((i.delayPosCamera??.3)*60)),this.lerpFactorRotCamera=1-.02**(1/((i.delayRotCamera??.3)*60)),this.gravity=(this.gloabalPhysics.gravity??ep.defaultData.gravity)*l4,this.usePhysics=this.gloabalPhysics.usePhysics??ep.defaultData.usePhysics,this.jumpPower=i.jumpPower*sye,this.resetYPosition=this.position.y+Math.abs(i.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=i.alignToGround??!1,this.orientMode=i.autoOrientMove?i.orientMode:"none",this.orientWith=i.orientWith??jy.defaultDataThirdPerson.orientWith,this.slopeThresh=Q0e*Math.PI/180,i.collider.type==="capsule"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=i.collider.height/2-i.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=i.collider.height*Nx/this.pixelsPerMeter,this.stepThresh=i.collider.height*Vx/this.pixelsPerMeter,this.colliderHeight=i.collider.height):i.collider.type==="sphere"?(this.collider.radius=i.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*i.collider.radius*Nx/this.pixelsPerMeter,this.stepThresh=2*i.collider.radius*Vx/this.pixelsPerMeter,this.colliderHeight=i.collider.radius*2):(this.offset=i.collider.height*Nx/this.pixelsPerMeter,this.stepThresh=i.collider.height*Vx/this.pixelsPerMeter,this.colliderHeight=i.collider.height),this.collider.type=i.collider.type;let h=new V().fromArray(i.collider.position),p=new Ui().setFromEuler(new Va().fromArray([...i.collider.rotation,"XYZ"]));this.collider.position.copy(h).multiply(this.scale),this.collider.rotation.copy(p),this.collider.matrix.compose(h,p,o4),i.cameraXAxis!==void 0&&(this.cameraXAxis=i.cameraXAxis,this.cameraYAxis=i.cameraYAxis,this.minPolarAngle=i.cameraRotXLimits[0],this.maxPolarAngle=i.cameraRotXLimits[1],this.minAzimuthAngleRel=i.cameraRotYLimits[0],this.maxAzimuthAngleRel=i.cameraRotYLimits[1]),this.forwardDir=i.forwardDirection??"-z",this.isFirstPerson&&(this.forwardDir="-z"),this.runMultiplier=i.runMultiplier??2;let f=i.navmesh.destinationHelperRadius*2;if(f>0){let v=new _i;v.push({fi:0,data:{...Ka.defaultData("light","phong"),alpha:0},id:"layer1"}),v.push({fi:0,data:{...Ka.defaultData("color"),color:i.navmesh.destinationHelperColor,alpha:i.navmesh.destinationHelperColor.a},id:"layer2"});let m=new PA({layers:v},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new ra(bN.create({parameters:{width:f,height:f/10,hollow:.7}}),m),this.navMeshPathDest.material.userData.opacity0=i.navmesh.destinationHelperColor.a}this.activate()}reset(e=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),e){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let t=new Va().setFromQuaternion(this.quaternion,"YXZ"),i=t.y;this.objectRealQuat.copy(this.quaternion),t.y=0,this.quaternion.setFromEuler(t),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),t.set(0,i,0),this.quaternion.setFromEuler(t),this.rot.setFromEuler(t),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof Fn?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var e;this.deactivate(),(e=this.navMeshPathDest)!=null&&e.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let e=this.data,t=this.sharedAssets;e.gameActions!==void 0&&(this.actions={},Fy.list.forEach(i=>{this.actions[i]=dn({...e,disabled:!1,type:"GameControl"},e.gameActions[i],this.page,t,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),an(this.actions.idle),an(this.actions.move),an(this.actions.run),an(this.actions.jump)}dispatchStartEvent(e){this.actions[e]!==void 0&&(this.actionState[e]||(this.actionState[e]=!0,this.actions[e].Transition.forEach(t=>{t.play()}),this.actions[e].Animation.forEach(t=>{t.play(this.initialAction===!1)}),this.actions[e].Create.forEach(t=>{t.dispatchStart()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("start")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("start")})))}dispatchStopEvent(e){this.actions[e]!==void 0&&(!this.actionState[e]||(this.actionState[e]=!1,this.actions[e].Transition.forEach(t=>{t.stop(),t.object.currentState!==null&&t.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[e].Create.forEach(t=>{t.dispatchStop()}),this.actions[e].Audio.forEach(t=>{t.dispatchGameControl("stop")}),this.actions[e].Particles.forEach(t=>{t.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Xn.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(e,t,i){var r,a,n,s,o,l,u,c,d;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let h=(this.isFirstFrame?16.6:e)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let p=h*60,f=!1;if(this.usePhysics&&this.collisionEnabled){let m=cs.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*l4),1)*(this.gravity>0?1:-1):this.velocity.y)*h,0).divideScalar(this.pixelsPerMeter),g=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,m,(r=this.object.rigidBody)==null?void 0:r.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(g){this.onObject=!0,this.groundNormal.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(f=!0),((a=g.collider.parent())==null?void 0:a.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let y=g.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let b of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(b.rigidBody===y&&b.userData.isFollowingObj!==this.object.uuid){(b.hasNonUniformScale?b.matrixWorldRigid:b.matrixWorld).decompose(Xn,Ol,cs),this.groundVelocity.subVectors(Xn,b.prevT),this.object.getWorldPosition(cs).add(this.collider.position).sub(Xn),this.groundYRotation=Ho.setFromQuaternion(Ol).y-b.prevR.y,ku.copy(cs).applyAxisAngle(ho,this.groundYRotation),this.groundVelocity.add(ku.sub(cs)).divideScalar(h);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*p),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let m=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let g=Xn.subVectors(this.path[1],this.position),y=cs.subVectors(this.path[1],this.path[0]);g.dot(y)<0?this.path.shift():(this.directionXZ.x=y.x,this.directionXZ.z=y.z),m.opacity=m.userData.opacity0}else m.opacity-=.05*m.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-(1-this.lerpFactorPos.x)**p),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-(1-this.lerpFactorPos.y)**p),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-(1-this.lerpFactorPos.z)**p)):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?this.velocity.x**2+this.velocity.z**2<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let v=J0e.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let m=cs.copy(v);m.y=0,v.set(0,v.y,m.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none"&&this.isFirstPerson===!1)if(this.orientWith==="camera"&&this.path.length<=1){let m=Xn;this.camera.getWorldDirection(m);let g=ku.copy(ho).multiplyScalar(m.dot(ho));m.sub(g);let y=cs.copy(this.directionXZ);y.x*=-1,this.rot.y=m.angleTo(y)*(m.cross(y).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Ho.setFromVector3(this.rot),this.moveMode==="walk"&&(Ho.x=0),v.applyEuler(Ho),f&&(Ol.setFromUnitVectors(ho,this.groundNormal),v.applyQuaternion(Ol)),i){let m=Ho.set(0,this.vrEulerYOffset*u4,0);i.applyEuler(m),v.x+=i.x,v.z+=i.z,this.nonColliderPosOffset.elements[13]+=i.y*h}if(this.usePhysics===!0){let m=cs;this.pushedVelocity.set(0,0,0);for(let g of this.sharedGameControlGlobals.entitiesWithTransformAnim){let y=ku.setFromMatrixPosition(g.matrixWorld).sub(g.prevT).divideScalar(h).divideScalar(this.pixelsPerMeter),b=g.rigidBody.collider(0).castCollider(y,this.object.rigidBody.collider(0),Xn.copy(v).divideScalar(this.pixelsPerMeter),h,!1);y.multiplyScalar(this.pixelsPerMeter);let x=fr.is(g)?g:g.object;if(b!==null&&this.lastHitObj!==x){let S;g instanceof Nn&&(S=g);let w=this.sharedGameControlGlobals.entityToCollisionEvents[x.uuid];if(w)for(let E of w)E.data.target==="character"&&(E.dispatch(S),x.dispatchEvent(kM));this.lastHitObj=x}if(b!==null){this.pushedVelocity.copy(y),m.copy(b.normal1).applyQuaternion(g.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let g=m.dot(v);g<0&&v.addScaledVector(m,-g),v.add(this.pushedVelocity)}else v.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(h),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotEnd)**p):this.rotVelocity.lerp(this.rotVelocityTarget,1-(1-this.lerpFactorRotStart)**p),this.euler.x+=this.rotVelocity.x*h,this.euler.y+=this.rotVelocity.y*h+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*h),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(ho,this.euler.y-this.euler0.y);let m=cs.copy(this.objectToCamXZ).normalize(),g=ku.copy(v).multiplyScalar(h);g.y=0;let y=g.sub(Xn.copy(m).multiplyScalar(g.dot(m))).cross(m).y;this.euler.y-=Math.atan2(y,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*h+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=li.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=li.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=li.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(t?(Ho.copy(t),Ho.y=0):(Ho.copy(this.euler),Ho.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Ho)),t&&(this.moveMode==="walk"?(this.rot.y=t.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(t),this.rot.y+=this.vrEulerYOffset*u4),co.setFromAxisAngle(tye,this.rot.x),Ol.setFromAxisAngle(ho,this.rot.y),Ol.multiply(co),co.setFromAxisAngle(iye,this.rot.z),Ol.multiply(co),this.quaternion.copy(Ol),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let m=cs.copy(v).multiplyScalar(h/this.pixelsPerMeter),g=null;this.didHit=!1;let y=new V;for(let b=0;b<5;b++){let x=m.length(),S=ku.copy(m).normalize();if(g=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),this.colliderWorldQuat,S,(n=this.object.rigidBody)==null?void 0:n.collider(0).shape,x,!1,24,void 0,void 0,this.object.rigidBody),g!==null){this.didHit=!0;let w=this.sharedGameControlGlobals.colliderToEntity.get(g.collider.handle);if(w!==this.lastHitObj&&b===0){this.lastHitObj=w;let A=this.sharedGameControlGlobals.entityToCollisionEvents[w?.uuid];if(A){for(let k of A)if(k.data.target==="character"){let I=((s=this.sharedGameControlGlobals.rapierWorld)==null?void 0:s.getCollider(g.collider.handle))._parent,O;if(w.cloner){for(let D of w.cloner.children)if(D.rigidBody===I){O=D;break}}k.dispatch(O),w.dispatchEvent(kM)}}}let E=a4.set(g.normal2.x,g.normal2.y,g.normal2.z).applyQuaternion(this.colliderWorldQuat),M=n4.copy(S).multiplyScalar(g.toi).dot(E),P=g.toi;if(P===0&&(this.position.y+=this.offset*this.pixelsPerMeter),M>this.offset&&(P=g.toi*(M-this.offset)/M,y.addScaledVector(S,P)),m.copy(S).multiplyScalar(x-P),Math.acos(-E.y)>this.slopeThresh){let A=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(y),k=ku.copy(g.witness2).applyQuaternion(this.colliderWorldQuat);k.y=0;let I=A.add(k);I.y+=this.stepThresh;let O=this.sharedGameControlGlobals.rapierWorld.castShape(I,this.colliderWorldQuat,m,(o=this.object.rigidBody)==null?void 0:o.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);O!==null&&O.toi===0&&(E.y=0,E.normalize())}m.addScaledVector(E,-m.dot(E))}else{b===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),y.add(m);break}}this.position.addScaledVector(y,this.pixelsPerMeter),(l=this.object.rigidBody)==null||l.setTranslation(Xn.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(u=this.object.rigidBody)==null||u.setRotation(co.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let m=this.onObject?1:5,g=v.multiplyScalar(h/m);for(let y=0;y<m;y++)this.position.add(g),this.collisionAdjustment(h/m)}else this.position.addScaledVector(v,h);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let m=this.objectToTarget.add(this.position),g=this.targetToCamera.add(m);Fx.lookAt(g,m,ho).setPosition(g),Fx.decompose(this.targetPos,this.targetQuat,Xn),this.camera.quaternion.slerp(this.targetQuat,1-(1-this.lerpFactorRotCamera)**p),this.camera.position.lerp(this.targetPos,1-(1-this.lerpFactorPosCamera)**p),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=li.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=li.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(lye),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((d=(c=this.navMeshPathDest)==null?void 0:c.material)==null?void 0:d.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(oye),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let e=co.setFromAxisAngle(ho,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?li.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(e);let t;this.cameraXAxis==="Limit"?t=li.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):t=li.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let i=Xn.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&i.applyQuaternion(e);let r=Ol.setFromAxisAngle(i,t);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(e),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(r)}groundTiltAdjustment(e){ho.angleTo(e)*180/Math.PI<15||ho.angleTo(e)*180/Math.PI>85?co.identity():co.setFromUnitVectors(ho,e),this.groundTilt.slerp(co,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(e){var t;let i=n4.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=Fx.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Xn,co,cs).compose(Xn,co,o4);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(n=>{if(n===this.object||n.isDescendantOf(this.object))return;Ns.makeEmpty(),n.updateMatrixWorldSVD();let s=n.matrixWorldRigid,o=s4.copy(s).invert(),l=eye.copy(s4).multiply(r);Ya.copy(this.collider.segment),Ya.start.applyMatrix4(l),Ya.end.applyMatrix4(l);let u=a4.copy(this.position).applyMatrix4(o);Ns.expandByPoint(Ya.start),Ns.expandByPoint(Ya.end),Ns.min.addScalar(-this.collider.radius),Ns.max.addScalar(this.collider.radius),n.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(c){return c.distanceToPoint(Ya.end)},intersectsBounds:c=>c.intersectsBox(Ns),intersectsTriangle:c=>{let d=Xn,h=cs,p=c.closestPointToSegment(Ya,d,h);if(p<this.collider.radius){let f=this.collider.radius-p,v=h.sub(d).normalize(),m=ku.copy(u);m.addScaledVector(v,f);let g=m.applyMatrix4(s).sub(this.position);i.add(g),Ya.start.addScaledVector(v,f),Ya.end.addScaledVector(v,f)}}})}),Ns.makeEmpty(),Ya.copy(this.collider.segment),Ya.start.applyMatrix4(r),Ya.end.applyMatrix4(r),Ns.expandByPoint(Ya.start),Ns.expandByPoint(Ya.end),Ns.min.addScalar(-this.collider.radius),Ns.max.addScalar(this.collider.radius),(t=this.sharedGameControlGlobals.staticMeshBVH)==null||t.shapecast({traverseBoundsOrder(n){return n.distanceToPoint(Ya.end)},intersectsBounds:n=>n.intersectsBox(Ns),intersectsTriangle:n=>{let s=Xn,o=cs,l=n.closestPointToSegment(Ya,s,o);if(l<this.collider.radius){let u=this.collider.radius-l,c=o.sub(s).normalize();this.alignToGround&&this.groundTiltAdjustment(c),i.addScaledVector(c,u),Ya.start.addScaledVector(c,u),Ya.end.addScaledVector(c,u)}}}),this.onObject=Math.abs(i.y)>Math.abs(e*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let a=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(a),this.position.add(i)}},j8=PM;j8.isLocked=!1;var uye=fu(Kz());function $l(e,t){let i=new Mi;if(t){let n=t.elements,s=n[0]**2+n[1]**2+n[2]**2,o=n[4]**2+n[5]**2+n[6]**2,l=n[8]**2+n[9]**2+n[10]**2,u=n[0]**2+n[4]**2+n[8]**2,c=n[1]**2+n[5]**2+n[9]**2,d=n[2]**2+n[6]**2+n[10]**2,h=1e-8;if(s<h||o<h||l<h||u<h||c<h||d<h)return i.setAttribute("position",new ri([],3)),i.setIndex([]),i}if(!e.getAttribute("position"))return i.setAttribute("position",new ri([],3)),i.setIndex([]),i;let{positions:r,triIndices:a}=e1(e.getAttribute("position"),e.getIndex());return i.setAttribute("position",new ri(r,3)),i.setIndex(a),t&&i.applyMatrix4(t),i}var cye=new zt,dye=new zt,Go=[[0,0,0],[0,0,0],[0,0,0]];function $8(e){let t=e.elements;Go[0][0]=t[0],Go[0][1]=t[4],Go[0][2]=t[8],Go[1][0]=t[1],Go[1][1]=t[5],Go[1][2]=t[9],Go[2][0]=t[2],Go[2][1]=t[6],Go[2][2]=t[10];let{u:i,v:r}=(0,uye.SVD)(Go),a=cye.set(i[0][0],i[0][1],i[0][2],0,i[1][0],i[1][1],i[1][2],0,i[2][0],i[2][1],i[2][2],0,0,0,0,1),n=dye.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1);return a.multiply(n.transpose())}var hye=class extends $R{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(e,t){t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):t.isPerspectiveCamera?(this.ray.origin.set(e.x,e.y,-1).unproject(t),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(e,t=!0,i=[]){return e.forEach(r=>{r.visible&&this.intersectObject(r,t,i)}),i}createRaycastLineHelper(){let e=new vc({color:65280,linewidth:10}),t=new V(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),i=new V(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),r=this.camera.far-this.camera.near,a=new V().addVectors(t,i.multiplyScalar(r)),n=new Mi;return n.setFromPoints([t,a]),new cy(n,e)}},U8=e=>e instanceof zh||e instanceof Rh;function pye(e,t){return e.distance-t.distance}function W8(e,t,i){if(!(!jl(t)||!t.visible)){yo(t)&&t.raycast(e,i);for(let r of t.children)W8(e,r,i)}}function r0(e,t,i,r=!1){if(!r&&!i.some(n=>nb(e,n)!==void 0))return[];let a=[];return t.children.forEach(n=>W8(e,n,a)),a.sort(pye),a}function TM(e){let t=[];if(e.length){let i=e[0].object;jl(i)&&t.push(i);let r=i.parent;for(;r;)U8(r)&&t.push(r),r=r.parent}return t}function Ul(e,t,i,r){let a=e.frame;if(a){let n=t[0]*a.width,s=(1-t[1])*a.height;for(let o of i){let l=o===a.uuid?a:a.find(o);if(l?.intersects(n,s))return r(l),!0}}return!1}function nb(e,t){if(yo(t)){if(t.visible){let i=[];return t.raycast(e,i),i.length?i[0]:void 0}}else if(U8(t))return H8(e,t)}function H8(e,t){if(!(!jl(t)||!t.visible)){if(yo(t)){let i=[];if(t.raycast(e,i),i.length)return i[0]}for(let i of t.children){let r=H8(e,i);if(r)return r}}}function fye(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width*2-1,y:-((t-(i.top+window.scrollY))/i.height)*2+1}}function mye(e,t,i){return{x:(e-(i.left+window.scrollX))/i.width,y:1-(t-(i.top+window.scrollY))/i.height}}var vye=class{constructor(e,t,i,r,a,n,s,o){this.renderer=e,this.publish=t,this.scene=i,this.getCamera=r,this.sharedAssets=a,this.requestRender=n,this.isExport=s,this.frame=o,this.raycaster=new hye,this._useWindowEvents=!1,this.pointerWorld={x:0,y:0},this.pointerScreen={x:0,y:0},this._useWindowEvents=t.mouseEventTarget==="window",this.domElement=e.domElement,this.eventElement=this._useWindowEvents?window:e.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(e){this._useWindowEvents=e,this.eventElement=e?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(e){this._domRect=e}get domRect(){return this._domRect}updateRaycaster(e){var t;let{pageX:i,pageY:r}=((t=e.touches)==null?void 0:t.length)>0?e.touches[0]:e;this.pointerWorld=fye(i,r,this._domRect),this.pointerScreen=mye(i,r,this._domRect),this.raycaster.setFromCamera(this.pointerWorld,this.getCamera())}},_s=class{constructor(e){this.eventContext=e,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},aP=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],G8=e=>{var t;return(t=aP.find(([i,r])=>r===e))==null?void 0:t[0]},qm=e=>{var t;return(t=aP.find(([i])=>i===e))==null?void 0:t[1]},gye=(e,t)=>{let i=G8(e);if(i){let r=new CustomEvent(i,{bubbles:!0});return Object.defineProperty(r,"target",{writable:!1,value:t}),r}},yye=class extends _s{constructor(){super(...arguments),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=e=>{var t;if(!e.eventName||!e.target||e.eventName==="Scroll")return;let i=(t=this.splineEvents[G8(e.eventName)])==null?void 0:t[e.target.uuid];if(!i)return;e.eventName==="Scroll"&&e.deltaY!==void 0&&Object.assign(i,{deltaY:e.deltaY});let{domElement:r}=this.eventContext;r.dispatchEvent(i)}}connect(){let{page:e}=this.eventContext;e.traverseEntity(t=>{var i,r;if((i=t.data)!=null&&i.events.length){for(let[a,n]of aP)if(t.data.events.some(s=>s.data.type===n&&!s.data.disabled)){this.objectsPerEvents.has(a)?(r=this.objectsPerEvents.get(a))==null||r.push(t):this.objectsPerEvents.set(a,[t]);let s={id:t.uuid,name:t.name},o=gye(n,s),l=this.splineEvents[a];l?l[t.uuid]=o:this.splineEvents[a]={[t.uuid]:o}}}}),this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(e=>{e.forEach(t=>{t.removeEventListener("beginEvent",this.onBeginEvent)})})}},bye=class{constructor(e,t,i,r,a,n){if(this.id=e,this.data=t,this.object=i,this.entered=!1,(t.type==="KeyDown"||t.type==="KeyUp"||t.type==="KeyPress")&&!t.key)throw new Error("Missing property");this.actions=dn(t,t.actions,r,a,n,i)}disconnect(){an(this.actions)}dispatchHeld(e){this.actions.Create.forEach(t=>{e&&t.dispatchThrottled.cancel(),t.dispatchThrottled()})}dispatch(e=!1){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStart())):(this.actions.Transition.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.SwitchCamera.some(t=>t.playing&&t.data.runMode!=="Toggle")||this.actions.SwitchCamera.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),e===!1&&this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.Animation.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()),this.actions.Create.forEach(e=>e.dispatchStop()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},wye=class extends _s{constructor(e,t,i){super(e),this.eventManager=t,this.useForRaycastProperty=i,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=r=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(r);let{raycaster:a,page:n}=this.eventContext,s=r0(a,n,[],!0);this.sceneInterects=s,s.length&&(this.eventContext.sharedAssets.raycastProperty={x:s[0].point.x,y:s[0].point.y,z:s[0].point.z,objX:s[0].object.matrixWorld.elements[12],objY:s[0].object.matrixWorld.elements[13],objZ:s[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{(a.data.type==="MouseDown"||a.data.type==="MousePress")&&(this.onCanvasRaycast(r),a.dispatch())})},this.onCanvasMouseUp=r=>{(r.target===this.eventContext.domElement||r.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(a=>{a.data.type==="MouseUp"?(this.onCanvasRaycast(r),a.dispatch()):a.data.type==="MousePress"&&a.dispatchRelease()})},this.onMouseDown=r=>{Ni.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseDown"))},this.onMouseUp=r=>{Ni.length>1||(this.eventContext.updateRaycaster(r),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=r=>{Ni.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent())},this.onMousePressRelease=r=>{Ni.length>1||(this.eventContext.updateRaycaster(r),this.handleMousePressEvent(!0))},this.onKeyDown=r=>{this.heldKeys[r.key]||(this.handleKeyEvent(r,"KeyDown"),this.handleKeyEventHeld(r,"KeyDown",!0)),this.heldKeys[r.key]=!0},this.onKeyUp=r=>{this.handleKeyEvent(r,"KeyUp"),this.handleKeyEventHeld(r,"KeyUp",!0)},this.onKeyPressDown=r=>{this.heldKeysPress[r.key]?this.handleKeyEventHeld(r,"KeyPress"):(this.handleKeyEvent(r,"KeyPress"),this.handleKeyEventHeld(r,"KeyPress",!0)),this.heldKeysPress[r.key]=!0},this.onKeyPressUp=r=>{this.handleKeyEvent(r,"KeyPress",!0)},this.releaseHeldKey=r=>{delete this.heldKeys[r.key]},this.releaseHeldKeyPress=r=>{delete this.heldKeysPress[r.key]},this._onUserEvent=({eventName:r,target:a,reverse:n})=>{var s,o,l,u;if(!r||!a)return;let c=qm(r);c&&(c==="MouseDown"||c==="MouseUp"||c==="MousePress"?(a.dispatchEvent({type:"beginEvent",eventName:c}),(o=(s=this.eventsPerObjects[c])==null?void 0:s[a.uuid])==null||o.forEach(d=>{d.dispatchUserEvent(n)})):(c==="KeyDown"||c==="KeyUp"||c==="KeyPress")&&(a.dispatchEvent({type:"beginEvent",eventName:c}),(u=(l=this.eventsPerObjects[c])==null?void 0:l[a.uuid])==null||u.forEach(d=>{d.dispatchUserEvent()})))}}connect(){var e,t,i,r,a,n;let{page:s,sharedAssets:o,domElement:l}=this.eventContext,u=(c,d)=>{var h,p;if(!((h=c.data)!=null&&h.events.length))return;let f=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let v of f){let m=this.eventsPerObjects[v];c.data.events.filter(({data:g})=>g.type===v&&g.disabled!==!0).forEach(({id:g,data:y})=>{try{let b=new bye(g,y,c,s,o,this.eventManager);b.actions.Video.length&&(this.hasVideoAction=!0),(y.type==="MouseDown"||y.type==="MouseUp"||y.type==="MousePress")&&(y.mode==="Canvas"||y.mode==="Window")?this.canvasMouseEvents.push(b):m[c.uuid]?m[c.uuid].some(x=>x.id===b.id)||m[c.uuid].push(b):m[c.uuid]=[b]}catch{}}),(p=m[c.uuid])!=null&&p.length&&this.objectsPerTypes[v].push(c instanceof nn&&(v==="MouseDown"||v==="MouseUp"||v==="MousePress")?d:c)}};s.traverseEntity(c=>{var d;(c instanceof zn||c instanceof Za)&&((d=c.frame)==null||d.traverse(h=>{u(h,c)})),u(c)}),this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),l.addEventListener("pointerdown",this.onCanvasMouseDown),l.addEventListener("pointerup",this.onCanvasMouseUp),((e=this.objectsPerTypes.MouseDown)!=null&&e.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMouseDown)),(t=this.objectsPerTypes.MouseUp)!=null&&t.length&&(this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMouseUp)),(i=this.objectsPerTypes.MousePress)!=null&&i.length&&(this.domEventsNeeded.add("pointerdown"),l.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),l.addEventListener("pointerup",this.onMousePressRelease)),(r=this.objectsPerTypes.KeyDown)!=null&&r.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(a=this.objectsPerTypes.KeyUp)!=null&&a.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(n=this.objectsPerTypes.KeyPress)!=null&&n.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([c,d])=>{d.forEach(h=>{h.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},e.removeEventListener("pointerdown",this.onCanvasMouseDown),e.removeEventListener("pointerup",this.onCanvasMouseUp),e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerdown",this.onMousePressDown),e.removeEventListener("pointerup",this.onMouseUp),e.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(t=>{Object.values(t).forEach(i=>{i.forEach(r=>{r.disconnect()})})}),this.canvasMouseEvents.forEach(t=>{t.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([t,i])=>{i.forEach(r=>{r.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(e){var t,i,r,a;let{stopRaycast:n,raycaster:s,page:o,pointerScreen:l}=this.eventContext,u=this.objectsPerTypes[e],c=u.filter(d=>!(d instanceof nn));if(!(!u.length&&!this.useForRaycastProperty)&&!(o.uiCanvas&&Ul(o,[l.x,l.y],Object.keys(this.eventsPerObjects[e]),d=>{this.handleObjectMouseEventDispatch(d,e)}))){if(n||this.useForRaycastProperty){let d;if(this.sceneInterects===null?d=r0(s,o,c,this.useForRaycastProperty):(d=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&d.length&&(this.eventContext.sharedAssets.raycastProperty={x:d[0].point.x,y:d[0].point.y,z:d[0].point.z,objX:d[0].object.matrixWorld.elements[12],objY:d[0].object.matrixWorld.elements[13],objZ:d[0].object.matrixWorld.elements[14]}),n){let h=[((i=(t=d[0])==null?void 0:t.uv)==null?void 0:i.x)??0,((a=(r=d[0])==null?void 0:r.uv)==null?void 0:a.y)??0];TM(d).forEach(p=>{p instanceof zn&&Ul(p,h,Object.keys(this.eventsPerObjects[e]),f=>{this.handleObjectMouseEventDispatch(f,e)}),this.eventsPerObjects[e][p.uuid]&&this.handleObjectMouseEventDispatch(p,e)})}}n||c.forEach(d=>{var h,p;let f=nb(s,d);f&&(this.handleObjectMouseEventDispatch(d,e),d instanceof zn&&Ul(d,[((h=f?.uv)==null?void 0:h.x)??0,((p=f?.uv)==null?void 0:p.y)??0],Object.keys(this.eventsPerObjects[e]),v=>{this.handleObjectMouseEventDispatch(v,e)}))})}}handleMousePressEvent(e=!1){let t="MousePress",i=this.objectsPerTypes[t],r=i.filter(n=>!(n instanceof nn)),a=[];if(i.length){if(!e){let{stopRaycast:n,raycaster:s,page:o,pointerScreen:l}=this.eventContext,u=!1;if(o.uiCanvas&&(u=Ul(o,[l.x,l.y],Object.keys(this.eventsPerObjects[t]),c=>{a.push(c)})),n&&!u){let c=r0(s,o,r);a=TM(c),c.forEach(d=>{var h,p;d.object instanceof zn&&Ul(d.object,[((h=d?.uv)==null?void 0:h.x)??0,((p=d?.uv)==null?void 0:p.y)??0],Object.keys(this.eventsPerObjects[t]),f=>{a.push(f)})})}else r.forEach(c=>{var d,h;let p=nb(s,c);p&&(a.push(c),c instanceof zn&&Ul(c,[((d=p?.uv)==null?void 0:d.x)??0,((h=p?.uv)==null?void 0:h.y)??0],Object.keys(this.eventsPerObjects[t]),f=>{a.push(f)}))})}this._prevObjects.length&&this._prevObjects.forEach(n=>{a.includes(n)||this.handleObjectMouseEventDispatchRelease(n,t)}),a.length&&a.forEach(n=>{this.handleObjectMouseEventDispatch(n,t)}),this._prevObjects=a}}handleObjectMouseEventDispatch(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(a=>{a.dispatch()})}handleObjectMouseEventDispatchRelease(e,t){var i,r;e.dispatchEvent({type:"beginEvent",eventName:t}),(r=(i=this.eventsPerObjects[t])==null?void 0:i[e.uuid])==null||r.forEach(a=>{a.dispatchRelease()})}handleKeyEvent(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{let a=this.eventsPerObjects[t][r.uuid];a.some(({data:n})=>"key"in n&&n.key===e.key)&&r.dispatchEvent({type:"beginEvent",eventName:t}),a.forEach(n=>{"key"in n.data&&n.data.key===e.key&&(i?n.dispatchRelease():n.dispatch(!0))})})}handleKeyEventHeld(e,t,i=!1){this.objectsPerTypes[t].forEach(r=>{this.eventsPerObjects[t][r.uuid].forEach(a=>{"key"in a.data&&a.data.key===e.key&&a.dispatchHeld(i)})})}},xye=new V,Sye=new V,q8=class{constructor(e,t,i,r,a){this.actionsIn=dn(e,e.inActions,i,r,a,t),this.actionsOut=dn(e,e.outActions,i,r,a,t)}disconnect(){an(this.actionsIn),an(this.actionsOut)}},Cye=class extends q8{constructor(e,t,i,r,a,n){super(t,i,r,a,n),this.id=e,this.data=t,this.object=i,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let h of this.objects)if(!h.visible)return;let u=xye.setFromMatrixPosition(this.objects[0].matrixWorld),c=Sye.setFromMatrixPosition(this.objects[1].matrixWorld),d=u.distanceTo(c)<=this.distance?"in":"out";if(this.stage!==d){this.stage=d;let h=d==="in"?this.actionsIn:this.actionsOut;h.Audio.forEach(p=>p.dispatchConditional()),h.Particles.forEach(p=>p.dispatchConditional()),h.Video.forEach(p=>p.dispatchConditional()),h.Link.forEach(p=>p.dispatch()),h.Create.forEach(p=>p.dispatch()),h.Destroy.forEach(p=>p.dispatch()),h.Reset.forEach(p=>p.dispatch()),h.Transition.forEach(p=>{p.object.currentTransitionEvent!==this&&(p.object.currentTransitionEvent=this),p.init()}),h.Transition.forEach(p=>p.play()),h.Animation.forEach(p=>p.play()),h.SwitchCamera.forEach(p=>p.play()),h.SceneTransition.forEach(p=>p.dispatch()),h.SetVariable.forEach(p=>p.checkConditions()),h.SetVariable.forEach(p=>p.dispatch()),h.DynamicVariablePlay.forEach(p=>p.dispatch()),h.ClearLocalStorage.forEach(p=>p.dispatch()),h.UserAPI.forEach(p=>p.dispatch())}};let{distance:s,fromObject:o,toObject:l}=t.condition;this.distance=s;for(let u of[o,l]){if(!u)throw new Error("Missing property");let c=r.find(u);if(!c)throw new Error("Missing property");this.objects.push(c)}}connect(){window.setTimeout(()=>{this.objects.forEach(e=>{e.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(e=>{e.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},_ye=class extends q8{constructor(e,t,i,r,a,n){var s;super(t,i,r,a,n),this.id=e,this.data=t,this.object=i,this.onBegin=({target:u,state:c})=>{this.toState!==c&&(this.actionsOut.Audio.forEach(d=>d.dispatchConditional()),this.actionsOut.Particles.forEach(d=>d.dispatchConditional()),this.actionsOut.Video.forEach(d=>d.dispatchConditional()),this.actionsOut.Link.forEach(d=>d.dispatch()),this.actionsOut.Create.forEach(d=>d.dispatch()),this.actionsOut.Destroy.forEach(d=>d.dispatch()),this.actionsOut.Reset.forEach(d=>d.dispatch()),this.actionsIn.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(d=>d.play()),this.actionsOut.Animation.forEach(d=>d.play()),this.actionsIn.SwitchCamera.forEach(d=>d.pause()),this.actionsOut.SwitchCamera.forEach(d=>d.play()),this.actionsOut.SceneTransition.forEach(d=>d.dispatch()),this.actionsOut.SetVariable.forEach(d=>d.checkConditions()),this.actionsOut.SetVariable.forEach(d=>d.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))},this.onComplete=({target:u,state:c})=>{this.toState===c&&(this.actionsIn.Audio.forEach(d=>d.dispatchConditional()),this.actionsIn.Particles.forEach(d=>d.dispatchConditional()),this.actionsIn.Video.forEach(d=>d.dispatchConditional()),this.actionsIn.Link.forEach(d=>d.dispatch()),this.actionsIn.Create.forEach(d=>d.dispatch()),this.actionsIn.Destroy.forEach(d=>d.dispatch()),this.actionsIn.Reset.forEach(d=>d.dispatch()),this.actionsOut.Transition.forEach(d=>d.pause()),this.actionsOut.Transition.forEach(d=>d.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(d=>d.play()),this.actionsIn.Animation.forEach(d=>d.play()),this.actionsOut.SwitchCamera.forEach(d=>d.pause()),this.actionsIn.SwitchCamera.forEach(d=>d.play()),this.actionsIn.SceneTransition.forEach(d=>d.dispatch()),this.actionsIn.SetVariable.forEach(d=>d.checkConditions()),this.actionsIn.SetVariable.forEach(d=>d.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(d=>d.dispatch()),this.actionsOut.ClearLocalStorage.forEach(d=>d.dispatch()),this.actionsOut.UserAPI.forEach(d=>d.dispatch()))};let{condition:o}=t;if(!o.object)throw new Error("Missing property");let l=r.find(o.object)??r.scene.find2D(o.object);if(!l)throw new Error("Missing property");if(this.toObject=l,o.state&&!((s=this.toObject.states)!=null&&s[o.state]))throw new Error("Missing property");this.toState=o.state}connect(){Nc(this.actionsOut).forEach(e=>{var t;(t=this.actionsOut[e])!=null&&t.length&&this.toObject.addEventListener("beginState",this.onBegin)}),Nc(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),Nc(this.actionsOut).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),Nc(this.actionsIn).forEach(e=>{var t;(t=this.actionsIn[e])!=null&&t.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Mye=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1}connect(){super.connect();let{page:e,sharedAssets:t}=this.eventContext;e.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length){for(let{id:a,data:n}of i.data.events)if(!n.disabled&&n.type==="Conditional")try{let s;n.condition.type==="Comparison"||(n.condition.type==="Distance"?s=new Cye(a,n,i,e,t,this.eventManager):n.condition.type==="State"&&(s=new _ye(a,n,i,e,t,this.eventManager))),s&&(this.eventsPerConditions[n.condition.type].push(s),(s.actionsIn.Video.length||s.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch{}}}),Object.values(this.eventsPerConditions).forEach(i=>i.forEach(r=>r.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(e=>e.forEach(t=>t.disconnect()))}},nf=new V,Ou=new V,Cc=new V,c4=new hs,Eye=.01,Er=new V,za=new V,d4=new V,qc=new Ui,jx=new Va,Aye=new zt,$x=new Ta,th=new V,qo=new V,ih=.2;function Ux(e,t){!t||(t[0]<t[1]&&(e.x=Math.min(Math.max(e.x,t[0]),t[1])),t[2]<t[3]&&(e.y=Math.min(Math.max(e.y,t[2]),t[3])),t[4]<t[5]&&(e.z=Math.min(Math.max(e.z,t[4]),t[5])))}var Pye=function(){let e=new zt;return(t,i,r)=>{let a=t.obj;e.copy(a.hiddenMatrix),a.parent!==null&&e.premultiply(a.parent.matrixWorld),e.invert(),a.position.copy(i),t.reference==="global"&&Ux(a.position,t.limits),a.position.applyMatrix4(e),t.reference==="parent"?Ux(a.position,t.limits):t.reference==="local"&&(qc.copy(t.quat0).invert(),a.position.sub(t.position0),a.position.applyQuaternion(qc),Ux(a.position,t.limits),qc.invert(),a.position.applyQuaternion(qc),a.position.add(t.position0)),e.multiply(r??a.matrixWorld).decompose(Er,a.quaternion,za),a.updateMatrix(),a.hasNonUniformScale&&(a.updateMatrixWorld(),a.updateMatrixWorldSVD()),a instanceof ns&&Ql(a.parent)&&a.invalidateDownstreamBooleanData(!0)}}(),Tye=class{constructor(e,t,i,r,a,n,s){this.object=e,this.id=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=dn(i,i.dragDropActions.drag,r,a,n,this.object),this.actionsDrop=dn(i,i.dragDropActions.drop,r,a,n,this.object);let o=[];this.data.objects.forEach(l=>{let u=r.find(l);!u||u.data.visible!==!1&&(o.push(u),s[u.uuid]&&s[u.uuid].forEach(c=>{let d=r.find(c);!d||d.data.visible!==!1&&o.push(d)}))}),this.data.dropDestinations.forEach(l=>{let u=r.find(l);!u||u.data.visible!==!1&&(this.dropDestIds.push(u.uuid),s[u.uuid]&&s[u.uuid].forEach(c=>{let d=r.find(c);!d||d.data.visible!==!1&&this.dropDestIds.push(d.uuid)}))}),this.dragItems=o.map(l=>(this.data.planeMode==="locked"&&(l.userData.lockedPlane=!0),l.userData.worldPosition0=new V().setFromMatrixPosition(l.matrixWorld),{obj:l,fromPosition:new V().setFromMatrixPosition(l.matrixWorld),pointStart:new V,pointEnd:new V,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new V().copy(l.position),quat0:new Ui().copy(l.quaternion),snapped:!1,orientationMatrix:new zt,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){an(this.actionsDrag),an(this.actionsDrop),this.dragItems.forEach(e=>{e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart),e.obj.recursiveBBoxNeedsUpdate=!0,e.obj.userData.lockedPlane=void 0,e.obj.position.copy(e.position0),e.obj.quaternion.copy(e.quat0),e.obj.updateMatrix()})}},kye=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=i=>{var r;if(Ni.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:a,page:n}=this.eventContext,s=n.raycastWithClones(a);if(this.lastDropDestination=null,s.length===0){this.activeEvent=null;return}for(let o of this.events){let l=0;for(let{obj:u,pointEnd:c,pointStart:d}of o.dragItems){if(u===s[0].object||u===s[0].object.object||fr.is(u)&&u.isAncestorOf(s[0].object.uuid)){if(o.activeIdx=l,o.activeDragItem.reset=!1,o.activeDragItem.currentDampingFactor=o.data.dampingFactor,o.activeDragItem.snapped=!1,o.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){o.activeDragItem.obj.rigidBody&&o.activeDragItem.obj.rigidBody.setBodyType(2,!0);let h=o.activeDragItem.obj;u.hasNonUniformScale&&u.updateMatrixWorldSVD(),(h.hasNonUniformScale?h.matrixWorldRigid:h.matrixWorld).decompose(Er,qc,za),jx.setFromQuaternion(qc),h.prevR===void 0?(h.prevR=jx.clone(),h.prevT=Er.clone()):(h.prevR.copy(jx),h.prevT.copy(Er)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(o.activeDragItem.obj)}this.calcPlaneIntersectPos(u,d,o.data.plane,o.data.referenceFrame),c.copy(d),(this.eventManager.controlsManager.usePhysics&&((r=u.data.physics)==null?void 0:r.rigidBody)==="dynamic"||o.data.drop===!1||o.data.resetOnSnapFail===!1)&&o.activeDragItem.fromPosition.setFromMatrixPosition(o.activeDragItem.obj.matrixWorld),this.activeEvent=o,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}l++}}this.activeEvent=null},this.onPointerMove=i=>{var r,a,n,s;if(Ni.length>1)return;this.eventContext.updateRaycaster(i);let{raycaster:o,page:l}=this.eventContext,u=l.raycastWithClones(o);if(Ni.length===0){let c=!1;for(let d of this.events){for(let{obj:h}of d.dragItems)if(h===((r=u[0])==null?void 0:r.object)||h===((n=(a=u[0])==null?void 0:a.object)==null?void 0:n.object)||fr.is(h)&&h.isAncestorOf((s=u[0])==null?void 0:s.object.uuid)){switch(c=!0,d.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break}break}if(c)break}c||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let c=this.activeEvent.activeDragItem;c.snapped=!1;let d;if(this.activeEvent.data.drop&&(d=u.filter(h=>c.obj!==h.object&&!c.obj.isAncestorOf(h.object.uuid)&&!(h.object instanceof zh)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(p=>p===h.object.uuid||l.scene.find(p).isAncestorOf(h.object.uuid))))[0]),d){let h=d4.copy(d.face.normal).applyMatrix3($x.getNormalMatrix(d.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")c.fromPosition.setFromMatrixPosition(d.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(c.fromPosition.copy(d.point),this.activeEvent.data.snapSurfaceMode==="bbox"){Er.copy(h).applyMatrix3($x.setFromMatrix4(c.obj.matrixWorld).transpose());let p=c.obj;Er.x>ih?za.x=-p.recursiveBBox.min.x:Er.x<-ih&&(za.x=-p.recursiveBBox.max.x),Er.y>ih?za.y=-p.recursiveBBox.min.y:Er.y<-ih&&(za.y=-p.recursiveBBox.max.y),Er.z>ih?za.z=-p.recursiveBBox.min.z:Er.z<-ih&&(za.z=-p.recursiveBBox.max.z),za.applyMatrix3($x.invert())}else za.copy(h).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);c.fromPosition.add(za)}this.activeEvent.data.autoOrient&&(Er.set(0,1,0).cross(h),Er.length()<1e-4&&Er.set(-1,0,0).cross(h),za.crossVectors(d4,Er),c.orientationMatrix.makeBasis(Er,za,h)),c.pointStart.copy(c.fromPosition),c.pointEnd.copy(c.pointStart),c.currentDampingFactor=this.activeEvent.snapDampingFactor,c.snapped=!0,this.lastDropDestination!==d.object&&(this.lastDropDestination=d.object,this.activeEvent.actionsDrop.Transition.forEach(p=>{p.play()}),this.activeEvent.actionsDrop.Animation.forEach(p=>{p.play()}),this.activeEvent.actionsDrop.Audio.forEach(p=>{p.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Particles.forEach(p=>{p.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(p=>{p.dispatchThrottled()}))}else c.orientationMatrix.makeRotationFromQuaternion(c.quat0),this.lastDropDestination=null,c.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(c.obj,c.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(h=>{h.stop()}),this.activeEvent.actionsDrop.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.Particles.forEach(h=>{h.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(h=>{h.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.ClearLocalStorage.forEach(h=>h.dispatch()),this.activeEvent.actionsDrag.UserAPI.forEach(h=>h.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.play()}),this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("start")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(h=>{h.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(h=>{h.stop(),h.object.currentState!==null&&h.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(h=>{h.stop()}))},500),this.updateDragItem(c),c.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=i=>{var r;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let a=((r=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:r.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!a)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&a&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(n=>{n.stop(),n.object.currentState!==null&&n.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(n=>{n.stop()}),this.activeEvent.actionsDrag.Audio.forEach(n=>{n.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Particles.forEach(n=>{n.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(n=>n.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(n=>n.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(n=>n.dispatch()),this.activeEvent.actionsDrop.ClearLocalStorage.forEach(n=>n.dispatch()),this.activeEvent.actionsDrop.UserAPI.forEach(n=>n.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}}}connect(){let e={};if(this.eventContext.page.traverseEntity(i=>{i.component&&(e[i.component.uuid]?e[i.component.uuid].push(i.uuid):e[i.component.uuid]=[i.uuid])}),this.eventContext.page.traverseEntity(i=>{var r;(r=i.data)==null||r.events.filter(a=>a.data.type==="DragDrop"&&!a.data.disabled).forEach(a=>{this.events.push(new Tye(i,a.id,a.data,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager,e))})}),!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let e=this.eventContext.domElement;e.removeEventListener("pointerdown",this.onPointerDown),e.removeEventListener("pointermove",this.onPointerMove),e.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(t=>t.dispose())}setCursor(e){this.eventContext.domElement.style.cursor=e}onAnimationFrameDamping(){for(let e of this.events)for(let t of e.dragItems)t.paused||this.updateDragItem(t,!0)}calcPlaneIntersectPos(e,t,i,r){let{getCamera:a,raycaster:n}=this.eventContext;a().getWorldDirection(Ou),Ou.negate();let s=qc.identity();switch(r==="parent"?Aye.multiplyMatrices(e.parent.matrixWorld,e.hiddenMatrix).decompose(Er,s,za):r==="local"&&e.matrixWorld.decompose(Er,s,za),i){case"x":Er.set(1,0,0).applyQuaternion(s),th.copy(Ou).cross(Er),qo.copy(Er).cross(th);break;case"y":Er.set(0,1,0).applyQuaternion(s),th.copy(Ou).cross(Er),qo.copy(Er).cross(th);break;case"z":Er.set(0,0,1).applyQuaternion(s),th.copy(Ou).cross(Er),qo.copy(Er).cross(th);break;case"xy":qo.set(0,0,1).applyQuaternion(s);break;case"yz":qo.set(1,0,0).applyQuaternion(s);break;case"xz":qo.set(0,1,0).applyQuaternion(s);break;case"adaptive":Ou.angleTo(za.set(0,1,0))>Math.PI/6?(Er.crossVectors(za.set(0,1,0),Ou),qo.crossVectors(Er,za)):qo.set(0,1,0);break;default:qo.copy(Ou);break}Cc.setFromMatrixPosition(e.matrixWorld);let o=e.userData.lockedPlane?e.userData.worldPosition0:Cc;if(c4.setFromNormalAndCoplanarPoint(qo,o),!!n.ray.intersectPlane(c4,t)&&(i==="x"||i==="y"||i==="z")){let l=za.subVectors(t,o).dot(Er);t.copy(o).addScaledVector(Er,l)}}updateDragItem(e,t=!1){var i,r;Cc.setFromMatrixPosition(e.obj.matrixWorld),e.reset==="current"?nf.subVectors(e.fromPosition,Cc).divideScalar(e.currentDampingFactor):e.reset==="original"?(nf.subVectors(e.obj.userData.worldPosition0,Cc).divideScalar(e.currentDampingFactor),e.fromPosition.copy(e.obj.userData.worldPosition0),e.pointStart.copy(e.fromPosition),e.pointEnd.copy(e.pointStart)):nf.subVectors(e.pointEnd,e.pointStart).add(e.fromPosition).sub(Cc).divideScalar(e.currentDampingFactor),e.paused=e.currentDampingFactor>1?nf.length()<Eye:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||t)&&Pye(e,nf.add(Cc),(i=this.activeEvent)!=null&&i.data.drop&&((r=this.activeEvent)!=null&&r.data.autoOrient)?e.orientationMatrix:null),e.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},rh=new V,Wx=new V,Dl=new V,Il=new V,h4=new hs,Oye=.01,Dye={type:"requestRender"},Iye=function(){let e=new V,t=new V;return(i,r,a)=>a>0?(e.subVectors(i,r),e.length()<=a?i:t.copy(r).add(e.normalize().multiplyScalar(a))):r}(),p4=function(){let e=new zt;return(t,i)=>{t.position.copy(i),t.parent!==null&&(e.copy(t.parent.matrixWorld).invert(),t.position.applyMatrix4(e)),e.copy(t.hiddenMatrix).invert(),t.position.applyMatrix4(e),t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),t instanceof ns&&Ql(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Lye=class{constructor(e,t,i,r,a,n){this.data=e,this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new V,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...s2.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=dn(e,e.actions,r,a,n,i)}},Bye=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.events=[],this.pairOfEventListeners=[],this.onMouseMove=i=>{if(!(Ni.length>1)){this.eventContext.updateRaycaster(i);for(let r of this.events)r.target===void 0&&this.updateSingleEvent(r)}},this.onMouseEnter=i=>{for(let r of this.events)r.target===void 0&&(r.isReset=!1,r.currentDampingFactor=r.data.dampingFactor)},this.onMouseLeave=i=>{for(let r of this.events)r.target===void 0&&(r.data.resetOnPointerLeave&&(r.isReset=!0,r.currentDampingFactor=r.resetDampingFactor),this.updateSingleEvent(r))},this.onTargetChange=i=>()=>{this.updateSingleEvent(i)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var a,n;let s=(a=r.data)==null?void 0:a.events.find(o=>o.data.type==="Follow"&&!o.data.disabled);s&&(!e.data.globalPhysics.usePhysics||((n=r.dataPatched.physics)==null?void 0:n.rigidBody)!=="dynamic")&&this.events.push(new Lye(s.data,s.id,r,e,this.eventContext.sharedAssets,this.eventManager))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ts&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let a=r.target,n=this.onTargetChange(r);this.pairOfEventListeners.push([a,n]),a.addEventListener("requestRender",n)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Ts&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let i of this.events)i.paused=!0,i.isReset=!1,an(i.actions)}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e,!0)}updateSingleEvent(e,t=!1){var i;this.events.forEach(o=>{o.actions.Create.forEach(l=>{l.dispatchThrottled()})});let{plane:r,limitDistance:a,limitDistanceEnabled:n}=e.data;if(e.object.getWorldPosition(Dl),e.isReset)Il.copy(e.worldPosition0);else if(e.target)e.target.getWorldPosition(Il);else{let{getCamera:o,raycaster:l}=this.eventContext;if(r==="custom"?(o().getWorldDirection(Wx),Wx.negate(),rh.copy(Wx)):r==="xy"?rh.set(0,0,1):r==="xz"?rh.set(0,1,0):r==="yz"&&rh.set(1,0,0),h4.setFromNormalAndCoplanarPoint(rh,Dl),!l.ray.intersectPlane(h4,Il))return}if(!e.isReset){if(Il.distanceTo(e.worldPosition0)>a&&n&&e.target)if(e.snapComplete=!1,e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Il.copy(e.worldPosition0),e.currentDampingFactor=e.resetDampingFactor;else return;else if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return}e.data.enabledTranslation[0]===!1&&(Il.x=Dl.x),e.data.enabledTranslation[1]===!1&&(Il.y=Dl.y),e.data.enabledTranslation[2]===!1&&(Il.z=Dl.z);let s=Iye(Dl,Il,e.wasOutside?0:e.data.maxDelta);if(e.currentDampingFactor>1){let o=rh.subVectors(s,Dl).divideScalar(e.currentDampingFactor);Dl.add(o),t&&p4(e.object,Dl),e.paused=o.length()<Oye}else p4(e.object,s),e.paused=!0;(i=e.object)==null||i.dispatchEvent({type:"beginEvent",eventName:"Follow"}),e.object.dispatchEvent(Dye)}},sf=new V,Cg=new V,of=new zt,ah=new Ui,Du=new Ui,lf=new V,uf=new V,_c=new V,Ll=new V,Hx=new hs,zye=1e-6,Rye={type:"requestRender"},Nye={type:"changeRotation"},f4=function(){let e=new zt;return function(t,i){t.parent!==null?e.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix):e.copy(t.hiddenMatrix),i.premultiply($8(e).invert()),t.rotation.setFromRotationMatrix(i),t.updateMatrix(),t instanceof ns&&Ql(t.parent)&&t.invalidateDownstreamBooleanData(!0)}}(),Vye=class{constructor(e,t,i,r){this.id=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Ui,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data={...o2.defaultData,...e,...e.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}},e.target===void 0||e.target==="cursor"||(this.target=r.find(e.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Fye=class extends _s{constructor(){super(...arguments),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=e=>{if(!(Ni.length>1)){this._lastMouseEvent=e,this.eventContext.updateRaycaster(e);for(let t of this.events)t.target===void 0&&this.updateSingleEvent(t)}},this.onMouseEnter=e=>{for(let t of this.events)t.target===void 0&&(t.isReset=!1,t.currentDampingFactor=t.data.dampingFactor)},this.onMouseLeave=e=>{for(let t of this.events)t.target===void 0&&(t.data.resetOnPointerLeave&&(t.isReset=!0,t.currentDampingFactor=t.resetDampingFactor),this.updateSingleEvent(t))},this.onScroll=e=>{if(this._lastMouseEvent){let t=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(t)}},this.onTargetChange=e=>()=>{this.updateSingleEvent(e)},this.createUserEventListener=e=>({eventName:t,target:i})=>{if(!t||!i)return;let r=qm(t);r&&r==="LookAt"&&this.updateSingleEvent(e)}}connect(){let{page:e}=this.eventContext;if(e.traverseEntity(r=>{var a,n;let s=(a=r.data)==null?void 0:a.events.find(o=>o.data.type==="LookAt"&&!o.data.disabled);s&&(!e.data.globalPhysics.usePhysics||((n=r.dataPatched.physics)==null?void 0:n.rigidBody)!=="dynamic")&&this.events.push(new Vye(s.data,s.id,r,e))}),!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Ts&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let s=this.onTargetChange(r),o=r.target;this.pairOfEventListeners.push([o,s]),o.addEventListener("requestRender",s)}let a=this.createUserEventListener(r),n=r.object;this.pairOfUserEventListeners.push([n,a]),n.addEventListener("userEvent",a)}}disconnect(){if(!this.events.length)return;let{domElement:e,eventElement:t}=this.eventContext;this.domEventsNeeded.clear(),Ts&&e.removeEventListener("pointerdown",this.onMouseMove),t.removeEventListener("pointermove",this.onMouseMove),e.removeEventListener("pointerenter",this.onMouseEnter),e.removeEventListener("pointerleave",this.onMouseLeave),t.removeEventListener("scroll",this.onScroll);for(let[i,r]of this.pairOfEventListeners)i.removeEventListener("requestRender",r);for(let[i,r]of this.pairOfUserEventListeners)i.removeEventListener("userEvent",r);for(let i of this.events)i.paused=!0,i.isReset=!1}onAnimationFrameDamping(){for(let e of this.events)e.paused||this.updateSingleEvent(e)}updateSingleEvent(e){var t;let{tilt:i,axis:r,distance:a,plane:n,limitDistance:s,enabledRotation:o,limitDistanceEnabled:l}=e.data,{getCamera:u,raycaster:c}=this.eventContext,{object:d,target:h}=e;if(d.getWorldPosition(lf),!e.isReset)if(e.target)e.target.getWorldPosition(uf);else{if(n==="custom"?(u().getWorldDirection(Cg),Cg.negate(),Hx.setFromNormalAndCoplanarPoint(Cg,lf)):(n==="xy"?sf.set(0,0,1):n==="xz"?sf.set(0,1,0):n==="yz"&&sf.set(1,0,0),Hx.setFromNormalAndCoplanarPoint(sf,lf)),!c.ray.intersectPlane(Hx,uf))return;a>0&&(n==="custom"||n===void 0)&&uf.addScaledVector(Cg,a)}if(e.isReset||(h?i==="target"?_c.copy(h.up).applyMatrix4(of.extractRotation(h.matrixWorld)).normalize():o.some(p=>p===!1)?(r==="x"?(Ll.set(0,0,1),o[2]===!1&&Ll.set(0,1,0)):r==="y"?(Ll.set(1,0,0),o[0]===!1&&Ll.set(0,0,1)):(Ll.set(0,1,0),o[1]===!1&&Ll.set(1,0,0)),_c.copy(Ll).applyQuaternion(e.worldQuaternion0).normalize()):_c.set(0,1,0):n==="custom"?_c.set(0,1,0):_c.copy(sf)),e.isReset)Du.copy(e.worldQuaternion0);else if(lf.distanceTo(uf)>s&&l&&h)if(e.data.snapDelay&&(e.delayFinished=!1,typeof window<"u"&&e.timeoutId!==null&&(window.clearTimeout(e.timeoutId),e.timeoutId=null)),e.wasOutside=!0,e.data.resetAfterDistanceLimit)Du.copy(e.worldQuaternion0),e.currentDampingFactor=e.resetDampingFactor;else return;else{if(e.wasOutside&&(e.data.snapDelay&&typeof window<"u"&&(e.timeoutId=window.setTimeout(()=>{e.delayFinished=!0,e.paused=!1,this.updateSingleEvent(e)},e.data.snapDelay*1e3)),e.currentDampingFactor=e.data.dampingFactor,e.wasOutside=!1),e.delayFinished===!1)return;jye(of,uf,lf,_c,r,Ll),Du.setFromRotationMatrix(of),ah.setFromUnitVectors(Ll.applyQuaternion(Du),_c),o.some(p=>p===!1)&&i!=="target"&&Du.premultiply(ah).normalize()}e.currentDampingFactor>1?(d.updateWorldMatrix(!0,!1),ah.setFromRotationMatrix($8(d.matrixWorld)),ah.slerp(Du,1/e.currentDampingFactor),f4(d,of.makeRotationFromQuaternion(ah)),e.paused=8*(1-ah.dot(Du))<zye):(f4(d,of.makeRotationFromQuaternion(Du)),e.paused=!0),(t=e.object)==null||t.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),d.dispatchEvent(Rye),d.dispatchEvent(Nye)}},Vs=new V,Ba=new V,ma=new V;function jye(e,t,i,r,a,n){let s=e.elements;ma.subVectors(t,i),ma.lengthSq()===0&&(ma.z=1),ma.normalize(),Ba.crossVectors(r,ma),Ba.lengthSq()===0&&(Math.abs(r.z)===1?ma.x+=1e-4:ma.z+=1e-4,ma.normalize(),Ba.crossVectors(r,ma)),Ba.normalize(),Vs.crossVectors(ma,Ba),a==="x"?n.z===1?[Ba,Vs,ma]=[ma,Ba,Vs]:(Ba.negate(),[Ba,ma]=[ma,Ba]):a==="y"?n.x===1?[Ba,Vs,ma]=[Vs,ma,Ba]:(Ba.negate(),[Vs,ma]=[ma,Vs]):n.x===1&&(Ba.negate(),[Ba,Vs]=[Vs,Ba]),s[0]=Ba.x,s[4]=Vs.x,s[8]=ma.x,s[1]=Ba.y,s[5]=Vs.y,s[9]=ma.y,s[2]=Ba.z,s[6]=Vs.z,s[10]=ma.z}var $ye=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.entered=!1,this.actions=dn(t,t.actions,r,a,n,i)}disconnect(){an(this.actions)}dispatchEnter(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(e=>e.playFromCurrent()),this.actions.Animation.forEach(e=>e.play()),this.actions.Create.forEach(e=>e.dispatchStart()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.SwitchCamera.forEach(e=>e.playFromCurrent()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.entered&&(this.entered=!1,this.actions.Create.forEach(e=>e.dispatchStop()),this.actions.Transition.forEach(e=>e.reverseFromCurrent()),this.actions.Particles.forEach(e=>e.reverseFromCurrent()),this.actions.SwitchCamera.forEach(e=>e.reverseFromCurrent()))}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Particles.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Particles.forEach(t=>t.dispatchBasic()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Uye=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObjects={},this.objects=[],this.objects2D=[],this._prevObjects=[],this.onMouseDown=i=>{Ni.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onMouseUp=i=>{Ni.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=i=>{Ni.length>1||(this.eventContext.updateRaycaster(i),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:i,target:r,reverse:a})=>{var n;if(!i||!r)return;let s=qm(i);s&&s==="MouseHover"&&(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(n=this.eventsPerObjects[r.uuid])==null||n.forEach(o=>o.dispatchUserEvent(a)))}}connect(){let{page:e,sharedAssets:t}=this.eventContext,i=(a,n)=>{var s,o;if(!(!a.visible||!((s=a.data)!=null&&s.events.length))){for(let{id:l,data:u}of a.data.events)if(!u.disabled&&u.type==="MouseHover")try{let c=new $ye(l,u,a,e,t,this.eventManager);this.eventsPerObjects[a.uuid]?this.eventsPerObjects[a.uuid].push(c):this.eventsPerObjects[a.uuid]=[c]}catch{}(o=this.eventsPerObjects[a.uuid])!=null&&o.length&&this.objects.push(a instanceof nn?n:a)}};if(e.traverseEntity(a=>{var n;(a instanceof zn||a instanceof Za)&&((n=a.frame)==null||n.traverse(s=>{i(s,a)})),i(a)}),!this.objects.length)return;let{domElement:r}=this.eventContext;this.domEventsNeeded.clear(),Ts&&(this.domEventsNeeded.add("pointerdown"),r.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),r.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),r.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(a=>{a.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:e}=this.eventContext;this.domEventsNeeded.clear(),Ts&&(e.removeEventListener("pointerdown",this.onMouseDown),e.removeEventListener("pointerup",this.onMouseUp)),e.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(t=>{t.forEach(i=>{i.disconnect()})}),this.objects.forEach(t=>{t.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(e=!1){let t=[];if(!e){let{stopRaycast:i,raycaster:r,page:a,pointerScreen:n}=this.eventContext,s=!1;if(a.uiCanvas&&(s=Ul(a,[n.x,n.y],Object.keys(this.eventsPerObjects),o=>{t.push(o)})),i&&!s){let o=r0(r,a,this.objects);t=TM(o),o.forEach(l=>{var u,c;l.object instanceof zn&&Ul(l.object,[((u=l?.uv)==null?void 0:u.x)??0,((c=l?.uv)==null?void 0:c.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)})})}else this.objects.forEach(o=>{var l,u;let c=nb(r,o);c&&(t.push(o),o instanceof zn&&Ul(o,[((l=c?.uv)==null?void 0:l.x)??0,((u=c?.uv)==null?void 0:u.y)??0],Object.keys(this.eventsPerObjects),d=>{t.push(d)}))})}this._prevObjects.length&&this._prevObjects.forEach(i=>{var r;t.includes(i)||(i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(a=>a.dispatchLeave()))}),t.length&&t.forEach(i=>{var r;i.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(r=this.eventsPerObjects[i.uuid])==null||r.forEach(a=>a.dispatchEnter())}),this._prevObjects=t}},Wye=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.scrollCounter=0,this.actions=dn(t,t.actions,r,a,n,i)}connect(){this.scrollCounter=0}disconnect(){an(this.actions)}dispatch(e){this.actions.Transition.forEach(r=>{r.object.currentTransitionEvent!==this&&(r.object.currentTransitionEvent=this,r.init())});let t=e>0?1:-1;this.scrollCounter+=t,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let i=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(r=>r.seek(i)),this.actions.Animation.forEach(r=>r.seek(t)),this.actions.Create.forEach(r=>r.dispatchThrottled()),this.actions.SetVariable.forEach(r=>r.checkConditions()),this.actions.SetVariable.forEach(r=>r.dispatch()),this.actions.DynamicVariablePlay.forEach(r=>r.dispatch()),this.actions.ClearLocalStorage.forEach(r=>r.dispatch()),this.actions.UserAPI.forEach(r=>r.dispatch())}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Hye=class{constructor(e,t,i,r,a,n,s){this.id=e,this.data=t,this.object=i,this.domElement=n,this.eventManager=s,this.scrollStart=0,this.scrollEnd=0,this.actions=dn(t,t.actions,r,a,s,i)}getStickyParentElement(){let e=this.domElement;for(;e;){if(window.getComputedStyle(e).position==="sticky")return e;e=e.parentElement}return null}computeScrollBounds(){let e=this.getStickyParentElement(),t=e?.parentElement,i=this.domElement.getBoundingClientRect(),r={top:i.top,bottom:i.bottom,left:i.left,right:i.right,width:i.width,height:i.height};if(t){let u=t.getBoundingClientRect(),c=window.getComputedStyle(e),d=parseFloat(c.marginTop)+parseFloat(c.marginBottom),h=parseFloat(c.top),p=parseFloat(c.bottom),f=u.height-d;if(!isNaN(h))i.top===h?(r.top+=u.top-h,r.bottom+=u.top-h):i.top<0&&(r.top-=f-i.height,r.bottom-=f-i.height);else if(!isNaN(p)){let v=document.body.clientHeight??window.innerHeight,m=window.innerWidth-(document.documentElement.clientWidth??window.innerWidth);i.bottom===v-p?(r.top+=u.top-i.height+p+m,r.bottom+=u.top-i.height+p+m):i.bottom<v-p&&(r.top-=f-i.height,r.bottom-=f-i.height)}}let a=document.body,n=document.documentElement,s=window.pageYOffset||n.scrollTop||a.scrollTop,o=n.clientTop||a.clientTop||0,l=Math.round(r.top+s-o);if(this.data.startFrom==="enter"){let u=window.innerHeight,c=r.height,d=this.data.enterAnchor,h=d==="top"?u:d==="bottom"?u-c:u-c*.5;this.scrollStart=l-h}else this.scrollStart=0;this.scrollStart+=this.data.startOffset??0,this.scrollEnd=this.scrollStart+(this.data.endAfter??400),this.box=r,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){an(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:e,y:t}){this.actions.Transition.forEach(a=>{a.object.currentTransitionEvent!==this&&(a.object.currentTransitionEvent=this,a.init())});let i=this.scrollEnd-this.scrollStart,r=Math.min(1,Math.max(0,(t-this.scrollStart)/i));this.actions.Transition.forEach(a=>a.seek(r)),this.actions.Animation.forEach(a=>a.seek(r)),this.actions.Create.forEach(a=>a.dispatchThrottled()),this.actions.SetVariable.forEach(a=>a.checkConditions()),this.actions.SetVariable.forEach(a=>a.dispatch()),this.actions.DynamicVariablePlay.forEach(a=>a.dispatch()),this.actions.ClearLocalStorage.forEach(a=>a.dispatch()),this.actions.UserAPI.forEach(a=>a.dispatch())}dispatch(e){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(e)}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>{t.playFromCurrent()}),this.actions.Animation.forEach(t=>{t.playFromCurrent()})),this.actions.Create.forEach(t=>t.dispatchThrottled()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch())}},Gye=class extends _s{constructor(e,t){super(e),this.managers=t,this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([i,r])=>{r.forEach(a=>a.handleResize())})},this.onScroll=i=>{if(!this.isInview)return;let r={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([a,n])=>{a.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:r}),n.forEach(s=>s.dispatch(r))})},this.onWheel=i=>{!this.isInview||i.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([r,a])=>{r.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:i.deltaY}),a.forEach(n=>n.dispatch(i.deltaY))})},this.onUserEvent=({eventName:i,target:r,reverse:a})=>{var n;if(!i||!r)return;let s=qm(i);s&&s==="Scroll"&&(r.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(n=this.wheelEventsPerObject.get(r))==null||n.forEach(o=>{o.dispatchUserEvent(a)}))}}connect(){let{page:e,sharedAssets:t,domElement:i,isExport:r}=this.eventContext,a=n=>{var s,o,l;if((s=n.data)!=null&&s.events.length){for(let{id:u,data:c}of n.data.events)if(!c.disabled&&c.type==="Scroll")if(c.trigger==="load"||!r){let d=new Wye(u,c,n,e,t,this.managers);this.wheelEventsPerObject.has(n)?(o=this.wheelEventsPerObject.get(n))==null||o.push(d):this.wheelEventsPerObject.set(n,[d])}else{let d=new Hye(u,c,n,e,t,i,this.managers);this.scrollEventsPerObject.has(n)?(l=this.scrollEventsPerObject.get(n))==null||l.push(d):this.scrollEventsPerObject.set(n,[d])}}};e.traverseEntity(n=>{var s;(n instanceof zn||n instanceof Za)&&((s=n.frame)==null||s.traverse(o=>{a(o)})),a(n)}),this.intersectionObserver=new IntersectionObserver(n=>{let s=n[0];s&&(this.isInview=s.isIntersecting)},{root:null}),this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([n,s])=>{s.forEach(o=>o.connect()),n.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([n,s])=>{s.forEach(o=>o.connect()),n.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(n=>n.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(n=>n.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([e,t])=>{t.forEach(i=>i.disconnect()),e.removeEventListener("userEvent",this.onUserEvent)})}},qye=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.actions=dn(t,t.actions,r,a,n,i)}disconnect(){an(this.actions)}dispatch(){this.actions.Transition.forEach(e=>{e.play()}),this.actions.Animation.forEach(e=>{e.play()}),this.actions.SwitchCamera.forEach(e=>{e.play()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()),this.actions.Create.forEach(e=>{e.dispatchFromStart()}),this.actions.Destroy.forEach(e=>{e.dispatchFromStart()})}dispatchAfter(e){this.actions.Audio.forEach(t=>{(t.interaction.data.triggerAfter??"any")===e&&(t.interaction instanceof Gc?t.interaction.audioPlayer.play():t.interaction instanceof CM&&t.interaction.dispatch())}),this.actions.Video.forEach(t=>{let i=t.interaction.data.triggerAfter??"autoplay";i===e&&(t.interaction instanceof Nh?t.interaction.play(i==="autoplay"):t.interaction instanceof AM&&t.interaction.dispatch())}),this.actions.Particles.forEach(t=>{(t.data.triggerAfter??"any")===e&&t.dispatchBasic()})}dispatchUserEvent(e){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),e?(this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent())):(this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.playFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent())),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch()}),this.actions.Audio.forEach(t=>{t.interaction instanceof Gc?t.interaction.audioPlayer.play():t.interaction instanceof CM&&t.interaction.dispatch()}),this.actions.Video.forEach(t=>{t.interaction instanceof Nh?t.interaction.play():t.interaction instanceof AM&&t.interaction.dispatch()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()})}},Yye=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(a=>{a.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(a=>{a.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:i,isExport:r}=this.eventContext,a=r?document:i;a.removeEventListener("pointerdown",this.onAny),a.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([n,s])=>{n.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(o=>{o.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(a=>{a.actions.Audio.forEach(n=>{n.interaction instanceof Gc&&n.interaction.audioPlayer.play()}),a.actions.Video.forEach(n=>{let s=n.interaction.data.triggerAfter??"autoplay";n.interaction instanceof Nh&&n.interaction.play(s==="autoplay")}),a.actions.Particles.forEach(n=>{n.dispatchBasic()})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([i,r])=>{i.dispatchEvent({type:"beginEvent",eventName:"Start"}),r.forEach(a=>{a.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:i,target:r,reverse:a})=>{var n,s;if(!i||!r)return;let o=qm(i);o&&o==="Start"&&(r instanceof nn||r.dispatchEvent({type:"beginEvent",eventName:"Start"}),(n=this.eventsPerObject.get(r))==null||n.forEach(l=>{l.dispatchUserEvent(a)}),(s=this.eventsAfterPerObject.get(r))==null||s.forEach(l=>{l.dispatchUserEvent(a)}))}}connect(){let{sharedAssets:e,page:t}=this.eventContext,i=r=>{var a,n,s,o,l;if((a=r.data)!=null&&a.events.length)for(let{id:u,data:c}of r.data.events){if(c.disabled||c.type!=="Start")continue;let d=new qye(u,c,r,t,e,this.eventManager);(d.actions.Transition.length||d.actions.Animation.length||d.actions.SwitchCamera.length||d.actions.Create.length||d.actions.Destroy.length||d.actions.SceneTransition.length||d.actions.Reset.length||d.actions.SetVariable.length||d.actions.DynamicVariablePlay.length||d.actions.ClearLocalStorage.length||d.actions.UserAPI.length)&&(this.eventsPerObject.has(r)?(n=this.eventsPerObject.get(r))==null||n.push(d):this.eventsPerObject.set(r,[d])),d.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(s=this.eventsAfterPerObject.get(r))==null||s.push(d):this.eventsAfterPerObject.set(r,[d])),d.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(o=this.eventsAfterPerObject.get(r))==null||o.push(d):this.eventsAfterPerObject.set(r,[d])),d.actions.Particles.length&&(this.eventsAfterPerObject.has(r)?(l=this.eventsAfterPerObject.get(r))==null||l.push(d):this.eventsAfterPerObject.set(r,[d]))}};if(t.traverseEntity(r=>{var a;(r instanceof zn||r instanceof Za)&&((a=r.frame)==null||a.traverse(n=>{i(n)})),i(r)}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:a}=this.eventContext,n=a?document:r;n.addEventListener("pointerdown",this.onMouseDown,{once:!0}),n.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),n.addEventListener("pointerdown",this.onAny),n.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,o])=>{s.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,a])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),a.forEach(n=>n.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(e=>e.length)){let{domElement:e,isExport:t}=this.eventContext,i=t?document:e;i.removeEventListener("pointerdown",this.onMouseDown),i.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),i.removeEventListener("pointerdown",this.onAny),i.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([r,a])=>{r.removeEventListener("userEvent",this.onUserEvent),a.forEach(n=>n.disconnect())})}[...this.eventsPerObject.entries()].forEach(([e,t])=>{e.removeEventListener("userEvent",this.onUserEvent),t.forEach(i=>i.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},Xye=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.initialDisabled=!1,this.actions=dn(t,t.actions,r,a,n,i),this.target=t.target}disconnect(){an(this.actions)}dispatch(e){this.initialDisabled||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.actions.Transition.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Animation.forEach(t=>{t.data.runMode==="Toggle"?t.toggle():t.play()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(e??!1)}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Particles.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.ClearLocalStorage.forEach(t=>t.dispatch()),this.actions.UserAPI.forEach(t=>t.dispatch()))}},Kye=class extends _s{constructor(e,t,i,r,a){super(e),this.sharedVariables=t,this.eventManager=i,this.needsMouse=r,this.needsRaycast=a,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.isOutOfFocus=!1,this.events=[],this.onFrame=n=>{let s=this.eventContext.sharedAssets;if(this.rafId=window.requestAnimationFrame(this.onFrame),this.isOutOfFocus)return;let o=new Date,l=[],u=[];for(let h=0;h<this.propertiesToWatch.length;h++){let{objectId:p,property:f,prevValue:v}=this.propertiesToWatch[h],m=this.eventContext.scene.find(p),g=u2.propertyPaths[f];if(g[0]==="width"||g[0]==="height"||g[0]==="depth")m=m.geometry.userData.parameters[g[0]];else for(let y=0;y<g.length;y++)m=m[g[y]];v===null?this.propertiesToWatch[h].prevValue=m instanceof V?m.clone():m:(m instanceof V?!m.equals(v):v!==m)&&(u.push({objId:p,property:f}),m instanceof V?this.propertiesToWatch[h].prevValue.copy(m):this.propertiesToWatch[h].prevValue=m)}for(let h=0;h<this.variablesToWatch.length;h++){let{id:p,prevValue:f}=this.variablesToWatch[h],v=s.getVariable(p);v!==f&&(l.push(p),this.variablesToWatch[h].prevValue=v)}for(let h=0;h<this.dynamicVars.length;h++){let{id:p,expectedTime:f,last:v,data:m,timerSeconds:g,startValue:y}=this.dynamicVars[h],b=1e3;if((m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&m.format==="number3decimal"?b=1:m.dynamicVariableType==="counter"?b=m.updateInterval:m.dynamicVariableType==="random"&&(b=m.isStatic?1/0:m.updateInterval),f===-1){this.dynamicVars[h].last=n,this.dynamicVars[h].expectedTime=n+b;continue}if(!((s.getDynamicVariablePlayState(p)==="Stopped"||s.getDynamicVariablePlayState(p)==="Restarted")&&(this.dynamicVars[h].last=n,this.dynamicVars[h].expectedTime=n+b,m.dynamicVariableType==="counter"&&s.getVariable(p)!==y&&(s.updateVariable(p,y),this.eventManager.requestRender()),(m.dynamicVariableType==="timer"||m.dynamicVariableType==="stopwatch")&&this.dynamicVars[h].timerSeconds!==y&&(this.dynamicVars[h].timerSeconds=y,s.updateVariable(p,Us.getFormattedTimerTime(y,m)),this.eventManager.requestRender()),s.getDynamicVariablePlayState(p)==="Restarted"&&s.setDynamicVariablePlayState(p,"Playing"),s.getDynamicVariablePlayState(p)==="Stopped"))){if(s.getDynamicVariablePlayState(p)==="Paused"){this.dynamicVars[h].deltaToExpectedTime===void 0&&(this.dynamicVars[h].deltaToExpectedTime=Math.max(this.dynamicVars[h].expectedTime-n,0)),this.dynamicVars[h].last=n-(b-this.dynamicVars[h].deltaToExpectedTime),this.dynamicVars[h].expectedTime=n+this.dynamicVars[h].deltaToExpectedTime;continue}else this.dynamicVars[h].deltaToExpectedTime=void 0;if(n>=f)if(this.dynamicVars[h].last=n,this.dynamicVars[h].expectedTime+=b,m.dynamicVariableType==="random"){let x=m.min+Math.random()*(m.max-m.min),S=m.decimals;x=Math.round(x*Math.pow(10,S))/Math.pow(10,S),s.updateVariable(p,x),l.push(p),this.eventManager.requestRender()}else if(m.dynamicVariableType==="counter"){let x=s.getVariable(p),S=s.getDynamicVariableToggleIsForward(p)??!0,w=s.getVariable(p)+m.increment*(S?1:-1);m.hasEnd&&(w=m.increment>0?li.clamp(w,y,m.endValue):li.clamp(w,m.endValue,y),w===y&&s.setDynamicVariableToggleIsForward(p,void 0),m.repeat?w===m.endValue&&(w=y):(w===y||w===m.endValue)&&s.setDynamicVariablePlayState(p,"Paused")),w!==x&&(l.push(p),s.updateVariable(p,w),this.eventManager.requestRender())}else if(m.dynamicVariableType==="time"){let x=s.getVariable(p),S=DD(o,m);if(typeof x=="object"&&"textValue"in x&&typeof S=="object"&&"textValue"in S){if(Array.isArray(x.textValue)&&Array.isArray(S.textValue)){if(x.textValue.every((w,E)=>w===S.textValue[E]))continue}else if(x.textValue===S.textValue)continue}else if(x===S)continue;s.updateVariable(p,S),l.push(p),this.eventManager.requestRender()}else{let x=_n.isTextValue(m.endValue)?m4(m.endValue.textValue):m.endValue,S=s.getDynamicVariableToggleIsForward(p)??!0,w=g+(n-v)/1e3*(m.dynamicVariableType==="timer"?-1:1)*(S?1:-1);w=Math.max(w,0),m.hasEnd&&(w=m.dynamicVariableType==="stopwatch"?li.clamp(w,y,x):li.clamp(w,x,y),w===y&&s.setDynamicVariableToggleIsForward(p,void 0),m.repeat?Math.abs(w-x)<(m.format==="number3decimal"?1e-4:.1)&&(w=y):(Math.abs(w-y)<(m.format==="number3decimal"?1e-4:.1)||Math.abs(w-x)<(m.format==="number3decimal"?1e-4:.1))&&s.setDynamicVariablePlayState(p,"Paused")),w!==g&&(l.push(p),this.dynamicVars[h].timerSeconds=w,s.updateVariable(p,Us.getFormattedTimerTime(w,m)),this.eventManager.requestRender())}}}let c=!1;s.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=s.mouseProperty,c=!0);let d=!1;s.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=s.raycastProperty,d=!0),this.events.forEach(h=>{(l.includes(h.data.variableId)||u.find(p=>p.objId===h.data.objectId&&p.property===h.data.property)||h.data.variableId==="mouseProperty"&&c||h.data.variableId==="raycastProperty"&&d)&&(h.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()}}pause(){this.isOutOfFocus||(this.isOutOfFocus=!0,this.pauseTime=Date.now())}resume(){if(!this.isOutOfFocus)return;this.isOutOfFocus=!1;let e=Date.now()-this.pauseTime;for(let t=0;t<this.dynamicVars.length;t++)this.dynamicVars[t].last+=e,this.dynamicVars[t].expectedTime+=e}connect(){this.eventContext.page.traverseEntity(t=>{var i;(i=t.data)==null||i.events.filter(r=>r.data.type==="VariableChange"&&!r.data.disabled).forEach(r=>{this.events.push(new Zye(r.id,r.data,t,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),this.propertiesToWatch=this.events.filter(t=>t.data.variableId==="objectProperty"&&t.data.objectId!==null).map(t=>({objectId:t.data.objectId,property:t.data.property,prevValue:null}));let e=this.eventContext.sharedAssets;this.sharedVariables.forEach(({id:t,data:i})=>{if(!("dynamicVariableType"in i)){this.events.find(a=>a.data.variableId===t)&&this.variablesToWatch.push({id:t,prevValue:e.getVariable(t)});return}let r;if(i.dynamicVariableType==="timer"||i.dynamicVariableType==="stopwatch"){let a;if(_n.isTextValue(i.value)&&Array.isArray(i.value.textValue)){let n=i.value.textValue;n.length===3?a=n[2]+n[1]*60+n[0]*3600:a=n[1]+n[0]*60}else a=i.value;r=a,this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,timerSeconds:a,startValue:r})}else i.dynamicVariableType==="time"&&e.updateVariable(t,DD(new Date,i)),i.dynamicVariableType==="counter"&&(r=_n.isTextValue(i.value)?m4(i.value.textValue):i.value),this.dynamicVars.push({id:t,last:-1,expectedTime:-1,data:i,startValue:r})}),this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(e=>e.dispose())}},Zye=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.actions=dn(t,t.actions,r,a,n,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}dispose(){an(this.actions)}};function m4(e){return e.length===3?e[2]+e[1]*60+e[0]*3600:e[1]+e[0]*60}var Qye="https://unpkg.com/@splinetool/runtime@1.9.31/build/",Jye="https://unpkg.com/@splinetool/navmesh-wasm@1.9.31/build/",ebe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${Qye}' + 'navmesh.js'),
		fetch('${Jye}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,tbe=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,ibe=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,rbe=.001,abe={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},Y8,cr,gn;Moe.then(e=>{Y8=e,cr=new e.Vec3,gn=new e.Vec3});var nbe=new V,sbe=class{constructor(e=!1,t=!1){this.usePhysics=e,this.isExport=t,this.onPointerDown=i=>{if(Ni.length!==1)return;let{raycaster:r,page:a}=this.eventContext;this.eventContext.updateRaycaster(i);let n=a.raycastWithClones(r);if(n.length!==0){if(this.gameControl){let s=nbe.copy(this.gameControl.colliderWorldPosition);s.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(s,n[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(i,r)=>a=>{var n,s,o,l,u,c,d;let h;if(a instanceof So)if(a.objectForSample){if(a.objectForSample.dataPatched.physics.fusedBody)return;h=a.object}else return a.object.dataPatched.physics.fusedBody===!0&&a.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(a instanceof Nn)h=a.object;else if(h=a,((n=h.dataPatched.cloner)==null?void 0:n.disabled)===!1&&((s=h.dataPatched.cloner)==null?void 0:s.hideBase)&&((o=h.dataPatched.physics)==null?void 0:o.fusedBody)!==!0)return!0;if(r&&!h.userData.navmesh)return;let p=h.dataPatched;if(!p.visible&&((l=p.physics)==null?void 0:l.enabled)!==!0)return!0;a.updateMatrixWorldSVD();let f=sb(p),v=h.userData.hasDestroy,m=h.userData.hasDrag,g=!1,y=!1;for(let b of p.events)b.data.disabled!==!0&&(b.data.type==="GameControl"?g=!0:b.data.type==="Follow"&&(y=!0));if(g||f||y||v||m)return!0;if(this.usePhysics&&((u=p.physics)==null?void 0:u.rigidBody)==="dynamic"){if(this.usePhysics&&((c=p.physics)!=null&&c.fusedBody))return!0}else if("geometry"in a&&a.geometry&&i.push($l(a.geometry,a.matrixWorld)),this.usePhysics&&((d=p.physics)==null?void 0:d.fusedBody))return a.traverseObject((b,x)=>{var S,w;if(x===0)return;let E;if(b instanceof So)if(b.objectForSample){if(b.objectForSample.dataPatched.physics.fusedBody)return;E=b.object}else return b.object.dataPatched.physics.fusedBody===!0&&b.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(b instanceof Nn)E=b.object;else if(E=b,(S=b.dataPatched.cloner)==null?void 0:S.hideBase)return!0;let M=E.dataPatched;if(!M.visible&&((w=M.physics)==null?void 0:w.enabled)!==!0)return!0;"geometry"in b&&b.geometry&&i.push($l(b.geometry,b.matrixWorld))}),!0},this.traverseNoPhysics=(i,r)=>a=>{let n;if(a instanceof So)return;a instanceof Nn?n=a.object:n=a;let s=n.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;if(r&&!n.userData.navmesh)return;let o=a.geometry,l=n.userData.hasDestroy===!0,u=n.userData.hasDrag===!0;if(sb(s)||l||u||n.dataPatched.events.some(c=>c.data.disabled!==!0&&c.data.type==="GameControl"))return!0;o&&i.push($l(o,a.matrixWorld))},this.navmeshWasm=Y8,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(t?ebe:tbe)+ibe])),this._worker=new Worker(this._workerURL)}init(e,t,i){this.gameControl=t,this.eventContext=i,this.setDefaultQueryExtent(new V().setScalar(e.ch*e.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(i.page,e,r=>{this.buildFromNavmeshData(r.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(e,t,i){t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=!0}),(u=c.cloner)==null||u.traverseObject(d=>{d.userData.navmesh=!0})});let r=[],a=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(r,t.zones==="custom");if(e.traverseChildren(a),t.objects.forEach(l=>{var u;let c=e.scene.find(l);c.traverseEntity(d=>{d.userData.navmesh=void 0}),(u=c.cloner)==null||u.traverseObject(d=>{d.userData.navmesh=void 0})}),r.length===0)return!1;let n=Hc(r),{positions:s,triIndices:o}=e1(n.getAttribute("position"),n.getIndex());return this._worker.postMessage([s,s.length/3,o,o.length,{...abe,...t}]),this._worker.onmessage=i,!0}createDebugNavGeometry(){let e,t,i=this.navMesh.getDebugNavMesh(),r=i.getTriangleCount(),a=new Uint32Array(r*3),n=new Float32Array(r*3*3);for(e=0;e<r*3;e++)a[e]=e;for(e=0;e<r;e++)for(t=0;t<3;t++){let o=i.getTriangle(e).getPoint(t);n[e*9+t*3+0]=o.x,n[e*9+t*3+1]=o.y,n[e*9+t*3+2]=o.z}let s=new Mi;return s.setIndex(new ji(a,1)),s.setAttribute("position",new ji(n,3)),s}getClosestPoint(e){return cr.x=e.x,cr.y=e.y,cr.z=e.z,this.navMesh.getClosestPoint(cr)}getClosestPointToRef(e,t){cr.x=e.x,cr.y=e.y,cr.z=e.z;let i=this.navMesh.getClosestPoint(cr);t.set(i.x,i.y,i.z)}getRandomPointAround(e,t){return cr.x=e.x,cr.y=e.y,cr.z=e.z,this.navMesh.getRandomPointAround(cr,t)}getRandomPointAroundToRef(e,t,i){cr.x=e.x,cr.y=e.y,cr.z=e.z;let r=this.navMesh.getRandomPointAround(cr,t);i.set(r.x,r.y,r.z)}moveAlong(e,t){return cr.x=e.x,cr.y=e.y,cr.z=e.z,gn.x=t.x,gn.y=t.y,gn.z=t.z,this.navMesh.moveAlong(cr,gn)}moveAlongToRef(e,t,i){return cr.x=e.x,cr.y=e.y,cr.z=e.z,gn.x=t.x,gn.y=t.y,gn.z=t.z,this.navMesh.moveAlong(cr,gn)}computePath(e,t){let i=this.getClosestPoint(t);if(gn.x=i.x,gn.y=i.y,gn.z=i.z,Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2)+Math.pow(t.z-i.z,2))>this.getDefaultQueryExtent().y)return[];this.getClosestPoint(e);let r=this.navMesh.computePath(cr,gn),a=r.getPointCount(),n=[];for(let s=0;s<a;s++){let o=r.getPoint(s);n.push(new V(o.x,o.y,o.z))}return n}createCrowd(e,t){return new obe(this,e,t)}setDefaultQueryExtent(e){cr.x=e.x,cr.y=e.y,cr.z=e.z,this.navMesh.setDefaultQueryExtent(cr)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(e){let t=e.length*e.BYTES_PER_ELEMENT,i=this.navmeshWasm._malloc(t),r=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,i,t);r.set(e);let a=new this.navmeshWasm.NavmeshData;a.dataPointer=r.byteOffset,a.size=e.length,this.navMesh.buildFromNavmeshData(a),this.navmeshWasm._free(r.byteOffset)}getNavmeshData(){let e=this.navMesh.getNavmeshData(),t=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,e.dataPointer,e.size),i=new Uint8Array(e.size);return i.set(t),this.navMesh.freeNavmeshData(e),i}getDefaultQueryExtentToRef(e){let t=this.navMesh.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}dispose(){var e;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(e=this.eventContext)==null||e.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(e,t,i){return cr.x=e.x,cr.y=e.y,cr.z=e.z,this.navMesh.addCylinderObstacle(cr,t,i)}addBoxObstacle(e,t,i){return cr.x=e.x,cr.y=e.y,cr.z=e.z,gn.x=t.x,gn.y=t.y,gn.z=t.z,this.navMesh.addBoxObstacle(cr,gn,i)}removeObstacle(e){this.navMesh.removeObstacle(e)}isSupported(){return this.navmeshWasm!==void 0}},obe=class{constructor(e,t,i){this.navmeshWasmWrapper=e,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(t,i,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(e,t){}addAgent(e,t,i){let r=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;r.radius=t.radius,r.height=t.height,r.maxAcceleration=t.maxAcceleration,r.maxSpeed=t.maxSpeed,r.collisionQueryRange=t.collisionQueryRange,r.pathOptimizationRange=t.pathOptimizationRange,r.separationWeight=t.separationWeight,r.updateFlags=7,r.obstacleAvoidanceType=0,r.queryFilterType=0,r.userData=0;let a=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z),r);return this.transforms.push(i),this.agents.push(a),this.reachRadii.push(t.reachRadius?t.reachRadius:t.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new V(0,0,0)),a}getAgentPosition(e){return this.crowd.getAgentPosition(e)}getAgentPositionToRef(e,t){let i=this.crowd.getAgentPosition(e);t.set(i.x,i.y,i.z)}getAgentVelocity(e){return this.crowd.getAgentVelocity(e)}getAgentVelocityToRef(e,t){let i=this.crowd.getAgentVelocity(e);t.set(i.x,i.y,i.z)}getAgentNextTargetPath(e){return this.crowd.getAgentNextTargetPath(e)}getAgentNextTargetPathToRef(e,t){let i=this.crowd.getAgentNextTargetPath(e);t.set(i.x,i.y,i.z)}getAgentState(e){return this.crowd.getAgentState(e)}overOffmeshConnection(e){return this.crowd.overOffmeshConnection(e)}agentGoto(e,t){this.crowd.agentGoto(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z));let i=this.agents.indexOf(e);i>-1&&(this._agentDestinationArmed[i]=!0,this._agentDestination[i].set(t.x,t.y,t.z))}agentTeleport(e,t){this.crowd.agentTeleport(e,new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z))}updateAgentParameters(e,t){let i=this.crowd.getAgentParameters(e);t.radius!==void 0&&(i.radius=t.radius),t.height!==void 0&&(i.height=t.height),t.maxAcceleration!==void 0&&(i.maxAcceleration=t.maxAcceleration),t.maxSpeed!==void 0&&(i.maxSpeed=t.maxSpeed),t.collisionQueryRange!==void 0&&(i.collisionQueryRange=t.collisionQueryRange),t.pathOptimizationRange!==void 0&&(i.pathOptimizationRange=t.pathOptimizationRange),t.separationWeight!==void 0&&(i.separationWeight=t.separationWeight),this.crowd.setAgentParameters(e,i)}removeAgent(e){this.crowd.removeAgent(e);let t=this.agents.indexOf(e);t>-1&&(this.agents.splice(t,1),this.transforms.splice(t,1),this.reachRadii.splice(t,1),this._agentDestinationArmed.splice(t,1),this._agentDestination.splice(t,1))}getAgents(){return this.agents}update(e){if(this.navmeshWasmWrapper.navMesh.update(),e<=rbe)return;let t=1/60,i=10;{let r=Math.floor(e/t);r>i&&(r=i),r<1&&(r=1);let a=e/r;for(let n=0;n<r;n++)this.crowd.update(a)}for(let r=0;r<this.agents.length;r++){let a=this.agents[r],n=this.getAgentPosition(a);if(this.transforms[r].copy(n),this._agentDestinationArmed[r]){let s=n.x-this._agentDestination[r].x,o=n.z-this._agentDestination[r].z,l=this.reachRadii[r],u=this._agentDestination[r].y-this.reachRadii[r],c=this._agentDestination[r].y+this.reachRadii[r],d=s*s+o*o;n.y>u&&n.y<c&&d<l*l&&(this.onReachTarget(a,this._agentDestination[r]),this._agentDestinationArmed[r]=!1)}}}setDefaultQueryExtent(e){let t=new this.navmeshWasmWrapper.navmeshWasm.Vec3(e.x,e.y,e.z);this.crowd.setDefaultQueryExtent(t)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(e){let t=this.crowd.getDefaultQueryExtent();e.set(t.x,t.y,t.z)}getCorners(e){let t,i=this.crowd.getCorners(e),r=i.getPointCount(),a=[];for(t=0;t<r;t++){let n=i.getPoint(t);a.push(new V(n.x,n.y,n.z))}return a}dispose(){this.crowd.destroy()}};function lbe(e){let t=!1;return e.scene.objects.forEach(i=>{i.data.type==="Page"&&!t&&i.data.publish.gameControlObject&&pm.traverseModuleInstances(e,i.id,(r,a,n)=>{for(let s of n)s.data.type==="GameControl"&&s.data.navmesh.enabled&&(t=!0)})}),t}var ube={type:"change"},v4={type:"changeZoom"},cbe={type:"changePan"},Mc={type:"start"},Ec={type:"end",changed:!0},dbe={type:"end",changed:!1},Gx=new Ui,g4=new Ce,hbe=2*Math.PI,pbe=1e-8,fbe=.01,qx=new V,_g=new Ce,Yx=new V,Mg=new Ui,y4=new zt,mbe={type:"requestRender"},X8=class extends On{constructor(e,t,i={isPlayMode:!1,isExport:!1}){super(),this.object=e,this.domElement=t,this.options=i,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Ls.DOLLY_ROTATE,Ls.PAN],this.offset=new V,this.eye=new V,this.lastPosition=new V,this.lastQuaternion=new Ui,this.current=new Ce,this.overShoot=new Ce,this.overRatio=new Ce,this.spherical=new ZT,this.sphericalDelta=new ZT,this.panOffset=new V,this.panLeftV=new V,this.panUpV=new V,this.panV=new V,this.rotateStart=new Ce,this.rotateEnd=new Ce,this.rotateDelta=new Ce,this.panStart=new Ce,this.panEnd=new Ce,this.panDelta=new Ce,this.dollyStart=new Ce,this.dollyEnd=new Ce,this.dollyDelta=new Ce,this.rotationRangeFactor=new Ce,this.panRangeFactor=new Ce,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=r=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=r.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(Yx,Mg,qx),this.offset.copy(Yx).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&this.object.isPerspectiveCamera&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(Gx.copy(Mg).invert()),this.panOffset.applyQuaternion(Gx),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(Mg),this.panOffset.applyQuaternion(Mg)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),Yx.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(y4.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(y4));let r=this.spherical.phi%hbe;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(Tr.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),r>0&&r>Math.PI||r<0&&r>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let a=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-a,this.sphericalDelta.phi*=1-a}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>fbe||8*(1-this.lastQuaternion.dot(this.object.quaternion))>pbe?(this.dispatchEvent(ube),this.object.dispatchEvent(mbe),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=r=>{this.enabled!==!1&&(r.pointerType==="touch"||r.pointerType==="pen"&&Ts?this.onPointerDownTouch(r):this.onPointerDownMouse(r),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(Mc),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&Ts||this.domElement.setPointerCapture(r.pointerId)))},this.onPointerLeave=r=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,qx.subVectors(this.position0,this.target0),this.spherical.setFromVector3(qx),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=r},this.onPointerEnter=r=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?_g.set(r.clientX-this.domElement.clientWidth/2,r.clientY-this.domElement.clientHeight/2):_g.set(r.clientX-this.pointerLeaveEvent.clientX,r.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(_g).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(g4,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(r.clientX,r.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(_g).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(r.clientX,r.clientY)),this.update()},this.onPointerMove=r=>{this.enabled!==!1&&(this.checkRaycastLock()||(r.pointerType==="touch"||r.pointerType==="pen"&&Ts?this.onPointerMoveTouch(r):this.onPointerMoveMouse(r),r.stopPropagation()))},this.onPointerUp=r=>{this.isPointerDown=!1,Ni.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),Ni.length>1&&r.preventDefault(),this.hasChange?this.dispatchEvent(Ec):this.dispatchEvent(dbe),this.state=-1,r&&(r.stopPropagation(),r.pointerType==="touch"||r.pointerType==="pen"&&Ts||this.domElement.releasePointerCapture(r.pointerId))},this.onPointerDownMouse=r=>{let a;switch(this.useKeyEvents?a=this.mouseButtons[r.button]:a=this.mouseButtonsPlay[r.button],a){case 0:if(r.altKey===!0&&!r.shiftKey&&!zv(r)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2;break;case 3:if(zv(r)||r.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}break;case 5:if(zv(r)||r.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(r),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(r),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=r=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(r);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(r);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(r);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=r=>{switch(Ni.length>1&&r.preventDefault(),this.touches[Ni.length-1]){case Ls.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Ls.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Ls.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Ls.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=r=>{switch(Ni.length>1&&r.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(r),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(r),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(r),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(r),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=lm(()=>this.dispatchEvent(Ec),33),this.onMouseWheel=r=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&r.preventDefault(),this.dispatchEvent(Mc),this.handleMouseWheel(r),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=r=>{if(r.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!Vm)if(r.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(Mc),r.scale>this.prevScale?this.dollyIn(this.getZoomScale()):r.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=r.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(Ec)},this.onContextMenu=r=>{r.preventDefault()},this.onTouchEnd=r=>{r.preventDefault()},this.onKeyDown=r=>{this.enabled!==!1&&(this.key=r.key,r.key===" "&&this.dispatchEvent(Mc))},this.onKeyUp=r=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&r.key==="Alt"&&this.onPointerUp(Ni[0]),r.key===" "&&this.dispatchEvent(Ec))},this.onPointerHover=r=>{r.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(r,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(r,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=r=>{r.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.initialSphericalRadius=this.spherical.radius,this.addEventListenersToCamera()}dispatchEvent(e){e.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(e)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(e){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=e,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(e,t){this.setEnableDampingSpeed(e.enableDamping),this.enablePan=e.enablePan,this.enableZoom=e.enableZoom,this.enableRotate=e.enableRotate,this.rotationLimitsMode=e.rotationLimitsMode,this.thetaIsFree=e.rotationHorizontalOffset.min===e.rotationHorizontalOffset.max&&e.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=e.rotationVerticalOffset.min===e.rotationVerticalOffset.max&&e.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=e.panLimitsMode,this.panSoftLimit=e.panSoftLimit,this.rotationSoftLimit=e.rotationSoftLimit,this.hoverRotatePanMode=e.hoverRotatePanMode,this.hoverRotateDamping=e.hoverRotateDamping??this.dampingFactor,this.useWindowEvents=t==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let i=e.hoverRotatePanStrength/100;this.hoverRotatePanStrength=i**2,this.zoomLimitsEnabled=e.zoomLimitsEnabled,this.minZoom=e.zoomLimits.min,this.maxZoom=Math.max(e.zoomLimits.min,e.zoomLimits.max),this.minDistance=1e3/e.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/e.zoomLimits.min),this.autoRotate=e.autoRotate,this.autoRotateSpeed=e.autoRotateSpeed,this.autoRotateClockwise=e.autoRotateClockwise;let r=this.object.getTarget().applyQuaternion(Gx.copy(this.object.quaternion).invert());this.minV=-e.panVerticalOffset.min+r.y,this.maxV=e.panVerticalOffset.max+r.y,this.minH=-e.panHorizontalOffset.min+r.x,this.maxH=e.panHorizontalOffset.max+r.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Yo(this.spherical.phi-e.rotationVerticalOffset.min),this.maxPhi=Yo(this.spherical.phi+e.rotationVerticalOffset.max),this.minTheta=Yo(Yo(this.spherical.theta)-e.rotationHorizontalOffset.min),this.maxTheta=Yo(Yo(this.spherical.theta)+e.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,e.orbitTouches===1&&(this.touches[0]=Ls.ROTATE),e.panTouches===1&&(this.touches[0]=Ls.PAN),e.orbitTouches===2&&(this.touches[1]=Ls.DOLLY_ROTATE),e.panTouches===2&&(this.touches[1]=Ls.DOLLY_PAN),e.orbitTouches===3&&(this.touches[2]=Ls.ROTATE),e.panTouches===3&&(this.touches[2]=Ls.PAN),this.isTouchZoom=e.isTouchZoom,this.resetHoverEffectOnPointerLeave=e.resetHoverEffectOnPointerLeave??!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let e=this.useWindowEvents?window:this.domElement;e.addEventListener("pointerleave",this.onPointerLeave),e.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(e,t,i,r,a,n,s,o){this.overShoot.set(0,0);let l,u,c;e instanceof V?(l=e.x,u=e.y,this.current.set(this.target.x,this.target.y),c=!0):(l=e.theta,u=e.phi,this.current.set(Yo(this.spherical.theta),Yo(this.spherical.phi)),c=!1),i===0&&(this.current.x+=l,this.current.y+=u),(t===3||t===2)&&(!c&&this.isThetaFlipped?this.current.x>r&&this.current.x<0?this.overShoot.x=r-this.current.x:this.current.x<a&&this.current.x>0&&(this.overShoot.x=a-this.current.x):this.current.x>r?this.overShoot.x=r-this.current.x:this.current.x<a&&(this.overShoot.x=a-this.current.x)),(t===3||t===1)&&(this.current.y>n?this.overShoot.y=n-this.current.y:this.current.y<s&&(this.overShoot.y=s-this.current.y)),c||(this.overShoot.x=Yo(this.overShoot.x),this.overShoot.y=Yo(this.overShoot.y)),i!==0?(this.overRatio.copy(this.overShoot).divide(o),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),i===1&&(this.overRatio.x=b4(Math.abs(this.overRatio.x)),this.overRatio.y=b4(Math.abs(this.overRatio.y))),this.isPointerDown||i===1?i===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(l*this.overShoot.x<0&&!this.thetaIsFree&&(l*=1-this.overRatio.x),u*this.overShoot.y<0&&!this.phiIsFree&&(u*=1-this.overRatio.y)):i===2&&(!c&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||c&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(l=this.overShoot.x*.05),this.phiIsFree||(u=this.overShoot.y*.05),c?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):c?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(l+=this.overShoot.x,u+=this.overShoot.y),e instanceof V?(e.x=l,e.y=u):(this.thetaIsFree||(e.theta=l),this.phiIsFree||(e.phi=u))}setEnableDampingSpeed(e){this.enableDamping=e,this.rotateSpeed=e===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(e){this.sphericalDelta.theta-=e}rotateUp(e){this.sphericalDelta.phi-=e}panLeft(e,t){this.panLeftV.setFromMatrixColumn(t,0),this.panLeftV.multiplyScalar(-e),this.panOffset.add(this.panLeftV)}panUp(e,t){this.panUpV.setFromMatrixColumn(t,1),this.panUpV.multiplyScalar(e),this.panOffset.add(this.panUpV)}pan(e,t){let i=this.domElement;if(i&&this.object.isPerspectiveCamera){let r=this.object.position;this.panV.copy(r).sub(this.target);let a=this.panV.length();a*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*e*a/i.clientHeight,this.object.matrixWorld),this.panUp(2*t*a/i.clientHeight,this.object.matrixWorld)}else i&&this.object.isOrthographicCamera&&(this.panLeft(e*(this.object.right-this.object.left)/this.object.zoom/i.clientWidth,this.object.matrixWorld),this.panUp(t*(this.object.top-this.object.bottom)/this.object.zoom/i.clientHeight,this.object.matrixWorld));this.dispatchEvent(cbe)}dollyOut(e){this.object.isPerspectiveCamera?this.scale/=e:this.object.isOrthographicCamera&&(this.object.zoom*=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(v4)}dollyIn(e){this.object.isPerspectiveCamera?this.scale*=e:this.object.isOrthographicCamera&&(this.object.zoom/=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(v4)}zoomOut(e=this.getZoomScale()){this.dispatchEvent(Mc),this.dollyOut(e),this.dispatchEvent(Ec)}zoomIn(e=this.getZoomScale()){this.dispatchEvent(Mc),this.dollyIn(e),this.dispatchEvent(Ec)}setZoom(e){if(this.dispatchEvent(Mc),this.object.isPerspectiveCamera){let t=this.initialSphericalRadius/e/this.spherical.radius;this.scale=t}else this.object.isOrthographicCamera&&(this.object.zoom=e,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0);this.dispatchEvent(Ec)}handleMouseDownRotate(e){this.rotateStart.set(e.clientX,e.clientY)}handleMouseDownDolly(e){this.dollyStart.set(e.clientX,e.clientY)}handleMouseDownPan(e){this.panStart.set(e.clientX,e.clientY)}handleMouseMoveRotate(e,t=1){e.movementX!==void 0?this.rotateDelta.set(e.movementX,e.movementY):(this.rotateEnd.set(e.clientX,e.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*t).rotateAround(g4,-this.object.angleOffsetFromUp);let i=this.domElement,r=this.useWindowEvents?window.innerHeight:i.clientHeight,a=2*Math.PI*this.rotateDelta.x/r,n=2*Math.PI*this.rotateDelta.y/r;this.rotateLeft(a),this.rotateUp(n),this.update()}handleMouseMoveDolly(e){this.dollyEnd.set(e.clientX,e.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(e,t=1){e.movementX!==void 0?this.panDelta.set(e.movementX,e.movementY):(this.panEnd.set(e.clientX,e.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*t),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(e){if(boe===!1&&zv(e)===!1&&xoe(e)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-e.deltaX,-e.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),e.altKey?this.pan(0,this.panDelta.y):e.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1||this.gesture)return;e.deltaY===0?e.deltaX<0?this.dollyIn(this.getZoomScale()):e.deltaX>0&&this.dollyOut(this.getZoomScale()):e.deltaY<0?this.dollyIn(this.getZoomScale()):e.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Ni.length===2){let e=.5*(Ni[0].pageX+Ni[1].pageX),t=.5*(Ni[0].pageY+Ni[1].pageY);this.rotateStart.set(e,t)}else this.rotateStart.set(Ni[0].pageX,Ni[0].pageY)}handleTouchStartPan(){if(Ni.length===2){let e=.5*(Ni[0].pageX+Ni[1].pageX),t=.5*(Ni[0].pageY+Ni[1].pageY);this.panStart.set(e,t)}else this.panStart.set(Ni[0].pageX,Ni[0].pageY)}handleTouchStartDolly(){let e=Ni[0].pageX-Ni[1].pageX,t=Ni[0].pageY-Ni[1].pageY,i=Math.sqrt(e*e+t*t);this.dollyStart.set(0,i)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(e){if(Ni.length===2){let i=zw(e),r=.5*(e.pageX+i.x),a=.5*(e.pageY+i.y);this.rotateEnd.set(r,a)}else{if(e.pointerId!==Ni[0].pointerId)return;this.rotateEnd.set(e.pageX,e.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let t=this.domElement;t&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/t.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/t.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(e){if(Ni.length===2){let t=zw(e),i=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);this.panEnd.set(i,r)}else{if(e.pointerId!==Ni[0].pointerId)return;this.panEnd.set(e.pageX,e.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(e){let t=zw(e),i=e.pageX-t.x,r=e.pageY-t.y,a=Math.sqrt(i*i+r*r);this.dollyEnd.set(0,a),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enablePan&&this.handleTouchMovePan(e)}handleTouchMoveDollyRotate(e){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(e),this.enableRotate&&this.handleTouchMoveRotate(e)}checkRaycastLock(){var e;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let t=(e=this.options)==null?void 0:e.showCameraLock;return t&&t(),!0}}else return!1}};function Yo(e){let t=Math.PI*2;for(;e<=-Math.PI;)e+=t;for(;e>Math.PI;)e-=t;return e}function b4(e){return 1-Math.pow(1-e,4)}var w4=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.page=r,this.currentIntersectedObjects=[],this.actions=dn(t,t.actions,r,a,n,i),this.target=t.target,this.triggeringObjects=[];for(let s of t.triggeringObjects){let o=r.scene.find(s);o&&this.triggeringObjects.push(o)}}isValidTriggeringObject(e){return this.target==="all"?!0:this.triggeringObjects.some(t=>t===e||t.isAncestorOf(e.uuid)||e.isAncestorOf(t.uuid))}disconnect(){an(this.actions)}dispatch(){this.object.destroyedInAction||(this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.actions.Transition.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.SwitchCamera.forEach(e=>{e.data.runMode==="Toggle"?e.toggle():e.play()}),this.actions.Link.forEach(e=>{e.dispatch()}),this.actions.Reset.forEach(e=>{e.dispatch()}),this.actions.Create.forEach(e=>{e.dispatch()}),this.actions.Destroy.forEach(e=>{e.dispatch(!1)}),this.actions.Audio.forEach(e=>{e.dispatchBasic()}),this.actions.Particles.forEach(e=>{e.dispatchBasic()}),this.actions.Video.forEach(e=>{e.dispatchBasic()}),this.actions.SceneTransition.forEach(e=>{e.dispatch()}),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch()))}},mr;Aoe.then(e=>mr=e);var _a=new V,po=new Ui,Iu=new V,Xx=new Va(0,0,0,"YXZ"),x4=new Va(0,0,0,"XYZ"),fo=new V,Kx=new V,Zx=new V(1,1,1),nh=new Ui,Eg=new zt,S4=new zt,vbe={type:"updateMatrix"},C4=new Ui,Qx=new ws,kM={type:"beginEvent",eventName:"Collision"},gbe={type:"beginEvent",eventName:"Trigger"};function ybe(e){if(pm.physicsEnabled(e.scene.objects))return!0;let t=!1;return e.scene.objects.traverse((i,r)=>{if(r.events){if(Array.isArray(r.events)){for(let a of r.events)if(a.data.disabled!==!0&&a.data.type==="GameControl"&&a.data.collisionEnabled){t=!0;break}}else for(let a of Object.values(r.events))if(a.disabled!==!0&&a.type==="GameControl"&&a.collisionEnabled){t=!0;break}}}),t}var sb=e=>e.states.some(t=>t.data.position!==void 0||t.data.rotation!==void 0||t.data.hiddenMatrix!==void 0||t.data.cloner!==void 0||t.data.pathSnapping!==void 0),bbe=class{constructor(e){this.eventContext=e,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=t=>{if(t.bodyType()!==mr.RigidBodyType.Dynamic)return;t.isSleeping()||this.nActiveRigidBodies++;let[i,r,a]=this.rigidBodyToMesh.get(t.handle);if(_a.copy(t.translation()).multiplyScalar(this.pixelsPerMeter),po.copy(t.rotation()),i.matrixWorld.compose(_a,po,r),i.hasNonUniformScale&&i.matrixWorld.multiply(i.shearScale),i.dispatchEvent(vbe),a){let n=i.cloner;if(n&&n.objectForSample===void 0){n.matrixWorld.copy(i.matrixWorld);for(let s of n.children)s.updateMatrixWorld(!0)}for(let s of i.children)s.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(t,i,r)=>{var a,n,s,o;if(r===!1)return;let l,u;if(this.sensorToTriggerEvent[t]?(l=this.sensorToTriggerEvent[t],u=this.sharedGameControlGlobals.colliderToEntity.get(i)):this.sensorToTriggerEvent[i]&&(l=this.sensorToTriggerEvent[i],u=this.sharedGameControlGlobals.colliderToEntity.get(t)),l&&u&&l.isValidTriggeringObject(u)){l.dispatch();return}for(let c=this.sharedGameControlGlobals.createdObjects.length-1;c>=0;c--){let d=this.sharedGameControlGlobals.createdObjects[c];if(d.userData.hasCollisionDestroy&&(((a=d.rigidBody)==null?void 0:a.collider(0).handle)===t||((n=d.rigidBody)==null?void 0:n.collider(0).handle)===i)){this.sharedGameControlGlobals.createdObjects.splice(c,1),d.removeFromParent(),requestAnimationFrame(()=>{var h;return(h=this.sharedGameControlGlobals.rapierWorld)==null?void 0:h.removeRigidBody(d.rigidBody)});break}}if(((s=this.gameControl)==null?void 0:s.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(t)){let c=this.sharedGameControlGlobals.colliderToEntity.get(i),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,c,i)}else if(((o=this.gameControl)==null?void 0:o.object)!==void 0&&this.gameControl.object===this.sharedGameControlGlobals.colliderToEntity.get(i)){let c=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d===void 0)return;for(let h of d)h.data.target==="character"&&this.dispatchCollisionEvent(h,c,t)}else{let c=this.sharedGameControlGlobals.colliderToEntity.get(t),d=this.sharedGameControlGlobals.entityToCollisionEvents[c.uuid];if(d!==void 0)for(let f of d)f.data.target==="scene"&&this.dispatchCollisionEvent(f,c,t);let h=this.sharedGameControlGlobals.colliderToEntity.get(i),p=this.sharedGameControlGlobals.entityToCollisionEvents[h?.uuid];if(p!==void 0)for(let f of p)f.data.target==="scene"&&this.dispatchCollisionEvent(f,h,i)}},this.isExport=e.isExport,this.sharedAssets=e.sharedAssets,this.renderer=e.renderer,this.requestRender=e.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=F8,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(e){e.forEach(t=>{t.addEventListener("connected",i=>{"gamepad"in i.data&&"axes"in i.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(i.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(e=>{var t,i;let r=e.dataPatched;for(let a of r.events){if(a.data.disabled===!0)continue;let n=(i=(t=a.data.actions)==null?void 0:t.find(s=>s.data.type==="Destroy"))==null?void 0:i.data;if(n)for(let s of n.objects){let o=this.page.scene.find(s);o&&(o.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(e=>{let t=e.dataPatched;for(let i of t.events)if(!(i.data.disabled===!0||i.data.type!=="DragDrop"))for(let r of i.data.objects){let a=this.page.scene.find(r);a&&(a.userData.hasDrag=!0)}})}initBVH(){let e=[];if(this.page.traverseChildren(t=>{var i,r;let a,n=t instanceof Kg,s=t instanceof Qg;if(t instanceof So||n||s)return;t instanceof Nn?a=t.object:a=t;let o=a.dataPatched;if(((i=o.physics)==null?void 0:i.enabled)==="visibility"?!o.visible:!((r=o.physics)!=null&&r.enabled))return!0;let l=t.geometry,u=a.userData.hasDestroy===!0,c=a.userData.hasDrag===!0;if(sb(o)||u||c||a.dataPatched.events.some(d=>d.data.disabled!==!0&&d.data.type==="GameControl"))return t.updateMatrixWorldSVD(),this.addBoundsTree(t),!0;l&&e.push($l(l,t.matrixWorld))}),e.length>0){let t=Hc(e,!1);this.sharedGameControlGlobals.staticMeshBVH=new Rf(t)}}addRigidBody(e,t,i){let r=[],a="geometry"in e?e.geometry:void 0,n=t.dataPatched;if(a?.getAttribute("position")!==void 0&&r.push($l(a,e.shearScale)),n.physics.fusedBody){let s=this.gatherChildrenGeom(e,r);e.traverseObject(s),e.children.forEach(l=>l.updateMatrixWorld(!0));let o=e.cloner;o&&o.objectForSample===void 0&&n.physics.rigidBody==="dynamic"&&(o.traverseObject(s),o.children.forEach(l=>l.updateMatrixWorld(!0)))}if(r.length>0){let s,o=!i.fromCreate&&n.physics.rigidBody==="dynamic"||i.fromCreate&&i.dynamic;o?(s=mr.RigidBodyDesc.dynamic(),s.setLinearDamping(n.physics.damping).setAngularDamping(n.physics.damping).setAdditionalMass(1e-9).setGravityScale(n.physics.gravityScale).enabledRotations(...n.physics.enabledRotation).enabledTranslations(...n.physics.enabledTranslation)):(i.hasTransformAnim||i.hasFollow||i.hasDrag)&&!i.fromCreate?(s=mr.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e)):s=mr.RigidBodyDesc.fixed();let l=Hc(r);(e.hasNonUniformScale?e.matrixWorldRigid:e.matrixWorld).decompose(_a,po,Iu),e.position0=_a.clone().divideScalar(this.pixelsPerMeter),e.rotation0=po.clone(),_a.divideScalar(this.pixelsPerMeter),s.setTranslation(_a.x,_a.y,_a.z).setRotation(po),a?l?.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):l?.scale(Iu.x/this.pixelsPerMeter,Iu.y/this.pixelsPerMeter,Iu.z/this.pixelsPerMeter);let u=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s);o&&this.rigidBodyToMesh.set(u.handle,[e,Iu.clone(),n.physics.fusedBody]);let c=!(n.geometry===void 0||n.geometry.type==="SubdivGeometry"||n.geometry.type==="NonParametricGeometry"||n.geometry.type==="BooleanGeometry"||n.geometry.type==="VectorGeometry"||n.geometry.type==="StarGeometry"||n.geometry.type==="RectangleGeometry"||n.geometry.type==="EllipseGeometry"||n.geometry.type==="TriangleGeometry"||n.geometry.type==="TorusGeometry"||n.geometry.type==="HelixGeometry");try{this.addCollider(u,n.physics,l,t,c)}catch{try{this.addCollider(u,n.physics,l,t,!1)}catch(d){console.error(d)}}e.rigidBody=u}}addBoundsTree(e){var t,i;let r=[];if(((t=e.geometry)==null?void 0:t.getAttribute("position"))!==void 0&&((i=e.geometry)==null?void 0:i.getAttribute("position").count)>0&&r.push($l(e.geometry,e.shearScale)),e.traverseObject(this.gatherChildrenGeom(e,r)),e.children.forEach(a=>a.updateMatrixWorld(!0)),r.length>0){let a=Hc(r,!1);e.bvhGeometry=a,a.getAttribute("position").count>0&&(e.bvhGeometry.boundsTree=new Rf(a),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(e))}}addCollider(e,t,i,r,a=!0){var n,s;if(i?.getAttribute("position").count===0||((n=i?.getIndex())==null?void 0:n.count)===0)return;let o;i&&(t.colliderType==="trimesh"?o=mr.ColliderDesc.trimesh(i.getAttribute("position").array,i.getIndex().array):o=mr.ColliderDesc.convexMesh(i.getAttribute("position").array,a?i.getIndex().array:void 0)),o.setFrictionCombineRule(mr.CoefficientCombineRule.Average).setRestitutionCombineRule(mr.CoefficientCombineRule.Average).setDensity(t.density).setFriction(t.friction).setRestitution(t.restitution);let l=this.sharedGameControlGlobals.rapierWorld.createCollider(o,e);this.sharedGameControlGlobals.colliderToEntity.set(l.handle,r),(s=this.sharedGameControlGlobals.entityToCollisionEvents[r.uuid])!=null&&s.some(u=>u.target==="scene")&&l.setActiveEvents(mr.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(e,t){return(i,r)=>{var a;if(r===0)return;let n;if(i instanceof So)if(i.objectForSample){if(i.objectForSample.dataPatched.physics.fusedBody)return;n=i.object}else return i.object.dataPatched.physics.fusedBody===!0&&i.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(i instanceof Nn)n=i.object;else if(n=i,(a=n.dataPatched.cloner)==null?void 0:a.hideBase)return!0;let s=n.dataPatched;if(s.physics.enabled==="visibility"?!s.visible:!s.physics.enabled)return!0;r===1?e.hasNonUniformScale?i.matrixWorld.multiplyMatrices(e.shearScale,i.hiddenMatrix):i.matrixWorld.copy(i.hiddenMatrix):i.matrixWorld.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix),i.matrixWorld.multiply(i.matrix);let o=i.geometry;o?.getAttribute("position")!==void 0&&t.push($l(o,i.matrixWorld))}}activate(e){var t,i;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=e,this.usePhysics=this.page.data.globalPhysics.usePhysics;let r=this.page.playCamera,a=!1,n=5,s=8,o=9,l="drag",u=this.page.data.publish.gameControlObject,c=u!==null?this.page.find(u):null,d=null;if(c)for(let f of c.data.events){if(f.data.disabled||f.data.type!=="GameControl")continue;let v=c;for(;this.usePhysics&&((t=v=v.parent)==null?void 0:t.parent)!==null;)(i=v.data.physics)==null||i.fusedBody;f.data.collisionEnabled&&(this.needsCollisionDetection=!0),d===null&&(d=f.data)}if(this.page.traverseEntity(f=>{for(let v of f.dataPatched.events)if(v.data.disabled===!1&&v.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),c&&d&&(c.data.visible===!0||c.data.physics.enabled===!0)){a=a||d.camera===r.uuid||c.uuid===r.uuid;let f=new j8(c,this.renderer.domElement,d,this.eventContext.page.data.globalPhysics,this,c.uuid!==r.uuid&&d.camera===r.uuid,r,this.page,this.sharedAssets);this.gameControl=f,n=d.joystickPosLoc,s=d.joystickRotLoc,o=d.jumpTouchButtonLoc,l=d.rotByTouch,Ts&&d.touchControl&&(this.joystickToGameControls[n]="pos",d.moveMode==="walk"&&(this.joystickToGameControls[o]="jmp"),l==="joystick"&&(this.joystickToGameControls[s]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let f=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new sbe(this.usePhysics,this.isExport);let v;f.collider.type==="sphere"?v=f.collider.radius*2:v=f.collider.height,v=Math.floor(v/f.navmesh.ch-1),this.navigationMeshWrapper.init({...f.navmesh,walkableHeight:v},this.gameControl,this.eventContext)}}if(a===!1){let{enableRotate:f,enablePan:v,enableZoom:m,autoRotate:g,hoverRotatePanMode:y}=this.eventManager.publish.orbitControls;(f||v||m||g||y!==0)&&(this.orbitControls=new X8(r,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let h=this.renderer.domElement.width/this.renderer.getPixelRatio(),p=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((f,v)=>{let m=document.body.appendChild(document.createElement("div")),[g,y,b]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[v],x=(h-5*g)/4+g,S={},w=f==="jmp",E=w?0:g;v<10?(v<5?S.top=E/2:S.bottom=E/2,S.left=E/2+v%5*x):v===10?(S.left=E/2,S.top=p/2):(S.right=E/2,S.top=p/2),S.top?S.top-=y[1]:S.bottom+=y[1],S.left?S.left+=y[0]:S.right-=y[0];for(let A in S)S[A]+="px";if(w){let A=m.appendChild(document.createElement("div"));Object.assign(A.style,S,{position:"absolute",width:g+"px",height:g+"px",backgroundColor:`rgba(255,255,255,${b==="show"?.4:0})`,zIndex:"9999",borderRadius:g+"px",border:b==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let k=g/16*16*.4;b==="show"&&(A.innerHTML=`
						<svg width="${k}" height="${g*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),A.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),A.addEventListener("touchend",I=>I.preventDefault()),this.joysticks[v]=[void 0,m];return}let M={zone:m,mode:"static",position:S,size:g};b==="hide"&&(M.restOpacity=0);let P=Tge.create(M);P.on("move",(A,k)=>{let I=this.gameControl;f==="pos"?k.force<.2?I.moveForce=0:(I.movementState.movePosZ=Math.sin(-k.angle.radian),I.movementState.movePosX=Math.cos(-k.angle.radian),k.force>1.2?I.movementState.run=1:I.movementState.run=0,k.force<.3?I.moveForce=(k.force-.2)/.1:I.moveForce=1):f==="rot"&&(k.force<.2?I.rotForce=0:(I.movementState.rotPosX=k.vector.y,I.movementState.rotPosY=-k.vector.x,k.force<.3?I.rotForce=(k.force-.2)/.1:I.rotForce=1)),this.requestRender()}),P.on("end",(A,k)=>{let I=this.gameControl;f==="pos"?(I.movementState.movePosZ=0,I.movementState.movePosX=0,I.moveForce=1):f==="rot"&&(I.movementState.rotPosX=0,I.movementState.rotPosY=0,I.rotForce=1)}),this.joysticks[v]=[P,m]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(f=>f.initialDisabled=!1)},80)}initPhysics(){var e;(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=new mr.World(new mr.Vector3(0,this.gravity,0)),this.events=new mr.EventQueue(!0);let t=[],i=[];if(this.page.traverseChildren(o=>{var l,u,c,d;let h;if(o instanceof So)if(o.objectForSample){if(o.objectForSample.dataPatched.physics.fusedBody)return;h=o.object}else return o.object.dataPatched.physics.fusedBody===!0&&o.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(o instanceof Nn)h=o.object;else{if(o instanceof Qg||o instanceof Kg)return;if(h=o,((l=h.dataPatched.cloner)==null?void 0:l.disabled)===!1&&((u=h.dataPatched.cloner)==null?void 0:u.hideBase)&&((c=h.dataPatched.physics)==null?void 0:c.fusedBody)!==!0)return!0}let p=h.dataPatched,f;for(let S of p.events)S.data.disabled!==!0&&S.data.type==="GameControl"&&(f=S.data);if(!p.physics||(p.physics.enabled==="visibility"?!p.visible:!p.physics.enabled))return!0;o.updateMatrixWorldSVD();let v=sb(p),m=!1,g=h.userData.hasDestroy,y=h.userData.hasDrag,b=!1;for(let S of p.events)if(S.data.disabled!==!0){if(S.data.type==="Collision"){m=!0;let w=new Xye(S.id,S.data,h,this.page,this.sharedAssets,this.eventManager);w.initialDisabled=!0,this.collisionEvents.push(w),this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid].every(E=>E.id!==S.id)?this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid].push(w):this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid]=[w]}else if(S.data.type==="Follow"){b=!0;let w=S.data.target;o.traverseVisible(E=>{E.userData.isFollowingObj=w})}}p.physics.rigidBody==="dynamic"&&p.physics.fusedBody===!1&&(o.matrixWorldFusedFalse=o.matrixWorld.clone());let x=o.geometry;if(f!==void 0){let S=mr.RigidBodyDesc.kinematicPositionBased();(o.hasNonUniformScale?o.matrixWorldRigid:o.matrixWorld).decompose(_a,po,Iu),o.position0=_a.clone().divideScalar(this.pixelsPerMeter),o.rotation0=po.clone(),_a.divideScalar(this.pixelsPerMeter),S.setTranslation(_a.x,_a.y,_a.z).setRotation(po);let w=this.sharedGameControlGlobals.rapierWorld.createRigidBody(S);o.rigidBody=w;let E;f.collider.type==="sphere"?E=mr.ColliderDesc.ball(f.collider.radius/this.pixelsPerMeter):f.collider.type==="capsule"?E=mr.ColliderDesc.capsule((f.collider.height/2-f.collider.radius)/this.pixelsPerMeter,f.collider.radius/this.pixelsPerMeter):E=mr.ColliderDesc.cuboid(f.collider.width/this.pixelsPerMeter/2,f.collider.height/this.pixelsPerMeter/2,f.collider.depth/this.pixelsPerMeter/2),E.setFrictionCombineRule(mr.CoefficientCombineRule.Average).setRestitutionCombineRule(mr.CoefficientCombineRule.Average).setDensity(p.physics.density).setFriction(p.physics.friction).setRestitution(p.physics.restitution);let M=this.sharedGameControlGlobals.rapierWorld.createCollider(E,w);this.sharedGameControlGlobals.colliderToEntity.set(M.handle,h),_a.fromArray(f.collider.position).multiply(Iu.setFromMatrixScale(h.matrixWorld)).divideScalar(this.pixelsPerMeter),M.setTranslationWrtParent(_a);let P=new Ui().setFromEuler(new Va().setFromVector3(new V().fromArray(f.collider.rotation)));M.setRotationWrtParent(P),M.setActiveEvents(mr.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(h,!0)}else p.physics.rigidBody==="dynamic"||v||b||g||y||m?(this.addRigidBody(o,h,{hasFollow:b,hasTransformAnim:v,hasDrag:y}),this.generateSensorColliderDescs(h,p.physics.fusedBody)):(x&&t.push($l(x,o.matrixWorld)),p.physics.fusedBody&&o.traverseObject((S,w)=>{var E;if(w===0)return;let M;if(S instanceof So)if(S.objectForSample){if(S.objectForSample.dataPatched.physics.fusedBody)return;M=S.object}else return S.object.dataPatched.physics.fusedBody===!0&&S.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else{if(S instanceof Qg||S instanceof Kg)return;if(S instanceof Nn)M=S.object;else if(M=S,(E=M.dataPatched.cloner)==null?void 0:E.hideBase)return!0}let P=M.dataPatched;if(P.physics.enabled==="visibility"?!P.visible:!P.physics.enabled)return!0;let A=S.geometry;A?.getAttribute("position")!==void 0&&t.push($l(A,S.matrixWorld))}),this.generateSensorColliderDescs(h,p.physics.fusedBody,i));if(((d=p.physics)==null?void 0:d.fusedBody)===!0||f)return!0}),t.length===0)return;let r=Hc(t);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let a=mr.RigidBodyDesc.fixed(),n=this.sharedGameControlGlobals.rapierWorld.createRigidBody(a),s=mr.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(mr.CoefficientCombineRule.Multiply).setRestitutionCombineRule(mr.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(s,n);for(let[o,l]of i){let u=this.sharedGameControlGlobals.rapierWorld.createCollider(o,n);this.sensorToTriggerEvent[u.handle]=l}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(e=>{for(let t of e.dataPatched.events)if(t.data.type==="Trigger"&&t.data.disabled!==!0){let i=new w4(t.id,t.data,e,this.page,this.sharedAssets,this.eventManager),r=new zt().compose(fo.fromArray(t.data.position),nh.setFromEuler(x4.fromArray(t.data.rotation)),Zx);if(t.data.triggerZone==="box"){let a=new ba;a.min.fromArray(t.data.size).multiplyScalar(-.5),a.max.fromArray(t.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([a,r,e,i])}else this.sharedGameControlGlobals.triggers.push([t.data.radius,r,e,i])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(e=>e.disconnect()),this.sharedGameControlGlobals.triggers.forEach(e=>e[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var e,t,i,r;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(a=>{let n=a;n.matrixWorldFusedFalse&&(n.matrixWorldFusedFalse=void 0),n.rigidBody&&(n.rigidBody=void 0),n.position0&&(n.position0=void 0),n.rotation0&&(n.rotation0=void 0)}),(e=this.sharedGameControlGlobals.rapierWorld)==null||e.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(t=this.gameControl)==null||t.reset(),(i=this.gameControl)==null||i.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([a,n])=>{a?.destroy(),n.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(r=this.navigationMeshWrapper)==null||r.dispose(),this.navigationMeshWrapper=void 0;for(let a of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))a.forEach(n=>n.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(e,t,i){if(!this.isEnabled)return!0;let r=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(r=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,r=!1):this.initializationCounter===2&&this.gameControl&&(r=!this.gameControl.update(e,t,i)&&r),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let a=.016666666666666666;if(e===0)r=this.stepPhysics()&&r;else{let n=e/1e3;n<a&&n>a*.55&&(n=a),this.accumulator+=n;let s=performance.now(),o=0,l=6;for(;this.accumulator>=a&&o<l&&(r=this.stepPhysics()&&r,this.accumulator-=a,o++,!(performance.now()-s>a*1e3)););this.accumulator=this.accumulator%a}}return r}stepPhysics(){var e;for(let t of this.sharedGameControlGlobals.entitiesWithTransformAnim){(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(_a,po,Iu),Xx.setFromQuaternion(po);let i=t;i.prevR===void 0?(i.prevR=Xx.clone(),i.prevT=_a.clone()):(i.prevR.copy(Xx),i.prevT.copy(_a)),t.rigidBody&&(t.rigidBody.setNextKinematicTranslation(_a.divideScalar(this.pixelsPerMeter)),t.rigidBody.setNextKinematicRotation(po))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(e=this.events)==null||e.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(e,t,i){var r;let a=((r=this.sharedGameControlGlobals.rapierWorld)==null?void 0:r.getCollider(i))._parent,n;if(t.cloner){for(let s of t.cloner.children)if(s.rigidBody===a){n=s;break}}e.dispatch(n),t.dispatchEvent(kM)}updateUseWindowEvents(e){var t;(t=this.orbitControls)==null||t.updateUseWindowEvents(e)}generateSensorColliderDescs(e,t,i){let r=S4.copy(e.matrixWorld).invert();e.traverseEntity((a,n)=>{if(t===!1&&n===1)return!0;for(let s of a.dataPatched.events)if(s.data.type==="Trigger"&&s.data.disabled!==!0){let o=new w4(s.id,s.data,a,this.page,this.sharedAssets,this.eventManager),l;if(s.data.triggerZone==="box"?l=mr.ColliderDesc.cuboid(...s.data.size.map(u=>u/(2*this.pixelsPerMeter))):l=mr.ColliderDesc.ball(s.data.radius/this.pixelsPerMeter),l.setDensity(0).setSensor(!0).setActiveEvents(mr.ActiveEvents.COLLISION_EVENTS),fo.fromArray(s.data.position),nh.setFromEuler(x4.fromArray(s.data.rotation)),Eg.compose(fo,nh,Zx).premultiply(a.matrixWorld),i?(Eg.decompose(fo,nh,Kx),l.setActiveCollisionTypes(mr.ActiveCollisionTypes.KINEMATIC_FIXED|mr.ActiveCollisionTypes.DYNAMIC_FIXED)):(Eg.premultiply(r).decompose(fo,nh,Kx),e.rigidBody.bodyType()===mr.RigidBodyType.Dynamic||(e.rigidBody.bodyType()===mr.RigidBodyType.Fixed?l.setActiveCollisionTypes(mr.ActiveCollisionTypes.KINEMATIC_FIXED|mr.ActiveCollisionTypes.DYNAMIC_FIXED):l.setActiveCollisionTypes(mr.ActiveCollisionTypes.KINEMATIC_KINEMATIC|mr.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),fo.divideScalar(this.pixelsPerMeter),l.setTranslation(fo.x,fo.y,fo.z),l.setRotation(nh),i)i.push([l,o]);else{let u=this.sharedGameControlGlobals.rapierWorld.createCollider(l,e.rigidBody);this.sensorToTriggerEvent[u.handle]=o}}})}checkTrigger(){let e;for(let t=0;t<this.sharedGameControlGlobals.triggers.length;t++){let[i,r,a,n]=this.sharedGameControlGlobals.triggers[t];for(let s=0;s<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;s++){let o=this.sharedGameControlGlobals.entitiesWithTransformAnim[s];if(a===o||n.isValidTriggeringObject(fr.is(o)?o:o.object)===!1)continue;let l=S4.copy(a.matrixWorld).decompose(fo,C4,Kx).compose(fo,C4,Zx).multiply(r),u=Eg.copy(o.matrixWorld).invert().multiply(l);i instanceof ba?e=o.bvhGeometry.boundsTree.intersectsBox(i,u):(Qx.radius=i,Qx.center.setFromMatrixPosition(u),e=o.bvhGeometry.boundsTree.intersectsSphere(Qx)),e?n.currentIntersectedObjects.indexOf(o)===-1&&(n.currentIntersectedObjects.push(o),n.dispatch(),a.dispatchEvent(gbe)):n.currentIntersectedObjects=n.currentIntersectedObjects.filter(c=>c!==o)}}}};function wbe(e){let t=this._clip.duration,i=this._clip.start??0,r=this.loop,a=this.time+e,n=this._loopCount,s=r===CE;if(e===0)return n===-1?a:s&&(n&1)===1?t-(a-i):a;if(r===aR){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),a>=t||a<i){let o=Math.floor((a-i)/(t-i));a-=(t-i)*o,n+=Math.abs(o);let l=this.repetitions-n;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s||(a=e>0?t:i,this.repetitions===1&&(a=t)),this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){let u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=a;if(s&&(n&1)===1)return t-(a-i)}return a}var _4=!1,xbe=class{constructor(e,t,i,r){this.scene=e,this.requestRender=t,this.updateDisplayProgress=i,this.animationInspectorState=r,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=a=>{a.data.type==="Empty"&&a.data.animations&&a.data.animations.forEach((n,s)=>{let o=n[0]+"/";if(Array.isArray(a.identity)?o+=a.identity[0]:o+=a.uuid,this.clipIdToAction[o])return;let l=$_.parse(JSON.parse(n[2]));a.animations[s]=l;let u=this.mixer.clipAction(l,a);_4===!1&&(Object.getPrototypeOf(u)._updateTime=wbe,_4=!0),u.clampWhenFinished=!0,this.clipIdToAction[o]=u})},this.mixer=new NQ(e),this.scene.traverseEntity(this.addClip)}deleteClip(e,t){let i=this.scene.find(t);if(!i)return;let r=i.animations.find(n=>n.uuid===e);if(!r)return;let a=this.clipIdToAction[e];!a||(a.stop(),this.mixer.uncacheClip(r),delete this.clipIdToAction[e],i.animations=i.animations.filter(n=>n.uuid!==e))}get isPlaying(){return Object.values(this.clipIdToAction).some(e=>e.isRunning())}playFromInspector(e){this.mixer.stopAllAction();let t=this.clipIdToAction[e];!t||(t.play(),this.activeClip=t.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(e=>{e.repetitions=1/0,e.loop=nR}),this.mixer.stopAllAction(),this.requestRender()}play(e){let t=e.clipId+"/"+e.object,i=this.clipIdToAction[t];if(i)return e&&(e.repeat>=0&&(i.repetitions=e.repeat+1),e.direction==="pingpong"&&e.repeat!==0&&(i.loop=CE)),i.play(),i.paused=!1,this.requestRender(),i}resumeFromInspector(e){let t=this.clipIdToAction[e];!t||(t.play(),t.paused=!1,this.requestRender())}pauseFromInspector(e){let t=this.clipIdToAction[e];!t||(t.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(e){var t;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(t=this.animationInspectorState)!=null&&t.isScrubbing)return;this.mixer.update(e/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*(this.maxFrames-1)%(this.maxFrames-1))),this.requestRender()}get maxFrames(){return D8(this.activeClip??void 0)}setProgressFromInspector(e,t){if(!this.clipIdToAction[t])return;this.activeClip!==this.clipIdToAction[t].getClip()&&this.playFromInspector(t);let i=this.clipIdToAction[t].paused;this.clipIdToAction[t].paused=!1,this.mixer.setTime(Math.min(e/(this.maxFrames-1),.9999)*this.activeClip.duration),this.requestRender(),i&&(this.clipIdToAction[t].paused=!0)}},Jx=new WeakMap,Sbe=class extends Bm{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){let a=new U_(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,n=>{this.decodeDracoFile(n,t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){let a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};return this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){let i=JSON.stringify(t);if(Jx.has(e)){let o=Jx.get(e);if(o.key===i)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r,a=this.workerNextTaskID++,n=e.byteLength,s=this._getWorker(a,n).then(o=>(r=o,new Promise((l,u)=>{r._callbacks[a]={resolve:l,reject:u},r.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return s.catch(()=>!0).then(()=>{r&&a&&this._releaseTask(r,a)}),Jx.set(e,{key:i,promise:s}),s}_createGeometry(e){let t=new Mi;e.index&&t.setIndex(new ji(e.index.array,1));for(let i=0;i<e.attributes.length;i++){let r=e.attributes[i],a=r.name,n=r.array,s=r.itemSize;t.setAttribute(a,new ji(n,s))}return t}_loadLibrary(e,t){let i=new U_(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,a)=>{i.load(e,r,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{let r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);let a=Cbe.toString(),n=["/* draco decoder */",r,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([n]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(a){let n=a.data;switch(n.type){case"decode":r._callbacks[n.id].resolve(n);break;case"error":r._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,a){return r._taskLoad>a._taskLoad?-1:1});let i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Cbe(){let e,t;onmessage=function(s){let o=s.data;switch(o.type){case"init":e=o.decoderConfig,t=new Promise(function(c){e.onModuleLoaded=function(d){c({draco:d})},DracoDecoderModule(e)});break;case"decode":let l=o.buffer,u=o.taskConfig;t.then(c=>{let d=c.draco,h=new d.Decoder,p=new d.DecoderBuffer;p.Init(new Int8Array(l),l.byteLength);try{let f=i(d,h,p,u),v=f.attributes.map(m=>m.array.buffer);f.index&&v.push(f.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:f},v)}catch(f){console.error(f),self.postMessage({type:"error",id:o.id,error:f.message})}finally{d.destroy(p),d.destroy(h)}});break}};function i(s,o,l,u){let c=u.attributeIDs,d=u.attributeTypes,h,p,f=o.GetEncodedGeometryType(l);if(f===s.TRIANGULAR_MESH)h=new s.Mesh,p=o.DecodeBufferToMesh(l,h);else if(f===s.POINT_CLOUD)h=new s.PointCloud,p=o.DecodeBufferToPointCloud(l,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());let v={index:null,attributes:[]};for(let m in c){let g=self[d[m]],y,b;if(u.useUniqueIDs)b=c[m],y=o.GetAttributeByUniqueId(h,b);else{if(b=o.GetAttributeId(h,s[c[m]]),b===-1)continue;y=o.GetAttribute(h,b)}v.attributes.push(a(s,o,h,m,g,y))}return f===s.TRIANGULAR_MESH&&(v.index=r(s,o,h)),s.destroy(h),v}function r(s,o,l){let u=l.num_faces()*3,c=u*4,d=s._malloc(c);o.GetTrianglesUInt32Array(l,c,d);let h=new Uint32Array(s.HEAPF32.buffer,d,u).slice();return s._free(d),{array:h,itemSize:1}}function a(s,o,l,u,c,d){let h=d.num_components(),p=l.num_points()*h,f=p*c.BYTES_PER_ELEMENT,v=n(s,c),m=s._malloc(f);o.GetAttributeDataArrayForAllPoints(l,d,v,f,m);let g=new c(s.HEAPF32.buffer,m,p).slice();return s._free(m),{name:u,array:g,itemSize:h}}function n(s,o){switch(o){case Float32Array:return s.DT_FLOAT32;case Int8Array:return s.DT_INT8;case Int16Array:return s.DT_INT16;case Int32Array:return s.DT_INT32;case Uint8Array:return s.DT_UINT8;case Uint16Array:return s.DT_UINT16;case Uint32Array:return s.DT_UINT32}}}var Ju;function _be(){return Ju||(Ju=new Sbe,Ju.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),Ju.decoderPending}async function Mbe(e){if(Ju){let t={attributeIDs:Ju.defaultAttributeIDs,attributeTypes:Ju.defaultAttributeTypes,useUniqueIDs:!1},i;try{i=await Ju.decodeGeometry(new Int8Array(e).buffer,t)}catch(r){console.error(r)}if(i)return{index:i.index?{array:i.index.array}:void 0,attributes:Object.entries(i.attributes).map(([r,a])=>({name:r,itemSize:a.itemSize,array:a.array}))}}return null}async function Ebe(e,t){let[i,r]=$6(a2.deserialize(new Uint8Array(e)));return pN(i),r.result().data}function Abe(e){let t=[];return e.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&r.geometry.data.draco!==void 0&&t.push(r)}),t}async function Pbe(e){for(let t of e){let i=await Mbe(t.geometry.data.draco);if(i){let r=t.geometry.data;i.index&&(r.index={array:i.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let a={};i.attributes.forEach(({name:n,array:s,itemSize:o})=>{a[n]={array:s,itemSize:o,type:"Float32Array",normalized:!1}}),r.attributes=a,r.draco=void 0}}}var Tbe=class{constructor(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0],this._delay=500,this._distance=2,this._onMouseDown=e=>{let t=[e.clientX,e.clientY],i=new Date().getTime();if(this._clickCount>0){let r=t[0]-this._lastPosition[0],a=t[1]-this._lastPosition[1];Math.sqrt(r*r+a*a)>this._distance&&(this._clickCount=0)}this._lastPosition=t,this._clickCount=i-this._lastTime>this._delay?1:this._clickCount+1,this._lastTime=i},this._onMouseUp=e=>{}}start(e,t=500,i=2){this._target&&this.stop(),this.reset(),this._delay=t,this._distance=i,this._target=e,this._target.addEventListener("pointerdown",this._onMouseDown,!1),this._target.addEventListener("pointerup",this._onMouseUp,!1)}stop(){this._target&&(this._target.removeEventListener("pointerdown",this._onMouseDown,!1),this._target.removeEventListener("pointerup",this._onMouseUp,!1),this._target=void 0)}get clickCount(){return this._clickCount}reset(){this._clickCount=0,this._lastTime=0,this._lastPosition=[0,0]}},kbe=class{constructor(e,t,i,r,a,n,s,o){this.eventId=e,this.id=t,this.data=i,this.dataEvent=r,this.object=a,this.stage=!1,this.actions=dn(r,i.actions,n,s,o,a)}disconnect(){an(this.actions)}dispatchIn(){this.actions.Audio.forEach(e=>e.dispatchBasic()),this.actions.Particles.forEach(e=>e.dispatchBasic()),this.actions.Video.forEach(e=>e.dispatchBasic()),this.actions.Create.forEach(e=>e.dispatch()),this.actions.Destroy.forEach(e=>e.dispatch()),this.actions.Reset.forEach(e=>e.dispatch()),this.actions.Link.forEach(e=>e.dispatch()),this.actions.Transition.forEach(e=>{e.object.currentTransitionEvent!==this&&(e.object.currentTransitionEvent=this,e.init())}),this.actions.Transition.forEach(e=>e.toggle()),this.actions.Animation.forEach(e=>e.play()),this.actions.SwitchCamera.forEach(e=>e.play()),this.actions.SceneTransition.forEach(e=>e.dispatch()),this.actions.SetVariable.forEach(e=>e.checkConditions()),this.actions.SetVariable.forEach(e=>e.dispatch()),this.actions.DynamicVariablePlay.forEach(e=>e.dispatch()),this.actions.ClearLocalStorage.forEach(e=>e.dispatch()),this.actions.UserAPI.forEach(e=>e.dispatch())}dispatchOut(){this.actions.Transition.forEach(e=>{e.toggle()})}},Obe=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.breakpoints=[],this.resize=(i,r)=>{this.breakpoints.forEach(a=>{let n=l2.deviceToSize(a.data.size),s=a.dataEvent.orientation==="horizontal"?i:r,o;switch(a.data.operator){case"<":o=s<n[0];break;case">":o=s>n[0];break;case"<>":o=s>n[0]&&s<n[1];break}a.stage!==o&&(a.stage=o,a.stage?a.dispatchIn():a.dispatchOut())})},this.onResizeObserver=new ResizeObserver(i=>{for(let r of i){let{width:a,height:n}=r.contentRect;this.resize(a,n)}})}connect(){let{page:e,sharedAssets:t,domElement:i}=this.eventContext;this.onResizeObserver.observe(i);let r=a=>{var n;if(!(!a.visible||!((n=a.data)!=null&&n.events.length)))for(let{data:s,id:o}of a.data.events)s.disabled||s.type==="Resize"&&s.breakpoints.forEach(({data:l,id:u})=>{try{let c=new kbe(o,u,l,s,a,e,t,this.eventManager);this.breakpoints.push(c)}catch{}})};e.traverseEntity(a=>{var n;(a instanceof zn||a instanceof Za)&&((n=a.frame)==null||n.traverse(s=>{r(s)})),r(a)})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(e=>{e.disconnect()}),this.breakpoints=[]}},Dbe=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.userAPIs={},this.events=[],this.onSuccess=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchSuccess()})},this.onError=({userAPIId:i})=>{this.events.forEach(r=>{r.data.userAPIId===i&&r.dispatchError()})},this.userAPIs=e.sharedAssets.getUserAPIs()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="API"&&!i.data.disabled).forEach(i=>{this.events.push(new Ibe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userAPIs).forEach(([e,t])=>{t.on("success",this.onSuccess),t.on("error",this.onError),t.autostart&&t.callUserAPI(this.eventContext.sharedAssets)})}disconnect(){Object.entries(this.userAPIs).forEach(([e,t])=>{t.off("success",this.onSuccess),t.off("error",this.onError)})}},Ibe=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.successActions=dn(t,t.successActions,r,a,n,i),this.errorActions=dn(t,t.errorActions,r,a,n,i)}dispatchSuccess(){this.dispatchActions(this.successActions)}dispatchError(){this.dispatchActions(this.errorActions)}dispatchActions(e){e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}},Lbe=class extends _s{constructor(e,t){super(e),this.eventManager=t,this.userWebhooks={},this.events=[],this.onMessage=({userWebhookId:i})=>{this.events.forEach(r=>{r.data.userWebhookId===i&&r.dispatch()})},this.userWebhooks=e.sharedAssets.getUserWebhooks()}connect(){this.eventContext.page.traverseEntity(e=>{var t;(t=e.data)==null||t.events.filter(i=>i.data.type==="WEBHOOK"&&!i.data.disabled).forEach(i=>{this.events.push(new Bbe(i.id,i.data,e,this.eventContext.page,this.eventContext.sharedAssets,this.eventManager))})}),Object.entries(this.userWebhooks).forEach(([e,t])=>{t.connect(),t.on("message",this.onMessage)})}disconnect(){Object.entries(this.userWebhooks).forEach(([e,t])=>{t.off("message",this.onMessage),t.disconnect()})}},Bbe=class{constructor(e,t,i,r,a,n){this.id=e,this.data=t,this.object=i,this.actions=dn(t,t.actions,r,a,n,i)}dispatch(){let e=this.actions;e.Audio.forEach(t=>t.dispatchConditional()),e.Particles.forEach(t=>t.dispatchConditional()),e.Video.forEach(t=>t.dispatchConditional()),e.Create.forEach(t=>t.dispatch()),e.Destroy.forEach(t=>t.dispatch()),e.Reset.forEach(t=>t.dispatch()),e.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this),t.init()}),e.Transition.forEach(t=>t.play()),e.Animation.forEach(t=>t.play()),e.SwitchCamera.forEach(t=>t.play()),e.SceneTransition.forEach(t=>t.dispatch()),e.SetVariable.forEach(t=>t.checkConditions()),e.SetVariable.forEach(t=>t.dispatch()),e.DynamicVariablePlay.forEach(t=>t.dispatch()),e.ClearLocalStorage.forEach(t=>t.dispatch()),e.UserAPI.forEach(t=>t.dispatch())}};function zbe(){let e=document.createElement("textarea");return e.style.position="fixed",e.style.top="200px",e.style.left="400px",e.style.zIndex="-1",e.style.border="1px solid rgba(255,0,0,0.5)",e.style.width="10px",e.style.height="500px",e.style.color="white",e.style.opacity="0.5",e.style.background="transparent",e.style.display="none",e.style.margin="0px",e.style.padding="0px",e.style.boxSizing="content-box",e.style.pointerEvents="none",e}var Rbe=new V(0,0,1),M4=new V,E4=new V,A4=new Ta,Nbe=class{constructor(e,t,i,r,a){this.containerScene=e,this.raycaster=t,this.sharedAssets=i,this.requestRender=r,this.onExit=a,this.htmlInput=null,this.virtualInput=null,this.helper=new FV,this.doubleClickHandler=new Tbe,this.isDragging=!1,this.plane=new hs,this.caretInterval=0,this.planeIntersection=new V,this.projected=new Ce,this._lastIndex=0,this._isFirstDragMove=!1,this.selectionOnDragStart=0,this.onTextMaterialChanged=()=>{var n;let s=(n=this.virtualInput)==null?void 0:n.data;if(this.virtualInput!==void 0&&s){let o=s.material,l=typeof o=="string"?this.sharedAssets.data.materials[o]:o,u=Qme(l,this.sharedAssets);this.helper.setCaretColor(u)}},this.stopAnimateTextCursor=()=>{clearInterval(this.caretInterval),this.helper&&(this.helper.caretMesh.visible=!1)},this.startAnimateTextCursor=()=>{this.stopAnimateTextCursor(),this.helper&&(this.helper.caretMesh.visible=!0,this.caretInterval=setInterval(()=>{this.helper&&(this.helper.caretMesh.visible=!this.helper.caretMesh.visible),this.requestRender()},600))},this.handleCaretUpdate=n=>{if(!this.htmlInput||!this.virtualInput)return;let s=this.helper,o=n?.key==="ArrowLeft"||n?.key==="ArrowRight",l=n?.key==="ArrowUp"||n?.key==="ArrowDown";this.htmlInput.selectionStart===this.htmlInput.selectionEnd?(s.setCaretPosition(this.htmlInput.selectionStart,{horizontalKeyMove:o,verticalKeyMove:l}),this.startAnimateTextCursor()):s.setSelection(this.htmlInput.selectionStart,this.htmlInput.selectionEnd),this.requestRender()},this.containerScene.add(this.helper)}createInput(){return this.htmlInput=zbe(),this.htmlInput}connect(){}disconnect(){var e;this.stopAnimateTextCursor(),this.helper.hide(),(e=this.htmlInput)==null||e.remove(),this.doubleClickHandler.stop()}handleMouseDown(){var e,t;if(!this.htmlInput||!this.virtualInput)return!0;this.getPointOnPlane();let i=this.doubleClickHandler.clickCount,{index:r,lineIndex:a,characterIndex:n}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,i>1?"inside":"previous")??{index:0,lineIndex:0,characterIndex:0};(t=(e=this.virtualInput)==null?void 0:e.wrappedText)!=null&&t.length&&this.virtualInput.wrappedText[a][Math.max(0,n-1)]===`
`&&(r--,n--),this._lastIndex=r,this._isFirstDragMove=!0;let s=this.checkClickedObject();if(i===1){if(s===null)return this.onExit(this.virtualInput),!0;this.selectionOnDragStart=r,this.isDragging=!0,this.setInputSelection(r)}else s===this.virtualInput&&(i===2?this.selectClosestWord(a,n):i>2&&(this.setInputSelection(0,this.htmlInput.value.length),this.doubleClickHandler.reset()))}handleMouseUp(){this.applyRangeToTextInput(),this.isDragging=!1,this._isFirstDragMove=!1}handleMouseMove(){!this.virtualInput||(this._isFirstDragMove&&this.doubleClickHandler.clickCount>1&&(this.selectionOnDragStart=this._lastIndex,this.isDragging=!0,this.setInputSelection(this._lastIndex)),this._isFirstDragMove=!1,this.getPointOnPlane(),this.applyRangeToTextInput())}focus(e){var t;if(this.virtualInput=e,this.updateTextInputStyles(),this.htmlInput)if(e){let i=(t=this.data)==null?void 0:t.geometry.text;this.htmlInput.value=typeof i=="string"?"":i?.textValue.toString()??""}else this.htmlInput.value=""}blur(){}get data(){let{virtualInput:e}=this;if(e)return e.dataPatched}applyRangeToTextInput(){var e;if(!this.isDragging||!this.virtualInput||!this.htmlInput)return;let t=this.selectionOnDragStart,{index:i,lineIndex:r,characterIndex:a}=this.helper.getSelectionFromPosition(this.projected.x,this.projected.y,this.doubleClickHandler.clickCount>2?"inside":"previous")??{index:0};r!==void 0&&a!==void 0&&((e=this.virtualInput)==null?void 0:e.wrappedText[r][a-1])===`
`&&i--,this.htmlInput.setSelectionRange(Math.min(t,i),Math.max(t,i))}checkClickedObject(){if(this.virtualInput){let e=this.raycaster.intersectObject(this.virtualInput,!1);if(e.length>0){let t=e[0];if(t.object instanceof jA)return t.object}}return null}selectClosestWord(e,t){if(!this.virtualInput)return;let i=this.virtualInput.wrappedText,r=i[e],a=t+1,n=t;r[t]!==" "&&(a=this.findNextCharOccurence(r,t,"forward"," "),n=this.findNextCharOccurence(r,t,"backward"," "),n>0&&n++,a>=r.length-1&&e===i.length-1&&a++);let s=this.helper,o=s.getGlobalIndexFromLineAndCharIndexes(i,e,n),l=s.getGlobalIndexFromLineAndCharIndexes(i,e,a);this.setInputSelection(o,l)}findNextCharOccurence(e,t,i,r=" "){let a=Math.max(0,e.length-1),n=i==="forward"?a:0,s=i==="forward"?1:-1,o=Math.max(Math.min(t,a),0);for(;o!==n;)if(o+=s,e.charAt(o)===r)return o;return n}getPointOnPlane(){var e;let t=(e=this.virtualInput)==null?void 0:e.data;if(!(!this.virtualInput||!t)&&this.raycaster.ray.intersectsPlane(this.plane)){this.planeIntersection===null&&(this.planeIntersection=new V);let i=this.raycaster.ray.intersectPlane(this.plane,this.planeIntersection);if(i){this.planeIntersection.copy(this.virtualInput.worldToLocal(i));let r=typeof t.geometry.width=="number"?t.geometry.width:1,a=typeof t.geometry.height=="number"?t.geometry.height:1;this.projected.set(i.x+r*.5,i.y-a*.5)}}}updatePlane(){var e;let t=(e=this.virtualInput)==null?void 0:e.data;this.virtualInput&&t&&(A4.getNormalMatrix(this.virtualInput.matrixWorld),M4.copy(Rbe).applyMatrix3(A4).normalize(),this.virtualInput.localToWorld(E4.set(0,0,t.geometry.depth)),this.plane.setFromNormalAndCoplanarPoint(M4,E4))}setInputSelection(e,t=e){var i;(i=this.htmlInput)==null||i.setSelectionRange(e,t),setTimeout(()=>{var r;(r=this.htmlInput)==null||r.focus()})}updateTextInputStyles(){var e;let t=(e=this.virtualInput)==null?void 0:e.data;this.virtualInput&&t&&this.htmlInput&&(this.htmlInput.style.fontSize=t.geometry.fontSize+"px",this.htmlInput.style.letterSpacing=t.geometry.letterSpacing*t.geometry.fontSize+"px",this.htmlInput.style.lineHeight=t.geometry.fontSize*t.geometry.lineHeight+"px",this.htmlInput.style.width=t.geometry.width+"px",this.htmlInput.style.height=t.geometry.height+"px",this.htmlInput.style.textAlign=Vbe(t.geometry.horizontalAlign))}};function Vbe(e){return e===4?"justify":e===2?"right":e===3?"center":"left"}var K8=(e,t)=>{if(typeof e=="string"){let i=t.data(e);if(i)return K8(i.value,t)}return _n.getDisplayedValue(e)};function P4(e,t){let i=e.text,r="";if(typeof i=="string"){let a=t.variables.data(r);a&&(r=K8(a.value,t.variables))}else r=i.textValue.toString();return r}var Fbe=class extends _s{constructor(e,t){super(e),this.eventManager=t,this._textInputs=[],this.sceneHelpers=new dl,this.helper=new FV,this._onMouseDownFocusIn=i=>{if(Ni.length>1)return;this.eventContext.updateRaycaster(i);let r=null;if(this.eventContext.raycaster){for(let a of this._textInputs)if(this.eventContext.raycaster.intersectObject(a,!0).length>0){r=a;break}}this.focusOnTextInput(r),this._onCaretUpdate(),this._onMouseUp(),this.textInputManager.doubleClickHandler.start(this.eventContext.domElement),this.textInputManager.doubleClickHandler._onMouseDown(i),this._onMouseDown(i)},this.onExit=()=>{let{virtualInput:i}=this.textInputManager;if(i===null)return;let r=this.textInputManager.htmlInput;this.helper.hide(),r?.setSelectionRange(r.value.length,r.value.length),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0);let{domElement:a}=this.eventContext;a.removeEventListener("pointerdown",this._onMouseDown,!1),a.removeEventListener("pointerup",this._onMouseUp,!1),a.removeEventListener("pointermove",this._onMouseMove,!1),window.removeEventListener("keydown",this._onKeyPress),this.textInputManager.doubleClickHandler.reset(),a.addEventListener("pointerdown",this._onMouseDownFocusIn),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers()},this._onMouseDown=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseDown(),this.textInputManager.virtualInput&&this.eventContext.raycaster.intersectObject(this.textInputManager.virtualInput,!0).length>0&&this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1)},this._onMouseUp=()=>{this.textInputManager.handleMouseUp(),this.eventManager.controlsManager.orbitControls&&!this.eventManager.controlsManager.orbitControls.enabled&&(this.eventManager.controlsManager.orbitControls.enabled=!0)},this._onMouseMove=i=>{this.eventContext.updateRaycaster(i),this.textInputManager.handleMouseMove()},this._onTextEdit=i=>{let{htmlInput:r,virtualInput:a,helper:n}=this.textInputManager;if(!r||!a)return;let s=r.value;a.textGeometry.setText(s).then(()=>{this.eventContext.requestRender()});let o=a.data;n.update();let l=o.geometry.text;if(typeof l=="string"){let u=l;this.eventContext.sharedAssets.updateVariable(u,{textValue:s})}this.textInputManager.updateTextInputStyles(),this._onCaretUpdate()},this._onCaretUpdate=i=>{this.textInputManager.handleCaretUpdate(i)},this._onKeyPress=i=>{i.key==="Escape"&&this.onExit()},this.textInputManager=new Nbe(this.sceneHelpers,e.raycaster,e.sharedAssets,e.requestRender,this.onExit)}connect(){let e=[];if(this.eventContext.scene.traverseEntity(r=>{r instanceof jA&&e.push(r)}),this._textInputs=e,e.length===0)return;let{domElement:t}=this.eventContext;t.addEventListener("pointerdown",this._onMouseDownFocusIn),this.textInputManager.connect();let i=this.textInputManager.createInput();document.body.appendChild(i),i.style.display="none",i.addEventListener("keyup",this._onCaretUpdate),i.addEventListener("keydown",this._onCaretUpdate),i.addEventListener("beforeinput",this._onCaretUpdate),i.addEventListener("paste",this._onCaretUpdate),i.addEventListener("cut",this._onCaretUpdate),i.addEventListener("select",this._onCaretUpdate),i.addEventListener("selectstart",this._onCaretUpdate)}disconnect(){let e=this.textInputManager.htmlInput,{domElement:t}=this.eventContext;t.removeEventListener("pointerdown",this._onMouseDownFocusIn),e?.removeEventListener("keyup",this._onCaretUpdate),e?.removeEventListener("keydown",this._onCaretUpdate),e?.removeEventListener("beforeinput",this._onCaretUpdate),e?.removeEventListener("paste",this._onCaretUpdate),e?.removeEventListener("cut",this._onCaretUpdate),e?.removeEventListener("select",this._onCaretUpdate),e?.removeEventListener("selectstart",this._onCaretUpdate),this._textInputs.forEach(i=>{let r=P4(i.data.geometry,this.eventContext.sharedAssets.data);i.textGeometry.setText(r)}),t.removeEventListener("pointerdown",this._onMouseDown,!1),t.removeEventListener("pointerup",this._onMouseUp,!1),t.removeEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress),this.eventContext.renderer.sceneHelpersOnTop=void 0,this.eventContext.renderer.pipeline.disableHelpers(),this.textInputManager.disconnect()}focusOnTextInput(e){this.textInputManager.focus(e),this.textInputManager.onTextMaterialChanged();let t=this.textInputManager.htmlInput;if(!t||e===null)return;this.textInputManager.updateTextInputStyles(),this.eventContext.renderer.sceneHelpersOnTop=this.sceneHelpers,this.eventContext.renderer.pipeline.enableHelpers(),this.textInputManager.isDragging=!1;let i=P4(e.textGeometry.userData.parameters,this.eventContext.sharedAssets.data);t.value=i,t.setSelectionRange(0,0),this.textInputManager.helper.show(e),t.style.display="block",t.addEventListener("input",this._onTextEdit),this.textInputManager.updatePlane();let{domElement:r}=this.eventContext;r.removeEventListener("pointerdown",this._onMouseDownFocusIn),r.addEventListener("pointerdown",this._onMouseDown,!1),r.addEventListener("pointerup",this._onMouseUp,!1),r.addEventListener("pointermove",this._onMouseMove,!1),window.addEventListener("keydown",this._onKeyPress)}},jbe=class{constructor(e,t,i,r,a){this.publish=e,this.controlsManager=t,this.animationControls=i,this.eventContext=r,this.sharedVariables=a,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=n=>{let s=window.parent!==window,o=document.documentElement.scrollHeight>document.documentElement.clientHeight||document.documentElement.scrollWidth>document.documentElement.clientWidth;(n.touches.length>1||this.preventTouchScroll||s===!1&&o===!1)&&n.preventDefault()},this.onMouseWheelPreventScroll=n=>{this.preventScroll&&n.preventDefault()},this.onMouseMove=n=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(n),pressed:n.buttons>0}},this.onMouseDown=n=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(n),pressed:!0}},this.onMouseUp=n=>{this.eventContext.sharedAssets.mouseProperty={...this.getMousePosition(n),pressed:!1}},this.getMousePosition=n=>{var s;let{domRect:o}=this.eventContext,{pageX:l,pageY:u}=((s=n.touches)==null?void 0:s.length)>0?n.touches[0]:n;return{x:l-(o.left+window.scrollX),y:u-(o.top+window.scrollY)}},this.stopRaycast=e.stopRaycast,this.preventScroll=e.preventScroll,this.preventTouchScroll=e.preventTouchScroll,this.hideCursor=e.hideCursor,this.requestRender=r.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new yye(this.eventContext),VariableChange:new Kye(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),API:new Dbe(this.eventContext,this),WEBHOOK:new Lbe(this.eventContext,this),Conditional:new Mye(this.eventContext,this),Start:new Yye(this.eventContext,this),Basic:new wye(this.eventContext,this,this.needsRaycast),MouseHover:new Uye(this.eventContext,this),Scroll:new Gye(this.eventContext,this),Follow:new Bye(this.eventContext,this),DragDrop:new kye(this.eventContext,this),LookAt:new Fye(this.eventContext),Resize:new Obe(this.eventContext,this),Textfields:new Fbe(this.eventContext,this)};let{page:e,domElement:t}=this.eventContext;this.hideCursor&&(t.style.cursor="none"),e.traverseEntity(i=>{i.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(i=>i.connect()),t.addEventListener("wheel",this.onMouseWheelPreventScroll),t.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var e;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:i}=this.eventContext;i.style.cursor="",Object.values(this.handlers).forEach(r=>r.disconnect()),(e=this.controlsManager.gameControl)==null||e.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(r=>{r.removeEventListener("requestRender",this.requestRender),r.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(e){let t=this.isEnabled;t&&this.deactivate(),this.eventContext.useWindowEvents=e,t&&this.activate()}initializeActionsDependentStates(){let e=this.eventContext.sharedAssets;e.resetDynamicVariablePlayState();let t=i=>{if(i.data.type==="Conditional"&&(i.data.ifActions.forEach(t),i.data.elseActions.forEach(t)),i.data.type==="Conditional"||i.data.type==="SetVariable")for(let r of i.data.type==="Conditional"?i.data.condition:i.data.expression)"id"in r&&Array.isArray(r.id)&&(r.id[0]==="mouse"&&(this.needsMouse=!0),r.id[0]==="raycast"&&(this.needsRaycast=!0));i.data.type==="DynamicVariablePlay"&&i.data.variableId!==""&&(i.data.mode==="Play"||i.data.mode==="PlayPause"||i.data.mode==="Toggle")&&e.setDynamicVariablePlayState(i.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(i=>{var r;if((r=i.data)!=null&&r.events.length)for(let a of i.data.events)if(a.data.type==="VariableChange"&&(a.data.variableId==="mouseProperty"&&(this.needsMouse=!0),a.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),a.data.type==="Conditional")for(let n of["inActions","outActions"])a.data[n].forEach(t);else if(a.data.type==="DragDrop")for(let n of["drag","drop"])a.data.dragDropActions[n].forEach(t);else if(a.data.type==="GameControl")for(let n of["idle","move","jump","run"])a.data.gameActions[n].forEach(t);else if(a.data.type==="Resize")for(let n of a.data.breakpoints)n.data.actions.forEach(t);else a.data.type==="LookAt"||a.data.type==="API"||a.data.actions.forEach(t)})}},$be=class{constructor(e,t,i,r,a){this._aspect=1,this.enableResponsive=!1,this._renderer=e,this._camera=t,this._frameSize=new Ce().copy(i),this._editorSize=new Ce().copy(r),this._aspect=t.aspect,this._fov=a??t.fov}set frameSize(e){this._frameSize.copy(e)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let e=this._frameSize.x,t=this._frameSize.y,i=this._editorSize.y;this._aspect=e/t,t<=i&&(this._camera.zoom*=i/t),this._renderer.setViewport(0,0,e,t)}updateCamera(e=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let t=this._frameSize.y,i=this._editorSize.y,r=this._fov;if(e&&t>i){let a=Ube(t,1080,2160,1,15)/100;r*=t/i,r*=1-a}this._camera.aspect=this._aspect,this._camera.fov=r,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(e){this._camera=e,this._aspect=e.aspect,this._fov=e.fov}revert(){let e=window.innerWidth,t=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,e,t),this._renderer.setSize(e,t)),this._camera&&(this._camera.aspect=e/t,this._camera.fov=this._fov,this._camera.setViewplaneSize(e,t,this.enableResponsive),this._camera.updateProjectionMatrix())}};function Ube(e,t,i,r,a){return(e-t)/(i-t)*(a-r)+r}var Wbe=class{get sharedAssets(){return this.shared}constructor(e,t={},i=!0){this.shared=new kA(e.shared,t,!0,i),this.scene=new WA(e.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(e,t){this.scene.clearScene(),this.sharedAssets.reset(e.shared),this.scene.resetAfterClear(e.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let e of this.scene.children)e instanceof Za&&!e.uiScene&&e.personalCamera.updateState(e.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(e=>{e instanceof Vn&&e.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Hbe=class{constructor({x:e=10,y:t=10}){this._startTime=0;let i=document.getElementById("spe-perfs");i?this.element=i:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${e}px`,this.element.style.top=`${t}px`}dispose(){var e;(e=this.element.parentElement)==null||e.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let e=performance.now()-this._startTime;this.element.innerHTML=e.toFixed(3)+" ms"}};function Gbe(e){let t;if(e.index)for(let i=0;i<e.index.array.length;i+=3)t=e.index.array[i],e.index.array[i]=e.index.array[i+2],e.index.array[i+2]=t}function $f(e){return e instanceof xm?"SubdivObject":e.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function qbe(e,t){let i={};return e.traverseEntity(r=>{var a;if(!r.visible||!(r instanceof ns)||r.type!=="Mesh"||Array.isArray(r.material)||r.states&&Object.keys(r.states).length)return;let n=r.parent;for(;n;){if(n instanceof ns&&r.states&&Object.keys(r.states).length)return;n=n.parent}let s=r.material.uuid,o=t.shared.materials[s];if(o){if(!Cn.isMergable(o))return}else{let u=(a=t.scene.objects.get(r.uuid))==null?void 0:a.data;if(u&&"material"in u&&typeof u.material!="string"){if(!Cn.isMergable(u.material))return;s=Cn.getHash(u.material)}}i[s]||(i[s]={});let l=i[s][$f(r)];if(l){if(l.push(r),r.cloner)for(let u of r.cloner.children)l.push(u)}else if(i[s][$f(r)]=[r],r.cloner)for(let u of r.cloner.children)i[s][$f(r)].push(u)}),i}function Ybe(e){let t=0;return Object.values(e).forEach(i=>{Object.values(i).forEach(r=>{let a=r.length;a>t&&(t=a)})}),t}function Xbe(e,t){let i=qbe(t,e),r=Ybe(i),a=new Array(r),n=0,s=new Array(r),o=0,l=new Array(r),u=0,c=new Array(r),d=0;for(let[h,p]of Object.entries(i))for(let f of Object.values(p)){if(o=0,u=0,f.forEach(m=>{m instanceof ns&&(s[o++]=m.geometry.clone(),l[u++]=m)}),u<2)continue;for(let m=0;m<u;m++)l[m].updateWorldMatrix(!0,!1),s[m].applyMatrix4(l[m].matrixWorld),l[m].matrixWorld.determinant()<0&&Gbe(s[m]);let v=Hc(s.slice(0,o),!1);if(v){let m;switch(h){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),m=new ra(v,l[0].material);break}default:{m=new ra(v,l[0].material);break}}m.castShadow=l[0].castShadow,m.receiveShadow=l[0].receiveShadow,t.add(m);let g=y=>{d=0;for(let b of y)b.children&&g(b.children),b instanceof ns&&(Array.isArray(b.material)||i[b.material.uuid]&&i[b.material.uuid][$f(b)]&&i[b.material.uuid][$f(b)].length>1||(c[d++]=b));for(let b=0;b<d;b++)t.attach(c[b])};for(let y=0;y<u;y++){let b=l[y];g(b.children),a[n++]=b}}}for(let h=0;h<n;h++)a[h].removeFromParent()}var Kbe=fu(SH(),1),Zbe=new Ce;function Qbe(e){let t="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";e.endsWith(".spline")?console.warn(t+" The .spline files are only meant to be used by the Editor."):e.endsWith(".splinecode")||console.warn(t)}var Jbe=class{constructor(e,{renderOnDemand:t,renderMode:i="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=r=>{var a,n,s,o,l,u,c,d,h,p,f,v,m;if(this.time=r,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(a=this._perfs)==null||a.start(),!this._renderer){(n=this._perfs)==null||n.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(s=this._perfs)==null||s.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((o=this._eventManager.handlers)!=null&&o.Start.hasVideoAction||(l=this._eventManager.handlers)!=null&&l.Basic.hasVideoAction||(u=this._eventManager.handlers)!=null&&u.Conditional.hasVideoAction)&&(this._skipRender=!1),(c=this._animationControls)==null||c.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,(d=this._scene)==null||d.traverseVisibleEntity(g=>{g.type==="ParticleSystem"&&(g.update(this.dt),this._skipRender=!1)}),this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(h=this._eventManager)!=null&&h.isEnabled&&(((p=this._eventManager.handlers)==null?void 0:p.Follow).onAnimationFrameDamping(),((f=this._eventManager.handlers)==null?void 0:f.LookAt).onAnimationFrameDamping(),((v=this._eventManager.handlers)==null?void 0:v.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let g=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=g,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(m=this._perfs)==null||m.end()},this._resize=r=>{var a,n,s,o,l,u,c,d,h,p;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=Zbe.set(this._viewportWidth,this._viewportHeight)),r){let f=this._viewportWidth,v=this._viewportHeight;this._renderer.setSize(f-1,v-1,!1),this._renderer.setSize(f,v,!1)}else this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1);if(this._camera=(a=this._scene)==null?void 0:a.activeCamera,(c=this._scene)==null||c.updateViewPlaneSize(((s=(n=this._frameView)==null?void 0:n.frameSize)==null?void 0:s.x)??this._viewportWidth,((l=(o=this._frameView)==null?void 0:o.frameSize)==null?void 0:l.y)??this._viewportHeight,((u=this._frameView)==null?void 0:u.enableResponsive)??!1),this._camera){let f=Object.values(((d=this._data)==null?void 0:d.frames)??{})[0].preset??"fullscreen";(h=this._frameView)==null||h.setCamera(this._camera),(p=this._frameView)==null||p.updateCamera(f!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=lm(this._resize,10),this._onScroll=r=>{this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect())},this.canvas=e,this.renderMode=t?"auto":i,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Hbe({x:10,y:10})),Coe(e)}async load(e,t,i){Qbe(e),this.disposed=!1;let r=await(await fetch(e,i)).arrayBuffer();await this.start(r,{variables:t})}async start(e,{interactive:t=!0,variables:i}={}){var r,a,n,s;if(this.disposed)return;let o=await Ebe(e);this._data=o;let l=Abe(o);o.version&&(0,Kbe.default)(o.version,"1.9.31")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),await Promise.all([l.length&&_be(),QD(o)&&ude(),ppe(o)&&nde(),pm.physicsEnabled(o.scene.objects)&&Poe(),YD(o)&&Whe(),PI(o)&&gge(),$he(o)&&jhe(),bI(o)&&cve(),lbe(o)&&Eoe()].filter(Boolean)),l.length&&await Pbe(l),(r=this._eventManager)==null||r.deactivate(),(a=this._controls)==null||a.deactivate(),(n=this._scene)==null||n.dispose();let u=new Wbe(o);if(u.resetPersonalCameraFromDocumentData(),this._scene=u.scene,this._sharedAssetsManager=u.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let h=performance.now();Xbe(o,u.scene);let p=performance.now();console.log("Merged geometries in ",p-h," ms")}QD(o)&&this._scene.traverse(h=>{Ql(h)&&h.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var h;this._requestRenderAutoMode(),(h=this._scene)==null||h.traverse(p=>{p instanceof So&&p.pendingMediaLoad&&p.update()})}),(s=this._scene)==null||s.traverse(h=>{h.type==="ParticleSystem"&&(h.wakeUp(),h.data.autoPlay?h.start():h.stop())});let c=Object.keys(o.shared.fonts).map(h=>this._sharedAssetsManager.getFont(h).loadingPromise);if(Promise.all(c).then(()=>{u.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),YD(o)&&ybe(o)&&await Promise.all(c),bI(o)){let h=[];this._scene.traverseEntity(p=>{(p instanceof zn||p instanceof Za)&&p.uiCanvas&&h.push(p.uiCanvas)}),await Promise.all(h.map(p=>p.promise))}if(this._scene.rewriteEventsBeforeGoToPlayMode(),rP(this._scene.activePage,this._sharedAssetsManager),!this._renderer&&(this._renderer=new Kme({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=o.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.enableUIOverlay(),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode),o.shared.images.SplineWatermark)){let h=this._sharedAssetsManager.getImage("SplineWatermark");await h.loadPromise;let p=h.getTexture(1001);this._renderer.pipeline.setWatermark(p)}PI(o)&&this._scene.initializeSplatViewer(),o.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(o.scene.blueNoiseTextureData);let d=Object.values(o.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(d.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=d.size[0],this._viewportHeight=d.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new $be(this._renderer,this._camera,new Ce(this._viewportWidth,this._viewportHeight),new Ce(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=(d.allowResponsive??!1)&&d.preset==="fullscreen"),t){let h=new vye(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,d);this._scene.updateMatrixWorld(!0),this._controls=new bbe(h),this._animationControls=new xbe(this._scene,this._requestRenderAutoMode),this._eventManager=new jbe(o.scene.publish,this._controls,this._animationControls,h,o.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),this._scene.activePage.data.postprocessing.depthOfField.enabled&&Promise.all(this._sharedAssetsManager.getImageLoadPromises()).then(()=>{this._resize(!0)}),i!==void 0&&this.setVariables(i),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var h;(h=this._renderer)==null||h.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300),document.addEventListener("scroll",this._onScroll)}setVariables(e){if(this._data!==void 0){let t=Object.entries(e);for(let[i,r]of t)this.setVariable(i,r)}}setVariable(e,t){var i;let r=this._getVariableByName(e);if(r&&!("dynamicVariableType"in r.data)){let a=t;typeof r.data.value=="number"?a=typeof t=="number"?t:typeof t=="boolean"?t===!0?1:0:parseFloat(t):typeof r.data.value=="boolean"?a=typeof t=="number"?!!t:typeof t=="boolean"?t:t.toLocaleLowerCase()==="false"?!1:!!t:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(a=t.toString());let n=typeof a=="string"?{textValue:a}:a;(i=this._sharedAssetsManager)==null||i.updateVariable(r.id,n),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${e} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${e} cannot be updated from code.`)}getVariables(){let e={};return this._data&&this._data.shared.variables.forEach(t=>{e[t.data.name]===void 0&&(e[t.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(t.id)))}),e}getVariable(e){let t=this._getVariableByName(e);if(t){let i=this._sharedAssetsManager.getVariable(t.id);return this._getVariableValue(i)}}_getVariableValue(e){return typeof e!="string"&&_n.isTextValue(e)?_n.getDisplayedValue(e):e}_getVariableByName(e){if(this._data){if(this._variablesCache.has(e))return this._variablesCache.get(e);let t=this._data.shared.variables.find(i=>i.data.name===e);return t&&this._variablesCache.set(e,t),t}}findObjectById(e){var t;let i=(t=this._scene)==null?void 0:t.getObjectByProperty("uuid",e);return this._createProxyObject(i)}findObjectByName(e){var t;let i=(t=this._scene)==null?void 0:t.getObjectByName(e);return this._createProxyObject(i)}getAllObjects(){var e;let t=[];return(e=this._scene)==null||e.traverseEntity(i=>{if(i.uuid!==Cp&&!this._scene.isInvisibleObjects(i)&&!(i instanceof Za)){let r=this._createProxyObject(i);r&&t.push(r)}}),t}getSplineEvents(){var e,t;return((t=(e=this._eventManager)==null?void 0:e.handlers)==null?void 0:t.Spline).splineEvents}emitEvent(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEvent(e)}emitEventReverse(e,t){var i;(i=this.findObjectById(t)||this.findObjectByName(t))==null||i.emitEventReverse(e)}addEventListener(e,t){this.canvas.addEventListener(e,t)}removeEventListener(e,t){this.canvas.removeEventListener(e,t)}setZoom(e){var t,i;((t=this._controls)==null?void 0:t.orbitControls)instanceof X8&&((i=this._controls)==null||i.orbitControls.setZoom(e))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(e,t){this._viewportWidth=e,this._viewportHeight=t,this._viewportMode=2,this._resize()}setBackgroundColor(e){var t;let{r:i,g:r,b:a,a:n}={r:0,g:0,b:0,a:1},s=new En(i,r,a,n);try{s.setStyle(e)}catch{console.error("This is not a valid css color",e)}(t=this._scene)==null||t.activePage.setBackgroundColor(s),this._requestRenderAutoMode()}dispose(){var e,t,i,r,a,n,s;this.disposed=!0,(e=this._eventManager)==null||e.deactivate(),(t=this._scene)==null||t.dispose(),(i=this._sharedAssetsManager)==null||i.dispose(),this._proxyObjectCache.forEach(o=>{ok.unsubscribe(o)}),this._variablesCache.clear(),(r=this._renderer)==null||r.setAnimationLoop(null),(a=this._renderer)==null||a.dispose(),this._renderer=void 0,(n=this._sharedAssetsManager)==null||n.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(s=this._controls)==null||s.deactivate(),this.dt=0,_oe(this.canvas),document.removeEventListener("scroll",this._onScroll)}get isStopped(){return this._isPaused}stop(){var e,t,i;this._isPaused||((e=this._renderer)==null||e.setAnimationLoop(null),this._isPaused=!0,(t=this._eventManager)==null||t.pause(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var e,t,i;!this._isPaused||(this._isPaused=!1,(e=this._eventManager)==null||e.resume(),(t=this._controls)!=null&&t.orbitControls&&(this._controls.orbitControls.enabled=!0),(i=this._renderer)==null||i.setAnimationLoop(this.render))}setGlobalEvents(e){var t;(t=this._eventManager)==null||t.updateUseWindowEvents(e)}get data(){return this._data}_createProxyObject(e){var t;if(e==null)return;if(this._proxyObjectCache.has(e.uuid))return this._proxyObjectCache.get(e.uuid);let i;e.traverseAncestors(n=>{n instanceof Za&&(i=n.name)});let r={name:e.name,uuid:e.uuid,visible:e.visible,intensity:e.intensity,position:e.position,rotation:e.rotation,scale:e.scale,type:e.data.type,page:i,parentUuid:e.parent instanceof Za||e instanceof WA||(t=e.parent)==null?void 0:t.uuid,emitEvent(n){e.dispatchEvent({type:"userEvent",eventName:n})},emitEventReverse(n){e.dispatchEvent({type:"userEvent",eventName:n,reverse:!0})}},a=ok(r,(n,s)=>{var o;typeof e[n]!="object"&&((o=Object.getOwnPropertyDescriptor(e,n))!=null&&o.writable)&&(e[n]=s),this._requestRenderAutoMode(),e.updateMatrix()});return this._proxyObjectCache.set(e.uuid,a),a}setUIWasmUrl(e){yV.skiaWasmUrl=e}};const e1e={id:"container"},t1e=se({__name:"VSpline",setup(e){return xi(()=>{const t=document.getElementById("canvas3d");new Jbe(t).load("https://prod.spline.design/aRLl3q9LCMYk0y52/scene.splinecode")}),(t,i)=>(N(),ee("div",e1e,i[0]||(i[0]=[ve("canvas",{id:"canvas3d"},null,-1)])))}}),i1e=Ga(t1e,[["__scopeId","data-v-02cad081"]]),r1e={id:"container"},a1e=["data-spotlight"],n1e=se({__name:"VTextSpotlight",props:{text:{type:String,default:"V-UI From Arco"}},setup(e){return xi(()=>{}),(t,i)=>(N(),ee("div",r1e,[ve("h1",{"data-spotlight":e.text},Bt(e.text),9,a1e)]))}}),s1e=Ga(n1e,[["__scopeId","data-v-66408ba6"]]),o1e={id:"container"},l1e={class:"container-text"},u1e=se({__name:"VTextGradientColor",props:{text:{type:String,default:"V-UI From Arco"}},setup(e){return xi(()=>{}),(t,i)=>(N(),ee("div",o1e,[ve("div",l1e,[ve("h1",null,Bt(e.text),1)])]))}}),c1e=Ga(u1e,[["__scopeId","data-v-d07197f8"]]),d1e={class:"container"},h1e={class:"animation-container"},p1e={class:"svgWrapper"},f1e={id:"text",viewBox:"0 0 100% 100%"},m1e={"text-anchor":"middle","dominant-baseline":"middle",x:"50%",y:"50%"},v1e=se({__name:"VTextPath",props:{colors:Object,type:{type:String,default:"1"},text:{type:String,default:"V-UI"}},setup(e){iE(o=>({"3625e0b4":ur(r),"3625e0b2":ur(a),"3625e0b0":ur(n),"3625e0ae":ur(s)}));const t=e,i=t?.colors||["#59C173","#a17fe0","#5D26C1","#d000ff"],r=i[0],a=i[1],n=i[2],s=i[3];return(o,l)=>(N(),ee("div",d1e,[ve("div",h1e,[(N(),ee("svg",p1e,[ve("symbol",f1e,[ve("text",m1e,Bt(e.text),1)]),l[0]||(l[0]=ve("use",{"xlink:href":"#text",class:"text"},null,-1)),l[1]||(l[1]=ve("use",{"xlink:href":"#text",class:"text"},null,-1)),l[2]||(l[2]=ve("use",{"xlink:href":"#text",class:"text"},null,-1)),l[3]||(l[3]=ve("use",{"xlink:href":"#text",class:"text"},null,-1))]))])]))}}),g1e=Ga(v1e,[["__scopeId","data-v-f346447a"]]),y1e={id:"container"},b1e={class:"tittle-animation"},w1e={class:"text-typing"},x1e=se({__name:"VTextTyping",props:{text:{type:String,default:"V-UI From Arco Vertical Animation seems very Adorable. "},color:{type:String,default:"red"}},setup(e){iE(r=>({"0b983d80":ur(i)}));const i=e.color;return xi(()=>{}),(r,a)=>(N(),ee("div",y1e,[ve("h2",b1e,[ve("span",w1e,Bt(e.text),1)])]))}}),S1e=Ga(x1e,[["__scopeId","data-v-60ee0cff"]]),C1e={id:"container"},_1e=se({__name:"VTextRain",props:{color:{type:String,default:"#f4427d"}},setup(e){const t=e;return xi(()=>{let i=document.querySelector("canvas"),r=i.getContext("2d");i.width=window.innerWidth,i.height=window.innerHeight;let n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ123456789@#$%^&*()*&^%+-/~{[|`]}".split("");for(var s=10,o=i.width,l=[],u=0;u<o;u++)l[u]=1;function c(){r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,i.width,i.height);for(var d=0;d<l.length;d++){var h=n[Math.floor(Math.random()*n.length)];r.fillStyle=t.color,r.fillText(h,d*s,l[d]*s),l[d]++,l[d]*s>i.height&&Math.random()>.95&&(l[d]=0)}}setInterval(c,35)}),(i,r)=>(N(),ee("div",C1e,r[0]||(r[0]=[ve("div",{id:"canvasContainer"},[ve("canvas")],-1)])))}}),M1e=Ga(_1e,[["__scopeId","data-v-ea653103"]]),E1e={id:"container"},A1e=se({__name:"VBackground",props:{colors:Object},setup(e){const t=e,i=t?.colors||["#999","#999","#999","#999"];return i[0],i[1],i[2],i[3],xi(()=>{}),(r,a)=>(N(),ee("div",E1e,a[0]||(a[0]=[rE('<svg preserveAspectRatio="xMidYMid slice" viewBox="10 10 80 80" data-v-e4fb8f1d><path fill="#9b5de5" class="out-top" d="M37-5C25.1-14.7,5.7-19.1-9.2-10-28.5,1.8-32.7,31.1-19.8,49c15.5,21.5,52.6,22,67.2,2.3C59.4,35,53.7,8.5,37-5Z" data-v-e4fb8f1d></path><path fill="#f15bb5" class="in-top" d="M20.6,4.1C11.6,1.5-1.9,2.5-8,11.2-16.3,23.1-8.2,45.6,7.4,50S42.1,38.9,41,24.5C40.2,14.1,29.4,6.6,20.6,4.1Z" data-v-e4fb8f1d></path><path fill="#00bbf9" class="out-bottom" d="M105.9,48.6c-12.4-8.2-29.3-4.8-39.4.8-23.4,12.8-37.7,51.9-19.1,74.1s63.9,15.3,76-5.6c7.6-13.3,1.8-31.1-2.3-43.8C117.6,63.3,114.7,54.3,105.9,48.6Z" data-v-e4fb8f1d></path><path fill="#00f5d4" class="in-bottom" d="M102,67.1c-9.6-6.1-22-3.1-29.5,2-15.4,10.7-19.6,37.5-7.6,47.8s35.9,3.9,44.5-12.5C115.5,92.6,113.9,74.6,102,67.1Z" data-v-e4fb8f1d></path></svg>',1)])))}}),P1e=Ga(A1e,[["__scopeId","data-v-e4fb8f1d"]]),T1e={id:"container"},k1e={viewBox:"0 0 400 200","stroke-width":"1"},O1e={"text-anchor":"middle",x:"50%",y:"35%","stroke-dasharray":"700 700","stroke-dashoffset":"700",fill:"none",stroke:"url(#Gradient1)",dy:"1em","font-size":"70"},D1e=se({__name:"VTextLine",props:{text:{type:String,default:"Hello World"}},setup(e){return(t,i)=>(N(),ee("div",T1e,[(N(),ee("svg",k1e,[i[1]||(i[1]=ve("defs",null,[ve("linearGradient",{id:"Gradient1",x1:"0",y1:"0",x2:"100%",y2:"0"},[ve("stop",{offset:"0%","stop-color":"#BBC42A"}),ve("stop",{offset:"100%","stop-color":"#ED6E46"})])],-1)),ve("text",O1e,[ti(Bt(e.text)+" ",1),i[0]||(i[0]=ve("animate",{dur:"5s",repeatCount:"indefinite",attributeName:"stroke-dashoffset",values:"700;0"},null,-1))])]))]))}}),I1e=Ga(D1e,[["__scopeId","data-v-f37edaff"]]),L1e={id:"container"},B1e=se({__name:"VBackgroundLine",setup(e){return xi(()=>{}),(t,i)=>(N(),ee("div",L1e,i[0]||(i[0]=[ve("div",{id:"wave"},null,-1)])))}}),z1e=Ga(B1e,[["__scopeId","data-v-cc18a8fb"]]);var R1e=Object.defineProperty,T4=Object.getOwnPropertySymbols,N1e=Object.prototype.hasOwnProperty,V1e=Object.prototype.propertyIsEnumerable,k4=(e,t,i)=>t in e?R1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,O4=(e,t)=>{for(var i in t||(t={}))N1e.call(t,i)&&k4(e,i,t[i]);if(T4)for(var i of T4(t))V1e.call(t,i)&&k4(e,i,t[i]);return e};function F1e(e){return zg(e)?{top:0,bottom:window.innerHeight}:e.getBoundingClientRect()}const j1e=se({name:"Affix",components:{ResizeObserver:Ao},props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number},target:{type:[String,Object,Function]},targetContainer:{type:[String,Object,Function]}},emits:{change:e=>!0},setup(e,{emit:t}){const i=Se("affix"),{target:r,targetContainer:a}=yt(e),n=ie(),s=ie(),o=ie(!1),l=ie({}),u=ie({}),c=T(()=>({[i]:o.value})),d=ud(()=>{if(!n.value||!s.value)return;const{offsetTop:h,offsetBottom:p}=e,f=ei(p)?"top":"bottom",v=n.value.getBoundingClientRect(),m=F1e(s.value);let g=!1,y={};const b={width:`${n.value.offsetWidth}px`,height:`${n.value.offsetHeight}px`};f==="top"?(g=v.top-m.top<(h||0),y=g?{position:"fixed",top:`${m.top+(h||0)}px`}:{}):(g=m.bottom-v.bottom<(p||0),y=g?{position:"fixed",bottom:`${window.innerHeight-m.bottom+(p||0)}px`}:{}),g!==o.value&&(o.value=g,t("change",g)),l.value=b,u.value=O4(O4({},y),g?b:{})});return xi(()=>{on(h=>{const p=r&&r.value!==window&&el(r.value)||window;s.value=p,p&&(wr(p,"scroll",d),wr(p,"resize",d),h(()=>{Ir(p,"scroll",d),Ir(p,"resize",d)}))}),on(h=>{if(!s.value)return;const p=a&&a.value!==window&&el(a.value)||window;p&&(wr(p,"scroll",d),wr(p,"resize",d),h(()=>{Ir(p,"scroll",d),Ir(p,"resize",d)}))})}),{wrapperRef:n,isFixed:o,classNames:c,placeholderStyles:l,fixedStyles:u,updatePositionThrottle:d}},methods:{updatePosition(){this.updatePositionThrottle()}}}),$1e={ref:"wrapperRef"};function U1e(e,t,i,r,a,n){const s=be("ResizeObserver");return N(),De(s,{onResize:e.updatePositionThrottle},{default:He(()=>[ve("div",$1e,[e.isFixed?(N(),ee("div",{key:0,style:It(e.placeholderStyles)},null,4)):Me("v-if",!0),ve("div",{class:Y(e.classNames),style:It(e.fixedStyles)},[_(s,{onResize:e.updatePositionThrottle},{default:He(()=>[ye(e.$slots,"default")]),_:3},8,["onResize"])],6)],512)]),_:3},8,["onResize"])}var eS=We(j1e,[["render",U1e]]);const W1e=Object.assign(eS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+eS.name,eS)}}),H1e=se({name:"IconInfoCircleFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-info-circle-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),G1e=["stroke-width","stroke-linecap","stroke-linejoin"],q1e=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm2-30a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2Zm0 17h1a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-6a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h1v-8a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v11Z",fill:"currentColor",stroke:"none"},null,-1),Y1e=[q1e];function X1e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Y1e,14,G1e)}var tS=We(H1e,[["render",X1e]]);const Ym=Object.assign(tS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+tS.name,tS)}}),K1e=se({name:"Alert",components:{IconHover:Ur,IconClose:kn,IconInfoCircleFill:Ym,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},title:String,banner:{type:Boolean,default:!1},center:{type:Boolean,default:!1}},emits:{close:e=>!0,afterClose:()=>!0},setup(e,{slots:t,emit:i}){const r=Se("alert"),a=ie(!0),n=l=>{a.value=!1,i("close",l)},s=()=>{i("afterClose")},o=T(()=>[r,`${r}-${e.type}`,{[`${r}-with-title`]:!!(e.title||t.title),[`${r}-banner`]:e.banner,[`${r}-center`]:e.center}]);return{prefixCls:r,cls:o,visible:a,handleClose:n,handleAfterLeave:s}}});function Z1e(e,t,i,r,a,n){const s=be("icon-info-circle-fill"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill"),c=be("icon-close"),d=be("icon-hover");return N(),De(rs,{name:"zoom-in-top",onAfterLeave:e.handleAfterLeave},{default:He(()=>[e.visible?(N(),ee("div",{key:0,role:"alert",class:Y(e.cls)},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon",{},()=>[e.type==="info"?(N(),De(s,{key:0})):e.type==="success"?(N(),De(o,{key:1})):e.type==="warning"?(N(),De(l,{key:2})):e.type==="error"?(N(),De(u,{key:3})):Me("v-if",!0)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-body`)},[e.title||e.$slots.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2)],2),e.$slots.action?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-action`)},[ye(e.$slots,"action")],2)):Me("v-if",!0),e.closable?(N(),ee("div",{key:2,tabindex:"-1",role:"button","aria-label":"Close",class:Y(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...h)=>e.handleClose&&e.handleClose(...h))},[ye(e.$slots,"close-element",{},()=>[_(d,null,{default:He(()=>[_(c)]),_:1})])],2)):Me("v-if",!0)],2)):Me("v-if",!0)]),_:3},8,["onAfterLeave"])}var iS=We(K1e,[["render",Z1e]]);const Z8=Object.assign(iS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+iS.name,iS)}});function D4(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function I4(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function rS(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var i=getComputedStyle(e,null);return I4(i.overflowY,t)||I4(i.overflowX,t)||function(r){var a=function(n){if(!n.ownerDocument||!n.ownerDocument.defaultView)return null;try{return n.ownerDocument.defaultView.frameElement}catch{return null}}(r);return!!a&&(a.clientHeight<r.scrollHeight||a.clientWidth<r.scrollWidth)}(e)}return!1}function Ag(e,t,i,r,a,n,s,o){return n<e&&s>t||n>e&&s<t?0:n<=e&&o<=i||s>=t&&o>=i?n-e-r:s>t&&o<i||n<e&&o>i?s-t+a:0}var OM=function(e,t){var i=window,r=t.scrollMode,a=t.block,n=t.inline,s=t.boundary,o=t.skipOverflowHiddenElements,l=typeof s=="function"?s:function(le){return le!==s};if(!D4(e))throw new TypeError("Invalid target");for(var u,c,d=document.scrollingElement||document.documentElement,h=[],p=e;D4(p)&&l(p);){if((p=(c=(u=p).parentElement)==null?u.getRootNode().host||null:c)===d){h.push(p);break}p!=null&&p===document.body&&rS(p)&&!rS(document.documentElement)||p!=null&&rS(p,o)&&h.push(p)}for(var f=i.visualViewport?i.visualViewport.width:innerWidth,v=i.visualViewport?i.visualViewport.height:innerHeight,m=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),b=y.height,x=y.width,S=y.top,w=y.right,E=y.bottom,M=y.left,P=a==="start"||a==="nearest"?S:a==="end"?E:S+b/2,A=n==="center"?M+x/2:n==="end"?w:M,k=[],I=0;I<h.length;I++){var O=h[I],D=O.getBoundingClientRect(),F=D.height,U=D.width,z=D.top,B=D.right,W=D.bottom,R=D.left;if(r==="if-needed"&&S>=0&&M>=0&&E<=v&&w<=f&&S>=z&&E<=W&&M>=R&&w<=B)return k;var $=getComputedStyle(O),q=parseInt($.borderLeftWidth,10),Z=parseInt($.borderTopWidth,10),G=parseInt($.borderRightWidth,10),X=parseInt($.borderBottomWidth,10),J=0,pe=0,fe="offsetWidth"in O?O.offsetWidth-O.clientWidth-q-G:0,de="offsetHeight"in O?O.offsetHeight-O.clientHeight-Z-X:0,ge="offsetWidth"in O?O.offsetWidth===0?0:U/O.offsetWidth:0,me="offsetHeight"in O?O.offsetHeight===0?0:F/O.offsetHeight:0;if(d===O)J=a==="start"?P:a==="end"?P-v:a==="nearest"?Ag(g,g+v,v,Z,X,g+P,g+P+b,b):P-v/2,pe=n==="start"?A:n==="center"?A-f/2:n==="end"?A-f:Ag(m,m+f,f,q,G,m+A,m+A+x,x),J=Math.max(0,J+g),pe=Math.max(0,pe+m);else{J=a==="start"?P-z-Z:a==="end"?P-W+X+de:a==="nearest"?Ag(z,W,F,Z,X+de,P,P+b,b):P-(z+F/2)+de/2,pe=n==="start"?A-R-q:n==="center"?A-(R+U/2)+fe/2:n==="end"?A-B+G+fe:Ag(R,B,U,q,G+fe,A,A+x,x);var ke=O.scrollLeft,ce=O.scrollTop;P+=ce-(J=Math.max(0,Math.min(ce+J/me,O.scrollHeight-F/me+de))),A+=ke-(pe=Math.max(0,Math.min(ke+pe/ge,O.scrollWidth-U/ge+fe)))}k.push({el:O,top:J,left:pe})}return k},Xm=function(e){return function(t){return Math.pow(t,e)}},Km=function(e){return function(t){return 1-Math.abs(Math.pow(t-1,e))}},o1=function(e){return function(t){return t<.5?Xm(e)(t*2)/2:Km(e)(t*2-1)/2+.5}},Q1e=function(e){return e},J1e=Xm(2),ewe=Km(2),twe=o1(2),iwe=Xm(3),rwe=Km(3),awe=o1(3),nwe=Xm(4),swe=Km(4),owe=o1(4),lwe=Xm(5),uwe=Km(5),cwe=o1(5),dwe=function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},hwe=function(e){return Math.sin(Math.PI/2*e)},pwe=function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},nP=function(e){var t=7.5625,i=2.75;return e<1/i?t*e*e:e<2/i?(e-=1.5/i,t*e*e+.75):e<2.5/i?(e-=2.25/i,t*e*e+.9375):(e-=2.625/i,t*e*e+.984375)},Q8=function(e){return 1-nP(1-e)},fwe=function(e){return e<.5?Q8(e*2)*.5:nP(e*2-1)*.5+.5},mwe=Object.freeze({linear:Q1e,quadIn:J1e,quadOut:ewe,quadInOut:twe,cubicIn:iwe,cubicOut:rwe,cubicInOut:awe,quartIn:nwe,quartOut:swe,quartInOut:owe,quintIn:lwe,quintOut:uwe,quintInOut:cwe,sineIn:dwe,sineOut:hwe,sineInOut:pwe,bounceOut:nP,bounceIn:Q8,bounceInOut:fwe}),Ed=function(t){var i=t.from,r=t.to,a=t.duration,n=t.delay,s=t.easing,o=t.onStart,l=t.onUpdate,u=t.onFinish;for(var c in i)r[c]===void 0&&(r[c]=i[c]);for(var d in r)i[d]===void 0&&(i[d]=r[d]);this.from=i,this.to=r,this.duration=a||500,this.delay=n||0,this.easing=s||"linear",this.onStart=o,this.onUpdate=l||function(){},this.onFinish=u,this.startTime=Date.now()+this.delay,this.started=!1,this.finished=!1,this.timer=null,this.keys={}};Ed.prototype.update=function(){if(this.time=Date.now(),!(this.time<this.startTime)&&!this.finished){if(this.elapsed===this.duration){this.finished||(this.finished=!0,this.onFinish&&this.onFinish(this.keys));return}this.elapsed=this.time-this.startTime,this.elapsed=this.elapsed>this.duration?this.duration:this.elapsed;for(var t in this.to)this.keys[t]=this.from[t]+(this.to[t]-this.from[t])*mwe[this.easing](this.elapsed/this.duration);this.started||(this.onStart&&this.onStart(this.keys),this.started=!0),this.onUpdate(this.keys)}};Ed.prototype.start=function(){var t=this;this.startTime=Date.now()+this.delay;var i=function(){t.update(),t.timer=requestAnimationFrame(i),t.finished&&(cancelAnimationFrame(t.timer),t.timer=null)};i()};Ed.prototype.stop=function(){cancelAnimationFrame(this.timer),this.timer=null};function vwe(e,t,i){new Ed({from:{scrollTop:e.scrollTop},to:{scrollTop:t},easing:"quartOut",duration:300,onUpdate:a=>{e.scrollTop=a.scrollTop},onFinish:()=>{Zt(i)&&i()}}).start()}const J8=Symbol("ArcoAnchor"),gwe=["start","end","center","nearest"],ywe=se({name:"Anchor",props:{boundary:{type:[Number,String],default:"start",validator:e=>Mt(e)||gwe.includes(e)},lineLess:{type:Boolean,default:!1},scrollContainer:{type:[String,Object]},changeHash:{type:Boolean,default:!0},smooth:{type:Boolean,default:!0}},emits:{select:(e,t)=>!0,change:e=>!0},setup(e,{emit:t}){const i=Se("anchor"),r=ie(),a=ie(),n=gt({}),s=ie(""),o=ie(!1),l=ie(),u=ie(),c=(S,w)=>{S&&(n[S]=w)},d=S=>{delete n[S]},h=(S,w)=>{e.changeHash||S.preventDefault(),w&&(p(w),v(w)),t("select",w,s.value)},p=S=>{try{const w=el(S);if(!w)return;let E,M=0;Mt(e.boundary)?(E="start",M=e.boundary):E=e.boundary;const P=OM(w,{block:E});if(!P.length)return;const{el:A,top:k}=P[0],I=k-M;vwe(A,I,()=>{o.value=!1}),o.value=!0}catch(w){console.error(w)}},f=ud(()=>{if(o.value)return;const S=m();if(S&&S.id){const w=`#${S.id}`;v(w)}}),v=S=>{if(!n[S]&&r.value){const w=el(`a[data-href='${S}']`,r.value);if(!w)return;n[S]=w}S!==s.value&&(s.value=S,hr(()=>{t("change",S)}))},m=()=>{if(!l.value||!u.value)return;const S=Mt(e.boundary)?e.boundary:0,w=u.value.getBoundingClientRect();for(const E of Object.keys(n)){const M=el(E);if(M){const{top:P}=M.getBoundingClientRect(),A=zg(l.value)?P-S:P-w.top-S;if(A>=0&&A<=w.height/2)return M}}};Vt(s,()=>{const S=n[s.value];!e.lineLess&&S&&a.value&&(a.value.style.top=`${S.offsetTop}px`)});const g=()=>{l.value&&wr(l.value,"scroll",f)},y=()=>{l.value&&Ir(l.value,"scroll",f)},b=()=>{e.scrollContainer?(l.value=zg(e.scrollContainer)?window:el(e.scrollContainer),u.value=zg(e.scrollContainer)?document.documentElement:el(e.scrollContainer)):(l.value=window,u.value=document.documentElement)};xi(()=>{b();const S=decodeURIComponent(window.location.hash);S?(p(S),v(S)):f(),g()}),Tn(()=>{y()}),dr(J8,gt({currentLink:s,addLink:c,removeLink:d,handleClick:h}));const x=T(()=>[i,{[`${i}-line-less`]:e.lineLess}]);return{prefixCls:i,cls:x,anchorRef:r,lineSliderRef:a}}});function bwe(e,t,i,r,a,n){return N(),ee("div",{ref:"anchorRef",class:Y(e.cls)},[e.lineLess?Me("v-if",!0):(N(),ee("div",{key:0,ref:"lineSliderRef",class:Y(`${e.prefixCls}-line-slider`)},null,2)),ve("ul",{class:Y(`${e.prefixCls}-list`)},[ye(e.$slots,"default")],2)],2)}var aS=We(ywe,[["render",bwe]]);const wwe=se({name:"AnchorLink",props:{title:String,href:String},setup(e){const t=Se("anchor"),i=`${t}-link`,r=ie(),a=Ai(J8,void 0);xi(()=>{e.href&&r.value&&a?.addLink(e.href,r.value)});const n=T(()=>[`${i}-item`,{[`${i}-active`]:a?.currentLink===e.href}]);return{prefixCls:t,linkCls:i,cls:n,linkRef:r,handleClick:o=>a?.handleClick(o,e.href)}}}),xwe=["href"];function Swe(e,t,i,r,a,n){return N(),ee("li",{ref:"linkRef",class:Y(e.cls)},[ve("a",{class:Y(e.linkCls),href:e.href,onClick:t[0]||(t[0]=(...s)=>e.handleClick&&e.handleClick(...s))},[ye(e.$slots,"default",{},()=>[ti(Bt(e.title),1)])],10,xwe),e.$slots.sublist?(N(),ee("ul",{key:0,class:Y(`${e.prefixCls}-sublist`)},[ye(e.$slots,"sublist")],2)):Me("v-if",!0)],2)}var a0=We(wwe,[["render",Swe]]);const Cwe=Object.assign(aS,{Link:a0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+aS.name,aS),e.component(i+a0.name,a0)}}),_we=se({name:"IconEmpty",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-empty`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Mwe=["stroke-width","stroke-linecap","stroke-linejoin"],Ewe=ve("path",{d:"M24 5v6m7 1 4-4m-18 4-4-4m28.5 22H28s-1 3-4 3-4-3-4-3H6.5M40 41H8a2 2 0 0 1-2-2v-8.46a2 2 0 0 1 .272-1.007l6.15-10.54A2 2 0 0 1 14.148 18H33.85a2 2 0 0 1 1.728.992l6.149 10.541A2 2 0 0 1 42 30.541V39a2 2 0 0 1-2 2Z"},null,-1),Awe=[Ewe];function Pwe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Awe,14,Mwe)}var nS=We(_we,[["render",Pwe]]);const Twe=Object.assign(nS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+nS.name,nS)}});var n0=se({name:"Empty",inheritAttrs:!1,props:{description:String,imgSrc:String,inConfigProvider:{type:Boolean,default:!1}},setup(e,{slots:t,attrs:i}){const r=Se("empty"),{t:a}=Yr(),n=Ai(Pn,void 0);return()=>{var s,o,l,u;return!e.inConfigProvider&&n?.slots.empty&&!(t.image||e.imgSrc||e.description)?n.slots.empty({component:"empty"}):_("div",it({class:r},i),[_("div",{class:`${r}-image`},[(o=(s=t.image)==null?void 0:s.call(t))!=null?o:e.imgSrc?_("img",{src:e.imgSrc,alt:e.description||"empty"},null):_(Twe,null,null)]),_("div",{class:`${r}-description`},[(u=(l=t.default)==null?void 0:l.call(t))!=null?u:e.description||a("empty.description")])])}}});const gu=Object.assign(n0,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+n0.name,n0)}}),kwe=5;var Owe=se({name:"DotLoading",props:{size:{type:Number}},setup(e){const t=Se("dot-loading");return()=>{const i=e.size?{width:`${e.size}px`,height:`${e.size}px`}:{};return _("div",{class:t,style:{width:e.size?`${e.size*7}px`:void 0,height:e.size?`${e.size}px`:void 0}},[Array(kwe).fill(1).map((r,a)=>_("div",{class:`${t}-item`,key:a,style:i},null))])}}}),sS=se({name:"Spin",props:{size:{type:Number},loading:Boolean,dot:Boolean,tip:String,hideIcon:{type:Boolean,default:!1}},setup(e,{slots:t}){const i=Se("spin"),r=Ai(Pn,void 0),a=T(()=>[i,{[`${i}-loading`]:e.loading,[`${i}-with-tip`]:e.tip&&!t.default}]),n=()=>{if(t.icon){const o=_h(t.icon());if(o)return Uh(o,{spin:!0})}return t.element?t.element():e.dot?_(Owe,{size:e.size},null):r?.slots.loading?r.slots.loading():_($n,{spin:!0,size:e.size},null)},s=()=>{var o,l,u;const c=e.size?{fontSize:`${e.size}px`}:void 0,d=!!((o=t.tip)!=null?o:e.tip);return _(Xt,null,[!e.hideIcon&&_("div",{class:`${i}-icon`,style:c},[n()]),d&&_("div",{class:`${i}-tip`},[(u=(l=t.tip)==null?void 0:l.call(t))!=null?u:e.tip])])};return()=>_("div",{class:a.value},[t.default?_(Xt,null,[t.default(),e.loading&&_("div",{class:`${i}-mask`},[_("div",{class:`${i}-mask-icon`},[s()])])]):s()])}});const Do=Object.assign(sS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+sS.name,sS)}}),Dwe=se({name:"Thumb",props:{data:{type:Object},direction:{type:String,default:"horizontal"},alwaysShow:{type:Boolean,default:!1},both:{type:Boolean,default:!1}},emits:["scroll"],setup(e,{emit:t}){const i=Se("scrollbar"),r=ie(!1),a=ie(),n=ie(),s=T(()=>e.direction==="horizontal"?{size:"width",direction:"left",offset:"offsetWidth",client:"clientX"}:{size:"height",direction:"top",offset:"offsetHeight",client:"clientY"}),o=ie(0),l=ie(!1),u=ie(0),c=T(()=>{var y,b;return{[s.value.size]:`${(b=(y=e.data)==null?void 0:y.thumbSize)!=null?b:0}px`,[s.value.direction]:`${o.value}px`}}),d=y=>{y.preventDefault(),n.value&&(u.value=y[s.value.client]-n.value.getBoundingClientRect()[s.value.direction],l.value=!0,wr(window,"mousemove",f),wr(window,"mouseup",v),wr(window,"contextmenu",v))},h=y=>{var b,x,S,w;if(y.preventDefault(),n.value){const E=p(y[s.value.client]>n.value.getBoundingClientRect()[s.value.direction]?o.value+((x=(b=e.data)==null?void 0:b.thumbSize)!=null?x:0):o.value-((w=(S=e.data)==null?void 0:S.thumbSize)!=null?w:0));E!==o.value&&(o.value=E,t("scroll",E))}},p=y=>y<0?0:e.data&&y>e.data.max?e.data.max:y,f=y=>{if(a.value&&n.value){const b=p(y[s.value.client]-a.value.getBoundingClientRect()[s.value.direction]-u.value);b!==o.value&&(o.value=b,t("scroll",b))}},v=()=>{l.value=!1,Ir(window,"mousemove",f),Ir(window,"mouseup",v)},m=y=>{l.value||(y=p(y),y!==o.value&&(o.value=y))},g=T(()=>[`${i}-thumb`,`${i}-thumb-direction-${e.direction}`,{[`${i}-thumb-dragging`]:l.value}]);return{visible:r,trackRef:a,thumbRef:n,prefixCls:i,thumbCls:g,thumbStyle:c,handleThumbMouseDown:d,handleTrackClick:h,setOffset:m}}});function Iwe(e,t,i,r,a,n){return N(),De(rs,null,{default:He(()=>[ve("div",{ref:"trackRef",class:Y([`${e.prefixCls}-track`,`${e.prefixCls}-track-direction-${e.direction}`]),onMousedown:t[1]||(t[1]=ks((...s)=>e.handleTrackClick&&e.handleTrackClick(...s),["self"]))},[ve("div",{ref:"thumbRef",class:Y(e.thumbCls),style:It(e.thumbStyle),onMousedown:t[0]||(t[0]=(...s)=>e.handleThumbMouseDown&&e.handleThumbMouseDown(...s))},[ve("div",{class:Y(`${e.prefixCls}-thumb-bar`)},null,2)],38)],34)]),_:1})}var Lwe=We(Dwe,[["render",Iwe]]);const L4=20,Pg=15,Bwe=se({name:"Scrollbar",components:{ResizeObserver:oc,Thumb:Lwe},inheritAttrs:!1,props:{type:{type:String,default:"embed"},outerClass:[String,Object,Array],outerStyle:{type:[String,Object,Array]},hide:{type:Boolean,default:!1},disableHorizontal:{type:Boolean,default:!1},disableVertical:{type:Boolean,default:!1}},emits:{scroll:e=>!0},setup(e,{emit:t}){const i=Se("scrollbar"),r=ie(),a=ie(),n=ie(),s=ie(),o=ie(),l=ie(!1),u=ie(!1),c=T(()=>l.value&&!e.disableHorizontal),d=T(()=>u.value&&!e.disableVertical),h=ie(!1),p=()=>{var x,S,w,E,M,P;if(r.value){const{clientWidth:A,clientHeight:k,offsetWidth:I,offsetHeight:O,scrollWidth:D,scrollHeight:F,scrollTop:U,scrollLeft:z}=r.value;l.value=D>A,u.value=F>k,h.value=c.value&&d.value;const B=e.type==="embed"&&h.value?I-Pg:I,W=e.type==="embed"&&h.value?O-Pg:O,R=Math.round(B/Math.min(D/A,B/L4)),$=B-R,q=(D-A)/$,Z=Math.round(W/Math.min(F/k,W/L4)),G=W-Z,X=(F-k)/G;if(a.value={ratio:q,thumbSize:R,max:$},n.value={ratio:X,thumbSize:Z,max:G},U>0){const J=Math.round(U/((S=(x=n.value)==null?void 0:x.ratio)!=null?S:1));(w=o.value)==null||w.setOffset(J)}if(z>0){const J=Math.round(z/((M=(E=n.value)==null?void 0:E.ratio)!=null?M:1));(P=s.value)==null||P.setOffset(J)}}};xi(()=>{p()});const f=()=>{p()},v=x=>{var S,w,E,M,P,A;if(r.value){if(c.value&&!e.disableHorizontal){const k=Math.round(r.value.scrollLeft/((w=(S=a.value)==null?void 0:S.ratio)!=null?w:1));(E=s.value)==null||E.setOffset(k)}if(d.value&&!e.disableVertical){const k=Math.round(r.value.scrollTop/((P=(M=n.value)==null?void 0:M.ratio)!=null?P:1));(A=o.value)==null||A.setOffset(k)}}t("scroll",x)},m=x=>{var S,w;r.value&&r.value.scrollTo({left:x*((w=(S=a.value)==null?void 0:S.ratio)!=null?w:1)})},g=x=>{var S,w;r.value&&r.value.scrollTo({top:x*((w=(S=n.value)==null?void 0:S.ratio)!=null?w:1)})},y=T(()=>{const x={};return e.type==="track"&&(c.value&&(x.paddingBottom=`${Pg}px`),d.value&&(x.paddingRight=`${Pg}px`)),[x,e.outerStyle]}),b=T(()=>[`${i}`,`${i}-type-${e.type}`,{[`${i}-both`]:h.value},e.outerClass]);return{prefixCls:i,cls:b,style:y,containerRef:r,horizontalThumbRef:s,verticalThumbRef:o,horizontalData:a,verticalData:n,isBoth:h,hasHorizontalScrollbar:c,hasVerticalScrollbar:d,handleResize:f,handleScroll:v,handleHorizontalScroll:m,handleVerticalScroll:g}},methods:{scrollTo(e,t){var i,r;ki(e)?(i=this.$refs.containerRef)==null||i.scrollTo(e):(e||t)&&((r=this.$refs.containerRef)==null||r.scrollTo(e,t))},scrollTop(e){var t;(t=this.$refs.containerRef)==null||t.scrollTo({top:e})},scrollLeft(e){var t;(t=this.$refs.containerRef)==null||t.scrollTo({left:e})}}});function zwe(e,t,i,r,a,n){const s=be("ResizeObserver"),o=be("thumb");return N(),ee("div",{class:Y(e.cls),style:It(e.style)},[_(s,{onResize:e.handleResize},{default:He(()=>[ve("div",it({ref:"containerRef",class:`${e.prefixCls}-container`},e.$attrs,{onScroll:t[0]||(t[0]=(...l)=>e.handleScroll&&e.handleScroll(...l))}),[_(s,{onResize:e.handleResize},{default:He(()=>[ye(e.$slots,"default")]),_:3},8,["onResize"])],16)]),_:3},8,["onResize"]),!e.hide&&e.hasHorizontalScrollbar?(N(),De(o,{key:0,ref:"horizontalThumbRef",data:e.horizontalData,direction:"horizontal",both:e.isBoth,onScroll:e.handleHorizontalScroll},null,8,["data","both","onScroll"])):Me("v-if",!0),!e.hide&&e.hasVerticalScrollbar?(N(),De(o,{key:1,ref:"verticalThumbRef",data:e.verticalData,direction:"vertical",both:e.isBoth,onScroll:e.handleVerticalScroll},null,8,["data","both","onScroll"])):Me("v-if",!0)],6)}var oS=We(Bwe,[["render",zwe]]);const Io=Object.assign(oS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+oS.name,oS)}}),Sh=e=>{const t=ie(),i=()=>oz(t.value)?t.value.$refs[e]:t.value,r=ie();return xi(()=>{r.value=i()}),Vt([t],()=>{r.value=i()}),{componentRef:t,elementRef:r}};var Rwe=Object.defineProperty,B4=Object.getOwnPropertySymbols,Nwe=Object.prototype.hasOwnProperty,Vwe=Object.prototype.propertyIsEnumerable,z4=(e,t,i)=>t in e?Rwe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Fwe=(e,t)=>{for(var i in t||(t={}))Nwe.call(t,i)&&z4(e,i,t[i]);if(B4)for(var i of B4(t))Vwe.call(t,i)&&z4(e,i,t[i]);return e};const l1=e=>{const t=T(()=>!!e.value),i=T(()=>{if(e.value)return Fwe({type:"embed"},jn(e.value)?void 0:e.value)});return{displayScrollbar:t,scrollbarProps:i}},jwe=se({name:"SelectDropdown",components:{ScrollbarComponent:Io,Empty:gu,Spin:Do},props:{loading:Boolean,empty:Boolean,virtualList:Boolean,bottomOffset:{type:Number,default:0},scrollbar:{type:[Boolean,Object],default:!0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1}},emits:["scroll","reachBottom"],setup(e,{emit:t,slots:i}){var r,a,n;const{scrollbar:s}=yt(e),o=Se("select-dropdown"),l=Ai(Pn,void 0),u=(n=(a=l==null?void 0:(r=l.slots).empty)==null?void 0:a.call(r,{component:"select"}))==null?void 0:n[0],{componentRef:c,elementRef:d}=Sh("containerRef"),{displayScrollbar:h,scrollbarProps:p}=l1(s),f=m=>{const{scrollTop:g,scrollHeight:y,offsetHeight:b}=m.target;y-(g+b)<=e.bottomOffset&&t("reachBottom",m),t("scroll",m)},v=T(()=>[o,{[`${o}-has-header`]:!!i.header,[`${o}-has-footer`]:!!i.footer}]);return{prefixCls:o,SelectEmpty:u,cls:v,wrapperRef:d,wrapperComRef:c,handleScroll:f,displayScrollbar:h,scrollbarProps:p}}});function $we(e,t,i,r,a,n){const s=be("spin");return N(),ee("div",{class:Y(e.cls)},[e.$slots.header&&(!e.empty||e.showHeaderOnEmpty)?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-header`)},[ye(e.$slots,"header")],2)):Me("v-if",!0),e.loading?(N(),De(s,{key:1,class:Y(`${e.prefixCls}-loading`)},null,8,["class"])):e.empty?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-empty`)},[ye(e.$slots,"empty",{},()=>[(N(),De(bs(e.SelectEmpty?e.SelectEmpty:"Empty")))])],2)):Me("v-if",!0),e.virtualList&&!e.loading&&!e.empty?ye(e.$slots,"virtual-list",{key:3}):Me("v-if",!0),e.virtualList?Me("v-if",!0):Ys((N(),De(bs(e.displayScrollbar?"ScrollbarComponent":"div"),it({key:4,ref:"wrapperComRef",class:`${e.prefixCls}-list-wrapper`},e.scrollbarProps,{onScroll:e.handleScroll}),{default:He(()=>[ve("ul",{class:Y(`${e.prefixCls}-list`)},[ye(e.$slots,"default")],2)]),_:3},16,["class","onScroll"])),[[Xs,!e.loading&&!e.empty]]),e.$slots.footer&&(!e.empty||e.showFooterOnEmpty)?(N(),ee("div",{key:5,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer")],2)):Me("v-if",!0)],2)}var sP=We(jwe,[["render",$we]]),R4=se({name:"IconCheck",render(){return _("svg",{"aria-hidden":"true",focusable:"false",viewBox:"0 0 1024 1024",width:"200",height:"200",fill:"currentColor"},[_("path",{d:"M877.44815445 206.10060629a64.72691371 64.72691371 0 0 0-95.14856334 4.01306852L380.73381888 685.46812814 235.22771741 533.48933518a64.72691371 64.72691371 0 0 0-92.43003222-1.03563036l-45.82665557 45.82665443a64.72691371 64.72691371 0 0 0-0.90617629 90.61767965l239.61903446 250.10479331a64.72691371 64.72691371 0 0 0 71.19960405 15.14609778 64.33855261 64.33855261 0 0 0 35.08198741-21.23042702l36.24707186-42.71976334 40.5190474-40.77795556-3.36579926-3.49525333 411.40426297-486.74638962a64.72691371 64.72691371 0 0 0-3.88361443-87.64024149l-45.3088404-45.43829334z","p-id":"840"},null)])}});const eF=Symbol("ArcoCheckboxGroup");var s0=se({name:"Checkbox",components:{IconCheck:R4,IconHover:Ur},props:{modelValue:{type:[Boolean,Array],default:void 0},defaultChecked:{type:Boolean,default:!1},value:{type:[String,Number,Boolean]},disabled:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},uninjectGroupContext:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{disabled:r,modelValue:a}=yt(e),n=Se("checkbox"),s=ie(),o=e.uninjectGroupContext?void 0:Ai(eF,void 0),l=o?.name==="ArcoCheckboxGroup",{mergedDisabled:u,eventHandlers:c}=Wr({disabled:r}),d=ie(e.defaultChecked),h=T(()=>{var x;return l?o?.computedValue:(x=e.modelValue)!=null?x:d.value}),p=T(()=>{var x;return bi(h.value)?h.value.includes((x=e.value)!=null?x:!0):h.value}),f=T(()=>o?.disabled||u?.value||!p.value&&o?.isMaxed),v=x=>{x.stopPropagation()},m=x=>{var S,w,E,M;const{checked:P}=x.target;let A=P;if(bi(h.value)){const k=new Set(h.value);P?k.add((S=e.value)!=null?S:!0):k.delete((w=e.value)!=null?w:!0),A=Array.from(k)}d.value=P,l&&bi(A)?o?.handleChange(A,x):(t("update:modelValue",A),t("change",A,x),(M=(E=c.value)==null?void 0:E.onChange)==null||M.call(E,x)),hr(()=>{s.value&&s.value.checked!==p.value&&(s.value.checked=p.value)})},g=T(()=>[n,{[`${n}-checked`]:p.value,[`${n}-indeterminate`]:e.indeterminate,[`${n}-disabled`]:f.value}]),y=x=>{var S,w;(w=(S=c.value)==null?void 0:S.onFocus)==null||w.call(S,x)},b=x=>{var S,w;(w=(S=c.value)==null?void 0:S.onBlur)==null||w.call(S,x)};return Vt(a,x=>{(ei(x)||Wn(x))&&(d.value=!1)}),Vt(h,x=>{var S;let w;bi(x)?w=x.includes((S=e.value)!=null?S:!0):w=x,d.value!==w&&(d.value=w),s.value&&s.value.checked!==w&&(s.value.checked=w)}),()=>{var x,S,w,E;return _("label",{"aria-disabled":f.value,class:g.value},[_("input",{ref:s,type:"checkbox",checked:p.value,value:e.value,class:`${n}-target`,disabled:f.value,onClick:v,onChange:m,onFocus:y,onBlur:b},null),(E=(w=(S=i.checkbox)!=null?S:(x=o?.slots)==null?void 0:x.checkbox)==null?void 0:w({checked:p.value,disabled:f.value}))!=null?E:_(Ur,{class:`${n}-icon-hover`,disabled:f.value||p.value},{default:()=>[_("div",{class:`${n}-icon`},[p.value&&_(R4,{class:`${n}-icon-check`},null)])]}),i.default&&_("span",{class:`${n}-label`},[i.default()])])}}}),o0=se({name:"CheckboxGroup",props:{modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:()=>[]},max:{type:Number},options:{type:Array},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{disabled:r}=yt(e),a=Se("checkbox-group"),{mergedDisabled:n,eventHandlers:s}=Wr({disabled:r}),o=ie(e.defaultValue),l=T(()=>bi(e.modelValue)?e.modelValue:o.value),u=T(()=>e.max===void 0?!1:l.value.length>=e.max),c=T(()=>{var f;return((f=e.options)!=null?f:[]).map(v=>na(v)||Mt(v)?{label:v,value:v}:v)});dr(eF,gt({name:"ArcoCheckboxGroup",computedValue:l,disabled:n,isMaxed:u,slots:i,handleChange:(f,v)=>{var m,g;o.value=f,t("update:modelValue",f),t("change",f,v),(g=(m=s.value)==null?void 0:m.onChange)==null||g.call(m,v)}}));const h=T(()=>[a,`${a}-direction-${e.direction}`]);Vt(()=>e.modelValue,f=>{bi(f)?o.value=[...f]:o.value=[]});const p=()=>c.value.map(f=>{const v=l.value.includes(f.value);return _(s0,{key:f.value,value:f.value,disabled:f.disabled||!v&&u.value,indeterminate:f.indeterminate,modelValue:v},{default:()=>[i.label?i.label({data:f}):Zt(f.label)?f.label():f.label]})});return()=>{var f;return _("span",{class:h.value},[c.value.length>0?p():(f=i.default)==null?void 0:f.call(i)])}}});const Eo=Object.assign(s0,{Group:o0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+s0.name,s0),e.component(i+o0.name,o0)}}),tF=Symbol("ArcoSelectContext");var Uwe=Object.defineProperty,Wwe=Object.defineProperties,Hwe=Object.getOwnPropertyDescriptors,N4=Object.getOwnPropertySymbols,Gwe=Object.prototype.hasOwnProperty,qwe=Object.prototype.propertyIsEnumerable,V4=(e,t,i)=>t in e?Uwe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,oP=(e,t)=>{for(var i in t||(t={}))Gwe.call(t,i)&&V4(e,i,t[i]);if(N4)for(var i of N4(t))qwe.call(t,i)&&V4(e,i,t[i]);return e},iF=(e,t)=>Wwe(e,Hwe(t));const Ywe=e=>ki(e)&&"isGroup"in e,rF=e=>ki(e)&&"isGroup"in e,Xwe=(e,t="value")=>String(ki(e)?e[t]:e),gd=(e,t="value")=>ki(e)?`__arco__option__object__${e[t]}`:e||Mt(e)||na(e)||jn(e)?`__arco__option__${typeof e}-${e}`:"",Kwe=e=>e.has("__arco__option__string-"),Zwe=(e,{valueKey:t,fieldNames:i,origin:r,index:a=-1})=>{var n;if(ki(e)){const o=e[i.value];return{raw:e,index:a,key:gd(o,t),origin:r,value:o,label:(n=e[i.label])!=null?n:Xwe(o,t),render:e[i.render],disabled:!!e[i.disabled],tagProps:e[i.tagProps]}}const s={value:e,label:String(e),disabled:!1};return oP({raw:s,index:a,key:gd(e,t),origin:r},s)},DM=(e,{valueKey:t,fieldNames:i,origin:r,optionInfoMap:a})=>{var n;const s=[];for(const o of e)if(Ywe(o)){const l=DM((n=o.options)!=null?n:[],{valueKey:t,fieldNames:i,origin:r,optionInfoMap:a});l.length>0&&s.push(iF(oP({},o),{key:`__arco__group__${o.label}`,options:l}))}else{const l=Zwe(o,{valueKey:t,fieldNames:i,origin:r});s.push(l),a.get(l.key)||a.set(l.key,l)}return s},F4=(e,{inputValue:t,filterOption:i})=>{const r=a=>{var n;const s=[];for(const o of a)if(rF(o)){const l=r((n=o.options)!=null?n:[]);l.length>0&&s.push(iF(oP({},o),{options:l}))}else u1(o,{inputValue:t,filterOption:i})&&s.push(o);return s};return r(e)},u1=(e,{inputValue:t,filterOption:i})=>Zt(i)?!t||i(t,e.raw):i?e.label.toLowerCase().includes((t??"").toLowerCase()):!0,Qwe=(e,t)=>{if(!e||!t||e.length!==t.length)return!1;for(const i of Object.keys(e))if(!Pp(e[i],t[i]))return!1;return!0},Jwe=(e,t)=>{if(!e||!t)return!1;const{length:i}=e;if(i!==t.length)return!1;for(let r=0;r<i;r++)if(!Pp(e[r],t[r]))return!1;return!0},Pp=(e,t)=>{const i=Object.prototype.toString.call(e);return i!==Object.prototype.toString.call(t)?!1:i==="[object Object]"?Qwe(e,t):i==="[object Array]"?Jwe(e,t):i==="[object Function]"?e===t?!0:e.toString()===t.toString():e===t},exe=se({name:"Option",components:{Checkbox:Eo},props:{value:{type:[String,Number,Boolean,Object],default:void 0},label:String,disabled:Boolean,tagProps:{type:Object},extra:{type:Object},index:{type:Number},internal:Boolean},setup(e){const{disabled:t,tagProps:i,index:r}=yt(e),a=Se("select-option"),n=Ai(tF,void 0),s=xs(),o=ie(),l=ie(i.value);Vt(i,(w,E)=>{Pp(w,E)||(l.value=w)});const u=ie(""),c=T(()=>{var w,E;return(E=(w=e.value)!=null?w:e.label)!=null?E:u.value}),d=T(()=>{var w;return(w=e.label)!=null?w:u.value}),h=T(()=>gd(c.value,n?.valueKey)),p=T(()=>{var w;return(w=n?.component)!=null?w:"li"}),f=()=>{var w;if(!e.label&&o.value){const E=(w=o.value.textContent)!=null?w:"";u.value!==E&&(u.value=E)}};xi(()=>f()),Ss(()=>f());const v=T(()=>{var w;return(w=n?.valueKeys.includes(h.value))!=null?w:!1}),m=T(()=>n?.activeKey===h.value);let g=ie(!0);if(!e.internal){const w=gt({raw:{value:c,label:d,disabled:t,tagProps:l},ref:o,index:r,key:h,origin:"slot",value:c,label:d,disabled:t,tagProps:l});g=T(()=>u1(w,{inputValue:n?.inputValue,filterOption:n?.filterOption})),s&&n?.addSlotOptionInfo(s.uid,w),Tn(()=>{s&&n?.removeSlotOptionInfo(s.uid)})}const y=w=>{e.disabled||n?.onSelect(h.value,w)},b=()=>{e.disabled||n?.setActiveKey(h.value)},x=()=>{e.disabled||n?.setActiveKey()},S=T(()=>[a,{[`${a}-disabled`]:e.disabled,[`${a}-selected`]:v.value,[`${a}-active`]:m.value,[`${a}-multiple`]:n?.multiple}]);return{prefixCls:a,cls:S,selectCtx:n,itemRef:o,component:p,isSelected:v,isValid:g,handleClick:y,handleMouseEnter:b,handleMouseLeave:x}}});function txe(e,t,i,r,a,n){const s=be("checkbox");return Ys((N(),De(bs(e.component),{ref:"itemRef",class:Y([e.cls,{[`${e.prefixCls}-has-suffix`]:!!e.$slots.suffix}]),onClick:e.handleClick,onMouseenter:e.handleMouseEnter,onMouseleave:e.handleMouseLeave},{default:He(()=>[e.$slots.icon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon")],2)):Me("v-if",!0),e.selectCtx&&e.selectCtx.multiple?(N(),De(s,{key:1,class:Y(`${e.prefixCls}-checkbox`),"model-value":e.isSelected,disabled:e.disabled,"uninject-group-context":""},{default:He(()=>[ye(e.$slots,"default",{},()=>[ti(Bt(e.label),1)])]),_:3},8,["class","model-value","disabled"])):(N(),ee("span",{key:2,class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default",{},()=>[ti(Bt(e.label),1)])],2)),e.$slots.suffix?(N(),ee("span",{key:3,class:Y(`${e.prefixCls}-suffix`)},[ye(e.$slots,"suffix")],2)):Me("v-if",!0)]),_:3},8,["class","onClick","onMouseenter","onMouseleave"])),[[Xs,e.isValid]])}var id=We(exe,[["render",txe]]),ixe=Object.defineProperty,rxe=Object.defineProperties,axe=Object.getOwnPropertyDescriptors,j4=Object.getOwnPropertySymbols,nxe=Object.prototype.hasOwnProperty,sxe=Object.prototype.propertyIsEnumerable,$4=(e,t,i)=>t in e?ixe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,lS=(e,t)=>{for(var i in t||(t={}))nxe.call(t,i)&&$4(e,i,t[i]);if(j4)for(var i of j4(t))sxe.call(t,i)&&$4(e,i,t[i]);return e},oxe=(e,t)=>rxe(e,axe(t));const lxe={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"},uxe=({options:e,extraOptions:t,inputValue:i,filterOption:r,showExtraOptions:a,valueKey:n,fieldNames:s})=>{const o=T(()=>lS(lS({},lxe),s?.value)),l=gt(new Map),u=T(()=>Array.from(l.values()).sort((b,x)=>Mt(b.index)&&Mt(x.index)?b.index-x.index:0)),c=T(()=>{var b,x;const S=new Map;return{optionInfos:DM((b=e?.value)!=null?b:[],{valueKey:(x=n?.value)!=null?x:"value",fieldNames:o.value,origin:"options",optionInfoMap:S}),optionInfoMap:S}}),d=T(()=>{var b,x;const S=new Map;return{optionInfos:DM((b=t?.value)!=null?b:[],{valueKey:(x=n?.value)!=null?x:"value",fieldNames:o.value,origin:"extraOptions",optionInfoMap:S}),optionInfoMap:S}}),h=gt(new Map);Vt([u,e??ie([]),t??ie([]),n??ie("value")],()=>{h.clear(),u.value.forEach((b,x)=>{h.set(b.key,oxe(lS({},b),{index:x}))}),c.value.optionInfoMap.forEach(b=>{h.has(b.key)||(b.index=h.size,h.set(b.key,b))}),d.value.optionInfoMap.forEach(b=>{h.has(b.key)||(b.index=h.size,h.set(b.key,b))})},{immediate:!0,deep:!0});const p=T(()=>{var b;const x=F4(c.value.optionInfos,{inputValue:i?.value,filterOption:r?.value});return((b=a?.value)==null||b)&&x.push(...F4(d.value.optionInfos,{inputValue:i?.value,filterOption:r?.value})),x}),f=T(()=>Array.from(h.values()).filter(b=>b.origin==="extraOptions"&&a?.value===!1?!1:u1(b,{inputValue:i?.value,filterOption:r?.value}))),v=T(()=>f.value.filter(b=>!b.disabled).map(b=>b.key));return{validOptions:p,optionInfoMap:h,validOptionInfos:f,enabledOptionKeys:v,getNextSlotOptionIndex:()=>l.size,addSlotOptionInfo:(b,x)=>{l.set(b,x)},removeSlotOptionInfo:b=>{l.delete(b)}}},Kr={ENTER:"Enter",ESC:"Escape",BACKSPACE:"Backspace",TAB:"Tab",SPACE:" ",ARROW_UP:"ArrowUp",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight"},U4=e=>JSON.stringify({key:e.key,ctrl:!!e.ctrl,shift:!!e.shift,alt:!!e.alt,meta:!!e.meta}),c1=e=>{const t={};return e.forEach((i,r)=>{const a=na(r)?{key:r}:r;t[U4(a)]=i}),i=>{const r=U4({key:i.key,ctrl:i.ctrlKey,shift:i.shiftKey,alt:i.altKey,meta:i.metaKey}),a=t[r];a&&(i.stopPropagation(),a(i))}},lP=({multiple:e,options:t,extraOptions:i,inputValue:r,filterOption:a,showExtraOptions:n,component:s,valueKey:o,fieldNames:l,loading:u,popupVisible:c,valueKeys:d,dropdownRef:h,optionRefs:p,virtualListRef:f,onSelect:v,onPopupVisibleChange:m,enterToOpen:g=!0,defaultActiveFirstOption:y})=>{const{validOptions:b,optionInfoMap:x,validOptionInfos:S,enabledOptionKeys:w,getNextSlotOptionIndex:E,addSlotOptionInfo:M,removeSlotOptionInfo:P}=uxe({options:t,extraOptions:i,inputValue:r,filterOption:a,showExtraOptions:n,valueKey:o,fieldNames:l}),A=ie();Vt(w,F=>{(!A.value||!F.includes(A.value))&&(A.value=F[0])});const k=F=>{A.value=F},I=F=>{const U=w.value.length;if(U===0)return;if(!A.value)return F==="down"?w.value[0]:w.value[U-1];const z=w.value.indexOf(A.value),B=(U+z+(F==="up"?-1:1))%U;return w.value[B]},O=F=>{var U,z;f?.value&&f.value.scrollTo({key:F});const B=x.get(F),W=(U=h?.value)==null?void 0:U.wrapperRef,R=(z=p?.value[F])!=null?z:B?.ref;if(!W||!R||W.scrollHeight===W.offsetHeight)return;const $=j9(R,W),q=W.scrollTop;$.top<0?W.scrollTo(0,q+$.top):$.bottom<0&&W.scrollTo(0,q-$.bottom)};Vt(c,F=>{var U;if(F){const z=d.value[d.value.length-1];let B=(U=y?.value)==null||U?w.value[0]:void 0;w.value.includes(z)&&(B=z),B!==A.value&&(A.value=B),hr(()=>{A.value&&O(A.value)})}});const D=c1(new Map([[Kr.ENTER,F=>{!u?.value&&!F.isComposing&&(c.value?A.value&&(v(A.value,F),F.preventDefault()):g&&(m(!0),F.preventDefault()))}],[Kr.ESC,F=>{c.value&&(m(!1),F.preventDefault())}],[Kr.ARROW_DOWN,F=>{if(c.value){const U=I("down");U&&(A.value=U,O(U)),F.preventDefault()}}],[Kr.ARROW_UP,F=>{if(c.value){const U=I("up");U&&(A.value=U,O(U)),F.preventDefault()}}]]));return dr(tF,gt({multiple:e,valueKey:o,inputValue:r,filterOption:a,component:s,valueKeys:d,activeKey:A,setActiveKey:k,onSelect:v,getNextSlotOptionIndex:E,addSlotOptionInfo:M,removeSlotOptionInfo:P})),{validOptions:b,optionInfoMap:x,validOptionInfos:S,enabledOptionKeys:w,activeKey:A,setActiveKey:k,addSlotOptionInfo:M,removeSlotOptionInfo:P,getNextActiveKey:I,scrollIntoView:O,handleKeyDown:D}},cxe=({dataKeys:e,contentRef:t,fixedSize:i,estimatedSize:r,buffer:a})=>{const n=ie(0),s=new Map,o=T(()=>e.value.length),l=ie(0),u=T(()=>{const E=l.value+a.value*3;return E>o.value?o.value:E}),c=T(()=>{const E=o.value-a.value*3;return E<0?0:E}),d=E=>{E<0?l.value=0:E>c.value?l.value=c.value:l.value=E},h=ie(i.value),p=T(()=>r.value!==30?r.value:n.value||r.value),f=(E,M)=>{s.set(E,M)},v=E=>{var M;if(h.value)return p.value;const P=e.value[E];return(M=s.get(P))!=null?M:p.value},m=E=>s.has(E);xi(()=>{const E=Array.from(s.values()).reduce((M,P)=>M+P,0);E>0&&(n.value=E/s.size)});const g=E=>h.value?p.value*E:y(0,E),y=(E,M)=>{let P=0;for(let A=E;A<M;A++)P+=v(A);return P},b=T(()=>h.value?p.value*l.value:y(0,l.value)),x=E=>{const M=E>=b.value;let P=Math.abs(E-b.value);const A=M?l.value:l.value-1;let k=0;for(;P>0;)P-=v(A+k),M?k++:k--;return k},S=E=>{const M=x(E),P=l.value+M-a.value;return P<0?0:P>c.value?c.value:P},w=T(()=>h.value?p.value*(o.value-u.value):y(u.value,o.value));return{frontPadding:b,behindPadding:w,start:l,end:u,getStartByScroll:S,setItemSize:f,hasItemSize:m,setStart:d,getScrollOffset:g}};var dxe=se({name:"VirtualListItem",props:{hasItemSize:{type:Function,required:!0},setItemSize:{type:Function,required:!0}},setup(e,{slots:t}){var i;const r=(i=xs())==null?void 0:i.vnode.key,a=ie(),n=()=>{var s,o,l,u;const c=(o=(s=a.value)==null?void 0:s.$el)!=null?o:a.value,d=(u=(l=c?.getBoundingClientRect)==null?void 0:l.call(c).height)!=null?u:c?.offsetHeight;d&&e.setItemSize(r,d)};return xi(()=>n()),Tn(()=>n()),()=>{var s;const o=_h((s=t.default)==null?void 0:s.call(t));return o?Uh(o,{ref:a},!0):null}}}),hxe=Object.defineProperty,W4=Object.getOwnPropertySymbols,pxe=Object.prototype.hasOwnProperty,fxe=Object.prototype.propertyIsEnumerable,H4=(e,t,i)=>t in e?hxe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,mxe=(e,t)=>{for(var i in t||(t={}))pxe.call(t,i)&&H4(e,i,t[i]);if(W4)for(var i of W4(t))fxe.call(t,i)&&H4(e,i,t[i]);return e};const vxe=se({name:"VirtualList",components:{VirtualListItem:dxe},props:{height:{type:[Number,String],default:200},data:{type:Array,default:()=>[]},threshold:{type:Number,default:0},itemKey:{type:String,default:"key"},fixedSize:{type:Boolean,default:!1},estimatedSize:{type:Number,default:30},buffer:{type:Number,default:10},component:{type:[String,Object],default:"div"},listAttrs:{type:Object},contentAttrs:{type:Object},paddingPosition:{type:String,default:"content"}},emits:{scroll:e=>!0,reachBottom:e=>!0},setup(e,{emit:t}){const{data:i,itemKey:r,fixedSize:a,estimatedSize:n,buffer:s,height:o}=yt(e),l=Se("virtual-list"),u=T(()=>ki(e.component)?mxe({container:"div",list:"div",content:"div"},e.component):{container:e.component,list:"div",content:"div"}),c=ie(),d=ie(),h=T(()=>({height:Mt(o.value)?`${o.value}px`:o.value,overflow:"auto"})),p=T(()=>i.value.map((A,k)=>{var I;return(I=A[r.value])!=null?I:k})),{frontPadding:f,behindPadding:v,start:m,end:g,getStartByScroll:y,setItemSize:b,hasItemSize:x,setStart:S,getScrollOffset:w}=cxe({dataKeys:p,contentRef:d,fixedSize:a,estimatedSize:n,buffer:s}),E=T(()=>e.threshold&&i.value.length<=e.threshold?i.value:i.value.slice(m.value,g.value)),M=A=>{const{scrollTop:k,scrollHeight:I,offsetHeight:O}=A.target,D=y(k);D!==m.value&&(S(D),hr(()=>{P(k)})),t("scroll",A),Math.floor(I-(k+O))<=0&&t("reachBottom",A)},P=A=>{var k,I;if(c.value)if(Mt(A))c.value.scrollTop=A;else{const O=(I=A.index)!=null?I:p.value.indexOf((k=A.key)!=null?k:"");S(O-s.value),c.value.scrollTop=w(O),hr(()=>{if(c.value){const D=w(O);D!==c.value.scrollTop&&(c.value.scrollTop=D)}})}};return{prefixCls:l,containerRef:c,contentRef:d,frontPadding:f,currentList:E,behindPadding:v,onScroll:M,setItemSize:b,hasItemSize:x,start:m,scrollTo:P,style:h,mergedComponent:u}}});function gxe(e,t,i,r,a,n){const s=be("VirtualListItem");return N(),De(bs(e.mergedComponent.container),{ref:"containerRef",class:Y(e.prefixCls),style:It(e.style),onScroll:e.onScroll},{default:He(()=>[(N(),De(bs(e.mergedComponent.list),it(e.listAttrs,{style:e.paddingPosition==="list"?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:He(()=>[(N(),De(bs(e.mergedComponent.content),it({ref:"contentRef"},e.contentAttrs,{style:e.paddingPosition==="content"?{paddingTop:`${e.frontPadding}px`,paddingBottom:`${e.behindPadding}px`}:{}}),{default:He(()=>[(N(!0),ee(Xt,null,Br(e.currentList,(o,l)=>{var u;return N(),De(s,{key:(u=o[e.itemKey])!=null?u:e.start+l,"has-item-size":e.hasItemSize,"set-item-size":e.setItemSize},{default:He(()=>[ye(e.$slots,"item",{item:o,index:e.start+l})]),_:2},1032,["has-item-size","set-item-size"])}),128))]),_:3},16,["style"]))]),_:3},16,["style"]))]),_:3},8,["class","style","onScroll"])}var Tp=We(vxe,[["render",gxe]]),uS=se({name:"AutoComplete",inheritAttrs:!1,props:{modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},disabled:{type:Boolean,default:!1},data:{type:Array,default:()=>[]},popupContainer:{type:[String,Object]},strict:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},triggerProps:{type:Object},allowClear:{type:Boolean,default:!1},virtualListProps:{type:Object}},emits:{"update:modelValue":e=>!0,change:e=>!0,search:e=>!0,select:e=>!0,clear:e=>!0,dropdownScroll:e=>!0,dropdownReachBottom:e=>!0},setup(e,{emit:t,attrs:i,slots:r}){const{modelValue:a}=yt(e),n=Se("auto-complete"),{mergedDisabled:s,eventHandlers:o}=Wr({disabled:Os(e,"disabled")}),l=ie(e.defaultValue),u=ie(),c=T(()=>{var R;return(R=e.modelValue)!=null?R:l.value});Vt(a,R=>{(ei(R)||Wn(R))&&(l.value="")});const d=T(()=>c.value?[gd(c.value)]:[]),{data:h}=yt(e),p=ie(),f=ie({}),v=ie(!1),m=T(()=>v.value&&D.value.length>0),g=ie(),y=T(()=>e.virtualListProps?"div":"li"),b=R=>{v.value=R},x=(R,$)=>{var q;return!!((q=$.label)!=null&&q.includes(R))},S=T(()=>Zt(e.filterOption)?e.filterOption:e.filterOption&&e.strict?x:e.filterOption),w=R=>{var $,q;l.value=R,t("update:modelValue",R),t("change",R),(q=($=o.value)==null?void 0:$.onChange)==null||q.call($)},E=R=>{var $,q;l.value="",t("update:modelValue",""),t("change",""),(q=($=o.value)==null?void 0:$.onChange)==null||q.call($),t("clear",R)},M=(R,$)=>{var q,Z;const G=(q=O.get(R))==null?void 0:q.value;t("select",G),w(G),(Z=u.value)==null||Z.blur()},P=R=>{t("search",R),w(R)},A=R=>{t("dropdownScroll",R)},k=R=>{t("dropdownReachBottom",R)},{validOptions:I,optionInfoMap:O,validOptionInfos:D,handleKeyDown:F}=lP({options:h,inputValue:c,filterOption:S,popupVisible:m,valueKeys:d,component:y,dropdownRef:p,optionRefs:f,onSelect:M,onPopupVisibleChange:b}),U=R=>{if(Zt(r.option)&&R.value){const $=O.get(R.key),q=r.option;return()=>q({data:$})}return()=>R.label},z=R=>_(id,{ref:$=>{$?.$el&&(f.value[R.key]=$.$el)},key:R.key,value:R.value,disabled:R.disabled,internal:!0},{default:U(R)}),B=()=>_(sP,{ref:p,class:`${n}-dropdown`,virtualList:!!e.virtualListProps,onScroll:A,onReachBottom:k},{default:()=>[...I.value.map(R=>z(R))],"virtual-list":()=>_(Tp,it(e.virtualListProps,{ref:g,data:I.value}),{item:({item:R})=>z(R)}),footer:r.footer});return{inputRef:u,render:()=>_($a,it({trigger:"focus",position:"bl",animationName:"slide-dynamic-origin",autoFitTransformOrigin:!0,popupVisible:m.value,clickToClose:!1,preventFocus:!0,popupOffset:4,disabled:s.value,autoFitPopupWidth:!0},e.triggerProps,{onPopupVisibleChange:b}),{default:()=>[_(mc,it({ref:u},i,{allowClear:e.allowClear,modelValue:c.value,disabled:s.value,onInput:P,onClear:E,onKeydown:F}),r)],content:B})}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const yxe=Object.assign(uS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+uS.name,uS)}}),d1=({itemRef:e,selector:t,index:i,parentClassName:r})=>{const a=ie(-1),n=T(()=>{var u;return(u=i?.value)!=null?u:a.value}),s=ie(),o=()=>{var u,c,d;let h=(c=(u=e.value)==null?void 0:u.parentElement)!=null?c:void 0;if(r)for(;h&&!h.className.includes(r);)h=(d=h.parentElement)!=null?d:void 0;return h},l=()=>{if(ei(i?.value)&&s.value&&e.value){const u=Array.from(s.value.querySelectorAll(t)).indexOf(e.value);u!==a.value&&(a.value=u)}};return Vt(e,()=>{e.value&&!s.value&&(s.value=o())}),xi(()=>{e.value&&(s.value=o()),l()}),Ss(()=>l()),{computedIndex:n}},aF=Symbol("ArcoAvatarGroup"),bxe=se({name:"IconImageClose",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-image-close`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),wxe=["stroke-width","stroke-linecap","stroke-linejoin"],xxe=rE('<path d="M41 26V9a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h17"></path><path d="m24 33 9-8.5V27s-2 1-3.5 2.5C27.841 31.159 27 33 27 33h-3Zm0 0-3.5-4.5L17 33h7Z"></path><path d="M20.5 28.5 17 33h7l-3.5-4.5ZM33 24.5 24 33h3s.841-1.841 2.5-3.5C31 28 33 27 33 27v-2.5Z" fill="currentColor" stroke="none"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M46 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-4.95-4.782 1.74 1.74-3.045 3.046 3.046 3.046-1.74 1.74-3.047-3.045-3.046 3.046-1.74-1.74 3.046-3.047-3.046-3.046 1.74-1.74 3.046 3.046 3.046-3.046Z" fill="currentColor" stroke="none"></path><path d="M17 15h-2v2h2v-2Z"></path>',5),Sxe=[xxe];function Cxe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Sxe,14,wxe)}var cS=We(bxe,[["render",Cxe]]);const uP=Object.assign(cS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+cS.name,cS)}});var _xe=Object.defineProperty,G4=Object.getOwnPropertySymbols,Mxe=Object.prototype.hasOwnProperty,Exe=Object.prototype.propertyIsEnumerable,q4=(e,t,i)=>t in e?_xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Y4=(e,t)=>{for(var i in t||(t={}))Mxe.call(t,i)&&q4(e,i,t[i]);if(G4)for(var i of G4(t))Exe.call(t,i)&&q4(e,i,t[i]);return e};const Axe=se({name:"Avatar",components:{ResizeObserver:oc,IconImageClose:uP,IconLoading:$n},props:{shape:{type:String,default:"circle"},imageUrl:String,size:Number,autoFixFontSize:{type:Boolean,default:!0},triggerType:{type:String,default:"button"},triggerIconStyle:{type:Object},objectFit:{type:String}},emits:{click:e=>!0,error:()=>!0,load:()=>!0},setup(e,{slots:t,emit:i,attrs:r}){const{shape:a,size:n,autoFixFontSize:s,triggerType:o,triggerIconStyle:l}=yt(e),u=Se("avatar"),c=Ai(aF,void 0),d=ie(),h=ie(),p=T(()=>{var D;return(D=c?.shape)!=null?D:a.value}),f=T(()=>{var D;return(D=c?.size)!=null?D:n.value}),v=T(()=>{var D;return(D=c?.autoFixFontSize)!=null?D:s.value}),m=ie(!1),g=ie(!1),y=ie(!0),b=ie(!1),x=c?d1({itemRef:d,selector:`.${u}`}).computedIndex:ie(-1),S=T(()=>{var D;const F=Mt(f.value)?{width:`${f.value}px`,height:`${f.value}px`,fontSize:`${f.value/2}px`}:{};return c&&(F.zIndex=c.zIndexAscend?x.value+1:c.total-x.value,F.marginLeft=x.value!==0?`-${((D=f.value)!=null?D:40)/4}px`:"0"),F}),w=Pxe({triggerIconStyle:l?.value,inlineStyle:r.style,triggerType:o.value}),E=()=>{!m.value&&!e.imageUrl&&hr(()=>{var D;if(!h.value||!d.value)return;const F=h.value.clientWidth,U=(D=f.value)!=null?D:d.value.offsetWidth,z=U/(F+8);U&&z<1&&(h.value.style.transform=`scale(${z}) translateX(-50%)`),y.value=!0})};xi(()=>{var D;(D=h.value)!=null&&D.firstElementChild&&["IMG","PICTURE"].includes(h.value.firstElementChild.tagName)&&(m.value=!0),v.value&&E()}),Vt(n,()=>{v.value&&E()});const M=T(()=>[u,`${u}-${p.value}`]),P=T(()=>m.value||e.imageUrl?`${u}-image`:`${u}-text`);return{prefixCls:u,itemRef:d,cls:M,outerStyle:S,wrapperRef:h,wrapperCls:P,computedTriggerIconStyle:w,isImage:m,shouldLoad:y,isLoaded:b,hasError:g,onClick:D=>{i("click",D)},handleResize:()=>{v.value&&E()},handleImgLoad:()=>{b.value=!0,i("load")},handleImgError:()=>{g.value=!0,i("error")}}}}),Pxe=({triggerType:e,inlineStyle:t={},triggerIconStyle:i={}})=>{let r={};return e==="button"&&(!i||i&&!i.color)&&t&&t.backgroundColor&&(r={color:t.backgroundColor}),Y4(Y4({},i),r)},Txe=["src"];function kxe(e,t,i,r,a,n){const s=be("IconImageClose"),o=be("IconLoading"),l=be("resize-observer");return N(),ee("div",{ref:"itemRef",style:It(e.outerStyle),class:Y([e.cls,{[`${e.prefixCls}-with-trigger-icon`]:!!e.$slots["trigger-icon"]}]),onClick:t[2]||(t[2]=(...u)=>e.onClick&&e.onClick(...u))},[_(l,{onResize:e.handleResize},{default:He(()=>[ve("span",{ref:"wrapperRef",class:Y(e.wrapperCls)},[e.imageUrl?(N(),ee(Xt,{key:0},[e.hasError?ye(e.$slots,"error",{key:0},()=>[ve("div",{class:Y(`${e.prefixCls}-image-icon`)},[_(s)],2)]):Me("v-if",!0),!(e.hasError||!e.shouldLoad)&&!e.isLoaded?ye(e.$slots,"default",{key:1},()=>[ve("div",{class:Y(`${e.prefixCls}-image-icon`)},[_(o)],2)]):Me("v-if",!0),e.hasError||!e.shouldLoad?Me("v-if",!0):(N(),ee("img",{key:2,src:e.imageUrl,style:It({width:e.size+"px",height:e.size+"px",objectFit:e.objectFit}),alt:"avatar",onLoad:t[0]||(t[0]=(...u)=>e.handleImgLoad&&e.handleImgLoad(...u)),onError:t[1]||(t[1]=(...u)=>e.handleImgError&&e.handleImgError(...u))},null,44,Txe))],64)):ye(e.$slots,"default",{key:1})],2)]),_:3},8,["onResize"]),e.$slots["trigger-icon"]?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-trigger-icon-${e.triggerType}`),style:It(e.computedTriggerIconStyle)},[ye(e.$slots,"trigger-icon")],6)):Me("v-if",!0)],6)}var l0=We(Axe,[["render",kxe]]);const u0=se({name:"AvatarGroup",props:{shape:{type:String,default:"circle"},size:Number,autoFixFontSize:{type:Boolean,default:!0},maxCount:{type:Number,default:0},zIndexAscend:{type:Boolean,default:!1},maxStyle:{type:Object},maxPopoverTriggerProps:{type:Object}},setup(e,{slots:t}){const{shape:i,size:r,autoFixFontSize:a,zIndexAscend:n}=yt(e),s=Se("avatar-group"),o=ie(0);return dr(aF,gt({shape:i,size:r,autoFixFontSize:a,zIndexAscend:n,total:o})),()=>{var l,u;const c=ul((u=(l=t.default)==null?void 0:l.call(t))!=null?u:[]),d=e.maxCount>0?c.slice(0,e.maxCount):c,h=e.maxCount>0?c.slice(e.maxCount):[];return o.value!==c.length&&(o.value=c.length),_("div",{class:s},[d,h.length>0&&_(cE,e.maxPopoverTriggerProps,{default:()=>[_(l0,{class:`${s}-max-count-avatar`,style:e.maxStyle},{default:()=>[ti("+"),h.length]})],content:()=>_("div",null,[h])})])}}}),Oxe=Object.assign(l0,{Group:u0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+l0.name,l0),e.component(i+u0.name,u0)}}),Dxe=se({name:"IconToTop",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-to-top`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Ixe=["stroke-width","stroke-linecap","stroke-linejoin"],Lxe=ve("path",{d:"M43 7H5M24 20v23M24 13.96 30.453 21H17.546L24 13.96Zm.736-.804Z"},null,-1),Bxe=ve("path",{d:"m24 14-6 7h12l-6-7Z",fill:"currentColor",stroke:"none"},null,-1),zxe=[Lxe,Bxe];function Rxe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},zxe,14,Ixe)}var dS=We(Dxe,[["render",Rxe]]);const Nxe=Object.assign(dS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+dS.name,dS)}}),Vxe=se({name:"BackTop",components:{IconToTop:Nxe},props:{visibleHeight:{type:Number,default:200},targetContainer:{type:[String,Object]},easing:{type:String,default:"quartOut"},duration:{type:Number,default:200}},setup(e){const t=Se("back-top"),i=ie(!1),r=ie(),a=!e.targetContainer,n=ud(()=>{if(r.value){const{visibleHeight:l}=e,{scrollTop:u}=r.value;i.value=u>=l}}),s=l=>na(l)?document.querySelector(l):l;return xi(()=>{r.value=a?document?.documentElement:s(e.targetContainer),r.value&&(wr(a?window:r.value,"scroll",n),n())}),sn(()=>{n.cancel(),r.value&&Ir(a?window:r.value,"scroll",n)}),{prefixCls:t,visible:i,scrollToTop:()=>{if(r.value){const{scrollTop:l}=r.value;new Ed({from:{scrollTop:l},to:{scrollTop:0},easing:e.easing,duration:e.duration,onUpdate:c=>{r.value&&(r.value.scrollTop=c.scrollTop)}}).start()}}}}});function Fxe(e,t,i,r,a,n){const s=be("icon-to-top");return N(),De(rs,{name:"fade-in"},{default:He(()=>[e.visible?(N(),ee("div",{key:0,class:Y(e.prefixCls),onClick:t[0]||(t[0]=(...o)=>e.scrollToTop&&e.scrollToTop(...o))},[ye(e.$slots,"default",{},()=>[ve("button",{class:Y(`${e.prefixCls}-btn`)},[_(s)],2)])],2)):Me("v-if",!0)]),_:3})}var hS=We(Vxe,[["render",Fxe]]);const jxe=Object.assign(hS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+hS.name,hS)}});var $xe=Object.defineProperty,X4=Object.getOwnPropertySymbols,Uxe=Object.prototype.hasOwnProperty,Wxe=Object.prototype.propertyIsEnumerable,K4=(e,t,i)=>t in e?$xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,pS=(e,t)=>{for(var i in t||(t={}))Uxe.call(t,i)&&K4(e,i,t[i]);if(X4)for(var i of X4(t))Wxe.call(t,i)&&K4(e,i,t[i]);return e};const Hxe=["red","orangered","orange","gold","lime","green","cyan","arcoblue","purple","pinkpurple","magenta","gray"],Gxe=["normal","processing","success","warning","danger"];var fS=se({name:"Badge",props:{text:{type:String},dot:{type:Boolean},dotStyle:{type:Object},maxCount:{type:Number,default:99},offset:{type:Array,default:()=>[]},color:{type:String},status:{type:String,validator:e=>Gxe.includes(e)},count:{type:Number}},setup(e,{slots:t}){const{status:i,color:r,dotStyle:a,offset:n,text:s,dot:o,maxCount:l,count:u}=yt(e),c=Se("badge"),d=qxe(c,i?.value,t?.default),h=T(()=>{const f=pS({},a?.value||{}),[v,m]=n?.value||[];v&&(f.marginRight=`${-v}px`),m&&(f.marginTop=`${m}px`);const g=!r?.value||Hxe.includes(r?.value)?{}:{backgroundColor:r.value};return{mergedStyle:pS(pS({},g),f),computedDotStyle:f,computedColorStyle:g}}),p=()=>{const f=s?.value,v=r?.value,m=i?.value,g=o?.value,y=Number(u?.value),b=u?.value!=null,{computedDotStyle:x,mergedStyle:S}=h.value;return t.content?_("span",{class:`${c}-custom-dot`,style:x},[t.content()]):f&&!v&&!m?_("span",{class:`${c}-text`,style:x},[f]):m||v&&!b?_("span",{class:`${c}-status-wrapper`},[_("span",{class:[`${c}-status-dot`,{[`${c}-status-${m}`]:m,[`${c}-color-${v}`]:v}],style:S},null),f&&_("span",{class:`${c}-status-text`},[f])]):(g||v)&&y>0?_("span",{class:[`${c}-dot`,{[`${c}-color-${v}`]:v}],style:S},null):y===0?null:_("span",{class:`${c}-number`,style:S},[_("span",null,[l.value&&y>l.value?`${l.value}+`:y])])};return()=>_("span",{class:d.value},[t.default&&t.default(),p()])}});const qxe=(e,t,i)=>T(()=>[e,{[`${e}-status`]:t,[`${e}-no-children`]:!i}]),Yxe=Object.assign(fS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+fS.name,fS)}}),nF=Symbol("ArcoBreadcrumb"),Xxe=se({name:"IconMore",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-more`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Kxe=["stroke-width","stroke-linecap","stroke-linejoin"],Zxe=ve("path",{d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z",fill:"currentColor",stroke:"none"},null,-1),Qxe=ve("path",{d:"M38 25v-2h2v2h-2ZM23 25v-2h2v2h-2ZM8 25v-2h2v2H8Z"},null,-1),Jxe=[Zxe,Qxe];function eSe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Jxe,14,Kxe)}var mS=We(Xxe,[["render",eSe]]);const cP=Object.assign(mS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+mS.name,mS)}}),tSe=se({name:"IconDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-down`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),iSe=["stroke-width","stroke-linecap","stroke-linejoin"],rSe=ve("path",{d:"M39.6 17.443 24.043 33 8.487 17.443"},null,-1),aSe=[rSe];function nSe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},aSe,14,iSe)}var vS=We(tSe,[["render",nSe]]);const kp=Object.assign(vS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+vS.name,vS)}}),sSe=se({name:"IconObliqueLine",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-oblique-line`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),oSe=["stroke-width","stroke-linecap","stroke-linejoin"],lSe=ve("path",{d:"M29.506 6.502 18.493 41.498"},null,-1),uSe=[lSe];function cSe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},uSe,14,oSe)}var gS=We(sSe,[["render",cSe]]);const dSe=Object.assign(gS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+gS.name,gS)}}),dP=Symbol("ArcoDropdown"),hSe=se({name:"DropdownPanel",components:{Scrollbar:Io,Empty:gu},props:{loading:{type:Boolean,default:!1},isEmpty:{type:Boolean,default:!1},bottomOffset:{type:Number,default:0},onScroll:{type:[Function,Array]},onReachBottom:{type:[Function,Array]}},emits:["scroll","reachBottom"],setup(e,{emit:t,slots:i}){const r=Se("dropdown"),a=Ai(dP,{}),n=ie(),s=u=>{const{scrollTop:c,scrollHeight:d,offsetHeight:h}=u.target;d-(c+h)<=e.bottomOffset&&t("reachBottom",u),t("scroll",u)},o=T(()=>{if(Mt(a.popupMaxHeight))return{maxHeight:`${a.popupMaxHeight}px`};if(!a.popupMaxHeight)return{maxHeight:"none",overflowY:"hidden"}}),l=T(()=>[r,{[`${r}-has-footer`]:!!i.footer}]);return{prefixCls:r,cls:l,style:o,wrapperRef:n,handleScroll:s}}});function pSe(e,t,i,r,a,n){const s=be("empty"),o=be("Scrollbar");return N(),ee("div",{class:Y(e.cls)},[e.isEmpty?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-empty`)},[ye(e.$slots,"empty",{},()=>[_(s)])],2)):Me("v-if",!0),_(o,{ref:"wrapperRef",class:Y(`${e.prefixCls}-list-wrapper`),style:It(e.style),onScroll:e.handleScroll},{default:He(()=>[ve("ul",{class:Y(`${e.prefixCls}-list`)},[ye(e.$slots,"default")],2)]),_:3},8,["class","style","onScroll"]),e.$slots.footer&&!e.isEmpty?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer")],2)):Me("v-if",!0)],2)}var sF=We(hSe,[["render",pSe]]);const h1=({popupVisible:e,defaultPopupVisible:t,emit:i})=>{var r;const a=ie((r=t?.value)!=null?r:!1),n=T(()=>{var o;return(o=e?.value)!=null?o:a.value}),s=o=>{o!==n.value&&(a.value=o,i("update:popupVisible",o),i("popupVisibleChange",o))};return Vt(n,o=>{a.value!==o&&(a.value=o)}),{computedPopupVisible:n,handlePopupVisibleChange:s}},fSe=se({name:"Dropdown",components:{Trigger:$a,DropdownPanel:sF},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"bottom"},popupContainer:{type:[String,Object]},popupMaxHeight:{type:[Boolean,Number],default:!0},hideOnSelect:{type:Boolean,default:!0}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,select:(e,t)=>!0},setup(e,{emit:t}){const{defaultPopupVisible:i,popupVisible:r,popupMaxHeight:a}=yt(e),n=Se("dropdown"),{computedPopupVisible:s,handlePopupVisibleChange:o}=h1({defaultPopupVisible:i,popupVisible:r,emit:t});return dr(dP,gt({popupMaxHeight:a,onOptionClick:(u,c)=>{t("select",u,c),e.hideOnSelect&&o(!1)}})),{prefixCls:n,computedPopupVisible:s,handlePopupVisibleChange:o}}});function mSe(e,t,i,r,a,n){const s=be("DropdownPanel"),o=be("Trigger");return N(),De(o,{"popup-visible":e.computedPopupVisible,"animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",trigger:e.trigger,position:e.position,"popup-offset":4,"popup-container":e.popupContainer,"opened-class":`${e.prefixCls}-open`,onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[_(s,null,$r({default:He(()=>[ye(e.$slots,"content")]),_:2},[e.$slots.footer?{name:"footer",fn:He(()=>[ye(e.$slots,"footer")])}:void 0]),1024)]),default:He(()=>[ye(e.$slots,"default")]),_:3},8,["popup-visible","trigger","position","popup-container","opened-class","onPopupVisibleChange"])}var c0=We(fSe,[["render",mSe]]);const vSe=se({name:"Doption",props:{value:{type:[String,Number,Object]},disabled:{type:Boolean,default:!1},active:Boolean,uninjectContext:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("dropdown-option"),r=ie(),a=T(()=>{var l,u,c;return(c=(u=e.value)!=null?u:(l=r.value)==null?void 0:l.textContent)!=null?c:void 0}),n=e.uninjectContext?void 0:Ai(dP,void 0),s=l=>{e.disabled||(t("click",l),n?.onOptionClick(a.value,l))},o=T(()=>[i,{[`${i}-disabled`]:e.disabled,[`${i}-active`]:e.active}]);return{prefixCls:i,cls:o,liRef:r,handleClick:s}}});function gSe(e,t,i,r,a,n){return N(),ee("li",{ref:"liRef",class:Y([e.cls,{[`${e.prefixCls}-has-suffix`]:!!e.$slots.suffix}]),onClick:t[0]||(t[0]=(...s)=>e.handleClick&&e.handleClick(...s))},[e.$slots.icon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon")],2)):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2),e.$slots.suffix?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-suffix`)},[ye(e.$slots,"suffix")],2)):Me("v-if",!0)],2)}var Vh=We(vSe,[["render",gSe]]);const ySe=se({name:"Dgroup",props:{title:String},setup(){return{prefixCls:Se("dropdown-group")}}});function bSe(e,t,i,r,a,n){return N(),ee(Xt,null,[ve("li",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2),ye(e.$slots,"default")],64)}var d0=We(ySe,[["render",bSe]]);const wSe=se({name:"IconRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-right`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),xSe=["stroke-width","stroke-linecap","stroke-linejoin"],SSe=ve("path",{d:"m16 39.513 15.556-15.557L16 8.4"},null,-1),CSe=[SSe];function _Se(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},CSe,14,xSe)}var yS=We(wSe,[["render",_Se]]);const zo=Object.assign(yS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+yS.name,yS)}}),MSe=se({name:"Dsubmenu",components:{Trigger:$a,DropdownPanel:sF,DropdownOption:Vh,IconRight:zo},props:{value:{type:[String,Number]},disabled:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"rt"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},optionProps:{type:Object}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0},setup(e,{emit:t}){const{defaultPopupVisible:i,popupVisible:r}=yt(e),a=Se("dropdown"),{computedPopupVisible:n,handlePopupVisibleChange:s}=h1({defaultPopupVisible:i,popupVisible:r,emit:t});return{prefixCls:a,computedPopupVisible:n,handlePopupVisibleChange:s}}});function ESe(e,t,i,r,a,n){const s=be("IconRight"),o=be("dropdown-option"),l=be("dropdown-panel"),u=be("Trigger");return N(),De(u,{"popup-visible":e.computedPopupVisible,trigger:e.trigger,position:e.position,disabled:e.disabled,"popup-offset":4,onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[_(l,{class:Y(`${e.prefixCls}-submenu`)},$r({default:He(()=>[ye(e.$slots,"content")]),_:2},[e.$slots.footer?{name:"footer",fn:He(()=>[ye(e.$slots,"footer")])}:void 0]),1032,["class"])]),default:He(()=>[_(o,it(e.optionProps,{active:e.computedPopupVisible,"uninject-context":""}),$r({suffix:He(()=>[ye(e.$slots,"suffix",{},()=>[_(s)])]),default:He(()=>[ye(e.$slots,"default")]),_:2},[e.$slots.icon?{name:"icon",fn:He(()=>[ye(e.$slots,"icon")])}:void 0]),1040,["active"])]),_:3},8,["popup-visible","trigger","position","disabled","onPopupVisibleChange"])}var h0=We(MSe,[["render",ESe]]);const ASe=se({name:"DropdownButton",components:{IconMore:cP,Button:un,ButtonGroup:Af,Dropdown:c0},props:{popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},trigger:{type:[String,Array],default:"click"},position:{type:String,default:"br"},popupContainer:{type:[String,Object]},disabled:{type:Boolean,default:!1},type:{type:String},size:{type:String},buttonProps:{type:Object},hideOnSelect:{type:Boolean,default:!0}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,click:e=>!0,select:(e,t)=>!0},setup(e,{emit:t}){const{defaultPopupVisible:i,popupVisible:r}=yt(e),a=Se("dropdown"),{computedPopupVisible:n,handlePopupVisibleChange:s}=h1({defaultPopupVisible:i,popupVisible:r,emit:t});return{prefixCls:a,computedPopupVisible:n,handleClick:u=>{t("click",u)},handleSelect:(u,c)=>{t("select",u,c)},handlePopupVisibleChange:s}}});function PSe(e,t,i,r,a,n){const s=be("Button"),o=be("IconMore"),l=be("Dropdown"),u=be("ButtonGroup");return N(),De(u,null,{default:He(()=>[_(s,it({size:e.size,type:e.type,disabled:e.disabled},e.buttonProps,{onClick:e.handleClick}),{default:He(()=>[ye(e.$slots,"default")]),_:3},16,["size","type","disabled","onClick"]),_(l,{"popup-visible":e.computedPopupVisible,trigger:e.trigger,position:e.position,"popup-container":e.popupContainer,"hide-on-select":e.hideOnSelect,onSelect:e.handleSelect,onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[ye(e.$slots,"content")]),default:He(()=>[_(s,{size:e.size,type:e.type,disabled:e.disabled},{icon:He(()=>[ye(e.$slots,"icon",{popupVisible:e.computedPopupVisible},()=>[_(o)])]),_:3},8,["size","type","disabled"])]),_:3},8,["popup-visible","trigger","position","popup-container","hide-on-select","onSelect","onPopupVisibleChange"])]),_:3})}var p0=We(ASe,[["render",PSe]]);const oF=Object.assign(c0,{Option:Vh,Group:d0,Submenu:h0,Button:p0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+c0.name,c0),e.component(i+Vh.name,Vh),e.component(i+d0.name,d0),e.component(i+h0.name,h0),e.component(i+p0.name,p0)}});var Uf=se({name:"BreadcrumbItem",inheritAttrs:!1,props:{separator:{type:[String,Number]},droplist:{type:Array},dropdownProps:{type:Object},index:{type:Number,default:0}},setup(e,{slots:t,attrs:i}){const r=Se("breadcrumb-item"),a=Ai(nF,void 0),n=ie(!1),s=T(()=>!(a&&a.needHide&&e.index>1&&e.index<=a.total-a.maxCount)),o=T(()=>a&&a.needHide?e.index===1:!1),l=T(()=>a?e.index<a.total-1:!0),u=f=>{n.value=f},c=()=>{var f,v,m,g,y,b,x;if(!l.value)return null;const S=(x=(b=(y=(v=(f=t.separator)==null?void 0:f.call(t))!=null?v:e.separator)!=null?y:(g=a==null?void 0:(m=a.slots).separator)==null?void 0:g.call(m))!=null?b:a?.separator)!=null?x:_(dSe,null,null);return _("div",{"aria-hidden":"true",class:`${r}-separator`},[S])},d=()=>{var f,v,m,g;return _("div",it({role:"listitem",class:[r,{[`${r}-with-dropdown`]:e.droplist||t.droplist}]},o.value?{"aria-label":"ellipses of breadcrumb items"}:void 0,i),[o.value?(m=(v=a==null?void 0:(f=a.slots)["more-icon"])==null?void 0:v.call(f))!=null?m:_(cP,null,null):(g=t.default)==null?void 0:g.call(t),(e.droplist||t.droplist)&&_("span",{"aria-hidden":!0,class:[`${r}-dropdown-icon`,{[`${r}-dropdown-icon-active`]:n.value}]},[_(kp,null,null)])])},h=()=>{var f,v,m;return(m=(f=t.droplist)==null?void 0:f.call(t))!=null?m:(v=e.droplist)==null?void 0:v.map(g=>_(Vh,{value:g.path},{default:()=>[g.label]}))},p=()=>_(oF,it({popupVisible:n.value,onPopupVisibleChange:u},e.dropdownProps),{default:()=>[d()],content:h});return()=>s.value?_(Xt,null,[t.droplist||e.droplist?p():d(),c()]):null}}),bS=se({name:"Breadcrumb",props:{maxCount:{type:Number,default:0},routes:{type:Array},separator:{type:[String,Number]},customUrl:{type:Function}},setup(e,{slots:t}){const{maxCount:i,separator:r,routes:a}=yt(e),n=Se("breadcrumb"),s=ie(0),o=T(()=>i.value>0&&s.value>i.value+1);dr(nF,gt({total:s,maxCount:i,separator:r,needHide:o,slots:t}));const l=(d,h,p)=>{var f,v;if(h.indexOf(d)===h.length-1)return _("span",null,[d.label]);const m=(v=(f=e.customUrl)==null?void 0:f.call(e,p))!=null?v:`#/${p.join("/").replace(/^\//,"")}`;return _("a",{href:m},[d.label])},u=()=>{var d;if(!((d=a.value)!=null&&d.length))return null;s.value!==a.value.length&&(s.value=a.value.length);const h=[];return a.value.map((p,f,v)=>{h.push((p.path||"").replace(/^\//,""));const m=[...h];return _(Uf,{key:p.path||p.label,index:f,droplist:p.children},{default:()=>{var g,y;return[(y=(g=t["item-render"])==null?void 0:g.call(t,{route:p,routes:v,paths:m}))!=null?y:l(p,v,m)]}})})},c=()=>{var d,h;const p=ul((h=(d=t.default)==null?void 0:d.call(t))!=null?h:[]);return s.value!==p.length&&(s.value=p.length),p.map((f,v)=>{var m;return f.props=it((m=f.props)!=null?m:{},{index:v}),f})};return()=>_("div",{role:"list",class:n},[t.default?c():u()])}});const TSe=Object.assign(bS,{Item:Uf,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+bS.name,bS),e.component(i+Uf.name,Uf)}});var lF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){var i=1e3,r=6e4,a=36e5,n="millisecond",s="second",o="minute",l="hour",u="day",c="week",d="month",h="quarter",p="year",f="date",v="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(D){var F=["th","st","nd","rd"],U=D%100;return"["+D+(F[(U-20)%10]||F[U]||F[0])+"]"}},b=function(D,F,U){var z=String(D);return!z||z.length>=F?D:""+Array(F+1-z.length).join(U)+D},x={s:b,z:function(D){var F=-D.utcOffset(),U=Math.abs(F),z=Math.floor(U/60),B=U%60;return(F<=0?"+":"-")+b(z,2,"0")+":"+b(B,2,"0")},m:function D(F,U){if(F.date()<U.date())return-D(U,F);var z=12*(U.year()-F.year())+(U.month()-F.month()),B=F.clone().add(z,d),W=U-B<0,R=F.clone().add(z+(W?-1:1),d);return+(-(z+(U-B)/(W?B-R:R-B))||0)},a:function(D){return D<0?Math.ceil(D)||0:Math.floor(D)},p:function(D){return{M:d,y:p,w:c,d:u,D:f,h:l,m:o,s,ms:n,Q:h}[D]||String(D||"").toLowerCase().replace(/s$/,"")},u:function(D){return D===void 0}},S="en",w={};w[S]=y;var E="$isDayjsObject",M=function(D){return D instanceof I||!(!D||!D[E])},P=function D(F,U,z){var B;if(!F)return S;if(typeof F=="string"){var W=F.toLowerCase();w[W]&&(B=W),U&&(w[W]=U,B=W);var R=F.split("-");if(!B&&R.length>1)return D(R[0])}else{var $=F.name;w[$]=F,B=$}return!z&&B&&(S=B),B||!z&&S},A=function(D,F){if(M(D))return D.clone();var U=typeof F=="object"?F:{};return U.date=D,U.args=arguments,new I(U)},k=x;k.l=P,k.i=M,k.w=function(D,F){return A(D,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var I=function(){function D(U){this.$L=P(U.locale,null,!0),this.parse(U),this.$x=this.$x||U.x||{},this[E]=!0}var F=D.prototype;return F.parse=function(U){this.$d=function(z){var B=z.date,W=z.utc;if(B===null)return new Date(NaN);if(k.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var R=B.match(m);if(R){var $=R[2]-1||0,q=(R[7]||"0").substring(0,3);return W?new Date(Date.UTC(R[1],$,R[3]||1,R[4]||0,R[5]||0,R[6]||0,q)):new Date(R[1],$,R[3]||1,R[4]||0,R[5]||0,R[6]||0,q)}}return new Date(B)}(U),this.init()},F.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},F.$utils=function(){return k},F.isValid=function(){return this.$d.toString()!==v},F.isSame=function(U,z){var B=A(U);return this.startOf(z)<=B&&B<=this.endOf(z)},F.isAfter=function(U,z){return A(U)<this.startOf(z)},F.isBefore=function(U,z){return this.endOf(z)<A(U)},F.$g=function(U,z,B){return k.u(U)?this[z]:this.set(B,U)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(U,z){var B=this,W=!!k.u(z)||z,R=k.p(U),$=function(de,ge){var me=k.w(B.$u?Date.UTC(B.$y,ge,de):new Date(B.$y,ge,de),B);return W?me:me.endOf(u)},q=function(de,ge){return k.w(B.toDate()[de].apply(B.toDate("s"),(W?[0,0,0,0]:[23,59,59,999]).slice(ge)),B)},Z=this.$W,G=this.$M,X=this.$D,J="set"+(this.$u?"UTC":"");switch(R){case p:return W?$(1,0):$(31,11);case d:return W?$(1,G):$(0,G+1);case c:var pe=this.$locale().weekStart||0,fe=(Z<pe?Z+7:Z)-pe;return $(W?X-fe:X+(6-fe),G);case u:case f:return q(J+"Hours",0);case l:return q(J+"Minutes",1);case o:return q(J+"Seconds",2);case s:return q(J+"Milliseconds",3);default:return this.clone()}},F.endOf=function(U){return this.startOf(U,!1)},F.$set=function(U,z){var B,W=k.p(U),R="set"+(this.$u?"UTC":""),$=(B={},B[u]=R+"Date",B[f]=R+"Date",B[d]=R+"Month",B[p]=R+"FullYear",B[l]=R+"Hours",B[o]=R+"Minutes",B[s]=R+"Seconds",B[n]=R+"Milliseconds",B)[W],q=W===u?this.$D+(z-this.$W):z;if(W===d||W===p){var Z=this.clone().set(f,1);Z.$d[$](q),Z.init(),this.$d=Z.set(f,Math.min(this.$D,Z.daysInMonth())).$d}else $&&this.$d[$](q);return this.init(),this},F.set=function(U,z){return this.clone().$set(U,z)},F.get=function(U){return this[k.p(U)]()},F.add=function(U,z){var B,W=this;U=Number(U);var R=k.p(z),$=function(G){var X=A(W);return k.w(X.date(X.date()+Math.round(G*U)),W)};if(R===d)return this.set(d,this.$M+U);if(R===p)return this.set(p,this.$y+U);if(R===u)return $(1);if(R===c)return $(7);var q=(B={},B[o]=r,B[l]=a,B[s]=i,B)[R]||1,Z=this.$d.getTime()+U*q;return k.w(Z,this)},F.subtract=function(U,z){return this.add(-1*U,z)},F.format=function(U){var z=this,B=this.$locale();if(!this.isValid())return B.invalidDate||v;var W=U||"YYYY-MM-DDTHH:mm:ssZ",R=k.z(this),$=this.$H,q=this.$m,Z=this.$M,G=B.weekdays,X=B.months,J=B.meridiem,pe=function(ge,me,ke,ce){return ge&&(ge[me]||ge(z,W))||ke[me].slice(0,ce)},fe=function(ge){return k.s($%12||12,ge,"0")},de=J||function(ge,me,ke){var ce=ge<12?"AM":"PM";return ke?ce.toLowerCase():ce};return W.replace(g,function(ge,me){return me||function(ke){switch(ke){case"YY":return String(z.$y).slice(-2);case"YYYY":return k.s(z.$y,4,"0");case"M":return Z+1;case"MM":return k.s(Z+1,2,"0");case"MMM":return pe(B.monthsShort,Z,X,3);case"MMMM":return pe(X,Z);case"D":return z.$D;case"DD":return k.s(z.$D,2,"0");case"d":return String(z.$W);case"dd":return pe(B.weekdaysMin,z.$W,G,2);case"ddd":return pe(B.weekdaysShort,z.$W,G,3);case"dddd":return G[z.$W];case"H":return String($);case"HH":return k.s($,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return de($,q,!0);case"A":return de($,q,!1);case"m":return String(q);case"mm":return k.s(q,2,"0");case"s":return String(z.$s);case"ss":return k.s(z.$s,2,"0");case"SSS":return k.s(z.$ms,3,"0");case"Z":return R}return null}(ge)||R.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(U,z,B){var W,R=this,$=k.p(z),q=A(U),Z=(q.utcOffset()-this.utcOffset())*r,G=this-q,X=function(){return k.m(R,q)};switch($){case p:W=X()/12;break;case d:W=X();break;case h:W=X()/3;break;case c:W=(G-Z)/6048e5;break;case u:W=(G-Z)/864e5;break;case l:W=G/a;break;case o:W=G/r;break;case s:W=G/i;break;default:W=G}return B?W:k.a(W)},F.daysInMonth=function(){return this.endOf(d).$D},F.$locale=function(){return w[this.$L]},F.locale=function(U,z){if(!U)return this.$L;var B=this.clone(),W=P(U,z,!0);return W&&(B.$L=W),B},F.clone=function(){return k.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},D}(),O=I.prototype;return A.prototype=O,[["$ms",n],["$s",s],["$m",o],["$H",l],["$W",u],["$M",d],["$y",p],["$D",f]].forEach(function(D){O[D[1]]=function(F){return this.$g(F,D[0],D[1])}}),A.extend=function(D,F){return D.$i||(D(F,I,A),D.$i=!0),A},A.locale=P,A.isDayjs=M,A.unix=function(D){return A(1e3*D)},A.en=w[S],A.Ls=w,A.p={},A})})(lF);var uF=lF.exports;const Ln=fc(uF);var cF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){var i={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},r=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,n=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},u=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var y=g.match(/([+-]|\d\d)/g),b=60*y[1]+(+y[2]||0);return b===0?0:y[0]==="+"?-b:b}(m)}],h=function(m){var g=l[m];return g&&(g.indexOf?g:g.s.concat(g.f))},p=function(m,g){var y,b=l.meridiem;if(b){for(var x=1;x<=24;x+=1)if(m.indexOf(b(x,0,g))>-1){y=x>12;break}}else y=m===(g?"pm":"PM");return y},f={A:[o,function(m){this.afternoon=p(m,!1)}],a:[o,function(m){this.afternoon=p(m,!0)}],Q:[a,function(m){this.month=3*(m-1)+1}],S:[a,function(m){this.milliseconds=100*+m}],SS:[n,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[n,c("day")],Do:[o,function(m){var g=l.ordinal,y=m.match(/\d+/);if(this.day=y[0],g)for(var b=1;b<=31;b+=1)g(b).replace(/\[|\]/g,"")===m&&(this.day=b)}],w:[s,c("week")],ww:[n,c("week")],M:[s,c("month")],MM:[n,c("month")],MMM:[o,function(m){var g=h("months"),y=(h("monthsShort")||g.map(function(b){return b.slice(0,3)})).indexOf(m)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[o,function(m){var g=h("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[n,function(m){this.year=u(m)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function v(m){var g,y;g=m,y=l&&l.formats;for(var b=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(A,k,I){var O=I&&I.toUpperCase();return k||y[I]||i[I]||y[O].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(D,F,U){return F||U.slice(1)})})).match(r),x=b.length,S=0;S<x;S+=1){var w=b[S],E=f[w],M=E&&E[0],P=E&&E[1];b[S]=P?{regex:M,parser:P}:w.replace(/^\[|\]$/g,"")}return function(A){for(var k={},I=0,O=0;I<x;I+=1){var D=b[I];if(typeof D=="string")O+=D.length;else{var F=D.regex,U=D.parser,z=A.slice(O),B=F.exec(z)[0];U.call(k,B),A=A.replace(B,"")}}return function(W){var R=W.afternoon;if(R!==void 0){var $=W.hours;R?$<12&&(W.hours+=12):$===12&&(W.hours=0),delete W.afternoon}}(k),k}}return function(m,g,y){y.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(u=m.parseTwoDigitYear);var b=g.prototype,x=b.parse;b.parse=function(S){var w=S.date,E=S.utc,M=S.args;this.$u=E;var P=M[1];if(typeof P=="string"){var A=M[2]===!0,k=M[3]===!0,I=A||k,O=M[2];k&&(O=M[2]),l=this.$locale(),!A&&O&&(l=y.Ls[O]),this.$d=function(z,B,W,R){try{if(["x","X"].indexOf(B)>-1)return new Date((B==="X"?1e3:1)*z);var $=v(B)(z),q=$.year,Z=$.month,G=$.day,X=$.hours,J=$.minutes,pe=$.seconds,fe=$.milliseconds,de=$.zone,ge=$.week,me=new Date,ke=G||(q||Z?1:me.getDate()),ce=q||me.getFullYear(),le=0;q&&!Z||(le=Z>0?Z-1:me.getMonth());var xe,Ne=X||0,pt=J||0,at=pe||0,Oe=fe||0;return de?new Date(Date.UTC(ce,le,ke,Ne,pt,at,Oe+60*de.offset*1e3)):W?new Date(Date.UTC(ce,le,ke,Ne,pt,at,Oe)):(xe=new Date(ce,le,ke,Ne,pt,at,Oe),ge&&(xe=R(xe).week(ge).toDate()),xe)}catch{return new Date("")}}(w,P,E,y),this.init(),O&&O!==!0&&(this.$L=this.locale(O).$L),I&&w!=this.format(P)&&(this.$d=new Date("")),l={}}else if(P instanceof Array)for(var D=P.length,F=1;F<=D;F+=1){M[1]=P[F-1];var U=y.apply(this,M);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}F===D&&(this.$d=new Date(""))}else x.call(this,S)}}})})(cF);var kSe=cF.exports;const OSe=fc(kSe);var dF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){return function(i,r,a){r.prototype.isBetween=function(n,s,o,l){var u=a(n),c=a(s),d=(l=l||"()")[0]==="(",h=l[1]===")";return(d?this.isAfter(u,o):!this.isBefore(u,o))&&(h?this.isBefore(c,o):!this.isAfter(c,o))||(d?this.isBefore(u,o):!this.isAfter(u,o))&&(h?this.isAfter(c,o):!this.isBefore(c,o))}}})})(dF);var DSe=dF.exports;const ISe=fc(DSe);var hF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){var i="week",r="year";return function(a,n,s){var o=n.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=s(this).startOf(r).add(1,r).date(u),d=s(this).endOf(i);if(c.isBefore(d))return 1}var h=s(this).startOf(r).date(u).startOf(i).subtract(1,"millisecond"),p=this.diff(h,i,!0);return p<0?s(this).startOf("week").week():Math.ceil(p)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(hF);var LSe=hF.exports;const BSe=fc(LSe);var pF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){return function(i,r){var a=r.prototype,n=a.format;a.format=function(s){var o=this,l=this.$locale();if(!this.isValid())return n.bind(this)(s);var u=this.$utils(),c=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return u.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return u.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return u.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return n.bind(this)(c)}}})})(pF);var zSe=pF.exports;const RSe=fc(zSe);var fF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){return function(i,r){r.prototype.weekYear=function(){var a=this.month(),n=this.week(),s=this.year();return n===1&&a===11?s+1:a===0&&n>=52?s-1:s}}})})(fF);var NSe=fF.exports;const VSe=fc(NSe);var mF={exports:{}};(function(e,t){(function(i,r){e.exports=r()})(du,function(){var i="month",r="quarter";return function(a,n){var s=n.prototype;s.quarter=function(u){return this.$utils().u(u)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(u-1))};var o=s.add;s.add=function(u,c){return u=Number(u),this.$utils().p(c)===r?this.add(3*u,i):o.bind(this)(u,c)};var l=s.startOf;s.startOf=function(u,c){var d=this.$utils(),h=!!d.u(c)||c;if(d.p(u)===r){var p=this.quarter()-1;return h?this.month(3*p).startOf(i).startOf("day"):this.month(3*p+2).endOf(i).endOf("day")}return l.bind(this)(u,c)}}})})(mF);var FSe=mF.exports;const jSe=fc(FSe);var $Se={exports:{}};(function(e,t){(function(i,r){e.exports=r(uF)})(du,function(i){function r(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var a=r(i),n={name:"zh-cn",weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),ordinal:function(s,o){return o==="W"?s+"周":s+"日"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},meridiem:function(s,o){var l=100*s+o;return l<600?"凌晨":l<900?"早上":l<1100?"上午":l<1300?"中午":l<1800?"下午":"晚上"}};return a.default.locale(n,null,!0),n})})($Se);var USe=Object.defineProperty,WSe=Object.defineProperties,HSe=Object.getOwnPropertyDescriptors,Z4=Object.getOwnPropertySymbols,GSe=Object.prototype.hasOwnProperty,qSe=Object.prototype.propertyIsEnumerable,Q4=(e,t,i)=>t in e?USe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,YSe=(e,t)=>{for(var i in t||(t={}))GSe.call(t,i)&&Q4(e,i,t[i]);if(Z4)for(var i of Z4(t))qSe.call(t,i)&&Q4(e,i,t[i]);return e},XSe=(e,t)=>WSe(e,HSe(t));const KSe=(e,t,i)=>{i=function(n,s){if(Ks(n))return n.clone();const o=typeof s=="object"?s:{};return o.date=n,o.args=arguments,new t(o)};const r=t.prototype,a=r.$utils;r.$utils=()=>{const n=a();return n.i=Ks,n},i.isDayjs=Ks};Ln.extend(KSe);Ln.extend(OSe);Ln.extend(ISe);Ln.extend(BSe);Ln.extend(RSe);Ln.extend(VSe);Ln.extend(jSe);const va=Ln,ka={add(e,t,i){return e.add(t,i)},subtract(e,t,i){return e.subtract(t,i)},startOf(e,t){return e.startOf(t)},startOfWeek(e,t){const i=e.day();let r=e.subtract(i-t,"day");return r.isAfter(e)&&(r=r.subtract(7,"day")),r},endOf(e,t){return e.endOf(t)},set(e,t,i){return e.set(t,i)},isSameWeek(e,t,i){const r=a=>{const n=a.day(),s=n-i+(n<i?7:0);return a.subtract(s,"day").week()};return r(e)===r(t)}};function An(){return va()}function Cm(e){return[...e].sort((t,i)=>t.valueOf()-i.valueOf())}function hP(e,t){const i=(r,a)=>r===void 0&&a===void 0?!1:r&&!a||!r&&a?!0:r?.valueOf()!==a?.valueOf();return t===void 0&&e===void 0?!1:bi(t)&&bi(e)?i(t[0],e[0])||i(t[1],e[1]):!bi(t)&&!bi(e)?i(t,e):!0}function Is(e,t){const i=a=>{const n=/(Q1)|(Q2)|(Q3)|(Q4)/,s={Q1:"01",Q2:"04",Q3:"07",Q4:"10"},[o]=n.exec(a);return a.replace(n,s[o])},r=a=>{if(a){if(typeof a=="string"){if(R9(t))return va(i(a),t.replace(/\[Q]Q/,"MM"));if(va(a,t).isValid())return va(a,t)}return va(a)}};return bi(e)?e.map(r):r(e)}function ys(e){const t=i=>i?i.toDate():void 0;return bi(e)?e.map(t):t(e)}function vF(e,t){va.locale(XSe(YSe({},va.Ls[e.toLocaleLowerCase()]),{weekStart:t}))}function ZSe(e){const t={};return e&&Object.keys(e).forEach(i=>{const r=String(i);r.indexOf("data-")===0&&(t[r]=e[r]),r.indexOf("aria-")===0&&(t[r]=e[r])}),t}function rd(e,t,i=" "){const r=String(e),a=r.length<t?`${i}${r}`:r;return a.length<t?rd(a,t,i):a}var QSe=se({name:"Week",props:{mode:{type:String},dayStartOfWeek:{type:Number},isWeek:{type:Boolean},panel:{type:Boolean},value:{type:Object,required:!0},selectHandler:{type:Function},pageShowData:{type:Object,required:!0},pageData:{type:Array}},setup(e){const{dayStartOfWeek:t,isWeek:i,panel:r,mode:a}=yt(e),n=Se("calendar-week-list"),{t:s}=Yr(),o=["monday","tuesday","wednesday","thursday","friday","saturday"];return t.value===0?o.unshift("sunday"):o.push("sunday"),i.value&&o.unshift("self"),()=>_("div",{class:n},[o.map(l=>_("div",{class:`${n}-item`,key:l},[s(`calendar.week.${r.value||a.value==="year"?"short":"long"}.${l}`)]))])}});function Tg(e,t){if(e&&bi(e))return e[t]}function gF({prefixCls:e,mergedValue:t,rangeValues:i,hoverRangeValues:r,panel:a,isSameTime:n,innerMode:s}){function o(l,u,c){return!u||!c?!1:n(l,u)||n(l,c)||l.isBetween(u,c,null,"[]")}return function(u,c){const d=Tg(i,0),h=Tg(i,1),p=Tg(r,0),f=Tg(r,1),v=!u.isPrev&&!u.isNext,m=v&&a,g=m&&d&&n(u.time,d),y=m&&h&&n(u.time,h),b=p&&d&&p.isBefore(d),x=h&&f&&f.isAfter(h),S=b&&g||x&&y;let w=n(u.time,An());return!a&&s==="year"&&(w=An().isSame(u.time,"date")),[`${e}-cell`,{[`${e}-cell-in-view`]:v,[`${e}-cell-today`]:w,[`${e}-cell-selected`]:t&&n(u.time,t),[`${e}-cell-range-start`]:g,[`${e}-cell-range-end`]:y,[`${e}-cell-in-range`]:m&&o(u.time,d,h),[`${e}-cell-in-range-near-hover`]:S,[`${e}-cell-hover-range-start`]:m&&p&&n(u.time,p),[`${e}-cell-hover-range-end`]:m&&f&&n(u.time,f),[`${e}-cell-hover-in-range`]:m&&o(u.time,p,f),[`${e}-cell-disabled`]:c}]}}var JSe=Object.defineProperty,eCe=Object.defineProperties,tCe=Object.getOwnPropertyDescriptors,J4=Object.getOwnPropertySymbols,iCe=Object.prototype.hasOwnProperty,rCe=Object.prototype.propertyIsEnumerable,eL=(e,t,i)=>t in e?JSe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,wS=(e,t)=>{for(var i in t||(t={}))iCe.call(t,i)&&eL(e,i,t[i]);if(J4)for(var i of J4(t))rCe.call(t,i)&&eL(e,i,t[i]);return e},xS=(e,t)=>eCe(e,tCe(t));const tL=6*7,ob=e=>({year:e.year(),month:e.month()+1,date:e.date(),day:e.day(),time:e}),aCe=e=>({start:ob(ka.startOf(e,"month")),end:ob(ka.endOf(e,"month")),days:e.daysInMonth()});function yF(e,{dayStartOfWeek:t=0,isWeek:i}){const r=aCe(e),a=Array(tL).fill(null).map(()=>({})),n=t===0?r.start.day:(r.start.day||7)-1;a[n]=xS(wS({},r.start),{isCurrent:!0});for(let o=0;o<n;o++)a[n-o-1]=xS(wS({},ob(ka.subtract(r.start.time,o+1,"day"))),{isPrev:!0});for(let o=0;o<tL-n-1;o++)a[n+o+1]=xS(wS({},ob(ka.add(r.start.time,o+1,"day"))),{isCurrent:o<r.days,isNext:o>=r.days-1});const s=Array(6).fill(null).map(()=>[]);for(let o=0;o<6;o++)if(s[o]=a.slice(o*7,7*(o+1)),i){const l=s[o][0].time,u=[...s[o]];s[o].unshift({weekRows:u,weekOfYear:l.week()})}return s}var bF=se({name:"Month",props:{cell:{type:Boolean},pageData:{type:Array},current:{type:Number},value:{type:Object,required:!0},selectHandler:{type:Function,required:!0},mode:{type:String},pageShowDate:{type:Object,required:!0},panel:{type:Boolean},dayStartOfWeek:{type:Number,required:!0},isWeek:{type:Boolean,required:!0}},setup(e,{slots:t}){const{pageData:i}=yt(e),r=Se("calendar"),a=e.pageShowDate.year(),n=T(()=>gF({prefixCls:r,mergedValue:e.value,panel:!1,innerMode:e.mode,rangeValues:[],hoverRangeValues:[],isSameTime:(l,u)=>l.isSame(u,"day")}));function s(l){return l.map((u,c)=>{var d;if(u.time){const h=()=>e.selectHandler(u.time,!1),p=e.isWeek?{onClick:h}:{},f=e.isWeek?{}:{onClick:h};return _("div",it({key:c,class:n.value(u,!1)},p),[t.default?(d=t.default)==null?void 0:d.call(t,{year:u.year,month:u.month,date:u.date}):_("div",it({class:`${r}-date`},f),[_("div",{class:`${r}-date-value`},[e.panel?u.date:_("div",{class:`${r}-date-circle`},[u.date])])])])}if("weekOfYear"in u){const h=e.value.year(),p=e.value.month()+1,f=e.value.week(),v=e.value&&u.weekRows.find(m=>m.year===h&&m.month===p)&&f===u.weekOfYear;return _("div",{key:c,class:[`${r}-cell`,`${r}-cell-week`,{[`${r}-cell-selected-week`]:v,[`${r}-cell-in-range`]:v}]},[_("div",{class:`${r}-date`},[_("div",{class:`${r}-date-value`},[u.weekOfYear])])])}return null})}let o=i.value;return typeof e.current=="number"&&(o=yF(va(`${a}-${rd(e.current+1,2,"0")}-01`),{dayStartOfWeek:e.dayStartOfWeek,isWeek:e.isWeek})),()=>_("div",{class:e.cell?`${r}-month-cell`:`${r}-month`},[_(QSe,{value:e.value,selectHandler:e.selectHandler,dayStartOfWeek:e.dayStartOfWeek,isWeek:e.isWeek,panel:e.panel,mode:e.mode,pageShowData:e.pageShowDate,pageData:e.pageData},null),_("div",{class:`${r}-month-cell-body`},[o?.map((l,u)=>_("div",{key:u,class:[`${r}-month-row`,{[`${r}-row-week`]:e.isWeek}]},[s(l)]))])])}}),nCe=Object.defineProperty,sCe=Object.defineProperties,oCe=Object.getOwnPropertyDescriptors,iL=Object.getOwnPropertySymbols,lCe=Object.prototype.hasOwnProperty,uCe=Object.prototype.propertyIsEnumerable,rL=(e,t,i)=>t in e?nCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cCe=(e,t)=>{for(var i in t||(t={}))lCe.call(t,i)&&rL(e,i,t[i]);if(iL)for(var i of iL(t))uCe.call(t,i)&&rL(e,i,t[i]);return e},dCe=(e,t)=>sCe(e,oCe(t));const wF=["January","February","March","April","May","June","July","August","September","October","November","December"].map((e,t)=>({name:e,value:t})),xF=Array(3);for(let e=0;e<3;e++)xF[e]=wF.slice(e*4,4*(e+1));const SF=Array(4);for(let e=0;e<4;e++)SF[e]=wF.slice(e*3,3*(e+1));var hCe=se({name:"Year",props:{mode:{type:String,required:!0},dayStartOfWeek:{type:Number,required:!0},value:{type:Object,required:!0},isWeek:{type:Boolean},panel:{type:Boolean,default:!1},pageShowData:{type:Object,required:!0},pageData:{type:Array},selectHandler:{type:Function,required:!0}},setup(e){const t=Se("calendar"),i=T(()=>gF({prefixCls:t,mergedValue:e.value,panel:!1,innerMode:e.mode,rangeValues:[],hoverRangeValues:[],isSameTime:(s,o)=>s.isSame(o,"month")})),{t:r}=Yr(),a=T(()=>e.pageShowData.year()),n=e.panel?SF:xF;return()=>_("div",{class:`${t}-year`},[n.map((s,o)=>_("div",{class:`${t}-year-row`,key:o},[s.map(l=>{const u=va(`${a.value}-${rd(l.value+1,2,"0")}-01`),c=e.panel?{onClick:()=>e.selectHandler(u,!1)}:{};return _("div",{key:l.value,class:i.value(dCe(cCe({},l),{time:u}),!1)},[e.panel?_("div",it({class:`${t}-date`},c),[_("div",{class:`${t}-date-value`},[r(`calendar.month.short.${l.name}`)])]):_("div",{class:`${t}-month-with-days`},[_("div",{class:`${t}-month-title`},[r(`calendar.month.long.${l.name}`)]),_(bF,{pageShowDate:e.pageShowData,pageData:e.pageData,dayStartOfWeek:e.dayStartOfWeek,selectHandler:e.selectHandler,isWeek:e.isWeek,cell:!0,current:l.value,value:e.value,mode:e.mode},null)])])})]))])}});const pCe=({defaultValue:e,modelValue:t,emit:i,eventName:r="input",updateEventName:a="update:modelValue",eventHandlers:n})=>{var s;const o=ie(),l=ie((s=e?.value)!=null?s:""),u=ie(!1),c=ie(!1),d=ie("");let h;const p=T(()=>{var w;return(w=t?.value)!=null?w:l.value}),f=(w,E)=>{l.value=w,i(a,w),i(r,w,E)},v=w=>{const{value:E}=w.target;c.value||(f(E,w),hr(()=>{o.value&&p.value!==o.value.value&&(o.value.value=p.value)}))},m=w=>{r==="input"&&p.value!==h&&(h=p.value,i("change",p.value,w))},g=w=>{var E;const{value:M}=w.target;w.type==="compositionend"?(c.value=!1,d.value="",f(M,w),hr(()=>{o.value&&p.value!==o.value.value&&(o.value.value=p.value)})):(c.value=!0,d.value=p.value+((E=w.data)!=null?E:""))},y=w=>{var E,M;u.value=!0,h=p.value,i("focus",w),(M=(E=n?.value)==null?void 0:E.onFocus)==null||M.call(E,w)},b=w=>{var E,M;u.value=!1,i("blur",w),(M=(E=n?.value)==null?void 0:E.onBlur)==null||M.call(E,w),m(w)},x=w=>{const E=w.key||w.code;!c.value&&E===nE.key&&(i("pressEnter",w),m(w))},S=w=>{o.value&&w.target!==o.value&&(w.preventDefault(),o.value.focus())};return Vt(p,w=>{o.value&&w!==o.value.value&&(o.value.value=w)}),{inputRef:o,_value:l,_focused:u,isComposition:c,compositionValue:d,computedValue:p,handleInput:v,handleComposition:g,handleFocus:y,handleBlur:b,handleKeyDown:x,handleMousedown:S}};var fCe=se({name:"InputLabel",inheritAttrs:!1,props:{modelValue:Object,inputValue:{type:String,default:""},enabledInput:Boolean,formatLabel:Function,placeholder:String,retainInputValue:Boolean,disabled:Boolean,baseCls:String,size:String,error:Boolean,focused:Boolean,uninjectFormItemContext:Boolean},emits:["update:inputValue","inputValueChange","focus","blur"],setup(e,{attrs:t,emit:i,slots:r}){var a;const{size:n,disabled:s,error:o,inputValue:l,uninjectFormItemContext:u}=yt(e),c=(a=e.baseCls)!=null?a:Se("input-label"),{mergedSize:d,mergedDisabled:h,mergedError:p,eventHandlers:f}=Wr({size:n,disabled:s,error:o,uninject:u?.value}),{mergedSize:v}=hn(d),{inputRef:m,_focused:g,computedValue:y,handleInput:b,handleComposition:x,handleFocus:S,handleBlur:w,handleMousedown:E}=pCe({modelValue:l,emit:i,eventName:"inputValueChange",updateEventName:"update:inputValue",eventHandlers:f}),M=T(()=>{var z;return(z=e.focused)!=null?z:g.value}),P=T(()=>e.enabledInput&&g.value||!e.modelValue),A=()=>{var z,B;return e.modelValue?(B=(z=e.formatLabel)==null?void 0:z.call(e,e.modelValue))!=null?B:e.modelValue.label:""},k=T(()=>e.enabledInput&&e.modelValue?A():e.placeholder),I=()=>{var z,B;return e.modelValue?(B=(z=r.default)==null?void 0:z.call(r,{data:e.modelValue}))!=null?B:A():null},O=T(()=>[c,`${c}-size-${v.value}`,{[`${c}-search`]:e.enabledInput,[`${c}-focus`]:M.value,[`${c}-disabled`]:h.value,[`${c}-error`]:p.value}]),D=T(()=>ln(t,sc)),F=T(()=>ml(t,sc));return{inputRef:m,render:()=>_("span",it(D.value,{class:O.value,title:A(),onMousedown:E}),[r.prefix&&_("span",{class:`${c}-prefix`},[r.prefix()]),_("input",it(F.value,{ref:m,class:[`${c}-input`,{[`${c}-input-hidden`]:!P.value}],value:y.value,readonly:!e.enabledInput,placeholder:k.value,disabled:h.value,onInput:b,onFocus:S,onBlur:w,onCompositionstart:x,onCompositionupdate:x,onCompositionend:x}),null),_("span",{class:[`${c}-value`,{[`${c}-value-hidden`]:P.value}]},[I()]),r.suffix&&_("span",{class:`${c}-suffix`},[r.suffix()])])}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}}),mCe=Object.defineProperty,aL=Object.getOwnPropertySymbols,vCe=Object.prototype.hasOwnProperty,gCe=Object.prototype.propertyIsEnumerable,nL=(e,t,i)=>t in e?mCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,yCe=(e,t)=>{for(var i in t||(t={}))vCe.call(t,i)&&nL(e,i,t[i]);if(aL)for(var i of aL(t))gCe.call(t,i)&&nL(e,i,t[i]);return e};const bCe=(e,t)=>{const i=[];for(const r of e)if(ki(r))i.push({raw:r,value:r[t.value],label:r[t.label],closable:r[t.closable],tagProps:r[t.tagProps]});else if(e||Mt(e)){const a={value:r,label:String(r),closable:!0};i.push(yCe({raw:a},a))}return i};var wCe=Object.defineProperty,sL=Object.getOwnPropertySymbols,xCe=Object.prototype.hasOwnProperty,SCe=Object.prototype.propertyIsEnumerable,oL=(e,t,i)=>t in e?wCe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,kg=(e,t)=>{for(var i in t||(t={}))xCe.call(t,i)&&oL(e,i,t[i]);if(sL)for(var i of sL(t))SCe.call(t,i)&&oL(e,i,t[i]);return e};const CCe={value:"value",label:"label",closable:"closable",tagProps:"tagProps"};var SS=se({name:"InputTag",inheritAttrs:!1,props:{modelValue:{type:Array},defaultValue:{type:Array,default:()=>[]},inputValue:String,defaultInputValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},size:{type:String},maxTagCount:{type:Number,default:0},retainInputValue:{type:[Boolean,Object],default:!1},formatTag:{type:Function},uniqueValue:{type:Boolean,default:!1},fieldNames:{type:Object},tagNowrap:{type:Boolean,default:!1},baseCls:String,focused:Boolean,disabledInput:Boolean,uninjectFormItemContext:Boolean},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,change:(e,t)=>!0,inputValueChange:(e,t)=>!0,pressEnter:(e,t)=>!0,remove:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:i,attrs:r}){const{size:a,disabled:n,error:s,uninjectFormItemContext:o,modelValue:l}=yt(e),u=e.baseCls||Se("input-tag"),c=ie(),d=ie(),{mergedSize:h,mergedDisabled:p,mergedError:f,feedback:v,eventHandlers:m}=Wr({size:a,disabled:n,error:s,uninject:o?.value}),{mergedSize:g}=hn(h),y=T(()=>kg(kg({},CCe),e.fieldNames)),b=ie(!1),x=ie(e.defaultValue),S=ie(e.defaultInputValue),w=ie(!1),E=ie(""),M=T(()=>ki(e.retainInputValue)?kg({create:!1,blur:!1},e.retainInputValue):{create:e.retainInputValue,blur:e.retainInputValue}),P=gt({width:"12px"}),A=T(()=>e.focused||b.value),k=(le,xe)=>{S.value=le,t("update:inputValue",le),t("inputValueChange",le,xe)},I=le=>{var xe;const{value:Ne}=le.target;le.type==="compositionend"?(w.value=!1,E.value="",k(Ne,le),hr(()=>{c.value&&D.value!==c.value.value&&(c.value.value=D.value)})):(w.value=!0,E.value=D.value+((xe=le.data)!=null?xe:""))},O=T(()=>{var le;return(le=e.modelValue)!=null?le:x.value}),D=T(()=>{var le;return(le=e.inputValue)!=null?le:S.value});Vt(l,le=>{(ei(le)||Wn(le))&&(x.value=[])});const F=le=>{c.value&&le.target!==c.value&&(le.preventDefault(),c.value.focus())},U=le=>{const{value:xe}=le.target;w.value||(k(xe,le),hr(()=>{c.value&&D.value!==c.value.value&&(c.value.value=D.value)}))},z=T(()=>bCe(O.value,y.value)),B=T(()=>{if(e.maxTagCount>0){const le=z.value.length-e.maxTagCount;if(le>0){const xe=z.value.slice(0,e.maxTagCount),Ne={value:"__arco__more",label:`+${le}...`,closable:!1};return xe.push(kg({raw:Ne},Ne)),xe}}return z.value}),W=(le,xe)=>{var Ne,pt;x.value=le,t("update:modelValue",le),t("change",le,xe),(pt=(Ne=m.value)==null?void 0:Ne.onChange)==null||pt.call(Ne,xe)},R=(le,xe,Ne)=>{var pt;const at=(pt=O.value)==null?void 0:pt.filter((Oe,Ye)=>Ye!==xe);W(at,Ne),t("remove",le,Ne)},$=le=>{W([],le),t("clear",le)},q=T(()=>!p.value&&!e.readonly&&e.allowClear&&!!O.value.length),Z=le=>{var xe;if(D.value){if(le.preventDefault(),e.uniqueValue&&((xe=O.value)!=null&&xe.includes(D.value))){t("pressEnter",D.value,le);return}const Ne=O.value.concat(D.value);W(Ne,le),t("pressEnter",D.value,le),M.value.create||k("",le)}},G=le=>{var xe,Ne;b.value=!0,t("focus",le),(Ne=(xe=m.value)==null?void 0:xe.onFocus)==null||Ne.call(xe,le)},X=le=>{var xe,Ne;b.value=!1,!M.value.blur&&D.value&&k("",le),t("blur",le),(Ne=(xe=m.value)==null?void 0:xe.onBlur)==null||Ne.call(xe,le)},J=()=>{for(let le=z.value.length-1;le>=0;le--)if(z.value[le].closable)return le;return-1},pe=le=>{if(p.value||e.readonly)return;const xe=le.key||le.code;if(!w.value&&D.value&&xe===nE.key&&Z(le),!w.value&&B.value.length>0&&!D.value&&xe===bz.key){const Ne=J();Ne>=0&&R(z.value[Ne].value,Ne,le)}},fe=le=>{le>12?P.width=`${le}px`:P.width="12px"};xi(()=>{d.value&&fe(d.value.offsetWidth)});const de=()=>{d.value&&fe(d.value.offsetWidth)};Vt(D,le=>{c.value&&!w.value&&le!==c.value.value&&(c.value.value=le)});const ge=T(()=>[u,`${u}-size-${g.value}`,{[`${u}-disabled`]:p.value,[`${u}-disabled-input`]:e.disabledInput,[`${u}-error`]:f.value,[`${u}-focus`]:A.value,[`${u}-readonly`]:e.readonly,[`${u}-has-tag`]:B.value.length>0,[`${u}-has-prefix`]:!!i.prefix,[`${u}-has-suffix`]:!!i.suffix||q.value||v.value,[`${u}-has-placeholder`]:!O.value.length}]),me=T(()=>ln(r,sc)),ke=T(()=>ml(r,sc));return{inputRef:c,render:()=>{var le;return _("span",it({class:ge.value,onMousedown:F},me.value),[_(Ao,{onResize:de},{default:()=>[_("span",{ref:d,class:`${u}-mirror`},[B.value.length>0?E.value||D.value:E.value||D.value||e.placeholder])]}),i.prefix&&_("span",{class:`${u}-prefix`},[i.prefix()]),_(Am,{tag:"span",name:"input-tag-zoom",class:[`${u}-inner`,{[`${u}-nowrap`]:e.tagNowrap}]},{default:()=>[B.value.map((xe,Ne)=>_(Pb,it({key:`tag-${xe.value}`,class:`${u}-tag`,closable:!p.value&&!e.readonly&&xe.closable,visible:!0,nowrap:e.tagNowrap},xe.tagProps,{onClose:pt=>R(xe.value,Ne,pt)}),{default:()=>{var pt,at,Oe,Ye;return[(Ye=(Oe=(pt=i.tag)==null?void 0:pt.call(i,{data:xe.raw}))!=null?Oe:(at=e.formatTag)==null?void 0:at.call(e,xe.raw))!=null?Ye:xe.label]}})),_("input",it(ke.value,{ref:c,key:"input-tag-input",class:`${u}-input`,style:P,placeholder:B.value.length===0?e.placeholder:void 0,disabled:p.value,readonly:e.readonly||e.disabledInput,onInput:U,onKeydown:pe,onFocus:G,onBlur:X,onCompositionstart:I,onCompositionupdate:I,onCompositionend:I}),null)]}),q.value&&_(Ur,{class:`${u}-clear-btn`,onClick:$,onMousedown:xe=>xe.stopPropagation()},{default:()=>[_(kn,null,null)]}),(i.suffix||!!v.value)&&_("span",{class:`${u}-suffix`},[(le=i.suffix)==null?void 0:le.call(i),!!v.value&&_(km,{type:v.value},null)])])}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const CF=Object.assign(SS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+SS.name,SS)}});var lb=se({name:"SelectView",props:{modelValue:{type:Array,required:!0},inputValue:String,placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},opened:{type:Boolean,default:!1},size:{type:String},bordered:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowCreate:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:e=>bi(e.modelValue)},maxTagCount:{type:Number,default:0},tagNowrap:{type:Boolean,default:!1},retainInputValue:{type:Boolean,default:!1}},emits:["remove","clear","focus","blur"],setup(e,{emit:t,slots:i}){const{size:r,disabled:a,error:n}=yt(e),s=Se("select-view"),{feedback:o,eventHandlers:l,mergedDisabled:u,mergedSize:c,mergedError:d}=Wr({size:r,disabled:a,error:n}),{mergedSize:h}=hn(c),{opened:p}=yt(e),f=ie(),v=T(()=>{var k;return(k=f.value)==null?void 0:k.inputRef}),m=T(()=>e.modelValue.length===0),g=T(()=>e.allowSearch||e.allowCreate),y=T(()=>e.allowClear&&!e.disabled&&!m.value),b=k=>{var I,O;t("focus",k),(O=(I=l.value)==null?void 0:I.onFocus)==null||O.call(I,k)},x=k=>{var I,O;t("blur",k),(O=(I=l.value)==null?void 0:I.onBlur)==null||O.call(I,k)},S=k=>{t("remove",k)},w=k=>{t("clear",k)},E=()=>{var k,I,O,D;return e.loading?(I=(k=i["loading-icon"])==null?void 0:k.call(i))!=null?I:_($n,null,null):e.allowSearch&&e.opened?(D=(O=i["search-icon"])==null?void 0:O.call(i))!=null?D:_(E_,null,null):i["arrow-icon"]?i["arrow-icon"]():_(kp,{class:`${s}-arrow-icon`},null)},M=()=>_(Xt,null,[y.value&&_(Ur,{class:`${s}-clear-btn`,onClick:w,onMousedown:k=>k.stopPropagation()},{default:()=>[_(kn,null,null)]}),_("span",{class:`${s}-icon`},[E()]),!!o.value&&_(km,{type:o.value},null)]);Vt(p,k=>{!k&&v.value&&v.value.isSameNode(document.activeElement)&&v.value.blur()});const P=T(()=>[`${s}-${e.multiple?"multiple":"single"}`,{[`${s}-opened`]:e.opened,[`${s}-borderless`]:!e.bordered}]);return{inputRef:v,handleFocus:b,handleBlur:x,render:()=>e.multiple?_(CF,{ref:f,baseCls:s,class:P.value,modelValue:e.modelValue,inputValue:e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:u.value,size:h.value,error:d.value,maxTagCount:e.maxTagCount,disabledInput:!e.allowSearch&&!e.allowCreate,tagNowrap:e.tagNowrap,retainInputValue:!0,uninjectFormItemContext:!0,onRemove:S,onFocus:b,onBlur:x},{prefix:i.prefix,suffix:M,tag:i.label}):_(fCe,{ref:f,baseCls:s,class:P.value,modelValue:e.modelValue[0],inputValue:e.inputValue,focused:e.opened,placeholder:e.placeholder,disabled:u.value,size:h.value,error:d.value,enabledInput:g.value,uninjectFormItemContext:!0,onFocus:b,onBlur:x},{default:i.label,prefix:i.prefix,suffix:M})}},methods:{focus(){this.inputRef&&this.inputRef.focus()},blur(){this.inputRef&&this.inputRef.blur()}},render(){return this.render()}});const _Ce=se({name:"Optgroup",props:{label:{type:String}},setup(){return{prefixCls:Se("select-group")}}});function MCe(e,t,i,r,a,n){return N(),ee(Xt,null,[ve("li",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"label",{},()=>[ti(Bt(e.label),1)])],2),ye(e.$slots,"default")],64)}var Wf=We(_Ce,[["render",MCe]]);const lL=typeof window>"u"?global:window;function _m(e,t){let i=0;return(...r)=>{i&&lL.clearTimeout(i),i=lL.setTimeout(()=>{i=0,e(...r)},t)}}var ECe=Object.defineProperty,ACe=Object.defineProperties,PCe=Object.getOwnPropertyDescriptors,uL=Object.getOwnPropertySymbols,TCe=Object.prototype.hasOwnProperty,kCe=Object.prototype.propertyIsEnumerable,cL=(e,t,i)=>t in e?ECe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,cf=(e,t)=>{for(var i in t||(t={}))TCe.call(t,i)&&cL(e,i,t[i]);if(uL)for(var i of uL(t))kCe.call(t,i)&&cL(e,i,t[i]);return e},OCe=(e,t)=>ACe(e,PCe(t));function DCe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}const ICe={value:"value",label:"label",disabled:"disabled",tagProps:"tagProps",render:"render"};var CS=se({name:"Select",components:{Trigger:$a,SelectView:lb},inheritAttrs:!1,props:{multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Object,Array],default:e=>ei(e.multiple)?"":[]},inputValue:{type:String},defaultInputValue:{type:String,default:""},size:{type:String},placeholder:String,loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},allowSearch:{type:[Boolean,Object],default:e=>!!e.multiple},allowCreate:{type:Boolean,default:!1},maxTagCount:{type:Number,default:0},popupContainer:{type:[String,Object]},bordered:{type:Boolean,default:!0},defaultActiveFirstOption:{type:Boolean,default:!0},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},unmountOnClose:{type:Boolean,default:!1},filterOption:{type:[Boolean,Function],default:!0},options:{type:Array,default:()=>[]},virtualListProps:{type:Object},triggerProps:{type:Object},formatLabel:{type:Function},fallbackOption:{type:[Boolean,Function],default:!0},showExtraOptions:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},searchDelay:{type:Number,default:500},limit:{type:Number,default:0},fieldNames:{type:Object},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,"update:inputValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,popupVisibleChange:e=>!0,clear:e=>!0,remove:e=>!0,search:e=>!0,dropdownScroll:e=>!0,dropdownReachBottom:e=>!0,exceedLimit:(e,t)=>!0},setup(e,{slots:t,emit:i,attrs:r}){const{size:a,disabled:n,error:s,options:o,filterOption:l,valueKey:u,multiple:c,popupVisible:d,defaultPopupVisible:h,showExtraOptions:p,modelValue:f,fieldNames:v,loading:m,defaultActiveFirstOption:g}=yt(e),y=Se("select"),{mergedSize:b,mergedDisabled:x,mergedError:S,eventHandlers:w}=Wr({size:a,disabled:n,error:s}),E=T(()=>e.virtualListProps?"div":"li"),M=T(()=>ki(e.allowSearch)&&!!e.allowSearch.retainInputValue);T(()=>{if(Zt(e.formatLabel))return Pe=>{const Te=at.get(Pe.value);return e.formatLabel(Te)}});const P=ie(),A=ie({}),k=ie(),{computedPopupVisible:I,handlePopupVisibleChange:O}=h1({popupVisible:d,defaultPopupVisible:h,emit:i}),D=ie(e.defaultValue),F=T(()=>{var Pe;const Te=(Pe=e.modelValue)!=null?Pe:D.value;return(bi(Te)?Te:Te||Mt(Te)||na(Te)||jn(Te)?[Te]:[]).map(Le=>({value:Le,key:gd(Le,e.valueKey)}))});Vt(f,Pe=>{(ei(Pe)||Wn(Pe))&&(D.value=c.value?[]:Pe)});const U=T(()=>F.value.map(Pe=>Pe.key)),z=T(()=>cf(cf({},ICe),v?.value)),B=ie(),W=Pe=>{const Te={};return Pe.forEach(Be=>{Te[Be]=at.get(Be)}),Te},R=Pe=>{B.value=W(Pe)},$=Pe=>Zt(e.fallbackOption)?e.fallbackOption(Pe):{[z.value.value]:Pe,[z.value.label]:String(ki(Pe)?Pe[u?.value]:Pe)},q=()=>{const Pe=[],Te=[];if(e.allowCreate||e.fallbackOption){for(const Be of F.value)if(!Te.includes(Be.key)&&Be.value!==""){const Le=at.get(Be.key);(!Le||Le.origin==="extraOptions")&&(Pe.push(Be),Te.push(Be.key))}}if(e.allowCreate&&J.value){const Be=gd(J.value);if(!Te.includes(Be)){const Le=at.get(Be);(!Le||Le.origin==="extraOptions")&&Pe.push({value:J.value,key:Be})}}return Pe},Z=ie([]),G=T(()=>Z.value.map(Pe=>{var Te;let Be=$(Pe.value);const Le=(Te=B.value)==null?void 0:Te[Pe.key];return!ei(Le)&&!z9(Le)&&(Be=cf(cf({},Be),Le)),Be}));hr(()=>{on(()=>{var Pe;const Te=q();if(Te.length!==Z.value.length)Z.value=Te;else if(Te.length>0){for(let Be=0;Be<Te.length;Be++)if(Te[Be].key!==((Pe=Z.value[Be])==null?void 0:Pe.key)){Z.value=Te;break}}})});const X=ie(""),J=T(()=>{var Pe;return(Pe=e.inputValue)!=null?Pe:X.value});Vt(I,Pe=>{!Pe&&!M.value&&J.value&&de("")});const pe=Pe=>{var Te,Be;return e.multiple?Pe.map(Le=>{var jt,kt;return(kt=(jt=at.get(Le))==null?void 0:jt.value)!=null?kt:""}):(Be=(Te=at.get(Pe[0]))==null?void 0:Te.value)!=null?Be:Kwe(at)?void 0:""},fe=Pe=>{var Te,Be;const Le=pe(Pe);D.value=Le,i("update:modelValue",Le),i("change",Le),(Be=(Te=w.value)==null?void 0:Te.onChange)==null||Be.call(Te),R(Pe)},de=Pe=>{X.value=Pe,i("update:inputValue",Pe),i("inputValueChange",Pe)},ge=(Pe,Te)=>{if(e.multiple){if(U.value.includes(Pe)){const Be=U.value.filter(Le=>Le!==Pe);fe(Be)}else if(Ye.value.includes(Pe))if(e.limit>0&&U.value.length>=e.limit){const Be=at.get(Pe);i("exceedLimit",Be?.value,Te)}else{const Be=U.value.concat(Pe);fe(Be)}M.value||de("")}else{if(Pe!==U.value[0]&&fe([Pe]),M.value){const Be=at.get(Pe);Be&&de(Be.label)}O(!1)}},me=_m(Pe=>{i("search",Pe)},e.searchDelay),ke=Pe=>{Pe!==J.value&&(I.value||O(!0),de(Pe),e.allowSearch&&me(Pe))},ce=Pe=>{const Te=at.get(Pe),Be=U.value.filter(Le=>Le!==Pe);fe(Be),i("remove",Te?.value)},le=Pe=>{Pe?.stopPropagation();const Te=U.value.filter(Be=>{var Le;return(Le=at.get(Be))==null?void 0:Le.disabled});fe(Te),de(""),i("clear",Pe)},xe=Pe=>{i("dropdownScroll",Pe)},Ne=Pe=>{i("dropdownReachBottom",Pe)},{validOptions:pt,optionInfoMap:at,validOptionInfos:Oe,enabledOptionKeys:Ye,handleKeyDown:xt}=lP({multiple:c,options:o,extraOptions:G,inputValue:J,filterOption:l,showExtraOptions:p,component:E,valueKey:u,fieldNames:v,loading:m,popupVisible:I,valueKeys:U,dropdownRef:P,optionRefs:A,virtualListRef:k,defaultActiveFirstOption:g,onSelect:ge,onPopupVisibleChange:O}),ne=T(()=>{var Pe;const Te=[];for(const Be of F.value){const Le=at.get(Be.key);Le&&Te.push(OCe(cf({},Le),{value:Be.key,label:(Pe=Le?.label)!=null?Pe:String(ki(Be.value)?Be.value[u?.value]:Be.value),closable:!Le?.disabled,tagProps:Le?.tagProps}))}return Te}),K=Pe=>{if(Zt(t.option)){const Te=t.option;return()=>Te({data:Pe.raw})}return Zt(Pe.render)?Pe.render:()=>Pe.label},ze=Pe=>{if(rF(Pe)){let Te;return _(Wf,{key:Pe.key,label:Pe.label},DCe(Te=Pe.options.map(Be=>ze(Be)))?Te:{default:()=>[Te]})}return u1(Pe,{inputValue:J.value,filterOption:l?.value})?_(id,{ref:Te=>{Te?.$el&&(A.value[Pe.key]=Te.$el)},key:Pe.key,value:Pe.value,label:Pe.label,disabled:Pe.disabled,internal:!0},{default:K(Pe)}):null},ft=()=>_(sP,{ref:P,loading:e.loading,empty:Oe.value.length===0,virtualList:!!e.virtualListProps,scrollbar:e.scrollbar,showHeaderOnEmpty:e.showHeaderOnEmpty,showFooterOnEmpty:e.showFooterOnEmpty,onScroll:xe,onReachBottom:Ne},{default:()=>{var Pe,Te;return[...(Te=(Pe=t.default)==null?void 0:Pe.call(t))!=null?Te:[],...pt.value.map(ze)]},"virtual-list":()=>_(Tp,it(e.virtualListProps,{ref:k,data:pt.value}),{item:({item:Pe})=>ze(Pe)}),empty:t.empty,header:t.header,footer:t.footer}),te=({data:Pe})=>{var Te,Be,Le,jt;if((t.label||Zt(e.formatLabel))&&Pe){const kt=at.get(Pe.value);if(kt?.raw)return(Le=(Te=t.label)==null?void 0:Te.call(t,{data:kt.raw}))!=null?Le:(Be=e.formatLabel)==null?void 0:Be.call(e,kt.raw)}return(jt=Pe?.label)!=null?jt:""};return()=>_($a,it({trigger:"click",position:"bl",popupOffset:4,animationName:"slide-dynamic-origin",hideEmpty:!0,preventFocus:!0,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:x.value,popupVisible:I.value,unmountOnClose:e.unmountOnClose,clickToClose:!(e.allowSearch||e.allowCreate),popupContainer:e.popupContainer,onPopupVisibleChange:O},e.triggerProps),{default:()=>{var Pe,Te;return[(Te=(Pe=t.trigger)==null?void 0:Pe.call(t))!=null?Te:_(lb,it({class:y,modelValue:ne.value,inputValue:J.value,multiple:e.multiple,disabled:x.value,error:S.value,loading:e.loading,allowClear:e.allowClear,allowCreate:e.allowCreate,allowSearch:!!e.allowSearch,opened:I.value,maxTagCount:e.maxTagCount,placeholder:e.placeholder,bordered:e.bordered,size:b.value,tagNowrap:e.tagNowrap,onInputValueChange:ke,onRemove:ce,onClear:le,onKeydown:xt},r),{label:te,prefix:t.prefix,"arrow-icon":t["arrow-icon"],"loading-icon":t["loading-icon"],"search-icon":t["search-icon"]})]},content:ft})}});const Mm=Object.assign(CS,{Option:id,OptGroup:Wf,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+CS.name,CS),e.component(i+id.name,id),e.component(i+Wf.name,Wf)}}),_F=Symbol("RadioGroup");var f0=se({name:"Radio",components:{IconHover:Ur},props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultChecked:{type:Boolean,default:!1},value:{type:[String,Number,Boolean],default:!0},type:{type:String,default:"radio"},disabled:{type:Boolean,default:!1},uninjectGroupContext:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const r=Se("radio"),{modelValue:a}=yt(e),n=e.uninjectGroupContext?void 0:Ai(_F,void 0),{mergedDisabled:s,eventHandlers:o}=Wr({disabled:Os(e,"disabled")}),l=ie(null),u=ie(e.defaultChecked),c=T(()=>n?.name==="ArcoRadioGroup"),d=T(()=>{var x;return(x=n?.type)!=null?x:e.type}),h=T(()=>n?.disabled||s.value),p=T(()=>{var x,S;return c.value?n?.value===((x=e.value)!=null?x:!0):ei(e.modelValue)?u.value:e.modelValue===((S=e.value)!=null?S:!0)});Vt(a,x=>{(ei(x)||Wn(x))&&(u.value=!1)}),Vt(p,(x,S)=>{x!==S&&(u.value=x,l.value&&(l.value.checked=x))});const f=x=>{var S,w;(w=(S=o.value)==null?void 0:S.onFocus)==null||w.call(S,x)},v=x=>{var S,w;(w=(S=o.value)==null?void 0:S.onBlur)==null||w.call(S,x)},m=x=>{x.stopPropagation()},g=x=>{var S,w,E,M,P;u.value=!0,c.value?n?.handleChange((S=e.value)!=null?S:!0,x):(t("update:modelValue",(w=e.value)!=null?w:!0),t("change",(E=e.value)!=null?E:!0,x),(P=(M=o.value)==null?void 0:M.onChange)==null||P.call(M,x)),hr(()=>{l.value&&l.value.checked!==p.value&&(l.value.checked=p.value)})},y=T(()=>[`${d.value==="button"?`${r}-button`:r}`,{[`${r}-checked`]:p.value,[`${r}-disabled`]:h.value}]),b=()=>_(Xt,null,[_(be("icon-hover"),{class:`${r}-icon-hover`,disabled:h.value||p.value},{default:()=>[_("span",{class:`${r}-icon`},null)]}),i.default&&_("span",{class:`${r}-label`},[i.default()])]);return()=>{var x,S,w,E;return _("label",{class:y.value},[_("input",{ref:l,type:"radio",checked:p.value,value:e.value,class:`${r}-target`,disabled:h.value,onClick:m,onChange:g,onFocus:f,onBlur:v},null),d.value==="radio"?(E=(w=(S=i.radio)!=null?S:(x=n?.slots)==null?void 0:x.radio)==null?void 0:w({checked:p.value,disabled:h.value}))!=null?E:b():_("span",{class:`${r}-button-content`},[i.default&&i.default()])])}}}),m0=se({name:"RadioGroup",props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultValue:{type:[String,Number,Boolean],default:""},type:{type:String,default:"radio"},size:{type:String},options:{type:Array},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const r=Se("radio-group"),{size:a,type:n,disabled:s,modelValue:o}=yt(e),{mergedDisabled:l,mergedSize:u,eventHandlers:c}=Wr({size:a,disabled:s}),{mergedSize:d}=hn(u),h=ie(e.defaultValue),p=T(()=>{var y;return(y=e.modelValue)!=null?y:h.value}),f=T(()=>{var y;return((y=e.options)!=null?y:[]).map(b=>na(b)||Mt(b)?{label:b,value:b}:b)});dr(_F,gt({name:"ArcoRadioGroup",value:p,size:d,type:n,disabled:l,slots:i,handleChange:(y,b)=>{var x,S;h.value=y,t("update:modelValue",y),t("change",y,b),(S=(x=c.value)==null?void 0:x.onChange)==null||S.call(x,b)}})),Vt(p,y=>{h.value!==y&&(h.value=y)}),Vt(o,y=>{(ei(y)||Wn(y))&&(h.value="")});const m=T(()=>[`${r}${e.type==="button"?"-button":""}`,`${r}-size-${d.value}`,`${r}-direction-${e.direction}`,{[`${r}-disabled`]:l.value}]),g=()=>f.value.map(y=>_(f0,{key:y.value,value:y.value,disabled:y.disabled,modelValue:p.value===y.value},{default:()=>[i.label?i.label({data:y}):Zt(y.label)?y.label():y.label]}));return()=>{var y;return _("span",{class:m.value},[f.value.length>0?g():(y=i.default)==null?void 0:y.call(i)])}}});const sp=Object.assign(f0,{Group:m0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+f0.name,f0),e.component(i+m0.name,m0)}}),LCe=se({name:"IconLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-left`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),BCe=["stroke-width","stroke-linecap","stroke-linejoin"],zCe=ve("path",{d:"M32 8.4 16.444 23.956 32 39.513"},null,-1),RCe=[zCe];function NCe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},RCe,14,BCe)}var _S=We(LCe,[["render",NCe]]);const yu=Object.assign(_S,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+_S.name,_S)}});function VCe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}function dL(e){return e.parentElement}var FCe=se({name:"Header",props:{mode:{type:String},dayStartOfWeek:{type:Number},isWeek:{type:Boolean},panel:{type:Boolean},modes:{type:Array},headerType:{type:String},pageShowData:{type:Object,required:!0},move:{type:Function,required:!0},onYearChange:{type:Function,required:!0},onMonthChange:{type:Function,required:!0},changePageShowDate:{type:Function,required:!0},onModeChange:{type:Function,required:!0},headerValueFormat:{type:String,required:!0}},emits:["yearChange","monthChange"],setup(e,{slots:t}){const i=Se("calendar"),{t:r}=Yr(),a=bi(e.modes)?e.modes.map(c=>({label:r(`datePicker.view.${c}`),value:c})):[],n=e.headerType==="select",s=T(()=>e.pageShowData.year()),o=T(()=>e.pageShowData.month()+1),l=T(()=>{const c=[s.value];for(let d=1;d<=10;d++)c.unshift(s.value-d);for(let d=1;d<10;d++)c.push(s.value+d);return c}),u=[1,2,3,4,5,6,7,8,9,10,11,12];return()=>{let c;return _("div",{class:`${i}-header`},[_("div",{class:`${i}-header-left`},[n?_(Xt,null,[_(Mm,{size:"small",class:`${i}-header-value-year`,value:s,options:l.value,onChange:e.onYearChange,getPopupContainer:dL},null),e.mode==="month"&&_(Mm,{size:"small",class:`${i}-header-value-month`,value:o,options:u,onChange:e.onMonthChange,getPopupContainer:dL},null)]):_(Xt,null,[_("div",{class:`${i}-header-icon`,role:"button",tabIndex:0,onClick:()=>e.changePageShowDate("prev",e.mode)},[_(yu,null,null)]),_("div",{class:`${i}-header-value`},[t.default?t.default({year:s,month:o}):e.pageShowData.format(e.headerValueFormat)]),_("div",{role:"button",tabIndex:0,class:`${i}-header-icon`,onClick:()=>e.changePageShowDate("next",e.mode)},[_(zo,null,null)])]),_(un,{size:"small",onClick:()=>e.move(An())},VCe(c=r("datePicker.today"))?c:{default:()=>[c]})]),_("div",{class:`${i}-header-right`},[_(sp.Group,{size:"small",type:"button",options:a,onChange:e.onModeChange,modelValue:e.mode},null)])])}}});function jCe(e,t){return e==="month"||e==="year"&&!t?"YYYY-MM-DD":"YYYY-MM"}var MS=se({name:"Calendar",props:{modelValue:{type:Date,default:void 0},defaultValue:{type:Date},mode:{type:String},defaultMode:{type:String,default:"month"},modes:{type:Array,default:()=>["month","year"]},allowSelect:{type:Boolean,default:!0},panel:{type:Boolean,default:!1},panelWidth:{type:Number},panelTodayBtn:{type:Boolean,default:!1},dayStartOfWeek:{type:Number,default:0},isWeek:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0,panelChange:e=>!0},setup(e,{emit:t,slots:i}){const{dayStartOfWeek:r,isWeek:a}=yt(e),n=Se("calendar"),s=ie(e.defaultMode),{t:o}=Yr(),l=T(()=>e.mode?e.mode:s.value),u=jCe(l.value,e.panel),c=ie(Is(e.defaultValue||Date.now(),u)),d=T(()=>e.modelValue?Is(e.modelValue,u):c.value),h=ie(d.value||An()),p=T(()=>yF(h.value,{dayStartOfWeek:r.value,isWeek:a.value}));function f(M){h.value=M,t("panelChange",M.toDate())}function v(M){c.value=M,t("change",M.toDate()),t("update:modelValue",M.toDate()),f(M)}function m(M,P=!1){P||v(M)}let g="";l.value==="month"?g=o("calendar.formatMonth"):l.value==="year"&&(g=o("calendar.formatYear"));function y(M,P){M==="prev"&&(h.value=ka.subtract(h.value,1,P)),M==="next"&&(h.value=ka.add(h.value,1,P)),t("panelChange",h.value.toDate())}function b(M){const P=ka.set(h.value,"year",M);h.value=P,t("panelChange",P.toDate())}function x(M){const P=ka.set(h.value,"month",M-1);h.value=P,t("panelChange",P.toDate())}function S(M){s.value=M}const w=T(()=>[n,l.value==="month"?`${n}-mode-month`:`${n}-mode-year`,{[`${n}-panel`]:e.panel&&(l.value==="month"||l.value==="year")}]),E=e.panel?{width:e.panelWidth}:{};return()=>_("div",it({class:w.value,style:E},ZSe(e)),[_(FCe,{move:v,headerValueFormat:g,modes:e.modes,mode:l.value,pageShowData:h.value,dayStartOfWeek:e.dayStartOfWeek,isWeek:e.isWeek,onModeChange:S,onYearChange:b,onMonthChange:x,changePageShowDate:y},{default:i.header}),l.value==="month"&&_("div",{class:`${n}-body`},[_(bF,{key:h.value.month(),pageData:p.value,value:d.value,mode:l.value,selectHandler:m,isWeek:e.isWeek,dayStartOfWeek:e.dayStartOfWeek,pageShowDate:h.value},{default:i.default})]),l.value==="year"&&_("div",{class:`${n}-body`},[_(hCe,{key:h.value.year(),pageData:p.value,pageShowData:h.value,mode:l.value,isWeek:e.isWeek,value:d.value,dayStartOfWeek:e.dayStartOfWeek,selectHandler:m},null)]),e.panel&&e.panelTodayBtn&&_("div",{class:`${n}-footer-btn-wrapper`},[o("today")])])}});const MF=Object.assign(MS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+MS.name,MS)}}),pP=Symbol("ArcoCard");var ES=se({name:"Card",components:{Spin:Do},props:{bordered:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},size:{type:String},headerStyle:{type:Object,default:()=>({})},bodyStyle:{type:Object,default:()=>({})},title:{type:String},extra:{type:String}},setup(e,{slots:t}){const i=Se("card"),{size:r}=yt(e),{mergedSize:a}=hn(r),n=T(()=>a.value==="small"||a.value==="mini"?"small":"medium"),s=u=>{const c=ul(u);return _("div",{class:`${i}-actions`},[_("div",{class:`${i}-actions-right`},[c.map((d,h)=>_("span",{key:`action-${h}`,class:`${i}-actions-item`},[d]))])])},o=gt({hasMeta:!1,hasGrid:!1,slots:t,renderActions:s});dr(pP,o);const l=T(()=>[i,`${i}-size-${n.value}`,{[`${i}-loading`]:e.loading,[`${i}-bordered`]:e.bordered,[`${i}-hoverable`]:e.hoverable,[`${i}-contain-grid`]:o.hasGrid}]);return()=>{var u,c,d,h,p,f,v;const m=!!((u=t.title)!=null?u:e.title),g=!!((c=t.extra)!=null?c:e.extra);return _("div",{class:l.value},[(m||g)&&_("div",{class:[`${i}-header`,{[`${i}-header-no-title`]:!m}],style:e.headerStyle},[m&&_("div",{class:`${i}-header-title`},[(h=(d=t.title)==null?void 0:d.call(t))!=null?h:e.title]),g&&_("div",{class:`${i}-header-extra`},[(f=(p=t.extra)==null?void 0:p.call(t))!=null?f:e.extra])]),t.cover&&_("div",{class:`${i}-cover`},[t.cover()]),_("div",{class:`${i}-body`,style:e.bodyStyle},[e.loading?_(Do,null,null):(v=t.default)==null?void 0:v.call(t),t.actions&&!o.hasMeta&&s(t.actions())])])}}}),v0=se({name:"CardMeta",props:{title:{type:String},description:{type:String}},setup(e,{slots:t}){const i=Se("card-meta"),r=Ai(pP);return xi(()=>{r&&(r.hasMeta=!0)}),()=>{var a,n,s,o,l,u;const c=!!((a=t.title)!=null?a:e.title),d=!!((n=t.description)!=null?n:e.description);return _("div",{class:i},[(c||d)&&_("div",{class:`${i}-content`},[c&&_("div",{class:`${i}-title`},[(o=(s=t.title)==null?void 0:s.call(t))!=null?o:e.title]),d&&_("div",{class:`${i}-description`},[(u=(l=t.description)==null?void 0:l.call(t))!=null?u:e.description])]),(t.avatar||r?.slots.actions)&&_("div",{class:[`${i}-footer `,{[`${i}-footer-only-actions`]:!t.avatar}]},[t.avatar&&_("div",{class:`${i}-avatar`},[t.avatar()]),r&&r.slots.actions&&r.renderActions(r.slots.actions())])])}}});const $Ce=se({name:"CardGrid",props:{hoverable:{type:Boolean,default:!1}},setup(e){const t=Se("card-grid"),i=Ai(pP);return xi(()=>{i&&(i.hasGrid=!0)}),{cls:T(()=>[t,{[`${t}-hoverable`]:e.hoverable}])}}});function UCe(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls)},[ye(e.$slots,"default")],2)}var g0=We($Ce,[["render",UCe]]);const WCe=Object.assign(ES,{Meta:v0,Grid:g0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+ES.name,ES),e.component(i+v0.name,v0),e.component(i+g0.name,g0)}}),HCe=se({name:"Indicator",props:{count:{type:Number,default:2},activeIndex:{type:Number,default:0},type:{type:String,default:"line"},position:{type:String,default:"bottom"},trigger:{type:String,default:"click"}},emits:["select"],setup(e,{emit:t}){const i=Se("carousel-indicator"),r=o=>{var l;if(o.preventDefault(),e.type==="slider"){const u=o.offsetX,c=o.currentTarget.clientWidth;if(o.target===o.currentTarget){const d=Math.floor(u/c*e.count);d!==e.activeIndex&&t("select",d)}}else{const u=Number.parseInt((l=o.target.getAttribute("data-index"))!=null?l:"",10);!Number.isNaN(u)&&u!==e.activeIndex&&t("select",u)}},a=T(()=>e.trigger==="click"?{onClick:r}:{onMouseover:r}),n=T(()=>[`${i}`,`${i}-${e.type}`,`${i}-${e.position}`]),s=T(()=>{const o=100/e.count;return{width:`${o}%`,left:`${e.activeIndex*o}%`}});return{prefixCls:i,eventHandlers:a,cls:n,sliderStyle:s}}}),GCe=["data-index"];function qCe(e,t,i,r,a,n){return N(),ee("div",it({class:e.cls},e.eventHandlers),[e.type==="slider"?(N(),ee("span",{key:0,style:It(e.sliderStyle),class:Y([`${e.prefixCls}-item`,`${e.prefixCls}-item-active`])},null,6)):(N(!0),ee(Xt,{key:1},Br(Array(e.count),(s,o)=>(N(),ee("span",{key:o,"data-index":o,class:Y([`${e.prefixCls}-item`,{[`${e.prefixCls}-item-active`]:o===e.activeIndex}])},null,10,GCe))),128))],16)}var YCe=We(HCe,[["render",qCe]]);const XCe=se({name:"IconUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-up`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),KCe=["stroke-width","stroke-linecap","stroke-linejoin"],ZCe=ve("path",{d:"M39.6 30.557 24.043 15 8.487 30.557"},null,-1),QCe=[ZCe];function JCe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},QCe,14,KCe)}var AS=We(XCe,[["render",JCe]]);const fP=Object.assign(AS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+AS.name,AS)}}),e_e=se({name:"Arrow",components:{IconUp:fP,IconDown:kp,IconLeft:yu,IconRight:zo},props:{direction:{type:String,default:"horizontal"},showArrow:{type:String,default:"always"}},emits:["previousClick","nextClick"],setup(e,{emit:t}){const i=Se("carousel"),r=s=>{t("previousClick",s)},a=s=>{t("nextClick",s)},n=T(()=>[`${i}-arrow`,{[`${i}-arrow-hover`]:e.showArrow==="hover"}]);return{prefixCls:i,cls:n,onPreviousClick:r,onNextClick:a}}});function t_e(e,t,i,r,a,n){const s=be("IconLeft"),o=be("IconUp"),l=be("IconRight"),u=be("IconDown");return N(),ee("div",{class:Y(e.cls)},[ve("div",{class:Y(`${e.prefixCls}-arrow-${e.direction==="vertical"?"top":"left"}`),onClick:t[0]||(t[0]=(...c)=>e.onPreviousClick&&e.onPreviousClick(...c))},[e.direction==="horizontal"?(N(),De(s,{key:0})):(N(),De(o,{key:1}))],2),ve("div",{class:Y(`${e.prefixCls}-arrow-${e.direction==="vertical"?"bottom":"right"}`),onClick:t[1]||(t[1]=(...c)=>e.onNextClick&&e.onNextClick(...c))},[e.direction==="horizontal"?(N(),De(l,{key:0})):(N(),De(u,{key:1}))],2)],2)}var i_e=We(e_e,[["render",t_e]]);const EF=Symbol("ArcoCarousel"),Zm=e=>{const t={},i=ie([]),r=()=>{if(t.value){const a=yz(t.value,e);(a.length!==i.value.length||a.toString()!==i.value.toString())&&(i.value=a)}};return xi(()=>r()),Ss(()=>r()),{children:t,components:i}};var r_e=Object.defineProperty,hL=Object.getOwnPropertySymbols,a_e=Object.prototype.hasOwnProperty,n_e=Object.prototype.propertyIsEnumerable,pL=(e,t,i)=>t in e?r_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,fL=(e,t)=>{for(var i in t||(t={}))a_e.call(t,i)&&pL(e,i,t[i]);if(hL)for(var i of hL(t))n_e.call(t,i)&&pL(e,i,t[i]);return e};const mL={interval:3e3,hoverToPause:!0};function PS(e,t){const i=+e;return typeof i=="number"&&!Number.isNaN(i)?(i+t)%t:e}var TS=se({name:"Carousel",props:{current:{type:Number},defaultCurrent:{type:Number,default:1},autoPlay:{type:[Boolean,Object],default:!1},moveSpeed:{type:Number,default:500},animationName:{type:String,default:"slide"},trigger:{type:String,default:"click"},direction:{type:String,default:"horizontal"},showArrow:{type:String,default:"always"},arrowClass:{type:String,default:""},indicatorType:{type:String,default:"dot"},indicatorPosition:{type:String,default:"bottom"},indicatorClass:{type:String,default:""},transitionTimingFunction:{type:String,default:"cubic-bezier(0.34, 0.69, 0.1, 1)"}},emits:{"update:current":e=>!0,change:(e,t,i)=>!0},setup(e,{emit:t,slots:i}){const{current:r,animationName:a,moveSpeed:n,transitionTimingFunction:s}=yt(e),o=Se("carousel"),l=ie(!1),u=ie(),c=ie(),d=T(()=>ki(e.autoPlay)?fL(fL({},mL),e.autoPlay):e.autoPlay?mL:{});let h=0,p=0;const{children:f,components:v}=Zm("CarouselItem"),m=ie(e.defaultCurrent-1),g=T(()=>{const D=v.value.length,F=Mt(r.value)?PS(r.value-1,D):m.value,U=PS(F-1,D),z=PS(F+1,D);return{mergedIndex:F,mergedPrevIndex:U,mergedNextIndex:z}}),y=gt({items:v,slideTo:x,mergedIndexes:g,previousIndex:u,animationName:a,slideDirection:c,transitionTimingFunction:s,moveSpeed:n});dr(EF,y);const b=()=>{h&&window.clearInterval(h)};on(()=>{var D;const{interval:F}=d.value||{},{mergedNextIndex:U}=g.value,z=((D=v.value)==null?void 0:D.length)>1&&!l.value&&!!F;b(),z&&(h=window.setInterval(()=>{x({targetIndex:U})},F))}),Tn(()=>{b()});function x({targetIndex:D,isNegative:F=!1,isManual:U=!1}){!p&&D!==g.value.mergedIndex&&(u.value=m.value,m.value=D,c.value=F?"negative":"positive",p=window.setTimeout(()=>{p=0},n.value),t("update:current",m.value+1),t("change",m.value+1,u.value+1,U))}const S=()=>x({targetIndex:g.value.mergedPrevIndex,isNegative:!0,isManual:!0}),w=()=>x({targetIndex:g.value.mergedNextIndex,isManual:!0}),E=D=>x({targetIndex:D,isNegative:D<g.value.mergedIndex,isManual:!0}),M=T(()=>d.value.hoverToPause?{onMouseenter:()=>{l.value=!0},onMouseleave:()=>{l.value=!1}}:{}),P=T(()=>e.indicatorType!=="never"&&v.value.length>1),A=T(()=>e.showArrow!=="never"&&v.value.length>1),k=T(()=>[o,`${o}-indicator-position-${e.indicatorPosition}`]),I=T(()=>[`${o}-${e.animationName}`,`${o}-${e.direction}`,{[`${o}-negative`]:c.value==="negative"}]),O=T(()=>[`${o}-indicator-wrapper`,`${o}-indicator-wrapper-${e.indicatorPosition}`]);return()=>{var D;return f.value=(D=i.default)==null?void 0:D.call(i),_("div",it({class:k.value},M.value),[_("div",{class:I.value},[f.value]),P.value&&_("div",{class:O.value},[_(YCe,{class:e.indicatorClass,type:e.indicatorType,count:v.value.length,activeIndex:g.value.mergedIndex,position:e.indicatorPosition,trigger:e.trigger,onSelect:E},null)]),A.value&&_(i_e,{class:e.arrowClass,direction:e.direction,showArrow:e.showArrow,onPreviousClick:S,onNextClick:w},null)])}}});const s_e=se({name:"CarouselItem",setup(){const e=Se("carousel-item"),t=xs(),i=Ai(EF,{}),r=T(()=>{var o,l,u;return(u=(l=i.items)==null?void 0:l.indexOf((o=t?.uid)!=null?o:-1))!=null?u:-1}),a=T(()=>{var o;return((o=i.mergedIndexes)==null?void 0:o.mergedIndex)===r.value}),n=T(()=>{const{previousIndex:o,animationName:l,slideDirection:u,mergedIndexes:c}=i;return{[`${e}-prev`]:r.value===c?.mergedPrevIndex,[`${e}-next`]:r.value===c?.mergedNextIndex,[`${e}-current`]:a.value,[`${e}-slide-in`]:l==="slide"&&u&&a.value,[`${e}-slide-out`]:l==="slide"&&u&&r.value===o}}),s=T(()=>{const{transitionTimingFunction:o,moveSpeed:l}=i;return{transitionTimingFunction:o,transitionDuration:`${l}ms`,animationTimingFunction:o,animationDuration:`${l}ms`}});return{cls:n,animationStyle:s,isCurrent:a}}}),o_e=["aria-hidden"];function l_e(e,t,i,r,a,n){return N(),ee("div",{"aria-hidden":!e.isCurrent,class:Y(e.cls),style:It(e.animationStyle)},[ye(e.$slots,"default")],14,o_e)}var y0=We(s_e,[["render",l_e]]);const u_e=Object.assign(TS,{Item:y0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+TS.name,TS),e.component(i+y0.name,y0)}}),AF=(e,{optionMap:t,leafOptionMap:i,leafOptionSet:r,leafOptionValueMap:a,totalLevel:n,checkStrictly:s,enabledLazyLoad:o,lazyLoadOptions:l,valueKey:u,fieldNames:c})=>{let d=0;const h=(f,v,m)=>{var g;const y=(g=v?.path)!=null?g:[];return d=Math.max(d,m??1),f.map((b,x)=>{var S;const w=b[c.value],E={raw:b,value:w,label:(S=b[c.label])!=null?S:String(w),disabled:!!b[c.disabled],selectionDisabled:!1,render:b[c.render],tagProps:b[c.tagProps],isLeaf:b[c.isLeaf],level:y.length,index:x,key:"",valueKey:String(ki(w)?w[u.value]:w),parent:v,path:[],pathValue:[]},M=y.concat(E),P=[],A=M.map(k=>(P.push(k.value),k.valueKey)).join("-");return E.path=M,E.pathValue=P,E.key=A,b[c.children]?(E.isLeaf=!1,E.children=h(b[c.children],E,(m??1)+1)):o&&!E.isLeaf?(E.isLeaf=!1,l[A]&&(E.children=h(l[A],E,(m??1)+1))):E.isLeaf=!0,E.children&&!E.disabled&&(E.totalLeafOptions=E.children.reduce((k,I)=>Mt(I.totalLeafOptions)?k+I.totalLeafOptions:I.disabled||I.selectionDisabled?k:k+(I.isLeaf?1:0),0),E.totalLeafOptions===0&&!s.value&&(E.selectionDisabled=!0)),t.set(E.key,E),(E.isLeaf||s.value)&&(r.add(E),i.set(E.key,E),a.has(E.valueKey)||a.set(E.valueKey,E.key)),E})},p=h(e);return n.value=d,p},mP=(e,t)=>{var i,r;let a=!1,n=!1;if(e.isLeaf)t?.has(e.key)&&(a=!0);else{const s=new RegExp(`^${e.key}(-|$)`),o=Array.from((i=t?.keys())!=null?i:[]).reduce((l,u)=>s.test(u)?l+1:l,0);o>0&&o>=((r=e.totalLeafOptions)!=null?r:1)?a=!0:o>0&&(n=!0)}return{checked:a,indeterminate:n}},vP=e=>{const t=[];if(e.isLeaf)t.push(e.key);else if(e.children)for(const i of e.children)t.push(...vP(i));return t},gP=e=>{const t=[];if(e.disabled||e.selectionDisabled)return t;if(e.isLeaf)t.push(e);else if(e.children)for(const i of e.children)t.push(...gP(i));return t},PF=(e,{valueKey:t,leafOptionValueMap:i})=>{var r;if(bi(e))return e.map(n=>ki(n)?n[t]:n).join("-");const a=ki(e)?e[t]:e;return(r=i.get(String(a)))!=null?r:String(a)},TF=(e,{multiple:t,pathMode:i})=>bi(e)?i&&!t&&e.length>0&&!bi(e[0])?[e]:e:ei(e)||Wn(e)||e===""?[]:[e],kF=e=>e.path.map(t=>t.label).join(" / "),yP=Symbol("ArcoCascader");var IM=se({name:"CascaderOption",props:{option:{type:Object,required:!0},active:Boolean,multiple:Boolean,checkStrictly:Boolean,searchOption:Boolean,pathLabel:Boolean},setup(e){const t=Se("cascader-option"),i=Ai(yP,{}),r=ie(!1),a={},n=c=>{var d;if(Zt(i.loadMore)&&!e.option.isLeaf){const{isLeaf:h,children:p,key:f}=e.option;!h&&!p&&(r.value=!0,new Promise(v=>{var m;(m=i.loadMore)==null||m.call(i,e.option.raw,v)}).then(v=>{var m;r.value=!1,v&&((m=i.addLazyLoadOptions)==null||m.call(i,v,f))}))}(d=i.setSelectedPath)==null||d.call(i,e.option.key)};e.option.disabled||(a.onMouseenter=[()=>{var c;return(c=i.setActiveKey)==null?void 0:c.call(i,e.option.key)}],a.onMouseleave=()=>{var c;return(c=i.setActiveKey)==null?void 0:c.call(i)},a.onClick=[],i.expandTrigger==="hover"?a.onMouseenter.push(c=>n()):a.onClick.push(c=>n()),e.option.isLeaf&&!e.multiple&&a.onClick.push(c=>{var d;n(),(d=i.onClickOption)==null||d.call(i,e.option)}));const s=T(()=>[t,{[`${t}-active`]:e.active,[`${t}-disabled`]:e.option.disabled}]),o=T(()=>{var c;return e.checkStrictly?{checked:(c=i.valueMap)==null?void 0:c.has(e.option.key),indeterminate:!1}:mP(e.option,i.valueMap)}),l=()=>{var c,d,h;return e.pathLabel?(d=(c=i?.formatLabel)==null?void 0:c.call(i,e.option.path.map(p=>p.raw)))!=null?d:kF(e.option):(h=i.slots)!=null&&h.option?i.slots.option({data:e.option}):Zt(e.option.render)?e.option.render():e.option.label},u=()=>r.value?_($n,null,null):!e.searchOption&&!e.option.isLeaf?_(zo,null,null):null;return()=>{var c;return _("li",it({tabindex:"0",role:"menuitem","aria-disabled":e.option.disabled,"aria-haspopup":!e.option.isLeaf,"aria-expanded":!e.option.isLeaf&&e.active,title:e.option.label,class:s.value},a),[e.multiple&&_(Eo,{modelValue:o.value.checked,indeterminate:o.value.indeterminate,disabled:e.option.disabled||e.option.selectionDisabled,uninjectGroupContext:!0,onChange:(d,h)=>{var p;h.stopPropagation(),n(),(p=i.onClickOption)==null||p.call(i,e.option,!o.value.checked)},onClick:d=>d.stopPropagation()},null),e.checkStrictly&&!e.multiple&&_(sp,{modelValue:(c=i.valueMap)==null?void 0:c.has(e.option.key),disabled:e.option.disabled,uninjectGroupContext:!0,onChange:(d,h)=>{var p;h.stopPropagation(),n(),(p=i.onClickOption)==null||p.call(i,e.option,!0)},onClick:d=>d.stopPropagation()},null),_("div",{class:`${t}-label`},[l(),u()])])}}}),c_e=se({name:"CascaderColumn",props:{column:{type:Array,required:!0},level:{type:Number,default:0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,virtualListProps:{type:Object}},setup(e,{slots:t}){const i=Se("cascader"),r=Ai(Pn,void 0),a=ie(),n=ie(!!e.virtualListProps),s=()=>{var o,l,u,c,d;return(d=(c=(o=t.empty)==null?void 0:o.call(t))!=null?c:(u=r==null?void 0:(l=r.slots).empty)==null?void 0:u.call(l,{component:"cascader"}))!=null?d:_(gu,null,null)};return()=>{var o;return _("div",{class:`${i}-panel-column`,style:{zIndex:e.totalLevel-e.level}},[e.column.length===0?_(Io,{class:`${i}-column-content`},{default:()=>[_("div",{class:`${i}-list-empty`},[s()])]}):n.value?_(Tp,it({key:(o=e.column)==null?void 0:o.length},e.virtualListProps,{ref:a,data:e.column}),{item:({item:l})=>_(IM,{key:l.key,option:l,active:e.selectedPath.includes(l.key)||l.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null)}):_(Io,{class:`${i}-column-content`},{default:()=>[_("ul",{role:"menu",class:[`${i}-list`,{[`${i}-list-multiple`]:!!e?.multiple,[`${i}-list-strictly`]:!!e?.checkStrictly}]},[e.column.map(l=>_(IM,{key:l.key,option:l,active:e.selectedPath.includes(l.key)||l.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly},null))])]})])}}});function d_e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var OF=se({name:"BaseCascaderPanel",props:{displayColumns:{type:Array,required:!0},selectedPath:{type:Array,required:!0},activeKey:String,totalLevel:{type:Number,required:!0},multiple:Boolean,checkStrictly:Boolean,loading:Boolean,dropdown:Boolean,virtualListProps:{type:Object}},setup(e,{slots:t}){const i=Se("cascader"),r=Ai(Pn,void 0),a=()=>{var s,o,l,u,c;return(c=(u=(s=t.empty)==null?void 0:s.call(t))!=null?u:(l=r==null?void 0:(o=r.slots).empty)==null?void 0:l.call(o,{component:"cascader"}))!=null?c:_(gu,null,null)},n=()=>e.loading?_("div",{key:"panel-column-loading",class:[`${i}-panel-column`,`${i}-panel-column-loading`]},[_(Do,null,null)]):e.displayColumns.length===0?_("div",{key:"panel-column-empty",class:`${i}-panel-column`},[_("div",{class:`${i}-list-empty`},[a()])]):e.displayColumns.map((s,o)=>_(c_e,{key:`column-${o}`,column:s,level:o,selectedPath:e.selectedPath,activeKey:e.activeKey,totalLevel:e.totalLevel,multiple:e.multiple,checkStrictly:e.checkStrictly,virtualListProps:e.virtualListProps},null));return()=>{let s;return _(Am,{tag:"div",name:"cascader-slide",class:[`${i}-panel`,{[`${i}-dropdown-panel`]:e.dropdown}]},d_e(s=n())?s:{default:()=>[s]})}}});function h_e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var p_e=se({name:"CascaderSearchPanel",props:{options:{type:Array,required:!0},loading:Boolean,activeKey:String,multiple:Boolean,checkStrictly:Boolean,pathLabel:Boolean},setup(e,{slots:t}){const i=Se("cascader"),r=Ai(Pn,void 0),a=()=>{var n,s,o,l,u;return e.loading?_(Do,null,null):e.options.length===0?_("div",{class:`${i}-list-empty`},[(u=(l=(n=t.empty)==null?void 0:n.call(t))!=null?l:(o=r==null?void 0:(s=r.slots).empty)==null?void 0:o.call(s,{component:"cascader"}))!=null?u:_(gu,null,null)]):_("ul",{role:"menu",class:[`${i}-list`,`${i}-search-list`,{[`${i}-list-multiple`]:e.multiple}]},[e.options.map(c=>_(IM,{key:c.key,class:`${i}-search-option`,option:c,active:c.key===e.activeKey,multiple:e.multiple,checkStrictly:e.checkStrictly,pathLabel:e.pathLabel,searchOption:!0},null))])};return()=>{let n;return _(Io,{class:[`${i}-panel`,`${i}-search-panel`]},h_e(n=a())?n:{default:()=>[n]})}}});const DF=(e,{optionMap:t,filteredLeafOptions:i,showSearchPanel:r,expandChild:a})=>{const n=ie(),s=T(()=>{if(n.value)return t.get(n.value)}),o=ie([]),l=T(()=>{const f=[e.value];for(const v of o.value){const m=t.get(v);m?.children&&f.push(m.children)}return f}),u=f=>{var v;const m=h(f);o.value=(v=m?.path.map(g=>g.key))!=null?v:[]},c=f=>{n.value=f},d=T(()=>{var f;return r?.value?i.value.filter(v=>!v.disabled):s.value&&s.value.parent?(f=s.value.parent.children)==null?void 0:f.filter(v=>!v.disabled):e.value.filter(v=>!v.disabled)}),h=f=>{let v=f?t.get(f):void 0;if(a.value)for(;v&&v.children&&v.children.length>0;)v=v.children[0];return v};return{activeKey:n,activeOption:s,selectedPath:o,displayColumns:l,setActiveKey:c,setSelectedPath:u,getNextActiveNode:f=>{var v,m,g,y,b,x,S;const w=(m=(v=d.value)==null?void 0:v.length)!=null?m:0;if(n.value){const E=(y=(g=d.value)==null?void 0:g.findIndex(M=>M.key===n.value))!=null?y:0;return f==="next"?(b=d.value)==null?void 0:b[(w+E+1)%w]:(x=d.value)==null?void 0:x[(w+E-1)%w]}return(S=d.value)==null?void 0:S[0]}}};var f_e=Object.defineProperty,vL=Object.getOwnPropertySymbols,m_e=Object.prototype.hasOwnProperty,v_e=Object.prototype.propertyIsEnumerable,gL=(e,t,i)=>t in e?f_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,yL=(e,t)=>{for(var i in t||(t={}))m_e.call(t,i)&&gL(e,i,t[i]);if(vL)for(var i of vL(t))v_e.call(t,i)&&gL(e,i,t[i]);return e};const g_e=se({name:"Cascader",components:{Trigger:$a,SelectView:lb,BaseCascaderPanel:OF,CascaderSearchPanel:p_e},inheritAttrs:!1,props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]},defaultValue:{type:[String,Number,Object,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},size:{type:String},allowSearch:{type:Boolean,default:e=>!!e.multiple},allowClear:{type:Boolean,default:!1},inputValue:{type:String,default:void 0},defaultInputValue:{type:String,default:""},popupVisible:{type:Boolean,default:void 0},expandTrigger:{type:String,default:"click"},defaultPopupVisible:{type:Boolean,default:!1},placeholder:String,filterOption:{type:Function},popupContainer:{type:[String,Object]},maxTagCount:{type:Number,default:0},formatLabel:{type:Function},triggerProps:{type:Object},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},loading:{type:Boolean,default:!1},searchOptionOnlyLabel:{type:Boolean,default:!1},searchDelay:{type:Number,default:500},fieldNames:{type:Object},valueKey:{type:String,default:"value"},fallback:{type:[Boolean,Function],default:!0},expandChild:{type:Boolean,default:!1},virtualListProps:{type:Object},tagNowrap:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,"update:popupVisible":e=>!0,change:e=>!0,inputValueChange:e=>!0,clear:()=>!0,search:e=>!0,popupVisibleChange:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,slots:i}){const{options:r,checkStrictly:a,loadMore:n,formatLabel:s,modelValue:o,disabled:l,valueKey:u,expandTrigger:c,expandChild:d,pathMode:h,multiple:p}=yt(e),f=ie(e.defaultValue),v=ie(e.defaultInputValue),m=ie(e.defaultPopupVisible),{mergedDisabled:g,eventHandlers:y}=Wr({disabled:l});Vt(o,Oe=>{(ei(Oe)||Wn(Oe))&&(f.value=e.multiple?[]:void 0)});const b=ie([]),x=ie(1),S=gt(new Map),w=gt(new Map),E=gt(new Map),M=gt(new Set),P=gt({}),A=(Oe,Ye)=>{P[Ye]=Oe},k={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},I=T(()=>yL(yL({},k),e.fieldNames));Vt([r,P,I],([Oe,Ye,xt])=>{S.clear(),w.clear(),E.clear(),M.clear(),b.value=AF(Oe??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:P,optionMap:S,leafOptionSet:M,leafOptionMap:w,leafOptionValueMap:E,totalLevel:x,checkStrictly:a,valueKey:u,fieldNames:xt})},{immediate:!0,deep:!0});const O=T(()=>{var Oe;const Ye=TF((Oe=e.modelValue)!=null?Oe:f.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(Ye.map(xt=>[PF(xt,{valueKey:e.valueKey,leafOptionValueMap:E}),xt]))}),D=T(()=>{var Oe;return(Oe=e.inputValue)!=null?Oe:v.value}),F=T(()=>{var Oe;return(Oe=e.popupVisible)!=null?Oe:m.value}),U=Oe=>{var Ye;return Oe?.toLocaleLowerCase().includes((Ye=D.value)==null?void 0:Ye.toLocaleLowerCase())},z=T(()=>(e.checkStrictly?Array.from(S.values()):Array.from(M)).filter(Ye=>{var xt;return Zt(e.filterOption)?e.filterOption(D.value,Ye.raw):e.checkStrictly?U(Ye.label):(xt=Ye.path)==null?void 0:xt.find(ne=>U(ne.label))})),B=Oe=>{var Ye,xt,ne;const K=e.multiple?Oe:(Ye=Oe[0])!=null?Ye:"";Oe.length===0&&(xe(),le()),f.value=K,t("update:modelValue",K),t("change",K),(ne=(xt=y.value)==null?void 0:xt.onChange)==null||ne.call(xt)};Vt([p,h],()=>{const Oe=[];O.value.forEach((Ye,xt)=>{const ne=w.get(xt);ne&&Oe.push(h.value?ne.pathValue:ne.value)}),B(Oe)});const W=Oe=>{F.value!==Oe&&(m.value=Oe,t("popupVisibleChange",Oe))},R=Oe=>{if(e.multiple){const Ye=w.get(Oe);if(Ye)q(Ye,!1);else{const xt=[];O.value.forEach((ne,K)=>{K!==Oe&&xt.push(ne)}),B(xt)}}},$=Oe=>{B([e.pathMode?Oe.pathValue:Oe.value]),W(!1)},q=(Oe,Ye)=>{if(Ye){const xt=e.checkStrictly?[Oe]:gP(Oe);B([...O.value.values(),...xt.filter(ne=>!O.value.has(ne.key)).map(ne=>e.pathMode?ne.pathValue:ne.value)])}else{const xt=e.checkStrictly?[Oe.key]:vP(Oe),ne=[];O.value.forEach((K,ze)=>{xt.includes(ze)||ne.push(K)}),B(ne)}X("","optionChecked")},Z=(Oe,Ye)=>{e.multiple?q(Oe,Ye??!0):$(Oe)},G=_m(Oe=>{t("search",Oe)},e.searchDelay),X=(Oe,Ye)=>{Oe!==D.value&&(Ye==="manual"&&!F.value&&(m.value=!0,t("popupVisibleChange",!0)),v.value=Oe,t("inputValueChange",Oe),e.allowSearch&&G(Oe))};Vt(F,Oe=>{if(Oe){if(O.value.size>0){const Ye=Array.from(O.value.keys()),xt=Ye[Ye.length-1],ne=w.get(xt);ne&&ne.key!==ge.value&&(xe(ne.key),le(ne.key))}}else O.value.size===0&&(xe(),le()),X("","optionListHide")});const J=Oe=>{if(Oe.stopPropagation(),e.multiple){const Ye=[];O.value.forEach((xt,ne)=>{const K=w.get(ne);K?.disabled&&Ye.push(e.pathMode?K.pathValue:K.value)}),B(Ye)}else B([]);X("","manual"),t("clear")},pe=T(()=>e.allowSearch&&D.value.length>0),fe=Oe=>{t("focus",Oe)},de=Oe=>{t("blur",Oe)},{activeKey:ge,activeOption:me,selectedPath:ke,displayColumns:ce,setActiveKey:le,setSelectedPath:xe,getNextActiveNode:Ne}=DF(b,{optionMap:S,filteredLeafOptions:z,showSearchPanel:pe,expandChild:d});dr(yP,gt({onClickOption:Z,setActiveKey:le,setSelectedPath:xe,loadMore:n,expandTrigger:c,addLazyLoadOptions:A,formatLabel:s,slots:i,valueMap:O}));const pt=c1(new Map([[Kr.ENTER,Oe=>{if(F.value){if(me.value){let Ye;e.checkStrictly||me.value.isLeaf?Ye=!O.value.has(me.value.key):Ye=!mP(me.value,O.value).checked,xe(me.value.key),Z(me.value,Ye)}}else W(!0)}],[Kr.ESC,Oe=>{W(!1)}],[Kr.ARROW_DOWN,Oe=>{Oe.preventDefault();const Ye=Ne("next");le(Ye?.key)}],[Kr.ARROW_UP,Oe=>{Oe.preventDefault();const Ye=Ne("preview");le(Ye?.key)}],[Kr.ARROW_RIGHT,Oe=>{var Ye,xt;pe.value||(Oe.preventDefault(),(Ye=me.value)!=null&&Ye.children&&(xe(me.value.key),le((xt=me.value.children[0])==null?void 0:xt.key)))}],[Kr.ARROW_LEFT,Oe=>{var Ye;pe.value||(Oe.preventDefault(),(Ye=me.value)!=null&&Ye.parent&&(xe(me.value.parent.key),le(me.value.parent.key)))}]])),at=T(()=>{const Oe=[];return O.value.forEach((Ye,xt)=>{var ne,K;const ze=w.get(xt);if(ze)Oe.push({value:xt,label:(K=(ne=e.formatLabel)==null?void 0:ne.call(e,ze.path.map(ft=>ft.raw)))!=null?K:kF(ze),closable:!ze.disabled,tagProps:ze.tagProps});else if(e.fallback){const ft=Zt(e.fallback)?e.fallback(Ye):bi(Ye)?Ye.join(" / "):String(Ye);Oe.push({value:xt,label:ft,closable:!0})}}),Oe});return{optionInfos:b,filteredLeafOptions:z,selectedPath:ke,activeKey:ge,displayColumns:ce,computedInputValue:D,computedPopupVisible:F,handleClear:J,selectViewValue:at,handleInputValueChange:X,showSearchPanel:pe,handlePopupVisibleChange:W,handleFocus:fe,handleBlur:de,handleRemove:R,mergedDisabled:g,handleKeyDown:pt,totalLevel:x}}});function y_e(e,t,i,r,a,n){const s=be("select-view"),o=be("cascader-search-panel"),l=be("base-cascader-panel"),u=be("trigger");return N(),De(u,it(e.triggerProps,{trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","popup-visible":e.computedPopupVisible,position:"bl",disabled:e.mergedDisabled,"popup-offset":4,"auto-fit-popup-width":e.showSearchPanel,"popup-container":e.popupContainer,"prevent-focus":!0,"click-to-close":!e.allowSearch,onPopupVisibleChange:e.handlePopupVisibleChange}),{content:He(()=>[e.showSearchPanel?(N(),De(o,{key:0,options:e.filteredLeafOptions,"active-key":e.activeKey,multiple:e.multiple,"check-strictly":e.checkStrictly,loading:e.loading,"path-label":!e.searchOptionOnlyLabel},$r({_:2},[e.$slots.empty?{name:"empty",fn:He(()=>[ye(e.$slots,"empty")])}:void 0]),1032,["options","active-key","multiple","check-strictly","loading","path-label"])):(N(),De(l,{key:1,"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,loading:e.loading,"virtual-list-props":e.virtualListProps,dropdown:""},$r({_:2},[e.$slots.empty?{name:"empty",fn:He(()=>[ye(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","loading","virtual-list-props"]))]),default:He(()=>[_(s,it({"model-value":e.selectViewValue,"input-value":e.computedInputValue,disabled:e.mergedDisabled,error:e.error,multiple:e.multiple,"allow-clear":e.allowClear,"allow-search":e.allowSearch,size:e.size,opened:e.computedPopupVisible,placeholder:e.placeholder,loading:e.loading,"max-tag-count":e.maxTagCount,"tag-nowrap":e.tagNowrap},e.$attrs,{onInputValueChange:e.handleInputValueChange,onClear:e.handleClear,onFocus:e.handleFocus,onBlur:e.handleBlur,onRemove:e.handleRemove,onKeydown:e.handleKeyDown}),$r({_:2},[e.$slots.label?{name:"label",fn:He(c=>[ye(e.$slots,"label",br(Ea(c)))])}:void 0,e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0,e.$slots["arrow-icon"]?{name:"arrow-icon",fn:He(()=>[ye(e.$slots,"arrow-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:He(()=>[ye(e.$slots,"loading-icon")])}:void 0,e.$slots["search-icon"]?{name:"search-icon",fn:He(()=>[ye(e.$slots,"search-icon")])}:void 0]),1040,["model-value","input-value","disabled","error","multiple","allow-clear","allow-search","size","opened","placeholder","loading","max-tag-count","tag-nowrap","onInputValueChange","onClear","onFocus","onBlur","onRemove","onKeydown"])]),_:3},16,["popup-visible","disabled","auto-fit-popup-width","popup-container","click-to-close","onPopupVisibleChange"])}var kS=We(g_e,[["render",y_e]]),b_e=Object.defineProperty,bL=Object.getOwnPropertySymbols,w_e=Object.prototype.hasOwnProperty,x_e=Object.prototype.propertyIsEnumerable,wL=(e,t,i)=>t in e?b_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xL=(e,t)=>{for(var i in t||(t={}))w_e.call(t,i)&&wL(e,i,t[i]);if(bL)for(var i of bL(t))x_e.call(t,i)&&wL(e,i,t[i]);return e};const S_e=se({name:"CascaderPanel",components:{BaseCascaderPanel:OF},props:{pathMode:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array]},defaultValue:{type:[String,Number,Array],default:e=>e.multiple?[]:e.pathMode?void 0:""},options:{type:Array,default:()=>[]},expandTrigger:{type:String,default:"click"},checkStrictly:{type:Boolean,default:!1},loadMore:{type:Function},fieldNames:{type:Object},valueKey:{type:String,default:"value"},expandChild:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:t,slots:i}){const{options:r,checkStrictly:a,loadMore:n,modelValue:s,valueKey:o,expandChild:l,expandTrigger:u}=yt(e),c=ie(e.defaultValue);Vt(s,W=>{(ei(W)||Wn(W))&&(c.value=e.multiple?[]:void 0)});const d=ie([]),h=ie(1),p=gt(new Map),f=gt(new Map),v=gt(new Map),m=gt(new Set),g=gt({}),y=(W,R)=>{g[R]=W},b={value:"value",label:"label",disabled:"disabled",children:"children",tagProps:"tagProps",render:"render",isLeaf:"isLeaf"},x=T(()=>xL(xL({},b),e.fieldNames));Vt([r,g,x],([W,R,$])=>{p.clear(),f.clear(),v.clear(),m.clear(),d.value=AF(W??[],{enabledLazyLoad:!!e.loadMore,lazyLoadOptions:R,optionMap:p,leafOptionSet:m,leafOptionMap:f,leafOptionValueMap:v,totalLevel:h,checkStrictly:a,fieldNames:$,valueKey:o})},{immediate:!0});const S=T(()=>{var W;const R=TF((W=e.modelValue)!=null?W:c.value,{multiple:e.multiple,pathMode:e.pathMode});return new Map(R.map($=>[PF($,{valueKey:e.valueKey,leafOptionValueMap:v}),$]))}),w=T(()=>e.checkStrictly?Array.from(p.values()):Array.from(m)),E=W=>{var R;const $=e.multiple?W:(R=W[0])!=null?R:"";W.length===0&&(U(),F()),c.value=$,t("update:modelValue",$),t("change",$)},M=W=>{E([e.pathMode?W.pathValue:W.value])},P=(W,R)=>{if(R){const $=e.checkStrictly?[W]:gP(W);E([...S.value.values(),...$.filter(q=>!S.value.has(q.key)).map(q=>e.pathMode?q.pathValue:q.value)])}else{const $=e.checkStrictly?[W.key]:vP(W),q=[];S.value.forEach((Z,G)=>{$.includes(G)||q.push(Z)}),E(q)}},A=(W,R)=>{e.multiple?P(W,R??!0):M(W)},{activeKey:k,activeOption:I,selectedPath:O,displayColumns:D,setActiveKey:F,setSelectedPath:U,getNextActiveNode:z}=DF(d,{optionMap:p,filteredLeafOptions:w,expandChild:l});dr(yP,gt({onClickOption:A,setActiveKey:F,setSelectedPath:U,loadMore:n,addLazyLoadOptions:y,slots:i,valueMap:S,expandTrigger:u}));const B=c1(new Map([[Kr.ENTER,W=>{if(I.value){let R;e.checkStrictly||I.value.isLeaf?R=!S.value.has(I.value.key):R=!mP(I.value,S.value).checked,U(I.value.key),A(I.value,R)}}],[Kr.ARROW_DOWN,W=>{W.preventDefault();const R=z("next");F(R?.key)}],[Kr.ARROW_UP,W=>{W.preventDefault();const R=z("preview");F(R?.key)}],[Kr.ARROW_RIGHT,W=>{var R,$;W.preventDefault(),(R=I.value)!=null&&R.children&&(U(I.value.key),F(($=I.value.children[0])==null?void 0:$.key))}],[Kr.ARROW_LEFT,W=>{var R;W.preventDefault(),(R=I.value)!=null&&R.parent&&(U(I.value.parent.key),F(I.value.parent.key))}]]));return{optionInfos:d,filteredLeafOptions:w,selectedPath:O,activeKey:k,displayColumns:D,handleKeyDown:B,totalLevel:h}}});function C_e(e,t,i,r,a,n){const s=be("base-cascader-panel");return N(),De(s,{"display-columns":e.displayColumns,"selected-path":e.selectedPath,"active-key":e.activeKey,multiple:e.multiple,"total-level":e.totalLevel,"check-strictly":e.checkStrictly,onKeydown:e.handleKeyDown},$r({_:2},[e.$slots.empty?{name:"empty",fn:He(()=>[ye(e.$slots,"empty")])}:void 0]),1032,["display-columns","selected-path","active-key","multiple","total-level","check-strictly","onKeydown"])}var b0=We(S_e,[["render",C_e]]);const __e=Object.assign(kS,{CascaderPanel:b0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+kS.name,kS),e.component(i+b0.name,b0)}}),IF=Symbol("collapseCtx"),M_e=se({name:"Collapse",props:{activeKey:{type:Array,default:void 0},defaultActiveKey:{type:Array,default:()=>[]},accordion:{type:Boolean,default:!1},showExpandIcon:{type:Boolean,default:void 0},expandIconPosition:{type:String,default:"left"},bordered:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},emits:{"update:activeKey":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{expandIconPosition:r,destroyOnHide:a,showExpandIcon:n}=yt(e),s=Se("collapse"),o=ie(e.defaultActiveKey),l=T(()=>{var d;const h=(d=e.activeKey)!=null?d:o.value;return bi(h)?h:[h]});dr(IF,gt({activeKeys:l,slots:i,showExpandIcon:n,expandIconPosition:r,destroyOnHide:a,handleClick:(d,h)=>{let p=[];if(e.accordion)l.value.includes(d)||(p=[d]),o.value=p;else{p=[...l.value];const f=p.indexOf(d);f>-1?p.splice(f,1):e.accordion?p=[d]:p.push(d),o.value=p}t("update:activeKey",p),t("change",p,h)}}));const c=T(()=>[s,{[`${s}-borderless`]:!e.bordered}]);return{prefixCls:s,cls:c}}});function E_e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls)},[ye(e.$slots,"default")],2)}var OS=We(M_e,[["render",E_e]]);const A_e=se({name:"IconCaretRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-caret-right`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),P_e=["stroke-width","stroke-linecap","stroke-linejoin"],T_e=ve("path",{d:"M34.829 23.063c.6.48.6 1.394 0 1.874L17.949 38.44c-.785.629-1.949.07-1.949-.937V10.497c0-1.007 1.164-1.566 1.95-.937l16.879 13.503Z",fill:"currentColor",stroke:"none"},null,-1),k_e=[T_e];function O_e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},k_e,14,P_e)}var DS=We(A_e,[["render",O_e]]);const D_e=Object.assign(DS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+DS.name,DS)}}),I_e=se({name:"IconCaretLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-caret-left`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),L_e=["stroke-width","stroke-linecap","stroke-linejoin"],B_e=ve("path",{d:"M13.171 24.937a1.2 1.2 0 0 1 0-1.874L30.051 9.56c.785-.629 1.949-.07 1.949.937v27.006c0 1.006-1.164 1.566-1.95.937L13.171 24.937Z",fill:"currentColor",stroke:"none"},null,-1),z_e=[B_e];function R_e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},z_e,14,L_e)}var IS=We(I_e,[["render",R_e]]);const N_e=Object.assign(IS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+IS.name,IS)}});var w0=se({name:"CollapseItem",components:{IconHover:Ur,IconCaretRight:D_e,IconCaretLeft:N_e},props:{header:String,disabled:{type:Boolean,default:!1},showExpandIcon:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},setup(e,{slots:t}){var i;const r=xs(),a=Se("collapse-item"),n=Ai(IF,{}),s=r&&Mt(r?.vnode.key)?r.vnode.key:String((i=r?.vnode.key)!=null?i:""),o=T(()=>{var x;return(x=n.activeKeys)==null?void 0:x.includes(s)}),l=T(()=>n.destroyOnHide||e.destroyOnHide),u=T(()=>{var x;return(x=n?.showExpandIcon)!=null?x:e.showExpandIcon}),c=ie(l.value?o.value:!0),d=T(()=>{var x;return(x=n?.expandIconPosition)!=null?x:"left"}),h=x=>{var S;e.disabled||(S=n.handleClick)==null||S.call(n,s,x)};Vt(o,x=>{x&&!c.value&&(c.value=!0)});const p={onEnter:x=>{x.style.height=`${x.scrollHeight}px`},onAfterEnter:x=>{x.style.height="auto"},onBeforeLeave:x=>{x.style.height=`${x.scrollHeight}px`},onLeave:x=>{x.style.height="0"},onAfterLeave:()=>{l.value&&(c.value=!1)}},f=T(()=>[a,{[`${a}-active`]:o.value}]),v=T(()=>[`${a}-header`,`${a}-header-${n?.expandIconPosition}`,{[`${a}-header-disabled`]:e.disabled}]),m=T(()=>[{[`${a}-icon-right`]:n?.expandIconPosition==="right"}]),g=T(()=>[`${a}-content`,{[`${a}-content-expend`]:o.value}]),y=()=>d.value==="right"?_(be("icon-caret-left"),{class:`${a}-expand-icon`},null):_(be("icon-caret-right"),{class:`${a}-expand-icon`},null),b=()=>u.value&&_(be("icon-hover"),{prefix:a,class:m.value,disabled:e.disabled},{default:()=>{var x,S,w,E;return[(E=(w=(S=t["expand-icon"])!=null?S:(x=n?.slots)==null?void 0:x["expand-icon"])==null?void 0:w({active:o.value,disabled:e.disabled,position:d.value}))!=null?E:y()]}});return()=>{var x,S,w;return _("div",{class:f.value},[_("div",{role:"button","aria-disabled":e.disabled,"aria-expanded":o.value,tabindex:"0",class:v.value,onClick:h},[b(),_("div",{class:`${a}-header-title`},[(S=(x=t.header)==null?void 0:x.call(t))!=null?S:e.header]),t.extra&&_("div",{class:`${a}-header-extra`},[(w=t.extra)==null?void 0:w.call(t)])]),_(rs,it({name:"collapse-slider"},p),{default:()=>{var E;return[Ys(_("div",{role:"region",class:g.value},[c.value&&_("div",{ref:"contentBoxRef",class:`${a}-content-box`},[(E=t.default)==null?void 0:E.call(t)])]),[[Xs,o.value]])]}})])}}});const V_e=Object.assign(OS,{Item:w0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+OS.name,OS),e.component(i+w0.name,w0)}}),F_e=["#00B42A","#3C7EFF","#FF7D00","#F76965","#F7BA1E","#F5319D","#D91AD9","#9FDB1D","#FADC19","#722ED1","#3491FA","#7BE188","#93BEFF","#FFCF8B","#FBB0A7","#FCE996","#FB9DC7","#F08EE6","#DCF190","#FDFA94","#C396ED","#9FD4FD"];var j_e=Object.defineProperty,$_e=Object.defineProperties,U_e=Object.getOwnPropertyDescriptors,SL=Object.getOwnPropertySymbols,W_e=Object.prototype.hasOwnProperty,H_e=Object.prototype.propertyIsEnumerable,CL=(e,t,i)=>t in e?j_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,G_e=(e,t)=>{for(var i in t||(t={}))W_e.call(t,i)&&CL(e,i,t[i]);if(SL)for(var i of SL(t))H_e.call(t,i)&&CL(e,i,t[i]);return e},q_e=(e,t)=>$_e(e,U_e(t));const LF=(e,t,i)=>{const r=Math.floor(e*6),a=e*6-r,n=i*(1-t),s=i*(1-a*t),o=i*(1-(1-a)*t),l=r%6,u=[i,s,n,n,o,i][l],c=[o,i,i,s,n,n][l],d=[n,n,o,i,i,s][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}},p1=(e,t,i)=>{e/=255,t/=255,i/=255;const r=Math.max(e,t,i),a=Math.min(e,t,i);let n=0;const s=r,o=r-a,l=r===0?0:o/r;if(r===a)n=0;else{switch(r){case e:n=(t-i)/o+(t<i?6:0);break;case t:n=(i-e)/o+2;break;case i:n=(e-t)/o+4;break}n/=6}return{h:n,s:l,v:s}},Y_e="[-\\+]?\\d+%?",X_e="[-\\+]?\\d*\\.\\d+%?",Yc=`(?:${X_e})|(?:${Y_e})`,K_e=`[\\s|\\(]+(${Yc})[,|\\s]+(${Yc})[,|\\s]+(${Yc})\\s*\\)?`,Z_e=`[\\s|\\(]+(${Yc})[,|\\s]+(${Yc})[,|\\s]+(${Yc})[,|\\s]+(${Yc})\\s*\\)?`,Vu={rgb:new RegExp(`rgb${K_e}`),rgba:new RegExp(`rgba${Z_e}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/},Ra=e=>parseInt(e,16),_L=e=>Ra(e)/255,Q_e=e=>{let t=Vu.rgb.exec(e);return t?{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}:(t=Vu.rgba.exec(e),t?{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10),a:parseFloat(t[4])}:(t=Vu.hex8.exec(e),t?{r:Ra(t[1]),g:Ra(t[2]),b:Ra(t[3]),a:_L(t[4])}:(t=Vu.hex6.exec(e),t?{r:Ra(t[1]),g:Ra(t[2]),b:Ra(t[3])}:(t=Vu.hex4.exec(e),t?{r:Ra(t[1]+t[1]),g:Ra(t[2]+t[2]),b:Ra(t[3]+t[3]),a:_L(t[4]+t[4])}:(t=Vu.hex3.exec(e),t?{r:Ra(t[1]+t[1]),g:Ra(t[2]+t[2]),b:Ra(t[3]+t[3])}:!1)))))},J_e=e=>{var t;const i=Q_e(e);if(i){const r=p1(i.r,i.g,i.b);return q_e(G_e({},r),{a:(t=i.a)!=null?t:1})}return{h:0,s:1,v:1,a:1}},BF=e=>{if(e=e.trim().toLowerCase(),e.length===0)return!1;let t=Vu.hex6.exec(e);return t?{r:Ra(t[1]),g:Ra(t[2]),b:Ra(t[3])}:(t=Vu.hex3.exec(e),t?{r:Ra(t[1]+t[1]),g:Ra(t[2]+t[2]),b:Ra(t[3]+t[3])}:!1)},ML=(e,t,i)=>[Math.round(e).toString(16).padStart(2,"0"),Math.round(t).toString(16).padStart(2,"0"),Math.round(i).toString(16).padStart(2,"0")].join("").toUpperCase(),e2e=(e,t,i,r)=>[Math.round(e).toString(16).padStart(2,"0"),Math.round(t).toString(16).padStart(2,"0"),Math.round(i).toString(16).padStart(2,"0"),Math.round(r*255).toString(16).padStart(2,"0")].join("").toUpperCase(),zF=({value:e,onChange:t})=>{const i=ie(!1),r=ie(),a=ie(),n=(c,d)=>c<0?0:c>d?1:c/d,s=c=>{if(!r.value)return;const{clientX:d,clientY:h}=c,p=r.value.getBoundingClientRect(),f=[n(d-p.x,p.width),n(h-p.y,p.height)];(f[0]!==e[0]||f[1]!==e[1])&&t?.(f)},o=()=>{i.value=!1,window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",o),window.removeEventListener("contextmenu",o)},l=c=>{i.value=!0,s(c),window.addEventListener("mousemove",u),window.addEventListener("mouseup",o),window.addEventListener("contextmenu",o)};function u(c){c.preventDefault(),c.buttons>0?s(c):o()}return{active:i,blockRef:r,handlerRef:a,onMouseDown:l}};var EL=se({name:"ControlBar",props:{x:{type:Number,required:!0},color:{type:Object,required:!0},colorString:String,type:String,onChange:Function},setup(e){const t=Se("color-picker"),i=T(()=>e.color.rgb),{blockRef:r,handlerRef:a,onMouseDown:n}=zF({value:[e.x,0],onChange:o=>{var l;return(l=e.onChange)==null?void 0:l.call(e,o[0])}}),s=()=>_("div",{ref:a,class:`${t}-handler`,style:{left:`${e.x*100}%`,color:e.colorString}},null);return()=>e.type==="alpha"?_("div",{class:`${t}-control-bar-bg`},[_("div",{ref:r,class:[`${t}-control-bar`,`${t}-control-bar-alpha`],style:{background:`linear-gradient(to right, rgba(0, 0, 0, 0), rgb(${i.value.r}, ${i.value.g}, ${i.value.b}))`},onMousedown:n},[s()])]):_("div",{ref:r,class:[`${t}-control-bar`,`${t}-control-bar-hue`],onMousedown:n},[s()])}}),t2e=se({name:"Palette",props:{color:{type:Object,required:!0},onChange:Function},setup(e){const t=Se("color-picker"),i=T(()=>e.color.hsv),{blockRef:r,handlerRef:a,onMouseDown:n}=zF({value:[i.value.s,1-i.value.v],onChange:o=>{var l;return(l=e.onChange)==null?void 0:l.call(e,o[0],1-o[1])}}),s=T(()=>{const o=LF(i.value.h,1,1);return`rgb(${o.r}, ${o.g}, ${o.b})`});return()=>_("div",{ref:r,class:`${t}-palette`,style:{backgroundColor:s.value},onMousedown:n},[_("div",{ref:a,class:`${t}-handler`,style:{top:`${(1-i.value.v)*100}%`,left:`${i.value.s*100}%`}},null)])}});function bP(e,t){return t===void 0&&(t=15),+parseFloat(Number(e).toPrecision(t))}function bl(e){var t=e.toString().split(/[eE]/),i=(t[0].split(".")[1]||"").length-+(t[1]||0);return i>0?i:0}function Em(e){if(e.toString().indexOf("e")===-1)return Number(e.toString().replace(".",""));var t=bl(e);return t>0?bP(Number(e)*Math.pow(10,t)):Number(e)}function LM(e){NF&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function f1(e){return function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[0],a=t.slice(1);return a.reduce(function(n,s){return e(n,s)},r)}}var hc=f1(function(e,t){var i=Em(e),r=Em(t),a=bl(e)+bl(t),n=i*r;return LM(n),n/Math.pow(10,a)}),i2e=f1(function(e,t){var i=Math.pow(10,Math.max(bl(e),bl(t)));return(hc(e,i)+hc(t,i))/i}),r2e=f1(function(e,t){var i=Math.pow(10,Math.max(bl(e),bl(t)));return(hc(e,i)-hc(t,i))/i}),RF=f1(function(e,t){var i=Em(e),r=Em(t);return LM(i),LM(r),hc(i/r,bP(Math.pow(10,bl(t)-bl(e))))});function a2e(e,t){var i=Math.pow(10,t),r=RF(Math.round(Math.abs(hc(e,i))),i);return e<0&&r!==0&&(r=hc(r,-1)),r}var NF=!0;function n2e(e){e===void 0&&(e=!0),NF=e}var is={strip:bP,plus:i2e,minus:r2e,times:hc,divide:RF,round:a2e,digitLength:bl,float2Fixed:Em,enableBoundaryChecking:n2e};const s2e=se({name:"IconPlus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-plus`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),o2e=["stroke-width","stroke-linecap","stroke-linejoin"],l2e=ve("path",{d:"M5 24h38M24 5v38"},null,-1),u2e=[l2e];function c2e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},u2e,14,o2e)}var LS=We(s2e,[["render",c2e]]);const op=Object.assign(LS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+LS.name,LS)}}),d2e=se({name:"IconMinus",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-minus`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),h2e=["stroke-width","stroke-linecap","stroke-linejoin"],p2e=ve("path",{d:"M5 24h38"},null,-1),f2e=[p2e];function m2e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},f2e,14,h2e)}var BS=We(d2e,[["render",m2e]]);const wP=Object.assign(BS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+BS.name,BS)}});var v2e=Object.defineProperty,AL=Object.getOwnPropertySymbols,g2e=Object.prototype.hasOwnProperty,y2e=Object.prototype.propertyIsEnumerable,PL=(e,t,i)=>t in e?v2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,b2e=(e,t)=>{for(var i in t||(t={}))g2e.call(t,i)&&PL(e,i,t[i]);if(AL)for(var i of AL(t))y2e.call(t,i)&&PL(e,i,t[i]);return e};const w2e=800,x2e=150;is.enableBoundaryChecking(!1);var zS=se({name:"InputNumber",props:{modelValue:Number,defaultValue:Number,mode:{type:String,default:"embed"},precision:Number,step:{type:Number,default:1},disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},formatter:{type:Function},parser:{type:Function},placeholder:String,hideButton:{type:Boolean,default:!1},size:{type:String},allowClear:{type:Boolean,default:!1},modelEvent:{type:String,default:"change"},readOnly:{type:Boolean,default:!1},inputAttrs:{type:Object}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0,focus:e=>!0,blur:e=>!0,clear:e=>!0,input:(e,t,i)=>!0,keydown:e=>!0},setup(e,{emit:t,slots:i}){var r;const{size:a,disabled:n}=yt(e),s=Se("input-number"),o=ie(),{mergedSize:l,mergedDisabled:u,eventHandlers:c}=Wr({size:a,disabled:n}),{mergedSize:d}=hn(l),h=T(()=>{if(Mt(e.precision)){const $=`${e.step}`.split(".")[1],q=$&&$.length||0;return Math.max(q,e.precision)}}),p=$=>{var q,Z;if(!Mt($))return"";const G=h.value?$.toFixed(h.value):String($);return(Z=(q=e.formatter)==null?void 0:q.call(e,G))!=null?Z:G},f=ie(p((r=e.modelValue)!=null?r:e.defaultValue)),v=T(()=>{var $,q;if(!f.value)return;const Z=Number((q=($=e.parser)==null?void 0:$.call(e,f.value))!=null?q:f.value);return Number.isNaN(Z)?void 0:Z}),m=ie(Mt(v.value)&&v.value<=e.min),g=ie(Mt(v.value)&&v.value>=e.max);let y=0;const b=()=>{y&&(window.clearTimeout(y),y=0)},x=$=>{if(!ei($))return Mt(e.min)&&$<e.min&&($=e.min),Mt(e.max)&&$>e.max&&($=e.max),Mt(h.value)?is.round($,h.value):$},S=$=>{let q=!1,Z=!1;Mt($)&&($<=e.min&&(q=!0),$>=e.max&&(Z=!0)),g.value!==Z&&(g.value=Z),m.value!==q&&(m.value=q)},w=()=>{const $=x(v.value),q=p($);($!==v.value||f.value!==q)&&(f.value=q),t("update:modelValue",$)};Vt(()=>[e.max,e.min],()=>{w(),S(v.value)});const E=($,q)=>{if(u.value||$==="plus"&&g.value||$==="minus"&&m.value)return;let Z;Mt(v.value)?Z=x(is[$](v.value,e.step)):Z=e.min===-1/0?0:e.min,f.value=p(Z),S(Z),t("update:modelValue",Z),t("change",Z,q)},M=($,q,Z=!1)=>{var G;$.preventDefault(),(G=o.value)==null||G.focus(),E(q,$),Z&&(y=window.setTimeout(()=>$.target.dispatchEvent($),y?x2e:w2e))},P=($,q)=>{var Z,G,X,J;$=$.trim().replace(/。/g,"."),$=(G=(Z=e.parser)==null?void 0:Z.call(e,$))!=null?G:$,(Mt(Number($))||/^(\.|-)$/.test($))&&(f.value=(J=(X=e.formatter)==null?void 0:X.call(e,$))!=null?J:$,S(v.value),t("input",v.value,f.value,q),e.modelEvent==="input"&&(t("update:modelValue",v.value),t("change",v.value,q)))},A=$=>{t("focus",$)},k=($,q)=>{q instanceof MouseEvent&&!$||(w(),t("change",v.value,q))},I=$=>{t("blur",$)},O=$=>{var q,Z;f.value="",t("update:modelValue",void 0),t("change",void 0,$),(Z=(q=c.value)==null?void 0:q.onChange)==null||Z.call(q,$),t("clear",$)},D=c1(new Map([[Kr.ARROW_UP,$=>{$.preventDefault(),!e.readOnly&&E("plus",$)}],[Kr.ARROW_DOWN,$=>{$.preventDefault(),!e.readOnly&&E("minus",$)}]])),F=$=>{t("keydown",$),$.defaultPrevented||D($)};Vt(()=>e.modelValue,$=>{$!==v.value&&(f.value=p($),S($))});const U=()=>{var $,q,Z;return e.readOnly?null:_(Xt,null,[i.suffix&&_("div",{class:`${s}-suffix`},[($=i.suffix)==null?void 0:$.call(i)]),_("div",{class:`${s}-step`},[_("button",{class:[`${s}-step-button`,{[`${s}-step-button-disabled`]:u.value||g.value}],type:"button",tabindex:"-1",disabled:u.value||g.value,onMousedown:G=>M(G,"plus",!0),onMouseup:b,onMouseleave:b},[i.plus?(q=i.plus)==null?void 0:q.call(i):_(fP,null,null)]),_("button",{class:[`${s}-step-button`,{[`${s}-step-button-disabled`]:u.value||m.value}],type:"button",tabindex:"-1",disabled:u.value||m.value,onMousedown:G=>M(G,"minus",!0),onMouseup:b,onMouseleave:b},[i.minus?(Z=i.minus)==null?void 0:Z.call(i):_(kp,null,null)])])])},z=T(()=>[s,`${s}-mode-${e.mode}`,`${s}-size-${d.value}`,{[`${s}-readonly`]:e.readOnly}]),B=()=>_(un,{size:d.value,tabindex:"-1",class:`${s}-step-button`,disabled:u.value||m.value,onMousedown:$=>M($,"minus",!0),onMouseup:b,onMouseleave:b},{icon:()=>_(wP,null,null)}),W=()=>_(un,{size:d.value,tabindex:"-1",class:`${s}-step-button`,disabled:u.value||g.value,onMousedown:$=>M($,"plus",!0),onMouseup:b,onMouseleave:b},{icon:()=>_(op,null,null)});return{inputRef:o,render:()=>{const $=e.mode==="embed"?{prepend:i.prepend,prefix:i.prefix,suffix:e.hideButton?i.suffix:U,append:i.append}:{prepend:e.hideButton?i.prepend:B,prefix:i.prefix,suffix:i.suffix,append:e.hideButton?i.append:W};return _(mc,{key:`__arco__${e.mode}`,ref:o,class:z.value,type:"text",allowClear:e.allowClear,size:d.value,modelValue:f.value,placeholder:e.placeholder,disabled:u.value,readonly:e.readOnly,error:e.error,inputAttrs:b2e({role:"spinbutton","aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":f.value},e.inputAttrs),onInput:P,onFocus:A,onBlur:I,onClear:O,onChange:k,onKeydown:F},$)}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const Qm=Object.assign(zS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+zS.name,zS)}});var VF=se({name:"InputAlpha",props:{value:{type:Number,required:!0},disabled:Boolean,onChange:Function},setup(e){const t=Se("color-picker");return()=>_(Qm,{class:`${t}-input-alpha`,size:"mini",min:0,max:100,disabled:e.disabled,modelValue:Math.round(e.value*100),onChange:(i=100)=>{var r;return(r=e.onChange)==null?void 0:r.call(e,i/100)}},{suffix:()=>"%"})}}),S2e=Object.defineProperty,TL=Object.getOwnPropertySymbols,C2e=Object.prototype.hasOwnProperty,_2e=Object.prototype.propertyIsEnumerable,kL=(e,t,i)=>t in e?S2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,OL=(e,t)=>{for(var i in t||(t={}))C2e.call(t,i)&&kL(e,i,t[i]);if(TL)for(var i of TL(t))_2e.call(t,i)&&kL(e,i,t[i]);return e},M2e=se({name:"InputRgb",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},disabled:Boolean,disabledAlpha:Boolean,onHsvChange:Function,onAlphaChange:Function},setup(e){const t=Se("color-picker"),{color:i}=yt(e),r=a=>{var n;const s=OL(OL({},i.value.rgb),a),o=p1(s.r,s.g,s.b);(n=e.onHsvChange)==null||n.call(e,o)};return()=>_(Mh,{class:`${t}-input-group`},{default:()=>[["r","g","b"].map(a=>_(Qm,{key:a,size:"mini",min:0,max:255,disabled:e.disabled,modelValue:i.value.rgb[a],hideButton:!0,onChange:(n=0)=>r({[a]:n})},null)),!e.disabledAlpha&&_(VF,{disabled:e.disabled,value:e.alpha,onChange:e.onAlphaChange},null)]})}}),E2e=se({name:"InputHex",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},disabled:Boolean,disabledAlpha:Boolean,onHsvChange:Function,onAlphaChange:Function},setup(e){const t=Se("color-picker"),{color:i}=yt(e),[r,a]=Mn(i.value.hex),n=l=>{var u;const c=BF(l)||{r:255,g:0,b:0},d=p1(c.r,c.g,c.b);(u=e.onHsvChange)==null||u.call(e,d)},s=l=>{var u,c;const d=(c=(u=l.match(/[a-fA-F0-9]*/g))==null?void 0:u.join(""))!=null?c:"";d!==i.value.hex&&n(d.toUpperCase())},o=l=>{if(!l.clipboardData)return;let u=l.clipboardData.getData("Text");u.startsWith("#")&&(u=u.slice(1)),s(u),l.preventDefault()};return Vt(i,()=>{i.value.hex!==r.value&&a(i.value.hex)}),()=>_(Mh,{class:`${t}-input-group`},{default:()=>[_(mc,{class:`${t}-input-hex`,size:"mini",maxLength:6,disabled:e.disabled,modelValue:r.value,onInput:a,onChange:s,onBlur:()=>n,onPressEnter:()=>n,onPaste:o},{prefix:()=>"#"}),!e.disabledAlpha&&_(VF,{disabled:e.disabled,value:e.alpha,onChange:e.onAlphaChange},null)]})}}),A2e=se({name:"Panel",props:{color:{type:Object,required:!0},alpha:{type:Number,required:!0},colorString:String,disabled:Boolean,disabledAlpha:Boolean,showHistory:Boolean,showPreset:Boolean,format:String,historyColors:Array,presetColors:Array,onAlphaChange:Function,onHsvChange:Function},setup(e){const{t}=Yr(),i=Se("color-picker"),r=T(()=>e.color.hsv),[a,n]=Mn(e.format||"hex"),s=h=>{n(h)};ie(!1);const o=h=>{var p;const f=BF(h)||{r:255,g:0,b:0},v=p1(f.r,f.g,f.b);(p=e.onHsvChange)==null||p.call(e,v)},l=()=>{const h={color:e.color,alpha:e.alpha,disabled:e.disabled,disabledAlpha:e.disabledAlpha,onHsvChange:e.onHsvChange,onAlphaChange:e.onAlphaChange};return a.value==="rgb"?_(M2e,h,null):_(E2e,h,null)},u=h=>_("div",{key:h,class:`${i}-color-block`,style:{backgroundColor:h},onClick:()=>o(h)},[_("div",{class:`${i}-block`,style:{backgroundColor:h}},null)]),c=(h,p)=>_("div",{class:`${i}-colors-section`},[_("div",{class:`${i}-colors-text`},[h]),_("div",{class:`${i}-colors-wrapper`},[p?.length?_("div",{class:`${i}-colors-list`},[p.map(u)]):_("span",{class:`${i}-colors-empty`},[t("colorPicker.empty")])])]),d=()=>e.showHistory||e.showPreset?_("div",{class:`${i}-panel-colors`},[e.showHistory&&c(t("colorPicker.history"),e.historyColors),e.showPreset&&c(t("colorPicker.preset"),e.presetColors)]):null;return()=>_("div",{class:{[`${i}-panel`]:!0,[`${i}-panel-disabled`]:e.disabled}},[_(t2e,{color:e.color,onChange:(h,p)=>{var f;return(f=e.onHsvChange)==null?void 0:f.call(e,{h:r.value.h,s:h,v:p})}},null),_("div",{class:`${i}-panel-control`},[_("div",{class:`${i}-control-wrapper`},[_("div",null,[_(EL,{type:"hue",x:r.value.h,color:e.color,colorString:e.colorString,onChange:h=>{var p;return(p=e.onHsvChange)==null?void 0:p.call(e,{h,s:r.value.s,v:r.value.v})}},null),!e.disabledAlpha&&_(EL,{type:"alpha",x:e.alpha,color:e.color,colorString:e.colorString,onChange:e.onAlphaChange},null)]),_("div",{class:`${i}-preview`,style:{backgroundColor:e.colorString}},null)]),_("div",{class:`${i}-input-wrapper`},[_(Mm,{class:`${i}-select`,size:"mini","trigger-props":{class:`${i}-select-popup`},options:[{value:"hex",label:"Hex"},{value:"rgb",label:"RGB"}],modelValue:a.value,onChange:s},null),_("div",{class:`${i}-group-wrapper`},[l()])])]),d()])}}),RS=se({name:"ColorPicker",props:{modelValue:String,defaultValue:{type:String},format:{type:String},size:{type:String,default:"medium"},showText:{type:Boolean,default:!1},showHistory:{type:Boolean,default:!1},showPreset:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledAlpha:{type:Boolean,default:!1},hideTrigger:{type:Boolean},triggerProps:{type:Object},historyColors:{type:Array},presetColors:{type:Array,default:()=>F_e}},emits:{"update:modelValue":e=>!0,change:e=>!0,"popup-visible-change":(e,t)=>!0},setup(e,{emit:t,slots:i}){const r=Se("color-picker"),a=T(()=>{var y;return(y=e.modelValue)!=null?y:e.defaultValue}),n=T(()=>J_e(a.value||"")),[s,o]=Mn(n.value.a),[l,u]=Mn({h:n.value.h,s:n.value.s,v:n.value.v});Vt(()=>n.value,y=>{a.value!==h.value&&(o(y.a),u({h:y.h,s:y.s,v:y.v}))});const c=T(()=>{const y=LF(l.value.h,l.value.s,l.value.v),b=ML(y.r,y.g,y.b);return{hsv:l.value,rgb:y,hex:b}}),d=T(()=>{const{r:y,g:b,b:x}=c.value.rgb;return`rgba(${y}, ${b}, ${x}, ${s.value.toFixed(2)})`}),h=T(()=>{const{r:y,g:b,b:x}=c.value.rgb;return e.format==="rgb"?s.value<1&&!e.disabledAlpha?`rgba(${y}, ${b}, ${x}, ${s.value.toFixed(2)})`:`rgb(${y}, ${b}, ${x})`:s.value<1&&!e.disabledAlpha?`#${e2e(y,b,x,s.value)}`:`#${ML(y,b,x)}`});Vt(h,y=>{t("update:modelValue",y),t("change",y)});const p=y=>{!e.disabled&&u(y)},f=y=>{!e.disabled&&o(y)},v=y=>{t("popup-visible-change",y,h.value)},m=()=>_("div",{class:{[r]:!0,[`${r}-size-${e.size}`]:e.size,[`${r}-disabled`]:e.disabled}},[_("div",{class:`${r}-preview`,style:{backgroundColor:h.value}},null),e.showText&&_("div",{class:`${r}-value`},[h.value]),_("input",{class:`${r}-input`,value:h.value,disabled:e.disabled},null)]),g=()=>_(A2e,{color:c.value,alpha:s.value,colorString:d.value,historyColors:e.historyColors,presetColors:e.presetColors,showHistory:e.showHistory,showPreset:e.showPreset,disabled:e.disabled,disabledAlpha:e.disabledAlpha,format:e.format,onHsvChange:p,onAlphaChange:f},null);return()=>e.hideTrigger?g():_($a,it({trigger:"click",position:"bl",animationName:"slide-dynamic-origin",popupOffset:4,disabled:e.disabled,onPopupVisibleChange:v},e.triggerProps),{default:()=>[i.default?i.default():m()],content:g})}});const P2e=Object.assign(RS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+RS.name,RS)}});function FF(e,t,i){return T(()=>!!(e[i]||t[i]))}var T2e=Object.defineProperty,DL=Object.getOwnPropertySymbols,k2e=Object.prototype.hasOwnProperty,O2e=Object.prototype.propertyIsEnumerable,IL=(e,t,i)=>t in e?T2e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,D2e=(e,t)=>{for(var i in t||(t={}))k2e.call(t,i)&&IL(e,i,t[i]);if(DL)for(var i of DL(t))O2e.call(t,i)&&IL(e,i,t[i]);return e};const I2e=se({name:"Comment",props:{author:{type:String},avatar:{type:String},content:{type:String},datetime:{type:String},align:{type:[String,Object],default:"left"}},setup(e,{slots:t}){const i=Se("comment"),[r,a,n,s]=["author","avatar","content","datetime"].map(l=>FF(e,t,l)),o=T(()=>{const{align:l}=e;return D2e({},na(l)?{datetime:l,actions:l}:l)});return{prefixCls:i,hasAuthor:r,hasAvatar:a,hasContent:n,hasDatetime:s,computedAlign:o}}}),L2e=["src"],B2e={key:0},z2e={key:0},R2e={key:0};function N2e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[e.hasAvatar?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-avatar`)},[e.avatar?(N(),ee("img",{key:0,src:e.avatar,alt:"comment-avatar"},null,8,L2e)):ye(e.$slots,"avatar",{key:1})],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-inner`)},[ve("div",{class:Y(`${e.prefixCls}-inner-content`)},[e.hasAuthor||e.hasDatetime?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title ${e.prefixCls}-title-align-${e.computedAlign.datetime}`)},[e.hasAuthor?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-author`)},[e.author?(N(),ee("span",B2e,Bt(e.author),1)):ye(e.$slots,"author",{key:1})],2)):Me("v-if",!0),e.hasDatetime?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-datetime`)},[e.datetime?(N(),ee("span",z2e,Bt(e.datetime),1)):ye(e.$slots,"datetime",{key:1})],2)):Me("v-if",!0)],2)):Me("v-if",!0),e.hasContent?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-content`)},[e.content?(N(),ee("span",R2e,Bt(e.content),1)):ye(e.$slots,"content",{key:1})],2)):Me("v-if",!0),e.$slots.actions?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-actions ${e.prefixCls}-actions-align-${e.computedAlign.actions}`)},[ye(e.$slots,"actions")],2)):Me("v-if",!0)],2),e.$slots.default?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-inner-comment`)},[ye(e.$slots,"default")],2)):Me("v-if",!0)],2)],2)}var NS=We(I2e,[["render",N2e]]);const V2e=Object.assign(NS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+NS.name,NS)}}),F2e=se({name:"ConfigProvider",props:{prefixCls:{type:String,default:"arco"},locale:{type:Object},size:{type:String},global:{type:Boolean,default:!1},updateAtScroll:{type:Boolean,default:!1},scrollToClose:{type:Boolean,default:!1},exchangeTime:{type:Boolean,default:!0}},setup(e,{slots:t}){const{prefixCls:i,locale:r,size:a,updateAtScroll:n,scrollToClose:s,exchangeTime:o}=yt(e),l=gt({slots:t,prefixCls:i,locale:r,size:a,updateAtScroll:n,scrollToClose:s,exchangeTime:o});if(e.global){const u=xs();u&&u.appContext.app.provide(Pn,l)}else dr(Pn,l)}});function j2e(e,t,i,r,a,n){return ye(e.$slots,"default")}var VS=We(F2e,[["render",j2e]]);const $2e=Object.assign(VS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+VS.name,VS)}});function U2e(e){const{modelValue:t,defaultValue:i,format:r}=yt(e),a=T(()=>Is(t.value,r.value)),n=T(()=>Is(i.value,r.value)),[s,o]=Mn(ei(a.value)?ei(n.value)?void 0:n.value:a.value);return Vt(a,()=>{ei(a.value)&&o(void 0)}),{value:T(()=>a.value||s.value),setValue:o}}const W2e=se({name:"DateInput",components:{IconHover:Ur,IconClose:kn,FeedbackIcon:km},props:{size:{type:String},focused:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},error:{type:Boolean},allowClear:{type:Boolean},placeholder:{type:String},inputValue:{type:String},value:{type:Object},format:{type:[String,Function],required:!0}},emits:["clear","press-enter","change","blur"],setup(e,{emit:t,slots:i}){const{error:r,focused:a,disabled:n,size:s,value:o,format:l,inputValue:u}=yt(e),{mergedSize:c,mergedDisabled:d,mergedError:h,feedback:p}=Wr({size:s,disabled:n,error:r}),{mergedSize:f}=hn(c),v=Se("picker"),m=T(()=>[v,`${v}-size-${f.value}`,{[`${v}-focused`]:a.value,[`${v}-disabled`]:d.value,[`${v}-error`]:h.value,[`${v}-has-prefix`]:i.prefix}]),g=T(()=>{if(u?.value)return u?.value;if(o?.value&&Ks(o.value))return Zt(l.value)?l.value(o.value):o.value.format(l.value)}),y=ie();return{feedback:p,prefixCls:v,classNames:m,displayValue:g,mergedDisabled:d,refInput:y,onPressEnter(){t("press-enter")},onChange(b){t("change",b)},onClear(b){t("clear",b)},onBlur(b){t("blur",b)}}},methods:{focus(){this.refInput&&this.refInput.focus&&this.refInput.focus()},blur(){this.refInput&&this.refInput.blur&&this.refInput.blur()}}}),H2e=["disabled","placeholder","value"];function G2e(e,t,i,r,a,n){const s=be("IconClose"),o=be("IconHover"),l=be("FeedbackIcon");return N(),ee("div",{class:Y(e.classNames)},[e.$slots.prefix?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-prefix`)},[ye(e.$slots,"prefix")],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-input`)},[ve("input",it({ref:"refInput",disabled:e.mergedDisabled,placeholder:e.placeholder,class:`${e.prefixCls}-start-time`,value:e.displayValue},e.readonly?{readonly:!0}:{},{onKeydown:t[0]||(t[0]=ph((...u)=>e.onPressEnter&&e.onPressEnter(...u),["enter"])),onInput:t[1]||(t[1]=(...u)=>e.onChange&&e.onChange(...u)),onBlur:t[2]||(t[2]=(...u)=>e.onBlur&&e.onBlur(...u))}),null,16,H2e)],2),ve("div",{class:Y(`${e.prefixCls}-suffix`)},[e.allowClear&&!e.mergedDisabled&&e.displayValue?(N(),De(o,{key:0,prefix:e.prefixCls,class:Y(`${e.prefixCls}-clear-icon`),onClick:e.onClear},{default:He(()=>[_(s)]),_:1},8,["prefix","class","onClick"])):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-suffix-icon`)},[ye(e.$slots,"suffix-icon")],2),e.feedback?(N(),De(l,{key:1,type:e.feedback},null,8,["type"])):Me("v-if",!0)],2)],2)}var jF=We(W2e,[["render",G2e]]);function BM(e){const t=["H","h","m","s","a","A"],i=[];let r=!1;return t.forEach(a=>{e.indexOf(a)!==-1&&(i.push(a),(a==="a"||a==="A")&&(r=!0))}),{list:i,use12Hours:r}}const LL=new Map;function q2e(e,t,i){const r=LL.get(e);ei(r)||cancelAnimationFrame(r),i<=0&&(e.scrollTop=t),LL.set(e,requestAnimationFrame(()=>{new Ed({from:{scrollTop:e.scrollTop},to:{scrollTop:t},duration:i,onUpdate:n=>{e.scrollTop=n.scrollTop}}).start()}))}function ll(e,t){const i=r=>{if(bi(r))return r.map(a=>i(a));if(!ei(r))return r.format(t)};return i(e)}function _f(e){return ei(e)?!0:bi(e)?e.length===0||e.length===2&&Ks(e[0])&&Ks(e[1]):!1}function ub(e,t){return e?typeof e=="string"&&va(e,t).format(t)===e:!1}function Y2e(e,{disabledHours:t,disabledMinutes:i,disabledSeconds:r}){if(!e)return!1;const a=e.hour(),n=e.minute(),s=e.second(),o=t?.()||[],l=i?.(a)||[],u=r?.(a,n)||[],c=(d,h)=>!ei(d)&&h.includes(d);return c(a,o)||c(n,l)||c(s,u)}var bu=se({name:"RenderFunction",props:{renderFunc:{type:Function,required:!0}},render(){return this.renderFunc(this.$attrs)}});const $F=Symbol("PickerInjectionKey");function Jm(){const{datePickerT:e}=Ai($F)||{};return e||((t,...i)=>t)}const X2e=se({name:"PanelShortcuts",components:{Button:un,RenderFunction:bu},props:{prefixCls:{type:String,required:!0},shortcuts:{type:Array,default:()=>[]},showNowBtn:{type:Boolean}},emits:["item-click","item-mouse-enter","item-mouse-leave","now-click"],setup(e,{emit:t}){return{datePickerT:Jm(),onItemClick:r=>{t("item-click",r)},onItemMouseEnter:r=>{t("item-mouse-enter",r)},onItemMouseLeave:r=>{t("item-mouse-leave",r)},onNowClick:()=>{t("now-click")},isFunction:Zt}}});function K2e(e,t,i,r,a,n){const s=be("Button"),o=be("RenderFunction");return N(),ee("div",{class:Y(`${e.prefixCls}-shortcuts`)},[e.showNowBtn?(N(),De(s,{key:0,size:"mini",onClick:t[0]||(t[0]=()=>e.onNowClick())},{default:He(()=>[ti(Bt(e.datePickerT("datePicker.now")),1)]),_:1})):Me("v-if",!0),(N(!0),ee(Xt,null,Br(e.shortcuts,(l,u)=>(N(),De(s,{key:u,size:"mini",onClick:()=>e.onItemClick(l),onMouseenter:()=>e.onItemMouseEnter(l),onMouseleave:()=>e.onItemMouseLeave(l)},{default:He(()=>[e.isFunction(l.label)?(N(),De(o,{key:0,"render-func":l.label},null,8,["render-func"])):(N(),ee(Xt,{key:1},[ti(Bt(l.label),1)],2112))]),_:2},1032,["onClick","onMouseenter","onMouseleave"]))),128))],2)}var UF=We(X2e,[["render",K2e]]);function lp(e){return[...Array(e)]}function zM(e){if(!ei(e))return bi(e)?e:[e,void 0]}function zu(e){return!!e&&Ks(e[0])&&Ks(e[1])}function Z2e(e){return ei(e)||e.length===0||zu(e)}function WF(e,t,i){const r=t||e;return(i||e).set("year",r.year()).set("month",r.month()).set("date",r.date())}const Q2e=se({name:"IconDoubleLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-double-left`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),J2e=["stroke-width","stroke-linecap","stroke-linejoin"],eMe=ve("path",{d:"M36.857 9.9 22.715 24.042l14.142 14.142M25.544 9.9 11.402 24.042l14.142 14.142"},null,-1),tMe=[eMe];function iMe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},tMe,14,J2e)}var FS=We(Q2e,[["render",iMe]]);const rMe=Object.assign(FS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+FS.name,FS)}}),aMe=se({name:"IconDoubleRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-double-right`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),nMe=["stroke-width","stroke-linecap","stroke-linejoin"],sMe=ve("path",{d:"m11.143 38.1 14.142-14.142L11.143 9.816M22.456 38.1l14.142-14.142L22.456 9.816"},null,-1),oMe=[sMe];function lMe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},oMe,14,nMe)}var jS=We(aMe,[["render",lMe]]);const uMe=Object.assign(jS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+jS.name,jS)}}),cMe=se({name:"PanelHeader",components:{IconLeft:yu,IconRight:zo,IconDoubleLeft:rMe,IconDoubleRight:uMe,RenderFunction:bu},props:{prefixCls:{type:String,required:!0},title:{type:String,required:!0},mode:{type:String,default:"date"},value:{type:Object},icons:{type:Object},onPrev:{type:Function},onSuperPrev:{type:Function},onNext:{type:Function},onSuperNext:{type:Function},onLabelClick:{type:Function}},emits:["label-click"],setup(e){return{showPrev:T(()=>Zt(e.onPrev)),showSuperPrev:T(()=>Zt(e.onSuperPrev)),showNext:T(()=>Zt(e.onNext)),showSuperNext:T(()=>Zt(e.onSuperNext)),year:T(()=>["date","quarter","month","week"].includes(e.mode)&&e.value?e.value.format("YYYY"):""),month:T(()=>["date","week"].includes(e.mode)&&e.value?e.value.format("MM"):""),getIconClassName:t=>[`${e.prefixCls}-header-icon`,{[`${e.prefixCls}-header-icon-hidden`]:!t}]}}}),dMe={key:1};function hMe(e,t,i,r,a,n){const s=be("RenderFunction"),o=be("IconDoubleLeft"),l=be("IconLeft"),u=be("IconRight"),c=be("IconDoubleRight");return N(),ee("div",{class:Y(`${e.prefixCls}-header`)},[ve("div",{class:Y(e.getIconClassName(e.showSuperPrev)),onClick:t[0]||(t[0]=(...d)=>e.onSuperPrev&&e.onSuperPrev(...d))},[e.showSuperPrev?(N(),ee(Xt,{key:0},[e.icons&&e.icons.prevDouble?(N(),De(s,{key:0,"render-func":e.icons&&e.icons.prevDouble},null,8,["render-func"])):(N(),De(o,{key:1}))],2112)):Me("v-if",!0)],2),ve("div",{class:Y(e.getIconClassName(e.showPrev)),onClick:t[1]||(t[1]=(...d)=>e.onPrev&&e.onPrev(...d))},[e.showPrev?(N(),ee(Xt,{key:0},[e.icons&&e.icons.prev?(N(),De(s,{key:0,"render-func":e.icons&&e.icons.prev},null,8,["render-func"])):(N(),De(l,{key:1}))],2112)):Me("v-if",!0)],2),ve("div",{class:Y(`${e.prefixCls}-header-title`)},[e.onLabelClick&&(e.year||e.month)?(N(),ee(Xt,{key:0},[e.year?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-header-label`),onClick:t[2]||(t[2]=()=>e.onLabelClick&&e.onLabelClick("year"))},Bt(e.year),3)):Me("v-if",!0),e.year&&e.month?(N(),ee("span",dMe,"-")):Me("v-if",!0),e.month?(N(),ee("span",{key:2,class:Y(`${e.prefixCls}-header-label`),onClick:t[3]||(t[3]=()=>e.onLabelClick&&e.onLabelClick("month"))},Bt(e.month),3)):Me("v-if",!0)],64)):(N(),ee(Xt,{key:1},[ti(Bt(e.title),1)],2112))],2),ve("div",{class:Y(e.getIconClassName(e.showNext)),onClick:t[4]||(t[4]=(...d)=>e.onNext&&e.onNext(...d))},[e.showNext?(N(),ee(Xt,{key:0},[e.icons&&e.icons.next?(N(),De(s,{key:0,"render-func":e.icons&&e.icons.next},null,8,["render-func"])):(N(),De(u,{key:1}))],2112)):Me("v-if",!0)],2),ve("div",{class:Y(e.getIconClassName(e.showSuperNext)),onClick:t[5]||(t[5]=(...d)=>e.onSuperNext&&e.onSuperNext(...d))},[e.showSuperNext?(N(),ee(Xt,{key:0},[e.icons&&e.icons.nextDouble?(N(),De(s,{key:0,"render-func":e.icons&&e.icons.nextDouble},null,8,["render-func"])):(N(),De(c,{key:1}))],2112)):Me("v-if",!0)],2)],2)}var m1=We(cMe,[["render",hMe]]);function pMe(e){const{rangeValues:t}=yt(e),i=T(()=>t?.value&&t.value.every(Ks)?Cm(t.value):t?.value),r=T(()=>{var n;return(n=i.value)==null?void 0:n[0]}),a=T(()=>{var n;return(n=i.value)==null?void 0:n[1]});return{getCellClassName:(n,s)=>{const{value:o,isSameTime:l,mode:u,prefixCls:c}=e,d=!n.isPrev&&!n.isNext,h=o&&l(n.value,o);let p=l(n.value,An());u==="week"&&(p=An().isSame(n.value,"date"));const f=d&&r.value&&l(n.value,r.value),v=d&&a.value&&l(n.value,a.value),m=d&&r.value&&a.value&&(f||v||n.value.isBetween(r.value,a.value,null,"[]"));return[`${c}-cell`,{[`${c}-cell-in-view`]:d,[`${c}-cell-today`]:p,[`${c}-cell-selected`]:h,[`${c}-cell-range-start`]:f,[`${c}-cell-range-end`]:v,[`${c}-cell-in-range`]:m,[`${c}-cell-disabled`]:s},n.classNames]}}}const fMe=se({name:"PanelBody",components:{RenderFunction:bu},props:{prefixCls:{type:String,required:!0},rows:{type:Array,default:()=>[]},value:{type:Object},disabledDate:{type:Function},isSameTime:{type:Function,required:!0},mode:{type:String},rangeValues:{type:Array},dateRender:{type:Function}},emits:["cell-click","cell-mouse-enter"],setup(e,{emit:t}){const{prefixCls:i,value:r,disabledDate:a,isSameTime:n,mode:s,rangeValues:o}=yt(e),{getCellClassName:l}=pMe(gt({prefixCls:i,value:r,isSameTime:n,mode:s,rangeValues:o})),u=c=>!!(Zt(a?.value)&&a?.value(ys(c.value)));return{isWeek:T(()=>s?.value==="week"),getCellClassName:c=>{const d=u(c);return l(c,d)},onCellClick:c=>{u(c)||t("cell-click",c)},onCellMouseEnter:c=>{u(c)||t("cell-mouse-enter",c)},onCellMouseLeave:c=>{u(c)||t("cell-mouse-enter",c)},getDateValue:ys}}}),mMe=["onMouseenter","onMouseleave","onClick"];function vMe(e,t,i,r,a,n){const s=be("RenderFunction");return N(),ee("div",{class:Y(`${e.prefixCls}-body`)},[(N(!0),ee(Xt,null,Br(e.rows,(o,l)=>(N(),ee("div",{key:l,class:Y([`${e.prefixCls}-row`,{[`${e.prefixCls}-row-week`]:e.isWeek}])},[(N(!0),ee(Xt,null,Br(o,(u,c)=>(N(),ee(Xt,null,[Me(" 一年中的第几周，只在 week 模式下显示 "),e.isWeek&&c===0?(N(),ee("div",{key:c,class:Y([`${e.prefixCls}-cell`,`${e.prefixCls}-cell-week`])},[ve("div",{class:Y(`${e.prefixCls}-date`)},[ve("div",{class:Y(`${e.prefixCls}-date-value`)},Bt(u.label),3)],2)],2)):(N(),ee("div",{key:c,class:Y(e.getCellClassName(u)),onMouseenter:()=>{e.onCellMouseEnter(u)},onMouseleave:()=>{e.onCellMouseLeave(u)},onClick:()=>{e.onCellClick(u)}},[e.dateRender?(N(),De(s,{key:0,"render-func":e.dateRender,date:e.getDateValue(u.value)},null,8,["render-func","date"])):(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-date`)},[ve("div",{class:Y(`${e.prefixCls}-date-value`)},Bt(u.label),3)],2))],42,mMe))],64))),256))],2))),128))],2)}var v1=We(fMe,[["render",vMe]]);const gMe=se({name:"PanelWeekList",props:{prefixCls:{type:String,required:!0},weekList:{type:Array,required:!0}},setup(){const e=Jm();return{labelList:T(()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].map(i=>e(`datePicker.week.short.${i}`)))}}});function yMe(e,t,i,r,a,n){return N(),ee("div",{class:Y(`${e.prefixCls}-week-list`)},[(N(!0),ee(Xt,null,Br(e.weekList,s=>(N(),ee("div",{key:s,class:Y(`${e.prefixCls}-week-list-item`)},Bt(e.labelList[s]||""),3))),128))],2)}var bMe=We(gMe,[["render",yMe]]);const wMe=se({name:"TimePickerColumn",props:{prefixCls:{type:String,required:!0},list:{type:Array,required:!0},value:{type:[Number,String]},visible:{type:Boolean}},emits:["select"],setup(e,{emit:t}){const{visible:i,value:r}=yt(e),a=ie(new Map),n=ie();function s(o=!1){if(!n.value||ei(r?.value)||!i?.value)return;const l=a.value.get(r.value);l&&q2e(n.value,l.offsetTop,o?100:0)}return Vt([r,i],(o,[,l])=>{i.value!==l?hr(()=>{s()}):s(!0)}),xi(()=>{s()}),{refWrapper:n,refMap:a,onItemRef(o,l){a.value.set(l.value,o)},onItemClick(o){o.disabled||t("select",o.value)}}}}),xMe=["onClick"];function SMe(e,t,i,r,a,n){return N(),ee("div",{ref:"refWrapper",class:Y(`${e.prefixCls}-column`)},[ve("ul",null,[(N(!0),ee(Xt,null,Br(e.list,s=>(N(),ee("li",{key:s.value,ref:o=>{e.onItemRef(o,s)},class:Y([`${e.prefixCls}-cell`,{[`${e.prefixCls}-cell-disabled`]:s.disabled,[`${e.prefixCls}-cell-selected`]:s.selected}]),onClick:()=>{e.onItemClick(s)}},[ve("div",{class:Y(`${e.prefixCls}-cell-inner`)},Bt(s.label),3)],10,xMe))),128))])],2)}var CMe=We(wMe,[["render",SMe]]);function _Me(e){const{format:t,step:i,use12Hours:r,hideDisabledOptions:a,disabledHours:n,disabledMinutes:s,disabledSeconds:o,selectedHour:l,selectedMinute:u,selectedSecond:c,selectedAmpm:d,disabled:h}=yt(e),p=T(()=>{var y;const{hour:b=1}=i?.value||{},x=((y=n?.value)==null?void 0:y.call(n))||[];let S=[];for(let w=0;w<(r.value?12:24);w+=b)S.push(w);return r.value&&(S[0]=12),a.value&&x.length&&(S=S.filter(w=>x.indexOf(w)<0)),S.map(w=>({label:rd(w,2,"0"),value:w,selected:l.value===w,disabled:h?.value||x.includes(w)}))}),f=T(()=>{var y;const{minute:b=1}=i?.value||{},x=((y=s?.value)==null?void 0:y.call(s,l.value))||[];let S=[];for(let w=0;w<60;w+=b)S.push(w);return a.value&&x.length&&(S=S.filter(w=>x.indexOf(w)<0)),S.map(w=>({label:rd(w,2,"0"),value:w,selected:u.value===w,disabled:h?.value||x.includes(w)}))}),v=T(()=>{var y;const{second:b=1}=i?.value||{},x=((y=o?.value)==null?void 0:y.call(o,l.value,u.value))||[];let S=[];for(let w=0;w<60;w+=b)S.push(w);return a.value&&x.length&&(S=S.filter(w=>x.indexOf(w)<0)),S.map(w=>({label:rd(w,2,"0"),value:w,selected:c.value===w,disabled:h?.value||x.includes(w)}))}),m=["am","pm"],g=T(()=>{const y=BM(t.value).list.includes("A");return m.map(b=>({label:y?b.toUpperCase():b,value:b,selected:d.value===b,disabled:h?.value}))});return{hours:p,minutes:f,seconds:v,ampmList:g}}function xP(e){const{format:t,use12Hours:i,defaultFormat:r}=yt(e),a=T(()=>{let u=t?.value||r?.value;return(!u||!BM(u).list.length)&&(u=i?.value?"hh:mm:ss a":"HH:mm:ss"),u}),n=T(()=>BM(a.value)),s=T(()=>n.value.list),o=T(()=>n.value.use12Hours),l=T(()=>!!(i?.value||o.value));return{columns:s,use12Hours:l,format:a}}function HF(e){const t=i=>Y2e(i,{disabledHours:e.disabledHours,disabledMinutes:e.disabledMinutes,disabledSeconds:e.disabledSeconds});return i=>bi(i)?i.some(r=>t(r)):t(i)}const MMe=se({name:"TimePickerPanel",components:{TimeColumn:CMe,Button:un},props:{value:{type:Object},visible:{type:Boolean},format:{type:String,default:"HH:mm:ss"},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},hideFooter:{type:Boolean},isRange:{type:Boolean},disabled:{type:Boolean}},emits:{select:e=>Ks(e),confirm:e=>Ks(e)},setup(e,{emit:t}){const{value:i,visible:r,format:a,step:n,use12Hours:s,hideDisabledOptions:o,disabledHours:l,disabledMinutes:u,disabledSeconds:c,disabled:d}=yt(e),h=Se("timepicker"),{t:p}=Yr(),{columns:f,use12Hours:v,format:m}=xP(gt({format:a,use12Hours:s})),g=ie(i?.value),y=U=>{g.value=U};Vt([r,i],()=>{r.value&&y(i?.value)});const b=T(()=>{var U;const z=(U=g.value)==null?void 0:U.hour();return ei(z)||!v.value?z:z>12?z-12:z===0?12:z}),x=T(()=>{var U;return(U=g.value)==null?void 0:U.minute()}),S=T(()=>{var U;return(U=g.value)==null?void 0:U.second()}),w=T(()=>{var U;const z=(U=g.value)==null?void 0:U.hour();return!ei(z)&&z>=12?"pm":"am"}),{hours:E,minutes:M,seconds:P,ampmList:A}=_Me(gt({format:m,step:n,use12Hours:v,hideDisabledOptions:o,disabledHours:l,disabledMinutes:u,disabledSeconds:c,selectedHour:b,selectedMinute:x,selectedSecond:S,selectedAmpm:w,disabled:d})),k=HF(gt({disabledHours:l,disabledMinutes:u,disabledSeconds:c})),I=T(()=>k(g.value));function O(U){ei(U)||t("confirm",U)}function D(U){y(U),t("select",U)}function F(U,z="hour"){let B;const W=b.value||"00",R=x.value||"00",$=S.value||"00",q=w.value||"am";switch(z){case"hour":B=`${U}:${R}:${$}`;break;case"minute":B=`${W}:${U}:${$}`;break;case"second":B=`${W}:${R}:${U}`;break;case"ampm":B=`${W}:${R}:${$} ${U}`;break;default:B="00:00:00"}let Z="HH:mm:ss";v.value&&(Z="HH:mm:ss a",z!=="ampm"&&(B=`${B} ${q}`)),B=va(B,Z),D(B)}return{prefixCls:h,t:p,hours:E,minutes:M,seconds:P,ampmList:A,selectedValue:g,selectedHour:b,selectedMinute:x,selectedSecond:S,selectedAmpm:w,computedUse12Hours:v,confirmBtnDisabled:I,columns:f,onSelect:F,onSelectNow(){const U=va(new Date);D(U)},onConfirm(){O(g.value)}}}});function EMe(e,t,i,r,a,n){const s=be("TimeColumn"),o=be("Button");return N(),ee(Xt,null,[ve("div",{class:Y(e.prefixCls)},[e.columns.includes("H")||e.columns.includes("h")?(N(),De(s,{key:0,value:e.selectedHour,list:e.hours,"prefix-cls":e.prefixCls,visible:e.visible,onSelect:t[0]||(t[0]=l=>{e.onSelect(l,"hour")})},null,8,["value","list","prefix-cls","visible"])):Me("v-if",!0),e.columns.includes("m")?(N(),De(s,{key:1,value:e.selectedMinute,list:e.minutes,"prefix-cls":e.prefixCls,visible:e.visible,onSelect:t[1]||(t[1]=l=>{e.onSelect(l,"minute")})},null,8,["value","list","prefix-cls","visible"])):Me("v-if",!0),e.columns.includes("s")?(N(),De(s,{key:2,value:e.selectedSecond,list:e.seconds,"prefix-cls":e.prefixCls,visible:e.visible,onSelect:t[2]||(t[2]=l=>{e.onSelect(l,"second")})},null,8,["value","list","prefix-cls","visible"])):Me("v-if",!0),e.computedUse12Hours?(N(),De(s,{key:3,value:e.selectedAmpm,list:e.ampmList,"prefix-cls":e.prefixCls,visible:e.visible,onSelect:t[3]||(t[3]=l=>{e.onSelect(l,"ampm")})},null,8,["value","list","prefix-cls","visible"])):Me("v-if",!0)],2),e.$slots["extra-footer"]?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-footer-extra-wrapper`)},[ye(e.$slots,"extra-footer")],2)):Me("v-if",!0),e.hideFooter?Me("v-if",!0):(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-footer-btn-wrapper`)},[e.isRange?Me("v-if",!0):(N(),De(o,{key:0,size:"mini",onClick:e.onSelectNow},{default:He(()=>[ti(Bt(e.t("datePicker.now")),1)]),_:1},8,["onClick"])),_(o,{type:"primary",size:"mini",disabled:e.confirmBtnDisabled||!e.selectedValue,onClick:e.onConfirm},{default:He(()=>[ti(Bt(e.t("datePicker.ok")),1)]),_:1},8,["disabled","onClick"])],2))],64)}var cb=We(MMe,[["render",EMe]]);const AMe=se({name:"IconCalendar",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-calendar`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),PMe=["stroke-width","stroke-linecap","stroke-linejoin"],TMe=ve("path",{d:"M7 22h34M14 5v8m20-8v8M8 41h32a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v30a1 1 0 0 0 1 1Z"},null,-1),kMe=[TMe];function OMe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},kMe,14,PMe)}var $S=We(AMe,[["render",OMe]]);const SP=Object.assign($S,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+$S.name,$S)}}),DMe=se({name:"IconClockCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-clock-circle`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),IMe=["stroke-width","stroke-linecap","stroke-linejoin"],LMe=ve("path",{d:"M24 14v10h9.5m8.5 0c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),BMe=[LMe];function zMe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},BMe,14,IMe)}var US=We(DMe,[["render",zMe]]);const GF=Object.assign(US,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+US.name,US)}});var RMe=Object.defineProperty,NMe=Object.defineProperties,VMe=Object.getOwnPropertyDescriptors,BL=Object.getOwnPropertySymbols,FMe=Object.prototype.hasOwnProperty,jMe=Object.prototype.propertyIsEnumerable,zL=(e,t,i)=>t in e?RMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,x0=(e,t)=>{for(var i in t||(t={}))FMe.call(t,i)&&zL(e,i,t[i]);if(BL)for(var i of BL(t))jMe.call(t,i)&&zL(e,i,t[i]);return e},qF=(e,t)=>NMe(e,VMe(t));const YF=6,RM=7,$Me=YF*RM;function UMe(e){return{label:e.date(),value:e}}const WMe=se({name:"DatePanel",components:{PanelHeader:m1,PanelBody:v1,PanelWeekList:bMe,TimePanel:cb,IconCalendar:SP,IconClockCircle:GF},props:{isRange:{type:Boolean},value:{type:Object},rangeValues:{type:Array},headerValue:{type:Object,required:!0},footerValue:{type:Object},timePickerValue:{type:Object},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},isSameTime:{type:Function},mode:{type:String,default:"date"},showTime:{type:Boolean},timePickerProps:{type:Object},currentView:{type:String},dateRender:{type:Function},disabled:{type:Boolean},onHeaderLabelClick:{type:Function}},emits:["select","time-picker-select","cell-mouse-enter","current-view-change","update:currentView"],setup(e,{emit:t}){const{isRange:i,headerValue:r,footerValue:a,dayStartOfWeek:n,isSameTime:s,mode:o,showTime:l,currentView:u,disabledTime:c}=yt(e),d=Jm(),h=T(()=>o?.value==="week"),p=T(()=>Se(h.value?"panel-week":"panel-date")),f=Se("picker"),[v,m]=ja("date",gt({value:u})),g=T(()=>l.value&&i.value),y=T(()=>!l.value||!g.value||v.value==="date"),b=T(()=>l.value&&(!g.value||v.value==="time")),x=T(()=>[p.value,{[`${p.value}-with-view-tabs`]:g.value}]),S=T(()=>r.value.format("YYYY-MM")),w=T(()=>{var O;return l.value&&((O=c?.value)==null?void 0:O.call(c,ys(a?.value||An())))||{}}),E=T(()=>{const O=[0,1,2,3,4,5,6],D=Math.max(n.value%7,0);return[...O.slice(D),...O.slice(0,D)]}),M=T(()=>{const O=ka.startOf(r.value,"month"),D=O.day(),F=O.daysInMonth(),U=E.value.indexOf(D),z=lp($Me);for(let W=0;W<z.length;W++)z[W]=qF(x0({},UMe(ka.add(O,W-U,"day"))),{isPrev:W<U,isNext:W>U+F-1});return lp(YF).map((W,R)=>{const $=z.slice(R*RM,(R+1)*RM);if(h.value){const q=$[0].value;$.unshift({label:q.week(),value:q})}return $})}),P=T(()=>s?.value||((O,D)=>O.isSame(D,"day")));function A(O){t("select",O.value)}function k(O){t("time-picker-select",O)}function I(O){t("cell-mouse-enter",O.value)}return{prefixCls:p,classNames:x,pickerPrefixCls:f,headerTitle:S,rows:M,weekList:T(()=>h.value?[-1,...E.value]:E.value),mergedIsSameTime:P,disabledTimeProps:w,onCellClick:A,onCellMouseEnter:I,onTimePanelSelect:k,showViewTabs:g,showDateView:y,showTimeView:b,changeViewTo:O=>{t("current-view-change",O),t("update:currentView",O),m(O)},datePickerT:d}}});function HMe(e,t,i,r,a,n){const s=be("PanelHeader"),o=be("PanelWeekList"),l=be("PanelBody"),u=be("TimePanel"),c=be("IconCalendar"),d=be("IconClockCircle");return N(),ee("div",{class:Y(e.classNames)},[e.showDateView?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-inner`)},[_(s,it(qF(x0({},e.headerOperations),{icons:e.headerIcons}),{"prefix-cls":e.pickerPrefixCls,title:e.headerTitle,mode:e.mode,value:e.headerValue,"on-label-click":e.onHeaderLabelClick}),null,16,["prefix-cls","title","mode","value","on-label-click"]),_(o,{"prefix-cls":e.pickerPrefixCls,"week-list":e.weekList},null,8,["prefix-cls","week-list"]),_(l,{mode:e.mode,"prefix-cls":e.pickerPrefixCls,rows:e.rows,value:e.isRange?void 0:e.value,"range-values":e.rangeValues,"disabled-date":e.disabledDate,"is-same-time":e.mergedIsSameTime,"date-render":e.dateRender,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter},null,8,["mode","prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)):Me("v-if",!0),e.showTimeView?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-timepicker`)},[ve("header",{class:Y(`${e.prefixCls}-timepicker-title`)},Bt(e.datePickerT("datePicker.selectTime")),3),_(u,it(x0(x0({},e.timePickerProps),e.disabledTimeProps),{"hide-footer":"",value:e.value||e.isRange?e.timePickerValue:void 0,disabled:e.disabled,onSelect:e.onTimePanelSelect}),null,16,["value","disabled","onSelect"])],2)):Me("v-if",!0),e.showViewTabs?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-footer`)},[ve("div",{class:Y(`${e.prefixCls}-view-tabs`)},[ve("div",{class:Y([`${e.prefixCls}-view-tab-pane`,{[`${e.prefixCls}-view-tab-pane-active`]:e.showDateView}]),onClick:t[0]||(t[0]=()=>e.changeViewTo("date"))},[_(c),ve("span",{class:Y(`${e.prefixCls}-view-tab-pane-text`)},Bt(e.footerValue&&e.footerValue.format("YYYY-MM-DD")),3)],2),ve("div",{class:Y([`${e.prefixCls}-view-tab-pane`,{[`${e.prefixCls}-view-tab-pane-active`]:e.showTimeView}]),onClick:t[1]||(t[1]=()=>e.changeViewTo("time"))},[_(d),ve("span",{class:Y(`${e.prefixCls}-view-tab-pane-text`)},Bt(e.timePickerValue&&e.timePickerValue.format("HH:mm:ss")),3)],2)],2)],2)):Me("v-if",!0)],2)}var CP=We(WMe,[["render",HMe]]);const GMe=se({name:"WeekPanel",components:{DatePanel:CP},props:{dayStartOfWeek:{type:Number,default:0}},emits:["select","cell-mouse-enter"],setup(e,{emit:t}){return Yr(),{isSameTime:(r,a)=>ka.isSameWeek(r,a,e.dayStartOfWeek),onSelect:r=>{const a=ka.startOfWeek(r,e.dayStartOfWeek);t("select",a)},onCellMouseEnter:r=>{const a=ka.startOfWeek(r,e.dayStartOfWeek);t("cell-mouse-enter",a)}}}});function qMe(e,t,i,r,a,n){const s=be("DatePanel");return N(),De(s,it(e.$attrs,{mode:"week","is-week":"","day-start-of-week":e.dayStartOfWeek,"is-same-time":e.isSameTime,onSelect:e.onSelect,onCellMouseEnter:e.onCellMouseEnter}),null,16,["day-start-of-week","is-same-time","onSelect","onCellMouseEnter"])}var XF=We(GMe,[["render",qMe]]),YMe=Object.defineProperty,XMe=Object.defineProperties,KMe=Object.getOwnPropertyDescriptors,RL=Object.getOwnPropertySymbols,ZMe=Object.prototype.hasOwnProperty,QMe=Object.prototype.propertyIsEnumerable,NL=(e,t,i)=>t in e?YMe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,JMe=(e,t)=>{for(var i in t||(t={}))ZMe.call(t,i)&&NL(e,i,t[i]);if(RL)for(var i of RL(t))QMe.call(t,i)&&NL(e,i,t[i]);return e},eEe=(e,t)=>XMe(e,KMe(t));const tEe=["January","February","March","April","May","June","July","August","September","October","November","December"],iEe=12,rEe=4,VL=3,aEe=se({name:"MonthPanel",components:{PanelHeader:m1,PanelBody:v1},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function},onHeaderLabelClick:{type:Function},abbreviation:{type:Boolean,default:!0}},emits:["select","cell-mouse-enter"],setup(e,{emit:t}){const i=Jm(),{headerValue:r}=yt(e),a=T(()=>Se("panel-month")),n=Se("picker"),s=T(()=>r.value.format("YYYY")),o=T(()=>{const d=r.value.year(),h=e.abbreviation?"short":"long",p=lp(iEe).map((v,m)=>({label:i(`datePicker.month.${h}.${tEe[m]}`),value:va(`${d}-${m+1}`,"YYYY-M")}));return lp(rEe).map((v,m)=>p.slice(m*VL,(m+1)*VL))}),l=(d,h)=>d.isSame(h,"month");function u(d){t("select",d.value)}function c(d){t("cell-mouse-enter",d.value)}return{prefixCls:a,pickerPrefixCls:n,headerTitle:s,rows:o,isSameTime:l,onCellClick:u,onCellMouseEnter:c}}});function nEe(e,t,i,r,a,n){const s=be("PanelHeader"),o=be("PanelBody");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y(`${e.prefixCls}-inner`)},[_(s,it(eEe(JMe({},e.headerOperations),{icons:e.headerIcons}),{"prefix-cls":e.pickerPrefixCls,title:e.headerTitle,mode:"month",value:e.headerValue,"on-label-click":e.onHeaderLabelClick}),null,16,["prefix-cls","title","value","on-label-click"]),_(o,{mode:"month","prefix-cls":e.pickerPrefixCls,rows:e.rows,value:e.value,"range-values":e.rangeValues,"disabled-date":e.disabledDate,"is-same-time":e.isSameTime,"date-render":e.dateRender,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var KF=We(aEe,[["render",nEe]]),sEe=Object.defineProperty,oEe=Object.defineProperties,lEe=Object.getOwnPropertyDescriptors,FL=Object.getOwnPropertySymbols,uEe=Object.prototype.hasOwnProperty,cEe=Object.prototype.propertyIsEnumerable,jL=(e,t,i)=>t in e?sEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,dEe=(e,t)=>{for(var i in t||(t={}))uEe.call(t,i)&&jL(e,i,t[i]);if(FL)for(var i of FL(t))cEe.call(t,i)&&jL(e,i,t[i]);return e},hEe=(e,t)=>oEe(e,lEe(t));const NM=4,S0=3,pEe=NM*S0,WS=10,fEe=se({name:"YearPanel",components:{PanelHeader:m1,PanelBody:v1},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function}},emits:["select","cell-mouse-enter"],setup(e,{emit:t}){const{headerValue:i}=yt(e),r=T(()=>Se("panel-year")),a=Se("picker"),n=T(()=>{const c=Math.floor(i.value.year()/WS)*WS-1,d=lp(pEe).map((p,f)=>({label:c+f,value:va(`${c+f}`,"YYYY"),isPrev:f<1,isNext:f>WS}));return lp(NM).map((p,f)=>d.slice(f*S0,(f+1)*S0))}),s=T(()=>`${n.value[0][1].label}-${n.value[NM-1][S0-1].label}`),o=(c,d)=>c.isSame(d,"year");function l(c){t("select",c.value)}function u(c){t("cell-mouse-enter",c.value)}return{prefixCls:r,pickerPrefixCls:a,headerTitle:s,rows:n,isSameTime:o,onCellClick:l,onCellMouseEnter:u}}});function mEe(e,t,i,r,a,n){const s=be("PanelHeader"),o=be("PanelBody");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y(`${e.prefixCls}-inner`)},[_(s,it(hEe(dEe({},e.headerOperations),{icons:e.headerIcons}),{"prefix-cls":e.pickerPrefixCls,title:e.headerTitle}),null,16,["prefix-cls","title"]),_(o,{mode:"year","prefix-cls":e.pickerPrefixCls,rows:e.rows,value:e.value,"range-values":e.rangeValues,"disabled-date":e.disabledDate,"is-same-time":e.isSameTime,"date-render":e.dateRender,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var ZF=We(fEe,[["render",mEe]]),vEe=Object.defineProperty,gEe=Object.defineProperties,yEe=Object.getOwnPropertyDescriptors,$L=Object.getOwnPropertySymbols,bEe=Object.prototype.hasOwnProperty,wEe=Object.prototype.propertyIsEnumerable,UL=(e,t,i)=>t in e?vEe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xEe=(e,t)=>{for(var i in t||(t={}))bEe.call(t,i)&&UL(e,i,t[i]);if($L)for(var i of $L(t))wEe.call(t,i)&&UL(e,i,t[i]);return e},SEe=(e,t)=>gEe(e,yEe(t));const CEe=se({name:"QuarterPanel",components:{PanelHeader:m1,PanelBody:v1},props:{headerValue:{type:Object,required:!0},headerOperations:{type:Object,default:()=>({})},headerIcons:{type:Object,default:()=>({})},value:{type:Object},disabledDate:{type:Function},rangeValues:{type:Array},dateRender:{type:Function},onHeaderLabelClick:{type:Function}},emits:["select","cell-mouse-enter"],setup(e,{emit:t}){const{headerValue:i}=yt(e),r=T(()=>Se("panel-quarter")),a=Se("picker"),n=T(()=>i.value.format("YYYY")),s=T(()=>{const c=i.value.year();return[[1,2,3,4].map(d=>({label:`Q${d}`,value:va(`${c}-${rd((d-1)*3+1,2,"0")}-01`)}))]}),o=(c,d)=>c.isSame(d,"month")||c.isSame(d,"year")&&Math.floor(c.month()/3)===Math.floor(d.month()/3);function l(c){t("select",c.value)}function u(c){t("cell-mouse-enter",c.value)}return{prefixCls:r,pickerPrefixCls:a,headerTitle:n,rows:s,isSameTime:o,onCellClick:l,onCellMouseEnter:u}}});function _Ee(e,t,i,r,a,n){const s=be("PanelHeader"),o=be("PanelBody");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y(`${e.prefixCls}-inner`)},[_(s,it(SEe(xEe({},e.headerOperations),{icons:e.headerIcons}),{"prefix-cls":e.pickerPrefixCls,title:e.headerTitle,mode:"quarter",value:e.headerValue,"on-label-click":e.onHeaderLabelClick}),null,16,["prefix-cls","title","value","on-label-click"]),_(o,{mode:"quarter","prefix-cls":e.pickerPrefixCls,rows:e.rows,value:e.value,"range-values":e.rangeValues,"disabled-date":e.disabledDate,"is-same-time":e.isSameTime,"date-render":e.dateRender,onCellClick:e.onCellClick,onCellMouseEnter:e.onCellMouseEnter},null,8,["prefix-cls","rows","value","range-values","disabled-date","is-same-time","date-render","onCellClick","onCellMouseEnter"])],2)],2)}var QF=We(CEe,[["render",_Ee]]);const MEe=se({name:"IconLink",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-link`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),EEe=["stroke-width","stroke-linecap","stroke-linejoin"],AEe=ve("path",{d:"m14.1 25.414-4.95 4.95a6 6 0 0 0 8.486 8.485l8.485-8.485a6 6 0 0 0 0-8.485m7.779.707 4.95-4.95a6 6 0 1 0-8.486-8.485l-8.485 8.485a6 6 0 0 0 0 8.485"},null,-1),PEe=[AEe];function TEe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},PEe,14,EEe)}var HS=We(MEe,[["render",TEe]]);const kEe=Object.assign(HS,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+HS.name,HS)}}),OEe=se({name:"Link",components:{IconLink:kEe,IconLoading:$n},props:{href:String,status:{type:String,default:"normal"},hoverable:{type:Boolean,default:!0},icon:Boolean,loading:Boolean,disabled:Boolean},emits:{click:e=>!0},setup(e,{slots:t,emit:i}){const r=Se("link"),a=FF(e,t,"icon"),n=o=>{if(e.disabled||e.loading){o.preventDefault();return}i("click",o)};return{cls:T(()=>[r,`${r}-status-${e.status}`,{[`${r}-disabled`]:e.disabled,[`${r}-loading`]:e.loading,[`${r}-hoverless`]:!e.hoverable,[`${r}-with-icon`]:e.loading||a.value}]),prefixCls:r,showIcon:a,handleClick:n}}}),DEe=["href"];function IEe(e,t,i,r,a,n){const s=be("icon-loading"),o=be("icon-link");return N(),ee("a",{href:e.disabled?void 0:e.href,class:Y(e.cls),onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[e.loading||e.showIcon?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[e.loading?(N(),De(s,{key:0})):ye(e.$slots,"icon",{key:1},()=>[_(o)])],2)):Me("v-if",!0),ye(e.$slots,"default")],10,DEe)}var GS=We(OEe,[["render",IEe]]);const JF=Object.assign(GS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+GS.name,GS)}}),LEe=se({name:"PanelFooter",components:{Link:JF,Button:un},props:{prefixCls:{type:String,required:!0},showTodayBtn:{type:Boolean},showConfirmBtn:{type:Boolean},confirmBtnDisabled:{type:Boolean}},emits:["today-btn-click","confirm-btn-click"],setup(e,{emit:t}){return{datePickerT:Jm(),onTodayClick:()=>{t("today-btn-click")},onConfirmBtnClick:()=>{t("confirm-btn-click")}}}});function BEe(e,t,i,r,a,n){const s=be("Link"),o=be("Button");return N(),ee("div",{class:Y(`${e.prefixCls}-footer`)},[e.$slots.extra?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-footer-extra-wrapper`)},[ye(e.$slots,"extra")],2)):Me("v-if",!0),e.showTodayBtn?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-footer-now-wrapper`)},[_(s,{onClick:e.onTodayClick},{default:He(()=>[ti(Bt(e.datePickerT("datePicker.today")),1)]),_:1},8,["onClick"])],2)):Me("v-if",!0),e.$slots.btn||e.showConfirmBtn?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-footer-btn-wrapper`)},[ye(e.$slots,"btn"),e.showConfirmBtn?(N(),De(o,{key:0,class:Y(`${e.prefixCls}-btn-confirm`),type:"primary",size:"mini",disabled:e.confirmBtnDisabled,onClick:e.onConfirmBtnClick},{default:He(()=>[ti(Bt(e.datePickerT("datePicker.ok")),1)]),_:1},8,["class","disabled","onClick"])):Me("v-if",!0)],2)):Me("v-if",!0)],2)}var ej=We(LEe,[["render",BEe]]);function tj(e){const{mode:t}=yt(e),i=T(()=>({date:1,week:1,year:10*12,quarter:12,month:12})[t.value]),r=T(()=>["year"].includes(t.value)?10*12:12);return{span:i,superSpan:r}}function db(e){const{mode:t,value:i,defaultValue:r,selectedValue:a,format:n,onChange:s}=yt(e),o=T(()=>t?.value||"date"),{span:l,superSpan:u}=tj(gt({mode:o})),c=(S,w)=>{const E=o.value==="date"||o.value==="week"?"M":"y";return S.isSame(w,E)},d=T(()=>Is(i?.value,n.value)),h=T(()=>Is(r?.value,n.value)),p=ie(h.value||An()),f=T(()=>d.value||p.value),v=S=>{S&&(p.value=S)},m=(S,w=!0)=>{var E;S&&(w&&!c(f.value,S)&&((E=s?.value)==null||E.call(s,S)),v(S))};a?.value&&v(a.value),Vt(()=>a?.value,S=>{m(S)});function g(){return a?.value||h.value||An()}function y(S=!0){const w=g();S?m(w):v(w)}const b=T(()=>l.value!==u.value),x=T(()=>({onSuperPrev:()=>{m(ka.subtract(f.value,u.value,"M"))},onPrev:b.value?()=>{m(ka.subtract(f.value,l.value,"M"))}:void 0,onNext:b.value?()=>{m(ka.add(f.value,l.value,"M"))}:void 0,onSuperNext:()=>{m(ka.add(f.value,u.value,"M"))}}));return{headerValue:f,setHeaderValue:m,headerOperations:x,resetHeaderValue:y,getDefaultLocalValue:g}}const zEe=se({name:"DatePikerPanel",components:{DatePanel:CP,PanelShortcuts:UF,PanelFooter:ej,WeekPanel:XF,MonthPanel:KF,YearPanel:ZF,QuarterPanel:QF,RenderFunction:bu},props:{mode:{type:String},headerMode:{type:String},prefixCls:{type:String,required:!0},value:{type:Object},headerValue:{type:Object,required:!0},timePickerValue:{type:Object},showTime:{type:Boolean},showConfirmBtn:{type:Boolean},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},format:{type:String,required:!0},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},timePickerProps:{type:Object},extra:{type:Function},dateRender:{type:Function},hideTrigger:{type:Boolean},confirmBtnDisabled:{type:Boolean},showNowBtn:{type:Boolean},headerIcons:{type:Object,default:()=>({})},headerOperations:{type:Object},abbreviation:{type:Boolean}},emits:["cell-click","time-picker-select","shortcut-click","shortcut-mouse-enter","shortcut-mouse-leave","confirm","today-btn-click","header-label-click","header-select","month-header-click"],setup(e,{emit:t}){const{prefixCls:i,shortcuts:r,shortcutsPosition:a,format:n,value:s,disabledDate:o,hideTrigger:l,showNowBtn:u,dateRender:c,showConfirmBtn:d,headerValue:h,headerIcons:p,headerOperations:f,headerMode:v}=yt(e),m=T(()=>!!(r.value&&r.value.length)),g=T(()=>u.value&&d.value&&!m.value),y=T(()=>g.value||m.value),b=T(()=>y.value&&a.value==="left"),x=T(()=>y.value&&a.value==="right"),S=T(()=>y.value&&a.value==="bottom"),w=T(()=>[`${i.value}-container`,{[`${i.value}-container-panel-only`]:l.value,[`${i.value}-container-shortcuts-placement-left`]:b.value,[`${i.value}-container-shortcuts-placement-right`]:x.value}]),E=T(()=>s?.value||An()),{headerValue:M,setHeaderValue:P,headerOperations:A}=db(gt({mode:v,format:n}));Vt(h,G=>{P(G)});function k(G){const{value:X}=G;return Is(Zt(X)?X():X,G.format||n.value)}function I(G){t("shortcut-click",k(G),G)}function O(G){t("shortcut-mouse-enter",k(G))}function D(G){t("shortcut-mouse-leave",k(G))}function F(G){t("cell-click",G)}function U(G){t("time-picker-select",G)}function z(){t("today-btn-click",An())}function B(){t("confirm")}function W(G){t("header-label-click",G)}function R(G){t("header-select",G)}function $(){t("month-header-click")}const q=gt({prefixCls:i,shortcuts:r,showNowBtn:g,onItemClick:I,onItemMouseEnter:O,onItemMouseLeave:D,onNowClick:z}),Z=gt({value:s,headerValue:h,headerIcons:p,headerOperations:f,disabledDate:o,dateRender:c,onSelect:F,onHeaderLabelClick:W});return{classNames:w,showShortcutsInLeft:b,showShortcutsInRight:x,showShortcutsInBottom:S,shortcutsProps:q,commonPanelProps:Z,footerValue:E,onTodayBtnClick:z,onConfirmBtnClick:B,onTimePickerSelect:U,onHeaderPanelSelect:R,headerPanelHeaderValue:M,headerPanelHeaderOperations:A,onMonthHeaderLabelClick:$}}});function REe(e,t,i,r,a,n){const s=be("PanelShortcuts"),o=be("YearPanel"),l=be("MonthPanel"),u=be("WeekPanel"),c=be("QuarterPanel"),d=be("DatePanel"),h=be("RenderFunction"),p=be("PanelFooter");return N(),ee("div",{class:Y(e.classNames)},[e.showShortcutsInLeft?(N(),De(s,br(it({key:0},e.shortcutsProps)),null,16)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-panel-wrapper`)},[e.headerMode?(N(),ee(Xt,{key:0},[e.headerMode==="year"?(N(),De(o,{key:0,"header-value":e.headerPanelHeaderValue,"header-icons":e.headerIcons,"header-operations":e.headerPanelHeaderOperations,onSelect:e.onHeaderPanelSelect},null,8,["header-value","header-icons","header-operations","onSelect"])):e.headerMode==="month"?(N(),De(l,{key:1,"header-value":e.headerPanelHeaderValue,"header-icons":e.headerIcons,"header-operations":e.headerPanelHeaderOperations,abbreviation:e.abbreviation,onSelect:e.onHeaderPanelSelect,onHeaderLabelClick:e.onMonthHeaderLabelClick},null,8,["header-value","header-icons","header-operations","abbreviation","onSelect","onHeaderLabelClick"])):Me("v-if",!0)],2112)):(N(),ee(Xt,{key:1},[e.mode==="week"?(N(),De(u,it({key:0},e.commonPanelProps,{"day-start-of-week":e.dayStartOfWeek}),null,16,["day-start-of-week"])):e.mode==="month"?(N(),De(l,it({key:1,abbreviation:e.abbreviation},e.commonPanelProps),null,16,["abbreviation"])):e.mode==="year"?(N(),De(o,br(it({key:2},e.commonPanelProps)),null,16)):e.mode==="quarter"?(N(),De(c,br(it({key:3},e.commonPanelProps)),null,16)):(N(),De(d,it({key:4},e.commonPanelProps,{mode:"date","show-time":e.showTime,"time-picker-props":e.timePickerProps,"day-start-of-week":e.dayStartOfWeek,"footer-value":e.footerValue,"time-picker-value":e.timePickerValue,"disabled-time":e.disabledTime,onTimePickerSelect:e.onTimePickerSelect}),null,16,["show-time","time-picker-props","day-start-of-week","footer-value","time-picker-value","disabled-time","onTimePickerSelect"])),_(p,{"prefix-cls":e.prefixCls,"show-today-btn":e.showNowBtn&&!(e.showConfirmBtn||e.showShortcutsInBottom),"show-confirm-btn":e.showConfirmBtn,"confirm-btn-disabled":e.confirmBtnDisabled,onTodayBtnClick:e.onTodayBtnClick,onConfirmBtnClick:e.onConfirmBtnClick},$r({_:2},[e.extra?{name:"extra",fn:He(()=>[e.extra?(N(),De(h,{key:0,"render-func":e.extra},null,8,["render-func"])):Me("v-if",!0)])}:void 0,e.showShortcutsInBottom?{name:"btn",fn:He(()=>[_(s,br(Ea(e.shortcutsProps)),null,16)])}:void 0]),1032,["prefix-cls","show-today-btn","show-confirm-btn","confirm-btn-disabled","onTodayBtnClick","onConfirmBtnClick"])],64))],2),e.showShortcutsInRight?(N(),De(s,br(it({key:1},e.shortcutsProps)),null,16)):Me("v-if",!0)],2)}var NEe=We(zEe,[["render",REe]]);function VEe(e="date",t=!1){switch(e){case"date":return t?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";case"week":return"gggg-wo";case"quarter":return"YYYY-[Q]Q";default:return"YYYY-MM-DD"}}function FEe(e="date",t=!1){switch(e){case"date":return t?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD";case"month":return"YYYY-MM";case"year":return"YYYY";case"week":return"YYYY-MM-DD";case"quarter":return"YYYY-MM";default:return"YYYY-MM-DD"}}function ij(e){const{format:t,mode:i,showTime:r,valueFormat:a}=yt(e),n=T(()=>!Zt(t?.value)&&t?.value||VEe(i?.value,r?.value)),s=T(()=>a?.value||FEe(i?.value,r?.value)),o=T(()=>["timestamp","Date"].includes(s.value)?n.value:s.value);return{format:n,valueFormat:s,parseValueFormat:o}}function rj(e){const{mode:t,showTime:i,disabledDate:r,disabledTime:a,isRange:n}=yt(e),s=T(()=>t?.value==="date"&&i?.value),o=T(()=>(c,d)=>{if(!r?.value)return!1;const h=ys(c);return n?.value?r.value(h,d):r.value(h)}),l=(c,d)=>(d?.()||[]).includes(c),u=T(()=>(c,d)=>{if(!s.value||!a?.value)return!1;const h=ys(c),p=n?.value?a.value(h,d):a.value(h);return l(c.hour(),p.disabledHours)||l(c.minute(),p.disabledMinutes)||l(c.second(),p.disabledSeconds)});return function(d,h){return d&&(o.value(d,h||"start")||u.value(d,h||"start"))}}const ad=(e,t)=>{if(!e||!t)return;t=t.replace(/\[(\w+)\]/g,".$1");const i=t.split(".");if(i.length===0)return;let r=e;for(let a=0;a<i.length;a++){if(!ki(r)&&!bi(r)||!i[a])return;if(a!==i.length-1)r=r[i[a]];else return r[i[a]]}},hb=(e,t,i,{addPath:r}={})=>{if(!e||!t)return;t=t.replace(/\[(\w+)\]/g,".$1");const a=t.split(".");if(a.length===0)return;let n=e;for(let s=0;s<a.length;s++){if(!ki(n)&&!bi(n)||!a[s])return;s!==a.length-1?(r&&ei(n[a[s]])&&(n[a[s]]={}),n=n[a[s]]):n[a[s]]=i}};function aj(e){const{locale:t}=yt(e),{locale:i,t:r}=Yr();va.locale(i.value.toLowerCase());const a=(n,...s)=>{const o=n.startsWith("datePicker.")?n.split(".").slice(1).join("."):n;return ad(t?.value||{},o)||r(n,...s)};return dr($F,{datePickerT:a}),a}function VM(e){const{timePickerProps:t,selectedValue:i}=yt(e),r=T(()=>{var d;return(d=t?.value)==null?void 0:d.format}),a=T(()=>{var d;return!!((d=t?.value)!=null&&d.use12Hours)}),{format:n}=xP(gt({format:r,use12Hours:a})),s=T(()=>{var d;return Is((d=t?.value)==null?void 0:d.defaultValue,n.value)}),o=()=>i?.value||s.value||An(),l=ie(o());function u(d){d&&(l.value=d)}function c(){l.value=o()}return Vt(i,d=>{u(d)}),[l,u,c]}function nj(e,t){return t==="timestamp"?e.toDate().getTime():t==="Date"?e.toDate():e.format(t)}function jEe(e){const{format:t}=yt(e);return i=>nj(i,t.value)}function qS(e,t){return e.map(i=>i?nj(i,t):void 0)}var $Ee=Object.defineProperty,UEe=Object.defineProperties,WEe=Object.getOwnPropertyDescriptors,WL=Object.getOwnPropertySymbols,HEe=Object.prototype.hasOwnProperty,GEe=Object.prototype.propertyIsEnumerable,HL=(e,t,i)=>t in e?$Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,pb=(e,t)=>{for(var i in t||(t={}))HEe.call(t,i)&&HL(e,i,t[i]);if(WL)for(var i of WL(t))GEe.call(t,i)&&HL(e,i,t[i]);return e},GL=(e,t)=>UEe(e,WEe(t));const qEe=se({name:"Picker",components:{DateInput:jF,Trigger:$a,PickerPanel:NEe,IconCalendar:SP},inheritAttrs:!1,props:{locale:{type:Object},hideTrigger:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},size:{type:String},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean},placeholder:{type:String},disabled:{type:Boolean},disabledDate:{type:Function},disabledTime:{type:Function},pickerValue:{type:[Object,String,Number]},defaultPickerValue:{type:[Object,String,Number]},popupContainer:{type:[String,Object]},mode:{type:String,default:"date"},format:{type:[String,Function]},valueFormat:{type:String},previewShortcut:{type:Boolean,default:!0},showConfirmBtn:{type:Boolean},showTime:{type:Boolean},timePickerProps:{type:Object},showNowBtn:{type:Boolean,default:!0},dayStartOfWeek:{type:Number,default:0},modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},disabledInput:{type:Boolean,default:!1},abbreviation:{type:Boolean,default:!0}},emits:{change:(e,t,i)=>!0,"update:modelValue":e=>!0,select:(e,t,i)=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0,ok:(e,t,i)=>!0,clear:()=>!0,"select-shortcut":e=>!0,"picker-value-change":(e,t,i)=>!0,"update:pickerValue":e=>!0},setup(e,{emit:t,slots:i}){const{mode:r,modelValue:a,defaultValue:n,format:s,valueFormat:o,placeholder:l,popupVisible:u,defaultPopupVisible:c,disabled:d,showTime:h,timePickerProps:p,disabledDate:f,disabledTime:v,readonly:m,locale:g,pickerValue:y,defaultPickerValue:b,dayStartOfWeek:x,previewShortcut:S,showConfirmBtn:w}=yt(e),{locale:E}=Yr();on(()=>{vF(E.value,x.value)});const{mergedDisabled:M,eventHandlers:P}=Wr({disabled:d}),A=aj(gt({locale:g})),k=Se("picker"),I=ie(),O=T(()=>l?.value||{date:A("datePicker.placeholder.date"),month:A("datePicker.placeholder.month"),year:A("datePicker.placeholder.year"),week:A("datePicker.placeholder.week"),quarter:A("datePicker.placeholder.quarter")}[r.value]||A("datePicker.placeholder.date")),{format:D,valueFormat:F,parseValueFormat:U}=ij(gt({format:s,mode:r,showTime:h,valueFormat:o})),z=T(()=>s&&Zt(s.value)?Rt=>{var Ci;return(Ci=s.value)==null?void 0:Ci.call(s,ys(Rt))}:D.value),B=jEe(gt({format:F})),W=rj(gt({mode:r,disabledDate:f,disabledTime:v,showTime:h})),R=T(()=>h.value||w.value),$=T(()=>R.value&&(!de.value||W(de.value))),q=T(()=>r.value==="date"&&h.value),{value:Z,setValue:G}=U2e(gt({modelValue:a,defaultValue:n,format:U})),[X,J]=Mn(),[pe,fe]=Mn(),de=T(()=>{var Rt;return(Rt=X.value)!=null?Rt:Z.value}),ge=T(()=>{var Rt,Ci;return(Ci=(Rt=pe.value)!=null?Rt:X.value)!=null?Ci:Z.value}),[me,ke]=Mn(),[ce,le]=ja(c.value,gt({value:u})),xe=Rt=>{ce.value!==Rt&&(le(Rt),t("popup-visible-change",Rt),t("update:popupVisible",Rt))},{headerValue:Ne,setHeaderValue:pt,headerOperations:at,resetHeaderValue:Oe}=db(gt({mode:r,value:y,defaultValue:b,selectedValue:ge,format:U,onChange:Rt=>{const Ci=B(Rt),or=ll(Rt,U.value),ta=ys(Rt);t("picker-value-change",Ci,ta,or),t("update:pickerValue",Ci)}})),[Ye,,xt]=VM(gt({timePickerProps:p,selectedValue:ge})),ne=T(()=>!m.value&&!Zt(z.value)),K=ie();Vt(ce,Rt=>{J(void 0),fe(void 0),K.value=void 0,Rt&&(Oe(),xt()),Rt||ke(void 0)});function ze(Rt,Ci){var or,ta;const Jr=Rt?B(Rt):void 0,pn=ll(Rt,U.value),fn=ys(Rt);hP(Rt,Z.value)&&(t("update:modelValue",Jr),t("change",Jr,fn,pn),(ta=(or=P.value)==null?void 0:or.onChange)==null||ta.call(or)),Ci&&t("ok",Jr,fn,pn)}function ft(Rt,Ci,or){W(Rt)||(ze(Rt,or),G(Rt),J(void 0),fe(void 0),ke(void 0),K.value=void 0,jn(Ci)&&xe(Ci))}function te(Rt,Ci){if(J(Rt),fe(void 0),ke(void 0),K.value=void 0,Ci){const or=Rt?B(Rt):void 0,ta=ll(Rt,U.value),Jr=ys(Rt);t("select",or,Jr,ta)}}function Pe(Rt){I.value&&I.value.focus&&I.value.focus(Rt)}function Te(Rt,Ci){return!q.value&&!p.value?Rt:WF(An(),Rt,Ci)}function Be(Rt){M.value||xe(Rt)}function Le(Rt){Rt.stopPropagation(),ft(void 0),t("clear")}function jt(){var Rt,Ci;(Ci=(Rt=P.value)==null?void 0:Rt.onBlur)==null||Ci.call(Rt)}function kt(Rt){xe(!0);const Ci=Rt.target.value;if(ke(Ci),!ub(Ci,D.value))return;const or=va(Ci,D.value);W(or)||(R.value?te(or):ft(or,!0))}function Qt(){ft(ge.value,!1)}function ct(Rt){R.value?te(Rt,!0):ft(Rt,!1)}function mt(Rt){const Ci=Te(Rt,Ye.value);ct(Ci)}function Et(Rt){const Ci=Te(ge.value||An(),Rt);ct(Ci)}function Gt(){ft(ge.value,!1,!0)}function Ht(){e.disabledInput&&Pe()}let Ee;sn(()=>{clearTimeout(Ee)});function nt(Rt){clearTimeout(Ee),fe(Rt),ke(void 0)}function St(){clearTimeout(Ee),Ee=setTimeout(()=>{fe(void 0)},100)}function $t(Rt,Ci){t("select-shortcut",Ci),ft(Rt,!1)}function Ei(Rt){K.value=Rt}function Yi(){K.value="year"}function nr(Rt){let Ci=Ne.value;if(Ci=Ci.set("year",Rt.year()),K.value==="month"&&(Ci=Ci.set("month",Rt.month())),pt(Ci),r.value==="quarter"||r.value==="month"){K.value=void 0;return}K.value=K.value==="year"?"month":void 0}const ar=T(()=>GL(pb({format:D.value},ln(p?.value||{},["defaultValue"])),{visible:ce.value})),Qr=T(()=>GL(pb({},ml(e,["mode","shortcuts","shortcutsPosition","dayStartOfWeek","disabledDate","disabledTime","showTime","hideTrigger","abbreviation"])),{showNowBtn:e.showNowBtn&&r.value==="date",prefixCls:k,format:U.value,value:ge.value,visible:ce.value,showConfirmBtn:R.value,confirmBtnDisabled:$.value,timePickerProps:ar.value,extra:i.extra,dateRender:i.cell,headerValue:Ne.value,headerIcons:{prev:i["icon-prev"],prevDouble:i["icon-prev-double"],next:i["icon-next"],nextDouble:i["icon-next-double"]},headerOperations:at.value,timePickerValue:Ye.value,headerMode:K.value,onCellClick:mt,onTimePickerSelect:Et,onConfirm:Gt,onShortcutClick:$t,onShortcutMouseEnter:S.value?nt:void 0,onShortcutMouseLeave:S.value?St:void 0,onTodayBtnClick:ct,onHeaderLabelClick:Ei,onHeaderSelect:nr,onMonthHeaderClick:Yi}));return{prefixCls:k,refInput:I,panelProps:Qr,panelValue:ge,inputValue:me,selectedValue:Z,inputFormat:z,computedPlaceholder:O,panelVisible:ce,inputEditable:ne,needConfirm:R,mergedDisabled:M,onPanelVisibleChange:Be,onInputClear:Le,onInputChange:kt,onInputPressEnter:Qt,onInputBlur:jt,onPanelClick:Ht}}});function YEe(e,t,i,r,a,n){const s=be("IconCalendar"),o=be("DateInput"),l=be("PickerPanel"),u=be("Trigger");return e.hideTrigger?(N(),De(l,br(it({key:1},pb(pb({},e.$attrs),e.panelProps))),null,16)):(N(),De(u,it({key:0,trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,"popup-offset":4},e.triggerProps,{position:e.position,disabled:e.mergedDisabled||e.readonly,"prevent-focus":!0,"popup-visible":e.panelVisible,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer,onPopupVisibleChange:e.onPanelVisibleChange}),{content:He(()=>[_(l,it(e.panelProps,{onClick:e.onPanelClick}),null,16,["onClick"])]),default:He(()=>[ye(e.$slots,"default",{},()=>[_(o,it(e.$attrs,{ref:"refInput",size:e.size,focused:e.panelVisible,visible:e.panelVisible,error:e.error,disabled:e.mergedDisabled,readonly:!e.inputEditable||e.disabledInput,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,"input-value":e.inputValue,value:e.needConfirm?e.panelValue:e.selectedValue,format:e.inputFormat,onClear:e.onInputClear,onChange:e.onInputChange,onPressEnter:e.onInputPressEnter,onBlur:e.onInputBlur}),$r({"suffix-icon":He(()=>[ye(e.$slots,"suffix-icon",{},()=>[_(s)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0]),1040,["size","focused","visible","error","disabled","readonly","allow-clear","placeholder","input-value","value","format","onClear","onChange","onPressEnter","onBlur"])])]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"]))}var ev=We(qEe,[["render",YEe]]),YS=se({name:"DatePicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:[String,Function]},dayStartOfWeek:{type:Number,default:0},showTime:{type:Boolean},timePickerProps:{type:Object},disabled:{type:Boolean},disabledDate:{type:Function},disabledTime:{type:Function},showNowBtn:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:i}){return()=>_(ev,it(e,t,{mode:"date"}),i)}}),C0=se({name:"WeekPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"gggg-wo"},valueFormat:{type:String,default:"YYYY-MM-DD"},dayStartOfWeek:{type:Number,default:0}},setup(e,{attrs:t,slots:i}){return()=>_(ev,it(e,t,{mode:"week"}),i)}}),_0=se({name:"MonthPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY-MM"}},setup(e,{attrs:t,slots:i}){return()=>_(ev,it(e,t,{mode:"month"}),i)}}),M0=se({name:"YearPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY"}},setup(e,{attrs:t,slots:i}){return()=>_(ev,it(e,t,{mode:"year"}),i)}}),E0=se({name:"QuarterPicker",props:{modelValue:{type:[Object,String,Number]},defaultValue:{type:[Object,String,Number]},format:{type:String,default:"YYYY-[Q]Q"},valueFormat:{type:String,default:"YYYY-MM"}},setup(e,{attrs:t,slots:i}){return()=>_(ev,it(e,t,{mode:"quarter"}),i)}});function XEe(e){const{modelValue:t,defaultValue:i,format:r}=yt(e),a=T(()=>Is(zM(t.value),r.value)),n=T(()=>Is(zM(i.value),r.value)),[s,o]=Mn(ei(a.value)?ei(n.value)?[]:n.value:a.value);return Vt(a,()=>{ei(a.value)&&o([])}),{value:T(()=>a.value||s.value),setValue:o}}function KEe(e){const{startHeaderMode:t,endHeaderMode:i,mode:r,value:a,defaultValue:n,selectedValue:s,format:o,onChange:l}=yt(e),u=T(()=>["date","week"].includes(r.value)),c=T(()=>u.value?"M":"y"),d=(X,J)=>X.isSame(J,c.value),{span:h,superSpan:p}=tj(gt({mode:r})),f=T(()=>t?.value||r.value),v=T(()=>i?.value||r.value),m=T(()=>{var X;return(X=a.value)==null?void 0:X[0]}),g=T(()=>{var X;return(X=a.value)==null?void 0:X[1]}),y=T(()=>{var X;return(X=n.value)==null?void 0:X[0]}),b=T(()=>{var X;return(X=n.value)==null?void 0:X[1]}),x=X=>{l?.value&&l.value(X)},{headerValue:S,setHeaderValue:w,headerOperations:E,getDefaultLocalValue:M}=db(gt({mode:f,value:m,defaultValue:y,selectedValue:void 0,format:o,onChange:X=>{x([X,P.value])}})),{headerValue:P,setHeaderValue:A,headerOperations:k,getDefaultLocalValue:I}=db(gt({mode:v,value:g,defaultValue:b,selectedValue:void 0,format:o,onChange:X=>{x([S.value,X])}})),O=X=>{const J=d(S.value,X[0]),pe=d(P.value,X[1]);w(X[0],!1),A(X[1],!1),(!J||!pe)&&l?.value&&l?.value(X)};function D(X){let[J,pe]=Cm(X);const fe=ka.add(J,h.value,"M");return pe.isBefore(fe,c.value)&&(pe=fe),[J,pe]}function F(){var X,J;let pe=(X=s.value)==null?void 0:X[0],fe=(J=s.value)==null?void 0:J[1];return pe&&fe&&([pe,fe]=Cm([pe,fe])),[pe,fe]}const[U,z]=F(),[B,W]=D([U||S.value,z||P.value]);w(B,!1),A(W,!1);const R=()=>{const X=M(),J=I();hr(()=>{const[pe,fe]=F(),[de,ge]=D([pe||X,fe||J]);O([de,ge])})},$=T(()=>ka.add(S.value,h.value,"M").isBefore(P.value,c.value)),q=T(()=>ka.add(S.value,p.value,"M").isBefore(P.value,c.value)),Z=T(()=>{const X=["onSuperPrev"];return u.value&&X.push("onPrev"),$.value&&u&&X.push("onNext"),q.value&&X.push("onSuperNext"),ml(E.value,X)}),G=T(()=>{const X=["onSuperNext"];return u.value&&X.push("onNext"),$.value&&u.value&&X.push("onPrev"),q.value&&X.push("onSuperPrev"),ml(k.value,X)});return{startHeaderValue:S,endHeaderValue:P,startHeaderOperations:Z,endHeaderOperations:G,setHeaderValue:O,resetHeaderValue:R}}const ZEe=se({name:"DateInputRange",components:{IconHover:Ur,IconClose:kn,FeedbackIcon:km},props:{size:{type:String},focused:{type:Boolean},focusedIndex:{type:Number},error:{type:Boolean},disabled:{type:[Boolean,Array],default:!1},readonly:{type:Boolean},allowClear:{type:Boolean},placeholder:{type:Array,default:()=>[]},inputValue:{type:Array},value:{type:Array,default:()=>[]},format:{type:[String,Function],required:!0}},emits:["focused-index-change","update:focusedIndex","change","clear","press-enter"],setup(e,{emit:t,slots:i}){const{error:r,focused:a,disabled:n,size:s,value:o,format:l,focusedIndex:u,inputValue:c}=yt(e),{mergedSize:d,mergedDisabled:h,mergedError:p,feedback:f}=Wr({size:s,error:r}),{mergedSize:v}=hn(d),m=ie(),g=ie(),y=U=>h.value?h.value:bi(n.value)?n.value[U]:n.value,b=T(()=>y(0)),x=T(()=>y(1)),S=Se("picker"),w=T(()=>[S,`${S}-range`,`${S}-size-${v.value}`,{[`${S}-focused`]:a.value,[`${S}-disabled`]:b.value&&x.value,[`${S}-error`]:p.value,[`${S}-has-prefix`]:i.prefix}]);function E(U){return[`${S}-input`,{[`${S}-input-active`]:U===u?.value}]}function M(U){var z,B;if(c?.value)return(z=c?.value)==null?void 0:z[U];const W=(B=o?.value)==null?void 0:B[U];if(W&&Ks(W))return Zt(l.value)?l.value(W):W.format(l.value)}const P=T(()=>M(0)),A=T(()=>M(1));function k(U){t("focused-index-change",U),t("update:focusedIndex",U)}function I(U){U.stopPropagation(),t("change",U)}function O(){t("press-enter")}function D(U){U.preventDefault()}function F(U){t("clear",U)}return{prefixCls:S,classNames:w,refInput0:m,refInput1:g,disabled0:b,disabled1:x,mergedDisabled:h,getDisabled:y,getInputWrapClassName:E,displayValue0:P,displayValue1:A,changeFocusedInput:k,onChange:I,onPressEnter:O,onPressTab:D,onClear:F,feedback:f}},methods:{focus(e){const t=Mt(e)?e:this.focusedIndex,i=t===0?this.refInput0:this.refInput1;!ei(t)&&!this.getDisabled(t)&&i&&i.focus&&i.focus()},blur(){const e=this.focusedIndex===0?this.refInput0:this.refInput1;e&&e.blur&&e.blur()}}}),QEe=["disabled","placeholder","value"],JEe=ti(" - "),eAe=["disabled","placeholder","value"];function tAe(e,t,i,r,a,n){const s=be("IconClose"),o=be("IconHover"),l=be("FeedbackIcon");return N(),ee("div",{class:Y(e.classNames)},[e.$slots.prefix?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-prefix`)},[ye(e.$slots,"prefix")],2)):Me("v-if",!0),ve("div",{class:Y(e.getInputWrapClassName(0))},[ve("input",it({ref:"refInput0",disabled:e.disabled0,placeholder:e.placeholder[0],value:e.displayValue0},e.readonly?{readonly:!0}:{},{onInput:t[0]||(t[0]=(...u)=>e.onChange&&e.onChange(...u)),onKeydown:[t[1]||(t[1]=ph((...u)=>e.onPressEnter&&e.onPressEnter(...u),["enter"])),t[2]||(t[2]=ph((...u)=>e.onPressTab&&e.onPressTab(...u),["tab"]))],onClick:t[3]||(t[3]=()=>e.changeFocusedInput(0))}),null,16,QEe)],2),ve("span",{class:Y(`${e.prefixCls}-separator`)},[ye(e.$slots,"separator",{},()=>[JEe])],2),ve("div",{class:Y(e.getInputWrapClassName(1))},[ve("input",it({ref:"refInput1",disabled:e.disabled1,placeholder:e.placeholder[1],value:e.displayValue1},e.readonly?{readonly:!0}:{},{onInput:t[4]||(t[4]=(...u)=>e.onChange&&e.onChange(...u)),onKeydown:[t[5]||(t[5]=ph((...u)=>e.onPressEnter&&e.onPressEnter(...u),["enter"])),t[6]||(t[6]=ph((...u)=>e.onPressTab&&e.onPressTab(...u),["tab"]))],onClick:t[7]||(t[7]=()=>e.changeFocusedInput(1))}),null,16,eAe)],2),ve("div",{class:Y(`${e.prefixCls}-suffix`)},[e.allowClear&&!e.mergedDisabled&&e.value.length===2?(N(),De(o,{key:0,prefix:e.prefixCls,class:Y(`${e.prefixCls}-clear-icon`),onClick:e.onClear},{default:He(()=>[_(s)]),_:1},8,["prefix","class","onClick"])):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-suffix-icon`)},[ye(e.$slots,"suffix-icon")],2),e.feedback?(N(),De(l,{key:1,type:e.feedback},null,8,["type"])):Me("v-if",!0)],2)],2)}var sj=We(ZEe,[["render",tAe]]),iAe=Object.defineProperty,rAe=Object.defineProperties,aAe=Object.getOwnPropertyDescriptors,qL=Object.getOwnPropertySymbols,nAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,YL=(e,t,i)=>t in e?iAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,XS=(e,t)=>{for(var i in t||(t={}))nAe.call(t,i)&&YL(e,i,t[i]);if(qL)for(var i of qL(t))sAe.call(t,i)&&YL(e,i,t[i]);return e},KS=(e,t)=>rAe(e,aAe(t));const oAe=se({name:"DateRangePikerPanel",components:{PanelShortcuts:UF,PanelFooter:ej,RenderFunction:bu,DatePanel:CP,WeekPanel:XF,MonthPanel:KF,YearPanel:ZF,QuarterPanel:QF},props:{mode:{type:String,default:"date"},value:{type:Array,default:()=>[]},footerValue:{type:Array},timePickerValue:{type:Array},showTime:{type:Boolean},showConfirmBtn:{type:Boolean},prefixCls:{type:String,required:!0},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},format:{type:String,required:!0},dayStartOfWeek:{type:Number,default:0},disabledDate:{type:Function},disabledTime:{type:Function},timePickerProps:{type:Object},extra:{type:Function},dateRender:{type:Function},hideTrigger:{type:Boolean},startHeaderProps:{type:Object,default:()=>({})},endHeaderProps:{type:Object,default:()=>({})},confirmBtnDisabled:{type:Boolean},disabled:{type:Array,default:()=>[!1,!1]},visible:{type:Boolean},startHeaderMode:{type:String},endHeaderMode:{type:String},abbreviation:{type:Boolean}},emits:["cell-click","cell-mouse-enter","time-picker-select","shortcut-click","shortcut-mouse-enter","shortcut-mouse-leave","confirm","start-header-label-click","end-header-label-click","start-header-select","end-header-select"],setup(e,{emit:t}){const{prefixCls:i,shortcuts:r,shortcutsPosition:a,format:n,hideTrigger:s,value:o,disabledDate:l,disabledTime:u,startHeaderProps:c,endHeaderProps:d,dateRender:h,visible:p,startHeaderMode:f,endHeaderMode:v}=yt(e),m=T(()=>bi(r.value)&&r.value.length),g=T(()=>[`${i.value}-range-container`,{[`${i.value}-range-container-panel-only`]:s.value,[`${i.value}-range-container-shortcuts-placement-left`]:m.value&&a.value==="left",[`${i.value}-range-container-shortcuts-placement-right`]:m.value&&a.value==="right"}]),y=ie("date");Vt(p,(q,Z)=>{q&&!Z&&(y.value="date")});function b(q){return Is(zM(Zt(q.value)?q.value():q.value),q.format||n.value)}function x(q){t("shortcut-click",b(q),q)}function S(q){t("shortcut-mouse-enter",b(q))}function w(q){t("shortcut-mouse-leave",b(q))}function E(q){t("cell-click",q)}function M(q){t("cell-mouse-enter",q)}function P(){t("confirm")}function A(q){t("time-picker-select",q,"start")}function k(q){t("time-picker-select",q,"end")}function I(q){t("start-header-label-click",q)}function O(q){t("end-header-label-click",q)}function D(q){t("start-header-select",q)}function F(q){t("end-header-select",q)}function U(q){return Zt(l?.value)?Z=>{var G;return((G=l?.value)==null?void 0:G.call(l,Z,q===0?"start":"end"))||!1}:void 0}function z(q){return Zt(u?.value)?Z=>{var G;return((G=u?.value)==null?void 0:G.call(u,Z,q===0?"start":"end"))||!1}:void 0}function B(q){return Zt(h?.value)?Z=>{var G;const X=KS(XS({},Z),{type:q===0?"start":"end"});return(G=h?.value)==null?void 0:G.call(h,X)}:void 0}const W=gt({prefixCls:i,shortcuts:r,onItemClick:x,onItemMouseEnter:S,onItemMouseLeave:w}),R=T(()=>KS(XS({},c.value),{rangeValues:o.value,disabledDate:U(0),dateRender:B(0),onSelect:f.value?D:E,onCellMouseEnter:M,onHeaderLabelClick:I})),$=T(()=>KS(XS({},d.value),{rangeValues:o.value,disabledDate:U(1),dateRender:B(1),onSelect:v.value?F:E,onCellMouseEnter:M,onHeaderLabelClick:O}));return{pick:ml,classNames:g,showShortcuts:m,shortcutsProps:W,startPanelProps:R,endPanelProps:$,getDisabledTimeFunc:z,onConfirmBtnClick:P,currentDateView:y,onStartTimePickerSelect:A,onEndTimePickerSelect:k,onStartHeaderPanelSelect:D,onEndHeaderPanelSelect:F}}});function lAe(e,t,i,r,a,n){const s=be("PanelShortcuts"),o=be("YearPanel"),l=be("MonthPanel"),u=be("WeekPanel"),c=be("QuarterPanel"),d=be("DatePanel"),h=be("RenderFunction"),p=be("PanelFooter");return N(),ee("div",{class:Y(e.classNames)},[e.showShortcuts&&e.shortcutsPosition==="left"?(N(),De(s,br(it({key:0},e.shortcutsProps)),null,16)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-range-panel-wrapper`)},[Me(" panel "),ve("div",{class:Y(`${e.prefixCls}-range`)},[ve("div",{class:Y(`${e.prefixCls}-range-wrapper`)},[e.startHeaderMode||e.endHeaderMode?(N(),ee(Xt,{key:0},[e.startHeaderMode==="year"?(N(),De(o,br(it({key:0},e.startPanelProps)),null,16)):Me("v-if",!0),e.endHeaderMode==="year"?(N(),De(o,br(it({key:1},e.endPanelProps)),null,16)):e.startHeaderMode==="month"?(N(),De(l,it({key:2},e.startPanelProps,{abbreviation:e.abbreviation}),null,16,["abbreviation"])):e.endHeaderMode==="month"?(N(),De(l,it({key:3},e.endPanelProps,{abbreviation:e.abbreviation}),null,16,["abbreviation"])):Me("v-if",!0)],64)):(N(),ee(Xt,{key:1},[Me(" week "),e.mode==="week"?(N(),ee(Xt,{key:0},[_(u,it(e.startPanelProps,{"day-start-of-week":e.dayStartOfWeek}),null,16,["day-start-of-week"]),_(u,it(e.endPanelProps,{"day-start-of-week":e.dayStartOfWeek}),null,16,["day-start-of-week"])],64)):e.mode==="month"?(N(),ee(Xt,{key:1},[Me(" month "),_(l,it(e.startPanelProps,{abbreviation:e.abbreviation}),null,16,["abbreviation"]),_(l,it(e.endPanelProps,{abbreviation:e.abbreviation}),null,16,["abbreviation"])],64)):e.mode==="year"?(N(),ee(Xt,{key:2},[Me(" year "),_(o,br(Ea(e.startPanelProps)),null,16),_(o,br(Ea(e.endPanelProps)),null,16)],64)):e.mode==="quarter"?(N(),ee(Xt,{key:3},[Me(" quarter "),_(c,br(Ea(e.startPanelProps)),null,16),_(c,br(Ea(e.endPanelProps)),null,16)],64)):(N(),ee(Xt,{key:4},[Me(" date "),_(d,it({currentView:e.currentDateView,"onUpdate:currentView":t[0]||(t[0]=f=>e.currentDateView=f)},e.startPanelProps,{"is-range":"",value:e.value&&e.value[0],"footer-value":e.footerValue&&e.footerValue[0],"time-picker-value":e.timePickerValue&&e.timePickerValue[0],"day-start-of-week":e.dayStartOfWeek,"show-time":e.showTime,"time-picker-props":e.timePickerProps,"disabled-time":e.getDisabledTimeFunc(0),disabled:e.disabled[0],onTimePickerSelect:e.onStartTimePickerSelect}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled","onTimePickerSelect"]),_(d,it({currentView:e.currentDateView,"onUpdate:currentView":t[1]||(t[1]=f=>e.currentDateView=f)},e.endPanelProps,{"is-range":"",value:e.value&&e.value[1],"footer-value":e.footerValue&&e.footerValue[1],"time-picker-value":e.timePickerValue&&e.timePickerValue[1],"day-start-of-week":e.dayStartOfWeek,"show-time":e.showTime,"time-picker-props":e.timePickerProps,"disabled-time":e.getDisabledTimeFunc(1),disabled:e.disabled[1],onTimePickerSelect:e.onEndTimePickerSelect}),null,16,["currentView","value","footer-value","time-picker-value","day-start-of-week","show-time","time-picker-props","disabled-time","disabled","onTimePickerSelect"])],64))],2112))],2)],2),Me(" footer "),_(p,{"prefix-cls":e.prefixCls,"show-today-btn":!1,"show-confirm-btn":e.showConfirmBtn,"confirm-btn-disabled":e.confirmBtnDisabled,onConfirmBtnClick:e.onConfirmBtnClick},$r({_:2},[e.extra||e.$slots.extra?{name:"extra",fn:He(()=>[e.$slots.extra?ye(e.$slots,"extra",{key:0}):(N(),De(h,{key:1,"render-func":e.extra},null,8,["render-func"]))])}:void 0,e.showShortcuts&&e.shortcutsPosition==="bottom"?{name:"btn",fn:He(()=>[_(s,br(Ea(e.shortcutsProps)),null,16)])}:void 0]),1032,["prefix-cls","show-confirm-btn","confirm-btn-disabled","onConfirmBtnClick"])],2),e.showShortcuts&&e.shortcutsPosition==="right"?(N(),De(s,br(it({key:1},e.shortcutsProps)),null,16)):Me("v-if",!0)],2)}var uAe=We(oAe,[["render",lAe]]),cAe=Object.defineProperty,dAe=Object.defineProperties,hAe=Object.getOwnPropertyDescriptors,XL=Object.getOwnPropertySymbols,pAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,KL=(e,t,i)=>t in e?cAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ZL=(e,t)=>{for(var i in t||(t={}))pAe.call(t,i)&&KL(e,i,t[i]);if(XL)for(var i of XL(t))fAe.call(t,i)&&KL(e,i,t[i]);return e},QL=(e,t)=>dAe(e,hAe(t));function mAe(e){const{timePickerProps:t,selectedValue:i}=yt(e),r=T(()=>{var g;return(g=i?.value)==null?void 0:g[0]}),a=T(()=>{var g;return(g=i?.value)==null?void 0:g[1]}),n=T(()=>{var g;return(g=t?.value)==null?void 0:g.defaultValue}),s=T(()=>bi(n.value)?QL(ZL({},t?.value),{defaultValue:n.value[0]}):t?.value),o=T(()=>bi(n.value)?QL(ZL({},t?.value),{defaultValue:n.value[1]}):t?.value),[l,u,c]=VM(gt({timePickerProps:s,selectedValue:r})),[d,h,p]=VM(gt({timePickerProps:o,selectedValue:a})),f=T(()=>[l.value,d.value]);function v(g){g&&(u(g[0]),h(g[1]))}function m(){c(),p()}return[f,v,m]}var vAe=Object.defineProperty,gAe=Object.defineProperties,yAe=Object.getOwnPropertyDescriptors,JL=Object.getOwnPropertySymbols,bAe=Object.prototype.hasOwnProperty,wAe=Object.prototype.propertyIsEnumerable,e5=(e,t,i)=>t in e?vAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,fb=(e,t)=>{for(var i in t||(t={}))bAe.call(t,i)&&e5(e,i,t[i]);if(JL)for(var i of JL(t))wAe.call(t,i)&&e5(e,i,t[i]);return e},t5=(e,t)=>gAe(e,yAe(t));const xAe=se({name:"RangePicker",components:{RangePickerPanel:uAe,DateRangeInput:sj,Trigger:$a,IconCalendar:SP},inheritAttrs:!1,props:{mode:{type:String,default:"date"},modelValue:{type:Array},defaultValue:{type:Array},pickerValue:{type:Array},defaultPickerValue:{type:Array},disabled:{type:[Boolean,Array],default:!1},dayStartOfWeek:{type:Number,default:0},format:{type:String},valueFormat:{type:String},showTime:{type:Boolean},timePickerProps:{type:Object},placeholder:{type:Array},disabledDate:{type:Function},disabledTime:{type:Function},separator:{type:String},exchangeTime:{type:Boolean,default:!0},popupContainer:{type:[String,Object]},locale:{type:Object},hideTrigger:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},size:{type:String},shortcuts:{type:Array,default:()=>[]},shortcutsPosition:{type:String,default:"bottom"},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},triggerProps:{type:Object},unmountOnClose:{type:Boolean},previewShortcut:{type:Boolean,default:!0},showConfirmBtn:{type:Boolean},disabledInput:{type:Boolean,default:!1},abbreviation:{type:Boolean,default:!0}},emits:{change:(e,t,i)=>!0,"update:modelValue":e=>!0,select:(e,t,i)=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0,ok:(e,t,i)=>!0,clear:()=>!0,"select-shortcut":e=>!0,"picker-value-change":(e,t,i)=>!0,"update:pickerValue":e=>!0},setup(e,{emit:t,slots:i}){const{mode:r,showTime:a,format:n,modelValue:s,defaultValue:o,popupVisible:l,defaultPopupVisible:u,placeholder:c,timePickerProps:d,disabled:h,disabledDate:p,disabledTime:f,locale:v,pickerValue:m,defaultPickerValue:g,valueFormat:y,size:b,error:x,dayStartOfWeek:S,exchangeTime:w,previewShortcut:E,showConfirmBtn:M}=yt(e),{locale:P}=Yr(),A=Ai(Pn,void 0);on(()=>{vF(P.value,S.value)});const k=T(()=>{var Xe;return!(!w.value||!((Xe=A?.exchangeTime)==null||Xe))}),{mergedSize:I,mergedDisabled:O,mergedError:D,eventHandlers:F}=Wr({size:b,error:x}),U=aj(gt({locale:v})),z=Se("picker"),B=T(()=>c?.value||{date:U("datePicker.rangePlaceholder.date"),month:U("datePicker.rangePlaceholder.month"),year:U("datePicker.rangePlaceholder.year"),week:U("datePicker.rangePlaceholder.week"),quarter:U("datePicker.rangePlaceholder.quarter")}[r.value]||U("datePicker.rangePlaceholder.date")),{format:W,valueFormat:R,parseValueFormat:$}=ij(gt({mode:r,format:n,showTime:a,valueFormat:y})),q=T(()=>{const Xe=h.value===!0||O.value||bi(h.value)&&h.value[0]===!0,ni=h.value===!0||O.value||bi(h.value)&&h.value[1]===!0;return[Xe,ni]}),Z=T(()=>q.value[0]&&q.value[1]);function G(Xe=0){return q.value[Xe]?Xe^1:Xe}const X=ie(),J=ie(G()),pe=T(()=>{const Xe=J.value,ni=Xe^1;return q.value[ni]?Xe:ni}),fe=T(()=>q.value[J.value^1]),{value:de,setValue:ge}=XEe(gt({modelValue:s,defaultValue:o,format:$})),[me,ke]=Mn(),[ce,le]=Mn(),xe=T(()=>{var Xe;return(Xe=me.value)!=null?Xe:de.value}),Ne=T(()=>{var Xe,ni;return(ni=(Xe=ce.value)!=null?Xe:me.value)!=null?ni:de.value}),[pt,at]=Mn(),Oe=ie(),Ye=ie(),[xt,ne]=ja(u.value,gt({value:l})),K=Xe=>{xt.value!==Xe&&(ne(Xe),t("popup-visible-change",Xe),t("update:popupVisible",Xe))},{startHeaderValue:ze,endHeaderValue:ft,startHeaderOperations:te,endHeaderOperations:Pe,resetHeaderValue:Te,setHeaderValue:Be}=KEe(gt({mode:r,startHeaderMode:Oe,endHeaderMode:Ye,value:m,defaultValue:g,selectedValue:Ne,format:$,onChange:Xe=>{const ni=qS(Xe,R.value),Oi=ll(Xe,$.value),wi=ys(Xe);t("picker-value-change",ni,wi,Oi),t("update:pickerValue",ni)}}));function Le(Xe){Oe.value=Xe}function jt(Xe){Ye.value=Xe}function kt(Xe){let ni=ze.value;ni=ni.set("year",Xe.year()),Oe.value==="month"&&(ni=ni.set("month",Xe.month())),Be([ni,ft.value]),Oe.value=void 0}function Qt(Xe){let ni=ft.value;ni=ni.set("year",Xe.year()),Ye.value==="month"&&(ni=ni.set("month",Xe.month())),Be([ze.value,ni]),Ye.value=void 0}const ct=ie([Ne.value[0]||An(),Ne.value[1]||An()]);Vt(Ne,()=>{const[Xe,ni]=Ne.value;ct.value[0]=Xe||ct.value[0],ct.value[1]=ni||ct.value[1]});const[mt,Et,Gt]=mAe(gt({timePickerProps:d,selectedValue:Ne})),Ht=T(()=>r.value==="date"&&a.value),Ee=T(()=>Ht.value||d.value),nt=rj(gt({mode:r,isRange:!0,showTime:a,disabledDate:p,disabledTime:f})),St=T(()=>Ht.value||M.value),$t=T(()=>St.value&&(!zu(xe.value)||nt(xe.value[0],"start")||nt(xe.value[1],"end")));Vt(xt,Xe=>{Oe.value=void 0,Ye.value=void 0,ke(void 0),le(void 0),Xe&&(Te(),Gt(),J.value=G(J.value),hr(()=>Ci(J.value))),Xe||at(void 0)}),Vt(J,()=>{e.disabledInput&&(Ci(J.value),at(void 0))});function Ei(Xe,ni){var Oi,wi;const pr=Xe?qS(Xe,R.value):void 0,yi=ll(Xe,$.value),xa=ys(Xe);hP(Xe,de.value)&&(t("update:modelValue",pr),t("change",pr,xa,yi),(wi=(Oi=F.value)==null?void 0:Oi.onChange)==null||wi.call(Oi)),ni&&t("ok",pr,xa,yi)}function Yi(Xe){let ni=Cm(Xe);return Ee.value&&!k.value&&(ni=[or(ni[0],Xe[0]),or(ni[1],Xe[1])]),ni}function nr(Xe,ni,Oi){if(nt(Xe?.[0],"start")||nt(Xe?.[1],"end"))return;let wi=Xe?[...Xe]:void 0;zu(wi)&&(wi=Yi(wi)),Ei(wi,Oi),ge(wi||[]),ke(void 0),le(void 0),at(void 0),Oe.value=void 0,Ye.value=void 0,jn(ni)&&K(ni)}function ar(Xe){const ni=qS(Xe,R.value),Oi=ll(Xe,$.value),wi=ys(Xe);t("select",ni,wi,Oi)}function Qr(Xe,ni){const{emitSelect:Oi=!1,updateHeader:wi=!1}=ni||{};let pr=[...Xe];zu(pr)&&(pr=Yi(pr)),ke(pr),le(void 0),at(void 0),Oe.value=void 0,Ye.value=void 0,Oi&&ar(pr),wi&&Te()}function Rt(Xe,ni){const{updateHeader:Oi=!1}=ni||{};le(Xe),at(void 0),Oi&&Te()}function Ci(Xe){X.value&&X.value.focus&&X.value.focus(Xe)}function or(Xe,ni){return Ee.value?WF(An(),Xe,ni):Xe}function ta(Xe){K(Xe)}function Jr(Xe){if(me.value&&Ne.value[pe.value]&&(!St.value||!zu(me.value))){const ni=[...Ne.value],Oi=or(Xe,mt.value[J.value]);ni[J.value]=Oi,Rt(ni)}}function pn(Xe=!1){return fe.value?[...de.value]:me.value?Xe||!zu(me.value)?[...me.value]:[]:Xe?[...de.value]:[]}function fn(Xe){const ni=pn(),Oi=or(Xe,mt.value[J.value]);ni[J.value]=Oi,ar(ni),!St.value&&zu(ni)?nr(ni,!1):(Qr(ni),zu(ni)?J.value=0:J.value=pe.value)}function he(Xe,ni){const Oi=ni==="start"?0:1,wi=or(mt.value[Oi],Xe),pr=[...mt.value];pr[Oi]=wi,Et(pr);const yi=pn(!0);yi[Oi]&&(yi[Oi]=wi,Qr(yi,{emitSelect:!0}))}let lt;sn(()=>{clearTimeout(lt)});function vt(Xe){clearTimeout(lt),Rt(Xe,{updateHeader:!0})}function et(){clearTimeout(lt),lt=setTimeout(()=>{le(void 0),at(void 0),Te()},100)}function bt(Xe,ni){t("select-shortcut",ni),nr(Xe,!1)}function ci(){nr(Ne.value,!1,!0)}function mi(Xe){Xe.stopPropagation(),nr(void 0),t("clear")}function vi(Xe){K(!0);const ni=Xe.target.value;if(!ni){at(void 0);return}const Oi=ll(Ne.value,W.value),wi=bi(pt.value)?[...pt.value]:Oi||[];if(wi[J.value]=ni,at(wi),!ub(ni,W.value))return;const pr=va(ni,W.value);if(nt(pr,J.value===0?"start":"end"))return;const yi=bi(Ne.value)?[...Ne.value]:[];yi[J.value]=pr,Qr(yi,{updateHeader:!0})}function Si(){Z2e(Ne.value)?nr(Ne.value,!1):J.value=pe.value}const ui=T(()=>t5(fb({format:W.value},ln(d?.value||{},["defaultValue"])),{visible:xt.value})),Hi=T(()=>({prev:i["icon-prev"],prevDouble:i["icon-prev-double"],next:i["icon-next"],nextDouble:i["icon-next-double"]})),er=gt({headerValue:ze,headerOperations:te,headerIcons:Hi}),$i=gt({headerValue:ft,headerOperations:Pe,headerIcons:Hi}),Ki=T(()=>t5(fb({},ml(e,["mode","showTime","shortcuts","shortcutsPosition","dayStartOfWeek","disabledDate","disabledTime","hideTrigger","abbreviation"])),{prefixCls:z,format:$.value,value:Ne.value,showConfirmBtn:St.value,confirmBtnDisabled:$t.value,timePickerValue:mt.value,timePickerProps:ui.value,extra:i.extra,dateRender:i.cell,startHeaderProps:er,endHeaderProps:$i,footerValue:ct.value,disabled:q.value,visible:xt.value,onCellClick:fn,onCellMouseEnter:Jr,onShortcutClick:bt,onShortcutMouseEnter:E.value?vt:void 0,onShortcutMouseLeave:E.value?et:void 0,onConfirm:ci,onTimePickerSelect:he,startHeaderMode:Oe.value,endHeaderMode:Ye.value,onStartHeaderLabelClick:Le,onEndHeaderLabelClick:jt,onStartHeaderSelect:kt,onEndHeaderSelect:Qt}));return{prefixCls:z,refInput:X,computedFormat:W,computedPlaceholder:B,panelVisible:xt,panelValue:Ne,inputValue:pt,focusedIndex:J,triggerDisabled:Z,mergedSize:I,mergedError:D,onPanelVisibleChange:ta,onInputClear:mi,onInputChange:vi,onInputPressEnter:Si,rangePanelProps:Ki}}});function SAe(e,t,i,r,a,n){const s=be("IconCalendar"),o=be("DateRangeInput"),l=be("RangePickerPanel"),u=be("Trigger");return e.hideTrigger?(N(),De(l,br(it({key:1},fb(fb({},e.$attrs),e.rangePanelProps))),null,16)):(N(),De(u,it({key:0,trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,"popup-offset":4},e.triggerProps,{"unmount-on-close":e.unmountOnClose,position:e.position,disabled:e.triggerDisabled||e.readonly,"popup-visible":e.panelVisible,"popup-container":e.popupContainer,onPopupVisibleChange:e.onPanelVisibleChange}),{content:He(()=>[_(l,br(Ea(e.rangePanelProps)),null,16)]),default:He(()=>[ye(e.$slots,"default",{},()=>[_(o,it({ref:"refInput"},e.$attrs,{focusedIndex:e.focusedIndex,"onUpdate:focusedIndex":t[0]||(t[0]=c=>e.focusedIndex=c),size:e.size,focused:e.panelVisible,visible:e.panelVisible,error:e.error,disabled:e.disabled,readonly:e.readonly||e.disabledInput,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,"input-value":e.inputValue,value:e.panelValue,format:e.computedFormat,onClear:e.onInputClear,onChange:e.onInputChange,onPressEnter:e.onInputPressEnter}),$r({"suffix-icon":He(()=>[ye(e.$slots,"suffix-icon",{},()=>[_(s)])]),separator:He(()=>[ye(e.$slots,"separator",{},()=>[ti(Bt(e.separator||"-"),1)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0]),1040,["focusedIndex","size","focused","visible","error","disabled","readonly","allow-clear","placeholder","input-value","value","format","onClear","onChange","onPressEnter"])])]),_:3},16,["unmount-on-close","position","disabled","popup-visible","popup-container","onPopupVisibleChange"]))}var A0=We(xAe,[["render",SAe]]);const CAe=Object.assign(YS,{WeekPicker:C0,MonthPicker:_0,YearPicker:M0,QuarterPicker:E0,RangePicker:A0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+YS.name,YS),e.component(i+M0.name,M0),e.component(i+E0.name,E0),e.component(i+_0.name,_0),e.component(i+C0.name,C0),e.component(i+A0.name,A0)}}),oj=Symbol("ArcoDescriptions");var _Ae=Object.defineProperty,MAe=Object.defineProperties,EAe=Object.getOwnPropertyDescriptors,i5=Object.getOwnPropertySymbols,AAe=Object.prototype.hasOwnProperty,PAe=Object.prototype.propertyIsEnumerable,r5=(e,t,i)=>t in e?_Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,TAe=(e,t)=>{for(var i in t||(t={}))AAe.call(t,i)&&r5(e,i,t[i]);if(i5)for(var i of i5(t))PAe.call(t,i)&&r5(e,i,t[i]);return e},kAe=(e,t)=>MAe(e,EAe(t));const mb=["xxl","xl","lg","md","sm","xs"],Og={xs:"(max-width: 575px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)",xxl:"(min-width: 1600px)"};let Ac=[],OAe=-1,Dg={};const vb={matchHandlers:{},dispatch(e,t){return Dg=e,Ac.length<1?!1:(Ac.forEach(i=>{i.func(Dg,t)}),!0)},subscribe(e){Ac.length===0&&this.register();const t=(++OAe).toString();return Ac.push({token:t,func:e}),e(Dg,null),t},unsubscribe(e){Ac=Ac.filter(t=>t.token!==e),Ac.length===0&&this.unregister()},unregister(){Object.keys(Og).forEach(e=>{const t=Og[e];if(!t)return;const i=this.matchHandlers[t];i&&i.mql&&i.listener&&(i.mql.removeEventListener?i.mql.removeEventListener("change",i.listener):i.mql.removeListener(i.listener))})},register(){Object.keys(Og).forEach(e=>{const t=Og[e];if(!t)return;const i=({matches:a})=>{this.dispatch(kAe(TAe({},Dg),{[e]:a}),e)},r=window.matchMedia(t);r.addEventListener?r.addEventListener("change",i):r.addListener(i),this.matchHandlers[t]={mql:r,listener:i},i(r)})}};function a5(e){return ki(e)}function iu(e,t,i=!1){const r=ie({xs:!0,sm:!0,md:!0,lg:!0,xl:!0,xxl:!0}),a=T(()=>{let s=t;if(a5(e.value))for(let o=0;o<mb.length;o++){const l=mb[o];if((r.value[l]||l==="xs"&&i)&&e.value[l]!==void 0){s=e.value[l];break}}else s=e.value;return s});let n="";return xi(()=>{n=vb.subscribe(s=>{a5(e.value)&&(r.value=s)})}),sn(()=>{n&&vb.unsubscribe(n)}),a}var DAe=Object.defineProperty,n5=Object.getOwnPropertySymbols,IAe=Object.prototype.hasOwnProperty,LAe=Object.prototype.propertyIsEnumerable,s5=(e,t,i)=>t in e?DAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,o5=(e,t)=>{for(var i in t||(t={}))IAe.call(t,i)&&s5(e,i,t[i]);if(n5)for(var i of n5(t))LAe.call(t,i)&&s5(e,i,t[i]);return e};const l5=e=>e?e.reduce((t,i)=>t+i.span,0):0;var ZS=se({name:"Descriptions",props:{data:{type:Array,default:()=>[]},column:{type:[Number,Object],default:3},title:String,layout:{type:String,default:"horizontal"},align:{type:[String,Object],default:"left"},size:{type:String},bordered:{type:Boolean,default:!1},labelStyle:{type:Object},valueStyle:{type:Object},tableLayout:{type:String,default:"auto"}},setup(e,{slots:t}){const{column:i,size:r}=yt(e),a=Se("descriptions"),{mergedSize:n}=hn(r),s=iu(i,3,!0),o=T(()=>{var P;return(P=ki(e.align)?e.align.label:e.align)!=null?P:"left"}),l=T(()=>{var P;return(P=ki(e.align)?e.align.value:e.align)!=null?P:"left"}),u=T(()=>o5({textAlign:o.value},e.labelStyle)),c=T(()=>o5({textAlign:l.value},e.valueStyle)),d=gt(new Map),h=T(()=>Array.from(d.values()).sort((P,A)=>P.index-A.index).map(P=>P.span));dr(oj,gt({addItem:(P,A)=>{d.set(P,A)},removeItem:P=>{d.delete(P)}}));const v=P=>{const A=[];if(P.forEach((k,I)=>{var O;const D=Math.min((O=ea(k)?h.value[I]:k.span)!=null?O:1,s.value),F=A[A.length-1],U=l5(F);U===0||U>=s.value?A.push([{data:k,span:D}]):F.push({data:k,span:D+U>s.value?s.value-U:D})}),A.length){const k=A[A.length-1],I=l5(k);I<s.value&&(k[k.length-1].span+=s.value-I)}return A},m=T(()=>{var P;return v((P=e.data)!=null?P:[])}),g=(P,A)=>{var k,I,O,D,F;return ea(P)?Ab(P,P.children)&&((I=(k=P.children).label)==null?void 0:I.call(k))||((O=P.props)==null?void 0:O.label):(F=(D=t.label)==null?void 0:D.call(t,{label:P.label,index:A,data:P}))!=null?F:Zt(P.label)?P.label():P.label},y=(P,A)=>{var k,I;return ea(P)?P:(I=(k=t.value)==null?void 0:k.call(t,{value:P.value,index:A,data:P}))!=null?I:Zt(P.value)?P.value():P.value},b=P=>_(Xt,null,[_("tr",{class:`${a}-row`},[P.map((A,k)=>_("td",{key:`label-${k}`,class:[`${a}-item-label`,`${a}-item-label-block`],style:u.value,colspan:A.span},[g(A.data,k)]))]),_("tr",{class:`${a}-row`},[P.map((A,k)=>_("td",{key:`value-${k}`,class:[`${a}-item-value`,`${a}-item-value-block`],style:c.value,colspan:A.span},[y(A.data,k)]))])]),x=(P,A)=>_("tr",{class:`${a}-row`,key:`tr-${A}`},[P.map(k=>_(Xt,null,[_("td",{class:[`${a}-item-label`,`${a}-item-label-block`],style:u.value},[g(k.data,A)]),_("td",{class:[`${a}-item-value`,`${a}-item-value-block`],style:c.value,colspan:k.span*2-1},[y(k.data,A)])]))]),S=(P,A)=>_("tr",{class:`${a}-row`,key:`inline-${A}`},[P.map((k,I)=>_("td",{key:`item-${I}`,class:`${a}-item`,colspan:k.span},[_("div",{class:[`${a}-item-label`,`${a}-item-label-inline`],style:u.value},[g(k.data,I)]),_("div",{class:[`${a}-item-value`,`${a}-item-value-inline`],style:c.value},[y(k.data,I)])]))]),w=(P,A)=>["inline-horizontal","inline-vertical"].includes(e.layout)?S(P,A):e.layout==="vertical"?b(P):x(P,A),E=T(()=>[a,`${a}-layout-${e.layout}`,`${a}-size-${n.value}`,{[`${a}-border`]:e.bordered},{[`${a}-table-layout-fixed`]:e.tableLayout==="fixed"}]),M=()=>{var P,A;const k=(A=(P=t.title)==null?void 0:P.call(t))!=null?A:e.title;return k?_("div",{class:`${a}-title`},[k]):null};return()=>{const P=t.default?v(ul(t.default())):m.value;return _("div",{class:E.value},[M(),_("div",{class:`${a}-body`},[_("table",{class:`${a}-table`},[_("tbody",null,[P.map((A,k)=>w(A,k))])])])])}}});const BAe=se({name:"DescriptionsItem",props:{span:{type:Number,default:1},label:String},setup(e){var t;const{span:i}=yt(e),r=Se("descriptions"),a=Ai(oj,{}),n=xs(),s=ie(),{computedIndex:o}=d1({itemRef:s,selector:`.${r}-item-value`,parentClassName:`${r}-table`}),l=gt({index:o.value,span:i.value});n?.uid&&((t=a.addItem)==null||t.call(a,n.uid,l));const u=()=>{var c;const d=((c=n?.proxy)==null?void 0:c.$el).parentElement;d&&d!==s.value&&(s.value=d)};return xi(()=>u()),Ss(()=>u()),Tn(()=>{var c;n?.uid&&((c=a.removeItem)==null||c.call(a,n.uid))}),{prefixCls:r}}});function zAe(e,t,i,r,a,n){return ye(e.$slots,"default")}var P0=We(BAe,[["render",zAe]]);const RAe=Object.assign(ZS,{DescriptionsItem:P0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+ZS.name,ZS),e.component(i+P0.name,P0)}});var QS=se({name:"Divider",props:{direction:{type:String,default:"horizontal"},orientation:{type:String,default:"center"},type:{type:String},size:{type:Number},margin:{type:[Number,String]}},setup(e,{slots:t}){const i=Se("divider"),r=T(()=>e.direction==="horizontal"),a=T(()=>{const n={};if(e.size&&(n[r.value?"border-bottom-width":"border-left-width"]=Mt(e.size)?`${e.size}px`:e.size),e.type&&(n[r.value?"border-bottom-style":"border-left-style"]=e.type),!ei(e.margin)){const s=Mt(e.margin)?`${e.margin}px`:e.margin;n.margin=r.value?`${s} 0`:`0 ${s}`}return n});return()=>{var n;const s=(n=t.default)==null?void 0:n.call(t),o=[i,`${i}-${e.direction}`,{[`${i}-with-text`]:s}];return _("div",{role:"separator",class:o,style:a.value},[s&&e.direction==="horizontal"&&_("span",{class:[`${i}-text`,`${i}-text-${e.orientation}`]},[s])])}}});const NAe=Object.assign(QS,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+QS.name,QS)}}),lj=e=>{const t=ie(!1),i={overflow:"",width:"",boxSizing:""};return{setOverflowHidden:()=>{if(e.value){const n=e.value;if(!t.value&&n.style.overflow!=="hidden"){const s=U9(n);(s>0||$9(n))&&(i.overflow=n.style.overflow,i.width=n.style.width,i.boxSizing=n.style.boxSizing,n.style.overflow="hidden",n.style.width=`${n.offsetWidth-s}px`,n.style.boxSizing="border-box",t.value=!0)}}},resetOverflow:()=>{if(e.value&&t.value){const n=e.value;n.style.overflow=i.overflow,n.style.width=i.width,n.style.boxSizing=i.boxSizing,t.value=!1}}}};var VAe=Object.defineProperty,u5=Object.getOwnPropertySymbols,FAe=Object.prototype.hasOwnProperty,jAe=Object.prototype.propertyIsEnumerable,c5=(e,t,i)=>t in e?VAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$Ae=(e,t)=>{for(var i in t||(t={}))FAe.call(t,i)&&c5(e,i,t[i]);if(u5)for(var i of u5(t))jAe.call(t,i)&&c5(e,i,t[i]);return e};const UAe=["top","right","bottom","left"],WAe=se({name:"Drawer",components:{ClientOnly:oE,ArcoButton:un,IconHover:Ur,IconClose:kn},inheritAttrs:!1,props:{visible:{type:Boolean,default:!1},defaultVisible:{type:Boolean,default:!1},placement:{type:String,default:"right",validator:e=>UAe.includes(e)},title:String,mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},unmountOnClose:Boolean,width:{type:[Number,String],default:250},height:{type:[Number,String],default:250},popupContainer:{type:[String,Object],default:"body"},drawerStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1}},emits:{"update:visible":e=>!0,ok:e=>!0,cancel:e=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(e,{emit:t}){const{popupContainer:i}=yt(e),r=Se("drawer"),{t:a}=Yr(),n=ie(e.defaultVisible),s=T(()=>{var O;return(O=e.visible)!=null?O:n.value}),o=ie(!1),l=T(()=>e.okLoading||o.value),{teleportContainer:u,containerRef:c}=lE({popupContainer:i,visible:s}),d=ie(s.value);let h=!1;const p=O=>{e.escToClose&&O.key===Kr.ESC&&g()&&w(O)},f=()=>{e.escToClose&&!h&&(h=!0,wr(document.documentElement,"keydown",p))},v=()=>{h&&(h=!1,Ir(document.documentElement,"keydown",p))},{zIndex:m,isLastDialog:g}=cp("dialog",{visible:s}),y=T(()=>c?.value===document.body);let b=0;const x=()=>{b++,o.value&&(o.value=!1),n.value=!1,t("update:visible",!1)},S=async O=>{const D=b,F=await new Promise(async U=>{var z;if(Zt(e.onBeforeOk)){let B=e.onBeforeOk((W=!0)=>U(W));if((ld(B)||!jn(B))&&(o.value=!0),ld(B))try{B=(z=await B)!=null?z:!0}catch{B=!1}jn(B)&&U(B)}else U(!0)});D===b&&(F?(t("ok",O),x()):o.value&&(o.value=!1))},w=O=>{var D;let F=!0;Zt(e.onBeforeCancel)&&(F=(D=e.onBeforeCancel())!=null?D:!1),F&&(t("cancel",O),x())},E=O=>{e.maskClosable&&w(O)},M=()=>{s.value&&t("open")},P=()=>{s.value||(d.value=!1,k(),t("close"))},{setOverflowHidden:A,resetOverflow:k}=lj(c);xi(()=>{s.value&&(d.value=!0,A(),f())}),Tn(()=>{k(),v()}),Vt(s,O=>{n.value!==O&&(n.value=O),O?(t("beforeOpen"),d.value=!0,A(),f()):(t("beforeClose"),v())});const I=T(()=>{var O;const D=$Ae({[e.placement]:0},(O=e.drawerStyle)!=null?O:{});return["right","left"].includes(e.placement)?D.width=Mt(e.width)?`${e.width}px`:e.width:D.height=Mt(e.height)?`${e.height}px`:e.height,D});return{prefixCls:r,style:I,t:a,mounted:d,computedVisible:s,mergedOkLoading:l,zIndex:m,handleOk:S,handleCancel:w,handleOpen:M,handleClose:P,handleMask:E,isFixed:y,teleportContainer:u}}});function HAe(e,t,i,r,a,n){const s=be("icon-close"),o=be("icon-hover"),l=be("arco-button"),u=be("client-only");return N(),De(u,null,{default:He(()=>[(N(),De(Cb,{to:e.teleportContainer,disabled:!e.renderToBody},[!e.unmountOnClose||e.computedVisible||e.mounted?Ys((N(),ee("div",it({key:0,class:`${e.prefixCls}-container`,style:e.isFixed?{zIndex:e.zIndex}:{zIndex:"inherit",position:"absolute"}},e.$attrs),[_(rs,{name:"fade-drawer",appear:""},{default:He(()=>[e.mask?Ys((N(),ee("div",{key:0,class:Y(`${e.prefixCls}-mask`),onClick:t[0]||(t[0]=(...c)=>e.handleMask&&e.handleMask(...c))},null,2)),[[Xs,e.computedVisible]]):Me("v-if",!0)]),_:1}),_(rs,{name:`slide-${e.placement}-drawer`,appear:"",onAfterEnter:e.handleOpen,onAfterLeave:e.handleClose},{default:He(()=>[Ys(ve("div",{class:Y(e.prefixCls),style:It(e.style)},[e.header?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-header`)},[ye(e.$slots,"header",{},()=>[e.$slots.title||e.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),e.closable?(N(),ee("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:Y(`${e.prefixCls}-close-btn`),onClick:t[1]||(t[1]=(...c)=>e.handleCancel&&e.handleCancel(...c))},[_(o,null,{default:He(()=>[_(s)]),_:1})],2)):Me("v-if",!0)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-body`)},[ye(e.$slots,"default")],2),e.footer?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer",{},()=>[e.hideCancel?Me("v-if",!0):(N(),De(l,it({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:He(()=>[ti(Bt(e.cancelText||e.t("drawer.cancelText")),1)]),_:1},16,["onClick"])),_(l,it({type:"primary",loading:e.mergedOkLoading},e.okButtonProps,{onClick:e.handleOk}),{default:He(()=>[ti(Bt(e.okText||e.t("drawer.okText")),1)]),_:1},16,["loading","onClick"])])],2)):Me("v-if",!0)],6),[[Xs,e.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],16)),[[Xs,e.computedVisible||e.mounted]]):Me("v-if",!0)],8,["to","disabled"]))]),_:3})}var T0=We(WAe,[["render",HAe]]),GAe=Object.defineProperty,d5=Object.getOwnPropertySymbols,qAe=Object.prototype.hasOwnProperty,YAe=Object.prototype.propertyIsEnumerable,h5=(e,t,i)=>t in e?GAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,JS=(e,t)=>{for(var i in t||(t={}))qAe.call(t,i)&&h5(e,i,t[i]);if(d5)for(var i of d5(t))YAe.call(t,i)&&h5(e,i,t[i]);return e};const p5=(e,t)=>{let i=_b("drawer");const r=()=>{u.component&&(u.component.props.visible=!1),Zt(e.onOk)&&e.onOk()},a=()=>{u.component&&(u.component.props.visible=!1),Zt(e.onCancel)&&e.onCancel()},n=async()=>{await hr(),i&&(nc(null,i),document.body.removeChild(i)),i=null,Zt(e.onClose)&&e.onClose()},s=()=>{u.component&&(u.component.props.visible=!1)},o=c=>{u.component&&Object.entries(c).forEach(([d,h])=>{u.component.props[d]=h})},u=_(T0,JS(JS(JS({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:r,onCancel:a,onClose:n}),ln(e,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{header:typeof e.header=="boolean"?e.header:void 0,footer:typeof e.footer=="boolean"?e.footer:void 0}),{default:Qn(e.content),header:typeof e.header!="boolean"?Qn(e.header):void 0,title:Qn(e.title),footer:typeof e.footer!="boolean"?Qn(e.footer):void 0});return(t??FM._context)&&(u.appContext=t??FM._context),nc(u,i),document.body.appendChild(i),{close:s,update:o}},FM=Object.assign(T0,{open:p5,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+T0.name,T0);const r={open:(a,n=e._context)=>p5(a,n)};e.config.globalProperties.$drawer=r},_context:null});function uj(e){return e===Object(e)&&Object.keys(e).length!==0}function XAe(e,t){t===void 0&&(t="auto");var i="scrollBehavior"in document.body.style;e.forEach(function(r){var a=r.el,n=r.top,s=r.left;a.scroll&&i?a.scroll({top:n,left:s,behavior:t}):(a.scrollTop=n,a.scrollLeft=s)})}function KAe(e){return e===!1?{block:"end",inline:"nearest"}:uj(e)?e:{block:"start",inline:"nearest"}}function cj(e,t){var i=e.isConnected||e.ownerDocument.documentElement.contains(e);if(uj(t)&&typeof t.behavior=="function")return t.behavior(i?OM(e,t):[]);if(i){var r=KAe(t);return XAe(OM(e,r),r.behavior)}}const f5=["success","warning","error","validating"],ZAe=e=>{let t="";for(const i of Object.keys(e)){const r=e[i];r&&(!t||f5.indexOf(r)>f5.indexOf(t))&&(t=e[i])}return t},QAe=e=>{const t=[];for(const i of Object.keys(e)){const r=e[i];r&&t.push(r)}return t},dj=(e,t)=>{const i=t.replace(/[[.]/g,"_").replace(/\]/g,"");return e?`${e}-${i}`:`${i}`};var JAe=Object.defineProperty,m5=Object.getOwnPropertySymbols,ePe=Object.prototype.hasOwnProperty,tPe=Object.prototype.propertyIsEnumerable,v5=(e,t,i)=>t in e?JAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,iPe=(e,t)=>{for(var i in t||(t={}))ePe.call(t,i)&&v5(e,i,t[i]);if(m5)for(var i of m5(t))tPe.call(t,i)&&v5(e,i,t[i]);return e};const rPe=se({name:"Form",props:{model:{type:Object,required:!0},layout:{type:String,default:"horizontal"},size:{type:String},labelColProps:{type:Object,default:()=>({span:5,offset:0})},wrapperColProps:{type:Object,default:()=>({span:19,offset:0})},labelColStyle:Object,wrapperColStyle:Object,labelAlign:{type:String,default:"right"},disabled:{type:Boolean,default:void 0},rules:{type:Object},autoLabelWidth:{type:Boolean,default:!1},id:{type:String},scrollToFirstError:{type:Boolean,default:!1}},emits:{submit:(e,t)=>!0,submitSuccess:(e,t)=>!0,submitFailed:(e,t)=>!0},setup(e,{emit:t}){const i=Se("form"),r=ie(),{id:a,model:n,layout:s,disabled:o,labelAlign:l,labelColProps:u,wrapperColProps:c,labelColStyle:d,wrapperColStyle:h,size:p,rules:f}=yt(e),{mergedSize:v}=hn(p),m=T(()=>e.layout==="horizontal"&&e.autoLabelWidth),g=[],y=[],b=gt({}),x=T(()=>Math.max(...Object.values(b))),S=B=>{B&&B.field&&g.push(B)},w=B=>{B&&B.field&&g.splice(g.indexOf(B),1)},E=B=>{g.forEach(W=>{B[W.field]&&W.setField(B[W.field])})},M=(B,W)=>{W&&b[W]!==B&&(b[W]=B)},P=B=>{B&&delete b[B]},A=B=>{const W=B?[].concat(B):[];g.forEach(R=>{(W.length===0||W.includes(R.field))&&R.resetField()})},k=B=>{const W=B?[].concat(B):[];g.forEach(R=>{(W.length===0||W.includes(R.field))&&R.clearValidate()})},I=(B,W)=>{const $=(r.value||document.body).querySelector(`#${dj(e.id,B)}`);$&&cj($,iPe({behavior:"smooth",block:"nearest",scrollMode:"if-needed"},W))},O=B=>{const W=jn(e.scrollToFirstError)?void 0:e.scrollToFirstError;I(B,W)},D=B=>{const W=[];return g.forEach(R=>{W.push(R.validate())}),Promise.all(W).then(R=>{const $={};let q=!1;return R.forEach(Z=>{Z&&(q=!0,$[Z.field]=Z)}),q&&e.scrollToFirstError&&O(Object.keys($)[0]),Zt(B)&&B(q?$:void 0),q?$:void 0})},F=(B,W)=>{const R=[];for(const $ of g)(bi(B)&&B.includes($.field)||B===$.field)&&R.push($.validate());return Promise.all(R).then($=>{const q={};let Z=!1;return $.forEach(G=>{G&&(Z=!0,q[G.field]=G)}),Z&&e.scrollToFirstError&&O(Object.keys(q)[0]),Zt(W)&&W(Z?q:void 0),Z?q:void 0})},U=B=>{const W=[];g.forEach(R=>{W.push(R.validate())}),Promise.all(W).then(R=>{const $={};let q=!1;R.forEach(Z=>{Z&&(q=!0,$[Z.field]=Z)}),q?(e.scrollToFirstError&&O(Object.keys($)[0]),t("submitFailed",{values:n.value,errors:$},B)):t("submitSuccess",n.value,B),t("submit",{values:n.value,errors:q?$:void 0},B)})};return dr(sE,gt({id:a,layout:s,disabled:o,labelAlign:l,labelColProps:u,wrapperColProps:c,labelColStyle:d,wrapperColStyle:h,model:n,size:v,rules:f,fields:g,touchedFields:y,addField:S,removeField:w,validateField:F,setLabelWidth:M,removeLabelWidth:P,maxLabelWidth:x,autoLabelWidth:m})),{cls:T(()=>[i,`${i}-layout-${e.layout}`,`${i}-size-${v.value}`,{[`${i}-auto-label-width`]:e.autoLabelWidth}]),formRef:r,handleSubmit:U,innerValidate:D,innerValidateField:F,innerResetFields:A,innerClearValidate:k,innerSetFields:E,innerScrollToField:I}},methods:{validate(e){return this.innerValidate(e)},validateField(e,t){return this.innerValidateField(e,t)},resetFields(e){return this.innerResetFields(e)},clearValidate(e){return this.innerClearValidate(e)},setFields(e){return this.innerSetFields(e)},scrollToField(e){return this.innerScrollToField(e)}}});function aPe(e,t,i,r,a,n){return N(),ee("form",{ref:"formRef",class:Y(e.cls),onSubmit:t[0]||(t[0]=ks((...s)=>e.handleSubmit&&e.handleSubmit(...s),["prevent"]))},[ye(e.$slots,"default")],34)}var eC=We(rPe,[["render",aPe]]),Op=Object.prototype.toString;function g1(e){return Op.call(e)==="[object Array]"}function ru(e){return Op.call(e)==="[object Object]"}function jM(e){return Op.call(e)==="[object String]"}function nPe(e){return Op.call(e)==="[object Number]"&&e===e}function sPe(e){return Op.call(e)==="[object Boolean]"}function $M(e){return Op.call(e)==="[object Function]"}function oPe(e){return ru(e)&&Object.keys(e).length===0}function Dc(e){return e==null||e===""}function hj(e){return g1(e)&&!e.length}var _P=function(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if($M(e)&&$M(t))return e===t||e.toString()===t.toString();if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e){var r=_P(e[i],t[i]);if(!r)return!1}return!0},MP=function(e,t){var i=Object.assign({},e);return Object.keys(t||{}).forEach(function(r){var a=i[r],n=t?.[r];i[r]=ru(a)?Object.assign(Object.assign({},a),n):n||a}),i},lPe=function(e,t){for(var i=t.split("."),r=e,a=0;a<i.length;a++)if(r=r&&r[i[a]],r===void 0)return r;return r},Lu="#{field} is not a #{type} type",uPe={required:"#{field} is required",type:{ip:Lu,email:Lu,url:Lu,string:Lu,number:Lu,array:Lu,object:Lu,boolean:Lu},number:{min:"`#{value}` is not greater than `#{min}`",max:"`#{value}` is not less than `#{max}`",equal:"`#{value}` is not equal to `#{equal}`",range:"`#{value}` is not in range `#{min} ~ #{max}`",positive:"`#{value}` is not a positive number",negative:"`#{value}` is not a negative number"},string:{maxLength:"#{field} cannot be longer than #{maxLength} characters",minLength:"#{field} must be at least #{minLength} characters",length:"#{field} must be exactly #{length} characters",match:"`#{value}` does not match pattern #{pattern}",uppercase:"`#{value}` must be all uppercase",lowercase:"`#{value}` must be all lowercased"},array:{length:"#{field} must be exactly #{length} in length",minLength:"#{field} cannot be less than #{minLength} in length",maxLength:"#{field} cannot be greater than #{maxLength} in length",includes:"#{field} is not includes #{includes}",deepEqual:"#{field} is not deep equal with #{deepEqual}",empty:"#{field} is not an empty array"},object:{deepEqual:"#{field} is not deep equal to expected value",hasKeys:"#{field} does not contain required fields",empty:"#{field} is not an empty object"},boolean:{true:"Expect true but got `#{value}`",false:"Expect false but got `#{value}`"}},Ro=function(t,i){var r=this;this.getValidateMsg=function(a,n){n===void 0&&(n={});var s=Object.assign(Object.assign({},n),{value:r.obj,field:r.field,type:r.type}),o=lPe(r.validateMessages,a);return $M(o)?o(s):jM(o)?o.replace(/\#\{.+?\}/g,function(l){var u=l.slice(2,-1);if(u in s){if(ru(s[u])||g1(s[u]))try{return JSON.stringify(s[u])}catch{return s[u]}return String(s[u])}return l}):o},ru(i)&&jM(t)&&i.trim?this.obj=t.trim():ru(i)&&i.ignoreEmptyString&&t===""?this.obj=void 0:this.obj=t,this.message=i.message,this.type=i.type,this.error=null,this.field=i.field||i.type,this.validateMessages=MP(uPe,i.validateMessages)},y1={not:{configurable:!0},isRequired:{configurable:!0},end:{configurable:!0}};y1.not.get=function(){return this._not=!this._not,this};y1.isRequired.get=function(){if(Dc(this.obj)||hj(this.obj)){var e=this.getValidateMsg("required");this.error={value:this.obj,type:this.type,requiredError:!0,message:this.message||(ru(e)?e:(this._not?"[NOT MODE]:":"")+e)}}return this};y1.end.get=function(){return this.error};Ro.prototype.addError=function(t){!this.error&&t&&(this.error={value:this.obj,type:this.type,message:this.message||(ru(t)?t:(this._not?"[NOT MODE]:":"")+t)})};Ro.prototype.validate=function(t,i){var r=this._not?t:!t;return r&&this.addError(i),this};Ro.prototype.collect=function(t){t&&t(this.error)};Object.defineProperties(Ro.prototype,y1);var cPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"string"})),this.validate(a&&a.strict?jM(this.obj):!0,this.getValidateMsg("type.string"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={uppercase:{configurable:!0},lowercase:{configurable:!0}};return t.prototype.maxLength=function(a){return this.obj?this.validate(this.obj.length<=a,this.getValidateMsg("string.maxLength",{maxLength:a})):this},t.prototype.minLength=function(a){return this.obj?this.validate(this.obj.length>=a,this.getValidateMsg("string.minLength",{minLength:a})):this},t.prototype.length=function(a){return this.obj?this.validate(this.obj.length===a,this.getValidateMsg("string.length",{length:a})):this},t.prototype.match=function(a){var n=a instanceof RegExp;return n&&(a.lastIndex=0),this.validate(this.obj===void 0||n&&a.test(this.obj),this.getValidateMsg("string.match",{pattern:a}))},i.uppercase.get=function(){return this.obj?this.validate(this.obj.toUpperCase()===this.obj,this.getValidateMsg("string.uppercase")):this},i.lowercase.get=function(){return this.obj?this.validate(this.obj.toLowerCase()===this.obj,this.getValidateMsg("string.lowercase")):this},Object.defineProperties(t.prototype,i),t}(Ro),dPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"number"})),this.validate(a&&a.strict?nPe(this.obj):!0,this.getValidateMsg("type.number"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={positive:{configurable:!0},negative:{configurable:!0}};return t.prototype.min=function(a){return Dc(this.obj)?this:this.validate(this.obj>=a,this.getValidateMsg("number.min",{min:a}))},t.prototype.max=function(a){return Dc(this.obj)?this:this.validate(this.obj<=a,this.getValidateMsg("number.max",{max:a}))},t.prototype.equal=function(a){return Dc(this.obj)?this:this.validate(this.obj===a,this.getValidateMsg("number.equal",{equal:a}))},t.prototype.range=function(a,n){return Dc(this.obj)?this:this.validate(this.obj>=a&&this.obj<=n,this.getValidateMsg("number.range",{min:a,max:n}))},i.positive.get=function(){return Dc(this.obj)?this:this.validate(this.obj>0,this.getValidateMsg("number.positive"))},i.negative.get=function(){return Dc(this.obj)?this:this.validate(this.obj<0,this.getValidateMsg("number.negative"))},Object.defineProperties(t.prototype,i),t}(Ro),hPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"array"})),this.validate(a&&a.strict?g1(this.obj):!0,this.getValidateMsg("type.array",{value:this.obj,type:this.type}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={empty:{configurable:!0}};return t.prototype.length=function(a){return this.obj?this.validate(this.obj.length===a,this.getValidateMsg("array.length",{value:this.obj,length:a})):this},t.prototype.minLength=function(a){return this.obj?this.validate(this.obj.length>=a,this.getValidateMsg("array.minLength",{value:this.obj,minLength:a})):this},t.prototype.maxLength=function(a){return this.obj?this.validate(this.obj.length<=a,this.getValidateMsg("array.maxLength",{value:this.obj,maxLength:a})):this},t.prototype.includes=function(a){var n=this;return this.obj?this.validate(a.every(function(s){return n.obj.indexOf(s)!==-1}),this.getValidateMsg("array.includes",{value:this.obj,includes:a})):this},t.prototype.deepEqual=function(a){return this.obj?this.validate(_P(this.obj,a),this.getValidateMsg("array.deepEqual",{value:this.obj,deepEqual:a})):this},i.empty.get=function(){return this.validate(hj(this.obj),this.getValidateMsg("array.empty",{value:this.obj}))},Object.defineProperties(t.prototype,i),t}(Ro),pPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"object"})),this.validate(a&&a.strict?ru(this.obj):!0,this.getValidateMsg("type.object"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={empty:{configurable:!0}};return t.prototype.deepEqual=function(a){return this.obj?this.validate(_P(this.obj,a),this.getValidateMsg("object.deepEqual",{deepEqual:a})):this},t.prototype.hasKeys=function(a){var n=this;return this.obj?this.validate(a.every(function(s){return n.obj[s]}),this.getValidateMsg("object.hasKeys",{keys:a})):this},i.empty.get=function(){return this.validate(oPe(this.obj),this.getValidateMsg("object.empty"))},Object.defineProperties(t.prototype,i),t}(Ro),fPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"boolean"})),this.validate(a&&a.strict?sPe(this.obj):!0,this.getValidateMsg("type.boolean"))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={true:{configurable:!0},false:{configurable:!0}};return i.true.get=function(){return this.validate(this.obj===!0,this.getValidateMsg("boolean.true"))},i.false.get=function(){return this.validate(this.obj===!1,this.getValidateMsg("boolean.false"))},Object.defineProperties(t.prototype,i),t}(Ro),mPe=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,vPe=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),gPe=/^(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})(\.(2(5[0-5]{1}|[0-4]\d{1})|[0-1]?\d{1,2})){3}$/,yPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"type"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={email:{configurable:!0},url:{configurable:!0},ip:{configurable:!0}};return i.email.get=function(){return this.type="email",this.validate(this.obj===void 0||mPe.test(this.obj),this.getValidateMsg("type.email"))},i.url.get=function(){return this.type="url",this.validate(this.obj===void 0||vPe.test(this.obj),this.getValidateMsg("type.url"))},i.ip.get=function(){return this.type="ip",this.validate(this.obj===void 0||gPe.test(this.obj),this.getValidateMsg("type.ip"))},Object.defineProperties(t.prototype,i),t}(Ro),bPe=function(e){function t(r,a){e.call(this,r,Object.assign(Object.assign({},a),{type:"custom"}))}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={validate:{configurable:!0}};return i.validate.get=function(){var r=this;return function(a,n){var s;if(a)return s=a(r.obj,r.addError.bind(r)),s&&s.then?(n&&s.then(function(){n&&n(r.error)},function(o){console.error(o)}),[s,r]):(n&&n(r.error),r.error)}},Object.defineProperties(t.prototype,i),t}(Ro),gb=function(e,t){return new pj(e,Object.assign({field:"value"},t))};gb.globalConfig={};gb.setGlobalConfig=function(e){gb.globalConfig=e||{}};var pj=function(t,i){var r=gb.globalConfig,a=Object.assign(Object.assign(Object.assign({},r),i),{validateMessages:MP(r.validateMessages,i.validateMessages)});this.string=new cPe(t,a),this.number=new dPe(t,a),this.array=new hPe(t,a),this.object=new pPe(t,a),this.boolean=new fPe(t,a),this.type=new yPe(t,a),this.custom=new bPe(t,a)},EP=function(t,i){i===void 0&&(i={}),this.schema=t,this.options=i};EP.prototype.messages=function(t){this.options=Object.assign(Object.assign({},this.options),{validateMessages:MP(this.options.validateMessages,t)})};EP.prototype.validate=function(t,i){var r=this;if(!ru(t))return;var a=[],n=null;function s(o,l){n||(n={}),(!n[o]||l.requiredError)&&(n[o]=l)}this.schema&&Object.keys(this.schema).forEach(function(o){if(g1(r.schema[o]))for(var l=function(d){var h=r.schema[o][d],p=h.type,f=h.message;if(!p&&!h.validator)throw"You must specify a type to field "+o+"!";var v=Object.assign(Object.assign({},r.options),{message:f,field:o});"ignoreEmptyString"in h&&(v.ignoreEmptyString=h.ignoreEmptyString),"strict"in h&&(v.strict=h.strict);var m=new pj(t[o],v),g=m.type[p]||null;if(!g)if(h.validator){g=m.custom.validate(h.validator),Object.prototype.toString.call(g)==="[object Array]"&&g[0].then?a.push({function:g[0],_this:g[1],key:o}):g&&s(o,g);return}else g=m[p];if(Object.keys(h).forEach(function(y){h.required&&(g=g.isRequired),y!=="message"&&g[y]&&h[y]&&typeof g[y]=="object"&&(g=g[y]),g[y]&&h[y]!==void 0&&typeof g[y]=="function"&&(g=g[y](h[y]))}),g.collect(function(y){y&&s(o,y)}),n)return"break"},u=0;u<r.schema[o].length;u++){var c=l(u);if(c==="break")break}}),a.length>0?Promise.all(a.map(function(o){return o.function})).then(function(){a.forEach(function(o){o._this.error&&s(o.key,o._this.error)}),i&&i(n)}):i&&i(n)};const wPe=se({name:"IconQuestionCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-question-circle`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),xPe=["stroke-width","stroke-linecap","stroke-linejoin"],SPe=ve("path",{d:"M42 24c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),CPe=ve("path",{d:"M24.006 31v4.008m0-6.008L24 28c0-3 3-4 4.78-6.402C30.558 19.195 28.288 15 23.987 15c-4.014 0-5.382 2.548-5.388 4.514v.465"},null,-1),_Pe=[SPe,CPe];function MPe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},_Pe,14,xPe)}var tC=We(wPe,[["render",MPe]]);const EPe=Object.assign(tC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+tC.name,tC)}}),APe=se({name:"FormItemLabel",components:{ResizeObserver:oc,Tooltip:eo,IconQuestionCircle:EPe},props:{required:{type:Boolean,default:!1},showColon:{type:Boolean,default:!1},component:{type:String,default:"label"},asteriskPosition:{type:String,default:"start"},tooltip:{type:String},attrs:Object},setup(){const e=Se("form-item-label"),t=Ai(sE,void 0),i=xs(),r=ie(),a=()=>{r.value&&Mt(r.value.offsetWidth)&&t?.setLabelWidth(r.value.offsetWidth,i?.uid)};return xi(()=>{r.value&&Mt(r.value.offsetWidth)&&t?.setLabelWidth(r.value.offsetWidth,i?.uid)}),Tn(()=>{t?.removeLabelWidth(i?.uid)}),{prefixCls:e,labelRef:r,handleResize:a}}}),PPe=ve("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[ve("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),TPe=[PPe],kPe=ve("svg",{fill:"currentColor",viewBox:"0 0 1024 1024",width:"1em",height:"1em"},[ve("path",{d:"M583.338667 17.066667c18.773333 0 34.133333 15.36 34.133333 34.133333v349.013333l313.344-101.888a34.133333 34.133333 0 0 1 43.008 22.016l42.154667 129.706667a34.133333 34.133333 0 0 1-21.845334 43.178667l-315.733333 102.4 208.896 287.744a34.133333 34.133333 0 0 1-7.509333 47.786666l-110.421334 80.213334a34.133333 34.133333 0 0 1-47.786666-7.509334L505.685333 706.218667 288.426667 1005.226667a34.133333 34.133333 0 0 1-47.786667 7.509333l-110.421333-80.213333a34.133333 34.133333 0 0 1-7.509334-47.786667l214.186667-295.253333L29.013333 489.813333a34.133333 34.133333 0 0 1-22.016-43.008l42.154667-129.877333a34.133333 34.133333 0 0 1 43.008-22.016l320.512 104.106667L412.672 51.2c0-18.773333 15.36-34.133333 34.133333-34.133333h136.533334z"})],-1),OPe=[kPe];function DPe(e,t,i,r,a,n){const s=be("icon-question-circle"),o=be("Tooltip"),l=be("ResizeObserver");return N(),De(l,{onResize:e.handleResize},{default:He(()=>[(N(),De(bs(e.component),it({ref:"labelRef",class:e.prefixCls},e.attrs),{default:He(()=>[e.required&&e.asteriskPosition==="start"?(N(),ee("strong",{key:0,class:Y(`${e.prefixCls}-required-symbol`)},TPe,2)):Me("v-if",!0),ye(e.$slots,"default"),e.tooltip?(N(),De(o,{key:1,content:e.tooltip},{default:He(()=>[_(s,{class:Y(`${e.prefixCls}-tooltip`)},null,8,["class"])]),_:1},8,["content"])):Me("v-if",!0),e.required&&e.asteriskPosition==="end"?(N(),ee("strong",{key:2,class:Y(`${e.prefixCls}-required-symbol`)},OPe,2)):Me("v-if",!0),ti(" "+Bt(e.showColon?":":""),1)]),_:3},16,["class"]))]),_:3},8,["onResize"])}var IPe=We(APe,[["render",DPe]]);const LPe=se({name:"FormItemMessage",props:{error:{type:Array,default:()=>[]},help:String},setup(){return{prefixCls:Se("form-item-message")}}});function BPe(e,t,i,r,a,n){return e.error.length>0?(N(!0),ee(Xt,{key:0},Br(e.error,s=>(N(),De(rs,{key:s,name:"form-blink",appear:""},{default:He(()=>[ve("div",{role:"alert",class:Y([e.prefixCls])},Bt(s),3)]),_:2},1024))),128)):e.help||e.$slots.help?(N(),De(rs,{key:1,name:"form-blink",appear:""},{default:He(()=>[ve("div",{class:Y([e.prefixCls,`${e.prefixCls}-help`])},[ye(e.$slots,"help",{},()=>[ti(Bt(e.help),1)])],2)]),_:3})):Me("v-if",!0)}var zPe=We(LPe,[["render",BPe]]);const fj=Symbol("RowContextInjectionKey"),mj=Symbol("GridContextInjectionKey"),vj=Symbol("GridDataCollectorInjectionKey"),RPe=se({name:"Row",props:{gutter:{type:[Number,Object,Array],default:0},justify:{type:String,default:"start"},align:{type:String,default:"start"},div:{type:Boolean},wrap:{type:Boolean,default:!0}},setup(e){const{gutter:t,align:i,justify:r,div:a,wrap:n}=yt(e),s=Se("row"),o=T(()=>({[`${s}`]:!a.value,[`${s}-nowrap`]:!n.value,[`${s}-align-${i.value}`]:i.value,[`${s}-justify-${r.value}`]:r.value})),l=T(()=>Array.isArray(t.value)?t.value[0]:t.value),u=T(()=>Array.isArray(t.value)?t.value[1]:0),c=iu(l,0),d=iu(u,0),h=T(()=>{const f={};if((c.value||d.value)&&!a.value){const v=-c.value/2,m=-d.value/2;v&&(f.marginLeft=`${v}px`,f.marginRight=`${v}px`),m&&(f.marginTop=`${m}px`,f.marginBottom=`${m}px`)}return f}),p=T(()=>[c.value,d.value]);return dr(fj,gt({gutter:p,div:a})),{classNames:o,styles:h}}});function NPe(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.classNames),style:It(e.styles)},[ye(e.$slots,"default")],6)}var Hf=We(RPe,[["render",NPe]]);function VPe(e){return T(()=>{const{val:i,key:r,xs:a,sm:n,md:s,lg:o,xl:l,xxl:u}=e.value;if(!a&&!n&&!s&&!o&&!l&&!u)return i;const c={};return mb.forEach(d=>{const h=e.value[d];Mt(h)?c[d]=h:ki(h)&&Mt(h[r])&&(c[d]=h[r])}),c})}var FPe=Object.defineProperty,g5=Object.getOwnPropertySymbols,jPe=Object.prototype.hasOwnProperty,$Pe=Object.prototype.propertyIsEnumerable,y5=(e,t,i)=>t in e?FPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,iC=(e,t)=>{for(var i in t||(t={}))jPe.call(t,i)&&y5(e,i,t[i]);if(g5)for(var i of g5(t))$Pe.call(t,i)&&y5(e,i,t[i]);return e};function UPe(e){if(na(e)&&(["initial","auto","none"].includes(e)||/^\d+$/.test(e))||Mt(e))return e;if(na(e)&&/^\d+(px|em|rem|%)$/.test(e))return`0 0 ${e}`}const WPe=se({name:"Col",props:{span:{type:Number,default:24},offset:{type:Number},order:{type:Number},xs:{type:[Number,Object]},sm:{type:[Number,Object]},md:{type:[Number,Object]},lg:{type:[Number,Object]},xl:{type:[Number,Object]},xxl:{type:[Number,Object]},flex:{type:[Number,String]}},setup(e){const t=Se("col"),i=Ai(fj,{}),r=T(()=>UPe(e.flex)),a=T(()=>{const{div:d}=i,{span:h,offset:p,order:f,xs:v,sm:m,md:g,lg:y,xl:b,xxl:x}=e,S={[`${t}`]:!d,[`${t}-order-${f}`]:f,[`${t}-${h}`]:!d&&!v&&!m&&!g&&!y&&!b&&!x,[`${t}-offset-${p}`]:p&&p>0},w={xs:v,sm:m,md:g,lg:y,xl:b,xxl:x};return Object.keys(w).forEach(E=>{const M=w[E];M&&Mt(M)?S[`${t}-${E}-${M}`]=!0:M&&ki(M)&&(S[`${t}-${E}-${M.span}`]=M.span,S[`${t}-${E}-offset-${M.offset}`]=M.offset,S[`${t}-${E}-order-${M.order}`]=M.order)}),S}),n=T(()=>r.value?t:a.value),s=T(()=>{const{gutter:d,div:h}=i,p={};if(Array.isArray(d)&&!h){const f=d[0]&&d[0]/2||0,v=d[1]&&d[1]/2||0;f&&(p.paddingLeft=`${f}px`,p.paddingRight=`${f}px`),v&&(p.paddingTop=`${v}px`,p.paddingBottom=`${v}px`)}return p}),o=T(()=>r.value?{flex:r.value}:{}),l=T(()=>ml(e,mb)),u=VPe(T(()=>iC({val:e.span,key:"span"},l.value))),c=iu(u,24,!0);return{visible:T(()=>!!c.value),classNames:n,styles:T(()=>iC(iC({},s.value),o.value))}}});function HPe(e,t,i,r,a,n){return e.visible?(N(),ee("div",{key:0,class:Y(e.classNames),style:It(e.styles)},[ye(e.$slots,"default")],6)):Me("v-if",!0)}var Gf=We(WPe,[["render",HPe]]),GPe=Object.defineProperty,yb=Object.getOwnPropertySymbols,gj=Object.prototype.hasOwnProperty,yj=Object.prototype.propertyIsEnumerable,b5=(e,t,i)=>t in e?GPe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,w5=(e,t)=>{for(var i in t||(t={}))gj.call(t,i)&&b5(e,i,t[i]);if(yb)for(var i of yb(t))yj.call(t,i)&&b5(e,i,t[i]);return e},qPe=(e,t)=>{var i={};for(var r in e)gj.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&yb)for(var r of yb(e))t.indexOf(r)<0&&yj.call(e,r)&&(i[r]=e[r]);return i};const YPe=se({name:"FormItem",components:{ArcoRow:Hf,ArcoCol:Gf,FormItemLabel:IPe,FormItemMessage:zPe},props:{field:{type:String,default:""},label:String,tooltip:{type:String},showColon:{type:Boolean,default:!1},noStyle:{type:Boolean,default:!1},disabled:{type:Boolean,default:void 0},help:String,extra:String,required:{type:Boolean,default:!1},asteriskPosition:{type:String,default:"start"},rules:{type:[Object,Array]},validateStatus:{type:String},validateTrigger:{type:[String,Array],default:"change"},labelColProps:Object,wrapperColProps:Object,hideLabel:{type:Boolean,default:!1},hideAsterisk:{type:Boolean,default:!1},labelColStyle:Object,wrapperColStyle:Object,rowProps:Object,rowClass:[String,Array,Object],contentClass:[String,Array,Object],contentFlex:{type:Boolean,default:!0},mergeProps:{type:[Boolean,Function],default:!0},labelColFlex:{type:[Number,String]},feedback:{type:Boolean,default:!1},labelComponent:{type:String,default:"label"},labelAttrs:Object},setup(e){const t=Se("form-item"),{field:i}=yt(e),r=Ai(sE,{}),{autoLabelWidth:a,layout:n}=yt(r),{i18nMessage:s}=Yr(),o=T(()=>{var R;const $=w5({},(R=e.labelColProps)!=null?R:r.labelColProps);return e.labelColFlex?$.flex=e.labelColFlex:r.autoLabelWidth&&($.flex=`${r.maxLabelWidth}px`),$}),l=T(()=>{var R;const $=w5({},(R=e.wrapperColProps)!=null?R:r.wrapperColProps);return i.value&&($.id=dj(r.id,i.value)),(e.labelColFlex||r.autoLabelWidth)&&($.flex="auto"),$}),u=T(()=>{var R;return(R=e.labelColStyle)!=null?R:r.labelColStyle}),c=T(()=>{var R;return(R=e.wrapperColStyle)!=null?R:r.wrapperColStyle}),d=ad(r.model,e.field),h=gt({}),p=gt({}),f=T(()=>ZAe(h)),v=T(()=>QAe(p)),m=ie(!1),g=T(()=>ad(r.model,e.field)),y=T(()=>{var R;return!!((R=e.disabled)!=null?R:r?.disabled)}),b=T(()=>{var R;return(R=e.validateStatus)!=null?R:f.value}),x=T(()=>b.value==="error"),S=T(()=>{var R,$,q;const Z=[].concat((q=($=e.rules)!=null?$:(R=r?.rules)==null?void 0:R[e.field])!=null?q:[]),G=Z.some(X=>X.required);return e.required&&!G?[{required:!0}].concat(Z):Z}),w=T(()=>S.value.some(R=>R.required)),E=e.noStyle?Ai(M_,void 0):void 0,M=(R,{status:$,message:q})=>{h[R]=$,p[R]=q,e.noStyle&&E?.updateValidateState(R,{status:$,message:q})},P=T(()=>e.feedback&&b.value?b.value:void 0),A=()=>{var R;if(m.value)return Promise.resolve();const $=S.value;if(!i.value||$.length===0)return f.value&&O(),Promise.resolve();const q=i.value,Z=g.value;M(q,{status:"",message:""});const G=new EP({[q]:$.map(X=>{var J=qPe(X,[]);return!J.type&&!J.validator&&(J.type="string"),J})},{ignoreEmptyString:!0,validateMessages:(R=s.value.form)==null?void 0:R.validateMessages});return new Promise(X=>{G.validate({[q]:Z},J=>{var pe;const fe=!!J?.[q];M(q,{status:fe?"error":"",message:(pe=J?.[q].message)!=null?pe:""});const de=fe?{label:e.label,field:i.value,value:J[q].value,type:J[q].type,isRequiredError:!!J[q].requiredError,message:J[q].message}:void 0;X(de)})})},k=T(()=>[].concat(e.validateTrigger)),I=T(()=>k.value.reduce((R,$)=>{switch($){case"change":return R.onChange=()=>{A()},R;case"input":return R.onInput=()=>{hr(()=>{A()})},R;case"focus":return R.onFocus=()=>{A()},R;case"blur":return R.onBlur=()=>{A()},R;default:return R}},{}));dr(M_,gt({eventHandlers:I,size:r&&Os(r,"size"),disabled:y,error:x,feedback:P,updateValidateState:M}));const O=()=>{i.value&&M(i.value,{status:"",message:""})},U=gt({field:i,disabled:y,error:x,validate:A,clearValidate:O,resetField:()=>{O(),m.value=!0,r?.model&&i.value&&hb(r.model,i.value,d),hr(()=>{m.value=!1})},setField:R=>{var $,q;i.value&&(m.value=!0,"value"in R&&r?.model&&i.value&&hb(r.model,i.value,R.value),(R.status||R.message)&&M(i.value,{status:($=R.status)!=null?$:"",message:(q=R.message)!=null?q:""}),hr(()=>{m.value=!1}))}});xi(()=>{var R;U.field&&((R=r.addField)==null||R.call(r,U))}),Tn(()=>{var R;U.field&&((R=r.removeField)==null||R.call(r,U))});const z=T(()=>[t,`${t}-layout-${r.layout}`,{[`${t}-error`]:x.value,[`${t}-status-${b.value}`]:!!b.value},e.rowClass]),B=T(()=>[`${t}-label-col`,{[`${t}-label-col-left`]:r.labelAlign==="left",[`${t}-label-col-flex`]:r.autoLabelWidth||e.labelColFlex}]),W=T(()=>[`${t}-wrapper-col`,{[`${t}-wrapper-col-flex`]:!l.value}]);return{prefixCls:t,cls:z,isRequired:w,isError:x,finalMessage:v,mergedLabelCol:o,mergedWrapperCol:l,labelColCls:B,autoLabelWidth:a,layout:n,mergedLabelStyle:u,wrapperColCls:W,mergedWrapperStyle:c}}});function XPe(e,t,i,r,a,n){var s;const o=be("FormItemLabel"),l=be("ArcoCol"),u=be("FormItemMessage"),c=be("ArcoRow");return e.noStyle?ye(e.$slots,"default",{key:0}):(N(),De(c,it({key:1,class:[e.cls,{[`${e.prefixCls}-has-help`]:!!((s=e.$slots.help)!=null?s:e.help)}],wrap:!(e.labelColFlex||e.autoLabelWidth),div:e.layout!=="horizontal"||e.hideLabel},e.rowProps),{default:He(()=>[e.hideLabel?Me("v-if",!0):(N(),De(l,it({key:0,class:e.labelColCls,style:e.mergedLabelStyle},e.mergedLabelCol),{default:He(()=>[_(o,{required:e.hideAsterisk?!1:e.isRequired,"show-colon":e.showColon,"asterisk-position":e.asteriskPosition,component:e.labelComponent,attrs:e.labelAttrs,tooltip:e.tooltip},{default:He(()=>[e.$slots.label||e.label?ye(e.$slots,"label",{key:0},()=>[ti(Bt(e.label),1)]):Me("v-if",!0)]),_:3},8,["required","show-colon","asterisk-position","component","attrs","tooltip"])]),_:3},16,["class","style"])),_(l,it({class:e.wrapperColCls,style:e.mergedWrapperStyle},e.mergedWrapperCol),{default:He(()=>[ve("div",{class:Y(`${e.prefixCls}-content-wrapper`)},[ve("div",{class:Y([`${e.prefixCls}-content`,{[`${e.prefixCls}-content-flex`]:e.contentFlex},e.contentClass])},[ye(e.$slots,"default")],2)],2),e.isError||e.$slots.help||e.help?(N(),De(u,{key:0,error:e.finalMessage,help:e.help},$r({_:2},[e.$slots.help?{name:"help",fn:He(()=>[ye(e.$slots,"help")])}:void 0]),1032,["error","help"])):Me("v-if",!0),e.$slots.extra||e.extra?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-extra`)},[ye(e.$slots,"extra",{},()=>[ti(Bt(e.extra),1)])],2)):Me("v-if",!0)]),_:3},16,["class","style"])]),_:3},16,["class","wrap","div"]))}var k0=We(YPe,[["render",XPe]]);const KPe=Object.assign(eC,{Item:k0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+eC.name,eC),e.component(i+k0.name,k0)}});function ZPe(e,t){var i,r;const a=(i=t.span)!=null?i:1,n=(r=t.offset)!=null?r:0,s=Math.min(n,e);return{span:Math.min(s>0?a+n:a,e),offset:s,suffix:"suffix"in t?t.suffix!==!1:!1}}function QPe({cols:e,collapsed:t,collapsedRows:i,itemDataList:r}){let a=!1,n=[];function s(o){return Math.ceil(o/e)>i}if(t){let o=0;for(let l=0;l<r.length;l++)r[l].suffix&&(o+=r[l].span,n.push(l));if(!s(o)){let l=0;for(;l<r.length;){const u=r[l];if(!u.suffix){if(o+=u.span,s(o))break;n.push(l)}l++}}a=r.some((l,u)=>!l.suffix&&!n.includes(u))}else n=r.map((o,l)=>l);return{overflow:a,displayIndexList:n}}const JPe=se({name:"Grid",props:{cols:{type:[Number,Object],default:24},rowGap:{type:[Number,Object],default:0},colGap:{type:[Number,Object],default:0},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}},setup(e){const{cols:t,rowGap:i,colGap:r,collapsedRows:a,collapsed:n}=yt(e),s=iu(t,24),o=iu(r,0),l=iu(i,0),u=Se("grid"),c=T(()=>[u]),d=T(()=>[{gap:`${l.value}px ${o.value}px`,"grid-template-columns":`repeat(${s.value}, minmax(0px, 1fr))`}]),h=gt(new Map),p=T(()=>{const v=[];for(const[m,g]of h.entries())v[m]=g;return v}),f=gt({overflow:!1,displayIndexList:[],cols:s.value,colGap:o.value});return on(()=>{f.cols=s.value,f.colGap=o.value}),on(()=>{const v=QPe({cols:s.value,collapsed:n.value,collapsedRows:a.value,itemDataList:p.value});f.overflow=v.overflow,f.displayIndexList=v.displayIndexList}),dr(mj,f),dr(vj,{collectItemData(v,m){h.set(v,m)},removeItemData(v){h.delete(v)}}),{classNames:c,style:d}}});function e3e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.classNames),style:It(e.style)},[ye(e.$slots,"default")],6)}var rC=We(JPe,[["render",e3e]]),t3e=Object.defineProperty,i3e=Object.defineProperties,r3e=Object.getOwnPropertyDescriptors,x5=Object.getOwnPropertySymbols,a3e=Object.prototype.hasOwnProperty,n3e=Object.prototype.propertyIsEnumerable,S5=(e,t,i)=>t in e?t3e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,s3e=(e,t)=>{for(var i in t||(t={}))a3e.call(t,i)&&S5(e,i,t[i]);if(x5)for(var i of x5(t))n3e.call(t,i)&&S5(e,i,t[i]);return e},o3e=(e,t)=>i3e(e,r3e(t));const l3e=se({name:"GridItem",props:{span:{type:[Number,Object],default:1},offset:{type:[Number,Object],default:0},suffix:{type:Boolean,default:!1}},setup(e){const t=Se("grid-item"),i=ie(),{computedIndex:r}=d1({itemRef:i,selector:`.${t}`}),a=Ai(mj,{overflow:!1,displayIndexList:[],cols:24,colGap:0}),n=Ai(vj),s=T(()=>{var m;return(m=a?.displayIndexList)==null?void 0:m.includes(r.value)}),{span:o,offset:l}=yt(e),u=iu(o,1),c=iu(l,0),d=T(()=>ZPe(a.cols,o3e(s3e({},e),{span:u.value,offset:c.value}))),h=T(()=>[t]),p=T(()=>{const{offset:m,span:g}=d.value,{colGap:y}=a;return m>0?{"margin-left":`calc((${`(100% - ${y*(g-1)}px) / ${g}`} * ${m}) + ${y*m}px)`}:{}}),f=T(()=>{const{suffix:m,span:g}=d.value,{cols:y}=a;return m?`${y-g+1}`:`span ${g}`}),v=T(()=>{const{span:m}=d.value;return i.value?[{"grid-column":`${f.value} / span ${m}`},p.value,!s.value||m===0?{display:"none"}:{}]:[]});return on(()=>{r.value!==-1&&n?.collectItemData(r.value,d.value)}),sn(()=>{r.value!==-1&&n?.removeItemData(r.value)}),{classNames:h,style:v,domRef:i,overflow:T(()=>a.overflow)}}});function u3e(e,t,i,r,a,n){return N(),ee("div",{ref:"domRef",class:Y(e.classNames),style:It(e.style)},[ye(e.$slots,"default",{overflow:e.overflow})],6)}var O0=We(l3e,[["render",u3e]]);const Mf=Object.assign(rC,{Row:Hf,Col:Gf,Item:O0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+Hf.name,Hf),e.component(i+Gf.name,Gf),e.component(i+rC.name,rC),e.component(i+O0.name,O0)}}),c3e=se({name:"ImageFooter",props:{title:{type:String},description:{type:String}},setup(){return{prefixCls:Se("image-footer")}}}),d3e=["title"],h3e=["title"];function p3e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[e.title||e.description?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-caption`)},[e.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-caption-title`),title:e.title},Bt(e.title),11,d3e)):Me("v-if",!0),e.description?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-caption-description`),title:e.description},Bt(e.description),11,h3e)):Me("v-if",!0)],2)):Me("v-if",!0),e.$slots.extra?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-extra`)},[ye(e.$slots,"extra")],2)):Me("v-if",!0)],2)}var f3e=We(c3e,[["render",p3e]]);const m3e=se({name:"ImagePreviewArrow",components:{IconLeft:yu,IconRight:zo},props:{onPrev:{type:Function},onNext:{type:Function}},setup(){return{prefixCls:Se("image-preview-arrow")}}});function v3e(e,t,i,r,a,n){const s=be("icon-left"),o=be("icon-right");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y([`${e.prefixCls}-left`,{[`${e.prefixCls}-disabled`]:!e.onPrev}]),onClick:t[0]||(t[0]=l=>{l.preventDefault(),e.onPrev&&e.onPrev()})},[_(s)],2),ve("div",{class:Y([`${e.prefixCls}-right`,{[`${e.prefixCls}-disabled`]:!e.onNext}]),onClick:t[1]||(t[1]=l=>{l.preventDefault(),e.onNext&&e.onNext()})},[_(o)],2)],2)}var g3e=We(m3e,[["render",v3e]]);function y3e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var bb=se({name:"ImagePreviewAction",components:{Tooltip:eo},inheritAttrs:!1,props:{name:{type:String},disabled:{type:Boolean}},setup(e,{slots:t,attrs:i}){const r=Se("image-preview-toolbar-action");return()=>{var a;const{name:n,disabled:s}=e,o=(a=t.default)==null?void 0:a.call(t);if(!o||!o.length)return null;const l=_("div",it({class:[`${r}`,{[`${r}-disabled`]:s}],onMousedown:u=>{u.preventDefault()}},i),[_("span",{class:`${r}-content`},[o])]);return n?_(eo,{class:`${r}-tooltip`,content:n},y3e(l)?l:{default:()=>[l]}):l}}}),b3e=se({name:"ImagePreviewToolbar",components:{RenderFunction:bu,PreviewAction:bb},props:{actions:{type:Array,default:()=>[]},actionsLayout:{type:Array,default:()=>[]}},setup(e){const{actions:t,actionsLayout:i}=yt(e),r=Se("image-preview-toolbar"),a=T(()=>{const n=new Set(i.value),s=l=>n.has(l.key);return t.value.filter(s).sort((l,u)=>{const c=i.value.indexOf(l.key),d=i.value.indexOf(u.key);return c>d?1:-1})});return{prefixCls:r,resultActions:a}}});function w3e(e,t,i,r,a,n){const s=be("RenderFunction"),o=be("PreviewAction");return N(),ee("div",{class:Y(e.prefixCls)},[(N(!0),ee(Xt,null,Br(e.resultActions,l=>(N(),De(o,{key:l.key,name:l.name,disabled:l.disabled,onClick:l.onClick},{default:He(()=>[_(s,{"render-func":l.content},null,8,["render-func"])]),_:2},1032,["name","disabled","onClick"]))),128)),ye(e.$slots,"default")],2)}var x3e=We(b3e,[["render",w3e]]);function bj(e){const t=ie("beforeLoad"),i=T(()=>t.value==="beforeLoad"),r=T(()=>t.value==="loading"),a=T(()=>t.value==="error"),n=T(()=>t.value==="loaded");return{status:t,isBeforeLoad:i,isLoading:r,isError:a,isLoaded:n,setLoadStatus:s=>{t.value=s}}}function S3e(e,t,i,r,a){let n=i,s=r;return i&&(e.width>t.width?n=0:(t.left>e.left&&(n-=Math.abs(e.left-t.left)/a),t.right<e.right&&(n+=Math.abs(e.right-t.right)/a))),r&&(e.height>t.height?s=0:(t.top>e.top&&(s-=Math.abs(e.top-t.top)/a),t.bottom<e.bottom&&(s+=Math.abs(e.bottom-t.bottom)/a))),[n,s]}function C3e(e){const{wrapperEl:t,imageEl:i,scale:r}=yt(e),a=ie([0,0]),n=ie(!1);let s=0,o=0,l=[0,0];const u=()=>{if(!t.value||!i.value)return;const f=t.value.getBoundingClientRect(),v=i.value.getBoundingClientRect(),[m,g]=S3e(f,v,a.value[0],a.value[1],r.value);(m!==a.value[0]||g!==a.value[1])&&(a.value=[m,g])},c=f=>{f.preventDefault&&f.preventDefault();const v=l[0]+(f.pageX-s)/r.value,m=l[1]+(f.pageY-o)/r.value;a.value=[v,m]},d=f=>{f.preventDefault&&f.preventDefault(),n.value=!1,u(),p()},h=f=>{f.target===f.currentTarget&&(f.preventDefault&&f.preventDefault(),n.value=!0,s=f.pageX,o=f.pageY,l=[...a.value],wr(window,"mousemove",c,!1),wr(window,"mouseup",d,!1))};function p(){Ir(window,"mousemove",c,!1),Ir(window,"mouseup",d,!1)}return on(f=>{i.value&&wr(i.value,"mousedown",h),f(()=>{i.value&&Ir(i.value,"mousedown",h),p()})}),Vt([r],()=>{hr(()=>u())}),{translate:a,moving:n,resetTranslate(){a.value=[0,0]}}}const _3e=se({name:"IconZoomOut",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-zoom-out`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),M3e=["stroke-width","stroke-linecap","stroke-linejoin"],E3e=ve("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15"},null,-1),A3e=[E3e];function P3e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},A3e,14,M3e)}var aC=We(_3e,[["render",P3e]]);const T3e=Object.assign(aC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+aC.name,aC)}}),k3e=se({name:"IconZoomIn",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-zoom-in`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),O3e=["stroke-width","stroke-linecap","stroke-linejoin"],D3e=ve("path",{d:"M32.607 32.607A14.953 14.953 0 0 0 37 22c0-8.284-6.716-15-15-15-8.284 0-15 6.716-15 15 0 8.284 6.716 15 15 15 4.142 0 7.892-1.679 10.607-4.393Zm0 0L41.5 41.5M29 22H15m7 7V15"},null,-1),I3e=[D3e];function L3e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},I3e,14,O3e)}var nC=We(k3e,[["render",L3e]]);const B3e=Object.assign(nC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+nC.name,nC)}}),z3e=se({name:"IconFullscreen",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-fullscreen`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),R3e=["stroke-width","stroke-linecap","stroke-linejoin"],N3e=ve("path",{d:"M42 17V9a1 1 0 0 0-1-1h-8M6 17V9a1 1 0 0 1 1-1h8m27 23v8a1 1 0 0 1-1 1h-8M6 31v8a1 1 0 0 0 1 1h8"},null,-1),V3e=[N3e];function F3e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},V3e,14,R3e)}var sC=We(z3e,[["render",F3e]]);const j3e=Object.assign(sC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+sC.name,sC)}}),$3e=se({name:"IconRotateLeft",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-rotate-left`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),U3e=["stroke-width","stroke-linecap","stroke-linejoin"],W3e=ve("path",{d:"M10 22a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H11a1 1 0 0 1-1-1V22ZM23 11h11a6 6 0 0 1 6 6v6M22.5 12.893 19.587 11 22.5 9.107v3.786Z"},null,-1),H3e=[W3e];function G3e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},H3e,14,U3e)}var oC=We($3e,[["render",G3e]]);const q3e=Object.assign(oC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+oC.name,oC)}}),Y3e=se({name:"IconRotateRight",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-rotate-right`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),X3e=["stroke-width","stroke-linecap","stroke-linejoin"],K3e=ve("path",{d:"M38 22a1 1 0 0 0-1-1H17a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V22ZM25 11H14a6 6 0 0 0-6 6v6M25.5 12.893 28.413 11 25.5 9.107v3.786Z"},null,-1),Z3e=[K3e];function Q3e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Z3e,14,X3e)}var lC=We(Y3e,[["render",Q3e]]);const J3e=Object.assign(lC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+lC.name,lC)}}),eTe=se({name:"IconOriginalSize",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-original-size`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),tTe=["stroke-width","stroke-linecap","stroke-linejoin"],iTe=ve("path",{d:"m5.5 11.5 5-2.5h1v32M34 11.5 39 9h1v32"},null,-1),rTe=ve("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z",fill:"currentColor",stroke:"none"},null,-1),aTe=ve("path",{d:"M24 17h1v1h-1v-1ZM24 30h1v1h-1v-1Z"},null,-1),nTe=[iTe,rTe,aTe];function sTe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},nTe,14,tTe)}var uC=We(eTe,[["render",sTe]]);const oTe=Object.assign(uC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+uC.name,uC)}});function lTe(e){const{container:t,hidden:i}=yt(e);let r=!1,a={};const n=l=>l.tagName==="BODY"?window.innerWidth-(document.body.clientWidth||document.documentElement.clientWidth):l.offsetWidth-l.clientWidth,s=()=>{if(t.value&&t.value.style.overflow!=="hidden"){const l=t.value.style;r=!0;const u=n(t.value);u&&(a.width=l.width,t.value.style.width=`calc(${t.value.style.width||"100%"} - ${u}px)`),a.overflow=l.overflow,t.value.style.overflow="hidden"}},o=()=>{if(t.value&&r){const l=a;Object.keys(l).forEach(u=>{t.value.style[u]=l[u]})}r=!1,a={}};return on(l=>{i.value?s():o(),l(()=>{o()})}),[o,s]}function uTe(e,t){const{popupContainer:i}=yt(t);return T(()=>(na(i.value)?uz(i.value):i.value)||e)}const _o=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].map(e=>+(e/100).toFixed(2)),wj=_o[0],xj=_o[_o.length-1];function cTe(e=1,t="zoomIn"){let i=_o.indexOf(e);return i===-1&&(i=hTe(e)),t==="zoomIn"?i===_o.length-1?e:_o[i+1]:i===0?e:_o[i-1]}function dTe(e,t=1.1,i="zoomIn"){const r=i==="zoomIn"?t:1/t,a=Number.parseFloat((e*r).toFixed(3));return Math.min(xj,Math.max(wj,a))}function hTe(e){let t=_o.length-1;for(let i=0;i<_o.length;i++){const r=_o[i];if(e===r){t=i;break}if(e<r){const a=_o[i-1];t=a===void 0||Math.abs(a-e)<=Math.abs(r-e)?i-1:i;break}}return t}var pTe=Object.defineProperty,C5=Object.getOwnPropertySymbols,fTe=Object.prototype.hasOwnProperty,mTe=Object.prototype.propertyIsEnumerable,_5=(e,t,i)=>t in e?pTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,vTe=(e,t)=>{for(var i in t||(t={}))fTe.call(t,i)&&_5(e,i,t[i]);if(C5)for(var i of C5(t))mTe.call(t,i)&&_5(e,i,t[i]);return e};const cC=90;var gTe=se({name:"ImagePreview",components:{PreviewArrow:g3e,PreviewToolbar:x3e,IconLoading:$n,IconClose:kn},props:{renderToBody:{type:Boolean,default:!0},src:{type:String},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[Object,String]},inGroup:{type:Boolean,default:!1},groupArrowProps:{type:Object,default:()=>({})},escToClose:{type:Boolean,default:!0},wheelZoom:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},defaultScale:{type:Number,default:1},zoomRate:{type:Number,default:1.1}},emits:["close","update:visible"],setup(e,{emit:t}){const{t:i}=Yr(),{src:r,popupContainer:a,visible:n,defaultVisible:s,maskClosable:o,actionsLayout:l,defaultScale:u,zoomRate:c}=yt(e),d=ie(),h=ie(),p=Se("image-preview"),[f,v]=ja(s.value,gt({value:n})),m=T(()=>[p,{[`${p}-hide`]:!f.value}]),g=uTe(document.body,gt({popupContainer:a})),y=T(()=>g.value===document.body),{zIndex:b}=cp("dialog",{visible:f}),x=T(()=>{const de=y.value?{zIndex:b.value,position:"fixed"}:{zIndex:"inherit",position:"absolute"};return vTe({},de)}),{isLoading:S,isLoaded:w,setLoadStatus:E}=bj(),M=ie(0),P=ie(u.value),{translate:A,moving:k,resetTranslate:I}=C3e(gt({wrapperEl:d,imageEl:h,visible:f,scale:P})),O=ie(!1);let D=null;const F=()=>{!O.value&&(O.value=!0),D&&clearTimeout(D),D=setTimeout(()=>{O.value=!1},1e3)};lTe(gt({container:g,hidden:f}));function U(){M.value=0,P.value=u.value,I()}const z=de=>l.value.includes(de),B=de=>{switch(de.stopPropagation(),de.preventDefault(),de.key){case Kr.ESC:e.escToClose&&Z();break;case Kr.ARROW_LEFT:e.groupArrowProps.onPrev&&e.groupArrowProps.onPrev();break;case Kr.ARROW_RIGHT:e.groupArrowProps.onNext&&e.groupArrowProps.onNext();break;case Kr.ARROW_UP:z("zoomIn")&&fe("zoomIn");break;case Kr.ARROW_DOWN:z("zoomOut")&&fe("zoomOut");break;case Kr.SPACE:z("originalSize")&&X(1);break}},W=ud(de=>{if(de.preventDefault(),de.stopPropagation(),!e.wheelZoom)return;const me=(de.deltaY||de.deltaX)>0?"zoomOut":"zoomIn",ke=dTe(P.value,c.value,me);X(ke)});let R=!1;const $=()=>{hr(()=>{var de;(de=d?.value)==null||de.focus()}),e.keyboard&&!R&&(R=!0,wr(g.value,"keydown",B))},q=()=>{R&&(R=!1,Ir(g.value,"keydown",B))};Vt([r,f],()=>{f.value?(U(),E("loading"),$()):q()});function Z(){f.value&&(t("close"),t("update:visible",!1),v(!1))}function G(de){var ge;(ge=d?.value)==null||ge.focus(),o.value&&de.target===de.currentTarget&&Z()}function X(de){P.value!==de&&(P.value=de,F())}function J(){const de=d.value.getBoundingClientRect(),ge=h.value.getBoundingClientRect(),me=de.height/(ge.height/P.value),ke=de.width/(ge.width/P.value),ce=Math.max(me,ke);X(ce)}function pe(de){const me=de==="clockwise"?(M.value+cC)%360:M.value===0?360-cC:M.value-cC;M.value=me}function fe(de){const ge=cTe(P.value,de);X(ge)}return Tn(()=>{q()}),{prefixCls:p,classNames:m,container:g,wrapperStyles:x,scale:P,translate:A,rotate:M,moving:k,mergedVisible:f,isLoading:S,isLoaded:w,scaleValueVisible:O,refWrapper:d,refImage:h,onWheel:W,onMaskClick:G,onCloseClick:Z,onImgLoad(){E("loaded")},onImgError(){E("error")},actions:T(()=>[{key:"fullScreen",name:i("imagePreview.fullScreen"),content:()=>Ws(j3e),onClick:()=>J()},{key:"rotateRight",name:i("imagePreview.rotateRight"),content:()=>Ws(J3e),onClick:()=>pe("clockwise")},{key:"rotateLeft",name:i("imagePreview.rotateLeft"),content:()=>Ws(q3e),onClick:()=>pe("counterclockwise")},{key:"zoomIn",name:i("imagePreview.zoomIn"),content:()=>Ws(B3e),onClick:()=>fe("zoomIn"),disabled:P.value===xj},{key:"zoomOut",name:i("imagePreview.zoomOut"),content:()=>Ws(T3e),onClick:()=>fe("zoomOut"),disabled:P.value===wj},{key:"originalSize",name:i("imagePreview.originalSize"),content:()=>Ws(oTe),onClick:()=>X(1)}])}}});const yTe=["src"];function bTe(e,t,i,r,a,n){const s=be("IconLoading"),o=be("PreviewToolbar"),l=be("IconClose"),u=be("PreviewArrow");return N(),De(Cb,{to:e.container,disabled:!e.renderToBody},[ve("div",{class:Y(e.classNames),style:It(e.wrapperStyles)},[_(rs,{name:"image-fade",onBeforeEnter:t[0]||(t[0]=c=>c.parentElement&&(c.parentElement.style.display="block")),onAfterLeave:t[1]||(t[1]=c=>c.parentElement&&(c.parentElement.style.display=""))},{default:He(()=>[Ys(ve("div",{class:Y(`${e.prefixCls}-mask`)},null,2),[[Xs,e.mergedVisible]])]),_:1}),e.mergedVisible?(N(),ee("div",{key:0,ref:"refWrapper",tabindex:"0",class:Y(`${e.prefixCls}-wrapper`),onClick:t[6]||(t[6]=(...c)=>e.onMaskClick&&e.onMaskClick(...c)),onWheel:t[7]||(t[7]=ks((...c)=>e.onWheel&&e.onWheel(...c),["prevent","stop"]))},[Me(" img "),ve("div",{class:Y(`${e.prefixCls}-img-container`),style:It({transform:`scale(${e.scale}, ${e.scale})`}),onClick:t[4]||(t[4]=(...c)=>e.onMaskClick&&e.onMaskClick(...c))},[(N(),ee("img",{ref:"refImage",key:e.src,src:e.src,class:Y([`${e.prefixCls}-img`,{[`${e.prefixCls}-img-moving`]:e.moving}]),style:It({transform:`translate(${e.translate[0]}px, ${e.translate[1]}px) rotate(${e.rotate}deg)`}),onLoad:t[2]||(t[2]=(...c)=>e.onImgLoad&&e.onImgLoad(...c)),onError:t[3]||(t[3]=(...c)=>e.onImgError&&e.onImgError(...c))},null,46,yTe))],6),Me(" loading "),e.isLoading?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-loading`)},[_(s)],2)):Me("v-if",!0),Me(" scale value "),_(rs,{name:"image-fade"},{default:He(()=>[e.scaleValueVisible?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-scale-value`)},Bt((e.scale*100).toFixed(0))+"% ",3)):Me("v-if",!0)]),_:1}),Me(" toolbar "),e.isLoaded&&e.actionsLayout.length?(N(),De(o,{key:1,actions:e.actions,"actions-layout":e.actionsLayout},{default:He(()=>[ye(e.$slots,"actions")]),_:3},8,["actions","actions-layout"])):Me("v-if",!0),Me(" close btn "),e.closable?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-close-btn`),onClick:t[5]||(t[5]=(...c)=>e.onCloseClick&&e.onCloseClick(...c))},[_(l)],2)):Me("v-if",!0),Me(" group arrow "),e.inGroup?(N(),De(u,br(it({key:3},e.groupArrowProps)),null,16)):Me("v-if",!0)],34)):Me("v-if",!0)],6)],8,["to","disabled"])}var Fh=We(gTe,[["render",bTe]]);function M5(e){if(ei(e))return;if(!Mt(e)&&/^\d+(%)$/.test(e))return e;const t=parseInt(e,10);return Mt(t)?`${t}px`:void 0}const Sj=Symbol("PreviewGroupInjectionKey");var wTe=Object.defineProperty,E5=Object.getOwnPropertySymbols,xTe=Object.prototype.hasOwnProperty,STe=Object.prototype.propertyIsEnumerable,A5=(e,t,i)=>t in e?wTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,P5=(e,t)=>{for(var i in t||(t={}))xTe.call(t,i)&&A5(e,i,t[i]);if(E5)for(var i of E5(t))STe.call(t,i)&&A5(e,i,t[i]);return e};let CTe=0;const _Te=se({name:"Image",components:{IconImageClose:uP,IconLoading:$n,ImageFooter:f3e,ImagePreview:Fh},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},src:{type:String},width:{type:[String,Number]},height:{type:[String,Number]},title:{type:String},description:{type:String},fit:{type:String},alt:{type:String},hideFooter:{type:[Boolean,String],default:!1},footerPosition:{type:String,default:"inner"},showLoader:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},previewVisible:{type:Boolean,default:void 0},defaultPreviewVisible:{type:Boolean,default:!1},previewProps:{type:Object},footerClass:{type:[String,Array,Object]}},emits:["preview-visible-change","update:previewVisible"],setup(e,{attrs:t,slots:i,emit:r}){const{t:a}=Yr(),{height:n,width:s,hideFooter:o,title:l,description:u,src:c,footerPosition:d,defaultPreviewVisible:h,previewVisible:p,preview:f,previewProps:v}=yt(e),m=Ai(Sj,void 0),g=Se("image"),y=ie(),{isLoaded:b,isError:x,isLoading:S,setLoadStatus:w}=bj(),E=T(()=>({width:M5(s?.value),height:M5(n?.value)})),M=T(()=>e.fit?{objectFit:e.fit}:{}),P=T(()=>[`${g}`,{[`${g}-loading`]:S.value,[`${g}-loading-error`]:x.value,[`${g}-with-footer-inner`]:b&&k&&d.value==="inner",[`${g}-with-footer-outer`]:b&&k&&d.value==="outer"},t.class]),A=T(()=>[E.value,t.style]),k=T(()=>l?.value||u?.value||i.extra?jn(o.value)?!o.value&&b.value:o.value==="never":!1),I=T(()=>ln(t,["class","style"])),[O,D]=ja(h.value,gt({value:p})),F=T(()=>!m?.preview&&f.value);on(()=>{Pm||!y.value||(y.value.src=c?.value,w("loading"))});const U=CTe++;on($=>{var q,Z,G;const X=(G=m?.registerImageUrl)==null?void 0:G.call(m,U,((Z=(q=v?.value)==null?void 0:q.src)!=null?Z:c?.value)||"",f.value);$(()=>{X?.()})});function z(){w("loaded")}function B(){w("error")}function W(){f.value&&(m?.preview?m.preview(U):(r("preview-visible-change",!0),D(!0)))}function R(){r("preview-visible-change",!1),D(!1)}return{t:a,refImg:y,prefixCls:g,wrapperClassNames:P,wrapperStyles:A,showFooter:k,imgProps:I,imgStyle:E,isLoaded:b,isError:x,isLoading:S,mergedPreviewVisible:O,mergePreview:F,onImgLoaded:z,onImgLoadError:B,onImgClick:W,onPreviewClose:R,fitStyle:M}}}),MTe=["title","alt"];function ETe(e,t,i,r,a,n){const s=be("IconImageClose"),o=be("IconLoading"),l=be("ImageFooter"),u=be("ImagePreview");return N(),ee("div",{class:Y(e.wrapperClassNames),style:It(e.wrapperStyles)},[ve("img",it({ref:"refImg",class:`${e.prefixCls}-img`},e.imgProps,{style:P5(P5({},e.imgStyle),e.fitStyle),title:e.title,alt:e.alt,onLoad:t[0]||(t[0]=(...c)=>e.onImgLoaded&&e.onImgLoaded(...c)),onError:t[1]||(t[1]=(...c)=>e.onImgLoadError&&e.onImgLoadError(...c)),onClick:t[2]||(t[2]=(...c)=>e.onImgClick&&e.onImgClick(...c))}),null,16,MTe),e.isLoaded?Me("v-if",!0):(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-overlay`)},[e.isError?ye(e.$slots,"error",{key:0},()=>[ve("div",{class:Y(`${e.prefixCls}-error`)},[ve("div",{class:Y(`${e.prefixCls}-error-icon`)},[ye(e.$slots,"error-icon",{},()=>[_(s)])],2),e.alt||e.description?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-error-alt`)},Bt(e.alt||e.description),3)):Me("v-if",!0)],2)]):Me("v-if",!0),e.isLoading&&(e.showLoader||e.$slots.loader)?ye(e.$slots,"loader",{key:1},()=>[ve("div",{class:Y([`${e.prefixCls}-loader`])},[ve("div",{class:Y(`${e.prefixCls}-loader-spin`)},[_(o),ve("div",{class:Y(`${e.prefixCls}-loader-spin-text`)},Bt(e.t("image.loading")),3)],2)],2)]):Me("v-if",!0)],2)),e.showFooter?(N(),De(l,{key:1,class:Y(e.footerClass),"prefix-cls":e.prefixCls,title:e.title,description:e.description},$r({_:2},[e.$slots.extra?{name:"extra",fn:He(()=>[ye(e.$slots,"extra")])}:void 0]),1032,["class","prefix-cls","title","description"])):Me("v-if",!0),e.isLoaded&&e.mergePreview?(N(),De(u,it({key:2,src:e.src},e.previewProps,{visible:e.mergedPreviewVisible,"render-to-body":e.renderToBody,onClose:e.onPreviewClose}),{actions:He(()=>[ye(e.$slots,"preview-actions")]),_:3},16,["src","visible","render-to-body","onClose"])):Me("v-if",!0)],6)}var dC=We(_Te,[["render",ETe]]),ATe=se({name:"ImagePreviewGroup",components:{ImagePreview:Fh},inheritAttrs:!1,props:{renderToBody:{type:Boolean,default:!0},srcList:{type:Array},current:{type:Number},defaultCurrent:{type:Number,default:0},infinite:{type:Boolean,default:!1},visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},maskClosable:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},actionsLayout:{type:Array,default:()=>["fullScreen","rotateRight","rotateLeft","zoomIn","zoomOut","originalSize"]},popupContainer:{type:[String,Object]}},emits:["change","update:current","visible-change","update:visible"],setup(e,{emit:t}){const{srcList:i,visible:r,defaultVisible:a,current:n,defaultCurrent:s,infinite:o}=yt(e),[l,u]=ja(a.value,gt({value:r})),c=A=>{A!==l.value&&(t("visible-change",A),t("update:visible",A),u(A))},d=T(()=>new Map(bi(i?.value)?i?.value.map((A,k)=>[k,{url:A,canPreview:!0}]):[])),h=ie(new Map(d.value||[])),p=T(()=>Array.from(h.value.keys())),f=T(()=>p.value.length);function v(A,k,I){return d.value.has(A)||h.value.set(A,{url:k,canPreview:I}),function(){d.value.has(A)||h.value.delete(A)}}Vt(d,()=>{h.value=new Map(d.value||[])});const[m,g]=ja(s.value,gt({value:n})),y=A=>{A!==m.value&&(t("change",A),t("update:current",A),g(A))},b=T(()=>p.value[m.value]),x=A=>{const k=p.value.indexOf(A);k!==m.value&&y(k)},S=T(()=>{var A;return(A=h.value.get(b.value))==null?void 0:A.url});dr(Sj,gt({registerImageUrl:v,preview:A=>{c(!0),x(A)}}));const w=T(()=>{const A=(I,O)=>{var D;for(let F=I;F<=O;F++){const U=p.value[F];if((D=h.value.get(U))!=null&&D.canPreview)return F}},k=A(m.value+1,f.value-1);return ei(k)&&o.value?A(0,m.value-1):k}),E=T(()=>{const A=(I,O)=>{var D;for(let F=I;F>=O;F--){const U=p.value[F];if((D=h.value.get(U))!=null&&D.canPreview)return F}},k=A(m.value-1,0);return ei(k)&&o.value?A(f.value-1,m.value+1):k}),M=T(()=>ei(E.value)?void 0:()=>{!ei(E.value)&&y(E.value)}),P=T(()=>ei(w.value)?void 0:()=>{!ei(w.value)&&y(w.value)});return{mergedVisible:l,currentUrl:S,prevIndex:E,nextIndex:w,onClose(){c(!1)},groupArrowProps:gt({onPrev:M,onNext:P})}}}),PTe=Object.defineProperty,TTe=Object.defineProperties,kTe=Object.getOwnPropertyDescriptors,T5=Object.getOwnPropertySymbols,OTe=Object.prototype.hasOwnProperty,DTe=Object.prototype.propertyIsEnumerable,k5=(e,t,i)=>t in e?PTe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ITe=(e,t)=>{for(var i in t||(t={}))OTe.call(t,i)&&k5(e,i,t[i]);if(T5)for(var i of T5(t))DTe.call(t,i)&&k5(e,i,t[i]);return e},LTe=(e,t)=>TTe(e,kTe(t));function BTe(e,t,i,r,a,n){const s=be("ImagePreview");return N(),ee(Xt,null,[ye(e.$slots,"default"),_(s,it(LTe(ITe({},e.$attrs),{groupArrowProps:e.groupArrowProps}),{"in-group":"",src:e.currentUrl,visible:e.mergedVisible,"mask-closable":e.maskClosable,closable:e.closable,"actions-layout":e.actionsLayout,"popup-container":e.popupContainer,"render-to-body":e.renderToBody,onClose:e.onClose}),$r({_:2},[e.$slots.actions?{name:"actions",fn:He(()=>[ye(e.$slots,"actions",{url:e.currentUrl})])}:void 0]),1040,["src","visible","mask-closable","closable","actions-layout","popup-container","render-to-body","onClose"])],64)}var qf=We(ATe,[["render",BTe]]);const zTe=Object.assign(dC,{Preview:Fh,PreviewGroup:qf,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+dC.name,dC),e.component(i+Fh.name,Fh),e.component(i+qf.name,qf),e.component(i+bb.name,bb)}}),Cj=Symbol("LayoutSiderInjectionKey"),_j=Symbol("SiderInjectionKey");var RTe=se({name:"Layout",props:{hasSider:{type:Boolean}},setup(e){const t=ie([]),i=Se("layout"),r=T(()=>[i,{[`${i}-has-sider`]:e.hasSider||t.value.length}]);return dr(Cj,{onSiderMount:a=>t.value.push(a),onSiderUnMount:a=>{t.value=t.value.filter(n=>n!==a)}}),{classNames:r}}});function NTe(e,t,i,r,a,n){return N(),ee("section",{class:Y(e.classNames)},[ye(e.$slots,"default")],2)}var hC=We(RTe,[["render",NTe]]);const VTe=se({name:"LayoutHeader",setup(){return{classNames:[Se("layout-header")]}}});function FTe(e,t,i,r,a,n){return N(),ee("header",{class:Y(e.classNames)},[ye(e.$slots,"default")],2)}var D0=We(VTe,[["render",FTe]]);const jTe=se({name:"LayoutContent",setup(){return{classNames:[Se("layout-content")]}}});function $Te(e,t,i,r,a,n){return N(),ee("main",{class:Y(e.classNames)},[ye(e.$slots,"default")],2)}var I0=We(jTe,[["render",$Te]]);const UTe=se({name:"LayoutFooter",setup(){return{classNames:[Se("layout-footer")]}}});function WTe(e,t,i,r,a,n){return N(),ee("footer",{class:Y(e.classNames)},[ye(e.$slots,"default")],2)}var L0=We(UTe,[["render",WTe]]);const HTe=se({name:"IconDragDot",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-drag-dot`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),GTe=["stroke-width","stroke-linecap","stroke-linejoin"],qTe=ve("path",{d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z",fill:"currentColor",stroke:"none"},null,-1),YTe=ve("path",{d:"M40 17v2h-2v-2h2ZM25 17v2h-2v-2h2ZM10 17v2H8v-2h2ZM40 29v2h-2v-2h2ZM25 29v2h-2v-2h2ZM10 29v2H8v-2h2Z"},null,-1),XTe=[qTe,YTe];function KTe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},XTe,14,GTe)}var pC=We(HTe,[["render",KTe]]);const ZTe=Object.assign(pC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+pC.name,pC)}}),QTe=se({name:"IconDragDotVertical",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-drag-dot-vertical`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),JTe=["stroke-width","stroke-linecap","stroke-linejoin"],eke=ve("path",{d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z",fill:"currentColor",stroke:"none"},null,-1),tke=ve("path",{d:"M17 8h2v2h-2V8ZM17 23h2v2h-2v-2ZM17 38h2v2h-2v-2ZM29 8h2v2h-2V8ZM29 23h2v2h-2v-2ZM29 38h2v2h-2v-2Z"},null,-1),ike=[eke,tke];function rke(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},ike,14,JTe)}var fC=We(QTe,[["render",rke]]);const AP=Object.assign(fC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+fC.name,fC)}});var ake=se({name:"ResizeTrigger",components:{ResizeObserver:Ao,IconDragDot:ZTe,IconDragDotVertical:AP},props:{prefixCls:{type:String,required:!0},direction:{type:String,default:"horizontal"}},emits:["resize"],setup(e,{emit:t}){const{direction:i,prefixCls:r}=yt(e),a=T(()=>i?.value==="horizontal");return{classNames:T(()=>[r.value,{[`${r.value}-horizontal`]:a.value,[`${r.value}-vertical`]:!a.value}]),onResize:o=>{t("resize",o)},isHorizontal:a}}});function nke(e,t,i,r,a,n){const s=be("IconDragDot"),o=be("IconDragDotVertical"),l=be("ResizeObserver");return N(),De(l,{onResize:e.onResize},{default:He(()=>[ve("div",{class:Y(e.classNames)},[Me(" @slot 自定义内容 "),ye(e.$slots,"default",{},()=>[ve("div",{class:Y(`${e.prefixCls}-icon-wrapper`)},[Me(" @slot 自定义 icon "),ye(e.$slots,"icon",{},()=>[e.isHorizontal?(N(),De(s,{key:0,class:Y(`${e.prefixCls}-icon`)},null,8,["class"])):(N(),De(o,{key:1,class:Y(`${e.prefixCls}-icon`)},null,8,["class"]))])],2)])],2)]),_:3},8,["onResize"])}var Mj=We(ake,[["render",nke]]),ske=Object.defineProperty,O5=Object.getOwnPropertySymbols,oke=Object.prototype.hasOwnProperty,lke=Object.prototype.propertyIsEnumerable,D5=(e,t,i)=>t in e?ske(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,mC=(e,t)=>{for(var i in t||(t={}))oke.call(t,i)&&D5(e,i,t[i]);if(O5)for(var i of O5(t))lke.call(t,i)&&D5(e,i,t[i]);return e};const Ej="left",Aj="right",PP="top",TP="bottom",uke=[Ej,Aj,PP,TP];function I5(e,t){if(e===0)return 0;const i=e-t;return i<=0?0:i}function vC(e){return[PP,TP].indexOf(e)>-1}const cke=se({name:"ResizeBox",components:{ResizeTrigger:Mj},inheritAttrs:!1,props:{width:{type:Number},height:{type:Number},component:{type:String,default:"div"},directions:{type:Array,default:()=>["right"]}},emits:{"update:width":e=>!0,"update:height":e=>!0,movingStart:e=>!0,moving:(e,t)=>!0,movingEnd:e=>!0},setup(e,{emit:t}){const{height:i,width:r,directions:a}=yt(e),[n,s]=ja(null,gt({value:r})),[o,l]=ja(null,gt({value:i})),u=ie(),c=gt({}),d=Se("resizebox"),h=T(()=>[d]),p=T(()=>mC(mC(mC({},Mt(n.value)?{width:`${n.value}px`}:{}),Mt(o.value)?{height:`${o.value}px`}:{}),c)),f=T(()=>a.value.filter(x=>uke.includes(x))),v={direction:"",startPageX:0,startPageY:0,startWidth:0,startHeight:0,moving:!1,padding:{left:0,right:0,top:0,bottom:0}};function m(x){if(!v.moving)return;const{startPageX:S,startPageY:w,startWidth:E,startHeight:M,direction:P}=v;let A=E,k=M;const I=x.pageX-S,O=x.pageY-w;switch(P){case Ej:A=E-I,s(A),t("update:width",A);break;case Aj:A=E+I,s(A),t("update:width",A);break;case PP:k=M-O,l(k),t("update:height",k);break;case TP:k=M+O,l(k),t("update:height",k);break}t("moving",{width:A,height:k},x)}function g(x){v.moving=!1,Ir(window,"mousemove",m),Ir(window,"mouseup",g),Ir(window,"contextmenu",g),document.body.style.cursor="default",t("movingEnd",x)}function y(x,S){var w,E;t("movingStart",S),v.moving=!0,v.startPageX=S.pageX,v.startPageY=S.pageY,v.direction=x;const{top:M,left:P,right:A,bottom:k}=v.padding;v.startWidth=I5(((w=u.value)==null?void 0:w.clientWidth)||0,P+A),v.startHeight=I5(((E=u.value)==null?void 0:E.clientHeight)||0,M+k),wr(window,"mousemove",m),wr(window,"mouseup",g),wr(window,"contextmenu",g),document.body.style.cursor=vC(x)?"row-resize":"col-resize"}function b(x,S){const{width:w,height:E}=S.contentRect,M=vC(x)?E:w;v.padding[x]=M,c[`padding-${x}`]=`${M}px`}return{prefixCls:d,classNames:h,styles:p,wrapperRef:u,onMoveStart:y,isHorizontal:vC,allowDirections:f,onTiggerResize:b}}});function dke(e,t,i,r,a,n){const s=be("ResizeTrigger");return N(),De(bs(e.component),it({ref:"wrapperRef",class:e.classNames},e.$attrs,{style:e.styles}),{default:He(()=>[ye(e.$slots,"default"),(N(!0),ee(Xt,null,Br(e.allowDirections,o=>(N(),De(s,{key:o,"prefix-cls":`${e.prefixCls}-trigger`,class:Y(`${e.prefixCls}-direction-${o}`),direction:e.isHorizontal(o)?"horizontal":"vertical",onMousedown:l=>{e.onMoveStart(o,l)},onResize:l=>{e.onTiggerResize(o,l)}},$r({default:He(()=>[e.$slots["resize-trigger"]?ye(e.$slots,"resize-trigger",{key:0,direction:o}):Me("v-if",!0)]),_:2},[e.$slots["resize-trigger-icon"]?{name:"icon",fn:He(()=>[ye(e.$slots,"resize-trigger-icon",{direction:o})])}:void 0]),1032,["prefix-cls","class","direction","onMousedown","onResize"]))),128))]),_:3},16,["class","style"])}var gC=We(cke,[["render",dke]]);const Pj=Object.assign(gC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+gC.name,gC)}});function Tj(e,t){const i=T(()=>sz(e)?e.value:e);let r="";xi(()=>{r=vb.subscribe((a,n)=>{i.value&&(!n||n===i.value)&&t(!!a[i.value])})}),sn(()=>{r&&vb.unsubscribe(r)})}const hke=(()=>{let e=0;return(t="")=>(e+=1,`${t}${e}`)})();var pke=se({name:"LayoutSider",components:{IconLeft:yu,IconRight:zo,ResizeBox:Pj},props:{theme:{type:String,default:"light"},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean},collapsible:{type:Boolean},width:{type:Number,default:200},collapsedWidth:{type:Number,default:48},reverseArrow:{type:Boolean},breakpoint:{type:String},resizeDirections:{type:Array,default:void 0},hideTrigger:{type:Boolean}},emits:["collapse","update:collapsed","breakpoint"],setup(e,{emit:t}){const{theme:i,collapsed:r,defaultCollapsed:a,collapsible:n,hideTrigger:s,breakpoint:o,collapsedWidth:l,resizeDirections:u}=yt(e),[c,d]=ja(a.value,gt({value:r})),h=T(()=>u.value?"ResizeBox":"div"),p=T(()=>n.value&&!s.value),f=Se("layout-sider"),v=T(()=>[f,{[`${f}-light`]:i.value==="light",[`${f}-has-trigger`]:p.value,[`${f}-collapsed`]:r.value}]),m=T(()=>{const{width:S,collapsedWidth:w}=e,E=c.value?w:S;return Mt(E)?`${E}px`:String(E)}),g=T(()=>[`${f}-trigger`,{[`${f}-trigger-light`]:i.value==="light"}]),y=()=>{const S=!c.value;d(S),t("update:collapsed",S),t("collapse",S,"clickTrigger")};Tj(o,S=>{const w=!S;w!==c.value&&(d(w),t("update:collapsed",w),t("collapse",w,"responsive"),t("breakpoint",w))});const b=hke("__arco_layout_sider"),x=Ai(Cj,void 0);return xi(()=>{var S;(S=x?.onSiderMount)==null||S.call(x,b)}),sn(()=>{var S;(S=x?.onSiderUnMount)==null||S.call(x,b)}),dr(_j,gt({theme:i,collapsed:c,collapsedWidth:l})),{componentTag:h,prefixCls:f,classNames:v,triggerClassNames:g,localCollapsed:c,siderWidth:m,showTrigger:p,toggleTrigger:y}}});const fke={key:0},mke={key:1};function vke(e,t,i,r,a,n){const s=be("IconLeft"),o=be("IconRight");return N(),De(bs(e.componentTag),it({class:e.classNames,style:{width:e.siderWidth}},e.resizeDirections?{directions:e.resizeDirections}:{}),{default:He(()=>[ve("div",{class:Y(`${e.prefixCls}-children`)},[ye(e.$slots,"default")],2),e.showTrigger?(N(),ee("div",{key:0,class:Y(e.triggerClassNames),style:It({width:e.siderWidth}),onClick:t[0]||(t[0]=(...l)=>e.toggleTrigger&&e.toggleTrigger(...l))},[ye(e.$slots,"trigger",{collapsed:e.localCollapsed},()=>[e.reverseArrow?(N(),ee("div",mke,[e.localCollapsed?(N(),De(s,{key:0})):(N(),De(o,{key:1}))])):(N(),ee("div",fke,[e.localCollapsed?(N(),De(o,{key:1})):(N(),De(s,{key:0}))]))])],6)):Me("v-if",!0)]),_:3},16,["class","style"])}var B0=We(pke,[["render",vke]]);const gke=Object.assign(hC,{Header:D0,Content:I0,Footer:L0,Sider:B0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+hC.name,hC),e.component(i+D0.name,D0),e.component(i+I0.name,I0),e.component(i+L0.name,L0),e.component(i+B0.name,B0)}}),yke=se({name:"Pager",props:{pageNumber:{type:Number},current:{type:Number},disabled:{type:Boolean,default:!1},style:{type:Object},activeStyle:{type:Object}},emits:["click"],setup(e,{emit:t}){const i=Se("pagination-item"),r=T(()=>e.current===e.pageNumber),a=o=>{e.disabled||t("click",e.pageNumber,o)},n=T(()=>[i,{[`${i}-active`]:r.value}]),s=T(()=>r.value?e.activeStyle:e.style);return{prefixCls:i,cls:n,mergedStyle:s,handleClick:a}}});function bke(e,t,i,r,a,n){return N(),ee("li",{class:Y(e.cls),style:It(e.mergedStyle),onClick:t[0]||(t[0]=(...s)=>e.handleClick&&e.handleClick(...s))},[ye(e.$slots,"default",{page:e.pageNumber},()=>[ti(Bt(e.pageNumber),1)])],6)}var wke=We(yke,[["render",bke]]);const kj=(e,{min:t,max:i})=>e<t?t:e>i?i:e,xke=se({name:"StepPager",components:{IconLeft:yu,IconRight:zo},props:{pages:{type:Number,required:!0},current:{type:Number,required:!0},type:{type:String,required:!0},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const i=Se("pagination-item"),r=e.type==="next",a=T(()=>e.disabled?e.disabled:!e.pages||r&&e.current===e.pages?!0:!r&&e.current<=1),n=T(()=>kj(e.current+(r?1:-1),{min:1,max:e.pages})),s=l=>{a.value||t("click",n.value)},o=T(()=>[i,`${i}-${e.type}`,{[`${i}-disabled`]:a.value}]);return{prefixCls:i,cls:o,isNext:r,handleClick:s}}});function Ske(e,t,i,r,a,n){const s=be("icon-right"),o=be("icon-left");return N(),De(bs(e.simple?"span":"li"),{class:Y(e.cls),onClick:e.handleClick},{default:He(()=>[ye(e.$slots,"default",{type:e.isNext?"next":"previous"},()=>[e.isNext?(N(),De(s,{key:0})):(N(),De(o,{key:1}))])]),_:3},8,["class","onClick"])}var L5=We(xke,[["render",Ske]]);const Cke=se({name:"EllipsisPager",components:{IconMore:cP},props:{current:{type:Number,required:!0},step:{type:Number,default:5},pages:{type:Number,required:!0}},emits:["click"],setup(e,{emit:t}){const i=Se("pagination-item"),r=T(()=>kj(e.current+e.step,{min:1,max:e.pages})),a=s=>{t("click",r.value)},n=T(()=>[i,`${i}-ellipsis`]);return{prefixCls:i,cls:n,handleClick:a}}});function _ke(e,t,i,r,a,n){const s=be("icon-more");return N(),ee("li",{class:Y(e.cls),onClick:t[0]||(t[0]=(...o)=>e.handleClick&&e.handleClick(...o))},[ye(e.$slots,"default",{},()=>[_(s)])],2)}var Mke=We(Cke,[["render",_ke]]);const Eke=se({name:"PageJumper",components:{InputNumber:Qm},props:{current:{type:Number,required:!0},simple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},pages:{type:Number,required:!0},size:{type:String},onChange:{type:Function}},emits:["change"],setup(e,{emit:t}){const i=Se("pagination-jumper"),{t:r}=Yr(),a=ie(e.simple?e.current:void 0),n=l=>{const u=parseInt(l.toString(),10);return Number.isNaN(u)?void 0:String(u)},s=l=>{t("change",a.value),hr(()=>{e.simple||(a.value=void 0)})};Vt(()=>e.current,l=>{e.simple&&l!==a.value&&(a.value=l)});const o=T(()=>[i,{[`${i}-simple`]:e.simple}]);return{prefixCls:i,cls:o,t:r,inputValue:a,handleChange:s,handleFormatter:n}}});function Ake(e,t,i,r,a,n){const s=be("input-number");return N(),ee("span",{class:Y(e.cls)},[e.simple?Me("v-if",!0):(N(),ee("span",{key:0,class:Y([`${e.prefixCls}-prepend`,`${e.prefixCls}-text-goto`])},[ye(e.$slots,"jumper-prepend",{},()=>[ti(Bt(e.t("pagination.goto")),1)])],2)),_(s,{modelValue:e.inputValue,"onUpdate:modelValue":t[0]||(t[0]=o=>e.inputValue=o),class:Y(`${e.prefixCls}-input`),min:1,max:e.pages,size:e.size,disabled:e.disabled,"hide-button":"",formatter:e.handleFormatter,onChange:e.handleChange},null,8,["modelValue","class","max","size","disabled","formatter","onChange"]),e.$slots["jumper-append"]?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-append`)},[ye(e.$slots,"jumper-append")],2)):Me("v-if",!0),e.simple?(N(),ee(Xt,{key:2},[ve("span",{class:Y(`${e.prefixCls}-separator`)},"/",2),ve("span",{class:Y(`${e.prefixCls}-total-page`)},Bt(e.pages),3)],64)):Me("v-if",!0)],2)}var B5=We(Eke,[["render",Ake]]);const Pke=se({name:"PageOptions",components:{ArcoSelect:Mm},props:{sizeOptions:{type:Array,required:!0},pageSize:Number,disabled:Boolean,size:{type:String},onChange:{type:Function},selectProps:{type:Object}},emits:["change"],setup(e,{emit:t}){const i=Se("pagination-options"),{t:r}=Yr(),a=T(()=>e.sizeOptions.map(s=>({value:s,label:`${s} ${r("pagination.countPerPage")}`})));return{prefixCls:i,options:a,handleChange:s=>{t("change",s)}}}});function Tke(e,t,i,r,a,n){const s=be("arco-select");return N(),ee("span",{class:Y(e.prefixCls)},[_(s,it({"model-value":e.pageSize,options:e.options,size:e.size,disabled:e.disabled},e.selectProps,{onChange:e.handleChange}),null,16,["model-value","options","size","disabled","onChange"])],2)}var kke=We(Pke,[["render",Tke]]),yC=se({name:"Pagination",props:{total:{type:Number,required:!0},current:Number,defaultCurrent:{type:Number,default:1},pageSize:Number,defaultPageSize:{type:Number,default:10},disabled:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},showTotal:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1},showJumper:{type:Boolean,default:!1},showPageSize:{type:Boolean,default:!1},pageSizeOptions:{type:Array,default:()=>[10,20,30,40,50]},pageSizeProps:{type:Object},size:{type:String},pageItemStyle:{type:Object},activePageItemStyle:{type:Object},baseSize:{type:Number,default:6},bufferSize:{type:Number,default:2},autoAdjust:{type:Boolean,default:!0}},emits:{"update:current":e=>!0,"update:pageSize":e=>!0,change:e=>!0,pageSizeChange:e=>!0},setup(e,{emit:t,slots:i}){const r=Se("pagination"),{t:a}=Yr(),{disabled:n,pageItemStyle:s,activePageItemStyle:o,size:l}=yt(e),{mergedSize:u}=hn(l),c=ie(e.defaultCurrent),d=ie(e.defaultPageSize),h=T(()=>{var w;return(w=e.current)!=null?w:c.value}),p=T(()=>{var w;return(w=e.pageSize)!=null?w:d.value}),f=T(()=>Math.ceil(e.total/p.value)),v=w=>{w!==h.value&&Mt(w)&&!e.disabled&&(c.value=w,t("update:current",w),t("change",w))},m=w=>{d.value=w,t("update:pageSize",w),t("pageSizeChange",w)},g=gt({current:h,pages:f,disabled:n,style:s,activeStyle:o,onClick:v}),y=(w,E={})=>w==="more"?_(Mke,it(E,g),{default:i["page-item-ellipsis"]}):w==="previous"?_(L5,it({type:"previous"},E,g),{default:i["page-item-step"]}):w==="next"?_(L5,it({type:"next"},E,g),{default:i["page-item-step"]}):_(wke,it(E,g),{default:i["page-item"]}),b=T(()=>{const w=[];if(f.value<e.baseSize+e.bufferSize*2)for(let E=1;E<=f.value;E++)w.push(y("page",{key:E,pageNumber:E}));else{let E=1,M=f.value,P=!1,A=!1;h.value>2+e.bufferSize&&(P=!0,E=Math.min(h.value-e.bufferSize,f.value-2*e.bufferSize)),h.value<f.value-(e.bufferSize+1)&&(A=!0,M=Math.max(h.value+e.bufferSize,2*e.bufferSize+1)),P&&(w.push(y("page",{key:1,pageNumber:1})),w.push(y("more",{key:"left-ellipsis-pager",step:-(e.bufferSize*2+1)})));for(let k=E;k<=M;k++)w.push(y("page",{key:k,pageNumber:k}));A&&(w.push(y("more",{key:"right-ellipsis-pager",step:e.bufferSize*2+1})),w.push(y("page",{key:f.value,pageNumber:f.value})))}return w}),x=()=>e.simple?_("span",{class:`${r}-simple`},[y("previous",{simple:!0}),_(B5,{disabled:e.disabled,current:h.value,size:u.value,pages:f.value,simple:!0,onChange:v},null),y("next",{simple:!0})]):_("ul",{class:`${r}-list`},[y("previous",{simple:!0}),b.value,e.showMore&&y("more",{key:"more",step:e.bufferSize*2+1}),y("next",{simple:!0})]);Vt(p,(w,E)=>{if(e.autoAdjust&&w!==E&&h.value>1){const M=E*(h.value-1)+1,P=Math.ceil(M/w);P!==h.value&&(c.value=P,t("update:current",P),t("change",P))}}),Vt(f,(w,E)=>{if(e.autoAdjust&&w!==E&&h.value>1&&h.value>w){const M=Math.max(w,1);c.value=M,t("update:current",M),t("change",M)}});const S=T(()=>[r,`${r}-size-${u.value}`,{[`${r}-simple`]:e.simple,[`${r}-disabled`]:e.disabled}]);return()=>{var w,E;return e.hideOnSinglePage&&f.value<=1?null:_("div",{class:S.value},[e.showTotal&&_("span",{class:`${r}-total`},[(E=(w=i.total)==null?void 0:w.call(i,{total:e.total}))!=null?E:a("pagination.total",e.total)]),x(),e.showPageSize&&_(kke,{disabled:e.disabled,sizeOptions:e.pageSizeOptions,pageSize:p.value,size:u.value,onChange:m,selectProps:e.pageSizeProps},null),!e.simple&&e.showJumper&&_(B5,{disabled:e.disabled,current:h.value,pages:f.value,size:u.value,onChange:v},{"jumper-prepend":i["jumper-prepend"],"jumper-append":i["jumper-append"]})])}}});const kP=Object.assign(yC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+yC.name,yC)}}),Oke=(e,{emit:t})=>{var i,r;const a=ie(ki(e.paginationProps)&&(i=e.paginationProps.defaultCurrent)!=null?i:1),n=ie(ki(e.paginationProps)&&(r=e.paginationProps.defaultPageSize)!=null?r:10),s=T(()=>{var c;return ki(e.paginationProps)&&(c=e.paginationProps.current)!=null?c:a.value}),o=T(()=>{var c;return ki(e.paginationProps)&&(c=e.paginationProps.pageSize)!=null?c:n.value});return{current:s,pageSize:o,handlePageChange:c=>{a.value=c,t("pageChange",c)},handlePageSizeChange:c=>{n.value=c,t("pageSizeChange",c)}}};function z5(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var bC=se({name:"List",props:{data:{type:Array},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},split:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},paginationProps:{type:Object},gridProps:{type:Object},maxHeight:{type:[String,Number],default:0},bottomOffset:{type:Number,default:0},virtualListProps:{type:Object},scrollbar:{type:[Object,Boolean],default:!0}},emits:{scroll:()=>!0,reachBottom:()=>!0,pageChange:e=>!0,pageSizeChange:e=>!0},setup(e,{emit:t,slots:i}){const{scrollbar:r}=yt(e),a=Se("list"),n=Ai(Pn,void 0),{componentRef:s,elementRef:o}=Sh("containerRef"),l=T(()=>e.virtualListProps),{displayScrollbar:u,scrollbarProps:c}=l1(r);let d=0;const h=D=>{const{scrollTop:F,scrollHeight:U,offsetHeight:z}=D.target,B=Math.floor(U-(F+z));F>d&&B<=e.bottomOffset&&t("reachBottom"),t("scroll"),d=F};xi(()=>{if(o.value){const{scrollTop:D,scrollHeight:F,offsetHeight:U}=o.value;F<=D+U&&t("reachBottom")}});const{current:p,pageSize:f,handlePageChange:v,handlePageSizeChange:m}=Oke(e,{emit:t}),g=D=>{if(!e.paginationProps)return D;if(e.paginationProps&&D.length>f.value){const F=(p.value-1)*f.value;return D.slice(F,F+f.value)}return D},y=D=>{let F;if(!e.gridProps)return null;const U=g(D);if(e.gridProps.span){const z=[],B=24/e.gridProps.span;for(let W=0;W<U.length;W+=B){let R;const $=W+B,q=Math.floor(W/B);z.push(_(Mf.Row,{key:q,class:`${a}-row`,gutter:e.gridProps.gutter},z5(R=U.slice(W,$).map((Z,G)=>{var X;return _(Mf.Col,{key:`${q}-${G}`,class:`${a}-col`,span:(X=e.gridProps)==null?void 0:X.span},{default:()=>{var J;return[ea(Z)?Z:(J=i.item)==null?void 0:J.call(i,{item:Z,index:G})]}})}))?R:{default:()=>[R]}))}return z}return _(Mf.Row,{class:`${a}-row`,gutter:e.gridProps.gutter},z5(F=U.map((z,B)=>_(Mf.Col,it({key:B,class:`${a}-col`},ln(e.gridProps,["gutter"])),{default:()=>{var W;return[ea(z)?z:(W=i.item)==null?void 0:W.call(i,{item:z,index:B})]}})))?F:{default:()=>[F]})},b=D=>g(D).map((U,z)=>{var B;return ea(U)?U:(B=i.item)==null?void 0:B.call(i,{item:U,index:z})}),x=()=>{const D=i.default?ul(i.default()):e.data;return D&&D.length>0?e.gridProps?y(D):b(D):I()},S=()=>{if(!e.paginationProps)return null;const D=ln(e.paginationProps,["current","pageSize","defaultCurrent","defaultPageSize"]);return _(kP,it({class:`${a}-pagination`},D,{current:p.value,pageSize:f.value,onChange:v,onPageSizeChange:m}),null)},w=T(()=>[a,`${a}-${e.size}`,{[`${a}-bordered`]:e.bordered,[`${a}-split`]:e.split,[`${a}-hover`]:e.hoverable}]),E=T(()=>{if(e.maxHeight)return{maxHeight:Mt(e.maxHeight)?`${e.maxHeight}px`:e.maxHeight,overflowY:"auto"}}),M=T(()=>[`${a}-content`,{[`${a}-virtual`]:l.value}]),P=ie(),A=()=>{var D;const F=g((D=e.data)!=null?D:[]);return F.length?_(Tp,it({ref:P,class:M.value,data:F},e.virtualListProps,{onScroll:h}),{item:({item:U,index:z})=>{var B;return(B=i.item)==null?void 0:B.call(i,{item:U,index:z})}}):I()},k=()=>i["scroll-loading"]?_("div",{class:[`${a}-item`,`${a}-scroll-loading`]},[i["scroll-loading"]()]):null,I=()=>{var D,F,U,z,B;return i["scroll-loading"]?null:(B=(z=(D=i.empty)==null?void 0:D.call(i))!=null?z:(U=n==null?void 0:(F=n.slots).empty)==null?void 0:U.call(F,{component:"list"}))!=null?B:_(gu,null,null)};return{virtualListRef:P,render:()=>{const D=u.value?Io:"div";return _("div",{class:`${a}-wrapper`},[_(Do,{class:`${a}-spin`,loading:e.loading},{default:()=>[_(D,it({ref:s,class:w.value,style:E.value},c.value,{onScroll:h}),{default:()=>[_("div",{class:`${a}-content-wrapper`},[i.header&&_("div",{class:`${a}-header`},[i.header()]),l.value&&!e.gridProps?_(Xt,null,[A(),k()]):_("div",{role:"list",class:M.value},[x(),k()]),i.footer&&_("div",{class:`${a}-footer`},[i.footer()])])]}),S()]})])}}},methods:{scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)}},render(){return this.render()}}),z0=se({name:"ListItem",props:{actionLayout:{type:String,default:"horizontal"}},setup(e,{slots:t}){const i=Se("list-item"),r=()=>{var a;const n=(a=t.actions)==null?void 0:a.call(t);return!n||!n.length?null:_("ul",{class:`${i}-action`},[n.map((s,o)=>_("li",{key:`${i}-action-${o}`},[s]))])};return()=>{var a,n;return _("div",{role:"listitem",class:i},[_("div",{class:`${i}-main`},[(a=t.meta)==null?void 0:a.call(t),_("div",{class:`${i}-content`},[(n=t.default)==null?void 0:n.call(t)]),e.actionLayout==="vertical"&&r()]),e.actionLayout==="horizontal"&&r(),t.extra&&_("div",{class:`${i}-extra`},[t.extra()])])}}});const Dke=se({name:"ListItemMeta",props:{title:String,description:String},setup(e,{slots:t}){const i=Se("list-item-meta"),r=!!(e.title||e.description||t.title||t.description);return{prefixCls:i,hasContent:r}}});function Ike(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[e.$slots.avatar?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-avatar`)},[ye(e.$slots,"avatar")],2)):Me("v-if",!0),e.hasContent?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-content`)},[e.$slots.title||e.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),e.$slots.description||e.description?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-description`)},[ye(e.$slots,"description",{},()=>[ti(Bt(e.description),1)])],2)):Me("v-if",!0)],2)):Me("v-if",!0)],2)}var R0=We(Dke,[["render",Ike]]);const Oj=Object.assign(bC,{Item:Object.assign(z0,{Meta:R0}),install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+bC.name,bC),e.component(i+z0.name,z0),e.component(i+R0.name,R0)}}),Lke=["border-width","box-sizing","font-family","font-weight","font-size","font-variant","letter-spacing","line-height","padding-top","padding-bottom","padding-left","padding-right","text-indent","text-rendering","text-transform","white-space","overflow-wrap","width"],UM=e=>{const t={};return Lke.forEach(i=>{t[i]=e.getPropertyValue(i)}),t},Bke=se({name:"Textarea",components:{ResizeObserver:Ao,IconHover:Ur,IconClose:kn},inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},placeholder:String,disabled:{type:Boolean,default:!1},error:{type:Boolean,default:!1},maxLength:{type:[Number,Object],default:0},showWordLimit:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},autoSize:{type:[Boolean,Object],default:!1},wordLength:{type:Function},wordSlice:{type:Function}},emits:{"update:modelValue":e=>!0,input:(e,t)=>!0,change:(e,t)=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:i}){const{disabled:r,error:a,modelValue:n}=yt(e),s=Se("textarea"),{mergedDisabled:o,mergedError:l,eventHandlers:u}=Wr({disabled:r,error:a}),c=ie(),d=ie(),h=ie(),p=ie(),f=ie(e.defaultValue),v=T(()=>{var ce;return(ce=n.value)!=null?ce:f.value}),[m,g]=wz(c);Vt(n,ce=>{(ei(ce)||Wn(ce))&&(f.value="")});const y=T(()=>ki(e.maxLength)&&!!e.maxLength.errorOnly),b=T(()=>ki(e.maxLength)?e.maxLength.length:e.maxLength),x=ce=>{var le;return Zt(e.wordLength)?e.wordLength(ce):(le=ce.length)!=null?le:0},S=T(()=>x(v.value)),w=T(()=>l.value||!!(b.value&&y.value&&S.value>b.value)),E=ie(!1),M=ie(!1),P=T(()=>e.allowClear&&!o.value&&v.value),A=ie(!1),k=ie(""),I=()=>{m(),hr(()=>{c.value&&v.value!==c.value.value&&(c.value.value=v.value,g())})},O=(ce,le=!0)=>{var xe,Ne;b.value&&!y.value&&x(ce)>b.value&&(ce=(Ne=(xe=e.wordSlice)==null?void 0:xe.call(e,ce,b.value))!=null?Ne:ce.slice(0,b.value)),f.value=ce,le&&t("update:modelValue",ce),I()};let D=v.value;const F=(ce,le)=>{var xe,Ne;ce!==D&&(D=ce,t("change",ce,le),(Ne=(xe=u.value)==null?void 0:xe.onChange)==null||Ne.call(xe,le))},U=ce=>{var le,xe;M.value=!0,D=v.value,t("focus",ce),(xe=(le=u.value)==null?void 0:le.onFocus)==null||xe.call(le,ce)},z=ce=>{var le,xe;M.value=!1,t("blur",ce),(xe=(le=u.value)==null?void 0:le.onBlur)==null||xe.call(le,ce),F(v.value,ce)},B=ce=>{var le,xe;const{value:Ne}=ce.target;if(ce.type==="compositionend"){if(A.value=!1,k.value="",b.value&&!y.value&&v.value.length>=b.value&&x(Ne)>b.value){I();return}t("input",Ne,ce),O(Ne),(xe=(le=u.value)==null?void 0:le.onInput)==null||xe.call(le,ce)}else A.value=!0},W=ce=>{var le,xe;const{value:Ne}=ce.target;if(A.value)k.value=Ne;else{if(b.value&&!y.value&&v.value.length>=b.value&&x(Ne)>b.value&&ce.inputType==="insertText"){I();return}t("input",Ne,ce),O(Ne),(xe=(le=u.value)==null?void 0:le.onInput)==null||xe.call(le,ce)}},R=ce=>{O(""),F("",ce),t("clear",ce)};Vt(n,ce=>{ce!==v.value&&O(ce??"",!1)});const $=ce=>ln(i,sc),q=ce=>ml(i,sc),Z=T(()=>[`${s}-wrapper`,{[`${s}-focus`]:M.value,[`${s}-disabled`]:o.value,[`${s}-error`]:w.value,[`${s}-scroll`]:E.value}]);let G;const X=ie(0),J=ie(0),pe=T(()=>!ki(e.autoSize)||!e.autoSize.minRows?0:e.autoSize.minRows*X.value+J.value),fe=T(()=>!ki(e.autoSize)||!e.autoSize.maxRows?0:e.autoSize.maxRows*X.value+J.value),de=()=>{const ce=UM(G);X.value=Number.parseInt(ce["line-height"]||0,10),J.value=Number.parseInt(ce["border-width"]||0,10)*2+Number.parseInt(ce["padding-top"]||0,10)+Number.parseInt(ce["padding-bottom"]||0,10),p.value=ce,hr(()=>{var le;const xe=(le=h.value)==null?void 0:le.offsetHeight;let Ne=xe??0,pt="hidden";pe.value&&Ne<pe.value&&(Ne=pe.value),fe.value&&Ne>fe.value&&(Ne=fe.value,pt="auto"),d.value={height:`${Ne}px`,resize:"none",overflow:pt}})};xi(()=>{c.value&&(G=window.getComputedStyle(c.value),e.autoSize&&de()),ke()});const ge=()=>{e.autoSize&&h.value&&de(),ke()},me=ce=>{c.value&&ce.target!==c.value&&(ce.preventDefault(),c.value.focus())},ke=()=>{c.value&&(c.value.scrollHeight>c.value.offsetHeight?E.value||(E.value=!0):E.value&&(E.value=!1))};return Vt(v,()=>{e.autoSize&&h.value&&de(),ke()}),{prefixCls:s,wrapperCls:Z,textareaRef:c,textareaStyle:d,mirrorRef:h,mirrorStyle:p,computedValue:v,showClearBtn:P,valueLength:S,computedMaxLength:b,mergedDisabled:o,getWrapperAttrs:$,getTextareaAttrs:q,handleInput:W,handleFocus:U,handleBlur:z,handleComposition:B,handleClear:R,handleResize:ge,handleMousedown:me}},methods:{focus(){var e;(e=this.$refs.textareaRef)==null||e.focus()},blur(){var e;(e=this.$refs.textareaRef)==null||e.blur()}}}),zke=["disabled","value","placeholder"];function Rke(e,t,i,r,a,n){const s=be("resize-observer"),o=be("icon-close"),l=be("icon-hover");return N(),ee("div",it(e.getWrapperAttrs(e.$attrs),{class:e.wrapperCls,onMousedown:t[7]||(t[7]=(...u)=>e.handleMousedown&&e.handleMousedown(...u))}),[e.autoSize?(N(),ee("div",{key:0,ref:"mirrorRef",class:Y(`${e.prefixCls}-mirror`),style:It(e.mirrorStyle)},Bt(`${e.computedValue}
`),7)):Me("v-if",!0),_(s,{onResize:e.handleResize},{default:He(()=>[ve("textarea",it({ref:"textareaRef"},e.getTextareaAttrs(e.$attrs),{disabled:e.mergedDisabled,class:e.prefixCls,style:e.textareaStyle,value:e.computedValue,placeholder:e.placeholder,onInput:t[0]||(t[0]=(...u)=>e.handleInput&&e.handleInput(...u)),onFocus:t[1]||(t[1]=(...u)=>e.handleFocus&&e.handleFocus(...u)),onBlur:t[2]||(t[2]=(...u)=>e.handleBlur&&e.handleBlur(...u)),onCompositionstart:t[3]||(t[3]=(...u)=>e.handleComposition&&e.handleComposition(...u)),onCompositionupdate:t[4]||(t[4]=(...u)=>e.handleComposition&&e.handleComposition(...u)),onCompositionend:t[5]||(t[5]=(...u)=>e.handleComposition&&e.handleComposition(...u))}),null,16,zke)]),_:1},8,["onResize"]),ye(e.$slots,"suffix"),e.computedMaxLength&&e.showWordLimit?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-word-limit`)},Bt(e.valueLength)+"/"+Bt(e.computedMaxLength),3)):Me("v-if",!0),e.showClearBtn?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-clear-btn`),onClick:t[6]||(t[6]=(...u)=>e.handleClear&&e.handleClear(...u))},[_(l,null,{default:He(()=>[_(o)]),_:1})],2)):Me("v-if",!0)],16)}var wC=We(Bke,[["render",Rke]]);const Dj=Object.assign(wC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+wC.name,wC)}}),Nke=e=>{const{value:t,selectionStart:i}=e;return t.slice(0,i)},Vke=(e,t)=>[].concat(t).reduce((r,a)=>{const n=e.lastIndexOf(a);return n>r.location?{location:n,prefix:a}:r},{location:-1,prefix:""}),Fke=(e,t)=>!t||!e.includes(t);var jke=Object.defineProperty,R5=Object.getOwnPropertySymbols,$ke=Object.prototype.hasOwnProperty,Uke=Object.prototype.propertyIsEnumerable,N5=(e,t,i)=>t in e?jke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Wke=(e,t)=>{for(var i in t||(t={}))$ke.call(t,i)&&N5(e,i,t[i]);if(R5)for(var i of R5(t))Uke.call(t,i)&&N5(e,i,t[i]);return e};function Hke(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var xC=se({name:"Mention",inheritAttrs:!1,props:{modelValue:String,defaultValue:{type:String,default:""},data:{type:Array,default:()=>[]},prefix:{type:[String,Array],default:"@"},split:{type:String,default:" "},type:{type:String,default:"input"},disabled:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1}},emits:{"update:modelValue":e=>!0,change:e=>!0,search:(e,t)=>!0,select:e=>!0,clear:e=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t,attrs:i,slots:r}){const a=Se("mention");let n;const{mergedDisabled:s,eventHandlers:o}=Wr({disabled:Os(e,"disabled")}),{data:l,modelValue:u}=yt(e),c=ie(),d=ie({}),h=ie(e.defaultValue),p=T(()=>{var Z;return(Z=e.modelValue)!=null?Z:h.value});Vt(u,Z=>{(ei(Z)||Wn(Z))&&(h.value="")});const f=T(()=>p.value?[gd(p.value)]:[]),v=ie({measuring:!1,location:-1,prefix:"",text:""}),m=()=>{v.value={measuring:!1,location:-1,prefix:"",text:""}},g=ie(),y=T(()=>v.value.text),b=ie(!0),x=(Z,G)=>{var X,J;const pe=Nke(G.target),fe=Vke(pe,e.prefix);if(fe.location>-1){const de=pe.slice(fe.location+fe.prefix.length);Fke(de,e.split)?(w.value=!0,v.value=Wke({measuring:!0,text:de},fe),t("search",de,fe.prefix)):v.value.location>-1&&m()}else v.value.location>-1&&m();h.value=Z,t("update:modelValue",Z),t("change",Z),(J=(X=o.value)==null?void 0:X.onChange)==null||J.call(X)},S=Z=>{var G,X;h.value="",t("update:modelValue",""),t("change",""),(X=(G=o.value)==null?void 0:G.onChange)==null||X.call(G),t("clear",Z)},w=ie(!1),E=T(()=>w.value&&v.value.measuring&&O.value.length>0),M=()=>{F.value=UM(n)},P=Z=>{w.value=Z},A=(Z,G)=>{var X,J,pe;const{value:fe}=(X=I.get(Z))!=null?X:{},de=v.value.location,ge=v.value.location+v.value.text.length;let me=h.value.slice(0,de),ke=h.value.slice(ge+1);me+=!me||me.endsWith(e.split)||me.endsWith(`
`)?"":e.split,ke=(!ke||ke.startsWith(e.split)||ke.startsWith(`
`)?"":e.split)+ke;const ce=`${v.value.prefix}${fe}`,le=`${me}${ce}${ke}`;h.value=le,t("select",fe),t("update:modelValue",le),t("change",le),m(),(pe=(J=o.value)==null?void 0:J.onChange)==null||pe.call(J)},{validOptions:k,optionInfoMap:I,validOptionInfos:O,handleKeyDown:D}=lP({options:l,inputValue:y,filterOption:b,popupVisible:E,valueKeys:f,dropdownRef:c,optionRefs:d,onSelect:A,onPopupVisibleChange:P,enterToOpen:!1}),F=ie();xi(()=>{var Z;e.type==="textarea"&&((Z=g.value)!=null&&Z.textareaRef)&&(n=window.getComputedStyle(g.value.textareaRef),F.value=UM(n))});const U=Z=>{if(Zt(r.option)&&Z.value){const G=I.get(Z.key),X=r.option;return()=>X({data:G})}return()=>Z.label},z=Z=>_(id,{ref:G=>{G?.$el&&(d.value[Z.key]=G.$el)},key:Z.key,value:Z.value,disabled:Z.disabled,internal:!0},{default:U(Z)}),B=()=>{let Z;return _(sP,{ref:c},Hke(Z=k.value.map(G=>z(G)))?Z:{default:()=>[Z]})},W=ie();Vt(E,Z=>{e.type==="textarea"&&Z&&hr(()=>{var G,X;(G=g.value)!=null&&G.textareaRef&&g.value.textareaRef.scrollTop>0&&((X=W.value)==null||X.scrollTo(0,g.value.textareaRef.scrollTop))})});const R=Z=>{t("focus",Z)},$=Z=>{t("blur",Z)};return{inputRef:g,render:()=>{var Z;return e.type==="textarea"?_("div",{class:a},[_(Ao,{onResize:M},{default:()=>[_(Dj,it(i,{ref:g,allowClear:e.allowClear,modelValue:p.value,disabled:s.value,onInput:x,onClear:S,onFocus:R,onBlur:$,onKeydown:D}),null)]}),v.value.measuring&&O.value.length>0&&_("div",{ref:W,style:F.value,class:`${a}-measure`},[(Z=p.value)==null?void 0:Z.slice(0,v.value.location),_($a,{trigger:"focus",position:"bl",popupOffset:4,preventFocus:!0,popupVisible:E.value,clickToClose:!1,onPopupVisibleChange:P},{default:()=>[_("span",null,[ti("@")])],content:B})])]):_($a,{trigger:"focus",position:"bl",animationName:"slide-dynamic-origin",popupOffset:4,preventFocus:!0,popupVisible:E.value,clickToClose:!1,autoFitPopupWidth:!0,autoFitTransformOrigin:!0,disabled:s.value,onPopupVisibleChange:P},{default:()=>[_(mc,it(i,{ref:g,allowClear:e.allowClear,modelValue:p.value,disabled:s.value,onInput:x,onClear:S,onFocus:R,onBlur:$,onKeydown:D}),r)],content:B})}}},methods:{focus(){var e;(e=this.inputRef)==null||e.focus()},blur(){var e;(e=this.inputRef)==null||e.blur()}},render(){return this.render()}});const Gke=Object.assign(xC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+xC.name,xC)}}),OP=Symbol("MenuInjectionKey"),DP=Symbol("LevelInjectionKey"),Ij=Symbol("DataCollectorInjectionKey"),qke=se({name:"IconMenuFold",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-menu-fold`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Yke=["stroke-width","stroke-linecap","stroke-linejoin"],Xke=ve("path",{d:"M42 11H6M42 24H22M42 37H6M13.66 26.912l-4.82-3.118 4.82-3.118v6.236Z"},null,-1),Kke=[Xke];function Zke(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Kke,14,Yke)}var SC=We(qke,[["render",Zke]]);const Qke=Object.assign(SC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+SC.name,SC)}}),Jke=se({name:"IconMenuUnfold",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-menu-unfold`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),eOe=["stroke-width","stroke-linecap","stroke-linejoin"],tOe=ve("path",{d:"M6 11h36M22 24h20M6 37h36M8 20.882 12.819 24 8 27.118v-6.236Z"},null,-1),iOe=[tOe];function rOe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},iOe,14,eOe)}var CC=We(Jke,[["render",rOe]]);const aOe=Object.assign(CC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+CC.name,CC)}});function IP(e){const t=T(()=>sz(e)?e.value:e);dr(DP,gt({level:t}))}function tv(e){const{provideNextLevel:t}=e||{},i=Ai(DP),r=T(()=>i?.level||1);if(t){const a=T(()=>r.value+1);IP(a)}return{level:r}}function V5(e,t){const i=[],r=a=>{a.forEach(n=>{t(n)&&i.push(n.key),n.children&&r(n.children)})};return r(e),i}function Lj(e=!1){return e?void 0:Ai(Ij)}function Bj(e){const{key:t,type:i}=e,r=ie([]),a=Lj(i==="menu");return dr(Ij,{collectSubMenu(s,o,l=!1){const u={key:s,children:o};if(l){const c=r.value.find(d=>d.key===s);c?c.children=o:r.value.push(u)}else r.value=[...r.value,u];l&&(i==="popupMenu"?a?.reportMenuData(r.value):i==="subMenu"&&!ei(s)&&a?.collectSubMenu(s,r.value,!0))},removeSubMenu(s){r.value=r.value.filter(o=>o.key!==s)},collectMenuItem(s){r.value.push({key:s})},removeMenuItem(s){r.value=r.value.filter(o=>o.key!==s)},reportMenuData(s){r.value=s,i==="subMenu"&&!ei(t)&&a?.collectSubMenu(t,r.value,!0)}}),i==="subMenu"&&!ei(t)?(xi(()=>{a?.collectSubMenu(t,r.value)}),sn(()=>{a?.removeSubMenu(t)})):i==="popupMenu"&&xi(()=>{a?.reportMenuData(r.value)}),{menuData:r,subMenuKeys:T(()=>V5(r.value,s=>!!s.children)),menuItemKeys:T(()=>V5(r.value,s=>!s.children))}}function nOe(e,t){const i=[],r=a=>{for(let n=0;n<a.length;n++){const s=a[n];if(s.key===t)return!0;if(s.children){if(i.push(s.key),r(s.children))return!0;i.pop()}}return!1};return r(e),i}function sOe(e,t){return e.length!==t.length?!1:e.toString()===t.toString()}function oOe(e){const{modelValue:t,defaultValue:i,autoOpen:r,autoOpenSelected:a,subMenuKeys:n,selectedKeys:s,menuData:o,accordion:l}=yt(e),u=ie(ei(t.value)?ei(i.value)?[]:i.value:t.value),c=f=>{u.value=f};Vt(t,()=>{ei(t.value)&&c([])});let d=[];xi(()=>{d=[...n.value];let f=[];if(r.value&&(f=l.value?n.value.slice(0,1):[...n.value]),a.value){const v=s.value.map(m=>nOe(o.value,m));v.length&&(!r.value||l.value)&&(f=l.value?v[0]:[...new Set([].concat(...v))])}f.length&&c(f)});let h=!1;Vt(n,(f,v=[])=>{if(h||!sOe(f,d)){const m=p.value.filter(g=>f.includes(g));if(r.value){const g=f.filter(y=>!v.includes(y));m.push(...g)}c(l.value?m.slice(0,1):m)}h=!0});const p=T(()=>t.value||u.value);return{openKeys:p,localOpenKeys:u,setOpenKeys:c,open(f,v){let m=[];return p.value.indexOf(f)>-1?l.value&&v===1?m=[]:m=p.value.filter(g=>g!==f):l.value&&v===1?m=[f]:m=p.value.concat([f]),c(m),m}}}const lOe=se({name:"BaseMenu",components:{IconMenuFold:Qke,IconMenuUnfold:aOe},inheritAttrs:!1,props:{style:{type:Object},theme:{type:String,default:"light"},mode:{type:String,default:"vertical"},levelIndent:{type:Number},autoOpen:{type:Boolean},collapsed:{type:Boolean,default:void 0},defaultCollapsed:{type:Boolean},collapsedWidth:{type:Number},accordion:{type:Boolean},autoScrollIntoView:{type:Boolean},showCollapseButton:{type:Boolean},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array,default:()=>[]},openKeys:{type:Array},defaultOpenKeys:{type:Array,default:()=>[]},scrollConfig:{type:Object},triggerProps:{type:Object},tooltipProps:{type:Object},autoOpenSelected:{type:Boolean},breakpoint:{type:String},popupMaxHeight:{type:[Boolean,Number],default:!0},prefixCls:{type:String},inTrigger:{type:Boolean},siderCollapsed:{type:Boolean},isRoot:{type:Boolean}},emits:["update:collapsed","update:selectedKeys","update:openKeys","collapse","menu-item-click","sub-menu-click"],setup(e,{emit:t,slots:i}){const{style:r,mode:a,theme:n,levelIndent:s,accordion:o,showCollapseButton:l,scrollConfig:u,autoScrollIntoView:c,collapsedWidth:d,autoOpen:h,collapsed:p,defaultCollapsed:f,selectedKeys:v,defaultSelectedKeys:m,openKeys:g,defaultOpenKeys:y,triggerProps:b,tooltipProps:x,autoOpenSelected:S,breakpoint:w,popupMaxHeight:E,prefixCls:M,inTrigger:P,siderCollapsed:A,isRoot:k}=yt(e),{subMenuKeys:I,menuData:O}=Bj({type:k.value?"menu":"popupMenu"}),[D,F]=ja(m.value,gt({value:v})),{openKeys:U,setOpenKeys:z,open:B}=oOe(gt({modelValue:g,defaultValue:y,autoOpen:h,autoOpenSelected:S,selectedKeys:D,subMenuKeys:I,menuData:O,accordion:o})),[W,R]=ja(f.value,gt({value:p})),$=T(()=>A.value||W.value||a.value==="popButton"),q=T(()=>["horizontal","popButton"].indexOf(a.value)<0&&!P.value&&l.value),Z=(me,ke)=>{me!==W.value&&(R(me),t("update:collapsed",me),t("collapse",me,ke))},G=()=>{Z(!W.value,"clickTrigger")};Tj(w,me=>{Z(!me,"responsive")});const X=T(()=>M?.value||Se("menu")),J=T(()=>[X.value,`${X.value}-${n?.value}`,{[`${X.value}-horizontal`]:a.value==="horizontal",[`${X.value}-vertical`]:a.value!=="horizontal",[`${X.value}-collapsed`]:$.value,[`${X.value}-pop`]:a.value==="pop"||$.value,[`${X.value}-pop-button`]:a.value==="popButton"}]),pe=T(()=>{const me=Mt(d.value)?`${d.value}px`:void 0,ke=ki(r.value)?r.value:void 0,ce=$.value?me:ke?.width;return[ke?ln(ke,["width"]):r.value,{width:ce}]}),fe=vo(i,"expand-icon-down"),de=vo(i,"expand-icon-right"),ge=gt({theme:n,mode:a,levelIndent:s,autoScrollIntoView:c,selectedKeys:D,openKeys:U,prefixCls:X,scrollConfig:u,inTrigger:P,collapsed:$,triggerProps:b,tooltipProps:x,popupMaxHeight:E,expandIconDown:fe,expandIconRight:de,onMenuItemClick:me=>{F([me]),t("update:selectedKeys",[me]),t("menu-item-click",me)},onSubMenuClick:(me,ke)=>{const ce=B(me,ke);z(ce),t("update:openKeys",ce),t("sub-menu-click",me,ce)}});return dr(OP,ge),IP(1),{computedPrefixCls:X,classNames:J,computedStyle:pe,computedCollapsed:$,computedHasCollapseButton:q,onCollapseBtnClick:G}}});function uOe(e,t,i,r,a,n){const s=be("IconMenuUnfold"),o=be("IconMenuFold");return N(),ee("div",it({class:e.classNames},e.$attrs,{style:e.computedStyle}),[ve("div",{class:Y(`${e.computedPrefixCls}-inner`)},[ye(e.$slots,"default")],2),e.computedHasCollapseButton?(N(),ee("div",{key:0,class:Y(`${e.computedPrefixCls}-collapse-button`),onClick:t[0]||(t[0]=(...l)=>e.onCollapseBtnClick&&e.onCollapseBtnClick(...l))},[ye(e.$slots,"collapse-icon",{collapsed:e.computedCollapsed},()=>[e.computedCollapsed?(N(),De(s,{key:0})):(N(),De(o,{key:1}))])],2)):Me("v-if",!0)],16)}var WM=We(lOe,[["render",uOe]]);function F5(e,t){if(!e||!t)return null;let i=t;i==="float"&&(i="cssFloat");try{if(document.defaultView){const r=document.defaultView.getComputedStyle(e,"");return e.style[i]||r?r[i]:""}}catch{return e.style[i]}return null}function Ad(){return Ai(OP)||{}}const cOe=(()=>{let e=0;return(t="")=>(e+=1,`${t}${e}`)})();function b1(){const e=xs();return{key:T(()=>e?.vnode.key||cOe("__arco_menu"))}}const dOe=se({name:"MenuIndent",props:{level:{type:Number,default:1}},setup(){const e=Se("menu"),t=Ad();return{prefixCls:e,levelIndent:Os(t,"levelIndent")}}});function hOe(e,t,i,r,a,n){return e.level>1?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-indent-list`)},[(N(!0),ee(Xt,null,Br(e.level-1,s=>(N(),ee("span",{key:s,class:Y(`${e.prefixCls}-indent`),style:It(`width: ${e.levelIndent}px`)},null,6))),128))],2)):Me("v-if",!0)}var w1=We(dOe,[["render",hOe]]);const pOe=se({name:"ExpandTransition",setup(){return{onBeforeEnter(e){e.style.height="0"},onEnter(e){e.style.height=`${e.scrollHeight}px`},onAfterEnter(e){e.style.height=""},onBeforeLeave(e){e.style.height=`${e.scrollHeight}px`},onLeave(e){e.style.height="0"},onAfterLeave(e){e.style.height=""}}}});function fOe(e,t,i,r,a,n){return N(),De(rs,{onBeforeEnter:e.onBeforeEnter,onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave,onLeave:e.onLeave,onAfterLeave:e.onAfterLeave},{default:He(()=>[ye(e.$slots,"default")]),_:3},8,["onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])}var mOe=We(pOe,[["render",fOe]]);const vOe=se({name:"SubMenuInline",components:{MenuIndent:w1,ExpandTransition:mOe},props:{title:{type:String},isChildrenSelected:{type:Boolean}},setup(e){const{key:t}=b1(),{level:i}=tv({provideNextLevel:!0}),r=Ad(),a=T(()=>r.prefixCls),n=T(()=>`${a.value}-inline`),s=T(()=>[n.value]),o=T(()=>e.isChildrenSelected),l=T(()=>(r.openKeys||[]).indexOf(t.value)>-1);return{prefixCls:n,menuPrefixCls:a,classNames:s,level:i,isSelected:o,isOpen:l,onHeaderClick:()=>{r.onSubMenuClick&&r.onSubMenuClick(t.value,i.value)}}}});function gOe(e,t,i,r,a,n){const s=be("MenuIndent"),o=be("ExpandTransition");return N(),ee("div",{class:Y(e.classNames)},[ve("div",{class:Y([`${e.prefixCls}-header`,{[`${e.menuPrefixCls}-selected`]:e.isSelected,[`${e.menuPrefixCls}-has-icon`]:e.$slots.icon}]),onClick:t[0]||(t[0]=(...l)=>e.onHeaderClick&&e.onHeaderClick(...l))},[_(s,{level:e.level},null,8,["level"]),e.$slots.icon?(N(),ee(Xt,{key:0},[ve("span",{class:Y(`${e.menuPrefixCls}-icon`)},[ye(e.$slots,"icon")],2),ve("span",{class:Y(`${e.menuPrefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)],64)):ye(e.$slots,"title",{key:1},()=>[ti(Bt(e.title),1)]),ve("span",{class:Y([`${e.menuPrefixCls}-icon-suffix`,{"is-open":e.isOpen}])},[ye(e.$slots,"expand-icon-down")],2)],2),_(o,null,{default:He(()=>[Ys(ve("div",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2),[[Xs,e.isOpen]])]),_:3})],2)}var yOe=We(vOe,[["render",gOe]]);const bOe=se({name:"SubMenuPop",components:{Menu:WM,Trigger:$a,MenuIndent:w1,RenderFunction:bu},inheritAttrs:!1,props:{title:{type:String},selectable:{type:Boolean},isChildrenSelected:{type:Boolean},popupMaxHeight:{type:[Boolean,Number],default:void 0}},setup(e){const{key:t}=b1(),{level:i}=tv(),{selectable:r,isChildrenSelected:a,popupMaxHeight:n}=yt(e),s=Ad(),{onSubMenuClick:o,onMenuItemClick:l}=s,u=T(()=>s.prefixCls),c=T(()=>s.mode),d=T(()=>s.selectedKeys||[]),h=T(()=>`${u.value}-pop`),p=T(()=>r.value&&d.value.includes(t.value)||a.value),f=T(()=>[`${h.value}`,`${h.value}-header`,{[`${u.value}-selected`]:p.value}]),v=T(()=>c.value==="horizontal"&&!s.inTrigger),m=ie(!1),g=S=>{m.value=S},y=Se("trigger"),b=T(()=>{var S;return[`${h.value}-trigger`,{[`${h.value}-trigger-dark`]:s.theme==="dark"},(S=s.triggerProps)==null?void 0:S.class]}),x=T(()=>ln(s.triggerProps||{},["class"]));return{menuPrefixCls:u,mode:c,level:i,classNames:f,isSelected:p,selectedKeys:d,needPopOnBottom:v,popVisible:m,triggerPrefixCls:y,triggerClassNames:b,triggerProps:x,menuContext:s,popupMenuStyles:T(()=>{var S;const w=(S=n.value)!=null?S:s.popupMaxHeight;return Mt(w)?{maxHeight:`${w}px`}:w?{}:{maxHeight:"unset"}}),onClick:()=>{o&&o(t.value,i.value),r.value&&l&&l(t.value)},onMenuItemClick:S=>{l&&l(S),g(!1)},onVisibleChange:S=>{g(S)}}}});function wOe(e,t,i,r,a,n){const s=be("MenuIndent"),o=be("RenderFunction"),l=be("Menu"),u=be("Trigger");return N(),De(u,it({trigger:"hover",class:e.triggerClassNames,position:e.needPopOnBottom?"bl":"rt","show-arrow":"","animation-class":"fade-in","mouse-enter-delay":50,"mouse-leave-delay":50,"popup-offset":4,"auto-fit-popup-min-width":!0,duration:100},e.triggerProps,{"unmount-on-close":!1,"popup-visible":e.popVisible,onPopupVisibleChange:e.onVisibleChange}),{content:He(()=>[_(l,{"in-trigger":"","prefix-cls":`${e.triggerPrefixCls}-menu`,"selected-keys":e.selectedKeys,theme:e.menuContext.theme,"trigger-props":e.menuContext.triggerProps,style:It(e.popupMenuStyles),onMenuItemClick:e.onMenuItemClick},$r({default:He(()=>[ye(e.$slots,"default")]),_:2},[e.menuContext.expandIconDown?{name:"expand-icon-down",fn:He(()=>[_(o,{"render-func":e.menuContext.expandIconDown},null,8,["render-func"])])}:void 0,e.menuContext.expandIconRight?{name:"expand-icon-right",fn:He(()=>[_(o,{"render-func":e.menuContext.expandIconRight},null,8,["render-func"])])}:void 0]),1032,["prefix-cls","selected-keys","theme","trigger-props","style","onMenuItemClick"])]),default:He(()=>[ve("div",it({class:[e.classNames,{[`${e.menuPrefixCls}-has-icon`]:e.$slots.icon}],"aria-haspopup":"true"},e.$attrs,{onClick:t[0]||(t[0]=(...c)=>e.onClick&&e.onClick(...c))}),[Me(" header "),_(s,{level:e.level},null,8,["level"]),e.$slots.icon?(N(),ee(Xt,{key:0},[ve("span",{class:Y(`${e.menuPrefixCls}-icon`)},[ye(e.$slots,"icon")],2),ve("span",{class:Y(`${e.menuPrefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)],64)):ye(e.$slots,"title",{key:1},()=>[ti(Bt(e.title),1)]),Me(" suffix "),ve("span",{class:Y(`${e.menuPrefixCls}-icon-suffix`)},[e.needPopOnBottom?ye(e.$slots,"expand-icon-down",{key:0}):ye(e.$slots,"expand-icon-right",{key:1})],2),e.isSelected&&e.mode==="horizontal"?(N(),ee("div",{key:2,class:Y(`${e.menuPrefixCls}-selected-label`)},null,2)):Me("v-if",!0)],16)]),_:3},16,["class","position","popup-visible","onPopupVisibleChange"])}var xOe=We(bOe,[["render",wOe]]),SOe=Object.defineProperty,COe=Object.defineProperties,_Oe=Object.getOwnPropertyDescriptors,j5=Object.getOwnPropertySymbols,MOe=Object.prototype.hasOwnProperty,EOe=Object.prototype.propertyIsEnumerable,$5=(e,t,i)=>t in e?SOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,AOe=(e,t)=>{for(var i in t||(t={}))MOe.call(t,i)&&$5(e,i,t[i]);if(j5)for(var i of j5(t))EOe.call(t,i)&&$5(e,i,t[i]);return e},POe=(e,t)=>COe(e,_Oe(t)),Yf=se({name:"SubMenu",props:{title:{type:String},selectable:{type:Boolean},popup:{type:[Boolean,Function],default:!1},popupMaxHeight:{type:[Boolean,Number],default:void 0}},setup(e,{attrs:t}){const{key:i}=b1(),{level:r}=tv(),{popup:a}=yt(e),n=Ad(),s=T(()=>{const{mode:c,collapsed:d,inTrigger:h}=n;return!!(typeof a.value=="function"?a.value(r.value):a.value)||d||h||c!=="vertical"}),{subMenuKeys:o,menuItemKeys:l}=Bj({key:i.value,type:"subMenu"}),u=T(()=>{const c=n.selectedKeys||[],d=h=>{for(let p=0;p<c.length;p++){const f=c[p];if(h.includes(f))return!0}return!1};return d(o.value)||d(l.value)});return{subMenuKeys:o,menuItemKeys:l,isChildrenSelected:u,props:e,attrs:t,computedKey:i,computedPopup:s,expandIconDown:Os(n,"expandIconDown"),expandIconRight:Os(n,"expandIconRight")}},render(){const{props:e,attrs:t,computedKey:i,computedPopup:r,expandIconDown:a,expandIconRight:n,isChildrenSelected:s}=this,o=POe(AOe({},this.$slots),{"expand-icon-down":this.$slots["expand-icon-down"]||a||(()=>[_(kp,null,null)]),"expand-icon-right":this.$slots["expand-icon-right"]||n||(()=>[_(zo,null,null)])});return r?_(xOe,it({key:i,title:e.title,selectable:e.selectable,isChildrenSelected:s,popupMaxHeight:e.popupMaxHeight},t),o):_(yOe,it({key:i,title:e.title,isChildrenSelected:s},t),o)}});const TOe=10;function U5(e){return e&&+e.getBoundingClientRect().width.toFixed(2)}function W5(e){const t=Number(e.replace("px",""));return Number.isNaN(t)?0:t}var kOe=se({name:"MenuOverflowWrap",setup(e,{slots:t}){const r=`${Ad().prefixCls}-overflow`,a=`${r}-sub-menu`,n=`${r}-hidden-menu-item`,s=`${r}-sub-menu-mirror`,o=ie(),l=ie(null),u=ie();function c(){const d=o.value,h=U5(d),p=[].slice.call(d.children);let f=0,v=0,m=0;for(let g=0;g<p.length;g++){const y=p[g],b=y.className.split(" "),x=b.indexOf(a)>-1,S=b.indexOf(s)>-1;if(x)continue;const w=U5(y)+W5(F5(y,"marginLeft"))+W5(F5(y,"marginRight"));if(S){m=w;continue}if(v+=w,v+m+TOe>h){l.value=f-1;return}f++}l.value=null}return xi(()=>{c(),u.value=new Ob(d=>{d.forEach(c)}),o.value&&u.value.observe(o.value)}),sn(()=>{u.value&&u.value.disconnect()}),()=>{const d=(p,f)=>{const{isMirror:v=!1,props:m={}}=f||{};return _(Yf,it({key:`__arco-menu-overflow-sub-menu${v?"-mirror":""}`,class:v?s:a},m),{title:()=>_("span",null,[ti("...")]),default:()=>p})},h=()=>{var p;const f=((p=t.default)==null?void 0:p.call(t))||[],v=u$(f);let m=null;const g=d(null,{isMirror:!0}),y=v.map((b,x)=>{const S=Uh(b,l.value!==null&&x>l.value?{class:n}:{class:""});if(l.value!==null&&x===l.value+1){const w=v.slice(x).map(E=>Uh(E));m=d(w)}return S});return[g,...y,m]};return _("div",{class:`${r}-wrap`,ref:o},[h()])}}}),OOe=Object.defineProperty,DOe=Object.defineProperties,IOe=Object.getOwnPropertyDescriptors,H5=Object.getOwnPropertySymbols,LOe=Object.prototype.hasOwnProperty,BOe=Object.prototype.propertyIsEnumerable,G5=(e,t,i)=>t in e?OOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,zOe=(e,t)=>{for(var i in t||(t={}))LOe.call(t,i)&&G5(e,i,t[i]);if(H5)for(var i of H5(t))BOe.call(t,i)&&G5(e,i,t[i]);return e},ROe=(e,t)=>DOe(e,IOe(t)),_C=se({name:"Menu",components:{BaseMenu:WM},inheritAttrs:!1,props:{theme:{type:String},mode:{type:String,default:"vertical"}},setup(e,{attrs:t,slots:i}){const{theme:r,mode:a}=yt(e),n=Ai(_j,void 0),s=T(()=>n?.collapsed||!1),o=T(()=>r?.value||n?.theme||"light");return dr(OP,void 0),dr(DP,void 0),()=>_(WM,it(e,t,{theme:o.value,inTrigger:!1,siderCollapsed:s.value,isRoot:!0}),ROe(zOe({},i),{default:a.value==="horizontal"&&i.default?()=>_(kOe,null,{default:()=>{var l;return[(l=i.default)==null?void 0:l.call(i)]}}):i.default}))}}),NOe=Object.defineProperty,q5=Object.getOwnPropertySymbols,VOe=Object.prototype.hasOwnProperty,FOe=Object.prototype.propertyIsEnumerable,Y5=(e,t,i)=>t in e?NOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,jOe=(e,t)=>{for(var i in t||(t={}))VOe.call(t,i)&&Y5(e,i,t[i]);if(q5)for(var i of q5(t))FOe.call(t,i)&&Y5(e,i,t[i]);return e},N0=se({name:"MenuItem",inheritAttrs:!1,props:{disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t}){const{key:i}=b1(),{level:r}=tv(),a=Ad(),n=ie(),s=T(()=>(a.selectedKeys||[]).indexOf(i.value)>-1),o=Lj();xi(()=>{o?.collectMenuItem(i.value)}),sn(()=>{o?.removeMenuItem(i.value)});function l(){a.autoScrollIntoView&&n.value&&s.value&&cj(n.value,jOe({behavior:"smooth",block:"nearest",scrollMode:"if-needed",boundary:document.documentElement},a.scrollConfig||{}))}let u;return xi(()=>{u=setTimeout(()=>{l()},500)}),sn(()=>{clearTimeout(u)}),Vt([s],()=>{l()}),{menuContext:a,level:r,isSelected:s,refItemElement:n,onClick(c){e.disabled||(a.onMenuItemClick&&a.onMenuItemClick(i.value),t("click",c))}}},render(){var e,t;const{level:i,menuContext:r,disabled:a,isSelected:n,onClick:s}=this,{prefixCls:o,collapsed:l,inTrigger:u,mode:c,tooltipProps:d}=r,h=l&&!u&&i===1,p=c==="vertical"&&i>1,f=((t=(e=this.$slots).default)==null?void 0:t.call(e))||[],v=p&&!u&&!l,m=this.$slots.icon&&this.$slots.icon(),g=[v&&_(w1,{level:i},null),m&&_("span",{class:`${o}-icon`},[m]),v||m?_("span",{class:[`${o}-item-inner`,{[`${o}-title`]:m}]},[f]):f].filter(Boolean),y=_("div",it({ref:"refItemElement",class:[`${o}-item`,{[`${o}-disabled`]:a,[`${o}-selected`]:n,[`${o}-has-icon`]:m}]},this.$attrs,{onClick:s}),[g,n&&c==="horizontal"&&_("div",{class:`${o}-selected-label`},null)]);if(h){const b=[`${o}-item-tooltip`,d?.class];return _(eo,it({trigger:"hover",position:"right",class:b},ln(d||{},["class"])),{default:()=>y,content:()=>f})}return y}});const $Oe=se({name:"MenuItemGroup",components:{MenuIndent:w1},props:{title:{type:String}},setup(){const{level:e}=tv(),t=T(()=>e.value===1?e.value+1:e.value);IP(t);const i=Ad(),r=T(()=>i.prefixCls),a=T(()=>[`${r.value}-group`]);return{prefixCls:r,classNames:a,level:e}}});function UOe(e,t,i,r,a,n){const s=be("MenuIndent");return N(),ee("div",{class:Y(e.classNames)},[ve("div",{class:Y(`${e.prefixCls}-group-title`)},[_(s,{level:e.level},null,8,["level"]),ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2),ye(e.$slots,"default")],2)}var V0=We($Oe,[["render",UOe]]);const WOe=Object.assign(_C,{Item:N0,ItemGroup:V0,SubMenu:Yf,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+_C.name,_C),e.component(i+N0.name,N0),e.component(i+V0.name,V0),e.component(i+Yf.name,Yf)}}),HOe=se({name:"Message",components:{AIconHover:Ur,IconInfoCircleFill:Ym,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up,IconClose:kn,IconLoading:$n},props:{type:{type:String,default:"info"},closable:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!0},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1},resetOnHover:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const i=Se("message");let r=0;const a=()=>{t("close")},n=()=>{e.duration>0&&(r=window.setTimeout(a,e.duration))},s=()=>{r&&(window.clearTimeout(r),r=0)};return xi(()=>{n()}),Ss(()=>{e.resetOnUpdate&&(s(),n())}),sn(()=>{s()}),{handleMouseEnter:()=>{e.resetOnHover&&s()},handleMouseLeave:()=>{e.resetOnHover&&n()},prefixCls:i,handleClose:a}}});function GOe(e,t,i,r,a,n){const s=be("icon-info-circle-fill"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill"),c=be("icon-loading"),d=be("icon-close"),h=be("a-icon-hover");return N(),ee("li",{role:"alert",class:Y([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}]),onMouseenter:t[1]||(t[1]=(...p)=>e.handleMouseEnter&&e.handleMouseEnter(...p)),onMouseleave:t[2]||(t[2]=(...p)=>e.handleMouseLeave&&e.handleMouseLeave(...p))},[e.showIcon&&!(e.type==="normal"&&!e.$slots.icon)?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon",{},()=>[e.type==="info"?(N(),De(s,{key:0})):e.type==="success"?(N(),De(o,{key:1})):e.type==="warning"?(N(),De(l,{key:2})):e.type==="error"?(N(),De(u,{key:3})):e.type==="loading"?(N(),De(c,{key:4})):Me("v-if",!0)])],2)):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2),e.closable?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...p)=>e.handleClose&&e.handleClose(...p))},[_(h,null,{default:He(()=>[_(d)]),_:1})],2)):Me("v-if",!0)],34)}var qOe=We(HOe,[["render",GOe]]);function YOe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var XOe=se({name:"MessageList",props:{messages:{type:Array,default:()=>[]},position:{type:String,default:"top"}},emits:["close","afterClose"],setup(e,t){const i=Se("message-list"),{zIndex:r}=cp("message",{runOnMounted:!0});return()=>{let a;return _(Am,{class:[i,`${i}-${e.position}`],name:"fade-message",tag:"ul",style:{zIndex:r.value},onAfterLeave:()=>t.emit("afterClose")},YOe(a=e.messages.map(n=>{const s={default:Qn(n.content),icon:Qn(n.icon)};return _(qOe,{key:n.id,type:n.type,duration:n.duration,closable:n.closable,resetOnUpdate:n.resetOnUpdate,resetOnHover:n.resetOnHover,onClose:()=>t.emit("close",n.id)},s)}))?a:{default:()=>[a]})}}}),KOe=Object.defineProperty,ZOe=Object.defineProperties,QOe=Object.getOwnPropertyDescriptors,X5=Object.getOwnPropertySymbols,JOe=Object.prototype.hasOwnProperty,eDe=Object.prototype.propertyIsEnumerable,K5=(e,t,i)=>t in e?KOe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,wb=(e,t)=>{for(var i in t||(t={}))JOe.call(t,i)&&K5(e,i,t[i]);if(X5)for(var i of X5(t))eDe.call(t,i)&&K5(e,i,t[i]);return e},zj=(e,t)=>ZOe(e,QOe(t));class tDe{constructor(t,i){this.messageCount=0,this.add=n=>{var s;this.messageCount++;const o=(s=n.id)!=null?s:`__arco_message_${this.messageCount}`;if(this.messageIds.has(o))return this.update(o,n);const l=gt(wb({id:o},n));return this.messages.value.push(l),this.messageIds.add(o),{close:()=>this.remove(o)}},this.update=(n,s)=>{for(let o=0;o<this.messages.value.length;o++)if(this.messages.value[o].id===n){const l=!ei(s.duration);Object.assign(this.messages.value[o],zj(wb({},s),{id:n,resetOnUpdate:l}));break}return{close:()=>this.remove(n)}},this.remove=n=>{for(let s=0;s<this.messages.value.length;s++){const o=this.messages.value[s];if(o.id===n){Zt(o.onClose)&&o.onClose(n),this.messages.value.splice(s,1),this.messageIds.delete(n);break}}},this.clear=()=>{this.messages.value.splice(0)},this.destroy=()=>{this.messages.value.length===0&&this.container&&(nc(null,this.container),document.body.removeChild(this.container),this.container=null,jh[this.position]=void 0)};const{position:r="top"}=t;this.container=_b("message"),this.messageIds=new Set,this.messages=ie([]),this.position=r;const a=_(XOe,{messages:this.messages.value,position:r,onClose:this.remove,onAfterClose:this.destroy});(i??HM._context)&&(a.appContext=i??HM._context),nc(a,this.container),document.body.appendChild(this.container)}}const jh={},Rj=[...Tb,"loading","normal"],F0=Rj.reduce((e,t)=>(e[t]=(i,r)=>{na(i)&&(i={content:i});const a=wb({type:t},i),{position:n="top"}=a;return jh[n]||(jh[n]=new tDe(a,r)),jh[n].add(a)},e),{});F0.clear=e=>{var t;e?(t=jh[e])==null||t.clear():Object.values(jh).forEach(i=>i?.clear())};const HM=zj(wb({},F0),{install:e=>{const t={clear:F0.clear};for(const i of Rj)t[i]=(r,a=e._context)=>F0[i](r,a);e.config.globalProperties.$message=t},_context:null}),iDe=({modalRef:e,wrapperRef:t,draggable:i,alignCenter:r})=>{const a=ie(!1),n=ie([0,0]),s=ie([0,0]),o=ie(),l=ie([0,0]),u=ie([0,0]),c=()=>{var f,v,m;if(t.value&&e.value){const{top:g,left:y}=t.value.getBoundingClientRect(),{clientWidth:b,clientHeight:x}=t.value,{top:S,left:w,width:E,height:M}=e.value.getBoundingClientRect(),P=r.value?0:(f=e.value)==null?void 0:f.offsetTop,A=w-y,k=S-g-P;(A!==((v=s.value)==null?void 0:v[0])||k!==((m=s.value)==null?void 0:m[1]))&&(s.value=[A,k]);const I=b>E?b-E:0,O=x>M?x-M-P:0;(I!==u.value[0]||O!==u.value[1])&&(u.value=[I,O]),P&&(l.value=[0,0-P])}},d=f=>{i.value&&(f.preventDefault(),a.value=!0,c(),n.value=[f.x,f.y],wr(window,"mousemove",h),wr(window,"mouseup",p),wr(window,"contextmenu",p))},h=f=>{if(a.value){const v=f.x-n.value[0],m=f.y-n.value[1];let g=s.value[0]+v,y=s.value[1]+m;g<l.value[0]&&(g=l.value[0]),g>u.value[0]&&(g=u.value[0]),y<l.value[1]&&(y=l.value[1]),y>u.value[1]&&(y=u.value[1]),o.value=[g,y]}},p=()=>{a.value=!1,Ir(window,"mousemove",h),Ir(window,"mouseup",p)};return{position:o,handleMoveDown:d}};var rDe=Object.defineProperty,Z5=Object.getOwnPropertySymbols,aDe=Object.prototype.hasOwnProperty,nDe=Object.prototype.propertyIsEnumerable,Q5=(e,t,i)=>t in e?rDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,sDe=(e,t)=>{for(var i in t||(t={}))aDe.call(t,i)&&Q5(e,i,t[i]);if(Z5)for(var i of Z5(t))nDe.call(t,i)&&Q5(e,i,t[i]);return e},oDe=se({name:"Modal",components:{ClientOnly:oE,ArcoButton:un,IconHover:Ur,IconClose:kn,IconInfoCircleFill:Ym,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up},inheritAttrs:!1,props:{visible:{type:Boolean,default:void 0},defaultVisible:{type:Boolean,default:!1},width:{type:[Number,String]},top:{type:[Number,String]},mask:{type:Boolean,default:!0},title:{type:String},titleAlign:{type:String,default:"center"},alignCenter:{type:Boolean,default:!0},unmountOnClose:Boolean,maskClosable:{type:Boolean,default:!0},hideCancel:{type:Boolean,default:!1},simple:{type:Boolean,default:e=>e.notice},closable:{type:Boolean,default:!0},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},footer:{type:Boolean,default:!0},renderToBody:{type:Boolean,default:!0},popupContainer:{type:[String,Object],default:"body"},maskStyle:{type:Object},modalClass:{type:[String,Array]},modalStyle:{type:Object},onBeforeOk:{type:Function},onBeforeCancel:{type:Function},escToClose:{type:Boolean,default:!0},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},maskAnimationName:{type:String,default:e=>e.fullscreen?"fade-in-standard":"fade-modal"},modalAnimationName:{type:String,default:e=>e.fullscreen?"zoom-in":"zoom-modal"},bodyClass:{type:[String,Array]},bodyStyle:{type:[String,Object,Array]},messageType:{type:String},hideTitle:{type:Boolean,default:!1}},emits:{"update:visible":e=>!0,ok:e=>!0,cancel:e=>!0,open:()=>!0,close:()=>!0,beforeOpen:()=>!0,beforeClose:()=>!0},setup(e,{emit:t}){const{fullscreen:i,popupContainer:r,alignCenter:a}=yt(e),n=Se("modal"),{t:s}=Yr(),o=ie(),l=ie(),u=ie(e.defaultVisible),c=T(()=>{var X;return(X=e.visible)!=null?X:u.value}),d=ie(!1),h=T(()=>e.okLoading||d.value),p=T(()=>e.draggable&&!e.fullscreen),{teleportContainer:f,containerRef:v}=lE({popupContainer:r,visible:c}),m=ie(c.value),g=T(()=>e.okText||s("modal.okText")),y=T(()=>e.cancelText||s("modal.cancelText")),{zIndex:b,isLastDialog:x}=cp("dialog",{visible:c});let S=!1;const w=X=>{e.escToClose&&X.key===Kr.ESC&&x()&&D(X)},E=()=>{e.escToClose&&!S&&(S=!0,wr(document.documentElement,"keydown",w))},M=()=>{S=!1,Ir(document.documentElement,"keydown",w)};let P=0;const{position:A,handleMoveDown:k}=iDe({wrapperRef:o,modalRef:l,draggable:p,alignCenter:a}),I=()=>{P++,d.value&&(d.value=!1),u.value=!1,t("update:visible",!1)},O=async X=>{const J=P,pe=await new Promise(async fe=>{var de;if(Zt(e.onBeforeOk)){let ge=e.onBeforeOk((me=!0)=>fe(me));if((ld(ge)||!jn(ge))&&(d.value=!0),ld(ge))try{ge=(de=await ge)!=null?de:!0}catch{ge=!1}jn(ge)&&fe(ge)}else fe(!0)});J===P&&(pe?(t("ok",X),I()):d.value&&(d.value=!1))},D=X=>{var J;let pe=!0;Zt(e.onBeforeCancel)&&(pe=(J=e.onBeforeCancel())!=null?J:!1),pe&&(t("cancel",X),I())},F=ie(!1),U=X=>{X.target===o.value&&(F.value=!0)},z=X=>{e.mask&&e.maskClosable&&F.value&&D(X)},B=()=>{c.value&&(!F9(o.value,document.activeElement)&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t("open"))},W=()=>{c.value||(p.value&&(A.value=void 0),m.value=!1,$(),t("close"))},{setOverflowHidden:R,resetOverflow:$}=lj(v);xi(()=>{v.value=el(e.popupContainer),c.value&&(R(),e.escToClose&&E())}),Tn(()=>{$(),M()}),Vt(c,X=>{u.value!==X&&(u.value=X),X?(t("beforeOpen"),m.value=!0,F.value=!1,R(),E()):(t("beforeClose"),M())}),Vt(i,()=>{A.value&&(A.value=void 0)});const q=T(()=>[`${n}-wrapper`,{[`${n}-wrapper-align-center`]:e.alignCenter&&!e.fullscreen,[`${n}-wrapper-moved`]:!!A.value}]),Z=T(()=>[`${n}`,e.modalClass,{[`${n}-simple`]:e.simple,[`${n}-draggable`]:p.value,[`${n}-fullscreen`]:e.fullscreen}]),G=T(()=>{var X;const J=sDe({},(X=e.modalStyle)!=null?X:{});return e.width&&!e.fullscreen&&(J.width=Mt(e.width)?`${e.width}px`:e.width),!e.alignCenter&&e.top&&(J.top=Mt(e.top)?`${e.top}px`:e.top),A.value&&(J.transform=`translate(${A.value[0]}px, ${A.value[1]}px)`),J});return{prefixCls:n,mounted:m,computedVisible:c,containerRef:v,wrapperRef:o,mergedModalStyle:G,okDisplayText:g,cancelDisplayText:y,zIndex:b,handleOk:O,handleCancel:D,handleMaskClick:z,handleMaskMouseDown:U,handleOpen:B,handleClose:W,mergedOkLoading:h,modalRef:l,wrapperCls:q,modalCls:Z,teleportContainer:f,handleMoveDown:k}}});function lDe(e,t,i,r,a,n){const s=be("icon-info-circle-fill"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill"),c=be("icon-close"),d=be("icon-hover"),h=be("arco-button"),p=be("client-only");return N(),De(p,null,{default:He(()=>[(N(),De(Cb,{to:e.teleportContainer,disabled:!e.renderToBody},[!e.unmountOnClose||e.computedVisible||e.mounted?Ys((N(),ee("div",it({key:0,class:`${e.prefixCls}-container`,style:{zIndex:e.zIndex}},e.$attrs),[_(rs,{name:e.maskAnimationName,appear:""},{default:He(()=>[e.mask?Ys((N(),ee("div",{key:0,ref:"maskRef",class:Y(`${e.prefixCls}-mask`),style:It(e.maskStyle)},null,6)),[[Xs,e.computedVisible]]):Me("v-if",!0)]),_:1},8,["name"]),ve("div",{ref:"wrapperRef",class:Y(e.wrapperCls),onClick:t[2]||(t[2]=ks((...f)=>e.handleMaskClick&&e.handleMaskClick(...f),["self"])),onMousedown:t[3]||(t[3]=ks((...f)=>e.handleMaskMouseDown&&e.handleMaskMouseDown(...f),["self"]))},[_(rs,{name:e.modalAnimationName,appear:"",onAfterEnter:e.handleOpen,onAfterLeave:e.handleClose},{default:He(()=>[Ys(ve("div",{ref:"modalRef",class:Y(e.modalCls),style:It(e.mergedModalStyle)},[!e.hideTitle&&(e.$slots.title||e.title||e.closable)?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-header`),onMousedown:t[1]||(t[1]=(...f)=>e.handleMoveDown&&e.handleMoveDown(...f))},[e.$slots.title||e.title?(N(),ee("div",{key:0,class:Y([`${e.prefixCls}-title`,`${e.prefixCls}-title-align-${e.titleAlign}`])},[e.messageType?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title-icon`)},[e.messageType==="info"?(N(),De(s,{key:0})):Me("v-if",!0),e.messageType==="success"?(N(),De(o,{key:1})):Me("v-if",!0),e.messageType==="warning"?(N(),De(l,{key:2})):Me("v-if",!0),e.messageType==="error"?(N(),De(u,{key:3})):Me("v-if",!0)],2)):Me("v-if",!0),ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),!e.simple&&e.closable?(N(),ee("div",{key:1,tabindex:"-1",role:"button","aria-label":"Close",class:Y(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...f)=>e.handleCancel&&e.handleCancel(...f))},[_(d,null,{default:He(()=>[_(c)]),_:1})],2)):Me("v-if",!0)],34)):Me("v-if",!0),ve("div",{class:Y([`${e.prefixCls}-body`,e.bodyClass]),style:It(e.bodyStyle)},[ye(e.$slots,"default")],6),e.footer?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer",{},()=>[e.hideCancel?Me("v-if",!0):(N(),De(h,it({key:0},e.cancelButtonProps,{onClick:e.handleCancel}),{default:He(()=>[ti(Bt(e.cancelDisplayText),1)]),_:1},16,["onClick"])),_(h,it({type:"primary"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:He(()=>[ti(Bt(e.okDisplayText),1)]),_:1},16,["loading","onClick"])])],2)):Me("v-if",!0)],6),[[Xs,e.computedVisible]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])],34)],16)),[[Xs,e.computedVisible||e.mounted]]):Me("v-if",!0)],8,["to","disabled"]))]),_:3})}var j0=We(oDe,[["render",lDe]]),uDe=Object.defineProperty,cDe=Object.defineProperties,dDe=Object.getOwnPropertyDescriptors,J5=Object.getOwnPropertySymbols,hDe=Object.prototype.hasOwnProperty,pDe=Object.prototype.propertyIsEnumerable,eB=(e,t,i)=>t in e?uDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,nd=(e,t)=>{for(var i in t||(t={}))hDe.call(t,i)&&eB(e,i,t[i]);if(J5)for(var i of J5(t))pDe.call(t,i)&&eB(e,i,t[i]);return e},fDe=(e,t)=>cDe(e,dDe(t));const MC=(e,t)=>{let i=_b("modal");const r=()=>{u.component&&(u.component.props.visible=!1),Zt(e.onOk)&&e.onOk()},a=()=>{u.component&&(u.component.props.visible=!1),Zt(e.onCancel)&&e.onCancel()},n=async()=>{await hr(),i&&(nc(null,i),document.body.removeChild(i)),i=null,Zt(e.onClose)&&e.onClose()},s=()=>{u.component&&(u.component.props.visible=!1)},o=c=>{u.component&&Object.entries(c).forEach(([d,h])=>{u.component.props[d]=h})},u=_(j0,nd(nd(nd({},{visible:!0,renderToBody:!1,unmountOnClose:!0,onOk:r,onCancel:a,onClose:n}),ln(e,["content","title","footer","visible","unmountOnClose","onOk","onCancel","onClose"])),{footer:typeof e.footer=="boolean"?e.footer:void 0}),{default:Qn(e.content),title:Qn(e.title),footer:typeof e.footer!="boolean"?Qn(e.footer):void 0});return(t??GM._context)&&(u.appContext=t??GM._context),nc(u,i),document.body.appendChild(i),{close:s,update:o}},EC=nd({open:MC,confirm:(e,t)=>{const i=nd({simple:!0,messageType:"warning"},e);return MC(i,t)}},Tb.reduce((e,t)=>(e[t]=(i,r)=>{const a=nd({simple:!0,hideCancel:!0,messageType:t},i);return MC(a,r)},e),{})),GM=Object.assign(j0,fDe(nd({},EC),{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+j0.name,j0);const r={};for(const a of Object.keys(EC))r[a]=(n,s=e._context)=>EC[a](n,s);e.config.globalProperties.$modal=r},_context:null})),mDe=e=>e.replace(/\B([A-Z])/g,"-$1").toLowerCase(),vDe=se({name:"Notification",components:{AIconHover:Ur,IconInfoCircleFill:Ym,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up,IconClose:kn},props:{type:{type:String,default:"info"},showIcon:{type:Boolean,default:!0},closable:{type:Boolean,default:!1},duration:{type:Number,default:3e3},resetOnUpdate:{type:Boolean,default:!1}},emits:["close"],setup(e,t){const i=Se("notification");let r=0;const a=()=>{t.emit("close")};return xi(()=>{e.duration>0&&(r=window.setTimeout(a,e.duration))}),Ss(()=>{e.resetOnUpdate&&(r&&(window.clearTimeout(r),r=0),e.duration>0&&(r=window.setTimeout(a,e.duration)))}),sn(()=>{r&&window.clearTimeout(r)}),{prefixCls:i,handleClose:a}}});function gDe(e,t,i,r,a,n){const s=be("icon-info-circle-fill"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill"),c=be("icon-close"),d=be("a-icon-hover");return N(),ee("li",{role:"alert",class:Y([e.prefixCls,`${e.prefixCls}-${e.type}`,{[`${e.prefixCls}-closable`]:e.closable}])},[e.showIcon?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-left`)},[ve("div",{class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon",{},()=>[e.type==="info"?(N(),De(s,{key:0})):e.type==="success"?(N(),De(o,{key:1})):e.type==="warning"?(N(),De(l,{key:2})):e.type==="error"?(N(),De(u,{key:3})):Me("v-if",!0)])],2)],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-right`)},[e.$slots.default?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"default")],2)):Me("v-if",!0),e.$slots.content?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"content")],2)):Me("v-if",!0),e.$slots.footer?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer")],2)):Me("v-if",!0)],2),e.closable?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-close-btn`),onClick:t[0]||(t[0]=(...h)=>e.handleClose&&e.handleClose(...h))},[ye(e.$slots,"closeIconElement",{},()=>[_(d,null,{default:He(()=>[ye(e.$slots,"closeIcon",{},()=>[_(c)])]),_:3})])],2)):Me("v-if",!0)],2)}var yDe=We(vDe,[["render",gDe]]);const bDe=["topLeft","topRight","bottomLeft","bottomRight"];function wDe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var xDe=se({name:"NotificationList",props:{notifications:{type:Array,default:()=>[]},position:{type:String,default:"topRight",validator:e=>bDe.includes(e)}},emits:["close","afterClose"],setup(e,t){const i=Se("notification-list"),r=mDe(e.position),{zIndex:a}=cp("message",{runOnMounted:!0}),n=e.position.includes("Right");return()=>{let s;return _(Am,{class:[i,`${i}-${r}`],style:{zIndex:a.value},name:`slide-${n?"right":"left"}-notification`,onAfterLeave:()=>t.emit("afterClose"),tag:"ul"},wDe(s=e.notifications.map(o=>{const l={default:Qn(o.title),content:Qn(o.content),icon:Qn(o.icon),footer:Qn(o.footer),closeIcon:Qn(o.closeIcon),closeIconElement:Qn(o.closeIconElement)};return _(yDe,{key:o.id,type:o.type,style:o.style,class:o.class,duration:o.duration,closable:o.closable,showIcon:o.showIcon,resetOnUpdate:o.resetOnUpdate,onClose:()=>t.emit("close",o.id)},l)}))?s:{default:()=>[s]})}}}),SDe=Object.defineProperty,CDe=Object.defineProperties,_De=Object.getOwnPropertyDescriptors,tB=Object.getOwnPropertySymbols,MDe=Object.prototype.hasOwnProperty,EDe=Object.prototype.propertyIsEnumerable,iB=(e,t,i)=>t in e?SDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xb=(e,t)=>{for(var i in t||(t={}))MDe.call(t,i)&&iB(e,i,t[i]);if(tB)for(var i of tB(t))EDe.call(t,i)&&iB(e,i,t[i]);return e},Nj=(e,t)=>CDe(e,_De(t));class ADe{constructor(t,i){this.notificationCount=0,this.add=n=>{var s;this.notificationCount++;const o=(s=n.id)!=null?s:`__arco_notification_${this.notificationCount}`;if(this.notificationIds.has(o))return this.update(o,n);const l=gt(xb({id:o},n));return this.notifications.value.push(l),this.notificationIds.add(o),{close:()=>this.remove(o)}},this.update=(n,s)=>{for(let o=0;o<this.notifications.value.length;o++)if(this.notifications.value[o].id===n){const l=!ei(s.duration);Object.assign(this.notifications.value[o],Nj(xb({},s),{id:n,resetOnUpdate:l}));break}return{close:()=>this.remove(n)}},this.remove=n=>{for(let s=0;s<this.notifications.value.length;s++){const o=this.notifications.value[s];if(o.id===n){Zt(o.onClose)&&o.onClose(n),this.notifications.value.splice(s,1),this.notificationIds.delete(n);break}}},this.clear=()=>{this.notifications.value.splice(0)},this.destroy=()=>{this.notifications.value.length===0&&this.container&&(nc(null,this.container),document.body.removeChild(this.container),this.container=null,sd[this.position]=void 0)};const{position:r="topRight"}=t;this.container=_b("notification"),this.notificationIds=new Set,this.notifications=ie([]),this.position=r;const a=_(xDe,{notifications:this.notifications.value,position:r,onClose:this.remove,onAfterClose:this.destroy});(i??qM._context)&&(a.appContext=i??qM._context),nc(a,this.container),document.body.appendChild(this.container)}}const sd={},Xf=Tb.reduce((e,t)=>(e[t]=(i,r)=>{na(i)&&(i={content:i});const a=xb({type:t},i),{position:n="topRight"}=a;return sd[n]||(sd[n]=new ADe(a,r)),sd[n].add(a)},e),{});Xf.remove=e=>{e&&Object.values(sd).forEach(t=>t?.remove(e))};Xf.clear=e=>{var t;e?(t=sd[e])==null||t.clear():Object.values(sd).forEach(i=>i?.clear())};const qM=Nj(xb({},Xf),{install:e=>{const t={clear:Xf.clear};for(const i of Tb)t[i]=(r,a=e._context)=>Xf[i](r,a);e.config.globalProperties.$notification=t},_context:null}),PDe=se({name:"PageHeader",components:{AIconHover:Ur,IconLeft:yu},props:{title:String,subtitle:String,showBack:{type:Boolean,default:!0}},emits:["back"],setup(e,{emit:t,slots:i}){const r=Se("page-header"),a=s=>{t("back",s)},n=T(()=>[r,{[`${r}-with-breadcrumb`]:!!i.breadcrumb,[`${r}-with-content`]:!!i.default}]);return{prefixCls:r,cls:n,handleBack:a}}});function TDe(e,t,i,r,a,n){const s=be("icon-left"),o=be("a-icon-hover");return N(),ee("div",{class:Y(e.cls)},[ve("div",{class:Y(`${e.prefixCls}-wrapper`)},[e.$slots.breadcrumb?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-breadcrumb`)},[ye(e.$slots,"breadcrumb")],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-header`)},[ve("span",{class:Y(`${e.prefixCls}-main`)},[e.showBack?(N(),De(o,{key:0,class:Y(`${e.prefixCls}-back-btn`),prefix:e.prefixCls,onClick:e.handleBack},{default:He(()=>[ye(e.$slots,"back-icon",{},()=>[_(s)])]),_:3},8,["class","prefix","onClick"])):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2),e.$slots.subtitle||e.subtitle?(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-divider`)},null,2)):Me("v-if",!0),e.$slots.subtitle||e.subtitle?(N(),ee("span",{key:2,class:Y(`${e.prefixCls}-subtitle`)},[ye(e.$slots,"subtitle",{},()=>[ti(Bt(e.subtitle),1)])],2)):Me("v-if",!0)],2),e.$slots.extra?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-extra`)},[ye(e.$slots,"extra")],2)):Me("v-if",!0)],2)],2),e.$slots.default?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2)):Me("v-if",!0)],2)}var AC=We(PDe,[["render",TDe]]);const kDe=Object.assign(AC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+AC.name,AC)}}),ODe=se({name:"Popconfirm",components:{ArcoButton:un,Trigger:$a,IconInfoCircleFill:Ym,IconCheckCircleFill:bd,IconExclamationCircleFill:hu,IconCloseCircleFill:up},props:{content:String,position:{type:String,default:"top"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},type:{type:String,default:"info"},okText:String,cancelText:String,okLoading:{type:Boolean,default:!1},okButtonProps:{type:Object},cancelButtonProps:{type:Object},contentClass:{type:[String,Array,Object]},contentStyle:{type:Object},arrowClass:{type:[String,Array,Object]},arrowStyle:{type:Object},popupContainer:{type:[String,Object]},onBeforeOk:{type:Function},onBeforeCancel:{type:Function}},emits:{"update:popupVisible":e=>!0,popupVisibleChange:e=>!0,ok:()=>!0,cancel:()=>!0},setup(e,{emit:t}){const i=Se("popconfirm"),{t:r}=Yr(),a=ie(e.defaultPopupVisible),n=T(()=>{var v;return(v=e.popupVisible)!=null?v:a.value}),s=ie(!1),o=T(()=>e.okLoading||s.value);let l=0;const u=()=>{l++,s.value&&(s.value=!1),a.value=!1,t("update:popupVisible",!1),t("popupVisibleChange",!1)},c=v=>{v?(a.value=v,t("update:popupVisible",v),t("popupVisibleChange",v)):u()},d=async()=>{const v=l,m=await new Promise(async g=>{var y;if(Zt(e.onBeforeOk)){let b=e.onBeforeOk((x=!0)=>g(x));if((ld(b)||!jn(b))&&(s.value=!0),ld(b))try{b=(y=await b)!=null?y:!0}catch{b=!1}jn(b)&&g(b)}else g(!0)});v===l&&(m?(t("ok"),u()):s.value&&(s.value=!1))},h=()=>{var v;let m=!0;Zt(e.onBeforeCancel)&&(m=(v=e.onBeforeCancel())!=null?v:!1),m&&(t("cancel"),u())},p=T(()=>[`${i}-popup-content`,e.contentClass]),f=T(()=>[`${i}-popup-arrow`,e.arrowClass]);return{prefixCls:i,contentCls:p,arrowCls:f,computedPopupVisible:n,mergedOkLoading:o,handlePopupVisibleChange:c,handleOk:d,handleCancel:h,t:r}}});function DDe(e,t,i,r,a,n){const s=be("icon-info-circle-fill"),o=be("icon-check-circle-fill"),l=be("icon-exclamation-circle-fill"),u=be("icon-close-circle-fill"),c=be("arco-button"),d=be("trigger");return N(),De(d,{class:Y(e.prefixCls),trigger:"click",position:e.position,"show-arrow":"","popup-visible":e.computedPopupVisible,"popup-offset":10,"popup-container":e.popupContainer,"content-class":e.contentCls,"content-style":e.contentStyle,"arrow-class":e.arrowCls,"arrow-style":e.arrowStyle,"animation-name":"zoom-in-fade-out","auto-fit-transform-origin":"",onPopupVisibleChange:e.handlePopupVisibleChange},{content:He(()=>[ve("div",{class:Y(`${e.prefixCls}-body`)},[ve("span",{class:Y(`${e.prefixCls}-icon`)},[ye(e.$slots,"icon",{},()=>[e.type==="info"?(N(),De(s,{key:0})):e.type==="success"?(N(),De(o,{key:1})):e.type==="warning"?(N(),De(l,{key:2})):e.type==="error"?(N(),De(u,{key:3})):Me("v-if",!0)])],2),ve("span",{class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"content",{},()=>[ti(Bt(e.content),1)])],2)],2),ve("div",{class:Y(`${e.prefixCls}-footer`)},[_(c,it({size:"mini"},e.cancelButtonProps,{onClick:e.handleCancel}),{default:He(()=>[ti(Bt(e.cancelText||e.t("popconfirm.cancelText")),1)]),_:1},16,["onClick"]),_(c,it({type:"primary",size:"mini"},e.okButtonProps,{loading:e.mergedOkLoading,onClick:e.handleOk}),{default:He(()=>[ti(Bt(e.okText||e.t("popconfirm.okText")),1)]),_:1},16,["loading","onClick"])],2)]),default:He(()=>[ye(e.$slots,"default")]),_:3},8,["class","position","popup-visible","popup-container","content-class","content-style","arrow-class","arrow-style","onPopupVisibleChange"])}var PC=We(ODe,[["render",DDe]]);const IDe=Object.assign(PC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+PC.name,PC)}});var LDe=Object.defineProperty,rB=Object.getOwnPropertySymbols,BDe=Object.prototype.hasOwnProperty,zDe=Object.prototype.propertyIsEnumerable,aB=(e,t,i)=>t in e?LDe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,RDe=(e,t)=>{for(var i in t||(t={}))BDe.call(t,i)&&aB(e,i,t[i]);if(rB)for(var i of rB(t))zDe.call(t,i)&&aB(e,i,t[i]);return e};const NDe={small:3,medium:4,large:8},VDe=e=>{if(e)return ki(e)?{backgroundImage:`linear-gradient(to right, ${Object.keys(e).map(i=>`${e[i]} ${i}`).join(",")})`}:{backgroundColor:e}},FDe=se({name:"ProgressLine",components:{IconExclamationCircleFill:hu},props:{percent:{type:Number,default:0},animation:{type:Boolean,default:!1},size:{type:String,default:"medium"},strokeWidth:{type:Number,default:4},width:{type:[Number,String],default:"100%"},color:{type:[String,Object],default:void 0},trackColor:String,formatText:{type:Function,default:void 0},status:{type:String},showText:Boolean},setup(e){const t=Se("progress-line"),i=T(()=>e.strokeWidth!==4?e.strokeWidth:NDe[e.size]),r=T(()=>`${is.times(e.percent,100)}%`),a=T(()=>({width:e.width,height:`${i.value}px`,backgroundColor:e.trackColor})),n=T(()=>RDe({width:`${e.percent*100}%`},VDe(e.color)));return{prefixCls:t,style:a,barStyle:n,text:r}}}),jDe=["aria-valuenow"];function $De(e,t,i,r,a,n){const s=be("icon-exclamation-circle-fill");return N(),ee("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:Y(`${e.prefixCls}-wrapper`)},[ve("div",{class:Y(e.prefixCls),style:It(e.style)},[ve("div",{class:Y(`${e.prefixCls}-bar-buffer`)},null,2),ve("div",{class:Y([`${e.prefixCls}-bar`]),style:It(e.barStyle)},null,6)],6),e.showText?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-text`)},[ye(e.$slots,"text",{percent:e.percent},()=>[ti(Bt(e.text)+" ",1),e.status==="danger"?(N(),De(s,{key:0})):Me("v-if",!0)])],2)):Me("v-if",!0)],10,jDe)}var UDe=We(FDe,[["render",$De]]);const WDe=se({name:"IconExclamation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-exclamation`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),HDe=["stroke-width","stroke-linecap","stroke-linejoin"],GDe=ve("path",{d:"M23 9h2v21h-2z"},null,-1),qDe=ve("path",{fill:"currentColor",stroke:"none",d:"M23 9h2v21h-2z"},null,-1),YDe=ve("path",{d:"M23 37h2v2h-2z"},null,-1),XDe=ve("path",{fill:"currentColor",stroke:"none",d:"M23 37h2v2h-2z"},null,-1),KDe=[GDe,qDe,YDe,XDe];function ZDe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},KDe,14,HDe)}var TC=We(WDe,[["render",ZDe]]);const Vj=Object.assign(TC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+TC.name,TC)}}),QDe=se({name:"IconCheck",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-check`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),JDe=["stroke-width","stroke-linecap","stroke-linejoin"],eIe=ve("path",{d:"M41.678 11.05 19.05 33.678 6.322 20.95"},null,-1),tIe=[eIe];function iIe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},tIe,14,JDe)}var kC=We(QDe,[["render",iIe]]);const x1=Object.assign(kC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+kC.name,kC)}});let nB=0;const rIe={mini:16,small:48,medium:64,large:80},aIe={mini:4,small:3,medium:4,large:4},nIe=se({name:"ProgressCircle",components:{IconExclamation:Vj,IconCheck:x1},props:{percent:{type:Number,default:0},type:{type:String},size:{type:String,default:"medium"},strokeWidth:{type:Number},width:{type:Number,default:void 0},color:{type:[String,Object],default:void 0},trackColor:String,status:{type:String,default:void 0},showText:{type:Boolean,default:!0},pathStrokeWidth:{type:Number}},setup(e){const t=Se("progress-circle"),i=ki(e.color),r=T(()=>{var d;return(d=e.width)!=null?d:rIe[e.size]}),a=T(()=>{var d;return(d=e.strokeWidth)!=null?d:e.size==="mini"?r.value/2:aIe[e.size]}),n=T(()=>{var d;return(d=e.pathStrokeWidth)!=null?d:e.size==="mini"?a.value:Math.max(2,a.value-2)}),s=T(()=>(r.value-a.value)/2),o=T(()=>Math.PI*2*s.value),l=T(()=>r.value/2),u=T(()=>(nB+=1,`${t}-linear-gradient-${nB}`)),c=T(()=>`${is.times(e.percent,100)}%`);return{prefixCls:t,isLinearGradient:i,radius:s,text:c,perimeter:o,center:l,mergedWidth:r,mergedStrokeWidth:a,mergedPathStrokeWidth:n,linearGradientId:u}}}),sIe=["aria-valuenow"],oIe=["viewBox"],lIe={key:0},uIe=["id"],cIe=["offset","stop-color"],dIe=["cx","cy","r","stroke-width"],hIe=["cx","cy","r","stroke-width"];function pIe(e,t,i,r,a,n){const s=be("icon-check"),o=be("icon-exclamation");return N(),ee("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:Y(`${e.prefixCls}-wrapper`),style:It({width:`${e.mergedWidth}px`,height:`${e.mergedWidth}px`})},[e.type==="circle"&&e.size==="mini"&&e.status==="success"?(N(),De(s,{key:0,style:It({fontSize:e.mergedWidth-2,color:e.color})},null,8,["style"])):(N(),ee("svg",{key:1,viewBox:`0 0 ${e.mergedWidth} ${e.mergedWidth}`,class:Y(`${e.prefixCls}-svg`)},[e.isLinearGradient?(N(),ee("defs",lIe,[ve("linearGradient",{id:e.linearGradientId,x1:"0",y1:"1",x2:"0",y2:"0"},[(N(!0),ee(Xt,null,Br(Object.keys(e.color),l=>(N(),ee("stop",{key:l,offset:l,"stop-color":e.color[l]},null,8,cIe))),128))],8,uIe)])):Me("v-if",!0),ve("circle",{class:Y(`${e.prefixCls}-bg`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedPathStrokeWidth,style:It({stroke:e.trackColor})},null,14,dIe),ve("circle",{class:Y(`${e.prefixCls}-bar`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedStrokeWidth,style:It({stroke:e.isLinearGradient?`url(#${e.linearGradientId})`:e.color,strokeDasharray:e.perimeter,strokeDashoffset:(e.percent>=1?0:1-e.percent)*e.perimeter})},null,14,hIe)],10,oIe)),e.showText&&e.size!=="mini"?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-text`)},[ye(e.$slots,"text",{percent:e.percent},()=>[e.status==="danger"?(N(),De(o,{key:0})):e.status==="success"?(N(),De(s,{key:1})):(N(),ee(Xt,{key:2},[ti(Bt(e.text),1)],2112))])],2)):Me("v-if",!0)],14,sIe)}var fIe=We(nIe,[["render",pIe]]);const mIe=se({name:"ProgressSteps",components:{IconExclamationCircleFill:hu},props:{steps:{type:Number,default:0},percent:{type:Number,default:0},size:{type:String},color:{type:[String,Object],default:void 0},trackColor:String,strokeWidth:{type:Number},status:{type:String,default:void 0},showText:{type:Boolean,default:!0}},setup(e){const t=Se("progress-steps"),i=T(()=>{var n;return((n=e.strokeWidth)!=null?n:e.size==="small")?8:4}),r=T(()=>[...Array(e.steps)].map((n,s)=>e.percent>0&&e.percent>1/e.steps*s)),a=T(()=>`${is.times(e.percent,100)}%`);return{prefixCls:t,stepList:r,mergedStrokeWidth:i,text:a}}}),vIe=["aria-valuenow"];function gIe(e,t,i,r,a,n){const s=be("icon-exclamation-circle-fill");return N(),ee("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:Y(`${e.prefixCls}-wrapper`)},[ve("div",{class:Y(e.prefixCls),style:It({height:`${e.mergedStrokeWidth}px`})},[(N(!0),ee(Xt,null,Br(e.stepList,(o,l)=>(N(),ee("div",{key:l,class:Y([`${e.prefixCls}-item`,{[`${e.prefixCls}-item-active`]:o}]),style:It({backgroundColor:o?e.color:e.trackColor})},null,6))),128))],6),e.showText?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-text`)},[ye(e.$slots,"text",{percent:e.percent},()=>[ti(Bt(e.text)+" ",1),e.status==="danger"?(N(),De(s,{key:0})):Me("v-if",!0)])],2)):Me("v-if",!0)],10,vIe)}var yIe=We(mIe,[["render",gIe]]);const bIe=se({name:"Progress",components:{ProgressLine:UDe,ProgressCircle:fIe,ProgressSteps:yIe},props:{type:{type:String,default:"line"},size:{type:String},percent:{type:Number,default:0},steps:{type:Number,default:0},animation:{type:Boolean,default:!1},strokeWidth:{type:Number},width:{type:[Number,String]},color:{type:[String,Object]},trackColor:String,bufferColor:{type:[String,Object]},showText:{type:Boolean,default:!0},status:{type:String}},setup(e){const t=Se("progress"),{size:i}=yt(e),r=T(()=>e.steps>0?"steps":e.type),a=T(()=>e.status||(e.percent>=1?"success":"normal")),{mergedSize:n}=hn(i);return{cls:T(()=>[t,`${t}-type-${r.value}`,`${t}-size-${n.value}`,`${t}-status-${a.value}`]),computedStatus:a,mergedSize:n}}});function wIe(e,t,i,r,a,n){const s=be("progress-steps"),o=be("progress-line"),l=be("progress-circle");return N(),ee("div",{class:Y(e.cls)},[e.steps>0?(N(),De(s,{key:0,"stroke-width":e.strokeWidth,percent:e.percent,color:e.color,"track-color":e.trackColor,width:e.width,steps:e.steps,size:e.mergedSize,"show-text":e.showText},$r({_:2},[e.$slots.text?{name:"text",fn:He(u=>[ye(e.$slots,"text",br(Ea(u)))])}:void 0]),1032,["stroke-width","percent","color","track-color","width","steps","size","show-text"])):e.type==="line"&&e.mergedSize!=="mini"?(N(),De(o,{key:1,"stroke-width":e.strokeWidth,animation:e.animation,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"buffer-color":e.bufferColor,width:e.width,"show-text":e.showText,status:e.computedStatus},$r({_:2},[e.$slots.text?{name:"text",fn:He(u=>[ye(e.$slots,"text",br(Ea(u)))])}:void 0]),1032,["stroke-width","animation","percent","color","track-color","size","buffer-color","width","show-text","status"])):(N(),De(l,{key:2,type:e.type,"stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,"path-stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,width:e.width,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"show-text":e.showText,status:e.computedStatus},$r({_:2},[e.$slots.text?{name:"text",fn:He(u=>[ye(e.$slots,"text",br(Ea(u)))])}:void 0]),1032,["type","stroke-width","path-stroke-width","width","percent","color","track-color","size","show-text","status"]))],2)}var OC=We(bIe,[["render",wIe]]);const Fj=Object.assign(OC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+OC.name,OC)}}),xIe=se({name:"IconStarFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-star-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),SIe=["stroke-width","stroke-linecap","stroke-linejoin"],CIe=ve("path",{d:"M22.683 5.415c.568-1.043 2.065-1.043 2.634 0l5.507 10.098a1.5 1.5 0 0 0 1.04.756l11.306 2.117c1.168.219 1.63 1.642.814 2.505l-7.902 8.359a1.5 1.5 0 0 0-.397 1.223l1.48 11.407c.153 1.177-1.058 2.057-2.131 1.548l-10.391-4.933a1.5 1.5 0 0 0-1.287 0l-10.39 4.933c-1.073.51-2.284-.37-2.131-1.548l1.48-11.407a1.5 1.5 0 0 0-.398-1.223L4.015 20.89c-.816-.863-.353-2.286.814-2.505l11.306-2.117a1.5 1.5 0 0 0 1.04-.756l5.508-10.098Z",fill:"currentColor",stroke:"none"},null,-1),_Ie=[CIe];function MIe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},_Ie,14,SIe)}var DC=We(xIe,[["render",MIe]]);const EIe=Object.assign(DC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+DC.name,DC)}}),AIe=se({name:"IconFaceMehFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-face-meh-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),PIe=["stroke-width","stroke-linecap","stroke-linejoin"],TIe=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.321-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25ZM15.999 30a2 2 0 0 1 2-2h12a2 2 0 1 1 0 4H18a2 2 0 0 1-2-2Z",fill:"currentColor",stroke:"none"},null,-1),kIe=[TIe];function OIe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},kIe,14,PIe)}var IC=We(AIe,[["render",OIe]]);const sB=Object.assign(IC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+IC.name,IC)}}),DIe=se({name:"IconFaceSmileFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-face-smile-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),IIe=["stroke-width","stroke-linecap","stroke-linejoin"],LIe=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.321-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-.355 9.953a1.91 1.91 0 0 1 2.694.177 6.66 6.66 0 0 0 5.026 2.279c1.918 0 3.7-.81 4.961-2.206a1.91 1.91 0 0 1 2.834 2.558 10.476 10.476 0 0 1-7.795 3.466 10.477 10.477 0 0 1-7.897-3.58 1.91 1.91 0 0 1 .177-2.694Z",fill:"currentColor",stroke:"none"},null,-1),BIe=[LIe];function zIe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},BIe,14,IIe)}var LC=We(DIe,[["render",zIe]]);const RIe=Object.assign(LC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+LC.name,LC)}}),NIe=se({name:"IconFaceFrownFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-face-frown-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),VIe=["stroke-width","stroke-linecap","stroke-linejoin"],FIe=ve("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20Zm7.322-26.873a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25Zm-14.646 0a2.625 2.625 0 1 1 0 5.25 2.625 2.625 0 0 1 0-5.25ZM31.68 32.88a1.91 1.91 0 0 1-2.694-.176 6.66 6.66 0 0 0-5.026-2.28c-1.918 0-3.701.81-4.962 2.207a1.91 1.91 0 0 1-2.834-2.559 10.476 10.476 0 0 1 7.796-3.465c3.063 0 5.916 1.321 7.896 3.58a1.909 1.909 0 0 1-.176 2.693Z",fill:"currentColor",stroke:"none"},null,-1),jIe=[FIe];function $Ie(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},jIe,14,VIe)}var BC=We(NIe,[["render",$Ie]]);const UIe=Object.assign(BC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+BC.name,BC)}});var zC=se({name:"Rate",props:{count:{type:Number,default:5},modelValue:{type:Number,default:void 0},defaultValue:{type:Number,default:0},allowHalf:{type:Boolean,default:!1},allowClear:{type:Boolean,default:!1},grading:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:[String,Object]}},emits:{"update:modelValue":e=>!0,change:e=>!0,hoverChange:e=>!0},setup(e,{emit:t,slots:i}){const{modelValue:r}=yt(e),a=Se("rate"),{mergedDisabled:n,eventHandlers:s}=Wr({disabled:Os(e,"disabled")}),o=ie(e.defaultValue),l=ie(!1);Vt(r,M=>{(ei(M)||Wn(M))&&(o.value=0)});const u=ie(0),c=T(()=>{var M;return(M=e.modelValue)!=null?M:o.value}),d=T(()=>{const M=e.allowHalf?is.times(is.round(is.divide(c.value,.5),0),.5):Math.round(c.value);return u.value||M}),h=T(()=>n.value||e.readonly),p=T(()=>[...Array(e.grading?5:e.count)]),f=T(()=>{var M;if(na(e.color))return p.value.map(()=>e.color);if(ki(e.color)){const P=Object.keys(e.color).map(k=>Number(k)).sort((k,I)=>I-k);let A=(M=P.pop())!=null?M:p.value.length;return p.value.map((k,I)=>{var O;return I+1>A&&(A=(O=P.pop())!=null?O:A),e.color[String(A)]})}}),v=()=>{u.value&&(u.value=0,t("hoverChange",0))},m=(M,P)=>{const A=P&&e.allowHalf?M+.5:M+1;A!==u.value&&(u.value=A,t("hoverChange",A))},g=(M,P)=>{var A,k,I,O;const D=P&&e.allowHalf?M+.5:M+1;l.value=!0,D!==c.value?(o.value=D,t("update:modelValue",D),t("change",D),(k=(A=s.value)==null?void 0:A.onChange)==null||k.call(A)):e.allowClear&&(o.value=0,t("update:modelValue",0),t("change",0),(O=(I=s.value)==null?void 0:I.onChange)==null||O.call(I))},y=M=>{l.value&&M+1>=c.value-1&&(l.value=!1)},b=(M,P)=>M>P?_(sB,null,null):P<=2?_(UIe,null,null):P<=3?_(sB,null,null):_(RIe,null,null),x=(M,P=!1)=>({role:"radio","aria-checked":M+(P?.5:1)<=c.value,"aria-setsize":p.value.length,"aria-posinset":M+(P?.5:1)}),S=M=>e.grading?b(M,d.value):i.character?i.character({index:M}):_(EIe,null,null),w=M=>{const P=h.value?{}:{onMouseenter:()=>m(M,!0),onClick:()=>g(M,!0)},A=h.value?{}:{onMouseenter:()=>m(M,!1),onClick:()=>g(M,!1)},k=l.value?{animationDelay:`${50*M}ms`}:void 0,I=Math.ceil(d.value)-1,O=f.value&&e.allowHalf&&M+.5===d.value?{color:f.value[I]}:void 0,D=f.value&&M+1<=d.value?{color:f.value[I]}:void 0,F=[`${a}-character`,{[`${a}-character-half`]:e.allowHalf&&M+.5===d.value,[`${a}-character-full`]:M+1<=d.value,[`${a}-character-scale`]:l.value&&M+1<c.value}];return _("div",it({class:F,style:k},e.allowHalf?void 0:x(M),{onAnimationend:()=>y(M)}),[_("div",it({class:`${a}-character-left`,style:O},P,e.allowHalf?x(M,!0):void 0),[S(M)]),_("div",it({class:`${a}-character-right`,style:D},A,e.allowHalf?x(M):void 0),[S(M)])])},E=T(()=>[a,{[`${a}-readonly`]:e.readonly,[`${a}-disabled`]:n.value}]);return()=>_("div",{class:E.value,onMouseleave:v},[p.value.map((M,P)=>w(P))])}});const WIe=Object.assign(zC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+zC.name,zC)}}),HIe=se({name:"IconInfo",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-info`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),GIe=["stroke-width","stroke-linecap","stroke-linejoin"],qIe=ve("path",{d:"M25 39h-2V18h2z"},null,-1),YIe=ve("path",{fill:"currentColor",stroke:"none",d:"M25 39h-2V18h2z"},null,-1),XIe=ve("path",{d:"M25 11h-2V9h2z"},null,-1),KIe=ve("path",{fill:"currentColor",stroke:"none",d:"M25 11h-2V9h2z"},null,-1),ZIe=[qIe,YIe,XIe,KIe];function QIe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},ZIe,14,GIe)}var RC=We(HIe,[["render",QIe]]);const JIe=Object.assign(RC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+RC.name,RC)}});var e4e=se({name:"ResultForbidden",render(){return _("svg",{viewBox:"0 0 213 213",height:"100%",width:"100%",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2}},[_("g",{transform:"matrix(1,0,0,1,-871.485,-445.62)"},[_("g",null,[_("g",{transform:"matrix(1,0,0,1,-75.2684,-87.3801)"},[_("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:{fill:"rgb(235, 238, 246)"}},null)]),_("g",{transform:"matrix(1,0,0,1,246.523,295.575)"},[_("g",{transform:"matrix(0.316667,0,0,0.316667,277.545,71.0298)"},[_("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),_("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),_("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[_("g",{transform:"matrix(1,0,0,1,-6,-6)"},[_("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),_("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[_("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])]),_("g",{transform:"matrix(0.182997,0.105653,-0.494902,0.285732,814.161,66.3087)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),_("g",{transform:"matrix(0.316667,0,0,0.316667,237.301,94.2647)"},[_("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),_("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),_("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[_("g",{transform:"matrix(1,0,0,1,-6,-6)"},[_("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),_("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[_("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])]),_("g",{transform:"matrix(0.474953,0,0,0.474953,538.938,8.95289)"},[_("g",{transform:"matrix(0.180615,0.104278,-0.973879,0.562269,790.347,286.159)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),_("g",{transform:"matrix(0.473356,0,0,0.473356,294.481,129.741)"},[_("g",null,[_("g",{transform:"matrix(0.1761,-0.101671,1.73518e-16,1.22207,442.564,7.31508)"},[_("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(0.0922781,0.0532768,2.03964e-16,2.20569,405.236,-248.842)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),_("g",{transform:"matrix(0.147541,-0.0851831,1.52371e-16,1.23446,454.294,-3.8127)"},[_("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(51, 51, 51)"}},null)]),_("g",{transform:"matrix(0.0921286,0.0531905,-0.126106,0.0728076,474.688,603.724)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)])])]),_("g",{transform:"matrix(0.473356,0,0,0.473356,192.621,188.549)"},[_("g",null,[_("g",{transform:"matrix(0.1761,-0.101671,1.73518e-16,1.22207,442.564,7.31508)"},[_("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(0.0922781,0.0532768,2.03964e-16,2.20569,405.236,-248.842)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),_("g",{transform:"matrix(0.147541,-0.0851831,1.52371e-16,1.23446,454.294,-3.8127)"},[_("rect",{x:"202.62",y:"575.419",width:"124.002",height:"259.402",style:{fill:"rgb(51, 51, 51)"}},null)]),_("g",{transform:"matrix(0.0921286,0.0531905,-0.126106,0.0728076,474.688,603.724)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)])])]),_("g",{transform:"matrix(0.668111,0,0,0.668111,-123.979,-49.2109)"},[_("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,974.758,729.412)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,42.5091,1294.14)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(0.0349225,0.0201625,-1.52814,0.882275,1593.11,461.746)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)]),_("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,49.4442,1298.14)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(51, 51, 51)"}},null)]),_("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,753.056,857.412)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,898.874,529.479)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,930.12,511.44)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,961.365,493.4)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,992.61,475.361)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1023.86,457.321)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1056.25,438.617)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1085.74,421.589)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",{transform:"matrix(0.668111,0,0,0.668111,-123.979,-91.97)"},[_("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,974.758,729.412)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,42.5091,1294.14)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(235, 235, 235)"}},null)]),_("g",{transform:"matrix(0.0349225,0.0201625,-1.52814,0.882275,1593.11,461.746)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(102, 102, 102)"}},null)]),_("g",{transform:"matrix(1.1164,-0.644557,0,0.220789,49.4442,1298.14)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(51, 51, 51)"}},null)]),_("g",{transform:"matrix(0.0349225,0.0201625,1.81598e-17,0.220789,753.056,857.412)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fill:"rgb(34, 34, 34)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,898.874,529.479)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,930.12,511.44)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,961.365,493.4)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,992.61,475.361)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1023.86,457.321)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1056.25,438.617)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.142968,-0.0825428,-0.207261,0.478709,1085.74,421.589)"},[_("rect",{x:"831",y:"1023.79",width:"89.214",height:"89.214",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",{transform:"matrix(0.701585,5.16096e-35,-5.16096e-35,0.701585,-546.219,-21.3487)"},[_("g",{transform:"matrix(0.558202,-0.322278,0,0.882275,1033.27,615.815)"},[_("path",{d:"M855.598,410.446C855.598,407.244 852.515,404.643 848.718,404.643L663.891,404.643C660.094,404.643 657.012,407.244 657.012,410.446L657.012,543.92C657.012,547.123 660.094,549.723 663.891,549.723L848.718,549.723C852.515,549.723 855.598,547.123 855.598,543.92L855.598,410.446Z",style:{fill:"white"}},null)]),_("g",{transform:"matrix(0.558202,-0.322278,0,0.882275,1035.25,616.977)"},[_("path",{d:"M855.598,410.446C855.598,407.244 852.515,404.643 848.718,404.643L663.891,404.643C660.094,404.643 657.012,407.244 657.012,410.446L657.012,543.92C657.012,547.123 660.094,549.723 663.891,549.723L848.718,549.723C852.515,549.723 855.598,547.123 855.598,543.92L855.598,410.446Z",style:{fill:"white"}},null)]),_("g",{transform:"matrix(1,0,0,1,418.673,507.243)"},[_("path",{d:"M1088.34,192.063C1089.79,191.209 1090.78,191.821 1090.78,191.821L1092.71,192.944C1092.71,192.944 1092.29,192.721 1091.7,192.763C1090.99,192.813 1090.34,193.215 1090.34,193.215C1090.34,193.215 1088.85,192.362 1088.34,192.063Z",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(1,0,0,1,235.984,-39.1315)"},[_("path",{d:"M1164.02,805.247C1164.05,802.517 1165.64,799.379 1167.67,798.118L1169.67,799.272C1167.58,800.648 1166.09,803.702 1166.02,806.402L1164.02,805.247Z",style:{fill:"url(#_Linear1)"}},null)]),_("g",{transform:"matrix(0.396683,0,0,0.396683,1000.22,516.921)"},[_("path",{d:"M1011.2,933.14C1009.31,932.075 1008.05,929.696 1007.83,926.324L1012.87,929.235C1012.87,929.235 1012.96,930.191 1013.04,930.698C1013.16,931.427 1013.42,932.344 1013.62,932.845C1013.79,933.255 1014.59,935.155 1016.22,936.046C1015.83,935.781 1011.19,933.139 1011.19,933.139L1011.2,933.14Z",style:{fill:"rgb(238, 238, 238)"}},null)]),_("g",{transform:"matrix(0.253614,-0.146424,4.87691e-17,0.338152,1209.98,830.02)"},[_("circle",{cx:"975.681",cy:"316.681",r:"113.681",style:{fill:"rgb(245, 63, 63)"}},null),_("g",{transform:"matrix(1.08844,0,0,0.61677,-99.9184,125.436)"},[_("path",{d:"M1062,297.556C1062,296.697 1061.61,296 1061.12,296L915.882,296C915.395,296 915,296.697 915,297.556L915,333.356C915,334.215 915.395,334.912 915.882,334.912L1061.12,334.912C1061.61,334.912 1062,334.215 1062,333.356L1062,297.556Z",style:{fill:"white"}},null)])]),_("g",{transform:"matrix(5.57947,-3.22131,0.306277,0.176829,-6260.71,4938.32)"},[_("rect",{x:"1335.54",y:"694.688",width:"18.525",height:"6.511",style:{fill:"rgb(248, 248, 248)"}},null)]),_("g",{transform:"matrix(0.10726,0.0619268,-1.83335e-14,18.1609,1256.76,-11932.8)"},[_("rect",{x:"1335.54",y:"694.688",width:"18.525",height:"6.511",style:{fill:"rgb(238, 238, 238)"}},null)])])]),_("g",{transform:"matrix(0.316667,0,0,0.316667,269.139,37.8829)"},[_("g",{transform:"matrix(0.989011,-0.571006,1.14201,0.659341,-335.171,81.4498)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(0.164835,-0.0951676,1.14201,0.659341,116.224,-179.163)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(202, 174, 136)"}},null)]),_("g",{transform:"matrix(0.978261,-0.564799,1.26804e-16,1.30435,-337.046,42.0327)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.267591,-0.154493,3.46856e-17,0.356787,992.686,475.823)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(102, 102, 102)"}},null)]),_("g",{transform:"matrix(1.28257,-0.740494,1.23317e-16,1.7101,1501.14,624.071)"},[_("g",{transform:"matrix(1,0,0,1,-6,-6)"},[_("path",{d:"M2.25,10.5C2.25,10.5 1.5,10.5 1.5,9.75C1.5,9 2.25,6.75 6,6.75C9.75,6.75 10.5,9 10.5,9.75C10.5,10.5 9.75,10.5 9.75,10.5L2.25,10.5ZM6,6C7.234,6 8.25,4.984 8.25,3.75C8.25,2.516 7.234,1.5 6,1.5C4.766,1.5 3.75,2.516 3.75,3.75C3.75,4.984 4.766,6 6,6Z",style:{fill:"white"}},null)])]),_("g",{transform:"matrix(0.725806,0.419045,1.75755e-17,1.01444,155.314,212.138)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.58977,-0.917857,1.15976e-16,2.2425,-1270.46,-614.379)"},[_("rect",{x:"1748.87",y:"1226.67",width:"10.895",height:"13.378",style:{fill:"rgb(132, 97, 0)"}},null)])])])])]),_("defs",null,[_("linearGradient",{id:"_Linear1",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(-2.64571,4.04098,-4.04098,-2.64571,1167.67,799.269)"},[_("stop",{offset:"0",style:{stopColor:"rgb(248, 248, 248)",stopOpacity:1}},null),_("stop",{offset:"1",style:{stopColor:"rgb(248, 248, 248)",stopOpacity:1}},null)])])])}}),t4e=se({name:"ResultNotFound",render(){return _("svg",{width:"100%",height:"100%",viewBox:"0 0 213 213",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2}},[_("g",{transform:"matrix(1,0,0,1,-1241.95,-445.62)"},[_("g",null,[_("g",{transform:"matrix(1,0,0,1,295.2,-87.3801)"},[_("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:{fill:"rgb(235, 238, 246)"}},null)]),_("g",{transform:"matrix(0.38223,0,0,0.38223,1126.12,238.549)"},[_("g",{transform:"matrix(0.566536,0.327089,-1.28774,0.74348,763.4,317.171)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),_("g",{transform:"matrix(0.29595,0.170867,-0.91077,0.525833,873.797,588.624)"},[_("rect",{x:"657.012",y:"404.643",width:"198.586",height:"145.08",style:{fillOpacity:.1}},null)]),_("g",{transform:"matrix(1,0,0,1,275,-15)"},[_("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),_("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[_("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",{transform:"matrix(1,0,0,1,183.952,-67.5665)"},[_("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),_("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[_("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",{transform:"matrix(1,0,0,1,414,-95.2517)"},[_("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),_("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[_("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",{transform:"matrix(1,0,0,1,322.952,-147.818)"},[_("path",{d:"M262.077,959.012L276.923,959.012L273.388,1004.01C273.388,1004.59 273.009,1005.16 272.25,1005.6C270.732,1006.48 268.268,1006.48 266.75,1005.6C265.991,1005.16 265.612,1004.59 265.612,1004.01L262.077,959.012Z",style:{fill:"rgb(196, 173, 142)"}},null),_("g",{transform:"matrix(0.866025,-0.5,1,0.57735,0,-45)"},[_("ellipse",{cx:"-848.416",cy:"1004.25",rx:"6.062",ry:"5.25",style:{fill:"rgb(255, 125, 0)"}},null)])]),_("g",null,[_("g",{transform:"matrix(1.42334,-0.821763,1.11271,0.642426,-1439.64,459.621)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(1.40786,-0.812831,6.60237e-16,1.99081,-2052.17,-84.7286)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(1.26159,-0.728382,5.91642e-16,1.78397,-1774.67,11.2303)"},[_("path",{d:"M1950.29,1194.38C1950.29,1193.37 1949.41,1192.54 1948.34,1192.54L1846.01,1192.54C1844.93,1192.54 1844.06,1193.37 1844.06,1194.38L1844.06,1282.7C1844.06,1283.72 1844.93,1284.54 1846.01,1284.54L1948.34,1284.54C1949.41,1284.54 1950.29,1283.72 1950.29,1282.7L1950.29,1194.38Z",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(1.2198,-0.704254,5.72043e-16,1.72488,-1697.6,37.2103)"},[_("path",{d:"M1950.29,1194.38C1950.29,1193.37 1949.41,1192.54 1948.34,1192.54L1846.01,1192.54C1844.93,1192.54 1844.06,1193.37 1844.06,1194.38L1844.06,1282.7C1844.06,1283.72 1844.93,1284.54 1846.01,1284.54L1948.34,1284.54C1949.41,1284.54 1950.29,1283.72 1950.29,1282.7L1950.29,1194.38Z",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.707187,0.408295,9.06119e-17,1.54833,-733.949,683.612)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.64553,-0.950049,1.17482,0.678285,-1632.45,473.879)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(0.74666,0.431085,2.3583e-17,0.135259,-816.63,57.1397)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.64553,-0.950049,1.17482,0.678285,-1632.45,473.879)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,354.191)"},[_("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),_("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),_("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,309.191)"},[_("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),_("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),_("g",{transform:"matrix(0.750082,0,0,0.750082,163.491,263.931)"},[_("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),_("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])]),_("path",{d:"M555.753,832.474L555.753,921.408L630.693,878.141L630.693,789.207L555.753,832.474Z",style:{fillOpacity:.1}},null),_("g",{transform:"matrix(0.750082,0,0,0.750082,236.431,272.852)"},[_("g",{transform:"matrix(1.64553,-0.950049,1.14552,0.661368,-1606.78,467.933)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(253, 243, 228)"}},null)]),_("g",{transform:"matrix(1.54477,-0.891873,1.05847,0.611108,-1456.84,490.734)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(1.27607,-0.736739,0.751435,0.433841,-970.952,617.519)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.62765,-0.939723,1.42156e-16,0.5,-2476.81,1893.62)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(1.62765,-0.939723,1.42156e-16,0.5,-2476.81,1893.62)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.728038,0.420333,3.52595e-17,0.377589,-790.978,151.274)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2726.83,1873.38)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",null,[_("g",{transform:"matrix(1.75943,-1.01581,1.75879e-16,0.632893,-2721.54,1876.43)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)]),_("g",{transform:"matrix(0.290956,-0.167984,2.90849e-17,0.104661,69.4195,919.311)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1944.73,1192.54 1937.88,1192.54L1856.47,1192.54C1849.62,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1849.62,1284.54 1856.47,1284.54L1937.88,1284.54C1944.73,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(132, 97, 51)"}},null)]),_("g",{transform:"matrix(0.262716,-0.151679,8.27418e-18,0.0364999,121.496,970.53)"},[_("path",{d:"M1950.29,1238.54C1950.29,1213.15 1948.14,1192.54 1945.5,1192.54L1848.85,1192.54C1846.2,1192.54 1844.06,1213.15 1844.06,1238.54C1844.06,1263.93 1846.2,1284.54 1848.85,1284.54L1945.5,1284.54C1948.14,1284.54 1950.29,1263.93 1950.29,1238.54Z",style:{fill:"rgb(246, 220, 185)"}},null)]),_("g",{transform:"matrix(1.77877,-1.02697,0.0581765,0.0335882,-425.293,1228.27)"},[_("rect",{x:"495.52",y:"1057.87",width:"105.078",height:"91",style:{fill:"rgb(240, 218, 183)"}},null)]),_("g",{transform:"matrix(0.0369741,0.021347,4.72735e-17,0.492225,456.143,919.985)"},[_("rect",{x:"1663.92",y:"-407.511",width:"143.183",height:"118.292",style:{fill:"rgb(240, 218, 183)"}},null)])])]),_("g",{transform:"matrix(1.62765,-0.939723,4.80984e-17,0.173913,-2468.81,2307.87)"},[_("rect",{x:"1844.06",y:"1192.54",width:"106.232",height:"92",style:{fill:"rgb(196, 173, 142)"}},null)])]),_("g",null,[_("g",{transform:"matrix(0.479077,0.276595,-0.564376,0.325843,598.357,-129.986)"},[_("path",{d:"M1776.14,1326C1776.14,1321.19 1772.15,1317.28 1767.24,1317.28L1684.37,1317.28C1679.46,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.46,1404.46 1684.37,1404.46L1767.24,1404.46C1772.15,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z",style:{fill:"white"}},null)]),_("g",{transform:"matrix(2.61622,0,0,2.61622,-2305.73,162.161)"},[_("g",{transform:"matrix(1.09915,-0.634597,1.26919,0.73277,-299.167,-62.4615)"},[_("ellipse",{cx:"412.719",cy:"770.575",rx:"6.303",ry:"5.459",style:{fill:"rgb(255, 125, 0)"}},null)]),_("g",{transform:"matrix(0.238212,-0.137532,0.178659,0.103149,875.064,207.93)"},[_("text",{x:"413.474px",y:"892.067px",style:{fontFamily:"NunitoSans-Bold, Nunito Sans",fontWeight:700,fontSize:41.569,fill:"white"}},[ti("?")])])])])])])])])}}),i4e=se({name:"ResultServerError",render(){return _("svg",{width:"100%",height:"100%",viewBox:"0 0 213 213",style:"fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2;"},[_("g",{transform:"matrix(1,0,0,1,-483.054,-445.448)"},[_("g",null,[_("g",{transform:"matrix(1,0,0,1,-463.699,-87.5516)"},[_("circle",{cx:"1053.23",cy:"639.477",r:"106.477",style:"fill: rgb(235, 238, 246);"},null)]),_("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,260.021)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill-opacity: 0.1;"},null)]),_("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,218.845)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,238.807)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),_("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,257.804)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),_("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,329.956)"},[_("clipPath",{id:"_clip1"},[_("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),_("g",{"clip-path":"url(#_clip1)"},[_("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,269.266)"},[_("use",{href:"#_Image2",x:"50.54",y:"112.301",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,265.448)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,268.45)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,271.452)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,124.262)"},[_("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,420.796)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,419.062)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,417.329)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,415.595)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,413.862)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,196.542)"},[_("clipPath",{id:"_clip3"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),_("g",{"clip-path":"url(#_clip3)"},[_("g",{transform:"matrix(1.30028,1.12608,-2.25216,1.95042,68.2716,1030.07)"},[_("use",{href:"#_Image4",x:"50.54",y:"56.312",width:"112.406px",height:"64.897px",transform:"matrix(0.99474,0,0,0.998422,0,0)"},null)])])]),_("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,216.764)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),_("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,235.762)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),_("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,307.652)"},[_("clipPath",{id:"_clip5"},[_("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),_("g",{"clip-path":"url(#_clip5)"},[_("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,321.266)"},[_("use",{href:"#_Image2",x:"50.54",y:"89.692",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,243.144)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,246.146)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,249.149)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,101.958)"},[_("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,398.492)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,396.759)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,395.025)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,393.292)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,391.558)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.384532,-0.222009,0.444019,0.256354,-0.569781,171.832)"},[_("clipPath",{id:"_clip6"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),_("g",{"clip-path":"url(#_clip6)"},[_("g",{transform:"matrix(1.30028,1.12608,-2.25216,1.95042,12.6215,1078.27)"},[_("use",{href:"#_Image7",x:"50.54",y:"31.563",width:"112.406px",height:"64.897px",transform:"matrix(0.99474,0,0,0.998422,0,0)"},null)])])]),_("g",{transform:"matrix(0.361496,-0.20871,0.41742,0.240997,34.7805,192.055)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(0, 85, 255);"},null)]),_("g",{transform:"matrix(0.341853,-0.197369,0.394738,0.227902,64.9247,211.052)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:"fill: rgb(29, 105, 255);"},null)]),_("g",{transform:"matrix(0.428916,0,0,0.428916,19.0588,282.943)"},[_("clipPath",{id:"_clip8"},[_("path",{d:"M1461.07,528.445C1461.07,530.876 1459.6,533.196 1456.6,534.928L1342.04,601.072C1335.41,604.896 1323.83,604.415 1316.18,600L1205.33,536C1201.14,533.585 1199,530.489 1199,527.555L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,528.445Z"},null)]),_("g",{"clip-path":"url(#_clip8)"},[_("g",{transform:"matrix(2.33146,-0,-0,2.33146,1081.79,378.876)"},[_("use",{href:"#_Image2",x:"50.54",y:"64.644",width:"112.406px",height:"46.365px",transform:"matrix(0.99474,0,0,0.98649,0,0)"},null)])])]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,218.434)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,221.437)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.347769,0.200785,3.44852e-18,0.545466,52.0929,224.439)"},[_("path",{d:"M1480.33,34.813C1480.33,34.162 1479.7,33.634 1478.94,33.634L1396.27,33.634C1395.5,33.634 1394.88,34.162 1394.88,34.813C1394.88,35.464 1395.5,35.993 1396.27,35.993L1478.94,35.993C1479.7,35.993 1480.33,35.464 1480.33,34.813Z",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.360289,-0.208013,-4.39887e-18,0.576941,37.5847,77.2484)"},[_("rect",{x:"1621.2",y:"1370.57",width:"57.735",height:"5.947",style:"fill: rgb(106, 161, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,307.505,373.782)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: white;"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,310.507,372.049)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,313.509,370.316)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,316.512,368.582)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.185726,-0.107229,-1.84168e-18,0.247635,319.514,366.849)"},[_("ellipse",{cx:"1566.31",cy:"1372.3",rx:"4",ry:"3.464",style:"fill: rgb(64, 128, 255);"},null)]),_("g",{transform:"matrix(0.365442,-0.210988,0.421976,0.243628,28.7259,185.45)"},[_("clipPath",{id:"_clip9"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z"},null)]),_("g",{"clip-path":"url(#_clip9)"},[_("g",{transform:"matrix(1.36821,1.1849,-2.36981,2.05231,5.46929,1071.93)"},[_("use",{href:"#_Image10",x:"53.151",y:"30.14",width:"106.825px",height:"61.676px",transform:"matrix(0.998367,0,0,0.994768,0,0)"},null)])])]),_("g",{transform:"matrix(0.365442,-0.210988,0.421976,0.243628,28.7259,183.729)"},[_("path",{d:"M84.299,1269.38C84.299,1261.99 78.301,1256 70.913,1256L-56.874,1256C-64.261,1256 -70.259,1261.99 -70.259,1269.38L-70.259,1376.46C-70.259,1383.85 -64.261,1389.85 -56.874,1389.85L70.913,1389.85C78.301,1389.85 84.299,1383.85 84.299,1376.46L84.299,1269.38Z",style:'fill: url("#_Linear11");'},null)]),_("g",{transform:"matrix(0.407622,0,0,0.407622,47.38,278)"},[_("clipPath",{id:"_clip12"},[_("path",{d:"M1461.07,554.317C1461.07,556.747 1459.6,559.067 1456.6,560.8L1342.04,626.943C1335.41,630.767 1323.83,630.287 1316.18,625.871L1205.33,561.871C1201.14,559.456 1199,556.361 1199,553.426L1199,559.555C1199,562.489 1201.14,565.585 1205.33,568L1316.18,632C1323.83,636.415 1335.41,636.896 1342.04,633.072L1456.6,566.928C1459.6,565.196 1461.07,562.876 1461.07,560.445L1461.07,554.317Z"},null)]),_("g",{"clip-path":"url(#_clip12)"},[_("g",{transform:"matrix(2.45325,-0,-0,2.45325,1068.82,410.793)"},[_("use",{href:"#_Image13",x:"53.151",y:"58.978",width:"106.825px",height:"33.517px",transform:"matrix(0.998367,0,0,0.985808,0,0)"},null)])])]),_("g",{transform:"matrix(0.371452,-0.214458,2.38096e-17,0.495269,-19.3677,248.256)"},[_("clipPath",{id:"_clip14"},[_("path",{d:"M1776.14,1326C1776.14,1321.19 1772.23,1317.28 1767.42,1317.28L1684.19,1317.28C1679.38,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.38,1404.46 1684.19,1404.46L1767.42,1404.46C1772.23,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z"},null)]),_("g",{"clip-path":"url(#_clip14)"},[_("g",{transform:"matrix(2.69214,1.16573,-1.29422e-16,2.0191,1352.59,983.841)"},[_("use",{href:"#_Image15",x:"121.882",y:"76.034",width:"37.393px",height:"61.803px",transform:"matrix(0.984021,0,0,0.996825,0,0)"},null)])])]),_("g",{transform:"matrix(0.371452,-0.214458,2.38096e-17,0.495269,-15.0786,249.972)"},[_("path",{d:"M1776.14,1326C1776.14,1321.19 1772.23,1317.28 1767.42,1317.28L1684.19,1317.28C1679.38,1317.28 1675.47,1321.19 1675.47,1326L1675.47,1395.75C1675.47,1400.56 1679.38,1404.46 1684.19,1404.46L1767.42,1404.46C1772.23,1404.46 1776.14,1400.56 1776.14,1395.75L1776.14,1326Z",style:"fill: white; stop-opacity: 0.9;"},null)]),_("g",{transform:"matrix(0.220199,-0.127132,1.41145e-17,0.293599,339.708,327.53)"},[_("path",{d:"M1306.5,1286.73C1307.09,1285.72 1308.6,1285.48 1310.36,1286.12C1312.13,1286.76 1313.84,1288.16 1314.73,1289.7C1326.44,1309.98 1355.4,1360.15 1363.73,1374.57C1364.33,1375.61 1364.49,1376.61 1364.18,1377.35C1363.87,1378.09 1363.11,1378.5 1362.07,1378.5C1346.41,1378.5 1288.17,1378.5 1264.07,1378.5C1262.42,1378.5 1260.37,1377.48 1258.9,1375.94C1257.44,1374.41 1256.88,1372.67 1257.5,1371.6C1268.1,1353.25 1296.8,1303.53 1306.5,1286.73Z"},null)]),_("g",{transform:"matrix(0.254264,-0.1468,1.22235e-17,0.254264,329.57,364.144)"},[_("text",{x:"1170.88px",y:"1451.42px",style:'font-family: NunitoSans-Bold, "Nunito Sans"; font-weight: 700; font-size: 41.569px; fill: white; fill-opacity: 0.9;'},[ti("!")])])])]),_("defs",null,[_("image",{id:"_Image2",width:"113px",height:"47px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAAAvCAYAAADU+iVXAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABVUlEQVR4nO2aQRKCMAxFxUN4O+9/DNw4CoiTliZN8vPfQlm00ykvP3aQ5fFc11sjy/L+/nx8r3ffm7Fn845jz+aJa23XOJvfs9Zh7NBawv3YrSGtdbj+x10egkFzpRrNt+SSxMgbqkiZJCJDiQDoSmSfdYFJ3JD18GMmcXhDTHUzNZIIXhA1JIJDib0MptqiKbhKzHqQiAaT6IlSFVIiAJQIACUGpLfLhpfIw49Ml8T2v4/JTPySyIJQI3w7JTIYEp2fong3FXWJ3huqCEYSNUlYhZRoyaSCoEQAKHESlqF0kZj9NBgNJhEASgSAEgNx9WfCTmLxpygzYRIBmCORsTIlXxJZED/kk0h+KC1x9E2FKG86qEkMsh8/HG9A6SSGYqAIKDEinUIpUSDDYXiqxAw3JCNMIgDXJTIWYdBJIvukK2ynARit4XASUZ6izCScRFWKCH0BfLM84oTw1Z8AAAAASUVORK5CYII="},null),_("image",{id:"_Image4",width:"113px",height:"65px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABBCAYAAADmBEt9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAASeElEQVR4nN2d6ZbcNpKFL5cs9UN1W5bntWxr6XmsWTzLQ7mSJDA/gh/iApWyLalUy+AcnypVJkEAsd24EaQn/T8Yb9+XKknrOuk4pOM4tCyLpkkqpWpZJu170TzPKqVoWWZJUq3Sbx+m6VkX/wjjVW/gH7/sdZ5nTacc5lkqJT6rtWqaJtVaVUrRNE26XGbd3+9alkW1Vi3LrFKq/uvj/KrP4dUu/t3HWkupmuepWVspIcjrddc8z1qWWcdRTusLwc3z3Cz1OA5dLouOo+o4Dv3vv15e5Xm8ukX//eetTtOkdV20bWFVkrQsk+ZZOo74Xq3SNMVPqXextYal1lq1rrNqlfb90LrGXP/5/nW52Fez2B8/1FpPiSxLLLsUaV2lfZdKiZiHkHCtuFWPj/73cvpfLDQseNJxvB43++IX+cOvR5WkZQkBbdsh4uCySNtWWkxEuLVKx1HOuLecFjdp3/NnWiYKUbSuAXiOIwR8HIf+55/riz+jF73Anz7VWkq4RSkEI+m0Fun+ftflsra/r+usfY/fATVY3DzP2ratCe3Nm7UhWawv3KzO69PtllJetDBf5MJ++hRHWWu4QCkOm1h4HH2agJuVpHme2ufHUXS5zLpeQ1B8Ns9zu2ZdU3gAJdwxFh3zxjUv0cW+qAX9+KFWhMV/Urg6kCUWcxzpRvlsmno3ehwBVhDKcWRMZQ6uQ4D7HsgI1MrcDIT/koT5IhaC28T17fuudV0bWAmhTJ0QpN56ti1cq4MXSR1wiWv6+ChJ12ukGpJaunG5rJpnad9rm+NyWVRKgqiXQhQ8+yI87pEicDQIRApAg3US60gvPPYhbBceqYTH17DEo8VLSVqWTFGmKdKOZVm0LDKlqIaEQ+GeO798tpu/fV/qPE+nCwwLiwNVi1FhCaUJIFxbury7uxAiwrled0k6Dz6F78J2FgcBk2qs66J9T/QrpRt2MoH7RX6ZXuO/Py3Pcp5PftMffj0qdBeHF4AlXJwU4ETSGavUMSsAD1AlqYDHvut1P61y6QRPMg/g2bbSudnJvCNCgmsFQKEE8Z2p+1x6Hi72SW/47mPk6/u+txwNa4vfpw4hYi3Lok7AHBiHCfjArTr6ZE4Sfr+W+aVAqQgVpUCJJBQq1kas7FFxAqTLZdK//fx0wnySG/3LP2sl1uEKU4uX9r1Siu7uliYwhHwctR0y1zmz4gwO80gp3OM4dHe3NqIAy3R36kjX4yvVj31P4OR0HYJluPVOk/Qfv35/YX7XG/z4IVSVQ8d11lp1ucydsNxlLsukbQth4zLnWQ8sA85zWZYm7LCiiFEp7J6O477rOul6TU5VUpdHjgJmL4QDKiGxzmSP3OqJ8d+Tj/0uE//w61EBI57jSWldUk+hxWc9OR1Wk+4WYWNNaD2jlNKsxdMOEnZJ7dC3bTcFmZpQSimNzXHl81ok7tndvAOlW8KXvl9u+eiTAlyoIozuB4DhrAt/w6qkdL3kb1Jymli0xzSH/Vi153QcLqmJX0t6c70erTqyrusfKhPEggOjmGvqANAIxNZ10r//8rhW+WiTkTI4iCDuOGAZ+U8osXWddH+/twMn5iEIeFEswasRkroir49l4cDVhM/Bcshc44LwCkcKZD6tfW75JHN6jRJlQnld+NzzOB4vJfnmSd59rHWMTwEkFh3HeDBxDVaIwB1JjlxofhZCj0pG7bQ9508rIH+bJq6JU/eaYsybaczd3dJVRXCZpajVLhEMua2j5VueIeZxAqNXnlrrNwvzqy/+6VP1s+6Sdnpd/LAYxJ1lWbTv+2mpc8ekeOz5XJINkPEknbSABN/dIfFrniddr9uZm65tPudsGS4gLyqzX9ZTSgIq9iipoWfQKyGm1qyDxn2+DcV+1YU/faqVxbEZL8Iy3AURV0Z2Bgjv8aPW2iyJgbDcejk4YiCQnwEH6gpGuuHxknV5GAApe+rhjBIM0Zs362dJAwTM2uNzNWAnPQRtX1Py+qILEJ4kXS6Tfv89ER6D2ITLjEPpSWjiCL8DXvhezrO0eIhuJILNQ6IqUUqS2lJAfikQKWi01tq5enJBXKQn/SiK57LO3XrvDvdxZgfSAC+xbXvjat3K2a+fyZe42L/0RfI94sO+H11S7ptzwDFCbQcKHuTTitVZhR+g/x13u+/HGaPWJtBucwZOGNQXmddjl9cYr9fjjIlzQ6EolO9vjIHM4Yo65o6+L1CuK76j2b+SlvzhF959rBWEySY9r/IWBxeapJsxgs9gP9y6cHlj99q+9zwow8tRzIFr4l4jqHJkPOaAzOFzOnjy3z3ZZw73HJwRQM/PZZzLz5bwdH+/6e7ucirDnxeiP/shqPN63U1rMo5J6nI/YgiaD9IbUahX19mwI1dHp+6SRvDgBzIWbaHvIu7VB4dIHCwly09es8TF46JZH6AJl4i18H2KyMuS83tbpSvXuk4nKs70ybGBnwWe4XPx8sEf//7zVtd17YAKNJgjPrSNSjqCy5bBjBmx+FyUC5IxghyPM1w75nMIxF0v6yVmjqzQmJT7YaKYYdUJtCQ1ZaKjwNMPZ4ig+dwlxv6mdi2CJm0ZvYafnYcg1jNWSto/3r4v9ZZms/HRlTjKQ0ggMQcCXhPctiwZObr0+7iC8D0npEHCgBuGu0f+/ebN2oTh1ZFQjhAUwvBiMMriB+kpTwi1z1P9++wF0OSAB4HggpkDz+WKFF6uV2z3fljm5IgTM0ZjRqQ2ukKPDSzO3aa7orHhyGONI8FsR8wD8Prfus5dh/donX4PDjYtZ+q8ixecHUl6l/jIf8LYcOC33Dnu2lOQEEAqsKPymPchNnDBj/2yDnwmmnK9h2WEzLhWhifcnvDimm5B5xH0eFwZEah/lw2wMdryuX6sMKTVBnrl87E7oFZ1uagDHPZIDuzC2/eoF+57368z5pPUTDGMUaHhjdnPSNXhacbvO4BrBoNWQEthUQ7NXSNCcHHQYSnxtzjgZFxG7eU+6S5n0856WmJfaOXacKHTef/ZWJ4ERB4BYv0xN4IJ96fu4CC5Y/299W7b3pRx33cdx9GUwKszpFnpVQL8ZQpTT4XILvTLJWuRtVZdLuvpcY4GchAg3wnsQdf7fLJiZ7nucoleTvpViEfRbLurlKJ9P0R9zjcQ2l5PTcxDpIgaLjc/QFvRqlLKqWW90gSY6asBbNoJ5/QYcd3lMneQnYNIIAQhjkLoTAVK21+eQWrF5bI2yO9rZB8BpNxT8GwITExt3kuKpmcPJft+nCEj8QHnOU2TLpelU7JQdhR60gzHSWCPw4kvRNse6Cpb58NNhN/3+MXNp4lmpfk8uIxzjiyzWiCt63JuPONcBPjpVCSaoJhrOQ+otPgUrj3dZ+ynnGWp0lkTQMsbo6KaklYFmYBFuXsOoKS2/rT+uSl74Ae8SQhynjPnDYusZwpVTmFmTJXCC4T7zHXFd0u754zv9aQ6hJDawE1i0nrGtNHNzp3Gx3dDMwJKT6ebqJ2WpSstLb5SPkLYcbhrs66Ma7W7p1sdG5+mqeV2d3f5eFsp0UcKp5nxWuf9lnbYXjCutbbQwz7dK3C4t/7tqBdwlLhj7lgkUheUi/RlXRMLtNDkQuDQ2EwejE6Txh0Gyrpe9xYj0MrrdWtaFDeSKcbcDrBPvp2P7BXBlQPrgtlY16nrYNu2ox22K1Ek7rV5m5hD5uZAxulmM16lN7hcLlpXd9mJavEarBe37fGbGOasUn/mx2mpkPJHM6DoWCgNaHEPSZoxSQIrpr8sKcTQjocVgiAFKPMEyPnb3y7NbXiciU7qkTlJITT/PmM5STaQNzn4Oo6qbStdyoOg2XgSErWzOD+MzHOnM/bXbn2wOl4uC1DUK7S7PI/5/MTL8W/iIvdGwblH/7SXt3hSgMjcc/7twzQFsKhnHOu7zxws3mIWvM/kONRATghy7jbM4XBAaDNaz+/ExQQ2vav0DjMs7+5ubRZfStWbN+tpFRmTwhVu56GGJUfYANpHQTs9TD1jYW3MET2trCNqolCEEXe3bX8Q23wsy3KS9tNZ2chqTICsuB8MkbNEefY6UfCUjA09oeR+TjPBRDhMJj/yZHesQLjvHvnDyHcOcz+525HKg3DgQBB23BNSvafFXPHCivdWe/T0BCKBkEDO5wfrMZ690k7iBLfv2+/Nnih3ZZqVzV6eQ2ca1VOfyAVlpYPuAXf6w69HRTDOSUJ1OUODK4VJyUCftUQqERRnnTz3p47CctON4Ipo9/BnIjzPQ3mc2+WQ6d9hH5DiHJz37XDIsf5UNhTTFQY35uuE4QqFedgoxVhX6f4+FS7z2KPjSsdaLGSF9Afc6Tho+B0tKm6Q7A6jTzN6rXRqzVGVL9gZDRTBm4wkDe0cbm09COO7zsZwyM6lIhj3QOMenT1yxiisI1MtUD50JHO612B/sz04RGbg/UCu3G6lnytJfVaIDIhxKUtPvmkHFH6QuLVbLfmOEhGCF0bd/2MJY/u+Wyqbj8/yIFAsn+9WYXp0b27NiQbVXR/INSx726L+xx5w3azLH/Rx78Y8biBO03nnwB/VFP9UiFI+N4/b+1wNzA8AV0Tux8K8y8sJdCeV4T1HlwPmwn07F+oCxI17DB3LQAyvdXa51/A01Gjld3fe/9P3lUaumUqO1/E+G+ZBuM6fEo+lv9Zw/JeEyHj7vtSE6KW5tlhYDwhwB+5SvGDsKYs3XAVK7J+7cMDi7i0P0d9Tk4/Lcf3Y+uCIGqGS81FZGEEE8SnnDJxwf7+1RN2TeI+3faGgXzfM0RiyvqRb/IuEyPAne/0gvGbn8XAM0qNFjMjSEaWDFag7Ns3fYo5wYR5fODzosh6mZ58se0iXP3VKABd8qyls7FCgQoM38aIwrvXubhXPjYT1hiAvl+WrWhe/SoiMdx9r3ba9FYcdsPATq0MLSV04SEeCoE93yxyAIzxHjMsy6XpNAQaAWdr3cYNYqb/ACEXyZzWSe+1flcKAfPBWjFt9SCPwGoGUdyIg/K99Q8c3CVFK4DPmiuNz8xRzqbGND7k4MMFyvJHJEWBel+4JZcLaoarI/WLusWUkrdJDgIMdVybAjyNp0iLQqgvM+2K5npqkM1ff+qDNNwuRwZNQkiO51OQR+IyFUM+r+mfk+2Ymb5kYXVm3MQMitxDo+HQVa/Jiredmjh79+35fqvUoknce4GkgSEopj/as/6MJkfH2faluhYAF75qT+ke66TDzxByXOLpD4qbnpWPq4vkWvUDjsxOOHhGw9w8FNTbdtGLefeO4AKtjnW6hxHvW+tiPhD+6EBkgWafi0NxMqLMxV1JzO/nSvRDMSGUx3NW5sBwZ8293Y2Mvq6PbsbKQCHlurNDIEI05rOefTliU8n3eTPXdhCipPXQDqPEOs/FgsB7i3mGMgLfCe46aaDIZfY9rntLwaJv0UHnGFAIheC+QP3rnDE78VKsNEoOdTqz1+76Q4bsKkfHjh3z8jYP2eIF78u4zb8N482bV/X0++CllY7ET0t7z6k1bWA6oOL4TPz2mpkt/yBG7O7/VsXeLbXqqF/w9iRAZvCk4qyL9YUk9HUZMcsAwHhYgyHNCrMU5Tql3dQjM06Jb77FhjZ97xM4JArzIND3tO1OfVIgM3tntVsWIikc0JXkJa3y2A+33vM+tydkbKd359Rrm+rlccryPs0kjIxPr7b2HpCd/KdGzCFGKlCRLTA9fTuSVhs/1nYIo/ZAdaY6v9fL6IDVLYh41O3JcrIoOB2I3aQgx1K99ited3BrPJkSGv0k/QU1SXaBIJwPGOOYpRyLTqfs+sdObgD1l8WqL1yoldUwQXgHhS8//xsVnFyLjxw+13mJn/O1Okk5O9eGrouuNup2/+MgRqZeaHAzxXQTtL2tAOUh7njru/dG40QHyPOO3D9ME6EGAPUUWLvH337cmJBJorwyEi0xrTlaIZuVDNCtfr4fot6EXKB9Xyw6+7FxLxXopApRekCX6ePexVtzc+MZhSc1KnEgAzUpZb/SHVp3IdvLZLXPsOhgrM4/Bc36P8eIW5IP/9wWW5+S354hSz6z4+25IJ2BzmCuuiZ+AFn9x4EiKv5QX1N4aL3ZhPqDwvN/H63vENqe6kgbrCXAHObcq+k504w1eovX5eNGL8/GPX4KJBpXi4oh/lLrGd7tRdIUsx7L89SjEv/EFuS9deIxXsUgf8LF9p3a+o3TsO3UOk1eQSLQY5iulqXpIz58yfOl4VYv14awPeZ0XpEnE+Y7Hwuw4ry33k16f8BivctE+/H8/5IBkfLmfv2Wf3NIF/ZKBy5+NV7twH2OVRPJH1fp3vsG0IMTnevn6Y47/AxX1K5XSf237AAAAAElFTkSuQmCC"},null),_("image",{id:"_Image7",width:"113px",height:"65px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHEAAABBCAYAAADmBEt9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAMrklEQVR4nOVdW2LbNhAcUD5Xkl4scXqxpr0XiX7AQwwGu7Rj2RLV7o8lknjtc3YBygX/Afr2XOu2bQCAZVkAALVWlFJQClAr9mvLUrBt7R4A/Hp++fDA9NAL+PpjqwBQSkF9kVQkOBIFx2vLUlDr4wvyYSf/7blJghanglFLc9q2DZfLgnXddqvl9X/+vDwkPx5u0l9/bFWtTf+q8Hidwt22DaWUXYCtj3H5bPNolvkwk2Xc05hHcjep1yk8Fy4tksSmfH5ZCv768RjCPP0k3W3ysxKFtSwLaq0vAGYZXC2vtefHmKn9Lkv7TKt+BKs89QT/+FnrtnVECYwghuRukfcpOL1N4fgzrZ/umgHsbvfsVnnKiX35vlYFHUpMJQAMwMQtqpSCdV3x9HTBujbXSUUAZmVQa876A84ZL081oS/f1+qAQwGLusx+vz/rSNUtbk5FZvccpSuOdmut+PvnchrenWIidJvAKJRIaPpZY6B+Z/6nAlBrisjjp4KezKWfRZB3n8QfP2tlKuBWAHS0SMZqOFSAwu+R1QA9sVdhupA5riNapUjY946Xdxv823OtHnfIFGp+lv+pZSiaZH/e1gVIlmseCXRBk1SBFO26i6fA7xUvbz4oS2UABoaua699ZjFK25CJ/NzajukBgMmNerzUNuyD1Rw2U6XR/ihAzhu4D/C56YDM+QAMDMqScrUiYMzjiDjVmjT2aTLvlhtZLeOvI9RufWWyRCUt9906Xt5kIFpf5uaUKarlR0jUy2p+X2Nh62+2bi3faaxz1JoBInf1nr/WWm9Sj/3UAb7+2KrHo6hC4gJ0kAOMwMSf0RwwSgu8isNrDpSU1KIVBY9zX+Rz9xAaP3n/My3zUzrWOqdbhLpGPqMuFMhjkGu8pxZRKuE5H0ljYFaC0z60b8ZNutllAbatC1PdcxurPftZgvzwTnWDFuhJdSlzHFOozudGsHBsxeMYc5xiHxm6jdyx11mVojHVkt2zaJ/6+aOF+WGdffm+7hu0zrB9sCC2ULiRNUUF6fa5l9H0GjCX4nRsF9BRPsj2kVC8fyofx88KC5/lYq/uhPt7zni6FFoetZaCjQU2okPgWBBqtXrfXbczmP2qmz7a5oqAVwR6Mkv1Zz3eXpuWvLux7jBwog7bIyKTNaboEjQ+7ZMUl+RQnvdVYTKE6S48AiD6LOepwMmVTfs6Qsw+P1/XNVb5roaa7wFjzIqAgloHidaoRyUiVOruz9MOIE4ZpoVapcfben9ODpAyC9M+dc1UWmCuDGnb9wjztxqo65wXNqcNUVDXeBmdc4kWqsKLQBL78zIcx6U71aMZfa6xW86uOeKOarU6R3fZ6n2y3Bj4vcrPmx789lyrx7QsH9OFXC4F6xqnGBHo0aqJCihzpa+hV33OEWpk/ZGFkJWeh0YVI953ZSU+UIGyzeVSQDDvHgF4m2UePsAiNRmoNUXX9NcOIDkTyJhs0R782/PxZzLAtZ3XNYXxeKhMzRivfbW1XlKX/1oakn3XsVyxXtslSW+q61QNjayv1oqnp+VlMnGVxRnnwEKFQAaocFQx9BkHPWSIV1OyfUUfb2KQeRnPL13wJHWrkedyZY3auSfKrHK6mIEW7YyTd2txbVbw0vuL9/1GxvXPtG510W3xs6X4wtXyiJo9Trml6jo1vqqCaHvOVcd1AWdgz/FFBu6cTx4v9y9R3BsZO2uPCkM1Xl1vhvwi16j967PKKP0cxTMFFC4k9umxl8r2lvlmTPa4TXIBet+RG414wvbqrVhcL9xZ10Hcuo6OO0QD8/MoiNnqdIKZ4pB8AY4ql4VKNQ0zzU3XGrlgjdk6F80ds3VxHd6vto3G8fyTc4x2ftimlLYRXfx9Bg/+RxoRAYMIYUX3IxfdJz6fOHPGt+8Yis9jSjDHnAzRcj56cDg686NziEALKQNdLhQKg89oKVHvR25+2BPVCXECOvkuVGWyl7fmZF7jUCljfNB2nem8P277aIzhuG0BdJ0ag0bm6PEKlQX7dNR6uSwTCGLb7gEU0I0xMFJQzoHt13Xb16BEdE8Z1NpPOyiPW1/kbVOUJy6+MaUMGuaW1jvE3hlJNYptIhfZJ6CId0aL/XhEmdqy7yjuRrlnmz+ZU3amKVCJ5sO+lZlRESFCvbyuSuHgiXzkGN3tLnt7kuIN9zBPFIpqfktkL4NAI4TlVRXVDk6ScYBMIXEBbMt9RUd8ruVdaGXoT4Wsa1ENZ36nCkjk7IwZ4/Wcv+l1pVHZ66R4kZtuAtKxxudU4I7qSylYdHK8p9pNBvRFjh3rgtpkutvRwTtYKnJPraYrQ3OF82I5R3V1zlB3b02Rln1MjtUtYi4ucA0zSi7Wd//chD4K0EOClyL7sx2YqWA7Nhnz4a7kbdyFDSh9jxMx7MYuMHdZFAQnNrYru4A4MQBD+SqD8XroieMrc3Ujms9qfFXLJwP6urcpduv8KVi9766xucMYuLkSjC61DoqrMX/Mr0fF7Ir24k5ZBxy1I/bxbn1uGRHkBub9ui60Lnx+VjfJ/hXWKyR3N6fITZmpcZ9/+wszfc9ThcM41ePQnMwreFJBUYk0DXIBdtc5sGxYp7r+plTtu26PLb+eS9Fis1pes6hZc2gFZEhHq8s+GLWTWtMtaazAaL9kJEmhvgZ7R6M9PleJf8uLhVe48ilq1O+cqwqBHqqHmrIrjzJdleNy6crl6+acPZy4B+S6xnl2DzEAOH7gyywKWrzyoaiwI7h8OyY6/qBWM2rtnJvRerLjGGOs7Qm0H0T2Z9RiIytRiqzHrU7bRWiXbfnXT+dpH17A8KOd6g32io1PmoVvAFjX1VxbXAgYAUpvq2hQ6WhfLXc5M9DxcSOXFjGabfW6CjUqcGTz8XU3IY3u1wERkKc4vn72rWN6IXxWvRfSQngWrFWjfTG+aPZ2lFtFWsrJ6zjqLbQUxTFG1DimGmq97hK1LRALVj2HMz1atyuok3o8XU+0qZ5tFKdCJOm7EzqZyGqUGdGiIgaxjbpMzS3VYltfnEd3tRq7FOFqnOHzylivZWZzzcKB3su8hc5TQ4saQOQu3WCOdvpfFSLQD0VlKCsThPrvvtjxJRqPmd6nMydihraL4mAkkGynnVbrrjD6q3OLGD8x+6AvnyObv+W1uTcJkcSd/sjslZFR3Iqq+srQ6Liiotr2fY4vc/yMT75pm+hsaCk9pXDhZ3E5U+bIUx3FPi+8v2U3X+m3hEji9pW6uKOJRxpHxmg88A1gXfDR+ZouiDnuaLw8iu0TY4LrPjb78L5UOTxsRHxQPr3nDOq7hEjyHwaKDjpFsTJzJZGL3Cdaeo7Fw1fRM1FKQWUBxkIC73Hu0Y8zeExrfcRbVUcuNVN4Heu9h4ivEiLQUawDhkAOALRgsEzxTZ9xrScz94kbkFGA47sb6g5Lab+q0Sw9Pi7ZxxjzP68kqTVyHvxOPmTHULgPClz/YurVQiTpu/fDAAkQcMa6Fkcbq15XVQFGxwd53wGIx0udBxAXFzxdorJkz+kcVMBt7e3vR73r/2FCJPm7GRkgIJGpwJhAq9D8tJ3qicdHLbpHqNaF6CAt3hQe88kIWPn61KXrXwAf/uLphwuR5O/mAzEIUe1u17XwO8Y1t1rdQPb+dQwlzw0jhJmVHCNAlYGkTMCf8U7/pwkRGH+XDRhztAhgROhTBaUC8SqNWjzHygBTlgY4ZejV+1aX6aiT1x7uTWGn6PW3iMmkjBEeWzLk6y7TyWObu9YobrZ2CEt3fN7jfa23+TWNmwiRpL9dE0HwaOdbGeIC6e44P2LpVSG3IHePfiSQlBUAVNDX5nvvpZsKkURhZpYF5AXpKN3gcx6TFDkeKU0Elvg3eukGiBWOz9/6t2zuIkRgfFknQoJRhUaL4wo6nDKAEVWAvBzom9aRq492VIDrXhS9hu4mRJL+LKaDE1IE+9vz84azu9hIgBHAigCOWqgKj6+j8dr/9rfdnHzLi+Qul9eAectHD3rpfbf43maOi442gX5kg5vcFOZZfmUx/mXYO5AyRC3MXWP0mbLUE3BKUWrCds1ix+OPHLe3WXC5XNL53ptOMxElLaz7ybUsufadBY9/fu4mugZgf7vZx6SQz/hvF043ISX/Mdsoz9QYmCX8fMYL0hEqzXLWM1me02knpuRbXsC8tdM+x7vmWmrrQh/P7mgMVGU4A3B5jU49OaXX/i8Gy3N+iizKEbPKkVvsma1P6SEmqeRVH2U8CwGa/wHjXqG++KPWrHniGePeET3UZJX05VhgLouR/H526uxWdc7PoIectBJ/a8B3872yoxvHwHxu51EFCPwHhAjMv/gBzNUYIP5duEeJe0f0L+D749HrhKeLAAAAAElFTkSuQmCC"},null),_("image",{id:"_Image10",width:"107px",height:"62px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAA+CAYAAAAs/OVIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAgAElEQVR4nN2dWa8saXaWn5jnzMjMPZ5T1V3tsrGR+TNIvjAgC+y2uw22bIONzB/gBgkEAowZJbiBCyR+CzdIIHDX0Gfvs4fMjHmO+LhYEbGrrabdQw2nCKl0ztlDROQ3rPWu933XVxpf0+vn/0CpplEAeJ7G83MBQByHmCaczzVx7GEYMI7QtjAMA/f/1tK+yvf+Wa6v5Yt/4+8olWU5YRgCYJoawyATZxgargtVBZoGZVlhWRamaeJ5Gl0HRVFx/I/B1+6zf61e+Ju/o1TXDTw/P3N7e4NhQN8rbFujaUY0TSMMdU6nhjh2GUfoezBN+a/rIM9LLi8DHh8LNpuQj/+l9rUZg6/Fi17+eq00TaNpGjabDZ6noesyEY4jk2BZUBQKTdPQNIgiyHMYx4lpmnh+fiaKIq6vAz799MxmsyEMDboOlOJrMWnv9Au++s6gLMvgeDxzc7Pj+Tnn4iICIElqLMvCMAxcV2MYoOtGdF0HoOs6NhuH47HAMAw8z0PXIQyhruHx8cwHH+zo+2Wi4aN/8W5P2Dv7cq+/OyrL0jFNAQhl2RIEDtMEwzDRNA2GYWCaJrZtcDwm7PcxVdXQdR37/Ya2HTFNg7bt6LqOi4uQpoEggGGQnFYUA45jzvcdiWOD//GP3s1Je+de6uf/QKkkqXFdlzDUyLKR/d7g+bmfJ0Yjy+T7fd8DEAQ2AIYhIbGqGkzTpCxLttstcSwTrhSk6YjrGuS5THZZllxcxOg6uK6EzjiWifzv//DdmrR35mVuf6tXlmUyTYqqqthuAwxDBm0YBCBoGjw9CURXSrHbRUyT/P4wTLiujq5DWY4YhsHbt2/58MMbHh4KXr8OOZ8nlFJM04TnWVRVh67r6LqO7+u8fZsQxzGGAUVREwTeO5XL3okX+cU/VCpNe7quw3VdbNtgmmQnBAGkqYSq5+czV1e7dVeM40gQuOuEdV2P61r0vXzBsnSaRnZkVVVomkbXdWiaxmazwTDk44+jQinFOI64rkXXCbLUdZ0ggKendwPqf6Uv8Oo7gxrHkf3eJk0FHBiGhmVJ2Hp6EmBR1xPavMCTJMGyLDRNIwgC6rpmHEeUUmy3EXXdst87VBV4HhTFhOPo1PVAFJn0Pei63B9kxyoFeS45sW1Hmqbh/fcD2lZ28+Njxe2tT5Iovv+n+lc2Zl/Jg3e/lisAwzC4ufFmiK0wTY2qahnHEd/3sSxBba7rMk0Tr14FVJUMcF0LPO86uWffy78fH1s8z1mfVVWyC+PYommgrjtc10bXwbbh+bnC932qqsLzPDRNI0kSwjDEtk0sS+6tafJf3yt8X+N//ZMvPzx+qQ/8xt9RCgR1WZZBVTW4rouuQ123dF3H9XXE+dxydeXQdTIxaTphWfoKApJEQMfpNLLdSsh8fq4YxxHLstjvXepaQmieK6JIo65hGGRBLGiwaWQyHcdhGAa2W4tpetl1SVLiui5ZlrHb7VBKYRgamw0cjyN3/8b8UsdP/7IedPG3KrXdwjQp2ralLGvC0GW3g+0WqqqawxlomsbxOFCWE30vNVPT9HSdoq5hszE4HgeCwJjBwIRpmrx+HXFx4ZIkHY4jfGDXdYyj1FKGIbTU+TzO7MbIxYVLHGsMw0Cej+i6TFLfw/vvB2y3Bo7jEEl5R5YVvH3bSH77lUe1/Rup+rLG8AtfGX/p7yk1jpAkFWHoM00CsR1HcsfjY0UQ+KRpNoceHcOQHVUUijjWqCqYJil6o8jANOGTTxLeey+maaDrJrquw/Nc2rbDcWyKouT6OkDTIMvkPkmi2Gw0jsduDXv7vUNZQlEUbLchj49HXr8+rCVA27YEQYBpmozjOIdUeHrqmaYJy7IA2G71L7w++8Ju/kt/pFTfQ12P9H2PruvEsY1SMlF3dxWvXvlkGWw28uGVUvi+jWHA8SiDl+cVjiM5KAyNleuzrIVOGpkmgeS2bWOazPBdBvPyUn738VFyl6ZpuK5J3yssS8P3hfRdCuhpUniexjRBUXQz+2GsTMeSv2ybmd3vsW2ZsGGQ+PlFhcfPPQxef7tVv/zHStU1pGlNFBlEkQtInkjTjrKE/d7n/r7G8+D+vp4LXpthgKoaiaKQYVDouo6maWy3BgB13VPXik8+OdO2LUmSsNtZTJNwgAtpOwwDYejQNHA6DTPMt+j7nr5XpGmK5wlQUUrAjiwkYebbVhFFNk3ToJSE7+MxZxwnum7g/v5MVUEUWXRdTxDAdmuQ5znv/231hYTGz3WyXn93VI5j07ZwOiV4nkdZKrKsZr+3CUPwfZtxhDzvKYqC47HB9z0MQxJ/FMlAx7Hcs65r+r7n8bECIAyteSJCuk6K2rKUwfZ9naIYaBrwfY++l/DbdR1RFOA4cH3tsdlInfX01OD7EpYNQ547DLKDhmGgaRS+73M+SyE+DAOapnE4mDNDUtP3cHtr0XWQJAPvvy9F9eavJ+qD3/18J+1z2a7X324VgOMI7XM6nQHQdZ3NZoNlCYL63vdSXr3aUlUSMmzboGl6qqpis9lgmhpJkq/E636vkabQdVIUN00/k7fQNBJa27YlDP0VtpumCcjAWpZFGOqkac9mYzEMzEVuz25nUZbQNO2aj2zbRinZdZeX8VqTLXVf0wwYhuxw09RwHAmhris5tW0VYaiRJBLSlVJ4nkPTdDz8e+dnHuuf6Qa7X8vV9XWIZcFHHyVzYbrFdfWVfTif1YzIRnY7n7aVAQCJ/a4Lb9/mRFFEXdd4nkdVCejoup793sKy4HhU6LrIH6dTwqtXMVk24Lom4whFUc7PD9E0Zgguz7ZtG8PQqKqGvu85HCK6DsqyxDRNHMdZ0eMCfJoG+n7g6srk6UlykYANH5CclSQ1tm0TBAZv30qxHscBXSclwgI3TFNy3c/K6v/Uv3z567WKY3fl4ZqmIQhc6rrjcLDpe3h4SLm93a4F7MIqZJmiLEssS0Ka7/szoRry9JQTx4KTpwnqull3y7ID0jTl9es9b9+m2LaNZVl0XUcY+tR1y/W1gIqylHukqYSxzSZkHBXDMNC27TyJBpZlcDolXF7GaJrsEAmJA77vEYbyzn3fs9lImJ8m+bfr2uu7Sn6THRVFPmEoIGgYhIGxLA3DgP/9T3+6SfuJc1b0187qm7+j1OWly/lcs9sJlHYchywrVz2p72G/3zIM8nt5Ln+ezwNxrKGUwjRN4jjgcNB4770Qz4M4juYBG5gmNSNEk67r6Pue3c7A9/05pAXYto1tm/PPQRg6HI8jeS7vUNcdnucRxyF9/8L5tW3LdmvTdR2GARcXMVXVUxQdti1j+eqVx/Pzcf3sSikeHzMA0jRlu7Vpmo7n5xOmCRcXLlHkYZomeV5xOo0YhnCURVHg+/JOr74zqJvf7H7ifPZjz/B7vz0ppdScrF2Uku3dNPIhNE2jqiouLnzGUVZaWUrN07YdFxf2al4ZRzgeG4Zh4OYm5OGhJAwDxlF4vDR9get5nrPbCdooipKLi4Dz+QWGT9PEdmtTlhNBoK9C4kIPCZID3xdC+HAwub+v5h1lEQQ6SdLOSHSYw6KEsK57uUfbdrNtwMJx5BllKWHQ9405Cgzouo5t63TdRBjKwjVNuL8v8TyPpmnWksVxZPw++ZMfb6f9hTvrw99X6hf+rlJZlqFpGp7nkqYVVdXx9JSTpikguSeKfE6nBtuWiYoim74fmKaJuoaHh448Z4buAufrGrbbYKaREspSapv9XuqbwyGmKEpME3zfp2nkd7MsI45Ntlt7DrM6x2PFOC6c4Uhd9+i6TPLjY8luZ/LxxwkAlmWRpum8++p5UGWH6jo8PCSM40RZ1ozjRBjKLpSwquj7kcPBmxeMLEDPM2fKC8JQ5/4+pSwVaarYbAKqShbhQoVlWU/X9T821P+Rk/X6u6MaR6mPvvWtLbouRSSI4HdzExGGIaapMY4yQI7j8OmnCZqmEUWsVX8Uwc2NvSZw4flcum6kbUf6njnW27RtS9+/cHSO49A0I0GgMU2KcYT9fr8O0jAMdB3Ytk3XQZoKEnVdi6YZub2VcFmWsNvFXF0Jcbvb7ajrnutr2bmbjYZl6bQt3N7GGIbOxYXH4aBTliK1TJP8XF3XGIY8p+tk8ppmxLYtzueGuoY43hIEkqvO52z+2W7O5xVKKW5vLTQNfu73lFpQ9f/r+qHbz/qr9+rDD28YBkE8mqZxdeVyd1dwcRFi27K6hmHAcSzOZwESDw9iD3McDaUkPrvuwihIQnYcG8+TuibLFK6rkeeyC7tOVNokEUjteQ6nk8j1SskOCYIAXRdEeDjEKyNSVeJyenqS+s5xnJmyknDrui5RZFJVijzP2W43lGU112cOeV6x3/v0vYTMtoXHxwTf99ls7DXcPzw88OrVDUVRYds24zhS1zWHQzwvnhc5x/MEUCyFN8i96/olvC6k8v19MpcvOn3/w0niH/hC+KsntdvtZugrDPM4KrZbjTyXAZYQJ1SNhBjxN3zwQcgwvEB1WTUuZSmUU1EU7HbbFY3VdU0cb6iqBt93KQqB63kuyO2zxpcoivB9g2GQiX96+qym5dP3gmIOB5OyhCQRm5llQV1PxLHO42OzcodRZK8KdJIUKKUIw5BhGFZRU9O0dZJlMQitFcfCzJ9O9fw9bd79gnYXrWwcX+ist28rdjt//nvLdisLqSwlFwpQkXquqiRvRpF8/7NKtQbwwe8q5TiQpsJzaZo8XOCo1AwgyEoEQgPL0lY+7XxOuLqKSdMa3xcXkePA8VgzTRPX18G6A85ncRgdjx2bjXCFCwgYBlkMS6gcR7i/zzFNk7Zt8TyP16+FQioKIV89z8OyjHWVlqXcbwm/4ziuueLy0uajj8SGJpKIQ12rVb8KQ4u2lR0kphsHTRP+b7+3yHN5pmVZc8h2sW1517Zd0GdDXYvzStd1HMdhuzXWiWzbkTA0SFPR1dq2xzAM0jTl1asdZTlhmjrjqKjrGsdx1l2m/ZV/oFSWsdq08lyI1ft7QTq6rs+eBYHowj4M+L6JbcPp1BEENlUlrECWTUSRzt1dShxvGQZRgPu+ZxxHwtADpPa5vAxnmkaK4jiGLBPpQrg84Qo9j3kXy4TI7pYdGwQGeS6DWZby/U8/TbBtmzj2ybKGsizZ7/fzhLtkmTwvyzJev96QptOsWcV0nZhwltJCPBpwPqdcX285nSo2G5++V+tOdBydthXH1cWFT1lKydE0DTc3AooELcoY6LrOMAwcDj739xJql5C6eBkXt1YQyOe2bdAXo6Ss4oq6btcJCQKDYRjYbAzGcVFoayzLpK7HWSey6Hvh7N68STEMna4Tri7LcnRdRylFENhEkYemycDHcbjunu02IgzhdJrWWmgphA1DVm2ajmgavHmT8NFHKboutU6evyT+/V5W99VVjO/7KAW+73I4HCjLcg1pcRyhlMJxnBnF6ViWhW0LMXt5abHbCdAR24Di8nJLnvdcXvqcz1I0TtOEbctkmqbObuevoXu71TkcfO7uCqZJFGZRqxtcVxaSbcN778WM40iWZRiGweOj3PvqKp69IRIeTRP0slQUxTCHPmf2IahVCGya5geS7n7vMU0KxzE4nxsBJJaEy/1+S98PZFm91jGyKwUxDQNkWUWeN2voEGGx43zu15eWUKtTlt2cv8A0DYZhJIoibm+3WBYcDvsZTWmczx2nk8T2cZQoIQ0JPZoGFxfhCsuXLOB5Ds/PFedzRRAEPD1l1LWi70VLMwyDIBB4Lova4ulJgIXjaBwODsMgu2ah0IZBFnRdy9d3u5CybHFdjdOp5fXreJVXJMf3OI6DrutEkcyBUswLRyPLJpSSn9Vlpk08T1ZKkkiCD8OQtpU/01TY5b6XxBqGGk0zcHUl3ogXWM3skHWpqgrXdbm8NGYxUQrNqyufw8FlGCR+L+Kd48ifu91uDpkTrmtTVR1ZVmNZsNsJrVUUE3kOux3c3QmYsSwLz5OFs4Tn8znFdS2mSdgNIWtllSdJQt+PRJE/85Adt7cbgkCjKCRP931P2/Zst3A+J2ga3Nz4aJpGWfZzflQURTtrW6IMbLfbWcHuOR4z4tjh8VGose9//8zpVJGm/ZyrRYv7xjdC7u8lH55OCXUNd3fZLP0IwNEOf7NUC+sgtY7krDRlVVOXLg2ZWBddXxjnabV3Lbxd3/c0TUMcx0SRwfEoqElW3UCWZWw2G+LY4nwWVsC2rRni9mRZNsvoIUEgFb5hvDAiS/ja7eDP/uzFmqaU4vra4/m5m8OnQd/3DMMw+wJ9np6eME0TTdP45jdjigKyTJiFKNLpe1nBS+gRH7wiy7LZpxjT98PMZBjc3yfz38MZlhtomoyLMBmSb9++fSF8FyI7z8Woo2lSpvR9z8VFyPlcz5KRLOZpmnAcWYjaYlNumn71zJ1OJ25uLgHW9plFUZWXkUnbbGQwxxEeH4/s93tsW3ZQmopJMgjg7dty5vVi6loMKotnT9fh+VlI1CU0+v4LU11VkqzP5zOO43A4hOS5wF0pxGVAl8vztJmz9DidxEL25k1BEAT4vsbxWBFF/uqL3++1Wf4QdTkIRErx/UUsbZmmadbHBmzbZBgkVzXNsOZWXWeWbsY53ztUVTfbDTxc18B1hRsVf6KzSi+uK97EIPDRdXn2w0M1q+sueT4DE8PQGQaF686zp2lcXFzQNBLrP/nkiK7LRNV1MwuELuM4znWCmgFDPPsbsjlceLRtP/Nr2oy+cm5uXA4Hjb4fqev2MywFc64oSJKONFWzu0m6R0zTxHVdDEPYk9Oppm3VHIYbDEPD8zSSRMwsAqV7qkpCeRRpFMU452XZBV3XkSSyQNpWEQQWx2NOlhXzTh7nWs6b84hJ28rAdd1EURQ4juSoMISuU+vC6bppLTeapqHrFEky4jgmwzBg26xCZ9PA7a1ocraQ+Fxe+nPBrdjvLbZbV+imzUabfd6KoijQdY3NxqIoGl6/PpDn1Sp9C3qCKDJ4fj6jaRrPz+lniladp6eMqoI4lrpFaKBOaoa7isfHgSgy2G4lmb56FVOWzDkkpKoqTFOjrru5PnN49WqLpmmzaRMuLz0cR4jc3c7j6em4vuP1tWha2+2WPJe6pyjAsowZaUqxfH3tEMfw+Jiy2Whz2PJo23ZGlwKSzueUNE1xXbBtsQbYtr7SW+M48sknCXGsURTFHLrElp1l2Spquq4xRzB3DrkTRTFwPCYkiXCIadpxPIr14fY2mEsIyX9rdfxLf6RUUYjOdHkZkiQtUeTMiGrAssw11CxajoQRk/N5XF9sAQy7nb+WBOKulXadZcX7vkWaVtzc+PNASjhI08U2JtJ/HFsoBff36YzCHJqmYZomwjCc2fF+VYa3W5MkEfV5yVXDMHBxIS7d+fVoGoH+oiZL7ghDef5CChyPJZtNQBiymkvzfFhFUssyOZ3OxHFMWZa8ehXy8CAOYc/z8H2Dh4eE29uYtoWm6fA8e65XpUYUEfOFohJ0LX+vKvn5PBf79g/QTe/99qQ8TyPP+1WgE1len7sw1JwIhR5ZFFnPg48/lmTfdWrt/kiShIuLA1mWc3sbUVXC6d3cxNS18ILCM76Ic54nAzkMwp6/fSsTKsWyTHKSlPK+7wWzfCE5482bZGYWIjYbE8OA+/uCOA5n4CBq89L8YNs2fd/jeR5ZlnF1teV0KmeNzJpRsZhKNxuDspR8soAe8XgkXFzEFIV0W3adjIfY7xr2e5eqkp/b72NcVxbMxx9L4f76tc+bNxXTNHE4hLMFrub62qMsf1Bd/qFE7vW3W3VxYfPxx0LNyPaVVhmxNBe4rsswDFxfuzw8CL8nu47ZFqZxPhc4joPrWivddDxWbLc+VSXU1uKB2O8NkkTNZpiXnxeXVMnNTUCWiXVZdkU2W6xNsixnv49WC/WnnyazsBnSNOJxf3jIuLraoGmQJC23tw53d/Le0/RS4I6jLELDWDzwNZuNmG+macIw9BURGoZBXQuYEZpKJsX3fS4v7bWrsusk5IHoc9/85pb7e6lFw9CmbcX+JjRagW3bP9Sz8SNFL/dXHtXFxcUqyi3EbpIk3N7ueHrKORwimuZlGxuGwPrvfe8tH3xwQ1VJK87iim0aOJ/Pcy2i43mQJB2WZeE4Ur9EkbUW0GHoE8fw/Cwf1vd1hmGRRl6oLN+3aZqBvu8JAo9xlETvuhpFIQtjATFSZE6z1yOY/YUG9/fC9KephOyFXpP7QFGM+L6B5wlhLbltWkGI9IcpLi+liBZ7tlBISdICzKDE4fY2pCggzwt0Xef2VqLHjxIif6Se1fzXK+37f6prCyEq6rA228BEjxKI3X8GlS3o5oY8l0Q8lyFzp2GBaZr0fc/5nJDnQrhO08T5XHJxYVHXiq6bCAIfzxOzzOEgWlBRDKRpObMZxsyE27guM1vt0TQdbdtSVRVVNVKW5QyH09nvLjWk7/trC1CaCqMxjmr2lKjZONNiGHB3dyYM5et3dxVBoLHdujiOQxx7zAgeXdf45JNqNd90XUdVKaLImZVpcfem6UTX9VxdhbP/Uf2FivGPLevf/lavxnEkihzqesRxDLpOGOKlvgBmuf1Fspa6TAq9um6wLIu2bbm99TmdFh5Q53xOef16uxLBDw/CpARBgKaJ1CCrmzVESn0npGwQQJL0lGXJbhdTltXqbNrv/dVSIMy/7Ib9XuPTTyWnWZaE8PNZdvMwCPQW86m1cppZJnJHUfT0fc9+768O3cfHdmbahWfsOmZILwtFhFoBFVnWcnHhkKYTb/618WPNw0/ssvm531OqqiRUSfErjMF2a/P0VHB9HfL8XHN15VFVUFXtHJqCub5Y6jl4eCjm5jkhYpcicRzVGtocB56f61lM1ElTETiXGL+gvsUDcn29o20FvLx9K/1dWSbhCiCOPaZJNDEhdh1cV6Np1ErcfvjhjtNJ7h2GPlXVEIYuWVZxOPgUxThbD2TXAytRvKgLi3NqYdilTpTnOI5GXf/kXSg/tRXt6jcatds5ZNlAGJorKmuaht3OpW2XLvh+RjpCej495VxeRiRJQxRJu8/xWLDbhZzPBVEkMdOy4HyWMytAEr4UlQZl2a4OJSmUDYpCWArD0EnTjJubzbxYRNJYitRhGNjtIvJcdjvIbhP/vRhy7u7On+EoRzzPJQzh6amZuU/xMmZZtxpbF5/7QjjbtsEwCHBoW1G5bdvm+tr6qXuVf2aX6F/++0rJJEnyrSoRJIXYlGTq+xZdJ6v9fK7mVWYTRfDmjfzMxYXFRx+d125GOadCm3WrmosLj/NZtLOuU7MPQpiCpTkhihzKsl9lGYA4Nueww9pDLMYWKcLD0FgprbaVRSCuX52yrFYuse97osinqgRJns/LCTYiNEoXypY0TWeUKnLI5aXH83OzaoOf/quf3uj5udinf/mPpWPk6Unif5IUvP9+SJqKRLEgSduWvJAkFXHs0zQCl/v+Bbm1LatAB5Kg5XvCNhgGPD2p2e+3AB9h3S3LWOX052epa8TTCHd3+SxDBKv7Vu4riK8opEl8IV2X0LrbidD58HAmiiK6ruPmxl89KEFgzfodlKUYXZUS/tTz3PUZn0en5OfamvLeb09KQp5BnktCXpqzP2tpLsuSzSbkdEpm352P677UJGUpk1nXUowuRPLiUxgGGYAsm6jrmv0+4HgsOBzEzHN/L+1Ci1IQRUIoPz8LUfvmzRO6rnN9fZhbTyXnSDuQuy6WIDBWqJ9lEqIti1VvWkJ9WU6cz2cuLw+AfEbZ6Qb/8x9/fj1bX0gf0TJpfd8Thu6aH3xfEJthGGuN9fwsSXwcpZAWL4bi+fmZ/X6PruszMdtyOATkeT9bzPrZhLOjLKVoXgjZaRKJ4nQ68fr1AcuSfKfrOufzmffe2895pCaKPBwH8nyakZzk0JubkDwXXUuUXmHcXfflqIdPPz3yC79w4O5OdpGgYvHfT9Pnf8TQF9ZMd/UbjdpuRQZ4eKhm+O3N/cPdipSyLOP997eMI5zP3bqq+75fm+kuLvx1hy6QuG1lwNp2YrvV5w5IxX4vH0kpePtWlOzt1uXhQSxqfd/zjW9IiO77ic1G5/m54fLS5XTqubiw1ibyYZAdE8/9R8LMmPT9uDq0ttvt6nHf7Xy67sd32P6k1xfepvr6u6NaTCdNs8j0+io3RJGF6wqt1PfM9ZI0iKdpznYrTQrL15cmiO3W5XgsaNuWq6vDLOP0q74kjXVyFBC85MHbW4ePP5b7iggou35RbTVNI4417u7KuRbzSVOZvLIUoFOWi7G0WwXEsvziz8r40rrNlxNklILj8cirV4f1WATTlB2T5xO+r5PnPYeDWL/O5wTDMNhsIoZhXLs0tltr3lmsNdrzsyjbck9Rt4W81Wcm5AWJ1nWL4zgrk7H0MS8uX8mfPZ5n0bbjeqCKlCbe7NUQ0+oXtZP+/PWln+Xw4e8rlSQyQHVdz40A1mxFlhDXdf0s95ukqdRlZSmtPldX+zUkLpY1zxPTpijHclLNe+8Fs2AquXMxhcqgO6sBaJFFhkHAzCITXV+Hs/dBmPoFVb55I7LK0qZ0+k/hlzaGX8mhJT//B0qlabNyi0tH4vEo0FfafWRGgsBeqaCyHFe/uFILdA6wLI00FWu1uGuFSLVtGVzf9/E8a0Wjcp6FPnNzFlUFed4xTRP7vYvrwsODyDHLwsiyksMhIE2lFnv77+z/vw8t+fNX+Ksntd/vVmtY2/azVGHjujLgi4zuOA6bjRTJYfiieS1HNeS5eBjKUsBM0zR861s7zmcpxstSjKnzQWozky8F/HYr/vqlt3ix4rVtSxQFNE1HGNqUZf+VTNJyfWmHlvywq/gve+2TP9E0yQ8DRVGsO0aI4A7ft9ak//QkHpCPPz7PTW/Mztd+1paa+SxcjziOOZ/FmZTn3Xw24dLoPc4yy4jvC7sh8jucTvIOeZ6vB0q6rs3/+Wea9lVOFLwjp6It1y/+oTzw8moAAAHYSURBVFJl+cJOLBrZZmOQ52IWTVOxQ4vxJVhdUkqJoadtWyzL4nDw1zZWOWjEnk+gfhH6kkSOrNM0+V3fd9fifQE9bQvf++df/jlNP+x6J17is9f1t1slsNtc/eJRFK2+jEWUXPyMy0Eii31rYfhBmtsk1y07zqTr5J6CEB36fmS3M+beXykZyrKmbVvy/7x7p8bnnXqZz17f/B2lmqabpXRhuhf6yLZt8jxns9ng+8I6LKzC6TSujLznuSuh7Hketm3MLMo4d+2LMzjPO4ZhmPWp7Tt7Vu47+VKfvV59Z1B1Xa/Iz/etGVio9biE5aihpVuy7wWG17XkvcPB5u4un21rW5qmY7ezubtL567MkGmSXPlV56Ufdb2zL/bZ6+Y3O+W6FmXZrAJfFFkUxbDmryhyZxVYWAyhgnyaZlxNKLe3Huezms0uL4eN/CRN2F/l9c6/4GevX/ojpapKitMX1gPyXDjA5WyLxUMoNmWXzcbg8bFkuw3WBkA5zvXLPzPwZ7m+Ni/62Wv5/5Asx4W7rs3pJK2rV1fB3GB9nifKo22Fxlr8hVXV8vgf3K/dZ//avfBnr8tfr9UC1a+u/PXM9udnYc+zbPH+vfx/Sx4eHuj/2+3X8nP/X8+jjAy2QdiEAAAAAElFTkSuQmCC"},null),_("linearGradient",{id:"_Linear11",x1:"0",y1:"0",x2:"1",y2:"0",gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(-118.47,-106.79,210.785,-180.125,69.2121,1372.7)"},[_("stop",{offset:"0",style:"stop-color: rgb(64, 128, 255); stop-opacity: 1;"},null),_("stop",{offset:"1",style:"stop-color: rgb(64, 128, 255); stop-opacity: 1;"},null)]),_("image",{id:"_Image13",width:"107px",height:"34px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGsAAAAiCAYAAABY6CeoAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABFElEQVRoge2aQRKDMAhFmx6it/P+x7Ab64xOmaAG8vnwFnWhiOGFOG3TPsu6vpS0djpuH61zXoz5F3s6r4rRxipiftddeUbp3t18QozEu3/JfdSzgCy5VWpTWcVYSlaPqcvDEUpZQPUdCqUsSAbMoJIViJIVCBNZrO+MHtbjrs4KRMkKBJUs9uXXTxZ7JR2g6ix27sly6BIxReIOHdpZWevoNe68y2DAmTVXFmDBAB9pJ29nBYRCln5jgkVyv1QUsrIAJyvtvg1F7iGykF/KlniPG66zKDCyWLI2IqwOJSsQz2URbqZEpTorEDCypn6xnciVYT+SlbS+08Zt01lJfv7xBmYZLPpgy6p/pA9gyxIArKMLXxexLNiBCThLAAAAAElFTkSuQmCC"},null),_("image",{id:"_Image15",width:"38px",height:"62px",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAA+CAYAAABHuGlYAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGaElEQVRogcVZSWLjOAwsblIu+oD+/zZ/YC4di8sc7IKLsJzJdCdpXGxLXIACUADpgL8oIYR9jKG/wd/hL+m080uMEb33pwHpR9UBkFLaU7ptW0rBGAOKGgAsy/KjiO3Aw105Z4wx0FpDSgmtNVPqer0if7c2Oee91oqUEsYY5rZaK5ZlQYwRx3HY+J+IsSmOQghPqKhwTO8dIYRvU8yU0kzzEmPEGGNSiGO/Ovh3ABtwQ4UI5ZxRSjEFKBprYwyUUtB7v6H3hQqhlGIb1loRY0RKCcdxIKWE3rshUkqZYsvLHykWQthjjJZZGtwqpRS01ia3MaZCCKi1cj2MMZBS+n1XhhB2brKuK2qtj/hIyeJHkVEypft678g5I+c8uf53FNsBbLoJF6RwU800kirjinM18HXcpxULIewANi5KyDWT1nWd3KquXZbF5tGVmq2qXO/9UzG2f/SSyK3rivf395e1T5/TmBAClmXB+/u7AnBD+7NK5fwoEiE822OM7d7lnBFjtIwlmkSMga97hBBelqRdraTf1SIvnsm1/gEwVBgCfMfPpwQ6UWgj0XGQxgrfeUWJFIO7tYacs20WYzRDPbqkDcZs790U25dl2ai9xoKK+V+oQFEhspzvWZ4kC2DKTK6tCRBjjDtd4RVZlgVvb2/T4lqMj+Ow9yRaRU/Xi/E5nIkUjWLMpZSQxhibn8C6dhyHlRZa6Ru73jtKKbYgDeBmWor8PN2LLmf8JdyLrsKrlV7hp+XeRa01G+/jjaj4hGE49N6ngm/vVakQgqU1N9c2uPc+pTdLjyqpn7qOFz6PMU48RjBsVcaHr/hqPZVZ13XKMn3v+U4zmiWKhur6mpm994diDDwN2BDCxD80wD9TZWqttimfE1lPQYyndV2n32OMW4xp6jI7vGi80CqSr48PRZGGkttSShO/sV9b19XHcjSkmEWKmP5mcKsiipaXs/hjCFCUO1ncASDFGLdXmxJBjRFFk4VbfxNVpRi6h/F2tgfBoRdiaw3LshifeCGPsW3hQsCj/lER5T1SCN3nWd76rhehk0IIGxVQC7iAh3xZlmksUVQC1eMaS5gqRve/OoXXWm/Br0jwANFas3aFStFNuomlt7iZ2aeErUox8Espxp9U1GomgJ0WTec6l23+HcvIWWPIHoytkM7lfYWi7ue21hBZ/9TiUsqUPWcMT746U6rWOvVnOvdVJaAYjeScNwYorSeFeDL0LO838W5WQ/S7ZZ4klc/4eL1eLViZsrVW8z39f9a2eKR8u8Mg93NpZGsNx3FMBxTzEoDt7KCqCcFNtTNVK1+dK1trljxKEWyVfDfLLM05I7Fz1c191tVarbPwLlXOMjecKKWbMtEo/s6s945IjWutBq1apxbpUR94JAkX00Kv8aSuZDZynWVZTCltNs2VHikN/DP+okvOEsCHA68BPFLa3XoujZqFKlqctRx5BfQsSI7iHACWeeoySmvt6eDDsmaIeSF18PbPu5ZjtCroe7+mP01pS+T3tZM4G7uzWGCvpNZpdhExZqx2ptpRKPX47oJoszMG7j2/xoIqx8DU1oYLcxwTxbfkPl5jjFN4MAP53p8nIsmV15G+9yICXIyKcNHjOKY5KjqXY6kc6yzXbK0ZkjFGhFLKzoH2UG75xIIP6xzT3X8HHg3B2TGOzabe+/PiblOfn8UEn3MToqnI6R0GjfOJoOXNcx7r552CLmmMsem1NjdX7uGiSqa6IUWPa2eZzoOtntBVeu8XAP8AuF1D5ZytmKoVFH/0OpNX79St/lMo5uLnJdzvUzXwpk5SiFTpwlv9qnfXYm8F+jHPEPJiaUR21gzTf8fUytba1E2Qw/TcSdECzaS6U8sTShPS/MKOk27T9FXxqKirSBetNby9veHXr182XrL0Q4UokVdInnO0vj1Zc+ciJUV2HloVXON4+axSAJDJ2F4Bn+p6tD9rhbkGkZee//JR0rySlHPelLfOWhUqqH966gFFKYRz7p+fRuhJsRDCaWtNJf1JiJvqkf6E4y6999Ns+6xkbVtIE2enZ0XKX4VzPP5HDP2XGI8B81W5lhTlOZYiV3YuY4w/QshLVJeR/TVOBA0TF49fhpJKptXaT/mSoZlLRa/X67coRAkAdt+OnP2ZLvKtClEy8Bz4L5T6EYUoU2utqGm9+2mlAMz/vunfxHda+HGFKP8C6wW6ett+DK8AAAAASUVORK5CYII="},null)])])}});const r4e=["info","success","warning","error","403","404","500",null],a4e=se({name:"Result",components:{IconInfo:JIe,IconCheck:x1,IconExclamation:Vj,IconClose:kn,ResultForbidden:e4e,ResultNotFound:t4e,ResultServerError:i4e},props:{status:{type:String,default:"info",validator:e=>r4e.includes(e)},title:String,subtitle:String},setup(){return{prefixCls:Se("result")}}});function n4e(e,t,i,r,a,n){const s=be("icon-info"),o=be("icon-check"),l=be("icon-exclamation"),u=be("icon-close"),c=be("result-forbidden"),d=be("result-not-found"),h=be("result-server-error");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y([`${e.prefixCls}-icon`,{[`${e.prefixCls}-icon-${e.status}`]:e.status,[`${e.prefixCls}-icon-custom`]:e.status===null}])},[ve("div",{class:Y(`${e.prefixCls}-icon-tip`)},[ye(e.$slots,"icon",{},()=>[e.status==="info"?(N(),De(s,{key:0})):e.status==="success"?(N(),De(o,{key:1})):e.status==="warning"?(N(),De(l,{key:2})):e.status==="error"?(N(),De(u,{key:3})):e.status==="403"?(N(),De(c,{key:4})):e.status==="404"?(N(),De(d,{key:5})):e.status==="500"?(N(),De(h,{key:6})):Me("v-if",!0)])],2)],2),e.title||e.$slots.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),e.subtitle||e.$slots.subtitle?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-subtitle`)},[ye(e.$slots,"subtitle",{},()=>[ti(Bt(e.subtitle),1)])],2)):Me("v-if",!0),e.$slots.extra?(N(),ee("div",{key:2,class:Y(`${e.prefixCls}-extra`)},[ye(e.$slots,"extra")],2)):Me("v-if",!0),e.$slots.default?(N(),ee("div",{key:3,class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2)):Me("v-if",!0)],2)}var NC=We(a4e,[["render",n4e]]);const s4e=Object.assign(NC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+NC.name,NC)}}),o4e=se({name:"Skeleton",props:{loading:{type:Boolean,default:!0},animation:{type:Boolean,default:!1}},setup(e){const t=Se("skeleton"),i=T(()=>[t,{[`${t}-animation`]:e.animation}]);return{prefixCls:t,cls:i}}});function l4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls)},[e.loading?ye(e.$slots,"default",{key:0}):ye(e.$slots,"content",{key:1})],2)}var VC=We(o4e,[["render",l4e]]);const u4e=se({name:"SkeletonLine",props:{rows:{type:Number,default:1},widths:{type:Array,default:()=>[]},lineHeight:{type:Number,default:20},lineSpacing:{type:Number,default:15}},setup(e){const t=Se("skeleton-line"),i=[];for(let r=0;r<e.rows;r++){const a={};Mt(e.widths[r])?a.width=`${e.widths[r]}px`:na(e.widths[r])&&(a.width=String(e.widths[r])),a.height=`${e.lineHeight}px`,r>0&&(a.marginTop=`${e.lineSpacing}px`),i.push(a)}return{prefixCls:t,lines:i}}});function c4e(e,t,i,r,a,n){return N(!0),ee(Xt,null,Br(e.lines,(s,o)=>(N(),ee("ul",{key:o,class:Y(e.prefixCls)},[ve("li",{class:Y(`${e.prefixCls}-row`),style:It(s)},null,6)],2))),128)}var $0=We(u4e,[["render",c4e]]);const d4e=se({name:"SkeletonShape",props:{shape:{type:String,default:"square"},size:{type:String,default:"medium"}},setup(e){const t=Se("skeleton-shape"),i=T(()=>[t,`${t}-${e.shape}`,`${t}-${e.size}`]);return{prefixCls:t,cls:i}}});function h4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls)},null,2)}var U0=We(d4e,[["render",h4e]]);const p4e=Object.assign(VC,{Line:$0,Shape:U0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+VC.name,VC),e.component(i+$0.name,$0),e.component(i+U0.name,U0)}}),f4e=se({name:"SliderButton",components:{Tooltip:eo},inheritAttrs:!1,props:{direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},min:{type:Number,required:!0},max:{type:Number,required:!0},formatTooltip:{type:Function},value:[String,Number],tooltipPosition:{type:String},showTooltip:{type:Boolean,default:!0}},emits:["movestart","moving","moveend"],setup(e,{emit:t}){const i=Se("slider-btn"),r=ie(!1),a=d=>{e.disabled||(d.preventDefault(),r.value=!0,wr(window,"mousemove",n),wr(window,"mouseup",s),wr(window,"contextmenu",s),t("movestart"))},n=d=>{t("moving",d.clientX,d.clientY)},s=()=>{r.value=!1,Ir(window,"mousemove",n),Ir(window,"mouseup",s),t("moveend")},o=T(()=>[i]),l=T(()=>{var d;return((d=e.tooltipPosition)!=null?d:e.direction==="vertical")?"right":"top"}),u=T(()=>{var d,h;return(h=(d=e.formatTooltip)==null?void 0:d.call(e,e.value))!=null?h:`${e.value}`}),c=T(()=>e.showTooltip?r.value?!0:void 0:!1);return{prefixCls:i,cls:o,tooltipContent:u,mergedTooltipPosition:l,popupVisible:c,handleMouseDown:a}}}),m4e=["aria-disabled","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"];function v4e(e,t,i,r,a,n){const s=be("tooltip");return N(),De(s,{"popup-visible":e.popupVisible,position:e.mergedTooltipPosition,content:e.tooltipContent},{default:He(()=>[ve("div",it(e.$attrs,{tabindex:"0",role:"slider","aria-disabled":e.disabled,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":e.value,"aria-valuetext":e.tooltipContent,class:e.cls,onMousedown:t[0]||(t[0]=(...o)=>e.handleMouseDown&&e.handleMouseDown(...o)),onClick:t[1]||(t[1]=ks(()=>{},["stop"]))}),null,16,m4e)]),_:1},8,["popup-visible","position","content"])}var g4e=We(f4e,[["render",v4e]]);const Wu=(e,[t,i])=>{const r=Math.max((e-t)/(i-t),0);return`${is.round(r*100,2)}%`},S1=(e,t)=>t==="vertical"?{bottom:e}:{left:e},y4e=se({name:"SliderDots",props:{data:{type:Array,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(e){return{prefixCls:Se("slider"),getStyle:r=>S1(Wu(r,[e.min,e.max]),e.direction)}}});function b4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(`${e.prefixCls}-dots`)},[(N(!0),ee(Xt,null,Br(e.data,(s,o)=>(N(),ee("div",{key:o,class:Y(`${e.prefixCls}-dot-wrapper`),style:It(e.getStyle(s.key))},[ve("div",{class:Y([`${e.prefixCls}-dot`,{[`${e.prefixCls}-dot-active`]:s.isActive}])},null,2)],6))),128))],2)}var w4e=We(y4e,[["render",b4e]]);const x4e=se({name:"SliderMarks",props:{data:{type:Array,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(e){return{prefixCls:Se("slider"),getStyle:r=>S1(Wu(r,[e.min,e.max]),e.direction)}}});function S4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(`${e.prefixCls}-marks`)},[(N(!0),ee(Xt,null,Br(e.data,(s,o)=>(N(),ee("div",{key:o,"aria-hidden":"true",class:Y(`${e.prefixCls}-mark`),style:It(e.getStyle(s.key))},Bt(s.content),7))),128))],2)}var C4e=We(x4e,[["render",S4e]]);const _4e=se({name:"SliderTicks",props:{value:{type:Array,required:!0},step:{type:Number,required:!0},min:{type:Number,required:!0},max:{type:Number,required:!0},direction:{type:String,default:"horizontal"}},setup(e){const t=Se("slider"),i=T(()=>{const a=[],n=Math.floor((e.max-e.min)/e.step);for(let s=0;s<=n;s++){const o=is.plus(s*e.step,e.min);o<=e.min||o>=e.max||a.push({key:o,isActive:o>=e.value[0]&&o<=e.value[1]})}return a});return{prefixCls:t,steps:i,getStyle:a=>S1(Wu(a,[e.min,e.max]),e.direction)}}});function M4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(`${e.prefixCls}-ticks`)},[(N(!0),ee(Xt,null,Br(e.steps,(s,o)=>(N(),ee("div",{key:o,class:Y([`${e.prefixCls}-tick`,{[`${e.prefixCls}-tick-active`]:s.isActive}]),style:It(e.getStyle(s.key))},null,6))),128))],2)}var E4e=We(_4e,[["render",M4e]]);const A4e=se({name:"SliderInput",components:{InputNumber:Qm},props:{modelValue:{type:Array,required:!0},min:{type:Number},max:{type:Number},step:{type:Number},disabled:{type:Boolean},range:{type:Boolean}},emits:["startChange","endChange"],setup(e,{emit:t}){return{prefixCls:Se("slider")}}});function P4e(e,t,i,r,a,n){const s=be("input-number");return N(),ee("div",{class:Y(`${e.prefixCls}-input`)},[e.range?(N(),ee(Xt,{key:0},[_(s,{min:e.min,max:e.max,step:e.step,disabled:e.disabled,"model-value":e.modelValue[0],"hide-button":"",onChange:t[0]||(t[0]=o=>e.$emit("startChange",o))},null,8,["min","max","step","disabled","model-value"]),ve("div",{class:Y(`${e.prefixCls}-input-hyphens`)},null,2)],64)):Me("v-if",!0),_(s,{min:e.min,max:e.max,step:e.step,disabled:e.disabled,"model-value":e.modelValue[1],"hide-button":"",onChange:t[1]||(t[1]=o=>e.$emit("endChange",o))},null,8,["min","max","step","disabled","model-value"])],2)}var T4e=We(A4e,[["render",P4e]]);const k4e=se({name:"Slider",components:{SliderButton:g4e,SliderDots:w4e,SliderMarks:C4e,SliderTicks:E4e,SliderInput:T4e},props:{modelValue:{type:[Number,Array],default:void 0},defaultValue:{type:[Number,Array],default:0},step:{type:Number,default:1},min:{type:Number,default:0},marks:{type:Object},max:{type:Number,default:100},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},showTicks:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},range:{type:Boolean,default:!1},formatTooltip:{type:Function},showTooltip:{type:Boolean,default:!0}},emits:{"update:modelValue":e=>!0,change:e=>!0},setup(e,{emit:t}){const{modelValue:i}=yt(e),r=Se("slider"),{mergedDisabled:a,eventHandlers:n}=Wr({disabled:Os(e,"disabled")}),s=ie(null),o=ie(),l=e.modelValue?e.modelValue:e.defaultValue,u=ie(bi(l)?l[0]:0),c=ie(bi(l)?l[1]:l);Vt(i,k=>{var I,O,D,F,U;bi(k)?(u.value=(O=(I=k[0])!=null?I:e.min)!=null?O:0,c.value=(F=(D=k[1])!=null?D:e.min)!=null?F:0):c.value=(U=k??e.min)!=null?U:0});const d=()=>{var k,I;e.range?(t("update:modelValue",[u.value,c.value]),t("change",[u.value,c.value])):(t("update:modelValue",c.value),t("change",c.value)),(I=(k=n.value)==null?void 0:k.onChange)==null||I.call(k)},h=k=>{k=k??e.min,u.value=k,d()},p=k=>{k=k??e.min,c.value=k,d()},f=T(()=>{var k,I,O;return e.range?bi(e.modelValue)?e.modelValue:[u.value,(k=e.modelValue)!=null?k:c.value]:ei(e.modelValue)?[u.value,c.value]:bi(e.modelValue)?[(I=e.min)!=null?I:0,e.modelValue[1]]:[(O=e.min)!=null?O:0,e.modelValue]}),v=T(()=>Object.keys(e.marks||{}).map(k=>{var I;const O=Number(k);return{key:O,content:(I=e.marks)==null?void 0:I[O],isActive:O>=f.value[0]&&O<=f.value[1]}})),m=k=>S1(Wu(k,[e.min,e.max]),e.direction),g=ie(!1),y=()=>{g.value=!0,s.value&&(o.value=s.value.getBoundingClientRect())};function b(k,I){if(!o.value)return 0;const{left:O,top:D,width:F,height:U}=o.value,z=e.direction==="horizontal"?F:U,B=z*e.step/(e.max-e.min);let W=e.direction==="horizontal"?k-O:D+U-I;W<0&&(W=0),W>z&&(W=z);const R=Math.round(W/B);return is.plus(e.min,is.times(R,e.step))}const x=(k,I)=>{c.value=b(k,I),d()},S=k=>{if(a.value)return;const{clientX:I,clientY:O}=k;s.value&&(o.value=s.value.getBoundingClientRect()),c.value=b(I,O),d()};function w([k,I]){return k>I&&([k,I]=[I,k]),e.direction==="vertical"?{bottom:Wu(k,[e.min,e.max]),top:Wu(e.max+e.min-I,[e.min,e.max])}:{left:Wu(k,[e.min,e.max]),right:Wu(e.max+e.min-I,[e.min,e.max])}}const E=(k,I)=>{u.value=b(k,I),d()},M=()=>{g.value=!1},P=T(()=>[r,{[`${r}-vertical`]:e.direction==="vertical",[`${r}-with-marks`]:!!e.marks}]),A=T(()=>[`${r}-track`,{[`${r}-track-disabled`]:a.value,[`${r}-track-vertical`]:e.direction==="vertical"}]);return{prefixCls:r,cls:P,trackCls:A,trackRef:s,computedValue:f,mergedDisabled:a,markList:v,getBtnStyle:m,getBarStyle:w,handleClick:S,handleMoveStart:y,handleEndMoving:x,handleMoveEnd:M,handleStartMoving:E,handleStartChange:h,handleEndChange:p}}});function O4e(e,t,i,r,a,n){const s=be("slider-ticks"),o=be("slider-dots"),l=be("slider-marks"),u=be("slider-button"),c=be("slider-input");return N(),ee("div",{class:Y(e.cls)},[ve("div",{ref:"trackRef",class:Y(e.trackCls),onClick:t[0]||(t[0]=(...d)=>e.handleClick&&e.handleClick(...d))},[ve("div",{class:Y(`${e.prefixCls}-bar`),style:It(e.getBarStyle(e.computedValue))},null,6),e.showTicks?(N(),De(s,{key:0,value:e.computedValue,step:e.step,min:e.min,max:e.max,direction:e.direction},null,8,["value","step","min","max","direction"])):Me("v-if",!0),e.marks?(N(),De(o,{key:1,data:e.markList,min:e.min,max:e.max,direction:e.direction},null,8,["data","min","max","direction"])):Me("v-if",!0),e.marks?(N(),De(l,{key:2,data:e.markList,min:e.min,max:e.max,direction:e.direction},null,8,["data","min","max","direction"])):Me("v-if",!0),e.range?(N(),De(u,{key:3,style:It(e.getBtnStyle(e.computedValue[0])),value:e.computedValue[0],direction:e.direction,disabled:e.mergedDisabled,min:e.min,max:e.max,"format-tooltip":e.formatTooltip,"show-tooltip":e.showTooltip,onMovestart:e.handleMoveStart,onMoving:e.handleStartMoving,onMoveend:e.handleMoveEnd},null,8,["style","value","direction","disabled","min","max","format-tooltip","show-tooltip","onMovestart","onMoving","onMoveend"])):Me("v-if",!0),_(u,{style:It(e.getBtnStyle(e.computedValue[1])),value:e.computedValue[1],direction:e.direction,disabled:e.mergedDisabled,min:e.min,max:e.max,"format-tooltip":e.formatTooltip,"show-tooltip":e.showTooltip,onMovestart:e.handleMoveStart,onMoving:e.handleEndMoving,onMoveend:e.handleMoveEnd},null,8,["style","value","direction","disabled","min","max","format-tooltip","show-tooltip","onMovestart","onMoving","onMoveend"])],2),e.showInput?(N(),De(c,{key:0,"model-value":e.computedValue,min:e.min,max:e.max,step:e.step,range:e.range,disabled:e.disabled,onStartChange:e.handleStartChange,onEndChange:e.handleEndChange},null,8,["model-value","min","max","step","range","disabled","onStartChange","onEndChange"])):Me("v-if",!0)],2)}var FC=We(k4e,[["render",O4e]]);const D4e=Object.assign(FC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+FC.name,FC)}});function jj(e){const t=na(e)?parseFloat(e):e;let i="";return Mt(e)||String(t)===e?i=t>1?"px":"%":i="px",{size:t,unit:i,isPx:i==="px"}}function Ig({size:e,defaultSize:t,containerSize:i}){const r=jj(e??t);return r.isPx?r.size:r.size*i}function I4e(e,t){return parseFloat(e)/parseFloat(t)}const L4e=se({name:"Split",components:{ResizeTrigger:Mj},props:{component:{type:String,default:"div"},direction:{type:String,default:"horizontal"},size:{type:[Number,String],default:void 0},defaultSize:{type:[Number,String],default:.5},min:{type:[Number,String]},max:{type:[Number,String]},disabled:{type:Boolean,default:!1}},emits:{moveStart:e=>!0,moving:e=>!0,moveEnd:e=>!0,"update:size":e=>!0},setup(e,{emit:t}){const{direction:i,size:r,defaultSize:a,min:n,max:s}=yt(e),o=ie(0),l=ie(),u=Se("split"),[c,d]=ja(a.value,gt({value:r})),h=T(()=>jj(c.value)),p=T(()=>i.value==="horizontal"),f=T(()=>[u,{[`${u}-horizontal`]:p.value,[`${u}-vertical`]:!p.value}]),v=T(()=>{const{size:P,unit:A,isPx:k}=h.value;return{flex:`0 0 calc(${k?P:P*100}${A} - ${o.value/2}px)`}}),m={startPageX:0,startPageY:0,startContainerSize:0,startSize:0};async function g(){const P=()=>{var A,k;return p.value?(A=l.value)==null?void 0:A.clientWidth:((k=l.value)==null?void 0:k.clientHeight)||0};return(!l.value||P())&&await hr(),P()}function y(P,A){if(!A)return;const k=h.value.isPx?`${P}px`:I4e(P,A);c.value!==k&&(d(k),t("update:size",k))}function b(P,A){const k=Ig({size:P,containerSize:A}),I=Ig({size:n.value,defaultSize:"0px",containerSize:A}),O=Ig({size:s.value,defaultSize:`${A}px`,containerSize:A});let D=k;return D=Math.max(D,I),D=Math.min(D,O),D}function x({startContainerSize:P,startSize:A,startPosition:k,endPosition:I}){const O=Ig({size:A,containerSize:P});return b(`${O+(I-k)}px`,P)}function S(P){t("moving",P);const A=p.value?x({startContainerSize:m.startContainerSize,startSize:m.startSize,startPosition:m.startPageX,endPosition:P.pageX}):x({startContainerSize:m.startContainerSize,startSize:m.startSize,startPosition:m.startPageY,endPosition:P.pageY});y(A,m.startContainerSize)}function w(P){Ir(window,"mousemove",S),Ir(window,"mouseup",w),Ir(window,"contextmenu",w),document.body.style.cursor="default",t("moveEnd",P)}async function E(P){t("moveStart",P),m.startPageX=P.pageX,m.startPageY=P.pageY,m.startContainerSize=await g(),m.startSize=c.value,wr(window,"mousemove",S),wr(window,"mouseup",w),wr(window,"contextmenu",w),document.body.style.cursor=p.value?"col-resize":"row-resize"}function M(P){const{width:A,height:k}=P.contentRect;o.value=p.value?A:k}return xi(async()=>{const P=await g(),A=b(c.value,P);y(A,P)}),{prefixCls:u,classNames:f,isHorizontal:p,wrapperRef:l,onMoveStart:E,onTriggerResize:M,firstPaneStyles:v}}});function B4e(e,t,i,r,a,n){const s=be("ResizeTrigger");return N(),De(bs(e.component),{ref:"wrapperRef",class:Y(e.classNames)},{default:He(()=>[ve("div",{class:Y([`${e.prefixCls}-pane`,`${e.prefixCls}-pane-first`]),style:It(e.firstPaneStyles)},[ye(e.$slots,"first")],6),e.disabled?Me("v-if",!0):(N(),De(s,{key:0,"prefix-cls":`${e.prefixCls}-trigger`,direction:e.isHorizontal?"vertical":"horizontal",onMousedown:e.onMoveStart,onResize:e.onTriggerResize},{default:He(()=>[ye(e.$slots,"resize-trigger")]),icon:He(()=>[ye(e.$slots,"resize-trigger-icon")]),_:3},8,["prefix-cls","direction","onMousedown","onResize"])),ve("div",{class:Y([`${e.prefixCls}-pane`,`${e.prefixCls}-pane-second`])},[ye(e.$slots,"second")],2)]),_:3},8,["class"])}var jC=We(L4e,[["render",B4e]]);const z4e=Object.assign(jC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+jC.name,jC)}}),R4e=se({name:"Statistic",props:{title:String,value:{type:[Number,Object]},format:{type:String,default:"HH:mm:ss"},extra:String,start:{type:Boolean,default:!0},precision:{type:Number,default:0},separator:String,showGroupSeparator:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},animationDuration:{type:Number,default:2e3},valueFrom:{type:Number,default:void 0},placeholder:{type:String},valueStyle:{type:Object}},setup(e){var t;const i=Se("statistic"),r=T(()=>Mt(e.value)?e.value:0),a=ie((t=e.valueFrom)!=null?t:e.value),n=ie(null),{value:s}=yt(e),o=T(()=>ei(e.value)),l=(c=(h=>(h=e.valueFrom)!=null?h:0)(),d=r.value)=>{var h;c!==d&&(n.value=new Ed({from:{value:c},to:{value:d},duration:e.animationDuration,easing:"quartOut",onUpdate:p=>{a.value=p.value},onFinish:()=>{a.value=d}}),(h=n.value)==null||h.start())},u=T(()=>{let c=a.value;if(Mt(c)){Mt(e.precision)&&(c=is.round(c,e.precision).toFixed(e.precision));const d=String(c).split("."),h=e.showGroupSeparator?Number(d[0]).toLocaleString("en-US"):d[0],p=d[1];return{isNumber:!0,integer:h,decimal:p}}return e.format&&(c=Ln(c).format(e.format)),{isNumber:!1,value:c}});return xi(()=>{e.animation&&e.start&&l()}),Vt(()=>e.start,c=>{c&&e.animation&&!n.value&&l()}),Vt(s,c=>{var d;n.value&&((d=n.value)==null||d.stop(),n.value=null),a.value=c,e.animation&&e.start&&l()}),{prefixCls:i,showPlaceholder:o,formatValue:u}}}),N4e={key:0};function V4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.prefixCls)},[e.title||e.$slots.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-content`)},[ve("div",{class:Y(`${e.prefixCls}-value`),style:It(e.valueStyle)},[e.showPlaceholder?(N(),ee("span",N4e,Bt(e.placeholder),1)):(N(),ee(Xt,{key:1},[e.$slots.prefix?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-prefix`)},[ye(e.$slots,"prefix")],2)):Me("v-if",!0),e.formatValue.isNumber?(N(),ee(Xt,{key:1},[ve("span",{class:Y(`${e.prefixCls}-value-integer`)},Bt(e.formatValue.integer),3),e.formatValue.decimal?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-value-decimal`)}," ."+Bt(e.formatValue.decimal),3)):Me("v-if",!0)],64)):(N(),ee(Xt,{key:2},[ti(Bt(e.formatValue.value),1)],2112)),e.$slots.suffix?(N(),ee("span",{key:3,class:Y(`${e.prefixCls}-suffix`)},[ye(e.$slots,"suffix")],2)):Me("v-if",!0)],64))],6),e.extra||e.$slots.extra?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-extra`)},[ye(e.$slots,"extra",{},()=>[ti(Bt(e.extra),1)])],2)):Me("v-if",!0)],2)],2)}var $C=We(R4e,[["render",V4e]]);const F4e=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function UC(e,t){let i=e;return F4e.reduce((r,[a,n])=>{if(r.indexOf(a)!==-1){const s=Math.floor(i/n);return i-=s*n,r.replace(new RegExp(`${a}+`,"g"),o=>{const l=o.length;return String(s).padStart(l,"0")})}return r},t)}const j4e=se({name:"Countdown",props:{title:String,value:{type:Number,default:()=>Date.now()+3e5},now:{type:Number,default:()=>Date.now()},format:{type:String,default:"HH:mm:ss"},start:{type:Boolean,default:!0},valueStyle:{type:Object}},emits:{finish:()=>!0},setup(e,{emit:t}){const i=Se("statistic"),{start:r,value:a,now:n,format:s}=yt(e),o=ie(UC(Math.max(Ln(e.value).diff(Ln(e.now),"millisecond"),0),e.format));Vt([a,n,s],()=>{const d=UC(Math.max(Ln(e.value).diff(Ln(e.now),"millisecond"),0),e.format);d!==o.value&&(o.value=d)});const l=ie(0),u=()=>{l.value&&(window.clearInterval(l.value),l.value=0)},c=()=>{Ln(e.value).valueOf()<Date.now()||(l.value=window.setInterval(()=>{const d=Ln(e.value).diff(Ln(),"millisecond");d<=0&&(u(),t("finish")),o.value=UC(Math.max(d,0),e.format)},1e3/30))};return xi(()=>{e.start&&c()}),Tn(()=>{u()}),Vt(r,d=>{d&&!l.value&&c()}),{prefixCls:i,displayValue:o}}});function $4e(e,t,i,r,a,n){return N(),ee("div",{class:Y([`${e.prefixCls}`,`${e.prefixCls}-countdown`])},[e.title||e.$slots.title?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"title",{},()=>[ti(Bt(e.title),1)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-content`)},[ve("div",{class:Y(`${e.prefixCls}-value`),style:It(e.valueStyle)},Bt(e.displayValue),7)],2)],2)}var W0=We(j4e,[["render",$4e]]);const U4e=Object.assign($C,{Countdown:W0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+$C.name,$C),e.component(i+W0.name,W0)}}),$j=Symbol("ArcoSteps"),W4e=se({name:"Steps",props:{type:{type:String,default:"default"},direction:{type:String,default:"horizontal"},labelPlacement:{type:String,default:"horizontal"},current:{type:Number,default:void 0},defaultCurrent:{type:Number,default:1},status:{type:String,default:"process"},lineLess:{type:Boolean,default:!1},small:{type:Boolean,default:!1},changeable:{type:Boolean,default:!1}},emits:{"update:current":e=>!0,change:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{type:r,lineLess:a}=yt(e),n=Se("steps"),s=ie(e.defaultCurrent),o=T(()=>{var g;return(g=e.current)!=null?g:s.value}),l=T(()=>["navigation","arrow"].includes(e.type)?"horizontal":e.direction),u=T(()=>e.type==="dot"?l.value==="vertical"?"horizontal":"vertical":e.type==="navigation"?"horizontal":e.labelPlacement),c=g=>g<o.value?"finish":g>o.value?"wait":e.status,d=(g,y)=>{e.changeable&&(s.value=g,t("update:current",g),t("change",g,y))},h=gt(new Map),p=T(()=>Array.from(h.values()).filter(g=>g.status==="error").map(g=>g.step)),f=(g,y)=>{h.set(g,y)},v=g=>{h.delete(g)},m=T(()=>[n,`${n}-${l.value}`,`${n}-label-${u.value}`,`${n}-mode-${r.value}`,{[`${n}-changeable`]:e.changeable,[`${n}-size-small`]:e.small&&e.type!=="dot",[`${n}-line-less`]:a.value}]);return dr($j,gt({type:r,direction:l,labelPlacement:u,lineLess:a,current:o,errorSteps:p,getStatus:c,addItem:f,removeItem:v,onClick:d,parentCls:n})),{cls:m}}});function H4e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls)},[ye(e.$slots,"default")],2)}var WC=We(W4e,[["render",H4e]]);const G4e=se({name:"Step",components:{IconCheck:x1,IconClose:kn},props:{title:String,description:String,status:{type:String},disabled:{type:Boolean,default:!1}},setup(e){const t=Se("steps-item"),i=xs(),r=Se("steps-icon"),a=Ai($j,void 0),n=T(()=>{var f;return(f=a?.type)!=null?f:"default"}),s=ie(),{computedIndex:o}=d1({itemRef:s,selector:`.${t}`,parentClassName:a?.parentCls}),l=T(()=>o.value+1),u=T(()=>{var f,v;return(v=(f=e.status)!=null?f:a?.getStatus(l.value))!=null?v:"process"}),c=T(()=>{var f;return(f=a?.errorSteps.includes(l.value+1))!=null?f:!1});i&&a?.addItem(i.uid,gt({step:l,status:u})),Tn(()=>{i&&a?.removeItem(i.uid)});const d=T(()=>!a?.lineLess&&(a?.labelPlacement==="vertical"||a?.direction==="vertical")),h=f=>{e.disabled||a?.onClick(l.value,f)},p=T(()=>[t,`${t}-${u.value}`,{[`${t}-active`]:l.value===a?.current,[`${t}-next-error`]:c.value,[`${t}-disabled`]:e.disabled}]);return{prefixCls:t,iconCls:r,cls:p,itemRef:s,showTail:d,stepNumber:l,computedStatus:u,type:n,handleClick:h}}});function q4e(e,t,i,r,a,n){const s=be("icon-check"),o=be("icon-close");return N(),ee("div",{ref:"itemRef",class:Y(e.cls),onClick:t[0]||(t[0]=(...l)=>e.handleClick&&e.handleClick(...l))},[e.showTail?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-tail`)},null,2)):Me("v-if",!0),e.type!=="arrow"?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-node`)},[ye(e.$slots,"node",{step:e.stepNumber,status:e.computedStatus},()=>[e.type!=="dot"?(N(),ee("div",{key:0,class:Y(e.iconCls)},[ye(e.$slots,"icon",{step:e.stepNumber,status:e.computedStatus},()=>[e.computedStatus==="finish"?(N(),De(s,{key:0})):e.computedStatus==="error"?(N(),De(o,{key:1})):(N(),ee(Xt,{key:2},[ti(Bt(e.stepNumber),1)],2112))])],2)):Me("v-if",!0)])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-content`)},[ve("div",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"default",{},()=>[ti(Bt(e.title),1)])],2),e.description||e.$slots.description?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-description`)},[ye(e.$slots,"description",{},()=>[ti(Bt(e.description),1)])],2)):Me("v-if",!0)],2)],2)}var H0=We(G4e,[["render",q4e]]);const Y4e=Object.assign(WC,{Step:H0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+WC.name,WC),e.component(i+H0.name,H0)}}),X4e=se({name:"Switch",components:{IconLoading:$n},props:{modelValue:{type:[String,Number,Boolean],default:void 0},defaultChecked:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},type:{type:String,default:"circle"},size:{type:String},checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},checkedColor:{type:String},uncheckedColor:{type:String},beforeChange:{type:Function},checkedText:{type:String},uncheckedText:{type:String}},emits:{"update:modelValue":e=>!0,change:(e,t)=>!0,focus:e=>!0,blur:e=>!0},setup(e,{emit:t}){const{disabled:i,size:r,modelValue:a}=yt(e),n=Se("switch"),{mergedSize:s}=hn(r),{mergedDisabled:o,mergedSize:l,eventHandlers:u}=Wr({disabled:i,size:s}),c=ie(e.defaultChecked?e.checkedValue:e.uncheckedValue),d=T(()=>{var x;return((x=e.modelValue)!=null?x:c.value)===e.checkedValue}),h=ie(!1),p=T(()=>h.value||e.loading),f=(x,S)=>{var w,E;c.value=x?e.checkedValue:e.uncheckedValue,t("update:modelValue",c.value),t("change",c.value,S),(E=(w=u.value)==null?void 0:w.onChange)==null||E.call(w,S)},v=async x=>{if(p.value||o.value)return;const S=!d.value,w=S?e.checkedValue:e.uncheckedValue,E=e.beforeChange;if(Zt(E)){h.value=!0;try{const M=await E(w);(M??!0)&&f(S,x)}finally{h.value=!1}}else f(S,x)},m=x=>{var S,w;t("focus",x),(w=(S=u.value)==null?void 0:S.onFocus)==null||w.call(S,x)},g=x=>{var S,w;t("blur",x),(w=(S=u.value)==null?void 0:S.onBlur)==null||w.call(S,x)};Vt(a,x=>{(ei(x)||Wn(x))&&(c.value=e.uncheckedValue)});const y=T(()=>[n,`${n}-type-${e.type}`,{[`${n}-small`]:l.value==="small"||l.value==="mini",[`${n}-checked`]:d.value,[`${n}-disabled`]:o.value,[`${n}-loading`]:p.value,[`${n}-custom-color`]:e.type==="line"&&(e.checkedColor||e.uncheckedColor)}]),b=T(()=>{if(d.value&&e.checkedColor)return e.type==="line"?{"--custom-color":e.checkedColor}:{backgroundColor:e.checkedColor};if(!d.value&&e.uncheckedColor)return e.type==="line"?{"--custom-color":e.uncheckedColor}:{backgroundColor:e.uncheckedColor}});return{prefixCls:n,cls:y,mergedDisabled:o,buttonStyle:b,computedCheck:d,computedLoading:p,handleClick:v,handleFocus:m,handleBlur:g}}}),K4e=["aria-checked","disabled"];function Z4e(e,t,i,r,a,n){const s=be("icon-loading");return N(),ee("button",{type:"button",role:"switch","aria-checked":e.computedCheck,class:Y(e.cls),style:It(e.buttonStyle),disabled:e.mergedDisabled,onClick:t[0]||(t[0]=(...o)=>e.handleClick&&e.handleClick(...o)),onFocus:t[1]||(t[1]=(...o)=>e.handleFocus&&e.handleFocus(...o)),onBlur:t[2]||(t[2]=(...o)=>e.handleBlur&&e.handleBlur(...o))},[ve("span",{class:Y(`${e.prefixCls}-handle`)},[ve("span",{class:Y(`${e.prefixCls}-handle-icon`)},[e.computedLoading?(N(),De(s,{key:0})):(N(),ee(Xt,{key:1},[e.computedCheck?ye(e.$slots,"checked-icon",{key:0}):ye(e.$slots,"unchecked-icon",{key:1})],2112))],2)],2),Me("  prettier-ignore  "),e.type!=="line"&&e.size!=="small"&&(e.$slots.checked||e.checkedText||e.$slots.unchecked||e.uncheckedText)?(N(),ee(Xt,{key:0},[ve("span",{class:Y(`${e.prefixCls}-text-holder`)},[e.computedCheck?ye(e.$slots,"checked",{key:0},()=>[ti(Bt(e.checkedText),1)]):ye(e.$slots,"unchecked",{key:1},()=>[ti(Bt(e.uncheckedText),1)])],2),ve("span",{class:Y(`${e.prefixCls}-text`)},[e.computedCheck?ye(e.$slots,"checked",{key:0},()=>[ti(Bt(e.checkedText),1)]):ye(e.$slots,"unchecked",{key:1},()=>[ti(Bt(e.uncheckedText),1)])],2)],64)):Me("v-if",!0)],46,K4e)}var HC=We(X4e,[["render",Z4e]]);const Q4e=Object.assign(HC,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+HC.name,HC)}});var J4e=Object.defineProperty,eLe=Object.defineProperties,tLe=Object.getOwnPropertyDescriptors,oB=Object.getOwnPropertySymbols,iLe=Object.prototype.hasOwnProperty,rLe=Object.prototype.propertyIsEnumerable,lB=(e,t,i)=>t in e?J4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Uj=(e,t)=>{for(var i in t||(t={}))iLe.call(t,i)&&lB(e,i,t[i]);if(oB)for(var i of oB(t))rLe.call(t,i)&&lB(e,i,t[i]);return e},aLe=(e,t)=>eLe(e,tLe(t));const nLe=e=>{let t=0;const i=r=>{if(bi(r)&&r.length>0)for(const a of r)a.children?i(a.children):t+=1};return i(e),t},Wj=e=>{let t=0;if(bi(e)&&e.length>0){t=1;for(const i of e)if(i.children){const r=Wj(i.children);r>0&&(t=Math.max(t,r+1))}}return t},uB=(e,t)=>{let{parent:i}=e;for(;i;)i.fixed===t&&(t==="left"?i.isLastLeftFixed=!0:i.isFirstRightFixed=!0),i=i.parent},sLe=(e,t,i)=>{const r=Wj(e);t.clear();const a=[],n=[...Array(r)].map(()=>[]);let s,o;const l=(u,{level:c=0,parent:d,fixed:h}={})=>{var p;for(const f of u){const v=aLe(Uj({},f),{parent:d});if(bi(v.children)){const m=nLe(v.children);m>1&&(v.colSpan=m),n[c].push(v),l(v.children,{level:c+1,parent:v,fixed:v.fixed})}else{const m=r-c;m>1&&(v.rowSpan=m),(h||v.fixed)&&(v.fixed=(p=v.fixed)!=null?p:h,v.fixed==="left"?s=a.length:ei(o)&&(o=a.length)),(ei(v.dataIndex)||Wn(v.dataIndex))&&(v.dataIndex=`__arco_data_index_${a.length}`),i[v.dataIndex]&&(v._resizeWidth=i[v.dataIndex]),t.set(v.dataIndex,v),a.push(v),n[c].push(v)}}};return l(e),ei(s)||(a[s].isLastLeftFixed=!0,uB(a[s],"left")),ei(o)||(a[o].isFirstRightFixed=!0,uB(a[o],"right")),{dataColumns:a,groupColumns:n}},oLe=(e,t)=>{for(let i=0;i<e.length;i++)if(e[i].name===t)return i;return-1},lLe=(e,t)=>{var i;const r=oLe(t,e.name);if(r<=0)return 0;let a=0;const n=t.slice(0,r);for(const s of n)a+=(i=s.width)!=null?i:0;return a},LP=e=>e.children&&e.children.length>0?LP(e.children[0]):e,uLe=e=>e.children&&e.children.length>0?LP(e.children[e.children.length-1]):e,cLe=(e,{dataColumns:t,operations:i})=>{var r,a,n;let s=0;if(e.fixed==="left"){for(const u of i)s+=(r=u.width)!=null?r:40;const l=LP(e);for(const u of t){if(l.dataIndex===u.dataIndex)break;s+=(n=(a=u._resizeWidth)!=null?a:u.width)!=null?n:0}return s}const o=uLe(e);for(let l=t.length-1;l>0;l--){const u=t[l];if(o.dataIndex===u.dataIndex)break;u.fixed==="right"&&(s+=u.width)}return s},Hj=(e,t)=>t.fixed?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:[],Gj=(e,t)=>t.fixed==="left"?[`${e}-col-fixed-left`,{[`${e}-col-fixed-left-last`]:t.isLastLeftFixed}]:t.fixed==="right"?[`${e}-col-fixed-right`,{[`${e}-col-fixed-right-first`]:t.isFirstRightFixed}]:[],qj=(e,{dataColumns:t,operations:i})=>{if(e.fixed){const r=`${cLe(e,{dataColumns:t,operations:i})}px`;return e.fixed==="left"?{left:r}:{right:r}}return{}},Yj=(e,t)=>e.fixed?{left:`${lLe(e,t)}px`}:{};function Xj(e){return e.map(t=>{const i=Uj({},t);return i.children&&(i.children=Xj(i.children)),i})}function Kj(e){return e.map(t=>{const i=t.raw;return t.children&&i.children&&(i.children=Kj(t.children)),t.raw})}const BP=e=>{const t=[];if(e.children)for(const i of e.children)i.isLeaf?t.push(i.key):t.push(...BP(i));return t},dLe=(e,t)=>{let i=!1,r=!1;const a=t.filter(n=>e.includes(n));return a.length>0&&(a.length>=t.length?i=!0:r=!0),{checked:i,indeterminate:r}},df=(e,t,i=!1)=>i?e.filter(r=>!t.includes(r)):Array.from(new Set(e.concat(t))),hLe=e=>{const t=[];for(let i=0;i<e.length;i++)t[i]=e[e.length-1-i];return t},pLe=({selectedKeys:e,defaultSelectedKeys:t,rowSelection:i,currentAllRowKeys:r,currentAllEnabledRowKeys:a,emit:n})=>{var s,o,l;const u=T(()=>{var b;return((b=i.value)==null?void 0:b.type)==="radio"}),c=ie((l=(o=t.value)!=null?o:(s=i.value)==null?void 0:s.defaultSelectedRowKeys)!=null?l:[]),d=T(()=>{var b,x,S;return(S=(x=e.value)!=null?x:(b=i.value)==null?void 0:b.selectedRowKeys)!=null?S:c.value}),h=T(()=>d.value.filter(b=>r.value.includes(b)));return{isRadio:u,selectedRowKeys:d,currentSelectedRowKeys:h,handleSelectAll:b=>{const x=df(d.value,a.value,!b);c.value=x,n("selectAll",b),n("selectionChange",x),n("update:selectedKeys",x)},handleSelect:(b,x)=>{const S=u.value?[x.key]:df(d.value,[x.key],!b);c.value=S,n("select",S,x.key,x.raw),n("selectionChange",S),n("update:selectedKeys",S)},handleSelectAllLeafs:(b,x)=>{const S=df(d.value,BP(b),!x);c.value=S,n("select",S,b.key,b.raw),n("selectionChange",S),n("update:selectedKeys",S)},select:(b,x=!0)=>{const S=[].concat(b),w=u.value?S:df(d.value,S,!x);c.value=w,n("selectionChange",w),n("update:selectedKeys",w)},selectAll:(b=!0)=>{const x=df(d.value,a.value,!b);c.value=x,n("selectionChange",x),n("update:selectedKeys",x)},clearSelected:()=>{c.value=[],n("selectionChange",[]),n("update:selectedKeys",[])}}},fLe=({expandedKeys:e,defaultExpandedKeys:t,defaultExpandAllRows:i,expandable:r,allRowKeys:a,emit:n})=>{const o=ie((()=>{var h,p;return t.value?t.value:(h=r.value)!=null&&h.defaultExpandedRowKeys?r.value.defaultExpandedRowKeys:i.value||(p=r.value)!=null&&p.defaultExpandAllRows?[...a.value]:[]})()),l=T(()=>{var h,p,f;return(f=(p=e.value)!=null?p:(h=r.value)==null?void 0:h.expandedRowKeys)!=null?f:o.value});return{expandedRowKeys:l,handleExpand:(h,p)=>{const v=l.value.includes(h)?l.value.filter(m=>h!==m):l.value.concat(h);o.value=v,n("expand",h,p),n("expandedChange",v),n("update:expandedKeys",v)},expand:(h,p=!0)=>{const f=[].concat(h),v=p?l.value.concat(f):l.value.filter(m=>!f.includes(m));o.value=v,n("expandedChange",v),n("update:expandedKeys",v)},expandAll:(h=!0)=>{const p=h?[...a.value]:[];o.value=p,n("expandedChange",p),n("update:expandedKeys",p)}}},mLe=(e,t)=>{var i,r;const a=ie(ki(e.pagination)&&(i=e.pagination.defaultCurrent)!=null?i:1),n=ie(ki(e.pagination)&&(r=e.pagination.defaultPageSize)!=null?r:10),s=T(()=>{var c;return ki(e.pagination)&&(c=e.pagination.pageSize)!=null?c:n.value});return{page:T(()=>{var c;return ki(e.pagination)&&(c=e.pagination.current)!=null?c:a.value}),pageSize:s,handlePageChange:c=>{a.value=c,t("pageChange",c)},handlePageSizeChange:c=>{n.value=c,t("pageSizeChange",c)}}},vLe=se({name:"ColGroup",props:{dataColumns:{type:Array,required:!0},operations:{type:Array,required:!0},columnWidth:{type:Object}},setup(){return{fixedWidth:(t,i)=>{if(t){const r=Math.max(t,i||0);return{width:`${t}px`,minWidth:`${r}px`,maxWidth:`${t}px`}}if(i)return{minWidth:`${i}px`}}}}});function gLe(e,t,i,r,a,n){return N(),ee("colgroup",null,[(N(!0),ee(Xt,null,Br(e.operations,s=>(N(),ee("col",{key:`arco-col-${s.name}`,class:Y(`arco-table-${s.name}-col`),style:It(e.fixedWidth(s.width))},null,6))),128)),(N(!0),ee(Xt,null,Br(e.dataColumns,s=>(N(),ee("col",{key:`arco-col-${s.dataIndex}`,style:It(e.fixedWidth(e.columnWidth&&s.dataIndex&&e.columnWidth[s.dataIndex]||s.width,s.minWidth))},null,4))),128))])}var Lg=We(vLe,[["render",gLe]]),Kf=se({name:"Thead",setup(e,{slots:t}){return()=>{var i,r;return _((r=(i=t.thead)==null?void 0:i.call(t)[0])!=null?r:"thead",null,{default:t.default})}}}),Zf=se({name:"Tbody",setup(e,{slots:t}){return()=>{var i,r;return _((r=(i=t.tbody)==null?void 0:i.call(t)[0])!=null?r:"tbody",null,{default:t.default})}}}),Gl=se({name:"Tr",props:{expand:{type:Boolean},empty:{type:Boolean},checked:{type:Boolean},rowIndex:Number,record:{type:Object,default:()=>({})}},setup(e,{slots:t}){const i=Se("table"),r=T(()=>[`${i}-tr`,{[`${i}-tr-expand`]:e.expand,[`${i}-tr-empty`]:e.empty,[`${i}-tr-checked`]:e.checked}]);return()=>{var a,n,s;return _((s=(n=t.tr)==null?void 0:n.call(t,{rowIndex:e.rowIndex,record:(a=e.record)==null?void 0:a.raw})[0])!=null?s:"tr",{class:r.value},{default:t.default})}}});const yLe=se({name:"IconCaretDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-caret-down`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),bLe=["stroke-width","stroke-linecap","stroke-linejoin"],wLe=ve("path",{d:"M24.938 34.829a1.2 1.2 0 0 1-1.875 0L9.56 17.949c-.628-.785-.069-1.949.937-1.949h27.007c1.006 0 1.565 1.164.937 1.95L24.937 34.829Z",fill:"currentColor",stroke:"none"},null,-1),xLe=[wLe];function SLe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},xLe,14,bLe)}var GC=We(yLe,[["render",SLe]]);const Zj=Object.assign(GC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+GC.name,GC)}}),CLe=se({name:"IconCaretUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-caret-up`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),_Le=["stroke-width","stroke-linecap","stroke-linejoin"],MLe=ve("path",{d:"M23.063 13.171a1.2 1.2 0 0 1 1.875 0l13.503 16.88c.628.785.069 1.949-.937 1.949H10.497c-1.006 0-1.565-1.164-.937-1.95l13.503-16.879Z",fill:"currentColor",stroke:"none"},null,-1),ELe=[MLe];function ALe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},ELe,14,_Le)}var qC=We(CLe,[["render",ALe]]);const PLe=Object.assign(qC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+qC.name,qC)}}),TLe=se({name:"IconFilter",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-filter`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),kLe=["stroke-width","stroke-linecap","stroke-linejoin"],OLe=ve("path",{d:"M30 42V22.549a1 1 0 0 1 .463-.844l10.074-6.41A1 1 0 0 0 41 14.45V8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v6.451a1 1 0 0 0 .463.844l10.074 6.41a1 1 0 0 1 .463.844V37"},null,-1),DLe=[OLe];function ILe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},DLe,14,kLe)}var YC=We(TLe,[["render",ILe]]);const LLe=Object.assign(YC,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+YC.name,YC)}}),BLe=({column:e,tableCtx:t})=>{const i=T(()=>{var u;if(e.value.dataIndex&&e.value.dataIndex===((u=t.sorter)==null?void 0:u.field))return t.sorter.direction}),r=T(()=>{var u,c,d;return(d=(c=(u=e.value)==null?void 0:u.sortable)==null?void 0:c.sortDirections)!=null?d:[]}),a=T(()=>r.value.length>0),n=T(()=>r.value.includes("ascend")),s=T(()=>r.value.includes("descend")),o=T(()=>{var u,c;return i.value?i.value===r.value[0]&&(c=r.value[1])!=null?c:"":(u=r.value[0])!=null?u:""});return{sortOrder:i,hasSorter:a,hasAscendBtn:n,hasDescendBtn:s,nextSortOrder:o,handleClickSorter:u=>{var c;e.value.dataIndex&&((c=t.onSorterChange)==null||c.call(t,e.value.dataIndex,o.value,u))}}},zLe=({column:e,tableCtx:t})=>{const i=T(()=>{var p;return e.value.dataIndex&&((p=t.filters)!=null&&p[e.value.dataIndex])?t.filters[e.value.dataIndex]:[]}),r=ie(!1),a=T(()=>i.value.length>0),n=T(()=>{var p;return!!((p=e.value.filterable)!=null&&p.multiple)}),s=ie(i.value);Vt(i,p=>{bi(p)&&String(p)!==String(s.value)&&(s.value=p)});const o=p=>{r.value=p},l=p=>{s.value=p};return{filterPopupVisible:r,isFilterActive:a,isMultipleFilter:n,columnFilterValue:s,handleFilterPopupVisibleChange:o,setFilterValue:l,handleCheckboxFilterChange:p=>{l(p)},handleRadioFilterChange:p=>{l([p])},handleFilterConfirm:p=>{var f;e.value.dataIndex&&((f=t.onFilterChange)==null||f.call(t,e.value.dataIndex,s.value,p)),o(!1)},handleFilterReset:p=>{var f;l([]),e.value.dataIndex&&((f=t.onFilterChange)==null||f.call(t,e.value.dataIndex,s.value,p)),o(!1)}}},Dp=Symbol("ArcoTable"),cB=Symbol("ArcoTableColumn");function dB(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var Qj=se({name:"AutoTooltip",inheritAttrs:!1,props:{tooltipProps:{type:Object}},setup(e,{attrs:t,slots:i}){const r=Se("auto-tooltip"),a=ie(),n=ie(),s=ie(""),o=ie(!1),l=()=>{if(a.value&&n.value){const h=n.value.offsetWidth>a.value.offsetWidth;h!==o.value&&(o.value=h)}},u=()=>{var h;(h=n.value)!=null&&h.textContent&&n.value.textContent!==s.value&&(s.value=n.value.textContent)},c=()=>{u(),l()};xi(()=>{u(),l()}),Ss(()=>{u(),l()});const d=()=>_("span",it({ref:a,class:r},t),[_(oc,{onResize:c},{default:()=>{var h;return[_("span",{ref:n,class:`${r}-content`},[(h=i.default)==null?void 0:h.call(i)])]}})]);return()=>{let h;if(o.value){let p;return _(eo,it({content:s.value,onResize:c},e.tooltipProps),dB(p=d())?p:{default:()=>[p]})}return _(oc,{onResize:c},dB(h=d())?h:{default:()=>[h]})}}}),RLe=Object.defineProperty,hB=Object.getOwnPropertySymbols,NLe=Object.prototype.hasOwnProperty,VLe=Object.prototype.propertyIsEnumerable,pB=(e,t,i)=>t in e?RLe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,XC=(e,t)=>{for(var i in t||(t={}))NLe.call(t,i)&&pB(e,i,t[i]);if(hB)for(var i of hB(t))VLe.call(t,i)&&pB(e,i,t[i]);return e};function KC(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var Qf=se({name:"Th",props:{column:{type:Object,default:()=>({})},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},resizable:Boolean},setup(e,{slots:t}){const{column:i}=yt(e),r=Se("table"),{t:a}=Yr(),n=Ai(Dp,{}),s=T(()=>{var z;return((z=e.column)==null?void 0:z.dataIndex)&&n.resizingColumn===e.column.dataIndex}),o=T(()=>{var z;if(ki((z=e.column)==null?void 0:z.tooltip))return e.column.tooltip}),l=T(()=>{var z;return(z=e.column)!=null&&z.filterable&&jn(e.column.filterable.alignLeft)?e.column.filterable.alignLeft:n.filterIconAlignLeft}),{sortOrder:u,hasSorter:c,hasAscendBtn:d,hasDescendBtn:h,nextSortOrder:p,handleClickSorter:f}=BLe({column:i,tableCtx:n}),{filterPopupVisible:v,isFilterActive:m,isMultipleFilter:g,columnFilterValue:y,handleFilterPopupVisibleChange:b,setFilterValue:x,handleCheckboxFilterChange:S,handleRadioFilterChange:w,handleFilterConfirm:E,handleFilterReset:M}=zLe({column:i,tableCtx:n}),P=()=>{var z,B,W,R,$;let q,Z;const{filterable:G}=e.column;return(z=e.column.slots)!=null&&z["filter-content"]?(B=e.column.slots)==null?void 0:B["filter-content"]({filterValue:y.value,setFilterValue:x,handleFilterConfirm:E,handleFilterReset:M}):G?.slotName?(R=(W=n?.slots)==null?void 0:W[G?.slotName])==null?void 0:R.call(W,{filterValue:y.value,setFilterValue:x,handleFilterConfirm:E,handleFilterReset:M}):G?.renderContent?G.renderContent({filterValue:y.value,setFilterValue:x,handleFilterConfirm:E,handleFilterReset:M}):_("div",{class:`${r}-filters-content`},[_("ul",{class:`${r}-filters-list`},[($=G?.filters)==null?void 0:$.map((X,J)=>{var pe;return _("li",{class:`${r}-filters-item`,key:J},[g.value?_(Eo,{value:X.value,modelValue:y.value,uninjectGroupContext:!0,onChange:S},{default:()=>[X.text]}):_(sp,{value:X.value,modelValue:(pe=y.value[0])!=null?pe:"",uninjectGroupContext:!0,onChange:w},{default:()=>[X.text]})])})]),_("div",{class:`${r}-filters-bottom`},[_(un,{size:"mini",onClick:M},KC(q=a("table.resetText"))?q:{default:()=>[q]}),_(un,{type:"primary",size:"mini",onClick:E},KC(Z=a("table.okText"))?Z:{default:()=>[Z]})])])},A=()=>{const{filterable:z}=e.column;return z?_($a,it({popupVisible:v.value,trigger:"click",autoFitPosition:!0,popupOffset:l.value?4:0,onPopupVisibleChange:b},z.triggerProps),{default:()=>[_(Ur,{class:[`${r}-filters`,{[`${r}-filters-active`]:m.value,[`${r}-filters-open`]:v.value,[`${r}-filters-align-left`]:l.value}],disabled:!l.value,onClick:B=>B.stopPropagation()},{default:()=>{var B,W,R,$,q;return[(q=($=(W=(B=e.column.slots)==null?void 0:B["filter-icon"])==null?void 0:W.call(B))!=null?$:(R=z.icon)==null?void 0:R.call(z))!=null?q:_(LLe,null,null)]}})],content:P}):null},k=T(()=>{var z,B;const W=[`${r}-cell`,`${r}-cell-align-${(B=(z=e.column)==null?void 0:z.align)!=null?B:e.column.children?"center":"left"}`];return c.value&&W.push(`${r}-cell-with-sorter`,{[`${r}-cell-next-ascend`]:p.value==="ascend",[`${r}-cell-next-descend`]:p.value==="descend"}),l.value&&W.push(`${r}-cell-with-filter`),W}),I=()=>{var z,B,W,R,$,q;return t.default?t.default():(z=e.column)!=null&&z.titleSlotName&&((B=n.slots)!=null&&B[e.column.titleSlotName])?(R=(W=n.slots)[e.column.titleSlotName])==null?void 0:R.call(W,{column:e.column}):(q=($=e.column)==null?void 0:$.slots)!=null&&q.title?e.column.slots.title():Zt(e.column.title)?e.column.title():e.column.title},O=()=>{var z,B,W;let R;return _("span",{class:k.value,onClick:c.value?f:void 0},[(z=e.column)!=null&&z.ellipsis&&((B=e.column)!=null&&B.tooltip)?_(Qj,{class:`${r}-th-title`,tooltipProps:o.value},KC(R=I())?R:{default:()=>[R]}):_("span",{class:[`${r}-th-title`,{[`${r}-text-ellipsis`]:(W=e.column)==null?void 0:W.ellipsis}]},[I()]),c.value&&_("span",{class:`${r}-sorter`},[d.value&&_("div",{class:[`${r}-sorter-icon`,{[`${r}-sorter-icon-active`]:u.value==="ascend"}]},[_(PLe,null,null)]),h.value&&_("div",{class:[`${r}-sorter-icon`,{[`${r}-sorter-icon-active`]:u.value==="descend"}]},[_(Zj,null,null)])]),l.value&&A()])},D=T(()=>{var z,B;return XC(XC(XC({},qj(e.column,{dataColumns:e.dataColumns,operations:e.operations})),(z=e.column)==null?void 0:z.cellStyle),(B=e.column)==null?void 0:B.headerCellStyle)}),F=T(()=>{var z,B;return[`${r}-th`,{[`${r}-col-sorted`]:!!u.value,[`${r}-th-resizing`]:s.value},...Gj(r,e.column),(z=e.column)==null?void 0:z.cellClass,(B=e.column)==null?void 0:B.headerCellClass]}),U=z=>{var B,W,R;(B=e.column)!=null&&B.dataIndex&&((R=n.onThMouseDown)==null||R.call(n,(W=e.column)==null?void 0:W.dataIndex,z))};return()=>{var z,B,W,R;const $=(z=e.column.colSpan)!=null?z:1,q=(B=e.column.rowSpan)!=null?B:1;return _((R=(W=t.th)==null?void 0:W.call(t,{column:e.column})[0])!=null?R:"th",{class:F.value,style:D.value,colspan:$>1?$:void 0,rowspan:q>1?q:void 0},{default:()=>[O(),!l.value&&A(),e.resizable&&_("span",{class:`${r}-column-handle`,onMousedown:U},null)]})}}}),FLe=Object.defineProperty,fB=Object.getOwnPropertySymbols,jLe=Object.prototype.hasOwnProperty,$Le=Object.prototype.propertyIsEnumerable,mB=(e,t,i)=>t in e?FLe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ZC=(e,t)=>{for(var i in t||(t={}))jLe.call(t,i)&&mB(e,i,t[i]);if(fB)for(var i of fB(t))$Le.call(t,i)&&mB(e,i,t[i]);return e};function ULe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var ec=se({name:"Td",props:{rowIndex:Number,record:{type:Object,default:()=>({})},column:{type:Object,default:()=>({})},type:{type:String,default:"normal"},operations:{type:Array,default:()=>[]},dataColumns:{type:Array,default:()=>[]},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},isFixedExpand:{type:Boolean,default:!1},containerWidth:{type:Number},showExpandBtn:{type:Boolean,default:!1},indentSize:{type:Number,default:0},renderExpandBtn:{type:Function},summary:{type:Boolean,default:!1}},setup(e,{slots:t}){const i=Se("table"),r=T(()=>{var m;if(ki((m=e.column)==null?void 0:m.tooltip))return e.column.tooltip}),a=T(()=>{var m,g;return((m=e.column)==null?void 0:m.dataIndex)&&((g=d.sorter)==null?void 0:g.field)===e.column.dataIndex}),n=T(()=>{var m;return((m=e.column)==null?void 0:m.dataIndex)&&d.resizingColumn===e.column.dataIndex}),s=()=>{var m,g,y,b,x,S;return e.summary?Zt((m=e.column)==null?void 0:m.summaryCellClass)?e.column.summaryCellClass((g=e.record)==null?void 0:g.raw):(y=e.column)==null?void 0:y.summaryCellClass:Zt((b=e.column)==null?void 0:b.bodyCellClass)?e.column.bodyCellClass((x=e.record)==null?void 0:x.raw):(S=e.column)==null?void 0:S.bodyCellClass},o=T(()=>{var m;return[`${i}-td`,{[`${i}-col-sorted`]:a.value,[`${i}-td-resizing`]:n.value},...Gj(i,e.column),(m=e.column)==null?void 0:m.cellClass,s()]}),l=()=>{var m,g,y,b,x,S;return e.summary?Zt((m=e.column)==null?void 0:m.summaryCellStyle)?e.column.summaryCellStyle((g=e.record)==null?void 0:g.raw):(y=e.column)==null?void 0:y.summaryCellStyle:Zt((b=e.column)==null?void 0:b.bodyCellStyle)?e.column.bodyCellStyle((x=e.record)==null?void 0:x.raw):(S=e.column)==null?void 0:S.bodyCellStyle},u=T(()=>{var m;const g=qj(e.column,{dataColumns:e.dataColumns,operations:e.operations}),y=l();return ZC(ZC(ZC({},g),(m=e.column)==null?void 0:m.cellStyle),y)}),c=T(()=>{if(e.isFixedExpand&&e.containerWidth)return{width:`${e.containerWidth}px`}}),d=Ai(Dp,{}),h=()=>{var m,g,y,b,x,S,w,E;if(t.default)return t.default();const M={record:(m=e.record)==null?void 0:m.raw,column:e.column,rowIndex:(g=e.rowIndex)!=null?g:-1};return t.cell?t.cell(M):(y=e.column.slots)!=null&&y.cell?e.column.slots.cell(M):e.column.render?e.column.render(M):e.column.slotName&&((b=d.slots)!=null&&b[e.column.slotName])?(S=(x=d.slots)[e.column.slotName])==null?void 0:S.call(x,M):String((E=ad((w=e.record)==null?void 0:w.raw,e.column.dataIndex))!=null?E:"")},p=ie(!1),f=m=>{var g,y;Zt(d.loadMore)&&!((g=e.record)!=null&&g.isLeaf)&&!((y=e.record)!=null&&y.children)&&(p.value=!0,new Promise(b=>{var x;(x=d.loadMore)==null||x.call(d,e.record.raw,b)}).then(b=>{var x;(x=d.addLazyLoadData)==null||x.call(d,b,e.record),p.value=!1})),m.stopPropagation()},v=()=>{var m,g,y,b,x,S;let w;return _("span",{class:[`${i}-cell`,`${i}-cell-align-${(g=(m=e.column)==null?void 0:m.align)!=null?g:"left"}`,{[`${i}-cell-fixed-expand`]:e.isFixedExpand,[`${i}-cell-expand-icon`]:e.showExpandBtn}],style:c.value},[e.indentSize>0&&_("span",{style:{paddingLeft:`${e.indentSize}px`}},null),e.showExpandBtn&&_("span",{class:`${i}-cell-inline-icon`,onClick:f},[p.value?_($n,null,null):(y=e.renderExpandBtn)==null?void 0:y.call(e,e.record,!1)]),(b=e.column)!=null&&b.ellipsis&&((x=e.column)!=null&&x.tooltip)?_(Qj,{class:`${i}-td-content`,tooltipProps:r.value},ULe(w=h())?w:{default:()=>[w]}):_("span",{class:[`${i}-td-content`,{[`${i}-text-ellipsis`]:(S=e.column)==null?void 0:S.ellipsis}]},[h()])])};return()=>{var m,g,y,b;return _((b=(y=t.td)==null?void 0:y.call(t,{record:(m=e.record)==null?void 0:m.raw,column:e.column,rowIndex:(g=e.rowIndex)!=null?g:-1})[0])!=null?b:"td",{class:o.value,style:u.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},{default:()=>[v()]})}}}),WLe=se({name:"OperationTh",props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},rowSpan:{type:Number,default:1},selectAll:{type:Boolean,default:!1}},setup(e){const t=Se("table"),i=Ai(Dp,{}),r=T(()=>{var o,l,u,c;let d=!1,h=!1;const f=((l=(o=i.currentSelectedRowKeys)==null?void 0:o.filter(m=>{var g,y;return(y=(g=i.currentAllEnabledRowKeys)==null?void 0:g.includes(m))!=null?y:!0}))!=null?l:[]).length,v=(c=(u=i.currentAllEnabledRowKeys)==null?void 0:u.length)!=null?c:0;return f>0&&(f>=v?d=!0:h=!0),{checked:d,indeterminate:h}}),a=()=>e.selectAll?_(Eo,{modelValue:r.value.checked,indeterminate:r.value.indeterminate,uninjectGroupContext:!0,onChange:o=>{var l;(l=i.onSelectAll)==null||l.call(i,o)}},{default:Zt(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title}):e.operationColumn.title?Zt(e.operationColumn.title)?e.operationColumn.title():e.operationColumn.title:null,n=T(()=>Yj(e.operationColumn,e.operations)),s=T(()=>[`${t}-th`,`${t}-operation`,{[`${t}-checkbox`]:e.selectAll},...Hj(t,e.operationColumn)]);return()=>_("th",{class:s.value,style:n.value,rowspan:e.rowSpan>1?e.rowSpan:void 0},[_("span",{class:`${t}-cell`},[a()])])}}),vB=se({name:"OperationTd",components:{Checkbox:Eo,Radio:sp,IconPlus:op,IconMinus:wP},props:{operationColumn:{type:Object,required:!0},operations:{type:Array,required:!0},record:{type:Object,required:!0},hasExpand:{type:Boolean,default:!1},selectedRowKeys:{type:Array},renderExpandBtn:{type:Function},colSpan:{type:Number,default:1},rowSpan:{type:Number,default:1},summary:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t,slots:i}){const r=Se("table"),a=Ai(Dp,{}),n=T(()=>Yj(e.operationColumn,e.operations)),s=T(()=>[`${r}-td`,`${r}-operation`,{[`${r}-checkbox`]:e.operationColumn.name==="selection-checkbox",[`${r}-radio`]:e.operationColumn.name==="selection-radio",[`${r}-expand`]:e.operationColumn.name==="expand",[`${r}-drag-handle`]:e.operationColumn.name==="drag-handle"},...Hj(r,e.operationColumn)]),o=T(()=>BP(e.record)),l=T(()=>{var c;return dLe((c=a.currentSelectedRowKeys)!=null?c:[],o.value)}),u=()=>{var c,d,h,p,f,v;if(e.summary)return null;if(e.operationColumn.render)return e.operationColumn.render(e.record.raw);if(e.operationColumn.name==="selection-checkbox"){const m=e.record.key;return!a.checkStrictly&&!e.record.isLeaf?_(Eo,{modelValue:l.value.checked,indeterminate:l.value.indeterminate,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:g=>{var y;return(y=a.onSelectAllLeafs)==null?void 0:y.call(a,e.record,g)},onClick:g=>g.stopPropagation()},null):_(Eo,{modelValue:(d=(c=e.selectedRowKeys)==null?void 0:c.includes(m))!=null?d:!1,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:g=>{var y;return(y=a.onSelect)==null?void 0:y.call(a,g,e.record)},onClick:g=>g.stopPropagation()},null)}if(e.operationColumn.name==="selection-radio"){const m=e.record.key;return _(sp,{modelValue:(p=(h=e.selectedRowKeys)==null?void 0:h.includes(m))!=null?p:!1,disabled:!!e.record.disabled,uninjectGroupContext:!0,onChange:g=>{var y;return(y=a.onSelect)==null?void 0:y.call(a,g,e.record)},onClick:g=>g.stopPropagation()},null)}return e.operationColumn.name==="expand"?e.hasExpand&&e.renderExpandBtn?e.renderExpandBtn(e.record):null:e.operationColumn.name==="drag-handle"?(v=(f=i["drag-handle-icon"])==null?void 0:f.call(i))!=null?v:_(AP,null,null):null};return()=>_("td",{class:s.value,style:n.value,rowspan:e.rowSpan>1?e.rowSpan:void 0,colspan:e.colSpan>1?e.colSpan:void 0},[_("span",{class:`${r}-cell`},[u()])])}});const HLe=e=>{const t=T(()=>{if(e.value)return e.value.type==="handle"?"handle":"row"}),i=gt({dragging:!1,sourceKey:"",sourcePath:[],targetPath:[],data:{}}),r=()=>{i.dragging=!1,i.sourceKey="",i.sourcePath=[],i.targetPath=[],i.data={}};return{dragType:t,dragState:i,handleDragStart:(c,d,h,p)=>{if(c.dataTransfer&&(c.dataTransfer.effectAllowed="move",c.target&&c.target.tagName==="TD")){const{parentElement:f}=c.target;f&&f.tagName==="TR"&&c.dataTransfer.setDragImage(f,0,0)}i.dragging=!0,i.sourceKey=d,i.sourcePath=h,i.targetPath=[...h],i.data=p},handleDragEnter:(c,d)=>{c.dataTransfer&&(c.dataTransfer.dropEffect="move"),i.targetPath.toString()!==d.toString()&&(i.targetPath=d),c.preventDefault()},handleDragLeave:c=>{},handleDragover:c=>{c.dataTransfer&&(c.dataTransfer.dropEffect="move"),c.preventDefault()},handleDragEnd:c=>{var d;((d=c.dataTransfer)==null?void 0:d.dropEffect)==="none"&&r()},handleDrop:c=>{r(),c.preventDefault()}}},GLe=(e,t)=>{const i=ie(""),r=gt({}),a=(o,l)=>{l.preventDefault(),i.value=o,wr(window,"mousemove",s),wr(window,"mouseup",n),wr(window,"contextmenu",n)},n=()=>{i.value="",Ir(window,"mousemove",s),Ir(window,"mouseup",n),Ir(window,"contextmenu",n)},s=o=>{const l=e.value[i.value];if(l){const{clientX:u}=o,{x:c}=l.getBoundingClientRect();let d=Math.ceil(u-c);d<40&&(d=40),r[i.value]=d,t("columnResize",i.value,d)}};return{resizingColumn:i,columnWidth:r,handleThMouseDown:a,handleThMouseUp:n}},qLe=({columns:e,onFilterChange:t})=>{const i=ie(gB(e.value));Vt(e,s=>{const o=gB(s);Pp(o,i.value)||(i.value=o)});const r=T(()=>{var s,o;const l={};for(const u of e.value)if(u.dataIndex){const c=(o=(s=u.filterable)==null?void 0:s.filteredValue)!=null?o:i.value[u.dataIndex];c&&(l[u.dataIndex]=c)}return l});return{_filters:i,computedFilters:r,resetFilters:s=>{var o;const l=s?[].concat(s):[],u={};for(const c of e.value)if(c.dataIndex&&c.filterable&&(l.length===0||l.includes(c.dataIndex))){const d=(o=c.filterable.defaultFilteredValue)!=null?o:[];u[c.dataIndex]=d,t(c.dataIndex,d)}i.value=u},clearFilters:s=>{const o=s?[].concat(s):[],l={};for(const u of e.value)if(u.dataIndex&&u.filterable&&(o.length===0||o.includes(u.dataIndex))){const c=[];l[u.dataIndex]=c,t(u.dataIndex,c)}i.value=l}}},gB=e=>{var t;const i={};for(const r of e)r.dataIndex&&((t=r.filterable)!=null&&t.defaultFilteredValue)&&(i[r.dataIndex]=r.filterable.defaultFilteredValue);return i},YLe=({columns:e,onSorterChange:t})=>{const i=ie(yB(e.value));Vt(e,s=>{const o=yB(s);Pp(o,i.value)||(i.value=o)});const r=T(()=>{var s;for(const o of e.value)if(o.dataIndex&&o.sortable){const l=na(o.sortable.sortOrder)?o.sortable.sortOrder:((s=i.value)==null?void 0:s.field)===o.dataIndex?i.value.direction:"";if(l)return{field:o.dataIndex,direction:l}}});return{_sorter:i,computedSorter:r,resetSorters:()=>{var s;let o;for(const l of e.value)l.dataIndex&&l.sortable&&(!o&&l.sortable.defaultSortOrder&&(o={field:l.dataIndex,direction:l.sortable.defaultSortOrder}),t(l.dataIndex,(s=l.sortable.defaultSortOrder)!=null?s:""));i.value=o},clearSorters:()=>{for(const s of e.value)s.dataIndex&&s.sortable&&t(s.dataIndex,"")}}},yB=e=>{var t;for(const i of e)if(i.dataIndex&&((t=i.sortable)!=null&&t.defaultSortOrder))return{field:i.dataIndex,direction:i.sortable.defaultSortOrder}},bB=({spanMethod:e,data:t,columns:i})=>{const r=(o,l)=>{o?.forEach((u,c)=>{var d;u.hasSubtree&&((d=u.children)!=null&&d.length)&&r(u.children||[],l),i.value.forEach((h,p)=>{var f,v;const{rowspan:m=1,colspan:g=1}=(v=(f=e.value)==null?void 0:f.call(e,{record:u.raw,column:h,rowIndex:c,columnIndex:p}))!=null?v:{};(m>1||g>1)&&(l[`${c}-${p}-${u.key}`]=[m,g],Array.from({length:m}).forEach((y,b)=>{var x;if(c+b<o.length){const{key:S}=(x=o[c+b])!=null?x:{};Array.from({length:g}).forEach((w,E)=>{p+E<i.value.length&&`${c}-${p}-${u.key}`!=`${c+b}-${p+E}-${S}`&&(a.value[`${c+b}-${p+E}-${S}`]=[0,0])})}}))})})};let a=ie({});const n=T(()=>{const o={};return a.value={},e.value&&r(t.value,o),o}),s=T(()=>{const o=[];for(const l of Object.keys(a.value))o.push(l);return o});return{tableSpan:n,removedCells:s}};var XLe=Object.defineProperty,KLe=Object.defineProperties,ZLe=Object.getOwnPropertyDescriptors,wB=Object.getOwnPropertySymbols,QLe=Object.prototype.hasOwnProperty,JLe=Object.prototype.propertyIsEnumerable,xB=(e,t,i)=>t in e?XLe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Bu=(e,t)=>{for(var i in t||(t={}))QLe.call(t,i)&&xB(e,i,t[i]);if(wB)for(var i of wB(t))JLe.call(t,i)&&xB(e,i,t[i]);return e},QC=(e,t)=>KLe(e,ZLe(t));function e5e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}const SB={wrapper:!0,cell:!1,headerCell:!1,bodyCell:!1};var JC=se({name:"Table",props:{columns:{type:Array,default:()=>[]},data:{type:Array,default:()=>[]},bordered:{type:[Boolean,Object],default:!0},hoverable:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},size:{type:String,default:()=>{var e,t;return(t=(e=Ai(Pn,void 0))==null?void 0:e.size)!=null?t:"large"}},tableLayoutFixed:{type:Boolean,default:!1},loading:{type:[Boolean,Object],default:!1},rowSelection:{type:Object},expandable:{type:Object},scroll:{type:Object},pagination:{type:[Boolean,Object],default:!0},pagePosition:{type:String,default:"br"},indentSize:{type:Number,default:16},rowKey:{type:String,default:"key"},showHeader:{type:Boolean,default:!0},virtualListProps:{type:Object},spanMethod:{type:Function},spanAll:{type:Boolean,default:!1},components:{type:Object},loadMore:{type:Function},filterIconAlignLeft:{type:Boolean,default:!1},hideExpandButtonOnEmpty:{type:Boolean,default:!1},rowClass:{type:[String,Array,Object,Function]},draggable:{type:Object},rowNumber:{type:[Boolean,Object]},columnResizable:{type:Boolean},summary:{type:[Boolean,Function]},summaryText:{type:String,default:"Summary"},summarySpanMethod:{type:Function},selectedKeys:{type:Array},defaultSelectedKeys:{type:Array},expandedKeys:{type:Array},defaultExpandedKeys:{type:Array},defaultExpandAllRows:{type:Boolean,default:!1},stickyHeader:{type:[Boolean,Number],default:!1},scrollbar:{type:[Object,Boolean],default:!0},showEmptyTree:{type:Boolean,default:!1}},emits:{"update:selectedKeys":e=>!0,"update:expandedKeys":e=>!0,expand:(e,t)=>!0,expandedChange:e=>!0,select:(e,t,i)=>!0,selectAll:e=>!0,selectionChange:e=>!0,sorterChange:(e,t)=>!0,filterChange:(e,t)=>!0,pageChange:e=>!0,pageSizeChange:e=>!0,change:(e,t,i)=>!0,cellMouseEnter:(e,t,i)=>!0,cellMouseLeave:(e,t,i)=>!0,cellClick:(e,t,i)=>!0,rowClick:(e,t)=>!0,headerClick:(e,t)=>!0,columnResize:(e,t)=>!0,rowDblclick:(e,t)=>!0,cellDblclick:(e,t,i)=>!0,rowContextmenu:(e,t)=>!0,cellContextmenu:(e,t,i)=>!0},setup(e,{emit:t,slots:i}){const{columns:r,rowKey:a,rowSelection:n,expandable:s,loadMore:o,filterIconAlignLeft:l,selectedKeys:u,defaultSelectedKeys:c,expandedKeys:d,defaultExpandedKeys:h,defaultExpandAllRows:p,spanMethod:f,draggable:v,summarySpanMethod:m,scrollbar:g,showEmptyTree:y}=yt(e),b=Se("table"),x=Ai(Pn,void 0),S=T(()=>ki(e.bordered)?Bu(Bu({},SB),e.bordered):QC(Bu({},SB),{wrapper:e.bordered})),{children:w,components:E}=Zm("TableColumn"),M=T(()=>{var _e,$e;return($e=(_e=n.value)==null?void 0:_e.checkStrictly)!=null?$e:!0}),{displayScrollbar:P,scrollbarProps:A}=l1(g),k=T(()=>{var _e,$e,Ct,Nt;const ai=!!((_e=e.scroll)!=null&&_e.x||($e=e.scroll)!=null&&$e.minWidth),qt=!!((Ct=e.scroll)!=null&&Ct.y||(Nt=e.scroll)!=null&&Nt.maxHeight);return{x:ai,y:qt}}),I=ie(),O=ie({}),{componentRef:D,elementRef:F}=Sh("containerRef"),{componentRef:U,elementRef:z}=Sh("containerRef"),{componentRef:B,elementRef:W}=Sh("viewportRef"),{componentRef:R,elementRef:$}=Sh("containerRef"),q=T(()=>Z.value?dt.value?W.value:z.value:F.value),Z=T(()=>k.value.y||e.stickyHeader||dt.value||k.value.x&&ui.value.length===0),G=gt(new Map),X=ie();Vt([E,G],([_e,$e])=>{if(_e.length>0){const Ct=[];_e.forEach(Nt=>{const ai=$e.get(Nt);ai&&Ct.push(ai)}),X.value=Ct}else X.value=void 0});const J=new Map,pe=ie([]),fe=ie([]),{resizingColumn:de,columnWidth:ge,handleThMouseDown:me}=GLe(O,t);Vt([r,X,ge],([_e,$e])=>{var Ct;const Nt=sLe((Ct=$e??_e)!=null?Ct:[],J,ge);pe.value=Nt.dataColumns,fe.value=Nt.groupColumns},{immediate:!0,deep:!0});const ke=T(()=>["tl","top","tr"].includes(e.pagePosition)),ce=ie(!1),le=ie(!1),xe=ie(!1);on(()=>{var _e,$e,Ct;let Nt=!1,ai=!1,qt=!1;((_e=e.rowSelection)!=null&&_e.fixed||($e=e.expandable)!=null&&$e.fixed||(Ct=e.draggable)!=null&&Ct.fixed)&&(Nt=!0);for(const si of pe.value)si.fixed==="left"?(Nt=!0,qt=!0):si.fixed==="right"&&(ai=!0);Nt!==ce.value&&(ce.value=Nt),ai!==le.value&&(le.value=ai),qt!==xe.value&&(xe.value=qt)});const Ne=T(()=>{for(const _e of pe.value)if(_e.ellipsis)return!0;return!1}),pt=_e=>{const $e={type:_e,page:bt.value,pageSize:ci.value,sorter:ft.value,filters:xt.value,dragTarget:_e==="drag"?Ci.data:void 0};t("change",Hi.value,$e,et.value)},at=(_e,$e)=>{Ye.value=QC(Bu({},xt.value),{[_e]:$e}),t("filterChange",_e,$e),pt("filter")},Oe=(_e,$e)=>{ze.value=$e?{field:_e,direction:$e}:void 0,t("sorterChange",_e,$e),pt("sorter")},{_filters:Ye,computedFilters:xt,resetFilters:ne,clearFilters:K}=qLe({columns:pe,onFilterChange:at}),{_sorter:ze,computedSorter:ft,resetSorters:te,clearSorters:Pe}=YLe({columns:pe,onSorterChange:Oe}),Te=new Set,Be=T(()=>{const _e=[];Te.clear();const $e=Ct=>{if(bi(Ct)&&Ct.length>0)for(const Nt of Ct)_e.push(Nt[a.value]),Nt.disabled&&Te.add(Nt[a.value]),Nt.children&&$e(Nt.children)};return $e(e.data),_e}),Le=T(()=>{const _e=[],$e=Ct=>{for(const Nt of Ct)_e.push(Nt.key),Nt.children&&$e(Nt.children)};return $e(ui.value),_e}),jt=T(()=>{const _e=[],$e=Ct=>{for(const Nt of Ct)Nt.disabled||_e.push(Nt.key),Nt.children&&$e(Nt.children)};return $e(ui.value),_e}),{isRadio:kt,selectedRowKeys:Qt,currentSelectedRowKeys:ct,handleSelect:mt,handleSelectAllLeafs:Et,handleSelectAll:Gt,select:Ht,selectAll:Ee,clearSelected:nt}=pLe({selectedKeys:u,defaultSelectedKeys:c,rowSelection:n,currentAllRowKeys:Le,currentAllEnabledRowKeys:jt,emit:t}),{expandedRowKeys:St,handleExpand:$t,expand:Ei,expandAll:Yi}=fLe({expandedKeys:d,defaultExpandedKeys:h,defaultExpandAllRows:p,expandable:s,allRowKeys:Be,emit:t}),nr=gt({}),ar=(_e,$e)=>{_e&&(nr[$e.key]=_e)},Qr=_e=>{var $e,Ct;for(const Nt of Object.keys(xt.value)){const ai=xt.value[Nt],qt=J.get(Nt);if(qt&&(($e=qt.filterable)!=null&&$e.filter)&&ai.length>0){const si=(Ct=qt.filterable)==null?void 0:Ct.filter(ai,_e.raw);if(!si)return si}}return!0},{dragType:Rt,dragState:Ci,handleDragStart:or,handleDragEnter:ta,handleDragLeave:Jr,handleDragover:pn,handleDragEnd:fn,handleDrop:he}=HLe(v),lt=T(()=>{var _e;const $e=Ct=>{const Nt=[];for(const ai of Ct){const qt={raw:ai,key:ai[e.rowKey],disabled:ai.disabled,expand:ai.expand,isLeaf:ai.isLeaf};ai.children?(qt.isLeaf=!1,qt.children=$e(ai.children)):e.loadMore&&!ai.isLeaf?(qt.isLeaf=!1,nr[qt.key]&&(qt.children=$e(nr[qt.key]))):qt.isLeaf=!0,qt.hasSubtree=!!(qt.children?!e.hideExpandButtonOnEmpty||qt.children.length>0:e.loadMore&&!qt.isLeaf),Nt.push(qt)}return Nt};return $e((_e=e.data)!=null?_e:[])}),vt=T(()=>{const _e=$e=>$e.filter(Ct=>Qr(Ct)?(Ct.children&&(Ct.children=_e(Ct.children)),!0):!1);return Object.keys(xt.value).length>0?_e(lt.value):lt.value}),et=T(()=>{var _e,$e,Ct;const Nt=Xj(vt.value);if(Nt.length>0){if((_e=ft.value)!=null&&_e.field){const si=J.get(ft.value.field);if(si&&(($e=si.sortable)==null?void 0:$e.sorter)!==!0){const{field:Je,direction:oi}=ft.value;Nt.sort((Xi,sa)=>{var Sr;const ls=ad(Xi.raw,Je),Cr=ad(sa.raw,Je);if((Sr=si.sortable)!=null&&Sr.sorter&&Zt(si.sortable.sorter))return si.sortable.sorter(Xi.raw,sa.raw,{dataIndex:Je,direction:oi});const us=ls>Cr?1:-1;return oi==="descend"?-us:us})}}const{sourcePath:ai,targetPath:qt}=Ci;if(Ci.dragging&&qt.length&&qt.toString()!==ai.toString()&&ai.length===qt.length&&ai.slice(0,-1).toString()===qt.slice(0,-1).toString()){let si=Nt;for(let Je=0;Je<ai.length;Je++){const oi=ai[Je];if(Je>=ai.length-1){const sa=si[oi],Sr=qt[Je];Sr>oi?(si.splice(Sr+1,0,sa),si.splice(oi,1)):(si.splice(Sr,0,sa),si.splice(oi+1,1))}else si=(Ct=si[oi].children)!=null?Ct:[]}}}return Nt}),{page:bt,pageSize:ci,handlePageChange:mi,handlePageSizeChange:vi}=mLe(e,t),Si=T(()=>{var _e,$e;return($e=(_e=n.value)==null?void 0:_e.onlyCurrent)!=null?$e:!1});Vt(bt,(_e,$e)=>{_e!==$e&&Si.value&&nt()});const ui=T(()=>e.pagination&&et.value.length>ci.value?et.value.slice((bt.value-1)*ci.value,bt.value*ci.value):et.value),Hi=T(()=>Kj(ui.value)),er=()=>pe.value.reduce((_e,$e,Ct)=>{if($e.dataIndex)if(Ct===0)hb(_e,$e.dataIndex,e.summaryText,{addPath:!0});else{let Nt=0,ai=!1;ui.value.forEach(qt=>{if($e.dataIndex){const si=ad(qt.raw,$e.dataIndex);Mt(si)?Nt+=si:!ei(si)&&!Wn(si)&&(ai=!0)}}),hb(_e,$e.dataIndex,ai?"":Nt,{addPath:!0})}return _e},{}),$i=_e=>_e&&_e.length>0?_e.map($e=>({raw:$e,key:$e[e.rowKey]})):[],Ki=T(()=>e.summary?Zt(e.summary)?$i(e.summary({columns:pe.value,data:Hi.value})):$i([er()]):[]),Xe=ie(0),ni=ie(!0),Oi=ie(!0),wi=()=>{let _e=!0,$e=!0;const Ct=q.value;Ct&&(_e=Xe.value===0,$e=Math.ceil(Xe.value+Ct.offsetWidth)>=Ct.scrollWidth),_e!==ni.value&&(ni.value=_e),$e!==Oi.value&&(Oi.value=$e)},pr=()=>ni.value&&Oi.value?`${b}-scroll-position-both`:ni.value?`${b}-scroll-position-left`:Oi.value?`${b}-scroll-position-right`:`${b}-scroll-position-middle`,yi=()=>{const _e=[];return ce.value&&_e.push(`${b}-has-fixed-col-left`),le.value&&_e.push(`${b}-has-fixed-col-right`),_e},xa=_e=>{_e.target.scrollLeft!==Xe.value&&(Xe.value=_e.target.scrollLeft),wi()},Hn=_e=>{xa(_e);const{scrollLeft:$e}=_e.target;$.value&&($.value.scrollLeft=$e),I.value&&(I.value.scrollLeft=$e)},os=(_e,$e)=>{t("rowClick",_e.raw,$e)},mn=(_e,$e)=>{t("rowDblclick",_e.raw,$e)},Q=(_e,$e)=>{t("rowContextmenu",_e.raw,$e)},re=(_e,$e,Ct)=>{t("cellClick",_e.raw,$e,Ct)},Ae=_m((_e,$e,Ct)=>{t("cellMouseEnter",_e.raw,$e,Ct)},30),oe=_m((_e,$e,Ct)=>{t("cellMouseLeave",_e.raw,$e,Ct)},30),C=(_e,$e,Ct)=>{t("cellDblclick",_e.raw,$e,Ct)},L=(_e,$e,Ct)=>{t("cellContextmenu",_e.raw,$e,Ct)},j=(_e,$e)=>{t("headerClick",_e,$e)},H=T(()=>{var _e,$e;const Ct=[],Nt=ce.value||le.value;let ai,qt,si;((_e=e.draggable)==null?void 0:_e.type)==="handle"&&(ai={name:"drag-handle",title:e.draggable.title,width:e.draggable.width,fixed:e.draggable.fixed||Nt},Ct.push(ai)),e.expandable&&(qt={name:"expand",title:e.expandable.title,width:e.expandable.width,fixed:e.expandable.fixed||Nt},Ct.push(qt)),e.rowSelection&&(si={name:e.rowSelection.type==="radio"?"selection-radio":"selection-checkbox",title:e.rowSelection.title,width:e.rowSelection.width,fixed:e.rowSelection.fixed||Nt},Ct.push(si)),!xe.value&&Ct.length>0&&Ct[Ct.length-1].fixed&&(Ct[Ct.length-1].isLastLeftFixed=!0);const Je=($e=e.components)==null?void 0:$e.operations;return Zt(Je)?Je({dragHandle:ai,expand:qt,selection:si}):Ct}),ue=T(()=>{var _e,$e,Ct,Nt;if(k.value.x){const ai={width:Mt((_e=e.scroll)==null?void 0:_e.x)?`${($e=e.scroll)==null?void 0:$e.x}px`:(Ct=e.scroll)==null?void 0:Ct.x};return(Nt=e.scroll)!=null&&Nt.minWidth&&(ai.minWidth=Mt(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),ai}}),ae=T(()=>{var _e,$e,Ct,Nt;if(k.value.x&&ui.value.length>0){const ai={width:Mt((_e=e.scroll)==null?void 0:_e.x)?`${($e=e.scroll)==null?void 0:$e.x}px`:(Ct=e.scroll)==null?void 0:Ct.x};return(Nt=e.scroll)!=null&&Nt.minWidth&&(ai.minWidth=Mt(e.scroll.minWidth)?`${e.scroll.minWidth}px`:e.scroll.minWidth),ai}});dr(Dp,gt({loadMore:o,addLazyLoadData:ar,slots:i,sorter:ft,filters:xt,filterIconAlignLeft:l,resizingColumn:de,checkStrictly:M,currentAllEnabledRowKeys:jt,currentSelectedRowKeys:ct,addColumn:(_e,$e)=>{G.set(_e,$e)},removeColumn:_e=>{G.delete(_e)},onSelectAll:Gt,onSelect:mt,onSelectAllLeafs:Et,onSorterChange:Oe,onFilterChange:at,onThMouseDown:me}));const qe=T(()=>[b,`${b}-size-${e.size}`,{[`${b}-border`]:S.value.wrapper,[`${b}-border-cell`]:S.value.cell,[`${b}-border-header-cell`]:!S.value.cell&&S.value.headerCell,[`${b}-border-body-cell`]:!S.value.cell&&S.value.bodyCell,[`${b}-stripe`]:e.stripe,[`${b}-hover`]:e.hoverable,[`${b}-dragging`]:Ci.dragging,[`${b}-type-selection`]:!!e.rowSelection,[`${b}-empty`]:e.data&&ui.value.length===0,[`${b}-layout-fixed`]:e.tableLayoutFixed||k.value.x||Z.value||Ne.value}]),_t=T(()=>[`${b}-pagination`,{[`${b}-pagination-left`]:e.pagePosition==="tl"||e.pagePosition==="bl",[`${b}-pagination-center`]:e.pagePosition==="top"||e.pagePosition==="bottom",[`${b}-pagination-right`]:e.pagePosition==="tr"||e.pagePosition==="br",[`${b}-pagination-top`]:ke.value}]),tt=T(()=>{const _e=yi();return k.value.x&&_e.push(pr()),Z.value&&_e.push(`${b}-scroll-y`),_e}),dt=T(()=>!!e.virtualListProps),je=ie({}),Re=()=>{const _e={};for(const $e of Object.keys(O.value))_e[$e]=O.value[$e].offsetWidth;je.value=_e},Ue=ie(!1),Ze=()=>z.value?z.value.offsetWidth>z.value.clientWidth:!1,Ve=()=>{const _e=Ze();Ue.value!==_e&&(Ue.value=_e),wi(),Re()};xi(()=>{Ue.value=Ze(),Re()});const Ge=T(()=>ki(e.loading)?e.loading:{loading:e.loading}),Ke=()=>_(Gl,{empty:!0},{default:()=>[_(ec,{colSpan:pe.value.length+H.value.length},{default:()=>{var _e,$e,Ct,Nt,ai;return[(ai=(Nt=(_e=i.empty)==null?void 0:_e.call(i))!=null?Nt:(Ct=x==null?void 0:($e=x.slots).empty)==null?void 0:Ct.call($e,{component:"table"}))!=null?ai:_(gu,null,null)]}})]}),Ft=_e=>{var $e;if(_e.expand)return Zt(_e.expand)?_e.expand():_e.expand;if(i["expand-row"])return i["expand-row"]({record:_e.raw});if(($e=e.expandable)!=null&&$e.expandedRowRender)return e.expandable.expandedRowRender(_e.raw)},Yt=T(()=>[].concat(H.value,pe.value)),Ot=T(()=>e.spanAll?Yt.value:pe.value),{tableSpan:ut,removedCells:Lt}=bB({spanMethod:f,data:ui,columns:Ot}),{tableSpan:st,removedCells:we}=bB({spanMethod:m,data:Ki,columns:Yt}),rt=_e=>{if(!(!dt.value||!_e||!je.value[_e]))return{width:`${je.value[_e]}px`}},Dt=(_e,$e)=>_(Gl,{key:`table-summary-${$e}`,class:[`${b}-tr-summary`,Zt(e.rowClass)?e.rowClass(_e.raw,$e):e.rowClass],onClick:Ct=>os(_e,Ct)},{default:()=>[H.value.map((Ct,Nt)=>{var ai;const qt=`${$e}-${Nt}-${_e.key}`,[si,Je]=(ai=st.value[qt])!=null?ai:[1,1];if(we.value.includes(qt))return null;const oi=rt(Ct.name);return _(vB,{style:oi,operationColumn:Ct,operations:H.value,record:_e,rowSpan:si,colSpan:Je,summary:!0},null)}),pe.value.map((Ct,Nt)=>{var ai;const qt=`${$e}-${H.value.length+Nt}-${_e.key}`,[si,Je]=(ai=st.value[qt])!=null?ai:[1,1];if(we.value.includes(qt))return null;const oi=rt(Ct.dataIndex);return _(ec,{key:`td-${qt}`,style:oi,rowIndex:$e,record:_e,column:Ct,operations:H.value,dataColumns:pe.value,rowSpan:si,colSpan:Je,summary:!0,onClick:Xi=>re(_e,Ct,Xi),onDblclick:Xi=>C(_e,Ct,Xi),onMouseenter:Xi=>Ae(_e,Ct,Xi),onMouseleave:Xi=>oe(_e,Ct,Xi),onContextmenu:Xi=>L(_e,Ct,Xi)},{td:i.td,cell:i["summary-cell"]})})],tr:i.tr}),Qe=()=>Ki.value&&Ki.value.length>0?_("tfoot",null,[Ki.value.map((_e,$e)=>Dt(_e,$e))]):null,Ut=(_e,$e=!0)=>{var Ct,Nt,ai,qt,si;const Je=_e.key,oi=St.value.includes(Je);return _("button",{type:"button",class:`${b}-expand-btn`,onClick:Xi=>{$t(Je,_e.raw),$e&&Xi.stopPropagation()}},[(si=(qt=(Ct=i["expand-icon"])==null?void 0:Ct.call(i,{expanded:oi,record:_e.raw}))!=null?qt:(ai=(Nt=e.expandable)==null?void 0:Nt.icon)==null?void 0:ai.call(Nt,oi,_e.raw))!=null?si:oi?_(wP,null,null):_(op,null,null)])},Wt=(_e,{indentSize:$e,indexPath:Ct,allowDrag:Nt,expandContent:ai})=>{var qt,si;if(_e.hasSubtree)return((qt=_e.children)==null?void 0:qt.length)===0&&y.value?Ke():(si=_e.children)==null?void 0:si.map((Je,oi)=>Gi(Je,oi,{indentSize:$e,indexPath:Ct,allowDrag:Nt}));if(ai){const Je=q.value;return _(Gl,{key:`${_e.key}-expand`,expand:!0},{default:()=>[_(ec,{isFixedExpand:ce.value||le.value,containerWidth:Je?.clientWidth,colSpan:pe.value.length+H.value.length},e5e(ai)?ai:{default:()=>[ai]})]})}return null},Gi=(_e,$e,{indentSize:Ct=0,indexPath:Nt,allowDrag:ai=!0}={})=>{var qt;const si=_e.key,Je=(Nt??[]).concat($e),oi=Ft(_e),Xi=St.value.includes(si),sa=Ci.sourceKey===_e.key,Sr=Rt.value?{draggable:ai,onDragstart:Cr=>{ai&&or(Cr,_e.key,Je,_e.raw)},onDragend:Cr=>{ai&&fn(Cr)}}:{},ls=Rt.value?{onDragenter:Cr=>{ai&&ta(Cr,Je)},onDragover:Cr=>{ai&&pn(Cr)},onDrop:Cr=>{ai&&(pt("drag"),he(Cr))}}:{};return _(Xt,null,[_(Gl,it({key:si,class:[{[`${b}-tr-draggable`]:Rt.value==="row",[`${b}-tr-drag`]:sa},Zt(e.rowClass)?e.rowClass(_e.raw,$e):e.rowClass],rowIndex:$e,record:_e,checked:e.rowSelection&&((qt=Qt.value)==null?void 0:qt.includes(si)),onClick:Cr=>os(_e,Cr),onDblclick:Cr=>mn(_e,Cr),onContextmenu:Cr=>Q(_e,Cr)},Rt.value==="row"?Sr:{},ls),{default:()=>[H.value.map((Cr,us)=>{var Ms;const ro=`${$e}-${us}-${_e.key}`,[M1,E1]=e.spanAll?(Ms=ut.value[ro])!=null?Ms:[1,1]:[1,1];if(e.spanAll&&Lt.value.includes(ro))return null;const A1=rt(Cr.name);return _(vB,it({key:`operation-td-${us}`,style:A1,operationColumn:Cr,operations:H.value,record:_e,hasExpand:!!oi,selectedRowKeys:ct.value,rowSpan:M1,colSpan:E1,renderExpandBtn:Ut},Rt.value==="handle"?Sr:{}),{"drag-handle-icon":i["drag-handle-icon"]})}),pe.value.map((Cr,us)=>{var Ms;const ro=`${$e}-${e.spanAll?H.value.length+us:us}-${_e.key}`,[M1,E1]=(Ms=ut.value[ro])!=null?Ms:[1,1];if(Lt.value.includes(ro))return null;const A1=us===0?{showExpandBtn:_e.hasSubtree,indentSize:_e.hasSubtree?Ct-20:Ct}:{},h9=rt(Cr.dataIndex);return _(ec,it({key:`td-${us}`,style:h9,rowIndex:$e,record:_e,column:Cr,operations:H.value,dataColumns:pe.value,rowSpan:M1,renderExpandBtn:Ut,colSpan:E1},A1,{onClick:Cl=>re(_e,Cr,Cl),onDblclick:Cl=>C(_e,Cr,Cl),onMouseenter:Cl=>Ae(_e,Cr,Cl),onMouseleave:Cl=>oe(_e,Cr,Cl),onContextmenu:Cl=>L(_e,Cr,Cl)}),{td:i.td})})],tr:i.tr}),Xi&&Wt(_e,{indentSize:Ct+e.indentSize,indexPath:Je,allowDrag:ai&&!sa,expandContent:oi})])},sr=()=>{const _e=ui.value.some($e=>!!$e.hasSubtree);return _(Zf,null,{default:()=>[ui.value.length>0?ui.value.map(($e,Ct)=>Gi($e,Ct,{indentSize:_e?20:0})):Ke()],tbody:i.tbody})},Ti=()=>_(Kf,null,{default:()=>[fe.value.map((_e,$e)=>_(Gl,{key:`header-row-${$e}`},{default:()=>[$e===0&&H.value.map((Ct,Nt)=>{var ai;return _(WLe,{key:`operation-th-${Nt}`,ref:qt=>{qt?.$el&&Ct.name&&(O.value[Ct.name]=qt.$el)},operationColumn:Ct,operations:H.value,selectAll:!!(Ct.name==="selection-checkbox"&&((ai=e.rowSelection)!=null&&ai.showCheckedAll)),rowSpan:fe.value.length},null)}),_e.map((Ct,Nt)=>{const ai=e.columnResizable&&!!Ct.dataIndex&&Nt<_e.length-1;return _(Qf,{key:`th-${Nt}`,ref:qt=>{qt?.$el&&Ct.dataIndex&&(O.value[Ct.dataIndex]=qt.$el)},column:Ct,operations:H.value,dataColumns:pe.value,resizable:ai,onClick:qt=>j(Ct,qt)},{th:i.th})})]}))],thead:i.thead}),rr=()=>{var _e,$e;if(Z.value){const Ct=Mt(e.stickyHeader)?`${e.stickyHeader}px`:void 0,Nt=[(_e=A.value)==null?void 0:_e.outerClass];e.stickyHeader&&Nt.push(`${b}-header-sticky`);const ai=Bu({top:Ct},($e=A.value)==null?void 0:$e.outerStyle),qt=P.value?Io:"div";return _(Xt,null,[e.showHeader&&_(qt,it({ref:R,class:[`${b}-header`,{[`${b}-header-sticky`]:e.stickyHeader&&!P.value}],style:{overflowY:Ue.value?"scroll":void 0,top:P.value?void 0:Ct}},g.value?QC(Bu({hide:ui.value.length!==0,disableVertical:!0},A.value),{outerClass:Nt,outerStyle:ai}):void 0),{default:()=>[_("table",{class:`${b}-element`,style:ue.value,cellpadding:0,cellspacing:0},[_(Lg,{dataColumns:pe.value,operations:H.value,columnWidth:ge},null),Ti()])]}),_(Ao,{onResize:Ve},{default:()=>{var si,Je;return[dt.value&&ui.value.length?_(Tp,it({ref:oi=>{oi?.$el&&(z.value=oi.$el)},class:`${b}-body`,data:ui.value,itemKey:"_key",component:{list:"table",content:"tbody"},listAttrs:{class:`${b}-element`,style:ae.value},paddingPosition:"list",height:"auto"},e.virtualListProps,{onScroll:Hn}),{item:({item:oi,index:Xi})=>Gi(oi,Xi)}):_(qt,it({ref:U,class:`${b}-body`,style:{maxHeight:Mt((si=e.scroll)==null?void 0:si.y)?`${(Je=e.scroll)==null?void 0:Je.y}px`:"100%"}},g.value?Bu({outerStyle:{display:"flex",minHeight:"0"}},A.value):void 0,{onScroll:Hn}),{default:()=>[_("table",{class:`${b}-element`,style:ae.value,cellpadding:0,cellspacing:0},[ui.value.length!==0&&_(Lg,{dataColumns:pe.value,operations:H.value,columnWidth:ge},null),sr()])]})]}}),Ki.value&&Ki.value.length>0&&_("div",{ref:I,class:`${b}-tfoot`,style:{overflowY:Ue.value?"scroll":"hidden"}},[_("table",{class:`${b}-element`,style:ae.value,cellpadding:0,cellspacing:0},[_(Lg,{dataColumns:pe.value,operations:H.value,columnWidth:ge},null),Qe()])])])}return _(Ao,{onResize:()=>wi()},{default:()=>[_("table",{class:`${b}-element`,cellpadding:0,cellspacing:0,style:ae.value},[_(Lg,{dataColumns:pe.value,operations:H.value,columnWidth:ge},null),e.showHeader&&Ti(),sr(),Ki.value&&Ki.value.length>0&&Qe()])]})},Pi=_e=>{var $e;const Ct=($e=e.scroll)!=null&&$e.maxHeight?{maxHeight:e.scroll.maxHeight}:void 0,Nt=P.value?Io:"div";return _(Xt,null,[_("div",{class:[`${b}-container`,tt.value]},[_(Nt,it({ref:D,class:[`${b}-content`,{[`${b}-content-scroll-x`]:!Z.value}],style:Ct},g.value?Bu({outerStyle:{height:"100%"}},A.value):void 0,{onScroll:xa}),{default:()=>[_e?_("table",{class:`${b}-element`,cellpadding:0,cellspacing:0},[_e()]):rr()]})]),i.footer&&_("div",{class:`${b}-footer`},[i.footer()])])},gi=()=>{var _e,$e;const Ct=ki(e.pagination)?ln(e.pagination,["current","pageSize","defaultCurrent","defaultPageSize"]):{};return _("div",{class:_t.value},[(_e=i["pagination-left"])==null?void 0:_e.call(i),_(kP,it({total:vt.value.length,current:bt.value,pageSize:ci.value,onChange:Nt=>{mi(Nt),pt("pagination")},onPageSizeChange:Nt=>{vi(Nt),pt("pagination")}},Ct),null),($e=i["pagination-right"])==null?void 0:$e.call(i)])},ii=T(()=>{var _e,$e;if(na((_e=e.scroll)==null?void 0:_e.y))return{height:($e=e.scroll)==null?void 0:$e.y}});return{render:()=>{var _e;return i.default?_("div",{class:qe.value},[Pi(i.default)]):(w.value=(_e=i.columns)==null?void 0:_e.call(i),_("div",{class:qe.value,style:ii.value},[w.value,_(Do,Ge.value,{default:()=>[e.pagination!==!1&&(ui.value.length>0||et.value.length>0)&&ke.value&&gi(),Pi(),e.pagination!==!1&&(ui.value.length>0||et.value.length>0)&&!ke.value&&gi()]})]))},selfExpand:Ei,selfExpandAll:Yi,selfSelect:Ht,selfSelectAll:Ee,selfResetFilters:ne,selfClearFilters:K,selfResetSorters:te,selfClearSorters:Pe}},methods:{selectAll(e){return this.selfSelectAll(e)},select(e,t){return this.selfSelect(e,t)},expandAll(e){return this.selfExpandAll(e)},expand(e,t){return this.selfExpand(e,t)},resetFilters(e){return this.selfResetFilters(e)},clearFilters(e){return this.selfClearFilters(e)},resetSorters(){return this.selfResetSorters()},clearSorters(){return this.selfClearSorters()}},render(){return this.render()}});const mo=(e,t)=>{const i=Os(e,t),r=ie(i.value);return Vt(i,(a,n)=>{Pp(a,n)||(r.value=a)}),r};var G0=se({name:"TableColumn",props:{dataIndex:String,title:String,width:Number,minWidth:Number,align:{type:String},fixed:{type:String},ellipsis:{type:Boolean,default:!1},sortable:{type:Object,default:void 0},filterable:{type:Object,default:void 0},cellClass:{type:[String,Array,Object]},headerCellClass:{type:[String,Array,Object]},bodyCellClass:{type:[String,Array,Object,Function]},summaryCellClass:{type:[String,Array,Object,Function]},cellStyle:{type:Object},headerCellStyle:{type:Object},bodyCellStyle:{type:[Object,Function]},summaryCellStyle:{type:[Object,Function]},index:{type:Number},tooltip:{type:[Boolean,Object],default:!1}},setup(e,{slots:t}){var i;const{dataIndex:r,title:a,width:n,align:s,fixed:o,ellipsis:l,index:u,minWidth:c}=yt(e),d=mo(e,"sortable"),h=mo(e,"filterable"),p=mo(e,"cellClass"),f=mo(e,"headerCellClass"),v=mo(e,"bodyCellClass"),m=mo(e,"summaryCellClass"),g=mo(e,"cellStyle"),y=mo(e,"headerCellStyle"),b=mo(e,"bodyCellStyle"),x=mo(e,"summaryCellStyle"),S=mo(e,"tooltip"),w=xs(),E=Ai(Dp,{}),M=Ai(cB,void 0),{children:P,components:A}=Zm("TableColumn"),k=gt(new Map);dr(cB,{addChild:(U,z)=>{k.set(U,z)},removeChild:U=>{k.delete(U)}});const D=ie();Vt([A,k],([U,z])=>{if(U.length>0){const B=[];U.forEach(W=>{const R=z.get(W);R&&B.push(R)}),D.value=B}else D.value=void 0});const F=gt({dataIndex:r,title:a,width:n,minWidth:c,align:s,fixed:o,ellipsis:l,sortable:d,filterable:h,cellClass:p,headerCellClass:f,bodyCellClass:v,summaryCellClass:m,cellStyle:g,headerCellStyle:y,bodyCellStyle:b,summaryCellStyle:x,index:u,tooltip:S,children:D,slots:t});return w&&(M?M.addChild(w.uid,F):(i=E.addColumn)==null||i.call(E,w.uid,F)),Tn(()=>{var U;w&&(M?M.removeChild(w.uid):(U=E.removeColumn)==null||U.call(E,w.uid))}),()=>{var U;return P.value=(U=t.default)==null?void 0:U.call(t),P.value}}});const t5e=Object.assign(JC,{Thead:Kf,Tbody:Zf,Tr:Gl,Th:Qf,Td:ec,Column:G0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+JC.name,JC),e.component(i+Kf.name,Kf),e.component(i+Zf.name,Zf),e.component(i+Gl.name,Gl),e.component(i+Qf.name,Qf),e.component(i+ec.name,ec),e.component(i+G0.name,G0)}}),i5e=({direction:e,type:t,offset:i})=>e==="vertical"?{transform:`translateY(${-i}px)`}:{transform:`translateX(${-i}px)`},zP=Symbol("ArcoTabs"),r5e=se({name:"TabsTab",components:{IconHover:Ur,IconClose:kn},props:{tab:{type:Object,required:!0},active:Boolean,editable:Boolean},emits:["click","delete"],setup(e,{emit:t}){const i=Se("tabs-tab"),r=Ai(zP,{}),a=u=>{e.tab.disabled||t("click",e.tab.key,u)},n=u=>{u.key==="Enter"&&a(u)},s=T(()=>Object.assign(r.trigger==="click"?{onClick:a}:{onMouseover:a},{onKeydown:n})),o=u=>{e.tab.disabled||t("delete",e.tab.key,u)},l=T(()=>[i,{[`${i}-active`]:e.active,[`${i}-closable`]:e.editable&&e.tab.closable,[`${i}-disabled`]:e.tab.disabled}]);return{prefixCls:i,cls:l,eventHandlers:s,handleDelete:o}}});function a5e(e,t,i,r,a,n){const s=be("icon-close"),o=be("icon-hover");return N(),ee("div",it({tabindex:"0",class:e.cls},e.eventHandlers),[ve("span",{class:Y(`${e.prefixCls}-title`)},[ye(e.$slots,"default")],2),e.editable&&e.tab.closable?(N(),De(o,{key:0,class:Y(`${e.prefixCls}-close-btn`),onClick:ks(e.handleDelete,["stop"])},{default:He(()=>[_(s)]),_:1},8,["class","onClick"])):Me("v-if",!0)],16)}var n5e=We(r5e,[["render",a5e]]);function s5e(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var CB=se({name:"TabsButton",props:{type:{type:String,default:"next"},direction:{type:String,default:"horizontal"},disabled:{type:Boolean,default:!1},onClick:{type:Function}},emits:["click"],setup(e,{emit:t}){const i=Se("tabs-nav-button"),r=s=>{e.disabled||t("click",e.type,s)},a=()=>e.direction==="horizontal"?e.type==="next"?_(zo,null,null):_(yu,null,null):e.type==="next"?_(kp,null,null):_(fP,null,null),n=T(()=>[i,{[`${i}-disabled`]:e.disabled,[`${i}-left`]:e.direction==="horizontal"&&e.type==="previous",[`${i}-right`]:e.direction==="horizontal"&&e.type==="next",[`${i}-up`]:e.direction==="vertical"&&e.type==="previous",[`${i}-down`]:e.direction==="vertical"&&e.type==="next"}]);return()=>{let s;return _("div",{class:n.value,onClick:r},[_(Ur,{disabled:e.disabled},s5e(s=a())?s:{default:()=>[s]})])}}});const o5e=se({name:"TabsNavInk",props:{activeTabRef:{type:Object},direction:{type:String},disabled:Boolean,animation:Boolean},setup(e){const{activeTabRef:t}=yt(e),i=Se("tabs-nav-ink"),r=ie(0),a=ie(0),n=T(()=>e.direction==="vertical"?{top:`${r.value}px`,height:`${a.value}px`}:{left:`${r.value}px`,width:`${a.value}px`}),s=()=>{if(t.value){const l=e.direction==="vertical"?t.value.offsetTop:t.value.offsetLeft,u=e.direction==="vertical"?t.value.offsetHeight:t.value.offsetWidth;(l!==r.value||u!==a.value)&&(r.value=l,a.value=u)}};xi(()=>{hr(()=>s())}),Ss(()=>{s()});const o=T(()=>[i,{[`${i}-animation`]:e.animation,[`${i}-disabled`]:e.disabled}]);return{prefixCls:i,cls:o,style:n}}});function l5e(e,t,i,r,a,n){return N(),ee("div",{class:Y(e.cls),style:It(e.style)},null,6)}var u5e=We(o5e,[["render",l5e]]),c5e=se({name:"TabsNav",props:{tabs:{type:Array,required:!0},direction:{type:String,required:!0},type:{type:String,required:!0},activeKey:{type:[String,Number]},activeIndex:{type:Number,required:!0},position:{type:String,required:!0},size:{type:String,required:!0},showAddButton:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},animation:{type:Boolean,required:!0},headerPadding:{type:Boolean,default:!0}},emits:["click","add","delete"],setup(e,{emit:t,slots:i}){const{tabs:r,activeKey:a,activeIndex:n,direction:s}=yt(e),o=Se("tabs-nav"),l=ie(),u=ie(),c=ie({}),d=T(()=>{if(!ei(a.value))return c.value[a.value]}),h=ie(),p=T(()=>e.editable&&["line","card","card-gutter"].includes(e.type)),f=ie(!1),v=ie(0),m=ie(0),g=ie([]),y=ie(0),b=()=>{var R,$,q;return(q=s.value==="vertical"?(R=l.value)==null?void 0:R.offsetHeight:($=l.value)==null?void 0:$.offsetWidth)!=null?q:0},x=()=>!u.value||!l.value?0:s.value==="vertical"?u.value.offsetHeight-l.value.offsetHeight:u.value.offsetWidth-l.value.offsetWidth,S=()=>r.value.map(R=>{const $=c.value[R.key];return s.value==="vertical"?$.offsetTop+$.offsetHeight:$.offsetLeft+$.offsetWidth}),w=()=>{f.value=E(),f.value?(v.value=b(),m.value=x(),g.value=S(),y.value>m.value&&(y.value=m.value)):y.value=0},E=()=>l.value&&u.value?e.direction==="vertical"?u.value.offsetHeight>l.value.offsetHeight:u.value.offsetWidth>l.value.offsetWidth:!1,M=R=>{var $;return(($=g.value[R-1])!=null?$:0)>=y.value&&g.value[R]<=y.value+v.value},P=R=>l.value?R==="previous"?y.value-v.value:y.value+v.value:0,A=R=>!l.value||!u.value||R<0?0:R>m.value?m.value:R,k=(R,$)=>{t("click",R,$)},I=(R,$)=>{t("delete",R,$)},O=R=>{y.value=A(P(R))},D=()=>{w(),h.value&&h.value.$forceUpdate()};Vt(r,()=>{hr(()=>{w()})}),Vt(n,(R,$)=>{hr(()=>{var q;if(f.value)if(R>=$){const Z=R<g.value.length-1?R+1:R;M(Z)||(y.value=g.value[Z]-v.value)}else{const Z=R>0?R-1:R;M(Z)||(y.value=(q=g.value[Z-1])!=null?q:0)}})}),xi(()=>{w()});const F=()=>!p.value||!e.showAddButton?null:_("div",{class:`${o}-add-btn`,onClick:R=>t("add",R)},[_(Ur,null,{default:()=>[_(op,null,null)]})]),U=T(()=>[o,`${o}-${e.direction}`,`${o}-${e.position}`,`${o}-size-${e.size}`,`${o}-type-${e.type}`]),z=T(()=>[`${o}-tab-list`,{[`${o}-tab-list-no-padding`]:!e.headerPadding&&["line","text"].includes(e.type)&&e.direction==="horizontal"}]),B=T(()=>i5e({direction:e.direction,type:e.type,offset:y.value})),W=T(()=>[`${o}-tab`,{[`${o}-tab-scroll`]:f.value}]);return()=>{var R;return _("div",{class:U.value},[f.value&&_(CB,{type:"previous",direction:e.direction,disabled:y.value<=0,onClick:O},null),_(Ao,{onResize:()=>w()},{default:()=>[_("div",{class:W.value,ref:l},[_(Ao,{onResize:D},{default:()=>[_("div",{ref:u,class:z.value,style:B.value},[e.tabs.map(($,q)=>_(n5e,{key:$.key,ref:Z=>{Z?.$el&&(c.value[$.key]=Z.$el)},active:$.key===a.value,tab:$,editable:e.editable,onClick:k,onDelete:I},{default:()=>{var Z,G,X;return[(X=(G=(Z=$.slots).title)==null?void 0:G.call(Z))!=null?X:$.title]}})),e.type==="line"&&d.value&&_(u5e,{ref:h,activeTabRef:d.value,direction:e.direction,disabled:!1,animation:e.animation},null)])]}),!f.value&&F()])]}),f.value&&_(CB,{type:"next",direction:e.direction,disabled:y.value>=m.value,onClick:O},null),_("div",{class:`${o}-extra`},[f.value&&F(),(R=i.extra)==null?void 0:R.call(i)])])}}}),e_=se({name:"Tabs",props:{activeKey:{type:[String,Number],default:void 0},defaultActiveKey:{type:[String,Number],default:void 0},position:{type:String,default:"top"},size:{type:String},type:{type:String,default:"line"},direction:{type:String,default:"horizontal"},editable:{type:Boolean,default:!1},showAddButton:{type:Boolean,default:!1},destroyOnHide:{type:Boolean,default:!1},lazyLoad:{type:Boolean,default:!1},justify:{type:Boolean,default:!1},animation:{type:Boolean,default:!1},headerPadding:{type:Boolean,default:!0},autoSwitch:{type:Boolean,default:!1},hideContent:{type:Boolean,default:!1},trigger:{type:String,default:"click"}},emits:{"update:activeKey":e=>!0,change:e=>!0,tabClick:(e,t)=>!0,add:e=>!0,delete:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{size:r,lazyLoad:a,destroyOnHide:n,trigger:s}=yt(e),o=Se("tabs"),{mergedSize:l}=hn(r),u=T(()=>e.direction==="vertical"?"left":e.position),c=T(()=>["left","right"].includes(u.value)?"vertical":"horizontal"),{children:d,components:h}=Zm("TabPane"),p=gt(new Map),f=T(()=>{const k=[];return h.value.forEach(I=>{const O=p.get(I);O&&k.push(O)}),k}),v=T(()=>f.value.map(k=>k.key)),m=(k,I)=>{p.set(k,I)},g=k=>{p.delete(k)},y=ie(e.defaultActiveKey),b=T(()=>{var k;const I=(k=e.activeKey)!=null?k:y.value;return ei(I)?v.value[0]:I}),x=T(()=>{const k=v.value.indexOf(b.value);return k===-1?0:k});dr(zP,gt({lazyLoad:a,destroyOnHide:n,activeKey:b,addItem:m,removeItem:g,trigger:s}));const S=k=>{k!==b.value&&(y.value=k,t("update:activeKey",k),t("change",k))},w=(k,I)=>{S(k),t("tabClick",k,I)},E=k=>{t("add",k),e.autoSwitch&&hr(()=>{const I=v.value[v.value.length-1];S(I)})},M=(k,I)=>{t("delete",k,I)},P=()=>_("div",{class:[`${o}-content`,{[`${o}-content-hide`]:e.hideContent}]},[_("div",{class:[`${o}-content-list`,{[`${o}-content-animation`]:e.animation}],style:{marginLeft:`-${x.value*100}%`}},[d.value])]),A=T(()=>[o,`${o}-${c.value}`,`${o}-${u.value}`,`${o}-type-${e.type}`,`${o}-size-${l.value}`,{[`${o}-justify`]:e.justify}]);return()=>{var k;return d.value=(k=i.default)==null?void 0:k.call(i),_("div",{class:A.value},[u.value==="bottom"&&P(),_(c5e,{tabs:f.value,activeKey:b.value,activeIndex:x.value,direction:c.value,position:u.value,editable:e.editable,animation:e.animation,showAddButton:e.showAddButton,headerPadding:e.headerPadding,size:l.value,type:e.type,onClick:w,onAdd:E,onDelete:M},{extra:i.extra}),u.value!=="bottom"&&P()])}}}),d5e=Object.defineProperty,_B=Object.getOwnPropertySymbols,h5e=Object.prototype.hasOwnProperty,p5e=Object.prototype.propertyIsEnumerable,MB=(e,t,i)=>t in e?d5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,f5e=(e,t)=>{for(var i in t||(t={}))h5e.call(t,i)&&MB(e,i,t[i]);if(_B)for(var i of _B(t))p5e.call(t,i)&&MB(e,i,t[i]);return e};const m5e=se({name:"TabPane",props:{title:String,disabled:{type:Boolean,default:!1},closable:{type:Boolean,default:!0},destroyOnHide:{type:Boolean,default:!1}},setup(e,{slots:t}){var i;const{title:r,disabled:a,closable:n}=yt(e),s=xs(),o=Se("tabs"),l=Ai(zP,{}),u=ie(),c=T(()=>s?.vnode.key),d=T(()=>c.value===l.activeKey),h=ie(l.lazyLoad?d.value:!0),p=gt({key:c,title:r,disabled:a,closable:n,slots:t});return s?.uid&&((i=l.addItem)==null||i.call(l,s.uid,p)),Tn(()=>{var f;s?.uid&&((f=l.removeItem)==null||f.call(l,s.uid))}),Vt(d,f=>{f?h.value||(h.value=!0):(e.destroyOnHide||l.destroyOnHide)&&(h.value=!1)}),Ss(()=>{p.slots=f5e({},t)}),{prefixCls:o,active:d,itemRef:u,mounted:h}}});function v5e(e,t,i,r,a,n){return N(),ee("div",{ref:"itemRef",class:Y([`${e.prefixCls}-content-item`,{[`${e.prefixCls}-content-item-active`]:e.active}])},[e.mounted?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-pane`)},[ye(e.$slots,"default")],2)):Me("v-if",!0)],2)}var q0=We(m5e,[["render",v5e]]);const g5e=Object.assign(e_,{TabPane:q0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+e_.name,e_),e.component(i+q0.name,q0)}});function y5e(e){const{modelValue:t,defaultValue:i,format:r,isRange:a}=yt(e);function n(){return a.value?[]:void 0}function s(m){if(!ei(m))return a.value?bi(m)?m:[m,void 0]:m}const o=T(()=>{const m=s(t.value);return Is(m,r.value)}),l=T(()=>{const m=s(i.value);return Is(m,r.value)}),[u,c]=Mn(ei(o.value)?ei(l.value)?n():l.value:o.value);Vt(o,()=>{ei(o.value)&&c(n())});const d=T(()=>o.value||u.value),[h,p]=Mn(d.value);Vt([d],()=>{p(d.value)});const[f,v]=Mn();return Vt([h],()=>{v(void 0)}),{computedValue:d,panelValue:h,inputValue:f,setValue:c,setPanelValue:p,setInputValue:v}}var b5e=Object.defineProperty,w5e=Object.defineProperties,x5e=Object.getOwnPropertyDescriptors,EB=Object.getOwnPropertySymbols,S5e=Object.prototype.hasOwnProperty,C5e=Object.prototype.propertyIsEnumerable,AB=(e,t,i)=>t in e?b5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_5e=(e,t)=>{for(var i in t||(t={}))S5e.call(t,i)&&AB(e,i,t[i]);if(EB)for(var i of EB(t))C5e.call(t,i)&&AB(e,i,t[i]);return e},M5e=(e,t)=>w5e(e,x5e(t)),E5e=se({name:"TimePickerRangePanel",components:{Panel:cb},props:{value:{type:Array},displayIndex:{type:Number,default:0}},emits:["select","confirm","update:displayIndex","display-index-change"],setup(e,{emit:t}){const{value:i,displayIndex:r}=yt(e),a=ie(r.value);Vt(r,()=>{a.value=r.value});const n=T(()=>i?.value?i.value[a.value]:void 0);function s(l){const u=ei(i)||ei(i?.value)?[]:[...i.value];u[a.value]=l,t("select",u)}function o(){if(_f(i?.value))t("confirm",i?.value);else{const l=(a.value+1)%2;a.value=l,t("display-index-change",l),t("update:displayIndex",l)}}return{displayValue:n,onSelect:s,onConfirm:o}},render(){const e=M5e(_5e({},this.$attrs),{isRange:!0,value:this.displayValue,onSelect:this.onSelect,onConfirm:this.onConfirm});return _(cb,e,this.$slots)}}),A5e=Object.defineProperty,PB=Object.getOwnPropertySymbols,P5e=Object.prototype.hasOwnProperty,T5e=Object.prototype.propertyIsEnumerable,TB=(e,t,i)=>t in e?A5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,t_=(e,t)=>{for(var i in t||(t={}))P5e.call(t,i)&&TB(e,i,t[i]);if(PB)for(var i of PB(t))T5e.call(t,i)&&TB(e,i,t[i]);return e};const k5e=se({name:"TimePicker",components:{Trigger:$a,DateInput:jF,DateRangeInput:sj,Panel:cb,RangePanel:E5e,IconClockCircle:GF},inheritAttrs:!1,props:{type:{type:String,default:"time"},modelValue:{type:[String,Number,Date,Array]},defaultValue:{type:[String,Number,Date,Array]},disabled:{type:Boolean},allowClear:{type:Boolean,default:!0},readonly:{type:Boolean},error:{type:Boolean},format:{type:String,default:"HH:mm:ss"},placeholder:{type:[String,Array]},size:{type:String},popupContainer:{type:[String,Object]},use12Hours:{type:Boolean},step:{type:Object},disabledHours:{type:Function},disabledMinutes:{type:Function},disabledSeconds:{type:Function},hideDisabledOptions:{type:Boolean},disableConfirm:{type:Boolean},position:{type:String,default:"bl"},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean,default:!1},triggerProps:{type:Object},unmountOnClose:{type:Boolean}},emits:{change:(e,t)=>!0,"update:modelValue":e=>!0,select:(e,t)=>!0,clear:()=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0},setup(e,{emit:t}){const{type:i,format:r,use12Hours:a,modelValue:n,defaultValue:s,popupVisible:o,defaultPopupVisible:l,disabled:u,placeholder:c,disableConfirm:d,disabledHours:h,disabledMinutes:p,disabledSeconds:f}=yt(e),{mergedDisabled:v,eventHandlers:m}=Wr({disabled:u}),g=T(()=>i.value==="time-range"),y=Se("timepicker"),b=ie(),{format:x,use12Hours:S}=xP(gt({format:r,use12Hours:a})),{computedValue:w,panelValue:E,inputValue:M,setValue:P,setPanelValue:A,setInputValue:k}=y5e(gt({modelValue:n,defaultValue:s,isRange:g,format:x})),[I,O]=ja(l.value,gt({value:o})),D=le=>{le!==I.value&&(O(le),t("popup-visible-change",le),t("update:popupVisible",le))},{t:F}=Yr(),[U,z]=Mn(0),B=T(()=>{const le=c?.value;return g.value?ei(le)?F("datePicker.rangePlaceholder.time"):bi(le)?le:[le,le]:ei(le)?F("datePicker.placeholder.time"):le}),W=HF(gt({disabledHours:h,disabledMinutes:p,disabledSeconds:f}));function R(le){var xe,Ne;if(hP(le,w.value)){const pt=ll(le,x.value),at=ys(le);t("update:modelValue",pt),t("change",pt,at),(Ne=(xe=m.value)==null?void 0:xe.onChange)==null||Ne.call(xe)}}function $(le,xe){if(W(le))return;let Ne=le;if(bi(le)){const pt=va();Ne=le.map(at=>(at&&(at=at.year(pt.year()),at=at.month(pt.month()),at=at.date(pt.date())),at)),_f(Ne)&&(Ne=Cm(Ne)),Ne?.length===0&&(Ne=void 0)}R(Ne),P(Ne),xe!==I.value&&D(xe)}function q(le,xe){A(le),xe!==I.value&&D(xe)}function Z(le){b.value&&b.value.focus&&b.value.focus(le)}function G(le){v.value||(D(le),le&&hr(()=>{Z(U.value)}))}function X(le){const xe=ll(le,x.value),Ne=ys(le);t("select",xe,Ne),d.value&&(!g.value||_f(le))?$(le,!0):(q(le,!0),k(void 0))}function J(le){$(le,!1)}function pe(){$(E.value||w.value,!1)}function fe(){if(_f(E.value))$(E.value,!1);else{const le=(U.value+1)%2;z(le),Z(le)}}function de(le){D(!0);const xe=le.target.value;if(k(xe),!ub(xe,x.value))return;const Ne=va(xe,x.value);W(Ne)||(d.value?$(Ne,!0):q(Ne,!0))}function ge(le){D(!0);const xe=le.target.value,Ne=bi(M.value)?[...M.value]:bi(E.value)&&ll(E.value,x.value)||[];if(Ne[U.value]=xe,k(Ne),!ub(xe,x.value))return;const pt=va(xe,x.value);if(W(pt))return;const at=bi(E.value)?[...E.value]:[];at[U.value]=pt,d.value&&_f(at)?$(at,!0):q(at,!0)}function me(le){le.stopPropagation(),A(void 0),$(void 0,g.value)}Vt(I,(le,xe)=>{le!==xe&&A(w.value),le||k(void 0)});const ke=T(()=>g.value?{focusedIndex:U.value,onFocusedIndexChange:le=>{z(le)},onChange:ge,onPressEnter:fe}:{onChange:de,onPressEnter:pe}),ce=T(()=>g.value?{displayIndex:U.value,onDisplayIndexChange:le=>{z(le),Z(le)}}:{});return{refInput:b,isRange:g,prefixCls:y,panelVisible:I,focusedInputIndex:U,computedPlaceholder:B,panelValue:E,inputValue:M,computedFormat:x,computedUse12Hours:S,inputProps:ke,panelProps:ce,mergedDisabled:v,onPanelVisibleChange:G,onInputClear:me,onPanelSelect:X,onPanelConfirm:J,onPanelClick:()=>{Z(U.value)}}}});function O5e(e,t,i,r,a,n){const s=be("IconClockCircle"),o=be("Trigger");return N(),De(o,it({trigger:"click","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"","click-to-close":!1,position:e.position,disabled:e.mergedDisabled||e.readonly,"popup-offset":4,"popup-visible":e.panelVisible,"prevent-focus":!0,"unmount-on-close":e.unmountOnClose,"popup-container":e.popupContainer},t_({},e.triggerProps),{onPopupVisibleChange:e.onPanelVisibleChange}),{content:He(()=>[ve("div",{class:Y(`${e.prefixCls}-container`),onClick:t[0]||(t[0]=(...l)=>e.onPanelClick&&e.onPanelClick(...l))},[(N(),De(bs(e.isRange?"RangePanel":"Panel"),it(e.panelProps,{value:e.panelValue,visible:e.panelVisible,format:e.computedFormat,"use12-hours":e.computedUse12Hours,step:e.step,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,"hide-disabled-options":e.hideDisabledOptions,"hide-footer":e.disableConfirm,onSelect:e.onPanelSelect,onConfirm:e.onPanelConfirm}),$r({_:2},[e.$slots.extra?{name:"extra-footer",fn:He(()=>[ye(e.$slots,"extra")])}:void 0]),1040,["value","visible","format","use12-hours","step","disabled-hours","disabled-minutes","disabled-seconds","hide-disabled-options","hide-footer","onSelect","onConfirm"]))],2)]),default:He(()=>[(N(),De(bs(e.isRange?"DateRangeInput":"DateInput"),it(t_(t_({},e.$attrs),e.inputProps),{ref:"refInput","input-value":e.inputValue,value:e.panelValue,size:e.size,focused:e.panelVisible,format:e.computedFormat,visible:e.panelVisible,disabled:e.mergedDisabled,error:e.error,readonly:e.readonly,editable:!e.readonly,"allow-clear":e.allowClear&&!e.readonly,placeholder:e.computedPlaceholder,onClear:e.onInputClear}),$r({"suffix-icon":He(()=>[ye(e.$slots,"suffix-icon",{},()=>[_(s)])]),_:2},[e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0]),1040,["input-value","value","size","focused","format","visible","disabled","error","readonly","editable","allow-clear","placeholder","onClear"]))]),_:3},16,["position","disabled","popup-visible","unmount-on-close","popup-container","onPopupVisibleChange"])}var i_=We(k5e,[["render",O5e]]);const D5e=Object.assign(i_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+i_.name,i_)}}),Jj=Symbol("ArcoTimeline");var I5e=Object.defineProperty,kB=Object.getOwnPropertySymbols,L5e=Object.prototype.hasOwnProperty,B5e=Object.prototype.propertyIsEnumerable,OB=(e,t,i)=>t in e?I5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,z5e=(e,t)=>{for(var i in t||(t={}))L5e.call(t,i)&&OB(e,i,t[i]);if(kB)for(var i of kB(t))B5e.call(t,i)&&OB(e,i,t[i]);return e};const R5e=(e,t,i,r)=>{let a=["left","right"];i==="horizontal"&&(a=["top","bottom"]);const n=t==="alternate"?r||a[e%2]:t;return a.indexOf(n)>-1?n:a[0]},N5e=se({name:"TimelineItem",props:{dotColor:{type:String},dotType:{type:String,default:"solid"},lineType:{type:String,default:"solid"},lineColor:{type:String},label:{type:String},position:{type:String}},setup(e){const t=Se("timeline-item"),i=xs(),r=Ai(Jj,{}),a=T(()=>{var h,p,f;return(f=(p=r.items)==null?void 0:p.indexOf((h=i?.uid)!=null?h:-1))!=null?f:-1}),n=T(()=>{var h;return(h=r?.direction)!=null?h:"vertical"}),s=T(()=>{var h;return(h=r?.labelPosition)!=null?h:"same"}),o=T(()=>{const{items:h=[],reverse:p,labelPosition:f,mode:v="left"}=r,m=n.value,g=R5e(a.value,v,m,e.position);return[t,{[`${t}-${m}-${g}`]:m,[`${t}-label-${f}`]:f,[`${t}-last`]:a.value===(p===!0?0:h.length-1)}]}),l=T(()=>[`${t}-dot-line`,`${t}-dot-line-is-${n.value}`]),u=T(()=>{const{direction:h}=r||{};return z5e({[h==="horizontal"?"borderTopStyle":"borderLeftStyle"]:e.lineType},e.lineColor?{borderColor:e.lineColor}:{})}),c=T(()=>[`${t}-dot`,`${t}-dot-${e.dotType}`]),d=T(()=>({[e.dotType==="solid"?"backgroundColor":"borderColor"]:e.dotColor}));return{cls:o,dotLineCls:l,dotTypeCls:c,prefixCls:t,computedDotLineStyle:u,computedDotStyle:d,labelPosition:s}}});function V5e(e,t,i,r,a,n){return N(),ee("div",{role:"listitem",class:Y(e.cls)},[ve("div",{class:Y(`${e.prefixCls}-dot-wrapper`)},[ve("div",{class:Y(e.dotLineCls),style:It(e.computedDotLineStyle)},null,6),ve("div",{class:Y(`${e.prefixCls}-dot-content`)},[e.$slots.dot?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-dot-custom`)},[ye(e.$slots,"dot")],2)):(N(),ee("div",{key:1,class:Y(e.dotTypeCls),style:It(e.computedDotStyle)},null,6))],2)],2),ve("div",{class:Y(`${e.prefixCls}-content-wrapper`)},[e.$slots.default?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-content`)},[ye(e.$slots,"default")],2)):Me("v-if",!0),e.labelPosition!=="relative"?(N(),ee("div",{key:1,class:Y(`${e.prefixCls}-label`)},[e.$slots.label?ye(e.$slots,"label",{key:0}):(N(),ee(Xt,{key:1},[ti(Bt(e.label),1)],2112))],2)):Me("v-if",!0)],2),e.labelPosition==="relative"?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-label`)},[e.$slots.label?ye(e.$slots,"label",{key:0}):(N(),ee(Xt,{key:1},[ti(Bt(e.label),1)],2112))],2)):Me("v-if",!0)],2)}var $h=We(N5e,[["render",V5e]]),r_=se({name:"Timeline",components:{Item:$h,Spin:Do},props:{reverse:{type:Boolean},direction:{type:String,default:"vertical"},mode:{type:String,default:"left"},pending:{type:[Boolean,String]},labelPosition:{type:String,default:"same"}},setup(e,{slots:t}){const i=Se("timeline"),r=T(()=>e.pending||t.pending),{children:a,components:n}=Zm("TimelineItem"),{reverse:s,direction:o,labelPosition:l,mode:u}=yt(e),c=gt({items:n,direction:o,reverse:s,labelPosition:l,mode:u});dr(Jj,c);const d=T(()=>[i,`${i}-${e.mode}`,`${i}-direction-${e.direction}`,{[`${i}-is-reverse`]:e.reverse}]);return()=>{var h,p;return r.value?a.value=(h=t.default)==null?void 0:h.call(t).concat(_($h,{lineType:"dashed"},{default:()=>[e.pending!==!0&&_("div",null,[e.pending])],dot:()=>{var f,v;return(v=(f=t.dot)==null?void 0:f.call(t))!=null?v:_(Do,{size:12},null)}})):a.value=(p=t.default)==null?void 0:p.call(t),_("div",{role:"list",class:d.value},[a.value])}}});const F5e=Object.assign(r_,{Item:$h,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+r_.name,r_),e.component(i+$h.name,$h)}}),j5e=se({name:"IconDelete",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-delete`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),$5e=["stroke-width","stroke-linecap","stroke-linejoin"],U5e=ve("path",{d:"M5 11h5.5m0 0v29a1 1 0 0 0 1 1h25a1 1 0 0 0 1-1V11m-27 0H16m21.5 0H43m-5.5 0H32m-16 0V7h16v4m-16 0h16M20 18v15m8-15v15"},null,-1),W5e=[U5e];function H5e(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},W5e,14,$5e)}var a_=We(j5e,[["render",H5e]]);const RP=Object.assign(a_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+a_.name,a_)}}),NP=Symbol("ArcoTransfer");var G5e=se({name:"TransferListItem",props:{type:{type:String},data:{type:Object,required:!0},allowClear:{type:Boolean},disabled:{type:Boolean},draggable:{type:Boolean},simple:Boolean},setup(e){const t=Se("transfer-list-item"),i=Ai(NP,void 0),r=()=>{e.simple&&!e.disabled&&i?.moveTo([e.data.value],e.type==="target"?"source":"target")},a=T(()=>[t,{[`${t}-disabled`]:e.disabled,[`${t}-draggable`]:e.draggable}]),n=()=>{i?.moveTo([e.data.value],"source")};return()=>{var s,o,l;return _("div",{class:a.value,onClick:r},[e.allowClear||e.simple?_("span",{class:`${t}-content`},[(l=(o=i==null?void 0:(s=i.slots).item)==null?void 0:o.call(s,{label:e.data.label,value:e.data.value}))!=null?l:e.data.label]):_(Eo,{class:[`${t}-content`,`${t}-checkbox`],modelValue:i?.selected,value:e.data.value,onChange:u=>i?.onSelect(u),uninjectGroupContext:!0,disabled:e.disabled},{default:()=>{var u,c,d;return[(d=(c=i==null?void 0:(u=i.slots).item)==null?void 0:c.call(u,{label:e.data.label,value:e.data.value}))!=null?d:e.data.label]}}),e.allowClear&&!e.disabled&&_(Ur,{class:`${t}-remove-btn`,onClick:n},{default:()=>[_(kn,null,null)]})])}}});const q5e=se({name:"TransferView",components:{Empty:n0,Checkbox:Eo,IconHover:Ur,IconDelete:RP,InputSearch:mc.Search,List:Oj,TransferListItem:G5e,Scrollbar:Io},props:{type:{type:String},dataInfo:{type:Object,required:!0},title:String,data:{type:Array,required:!0},disabled:Boolean,allowClear:Boolean,selected:{type:Array,required:!0},showSearch:Boolean,showSelectAll:Boolean,simple:Boolean,inputSearchProps:{type:Object}},emits:["search"],setup(e,{emit:t}){const i=Se("transfer-view"),r=ie(""),a=Ai(NP,void 0),n=T(()=>e.dataInfo.selected.length),s=T(()=>e.dataInfo.data.length),o=T(()=>e.dataInfo.selected.length>0&&e.dataInfo.selected.length===e.dataInfo.allValidValues.length),l=T(()=>e.dataInfo.selected.length>0&&e.dataInfo.selected.length<e.dataInfo.allValidValues.length),u=p=>{p?a?.onSelect([...e.selected,...e.dataInfo.allValidValues]):a?.onSelect(e.selected.filter(f=>!e.dataInfo.allValidValues.includes(f)))},c=T(()=>e.dataInfo.data.filter(p=>r.value?p.label.includes(r.value):!0));return{prefixCls:i,filteredData:c,filter:r,checked:o,indeterminate:l,countSelected:n,countRendered:s,handleSelectAllChange:u,handleSearch:p=>{t("search",p,e.type)},handleClear:()=>{a?.moveTo(e.dataInfo.allValidValues,"source")},transferCtx:a}}});function Y5e(e,t,i,r,a,n){const s=be("checkbox"),o=be("icon-delete"),l=be("icon-hover"),u=be("input-search"),c=be("transfer-list-item"),d=be("list"),h=be("Scrollbar"),p=be("Empty");return N(),ee("div",{class:Y(e.prefixCls)},[ve("div",{class:Y(`${e.prefixCls}-header`)},[ye(e.$slots,"title",{countTotal:e.dataInfo.data.length,countSelected:e.dataInfo.selected.length,searchValue:e.filter,checked:e.checked,indeterminate:e.indeterminate,onSelectAllChange:e.handleSelectAllChange,onClear:e.handleClear},()=>[ve("span",{class:Y(`${e.prefixCls}-header-title`)},[e.allowClear||e.simple||!e.showSelectAll?(N(),ee("span",{key:0,class:Y(`${e.prefixCls}-header-title-simple`)},Bt(e.title),3)):(N(),De(s,{key:1,"model-value":e.checked,indeterminate:e.indeterminate,disabled:e.disabled,"uninject-group-context":"",onChange:e.handleSelectAllChange},{default:He(()=>[ti(Bt(e.title),1)]),_:1},8,["model-value","indeterminate","disabled","onChange"]))],2),e.allowClear?(N(),De(l,{key:0,disabled:e.disabled,class:Y(`${e.prefixCls}-header-clear-btn`),onClick:e.handleClear},{default:He(()=>[_(o)]),_:1},8,["disabled","class","onClick"])):e.simple?Me("v-if",!0):(N(),ee("span",{key:1,class:Y(`${e.prefixCls}-header-count`)},Bt(e.dataInfo.selected.length)+" / "+Bt(e.dataInfo.data.length),3))])],2),e.showSearch?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-search`)},[_(u,it({modelValue:e.filter,"onUpdate:modelValue":t[0]||(t[0]=f=>e.filter=f),disabled:e.disabled},e.inputSearchProps,{onChange:e.handleSearch}),null,16,["modelValue","disabled","onChange"])],2)):Me("v-if",!0),ve("div",{class:Y(`${e.prefixCls}-body`)},[e.filteredData.length>0?(N(),De(h,{key:0},{default:He(()=>{var f,v;return[ye(e.$slots,"default",{data:e.filteredData,selectedKeys:(f=e.transferCtx)==null?void 0:f.selected,onSelect:(v=e.transferCtx)==null?void 0:v.onSelect},()=>[_(d,{class:Y(`${e.prefixCls}-list`),bordered:!1,scrollbar:!1},{default:He(()=>[(N(!0),ee(Xt,null,Br(e.filteredData,m=>(N(),De(c,{key:m.value,type:e.type,data:m,simple:e.simple,"allow-clear":e.allowClear,disabled:e.disabled||m.disabled},null,8,["type","data","simple","allow-clear","disabled"]))),128))]),_:1},8,["class"])])]}),_:3})):(N(),De(p,{key:1,class:Y(`${e.prefixCls}-empty`)},null,8,["class"]))],2)],2)}var X5e=We(q5e,[["render",Y5e]]);const K5e=se({name:"Transfer",components:{ArcoButton:un,TransferView:X5e,IconLeft:yu,IconRight:zo},props:{data:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:()=>[]},selected:{type:Array,default:void 0},defaultSelected:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},oneWay:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},showSelectAll:{type:Boolean,default:!0},title:{type:Array,default:()=>["Source","Target"]},sourceInputSearchProps:{type:Object},targetInputSearchProps:{type:Object}},emits:{"update:modelValue":e=>!0,"update:selected":e=>!0,change:e=>!0,select:e=>!0,search:(e,t)=>!0},setup(e,{emit:t,slots:i}){const{mergedDisabled:r,eventHandlers:a}=Wr({disabled:Os(e,"disabled")}),n=Se("transfer"),s=ie(e.defaultValue),o=T(()=>{var y;return(y=e.modelValue)!=null?y:s.value}),l=ie(e.defaultSelected),u=T(()=>{var y;return(y=e.selected)!=null?y:l.value}),c=T(()=>{var y;return(y=e.title)==null?void 0:y[0]}),d=T(()=>{var y;return(y=e.title)==null?void 0:y[1]}),h=T(()=>{const y={data:[],allValidValues:[],selected:[],validSelected:[]},b={data:[],allValidValues:[],selected:[],validSelected:[]};for(const x of e.data)o.value.includes(x.value)?(b.data.push(x),x.disabled||b.allValidValues.push(x.value),u.value.includes(x.value)&&(b.selected.push(x.value),x.disabled||b.validSelected.push(x.value))):(y.data.push(x),x.disabled||y.allValidValues.push(x.value),u.value.includes(x.value)&&(y.selected.push(x.value),x.disabled||y.validSelected.push(x.value)));return{sourceInfo:y,targetInfo:b}}),p=(y,b)=>{t("search",y,b)},f=(y,b)=>{var x,S;const w=b==="target"?[...o.value,...y]:o.value.filter(E=>!y.includes(E));m(h.value[b==="target"?"targetInfo":"sourceInfo"].selected),s.value=w,t("update:modelValue",w),t("change",w),(S=(x=a.value)==null?void 0:x.onChange)==null||S.call(x)},v=y=>{const b=y==="target"?h.value.sourceInfo.validSelected:h.value.targetInfo.validSelected;f(b,y)},m=y=>{l.value=y,t("update:selected",y),t("select",y)};dr(NP,gt({selected:u,slots:i,moveTo:f,onSelect:m}));const g=T(()=>[n,{[`${n}-simple`]:e.simple,[`${n}-disabled`]:r.value}]);return{prefixCls:n,cls:g,dataInfo:h,computedSelected:u,mergedDisabled:r,sourceTitle:c,targetTitle:d,handleClick:v,handleSearch:p}}});function Z5e(e,t,i,r,a,n){const s=be("transfer-view"),o=be("icon-right"),l=be("arco-button"),u=be("icon-left");return N(),ee("div",{class:Y(e.cls)},[_(s,{type:"source",class:Y(`${e.prefixCls}-view-source`),title:e.sourceTitle,"data-info":e.dataInfo.sourceInfo,data:e.dataInfo.sourceInfo.data,disabled:e.mergedDisabled,selected:e.computedSelected,"show-search":e.showSearch,"show-select-all":e.showSelectAll,simple:e.simple,"input-search-props":e.sourceInputSearchProps,onSearch:e.handleSearch},$r({_:2},[e.$slots.source?{name:"default",fn:He(c=>[ye(e.$slots,"source",br(Ea(c)))])}:void 0,e.$slots["source-title"]?{name:"title",fn:He(c=>[ye(e.$slots,"source-title",br(Ea(c)))])}:void 0]),1032,["class","title","data-info","data","disabled","selected","show-search","show-select-all","simple","input-search-props","onSearch"]),e.simple?Me("v-if",!0):(N(),ee("div",{key:0,class:Y([`${e.prefixCls}-operations`])},[_(l,{tabindex:"-1","aria-label":"Move selected right",size:"small",shape:"round",disabled:e.dataInfo.sourceInfo.validSelected.length===0,onClick:t[0]||(t[0]=c=>e.handleClick("target"))},{icon:He(()=>[ye(e.$slots,"to-target-icon",{},()=>[_(o)])]),_:3},8,["disabled"]),e.oneWay?Me("v-if",!0):(N(),De(l,{key:0,tabindex:"-1","aria-label":"Move selected left",size:"small",shape:"round",disabled:e.dataInfo.targetInfo.validSelected.length===0,onClick:t[1]||(t[1]=c=>e.handleClick("source"))},{icon:He(()=>[ye(e.$slots,"to-source-icon",{},()=>[_(u)])]),_:3},8,["disabled"]))],2)),_(s,{type:"target",class:Y(`${e.prefixCls}-view-target`),title:e.targetTitle,"data-info":e.dataInfo.targetInfo,data:e.dataInfo.targetInfo.data,disabled:e.mergedDisabled,selected:e.computedSelected,"allow-clear":e.oneWay,"show-search":e.showSearch,"show-select-all":e.showSelectAll,simple:e.simple,"input-search-props":e.targetInputSearchProps,onSearch:e.handleSearch},$r({_:2},[e.$slots.target?{name:"default",fn:He(c=>[ye(e.$slots,"target",br(Ea(c)))])}:void 0,e.$slots["target-title"]?{name:"title",fn:He(c=>[ye(e.$slots,"target-title",br(Ea(c)))])}:void 0]),1032,["class","title","data-info","data","disabled","selected","allow-clear","show-search","show-select-all","simple","input-search-props","onSearch"])],2)}var n_=We(K5e,[["render",Z5e]]);const Q5e=Object.assign(n_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+n_.name,n_)}}),e9=Symbol("TreeInjectionKey");function J5e(e){const t=[];function i(r){r&&r.forEach(a=>{t.push(a),i(a.children)})}return i(e),t}function eBe(e){const t=new Map;return e.forEach(i=>{t.set(i.key,i)}),t}function YM(e){return e.selectable&&!e.disabled}function DB(e){return!e.isLeaf&&e.children}function tBe(e){return jn(e.isLeaf)?e.isLeaf:!e.children}function XM(e){return Set.prototype.add.bind(e)}function KM(e){return Set.prototype.delete.bind(e)}function od(e){return e.disabled||e.disableCheckbox?!1:!!e.checkable}function VP(e){var t;const i=[];return(t=e.children)==null||t.forEach(r=>{od(r)&&i.push(r.key,...VP(r))}),i}function t9(e){var t;const{node:i,checkedKeySet:r,indeterminateKeySet:a}=e;let n=i.parent;for(;n;){if(od(n)){const s=n.key,o=((t=n.children)==null?void 0:t.filter(od))||[];let l=0;const u=o.length;o.some(({key:c})=>{if(r.has(c))l+=1;else if(a.has(c))return l+=.5,!0;return!1}),l&&l!==u?a.add(s):a.delete(s),l&&l===u?r.add(s):r.delete(s)}n=n.parent}}function ZM(e){const{node:t,checked:i,checkedKeys:r,indeterminateKeys:a,checkStrictly:n=!1}=e,{key:s}=t,o=new Set(r),l=new Set(a);if(i?o.add(s):o.delete(s),l.delete(s),!n){const u=VP(t);i?u.forEach(XM(o)):u.forEach(KM(o)),u.forEach(KM(l)),t9({node:t,checkedKeySet:o,indeterminateKeySet:l})}return[[...o],[...l]]}function iBe(e){const{initCheckedKeys:t,key2TreeNode:i,checkStrictly:r,onlyCheckLeaf:a}=e,n=new Set,s=new Set,o=new Set;return r?t.forEach(XM(n)):t.forEach(l=>{var u;const c=i.get(l);if(!c||s.has(l)||a&&((u=c.children)!=null&&u.length))return;const d=VP(c);d.forEach(XM(s)),d.forEach(KM(o)),n.add(l),o.delete(l),t9({node:c,checkedKeySet:n,indeterminateKeySet:o})}),[[...n,...s],[...o]]}function C1(){return Ai(e9)||{}}const rBe=se({name:"IconFile",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-file`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),aBe=["stroke-width","stroke-linecap","stroke-linejoin"],nBe=ve("path",{d:"M16 21h16m-16 8h10m11 13H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),sBe=[nBe];function oBe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},sBe,14,aBe)}var s_=We(rBe,[["render",oBe]]);const i9=Object.assign(s_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+s_.name,s_)}});var lBe=se({name:"TreeNodeSwitcher",components:{IconLoading:$n,RenderFunction:bu},props:{prefixCls:String,loading:Boolean,showLine:Boolean,treeNodeData:{type:Object},icons:{type:Object},nodeStatus:{type:Object}},emits:["click"],setup(e,{slots:t,emit:i}){const{icons:r,nodeStatus:a,treeNodeData:n}=yt(e),s=C1(),o=vo(t,"switcher-icon"),l=vo(t,"loading-icon");return{getSwitcherIcon:()=>{var u,c,d;const h=(c=(u=r?.value)==null?void 0:u.switcherIcon)!=null?c:o.value;return h?h(a.value):(d=s.switcherIcon)==null?void 0:d.call(s,n.value,a.value)},getLoadingIcon:()=>{var u,c,d;const h=(c=(u=r?.value)==null?void 0:u.loadingIcon)!=null?c:l.value;return h?h(a.value):(d=s.loadingIcon)==null?void 0:d.call(s,n.value,a.value)},onClick(u){i("click",u)}}},render(){var e,t,i;const{prefixCls:r,getSwitcherIcon:a,getLoadingIcon:n,onClick:s,nodeStatus:o={},loading:l,showLine:u}=this,{expanded:c,isLeaf:d}=o;if(l)return(e=n())!=null?e:Ws($n);let h=null,p=!1;if(d)u&&(h=(i=a())!=null?i:Ws(i9));else{const v=u?Ws("span",{class:`${r}-${c?"minus":"plus"}-icon`}):Ws(Zj);h=(t=a())!=null?t:v,p=!u}if(!h)return null;const f=Ws("span",{class:`${r}-switcher-icon`,onClick:s},h);return p?Ws(Ur,{class:`${r}-icon-hover`},()=>f):f}}),uBe=Object.defineProperty,cBe=Object.defineProperties,dBe=Object.getOwnPropertyDescriptors,IB=Object.getOwnPropertySymbols,hBe=Object.prototype.hasOwnProperty,pBe=Object.prototype.propertyIsEnumerable,LB=(e,t,i)=>t in e?uBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,QM=(e,t)=>{for(var i in t||(t={}))hBe.call(t,i)&&LB(e,i,t[i]);if(IB)for(var i of IB(t))pBe.call(t,i)&&LB(e,i,t[i]);return e},BB=(e,t)=>cBe(e,dBe(t));const r9=(()=>{let e=0;return()=>(e+=1,`__arco_tree${e}`)})();function fBe(e,t){return!!(ei(e)?t:e)}function mBe(e,t){const i=QM({},e);return t&&Object.keys(t).forEach(a=>{const n=t[a];n!==a&&(i[a]=e[n],delete i[n])}),i}function zB({subEnable:e,superEnable:t,isLeaf:i,treeNodeData:r,level:a}){return ei(e)?Zt(t)?t(r,{isLeaf:i,level:a}):t??!1:e}function vBe(e){var t,i;const{treeNodeData:r,parentNode:a,isTail:n=!0,treeProps:s}=e,{fieldNames:o}=s||{},l=mBe(r,o),u=s.loadMore?!!l.isLeaf:!((t=l.children)!=null&&t.length),c=a?a.level+1:0,d=BB(QM({},ln(l,["children"])),{key:(i=l.key)!=null?i:r9(),selectable:zB({subEnable:l.selectable,superEnable:s?.selectable,isLeaf:u,level:c,treeNodeData:r}),disabled:!!l.disabled,disableCheckbox:!!l.disableCheckbox,checkable:zB({subEnable:l.checkable,superEnable:s?.checkable,isLeaf:u,level:c,treeNodeData:r}),isLeaf:u,isTail:n,blockNode:!!s?.blockNode,showLine:!!s?.showLine,level:c,lineless:a?[...a.lineless,a.isTail]:[],draggable:fBe(l.draggable,s?.draggable)});return BB(QM({},d),{treeNodeProps:d,treeNodeData:r,parent:a,parentKey:a?.key,pathParentKeys:a?[...a.pathParentKeys,a.key]:[]})}function gBe(e,t){function i(r,a){if(!r)return;const{fieldNames:n}=t,s=[];return r.forEach((o,l)=>{const u=vBe({treeNodeData:o,treeProps:t,parentNode:a,isTail:l===r.length-1});u.children=i(o[n?.children||"children"],u),s.push(u)}),s}return i(e)}function a9(){const e=xs(),t=()=>{var r;return(r=e?.vnode.key)!=null?r:r9()},i=ie(t());return Ss(()=>{i.value=t()}),i}function yBe(e){const{key:t,refTitle:i}=yt(e),r=C1(),a=ie(!1),n=ie(!1),s=ie(!1),o=ie(0),l=ud(u=>{if(!i.value)return;const c=i.value.getBoundingClientRect(),d=window.pageYOffset+c.top,{pageY:h}=u,p=c.height/4,f=h-d;o.value=f<p?-1:f<c.height-p?0:1,s.value=r.allowDrop?r.allowDrop(t.value,o.value):!0});return{isDragOver:a,isDragging:n,isAllowDrop:s,dropPosition:o,setDragStatus(u,c){switch(u){case"dragStart":n.value=!0,o.value=0,r.onDragStart&&r.onDragStart(t.value,c);break;case"dragEnd":n.value=!1,a.value=!1,o.value=0,l.cancel(),r.onDragEnd&&r.onDragEnd(t.value,c);break;case"dragOver":a.value=!0,l(c),r.onDragOver&&r.onDragOver(t.value,c);break;case"dragLeave":a.value=!1,o.value=0,l.cancel(),r.onDragLeave&&r.onDragLeave(t.value,c);break;case"drop":r.onDrop&&r.onDrop(t.value,o.value,c),a.value=!1,o.value=0,l.cancel();break}}}}function bBe(e){return bi(e)?e:[e]}const wBe=se({name:"BaseTreeNode",components:{NodeSwitcher:lBe,Checkbox:Eo,RenderFunction:bu,IconDragDotVertical:AP},props:{title:{type:String},selectable:{type:Boolean},disabled:{type:Boolean},disableCheckbox:{type:Boolean},checkable:{type:Boolean},draggable:{type:Boolean},isLeaf:{type:Boolean},icon:{type:Function},switcherIcon:{type:Function},loadingIcon:{type:Function},dragIcon:{type:Function},isTail:{type:Boolean},blockNode:{type:Boolean},showLine:{type:Boolean},level:{type:Number,default:0},lineless:{type:Array,default:()=>[]}},setup(e){const t=a9(),i=Se("tree-node"),r=C1(),a=T(()=>{var z;return(z=r.key2TreeNode)==null?void 0:z.get(t.value)}),n=T(()=>a.value.treeNodeData),s=T(()=>a.value.children),o=T(()=>{var z;const B=(z=r.treeProps)==null?void 0:z.actionOnNodeClick;return B?bBe(B):[]}),{isLeaf:l,isTail:u,selectable:c,disabled:d,disableCheckbox:h,draggable:p}=yt(e),f=T(()=>{var z;return[`${i}`,{[`${i}-selected`]:M.value,[`${i}-is-leaf`]:l.value,[`${i}-is-tail`]:u.value,[`${i}-expanded`]:P.value,[`${i}-disabled-selectable`]:!c.value&&!((z=r.treeProps)!=null&&z.disableSelectActionOnly),[`${i}-disabled`]:d.value}]}),v=ie(),{isDragOver:m,isDragging:g,isAllowDrop:y,dropPosition:b,setDragStatus:x}=yBe(gt({key:t,refTitle:v})),S=T(()=>[`${i}-title`,{[`${i}-title-draggable`]:p.value,[`${i}-title-gap-top`]:m.value&&y.value&&b.value<0,[`${i}-title-gap-bottom`]:m.value&&y.value&&b.value>0,[`${i}-title-highlight`]:!g.value&&m.value&&y.value&&b.value===0,[`${i}-title-dragging`]:g.value,[`${i}-title-block`]:a.value.blockNode}]),w=T(()=>{var z,B;return(B=(z=r.checkedKeys)==null?void 0:z.includes)==null?void 0:B.call(z,t.value)}),E=T(()=>{var z,B;return(B=(z=r.indeterminateKeys)==null?void 0:z.includes)==null?void 0:B.call(z,t.value)}),M=T(()=>{var z,B;return(B=(z=r.selectedKeys)==null?void 0:z.includes)==null?void 0:B.call(z,t.value)}),P=T(()=>{var z,B;return(B=(z=r.expandedKeys)==null?void 0:z.includes)==null?void 0:B.call(z,t.value)}),A=T(()=>{var z,B;return(B=(z=r.loadingKeys)==null?void 0:z.includes)==null?void 0:B.call(z,t.value)}),k=T(()=>r.dragIcon),I=T(()=>r.nodeIcon);function O(z){var B,W;l.value||(!((B=s.value)!=null&&B.length)&&Zt(r.onLoadMore)?r.onLoadMore(t.value):(W=r?.onExpand)==null||W.call(r,!P.value,t.value,z))}const D=gt({loading:A,checked:w,selected:M,indeterminate:E,expanded:P,isLeaf:l}),F=T(()=>r.nodeTitle?()=>{var z;return(z=r.nodeTitle)==null?void 0:z.call(r,n.value,D)}:void 0),U=T(()=>r.nodeExtra?()=>{var z;return(z=r.nodeExtra)==null?void 0:z.call(r,n.value,D)}:void 0);return{nodekey:t,refTitle:v,prefixCls:i,classNames:f,titleClassNames:S,indeterminate:E,checked:w,expanded:P,selected:M,treeTitle:F,treeNodeData:n,loading:A,treeDragIcon:k,treeNodeIcon:I,extra:U,nodeStatus:D,onCheckboxChange(z,B){var W;h.value||d.value||(W=r.onCheck)==null||W.call(r,z,t.value,B)},onTitleClick(z){var B;o.value.includes("expand")&&O(z),!(!c.value||d.value)&&((B=r.onSelect)==null||B.call(r,t.value,z))},onSwitcherClick:O,onDragStart(z){var B;if(p.value){z.stopPropagation(),x("dragStart",z);try{(B=z.dataTransfer)==null||B.setData("text/plain","")}catch{}}},onDragEnd(z){p.value&&(z.stopPropagation(),x("dragEnd",z))},onDragOver(z){p&&(z.stopPropagation(),z.preventDefault(),x("dragOver",z))},onDragLeave(z){p.value&&(z.stopPropagation(),x("dragLeave",z))},onDrop(z){!p.value||!y.value||(z.stopPropagation(),z.preventDefault(),x("drop",z))}}}}),xBe=["data-level","data-key"],SBe=["draggable"];function CBe(e,t,i,r,a,n){const s=be("NodeSwitcher"),o=be("Checkbox"),l=be("RenderFunction"),u=be("IconDragDotVertical");return N(),ee("div",{class:Y(e.classNames),"data-level":e.level,"data-key":e.nodekey},[Me(" 缩进 "),ve("span",{class:Y(`${e.prefixCls}-indent`)},[(N(!0),ee(Xt,null,Br(e.level,c=>(N(),ee("span",{key:c,class:Y([`${e.prefixCls}-indent-block`,{[`${e.prefixCls}-indent-block-lineless`]:e.lineless[c-1]}])},null,2))),128))],2),Me(" switcher "),ve("span",{class:Y([`${e.prefixCls}-switcher`,{[`${e.prefixCls}-switcher-expanded`]:e.expanded}])},[_(s,{"prefix-cls":e.prefixCls,loading:e.loading,"show-line":e.showLine,"tree-node-data":e.treeNodeData,icons:{switcherIcon:e.switcherIcon,loadingIcon:e.loadingIcon},"node-status":e.nodeStatus,onClick:e.onSwitcherClick},$r({_:2},[e.$slots["switcher-icon"]?{name:"switcher-icon",fn:He(()=>[Me(" @slot 定制 switcher 图标，会覆盖 Tree 的配置 "),ye(e.$slots,"switcher-icon")])}:void 0,e.$slots["loading-icon"]?{name:"loading-icon",fn:He(()=>[Me(" @slot 定制 loading 图标，会覆盖 Tree 的配置 "),ye(e.$slots,"loading-icon")])}:void 0]),1032,["prefix-cls","loading","show-line","tree-node-data","icons","node-status","onClick"])],2),Me(" checkbox "),e.checkable?(N(),De(o,{key:0,disabled:e.disableCheckbox||e.disabled,"model-value":e.checked,indeterminate:e.indeterminate,"uninject-group-context":"",onChange:e.onCheckboxChange},null,8,["disabled","model-value","indeterminate","onChange"])):Me("v-if",!0),Me(" 内容 "),ve("span",{ref:"refTitle",class:Y(e.titleClassNames),draggable:e.draggable,onDragstart:t[0]||(t[0]=(...c)=>e.onDragStart&&e.onDragStart(...c)),onDragend:t[1]||(t[1]=(...c)=>e.onDragEnd&&e.onDragEnd(...c)),onDragover:t[2]||(t[2]=(...c)=>e.onDragOver&&e.onDragOver(...c)),onDragleave:t[3]||(t[3]=(...c)=>e.onDragLeave&&e.onDragLeave(...c)),onDrop:t[4]||(t[4]=(...c)=>e.onDrop&&e.onDrop(...c)),onClick:t[5]||(t[5]=(...c)=>e.onTitleClick&&e.onTitleClick(...c))},[e.$slots.icon||e.icon||e.treeNodeIcon?(N(),ee("span",{key:0,class:Y([`${e.prefixCls}-icon`,`${e.prefixCls}-custom-icon`])},[Me(" 节点图标 "),e.$slots.icon?ye(e.$slots,"icon",br(it({key:0},e.nodeStatus))):e.icon?(N(),De(l,it({key:1,"render-func":e.icon},e.nodeStatus),null,16,["render-func"])):e.treeNodeIcon?(N(),De(l,it({key:2,"render-func":e.treeNodeIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):Me("v-if",!0)],2)):Me("v-if",!0),ve("span",{class:Y(`${e.prefixCls}-title-text`)},[e.treeTitle?(N(),De(l,{key:0,"render-func":e.treeTitle},null,8,["render-func"])):(N(),ee(Xt,{key:1},[Me(" 标题，treeTitle 优先级高于节点的 title "),ye(e.$slots,"title",{title:e.title},()=>[ti(Bt(e.title),1)])],2112)),e.draggable?(N(),ee("span",{key:2,class:Y([`${e.prefixCls}-icon`,`${e.prefixCls}-drag-icon`])},[Me(" 拖拽图标 "),e.$slots["drag-icon"]?ye(e.$slots,"drag-icon",br(it({key:0},e.nodeStatus))):e.dragIcon?(N(),De(l,it({key:1,"render-func":e.dragIcon},e.nodeStatus),null,16,["render-func"])):e.treeDragIcon?(N(),De(l,it({key:2,"render-func":e.treeDragIcon,node:e.treeNodeData},e.nodeStatus),null,16,["render-func","node"])):(N(),De(u,{key:3}))],2)):Me("v-if",!0)],2)],42,SBe),Me(" 额外 "),e.extra?(N(),De(l,{key:1,"render-func":e.extra},null,8,["render-func"])):Me("v-if",!0)],10,xBe)}var JM=We(wBe,[["render",CBe]]);const _Be=se({name:"ExpandTransition",props:{expanded:Boolean},emits:["end"],setup(e,{emit:t}){return{onEnter(i){const r=`${i.scrollHeight}px`;i.style.height=e.expanded?"0":r,i.offsetHeight,i.style.height=e.expanded?r:"0"},onAfterEnter(i){i.style.height=e.expanded?"":"0",t("end")},onBeforeLeave(i){i.style.display="none"}}}});function MBe(e,t,i,r,a,n){return N(),De(rs,{onEnter:e.onEnter,onAfterEnter:e.onAfterEnter,onBeforeLeave:e.onBeforeLeave},{default:He(()=>[ye(e.$slots,"default")]),_:3},8,["onEnter","onAfterEnter","onBeforeLeave"])}var EBe=We(_Be,[["render",MBe]]);const ABe=se({name:"TransitionNodeList",components:{ExpandTransition:EBe,BaseTreeNode:JM},props:{nodeKey:{type:[String,Number],required:!0}},setup(e){const i=[`${Se("tree")}-node-list`],r=C1(),{nodeKey:a}=yt(e),n=T(()=>{var l,u;return(u=(l=r.expandedKeys)==null?void 0:l.includes)==null?void 0:u.call(l,a.value)}),s=T(()=>{var l;const u=new Set(r.expandedKeys||[]),c=(l=r.flattenTreeData)==null?void 0:l.filter(d=>{var h,p;return(h=d.pathParentKeys)!=null&&h.includes(a.value)?!r.filterTreeNode||((p=r.filterTreeNode)==null?void 0:p.call(r,d.treeNodeData)):!1});return c?.filter(d=>{var h;if(n.value)return(h=d.pathParentKeys)==null?void 0:h.every(f=>u.has(f));const p=d.pathParentKeys.indexOf(a.value);return d.pathParentKeys.slice(p+1).every(f=>u.has(f))})}),o=T(()=>{var l,u;return((l=r.currentExpandKeys)==null?void 0:l.includes(a.value))&&((u=s.value)==null?void 0:u.length)});return{classNames:i,visibleNodeList:s,show:o,expanded:n,onTransitionEnd(){var l;(l=r.onExpandEnd)==null||l.call(r,a.value)}}}});function PBe(e,t,i,r,a,n){const s=be("BaseTreeNode"),o=be("ExpandTransition");return N(),De(o,{expanded:e.expanded,onEnd:e.onTransitionEnd},{default:He(()=>[e.show?(N(),ee("div",{key:0,class:Y(e.classNames)},[(N(!0),ee(Xt,null,Br(e.visibleNodeList,l=>(N(),De(s,it({key:l.key},l.treeNodeProps),null,16))),128))],2)):Me("v-if",!0)]),_:1},8,["expanded","onEnd"])}var TBe=We(ABe,[["render",PBe]]),kBe=Object.defineProperty,RB=Object.getOwnPropertySymbols,OBe=Object.prototype.hasOwnProperty,DBe=Object.prototype.propertyIsEnumerable,NB=(e,t,i)=>t in e?kBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,IBe=(e,t)=>{for(var i in t||(t={}))OBe.call(t,i)&&NB(e,i,t[i]);if(RB)for(var i of RB(t))DBe.call(t,i)&&NB(e,i,t[i]);return e},LBe=se({name:"TreeNode",inheritAttrs:!1,props:IBe({},JM.props),setup(e,{slots:t,attrs:i}){const r=a9();return()=>_(Xt,null,[_(JM,it(e,i,{key:r.value}),t),_(TBe,{key:r.value,nodeKey:r.value},null)])}});function BBe(e){const{defaultCheckedKeys:t,checkedKeys:i,key2TreeNode:r,checkStrictly:a,halfCheckedKeys:n,onlyCheckLeaf:s}=yt(e),o=ie(!1),l=ie([]),u=ie([]),c=ie(),d=ie(),h=f=>iBe({initCheckedKeys:f,key2TreeNode:r.value,checkStrictly:a.value,onlyCheckLeaf:s.value}),p=f=>{const v=h(f);[l.value,u.value]=v};return p(i.value||t?.value||[]),on(()=>{i.value?[c.value,d.value]=h(i.value):o.value&&(c.value=void 0,d.value=void 0,l.value=[],u.value=[]),o.value||(o.value=!0)}),{checkedKeys:T(()=>c.value||l.value),indeterminateKeys:T(()=>a.value&&n.value?n.value:d.value||u.value),setCheckedState(f,v,m=!1){return m?p(f):(l.value=f,u.value=v),[l.value,u.value]}}}function n9(e){const{treeData:t,fieldNames:i,selectable:r,showLine:a,blockNode:n,checkable:s,loadMore:o,draggable:l}=yt(e),u=ie([]);on(()=>{var h,p;u.value=gBe(t.value||[],{selectable:(h=r?.value)!=null?h:!1,showLine:!!a?.value,blockNode:!!n?.value,checkable:(p=s?.value)!=null?p:!1,fieldNames:i?.value,loadMore:!!o?.value,draggable:!!l?.value})});const c=T(()=>J5e(u.value)),d=T(()=>eBe(c.value));return{treeData:u,flattenTreeData:c,key2TreeNode:d}}const zBe=se({name:"Tree",components:{VirtualList:Tp,TreeNode:LBe},props:{size:{type:String,default:"medium"},blockNode:{type:Boolean},defaultExpandAll:{type:Boolean,default:!0},multiple:{type:Boolean},checkable:{type:[Boolean,String,Function],default:!1},selectable:{type:[Boolean,Function],default:!0},checkStrictly:{type:Boolean},checkedStrategy:{type:String,default:"all"},defaultSelectedKeys:{type:Array},selectedKeys:{type:Array},defaultCheckedKeys:{type:Array},checkedKeys:{type:Array},defaultExpandedKeys:{type:Array},expandedKeys:{type:Array},data:{type:Array,default:()=>[]},fieldNames:{type:Object},showLine:{type:Boolean},loadMore:{type:Function},draggable:{type:Boolean},allowDrop:{type:Function},filterTreeNode:{type:Function},searchValue:{type:String,default:""},virtualListProps:{type:Object},defaultExpandSelected:{type:Boolean},defaultExpandChecked:{type:Boolean},autoExpandParent:{type:Boolean,default:!0},halfCheckedKeys:{type:Array},onlyCheckLeaf:{type:Boolean,default:!1},animation:{type:Boolean,default:!0},actionOnNodeClick:{type:String},disableSelectActionOnly:{type:Boolean,default:!1}},emits:{select:(e,t)=>!0,"update:selectedKeys":e=>!0,check:(e,t)=>!0,"update:checkedKeys":e=>!0,"update:halfCheckedKeys":e=>!0,expand:(e,t)=>!0,"update:expandedKeys":e=>!0,dragStart:(e,t)=>!0,dragEnd:(e,t)=>!0,dragOver:(e,t)=>!0,dragLeave:(e,t)=>!0,drop:e=>!0},setup(e,{emit:t,slots:i}){const{data:r,showLine:a,multiple:n,loadMore:s,checkStrictly:o,checkedKeys:l,defaultCheckedKeys:u,selectedKeys:c,defaultSelectedKeys:d,expandedKeys:h,defaultExpandedKeys:p,checkedStrategy:f,selectable:v,checkable:m,blockNode:g,fieldNames:y,size:b,defaultExpandAll:x,filterTreeNode:S,draggable:w,allowDrop:E,defaultExpandSelected:M,defaultExpandChecked:P,autoExpandParent:A,halfCheckedKeys:k,onlyCheckLeaf:I,animation:O}=yt(e),D=Se("tree"),F=T(()=>[`${D}`,{[`${D}-checkable`]:m.value,[`${D}-show-line`]:a.value},`${D}-size-${b.value}`]),U=vo(i,"switcher-icon"),z=vo(i,"loading-icon"),B=vo(i,"drag-icon"),W=vo(i,"icon"),R=vo(i,"title"),$=vo(i,"extra"),{treeData:q,flattenTreeData:Z,key2TreeNode:G}=n9(gt({treeData:r,selectable:v,showLine:a,blockNode:g,checkable:m,fieldNames:y,loadMore:s,draggable:w})),{checkedKeys:X,indeterminateKeys:J,setCheckedState:pe}=BBe(gt({defaultCheckedKeys:u,checkedKeys:l,checkStrictly:o,key2TreeNode:G,halfCheckedKeys:k,onlyCheckLeaf:I})),[fe,de]=ja(d?.value||[],gt({value:c})),ge=ie([]),me=ie();function ke(){if(p?.value){const ct=new Set([]);return p.value.forEach(mt=>{if(ct.has(mt))return;const Et=G.value.get(mt);Et&&[...A.value?Et.pathParentKeys:[],mt].forEach(Gt=>ct.add(Gt))}),[...ct]}if(x.value)return Z.value.filter(ct=>ct.children&&ct.children.length).map(ct=>ct.key);if(M.value||P.value){const ct=new Set([]),mt=Et=>{Et.forEach(Gt=>{const Ht=G.value.get(Gt);Ht&&(Ht.pathParentKeys||[]).forEach(Ee=>ct.add(Ee))})};return M.value&&mt(fe.value),P.value&&mt(X.value),[...ct]}return[]}const[ce,le]=ja(ke(),gt({value:h})),xe=ie([]),Ne=T(()=>{const ct=new Set(ce.value),mt=new Set(xe.value);return Z.value.filter(Et=>{var Gt;if(!(!S||!S.value||S?.value(Et.treeNodeData)))return!1;const Ee=ei(Et.parentKey),nt=(Gt=Et.pathParentKeys)==null?void 0:Gt.every(St=>ct.has(St)&&!mt.has(St));return Ee||nt})});function pt(ct,mt=f.value){let Et=[...ct];return mt==="parent"?Et=ct.filter(Gt=>{const Ht=G.value.get(Gt);return Ht&&!(!ei(Ht.parentKey)&&ct.includes(Ht.parentKey))}):mt==="child"&&(Et=ct.filter(Gt=>{var Ht,Ee;return!((Ee=(Ht=G.value.get(Gt))==null?void 0:Ht.children)!=null&&Ee.length)})),Et}function at(ct){return ct.map(mt=>{var Et;return((Et=G.value.get(mt))==null?void 0:Et.treeNodeData)||void 0}).filter(Boolean)}function Oe(ct){const{targetKey:mt,targetChecked:Et,newCheckedKeys:Gt,newIndeterminateKeys:Ht,event:Ee}=ct,nt=mt?G.value.get(mt):void 0,St=pt(Gt);t("update:checkedKeys",St),t("update:halfCheckedKeys",Ht),t("check",St,{checked:Et,node:nt?.treeNodeData,checkedNodes:at(St),halfCheckedKeys:Ht,halfCheckedNodes:at(Ht),e:Ee})}function Ye(ct){const{targetKey:mt,targetSelected:Et,newSelectedKeys:Gt,event:Ht}=ct,Ee=mt?G.value.get(mt):void 0;t("update:selectedKeys",Gt),t("select",Gt,{selected:Et,node:Ee?.treeNodeData,selectedNodes:at(Gt),e:Ht})}function xt(ct){const{targetKey:mt,targetExpanded:Et,newExpandedKeys:Gt,event:Ht}=ct,Ee=mt?G.value.get(mt):void 0;t("expand",Gt,{expanded:Et,node:Ee?.treeNodeData,expandedNodes:at(Gt),e:Ht}),t("update:expandedKeys",Gt)}function ne(ct){const[mt,Et]=pe(ct,[],!0);Oe({newCheckedKeys:mt,newIndeterminateKeys:Et})}function K(ct){let mt=ct;!n.value&&ct.length>1&&(mt=[ct[0]]),de(mt),Ye({newSelectedKeys:mt})}function ze(ct){xe.value=[],le(ct),xt({newExpandedKeys:ct})}function ft(ct,mt,Et){if(!ct.length)return;let Gt=[...X.value],Ht=[...J.value];ct.forEach(Ee=>{const nt=G.value.get(Ee);nt&&([Gt,Ht]=ZM({node:nt,checked:mt,checkedKeys:[...Gt],indeterminateKeys:[...Ht],checkStrictly:o.value}))}),pe(Gt,Ht),Oe({targetKey:Et,targetChecked:ei(Et)?void 0:mt,newCheckedKeys:Gt,newIndeterminateKeys:Ht})}function te(ct,mt,Et){if(!ct.length)return;let Gt;if(n.value){const Ht=new Set(fe.value);ct.forEach(Ee=>{mt?Ht.add(Ee):Ht.delete(Ee)}),Gt=[...Ht]}else Gt=mt?[ct[0]]:[];de(Gt),Ye({targetKey:Et,targetSelected:ei(Et)?void 0:mt,newSelectedKeys:Gt})}function Pe(ct,mt,Et){const Gt=new Set(ce.value);ct.forEach(Ee=>{mt?Gt.add(Ee):Gt.delete(Ee),jt(Ee)});const Ht=[...Gt];le(Ht),xt({targetKey:Et,targetExpanded:ei(Et)?void 0:mt,newExpandedKeys:Ht})}function Te(ct,mt,Et){const Gt=G.value.get(mt);if(!Gt)return;const[Ht,Ee]=ZM({node:Gt,checked:ct,checkedKeys:X.value,indeterminateKeys:J.value,checkStrictly:o.value});pe(Ht,Ee),Oe({targetKey:mt,targetChecked:ct,newCheckedKeys:Ht,newIndeterminateKeys:Ee,event:Et})}function Be(ct,mt){if(!G.value.get(ct))return;let Gt,Ht;if(n.value){const Ee=new Set(fe.value);Ht=!Ee.has(ct),Ht?Ee.add(ct):Ee.delete(ct),Gt=[...Ee]}else Ht=!0,Gt=[ct];de(Gt),Ye({targetKey:ct,targetSelected:Ht,newSelectedKeys:Gt,event:mt})}function Le(ct,mt,Et){if(xe.value.includes(mt)||!G.value.get(mt))return;const Ht=new Set(ce.value);ct?Ht.add(mt):Ht.delete(mt);const Ee=[...Ht];le(Ee),O.value&&xe.value.push(mt),xt({targetKey:mt,targetExpanded:ct,newExpandedKeys:Ee,event:Et})}function jt(ct){const mt=xe.value.indexOf(ct);xe.value.splice(mt,1)}const kt=T(()=>s?.value?async ct=>{if(!Zt(s.value))return;const mt=G.value.get(ct);if(!mt)return;const{treeNodeData:Et}=mt;ge.value=[...new Set([...ge.value,ct])];try{await s.value(Et),ge.value=ge.value.filter(Gt=>Gt!==ct),Le(!0,ct),X.value.includes(ct)&&Te(!0,ct)}catch(Gt){ge.value=ge.value.filter(Ht=>Ht!==ct),console.error("[tree]load data error: ",Gt)}}:void 0),Qt=gt({treeProps:e,switcherIcon:U,loadingIcon:z,dragIcon:B,nodeIcon:W,nodeTitle:R,nodeExtra:$,treeData:q,flattenTreeData:Z,key2TreeNode:G,checkedKeys:X,indeterminateKeys:J,selectedKeys:fe,expandedKeys:ce,loadingKeys:ge,currentExpandKeys:xe,onLoadMore:kt,filterTreeNode:S,onCheck:Te,onSelect:Be,onExpand:Le,onExpandEnd:jt,allowDrop(ct,mt){const Et=G.value.get(ct);return Et&&Zt(E.value)?!!E.value({dropNode:Et.treeNodeData,dropPosition:mt}):!0},onDragStart(ct,mt){const Et=G.value.get(ct);me.value=Et,Et&&t("dragStart",mt,Et.treeNodeData)},onDragEnd(ct,mt){const Et=G.value.get(ct);me.value=void 0,Et&&t("dragEnd",mt,Et.treeNodeData)},onDragOver(ct,mt){const Et=G.value.get(ct);Et&&t("dragOver",mt,Et.treeNodeData)},onDragLeave(ct,mt){const Et=G.value.get(ct);Et&&t("dragLeave",mt,Et.treeNodeData)},onDrop(ct,mt,Et){const Gt=G.value.get(ct);me.value&&Gt&&!(Gt.key===me.value.key||Gt.pathParentKeys.includes(me.value.key||""))&&t("drop",{e:Et,dragNode:me.value.treeNodeData,dropNode:Gt.treeNodeData,dropPosition:mt})}});return dr(e9,Qt),{classNames:F,visibleTreeNodeList:Ne,treeContext:Qt,virtualListRef:ie(),computedSelectedKeys:fe,computedExpandedKeys:ce,computedCheckedKeys:X,computedIndeterminateKeys:J,getPublicCheckedKeys:pt,getNodes:at,internalCheckNodes:ft,internalSetCheckedKeys:ne,internalSelectNodes:te,internalSetSelectedKeys:K,internalExpandNodes:Pe,internalSetExpandedKeys:ze}},methods:{toggleCheck(e,t){const{key2TreeNode:i,onCheck:r,checkedKeys:a}=this.treeContext,n=!a.includes(e),s=i.get(e);s&&od(s)&&r(n,e,t)},scrollIntoView(e){this.virtualListRef&&this.virtualListRef.scrollTo(e)},getSelectedNodes(){return this.getNodes(this.computedSelectedKeys)},getCheckedNodes(e={}){const{checkedStrategy:t,includeHalfChecked:i}=e,r=this.getPublicCheckedKeys(this.computedCheckedKeys,t);return[...this.getNodes(r),...i?this.getHalfCheckedNodes():[]]},getHalfCheckedNodes(){return this.getNodes(this.computedIndeterminateKeys)},getExpandedNodes(){return this.getNodes(this.computedExpandedKeys)},checkAll(e=!0){const{key2TreeNode:t}=this.treeContext,i=e?[...t.keys()].filter(r=>{const a=t.get(r);return a&&od(a)}):[];this.internalSetCheckedKeys(i)},checkNode(e,t=!0,i=!1){const{checkStrictly:r,treeContext:a}=this,{key2TreeNode:n}=a,s=bi(e),o=(s?e:[e]).filter(l=>{const u=n.get(l);return u&&od(u)&&(r||!i||tBe(u))});this.internalCheckNodes(o,t,s?void 0:e)},selectAll(e=!0){const{key2TreeNode:t}=this.treeContext,i=e?[...t.keys()].filter(r=>{const a=t.get(r);return a&&YM(a)}):[];this.internalSetSelectedKeys(i)},selectNode(e,t=!0){const{key2TreeNode:i}=this.treeContext,r=bi(e),a=(r?e:[e]).filter(n=>{const s=i.get(n);return s&&YM(s)});this.internalSelectNodes(a,t,r?void 0:e)},expandAll(e=!0){const{key2TreeNode:t}=this.treeContext,i=e?[...t.keys()].filter(r=>{const a=t.get(r);return a&&DB(a)}):[];this.internalSetExpandedKeys(i)},expandNode(e,t=!0){const{key2TreeNode:i}=this.treeContext,r=bi(e),a=(r?e:[e]).filter(n=>{const s=i.get(n);return s&&DB(s)});this.internalExpandNodes(a,t,r?void 0:e)}}});function RBe(e,t,i,r,a,n){const s=be("TreeNode"),o=be("VirtualList");return N(),ee("div",{class:Y(e.classNames)},[e.virtualListProps?(N(),De(o,it({key:0,ref:"virtualListRef"},e.virtualListProps,{data:e.visibleTreeNodeList}),{item:He(({item:l})=>[_(s,it({key:`${e.searchValue}-${l.key}`},l.treeNodeProps),null,16)]),_:1},16,["data"])):(N(!0),ee(Xt,{key:1},Br(e.visibleTreeNodeList,l=>(N(),De(s,it({key:l.key},l.treeNodeProps),null,16))),128))],2)}var o_=We(zBe,[["render",RBe]]);const eE=Object.assign(o_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+o_.name,o_)}});var NBe=Object.defineProperty,VBe=Object.defineProperties,FBe=Object.getOwnPropertyDescriptors,VB=Object.getOwnPropertySymbols,jBe=Object.prototype.hasOwnProperty,$Be=Object.prototype.propertyIsEnumerable,FB=(e,t,i)=>t in e?NBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,UBe=(e,t)=>{for(var i in t||(t={}))jBe.call(t,i)&&FB(e,i,t[i]);if(VB)for(var i of VB(t))$Be.call(t,i)&&FB(e,i,t[i]);return e},WBe=(e,t)=>VBe(e,FBe(t));function HBe(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ea(e)}var GBe=se({name:"TreeSelectPanel",components:{Tree:eE},props:{treeProps:{type:Object,default:()=>({})},selectedKeys:{type:Array},showCheckable:{type:Boolean},treeSlots:{type:Object,default:()=>({})},scrollbar:{type:[Boolean,Object],default:!0}},emits:["change"],setup(e,{emit:t}){const{showCheckable:i,selectedKeys:r,treeProps:a,scrollbar:n}=yt(e),{displayScrollbar:s,scrollbarProps:o}=l1(n),l=Se("tree-select"),u=ie(),c=T(()=>WBe(UBe({},a.value),{disableSelectActionOnly:!0,checkedKeys:i.value?r.value:[],selectedKeys:i.value?[]:r.value})),d=(f,v)=>{var m,g;i.value?(g=(m=u.value)==null?void 0:m.toggleCheck)==null||g.call(m,f[0],v):t("change",f)},h=f=>{t("change",f)},p=()=>_(eE,it({ref:u},c.value,{onSelect:d,onCheck:h}),e.treeSlots);return()=>{if(s.value){let f;return _(Io,it({class:`${l}-tree-wrapper`},o.value),HBe(f=p())?f:{default:()=>[f]})}return _("div",{class:`${l}-tree-wrapper`},[p()])}}}),qBe=Object.defineProperty,YBe=Object.defineProperties,XBe=Object.getOwnPropertyDescriptors,jB=Object.getOwnPropertySymbols,KBe=Object.prototype.hasOwnProperty,ZBe=Object.prototype.propertyIsEnumerable,$B=(e,t,i)=>t in e?qBe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,UB=(e,t)=>{for(var i in t||(t={}))KBe.call(t,i)&&$B(e,i,t[i]);if(jB)for(var i of jB(t))ZBe.call(t,i)&&$B(e,i,t[i]);return e},QBe=(e,t)=>YBe(e,XBe(t));function FP(e){return ki(e)}function s9(e){return e!=null&&e!==""}function jP(e){return FP(e)?e.value:e}function JBe(e){return FP(e)?e.label:void 0}function WB(e){const t=jP(e);return s9(t)}function HB(e){return e.map(jP).filter(s9)}function eze(e){var t;const{defaultValue:i,modelValue:r,key2TreeNode:a,multiple:n,treeCheckable:s,fallbackOption:o,fieldNames:l}=yt(e);function u(x){const S=(bi(x)?x:[x]).filter(WB);return n?.value||s?.value?S:S.slice(0,1)}function c(x,S){const w=[],E=x?x.filter(WB):[];if(E.length){const M=new Map;S?.forEach(P=>{M.set(P.value,P)}),E.forEach(P=>{var A,k,I,O,D;const F=jP(P),U=M.get(F),z=a.value.get(F);let B=null;const W=((A=l?.value)==null?void 0:A.title)||"title";if(!z){const R=Zt(o?.value)?o?.value(F):o?.value;if(R===!1)return;ki(R)&&(B=R)}w.push(QBe(UB(UB({},FP(P)?P:{}),U||{}),{value:F,label:(D=(O=(I=(k=JBe(P))!=null?k:z?.title)!=null?I:U?.label)!=null?O:B?.[W])!=null?D:F}))})}return w}const d=ie(),h=ie();on(()=>{var x;const S=r?.value!==void 0,w=u((x=r?.value)!=null?x:[]),E=HB(w);h.value=S?c(E,c(w)):void 0,d.value=S?E:void 0});const p=u((t=i?.value)!=null?t:[]),f=HB(p),v=c(f,c(p)),m=ie(f||[]),g=ie(v);Vt(m,()=>{g.value=c(m.value,v)}),Vt([d,h],([x,S])=>{m.value=x||[],g.value=S||[]});const y=T(()=>{var x;return(x=d.value)!=null?x:m.value}),b=T(()=>{var x;return(x=h.value)!=null?x:g.value});return{selectedKeys:y,selectedValue:b,setLocalSelectedKeys(x){m.value=x},localSelectedKeys:m,localSelectedValue:g}}function tze(e){const{searchValue:t,flattenTreeData:i,filterMethod:r,disableFilter:a,fieldNames:n}=yt(e),s=T(()=>{var f;return((f=n.value)==null?void 0:f.key)||"key"}),o=(f,v)=>{const m=v[s.value];return!ei(m)&&String(m).indexOf(f)>-1},l=T(()=>r?.value||o),u=ie(),c=T(()=>!!t.value),d=T(()=>!a?.value&&c.value&&u.value&&u.value.size===0),h=T(()=>a?.value?void 0:f=>{var v,m;if(!c.value)return!0;const g=f[s.value];return(m=(v=u.value)==null?void 0:v.has(g||""))!=null?m:!1}),p=_m((f,v)=>{const m=f.filter(y=>l.value(v,y.treeNodeData)),g=new Set;m.forEach(y=>{g.add(y.key),y.pathParentKeys.forEach(b=>{g.add(b)})}),u.value=g},100);return on(()=>{a?.value?u.value=void 0:p(i.value,t.value)}),{isEmptyFilterResult:d,filterTreeNode:h}}function ize(e,t){const i=`${t}-slot-`;return Object.keys(e).reduce((a,n)=>{if(n.startsWith(i)){const s=n.slice(i.length);s&&(a[s]=e[n])}return a},{})}var rze=Object.defineProperty,aze=Object.defineProperties,nze=Object.getOwnPropertyDescriptors,GB=Object.getOwnPropertySymbols,sze=Object.prototype.hasOwnProperty,oze=Object.prototype.propertyIsEnumerable,qB=(e,t,i)=>t in e?rze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,o9=(e,t)=>{for(var i in t||(t={}))sze.call(t,i)&&qB(e,i,t[i]);if(GB)for(var i of GB(t))oze.call(t,i)&&qB(e,i,t[i]);return e},l9=(e,t)=>aze(e,nze(t));const lze=se({name:"TreeSelect",components:{Trigger:$a,SelectView:lb,Panel:GBe,Empty:gu,Spin:Do},inheritAttrs:!1,props:{disabled:{type:Boolean},loading:{type:Boolean},error:{type:Boolean},size:{type:String},border:{type:Boolean,default:!0},allowSearch:{type:[Boolean,Object],default:e=>!!e.multiple},allowClear:{type:Boolean},placeholder:{type:String},maxTagCount:{type:Number},multiple:{type:Boolean},defaultValue:{type:[String,Number,Array,Object]},modelValue:{type:[String,Number,Array,Object]},fieldNames:{type:Object},data:{type:Array,default:()=>[]},labelInValue:{type:Boolean},treeCheckable:{type:Boolean},treeCheckStrictly:{type:Boolean},treeCheckedStrategy:{type:String,default:"all"},treeProps:{type:Object},triggerProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:{type:Boolean},dropdownStyle:{type:Object},dropdownClassName:{type:[String,Array]},filterTreeNode:{type:Function},loadMore:{type:Function},disableFilter:{type:Boolean},popupContainer:{type:[String,Object]},fallbackOption:{type:[Boolean,Function],default:!0},selectable:{type:[Boolean,String,Function],default:!0},scrollbar:{type:[Boolean,Object],default:!0},showHeaderOnEmpty:{type:Boolean,default:!1},showFooterOnEmpty:{type:Boolean,default:!1},inputValue:{type:String},defaultInputValue:{type:String,default:""}},emits:{change:e=>!0,"update:modelValue":e=>!0,"update:inputValue":e=>!0,"popup-visible-change":e=>!0,"update:popupVisible":e=>!0,search:e=>!0,clear:()=>!0,inputValueChange:e=>!0},setup(e,{emit:t,slots:i}){var r,a,n;const{defaultValue:s,modelValue:o,multiple:l,popupVisible:u,defaultPopupVisible:c,treeCheckable:d,treeCheckStrictly:h,data:p,fieldNames:f,disabled:v,labelInValue:m,filterTreeNode:g,disableFilter:y,dropdownStyle:b,treeProps:x,fallbackOption:S,selectable:w,dropdownClassName:E}=yt(e),{mergedDisabled:M,eventHandlers:P}=Wr({disabled:v}),A=Se("tree-select"),k=Ai(Pn,void 0),I=(n=(a=k==null?void 0:(r=k.slots).empty)==null?void 0:a.call(r,{component:"tree-select"}))==null?void 0:n[0],O=T(()=>l.value||d.value),D=(Ye,xt)=>{var ne;return w.value==="leaf"?xt.isLeaf:Zt(w.value)?w.value(Ye,xt):(ne=w.value)!=null?ne:!1},F=T(()=>d.value?D:!1),U=T(()=>ki(e.allowSearch)&&!!e.allowSearch.retainInputValue),{flattenTreeData:z,key2TreeNode:B}=n9(gt({treeData:p,fieldNames:f,selectable:D,checkable:F})),{selectedKeys:W,selectedValue:R,setLocalSelectedKeys:$,localSelectedKeys:q,localSelectedValue:Z}=eze(gt({defaultValue:s,modelValue:o,key2TreeNode:B,multiple:l,treeCheckable:d,treeCheckStrictly:h,fallbackOption:S,fieldNames:f}));function G(Ye){return d.value?od(Ye):YM(Ye)}const X=T(()=>ei(R.value)?[]:O.value&&!M.value?R.value.map(Ye=>{const xt=B.value.get(Ye.value);return l9(o9({},Ye),{closable:!xt||G(xt)})}):R.value),J=Ye=>{$(Ye),hr(()=>{var xt,ne;const K=(m.value?Z.value:q.value)||[],ze=O.value?K:K[0];t("update:modelValue",ze),t("change",ze),(ne=(xt=P.value)==null?void 0:xt.onChange)==null||ne.call(xt)})},pe=ie(e.defaultInputValue),fe=T(()=>{var Ye;return(Ye=e.inputValue)!=null?Ye:pe.value}),de=Ye=>{pe.value=Ye,t("update:inputValue",Ye),t("inputValueChange",Ye)},ge=Ye=>{Ye!==fe.value&&(ce(!0),de(Ye),e.allowSearch&&t("search",Ye))},[me,ke]=ja(c.value,gt({value:u})),ce=Ye=>{Ye!==me.value&&(ke(Ye),t("popup-visible-change",Ye),t("update:popupVisible",Ye)),Ye||pt.value&&pt.value.blur&&pt.value.blur()},{isEmptyFilterResult:le,filterTreeNode:xe}=tze(gt({searchValue:fe,flattenTreeData:z,filterMethod:g,disableFilter:y,fieldNames:f})),Ne=T(()=>!z.value.length||le.value),pt=ie(),at=T(()=>{var Ye;return[b?.value||{},(Ye=x?.value)!=null&&Ye.virtualListProps?{"max-height":"unset"}:{}]});return{refSelectView:pt,prefixCls:A,TreeSelectEmpty:I,selectedValue:R,selectedKeys:W,mergedDisabled:M,searchValue:fe,panelVisible:me,isEmpty:Ne,computedFilterTreeNode:xe,isMultiple:O,selectViewValue:X,computedDropdownStyle:at,onSearchValueChange:ge,onSelectChange(Ye){J(Ye),!U.value&&fe.value&&de(""),O.value||ce(!1)},onVisibleChange:ce,onInnerClear(){J([]),t("clear")},pickSubCompSlots:ize,isSelectable:D,isCheckable:F,onBlur:()=>{!U.value&&fe.value&&de("")},onItemRemove(Ye){if(M.value)return;const xt=B.value.get(Ye);if(d.value&&xt){if(G(xt)){const[ne]=ZM({node:xt,checked:!1,checkedKeys:W.value,indeterminateKeys:[],checkStrictly:h.value});J(ne)}}else{const ne=W.value.filter(K=>K!==Ye);J(ne)}}}}});function uze(e,t,i,r,a,n){const s=be("SelectView"),o=be("Spin"),l=be("Panel"),u=be("Trigger");return N(),De(u,it({class:`${e.prefixCls}-trigger`,"auto-fit-popup-min-width":"",trigger:"click",position:"bl","popup-offset":4,"animation-name":"slide-dynamic-origin","prevent-focus":!0},e.triggerProps,{disabled:e.mergedDisabled,"popup-visible":e.panelVisible,"popup-container":e.popupContainer,"click-to-close":!e.allowSearch,"auto-fit-transform-origin":"",onPopupVisibleChange:e.onVisibleChange}),{content:He(()=>[ve("div",{class:Y([`${e.prefixCls}-popup`,{[`${e.prefixCls}-has-header`]:!!e.$slots.header,[`${e.prefixCls}-has-footer`]:!!e.$slots.footer},e.dropdownClassName]),style:It(e.computedDropdownStyle)},[e.$slots.header&&(!e.isEmpty||e.showHeaderOnEmpty)?(N(),ee("div",{key:0,class:Y(`${e.prefixCls}-header`)},[ye(e.$slots,"header")],2)):Me("v-if",!0),e.loading?ye(e.$slots,"loader",{key:1},()=>[_(o)]):e.isEmpty?ye(e.$slots,"empty",{key:2},()=>[(N(),De(bs(e.TreeSelectEmpty?e.TreeSelectEmpty:"Empty")))]):(N(),De(l,{key:3,"selected-keys":e.selectedKeys,"show-checkable":e.treeCheckable,scrollbar:e.scrollbar,"tree-props":l9(o9({actionOnNodeClick:e.selectable==="leaf"?"expand":void 0,blockNode:!0},e.treeProps),{data:e.data,checkStrictly:e.treeCheckStrictly,checkedStrategy:e.treeCheckedStrategy,fieldNames:e.fieldNames,multiple:e.multiple,loadMore:e.loadMore,filterTreeNode:e.computedFilterTreeNode,size:e.size,checkable:e.isCheckable,selectable:e.isSelectable,searchValue:e.searchValue}),"tree-slots":e.pickSubCompSlots(e.$slots,"tree"),onChange:e.onSelectChange},null,8,["selected-keys","show-checkable","scrollbar","tree-props","tree-slots","onChange"])),e.$slots.footer&&(!e.isEmpty||e.showFooterOnEmpty)?(N(),ee("div",{key:4,class:Y(`${e.prefixCls}-footer`)},[ye(e.$slots,"footer")],2)):Me("v-if",!0)],6)]),default:He(()=>[ye(e.$slots,"trigger",{},()=>[_(s,it({ref:"refSelectView","model-value":e.selectViewValue,"input-value":e.searchValue,"allow-search":!!e.allowSearch,"allow-clear":e.allowClear,loading:e.loading,size:e.size,"max-tag-count":e.maxTagCount,disabled:e.mergedDisabled,opened:e.panelVisible,error:e.error,bordered:e.border,placeholder:e.placeholder,multiple:e.isMultiple},e.$attrs,{onInputValueChange:e.onSearchValueChange,onClear:e.onInnerClear,onRemove:e.onItemRemove,onBlur:e.onBlur}),$r({_:2},[e.$slots.prefix?{name:"prefix",fn:He(()=>[ye(e.$slots,"prefix")])}:void 0,e.$slots.label?{name:"label",fn:He(c=>[ye(e.$slots,"label",br(Ea(c)))])}:void 0]),1040,["model-value","input-value","allow-search","allow-clear","loading","size","max-tag-count","disabled","opened","error","bordered","placeholder","multiple","onInputValueChange","onClear","onRemove","onBlur"])])]),_:3},16,["class","disabled","popup-visible","popup-container","click-to-close","onPopupVisibleChange"])}var l_=We(lze,[["render",uze]]);const cze=Object.assign(l_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+l_.name,l_)}}),dze=se({name:"Typography",setup(){return{classNames:[Se("typography")]}}});function hze(e,t,i,r,a,n){return N(),ee("article",{class:Y(e.classNames)},[ye(e.$slots,"default")],2)}var u_=We(dze,[["render",hze]]),Y0=se({name:"TypographyTitle",inheritAttrs:!1,props:{heading:{type:Number,default:1}},setup(e){const{heading:t}=yt(e);return{component:T(()=>`h${t?.value}`)}},render(){const{component:e}=this;return _(dE,it(this.$attrs,{component:e}),this.$slots)}}),X0=se({name:"TypographyText",inheritAttrs:!1,props:{ellipsis:{type:[Boolean,Object],default:!1}},setup(e){const{ellipsis:t}=yt(e);return{component:T(()=>t?.value?"div":"span")}},render(){const{ellipsis:e,component:t}=this;return _(dE,it(this.$attrs,{ellipsis:e,component:t}),this.$slots)}});const pze=Object.assign(u_,{Paragraph:Pf,Title:Y0,Text:X0,install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+u_.name,u_),e.component(i+Pf.name,Pf),e.component(i+Y0.name,Y0),e.component(i+X0.name,X0)}}),YB=e=>{const t=e.responseText||e.response;if(!t)return;const i=e.getResponseHeader("Content-Type");if(i&&i.includes("json"))try{return JSON.parse(t)}catch{return t}return t},fze=e=>{switch(e){case"done":return"success";case"error":return"danger";default:return"normal"}},XB=(e,t)=>Zt(e)?e(t):e,mze=({fileItem:e,action:t,name:i,data:r,headers:a={},withCredentials:n=!1,onProgress:s=Ch,onSuccess:o=Ch,onError:l=Ch})=>{const u=XB(i,e)||"file",c=XB(r,e),d=new XMLHttpRequest;n&&(d.withCredentials=!0),d.upload.onprogress=p=>{const f=p.total>0?is.round(p.loaded/p.total,2):0;s(f,p)},d.onerror=function(f){l(f)},d.onload=()=>{if(d.status<200||d.status>=300){l(YB(d));return}o(YB(d))};const h=new FormData;if(c)for(const p of Object.keys(c))h.append(p,c[p]);e.file&&h.append(u,e.file),d.open("post",t??"",!0);for(const p of Object.keys(a))d.setRequestHeader(p,a[p]);return d.send(h),{abort(){d.abort()}}},u9=(e,t)=>{if(t&&e){const i=bi(t)?t:t.split(",").map(a=>a.trim()).filter(a=>a),r=(e.name.indexOf(".")>-1?`.${e.name.split(".").pop()}`:"").toLowerCase();return i.some(a=>{const n=a&&a.toLowerCase(),s=(e.type||"").toLowerCase(),o=s.split("/")[0];if(n===s||`${o}${r.replace(".","/")}`===n||/^\*(\/\*)?$/.test(n))return!0;if(/\/\*/.test(n))return s.replace(/\/.*$/,"")===n.replace(/\/.*$/,"");if(/\..*/.test(n)){let l=[n];return(n===".jpg"||n===".jpeg")&&(l=[".jpg",".jpeg"]),l.indexOf(r)>-1}return!1})}return!!e},vze=(e,t,i)=>{const r=[];let a=0;const n=()=>{!a&&i(r)},s=o=>{if(a+=1,o?.isFile){o.file(l=>{a-=1,u9(l,t)&&(Object.defineProperty(l,"webkitRelativePath",{value:o.fullPath.replace(/^\//,"")}),r.push(l)),n()});return}if(o?.isDirectory){const l=o.createReader();let u=!1;const c=()=>{l.readEntries(d=>{u||(a-=1,u=!0),d.length===0?n():(c(),d.forEach(s))})};c();return}a-=1,n()};[].slice.call(e).forEach(o=>o.webkitGetAsEntry&&s(o.webkitGetAsEntry()))},gze=e=>{var t;return(t=e.type)==null?void 0:t.includes("image")},c_=(e,t)=>{if(!e)return[];const i=Array.from(e);return t?i.filter(r=>u9(r,t)):i},yze=se({name:"IconUpload",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-upload`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),bze=["stroke-width","stroke-linecap","stroke-linejoin"],wze=ve("path",{d:"M14.93 17.071 24.001 8l9.071 9.071m-9.07 16.071v-25M40 35v6H8v-6"},null,-1),xze=[wze];function Sze(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},xze,14,bze)}var d_=We(yze,[["render",Sze]]);const $P=Object.assign(d_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+d_.name,d_)}});var Cze=se({name:"UploadButton",props:{disabled:{type:Boolean,default:!1},directory:{type:Boolean,default:!1},accept:String,listType:{type:String},tip:String,draggable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},uploadFiles:{type:Function,required:!0},hide:Boolean,onButtonClick:{type:Function}},setup(e,{slots:t}){const i=Se("upload"),{t:r}=Yr(),a=ie(!1),n=ie(null),s=ie(null),o=ie(0),l=m=>{m==="subtract"?o.value-=1:m==="add"?o.value+=1:m==="reset"&&(o.value=0)},u=m=>{if(!e.disabled){if(Zt(e.onButtonClick)){const g=e.onButtonClick(m);if(ld(g)){g.then(y=>{e.uploadFiles(c_(y))});return}}n.value&&n.value.click()}},c=m=>{const g=m.target;g.files&&e.uploadFiles(c_(g.files)),g.value=""},d=m=>{var g,y;if(m.preventDefault(),a.value=!1,l("reset"),!e.disabled)if(e.directory&&((g=m.dataTransfer)!=null&&g.items))vze(m.dataTransfer.items,e.accept,b=>{e.uploadFiles(b)});else{const b=c_((y=m.dataTransfer)==null?void 0:y.files,e.accept);e.uploadFiles(e.multiple?b:b.slice(0,1))}},h=m=>{m.preventDefault(),l("subtract"),o.value===0&&(a.value=!1,l("reset"))},p=m=>{m.preventDefault(),!e.disabled&&!a.value&&(a.value=!0)},f=()=>t.default?_("span",null,[t.default()]):e.listType==="picture-card"?_("div",{class:`${i}-picture-card`},[_("div",{class:`${i}-picture-card-text`},[_(op,null,null)]),e.tip&&_("div",{class:`${i}-tip`},[e.tip])]):e.draggable?_("div",{class:[`${i}-drag`,{[`${i}-drag-active`]:a.value}]},[_("div",null,[_(op,null,null)]),_("div",{class:`${i}-drag-text`},[a.value?r("upload.dragHover"):r("upload.drag")]),e.tip&&_("div",{class:`${i}-tip`},[e.tip])]):_(un,{type:"primary",disabled:e.disabled},{default:()=>[r("upload.buttonText")],icon:()=>_($P,null,null)}),v=T(()=>[i,{[`${i}-type-picture-card`]:e.listType==="picture-card",[`${i}-draggable`]:e.draggable,[`${i}-disabled`]:e.disabled,[`${i}-hide`]:e.hide}]);return()=>_("span",{ref:s,class:v.value,onClick:u,onDragenter:()=>{l("add")},onDrop:d,onDragover:p,onDragleave:h},[_("input",it({ref:n,type:"file",style:{display:"none"},disabled:e.disabled,accept:e.accept,multiple:e.multiple},e.directory?{webkitdirectory:"webkitdirectory"}:{},{onChange:c}),null),f()])}});const _ze=se({name:"IconPause",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-pause`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Mze=["stroke-width","stroke-linecap","stroke-linejoin"],Eze=ve("path",{d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),Aze=ve("path",{fill:"currentColor",stroke:"none",d:"M14 12h4v24h-4zM30 12h4v24h-4z"},null,-1),Pze=[Eze,Aze];function Tze(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Pze,14,Mze)}var h_=We(_ze,[["render",Tze]]);const kze=Object.assign(h_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+h_.name,h_)}}),Oze=se({name:"IconPlayArrowFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-play-arrow-fill`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Dze=["stroke-width","stroke-linecap","stroke-linejoin"],Ize=ve("path",{d:"M17.533 10.974a1 1 0 0 0-1.537.844v24.356a1 1 0 0 0 1.537.844L36.67 24.84a1 1 0 0 0 0-1.688L17.533 10.974Z",fill:"currentColor",stroke:"none"},null,-1),Lze=[Ize];function Bze(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},Lze,14,Dze)}var p_=We(Oze,[["render",Bze]]);const zze=Object.assign(p_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+p_.name,p_)}}),_1=Symbol("ArcoUpload");var c9=se({name:"UploadProgress",props:{file:{type:Object,required:!0},listType:{type:String,required:!0}},setup(e){const t=Se("upload-progress"),{t:i}=Yr(),r=Ai(_1,void 0),a=()=>{var s,o,l,u,c,d,h,p,f,v,m;return e.file.status==="error"?_("span",{class:[r?.iconCls,`${r?.iconCls}-upload`],onClick:()=>r?.onUpload(e.file)},[r?.showRetryButton&&((c=(o=r==null?void 0:(s=r.slots)["retry-icon"])==null?void 0:o.call(s))!=null?c:(u=(l=r?.customIcon)==null?void 0:l.retryIcon)!=null&&u.call(l))||e.listType==="picture-card"?_($P,null,null):i("upload.retry")]):e.file.status==="done"?_("span",{class:[r?.iconCls,`${r?.iconCls}-success`]},[(m=(v=(h=r==null?void 0:(d=r.slots)["success-icon"])==null?void 0:h.call(d))!=null?v:(f=(p=r?.customIcon)==null?void 0:p.successIcon)==null?void 0:f.call(p))!=null?m:_(x1,null,null)]):e.file.status==="init"?_(eo,{content:i("upload.start")},{default:()=>{var g,y,b,x,S,w;return[_("span",{class:[r?.iconCls,`${r?.iconCls}-start`],onClick:()=>r?.onUpload(e.file)},[(w=(S=(y=r==null?void 0:(g=r.slots)["start-icon"])==null?void 0:y.call(g))!=null?S:(x=(b=r?.customIcon)==null?void 0:b.startIcon)==null?void 0:x.call(b))!=null?w:_(zze,null,null)])]}}):r?.showCancelButton&&_(eo,{content:i("upload.cancel")},{default:()=>{var g,y,b,x,S,w;return[_("span",{class:[r?.iconCls,`${r?.iconCls}-cancel`],onClick:()=>r?.onAbort(e.file)},[(w=(S=(y=r==null?void 0:(g=r.slots)["cancel-icon"])==null?void 0:y.call(g))!=null?S:(x=(b=r?.customIcon)==null?void 0:b.cancelIcon)==null?void 0:x.call(b))!=null?w:_(kze,null,null)])]}})},n=()=>{var s;if(["init","uploading"].includes((s=e.file.status)!=null?s:"")){const o=fze(e.file.status);return _(Fj,{type:"circle",size:"mini",showText:!1,status:o,percent:e.file.percent},null)}return null};return()=>_("span",{class:t},[n(),a()])}});const Rze=se({name:"IconFilePdf",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-file-pdf`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Nze=["stroke-width","stroke-linecap","stroke-linejoin"],Vze=ve("path",{d:"M11 42h26a2 2 0 0 0 2-2V13.828a2 2 0 0 0-.586-1.414l-5.828-5.828A2 2 0 0 0 31.172 6H11a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2Z"},null,-1),Fze=ve("path",{d:"M22.305 21.028c.874 1.939 3.506 6.265 4.903 8.055 1.747 2.237 3.494 2.685 4.368 2.237.873-.447 1.21-4.548-7.425-2.685-7.523 1.623-7.424 3.58-6.988 4.476.728 1.193 2.522 2.627 5.678-6.266C25.699 18.79 24.489 17 23.277 17c-1.409 0-2.538.805-.972 4.028Z"},null,-1),jze=[Vze,Fze];function $ze(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},jze,14,Nze)}var f_=We(Rze,[["render",$ze]]);const Uze=Object.assign(f_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+f_.name,f_)}}),Wze=se({name:"IconFileImage",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-file-image`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Hze=["stroke-width","stroke-linecap","stroke-linejoin"],Gze=ve("path",{d:"m26 33 5-6v6h-5Zm0 0-3-4-4 4h7Zm11 9H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2ZM17 19h1v1h-1v-1Z"},null,-1),qze=[Gze];function Yze(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},qze,14,Hze)}var m_=We(Wze,[["render",Yze]]);const Xze=Object.assign(m_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+m_.name,m_)}}),Kze=se({name:"IconFileVideo",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-file-video`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),Zze=["stroke-width","stroke-linecap","stroke-linejoin"],Qze=ve("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),Jze=ve("path",{d:"M22 27.796v-6l5 3-5 3Z"},null,-1),eRe=[Qze,Jze];function tRe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},eRe,14,Zze)}var v_=We(Kze,[["render",tRe]]);const iRe=Object.assign(v_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+v_.name,v_)}}),rRe=se({name:"IconFileAudio",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const i=Se("icon"),r=T(()=>[i,`${i}-file-audio`,{[`${i}-spin`]:e.spin}]),a=T(()=>{const s={};return e.size&&(s.fontSize=Mt(e.size)?`${e.size}px`:e.size),e.rotate&&(s.transform=`rotate(${e.rotate}deg)`),s});return{cls:r,innerStyle:a,onClick:s=>{t("click",s)}}}}),aRe=["stroke-width","stroke-linecap","stroke-linejoin"],nRe=ve("path",{d:"M37 42H11a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h21l7 7v27a2 2 0 0 1-2 2Z"},null,-1),sRe=ve("path",{d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z",fill:"currentColor",stroke:"none"},null,-1),oRe=ve("path",{d:"M25 30a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm0 0-.951-12.363a.5.5 0 0 1 .58-.532L30 18"},null,-1),lRe=[nRe,sRe,oRe];function uRe(e,t,i,r,a,n){return N(),ee("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Y(e.cls),style:It(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...s)=>e.onClick&&e.onClick(...s))},lRe,14,aRe)}var g_=We(rRe,[["render",uRe]]);const cRe=Object.assign(g_,{install:(e,t)=>{var i;const r=(i=t?.iconPrefix)!=null?i:"";e.component(r+g_.name,g_)}});var KB=se({name:"UploadListItem",props:{file:{type:Object,required:!0},listType:{type:String,required:!0}},setup(e){const i=`${Se("upload-list")}-item`,{t:r}=Yr(),a=Ai(_1,void 0),n=()=>{var s,o;let l="";if(e.file.file&&e.file.file.type)l=e.file.file.type;else{const u=(o=(s=e.file.name)==null?void 0:s.split(".")[1])!=null?o:"";["png","jpg","jpeg","bmp","gif","webp"].includes(u)?l="image":["mp4","m2v","mkv","m4v","mov"].includes(u)?l="video":["mp3","wav","wmv","m4a","acc","flac"].includes(u)&&(l="audio")}return l.includes("image")?_(Xze,null,null):l.includes("pdf")?_(Uze,null,null):l.includes("audio")?_(cRe,null,null):l.includes("video")?_(iRe,null,null):_(i9,null,null)};return()=>{var s,o,l,u,c,d,h,p,f,v,m,g,y,b,x,S,w,E,M,P,A,k,I;return _("div",{class:[i,`${i}-${e.file.status}`]},[_("div",{class:`${i}-content`},[a?.listType==="picture"&&_("span",{class:`${i}-thumbnail`},[(l=(o=a==null?void 0:(s=a.slots).image)==null?void 0:o.call(s,{fileItem:e.file}))!=null?l:_("img",it({src:e.file.url,alt:e.file.name},a?.imageLoading?{loading:a.imageLoading}:void 0),null)]),_("div",{class:`${i}-name`},[a?.listType==="text"&&_("span",{class:`${i}-file-icon`},[(f=(p=(c=a==null?void 0:(u=a.slots)["file-icon"])==null?void 0:c.call(u,{fileItem:e.file}))!=null?p:(h=(d=a?.customIcon)==null?void 0:d.fileIcon)==null?void 0:h.call(d,e.file))!=null?f:n()]),a?.showLink&&e.file.url?_("a",it({class:`${i}-name-link`,target:"_blank",href:e.file.url},a?.download?{download:e.file.name}:void 0),[(x=(b=(m=a==null?void 0:(v=a.slots)["file-name"])==null?void 0:m.call(v,{fileItem:e.file}))!=null?b:(y=(g=a?.customIcon)==null?void 0:g.fileName)==null?void 0:y.call(g,e.file))!=null?x:e.file.name]):_("span",{class:`${i}-name-text`,onClick:()=>a?.onPreview(e.file)},[(A=(P=(w=a==null?void 0:(S=a.slots)["file-name"])==null?void 0:w.call(S,{fileItem:e.file}))!=null?P:(M=(E=a?.customIcon)==null?void 0:E.fileName)==null?void 0:M.call(E,e.file))!=null?A:e.file.name]),e.file.status==="error"&&_(eo,{content:r("upload.error")},{default:()=>{var O,D,F,U,z,B;return[_("span",{class:[a?.iconCls,`${a?.iconCls}-error`]},[(B=(z=(D=a==null?void 0:(O=a.slots)["error-icon"])==null?void 0:D.call(O))!=null?z:(U=(F=a?.customIcon)==null?void 0:F.errorIcon)==null?void 0:U.call(F))!=null?B:_(hu,null,null)])]}})]),_(c9,{file:e.file,listType:e.listType},null)]),a?.showRemoveButton&&_("span",{class:`${i}-operation`},[_(Ur,{onClick:()=>{var O;return(O=a?.onRemove)==null?void 0:O.call(a,e.file)}},{default:()=>{var O,D,F,U,z,B;return[_("span",{class:[a?.iconCls,`${a?.iconCls}-remove`]},[(B=(z=(D=a==null?void 0:(O=a.slots)["remove-icon"])==null?void 0:D.call(O))!=null?z:(U=(F=a?.customIcon)==null?void 0:F.removeIcon)==null?void 0:U.call(F))!=null?B:_(RP,null,null)])]}})]),(I=a==null?void 0:(k=a.slots)["extra-button"])==null?void 0:I.call(k,{fileItem:e.file})])}}}),ZB=se({name:"UploadPictureItem",props:{file:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},setup(e){const i=`${Se("upload-list")}-picture`,r=T(()=>[i,{[`${i}-status-error`]:e.file.status==="error"}]),a=Ai(_1,void 0),n=()=>{var s,o,l,u,c,d,h,p,f,v,m,g,y,b,x,S,w,E,M,P,A,k,I,O,D,F,U,z,B;return e.file.status==="uploading"?_(c9,{file:e.file,listType:"picture-card"},null):_(Xt,null,[(l=(o=a==null?void 0:(s=a.slots).image)==null?void 0:o.call(s,{fileItem:e.file}))!=null?l:_("img",it({src:e.file.url,alt:e.file.name},a?.imageLoading?{loading:a.imageLoading}:void 0),null),_("div",{class:`${i}-mask`},[e.file.status==="error"&&a?.showCancelButton&&_("div",{class:`${i}-error-tip`},[_("span",{class:[a?.iconCls,`${a?.iconCls}-error`]},[(f=(p=(c=a==null?void 0:(u=a.slots)["error-icon"])==null?void 0:c.call(u))!=null?p:(h=(d=a?.customIcon)==null?void 0:d.errorIcon)==null?void 0:h.call(d))!=null?f:_(uP,null,null)])]),_("div",{class:`${i}-operation`},[e.file.status!=="error"&&a?.showPreviewButton&&_("span",{class:[a?.iconCls,`${a?.iconCls}-preview`],onClick:()=>a?.onPreview(e.file)},[(x=(b=(m=a==null?void 0:(v=a.slots)["preview-icon"])==null?void 0:m.call(v))!=null?b:(y=(g=a?.customIcon)==null?void 0:g.previewIcon)==null?void 0:y.call(g))!=null?x:_(Sz,null,null)]),["init","error"].includes(e.file.status)&&a?.showRetryButton&&_("span",{class:[a?.iconCls,`${a?.iconCls}-upload`],onClick:()=>a?.onUpload(e.file)},[(A=(P=(w=a==null?void 0:(S=a.slots)["retry-icon"])==null?void 0:w.call(S))!=null?P:(M=(E=a?.customIcon)==null?void 0:E.retryIcon)==null?void 0:M.call(E))!=null?A:_($P,null,null)]),!a?.disabled&&a?.showRemoveButton&&_("span",{class:[a?.iconCls,`${a?.iconCls}-remove`],onClick:()=>a?.onRemove(e.file)},[(U=(F=(I=a==null?void 0:(k=a.slots)["remove-icon"])==null?void 0:I.call(k))!=null?F:(D=(O=a?.customIcon)==null?void 0:O.removeIcon)==null?void 0:D.call(O))!=null?U:_(RP,null,null)]),(B=a==null?void 0:(z=a.slots)["extra-button"])==null?void 0:B.call(z,e.file)])])])};return()=>_("span",{class:r.value},[n()])}}),dRe=se({name:"UploadList",components:{UploadListItem:KB,UploadPictureItem:ZB},props:{fileList:{type:Array,required:!0},listType:{type:String,required:!0}},setup(e,{slots:t}){const i=Se("upload"),r=T(()=>[`${i}-list`,`${i}-list-type-${e.listType}`]),a=(n,s)=>Zt(t["upload-item"])?t["upload-item"]({fileItem:n,index:s}):e.listType==="picture-card"?_(ZB,{file:n,key:`item-${s}`},null):_(KB,{file:n,listType:e.listType,key:`item-${s}`},null);return()=>_(Am,{tag:"div",class:r.value},{default:()=>{var n;return[...e.fileList.map((s,o)=>a(s,o)),e.listType==="picture-card"&&((n=t["upload-button"])==null?void 0:n.call(t))]}})}}),hRe=Object.defineProperty,pRe=Object.defineProperties,fRe=Object.getOwnPropertyDescriptors,QB=Object.getOwnPropertySymbols,mRe=Object.prototype.hasOwnProperty,vRe=Object.prototype.propertyIsEnumerable,JB=(e,t,i)=>t in e?hRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,gRe=(e,t)=>{for(var i in t||(t={}))mRe.call(t,i)&&JB(e,i,t[i]);if(QB)for(var i of QB(t))vRe.call(t,i)&&JB(e,i,t[i]);return e},yRe=(e,t)=>pRe(e,fRe(t)),y_=se({name:"Upload",props:{fileList:{type:Array,default:void 0},defaultFileList:{type:Array,default:()=>[]},accept:String,action:String,disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},directory:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},tip:String,headers:{type:Object},data:{type:[Object,Function]},name:{type:[String,Function]},withCredentials:{type:Boolean,default:!1},customRequest:{type:Function},limit:{type:Number,default:0},autoUpload:{type:Boolean,default:!0},showFileList:{type:Boolean,default:!0},showRemoveButton:{type:Boolean,default:!0},showRetryButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},showUploadButton:{type:[Boolean,Object],default:!0},showPreviewButton:{type:Boolean,default:!0},download:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},imageLoading:{type:String},listType:{type:String,default:"text"},responseUrlKey:{type:[String,Function]},customIcon:{type:Object},imagePreview:{type:Boolean,default:!1},onBeforeUpload:{type:Function},onBeforeRemove:{type:Function},onButtonClick:{type:Function}},emits:{"update:fileList":e=>!0,exceedLimit:(e,t)=>!0,change:(e,t)=>!0,progress:(e,t)=>!0,preview:e=>!0,success:e=>!0,error:e=>!0},setup(e,{emit:t,slots:i}){const{fileList:r,disabled:a,listType:n,customIcon:s,showRetryButton:o,showCancelButton:l,showRemoveButton:u,showPreviewButton:c,imageLoading:d,download:h,showLink:p}=yt(e),f=Se("upload"),{mergedDisabled:v,eventHandlers:m}=Wr({disabled:a}),g=ie([]),y=new Map,b=new Map,x=T(()=>e.limit>0&&g.value.length>=e.limit),S=G=>{y.clear();const X=G?.map((J,pe)=>{var fe,de,ge;const me=(fe=J.status)!=null?fe:"done",ke=gt(yRe(gRe({},J),{uid:(de=J.uid)!=null?de:`${Date.now()}${pe}`,status:me,percent:(ge=J.percent)!=null?ge:["error","init"].indexOf(me)>-1?0:1}));return y.set(ke.uid,ke),ke});g.value=X??[]};S(e.defaultFileList),Vt(r,G=>{G&&S(G)},{immediate:!0,deep:!0});const w=G=>{var X,J;t("update:fileList",g.value),t("change",g.value,G),(J=(X=m.value)==null?void 0:X.onChange)==null||J.call(X)},E=(G,X)=>{for(const J of g.value)if(J.uid===G){J.file=X,w(J);break}},M=G=>{const X=(ge,me)=>{const ke=y.get(G.uid);ke&&(ke.status="uploading",ke.percent=ge,t("progress",ke,me),w(ke))},J=ge=>{const me=y.get(G.uid);me&&(me.status="done",me.percent=1,me.response=ge,e.responseUrlKey&&(Zt(e.responseUrlKey)?me.url=e.responseUrlKey(me):ge[e.responseUrlKey]&&(me.url=ge[e.responseUrlKey])),b.delete(me.uid),t("success",me),w(me))},pe=ge=>{const me=y.get(G.uid);me&&(me.status="error",me.percent=0,me.response=ge,b.delete(me.uid),t("error",me),w(me))},fe={fileItem:G,action:e.action,name:e.name,data:e.data,headers:e.headers,withCredentials:e.withCredentials,onProgress:X,onSuccess:J,onError:pe};G.status="uploading",G.percent=0;const de=Zt(e.customRequest)?e.customRequest(fe):mze(fe);b.set(G.uid,de),w(G)},P=G=>{var X;const J=b.get(G.uid);if(J){(X=J.abort)==null||X.call(J),b.delete(G.uid);const pe=y.get(G.uid);pe&&(pe.status="error",pe.percent=0,w(pe))}},A=G=>{if(G){const X=y.get(G.uid);X&&M(X)}else for(const X of g.value)X.status==="init"&&M(X)},k=async(G,X)=>{const J=`${Date.now()}-${X}`,pe=gze(G)?URL.createObjectURL(G):void 0,fe=gt({uid:J,file:G,url:pe,name:G.name,status:"init",percent:0});y.set(J,fe),g.value=[...g.value,fe],w(fe),e.autoUpload&&M(fe)},I=G=>{if(e.limit>0&&g.value.length+G.length>e.limit){t("exceedLimit",g.value,G);return}for(let X=0;X<G.length;X++){const J=G[X];Zt(e.onBeforeUpload)?Promise.resolve(e.onBeforeUpload(J)).then(pe=>{pe&&k(jn(pe)?J:pe,X)}).catch(pe=>{console.error(pe)}):k(J,X)}},O=G=>{g.value=g.value.filter(X=>X.uid!==G.uid),w(G)},D=G=>{Zt(e.onBeforeRemove)?Promise.resolve(e.onBeforeRemove(G)).then(X=>{X&&O(G)}).catch(X=>{console.error(X)}):O(G)},F=G=>{if(e.imagePreview&&G.url){const X=q.value.indexOf(G.url);X>-1&&(W.value=X,B.value=!0)}t("preview",G)};dr(_1,gt({disabled:v,listType:n,iconCls:`${f}-icon`,showRemoveButton:u,showRetryButton:o,showCancelButton:l,showPreviewButton:c,showLink:p,imageLoading:d,download:h,customIcon:s,slots:i,onUpload:M,onAbort:P,onRemove:D,onPreview:F}));const U=T(()=>{if(e.accept)return e.accept;if(e.listType==="picture"||e.listType==="picture-card")return"image/*"}),z=()=>{const G=_(Cze,{key:"arco-upload-button",disabled:v.value,draggable:e.draggable,listType:e.listType,uploadFiles:I,multiple:e.multiple,directory:e.directory,tip:e.tip,hide:!e.showUploadButton||x.value&&!(ki(e.showUploadButton)&&e.showUploadButton.showOnExceedLimit),accept:U.value,onButtonClick:e.onButtonClick},{default:i["upload-button"]});return e.tip&&e.listType!=="picture-card"&&!e.draggable?_("span",null,[G,_("div",{class:`${f}-tip`},[e.tip])]):G},B=ie(!1),W=ie(0),R=G=>{W.value=G},$=G=>{B.value=G},q=T(()=>g.value.filter(G=>!!G.url).map(G=>G.url));return{prefixCls:f,render:()=>e.showFileList?_("div",{class:[`${f}-wrapper`,`${f}-wrapper-type-${e.listType}`]},[e.imagePreview&&q.value.length>0&&_(qf,{srcList:q.value,visible:B.value,current:W.value,onChange:R,onVisibleChange:$},null),e.listType!=="picture-card"&&e.showUploadButton&&z(),_(dRe,{fileList:g.value,listType:e.listType},{"upload-button":z,"upload-item":i["upload-item"]})]):e.showUploadButton&&z(),innerSubmit:A,innerAbort:P,innerUpdateFile:E,innerUpload:I}},methods:{submit(e){return this.innerSubmit(e)},abort(e){return this.innerAbort(e)},updateFile(e,t){return this.innerUpdateFile(e,t)},upload(e){return this.innerUpload(e)}},render(){return this.render()}});const bRe=Object.assign(y_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+y_.name,y_)}});var b_=se({name:"OverflowList",props:{min:{type:Number,default:0},margin:{type:Number,default:8},from:{type:String,default:"end"}},emits:{change:e=>!0},setup(e,{emit:t,slots:i}){const r=Se("overflow-list"),a=ie(),n=ie(),s=ie(),o={},l=[],u=ie(0),c=ie(0),d=T(()=>c.value>0),h=ie(0),p=T(()=>e.from==="start");Vt(u,(m,g)=>{c.value>0&&(c.value+=m-g,c.value<0&&(c.value=0))}),Vt(c,m=>{t("change",m)});const f=()=>{var m,g,y;if(a.value&&o.value&&s.value){const b=s.value.offsetWidth;if(b>1&&(c.value===0||b<h.value))return;for(let E=0;E<o.value.length;E++){const M=o.value[E].el;M&&M.offsetWidth&&(l[E]=M.offsetWidth+e.margin)}let x=a.value.clientWidth-((g=(m=n.value)==null?void 0:m.offsetWidth)!=null?g:0)-(p.value?e.margin:0);const S=p.value?hLe(l):l;let w=0;for(let E=0;E<S.length;E++){const M=(y=S[E])!=null?y:0;if(M<x-1)x-=M,w+=1;else{h.value=M;break}}w<e.min&&e.min<u.value&&(w=e.min),c.value!==u.value-w&&(c.value=u.value-w)}};Vt(d,()=>f(),{flush:"post"}),xi(()=>{s.value&&s.value.offsetWidth<1&&f()});const v=()=>{var m,g;const y=p.value?{marginRight:`${e.margin}px`}:void 0;return _("div",{ref:n,class:`${r}-overflow`,style:y},[(g=(m=i.overflow)==null?void 0:m.call(i,{number:c.value}))!=null?g:_(Pb,null,{default:()=>[ti("+"),c.value]})])};return()=>{var m,g;o.value=ul((m=i.default)==null?void 0:m.call(i)),u.value!==o.value.length&&(u.value=o.value.length,l.length=u.value);let y=o.value;c.value>0&&(y=p.value?o.value.slice(c.value):o.value.slice(0,-c.value));const b=c.value===0||p.value?y.length-1:y.length;for(let x=0;x<b;x++)y[x].props=it((g=y[x].props)!=null?g:{},{style:{marginRight:`${e.margin}px`}});return _("div",{ref:a,class:r},[p.value&&c.value>0&&v(),y,!p.value&&c.value>0&&v(),_(oc,{onResize:f},{default:()=>[_("div",{ref:s,class:`${r}-spacer`},null)]})])}}});const wRe=Object.assign(b_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+b_.name,b_)}});var w_=se({name:"VerificationCode",props:{modelValue:String,defaultValue:{type:String,default:""},length:{type:Number,default:6},size:{type:String},disabled:Boolean,masked:Boolean,readonly:Boolean,error:{type:Boolean,default:!1},separator:{type:Function},formatter:{type:Function}},emits:{"update:modelValue":e=>!0,change:e=>!0,finish:e=>!0,input:(e,t,i)=>!0},setup(e,{emit:t}){const i=Se("verification-code"),r=Se("input"),a=ie([]),n=T(()=>{var m;return(m=e.modelValue)!=null?m:e.defaultValue}),s=T(()=>e.masked?"password":"text"),o=T(()=>[r,{[`${r}-size-${e.size}`]:e.size}]),l=T(()=>{const m=String(n.value).split("");return new Array(e.length).fill("").map((g,y)=>GP(m[y])?String(m[y]):"")}),u=ie(l.value);Vt(n,()=>{u.value=l.value});const c=()=>{const m=u.value.join("").trim();t("update:modelValue",m),t("change",m),m.length===e.length&&t("finish",m),h()},d=m=>a?.value[m].focus(),h=m=>{if(!(GP(m)&&u.value[m])){for(let g=0;g<u.value.length;g++)if(!u.value[g]){d(g);break}}},p=(m,g)=>{m.preventDefault();const{clipboardData:y}=m,b=y?.getData("text");b&&(b.split("").forEach((x,S)=>{if(!(g+S>=e.length)){if(Zt(e.formatter)){const w=e.formatter(x,g+S,u.value.join(""));if(w===!1){g-=1;return}na(w)&&(x=w.charAt(0))}u.value[g+S]=x}}),c())},f=(m,g)=>{const y=g.code||g.key;y===bz.code&&!u.value[m]?(g.preventDefault(),u.value[Math.max(m-1,0)]="",c()):y===j$.code&&m>0?(g.preventDefault(),d(m-1)):y===$$.code&&u.value[m]&&m<e.length-1&&(g.preventDefault(),d(m+1))},v=(m,g,y)=>{let b=(g||"").trim().charAt(g.length-1);if(t("input",b,m,y),Zt(e.formatter)){const x=e.formatter(b,m,u.value.join(""));if(x===!1)return;na(x)&&(b=x.charAt(0))}u.value[m]=b,c()};return()=>_("div",{class:i},[u.value.map((m,g)=>{var y;return _(Xt,null,[_(mc,{key:g,ref:b=>a.value[g]=b,type:s.value,class:o.value,modelValue:m,size:e.size,error:e.error,disabled:e.disabled,readonly:e.readonly,onFocus:()=>h(g),onInput:(b,x)=>v(g,b,x),onKeydown:b=>f(g,b),onPaste:b=>p(b,g)},null),(y=e.separator)==null?void 0:y.call(e,g,m)])})])}});const xRe=Object.assign(w_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+w_.name,w_)}});var ez=Object.getOwnPropertySymbols,SRe=Object.prototype.hasOwnProperty,CRe=Object.prototype.propertyIsEnumerable,_Re=(e,t)=>{var i={};for(var r in e)SRe.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&ez)for(var r of ez(e))t.indexOf(r)<0&&CRe.call(e,r)&&(i[r]=e[r]);return i};const MRe=typeof window<"u"?window:void 0;function ERe(e){var t;const i=ur(e);return(t=i?.$el)!=null?t:i}function ARe(e){return y9()?(b9(e),!0):!1}function d9(e,t,i={}){const r=i,{window:a=MRe}=r,n=_Re(r,["window"]),s=a&&"MutationObserver"in a;let o;const l=()=>{o&&(o.disconnect(),o=void 0)},u=Vt(()=>ERe(e),d=>{l(),s&&a&&d&&(o=new MutationObserver(t),o.observe(d,n))},{immediate:!0}),c=()=>{l(),u()};return ARe(c),{isSupported:s,stop:c}}const x_="arco-theme",Bg={Dark:"dark",Light:"light"},PRe=e=>{const t=ie(Bg.Light),i=a=>{t.value=a},r=a=>a.getAttribute(x_)===Bg.Dark?Bg.Dark:Bg.Light;return d9(document.body,a=>{for(const n of a)if(n.type==="attributes"&&n.attributeName===x_){i(r(n.target)),e?.();break}},{attributes:!0,attributeFilter:[x_],subtree:!1,childList:!1,characterData:!1}),i(r(document.body)),{theme:t,setTheme:i}};function TRe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kRe(e){return Object.entries(e).map(([t,i])=>`${TRe(t)}:${i}`).join(";")}function ORe(e){const t=e.getContext("2d");if(!t)return;const i=t.getImageData(0,0,e.width,e.height),{data:r}=i;for(let a=0;a<r.length;a+=4){const n=(r[a]+r[a+1]+r[a+2])/3;r[a]=n,r[a+1]=n,r[a+2]=n}t.putImageData(i,0,0)}var DRe=Object.defineProperty,IRe=Object.defineProperties,LRe=Object.getOwnPropertyDescriptors,tz=Object.getOwnPropertySymbols,BRe=Object.prototype.hasOwnProperty,zRe=Object.prototype.propertyIsEnumerable,iz=(e,t,i)=>t in e?DRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,RRe=(e,t)=>{for(var i in t||(t={}))BRe.call(t,i)&&iz(e,i,t[i]);if(tz)for(var i of tz(t))zRe.call(t,i)&&iz(e,i,t[i]);return e},NRe=(e,t)=>IRe(e,LRe(t)),S_=se({name:"Watermark",props:{content:{type:[String,Array]},image:{type:String},width:{type:Number},height:{type:Number},gap:{type:Array,default:()=>[90,90]},offset:{type:Array},rotate:{type:Number,default:-22},font:{type:Object},zIndex:{type:Number,default:6},alpha:{type:Number,default:1},antiTamper:{type:Boolean,default:!0},grayscale:{type:Boolean,default:!1},repeat:{type:Boolean,default:!0},staggered:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:i}){const{width:r,height:a,image:n,rotate:s,alpha:o,repeat:l,grayscale:u}=yt(e),c=Se("watermark"),d=window.devicePixelRatio||1,h=w9(),p=ie(new Map),f=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.fontSize)!=null?R:16}),v=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.fontWeight)!=null?R:"normal"}),m=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.fontStyle)!=null?R:"normal"}),g=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.fontFamily)!=null?R:"sans-serif"}),y=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.textAlign)!=null?R:"center"}),b=T(()=>bi(e.content)?e.content:[e.content]),x=T(()=>{var W,R;return(R=(W=e.font)==null?void 0:W.color)!=null?R:B.value==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.15)"}),S=T(()=>{var W,R;return(R=(W=e.gap)==null?void 0:W[0])!=null?R:90}),w=T(()=>{var W,R;return(R=(W=e.gap)==null?void 0:W[1])!=null?R:90}),E=T(()=>S.value/2),M=T(()=>w.value/2),P=T(()=>{var W,R;return(R=(W=e.offset)==null?void 0:W[0])!=null?R:E.value}),A=T(()=>{var W,R;return(R=(W=e.offset)==null?void 0:W[1])!=null?R:M.value}),k=T(()=>{var W;const R=P.value-E.value,$=A.value-M.value;return{position:"absolute",left:R>0?`${R}px`:0,top:$>0?`${$}px`:0,width:R>0?`calc(100% - ${R}px)`:"100%",height:$>0?`calc(100% - ${$}px)`:"100%",pointerEvents:"none",backgroundRepeat:e.repeat?"repeat":"no-repeat",backgroundPosition:`${R>0?0:R}px ${$>0?0:$}px`,zIndex:(W=e.zIndex)!=null?W:6}}),I=T(()=>e.repeat&&e.staggered),O=(W,R)=>{var $;if(h.value){const q=p.value.get(h.value);q&&(h.value.contains(q)&&h.value.removeChild(q),p.value.delete(h.value));const Z=document.createElement("div");Z.setAttribute("style",kRe(NRe(RRe({},k.value),{backgroundImage:`url('${W}')`,backgroundSize:`${R}px`}))),($=h.value)==null||$.append(Z),p.value.set(h.value,Z)}},D=W=>{var R,$;let q=120,Z=28;if(!n.value&&W.measureText){W.font=`${f.value}px ${g.value}`;const G=b.value.map(X=>W.measureText(X).width);q=Math.ceil(Math.max(...G)),Z=f.value*b.value.length+(b.value.length-1)*3}return[(R=r.value)!=null?R:q,($=a.value)!=null?$:Z]},F=()=>{var W;const R=document.createElement("canvas"),$=R.getContext("2d");if(!$)return;const[q,Z]=D($),G=q*d,X=Z*d,J=(S.value+q)*d,pe=(w.value+Z)*d,fe=S.value/2*d,de=w.value/2*d,ge=J/2,me=pe/2,ke=I.value?2:1,ce=(S.value+q)*ke;R.width=J*ke,R.height=pe*ke,$.globalAlpha=o.value,$.save(),$.translate(ge,me),$.rotate(Math.PI/180*s.value),$.translate(-ge,-me);const le=()=>{$.restore(),I.value&&$.drawImage(R,0,0,J,pe,J,pe,J,pe),u.value&&ORe(R),O(R.toDataURL(),ce)};if(n.value){const xe=new Image;xe.onload=()=>{$.drawImage(xe,fe,de,G,X),le()},xe.crossOrigin="anonymous",xe.referrerPolicy="no-referrer",xe.src=n.value}else{const xe=Number(f.value)*d;$.font=`${m.value} normal ${v.value} ${xe}px/${Z}px ${g.value}`,$.fillStyle=x.value,$.textAlign=y.value,$.textBaseline="top",$.translate(G/2,0),(W=b.value)==null||W.forEach((Ne,pt)=>{$.fillText(Ne??"",fe,de+pt*(xe+3*d))}),le()}},U=W=>Array.from(p.value.values()).includes(W),z=W=>{if(e.antiTamper)for(const R of W){const $=Array.from(R.removedNodes).some(Z=>U(Z)),q=R.type==="attributes"&&U(R.target);if($||q){F();break}}},{theme:B}=PRe(F);return xi(()=>{F(),d9(h.value,z,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}),Vt(e,F,{deep:!0,flush:"post"}),()=>{var W;return _("div",it({ref:h,class:c,style:{position:"relative",overflow:"hidden"}},i),[(W=t.default)==null?void 0:W.call(t)])}}});const VRe=Object.assign(S_,{install:(e,t)=>{pi(e,t);const i=hi(t);e.component(i+S_.name,S_)}});var FRe=Object.defineProperty,jRe=Object.defineProperties,$Re=Object.getOwnPropertyDescriptors,rz=Object.getOwnPropertySymbols,URe=Object.prototype.hasOwnProperty,WRe=Object.prototype.propertyIsEnumerable,az=(e,t,i)=>t in e?FRe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,HRe=(e,t)=>{for(var i in t||(t={}))URe.call(t,i)&&az(e,i,t[i]);if(rz)for(var i of rz(t))WRe.call(t,i)&&az(e,i,t[i]);return e},GRe=(e,t)=>jRe(e,$Re(t));const tE={Button:un,Link:JF,Typography:pze,Divider:NAe,Grid:Mf,Layout:gke,Space:__,Avatar:Oxe,Badge:Yxe,Calendar:MF,Card:WCe,Carousel:u_e,Collapse:V_e,Comment:V2e,ColorPicker:P2e,Descriptions:RAe,Empty:gu,Image:zTe,Scrollbar:Io,List:Oj,Popover:cE,Statistic:U4e,Table:t5e,Tabs:g5e,Tag:Pb,Timeline:F5e,Tooltip:eo,AutoComplete:yxe,Cascader:__e,Checkbox:Eo,DatePicker:CAe,Form:KPe,Input:mc,InputNumber:Qm,InputTag:CF,Mention:Gke,Radio:sp,Rate:WIe,Select:Mm,Slider:D4e,Switch:Q4e,Textarea:Dj,TimePicker:D5e,Transfer:Q5e,Tree:eE,Upload:bRe,TreeSelect:cze,Alert:Z8,Drawer:FM,Message:HM,Modal:GM,Notification:qM,Popconfirm:IDe,Progress:Fj,Result:s4e,Spin:Do,Skeleton:p4e,Breadcrumb:TSe,Dropdown:oF,Menu:WOe,PageHeader:kDe,Pagination:kP,Steps:Y4e,Affix:W1e,Anchor:Cwe,BackTop:jxe,ConfigProvider:$2e,ResizeBox:Pj,Trigger:$a,Split:z4e,Icon:cz,OverflowList:wRe,Watermark:VRe,VerificationCode:xRe},qRe=(e,t)=>{for(const i of Object.keys(tE))e.use(tE[i],t)},YRe=GRe(HRe({},tE),{Alter:Z8,AnchorLink:a0,AvatarGroup:u0,BreadcrumbItem:Uf,ButtonGroup:Af,Calendar:MF,CardMeta:v0,CardGrid:g0,CarouselItem:y0,CascaderPanel:b0,CheckboxGroup:o0,CollapseItem:w0,DescriptionsItem:P0,WeekPicker:C0,MonthPicker:_0,YearPicker:M0,QuarterPicker:E0,RangePicker:A0,Doption:Vh,Dgroup:d0,Dsubmenu:h0,DropdownButton:p0,FormItem:k0,Row:Hf,Col:Gf,GridItem:O0,ImagePreview:Fh,ImagePreviewAction:bb,ImagePreviewGroup:qf,InputGroup:Mh,InputSearch:Ng,InputPassword:Vg,LayoutHeader:D0,LayoutContent:I0,LayoutFooter:L0,LayoutSider:B0,ListItem:z0,ListItemMeta:R0,MenuItem:N0,MenuItemGroup:V0,SubMenu:Yf,RadioGroup:m0,Option:id,Optgroup:Wf,SkeletonLine:$0,SkeletonShape:U0,Countdown:W0,Step:H0,Thead:Kf,Td:ec,Th:Qf,Tr:Gl,Tbody:Zf,TableColumn:G0,TabPane:q0,TimelineItem:$h,TypographyParagraph:Pf,TypographyTitle:Y0,TypographyText:X0,install:qRe,addI18nMessages:O7,useLocale:D7,getLocale:I7,useFormItem:Wr});function la(e,t,i){e.component(t,i),console.log(`v-ui auto register ${t}`)}const XRe={install(e){la(e,"v-image",Z0),la(e,"v-icon",K0),la(e,"v-animate",fh),la(e,"v-blur-in-animate",AW),la(e,"v-around-banner",hz),la(e,"v-text-center",Q0),la(e,"v-text-statistic",pz),la(e,"v-image-card",Dz),la(e,"v-typed-text",CW),la(e,"v-button",oW),la(e,"v-more-button",vW),la(e,"v-text-staggered-animate",aH),la(e,"v-interactive-card",oH),la(e,"v-spline",i1e),la(e,"v-text-spotlight",s1e),la(e,"v-text-gradient-color",c1e),la(e,"v-text-path",g1e),la(e,"v-text-typing",S1e),la(e,"v-text-rain",M1e),la(e,"v-background",P1e),la(e,"v-background-line",z1e),la(e,"v-text-line",I1e),e.use(YRe)}},QRe=Object.freeze(Object.defineProperty({__proto__:null,VAnimate:fh,VAroundBanner:hz,VIcon:K0,VImage:Z0,VImageCard:Dz,VTextCenter:Q0,VTextStatistic:pz,default:XRe,useScrollAnimate:gW},Symbol.toStringTag,{value:"Module"}));export{du as c,fc as g,QRe as i};
